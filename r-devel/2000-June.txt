From bolker@zoo.ufl.edu  Thu Jun  1 00:10:41 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:10:41 -0400 (EDT)
Subject: [Rd] legend with multiple columns
Message-ID: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>


  I have made a minor hack to "legend" (in R 1.0.0, but I didn't notice
any changes to legend in the 1.0.1 NEWS) to allow the legend to be
formatted in multiple columns, or horizontally (number of columns <-
number of legend items).  (I find this helpful when I have lots of legend
items and not a lot of vertical space to squeeze the legend into.)
  (Another hack I've considered is allowing location to be specified more
flexibly, but I haven't bothered so far.)

  I haven't stringently tested it, but it seems to work.

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

PATCHES to legend.Rd and legend.R:

*** legend2.txt	Wed May 31 14:45:18 2000
--- legend2.R	Wed May 31 15:02:22 2000
***************
*** 1,7 ****
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
! 	      bg = par("bg"), cex = 1,
!               xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!               text.width = NULL, merge = do.lines && has.pch, trace = FALSE)
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
--- 1,9 ----
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
!                        bg = par("bg"), cex = 1,
!                        xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!                        text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
!                        ncol=1, horiz =FALSE)
!   ## BB hacked for multiple columns
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
***************
*** 67,72 ****
--- 69,78 ----
      do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
      n.leg <- length(legend)
  
+     if (horiz && ncol!=1) warning("horizontal specification overrides number of columns")
+     if (horiz) ncol <- n.leg
+     n.legpercol <- ceiling(n.leg / ncol)  ## legends per column
+ 
      if(has.pch <- !missing(pch)) {
  	if(is.character(pch) && nchar(pch[1]) > 1) {
              if(length(pch) > 1)
***************
*** 98,108 ****
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.leg * ychar + yc
!         w <- text.width + (1.5 + x.intersp) * xchar
!         if(!missing(fill))      w <- w + dx.fill
!         if(has.pch && !merge)   w <- w + dx.pch
!         if(do.lines)		w <- w + (2+x.off) * xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
--- 104,115 ----
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.legpercol * ychar + yc
!         w0 <- text.width + (x.intersp+1) * xchar
!         if(!missing(fill))      w0 <- w0 + dx.fill
!         if(has.pch && !merge)   w0 <- w0 + dx.pch
!         if(do.lines)		w0 <- w0 + (2+x.off) * xchar
!         w <- w0*ncol+xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
***************
*** 112,119 ****
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + xchar
!     yt <- top - (1:n.leg) * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)
--- 119,126 ----
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + (w0*rep(0:(ncol-1),rep(n.legpercol,ncol)))[1:n.leg] + xchar
!     yt <- top - rep(1:n.legpercol,ncol)[1:n.leg] * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)

*** legend.Rd.old	Wed May 31 19:02:55 2000
--- legend.Rd	Wed May 31 19:05:14 2000
***************
*** 43,48 ****
--- 43,52 ----
      Defaults to the proper value computed by \code{\link{strwidth}(legend)}.}
    \item{merge}{logical; if \code{TRUE}, ``merge'' points and lines but
      not filled boxes.  Defaults to \code{TRUE} if there are points and lines.}
+   \item{ncol}{the number of columns in which to set the legend item (default is 1,
+       a vertical legend.}
+   \item{horiz}{logical; if \code{TRUE}, set the legend horizontally rather than
+      vertically (specifying \code{horiz} overrides the \code{ncol} specification).}
  }
  \description{
    This function can be used to add legends to plots.  Note that a call

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jun  1 00:30:05 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:30:05 -0400 (EDT)
Subject: [Rd] legend with multiple columns
In-Reply-To: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.10.10005311929350.3397-100000@bolker.zoo.ufl.edu>


  oops, replying to my own message.  I notice there's a typo: "item"
should be "items" in the description of the "ncol" argument ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  1 07:24:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)
Subject: [Rd] read.table and strip.white
In-Reply-To: <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>

On Wed, 31 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley wrote:
> 
> > > [...]
> 
> > I was rather surprised here, and this is not what the prototype does:
> > 
> >   .col1. .col2. .col3.
> > 1      1      1      1
> > 2      2      2      2
> > 
> > Should not strip.white be true for the header line?
> 
> If there are no compatibility problems, setting it to TRUE would be
> useful ...
> But compatibility is an important point, especially in read.table(.), I
> think. Many R users have got their own functions using read.table(.), I
> suppose. Maybe changing the defaults could break anything?

That's tantamount to saying we should not fix bugs because users might be
relying on the undocumented and unintended behaviour!  Yes, changing this
could change things: for a start the V&R MASS datasets would load correctly
on R without R-specific editing.  Does anyone seriously intend to have
heading spaces in their column names in a data frame? Especially as those
are not S variable names, and as you see S-PLUS (but not R) does enforce
that.  (read.table circumvents that by not using the class
constructor, but S-PLUS has an explicit call to make.names lacking in R.)

I am inclined to make the change _and_ to check the column names.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  1 22:00:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2000 23:00:28 +0200
Subject: [Rd] read.table and strip.white
In-Reply-To: Prof Brian D Ripley's message of "Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>
Message-ID: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 31 May 2000, Uwe Ligges wrote:
> 
> > Prof Brian Ripley wrote:
> > 
> > > > [...]
> > 
> > > I was rather surprised here, and this is not what the prototype does:
> > > 
> > >   .col1. .col2. .col3.
> > > 1      1      1      1
> > > 2      2      2      2
> > > 
> > > Should not strip.white be true for the header line?
> > 
> > If there are no compatibility problems, setting it to TRUE would be
> > useful ...
> > But compatibility is an important point, especially in read.table(.), I
> > think. Many R users have got their own functions using read.table(.), I
> > suppose. Maybe changing the defaults could break anything?
> 
> That's tantamount to saying we should not fix bugs because users might be
> relying on the undocumented and unintended behaviour!  Yes, changing this
> could change things: for a start the V&R MASS datasets would load correctly
> on R without R-specific editing.  Does anyone seriously intend to have
> heading spaces in their column names in a data frame? Especially as those
> are not S variable names, and as you see S-PLUS (but not R) does enforce
> that.  (read.table circumvents that by not using the class
> constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> 
> I am inclined to make the change _and_ to check the column names.

I tend to agree, recently having had dealings with an SPSS-created
.cvs file with "Height SDS" and so on as variable names. However, it
would seem that the prototype *does* read the leading whitespace and
replaces it with a dot while fixing the names, no? I don't disagree
that we're probably better off without that effect, but if we're going
for compatibility.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Fri Jun  2 01:08:40 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Fri, 2 Jun 2000 02:08:40 +0200 (MET DST)
Subject: [Rd] problem loading packages (PR#559)
Message-ID: <200006020008.CAA03727@pubhealth.ku.dk>

Dear R team,

I had a strange problem that appeared suddenly, and which I'd like to
to mention in case it is of interest (although I suspect that I
may have unwittingly done something dumb: if so please accept my apology)

> library(ctest)      ## or any package other than "oz" that I tried
Error in as.character(table) : Object ".Dyn.libs" not found
> traceback()
[1] "as.character(table)"                "match(chname, 
.Dyn.libs)"          
[3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
package)"  
[5] "library(ctest)"                    

I traced the problem to my .RData file, and specifically to ".AutoloadEnv"

> ls(all.names=TRUE)
 [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
 [4] ".Machine"            ".Platform"           ".PostScript.Options"
 [7] ".Provided"           ".Random.seed"        ".Traceback"         
[10] ".lib.loc"           

I removed the above, one at a time, and tried loading a library.  It
worked after I removed  ".AutoloadEnv".  I confirmed it by checking
that R works normally if I only remove ".AutoloadEnv".  I don't know
what could have caused the problem in the first place.  The contents
of ".AutoloadEnv" are shown below: 

> .AutoloadEnv
<environment: 0x40691ddc>
attr(,"name")
[1] "Autoloads"

> rm(".AutoloadEnv")
> library(gee)
> library(nlme)
Loading required package: nls 


Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 06:48:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 06:48:55 +0100 (BST)
Subject: [Rd] read.table and strip.white
In-Reply-To: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006020639510.1330-100000@auk.stats>

On 1 Jun 2000, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > On Wed, 31 May 2000, Uwe Ligges wrote:
> > 
> > > Prof Brian Ripley wrote:
> > > 
> > > > > [...]
> > > 
> > > > I was rather surprised here, and this is not what the prototype does:
> > > > 
> > > >   .col1. .col2. .col3.
> > > > 1      1      1      1
> > > > 2      2      2      2
> > > > 
> > > > Should not strip.white be true for the header line?
> > > 
> > > If there are no compatibility problems, setting it to TRUE would be
> > > useful ...
> > > But compatibility is an important point, especially in read.table(.), I
> > > think. Many R users have got their own functions using read.table(.), I
> > > suppose. Maybe changing the defaults could break anything?
> > 
> > That's tantamount to saying we should not fix bugs because users might be
> > relying on the undocumented and unintended behaviour!  Yes, changing this
> > could change things: for a start the V&R MASS datasets would load correctly
> > on R without R-specific editing.  Does anyone seriously intend to have
> > heading spaces in their column names in a data frame? Especially as those
> > are not S variable names, and as you see S-PLUS (but not R) does enforce
> > that.  (read.table circumvents that by not using the class
> > constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> > 
> > I am inclined to make the change _and_ to check the column names.
> 
> I tend to agree, recently having had dealings with an SPSS-created
> .cvs file with "Height SDS" and so on as variable names. However, it
> would seem that the prototype *does* read the leading whitespace and
> replaces it with a dot while fixing the names, no? I don't disagree
> that we're probably better off without that effect, but if we're going
> for compatibility.

No, those are the quotes being converted to `.'  The original example
was

"col1", "col2", "col3"

Now in R the quoting mechanism removes the quotes, but with quote=""
one (now) gets X.col1. etc.  S-PLUS does not have the quoting mechanism,
and leading spaces just disappear (as shown in my original posting).

I've added this in, so now read.table has check.names=TRUE and
strip.white=FALSE arguments, and the header line is always stripped
but only converted if check.names is true.  If you want leading spaces
in the col names, you will need to use quotes and check.names=FALSE,
but you can still do it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 20:34:36 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
Message-ID: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>


I just tried the rsync version of R-1.1.0 on one of my alphas:
It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
but make check stops in base-Ex.R at

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> stopifnot(abs(X - s$u %*% D %*% t(s$v)) < Eps)#  X = U D V'
Error: abs(X - s$"u" %*% D %*% t(s$"v")) < Eps is not TRUE
Execution halted

if I repeat all the svd tests manually I get:

>
> hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
> str(X <- hilbert(9)[,1:6])
 num [1:9, 1:6] 1.000 0.500 0.333 0.250 0.200 ...
> str(s <- svd(X))
List of 3
 $ d: num [1:6] 1.67e+00 2.77e-01 2.22e-02 1.08e-03 3.24e-05 ...
 $ u: num [1:9, 1:6] -0.724 -0.428 -0.312 -0.248 -0.206 ...
 $ v: num [1:6, 1:6] -0.736 -0.443 -0.327 -0.263 -0.220 ...
> Eps <- 10 * .Machine$double.eps
> D <- diag(s$d)
> abs(X - s$u %*% D %*% t(s$v)) < Eps
      [,1] [,2] [,3] [,4] [,5] [,6]
 [1,] TRUE TRUE TRUE TRUE TRUE TRUE
 [2,] TRUE TRUE TRUE TRUE TRUE TRUE
 [3,] TRUE TRUE TRUE TRUE TRUE TRUE
 [4,] TRUE TRUE TRUE TRUE TRUE TRUE
 [5,] TRUE TRUE TRUE TRUE TRUE TRUE
 [6,] TRUE TRUE TRUE TRUE TRUE TRUE
 [7,] TRUE TRUE TRUE TRUE TRUE TRUE
 [8,] TRUE TRUE TRUE TRUE TRUE TRUE
 [9,] TRUE TRUE TRUE TRUE TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,] TRUE TRUE TRUE TRUE TRUE TRUE
[2,] TRUE TRUE TRUE TRUE TRUE TRUE
[3,] TRUE TRUE TRUE TRUE TRUE TRUE
[4,] TRUE TRUE TRUE TRUE TRUE TRUE
[5,] TRUE TRUE TRUE TRUE TRUE TRUE
[6,] TRUE TRUE TRUE TRUE TRUE TRUE
> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1]  [,2]
[1,] TRUE  TRUE
[2,] TRUE  TRUE
[3,] TRUE  TRUE
[4,] TRUE  TRUE
[5,] TRUE  TRUE
[6,] TRUE FALSE
[7,] TRUE  TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
      [,1] [,2]
[1,] FALSE TRUE
[2,]  TRUE TRUE

and the errors are:

> abs(X - s$u %*% D %*% t(s$v)) - Eps
              [,1]          [,2]
[1,] -2.109424e-15 -2.220446e-16
[2,] -1.998401e-15 -8.881784e-16
[3,] -2.220446e-15 -1.776357e-15
[4,] -1.998401e-15 -1.332268e-15
[5,] -1.998401e-15 -1.332268e-15
[6,] -1.998401e-15  4.440892e-16
[7,] -1.332268e-15 -2.220446e-15
> abs(D - t(s$u) %*% X %*% s$v) - Eps
              [,1]          [,2]
[1,]  3.108624e-15 -8.881784e-16
[2,] -1.165734e-15 -2.220446e-15

4.440892e-16 and 3.108624e-15 

Eps was: 
> Eps
[1] 2.220446e-15
This seems to be ok, I tried in Fortran

      EPSMCH=DLAMCH('E')
      WRITE(*,*)"eps:",EPSMCH

and got 
 eps:  2.22044605E-16

I compiled --whithout-dxml, so I'm not using any special numeric library.

When I comment out the few lines for svd the tests from base-Ex.R complete
successfully.

All other tests succeed (other libraries and strict and sloppy specific
tests)


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  2 21:07:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 2000 22:07:45 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: Albrecht Gebhardt's message of "Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)"
References: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>

Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

> > abs(X - s$u %*% D %*% t(s$v)) - Eps
>               [,1]          [,2]
> [1,] -2.109424e-15 -2.220446e-16
> [2,] -1.998401e-15 -8.881784e-16
> [3,] -2.220446e-15 -1.776357e-15
> [4,] -1.998401e-15 -1.332268e-15
> [5,] -1.998401e-15 -1.332268e-15
> [6,] -1.998401e-15  4.440892e-16
> [7,] -1.332268e-15 -2.220446e-15
> > abs(D - t(s$u) %*% X %*% s$v) - Eps
>               [,1]          [,2]
> [1,]  3.108624e-15 -8.881784e-16
> [2,] -1.165734e-15 -2.220446e-15
> 
> 4.440892e-16 and 3.108624e-15 
> 
> Eps was: 
> > Eps
> [1] 2.220446e-15
...
>  eps:  2.22044605E-16

So one of the calculations end up at about 5.3e-15 which is over 20
times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
Alpha hardware doesn't have the extended precision of Intel FPUs but
does this look reasonable enough that we should just use a bigger Eps?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 21:22:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 21:22:43 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006022118070.4372-100000@auk.stats>

On 2 Jun 2000, Peter Dalgaard BSA wrote:

> Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:
> 
> > > abs(X - s$u %*% D %*% t(s$v)) - Eps
> >               [,1]          [,2]
> > [1,] -2.109424e-15 -2.220446e-16
> > [2,] -1.998401e-15 -8.881784e-16
> > [3,] -2.220446e-15 -1.776357e-15
> > [4,] -1.998401e-15 -1.332268e-15
> > [5,] -1.998401e-15 -1.332268e-15
> > [6,] -1.998401e-15  4.440892e-16
> > [7,] -1.332268e-15 -2.220446e-15
> > > abs(D - t(s$u) %*% X %*% s$v) - Eps
> >               [,1]          [,2]
> > [1,]  3.108624e-15 -8.881784e-16
> > [2,] -1.165734e-15 -2.220446e-15
> > 
> > 4.440892e-16 and 3.108624e-15 
> > 
> > Eps was: 
> > > Eps
> > [1] 2.220446e-15
> ...
> >  eps:  2.22044605E-16
> 
> So one of the calculations end up at about 5.3e-15 which is over 20
> times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
> Alpha hardware doesn't have the extended precision of Intel FPUs but
> does this look reasonable enough that we should just use a bigger Eps?

Other hardware with standard IEEE arithmetic succeeds. But I think
Eps = 100 * .Machine$double.eps would be adequate.  My Solaris box gets up
to 1.77e-15.  I've just committed 100 * .Machine$double.eps.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:21:42 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:21:42 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022229570.8086-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > 
> > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > .........
> > 
> > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > 
> 
> Sorry I mixed something up in my report: In this compile I used the alpha
> specific DXML library, in my rpms I omit it with --without-dxml (because
> it sometimes crashes). I will try once more now without dxml, may be this
> changes something, don't know if it gets used at all in the svd code.
> 

That was the reason. Now without DXML I pass the test without modifying
Eps:

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE
[3,] TRUE TRUE
[4,] TRUE TRUE
[5,] TRUE TRUE
[6,] TRUE TRUE
[7,] TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE


So may be it is better do disable dxml support by default in ./configure?

The following patch should do this:
--- configure.in.orig        Fri Jun  2 23:10:20 2000
+++ configure.in     Fri Jun  2 23:10:02 2000
@@ -122,7 +122,7 @@
     else
       use_dxml=true;
     fi],
-  use_dxml=true)
+  use_dxml=false)

 AC_ARG_WITH(atlas,
   [  --with-atlas            use ATLAS library (if available)],


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:36:55 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:36:55 +0200 (MET DST)
Subject: [Rd] R.bin (1.1.0) gives segfault
Message-ID: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>


During testing with R-devel on the alpha I just noticed (after misspelling
"bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
variable and should better give an error instead of a crash:

a gdb output snippet:
...
Program received signal SIGSEGV, Segmentation fault.
0x3ff800d6a10 in strcpy ()
(gdb) backtrace
#0  0x3ff800d6a10 in strcpy ()
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
#2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
(gdb) up
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
454         strcpy(X11_DLL, getenv("R_HOME"));

some test for getenv returning NULL followed by exit(1) would be
better. 


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:23:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:23:41 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > 
> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > .........
> > > 
> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > 
> > 
> > Sorry I mixed something up in my report: In this compile I used the alpha
> > specific DXML library, in my rpms I omit it with --without-dxml (because
> > it sometimes crashes). I will try once more now without dxml, may be this
> > changes something, don't know if it gets used at all in the svd code.
> > 
> 
> That was the reason. Now without DXML I pass the test without modifying
> Eps:

Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
Solaris and Windows) are giving errors of 8 or 9 times the 
machine precision, and with dxml you got 10x (and this failed as
Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
and I've given svd's 100x.

[...]

> So may be it is better do disable dxml support by default in ./configure?

Well, what does dxml support do for you?  Making the errors 1x machine
precision larger than without is hardly critical.  On the other hand, I am
not convinced that these optimized blas operations are worthwhile for all
but the most unusual uses of R.

On the other hand, I think it would be worth omitting the check for
-ldxml and -latlas except on appropriate platforms (whatever they are).

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:29:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:29:22 +0100 (BST)
Subject: [Rd] R.bin (1.1.0) gives segfault
In-Reply-To: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030624570.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> 
> During testing with R-devel on the alpha I just noticed (after misspelling
> "bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
> variable and should better give an error instead of a crash:
> 
> a gdb output snippet:
> ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x3ff800d6a10 in strcpy ()
> (gdb) backtrace
> #0  0x3ff800d6a10 in strcpy ()
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> #2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
> (gdb) up
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> 454         strcpy(X11_DLL, getenv("R_HOME"));
> 
> some test for getenv returning NULL followed by exit(1) would be
> better. 

Yes, will do.  That's hardly a misspelling, though, and it is hard to know
how far to go to protect users from negligence.  I did actually think about
that, and think `it can't happen: R_HOME is always set in R.sh'.

We've been here before: that construction crashes on some systems and not
on others.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 07:11:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <200006020008.CAA03727@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>

My guess is that this is due to a very old .RData, as .Dyn.libs
disappeared a couple of years ago, I believe. In any case, 
.GlobalEnv etc are in a .RData of recent provenance.

General warning: do not expect .RData files from alpha or beta versions
of R to work without some cleaning.

On Fri, 2 Jun 2000 rnassar@duke.edu wrote:

> Dear R team,
> 
> I had a strange problem that appeared suddenly, and which I'd like to
> to mention in case it is of interest (although I suspect that I
> may have unwittingly done something dumb: if so please accept my apology)
> 
> > library(ctest)      ## or any package other than "oz" that I tried
> Error in as.character(table) : Object ".Dyn.libs" not found
> > traceback()
> [1] "as.character(table)"                "match(chname, 
> .Dyn.libs)"          
> [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> package)"  
> [5] "library(ctest)"                    
> 
> I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> 
> > ls(all.names=TRUE)
>  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
>  [4] ".Machine"            ".Platform"           ".PostScript.Options"
>  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> [10] ".lib.loc"           
> 
> I removed the above, one at a time, and tried loading a library.  It
> worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> that R works normally if I only remove ".AutoloadEnv".  I don't know
> what could have caused the problem in the first place.  The contents
> of ".AutoloadEnv" are shown below: 
> 
> > .AutoloadEnv
> <environment: 0x40691ddc>
> attr(,"name")
> [1] "Autoloads"
> 
> > rm(".AutoloadEnv")
> > library(gee)
> > library(nlme)
> Loading required package: nls 
> 
> 
> Thank you very much.
> 
> Rashid Nassar
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i586-unknown-linux
>  arch = i586
>  os = linux
>  system = i586, linux
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Jun  3 18:10:13 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 3 Jun 2000 13:10:13 -0400 (EDT)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000603130741.3645A-100000@bio3.acpub.duke.edu>

Dear Professor Ripley,

Thank you for your reply.  What you said reminded me that I have recently 
been searching for some old data, and may well have loaded an old .RData 
file in an attempt to find them.  Thank you again.

Rashid Nassar

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem loading packages (PR#559)
> 
> My guess is that this is due to a very old .RData, as .Dyn.libs
> disappeared a couple of years ago, I believe. In any case, 
> .GlobalEnv etc are in a .RData of recent provenance.
> 
> General warning: do not expect .RData files from alpha or beta versions
> of R to work without some cleaning.
> 
> On Fri, 2 Jun 2000 rnassar@duke.edu wrote:
> 
> > Dear R team,
> > 
> > I had a strange problem that appeared suddenly, and which I'd like to
> > to mention in case it is of interest (although I suspect that I
> > may have unwittingly done something dumb: if so please accept my apology)
> > 
> > > library(ctest)      ## or any package other than "oz" that I tried
> > Error in as.character(table) : Object ".Dyn.libs" not found
> > > traceback()
> > [1] "as.character(table)"                "match(chname, 
> > .Dyn.libs)"          
> > [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> > package)"  
> > [5] "library(ctest)"                    
> > 
> > I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> > 
> > > ls(all.names=TRUE)
> >  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
> >  [4] ".Machine"            ".Platform"           ".PostScript.Options"
> >  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> > [10] ".lib.loc"           
> > 
> > I removed the above, one at a time, and tried loading a library.  It
> > worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> > that R works normally if I only remove ".AutoloadEnv".  I don't know
> > what could have caused the problem in the first place.  The contents
> > of ".AutoloadEnv" are shown below: 
> > 
> > > .AutoloadEnv
> > <environment: 0x40691ddc>
> > attr(,"name")
> > [1] "Autoloads"
> > 
> > > rm(".AutoloadEnv")
> > > library(gee)
> > > library(nlme)
> > Loading required package: nls 
> > 
> > 
> > Thank you very much.
> > 
> > Rashid Nassar
> > 
> > --please do not edit the information below--
> > 
> > Version:
> >  platform = i586-unknown-linux
> >  arch = i586
> >  os = linux
> >  system = i586, linux
> >  status = 
> >  major = 1
> >  minor = 0.1
> >  year = 2000
> >  month = April
> >  day = 14
> >  language = R
> > 
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base
> > 
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pi.broberg@telia.com  Sun Jun  4 15:50:19 2000
From: pi.broberg@telia.com (pi.broberg@telia.com)
Date: Sun, 4 Jun 2000 16:50:19 +0200 (MET DST)
Subject: [Rd] mle (PR#560)
Message-ID: <200006041450.QAA14887@pubhealth.ku.dk>

Full_Name: Per Broberg
Version: 1.00
OS: Windows 98
Submission from: (NULL) (62.20.231.229)


I tested my installation with the following:

> library(lme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
  LoadLibrary failure
> data(Orthodont)
> fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table
> fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table

What is wrong? Could it be the path
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?


Regards 

Per Broberg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jun  4 17:20:39 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 04 Jun 2000 18:20:39 +0200
Subject: [Rd] mle (PR#560)
References: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <393A81D7.68618F59@statistik.uni-dortmund.de>

pi.broberg@telia.com wrote:
> 
> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> I tested my installation with the following:
> 
> > library(lme)

Package lme is _not_ designed for R-1.0.0 (or later).
Try package nlme, available at CRAN.

You should also upgrade to R-1.0.1 (rw1001).

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  4 17:38:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 4 Jun 2000 17:38:42 +0100 (BST)
Subject: [Rd] mle (PR#560)
In-Reply-To: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006041726480.6121-100000@auk.stats>

On Sun, 4 Jun 2000 pi.broberg@telia.com wrote:

> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> 
> I tested my installation with the following:
> 
> > library(lme)

Where did you get that from?  lme has been obselete for a long time.

> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
>   LoadLibrary failure
> > data(Orthodont)
> > fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> > fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> 
> What is wrong? Could it be the path
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?

What I suspect has happened is that you have also installed an old
version of nls on top of the system's copy, and that does not work.
The message probably means that there are unsatisfied entry points, as
there will be with pre-2000 versions.  (No current package version
is older than 2000/1/29.)

My suggestion is that you wipe out your rw1000 installation and install a
fresh copy of rw1001 from CRAN, together with nlme.zip.  And throw away
anything else you have that is from before 2000/1/29.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun  4 19:05:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 4 Jun 2000 20:05:00 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > 
>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > .........
>> > > 
>> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > 
>> > 
>> > Sorry I mixed something up in my report: In this compile I used the alpha
>> > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > it sometimes crashes). I will try once more now without dxml, may be this
>> > changes something, don't know if it gets used at all in the svd code.
>> > 
>> 
>> That was the reason. Now without DXML I pass the test without modifying
>> Eps:

> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.

> [...]

>> So may be it is better do disable dxml support by default in ./configure?

> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

> On the other hand, I think it would be worth omitting the check for
> -ldxml and -latlas except on appropriate platforms (whatever they
> are).

If we can give precise meaning to this, we can of course change the
configure time defaults accordingly.  Any suggestion?

On the other hand, if we turn too much OFF by default, we will need a
mechanism for developers to store their standard R configure arguments
somewhere so that they do not have to retype them all the time ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  5 09:16:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jun 2000 10:16:04 +0200 (CEST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
Message-ID: <14651.25028.7856.544781@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> 
    >>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> > 
    >>> > > 
    >>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
    >>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
    >>> > > .........
    >>> > > 
    >>> > > I compiled --whithout-dxml, so I'm not using any special
    >>> numeric library.
    >>> > > 
    >>> > 
    >>> > Sorry I mixed something up in my report: In this compile I used
    >>> the alpha > specific DXML library, in my rpms I omit it with
    >>> --without-dxml (because > it sometimes crashes). I will try once
    >>> more now without dxml, may be this > changes something, don't know
    >>> if it gets used at all in the svd code.
    >>> > 
    >>> 
    >>> That was the reason. Now without DXML I pass the test without
    >>> modifying Eps:

    >> Nevertheless, the tolerance was too low. Most machines (e.g. Linux,
    >> Solaris and Windows) are giving errors of 8 or 9 times the machine
    >> precision, and with dxml you got 10x (and this failed as Eps was
    >> exactly 10x). eigen's help page has tolerances of 60x and 1000x, and
    >> I've given svd's 100x.

    >> [...]

    >>> So may be it is better do disable dxml support by default in
    >>> ./configure?

    >> Well, what does dxml support do for you?  Making the errors 1x
    >> machine precision larger than without is hardly critical.  On the
    >> other hand, I am not convinced that these optimized blas operations
    >> are worthwhile for all but the most unusual uses of R.

    >> On the other hand, I think it would be worth omitting the check for
    >> -ldxml and -latlas except on appropriate platforms (whatever they
    >> are).

For Atlas, [3-6]86  *are* appropriate from what I've read on the  octave
mailing list about this, and these probably account for 80%+  (?). 
Actually some people there where giving loud praises about
speed improvements for octave using Atlas -- I think not only on Intel&clones.

    KH> If we can give precise meaning to this, we can of course change the
    KH> configure time defaults accordingly.  Any suggestion?

(one of us would have to read Atlas docu).
The improvements for R wouldn't be so big, for one reason because we do NOT
use BLAS consistently
Btw, (commenting to things of yesterday or so):
     BLAS is much more basic than solve(.); solve(.) is Linpack level 
     which is on top of BLAS).

    KH> On the other hand, if we turn too much OFF by default, we will need
    KH> a mechanism for developers to store their standard R configure
    KH> arguments somewhere so that they do not have to retype them all the
    KH> time ...

;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Jun  5 11:25:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 5 Jun 2000 12:25:10 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > > 
> > > > 
> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > > .........
> > > > 
> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > > 
> > > 
> > > Sorry I mixed something up in my report: In this compile I used the alpha
> > > specific DXML library, in my rpms I omit it with --without-dxml (because
> > > it sometimes crashes). I will try once more now without dxml, may be this
> > > changes something, don't know if it gets used at all in the svd code.
> > > 
> > 
> > That was the reason. Now without DXML I pass the test without modifying
> > Eps:
> 
> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.
> 
> [...]
> 
> > So may be it is better do disable dxml support by default in ./configure?
> 
> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

I did not make any performance analysis for dxml, of course it should be
better than plain BLAS or LAPACK. But I have it disabled in my setups for
long now, because I ran frequently into troubles with special LAPACK
routines. I remember the case where I used DSYEVX (selected symmetric
eigenvalues/vectors) in one of my development libraries and got
reproducable crashes, if R was linked with dxml, it was fine without. It
even crashed when I downloaded the dsyevx source from netlib and put it
into my library, R still jumped into DSYEVX from dxml and crashed. 

I guess I could gain much more performance if I could revert from using
gcc/g77 back to DEC cc/f77, but this seems impossible or at least very
difficult (R-1.1.0 compiles with DEC cc/f77 but has problems loading
libjpeg when accessing the X11 code, and crashes with memory allocation
problems in make check if called with --gui=none)


Albrecht


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

.....................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Jun  6 17:17:14 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Jun 2000 18:17:14 +0200 (MET DST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
Message-ID: <200006061617.SAA01315@pubhealth.ku.dk>

Hi!

I tried to use compiled html on the following system:
NT4.0 SP6 (with _old_ IE3), R-1.0.1.

R > help(ls, chmhelp=TRUE)
... but nothing happens ...

>From the R Readme:
   "To make use of this you will need a recent version of 
   Windows or IE4 or later installed, or use the updater hhupd.exe 
   on CRAN at bin/windows/windows-NT/etc."

So I used the updater 'hhupd.exe'. After that (and rebooting, ...):

R > help(ls, chmhelp=TRUE)

Here R crashes (Dr. Watson)....

The same happens on another machine with IE3 _and_ Netscape 4.73.
After installing IE5 everything works fine.

Regards, 
Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun  6 18:04:02 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 6 Jun 2000 19:04:02 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
References: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <200006061704.TAA00374@aragorn.ci.tuwien.ac.at>

>>>>> Albrecht Gebhardt writes:

> On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > > 
>> > > > 
>> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > > .........
>> > > > 
>> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > > 
>> > > 
>> > > Sorry I mixed something up in my report: In this compile I used the alpha
>> > > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > > it sometimes crashes). I will try once more now without dxml, may be this
>> > > changes something, don't know if it gets used at all in the svd code.
>> > > 
>> > 
>> > That was the reason. Now without DXML I pass the test without modifying
>> > Eps:
>> 
>> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
>> Solaris and Windows) are giving errors of 8 or 9 times the 
>> machine precision, and with dxml you got 10x (and this failed as
>> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
>> and I've given svd's 100x.
>> 
>> [...]
>> 
>> > So may be it is better do disable dxml support by default in ./configure?
>> 
>> Well, what does dxml support do for you?  Making the errors 1x machine
>> precision larger than without is hardly critical.  On the other hand, I am
>> not convinced that these optimized blas operations are worthwhile for all
>> but the most unusual uses of R.

> I did not make any performance analysis for dxml, of course it should
> be better than plain BLAS or LAPACK. But I have it disabled in my
> setups for long now, because I ran frequently into troubles with
> special LAPACK routines. I remember the case where I used DSYEVX
> (selected symmetric eigenvalues/vectors) in one of my development
> libraries and got reproducable crashes, if R was linked with dxml, it
> was fine without. It even crashed when I downloaded the dsyevx source
> from netlib and put it into my library, R still jumped into DSYEVX
> from dxml and crashed.

Is that a problem with dxml or with R?  If dxml is buggy and does not
gain performance, then surely we should disable it by default.

> I guess I could gain much more performance if I could revert from
> using gcc/g77 back to DEC cc/f77, but this seems impossible or at
> least very difficult (R-1.1.0 compiles with DEC cc/f77 but has
> problems loading libjpeg when accessing the X11 code, and crashes with
> memory allocation problems in make check if called with --gui=none)

Hmm ... any ideas what is going on there?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun  6 18:49:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Jun 2000 18:49:24 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <200006061617.SAA01315@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>

On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:

> Hi!
> 
> I tried to use compiled html on the following system:
> NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> 
> R > help(ls, chmhelp=TRUE)
> ... but nothing happens ...
> 
> >From the R Readme:
>    "To make use of this you will need a recent version of 
>    Windows or IE4 or later installed, or use the updater hhupd.exe 
>    on CRAN at bin/windows/windows-NT/etc."
> 
> So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> 
> R > help(ls, chmhelp=TRUE)
> 
> Here R crashes (Dr. Watson)....
> 
> The same happens on another machine with IE3 _and_ Netscape 4.73.
> After installing IE5 everything works fine.

Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
of Windows', surely.

Not an R bug, surely?

> 
> Regards, 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 07:31:56 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 08:31:56 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>
Message-ID: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> 
> > Hi!
> >
> > I tried to use compiled html on the following system:
> > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> >
> > R > help(ls, chmhelp=TRUE)
> > ... but nothing happens ...
> >
> > >From the R Readme:
> >    "To make use of this you will need a recent version of
> >    Windows or IE4 or later installed, or use the updater hhupd.exe
> >    on CRAN at bin/windows/windows-NT/etc."
> >
> > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> >
> > R > help(ls, chmhelp=TRUE)
> >
> > Here R crashes (Dr. Watson)....
> >
> > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > After installing IE5 everything works fine.
> 
> Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> of Windows', surely.
>
> Not an R bug, surely?


But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
  R > help(ls, chmhelp=TRUE)

Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Maybe this crash of RGui is not really an R bug (?), but it should be
mentioned in the readme, I think.

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun  7 07:38:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Jun 2000 07:38:53 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>

On Wed, 7 Jun 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> > 
> > On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> > 
> > > Hi!
> > >
> > > I tried to use compiled html on the following system:
> > > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> > >
> > > R > help(ls, chmhelp=TRUE)
> > > ... but nothing happens ...
> > >
> > > >From the R Readme:
> > >    "To make use of this you will need a recent version of
> > >    Windows or IE4 or later installed, or use the updater hhupd.exe
> > >    on CRAN at bin/windows/windows-NT/etc."
> > >
> > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > >
> > > R > help(ls, chmhelp=TRUE)
> > >
> > > Here R crashes (Dr. Watson)....
> > >
> > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > After installing IE5 everything works fine.
> > 
> > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > of Windows', surely.
> >
> > Not an R bug, surely?
> 
> 
> But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
>   R > help(ls, chmhelp=TRUE)

Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?

> Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Microsoft claim that the updater will work on all versions of Windows.
You understood aright, but it seems a false claim on your system.

> Maybe this crash of RGui is not really an R bug (?), but it should be
> mentioned in the readme, I think.

I am reluctant to document Microsoft's errors in the README!  I'll
add  `according to Microsoft'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun  7 06:15:03 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Jun 2000 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006070515.HAA03575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem.

Directory:  Windows

none

Directory:  incoming

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 562 *
Subject: crash after help(..., chmhelp=TRUE)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Tue, 06 Jun 2000 18:18:15 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 10:16:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 11:16:02 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>
Message-ID: <393E12D2.C09BED4A@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

[....]
> > > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > > >
> > > > R > help(ls, chmhelp=TRUE)
> > > >
> > > > Here R crashes (Dr. Watson)....
> > > >
> > > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > > After installing IE5 everything works fine.
> > >
> > > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > > of Windows', surely.

Hm.
I tested the same thing on a NT4.0Sp5 now: R crashes here also (after
using 'hhupd.exe').
So this is no problem with SP6 only! 


Note: I have used german versions of NT4, Sp5 or 6, IE3 and 'hhupd.exe'.

So is there anyone having installed english versions of these (and not
IE4 or 5)? 
Is it possible to reproduce the crash on such a system?

> > > Not an R bug, surely?
> >
> >
> > But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
> >   R > help(ls, chmhelp=TRUE)
> 
> Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?
[.....]

I took a version of SP6 without IE5-update.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Wed Jun  7 11:04:51 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Wed, 07 Jun 2000 12:04:51 +0200
Subject: [Rd] pointer to emacs-lisp
Message-ID: <3.0.5.32.20000607120451.00973100@mail.wsl.ch>

Hi everyone,

Sorry for misusing this list to pose two lisp questions:

1)
Do you have any information on how to join an (x)emacs related news group?

2)  in Xemacs version 20.4
In .emacs I am trying to define a function like

(defun chcom
       (interactive "p")
       (string-rectangle (region-beginning) (region-end) "## "))

but on using it I get the error 

"wrong type argument commandp, chcom".
What is wrong here?

3)
I am having difficulties evaluating lisp expressions in Xemacs ver 20.4
On WinNT I am using Xwindows to work on Solaris 5.5.1.
ESC-ESC will not open a lisp evauation buffer.

Thanks for any help.

--Christian
Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Jun  7 22:06:24 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)
Subject: [Rd] "clipping error in x11()" (PR#564)
Message-ID: <200006072106.XAA13880@pubhealth.ku.dk>


There seems to be an error in the X11 display code:

try:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

it gives a big "V" as expexted. Now zoom in using small xlim and ylim:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
     xlim=c(-5,5),ylim=c(0,5))
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

gives no "V" as expected but kind of a "M".

It occures not only on Digital Unix as indicated below but also on
Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
egcs 2.91.57 on SuSE 5.3.

Interestingly the plots are correct with postscript().

The error does not occur with rwin 1001.


BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
in my tripack package.


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'


--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 22:40:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jun 2000 23:40:43 +0200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: albrecht.gebhardt@uni-klu.ac.at's message of "Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)"
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <x2r9a9qiec.fsf@blueberry.kubism.ku.dk>

albrecht.gebhardt@uni-klu.ac.at writes:

> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".

Seems to be gone in the development sources. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 23:08:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jun 2000 00:08:55 +0200
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <x2og5dqh3c.fsf@blueberry.kubism.ku.dk>


The planned release of R 1.1.0 will be next Thursday. The development
version is going into feature freeze tomorrow, meaning that we'll only
do testing and fix simple bugs during the next week.

Those of you who prefer to find bugs before releases instead of
afterwards may want to try it out and tell us what crawls out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun  8 17:54:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Jun 2000 12:54:48 -0400
Subject: [Rd] require
Message-ID: <393FCFD8.376F067@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 7, 2000)

require() returns NULL rather than TRUE as it previously did if a library is
already attached.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 18:35:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 18:35:47 +0100 (BST)
Subject: [Rd] require
In-Reply-To: <393FCFD8.376F067@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006081834180.12184-100000@auk.stats>

On Thu, 8 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 7, 2000)
> 
> require() returns NULL rather than TRUE as it previously did if a library is
> already attached.

Thanks: it does return TRUE again now (dangling else problem).

It was a side effect of provides() becoming deprecated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cferna3@uic.edu  Thu Jun  8 19:54:19 2000
From: cferna3@uic.edu (Cheryl J Fernandes)
Date: Thu, 8 Jun 2000 13:54:19 -0500 (CDT)
Subject: [Rd] creating models from "Objects" in R's environment
Message-ID: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>

Hi
  I'm trying to create Tree based models in R using the downloadable
package called "tree".

  It is mentioned in the R documentation that Objects are created and 
stored in the R environment by name.

So I have saved all the objects formed during the creation of a tree model
using the R command:

dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");

Here's a snapshot of the output file outputTree.txt:


"hc" <-
structure(list(merge = structure(c(-1, -10, -12, -14, -18, -20, 
-22, -24, -26, -28, -30, -33, -36, -38, -40, -42, -44, -49, -52, 
-54, -56, -58, -60, -62, -64, -66, -68, -72, -74, -77, -80, -84, 
-88, -90, -93, -3, -4, -5, -46, -51, -95, -16, -35, -71, -76, 
80, 76, 83, 81, 85, 82, 89, 86, 88, 91, 93), .Dim = c(94, 2)), 
    height = c(0.00099999999999989, 0.00099999999999989,
0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.0389999999999997, 0.0539999999999998, 0.0943398113205659
    ), order = c(79, 82, 83, 84, 85, 77, 78, 80, 81, 86, 92, 
    95, 93, 94, 90, 91, 87, 88, 89, 56, 57, 58, 59, 60, 61, 62, 
    34, 24, 25, 26, 27, 32, 28, 29), labels = c("1", "2", "3", 
    "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", 
  "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", 
    "95"), method = "complete", call = hclust(d = dist(vegtest), 
        method = "complete"), dist.method = "euclidean"), .Names =
c("merge", 
	"height", "order", "labels", "method", "call", "dist.method"),
class = "hclust")
	"last.warning" <-
	structure(list("NAs introduced by coercion" = NULL), .Names = "NAs
introduced by 	        

coercion")
	"v.tr" <-
	structure(list(frame = structure(list(var = structure(c(2, 1, 
	2, 2, 2, 1, 1, 2, 1, 1, 2, 1, 2, 2, 1, 1, 2, 1, 1), .Label =
c("<leaf>", 
	"Veg"), class = "factor"), n = c(95, 7, 88, 34, 22, 5, 17, 12, 
	5, 7, 54, 5, 49, 23, 9, 14, 26, 7, 19), dev =
c(0.00174753684210526, 
.
..
....


After creating the models, one needs to analyse them with some new data.
Hence, I am now trying to analyze this model with a new set of data.

Is it possible in R to recreate the models by reading from the "Object"
output file.
ie By reading from the above displayed file, can we recreate the tree
model ??

Any help/hints would be highly appreciated.

Thanks much 
Cheryl Fernandes

Cheryl Fernandes
Laboratory of Advanced Computing 
University of Illinois at Chicago.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 20:32:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 20:32:46 +0100 (BST)
Subject: [Rd] creating models from "Objects" in R's environment
In-Reply-To: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>
Message-ID: <Pine.GSO.4.05.10006082028520.27560-100000@auk.stats>

On Thu, 8 Jun 2000, Cheryl J Fernandes wrote:

> Hi
>   I'm trying to create Tree based models in R using the downloadable
> package called "tree".
> 
>   It is mentioned in the R documentation that Objects are created and 
> stored in the R environment by name.
> 
> So I have saved all the objects formed during the creation of a tree model
> using the R command:
> 
> dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");
> 
[..]

> Here's a snapshot of the output file outputTree.txt:

> After creating the models, one needs to analyse them with some new data.
> Hence, I am now trying to analyze this model with a new set of data.
> 
> Is it possible in R to recreate the models by reading from the "Object"
> output file.

Eveything is possible in R: you can program a Turing machine in it
but you might need unlimited memory.

> ie By reading from the above displayed file, can we recreate the tree
> model ??

Yes, but to fit the *formula* to a new dataset (hence a *new* model) you
will need to use update.

I suggest you use save() not dump() to store objects.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jun  8 21:58:34 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 9 Jun 2000 08:58:34 +1200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: <200006072106.XAA13880@pubhealth.ku.dk>; from albrecht.gebhardt@uni-klu.ac.at on Wed, Jun 07, 2000 at 11:06:24PM +0200
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <20000609085834.A5928@stat1.stat.auckland.ac.nz>

On Wed, Jun 07, 2000 at 11:06:24PM +0200, albrecht.gebhardt@uni-klu.ac.at wrote:
> 
> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".
> 
> It occures not only on Digital Unix as indicated below but also on
> Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
> are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
> egcs 2.91.57 on SuSE 5.3.
> 
> Interestingly the plots are correct with postscript().
> 
> The error does not occur with rwin 1001.
> 
> 
> BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
> in my tripack package.

Paul Murrell and I recently made some changes to the clipping code
which seems to have fixed this (and other) problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Fri Jun  9 09:17:05 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090817.KAA29023@pubhealth.ku.dk>

Hi,

This may just be an inconsistency between terminal drivers, rather
than a proper bug.

If the main title of a plot is too wide to all fit on the plot, the
X11 driver prints as much of the title as it can, but the postscript
driver totally ignores the title.

Here's a simple example:

% R
> plot(runif(1000), main="a long xxxxxxxxxxxx title") 
> dev.print(file="test.ps")

On my setup, I needed about 110 x's in the title to reproduce this
problem.  This may seem an unlikely long title, but I found the
problem when using much shorter titles on multiple figures (created
using par(mfrow=c(2,3)) for example).

Perhaps the postscript driver could give a warning if the title is
too long to be printed?  

Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
 - on line 48:
%%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   ../../../unix/devPS.c
the pathname to devPS.c should be: ../../../main/devPS.c


Cheers,

Stephen

> version
         _               
platform alpha-dec-osf4.0
arch     alpha           
os       osf4.0          
system   alpha, osf4.0   
status                   
major    1               
minor    0.1             
year     2000            
month    April           
day      14              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 10:37:22 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 10:37:22 +0100 (BST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090937.KAA25854@toucan.stats.ox.ac.uk>


> From: stephen@anc.ed.ac.uk
> Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
> 
> Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
>  - on line 48:
> %%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   
../../../unix/devPS.c
> the pathname to devPS.c should be: ../../../main/devPS.c

Already corrected, thank you.

(More on the rest later).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 12:12:37 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 12:12:37 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <200006091112.MAA04174@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 08 Jun 2000 00:08:55 +0200
> 
> The planned release of R 1.1.0 will be next Thursday. The development
> version is going into feature freeze tomorrow, meaning that we'll only
> do testing and fix simple bugs during the next week.
> 
> Those of you who prefer to find bugs before releases instead of
> afterwards may want to try it out and tell us what crawls out.

For anyone wanting to try the release-candidate Windows version,
it is up at

	http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

Warning: this is cross-compiled and so lacks a few things including
CHM / Windows help and the bitmap DLL.  The release version will be
natively compiled.

In particular, we would be grateful if anyone can try it on a Pentium
I/II/III on Win2000:  we know there are problems on Athlon cpus on
Win2000.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Jun  9 15:33:11 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Fri, 9 Jun 2000 16:33:11 +0200 (MET DST)
Subject: [Rd] Disappearing values (PR#551)
Message-ID: <200006091433.QAA05945@pubhealth.ku.dk>

Dear all,

Uwe e-mailed me yesterday about the problems some time ago. I had hoped
someone would have a look at our computers, but due to some unfortunate
circumstances, it hasn't happened. However, it seems unlikely that it is
connected to a specific piece of hardware. It could be an
architecture-dependent problem though. I also had a word with those who
did the installation of R, and they had some problems when tuning it for
alphaev6, but it all went smoothly when tuning for alphaev56, and that is
the build I'm running. This is basically the stuff I sent to Uwe
yesterday. 

I have been testing it on three different machines:
alnair, a XP1000 with a 500MHz alphaev6 processor and 619 MB RAM
rukbat, a PWS500au with a 500MHz alphaev56 processor with 238 MB RAM
mirfak, a DEC255/233 with a 233MHz (?) alphaev4 (?) processor with 245MB
(RAM is according to top). All show the same problems consistently. 
I'm not using the match.arg()-approach anymore, BTW, I have moved on to
some object-oriented stuff. 

However, some apparently related (?) problem occurs. Yesterday, I started
working on some simulations I have done (with R of course! :-) ). I did
exactly the same operations on rukbat and mirfak (using ESS-elsewhere
while sitting on alnair), starting with the same calls, vsize=80M,
nsize=800k, no-restore. I loaded a 58MB file with load, and there are a
few variables with arrays of htest-objects. Then, I did 
as.vector(sapply(chisq5M11000, function(x) x$statistic))
to get a vector of the test statistics. Now, occasionally, it prints a
nice vector with all the values intact. Occasionally, one of the entries
are NULL, and then it prints a list, e.g.
[[892]]
X-squared 
 1933.637 

[[893]]
NULL

[[894]]
X-squared 
 1741.416 

The funny thing is that when I did this sapply thing on mirfak and rukbat,
it happened on at exactly the same place on the two machines. First,
mirfak would produce a vector then rukbat would produce a vector, mirfak
would give a list where element # 238 (if I remember correctly) was NULL,
rukbat would produce a list with element #238 NULL, both would produce a
vector again, both would produce a list with element #602 NULL, etc... 

This is pretty much what I've got now... :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  9 19:29:34 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Jun 2000 14:29:34 -0400
Subject: [Rd] w0 in legend
Message-ID: <3941378E.F64657EA@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 8, 2000)
there seems to be a problem with an internal variable w0 in legend that
generates the following new error:

Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
 Object "w0" not found
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  9 20:08:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 2000 21:08:07 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Paul Gilbert's message of "Fri, 09 Jun 2000 14:29:34 -0400"
References: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >

Looks like it isn't getting set in the nx==2 case. But what is the
correct value here, 0?

    if (nx == 2) {
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top <- y[2]
        w <- diff(x)
        h <- diff(y)
        x <- mean(x)
        y <- mean(y)
        if (missing(xjust)) 
            xjust <- 0.5
        if (missing(yjust)) 
            yjust <- 0.5
    }
    else {
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if (!missing(fill)) 
            w0 <- w0 + dx.fill
        if (has.pch && !merge) 
            w0 <- w0 + dx.pch
        if (do.lines) 
            w0 <- w0 + (2 + x.off) * xchar
        w <- ncol * w0 + 0.5 * xchar
        left <- x - xjust * w
        top <- y + (1 - yjust) * h
    }


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:21:14 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:21:14 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>

 
  Ooops.  This is my fault.
  When extending legend() to do multiple columns, I neglected to do
anything about the case where the user specified both sides of the box
(which is actually an easy case).

  Something like the following patch should take care of it, although I
don't know if the version of legend in the unstable package is exactly the
same as what I have here.  It's pretty straightforward, though.

*** legend.R.old Tue Jun  6 18:31:11 2000
--- legend.R	 Fri Jun  9 16:08:55 2000
***************
*** 95,100 ****
--- 95,101 ----
          top  <- y[2]
          w <- diff(x)# width
          h <- diff(y)# height
+         w0 <- w/ncol # column width
  
  	x <- mean(x)
  	y <- mean(y)


  Also, here's a set of examples that tests the full box specification,
with one or two columns.  This could go in the examples for legend() but
need not (but if it had been there running the examples would have found
the bug!)

set.seed(1001)
x1 <- runif(30)
x2 <- rnorm(30,mean=0.5)
x3 <- rnorm(30,mean=0.5,sd=0.05)
matplot(1:30,cbind(x1,x2,x3),col=1:3,pch=1:3)
legstr <- c("foo","bar","bletch")
legend(c(20,par("usr")[2]),c(2.0,par("usr")[4]),
       legstr,
       bg="gray",
       col=1:3,
       pch=1:3)
legend(c(20,par("usr")[2]),c(1.6,2.0),
       legstr,
       bg="lightblue",
       col=1:3,
       pch=1:3,
       ncol=2)


On Fri, 9 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:26:10 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:26:10 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006091624400.27056-100000@bolker.zoo.ufl.edu>

On 9 Jun 2000, Peter Dalgaard BSA wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > In Version 1.1.0 Under development (unstable) (June 8, 2000)
> > there seems to be a problem with an internal variable w0 in legend that
> > generates the following new error:
> > 
> > Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
> >  Object "w0" not found
> > >
> 
> Looks like it isn't getting set in the nx==2 case. But what is the
> correct value here, 0?

  No, w/ncol; w0 is the width of a single column within the legend.  If
n==1 it reduces to w.
  Again, sorry about the bug.

> 
>     if (nx == 2) {
>         x <- sort(x)
>         y <- sort(y)
>         left <- x[1]
>         top <- y[2]
>         w <- diff(x)

          w0 <- w/ncol

>         h <- diff(y)
>         x <- mean(x)
 [snip]

--
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 10 00:13:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2000 01:13:52 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Ben Bolker's message of "Fri, 9 Jun 2000 16:21:14 -0400 (EDT)"
References: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>           w <- diff(x)# width
>           h <- diff(y)# height
> +         w0 <- w/ncol # column width
>   
>   	x <- mean(x)
>   	y <- mean(y)

Thanks, committed. 

>   Also, here's a set of examples that tests the full box specification,
> with one or two columns.  This could go in the examples for legend() but
> need not (but if it had been there running the examples would have found
> the bug!)

As a principle, we don't add tests or examples during a feature
freeze. Yours looks harmless, but there have been cases where a new
example caused "make check" to fail (on someone else's machine), and
we have a strict policy of not committing changes without running
"make check" at this stage. It's being paranoid, but simple rules are
easier to follow, and I think it is important for the general
stability to avoid disturbing the release process at this stage. We
can put your examples in the 1.2 tree when we get to that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Sat Jun 10 18:05:46 2000
From: kjetilh@umsanet.edu.bo (halvorsen)
Date: Sat, 10 Jun 2000 13:05:46 -0400
Subject: [Rd] R 1.1.0 going into feature freeze
References: <200006091112.MAA04174@toucan.stats.ox.ac.uk>
Message-ID: <39427569.26DA3E8A@umsanet.edu.bo>

In rw1001 the html help file  chisq.test.html is missing.

Kjetil Halvorsen

Prof Brian Ripley wrote:

> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 08 Jun 2000 00:08:55 +0200
> >
> > The planned release of R 1.1.0 will be next Thursday. The development
> > version is going into feature freeze tomorrow, meaning that we'll only
> > do testing and fix simple bugs during the next week.
> >
> > Those of you who prefer to find bugs before releases instead of
> > afterwards may want to try it out and tell us what crawls out.
>
> For anyone wanting to try the release-candidate Windows version,
> it is up at
>
>         http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
>
> Warning: this is cross-compiled and so lacks a few things including
> CHM / Windows help and the bitmap DLL.  The release version will be
> natively compiled.
>
> In particular, we would be grateful if anyone can try it on a Pentium
> I/II/III on Win2000:  we know there are problems on Athlon cpus on
> Win2000.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:17:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:17:48 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <39427569.26DA3E8A@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>

On Sat, 10 Jun 2000, halvorsen wrote:

> In rw1001 the html help file  chisq.test.html is missing.

That I believe to be an incorrect report, and I also do not see the
connection with the subject.  (Bug reports on R 1.0.1 should go to 
R-bugs, still.)

The file *is* there on the version of rw1001 I downloaded and in the
pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
to have loaded that to get the help, or specify it explicitly in the call
to help.

I suspect the confusion arises because someone decided to make chisq.test
an autoload, and so the function appears to be available from base when it
is not really:

> ?chisq.test
Error in help(chisq.test) : No documentation for `chisq.test'
> junk <- chisq.test # loads package ctest silently
> ?chisq.test
chisq.test               package:ctest               R Documentation
 ...

If this is not what happens on your version of rw1001, please try
re-installing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:26:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:26:19 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10006101823500.18950-100000@auk.stats>

On Sat, 10 Jun 2000, Prof Brian D Ripley wrote:

> On Sat, 10 Jun 2000, halvorsen wrote:
> 
> > In rw1001 the html help file  chisq.test.html is missing.
> 
> That I believe to be an incorrect report, and I also do not see the
> connection with the subject.  (Bug reports on R 1.0.1 should go to 
> R-bugs, still.)
> 
> The file *is* there on the version of rw1001 I downloaded and in the
> pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
> to have loaded that to get the help, or specify it explicitly in the call
> to help.

Just to add: if you use help.start() or HTML help from the file menu
the file *is* in the index list and *is* found by the search engine,
as both those routes cover all packages installed in rw1001/library.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jun 11 19:36:22 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 11 Jun 2000 14:36:22 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006111435440.28671-100000@bolker.zoo.ufl.edu>

On 10 Jun 2000, Peter Dalgaard BSA wrote:
> 
> As a principle, we don't add tests or examples during a feature
> freeze. Yours looks harmless, but there have been cases where a new
> example caused "make check" to fail (on someone else's machine), and
> we have a strict policy of not committing changes without running
> "make check" at this stage. It's being paranoid, but simple rules are
> easier to follow, and I think it is important for the general
> stability to avoid disturbing the release process at this stage. We
> can put your examples in the 1.2 tree when we get to that.

  Sounds entirely sensible -- particularly given my culpability in
introducing a new bug recently ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From george@cpqam.fiocruz.br  Mon Jun 12 12:10:29 2000
From: george@cpqam.fiocruz.br (george@cpqam.fiocruz.br)
Date: Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121110.NAA15979@pubhealth.ku.dk>

I try load ctest, and don't have sucess

> library(ctest)
Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
  /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f

What I must to do

I will waiting  your answer

George Diniz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 12:53:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 13:53:14 +0200
Subject: [Rd] ctest not works (PR#567)
In-Reply-To: george@cpqam.fiocruz.br's message of "Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)"
References: <200006121110.NAA15979@pubhealth.ku.dk>
Message-ID: <x24s6z6rpx.fsf@blueberry.kubism.ku.dk>

george@cpqam.fiocruz.br writes:

> I try load ctest, and don't have sucess
> 
> > library(ctest)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
>   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> 
> What I must to do
> 
> I will waiting  your answer

First of all tell us what system you are on. With that information,
all we can say is that that is not what is supposed to happen...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jun 12 12:57:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 12 Jun 2000 12:57:35 +0100 (BST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121157.MAA00504@toucan.stats.ox.ac.uk>


> To: george@cpqam.fiocruz.br
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 Jun 2000 13:53:14 +0200
> 
> george@cpqam.fiocruz.br writes:
> 
> > I try load ctest, and don't have sucess
> > 
> > > library(ctest)
> > Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> > load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
> >   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> > 
> > What I must to do
> > 
> > I will waiting  your answer
> 
> First of all tell us what system you are on. With that information,
> all we can say is that that is not what is supposed to happen...

True, but we can tell you:

This is Linux/Unix not Windows (and not HP either).

That silly symbol name suggests that this is the Fortran bug in RH6.2
we have met before.  If so, the solution is to compile with gcc-2.95.2.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 17:08:10 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 12:08:10 -0400
Subject: [Rd] Depends: R(>= ?)
Message-ID: <39450AEA.A65F25E8@bank-banque-canada.ca>

I am just working through my set of tests for R 1.1.0 and everything
seems to be going fairly well other than a couple of bugs already
reported and fixed.

I previously specified Depends: R(>= 1.0.1). I have been making small
changes to my own code and since I have been doing this with R 1.0.1  I
am fairly sure everything still works with it, but I don't intend to
test this as carefully as R 1.1.0. Should I change "Depends" to indicate
1.1.0?

Now I realize what the "safest" answer would be, but I can see this will
be an ongoing problem and the implication of changing each time is that
my packages always depend on the latest version of R. I can see the
posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
see any possibility for testing every version since R 1.0.1. Should
"Depends" indicate what is "known to be at least necessary" or should it
be something stronger than that?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 18:41:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 19:41:33 +0200
Subject: [Rd] Depends: R(>= ?)
In-Reply-To: Paul Gilbert's message of "Mon, 12 Jun 2000 12:08:10 -0400"
References: <39450AEA.A65F25E8@bank-banque-canada.ca>
Message-ID: <x2u2eyer02.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am just working through my set of tests for R 1.1.0 and everything
> seems to be going fairly well other than a couple of bugs already
> reported and fixed.
> 
> I previously specified Depends: R(>= 1.0.1). I have been making small
> changes to my own code and since I have been doing this with R 1.0.1  I
> am fairly sure everything still works with it, but I don't intend to
> test this as carefully as R 1.1.0. Should I change "Depends" to indicate
> 1.1.0?
> 
> Now I realize what the "safest" answer would be, but I can see this will
> be an ongoing problem and the implication of changing each time is that
> my packages always depend on the latest version of R. I can see the
> posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
> see any possibility for testing every version since R 1.0.1. Should
> "Depends" indicate what is "known to be at least necessary" or should it
> be something stronger than that?

Hmm. We try pretty hard not to change the API and otherwise break
package code after 1.0. I think it should be reasonable if you took a
laid-back attitude and assume that things work as they used to unless
you knowingly access new features. If things turn out to be broken
with earlier versions, then blame the core team and update the version
number. If you do use new features and try to blame us, we'll blame
you back...

It would of course be nice if you kept a version of 1.0.1 around and
checked against it, but checking all intermediate versions would be
overdoing it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 19:33:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 14:33:32 -0400
Subject: [Rd] build buglet
Message-ID: <39452CFB.B218A583@bank-banque-canada.ca>

I use
     R CMD Rdindex man/*.Rd >INDEX
in my makefile to generate an INDEX. When I then use
     R CMD build whatever
the newindex seems to be in a slightly different order, resulting in a
* checking whether index is up-to-date ... NO
(because the result of diff is not empty) and a suggestion to use
--force.
However, --force results in the INDEX in my source directory being
re-written, which means that I can't use it as a dependency for
installing because it is always out of date after I build. But if I
don't use INDEX as a dependency  then my own help system may not be
up-to-date, which will be a problem when I'm working on documentation.

However, if I don't use --force I will always get warnings which I will
tend to ignore, so I won't notice more serious warnings. Is there some
way to guaranty the same order from these two ways for generating INDEX?

Paul Gilbert

(P.S. - I'm not an expert at makefiles but if anyone is interested I am
willing to share a fairly good makefile which I use for maintaining two
packages and two bundles with several packages in them.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 12 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 12 Jun 2000 21:19:13 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39452CFB.B218A583@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>

On Mon, 12 Jun 2000, Paul Gilbert wrote:

> I use
>      R CMD Rdindex man/*.Rd >INDEX
> in my makefile to generate an INDEX. When I then use
>      R CMD build whatever
> the newindex seems to be in a slightly different order, resulting in a
> * checking whether index is up-to-date ... NO
> (because the result of diff is not empty) and a suggestion to use
> --force.
> However, --force results in the INDEX in my source directory being
> re-written, which means that I can't use it as a dependency for
> installing because it is always out of date after I build. But if I
> don't use INDEX as a dependency  then my own help system may not be
> up-to-date, which will be a problem when I'm working on documentation.
> 
> However, if I don't use --force I will always get warnings which I will
> tend to ignore, so I won't notice more serious warnings. Is there some
> way to guaranty the same order from these two ways for generating INDEX?

Set the locale to C?  What are the differences: are they related to sort
orders?  That's the only problem I have seen. (On Solaris en_UK sorts
AaBb... not AB..ab....)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jim.lemon@uts.edu.au  Tue Jun 13 04:17:40 2000
From: jim.lemon@uts.edu.au (jim.lemon@uts.edu.au)
Date: Tue, 13 Jun 2000 05:17:40 +0200 (MET DST)
Subject: [Rd] problem with aperm? (PR#568)
Message-ID: <200006130317.FAA19080@pubhealth.ku.dk>

R version 1.0.1
OS RedHat Linux 6.1

In attempting to test for numeric vectors in a data frame, I tried:

apply(dataframe,2,is.numeric)

and found that it returned FALSE for all vectors whether they were
numeric or not.  I tracked this to the fact that as.array() was
converting the data frame to character vectors, and thought I could
solve it by using array(), which preserved the mode of the columns. 
However, I then got an error from aperm():

Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
must be a vector

even though the second argument tested as a vector.  This happened both
within the apply() function and calling aperm() separately, even if I
explicitly used a numeric vector for the second argument.  I then had a
look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
to give up after trying to work out what CADR and SEXP were.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 07:41:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 07:41:41 +0100 (BST)
Subject: [Rd] problem with aperm? (PR#568)
In-Reply-To: <200006130317.FAA19080@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006130730410.12267-100000@auk.stats>

On Tue, 13 Jun 2000 jim.lemon@uts.edu.au wrote:

> R version 1.0.1
> OS RedHat Linux 6.1
> 
> In attempting to test for numeric vectors in a data frame, I tried:
> 
> apply(dataframe,2,is.numeric)
> 
> and found that it returned FALSE for all vectors whether they were
> numeric or not.  I tracked this to the fact that as.array() was
> converting the data frame to character vectors, and thought I could
> solve it by using array(), which preserved the mode of the columns. 
> However, I then got an error from aperm():

What? arrays are only of one mode. Try

sapply(dataframe, is.numeric)

for what you wanted.  For example,

library(MASS)
data(Cars93)
sapply(Cars93, is.numeric)
      Manufacturer              Model               Type          Min.Price 
             FALSE              FALSE              FALSE               TRUE 
             Price          Max.Price           MPG.city        MPG.highway 
              TRUE               TRUE               TRUE               TRUE 
...


The help page for array says

Arguments:

       x: the array to be used.

and a dataframe is *not* an array (or a matrix).

What did you run to get the following?

> Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
> must be a vector
> 
> even though the second argument tested as a vector.  This happened both
> within the apply() function and calling aperm() separately, even if I
> explicitly used a numeric vector for the second argument.  I then had a
> look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
> to give up after trying to work out what CADR and SEXP were.

Can you please tell us exactly what you did: there is no actual example
of a problem with aperm here!

The error message is too curt: it actually means `must be a vector of the
right length', and I am fairly sure that is your error here. The code

    if (!isVector(perm) || (length(perm) != length(dimsa)))
        error("aperm: invalid second argument, must be a vector");

is not too hard to understand without any knowledge of Scheme (and I have
none either: the internal R language is described in `Writing R
Extensions').


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 16:09:55 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 11:09:55 -0400
Subject: [Rd] build buglet
References: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>
Message-ID: <39464EC3.A3BEDAA5@bank-banque-canada.ca>

>Set the locale to C?  What are the differences: are they related to sort
>orders?  That's the only problem I have seen. (On Solaris en_UK sorts
>AaBb... not AB..ab....)

Yes, the problems are all sort order and it looks like this is the reason,
though I haven't completely figured it out yet. My locale setting is "en_CA" at
the office but "C" when I telework, which was confusing things even more. Can I
assume it is "C" that is used by R CMD build?

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jun 13 16:58:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 13 Jun 2000 16:58:35 +0100 (BST)
Subject: [Rd] build buglet
Message-ID: <200006131558.QAA17119@toucan.stats.ox.ac.uk>

> Date: Tue, 13 Jun 2000 11:09:55 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Set the locale to C?  What are the differences: are they related to sort
> >orders?  That's the only problem I have seen. (On Solaris en_UK sorts
> >AaBb... not AB..ab....)
> 
> Yes, the problems are all sort order and it looks like this is the reason,
> though I haven't completely figured it out yet. My locale setting is "en_CA" 
at
> the office but "C" when I telework, which was confusing things even more. Can 
I
> assume it is "C" that is used by R CMD build?

Depends on your Perl installation, perhaps. I would expect it to
recognize locales if it is recent.   It is more likely that your shell
is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
Makefile, script, whatever.

I got tired of this and set all my machines back to C, but you may not
have that choice.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 19:37:41 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 14:37:41 -0400
Subject: [Rd] build buglet
References: <200006131558.QAA17119@toucan.stats.ox.ac.uk>
Message-ID: <39467F75.42BF88B1@bank-banque-canada.ca>


>> assume it is "C" that is used by R CMD build?

>Depends on your Perl installation, perhaps. I would expect it to
>recognize locales if it is recent.

I'm using Perl 5.004_04 built for sun4-solaris.

>It is more likely that your shell
>is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
>Makefile, script, whatever.

Should I be doing a sort to get the result of Rdindex into the same order as "R
CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 21:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 21:47:30 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39467F75.42BF88B1@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>

On Tue, 13 Jun 2000, Paul Gilbert wrote:

> 
> >> assume it is "C" that is used by R CMD build?
> 
> >Depends on your Perl installation, perhaps. I would expect it to
> >recognize locales if it is recent.
> 
> I'm using Perl 5.004_04 built for sun4-solaris.

Um. Pretty old. May not be built with locale support then. (The current
version, 5.6.0, is two `major' versions on.)

> >It is more likely that your shell
> >is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
> >Makefile, script, whatever.
> 
> Should I be doing a sort to get the result of Rdindex into the same order as "R
> CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

The shell expands the * before Rdindex ever gets hold of it. And what it
does re locales is an installation default (assuming it is a Solaris shell
not bash or tcsh, for both of which NLS support is optional).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhm@math.uio.no  Wed Jun 14 13:15:57 2000
From: bhm@math.uio.no (bhm@math.uio.no)
Date: Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141215.OAA07492@pubhealth.ku.dk>

The help for prcomp on R 1.0.0 states that the component sdev of the
return value is the eigenvalues of the cov matrix.  Am I completely
mistaken, or should this be the _square root_ of the eigenvalues?

Also, the documentation is not very clear about how tol is used to omit
components.  (The _code_ is clear, though. :-)

-- 
B/H

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 14 13:36:13 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2000 14:36:13 +0200
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
In-Reply-To: bhm@math.uio.no's message of "Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)"
References: <200006141215.OAA07492@pubhealth.ku.dk>
Message-ID: <x2aegowibm.fsf@blueberry.kubism.ku.dk>

bhm@math.uio.no writes:

> The help for prcomp on R 1.0.0 states that the component sdev of the
> return value is the eigenvalues of the cov matrix.  Am I completely
> mistaken, or should this be the _square root_ of the eigenvalues?

Yup. Will fix for 1.1.0

> Also, the documentation is not very clear about how tol is used to omit
> components.  (The _code_ is clear, though. :-)

Hmm. Can't think of a concise way of saying this. Hardly something
that needs fixing here and now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jun 14 14:05:38 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 14 Jun 2000 14:05:38 +0100 (BST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141305.OAA28754@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 14 Jun 2000 14:36:13 +0200
> 
> bhm@math.uio.no writes:
> 
> > The help for prcomp on R 1.0.0 states that the component sdev of the
> > return value is the eigenvalues of the cov matrix.  Am I completely
> > mistaken, or should this be the _square root_ of the eigenvalues?
> 
> Yup. Will fix for 1.1.0

I've just fixed rather a lot of typos ....

> > Also, the documentation is not very clear about how tol is used to omit
> > components.  (The _code_ is clear, though. :-)
> 
> Hmm. Can't think of a concise way of saying this. Hardly something
> that needs fixing here and now.

I think I have found a way ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Wed Jun 14 20:45:37 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Wed, 14 Jun 2000 21:45:37 +0200 (MET DST)
Subject: [Rd] extra comma in configure (PR#570)
Message-ID: <200006141945.VAA11555@pubhealth.ku.dk>

Full_Name: Tom Vogels
Version: 1.1.0 (2000/June/14)
OS: Linux
Submission from: (NULL) (128.2.216.84)


There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
look very pretty either when configure reports ",: command not found"
-tom

(This showed up when running configure on a linux machine with gnome enabled.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 14 21:23:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Jun 2000 21:23:44 +0100 (BST)
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: <200006141945.VAA11555@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>

On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:

> Full_Name: Tom Vogels
> Version: 1.1.0 (2000/June/14)
> OS: Linux
> Submission from: (NULL) (128.2.216.84)
> 
> 
> There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> look very pretty either when configure reports ",: command not found"
> -tom

At the end of line 398 in configure.in, I presume.

What other options did you give?  I don't see it on RH6.0 with 

.../configure --with-gnome

but then I don't have atlas.

> (This showed up when running configure on a linux machine with gnome enabled.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 01:47:34 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 14 Jun 2000 20:47:34 -0400
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: Prof Brian D Ripley's message of "Wed, 14 Jun 2000 21:23:44 +0100 (BST)"
References: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>
Message-ID: <87d7lj3h3t.fsf@bavaria.ece.cmu.edu>


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:
> 
> > Full_Name: Tom Vogels
> > Version: 1.1.0 (2000/June/14)
> > OS: Linux
> > Submission from: (NULL) (128.2.216.84)
> > 
> > 
> > There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> > look very pretty either when configure reports ",: command not found"
> > -tom
> 
> At the end of line 398 in configure.in, I presume.
> 
> What other options did you give?  I don't see it on RH6.0 with 
> 
> ../configure --with-gnome
> 
> but then I don't have atlas.

(... I do -- curiosity killed the cat).

Yes, the extra ',' comes from the end of line 398.  I removed it, ran autoconf,
and the comma was gone.  Bingo.

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 15 17:25:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jun 2000 12:25:42 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
Message-ID: <39490386.8029CB0B@bank-banque-canada.ca>

This is a synopsis for the r-devel archives of my solution to the problem that

R CMD Rdindex zzz/man/* >INDEX
and
R CMD build zzz

do not always result in the same order, which causes make problems outlined
further below. The source of the problem was suggested by Brian Ripley:

BDR>The shell expands the * before Rdindex ever gets hold of it. And what it
BDR>does re locales is an installation default (assuming it is a Solaris shell
BDR>not bash or tcsh, for both of which NLS support is optional).

The need to build INDEX separately from using the one generated by build is
so that R INSTALL zzz does not require R CMD build zzz first. This means
that code changes can be tested separately from documentation changes and
vice versa, thus remakes are faster.

INDEX needs to be generated in the same order as produced by
R CMD build or build's diff comparison suggests that the index is out
of date and suggests using --force. Using --force rewrites INDEX which
causes make to think the install is out of date, so the next make always starts
at the beginning again.

The * expansion (in Solaris sh) does not seem to recognize LC (locale)
settings. Sort does, but some of the output of R CMD Rdindex is on two
lines, so sorting the output does not work. It is possible to
   ls -1 man/* | sort
and get the locale sort order, but it does not seem possible to feed this
into "R CMD Rdindex". ( LC_COLLATE is not adequate for sort, LC_ALL is needed.)

The fix is to generate INDEX in the C order imposed by the
 Solaris sh expansion of *, then set LC_ALL=C for R CMD build.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@infiniti.ece.cmu.edu  Thu Jun 15 18:42:33 2000
From: tov@infiniti.ece.cmu.edu (tov@infiniti.ece.cmu.edu)
Date: Thu, 15 Jun 2000 19:42:33 +0200 (MET DST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
Message-ID: <200006151742.TAA25549@pubhealth.ku.dk>

Hi,

  Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
  Linux and Sun.  But AIX, of course, is a problem...

  When linking shared libs, the symbols from libc.a are not found.  I
  apologize for not investigating this further at the moment - they
  may not be properly or not all exported from R.bin.

  Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
  my build directory after running configure.  Then compilation proceeds
  without problems.
  (Alternatively, you could use cc instead of ld to link.)

  Regards,
  -tom
 

P.S. Any reason the status field is empty?  It is stable, right? ;-)

--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 18:57:55 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 15 Jun 2000 13:57:55 -0400
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <87vgzax1wc.fsf@bavaria.ece.cmu.edu>


Hi, I ran the test again with the newly released version of R (1.1) and I
now get the correct eigen values.  ("make check" succeeds.)

The scary part is that I think that I also used gcc+f77 last time and
the libs weren't changed.  Maybe the scary part is that I think...

So the comments that this is compiler specific probably hold.

Thanks,
  -tom


tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 
> Here are the results:
> 
> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> m
>      [,1] [,2]
> [1,]  6.8  2.4
> [2,]  2.4  8.2
> R> eigen(m)
> $values
> [1] 19.281403  6.337993
> 
> $vectors
>           [,1]       [,2]
> [1,] 0.1918866  0.9967987
> [2,] 0.9967987 -0.1918866
> 
> 
> And for comparison, here is what I get on a Sun (with r-stable):

(same results now on AIX 4.3 with R 1.1.0 

> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> eigen (m)
> $values
> [1] 10  5
> 
> $vectors
>      [,1] [,2]
> [1,]  0.6  0.8
> [2,]  0.8 -0.6

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Thu Jun 15 20:24:31 2000
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Thu, 15 Jun 2000 14:24:31 -0500 (EST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.1.0)
Message-ID: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>

I think I reported this bug in the past.  At that time, I was told that
it is a bug of autoconf.

./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
of Alpha EV56), so all the compilation flags were set incorrectly.  I
don't know the right way to fix it (I don't know how autoconf works
yet ...), but the following patch fixes the problem.

Thank you,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA


--- R-1.1.0/tools/config.sub.orig	Thu Jun 15 13:49:01 2000
+++ R-1.1.0/tools/config.sub	Thu Jun 15 14:00:25 2000
@@ -153,6 +153,7 @@
 		| arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
 		| 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
 		| alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
+		| alphapca56 \
 		| i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
 		| mips64 | mipsel | mips64el | mips64orion | mips64orionel \
 		| mipstx39 | mipstx39el \
@@ -177,6 +178,7 @@
 	      | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
 	      | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
 	      | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
+	      | alphapca56-* \
 	      | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
 	      | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
 	      | sparc64-* | mips64-* | mipsel-* \

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rcreecy@census.gov  Thu Jun 15 21:13:25 2000
From: rcreecy@census.gov (Rob Creecy)
Date: Thu, 15 Jun 2000 16:13:25 -0400
Subject: [Rd] Lies, damn lies, and statistics
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <394938E5.CA845487@census.gov>

In the documentation for data.entry, R-1.1.0 the description reads:

A spreadsheet-lie editor for entering or editing data. 

Perhaps we shouldn't encourage users to lie with statistics any more
than they already do? It seems especially egregious to lie when entering
data.

Rob Creecy
Census Bureau
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 15 23:29:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 2000 00:29:58 +0200
Subject: [Rd] Lies, damn lies, and statistics
In-Reply-To: Rob Creecy's message of "Thu, 15 Jun 2000 16:13:25 -0400"
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu> <394938E5.CA845487@census.gov>
Message-ID: <x2ln067f2x.fsf@blueberry.kubism.ku.dk>

Rob Creecy <rcreecy@census.gov> writes:

> In the documentation for data.entry, R-1.1.0 the description reads:
> 
> A spreadsheet-lie editor for entering or editing data. 
> 
> Perhaps we shouldn't encourage users to lie with statistics any more
> than they already do? It seems especially egregious to lie when entering
> data.

Looks like a Freudian slip, from the mere mentioning of spreadsheets
in connection with statistics I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 16 06:35:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jun 2000 07:35:35 +0200 (CEST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
In-Reply-To: <200006151742.TAA25549@pubhealth.ku.dk>
References: <200006151742.TAA25549@pubhealth.ku.dk>
Message-ID: <14665.48295.450473.518062@aragorn.ci.tuwien.ac.at>

>>>>> tov  writes:

> Hi,
>   Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
>   Linux and Sun.  But AIX, of course, is a problem...

>   When linking shared libs, the symbols from libc.a are not found.  I
>   apologize for not investigating this further at the moment - they
>   may not be properly or not all exported from R.bin.

>   Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
>   my build directory after running configure.  Then compilation proceeds
>   without problems.
>   (Alternatively, you could use cc instead of ld to link.)

Yes.  I definitely want to switch back to using the C compiler rather
than ld for linking.  Give us a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 08:46:24 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
In-Reply-To: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <XFMail.000616094624.plummer@iarc.fr>

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 13:02:03 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 16 Jun 2000 14:02:03 +0200 (MET DST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
Message-ID: <200006161202.OAA01503@pubhealth.ku.dk>

I am filing this as a bug report so it doesn't get lost.
Martyn

-----FW: <XFMail.000616094624.plummer@iarc.fr>-----

Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Sender: owner-r-devel@stat.math.ethz.ch
From: Martyn Plummer <plummer@iarc.fr>
To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
Cc: r-devel@stat.math.ethz.ch

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------End of forwarded message-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@phoenix.ece.cmu.edu  Fri Jun 16 15:32:36 2000
From: tov@phoenix.ece.cmu.edu (tov@phoenix.ece.cmu.edu)
Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161432.QAA02711@pubhealth.ku.dk>

Hi,

  ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
  out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
  after configure.
  Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
  during configure? Excerpt from tkConfig.sh on my machine:

# Linker switch(es) to use to link with the X11 library archive.
TK_XLIBSW='-lX11' 

# Additional libraries to use when linking Tk.
TK_LIBS='-lX11 -lld  -lm' 

  The '-lld' wouldn't hurt, would it?
  Maybe the following would work for configure?

case "${host}" in
  *aix*)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
    ;;      
  *)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
    ;;      
esac      

  I'll try that myself, but compilation takes a long, long time...
  Thanks,
    -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun 16 15:51:07 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 16 Jun 2000 15:51:07 +0100 (BST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161451.PAA04375@toucan.stats.ox.ac.uk>


> From: tov@phoenix.ece.cmu.edu
> Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Hi,
> 
>   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
>   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
>   after configure.

Yes, I guess that's because it insists on resolving libm at the shared
libs build stage.

>   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
>   during configure? Excerpt from tkConfig.sh on my machine:
> 
> # Linker switch(es) to use to link with the X11 library archive.
> TK_XLIBSW='-lX11' 
> 
> # Additional libraries to use when linking Tk.
> TK_LIBS='-lX11 -lld  -lm' 
> 
>   The '-lld' wouldn't hurt, would it?
>   Maybe the following would work for configure?
> 
> case "${host}" in
>   *aix*)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
>     ;;      
>   *)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
>     ;;      
> esac      

It's not done like that. Take a look in aclocal.m4.  I suspect that
${TK_LIBS} would do everywhere, but will need to do some testing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Jun 17 10:03:50 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 17 Jun 2000 11:03:50 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <394B3EF6.BC1466E5@univie.ac.at>

in the windows version
> z<-1:10
> dataentry(z)
Error in dataentry(z) : Argument "modes" is missing, with no default
according to the docs,
Modes=NULL should be default



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 17 10:34:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Jun 2000 10:34:31 +0100 (BST)
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>

On Sat, 17 Jun 2000, Erich Neuwirth wrote:

> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default

That is for data.entry() not dataentry().  They are different, and the 
argument for dataentry is `modes' not `Modes'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Sat Jun 17 10:41:15 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Sat, 17 Jun 2000 11:41:15 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>; from erich.neuwirth@univie.ac.at on Sat, Jun 17, 2000 at 11:03:50AM +0200
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk> <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <20000617114115.A15351@sirio.stat.unipd.it>

On Sat, Jun 17, 2000 at 11:03:50AM +0200, Erich Neuwirth wrote:
> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default
> 
> 

  Same under Linux. But, as said in the documentation, 'dataentry'
  is the 'primitive function'. Indeed,
  > de(z)
  works.
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Jun 18 07:53:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 18 Jun 2000 08:53:07 +0200
Subject: [Rd] design question
References: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>
Message-ID: <394C71D3.B490F97A@univie.ac.at>

let me ask you as possibly very silly question.

what  would you think of a shorthand notation for anonymous fuctions in
arguments?

let me illustrate this in how mathematica does it.

mathematica has a function notation like R

Map[Function[x, x^2], {1, 2, 3}]

this can be abbreviated as
Map[#^2 &, {1, 2, 3}]

& indicates a function expression,
and # is the (one) anonymous argument.
functions with more that one arguments
(whch are positional) can be written as
#1  #2
and so on

here is an example
Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

in some cases, this notation is quite convenient.
and since r is lexically scoped, it also should not be too dangerous.
what do our architects think about introducing this kind of notation
in r?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Sun Jun 18 08:57:29 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Sun, 18 Jun 2000 17:57:29 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "Sun, 18 Jun 2000 08:53:07 +0200."
 <394C71D3.B490F97A@univie.ac.at>
Message-ID: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>

Erich Neuwirth asks:

> let me ask you as possibly very silly question.
> 
> what  would you think of a shorthand notation for anonymous fuctions in
> arguments?
> 
> let me illustrate this in how mathematica does it.
> 
> mathematica has a function notation like R
> 
> Map[Function[x, x^2], {1, 2, 3}]
> 
> this can be abbreviated as
> Map[#^2 &, {1, 2, 3}]

The Maple notation is more understandable to most people:

	map(x -> x^2, {1, 2, 3})

but of course "->" is already taken in S/R as the right pointing
assignment operator (although maybe I'm the only one who even knows
about it, let alone uses it...)

> 
> & indicates a function expression,
> and # is the (one) anonymous argument.
> functions with more that one arguments
> (whch are positional) can be written as
> #1  #2
> and so on

Either swiped from TeX or both have swiped the idea from a common
source.  It has the look of a macro language, which can be misleading.

> 
> here is an example
> Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

Cryptic for most users, I'd say, and very macro-like.

> 
> in some cases, this notation is quite convenient.
> and since r is lexically scoped, it also should not be too dangerous.
> what do our architects think about introducing this kind of notation
> in r?

It has to have very low priority, possibly negative.  If syntactic
revisions were ever seriously contemplated, I would strongly favour
trying to bring in some of the S4 changes, but even there I would
regard the semantic extensions as much more urgent than the purely
syntactic ones.  Consistency with S-PLUS is not the final arbiter of
everthing but it does really matter.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 18 10:56:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2000 11:56:27 +0200
Subject: [Rd] design question
In-Reply-To: Bill Venables's message of "Sun, 18 Jun 2000 17:57:29 +1000"
References: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>

Bill Venables <venables@acland.qld.cmis.csiro.au> writes:

> > here is an example
> > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> 
> Cryptic for most users, I'd say, and very macro-like.
> 
> > 
> > in some cases, this notation is quite convenient.
> > and since r is lexically scoped, it also should not be too dangerous.
> > what do our architects think about introducing this kind of notation
> > in r?
> 
> It has to have very low priority, possibly negative.  If syntactic
> revisions were ever seriously contemplated, I would strongly favour
> trying to bring in some of the S4 changes, but even there I would
> regard the semantic extensions as much more urgent than the purely
> syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> everthing but it does really matter.

We do have a couple of cases where we allow expressions instead of
functions of one variable, with "x" marking the spot of the
indep.var., e.g. curve(exp(x)) works that way.

In principle we could allow a similar convention for functions of two
variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
pitfalls in the kind of code needed to support this, though: For
instance, writing a function that passes its argument on to curve()
needs to do it with substitute() magic and evaluation in parent
frames. Also take a look at the beginning of curve() for the
contorsions the code needs to go through to handle the non-function
cases. On the whole, I'm not sure this kind of apparent
user-convenience is worth it.

BTW, we also have positional TeX-style arguments, but fortunately
nobody knows about them:

> f<-function(...)..1^2+..2^2
> f(2,3)
[1] 13


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Sun Jun 18 11:09:45 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Sun, 18 Jun 2000 12:09:45 +0200 (CEST)
Subject: [Rd] Announce: exact Distributions
Message-ID: <Pine.LNX.4.21.0006181208240.24384-100000@artemis.imbe.med.uni-erlangen.de>


Hi,

I just uploaded the package exactDistr to the CRAN devel section (Fritz will
add it tomorrow, I think). ExactDistr implements the
Streitberg/Roehmel shift-algorithm for the exact distributions of
permutation- and rank tests. This is done in R (just a few lines of code)
and is IMO fast enough for m,n < 50. I added the  usual [dpq]perm
functions and an example how to track the exact distribution of the
Wilcoxon-Mann-Whitney test (especially with ties).

I would like to ask the experts to have a look at this algorithm, maybe we
can add exact p-values etc. to the rank tests in R without adapting the
network algorithm this way.

The weather is beautiful here, so I will stop hacking right now.
If it is raining somewhere:

http://www.bioinf.uni-hannover.de/~torsten/exactDistr_0.1-2.tar.gz

Torsten


 _______________________________________________________________________
|									|
|	Dipl.-Stat. Torsten Hothorn					|
|	Institut fuer Medizininformatik, Biometrie und Epidemiologie	|	
|	Waldstrasse 6, D-91054 Erlangen, Deutschland			|
|	Tel: ++49-9131-85-22707						|
|	Fax: ++49-9131-85-25740						|
|	Email: Torsten.Hothorn@rzmail.uni-erlangen.de			|
|_______________________________________________________________________|	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 11:28:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 12:28:39 +0200
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
In-Reply-To: <39490386.8029CB0B@bank-banque-canada.ca>
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca>
Message-ID: <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>

>>>>> Paul Gilbert writes:

> This is a synopsis for the r-devel archives of my solution to the problem that
> R CMD Rdindex zzz/man/* >INDEX
> and
> R CMD build zzz

> do not always result in the same order, which causes make problems outlined
> further below. The source of the problem was suggested by Brian Ripley:

BDR> The shell expands the * before Rdindex ever gets hold of it. And what it
BDR> does re locales is an installation default (assuming it is a Solaris shell
BDR> not bash or tcsh, for both of which NLS support is optional).

> The need to build INDEX separately from using the one generated by
> build is so that R INSTALL zzz does not require R CMD build zzz
> first. This means that code changes can be tested separately from
> documentation changes and vice versa, thus remakes are faster.

> INDEX needs to be generated in the same order as produced by R CMD
> build or build's diff comparison suggests that the index is out of
> date and suggests using --force. Using --force rewrites INDEX which
> causes make to think the install is out of date, so the next make
> always starts at the beginning again.

> The * expansion (in Solaris sh) does not seem to recognize LC (locale)
> settings. Sort does, but some of the output of R CMD Rdindex is on two
> lines, so sorting the output does not work. It is possible to ls -1
> man/* | sort and get the locale sort order, but it does not seem
> possible to feed this into "R CMD Rdindex". ( LC_COLLATE is not
> adequate for sort, LC_ALL is needed.)

> The fix is to generate INDEX in the C order imposed by the Solaris sh
>  expansion of *, then set LC_ALL=C for R CMD build.

Maybe I miss something here, but ...

What R CMD build currently does to list the Rd files in a package is

	find man -name "*.[Rr]d" -print | sort

When building the indices this list is fed to R CMD Rdindex.

On the other hand, R CMD Rdindex itself simply loops through the list of
Rd files it was given as arguments, without any reordering (which I
think is what it should do).

Now note that R CMD Rdindex dates back to a time where we did not have R
CMD build.  Now that we have it, I am inclined to say that when you
start with a package, you simply use R CMD build to bundle it up, and
this will automatically build the index for you (without having to worry
about the ordering), i.e., I would consider Rdindex as something more
low-level.

But in any case, I recommend we do the following:

* Extend Rdindex so that if one of its arguments is a directory, it
obtains the list of Rd files as done by R CMD build.

* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
build and Rdindex should both do LC_ALL=C.

Note that currently we are not very smart building indices, because the
name/alias scheme of Rd is not powerful enough.  1.2 may have something
like an \index entry allowing to specify the information that should go
into the INDEX (and searchable indices etc.).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 13:04:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 14:04:29 +0200
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
In-Reply-To: <200006161202.OAA01503@pubhealth.ku.dk>
References: <200006161202.OAA01503@pubhealth.ku.dk>
Message-ID: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> I am filing this as a bug report so it doesn't get lost.

Thanks.

> -----FW: <XFMail.000616094624.plummer@iarc.fr>-----

> Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
> Sender: owner-r-devel@stat.math.ethz.ch
> From: Martyn Plummer <plummer@iarc.fr>
> To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
> Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
> Cc: r-devel@stat.math.ethz.ch

> On 15-Jun-00 Naoki Takebayashi wrote:
>> I think I reported this bug in the past.  At that time, I was told that
>> it is a bug of autoconf.
>> 
>> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
>> of Alpha EV56), so all the compilation flags were set incorrectly.  I
>> don't know the right way to fix it (I don't know how autoconf works
>> yet ...), but the following patch fixes the problem.
>> 
>> Thank you,
>> Naoki
>> 
>> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
>> --- Dept. of Biology, Indiana University, Jordan Hall 142
>> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
>> 
>> 
>> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
>> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
>> @@ -153,6 +153,7 @@
>> | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>> | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>> | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
>> +             | alphapca56 \
>> | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>> | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>> | mipstx39 | mipstx39el \
>> @@ -177,6 +178,7 @@
>> | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>> | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>> | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
>> +           | alphapca56-* \
>> | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>> | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>> | sparc64-* | mips64-* | mipsel-* \

> The config.sub file is part of the GNU automake package and is meant
> to be used as is.  The version on my system (automake-1.4) does have
> an entry for alphapca5[67], so I guess the config.sub that comes with
> R just needs to be replaced with an up-to-date version.

Interesting.  You're on a Debian system like myself?  The automake 1.4
sources do not have that, but the versions in /usr/share/... do, same
for libtool.

Anyway, I just realized that autoconf is available by anonCVS, and that
the most current versions of the config.guess and config.sub scripts are
always in the CVS tree.  Will update the versions in the sources.

[Peter: this is something else we should most likely always do before a
new release, similar to changing the version numbers in the FAQ etc.  Do
we have a list of these front-matter things?]

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Mon Jun 19 00:00:45 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Mon, 19 Jun 2000 09:00:45 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "18 Jun 2000 11:56:27 +0200."
 <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>
Message-ID: <200006182300.JAA13439@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <venables@acland.qld.cmis.csiro.au> writes:
> 
> > > here is an example
> > > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> > 
> > Cryptic for most users, I'd say, and very macro-like.
> > 
> > > 
> > > in some cases, this notation is quite convenient.
> > > and since r is lexically scoped, it also should not be too dangerous.
> > > what do our architects think about introducing this kind of notation
> > > in r?
> > 
> > It has to have very low priority, possibly negative.  If syntactic
> > revisions were ever seriously contemplated, I would strongly favour
> > trying to bring in some of the S4 changes, but even there I would
> > regard the semantic extensions as much more urgent than the purely
> > syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> > everthing but it does really matter.
> 
> We do have a couple of cases where we allow expressions instead of
> functions of one variable, with "x" marking the spot of the
> indep.var., e.g. curve(exp(x)) works that way.

Yes, but that doesn't require any syntactic change, it's already
there.  If people want to write functions that way, it's up to them.

> In principle we could allow a similar convention for functions of two
> variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
> pitfalls in the kind of code needed to support this, though: For
> instance, writing a function that passes its argument on to curve()
> needs to do it with substitute() magic and evaluation in parent
> frames. Also take a look at the beginning of curve() for the
> contorsions the code needs to go through to handle the non-function
> cases. On the whole, I'm not sure this kind of apparent
> user-convenience is worth it.

I'm pretty sure it's not worth it.  Utlimately it leads to user
confusion when a variety of different kinds of object are allowed in
various places only to have them ultimately coerced to the same thing.
I know this is sometimes pretty well unavoidable, such as with
outer(u, v, "+") but overall I think it is something to be avoided.

> 
> BTW, we also have positional TeX-style arguments, but fortunately
> nobody knows about them:
> 
> > f<-function(...)..1^2+..2^2
> > f(2,3)
> [1] 13

Oh I knew about it all right, Peter.  It's just that *I* never told
anyone about it...  :-) 

Cheers,
Bill Venables.
-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jun 19 10:18:44 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 19 Jun 2000 11:18:44 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#5
In-Reply-To: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000619111844.plummer@iarc.fr>

On 18-Jun-00 Kurt Hornik wrote:
>>>>>> plummer  writes:
>> The config.sub file is part of the GNU automake package and is meant
>> to be used as is.  The version on my system (automake-1.4) does have
>> an entry for alphapca5[67], so I guess the config.sub that comes with
>> R just needs to be replaced with an up-to-date version.
> 
> Interesting.  You're on a Debian system like myself?  The automake 1.4
> sources do not have that, but the versions in /usr/share/... do, same
> for libtool.

This is much more complicated than I thought.  I'm using Red Hat, but I
see that the same thing: the version of config.sub in the source for 
automake is not the one that gets installed into /usr/share/automake.
During the build process, rpm runs "libtoolize --copy --force" which copies
the version of config.sub from /usr/share/libtool into the source directory.
The source for libtool-1.3.4 does have the up-to-date version of config.sub,
so I suppose this should be regarded as the original.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 19 16:54:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Jun 2000 11:54:37 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca> <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>
Message-ID: <394E423C.4935AFF3@bank-banque-canada.ca>

Kurt

>Maybe I miss something here, but ...

I'm not trying to make this into a big deal, but it did take me awhile
to track down so I thought it would be worth recording. Let me explain
the general problem a little more clearly, even though I think you do
understand it,  since someone may see a better overall solution.

I am trying to set up a good structure for package development, which
takes into account the eventuality that documentation testing may become
a more time consuming process. There seem to be two keys: small
independent packages and a reasonably clean separation of code changes
and testing from documentation changes and testing. These allow the
possibility of setting up a fairly efficient makefile.

Running "R CMD check zzz" for all my packages takes several hours on a
Sparc ultra 10 and the complete set of my other tests takes days to run.
I have been splitting things into smaller packages which are as
independent as I can make them, so that I can test pieces separately.
Now I want to set up my makefile so that I can work on documentation and
run the  "R CMD build zzz" tests without changing any file dates that
would indicate my installed code is out of date. If I change code rather
than documentation then I want make to recognize that and do "R INSTALL
zzz" but not "R CMD build zzz", since the build takes some time too.
(This has been a less serious consequence and until recently I was just
rebuilding each time.) Examples in the documentation are a gray area,
but since I have them all working I am thinking of them breaking when
code changes rather than when documentation changes, so I do "R CMD
check zzz" after I change code rather than after I change documentation.
My bundle has dependencies install, build, check for each of the
packages since the above split is not perfect (and I also run my own
tests).

Now the only bug in this whole approach seems to be the file INDEX which
is needed for R INSTALL and is also checked by R CMD build. If I
generate it before an install in the simple quick way using Rdindex,
then this solves my problem as long a "R CMD build" gets the same
result. If it doesn't get the same result (because of a different sort
order) then I get a lot of warning messages which I will start ignoring,
and then miss important warnings. On the other hand, if I use --force,
it changes the INDEX file so that I loose the independence between code
and documentation and end up re-installing almost ever time I run make,
and more importantly, my checks and tests also then appear to be out of
date. If I don't use INDEX as a dependency in my makefile then it
doesn't get re-made when it should be. So it would be nice to be able to
generate the INDEX file in the same format "R CMD build" gets, but
running something simple. As I explained in the previous message, this
depends on the sort order and my Solaris sh does not sort in the same
order as it expands * unless LC_ALL=C, which is the solution I am using.

>What R CMD build currently does to list the Rd files in a package is
>        find man -name "*.[Rr]d" -print | sort
>When building the indices this list is fed to R CMD Rdindex.

This would also work (and would be better since one could choose the
sort order) but I can't see how to feed this sorted list of files into
"R CMD Rdindex." Probably I am missing something here.

>Now note that R CMD Rdindex dates back to a time where we did not have
R
>CMD build.  Now that we have it, I am inclined to say that when you
>start with a package, you simply use R CMD build to bundle it up, and
>this will automatically build the index for you (without having to
worry
>about the ordering)

I was using this approach until recently and it works fine with small
packages. The time penalty is not too severe now, although it is not
insignificant for some of my packages. When I am actively working on
code development it can be a bottleneck, since I re-make often. In the
longer run I expect "R CMD build" will do more checks and take longer,
so I am mainly trying to set up a good structure for package development
which takes this into account.

>But in any case, I recommend we do the following:
>* Extend Rdindex so that if one of its arguments is a directory, it
>obtains the list of Rd files as done by R CMD build.

That would be nice but don't bother if it is a big deal, since I have a
working solution and I doubt that this is an issue for many people.

>* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
>build and Rdindex should both do LC_ALL=C.

Ensure consistency, but I wouldn't force LC_ALL=C as AaBb... would
probably be a better order for the index and "C" gives AB...ab...

>Note that currently we are not very smart building indices, because the

>name/alias scheme of Rd is not powerful enough.  1.2 may have something

>like an \index entry allowing to specify the information that should go

>into the INDEX (and searchable indices etc.).

Maybe it would be better to work on this rather than put effort into a
temporary fix.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keitt@nceas.ucsb.edu  Mon Jun 19 18:20:17 2000
From: keitt@nceas.ucsb.edu (keitt@nceas.ucsb.edu)
Date: Mon, 19 Jun 2000 19:20:17 +0200 (MET DST)
Subject: [Rd] chron library (PR#574)
Message-ID: <200006191720.TAA21739@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1
OS: Linux
Submission from: (NULL) (128.111.220.188)


The chron library does not handle 4 digit years.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 19 19:27:23 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Jun 2000 14:27:23 -0400
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
In-Reply-To: Prof Brian Ripley's message of "Fri, 16 Jun 2000 15:51:07 +0100 (BST)"
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <87n1khbk6s.fsf@bavaria.ece.cmu.edu>



Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > From: tov@phoenix.ece.cmu.edu

> >   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
> >   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
> >   after configure.
> 
> Yes, I guess that's because it insists on resolving libm at the shared
> libs build stage.

And the symbols from libm don't make it into R.exp.

> >   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
> >   during configure? Excerpt from tkConfig.sh on my machine:
> > 
> > # Linker switch(es) to use to link with the X11 library archive.
> > TK_XLIBSW='-lX11' 
> > 
> > # Additional libraries to use when linking Tk.
> > TK_LIBS='-lX11 -lld  -lm' 
> > 
> >   The '-lld' wouldn't hurt, would it?
> >   Maybe the following would work for configure?
> > 
> > case "${host}" in
> >   *aix*)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
> >     ;;      
> >   *)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
> >     ;;      
> > esac      
> 
> It's not done like that. Take a look in aclocal.m4.  I suspect that
> ${TK_LIBS} would do everywhere, but will need to do some testing.

Ok, aclocal.m4 was obviously new to me.  Below is the patch.  It
works for me...  

With this patch and "SHLIBLD=CC ./configure" I can compile, install,
check R 1.1.

Regards,
  -tom


*** aclocal.m4  Mon Jun 19 11:39:56 2000
--- aclocal.m4.orig     Mon Jun 19 11:34:21 2000
***************
*** 840,847 ****
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_LIBS}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_LIBS}] )
            fi
          fi
        fi
--- 840,847 ----
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_XLIBSW}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_XLIBSW}] )
            fi
          fi
        fi

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Jun 19 21:01:26 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 19 Jun 2000 22:01:26 +0200 (MET DST)
Subject: [Rd] missing include in pnorm.c (PR#575)
Message-ID: <200006192001.WAA22499@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: R-Release (June 15)
OS: Linux (redhat)
Submission from: (NULL) (141.211.66.172)


R fails to compile on the current released version. Some constants 
are undefined in pnorm.c. It appears that adding

#include "nmath.h"

to pnorm.c solves this problem.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 19 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <200006192001.WAA22499@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>

On Mon, 19 Jun 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: R-Release (June 15)
> OS: Linux (redhat)
> Submission from: (NULL) (141.211.66.172)
> 
> 
> R fails to compile on the current released version. Some constants 
> are undefined in pnorm.c. It appears that adding
> 
> #include "nmath.h"

Let us stress that pnorm.c does contain that line in `the current released
version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
have noticed traffic about this on R-help earlier today.  Sorry to be
picky, but quite a lot of time has been misdirected by initial reports on
this not being precise enough (and this is the third report).

R-release is the current version with all committed patches applied.  
(On release day there are not likely to be any patches.)
Unfortunately, something has gone wrong with checking it out of the
archives to the tar file.  The file is correct in the archives, so the
problem is in R-release.tar.*, not in R-release per se.  With that sort of
level of detail being important, we need to be as precise as possible.

I wondered it there was any room for misunderstanding in what was said on
CRAN, but it looks clear enough to me. R-release.tar.* is described there
as a `snapshot', and that is the intention. Those of us who download
snapshots from other projects know that sometimes they are badly broken.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 20 07:39:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 20 Jun 2000 08:39:29 +0200 (CEST)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
References: <200006192001.WAA22499@pubhealth.ku.dk>
 <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
Message-ID: <14671.4513.37090.479733@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

PBDR> On Mon, 19 Jun 2000 faraway@umich.edu wrote:
>> Full_Name: Julian Faraway
>> Version: R-Release (June 15)
>> OS: Linux (redhat)
>> Submission from: (NULL) (141.211.66.172)
>> 
>> 
>> R fails to compile on the current released version. Some constants 
>> are undefined in pnorm.c. It appears that adding
>> 
>> #include "nmath.h"

PBDR> Let us stress that pnorm.c does contain that line in `the current released
PBDR> version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
PBDR> have noticed traffic about this on R-help earlier today.  Sorry to be
PBDR> picky, but quite a lot of time has been misdirected by initial reports on
PBDR> this not being precise enough (and this is the third report).

PBDR> R-release is the current version with all committed patches applied.  
PBDR> (On release day there are not likely to be any patches.)
PBDR> Unfortunately, something has gone wrong with checking it out of the
PBDR> archives to the tar file.  The file is correct in the archives, so the
PBDR> problem is in R-release.tar.*, not in R-release per se.  With that sort of
PBDR> level of detail being important, we need to be as precise as possible.

PBDR> I wondered it there was any room for misunderstanding in what was said on
PBDR> CRAN, but it looks clear enough to me. R-release.tar.* is described there
PBDR> as a `snapshot', and that is the intention. Those of us who download
PBDR> snapshots from other projects know that sometimes they are badly broken.

I've added a much stronger statement to CRAN saying that ``These
archives are created automatically every night from the CVS tree,
hence might not even compile on your platform and can contain any
number of bugs. They will probably work, but maybe not.''

Hope this helps,
Fritz


PS: Of course ``night'' is only true from a European perspective  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jun 20 12:03:20 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 20 Jun 2000 13:03:20 +0200 (MET DST)
Subject: [Rd] exists() and the mode argument (PR#576)
Message-ID: <200006201103.NAA27861@pubhealth.ku.dk>

The following seems to be odd behaviour:

fred <- 1:10
mode(fred) # "numeric"
exists("fred") # TRUE
exists("fred", mode="numeric") # FALSE

Unless I have misunderstood, the final evaluation should be TRUE,
as an object called "fred" exists and its mode is "numeric".  In
the same category, I have just noticed that

get("fred") # 1:10
get("fred", mode="numeric") # gives an Error: variable "fred" was not found

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 20 13:19:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 20 Jun 2000 13:19:11 +0100 (BST)
Subject: [Rd] exists() and the mode argument (PR#576)
In-Reply-To: <200006201103.NAA27861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006201313251.23397-100000@auk.stats>

On Tue, 20 Jun 2000 J.C.Rougier@durham.ac.uk wrote:

> The following seems to be odd behaviour:
> 
> fred <- 1:10
> mode(fred) # "numeric"
> exists("fred") # TRUE
> exists("fred", mode="numeric") # FALSE
> 
> Unless I have misunderstood, the final evaluation should be TRUE,
> as an object called "fred" exists and its mode is "numeric".  In

Its `mode' is 
> typeof(fred)
[1] "integer"

and so

> exists("fred", mode="integer")
[1] TRUE

See ?exists

    mode: the type of interest for the object.
              ^^^^ 

I think this needs to be re-written in the documentation, or do
people think it should be the value of mode?  The latter appears
to be what the prototype uses, in that

> exists("fred", mode="numeric")
[1] T
> exists("fred", mode="integer")
[1] T
> exists("fred", mode="double")
[1] T

(sic)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rbeer@uni-goettingen.de  Tue Jun 20 17:47:54 2000
From: rbeer@uni-goettingen.de (Ragnar Beer)
Date: Tue, 20 Jun 2000 18:47:54 +0200
Subject: [Rd] Compiling R 1.1.0 under OpenBSD 2.7
Message-ID: <p04320401b5754f249535@[134.76.136.114]>

Howdy!

I was trying to compile R 1.1.0 under OpenBSD 2.7 and got the 
following output from the make step:

-----snip-----
gcc -I. -I../../src/include -I../../src/include 
-I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
-mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
arithmetic.c:48: warning: `struct exception' declared inside parameter list
arithmetic.c:48: warning: its scope is only this definition or 
declaration, which is probably not what you want.
arithmetic.c: In function `matherr':
arithmetic.c:50: dereferencing pointer to incomplete type
arithmetic.c:59: dereferencing pointer to incomplete type
arithmetic.c:53: warning: unreachable code at beginning of switch statement
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main.
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
-----snip-----

Can anyone help? I'm in the process of switching to OpenBSD from 
Linux because of OpenBSD's _very_ good security features but I just 
won't get R running :(

--Ragnar
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Jun 21 01:51:24 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 21 Jun 2000 00:51:24 GMT
Subject: [Rd] Port of R header files to Delphi
Message-ID: <39510d92.13120879@julian.uwo.ca>

I'm in the process of porting R header files to Delphi.  The short
term aim is to be able to make calls into the R.dll from Delphi; the
longer term aim is to play around with writing a Windows front-end
with some of the features of the S-PLUS environment (e.g. scripts),
and other features from other IDEs I've used (e.g. watch windows,
popup values of variables selected by mouse, etc.)

I've got a port of the simple rterm.c sample front-end sort of
working, but I need lower level access, and I'm having trouble getting
any further.  Is this the place to ask technical questions on this, or
should I ask somewhere else (or just not bug everyone, since I'm not
working on Unix or in C)?

For example:

1.  Syntax errors are causing my rterm to shut down, apparently
because I'm not catching the exceptions that are thrown.  How are
exceptions thrown?

2.  If I want to get R to give me a string showing how an existing
variable would be printed, what's the normal procedure?  I tried
calling "PrintValue", passing it the Rinternals export
"R_LastvalueSymbol", but I just get an access violation in R.DLL.
This could be because I'm not handling the export properly (DLLs
normally export entry points, not pointers to variables, so I had to
try to guess what indirection was being used here).  Or I could be
calling PrintValue at the wrong time.  Or something else.  How much
needs to be set up in advance before PrintValue will work?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Jun 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006210515.HAA15155@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
--gls{nlme}; should formula.default() look for attr(*,"formula") ?
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 576 *
Subject:  exists() and the mode argument 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 20 Jun 2000 12:03:36 +0100 (BST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 564 *
Subject: "clipping error in x11()"
From: Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>
Date: Wed, 7 Jun 2000 23:06:54 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 565 *
Subject: Postscript device ignores title if it is too long.
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Fri, 9 Jun 2000 09:17:09 +0100 (BST)
* PR# 569 *
Subject: Typo in the documentation of prcomp.
From: =?iso-8859-1?q?Bj=F8rn-Helge_Mevik?= <bhm@math.uio.no>
Date: 14 Jun 2000 14:16:14 +0200
* PR# 568 *
Subject: problem with aperm?
From: Jim Lemon <jim.lemon@uts.edu.au>
Date: Tue, 13 Jun 2000 13:20:10 +1000
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400
* PR# 570 *
Subject: extra comma in configure
From: tov@ece.cmu.edu
Date: Wed, 14 Jun 2000 21:45:35 +0200 (MET DST)
* PR# 575 *
Subject: missing include in pnorm.c
From: faraway@umich.edu
Date: Mon, 19 Jun 2000 22:01:25 +0200 (MET DST)
* PR# 574 *
Subject: chron library
From: keitt@nceas.ucsb.edu
Date: Mon, 19 Jun 2000 19:20:16 +0200 (MET DST)
* PR# 573 *
Subject:  Missing -lm for tcltk (R 1.1.0, AIX 4.3) 
From: Thomas Vogels <tov@phoenix.ece.cmu.edu>
Date: Fri, 16 Jun 2000 10:32:54 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 07:52:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 07:52:59 +0100 (BST)
Subject: [Rd] Port of R header files to Delphi
In-Reply-To: <39510d92.13120879@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006210727330.29833-100000@auk.stats>

On Wed, 21 Jun 2000, Duncan Murdoch wrote:

> I'm in the process of porting R header files to Delphi.  The short
> term aim is to be able to make calls into the R.dll from Delphi; the
> longer term aim is to play around with writing a Windows front-end
> with some of the features of the S-PLUS environment (e.g. scripts),
> and other features from other IDEs I've used (e.g. watch windows,
> popup values of variables selected by mouse, etc.)
> 
> I've got a port of the simple rterm.c sample front-end sort of
> working, but I need lower level access, and I'm having trouble getting
> any further.  Is this the place to ask technical questions on this, or
> should I ask somewhere else (or just not bug everyone, since I'm not
> working on Unix or in C)?

I suspect it is the best place, as most of your questions are about
R internals.  As for the R for Windows internals, probably only Guido 
knows, but you can read the code as I have to frequently.

> For example:
> 
> 1.  Syntax errors are causing my rterm to shut down, apparently
> because I'm not catching the exceptions that are thrown.  How are
> exceptions thrown?

I suspect that is just because you are not set up to run in interactive
mode (the internal variable R_Interactive).  The default error handler
does abort on error in non-interactive mode.  I don't know what your
`rterm' is, but rtest.c is specifically in non-interactive mode.
The real rterm.c sets R_Interactive based on isatty(0) and the --ess flag.
If you set interactive mode, you will need some way to interrupt,
and with a Windows front-end, the easiest way is to set UserBreak to
non-zero (which is equivalent to Ctrl-C on Unix or Esc in Rgui).

On my TODO list is to run more threads, so that there is a control
thread different from the one running the R interpreter.  Principally
to make interruption easier to handle, and to allow looping C code
to be interrupted.

> 2.  If I want to get R to give me a string showing how an existing
> variable would be printed, what's the normal procedure?  I tried
> calling "PrintValue", passing it the Rinternals export
> "R_LastvalueSymbol", but I just get an access violation in R.DLL.

That's a symbol, not a variable.  Section 3.6.7 of `Writing R Extensions'
may help: the key is to use findVar or one of the related functions.

> This could be because I'm not handling the export properly (DLLs
> normally export entry points, not pointers to variables, so I had to
> try to guess what indirection was being used here).  

Um. DLLs often export both.  Unfortunately, the mechanisms for *imports*
are messy, especially for exported pointers.  You need to refer to them as
_imp___blah, and that's purpose of globalvar.h.  There is no extra
indirection: apart from the name mapping they are handled just like
externs to other modules not in Dlls.

> Or I could be
> calling PrintValue at the wrong time.  Or something else.  How much
> needs to be set up in advance before PrintValue will work?

PrintValue can be called on a SEXP pointing to an R object: you may find
R_PV a little safer. (Both are in src/main/print.c.)  You will need
R_WriteConsole set up, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 15:49:03 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 10:49:03 -0400
Subject: [Rd] OS calls
Message-ID: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>

I've just been reviewing some functions in my syskern library. This library was
set up originally to provide me with a way to program around small R/S
differences  and to encapsulate some operating system requests in one place, so
that these problems would not be spread throughout my code.  Over the years the
need for many of the programs in this library has disappeared.

I have always worked in Unix but my hope was that other R users would implement
the operating system functions for other OSs. To some extent this has happened,
in the sense that many functions I once had in syskern are now handled in Rbase.
Most of the remaining functions are rather trivial or small variations on things
already done in Rbase, and I think it would be valuable for everyone if these
too could be added to Rbase. The most difficult of the functions is probably
mail, but that is already being done in bug.report(), so I am only suggesting
that it should be separated out of bug.report() and provided as a separate
function.

Below are my Unix implementations of remaining OS utilities.

Paul Gilbert
_______

sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
present.working.directory <- function(){system.call("pwd")} #present directory
local.host.netname <- function() {system.call("uname -n")}
whoami <- function(){system.call("whoami")} # return user id (for mail)
   # There are problems with different shells returning different results for
whoami when
   #    a user does  su to another name. It is probably better to use a C call
for this.
file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

file.date.info <- function(file.name)
     {# This could be a lot better. It will fail for files older than a year.
      # Also, a returned format like date() below would be better.
      mo <- (1:12)[c("Jan","Feb","Mar","Apr","May", "Jun","Jul","Aug", "Sep",
         "Oct","Nov","Dec") ==
          substring(system.call(paste("ls -l ",file)),33,35)]
      day <- as.integer(substring(system.call(paste("ls -l ",file.name)),37,38))

      hr  <- as.integer(substring(system.call(paste("ls -l ",file.name)),40,41))

      sec <- as.integer(substring(system.call(paste("ls -l ",file.name)),43,44))

      c(mo,day,hr,sec)
     }

# Except for tz this could use the date() function in R, but that may not be the
best way.
date.parsed <- function()
        {d<-parse(text=strsplit(
              system.call("date \'+%Y %m %d %H %M %S\'")," ")[[1]])
         list(y=  eval(d[1]),
              m=eval(d[2]),
              d= eval(d[3]),
              H= eval(d[4]),
              M= eval(d[5]),
              S= eval(d[6]),
              tz=system.call("date '+%Z'"))
        }

mail <- function(to, subject="", text="")
     {# If to is null then mail is not sent (useful for testing).
      file <- tempfile()
      write(text, file=file)
      if(!is.null(to))
         system.call(paste("cat ",file, " | mail  -s '", subject, "' ", to))
      unlink(file)
      invisible()
     }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 16:16:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 16:16:13 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> I've just been reviewing some functions in my syskern library. This library was
> set up originally to provide me with a way to program around small R/S
> differences  and to encapsulate some operating system requests in one place, so
> that these problems would not be spread throughout my code.  Over the years the
> need for many of the programs in this library has disappeared.
> 
> I have always worked in Unix but my hope was that other R users would implement
> the operating system functions for other OSs. To some extent this has happened,
> in the sense that many functions I once had in syskern are now handled in Rbase.
> Most of the remaining functions are rather trivial or small variations on things
> already done in Rbase, and I think it would be valuable for everyone if these
> too could be added to Rbase. The most difficult of the functions is probably
> mail, but that is already being done in bug.report(), so I am only suggesting
> that it should be separated out of bug.report() and provided as a separate
> function.
> 
> Below are my Unix implementations of remaining OS utilities.
> 
> Paul Gilbert
> _______
> 
> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
we hide names like that behind a .Sys call (but then he introduced getwd).
There is already at least one object called sleep (a dataset) in an R
package.

> present.working.directory <- function(){system.call("pwd")} #present directory

Look at getwd!

> local.host.netname <- function() {system.call("uname -n")}
> whoami <- function(){system.call("whoami")} # return user id (for mail)
>    # There are problems with different shells returning different results for
> whoami when
>    #    a user does  su to another name. It is probably better to use a C call
> for this.

Those are not even meaningful on vanilla (non-networked) Windows systems. I
am not really sure why one would want them in general R code.

> file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

Easy: use file.create and file.append.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:42:05 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:42:05 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F05D.A40D22FD@bank-banque-canada.ca>

Brian

>> local.host.netname <- function() {system.call("uname -n")}
>> whoami <- function(){system.call("whoami")} # return user id (for mail)

>Those are not even meaningful on vanilla (non-networked) Windows systems. I
>am not really sure why one would want them in general R code.

I thought whoami was meanful on Windows NT even without a network, but in any
case it is true that I want it for a network environment. You could put in
somewhat meaningful defaults like "localhost" and "root", but I think most
people are on a network these days.

Thanks for pointing out some of the other things that are already working.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:44:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:44:26 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F0EA.413B6DF3@bank-banque-canada.ca>

P.S.
>> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

>That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
>we hide names like that behind a .Sys call (but then he introduced getwd).
>There is already at least one object called sleep (a dataset) in an R
>package.

Changing these names is fine with me.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:06:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:06:50 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F05D.A40D22FD@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211904440.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> Brian
> 
> >> local.host.netname <- function() {system.call("uname -n")}
> >> whoami <- function(){system.call("whoami")} # return user id (for mail)
> 
> >Those are not even meaningful on vanilla (non-networked) Windows systems. I
> >am not really sure why one would want them in general R code.
> 
> I thought whoami was meanful on Windows NT even without a network, but in any

NT, yes, Win 9x, no, and Win 9x is > 90% of the market.

> case it is true that I want it for a network environment. You could put in
> somewhat meaningful defaults like "localhost" and "root", but I think most
> people are on a network these days.

I doubt it. DUN does not count as a network for these purposes, and indeed
the local and network IDs can be different even on NT (and frequently are).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:20:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:20:58 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F0EA.413B6DF3@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211917210.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> P.S.
> >> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
> 
> >That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
> >we hide names like that behind a .Sys call (but then he introduced getwd).
> >There is already at least one object called sleep (a dataset) in an R
> >package.
> 
> Changing these names is fine with me.

BTW, your sleep function is a really bad idea in a GUI environment (GNOME
or tcltk or even an X11 graphics device) as it blocks all GUI events.  The
version I use for the Windows port of xgobi sleeps for 500ms, then wakes up
and handles Windows events, goes back to sleep .... S-PLUS runs its
graphics devices (on Unix) in separate processes, but R does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Jun 22 15:43:26 2000
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221443.QAA22735@pubhealth.ku.dk>

Full_Name: Peter Malewski
Version: RW-1010
OS: w95
Submission from: (NULL) (193.174.111.250)


On w95b, de crashes rterm (with ess) when a vector with long strings appear:

for (i in 1:100){
  print(i)
  xx <- rep(paste(rep("a",i),collapse=""),10)
  de(xx)
}

crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I found
this by editing a data.frame with addresses).

Best wishes
P.Malewski



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  C

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 22 16:01:32 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 22 Jun 2000 17:01:32 +0200 (MET DST)
Subject: [Rd] Re: [R] R 1.1 congrat; undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006221501.RAA22869@pubhealth.ku.dk>

I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.

	-p

Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:

> Hello,
> 
> first, I'd like to congratulate the core team to the new R version 1.1. I
> think it's a great update, with glimpses into an even greater future
> (tcltk!).
> 
> While playing around with the new functions (on Win 95), I found the
> following:
> 
> As the documentation states, when I generate a plot and save it with
> recordPlot, I can regenerate it by printing the variable:
> 
> > plot(1:10)
> > abline(h=5)
> > abline(v=5)
> > t.plot<-recordPlot()
> > t.plot
> 
> works perfectly.
> 
> Now, if I add further elements to this (regenerated) plot, they get drawn
> all right (I tested only abline()), which surprised me . But when I re-save
> the result, only the new additions get saved:
> 
> > abline(h=9)     # works (to my surprise)
> > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > str(t.plot2)
> 
> OK, so I thought I might regenerate the combined plot by
> 
> > t.plot   # worked
> > t.plot2 # cleared graph, but did nothing
> 
> I think it would be useful to be able to save and replay additions to a plot
> as well as complete plots. One might, for example, try out several additions
> to a basic plot (different kinds of regression lines, to give an example)
> and save the final version with the plot to move on and try out several
> legend placements etc., thus building up the final graph in several steps.
> 
> So it would be nice if either recordPlot could "update" a saved plot with
> new additions or if replayPlot could reproduce additions on another plot.
> 
> Just a suggestion (I hope I made myself clear).
> 
> 
> Kaspar
> 
> -- 
> 
> Kaspar Pflugshaupt
> Geobotanisches Institut
> Zuerichbergstr. 38
> CH-8044 Zuerich
> 
> Tel. ++41 1 632 43 19
> Fax  ++41 1 632 12 15
> 
> mailto:pflugshaupt@geobot.umnw.ethz.ch
> privat:pflugshaupt@mails.ch
> http://www.geobot.umnw.ethz.ch
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jun 22 16:50:34 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 22 Jun 2000 16:50:34 +0100 (BST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221550.QAA01867@toucan.stats.ox.ac.uk>


> From: p.malewski@tu-bs.de
> Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Peter Malewski
> Version: RW-1010
> OS: w95
> Submission from: (NULL) (193.174.111.250)
> 
> 
> On w95b, de crashes rterm (with ess) when a vector with long strings appear:
> 
> for (i in 1:100){
>   print(i)
>   xx <- rep(paste(rep("a",i),collapse=""),10)
>   de(xx)
> }
> 
> crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I 
found
> this by editing a data.frame with addresses).

Yes, there is a limit of 44 chars displayed in a field.  Will fix for the next
release (probably by limiting the cell width, which was limited when
this limit was set).

The bug potentially applies on Unix too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Jun 23 08:10:24 2000
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Fri, 23 Jun 2000 09:10:24 +0200 (MET DST)
Subject: [Rd] Re: undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006230710.JAA26160@pubhealth.ku.dk>

On Thu, Jun 22, 2000 at 05:01:32PM +0200, p.dalgaard@biostat.ku.dk wrote:
> I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.
> 
> 	-p
> 
> Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:
> > As the documentation states, when I generate a plot and save it with
> > recordPlot, I can regenerate it by printing the variable:
> > 
> > > plot(1:10)
> > > abline(h=5)
> > > abline(v=5)
> > > t.plot<-recordPlot()
> > > t.plot
> > 
> > works perfectly.
> > 
> > Now, if I add further elements to this (regenerated) plot, they get drawn
> > all right (I tested only abline()), which surprised me . But when I re-save
> > the result, only the new additions get saved:
> > 
> > > abline(h=9)     # works (to my surprise)
> > > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > > str(t.plot2)
> > 
> > OK, so I thought I might regenerate the combined plot by
> > 
> > > t.plot   # worked
> > > t.plot2 # cleared graph, but did nothing
> > 

  The problem is that main/plot.c:do_playDL doesn't set the device 
  diplay list. Inserting towards the beginning a line like
          dd->dipslayList = theList;
  works for me at least under Unix. I will commit it after testing
  under Windows.

  BTW, Kaspar, I have no Windows at hand in this moment but 
  does the problem manifest itself also with the plot history mechanism?
  E.g., (i) if you set (with the menu) the graphics window in 
  'recording mode', (ii) make some plots , (iii) go back to the
  first plot using 'PgUp', (iv) add some new elements to it and 
  (v) go to some other plot and then back to the first plot 
  with 'PgDown' and 'PgUp', the first plot you get is the modified one
  or not? Reason of the question is that replayng of the saved history
  is implemented in a different way.

  guido 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:05:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:05:39 +0200 (CEST)
Subject: [Rd] MAINLD and SHLIBLD
Message-ID: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>

I would like to always use ${CC} for linking the main binary and the
shlibs.

Inspection of configure.in reveals that we currently deviate in the
following cases:

			mainld				shlibld
	aix[2-9]*	ld				ld
	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}
	hpux*		${CC}				ld

Does anyone recall why we do not use ${CC} in these cases?  Did anyone
successfully build R on these platforms with ${CC} for mainld/shlibld?
(Inspection of ltconfig from libtool seems to indicate that ${CC} should
be possible ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:29:55 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:29:55 +0200 (CEST)
Subject: [Rd] Re: [R] R and OpenBSD
In-Reply-To: <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
References: <p04320401b574dcb5f7c5@[134.76.136.114]>
 <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
Message-ID: <14675.29795.986062.850729@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Tue, 20 Jun 2000, Ragnar Beer wrote:
>> Meanwhile I downloaded R-1.1.0.tgz and got the following error in the 
>> make step:

> Could you please not send such messages (twice as far as I can see)
> personally to members of R-core.  I am not the right persion for this
> error, and in general posting to R-devel is encouraged as it gets a
> wider pool of experts.

> I think you can solve this by undefining HAVE_MATHERR in
> config.h. Your correspondent's analysis seems wrong in detail to me:
> configure does not look in libm.a directly.

> I suspect we need a more elaborate test for MATHERR_BROKEN, but as I
> said, I am not the configure specialist.

Has anyone encountered a similar problem with matherr() on OpenBSD?
If so, can anyone recommend a test for matherr() to be broken?

-k

>> 
>> -----snip-----
>> making util.d from util.c
>> making version.d from version.c
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c apply.c -o apply.o
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
>> arithmetic.c:48: warning: `struct exception' declared inside parameter list
>> arithmetic.c:48: warning: its scope is only this definition or 
>> declaration, which is probably not what you want.
>> arithmetic.c: In function `matherr':
>> arithmetic.c:50: dereferencing pointer to incomplete type
>> arithmetic.c:59: dereferencing pointer to incomplete type
>> arithmetic.c:53: warning: unreachable code at beginning of switch statement
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main.
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
>> -----snip-----
>> 
>> I also posted my question to the OpenBSD list and got this reply:
>> 
>> -----snip-----
>> From: Marc Espie <Marc.Espie@liafa.jussieu.fr>
>> To: Ragnar Beer <rbeer@uni-goettingen.de>
>> Cc: misc@openbsd.org
>> Subject: Re: Compiling Linux programs under OpenBSD?
>> Mail-Followup-To: Ragnar Beer <rbeer@uni-goettingen.de>, misc@openbsd.org
>> Sender: owner-misc@openbsd.org
>> X-Loop: misc@openbsd.org
>> 
>> I've looked, briefly. Its configure trips up on matherr. Specifically, it
>> only does a nm libm.a, finds matherr, and assumes it works. Unfortunately,
>> OpenBSD namespace is not squeaky clean (yet), and matherr is a private
>> function of libm: no user-visible prototype, no declaration of struct
>> exception, and hence failure.
>> -----snip-----
>> 
>> Hope this helps...
>> 
>> 
>> --Ragnar
>> 
>> 
>> >Ragnar Beer <rbeer@uni-goettingen.de> wrote:
>> >
>> >>  Has anybody successfully installed R under OpenBSD? I just tried to
>> >>  install the latest R-release under OpenBSD 2.7 and got the following
>> >>  errors in the make step:
>> >>  pnorm.c:62 'ML_ERR_return_NAN' undeclared
>> >>  pnorm.c:62 'ML_NAN' undeclared
>> >>  pnorm.c:62 'ML_NEGINF' undeclared
>> >
>> >The file pnorm.c is out-of-date in the current R-release.tar.bz2 (but not
>> >in the cvs archive). Please try R-1.1.0.tgz instead, or at least copy
>> >src/nmath/pnorm.c from R-1.1.0.tgz onto your unpacked copy of R-release.
>> >
>> >--
>> >Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> >Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> >University of Oxford,             Tel:  +44 1865 272861 (self)
>> >1 South Parks Road,                     +44 1865 272860 (secr)
>> >Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 23 17:03:13 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Jun 2000 12:03:13 -0400
Subject: [Rd] matlab2R, rats2R and gauss2R
Message-ID: <39538A41.664EB10F@bank-banque-canada.ca>

>From time to time I get request about some less than perfect scripts I posted on
S-new (a long time ago) for converting Matlab, Rats and Gauss code to S/R. More
often than not these requests are from Windows users who cannot figure out how
to use a Unix script that calls ex. It would be nice to have a CRAN email
facility that works like the f2c email site: accept code by email and return a
converted result. I can supply some scripts which are a reasonable start.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 17:34:15 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
Message-ID: <200006251634.SAA09674@pubhealth.ku.dk>

Dear R team,

I don't get what I think I should get when using anova.glm() with
family="gaussian" -- please ignore this and forgive me if this turns out
to be another example of a fundamental misunderstanding on my part (a
highly likely event!) For example: 

S <- as.factor(rep(c(rep("m",2),rep("f",2)),2))
A <- as.factor(c(rep("a",4),rep("b",4)))
y <- c(10,11,13,15,12,11,16,17)

f.glm.1 <- glm(y~A*S)
f.glm.2 <- glm(y~A+S)
anova(f.glm.1,f.glm.2,test="F")

# Analysis of Deviance Table 
#
# Response: y
#
#
#             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
# A + S + A:S         4      3.500                         
# A + S               5      4.625 -1    0.000 0.000      1

#  compared with the same analysis using anova.lm() below:

f.lm.1 <- aov(y~A*S)
f.lm.2 <- aov(y~A+S)
anova(f.lm.1,f.lm.2)

# Analysis of Variance Table
#
# Model 1: y ~ A + S + A:S
# Model 2: y ~ A + S
#   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
# 1      4      3.500                         
# 2      5      4.625 -1 -1.125  1.2857 0.3202


Thank you again for R and best regards,

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 18:42:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 19:42:36 +0200
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)"
References: <200006251634.SAA09674@pubhealth.ku.dk>
Message-ID: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> anova(f.glm.1,f.glm.2,test="F")

> #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> # A + S + A:S         4      3.500                         
> # A + S               5      4.625 -1    0.000 0.000      1
> 
> anova(f.lm.1,f.lm.2)

> #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> # 1      4      3.500                         
> # 2      5      4.625 -1 -1.125  1.2857 0.3202

Hum.. It is being done on purpose. anova.glmlist has this nugget
inside:

    table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
        pmax(0, -diff(resdev))))

This is obviously inconsistent with the lm version, but I wonder which
one is wrong? There may be a point in requiring models to be in
increasing order. However, something is clearly wrong with that too:

> anova(f.glm.2,f.glm.1,test="F")
...
            Resid. Df Resid. Dev Df Deviance      F Pr(>F)
A + S               5     4.6250                          
A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745

Notice the p value! This comes from an F with 2 df in the denominator
instead of 4. Comes out of this bit:

    if (!is.null(test)) {
        bigmodel <- object[[(rdf <- order(resdf)[1])]]
        dispersion <- summary(bigmodel, dispersion =
        dispersion)$dispersion
        df.dispersion <- if (dispersion == 1) 
            Inf
        else rdf

which is clearly wrong since rdf will be an integer between 1 and the
number of models compared...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:00:20 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sun, 25 Jun 2000 15:00:20 -0400 (EDT)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000625145600.247A-100000@bio3.acpub.duke.edu>

Many thanks for your reply.

For some reason I usually think about the models in decreasing order, and 
tend to list them that way in the argument to anova.  But as you noted 
that is not all of the problem.  Regarding the order: if there is a 
reason for requiring increasing order, then might it not be good to 
issue an error message or warning when the order used is wrong?

Thank you again!

Rashid



On 25 Jun 2000, Peter Dalgaard BSA wrote:

> Date: 25 Jun 2000 19:42:36 +0200
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
> 
> rnassar@duke.edu writes:
> 
> > anova(f.glm.1,f.glm.2,test="F")
> 
> > #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> > # A + S + A:S         4      3.500                         
> > # A + S               5      4.625 -1    0.000 0.000      1
> > 
> > anova(f.lm.1,f.lm.2)
> 
> > #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> > # 1      4      3.500                         
> > # 2      5      4.625 -1 -1.125  1.2857 0.3202
> 
> Hum.. It is being done on purpose. anova.glmlist has this nugget
> inside:
> 
>     table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
>         pmax(0, -diff(resdev))))
> 
> This is obviously inconsistent with the lm version, but I wonder which
> one is wrong? There may be a point in requiring models to be in
> increasing order. However, something is clearly wrong with that too:
> 
> > anova(f.glm.2,f.glm.1,test="F")
> ...
>             Resid. Df Resid. Dev Df Deviance      F Pr(>F)
> A + S               5     4.6250                          
> A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745
> 
> Notice the p value! This comes from an F with 2 df in the denominator
> instead of 4. Comes out of this bit:
> 
>     if (!is.null(test)) {
>         bigmodel <- object[[(rdf <- order(resdf)[1])]]
>         dispersion <- summary(bigmodel, dispersion =
>         dispersion)$dispersion
>         df.dispersion <- if (dispersion == 1) 
>             Inf
>         else rdf
> 
> which is clearly wrong since rdf will be an integer between 1 and the
> number of models compared...
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:38:56 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)
Subject: [Rd] dotplot() colors reversed (PR#580)
Message-ID: <200006251938.VAA10074@pubhealth.ku.dk>


dotplot() colors are plotted (probably unintentionally?) in reverse order.

x <- c(rep(1,3),rep(2,3),rep(3,3))
dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 21:04:16 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 22:04:16 +0200 (MET DST)
Subject: [Rd] help screens: typos, suggestions (PR#581)
Message-ID: <200006252004.WAA10158@pubhealth.ku.dk>

Dear R team,

If I may offer some suggestions for specific help screens:

1.
help(plot.default):  shouldn't `type = "n"' be listed as a possible value?

also, would it be better to say, e.g., "the following values (rather than
'possibilities') are possible" ?

2.
help(glm) data: misprint (ffrom)

    data: an optional data frame containing the variables in the model.
           By default the variables are taken from the environment
          ffrom which `glm' is called.
         ^^^

3. 
help(all):  might it be helpful to add:

  "see also `any'"

and,

help(any)

  "see also `all'"  ?

Many thanks!

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 22:37:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 23:37:58 +0200
Subject: [Rd] dotplot() colors reversed (PR#580)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)"
References: <200006251938.VAA10074@pubhealth.ku.dk>
Message-ID: <x2vgyxigqx.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> dotplot() colors are plotted (probably unintentionally?) in reverse order.
> 
> x <- c(rep(1,3),rep(2,3),rep(3,3))
> dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Yes. This is caused by 

        o <- rev(order(as.numeric(groups)))
        x <- x[o]
        groups <- groups[o]

and no corresponding reordering of color. A little care is needed when
fixing this since color is not necessarily a vector. Same thing with
lcolor, by the way.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jun 26 14:50:44 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 26 Jun 2000 15:50:44 +0200 (MET DST)
Subject: [Rd] lm.{w}fit(x,y,*) : fails when x has no column names (PR#582)
Message-ID: <200006261350.PAA18255@pubhealth.ku.dk>


(and bug.report() with vanilla setting is *REALLY* horrible inside ESS ... !)

> X <- matrix(rnorm(10),5,2)
> y <- rnorm(5)
> w <- rnorm(5)^2

> lm.fit (x=X, y=y) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector

> lm.wfit(x=X, y=y, w=w) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector
> 

--

Now, since  help(lm.fit) and help(lm.wfit) really do not contain any
information on these, one could argue that the above is not a bug.

However as build blocks for programming (many regressions),
these functions *should* work reasonably generally.

(I'm trying to fix this bug myself).

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramin.nakisa@ncr.com  Mon Jun 26 19:06:40 2000
From: ramin.nakisa@ncr.com (ramin.nakisa@ncr.com)
Date: Mon, 26 Jun 2000 20:06:40 +0200 (MET DST)
Subject: [Rd] persp greek label problem (PR#583)
Message-ID: <200006261806.UAA19700@pubhealth.ku.dk>

Full_Name: Ramin Nakisa
Version: 1.1.0
OS: i386 linux
Submission from: (NULL) (192.127.94.7)


Labels created with expression seem to disappear, e.g. the x axis label in

x <- -6:16
contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
xlab=expression(theta[0]), ylab=expression(theta[1]))

and all three labels in

x <- -6:16
persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
zlab=expression(theta[2]), ticktype="detailed")


Is this just a clipping problem, with a large bounding box for expression=...?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:37:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:37:15 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <200006261806.UAA19700@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:

> Full_Name: Ramin Nakisa
> Version: 1.1.0
> OS: i386 linux
> Submission from: (NULL) (192.127.94.7)
> 
> 
> Labels created with expression seem to disappear, e.g. the x axis label in
> 
> x <- -6:16
> contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> xlab=expression(theta[0]), ylab=expression(theta[1]))
> 
> and all three labels in
> 
> x <- -6:16
> persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> zlab=expression(theta[2]), ticktype="detailed")
> 
> 
> Is this just a clipping problem, with a large bounding box for expression=...?

No. It's a bug in the C code.

It was reported and fixed last week, so it should be fixed in
R-patched on CRAN.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:42:50 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:42:50 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0006261142200.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000, Thomas Lumley wrote:

> On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:
> 
> > Full_Name: Ramin Nakisa
> > Version: 1.1.0
> > OS: i386 linux
> > Submission from: (NULL) (192.127.94.7)
> > 
> > 
> > Labels created with expression seem to disappear, e.g. the x axis label in
> > 
> > x <- -6:16
> > contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> > xlab=expression(theta[0]), ylab=expression(theta[1]))
> > 
> > and all three labels in
> > 
> > x <- -6:16
> > persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> > zlab=expression(theta[2]), ticktype="detailed")
> > 
> > 
> > Is this just a clipping problem, with a large bounding box for expression=...?
> 
> No. It's a bug in the C code.
> 
> It was reported and fixed last week, so it should be fixed in
> R-patched on CRAN.

Actually, it was only reported and fixed for two-d plots. It is probably
still broken for persp()

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 27 08:11:36 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 27 Jun 2000 09:11:36 +0200 (MET DST)
Subject: [Rd] par(lty = "1") -- lty storage-etc bug (PR#584)
Message-ID: <200006270711.JAA22047@pubhealth.ku.dk>

Bug report, rather than R-help;
This is at least since 1.0.0; didn't try even older versions ..

    Jim> Anon wrote:

    Anon> ...However, if I use Fred <- c(1,"33")...  Is this a
    Anon> bug, or am I missing something?

this made use it  essentially something like   
      par(lty = "1")

    Jim> This is an interesting problem.  It boils down to the fact that
    Jim> PostScript expects an array (even if it's empty) and an offset for
    Jim> "setdash".  Normally, a solid line is specified with an empty
    Jim> array and zero offset.  However, if R gets specs that convert to
    Jim> zero and puts a zero in the array, the PostScript interpreter will
    Jim> barf.  Zero can appear, but there must be at least one non-zero
    Jim> number in the array.  Hexadecimal strings supplied to lty are
    Jim> converted to array elements, but a single character "1" seems to
    Jim> produce "0.00".  Remember that the c() operater will coerce the
    Jim> number 1 to the string "1" when combining it with "33".  That is,
    Jim> it's probably a bad idea to mix the two methods of specifying line
    Jim> types with "lty".

I think there's at least another (maybe the only one) bug in main/graphics.c
which is not related to postscript at all, see below.

    Jim> A possible fix is to insert a test for zero in the function
    Jim> SetLineStyle() - devPS.c:

 >> static void SetLineStyle(int newlty, double newlwd, DevDesc *dd)
 >> {
 >>     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 >>     int i, ltyarray[8];
 >>     int sum = 0;
 >>     if (pd->lty != newlty || pd->lwd != newlwd) {
 >>       pd->lwd = newlwd;
 >>       pd->lty = newlty;
 >>       PostScriptSetLineWidth(pd->psfp, dd->gp.lwd*0.75);
 >>       for(i = 0; i < 8 && newlty & 15 ; i++) {
 >>           ltyarray[i] = newlty & 15;
 >>           sum += ltyarray[i];
 >>           newlty = newlty >> 4;
 >>       }
 >>       if(!sum) i = 0;
 >>       PostScriptSetLineTexture(pd->psfp, ltyarray, i, dd->gp.lwd * 0.75);
 >>     }
 >> }

    Jim> producing a solid line when all elements of 'ltyarray' are zero.

yes, but I think this shouldn't be necessary.

The real bug is uglier:
If you use something like   par(lty="1")  
or any other one-letter (hex digit) string,
this leads to an invalid `code', and further, the storage location 
(such dd->lty in C) of that string somehow loses it's final string
terminator (\0 in C) and gets mangled.
I can reproduce this most easily with the following


for(i in seq(along=dev.list())) dev.off()
par(lty="1")
example(barplot) 
## (almost!) always ends in an error, see below,

## and then
for(i in 1:4) print(par("lty"))

--------

Note that in the Error message below,
    "invalid hex digit in color" 
has been changed in the very latest R-release sources to
    "invalid hex digit in color or lty" 
which is ``more helpful'' here :

> example(barplot) ## (almost!) always ends in an error, see below,

barplt> tN <- table(Ni <- rpois(100, lambda = 5))
barplt> r <- barplot(tN, col = "gray")

barplt> lines(r, tN, type = "h", col = "red", lwd = 2)
Error in plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...) : 
	invalid hex digit in color

> traceback()
[1] "plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...)"         
[2] "lines.default(r, tN, type = \"h\", col = \"red\", lwd = 2)"               
[3] "lines(r, tN, type = \"h\", col = \"red\", lwd = 2)"                       
[4] "eval.with.vis(expr, envir, enclos)"                                       
[5] "eval.with.vis(ei, envir)"                                                 
[6] "source(zfile, echo = echo, prompt.echo = prompt.echo, verbose = verbose, "
[7] "    max.deparse.length = 250)"                                            
[8] "example(barplot)"                                                         

> for(i in 1:4) print(par("lty"))
[1] "1r"
[1] "1SI@}@gMG@\\}@\"J@}@U\\F@4}@?D@|@A@|@]G@|@(B@names"
[1] "1|@ult"
[1] "1"
> 

---------
Peter D., I'd like to learn how to use watchpoints to debug this...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Jun 27 21:10:00 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Tue, 27 Jun 2000 22:10:00 +0200 (MET DST)
Subject: [Rd] MAINLD and SHLIBLD
In-Reply-To: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.21.0006251512130.17819-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 23 Jun 2000, Kurt Hornik wrote:

> I would like to always use ${CC} for linking the main binary and the
> shlibs.
> 
> Inspection of configure.in reveals that we currently deviate in the
> following cases:
> 
> 			mainld				shlibld
> 	aix[2-9]*	ld				ld
> 	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}

I'm only speaking for alpha*osf*:

I think these settings have their roots in very old R versions, where we
had no means to determine the system dependent Fortran libraries (-lUfor
-lots ... for DEC compilers). Now it works without these settings, i.e. 
with mainld=shlibld=${CC}. 

With DEC compilers it still fails in a "make check" with 
  ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
  /bin/sh: 19080 Memory fault
but this is unrelated to shlibld and mainld settings, as it occurs the
same way with current settings. 

The combination gcc/g77 (version 2.95.2) works as before (successfull
"make check"), the nofor_main and fpe3 options where meaningless (and even
generated some warnings) for GNU compilers.

Here is what I did:  
agebhard@delta[R-1.2.0]$ diff configure.in.bak configure.in
630,633c630,635
<     mainld="${FC} -g -nofor_main -fpe3 "
<     cpicflags=
<     cxxpicflags=
<     shlibld=${FC}
---
>     if test "${GCC}" != yes; then
>   #    mainld="${FC} -g -nofor_main -fpe3 "
>       cpicflags=
>       cxxpicflags=
>   #    shlibld=${FC}
>     fi

DEC compilers have no PIC flags, thats the reason for setting them to "", 
but may be configure would guess this automatically.

This was with a current r-devel version, on alpha-dec-osf4.0e

Albrecht


> 	hpux*		${CC}				ld
> 
> Does anyone recall why we do not use ${CC} in these cases?  Did anyone
> successfully build R on these platforms with ${CC} for mainld/shlibld?
> (Inspection of ltconfig from libtool seems to indicate that ${CC} should
> be possible ...)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Wed Jun 28 14:57:38 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Wed, 28 Jun 2000 15:57:38 +0200
Subject: [Rd] Re: [R] using graphapp.h
In-Reply-To: <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>; from vadim@kutsyy.com on Wed, Jun 28, 2000 at 08:28:45AM -0400
References: <20000628135107.C7950@sirio.stat.unipd.it> <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>
Message-ID: <20000628155738.A8378@sirio.stat.unipd.it>

On Wed, Jun 28, 2000 at 08:28:45AM -0400, Vadim Kutsyy wrote:
> What I need to do as to plot a few tens thousands squares of different
> colors.  As David mention, it can be done with polygon(), but it still be
> slow.  So I am trying to do it from c code.
> 
> As a result, I open the window with plot(), and then I want to plot in to
> that window from c code (in S it is done using "graphics.h").  The only
> thing I could think about, is to use "graphapp.h".  "graphapp.h" defines a
> lot of function for that (fillrect(rect r) for example), but I can not
> figure out how to make it grow in that window, which is already open by
> plot().
> 

  I move to r-devel.
  
  I am not sure that plotting directly on a graphics device is a
  safe idea. I see it as a little adventure. Anyway, 
  since I not against adventures, my 0.01Euro on what I know.

  A possibility is to call do_polygon - the C front end of the
  R 'polygon' function - directly from your C code.

  Another  portable alternative is clone do_polygon and friends. 
  You need to get a pointer to the current device driver and then you
  must use the device operation functions.
  Scheleton:
  #include "Graphics.h"
  .............
  DevDesc *dd = CurrentDevice() /* or GetDevice(number of device) */
  Then 
  (a) using GPolygon or similar function (in main/graphics.c )
   or 
  (b) dd->dp.polygon(...)  
  you can draw to the device (difference between (a) e (b) is that
  (b) calls directly the device).
  Essentially, (a)  is what do_polygon does.


  Alternatively, if you want, you can also call graphapp directly
  (but this isn't portable).
  A pointer to the graphapp window is hided in the DeviceSpecific part 
  of DevDesc. So, you need to copy the definition of 'gadesc' from devga.c. 
  Then 
  window w = ((gadesc *) dd->DeviceSpecific)->gawin;
  will give you the pointer.

  Keep in mind that, if I remember well Graphics.h is not 
  a part of the R API. Surely, the details
  of the DeviceSpecific part of a DevDesc are subject to changes.

  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nopause.berkeley.edu  Thu Jun 29 10:44:17 2000
From: acuster@nopause.berkeley.edu (Adrian Vance Custer)
Date: Thu, 29 Jun 2000 02:44:17 -0700
Subject: [Rd] Question on an alternative to ls() and expanded R object types
Message-ID: <20000629024417.B9659@nopause.berkeley.edu>

Hello everyone,

This question and associated comments come from a desire for more sanity in
my object name space. These ideas may just be a whacky, way too difficult
to implement or already possible with existing functions.


Would it be possible to improve R's listing ability by adding the capability
to list objects by type, creation date, modification date, ancestry and/or
user comments?


Right now my object names are devoted to keeping track of these issues
rather gouping objects by subject. My object names have their types either as
prefixes or suffixes and my name space is structured whith A.~~ as storage
space, f.~~ as functions, p.~~ as plot scripts and working.~~ or z.~~ as
working.data. Then I use dummy variables, for instance, fxxxxxxxxxxxxxxxxxx~
to delimit the space between functions and plots. This is all done so that
ls() returns a well structured workspace. Note that my only organizational
structure is the alphbetical nature of the objects rather than object
attributes. Splus has solved these issues with the object browser which is
complex and non-intuitive. While eventually such a system could be created,
it is a large project.

ls() returns a vector of names which is useful for language constructs
(functions that might manipulate the listing) but perhaps less useful for
interactive use. It would be neat to be able to get a colorized list of
object names with colors assigned to object type. This would,of course,
require a color terminal. Alternatively, the listing could return a list
of name vectors for different types so that I could say, newls()$vectors,
and get the vectors. I've started working on something like this but it
has the look and feel of someone largely unfamiliar with the subtleties of
the language. (Note typeof(), and thereby mode(), does not differentiate
between lists and frames.)

Another luxury would be able to list the objects I've played with in the
past few days. Since this facility doesn't exist I have to be exceedingly
careful to remember the objects I have worked with recently. Similarly,
when I derive an object from another, I currently have to remember the
hierarchy. I am working mostly from a single large frame from which I
extract various pieces. I modify these pieces to attempt an analysis or
another but I must track both the objects and subobjects and the operations
that happened along the way. I envison something like the call object in
the model objects.  I suspect adding to each object its ancestry would
take up a fair amount of space but I have no real sense of the memory
requirements of such an addition.

The idea of a comment space may suffer similar difficulties of storage. I
sometime could use the ability to do
> z.vec.log.tsetse_(A.FRAME.tsela.300.cont$logtse,comment="First six samples")
so that the name space does not have to hold all the clues about the
object itself.

The newls() function I discuss earlier is implementable in
userspace. However, the other issues are not. I would be interested
to read your responses. Perhaps these issues can be solved with better
organization. If that is the case, I would like the learn this and get these
suggestions into the user documentation. Perhaps these issues only affect
me, or affect everyone but are huge coding efforts. I suspect getting color
into the terminal would be a large effort. Similarly, expanding the base
object with object histories, times and comments may be too much work. If I
remember correctly, there is a substantial difference between Splus5 objects
and earlier types which may be relevant to the ability to do such things.

Thank you for any responses,

adrian
acuster@nature.berkeley.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Jun 29 09:16:27 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 29 Jun 2000 09:16:27 +0100 (BST)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.LNX.4.10.10006290912540.2519-100000@localhost.localdomain>


> suggestions into the user documentation. Perhaps these issues only affect
> me, or affect everyone but are huge coding efforts. I suspect getting color
Well, these issues don't affect me at all. (You said you wanted feedback).

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@bavaria.ece.cmu.edu  Thu Jun 29 13:11:41 2000
From: tov@bavaria.ece.cmu.edu (tov@bavaria.ece.cmu.edu)
Date: Thu, 29 Jun 2000 14:11:41 +0200 (MET DST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
Message-ID: <200006291211.OAA18674@pubhealth.ku.dk>

Hi,

  After the installation I can't search, clicking on "Search Engine &
  Keywords" gives me a 404, file not found.  I can concatenate 
  SearchEngine-head and -foot.html into SearchEngine.html which allows
  me to search, but I'm missing the key words.
  Finally the question:  What happened that SearchEngine.html is not
  generated at install time?  

  Thanks,
  -tom


P.S.  I quickly checked "?bug.report" to see its options.  The doc
    contains the "method" and "address" twice.  Do you want something
    trivial like this reported thru bug.report or is there another channel?
    Do you have a severity option for bug.reports?


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 29 13:34:14 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jun 2000 14:34:14 +0200 (CEST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
In-Reply-To: <200006291211.OAA18674@pubhealth.ku.dk>
References: <200006291211.OAA18674@pubhealth.ku.dk>
Message-ID: <14683.16966.871882.23608@galadriel.ci.tuwien.ac.at>


>>>>> On Thu, 29 Jun 2000 14:11:41 +0200 (MET DST),
>>>>> tov  (t) wrote:

t> Hi,
t>   After the installation I can't search, clicking on "Search Engine &
t>   Keywords" gives me a 404, file not found.  I can concatenate 
t>   SearchEngine-head and -foot.html into SearchEngine.html which allows
t>   me to search, but I'm missing the key words.
t>   Finally the question:  What happened that SearchEngine.html is not
t>   generated at install time?  

t>   Thanks,
t>   -tom



There was a bug (already fixed in the patched release version) which
did not install SearchEngine.html (though it was built) when the build
directory was not the src directory.

If you did compile R yourself, could you get R-patched from CRAN and
see if the problem still exists?


t> P.S.  I quickly checked "?bug.report" to see its options.  The doc
t>     contains the "method" and "address" twice.  Do you want

Fixed.


t>     trivial like this reported thru bug.report or is there another
t>	channel?

The channel is correct.

t>     Do you have a severity option for bug.reports?

Not yet.

Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 29 15:21:33 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 29 Jun 2000 16:21:33 +0200 (MET DST)
Subject: [Rd] PR#563 - fix installed
Message-ID: <200006291421.QAA20238@pubhealth.ku.dk>

Our thanks to Setzer Woodrow for an admirably thorough bug report.
His suggested fix of having formula.default check for an attribute
named "formula" in the object has been installed as a bug fix in R-1.1
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 16:35:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 29 Jun 2000 08:35:51 -0700 (PDT)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.GSO.4.21.0006290820030.10459-100000@atlas.biostat.washington.edu>

On Thu, 29 Jun 2000, Adrian Vance Custer wrote:
> 
> Would it be possible to improve R's listing ability by adding the capability
> to list objects by type, creation date, modification date, ancestry and/or
> user comments?

As you point out, the listing by type could be done in userspace.  The
comments could also be done this way, and you could add creation and
modification dates by hand this way or with simple functions like the
following, which adds a comment and the date it was made

addComment<-function(x,commment){
	cc<-attr(x,"comment")
	if (is.null(cc))
	    cc<-list()
	cc[[length(cc)+1]]<-paste(comment,date)
	attr(x,"comment")<-cc	
	x
	}	

showComments<-function(x){
	cc<-attr(x,"comment")
	if (is.null(cc)) 
	   return("No Comment")
        else
	   cc
	}
 
> Another luxury would be able to list the objects I've played with in the
> past few days. Since this facility doesn't exist I have to be exceedingly
> careful to remember the objects I have worked with recently. Similarly,
> when I derive an object from another, I currently have to remember the
> hierarchy. I am working mostly from a single large frame from which I
> extract various pieces. I modify these pieces to attempt an analysis or
> another but I must track both the objects and subobjects and the operations
> that happened along the way. I envison something like the call object in
> the model objects.  I suspect adding to each object its ancestry would
> take up a fair amount of space but I have no real sense of the memory
> requirements of such an addition.

The problem here is not so much the space, since Unix time and date
information can be stored in 32 bits (at least until 2038), but the
time.  Adding a creation time to every object would probably have serious
effects on the speed of R (in addition to the amount of work it would
take to implement). That's why it's probably better to just use comments.

Storing a pointer to the parents of an object would be a real pain (since
it would require keeping track of what objects were evaluated to do each
modification) and to do it properly would require keeping old versions of
the objects.

Something less general but more useful is probably to keep ESS transcripts
of sessions, which can then be replayed if the data changes. Some R
developers and others are interested in this sort of idea as 'Literate
Data Analysis' by analogy with Literate Programming.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 17:49:37 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 29 Jun 2000 18:49:37 +0200 (MET DST)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
Message-ID: <200006291649.SAA21319@pubhealth.ku.dk>


Under Windows, system.file() can return a path with both / and \\
characters (R 1.0.0)
eg
> system.file("libs",pkg="modreg")
"C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"

This is fine when passed to R functions but not when passed to eg Tcl.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 29 18:03:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 29 Jun 2000 18:03:17 +0100 (GMT Daylight Time)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
In-Reply-To: <200006291649.SAA21319@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006291756380.337-100000@tern.stats>

On Thu, 29 Jun 2000 thomas@biostat.washington.edu wrote:

> 
> Under Windows, system.file() can return a path with both / and \\
> characters (R 1.0.0)
> eg
> > system.file("libs",pkg="modreg")
> "C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"
> 
> This is fine when passed to R functions but not when passed to eg Tcl.

Yes, but the bug is in TCL, not R!  Such paths are valid paths on Windows,
with \ being preferred, but TCL does not accept paths containing \, which I
find pretty amazing.  I am not sure it handles drives properly, either.

In a few cases / or \ is required, so you will see gsub used quite
frequently in Windows R code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 29 18:46:25 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 29 Jun 2000 13:46:25 -0400
Subject: [Rd] Binary file functions in R
Message-ID: <395c8897.556056@fisher.stats.uwo.ca>

This is just to let people know that I'm going to try to put together
a little package of binary file read/write functions for R, along the
lines described in my message in r-help.  I'm going to do it first in
R for Windows using a DLL written in Delphi; I'll let people comment
on that, and once the design settles down, I'll redo the external code
in C so that it should be portable to Unix as well.

One immediate change from my first pass suggestion below:

I'll just have readint, readfloat, readchar; the size and whether
signed or unsigned will be determined by parameters to those
functions.

Other suggested changes are welcome!

Duncan Murdoch

>I think a set of stream like functions would be really handy
>sometimes, especially for those of us who aren't that comfortable with
>the external function interface.
>
>For example:
>
>fopen would take a filename and some information about the open mode
>(read and write would probably be enough modes) and would return a
>file handle.
>
>readint8, readint16, readint32, readint64 would read a specified count
>of integers into an integer vector.
>
>readfloat4, readfloat8 would read a specified count of floating point
>values into a vector of doubles.
>
>readchar would read a specified count of characters into a single
>component character vector, or take two counts, and read n characters
>m times into an m component vector.
>
>There would be similar writexxxx functions, a seek function, and an
>fclose function.
>
>Some issues to consider would be whether these functions should worry
>about big vs. little endian storage (I'd say probably not, but there
>should be other functions that can change it in memory), how errors
>should be handled, whether the garbage collector should be smart
>enough to automatically close an abandoned file, whether you should be
>allowed to use these low level functions on things in memory or just
>on files, etc.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 29 21:45:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 29 Jun 2000 16:45:42 -0400
Subject: [Rd] more Rd ordering
Message-ID: <395BB576.E1BAB8D0@bank-banque-canada.ca>

Although the ordering from Rdindex and R CMD build now agrees when I run them at
a command prompt, for some reason Rdindex now gives a different order when it is
run at a command prompt than it does when it is run from make. My Makefile entry
is:

%/INDEX : %/man
 @echo "making target $@ ..."
 (cd $(dir $@) ; R  CMD    Rdindex man/*.Rd >INDEX )

Any ideas?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 30 05:33:50 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 30 Jun 2000 04:33:50 GMT
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c8897.556056@fisher.stats.uwo.ca>
References: <395c8897.556056@fisher.stats.uwo.ca>
Message-ID: <395c1fdc.944518@julian.uwo.ca>

I've put together the first version of "Rstreams", a package that
allows binary access to files.  This version is for Windows only.
You can pick it up as
<http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
Comments are welcome!

Some known problems:

I tried to set it up as a package, but couldn't figure out from the
documentation where the .DLL should go.  It's sitting in the src
directory for now.

There are other things wrong with the organization as a package; R
says "no R code found" when I try to attach it.  If you want to use
it, you'll have to source the Rstreams.R file and dyn.load the DLL
yourself.

I used the .C() interface to external functions, but I'm not sure how
it handles character vectors being returned from DLLs.  I'm sticking
string pointers into the result vector, which is likely to cause
memory problems, since I don't use Ralloc to allocate the strings.
How are you supposed to return a string value?  (This only applies to
the print method; it needs to find out the filename.  The readchar
method pre-allocates the space that's needed and uses that.)

The routines that I've implemented so far are:

openstream
closestream
print.stream
readint
readfloat
readchar
writeint
writefloat
writechar
seek
truncate

One other comment for Robert G.::

Most of the information about a stream variable is kept in the DLL.
All that R gets is a handle.  This means you're safe to make
assignments of stream variables to other variables; both refer to the
same stream object in the DLL.  That's how I think environments should
be handled.

Again, comments are welcome!

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 30 07:22:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 30 Jun 2000 07:22:51 +0100 (BST)
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c1fdc.944518@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006300717310.3250-100000@auk.stats>

On Fri, 30 Jun 2000, Duncan Murdoch wrote:

> I've put together the first version of "Rstreams", a package that
> allows binary access to files.  This version is for Windows only.
> You can pick it up as
> <http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
> Comments are welcome!
> 
> Some known problems:
> 
> I tried to set it up as a package, but couldn't figure out from the
> documentation where the .DLL should go.  It's sitting in the src
> directory for now.

It is not intended to be in the source of a package. Once the package is
compiled, the DLL goes in the libs directory.

> There are other things wrong with the organization as a package; R
> says "no R code found" when I try to attach it.  If you want to use
> it, you'll have to source the Rstreams.R file and dyn.load the DLL
> yourself.

Yes, you need to compile the package before using library() on it
(and that converts the help files too).

> I used the .C() interface to external functions, but I'm not sure how
> it handles character vectors being returned from DLLs.  I'm sticking
> string pointers into the result vector, which is likely to cause
> memory problems, since I don't use Ralloc to allocate the strings.
> How are you supposed to return a string value?  (This only applies to
> the print method; it needs to find out the filename.  The readchar
> method pre-allocates the space that's needed and uses that.)

You do need to use Ralloc to allocate storage for strings.  The .C
interface copies the strings on the way in and out, so the memory
needs to be de-allocated after the copy.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jun 30 19:15:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 30 Jun 2000 20:15:51 +0200 (MET DST)
Subject: [Rd] dim(a <- ...) sets invisible flag erronously (PR#587)
Message-ID: <200006301815.UAA02861@pubhealth.ku.dk>

{Nothing really harmful;  R 1.1.0}

dim(.) sets (or doesn't clear) the  ``invisible flag'' for printing in
certain circumstances:

  > dim(a <- cbind(1))
  >

does *not* print as it should :

  > dim(a)
  [1] 1 1

---

Question to the real "hackers" :

How can I check this using R code alone (not using files),
i.e. (how) can I ask an R expression if its ``invisible flag'' is set or not ?

{help(invisible) doesn't help here}.

Maybe one would want an

      is.invisible(.)

function?

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jun  1 00:10:41 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:10:41 -0400 (EDT)
Subject: [Rd] legend with multiple columns
Message-ID: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>


  I have made a minor hack to "legend" (in R 1.0.0, but I didn't notice
any changes to legend in the 1.0.1 NEWS) to allow the legend to be
formatted in multiple columns, or horizontally (number of columns <-
number of legend items).  (I find this helpful when I have lots of legend
items and not a lot of vertical space to squeeze the legend into.)
  (Another hack I've considered is allowing location to be specified more
flexibly, but I haven't bothered so far.)

  I haven't stringently tested it, but it seems to work.

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

PATCHES to legend.Rd and legend.R:

*** legend2.txt	Wed May 31 14:45:18 2000
--- legend2.R	Wed May 31 15:02:22 2000
***************
*** 1,7 ****
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
! 	      bg = par("bg"), cex = 1,
!               xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!               text.width = NULL, merge = do.lines && has.pch, trace = FALSE)
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
--- 1,9 ----
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
!                        bg = par("bg"), cex = 1,
!                        xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!                        text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
!                        ncol=1, horiz =FALSE)
!   ## BB hacked for multiple columns
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
***************
*** 67,72 ****
--- 69,78 ----
      do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
      n.leg <- length(legend)
  
+     if (horiz && ncol!=1) warning("horizontal specification overrides number of columns")
+     if (horiz) ncol <- n.leg
+     n.legpercol <- ceiling(n.leg / ncol)  ## legends per column
+ 
      if(has.pch <- !missing(pch)) {
  	if(is.character(pch) && nchar(pch[1]) > 1) {
              if(length(pch) > 1)
***************
*** 98,108 ****
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.leg * ychar + yc
!         w <- text.width + (1.5 + x.intersp) * xchar
!         if(!missing(fill))      w <- w + dx.fill
!         if(has.pch && !merge)   w <- w + dx.pch
!         if(do.lines)		w <- w + (2+x.off) * xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
--- 104,115 ----
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.legpercol * ychar + yc
!         w0 <- text.width + (x.intersp+1) * xchar
!         if(!missing(fill))      w0 <- w0 + dx.fill
!         if(has.pch && !merge)   w0 <- w0 + dx.pch
!         if(do.lines)		w0 <- w0 + (2+x.off) * xchar
!         w <- w0*ncol+xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
***************
*** 112,119 ****
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + xchar
!     yt <- top - (1:n.leg) * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)
--- 119,126 ----
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + (w0*rep(0:(ncol-1),rep(n.legpercol,ncol)))[1:n.leg] + xchar
!     yt <- top - rep(1:n.legpercol,ncol)[1:n.leg] * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)

*** legend.Rd.old	Wed May 31 19:02:55 2000
--- legend.Rd	Wed May 31 19:05:14 2000
***************
*** 43,48 ****
--- 43,52 ----
      Defaults to the proper value computed by \code{\link{strwidth}(legend)}.}
    \item{merge}{logical; if \code{TRUE}, ``merge'' points and lines but
      not filled boxes.  Defaults to \code{TRUE} if there are points and lines.}
+   \item{ncol}{the number of columns in which to set the legend item (default is 1,
+       a vertical legend.}
+   \item{horiz}{logical; if \code{TRUE}, set the legend horizontally rather than
+      vertically (specifying \code{horiz} overrides the \code{ncol} specification).}
  }
  \description{
    This function can be used to add legends to plots.  Note that a call

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jun  1 00:30:05 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:30:05 -0400 (EDT)
Subject: [Rd] legend with multiple columns
In-Reply-To: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.10.10005311929350.3397-100000@bolker.zoo.ufl.edu>


  oops, replying to my own message.  I notice there's a typo: "item"
should be "items" in the description of the "ncol" argument ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  1 07:24:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)
Subject: [Rd] read.table and strip.white
In-Reply-To: <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>

On Wed, 31 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley wrote:
> 
> > > [...]
> 
> > I was rather surprised here, and this is not what the prototype does:
> > 
> >   .col1. .col2. .col3.
> > 1      1      1      1
> > 2      2      2      2
> > 
> > Should not strip.white be true for the header line?
> 
> If there are no compatibility problems, setting it to TRUE would be
> useful ...
> But compatibility is an important point, especially in read.table(.), I
> think. Many R users have got their own functions using read.table(.), I
> suppose. Maybe changing the defaults could break anything?

That's tantamount to saying we should not fix bugs because users might be
relying on the undocumented and unintended behaviour!  Yes, changing this
could change things: for a start the V&R MASS datasets would load correctly
on R without R-specific editing.  Does anyone seriously intend to have
heading spaces in their column names in a data frame? Especially as those
are not S variable names, and as you see S-PLUS (but not R) does enforce
that.  (read.table circumvents that by not using the class
constructor, but S-PLUS has an explicit call to make.names lacking in R.)

I am inclined to make the change _and_ to check the column names.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  1 22:00:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2000 23:00:28 +0200
Subject: [Rd] read.table and strip.white
In-Reply-To: Prof Brian D Ripley's message of "Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>
Message-ID: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 31 May 2000, Uwe Ligges wrote:
> 
> > Prof Brian Ripley wrote:
> > 
> > > > [...]
> > 
> > > I was rather surprised here, and this is not what the prototype does:
> > > 
> > >   .col1. .col2. .col3.
> > > 1      1      1      1
> > > 2      2      2      2
> > > 
> > > Should not strip.white be true for the header line?
> > 
> > If there are no compatibility problems, setting it to TRUE would be
> > useful ...
> > But compatibility is an important point, especially in read.table(.), I
> > think. Many R users have got their own functions using read.table(.), I
> > suppose. Maybe changing the defaults could break anything?
> 
> That's tantamount to saying we should not fix bugs because users might be
> relying on the undocumented and unintended behaviour!  Yes, changing this
> could change things: for a start the V&R MASS datasets would load correctly
> on R without R-specific editing.  Does anyone seriously intend to have
> heading spaces in their column names in a data frame? Especially as those
> are not S variable names, and as you see S-PLUS (but not R) does enforce
> that.  (read.table circumvents that by not using the class
> constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> 
> I am inclined to make the change _and_ to check the column names.

I tend to agree, recently having had dealings with an SPSS-created
.cvs file with "Height SDS" and so on as variable names. However, it
would seem that the prototype *does* read the leading whitespace and
replaces it with a dot while fixing the names, no? I don't disagree
that we're probably better off without that effect, but if we're going
for compatibility.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Fri Jun  2 01:08:40 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Fri, 2 Jun 2000 02:08:40 +0200 (MET DST)
Subject: [Rd] problem loading packages (PR#559)
Message-ID: <200006020008.CAA03727@pubhealth.ku.dk>

Dear R team,

I had a strange problem that appeared suddenly, and which I'd like to
to mention in case it is of interest (although I suspect that I
may have unwittingly done something dumb: if so please accept my apology)

> library(ctest)      ## or any package other than "oz" that I tried
Error in as.character(table) : Object ".Dyn.libs" not found
> traceback()
[1] "as.character(table)"                "match(chname, 
.Dyn.libs)"          
[3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
package)"  
[5] "library(ctest)"                    

I traced the problem to my .RData file, and specifically to ".AutoloadEnv"

> ls(all.names=TRUE)
 [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
 [4] ".Machine"            ".Platform"           ".PostScript.Options"
 [7] ".Provided"           ".Random.seed"        ".Traceback"         
[10] ".lib.loc"           

I removed the above, one at a time, and tried loading a library.  It
worked after I removed  ".AutoloadEnv".  I confirmed it by checking
that R works normally if I only remove ".AutoloadEnv".  I don't know
what could have caused the problem in the first place.  The contents
of ".AutoloadEnv" are shown below: 

> .AutoloadEnv
<environment: 0x40691ddc>
attr(,"name")
[1] "Autoloads"

> rm(".AutoloadEnv")
> library(gee)
> library(nlme)
Loading required package: nls 


Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 06:48:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 06:48:55 +0100 (BST)
Subject: [Rd] read.table and strip.white
In-Reply-To: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006020639510.1330-100000@auk.stats>

On 1 Jun 2000, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > On Wed, 31 May 2000, Uwe Ligges wrote:
> > 
> > > Prof Brian Ripley wrote:
> > > 
> > > > > [...]
> > > 
> > > > I was rather surprised here, and this is not what the prototype does:
> > > > 
> > > >   .col1. .col2. .col3.
> > > > 1      1      1      1
> > > > 2      2      2      2
> > > > 
> > > > Should not strip.white be true for the header line?
> > > 
> > > If there are no compatibility problems, setting it to TRUE would be
> > > useful ...
> > > But compatibility is an important point, especially in read.table(.), I
> > > think. Many R users have got their own functions using read.table(.), I
> > > suppose. Maybe changing the defaults could break anything?
> > 
> > That's tantamount to saying we should not fix bugs because users might be
> > relying on the undocumented and unintended behaviour!  Yes, changing this
> > could change things: for a start the V&R MASS datasets would load correctly
> > on R without R-specific editing.  Does anyone seriously intend to have
> > heading spaces in their column names in a data frame? Especially as those
> > are not S variable names, and as you see S-PLUS (but not R) does enforce
> > that.  (read.table circumvents that by not using the class
> > constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> > 
> > I am inclined to make the change _and_ to check the column names.
> 
> I tend to agree, recently having had dealings with an SPSS-created
> .cvs file with "Height SDS" and so on as variable names. However, it
> would seem that the prototype *does* read the leading whitespace and
> replaces it with a dot while fixing the names, no? I don't disagree
> that we're probably better off without that effect, but if we're going
> for compatibility.

No, those are the quotes being converted to `.'  The original example
was

"col1", "col2", "col3"

Now in R the quoting mechanism removes the quotes, but with quote=""
one (now) gets X.col1. etc.  S-PLUS does not have the quoting mechanism,
and leading spaces just disappear (as shown in my original posting).

I've added this in, so now read.table has check.names=TRUE and
strip.white=FALSE arguments, and the header line is always stripped
but only converted if check.names is true.  If you want leading spaces
in the col names, you will need to use quotes and check.names=FALSE,
but you can still do it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 20:34:36 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
Message-ID: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>


I just tried the rsync version of R-1.1.0 on one of my alphas:
It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
but make check stops in base-Ex.R at

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> stopifnot(abs(X - s$u %*% D %*% t(s$v)) < Eps)#  X = U D V'
Error: abs(X - s$"u" %*% D %*% t(s$"v")) < Eps is not TRUE
Execution halted

if I repeat all the svd tests manually I get:

>
> hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
> str(X <- hilbert(9)[,1:6])
 num [1:9, 1:6] 1.000 0.500 0.333 0.250 0.200 ...
> str(s <- svd(X))
List of 3
 $ d: num [1:6] 1.67e+00 2.77e-01 2.22e-02 1.08e-03 3.24e-05 ...
 $ u: num [1:9, 1:6] -0.724 -0.428 -0.312 -0.248 -0.206 ...
 $ v: num [1:6, 1:6] -0.736 -0.443 -0.327 -0.263 -0.220 ...
> Eps <- 10 * .Machine$double.eps
> D <- diag(s$d)
> abs(X - s$u %*% D %*% t(s$v)) < Eps
      [,1] [,2] [,3] [,4] [,5] [,6]
 [1,] TRUE TRUE TRUE TRUE TRUE TRUE
 [2,] TRUE TRUE TRUE TRUE TRUE TRUE
 [3,] TRUE TRUE TRUE TRUE TRUE TRUE
 [4,] TRUE TRUE TRUE TRUE TRUE TRUE
 [5,] TRUE TRUE TRUE TRUE TRUE TRUE
 [6,] TRUE TRUE TRUE TRUE TRUE TRUE
 [7,] TRUE TRUE TRUE TRUE TRUE TRUE
 [8,] TRUE TRUE TRUE TRUE TRUE TRUE
 [9,] TRUE TRUE TRUE TRUE TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,] TRUE TRUE TRUE TRUE TRUE TRUE
[2,] TRUE TRUE TRUE TRUE TRUE TRUE
[3,] TRUE TRUE TRUE TRUE TRUE TRUE
[4,] TRUE TRUE TRUE TRUE TRUE TRUE
[5,] TRUE TRUE TRUE TRUE TRUE TRUE
[6,] TRUE TRUE TRUE TRUE TRUE TRUE
> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1]  [,2]
[1,] TRUE  TRUE
[2,] TRUE  TRUE
[3,] TRUE  TRUE
[4,] TRUE  TRUE
[5,] TRUE  TRUE
[6,] TRUE FALSE
[7,] TRUE  TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
      [,1] [,2]
[1,] FALSE TRUE
[2,]  TRUE TRUE

and the errors are:

> abs(X - s$u %*% D %*% t(s$v)) - Eps
              [,1]          [,2]
[1,] -2.109424e-15 -2.220446e-16
[2,] -1.998401e-15 -8.881784e-16
[3,] -2.220446e-15 -1.776357e-15
[4,] -1.998401e-15 -1.332268e-15
[5,] -1.998401e-15 -1.332268e-15
[6,] -1.998401e-15  4.440892e-16
[7,] -1.332268e-15 -2.220446e-15
> abs(D - t(s$u) %*% X %*% s$v) - Eps
              [,1]          [,2]
[1,]  3.108624e-15 -8.881784e-16
[2,] -1.165734e-15 -2.220446e-15

4.440892e-16 and 3.108624e-15 

Eps was: 
> Eps
[1] 2.220446e-15
This seems to be ok, I tried in Fortran

      EPSMCH=DLAMCH('E')
      WRITE(*,*)"eps:",EPSMCH

and got 
 eps:  2.22044605E-16

I compiled --whithout-dxml, so I'm not using any special numeric library.

When I comment out the few lines for svd the tests from base-Ex.R complete
successfully.

All other tests succeed (other libraries and strict and sloppy specific
tests)


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  2 21:07:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 2000 22:07:45 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: Albrecht Gebhardt's message of "Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)"
References: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>

Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

> > abs(X - s$u %*% D %*% t(s$v)) - Eps
>               [,1]          [,2]
> [1,] -2.109424e-15 -2.220446e-16
> [2,] -1.998401e-15 -8.881784e-16
> [3,] -2.220446e-15 -1.776357e-15
> [4,] -1.998401e-15 -1.332268e-15
> [5,] -1.998401e-15 -1.332268e-15
> [6,] -1.998401e-15  4.440892e-16
> [7,] -1.332268e-15 -2.220446e-15
> > abs(D - t(s$u) %*% X %*% s$v) - Eps
>               [,1]          [,2]
> [1,]  3.108624e-15 -8.881784e-16
> [2,] -1.165734e-15 -2.220446e-15
> 
> 4.440892e-16 and 3.108624e-15 
> 
> Eps was: 
> > Eps
> [1] 2.220446e-15
...
>  eps:  2.22044605E-16

So one of the calculations end up at about 5.3e-15 which is over 20
times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
Alpha hardware doesn't have the extended precision of Intel FPUs but
does this look reasonable enough that we should just use a bigger Eps?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 21:22:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 21:22:43 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006022118070.4372-100000@auk.stats>

On 2 Jun 2000, Peter Dalgaard BSA wrote:

> Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:
> 
> > > abs(X - s$u %*% D %*% t(s$v)) - Eps
> >               [,1]          [,2]
> > [1,] -2.109424e-15 -2.220446e-16
> > [2,] -1.998401e-15 -8.881784e-16
> > [3,] -2.220446e-15 -1.776357e-15
> > [4,] -1.998401e-15 -1.332268e-15
> > [5,] -1.998401e-15 -1.332268e-15
> > [6,] -1.998401e-15  4.440892e-16
> > [7,] -1.332268e-15 -2.220446e-15
> > > abs(D - t(s$u) %*% X %*% s$v) - Eps
> >               [,1]          [,2]
> > [1,]  3.108624e-15 -8.881784e-16
> > [2,] -1.165734e-15 -2.220446e-15
> > 
> > 4.440892e-16 and 3.108624e-15 
> > 
> > Eps was: 
> > > Eps
> > [1] 2.220446e-15
> ...
> >  eps:  2.22044605E-16
> 
> So one of the calculations end up at about 5.3e-15 which is over 20
> times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
> Alpha hardware doesn't have the extended precision of Intel FPUs but
> does this look reasonable enough that we should just use a bigger Eps?

Other hardware with standard IEEE arithmetic succeeds. But I think
Eps = 100 * .Machine$double.eps would be adequate.  My Solaris box gets up
to 1.77e-15.  I've just committed 100 * .Machine$double.eps.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:21:42 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:21:42 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022229570.8086-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > 
> > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > .........
> > 
> > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > 
> 
> Sorry I mixed something up in my report: In this compile I used the alpha
> specific DXML library, in my rpms I omit it with --without-dxml (because
> it sometimes crashes). I will try once more now without dxml, may be this
> changes something, don't know if it gets used at all in the svd code.
> 

That was the reason. Now without DXML I pass the test without modifying
Eps:

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE
[3,] TRUE TRUE
[4,] TRUE TRUE
[5,] TRUE TRUE
[6,] TRUE TRUE
[7,] TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE


So may be it is better do disable dxml support by default in ./configure?

The following patch should do this:
--- configure.in.orig        Fri Jun  2 23:10:20 2000
+++ configure.in     Fri Jun  2 23:10:02 2000
@@ -122,7 +122,7 @@
     else
       use_dxml=true;
     fi],
-  use_dxml=true)
+  use_dxml=false)

 AC_ARG_WITH(atlas,
   [  --with-atlas            use ATLAS library (if available)],


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:36:55 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:36:55 +0200 (MET DST)
Subject: [Rd] R.bin (1.1.0) gives segfault
Message-ID: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>


During testing with R-devel on the alpha I just noticed (after misspelling
"bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
variable and should better give an error instead of a crash:

a gdb output snippet:
...
Program received signal SIGSEGV, Segmentation fault.
0x3ff800d6a10 in strcpy ()
(gdb) backtrace
#0  0x3ff800d6a10 in strcpy ()
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
#2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
(gdb) up
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
454         strcpy(X11_DLL, getenv("R_HOME"));

some test for getenv returning NULL followed by exit(1) would be
better. 


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:23:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:23:41 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > 
> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > .........
> > > 
> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > 
> > 
> > Sorry I mixed something up in my report: In this compile I used the alpha
> > specific DXML library, in my rpms I omit it with --without-dxml (because
> > it sometimes crashes). I will try once more now without dxml, may be this
> > changes something, don't know if it gets used at all in the svd code.
> > 
> 
> That was the reason. Now without DXML I pass the test without modifying
> Eps:

Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
Solaris and Windows) are giving errors of 8 or 9 times the 
machine precision, and with dxml you got 10x (and this failed as
Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
and I've given svd's 100x.

[...]

> So may be it is better do disable dxml support by default in ./configure?

Well, what does dxml support do for you?  Making the errors 1x machine
precision larger than without is hardly critical.  On the other hand, I am
not convinced that these optimized blas operations are worthwhile for all
but the most unusual uses of R.

On the other hand, I think it would be worth omitting the check for
-ldxml and -latlas except on appropriate platforms (whatever they are).

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:29:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:29:22 +0100 (BST)
Subject: [Rd] R.bin (1.1.0) gives segfault
In-Reply-To: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030624570.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> 
> During testing with R-devel on the alpha I just noticed (after misspelling
> "bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
> variable and should better give an error instead of a crash:
> 
> a gdb output snippet:
> ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x3ff800d6a10 in strcpy ()
> (gdb) backtrace
> #0  0x3ff800d6a10 in strcpy ()
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> #2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
> (gdb) up
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> 454         strcpy(X11_DLL, getenv("R_HOME"));
> 
> some test for getenv returning NULL followed by exit(1) would be
> better. 

Yes, will do.  That's hardly a misspelling, though, and it is hard to know
how far to go to protect users from negligence.  I did actually think about
that, and think `it can't happen: R_HOME is always set in R.sh'.

We've been here before: that construction crashes on some systems and not
on others.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 07:11:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <200006020008.CAA03727@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>

My guess is that this is due to a very old .RData, as .Dyn.libs
disappeared a couple of years ago, I believe. In any case, 
.GlobalEnv etc are in a .RData of recent provenance.

General warning: do not expect .RData files from alpha or beta versions
of R to work without some cleaning.

On Fri, 2 Jun 2000 rnassar@duke.edu wrote:

> Dear R team,
> 
> I had a strange problem that appeared suddenly, and which I'd like to
> to mention in case it is of interest (although I suspect that I
> may have unwittingly done something dumb: if so please accept my apology)
> 
> > library(ctest)      ## or any package other than "oz" that I tried
> Error in as.character(table) : Object ".Dyn.libs" not found
> > traceback()
> [1] "as.character(table)"                "match(chname, 
> .Dyn.libs)"          
> [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> package)"  
> [5] "library(ctest)"                    
> 
> I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> 
> > ls(all.names=TRUE)
>  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
>  [4] ".Machine"            ".Platform"           ".PostScript.Options"
>  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> [10] ".lib.loc"           
> 
> I removed the above, one at a time, and tried loading a library.  It
> worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> that R works normally if I only remove ".AutoloadEnv".  I don't know
> what could have caused the problem in the first place.  The contents
> of ".AutoloadEnv" are shown below: 
> 
> > .AutoloadEnv
> <environment: 0x40691ddc>
> attr(,"name")
> [1] "Autoloads"
> 
> > rm(".AutoloadEnv")
> > library(gee)
> > library(nlme)
> Loading required package: nls 
> 
> 
> Thank you very much.
> 
> Rashid Nassar
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i586-unknown-linux
>  arch = i586
>  os = linux
>  system = i586, linux
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Jun  3 18:10:13 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 3 Jun 2000 13:10:13 -0400 (EDT)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000603130741.3645A-100000@bio3.acpub.duke.edu>

Dear Professor Ripley,

Thank you for your reply.  What you said reminded me that I have recently 
been searching for some old data, and may well have loaded an old .RData 
file in an attempt to find them.  Thank you again.

Rashid Nassar

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem loading packages (PR#559)
> 
> My guess is that this is due to a very old .RData, as .Dyn.libs
> disappeared a couple of years ago, I believe. In any case, 
> .GlobalEnv etc are in a .RData of recent provenance.
> 
> General warning: do not expect .RData files from alpha or beta versions
> of R to work without some cleaning.
> 
> On Fri, 2 Jun 2000 rnassar@duke.edu wrote:
> 
> > Dear R team,
> > 
> > I had a strange problem that appeared suddenly, and which I'd like to
> > to mention in case it is of interest (although I suspect that I
> > may have unwittingly done something dumb: if so please accept my apology)
> > 
> > > library(ctest)      ## or any package other than "oz" that I tried
> > Error in as.character(table) : Object ".Dyn.libs" not found
> > > traceback()
> > [1] "as.character(table)"                "match(chname, 
> > .Dyn.libs)"          
> > [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> > package)"  
> > [5] "library(ctest)"                    
> > 
> > I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> > 
> > > ls(all.names=TRUE)
> >  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
> >  [4] ".Machine"            ".Platform"           ".PostScript.Options"
> >  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> > [10] ".lib.loc"           
> > 
> > I removed the above, one at a time, and tried loading a library.  It
> > worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> > that R works normally if I only remove ".AutoloadEnv".  I don't know
> > what could have caused the problem in the first place.  The contents
> > of ".AutoloadEnv" are shown below: 
> > 
> > > .AutoloadEnv
> > <environment: 0x40691ddc>
> > attr(,"name")
> > [1] "Autoloads"
> > 
> > > rm(".AutoloadEnv")
> > > library(gee)
> > > library(nlme)
> > Loading required package: nls 
> > 
> > 
> > Thank you very much.
> > 
> > Rashid Nassar
> > 
> > --please do not edit the information below--
> > 
> > Version:
> >  platform = i586-unknown-linux
> >  arch = i586
> >  os = linux
> >  system = i586, linux
> >  status = 
> >  major = 1
> >  minor = 0.1
> >  year = 2000
> >  month = April
> >  day = 14
> >  language = R
> > 
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base
> > 
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pi.broberg@telia.com  Sun Jun  4 15:50:19 2000
From: pi.broberg@telia.com (pi.broberg@telia.com)
Date: Sun, 4 Jun 2000 16:50:19 +0200 (MET DST)
Subject: [Rd] mle (PR#560)
Message-ID: <200006041450.QAA14887@pubhealth.ku.dk>

Full_Name: Per Broberg
Version: 1.00
OS: Windows 98
Submission from: (NULL) (62.20.231.229)


I tested my installation with the following:

> library(lme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
  LoadLibrary failure
> data(Orthodont)
> fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table
> fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table

What is wrong? Could it be the path
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?


Regards 

Per Broberg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jun  4 17:20:39 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 04 Jun 2000 18:20:39 +0200
Subject: [Rd] mle (PR#560)
References: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <393A81D7.68618F59@statistik.uni-dortmund.de>

pi.broberg@telia.com wrote:
> 
> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> I tested my installation with the following:
> 
> > library(lme)

Package lme is _not_ designed for R-1.0.0 (or later).
Try package nlme, available at CRAN.

You should also upgrade to R-1.0.1 (rw1001).

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  4 17:38:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 4 Jun 2000 17:38:42 +0100 (BST)
Subject: [Rd] mle (PR#560)
In-Reply-To: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006041726480.6121-100000@auk.stats>

On Sun, 4 Jun 2000 pi.broberg@telia.com wrote:

> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> 
> I tested my installation with the following:
> 
> > library(lme)

Where did you get that from?  lme has been obselete for a long time.

> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
>   LoadLibrary failure
> > data(Orthodont)
> > fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> > fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> 
> What is wrong? Could it be the path
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?

What I suspect has happened is that you have also installed an old
version of nls on top of the system's copy, and that does not work.
The message probably means that there are unsatisfied entry points, as
there will be with pre-2000 versions.  (No current package version
is older than 2000/1/29.)

My suggestion is that you wipe out your rw1000 installation and install a
fresh copy of rw1001 from CRAN, together with nlme.zip.  And throw away
anything else you have that is from before 2000/1/29.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun  4 19:05:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 4 Jun 2000 20:05:00 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > 
>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > .........
>> > > 
>> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > 
>> > 
>> > Sorry I mixed something up in my report: In this compile I used the alpha
>> > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > it sometimes crashes). I will try once more now without dxml, may be this
>> > changes something, don't know if it gets used at all in the svd code.
>> > 
>> 
>> That was the reason. Now without DXML I pass the test without modifying
>> Eps:

> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.

> [...]

>> So may be it is better do disable dxml support by default in ./configure?

> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

> On the other hand, I think it would be worth omitting the check for
> -ldxml and -latlas except on appropriate platforms (whatever they
> are).

If we can give precise meaning to this, we can of course change the
configure time defaults accordingly.  Any suggestion?

On the other hand, if we turn too much OFF by default, we will need a
mechanism for developers to store their standard R configure arguments
somewhere so that they do not have to retype them all the time ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  5 09:16:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jun 2000 10:16:04 +0200 (CEST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
Message-ID: <14651.25028.7856.544781@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> 
    >>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> > 
    >>> > > 
    >>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
    >>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
    >>> > > .........
    >>> > > 
    >>> > > I compiled --whithout-dxml, so I'm not using any special
    >>> numeric library.
    >>> > > 
    >>> > 
    >>> > Sorry I mixed something up in my report: In this compile I used
    >>> the alpha > specific DXML library, in my rpms I omit it with
    >>> --without-dxml (because > it sometimes crashes). I will try once
    >>> more now without dxml, may be this > changes something, don't know
    >>> if it gets used at all in the svd code.
    >>> > 
    >>> 
    >>> That was the reason. Now without DXML I pass the test without
    >>> modifying Eps:

    >> Nevertheless, the tolerance was too low. Most machines (e.g. Linux,
    >> Solaris and Windows) are giving errors of 8 or 9 times the machine
    >> precision, and with dxml you got 10x (and this failed as Eps was
    >> exactly 10x). eigen's help page has tolerances of 60x and 1000x, and
    >> I've given svd's 100x.

    >> [...]

    >>> So may be it is better do disable dxml support by default in
    >>> ./configure?

    >> Well, what does dxml support do for you?  Making the errors 1x
    >> machine precision larger than without is hardly critical.  On the
    >> other hand, I am not convinced that these optimized blas operations
    >> are worthwhile for all but the most unusual uses of R.

    >> On the other hand, I think it would be worth omitting the check for
    >> -ldxml and -latlas except on appropriate platforms (whatever they
    >> are).

For Atlas, [3-6]86  *are* appropriate from what I've read on the  octave
mailing list about this, and these probably account for 80%+  (?). 
Actually some people there where giving loud praises about
speed improvements for octave using Atlas -- I think not only on Intel&clones.

    KH> If we can give precise meaning to this, we can of course change the
    KH> configure time defaults accordingly.  Any suggestion?

(one of us would have to read Atlas docu).
The improvements for R wouldn't be so big, for one reason because we do NOT
use BLAS consistently
Btw, (commenting to things of yesterday or so):
     BLAS is much more basic than solve(.); solve(.) is Linpack level 
     which is on top of BLAS).

    KH> On the other hand, if we turn too much OFF by default, we will need
    KH> a mechanism for developers to store their standard R configure
    KH> arguments somewhere so that they do not have to retype them all the
    KH> time ...

;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Jun  5 11:25:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 5 Jun 2000 12:25:10 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > > 
> > > > 
> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > > .........
> > > > 
> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > > 
> > > 
> > > Sorry I mixed something up in my report: In this compile I used the alpha
> > > specific DXML library, in my rpms I omit it with --without-dxml (because
> > > it sometimes crashes). I will try once more now without dxml, may be this
> > > changes something, don't know if it gets used at all in the svd code.
> > > 
> > 
> > That was the reason. Now without DXML I pass the test without modifying
> > Eps:
> 
> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.
> 
> [...]
> 
> > So may be it is better do disable dxml support by default in ./configure?
> 
> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

I did not make any performance analysis for dxml, of course it should be
better than plain BLAS or LAPACK. But I have it disabled in my setups for
long now, because I ran frequently into troubles with special LAPACK
routines. I remember the case where I used DSYEVX (selected symmetric
eigenvalues/vectors) in one of my development libraries and got
reproducable crashes, if R was linked with dxml, it was fine without. It
even crashed when I downloaded the dsyevx source from netlib and put it
into my library, R still jumped into DSYEVX from dxml and crashed. 

I guess I could gain much more performance if I could revert from using
gcc/g77 back to DEC cc/f77, but this seems impossible or at least very
difficult (R-1.1.0 compiles with DEC cc/f77 but has problems loading
libjpeg when accessing the X11 code, and crashes with memory allocation
problems in make check if called with --gui=none)


Albrecht


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

.....................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Jun  6 17:17:14 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Jun 2000 18:17:14 +0200 (MET DST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
Message-ID: <200006061617.SAA01315@pubhealth.ku.dk>

Hi!

I tried to use compiled html on the following system:
NT4.0 SP6 (with _old_ IE3), R-1.0.1.

R > help(ls, chmhelp=TRUE)
... but nothing happens ...

>From the R Readme:
   "To make use of this you will need a recent version of 
   Windows or IE4 or later installed, or use the updater hhupd.exe 
   on CRAN at bin/windows/windows-NT/etc."

So I used the updater 'hhupd.exe'. After that (and rebooting, ...):

R > help(ls, chmhelp=TRUE)

Here R crashes (Dr. Watson)....

The same happens on another machine with IE3 _and_ Netscape 4.73.
After installing IE5 everything works fine.

Regards, 
Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun  6 18:04:02 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 6 Jun 2000 19:04:02 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
References: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <200006061704.TAA00374@aragorn.ci.tuwien.ac.at>

>>>>> Albrecht Gebhardt writes:

> On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > > 
>> > > > 
>> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > > .........
>> > > > 
>> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > > 
>> > > 
>> > > Sorry I mixed something up in my report: In this compile I used the alpha
>> > > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > > it sometimes crashes). I will try once more now without dxml, may be this
>> > > changes something, don't know if it gets used at all in the svd code.
>> > > 
>> > 
>> > That was the reason. Now without DXML I pass the test without modifying
>> > Eps:
>> 
>> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
>> Solaris and Windows) are giving errors of 8 or 9 times the 
>> machine precision, and with dxml you got 10x (and this failed as
>> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
>> and I've given svd's 100x.
>> 
>> [...]
>> 
>> > So may be it is better do disable dxml support by default in ./configure?
>> 
>> Well, what does dxml support do for you?  Making the errors 1x machine
>> precision larger than without is hardly critical.  On the other hand, I am
>> not convinced that these optimized blas operations are worthwhile for all
>> but the most unusual uses of R.

> I did not make any performance analysis for dxml, of course it should
> be better than plain BLAS or LAPACK. But I have it disabled in my
> setups for long now, because I ran frequently into troubles with
> special LAPACK routines. I remember the case where I used DSYEVX
> (selected symmetric eigenvalues/vectors) in one of my development
> libraries and got reproducable crashes, if R was linked with dxml, it
> was fine without. It even crashed when I downloaded the dsyevx source
> from netlib and put it into my library, R still jumped into DSYEVX
> from dxml and crashed.

Is that a problem with dxml or with R?  If dxml is buggy and does not
gain performance, then surely we should disable it by default.

> I guess I could gain much more performance if I could revert from
> using gcc/g77 back to DEC cc/f77, but this seems impossible or at
> least very difficult (R-1.1.0 compiles with DEC cc/f77 but has
> problems loading libjpeg when accessing the X11 code, and crashes with
> memory allocation problems in make check if called with --gui=none)

Hmm ... any ideas what is going on there?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun  6 18:49:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Jun 2000 18:49:24 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <200006061617.SAA01315@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>

On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:

> Hi!
> 
> I tried to use compiled html on the following system:
> NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> 
> R > help(ls, chmhelp=TRUE)
> ... but nothing happens ...
> 
> >From the R Readme:
>    "To make use of this you will need a recent version of 
>    Windows or IE4 or later installed, or use the updater hhupd.exe 
>    on CRAN at bin/windows/windows-NT/etc."
> 
> So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> 
> R > help(ls, chmhelp=TRUE)
> 
> Here R crashes (Dr. Watson)....
> 
> The same happens on another machine with IE3 _and_ Netscape 4.73.
> After installing IE5 everything works fine.

Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
of Windows', surely.

Not an R bug, surely?

> 
> Regards, 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 07:31:56 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 08:31:56 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>
Message-ID: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> 
> > Hi!
> >
> > I tried to use compiled html on the following system:
> > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> >
> > R > help(ls, chmhelp=TRUE)
> > ... but nothing happens ...
> >
> > >From the R Readme:
> >    "To make use of this you will need a recent version of
> >    Windows or IE4 or later installed, or use the updater hhupd.exe
> >    on CRAN at bin/windows/windows-NT/etc."
> >
> > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> >
> > R > help(ls, chmhelp=TRUE)
> >
> > Here R crashes (Dr. Watson)....
> >
> > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > After installing IE5 everything works fine.
> 
> Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> of Windows', surely.
>
> Not an R bug, surely?


But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
  R > help(ls, chmhelp=TRUE)

Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Maybe this crash of RGui is not really an R bug (?), but it should be
mentioned in the readme, I think.

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun  7 07:38:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Jun 2000 07:38:53 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>

On Wed, 7 Jun 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> > 
> > On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> > 
> > > Hi!
> > >
> > > I tried to use compiled html on the following system:
> > > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> > >
> > > R > help(ls, chmhelp=TRUE)
> > > ... but nothing happens ...
> > >
> > > >From the R Readme:
> > >    "To make use of this you will need a recent version of
> > >    Windows or IE4 or later installed, or use the updater hhupd.exe
> > >    on CRAN at bin/windows/windows-NT/etc."
> > >
> > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > >
> > > R > help(ls, chmhelp=TRUE)
> > >
> > > Here R crashes (Dr. Watson)....
> > >
> > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > After installing IE5 everything works fine.
> > 
> > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > of Windows', surely.
> >
> > Not an R bug, surely?
> 
> 
> But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
>   R > help(ls, chmhelp=TRUE)

Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?

> Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Microsoft claim that the updater will work on all versions of Windows.
You understood aright, but it seems a false claim on your system.

> Maybe this crash of RGui is not really an R bug (?), but it should be
> mentioned in the readme, I think.

I am reluctant to document Microsoft's errors in the README!  I'll
add  `according to Microsoft'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun  7 06:15:03 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Jun 2000 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006070515.HAA03575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem.

Directory:  Windows

none

Directory:  incoming

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 562 *
Subject: crash after help(..., chmhelp=TRUE)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Tue, 06 Jun 2000 18:18:15 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 10:16:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 11:16:02 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>
Message-ID: <393E12D2.C09BED4A@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

[....]
> > > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > > >
> > > > R > help(ls, chmhelp=TRUE)
> > > >
> > > > Here R crashes (Dr. Watson)....
> > > >
> > > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > > After installing IE5 everything works fine.
> > >
> > > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > > of Windows', surely.

Hm.
I tested the same thing on a NT4.0Sp5 now: R crashes here also (after
using 'hhupd.exe').
So this is no problem with SP6 only! 


Note: I have used german versions of NT4, Sp5 or 6, IE3 and 'hhupd.exe'.

So is there anyone having installed english versions of these (and not
IE4 or 5)? 
Is it possible to reproduce the crash on such a system?

> > > Not an R bug, surely?
> >
> >
> > But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
> >   R > help(ls, chmhelp=TRUE)
> 
> Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?
[.....]

I took a version of SP6 without IE5-update.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Wed Jun  7 11:04:51 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Wed, 07 Jun 2000 12:04:51 +0200
Subject: [Rd] pointer to emacs-lisp
Message-ID: <3.0.5.32.20000607120451.00973100@mail.wsl.ch>

Hi everyone,

Sorry for misusing this list to pose two lisp questions:

1)
Do you have any information on how to join an (x)emacs related news group?

2)  in Xemacs version 20.4
In .emacs I am trying to define a function like

(defun chcom
       (interactive "p")
       (string-rectangle (region-beginning) (region-end) "## "))

but on using it I get the error 

"wrong type argument commandp, chcom".
What is wrong here?

3)
I am having difficulties evaluating lisp expressions in Xemacs ver 20.4
On WinNT I am using Xwindows to work on Solaris 5.5.1.
ESC-ESC will not open a lisp evauation buffer.

Thanks for any help.

--Christian
Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Jun  7 22:06:24 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)
Subject: [Rd] "clipping error in x11()" (PR#564)
Message-ID: <200006072106.XAA13880@pubhealth.ku.dk>


There seems to be an error in the X11 display code:

try:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

it gives a big "V" as expexted. Now zoom in using small xlim and ylim:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
     xlim=c(-5,5),ylim=c(0,5))
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

gives no "V" as expected but kind of a "M".

It occures not only on Digital Unix as indicated below but also on
Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
egcs 2.91.57 on SuSE 5.3.

Interestingly the plots are correct with postscript().

The error does not occur with rwin 1001.


BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
in my tripack package.


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'


--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 22:40:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jun 2000 23:40:43 +0200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: albrecht.gebhardt@uni-klu.ac.at's message of "Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)"
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <x2r9a9qiec.fsf@blueberry.kubism.ku.dk>

albrecht.gebhardt@uni-klu.ac.at writes:

> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".

Seems to be gone in the development sources. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 23:08:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jun 2000 00:08:55 +0200
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <x2og5dqh3c.fsf@blueberry.kubism.ku.dk>


The planned release of R 1.1.0 will be next Thursday. The development
version is going into feature freeze tomorrow, meaning that we'll only
do testing and fix simple bugs during the next week.

Those of you who prefer to find bugs before releases instead of
afterwards may want to try it out and tell us what crawls out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun  8 17:54:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Jun 2000 12:54:48 -0400
Subject: [Rd] require
Message-ID: <393FCFD8.376F067@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 7, 2000)

require() returns NULL rather than TRUE as it previously did if a library is
already attached.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 18:35:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 18:35:47 +0100 (BST)
Subject: [Rd] require
In-Reply-To: <393FCFD8.376F067@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006081834180.12184-100000@auk.stats>

On Thu, 8 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 7, 2000)
> 
> require() returns NULL rather than TRUE as it previously did if a library is
> already attached.

Thanks: it does return TRUE again now (dangling else problem).

It was a side effect of provides() becoming deprecated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cferna3@uic.edu  Thu Jun  8 19:54:19 2000
From: cferna3@uic.edu (Cheryl J Fernandes)
Date: Thu, 8 Jun 2000 13:54:19 -0500 (CDT)
Subject: [Rd] creating models from "Objects" in R's environment
Message-ID: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>

Hi
  I'm trying to create Tree based models in R using the downloadable
package called "tree".

  It is mentioned in the R documentation that Objects are created and 
stored in the R environment by name.

So I have saved all the objects formed during the creation of a tree model
using the R command:

dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");

Here's a snapshot of the output file outputTree.txt:


"hc" <-
structure(list(merge = structure(c(-1, -10, -12, -14, -18, -20, 
-22, -24, -26, -28, -30, -33, -36, -38, -40, -42, -44, -49, -52, 
-54, -56, -58, -60, -62, -64, -66, -68, -72, -74, -77, -80, -84, 
-88, -90, -93, -3, -4, -5, -46, -51, -95, -16, -35, -71, -76, 
80, 76, 83, 81, 85, 82, 89, 86, 88, 91, 93), .Dim = c(94, 2)), 
    height = c(0.00099999999999989, 0.00099999999999989,
0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.0389999999999997, 0.0539999999999998, 0.0943398113205659
    ), order = c(79, 82, 83, 84, 85, 77, 78, 80, 81, 86, 92, 
    95, 93, 94, 90, 91, 87, 88, 89, 56, 57, 58, 59, 60, 61, 62, 
    34, 24, 25, 26, 27, 32, 28, 29), labels = c("1", "2", "3", 
    "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", 
  "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", 
    "95"), method = "complete", call = hclust(d = dist(vegtest), 
        method = "complete"), dist.method = "euclidean"), .Names =
c("merge", 
	"height", "order", "labels", "method", "call", "dist.method"),
class = "hclust")
	"last.warning" <-
	structure(list("NAs introduced by coercion" = NULL), .Names = "NAs
introduced by 	        

coercion")
	"v.tr" <-
	structure(list(frame = structure(list(var = structure(c(2, 1, 
	2, 2, 2, 1, 1, 2, 1, 1, 2, 1, 2, 2, 1, 1, 2, 1, 1), .Label =
c("<leaf>", 
	"Veg"), class = "factor"), n = c(95, 7, 88, 34, 22, 5, 17, 12, 
	5, 7, 54, 5, 49, 23, 9, 14, 26, 7, 19), dev =
c(0.00174753684210526, 
.
..
....


After creating the models, one needs to analyse them with some new data.
Hence, I am now trying to analyze this model with a new set of data.

Is it possible in R to recreate the models by reading from the "Object"
output file.
ie By reading from the above displayed file, can we recreate the tree
model ??

Any help/hints would be highly appreciated.

Thanks much 
Cheryl Fernandes

Cheryl Fernandes
Laboratory of Advanced Computing 
University of Illinois at Chicago.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 20:32:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 20:32:46 +0100 (BST)
Subject: [Rd] creating models from "Objects" in R's environment
In-Reply-To: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>
Message-ID: <Pine.GSO.4.05.10006082028520.27560-100000@auk.stats>

On Thu, 8 Jun 2000, Cheryl J Fernandes wrote:

> Hi
>   I'm trying to create Tree based models in R using the downloadable
> package called "tree".
> 
>   It is mentioned in the R documentation that Objects are created and 
> stored in the R environment by name.
> 
> So I have saved all the objects formed during the creation of a tree model
> using the R command:
> 
> dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");
> 
[..]

> Here's a snapshot of the output file outputTree.txt:

> After creating the models, one needs to analyse them with some new data.
> Hence, I am now trying to analyze this model with a new set of data.
> 
> Is it possible in R to recreate the models by reading from the "Object"
> output file.

Eveything is possible in R: you can program a Turing machine in it
but you might need unlimited memory.

> ie By reading from the above displayed file, can we recreate the tree
> model ??

Yes, but to fit the *formula* to a new dataset (hence a *new* model) you
will need to use update.

I suggest you use save() not dump() to store objects.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jun  8 21:58:34 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 9 Jun 2000 08:58:34 +1200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: <200006072106.XAA13880@pubhealth.ku.dk>; from albrecht.gebhardt@uni-klu.ac.at on Wed, Jun 07, 2000 at 11:06:24PM +0200
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <20000609085834.A5928@stat1.stat.auckland.ac.nz>

On Wed, Jun 07, 2000 at 11:06:24PM +0200, albrecht.gebhardt@uni-klu.ac.at wrote:
> 
> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".
> 
> It occures not only on Digital Unix as indicated below but also on
> Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
> are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
> egcs 2.91.57 on SuSE 5.3.
> 
> Interestingly the plots are correct with postscript().
> 
> The error does not occur with rwin 1001.
> 
> 
> BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
> in my tripack package.

Paul Murrell and I recently made some changes to the clipping code
which seems to have fixed this (and other) problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Fri Jun  9 09:17:05 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090817.KAA29023@pubhealth.ku.dk>

Hi,

This may just be an inconsistency between terminal drivers, rather
than a proper bug.

If the main title of a plot is too wide to all fit on the plot, the
X11 driver prints as much of the title as it can, but the postscript
driver totally ignores the title.

Here's a simple example:

% R
> plot(runif(1000), main="a long xxxxxxxxxxxx title") 
> dev.print(file="test.ps")

On my setup, I needed about 110 x's in the title to reproduce this
problem.  This may seem an unlikely long title, but I found the
problem when using much shorter titles on multiple figures (created
using par(mfrow=c(2,3)) for example).

Perhaps the postscript driver could give a warning if the title is
too long to be printed?  

Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
 - on line 48:
%%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   ../../../unix/devPS.c
the pathname to devPS.c should be: ../../../main/devPS.c


Cheers,

Stephen

> version
         _               
platform alpha-dec-osf4.0
arch     alpha           
os       osf4.0          
system   alpha, osf4.0   
status                   
major    1               
minor    0.1             
year     2000            
month    April           
day      14              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 10:37:22 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 10:37:22 +0100 (BST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090937.KAA25854@toucan.stats.ox.ac.uk>


> From: stephen@anc.ed.ac.uk
> Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
> 
> Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
>  - on line 48:
> %%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   
../../../unix/devPS.c
> the pathname to devPS.c should be: ../../../main/devPS.c

Already corrected, thank you.

(More on the rest later).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 12:12:37 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 12:12:37 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <200006091112.MAA04174@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 08 Jun 2000 00:08:55 +0200
> 
> The planned release of R 1.1.0 will be next Thursday. The development
> version is going into feature freeze tomorrow, meaning that we'll only
> do testing and fix simple bugs during the next week.
> 
> Those of you who prefer to find bugs before releases instead of
> afterwards may want to try it out and tell us what crawls out.

For anyone wanting to try the release-candidate Windows version,
it is up at

	http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

Warning: this is cross-compiled and so lacks a few things including
CHM / Windows help and the bitmap DLL.  The release version will be
natively compiled.

In particular, we would be grateful if anyone can try it on a Pentium
I/II/III on Win2000:  we know there are problems on Athlon cpus on
Win2000.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Jun  9 15:33:11 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Fri, 9 Jun 2000 16:33:11 +0200 (MET DST)
Subject: [Rd] Disappearing values (PR#551)
Message-ID: <200006091433.QAA05945@pubhealth.ku.dk>

Dear all,

Uwe e-mailed me yesterday about the problems some time ago. I had hoped
someone would have a look at our computers, but due to some unfortunate
circumstances, it hasn't happened. However, it seems unlikely that it is
connected to a specific piece of hardware. It could be an
architecture-dependent problem though. I also had a word with those who
did the installation of R, and they had some problems when tuning it for
alphaev6, but it all went smoothly when tuning for alphaev56, and that is
the build I'm running. This is basically the stuff I sent to Uwe
yesterday. 

I have been testing it on three different machines:
alnair, a XP1000 with a 500MHz alphaev6 processor and 619 MB RAM
rukbat, a PWS500au with a 500MHz alphaev56 processor with 238 MB RAM
mirfak, a DEC255/233 with a 233MHz (?) alphaev4 (?) processor with 245MB
(RAM is according to top). All show the same problems consistently. 
I'm not using the match.arg()-approach anymore, BTW, I have moved on to
some object-oriented stuff. 

However, some apparently related (?) problem occurs. Yesterday, I started
working on some simulations I have done (with R of course! :-) ). I did
exactly the same operations on rukbat and mirfak (using ESS-elsewhere
while sitting on alnair), starting with the same calls, vsize=80M,
nsize=800k, no-restore. I loaded a 58MB file with load, and there are a
few variables with arrays of htest-objects. Then, I did 
as.vector(sapply(chisq5M11000, function(x) x$statistic))
to get a vector of the test statistics. Now, occasionally, it prints a
nice vector with all the values intact. Occasionally, one of the entries
are NULL, and then it prints a list, e.g.
[[892]]
X-squared 
 1933.637 

[[893]]
NULL

[[894]]
X-squared 
 1741.416 

The funny thing is that when I did this sapply thing on mirfak and rukbat,
it happened on at exactly the same place on the two machines. First,
mirfak would produce a vector then rukbat would produce a vector, mirfak
would give a list where element # 238 (if I remember correctly) was NULL,
rukbat would produce a list with element #238 NULL, both would produce a
vector again, both would produce a list with element #602 NULL, etc... 

This is pretty much what I've got now... :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  9 19:29:34 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Jun 2000 14:29:34 -0400
Subject: [Rd] w0 in legend
Message-ID: <3941378E.F64657EA@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 8, 2000)
there seems to be a problem with an internal variable w0 in legend that
generates the following new error:

Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
 Object "w0" not found
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  9 20:08:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 2000 21:08:07 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Paul Gilbert's message of "Fri, 09 Jun 2000 14:29:34 -0400"
References: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >

Looks like it isn't getting set in the nx==2 case. But what is the
correct value here, 0?

    if (nx == 2) {
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top <- y[2]
        w <- diff(x)
        h <- diff(y)
        x <- mean(x)
        y <- mean(y)
        if (missing(xjust)) 
            xjust <- 0.5
        if (missing(yjust)) 
            yjust <- 0.5
    }
    else {
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if (!missing(fill)) 
            w0 <- w0 + dx.fill
        if (has.pch && !merge) 
            w0 <- w0 + dx.pch
        if (do.lines) 
            w0 <- w0 + (2 + x.off) * xchar
        w <- ncol * w0 + 0.5 * xchar
        left <- x - xjust * w
        top <- y + (1 - yjust) * h
    }


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:21:14 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:21:14 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>

 
  Ooops.  This is my fault.
  When extending legend() to do multiple columns, I neglected to do
anything about the case where the user specified both sides of the box
(which is actually an easy case).

  Something like the following patch should take care of it, although I
don't know if the version of legend in the unstable package is exactly the
same as what I have here.  It's pretty straightforward, though.

*** legend.R.old Tue Jun  6 18:31:11 2000
--- legend.R	 Fri Jun  9 16:08:55 2000
***************
*** 95,100 ****
--- 95,101 ----
          top  <- y[2]
          w <- diff(x)# width
          h <- diff(y)# height
+         w0 <- w/ncol # column width
  
  	x <- mean(x)
  	y <- mean(y)


  Also, here's a set of examples that tests the full box specification,
with one or two columns.  This could go in the examples for legend() but
need not (but if it had been there running the examples would have found
the bug!)

set.seed(1001)
x1 <- runif(30)
x2 <- rnorm(30,mean=0.5)
x3 <- rnorm(30,mean=0.5,sd=0.05)
matplot(1:30,cbind(x1,x2,x3),col=1:3,pch=1:3)
legstr <- c("foo","bar","bletch")
legend(c(20,par("usr")[2]),c(2.0,par("usr")[4]),
       legstr,
       bg="gray",
       col=1:3,
       pch=1:3)
legend(c(20,par("usr")[2]),c(1.6,2.0),
       legstr,
       bg="lightblue",
       col=1:3,
       pch=1:3,
       ncol=2)


On Fri, 9 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:26:10 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:26:10 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006091624400.27056-100000@bolker.zoo.ufl.edu>

On 9 Jun 2000, Peter Dalgaard BSA wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > In Version 1.1.0 Under development (unstable) (June 8, 2000)
> > there seems to be a problem with an internal variable w0 in legend that
> > generates the following new error:
> > 
> > Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
> >  Object "w0" not found
> > >
> 
> Looks like it isn't getting set in the nx==2 case. But what is the
> correct value here, 0?

  No, w/ncol; w0 is the width of a single column within the legend.  If
n==1 it reduces to w.
  Again, sorry about the bug.

> 
>     if (nx == 2) {
>         x <- sort(x)
>         y <- sort(y)
>         left <- x[1]
>         top <- y[2]
>         w <- diff(x)

          w0 <- w/ncol

>         h <- diff(y)
>         x <- mean(x)
 [snip]

--
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 10 00:13:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2000 01:13:52 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Ben Bolker's message of "Fri, 9 Jun 2000 16:21:14 -0400 (EDT)"
References: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>           w <- diff(x)# width
>           h <- diff(y)# height
> +         w0 <- w/ncol # column width
>   
>   	x <- mean(x)
>   	y <- mean(y)

Thanks, committed. 

>   Also, here's a set of examples that tests the full box specification,
> with one or two columns.  This could go in the examples for legend() but
> need not (but if it had been there running the examples would have found
> the bug!)

As a principle, we don't add tests or examples during a feature
freeze. Yours looks harmless, but there have been cases where a new
example caused "make check" to fail (on someone else's machine), and
we have a strict policy of not committing changes without running
"make check" at this stage. It's being paranoid, but simple rules are
easier to follow, and I think it is important for the general
stability to avoid disturbing the release process at this stage. We
can put your examples in the 1.2 tree when we get to that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Sat Jun 10 18:05:46 2000
From: kjetilh@umsanet.edu.bo (halvorsen)
Date: Sat, 10 Jun 2000 13:05:46 -0400
Subject: [Rd] R 1.1.0 going into feature freeze
References: <200006091112.MAA04174@toucan.stats.ox.ac.uk>
Message-ID: <39427569.26DA3E8A@umsanet.edu.bo>

In rw1001 the html help file  chisq.test.html is missing.

Kjetil Halvorsen

Prof Brian Ripley wrote:

> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 08 Jun 2000 00:08:55 +0200
> >
> > The planned release of R 1.1.0 will be next Thursday. The development
> > version is going into feature freeze tomorrow, meaning that we'll only
> > do testing and fix simple bugs during the next week.
> >
> > Those of you who prefer to find bugs before releases instead of
> > afterwards may want to try it out and tell us what crawls out.
>
> For anyone wanting to try the release-candidate Windows version,
> it is up at
>
>         http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
>
> Warning: this is cross-compiled and so lacks a few things including
> CHM / Windows help and the bitmap DLL.  The release version will be
> natively compiled.
>
> In particular, we would be grateful if anyone can try it on a Pentium
> I/II/III on Win2000:  we know there are problems on Athlon cpus on
> Win2000.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:17:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:17:48 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <39427569.26DA3E8A@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>

On Sat, 10 Jun 2000, halvorsen wrote:

> In rw1001 the html help file  chisq.test.html is missing.

That I believe to be an incorrect report, and I also do not see the
connection with the subject.  (Bug reports on R 1.0.1 should go to 
R-bugs, still.)

The file *is* there on the version of rw1001 I downloaded and in the
pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
to have loaded that to get the help, or specify it explicitly in the call
to help.

I suspect the confusion arises because someone decided to make chisq.test
an autoload, and so the function appears to be available from base when it
is not really:

> ?chisq.test
Error in help(chisq.test) : No documentation for `chisq.test'
> junk <- chisq.test # loads package ctest silently
> ?chisq.test
chisq.test               package:ctest               R Documentation
 ...

If this is not what happens on your version of rw1001, please try
re-installing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:26:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:26:19 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10006101823500.18950-100000@auk.stats>

On Sat, 10 Jun 2000, Prof Brian D Ripley wrote:

> On Sat, 10 Jun 2000, halvorsen wrote:
> 
> > In rw1001 the html help file  chisq.test.html is missing.
> 
> That I believe to be an incorrect report, and I also do not see the
> connection with the subject.  (Bug reports on R 1.0.1 should go to 
> R-bugs, still.)
> 
> The file *is* there on the version of rw1001 I downloaded and in the
> pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
> to have loaded that to get the help, or specify it explicitly in the call
> to help.

Just to add: if you use help.start() or HTML help from the file menu
the file *is* in the index list and *is* found by the search engine,
as both those routes cover all packages installed in rw1001/library.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jun 11 19:36:22 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 11 Jun 2000 14:36:22 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006111435440.28671-100000@bolker.zoo.ufl.edu>

On 10 Jun 2000, Peter Dalgaard BSA wrote:
> 
> As a principle, we don't add tests or examples during a feature
> freeze. Yours looks harmless, but there have been cases where a new
> example caused "make check" to fail (on someone else's machine), and
> we have a strict policy of not committing changes without running
> "make check" at this stage. It's being paranoid, but simple rules are
> easier to follow, and I think it is important for the general
> stability to avoid disturbing the release process at this stage. We
> can put your examples in the 1.2 tree when we get to that.

  Sounds entirely sensible -- particularly given my culpability in
introducing a new bug recently ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From george@cpqam.fiocruz.br  Mon Jun 12 12:10:29 2000
From: george@cpqam.fiocruz.br (george@cpqam.fiocruz.br)
Date: Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121110.NAA15979@pubhealth.ku.dk>

I try load ctest, and don't have sucess

> library(ctest)
Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
  /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f

What I must to do

I will waiting  your answer

George Diniz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 12:53:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 13:53:14 +0200
Subject: [Rd] ctest not works (PR#567)
In-Reply-To: george@cpqam.fiocruz.br's message of "Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)"
References: <200006121110.NAA15979@pubhealth.ku.dk>
Message-ID: <x24s6z6rpx.fsf@blueberry.kubism.ku.dk>

george@cpqam.fiocruz.br writes:

> I try load ctest, and don't have sucess
> 
> > library(ctest)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
>   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> 
> What I must to do
> 
> I will waiting  your answer

First of all tell us what system you are on. With that information,
all we can say is that that is not what is supposed to happen...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jun 12 12:57:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 12 Jun 2000 12:57:35 +0100 (BST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121157.MAA00504@toucan.stats.ox.ac.uk>


> To: george@cpqam.fiocruz.br
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 Jun 2000 13:53:14 +0200
> 
> george@cpqam.fiocruz.br writes:
> 
> > I try load ctest, and don't have sucess
> > 
> > > library(ctest)
> > Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> > load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
> >   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> > 
> > What I must to do
> > 
> > I will waiting  your answer
> 
> First of all tell us what system you are on. With that information,
> all we can say is that that is not what is supposed to happen...

True, but we can tell you:

This is Linux/Unix not Windows (and not HP either).

That silly symbol name suggests that this is the Fortran bug in RH6.2
we have met before.  If so, the solution is to compile with gcc-2.95.2.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 17:08:10 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 12:08:10 -0400
Subject: [Rd] Depends: R(>= ?)
Message-ID: <39450AEA.A65F25E8@bank-banque-canada.ca>

I am just working through my set of tests for R 1.1.0 and everything
seems to be going fairly well other than a couple of bugs already
reported and fixed.

I previously specified Depends: R(>= 1.0.1). I have been making small
changes to my own code and since I have been doing this with R 1.0.1  I
am fairly sure everything still works with it, but I don't intend to
test this as carefully as R 1.1.0. Should I change "Depends" to indicate
1.1.0?

Now I realize what the "safest" answer would be, but I can see this will
be an ongoing problem and the implication of changing each time is that
my packages always depend on the latest version of R. I can see the
posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
see any possibility for testing every version since R 1.0.1. Should
"Depends" indicate what is "known to be at least necessary" or should it
be something stronger than that?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 18:41:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 19:41:33 +0200
Subject: [Rd] Depends: R(>= ?)
In-Reply-To: Paul Gilbert's message of "Mon, 12 Jun 2000 12:08:10 -0400"
References: <39450AEA.A65F25E8@bank-banque-canada.ca>
Message-ID: <x2u2eyer02.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am just working through my set of tests for R 1.1.0 and everything
> seems to be going fairly well other than a couple of bugs already
> reported and fixed.
> 
> I previously specified Depends: R(>= 1.0.1). I have been making small
> changes to my own code and since I have been doing this with R 1.0.1  I
> am fairly sure everything still works with it, but I don't intend to
> test this as carefully as R 1.1.0. Should I change "Depends" to indicate
> 1.1.0?
> 
> Now I realize what the "safest" answer would be, but I can see this will
> be an ongoing problem and the implication of changing each time is that
> my packages always depend on the latest version of R. I can see the
> posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
> see any possibility for testing every version since R 1.0.1. Should
> "Depends" indicate what is "known to be at least necessary" or should it
> be something stronger than that?

Hmm. We try pretty hard not to change the API and otherwise break
package code after 1.0. I think it should be reasonable if you took a
laid-back attitude and assume that things work as they used to unless
you knowingly access new features. If things turn out to be broken
with earlier versions, then blame the core team and update the version
number. If you do use new features and try to blame us, we'll blame
you back...

It would of course be nice if you kept a version of 1.0.1 around and
checked against it, but checking all intermediate versions would be
overdoing it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 19:33:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 14:33:32 -0400
Subject: [Rd] build buglet
Message-ID: <39452CFB.B218A583@bank-banque-canada.ca>

I use
     R CMD Rdindex man/*.Rd >INDEX
in my makefile to generate an INDEX. When I then use
     R CMD build whatever
the newindex seems to be in a slightly different order, resulting in a
* checking whether index is up-to-date ... NO
(because the result of diff is not empty) and a suggestion to use
--force.
However, --force results in the INDEX in my source directory being
re-written, which means that I can't use it as a dependency for
installing because it is always out of date after I build. But if I
don't use INDEX as a dependency  then my own help system may not be
up-to-date, which will be a problem when I'm working on documentation.

However, if I don't use --force I will always get warnings which I will
tend to ignore, so I won't notice more serious warnings. Is there some
way to guaranty the same order from these two ways for generating INDEX?

Paul Gilbert

(P.S. - I'm not an expert at makefiles but if anyone is interested I am
willing to share a fairly good makefile which I use for maintaining two
packages and two bundles with several packages in them.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 12 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 12 Jun 2000 21:19:13 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39452CFB.B218A583@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>

On Mon, 12 Jun 2000, Paul Gilbert wrote:

> I use
>      R CMD Rdindex man/*.Rd >INDEX
> in my makefile to generate an INDEX. When I then use
>      R CMD build whatever
> the newindex seems to be in a slightly different order, resulting in a
> * checking whether index is up-to-date ... NO
> (because the result of diff is not empty) and a suggestion to use
> --force.
> However, --force results in the INDEX in my source directory being
> re-written, which means that I can't use it as a dependency for
> installing because it is always out of date after I build. But if I
> don't use INDEX as a dependency  then my own help system may not be
> up-to-date, which will be a problem when I'm working on documentation.
> 
> However, if I don't use --force I will always get warnings which I will
> tend to ignore, so I won't notice more serious warnings. Is there some
> way to guaranty the same order from these two ways for generating INDEX?

Set the locale to C?  What are the differences: are they related to sort
orders?  That's the only problem I have seen. (On Solaris en_UK sorts
AaBb... not AB..ab....)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jim.lemon@uts.edu.au  Tue Jun 13 04:17:40 2000
From: jim.lemon@uts.edu.au (jim.lemon@uts.edu.au)
Date: Tue, 13 Jun 2000 05:17:40 +0200 (MET DST)
Subject: [Rd] problem with aperm? (PR#568)
Message-ID: <200006130317.FAA19080@pubhealth.ku.dk>

R version 1.0.1
OS RedHat Linux 6.1

In attempting to test for numeric vectors in a data frame, I tried:

apply(dataframe,2,is.numeric)

and found that it returned FALSE for all vectors whether they were
numeric or not.  I tracked this to the fact that as.array() was
converting the data frame to character vectors, and thought I could
solve it by using array(), which preserved the mode of the columns. 
However, I then got an error from aperm():

Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
must be a vector

even though the second argument tested as a vector.  This happened both
within the apply() function and calling aperm() separately, even if I
explicitly used a numeric vector for the second argument.  I then had a
look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
to give up after trying to work out what CADR and SEXP were.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 07:41:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 07:41:41 +0100 (BST)
Subject: [Rd] problem with aperm? (PR#568)
In-Reply-To: <200006130317.FAA19080@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006130730410.12267-100000@auk.stats>

On Tue, 13 Jun 2000 jim.lemon@uts.edu.au wrote:

> R version 1.0.1
> OS RedHat Linux 6.1
> 
> In attempting to test for numeric vectors in a data frame, I tried:
> 
> apply(dataframe,2,is.numeric)
> 
> and found that it returned FALSE for all vectors whether they were
> numeric or not.  I tracked this to the fact that as.array() was
> converting the data frame to character vectors, and thought I could
> solve it by using array(), which preserved the mode of the columns. 
> However, I then got an error from aperm():

What? arrays are only of one mode. Try

sapply(dataframe, is.numeric)

for what you wanted.  For example,

library(MASS)
data(Cars93)
sapply(Cars93, is.numeric)
      Manufacturer              Model               Type          Min.Price 
             FALSE              FALSE              FALSE               TRUE 
             Price          Max.Price           MPG.city        MPG.highway 
              TRUE               TRUE               TRUE               TRUE 
...


The help page for array says

Arguments:

       x: the array to be used.

and a dataframe is *not* an array (or a matrix).

What did you run to get the following?

> Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
> must be a vector
> 
> even though the second argument tested as a vector.  This happened both
> within the apply() function and calling aperm() separately, even if I
> explicitly used a numeric vector for the second argument.  I then had a
> look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
> to give up after trying to work out what CADR and SEXP were.

Can you please tell us exactly what you did: there is no actual example
of a problem with aperm here!

The error message is too curt: it actually means `must be a vector of the
right length', and I am fairly sure that is your error here. The code

    if (!isVector(perm) || (length(perm) != length(dimsa)))
        error("aperm: invalid second argument, must be a vector");

is not too hard to understand without any knowledge of Scheme (and I have
none either: the internal R language is described in `Writing R
Extensions').


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 16:09:55 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 11:09:55 -0400
Subject: [Rd] build buglet
References: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>
Message-ID: <39464EC3.A3BEDAA5@bank-banque-canada.ca>

>Set the locale to C?  What are the differences: are they related to sort
>orders?  That's the only problem I have seen. (On Solaris en_UK sorts
>AaBb... not AB..ab....)

Yes, the problems are all sort order and it looks like this is the reason,
though I haven't completely figured it out yet. My locale setting is "en_CA" at
the office but "C" when I telework, which was confusing things even more. Can I
assume it is "C" that is used by R CMD build?

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jun 13 16:58:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 13 Jun 2000 16:58:35 +0100 (BST)
Subject: [Rd] build buglet
Message-ID: <200006131558.QAA17119@toucan.stats.ox.ac.uk>

> Date: Tue, 13 Jun 2000 11:09:55 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Set the locale to C?  What are the differences: are they related to sort
> >orders?  That's the only problem I have seen. (On Solaris en_UK sorts
> >AaBb... not AB..ab....)
> 
> Yes, the problems are all sort order and it looks like this is the reason,
> though I haven't completely figured it out yet. My locale setting is "en_CA" 
at
> the office but "C" when I telework, which was confusing things even more. Can 
I
> assume it is "C" that is used by R CMD build?

Depends on your Perl installation, perhaps. I would expect it to
recognize locales if it is recent.   It is more likely that your shell
is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
Makefile, script, whatever.

I got tired of this and set all my machines back to C, but you may not
have that choice.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 19:37:41 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 14:37:41 -0400
Subject: [Rd] build buglet
References: <200006131558.QAA17119@toucan.stats.ox.ac.uk>
Message-ID: <39467F75.42BF88B1@bank-banque-canada.ca>


>> assume it is "C" that is used by R CMD build?

>Depends on your Perl installation, perhaps. I would expect it to
>recognize locales if it is recent.

I'm using Perl 5.004_04 built for sun4-solaris.

>It is more likely that your shell
>is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
>Makefile, script, whatever.

Should I be doing a sort to get the result of Rdindex into the same order as "R
CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 21:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 21:47:30 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39467F75.42BF88B1@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>

On Tue, 13 Jun 2000, Paul Gilbert wrote:

> 
> >> assume it is "C" that is used by R CMD build?
> 
> >Depends on your Perl installation, perhaps. I would expect it to
> >recognize locales if it is recent.
> 
> I'm using Perl 5.004_04 built for sun4-solaris.

Um. Pretty old. May not be built with locale support then. (The current
version, 5.6.0, is two `major' versions on.)

> >It is more likely that your shell
> >is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
> >Makefile, script, whatever.
> 
> Should I be doing a sort to get the result of Rdindex into the same order as "R
> CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

The shell expands the * before Rdindex ever gets hold of it. And what it
does re locales is an installation default (assuming it is a Solaris shell
not bash or tcsh, for both of which NLS support is optional).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhm@math.uio.no  Wed Jun 14 13:15:57 2000
From: bhm@math.uio.no (bhm@math.uio.no)
Date: Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141215.OAA07492@pubhealth.ku.dk>

The help for prcomp on R 1.0.0 states that the component sdev of the
return value is the eigenvalues of the cov matrix.  Am I completely
mistaken, or should this be the _square root_ of the eigenvalues?

Also, the documentation is not very clear about how tol is used to omit
components.  (The _code_ is clear, though. :-)

-- 
B/H

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 14 13:36:13 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2000 14:36:13 +0200
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
In-Reply-To: bhm@math.uio.no's message of "Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)"
References: <200006141215.OAA07492@pubhealth.ku.dk>
Message-ID: <x2aegowibm.fsf@blueberry.kubism.ku.dk>

bhm@math.uio.no writes:

> The help for prcomp on R 1.0.0 states that the component sdev of the
> return value is the eigenvalues of the cov matrix.  Am I completely
> mistaken, or should this be the _square root_ of the eigenvalues?

Yup. Will fix for 1.1.0

> Also, the documentation is not very clear about how tol is used to omit
> components.  (The _code_ is clear, though. :-)

Hmm. Can't think of a concise way of saying this. Hardly something
that needs fixing here and now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jun 14 14:05:38 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 14 Jun 2000 14:05:38 +0100 (BST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141305.OAA28754@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 14 Jun 2000 14:36:13 +0200
> 
> bhm@math.uio.no writes:
> 
> > The help for prcomp on R 1.0.0 states that the component sdev of the
> > return value is the eigenvalues of the cov matrix.  Am I completely
> > mistaken, or should this be the _square root_ of the eigenvalues?
> 
> Yup. Will fix for 1.1.0

I've just fixed rather a lot of typos ....

> > Also, the documentation is not very clear about how tol is used to omit
> > components.  (The _code_ is clear, though. :-)
> 
> Hmm. Can't think of a concise way of saying this. Hardly something
> that needs fixing here and now.

I think I have found a way ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Wed Jun 14 20:45:37 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Wed, 14 Jun 2000 21:45:37 +0200 (MET DST)
Subject: [Rd] extra comma in configure (PR#570)
Message-ID: <200006141945.VAA11555@pubhealth.ku.dk>

Full_Name: Tom Vogels
Version: 1.1.0 (2000/June/14)
OS: Linux
Submission from: (NULL) (128.2.216.84)


There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
look very pretty either when configure reports ",: command not found"
-tom

(This showed up when running configure on a linux machine with gnome enabled.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 14 21:23:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Jun 2000 21:23:44 +0100 (BST)
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: <200006141945.VAA11555@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>

On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:

> Full_Name: Tom Vogels
> Version: 1.1.0 (2000/June/14)
> OS: Linux
> Submission from: (NULL) (128.2.216.84)
> 
> 
> There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> look very pretty either when configure reports ",: command not found"
> -tom

At the end of line 398 in configure.in, I presume.

What other options did you give?  I don't see it on RH6.0 with 

.../configure --with-gnome

but then I don't have atlas.

> (This showed up when running configure on a linux machine with gnome enabled.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 01:47:34 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 14 Jun 2000 20:47:34 -0400
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: Prof Brian D Ripley's message of "Wed, 14 Jun 2000 21:23:44 +0100 (BST)"
References: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>
Message-ID: <87d7lj3h3t.fsf@bavaria.ece.cmu.edu>


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:
> 
> > Full_Name: Tom Vogels
> > Version: 1.1.0 (2000/June/14)
> > OS: Linux
> > Submission from: (NULL) (128.2.216.84)
> > 
> > 
> > There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> > look very pretty either when configure reports ",: command not found"
> > -tom
> 
> At the end of line 398 in configure.in, I presume.
> 
> What other options did you give?  I don't see it on RH6.0 with 
> 
> ../configure --with-gnome
> 
> but then I don't have atlas.

(... I do -- curiosity killed the cat).

Yes, the extra ',' comes from the end of line 398.  I removed it, ran autoconf,
and the comma was gone.  Bingo.

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 15 17:25:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jun 2000 12:25:42 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
Message-ID: <39490386.8029CB0B@bank-banque-canada.ca>

This is a synopsis for the r-devel archives of my solution to the problem that

R CMD Rdindex zzz/man/* >INDEX
and
R CMD build zzz

do not always result in the same order, which causes make problems outlined
further below. The source of the problem was suggested by Brian Ripley:

BDR>The shell expands the * before Rdindex ever gets hold of it. And what it
BDR>does re locales is an installation default (assuming it is a Solaris shell
BDR>not bash or tcsh, for both of which NLS support is optional).

The need to build INDEX separately from using the one generated by build is
so that R INSTALL zzz does not require R CMD build zzz first. This means
that code changes can be tested separately from documentation changes and
vice versa, thus remakes are faster.

INDEX needs to be generated in the same order as produced by
R CMD build or build's diff comparison suggests that the index is out
of date and suggests using --force. Using --force rewrites INDEX which
causes make to think the install is out of date, so the next make always starts
at the beginning again.

The * expansion (in Solaris sh) does not seem to recognize LC (locale)
settings. Sort does, but some of the output of R CMD Rdindex is on two
lines, so sorting the output does not work. It is possible to
   ls -1 man/* | sort
and get the locale sort order, but it does not seem possible to feed this
into "R CMD Rdindex". ( LC_COLLATE is not adequate for sort, LC_ALL is needed.)

The fix is to generate INDEX in the C order imposed by the
 Solaris sh expansion of *, then set LC_ALL=C for R CMD build.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@infiniti.ece.cmu.edu  Thu Jun 15 18:42:33 2000
From: tov@infiniti.ece.cmu.edu (tov@infiniti.ece.cmu.edu)
Date: Thu, 15 Jun 2000 19:42:33 +0200 (MET DST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
Message-ID: <200006151742.TAA25549@pubhealth.ku.dk>

Hi,

  Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
  Linux and Sun.  But AIX, of course, is a problem...

  When linking shared libs, the symbols from libc.a are not found.  I
  apologize for not investigating this further at the moment - they
  may not be properly or not all exported from R.bin.

  Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
  my build directory after running configure.  Then compilation proceeds
  without problems.
  (Alternatively, you could use cc instead of ld to link.)

  Regards,
  -tom
 

P.S. Any reason the status field is empty?  It is stable, right? ;-)

--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 18:57:55 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 15 Jun 2000 13:57:55 -0400
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <87vgzax1wc.fsf@bavaria.ece.cmu.edu>


Hi, I ran the test again with the newly released version of R (1.1) and I
now get the correct eigen values.  ("make check" succeeds.)

The scary part is that I think that I also used gcc+f77 last time and
the libs weren't changed.  Maybe the scary part is that I think...

So the comments that this is compiler specific probably hold.

Thanks,
  -tom


tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 
> Here are the results:
> 
> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> m
>      [,1] [,2]
> [1,]  6.8  2.4
> [2,]  2.4  8.2
> R> eigen(m)
> $values
> [1] 19.281403  6.337993
> 
> $vectors
>           [,1]       [,2]
> [1,] 0.1918866  0.9967987
> [2,] 0.9967987 -0.1918866
> 
> 
> And for comparison, here is what I get on a Sun (with r-stable):

(same results now on AIX 4.3 with R 1.1.0 

> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> eigen (m)
> $values
> [1] 10  5
> 
> $vectors
>      [,1] [,2]
> [1,]  0.6  0.8
> [2,]  0.8 -0.6

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Thu Jun 15 20:24:31 2000
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Thu, 15 Jun 2000 14:24:31 -0500 (EST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.1.0)
Message-ID: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>

I think I reported this bug in the past.  At that time, I was told that
it is a bug of autoconf.

./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
of Alpha EV56), so all the compilation flags were set incorrectly.  I
don't know the right way to fix it (I don't know how autoconf works
yet ...), but the following patch fixes the problem.

Thank you,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA


--- R-1.1.0/tools/config.sub.orig	Thu Jun 15 13:49:01 2000
+++ R-1.1.0/tools/config.sub	Thu Jun 15 14:00:25 2000
@@ -153,6 +153,7 @@
 		| arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
 		| 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
 		| alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
+		| alphapca56 \
 		| i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
 		| mips64 | mipsel | mips64el | mips64orion | mips64orionel \
 		| mipstx39 | mipstx39el \
@@ -177,6 +178,7 @@
 	      | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
 	      | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
 	      | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
+	      | alphapca56-* \
 	      | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
 	      | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
 	      | sparc64-* | mips64-* | mipsel-* \

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rcreecy@census.gov  Thu Jun 15 21:13:25 2000
From: rcreecy@census.gov (Rob Creecy)
Date: Thu, 15 Jun 2000 16:13:25 -0400
Subject: [Rd] Lies, damn lies, and statistics
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <394938E5.CA845487@census.gov>

In the documentation for data.entry, R-1.1.0 the description reads:

A spreadsheet-lie editor for entering or editing data. 

Perhaps we shouldn't encourage users to lie with statistics any more
than they already do? It seems especially egregious to lie when entering
data.

Rob Creecy
Census Bureau
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 15 23:29:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 2000 00:29:58 +0200
Subject: [Rd] Lies, damn lies, and statistics
In-Reply-To: Rob Creecy's message of "Thu, 15 Jun 2000 16:13:25 -0400"
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu> <394938E5.CA845487@census.gov>
Message-ID: <x2ln067f2x.fsf@blueberry.kubism.ku.dk>

Rob Creecy <rcreecy@census.gov> writes:

> In the documentation for data.entry, R-1.1.0 the description reads:
> 
> A spreadsheet-lie editor for entering or editing data. 
> 
> Perhaps we shouldn't encourage users to lie with statistics any more
> than they already do? It seems especially egregious to lie when entering
> data.

Looks like a Freudian slip, from the mere mentioning of spreadsheets
in connection with statistics I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 16 06:35:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jun 2000 07:35:35 +0200 (CEST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
In-Reply-To: <200006151742.TAA25549@pubhealth.ku.dk>
References: <200006151742.TAA25549@pubhealth.ku.dk>
Message-ID: <14665.48295.450473.518062@aragorn.ci.tuwien.ac.at>

>>>>> tov  writes:

> Hi,
>   Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
>   Linux and Sun.  But AIX, of course, is a problem...

>   When linking shared libs, the symbols from libc.a are not found.  I
>   apologize for not investigating this further at the moment - they
>   may not be properly or not all exported from R.bin.

>   Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
>   my build directory after running configure.  Then compilation proceeds
>   without problems.
>   (Alternatively, you could use cc instead of ld to link.)

Yes.  I definitely want to switch back to using the C compiler rather
than ld for linking.  Give us a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 08:46:24 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
In-Reply-To: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <XFMail.000616094624.plummer@iarc.fr>

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 13:02:03 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 16 Jun 2000 14:02:03 +0200 (MET DST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
Message-ID: <200006161202.OAA01503@pubhealth.ku.dk>

I am filing this as a bug report so it doesn't get lost.
Martyn

-----FW: <XFMail.000616094624.plummer@iarc.fr>-----

Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Sender: owner-r-devel@stat.math.ethz.ch
From: Martyn Plummer <plummer@iarc.fr>
To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
Cc: r-devel@stat.math.ethz.ch

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------End of forwarded message-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@phoenix.ece.cmu.edu  Fri Jun 16 15:32:36 2000
From: tov@phoenix.ece.cmu.edu (tov@phoenix.ece.cmu.edu)
Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161432.QAA02711@pubhealth.ku.dk>

Hi,

  ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
  out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
  after configure.
  Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
  during configure? Excerpt from tkConfig.sh on my machine:

# Linker switch(es) to use to link with the X11 library archive.
TK_XLIBSW='-lX11' 

# Additional libraries to use when linking Tk.
TK_LIBS='-lX11 -lld  -lm' 

  The '-lld' wouldn't hurt, would it?
  Maybe the following would work for configure?

case "${host}" in
  *aix*)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
    ;;      
  *)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
    ;;      
esac      

  I'll try that myself, but compilation takes a long, long time...
  Thanks,
    -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun 16 15:51:07 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 16 Jun 2000 15:51:07 +0100 (BST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161451.PAA04375@toucan.stats.ox.ac.uk>


> From: tov@phoenix.ece.cmu.edu
> Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Hi,
> 
>   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
>   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
>   after configure.

Yes, I guess that's because it insists on resolving libm at the shared
libs build stage.

>   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
>   during configure? Excerpt from tkConfig.sh on my machine:
> 
> # Linker switch(es) to use to link with the X11 library archive.
> TK_XLIBSW='-lX11' 
> 
> # Additional libraries to use when linking Tk.
> TK_LIBS='-lX11 -lld  -lm' 
> 
>   The '-lld' wouldn't hurt, would it?
>   Maybe the following would work for configure?
> 
> case "${host}" in
>   *aix*)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
>     ;;      
>   *)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
>     ;;      
> esac      

It's not done like that. Take a look in aclocal.m4.  I suspect that
${TK_LIBS} would do everywhere, but will need to do some testing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Jun 17 10:03:50 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 17 Jun 2000 11:03:50 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <394B3EF6.BC1466E5@univie.ac.at>

in the windows version
> z<-1:10
> dataentry(z)
Error in dataentry(z) : Argument "modes" is missing, with no default
according to the docs,
Modes=NULL should be default



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 17 10:34:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Jun 2000 10:34:31 +0100 (BST)
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>

On Sat, 17 Jun 2000, Erich Neuwirth wrote:

> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default

That is for data.entry() not dataentry().  They are different, and the 
argument for dataentry is `modes' not `Modes'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Sat Jun 17 10:41:15 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Sat, 17 Jun 2000 11:41:15 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>; from erich.neuwirth@univie.ac.at on Sat, Jun 17, 2000 at 11:03:50AM +0200
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk> <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <20000617114115.A15351@sirio.stat.unipd.it>

On Sat, Jun 17, 2000 at 11:03:50AM +0200, Erich Neuwirth wrote:
> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default
> 
> 

  Same under Linux. But, as said in the documentation, 'dataentry'
  is the 'primitive function'. Indeed,
  > de(z)
  works.
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Jun 18 07:53:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 18 Jun 2000 08:53:07 +0200
Subject: [Rd] design question
References: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>
Message-ID: <394C71D3.B490F97A@univie.ac.at>

let me ask you as possibly very silly question.

what  would you think of a shorthand notation for anonymous fuctions in
arguments?

let me illustrate this in how mathematica does it.

mathematica has a function notation like R

Map[Function[x, x^2], {1, 2, 3}]

this can be abbreviated as
Map[#^2 &, {1, 2, 3}]

& indicates a function expression,
and # is the (one) anonymous argument.
functions with more that one arguments
(whch are positional) can be written as
#1  #2
and so on

here is an example
Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

in some cases, this notation is quite convenient.
and since r is lexically scoped, it also should not be too dangerous.
what do our architects think about introducing this kind of notation
in r?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Sun Jun 18 08:57:29 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Sun, 18 Jun 2000 17:57:29 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "Sun, 18 Jun 2000 08:53:07 +0200."
 <394C71D3.B490F97A@univie.ac.at>
Message-ID: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>

Erich Neuwirth asks:

> let me ask you as possibly very silly question.
> 
> what  would you think of a shorthand notation for anonymous fuctions in
> arguments?
> 
> let me illustrate this in how mathematica does it.
> 
> mathematica has a function notation like R
> 
> Map[Function[x, x^2], {1, 2, 3}]
> 
> this can be abbreviated as
> Map[#^2 &, {1, 2, 3}]

The Maple notation is more understandable to most people:

	map(x -> x^2, {1, 2, 3})

but of course "->" is already taken in S/R as the right pointing
assignment operator (although maybe I'm the only one who even knows
about it, let alone uses it...)

> 
> & indicates a function expression,
> and # is the (one) anonymous argument.
> functions with more that one arguments
> (whch are positional) can be written as
> #1  #2
> and so on

Either swiped from TeX or both have swiped the idea from a common
source.  It has the look of a macro language, which can be misleading.

> 
> here is an example
> Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

Cryptic for most users, I'd say, and very macro-like.

> 
> in some cases, this notation is quite convenient.
> and since r is lexically scoped, it also should not be too dangerous.
> what do our architects think about introducing this kind of notation
> in r?

It has to have very low priority, possibly negative.  If syntactic
revisions were ever seriously contemplated, I would strongly favour
trying to bring in some of the S4 changes, but even there I would
regard the semantic extensions as much more urgent than the purely
syntactic ones.  Consistency with S-PLUS is not the final arbiter of
everthing but it does really matter.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 18 10:56:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2000 11:56:27 +0200
Subject: [Rd] design question
In-Reply-To: Bill Venables's message of "Sun, 18 Jun 2000 17:57:29 +1000"
References: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>

Bill Venables <venables@acland.qld.cmis.csiro.au> writes:

> > here is an example
> > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> 
> Cryptic for most users, I'd say, and very macro-like.
> 
> > 
> > in some cases, this notation is quite convenient.
> > and since r is lexically scoped, it also should not be too dangerous.
> > what do our architects think about introducing this kind of notation
> > in r?
> 
> It has to have very low priority, possibly negative.  If syntactic
> revisions were ever seriously contemplated, I would strongly favour
> trying to bring in some of the S4 changes, but even there I would
> regard the semantic extensions as much more urgent than the purely
> syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> everthing but it does really matter.

We do have a couple of cases where we allow expressions instead of
functions of one variable, with "x" marking the spot of the
indep.var., e.g. curve(exp(x)) works that way.

In principle we could allow a similar convention for functions of two
variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
pitfalls in the kind of code needed to support this, though: For
instance, writing a function that passes its argument on to curve()
needs to do it with substitute() magic and evaluation in parent
frames. Also take a look at the beginning of curve() for the
contorsions the code needs to go through to handle the non-function
cases. On the whole, I'm not sure this kind of apparent
user-convenience is worth it.

BTW, we also have positional TeX-style arguments, but fortunately
nobody knows about them:

> f<-function(...)..1^2+..2^2
> f(2,3)
[1] 13


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Sun Jun 18 11:09:45 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Sun, 18 Jun 2000 12:09:45 +0200 (CEST)
Subject: [Rd] Announce: exact Distributions
Message-ID: <Pine.LNX.4.21.0006181208240.24384-100000@artemis.imbe.med.uni-erlangen.de>


Hi,

I just uploaded the package exactDistr to the CRAN devel section (Fritz will
add it tomorrow, I think). ExactDistr implements the
Streitberg/Roehmel shift-algorithm for the exact distributions of
permutation- and rank tests. This is done in R (just a few lines of code)
and is IMO fast enough for m,n < 50. I added the  usual [dpq]perm
functions and an example how to track the exact distribution of the
Wilcoxon-Mann-Whitney test (especially with ties).

I would like to ask the experts to have a look at this algorithm, maybe we
can add exact p-values etc. to the rank tests in R without adapting the
network algorithm this way.

The weather is beautiful here, so I will stop hacking right now.
If it is raining somewhere:

http://www.bioinf.uni-hannover.de/~torsten/exactDistr_0.1-2.tar.gz

Torsten


 _______________________________________________________________________
|									|
|	Dipl.-Stat. Torsten Hothorn					|
|	Institut fuer Medizininformatik, Biometrie und Epidemiologie	|	
|	Waldstrasse 6, D-91054 Erlangen, Deutschland			|
|	Tel: ++49-9131-85-22707						|
|	Fax: ++49-9131-85-25740						|
|	Email: Torsten.Hothorn@rzmail.uni-erlangen.de			|
|_______________________________________________________________________|	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 11:28:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 12:28:39 +0200
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
In-Reply-To: <39490386.8029CB0B@bank-banque-canada.ca>
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca>
Message-ID: <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>

>>>>> Paul Gilbert writes:

> This is a synopsis for the r-devel archives of my solution to the problem that
> R CMD Rdindex zzz/man/* >INDEX
> and
> R CMD build zzz

> do not always result in the same order, which causes make problems outlined
> further below. The source of the problem was suggested by Brian Ripley:

BDR> The shell expands the * before Rdindex ever gets hold of it. And what it
BDR> does re locales is an installation default (assuming it is a Solaris shell
BDR> not bash or tcsh, for both of which NLS support is optional).

> The need to build INDEX separately from using the one generated by
> build is so that R INSTALL zzz does not require R CMD build zzz
> first. This means that code changes can be tested separately from
> documentation changes and vice versa, thus remakes are faster.

> INDEX needs to be generated in the same order as produced by R CMD
> build or build's diff comparison suggests that the index is out of
> date and suggests using --force. Using --force rewrites INDEX which
> causes make to think the install is out of date, so the next make
> always starts at the beginning again.

> The * expansion (in Solaris sh) does not seem to recognize LC (locale)
> settings. Sort does, but some of the output of R CMD Rdindex is on two
> lines, so sorting the output does not work. It is possible to ls -1
> man/* | sort and get the locale sort order, but it does not seem
> possible to feed this into "R CMD Rdindex". ( LC_COLLATE is not
> adequate for sort, LC_ALL is needed.)

> The fix is to generate INDEX in the C order imposed by the Solaris sh
>  expansion of *, then set LC_ALL=C for R CMD build.

Maybe I miss something here, but ...

What R CMD build currently does to list the Rd files in a package is

	find man -name "*.[Rr]d" -print | sort

When building the indices this list is fed to R CMD Rdindex.

On the other hand, R CMD Rdindex itself simply loops through the list of
Rd files it was given as arguments, without any reordering (which I
think is what it should do).

Now note that R CMD Rdindex dates back to a time where we did not have R
CMD build.  Now that we have it, I am inclined to say that when you
start with a package, you simply use R CMD build to bundle it up, and
this will automatically build the index for you (without having to worry
about the ordering), i.e., I would consider Rdindex as something more
low-level.

But in any case, I recommend we do the following:

* Extend Rdindex so that if one of its arguments is a directory, it
obtains the list of Rd files as done by R CMD build.

* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
build and Rdindex should both do LC_ALL=C.

Note that currently we are not very smart building indices, because the
name/alias scheme of Rd is not powerful enough.  1.2 may have something
like an \index entry allowing to specify the information that should go
into the INDEX (and searchable indices etc.).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 13:04:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 14:04:29 +0200
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
In-Reply-To: <200006161202.OAA01503@pubhealth.ku.dk>
References: <200006161202.OAA01503@pubhealth.ku.dk>
Message-ID: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> I am filing this as a bug report so it doesn't get lost.

Thanks.

> -----FW: <XFMail.000616094624.plummer@iarc.fr>-----

> Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
> Sender: owner-r-devel@stat.math.ethz.ch
> From: Martyn Plummer <plummer@iarc.fr>
> To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
> Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
> Cc: r-devel@stat.math.ethz.ch

> On 15-Jun-00 Naoki Takebayashi wrote:
>> I think I reported this bug in the past.  At that time, I was told that
>> it is a bug of autoconf.
>> 
>> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
>> of Alpha EV56), so all the compilation flags were set incorrectly.  I
>> don't know the right way to fix it (I don't know how autoconf works
>> yet ...), but the following patch fixes the problem.
>> 
>> Thank you,
>> Naoki
>> 
>> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
>> --- Dept. of Biology, Indiana University, Jordan Hall 142
>> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
>> 
>> 
>> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
>> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
>> @@ -153,6 +153,7 @@
>> | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>> | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>> | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
>> +             | alphapca56 \
>> | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>> | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>> | mipstx39 | mipstx39el \
>> @@ -177,6 +178,7 @@
>> | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>> | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>> | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
>> +           | alphapca56-* \
>> | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>> | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>> | sparc64-* | mips64-* | mipsel-* \

> The config.sub file is part of the GNU automake package and is meant
> to be used as is.  The version on my system (automake-1.4) does have
> an entry for alphapca5[67], so I guess the config.sub that comes with
> R just needs to be replaced with an up-to-date version.

Interesting.  You're on a Debian system like myself?  The automake 1.4
sources do not have that, but the versions in /usr/share/... do, same
for libtool.

Anyway, I just realized that autoconf is available by anonCVS, and that
the most current versions of the config.guess and config.sub scripts are
always in the CVS tree.  Will update the versions in the sources.

[Peter: this is something else we should most likely always do before a
new release, similar to changing the version numbers in the FAQ etc.  Do
we have a list of these front-matter things?]

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Mon Jun 19 00:00:45 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Mon, 19 Jun 2000 09:00:45 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "18 Jun 2000 11:56:27 +0200."
 <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>
Message-ID: <200006182300.JAA13439@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <venables@acland.qld.cmis.csiro.au> writes:
> 
> > > here is an example
> > > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> > 
> > Cryptic for most users, I'd say, and very macro-like.
> > 
> > > 
> > > in some cases, this notation is quite convenient.
> > > and since r is lexically scoped, it also should not be too dangerous.
> > > what do our architects think about introducing this kind of notation
> > > in r?
> > 
> > It has to have very low priority, possibly negative.  If syntactic
> > revisions were ever seriously contemplated, I would strongly favour
> > trying to bring in some of the S4 changes, but even there I would
> > regard the semantic extensions as much more urgent than the purely
> > syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> > everthing but it does really matter.
> 
> We do have a couple of cases where we allow expressions instead of
> functions of one variable, with "x" marking the spot of the
> indep.var., e.g. curve(exp(x)) works that way.

Yes, but that doesn't require any syntactic change, it's already
there.  If people want to write functions that way, it's up to them.

> In principle we could allow a similar convention for functions of two
> variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
> pitfalls in the kind of code needed to support this, though: For
> instance, writing a function that passes its argument on to curve()
> needs to do it with substitute() magic and evaluation in parent
> frames. Also take a look at the beginning of curve() for the
> contorsions the code needs to go through to handle the non-function
> cases. On the whole, I'm not sure this kind of apparent
> user-convenience is worth it.

I'm pretty sure it's not worth it.  Utlimately it leads to user
confusion when a variety of different kinds of object are allowed in
various places only to have them ultimately coerced to the same thing.
I know this is sometimes pretty well unavoidable, such as with
outer(u, v, "+") but overall I think it is something to be avoided.

> 
> BTW, we also have positional TeX-style arguments, but fortunately
> nobody knows about them:
> 
> > f<-function(...)..1^2+..2^2
> > f(2,3)
> [1] 13

Oh I knew about it all right, Peter.  It's just that *I* never told
anyone about it...  :-) 

Cheers,
Bill Venables.
-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jun 19 10:18:44 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 19 Jun 2000 11:18:44 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#5
In-Reply-To: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000619111844.plummer@iarc.fr>

On 18-Jun-00 Kurt Hornik wrote:
>>>>>> plummer  writes:
>> The config.sub file is part of the GNU automake package and is meant
>> to be used as is.  The version on my system (automake-1.4) does have
>> an entry for alphapca5[67], so I guess the config.sub that comes with
>> R just needs to be replaced with an up-to-date version.
> 
> Interesting.  You're on a Debian system like myself?  The automake 1.4
> sources do not have that, but the versions in /usr/share/... do, same
> for libtool.

This is much more complicated than I thought.  I'm using Red Hat, but I
see that the same thing: the version of config.sub in the source for 
automake is not the one that gets installed into /usr/share/automake.
During the build process, rpm runs "libtoolize --copy --force" which copies
the version of config.sub from /usr/share/libtool into the source directory.
The source for libtool-1.3.4 does have the up-to-date version of config.sub,
so I suppose this should be regarded as the original.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 19 16:54:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Jun 2000 11:54:37 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca> <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>
Message-ID: <394E423C.4935AFF3@bank-banque-canada.ca>

Kurt

>Maybe I miss something here, but ...

I'm not trying to make this into a big deal, but it did take me awhile
to track down so I thought it would be worth recording. Let me explain
the general problem a little more clearly, even though I think you do
understand it,  since someone may see a better overall solution.

I am trying to set up a good structure for package development, which
takes into account the eventuality that documentation testing may become
a more time consuming process. There seem to be two keys: small
independent packages and a reasonably clean separation of code changes
and testing from documentation changes and testing. These allow the
possibility of setting up a fairly efficient makefile.

Running "R CMD check zzz" for all my packages takes several hours on a
Sparc ultra 10 and the complete set of my other tests takes days to run.
I have been splitting things into smaller packages which are as
independent as I can make them, so that I can test pieces separately.
Now I want to set up my makefile so that I can work on documentation and
run the  "R CMD build zzz" tests without changing any file dates that
would indicate my installed code is out of date. If I change code rather
than documentation then I want make to recognize that and do "R INSTALL
zzz" but not "R CMD build zzz", since the build takes some time too.
(This has been a less serious consequence and until recently I was just
rebuilding each time.) Examples in the documentation are a gray area,
but since I have them all working I am thinking of them breaking when
code changes rather than when documentation changes, so I do "R CMD
check zzz" after I change code rather than after I change documentation.
My bundle has dependencies install, build, check for each of the
packages since the above split is not perfect (and I also run my own
tests).

Now the only bug in this whole approach seems to be the file INDEX which
is needed for R INSTALL and is also checked by R CMD build. If I
generate it before an install in the simple quick way using Rdindex,
then this solves my problem as long a "R CMD build" gets the same
result. If it doesn't get the same result (because of a different sort
order) then I get a lot of warning messages which I will start ignoring,
and then miss important warnings. On the other hand, if I use --force,
it changes the INDEX file so that I loose the independence between code
and documentation and end up re-installing almost ever time I run make,
and more importantly, my checks and tests also then appear to be out of
date. If I don't use INDEX as a dependency in my makefile then it
doesn't get re-made when it should be. So it would be nice to be able to
generate the INDEX file in the same format "R CMD build" gets, but
running something simple. As I explained in the previous message, this
depends on the sort order and my Solaris sh does not sort in the same
order as it expands * unless LC_ALL=C, which is the solution I am using.

>What R CMD build currently does to list the Rd files in a package is
>        find man -name "*.[Rr]d" -print | sort
>When building the indices this list is fed to R CMD Rdindex.

This would also work (and would be better since one could choose the
sort order) but I can't see how to feed this sorted list of files into
"R CMD Rdindex." Probably I am missing something here.

>Now note that R CMD Rdindex dates back to a time where we did not have
R
>CMD build.  Now that we have it, I am inclined to say that when you
>start with a package, you simply use R CMD build to bundle it up, and
>this will automatically build the index for you (without having to
worry
>about the ordering)

I was using this approach until recently and it works fine with small
packages. The time penalty is not too severe now, although it is not
insignificant for some of my packages. When I am actively working on
code development it can be a bottleneck, since I re-make often. In the
longer run I expect "R CMD build" will do more checks and take longer,
so I am mainly trying to set up a good structure for package development
which takes this into account.

>But in any case, I recommend we do the following:
>* Extend Rdindex so that if one of its arguments is a directory, it
>obtains the list of Rd files as done by R CMD build.

That would be nice but don't bother if it is a big deal, since I have a
working solution and I doubt that this is an issue for many people.

>* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
>build and Rdindex should both do LC_ALL=C.

Ensure consistency, but I wouldn't force LC_ALL=C as AaBb... would
probably be a better order for the index and "C" gives AB...ab...

>Note that currently we are not very smart building indices, because the

>name/alias scheme of Rd is not powerful enough.  1.2 may have something

>like an \index entry allowing to specify the information that should go

>into the INDEX (and searchable indices etc.).

Maybe it would be better to work on this rather than put effort into a
temporary fix.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keitt@nceas.ucsb.edu  Mon Jun 19 18:20:17 2000
From: keitt@nceas.ucsb.edu (keitt@nceas.ucsb.edu)
Date: Mon, 19 Jun 2000 19:20:17 +0200 (MET DST)
Subject: [Rd] chron library (PR#574)
Message-ID: <200006191720.TAA21739@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1
OS: Linux
Submission from: (NULL) (128.111.220.188)


The chron library does not handle 4 digit years.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 19 19:27:23 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Jun 2000 14:27:23 -0400
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
In-Reply-To: Prof Brian Ripley's message of "Fri, 16 Jun 2000 15:51:07 +0100 (BST)"
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <87n1khbk6s.fsf@bavaria.ece.cmu.edu>



Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > From: tov@phoenix.ece.cmu.edu

> >   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
> >   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
> >   after configure.
> 
> Yes, I guess that's because it insists on resolving libm at the shared
> libs build stage.

And the symbols from libm don't make it into R.exp.

> >   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
> >   during configure? Excerpt from tkConfig.sh on my machine:
> > 
> > # Linker switch(es) to use to link with the X11 library archive.
> > TK_XLIBSW='-lX11' 
> > 
> > # Additional libraries to use when linking Tk.
> > TK_LIBS='-lX11 -lld  -lm' 
> > 
> >   The '-lld' wouldn't hurt, would it?
> >   Maybe the following would work for configure?
> > 
> > case "${host}" in
> >   *aix*)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
> >     ;;      
> >   *)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
> >     ;;      
> > esac      
> 
> It's not done like that. Take a look in aclocal.m4.  I suspect that
> ${TK_LIBS} would do everywhere, but will need to do some testing.

Ok, aclocal.m4 was obviously new to me.  Below is the patch.  It
works for me...  

With this patch and "SHLIBLD=CC ./configure" I can compile, install,
check R 1.1.

Regards,
  -tom


*** aclocal.m4  Mon Jun 19 11:39:56 2000
--- aclocal.m4.orig     Mon Jun 19 11:34:21 2000
***************
*** 840,847 ****
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_LIBS}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_LIBS}] )
            fi
          fi
        fi
--- 840,847 ----
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_XLIBSW}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_XLIBSW}] )
            fi
          fi
        fi

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Jun 19 21:01:26 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 19 Jun 2000 22:01:26 +0200 (MET DST)
Subject: [Rd] missing include in pnorm.c (PR#575)
Message-ID: <200006192001.WAA22499@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: R-Release (June 15)
OS: Linux (redhat)
Submission from: (NULL) (141.211.66.172)


R fails to compile on the current released version. Some constants 
are undefined in pnorm.c. It appears that adding

#include "nmath.h"

to pnorm.c solves this problem.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 19 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <200006192001.WAA22499@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>

On Mon, 19 Jun 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: R-Release (June 15)
> OS: Linux (redhat)
> Submission from: (NULL) (141.211.66.172)
> 
> 
> R fails to compile on the current released version. Some constants 
> are undefined in pnorm.c. It appears that adding
> 
> #include "nmath.h"

Let us stress that pnorm.c does contain that line in `the current released
version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
have noticed traffic about this on R-help earlier today.  Sorry to be
picky, but quite a lot of time has been misdirected by initial reports on
this not being precise enough (and this is the third report).

R-release is the current version with all committed patches applied.  
(On release day there are not likely to be any patches.)
Unfortunately, something has gone wrong with checking it out of the
archives to the tar file.  The file is correct in the archives, so the
problem is in R-release.tar.*, not in R-release per se.  With that sort of
level of detail being important, we need to be as precise as possible.

I wondered it there was any room for misunderstanding in what was said on
CRAN, but it looks clear enough to me. R-release.tar.* is described there
as a `snapshot', and that is the intention. Those of us who download
snapshots from other projects know that sometimes they are badly broken.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 20 07:39:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 20 Jun 2000 08:39:29 +0200 (CEST)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
References: <200006192001.WAA22499@pubhealth.ku.dk>
 <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
Message-ID: <14671.4513.37090.479733@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

PBDR> On Mon, 19 Jun 2000 faraway@umich.edu wrote:
>> Full_Name: Julian Faraway
>> Version: R-Release (June 15)
>> OS: Linux (redhat)
>> Submission from: (NULL) (141.211.66.172)
>> 
>> 
>> R fails to compile on the current released version. Some constants 
>> are undefined in pnorm.c. It appears that adding
>> 
>> #include "nmath.h"

PBDR> Let us stress that pnorm.c does contain that line in `the current released
PBDR> version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
PBDR> have noticed traffic about this on R-help earlier today.  Sorry to be
PBDR> picky, but quite a lot of time has been misdirected by initial reports on
PBDR> this not being precise enough (and this is the third report).

PBDR> R-release is the current version with all committed patches applied.  
PBDR> (On release day there are not likely to be any patches.)
PBDR> Unfortunately, something has gone wrong with checking it out of the
PBDR> archives to the tar file.  The file is correct in the archives, so the
PBDR> problem is in R-release.tar.*, not in R-release per se.  With that sort of
PBDR> level of detail being important, we need to be as precise as possible.

PBDR> I wondered it there was any room for misunderstanding in what was said on
PBDR> CRAN, but it looks clear enough to me. R-release.tar.* is described there
PBDR> as a `snapshot', and that is the intention. Those of us who download
PBDR> snapshots from other projects know that sometimes they are badly broken.

I've added a much stronger statement to CRAN saying that ``These
archives are created automatically every night from the CVS tree,
hence might not even compile on your platform and can contain any
number of bugs. They will probably work, but maybe not.''

Hope this helps,
Fritz


PS: Of course ``night'' is only true from a European perspective  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jun 20 12:03:20 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 20 Jun 2000 13:03:20 +0200 (MET DST)
Subject: [Rd] exists() and the mode argument (PR#576)
Message-ID: <200006201103.NAA27861@pubhealth.ku.dk>

The following seems to be odd behaviour:

fred <- 1:10
mode(fred) # "numeric"
exists("fred") # TRUE
exists("fred", mode="numeric") # FALSE

Unless I have misunderstood, the final evaluation should be TRUE,
as an object called "fred" exists and its mode is "numeric".  In
the same category, I have just noticed that

get("fred") # 1:10
get("fred", mode="numeric") # gives an Error: variable "fred" was not found

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 20 13:19:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 20 Jun 2000 13:19:11 +0100 (BST)
Subject: [Rd] exists() and the mode argument (PR#576)
In-Reply-To: <200006201103.NAA27861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006201313251.23397-100000@auk.stats>

On Tue, 20 Jun 2000 J.C.Rougier@durham.ac.uk wrote:

> The following seems to be odd behaviour:
> 
> fred <- 1:10
> mode(fred) # "numeric"
> exists("fred") # TRUE
> exists("fred", mode="numeric") # FALSE
> 
> Unless I have misunderstood, the final evaluation should be TRUE,
> as an object called "fred" exists and its mode is "numeric".  In

Its `mode' is 
> typeof(fred)
[1] "integer"

and so

> exists("fred", mode="integer")
[1] TRUE

See ?exists

    mode: the type of interest for the object.
              ^^^^ 

I think this needs to be re-written in the documentation, or do
people think it should be the value of mode?  The latter appears
to be what the prototype uses, in that

> exists("fred", mode="numeric")
[1] T
> exists("fred", mode="integer")
[1] T
> exists("fred", mode="double")
[1] T

(sic)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rbeer@uni-goettingen.de  Tue Jun 20 17:47:54 2000
From: rbeer@uni-goettingen.de (Ragnar Beer)
Date: Tue, 20 Jun 2000 18:47:54 +0200
Subject: [Rd] Compiling R 1.1.0 under OpenBSD 2.7
Message-ID: <p04320401b5754f249535@[134.76.136.114]>

Howdy!

I was trying to compile R 1.1.0 under OpenBSD 2.7 and got the 
following output from the make step:

-----snip-----
gcc -I. -I../../src/include -I../../src/include 
-I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
-mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
arithmetic.c:48: warning: `struct exception' declared inside parameter list
arithmetic.c:48: warning: its scope is only this definition or 
declaration, which is probably not what you want.
arithmetic.c: In function `matherr':
arithmetic.c:50: dereferencing pointer to incomplete type
arithmetic.c:59: dereferencing pointer to incomplete type
arithmetic.c:53: warning: unreachable code at beginning of switch statement
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main.
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
-----snip-----

Can anyone help? I'm in the process of switching to OpenBSD from 
Linux because of OpenBSD's _very_ good security features but I just 
won't get R running :(

--Ragnar
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Jun 21 01:51:24 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 21 Jun 2000 00:51:24 GMT
Subject: [Rd] Port of R header files to Delphi
Message-ID: <39510d92.13120879@julian.uwo.ca>

I'm in the process of porting R header files to Delphi.  The short
term aim is to be able to make calls into the R.dll from Delphi; the
longer term aim is to play around with writing a Windows front-end
with some of the features of the S-PLUS environment (e.g. scripts),
and other features from other IDEs I've used (e.g. watch windows,
popup values of variables selected by mouse, etc.)

I've got a port of the simple rterm.c sample front-end sort of
working, but I need lower level access, and I'm having trouble getting
any further.  Is this the place to ask technical questions on this, or
should I ask somewhere else (or just not bug everyone, since I'm not
working on Unix or in C)?

For example:

1.  Syntax errors are causing my rterm to shut down, apparently
because I'm not catching the exceptions that are thrown.  How are
exceptions thrown?

2.  If I want to get R to give me a string showing how an existing
variable would be printed, what's the normal procedure?  I tried
calling "PrintValue", passing it the Rinternals export
"R_LastvalueSymbol", but I just get an access violation in R.DLL.
This could be because I'm not handling the export properly (DLLs
normally export entry points, not pointers to variables, so I had to
try to guess what indirection was being used here).  Or I could be
calling PrintValue at the wrong time.  Or something else.  How much
needs to be set up in advance before PrintValue will work?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Jun 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006210515.HAA15155@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
--gls{nlme}; should formula.default() look for attr(*,"formula") ?
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 576 *
Subject:  exists() and the mode argument 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 20 Jun 2000 12:03:36 +0100 (BST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 564 *
Subject: "clipping error in x11()"
From: Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>
Date: Wed, 7 Jun 2000 23:06:54 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 565 *
Subject: Postscript device ignores title if it is too long.
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Fri, 9 Jun 2000 09:17:09 +0100 (BST)
* PR# 569 *
Subject: Typo in the documentation of prcomp.
From: =?iso-8859-1?q?Bj=F8rn-Helge_Mevik?= <bhm@math.uio.no>
Date: 14 Jun 2000 14:16:14 +0200
* PR# 568 *
Subject: problem with aperm?
From: Jim Lemon <jim.lemon@uts.edu.au>
Date: Tue, 13 Jun 2000 13:20:10 +1000
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400
* PR# 570 *
Subject: extra comma in configure
From: tov@ece.cmu.edu
Date: Wed, 14 Jun 2000 21:45:35 +0200 (MET DST)
* PR# 575 *
Subject: missing include in pnorm.c
From: faraway@umich.edu
Date: Mon, 19 Jun 2000 22:01:25 +0200 (MET DST)
* PR# 574 *
Subject: chron library
From: keitt@nceas.ucsb.edu
Date: Mon, 19 Jun 2000 19:20:16 +0200 (MET DST)
* PR# 573 *
Subject:  Missing -lm for tcltk (R 1.1.0, AIX 4.3) 
From: Thomas Vogels <tov@phoenix.ece.cmu.edu>
Date: Fri, 16 Jun 2000 10:32:54 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 07:52:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 07:52:59 +0100 (BST)
Subject: [Rd] Port of R header files to Delphi
In-Reply-To: <39510d92.13120879@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006210727330.29833-100000@auk.stats>

On Wed, 21 Jun 2000, Duncan Murdoch wrote:

> I'm in the process of porting R header files to Delphi.  The short
> term aim is to be able to make calls into the R.dll from Delphi; the
> longer term aim is to play around with writing a Windows front-end
> with some of the features of the S-PLUS environment (e.g. scripts),
> and other features from other IDEs I've used (e.g. watch windows,
> popup values of variables selected by mouse, etc.)
> 
> I've got a port of the simple rterm.c sample front-end sort of
> working, but I need lower level access, and I'm having trouble getting
> any further.  Is this the place to ask technical questions on this, or
> should I ask somewhere else (or just not bug everyone, since I'm not
> working on Unix or in C)?

I suspect it is the best place, as most of your questions are about
R internals.  As for the R for Windows internals, probably only Guido 
knows, but you can read the code as I have to frequently.

> For example:
> 
> 1.  Syntax errors are causing my rterm to shut down, apparently
> because I'm not catching the exceptions that are thrown.  How are
> exceptions thrown?

I suspect that is just because you are not set up to run in interactive
mode (the internal variable R_Interactive).  The default error handler
does abort on error in non-interactive mode.  I don't know what your
`rterm' is, but rtest.c is specifically in non-interactive mode.
The real rterm.c sets R_Interactive based on isatty(0) and the --ess flag.
If you set interactive mode, you will need some way to interrupt,
and with a Windows front-end, the easiest way is to set UserBreak to
non-zero (which is equivalent to Ctrl-C on Unix or Esc in Rgui).

On my TODO list is to run more threads, so that there is a control
thread different from the one running the R interpreter.  Principally
to make interruption easier to handle, and to allow looping C code
to be interrupted.

> 2.  If I want to get R to give me a string showing how an existing
> variable would be printed, what's the normal procedure?  I tried
> calling "PrintValue", passing it the Rinternals export
> "R_LastvalueSymbol", but I just get an access violation in R.DLL.

That's a symbol, not a variable.  Section 3.6.7 of `Writing R Extensions'
may help: the key is to use findVar or one of the related functions.

> This could be because I'm not handling the export properly (DLLs
> normally export entry points, not pointers to variables, so I had to
> try to guess what indirection was being used here).  

Um. DLLs often export both.  Unfortunately, the mechanisms for *imports*
are messy, especially for exported pointers.  You need to refer to them as
_imp___blah, and that's purpose of globalvar.h.  There is no extra
indirection: apart from the name mapping they are handled just like
externs to other modules not in Dlls.

> Or I could be
> calling PrintValue at the wrong time.  Or something else.  How much
> needs to be set up in advance before PrintValue will work?

PrintValue can be called on a SEXP pointing to an R object: you may find
R_PV a little safer. (Both are in src/main/print.c.)  You will need
R_WriteConsole set up, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 15:49:03 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 10:49:03 -0400
Subject: [Rd] OS calls
Message-ID: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>

I've just been reviewing some functions in my syskern library. This library was
set up originally to provide me with a way to program around small R/S
differences  and to encapsulate some operating system requests in one place, so
that these problems would not be spread throughout my code.  Over the years the
need for many of the programs in this library has disappeared.

I have always worked in Unix but my hope was that other R users would implement
the operating system functions for other OSs. To some extent this has happened,
in the sense that many functions I once had in syskern are now handled in Rbase.
Most of the remaining functions are rather trivial or small variations on things
already done in Rbase, and I think it would be valuable for everyone if these
too could be added to Rbase. The most difficult of the functions is probably
mail, but that is already being done in bug.report(), so I am only suggesting
that it should be separated out of bug.report() and provided as a separate
function.

Below are my Unix implementations of remaining OS utilities.

Paul Gilbert
_______

sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
present.working.directory <- function(){system.call("pwd")} #present directory
local.host.netname <- function() {system.call("uname -n")}
whoami <- function(){system.call("whoami")} # return user id (for mail)
   # There are problems with different shells returning different results for
whoami when
   #    a user does  su to another name. It is probably better to use a C call
for this.
file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

file.date.info <- function(file.name)
     {# This could be a lot better. It will fail for files older than a year.
      # Also, a returned format like date() below would be better.
      mo <- (1:12)[c("Jan","Feb","Mar","Apr","May", "Jun","Jul","Aug", "Sep",
         "Oct","Nov","Dec") ==
          substring(system.call(paste("ls -l ",file)),33,35)]
      day <- as.integer(substring(system.call(paste("ls -l ",file.name)),37,38))

      hr  <- as.integer(substring(system.call(paste("ls -l ",file.name)),40,41))

      sec <- as.integer(substring(system.call(paste("ls -l ",file.name)),43,44))

      c(mo,day,hr,sec)
     }

# Except for tz this could use the date() function in R, but that may not be the
best way.
date.parsed <- function()
        {d<-parse(text=strsplit(
              system.call("date \'+%Y %m %d %H %M %S\'")," ")[[1]])
         list(y=  eval(d[1]),
              m=eval(d[2]),
              d= eval(d[3]),
              H= eval(d[4]),
              M= eval(d[5]),
              S= eval(d[6]),
              tz=system.call("date '+%Z'"))
        }

mail <- function(to, subject="", text="")
     {# If to is null then mail is not sent (useful for testing).
      file <- tempfile()
      write(text, file=file)
      if(!is.null(to))
         system.call(paste("cat ",file, " | mail  -s '", subject, "' ", to))
      unlink(file)
      invisible()
     }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 16:16:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 16:16:13 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> I've just been reviewing some functions in my syskern library. This library was
> set up originally to provide me with a way to program around small R/S
> differences  and to encapsulate some operating system requests in one place, so
> that these problems would not be spread throughout my code.  Over the years the
> need for many of the programs in this library has disappeared.
> 
> I have always worked in Unix but my hope was that other R users would implement
> the operating system functions for other OSs. To some extent this has happened,
> in the sense that many functions I once had in syskern are now handled in Rbase.
> Most of the remaining functions are rather trivial or small variations on things
> already done in Rbase, and I think it would be valuable for everyone if these
> too could be added to Rbase. The most difficult of the functions is probably
> mail, but that is already being done in bug.report(), so I am only suggesting
> that it should be separated out of bug.report() and provided as a separate
> function.
> 
> Below are my Unix implementations of remaining OS utilities.
> 
> Paul Gilbert
> _______
> 
> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
we hide names like that behind a .Sys call (but then he introduced getwd).
There is already at least one object called sleep (a dataset) in an R
package.

> present.working.directory <- function(){system.call("pwd")} #present directory

Look at getwd!

> local.host.netname <- function() {system.call("uname -n")}
> whoami <- function(){system.call("whoami")} # return user id (for mail)
>    # There are problems with different shells returning different results for
> whoami when
>    #    a user does  su to another name. It is probably better to use a C call
> for this.

Those are not even meaningful on vanilla (non-networked) Windows systems. I
am not really sure why one would want them in general R code.

> file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

Easy: use file.create and file.append.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:42:05 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:42:05 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F05D.A40D22FD@bank-banque-canada.ca>

Brian

>> local.host.netname <- function() {system.call("uname -n")}
>> whoami <- function(){system.call("whoami")} # return user id (for mail)

>Those are not even meaningful on vanilla (non-networked) Windows systems. I
>am not really sure why one would want them in general R code.

I thought whoami was meanful on Windows NT even without a network, but in any
case it is true that I want it for a network environment. You could put in
somewhat meaningful defaults like "localhost" and "root", but I think most
people are on a network these days.

Thanks for pointing out some of the other things that are already working.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:44:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:44:26 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F0EA.413B6DF3@bank-banque-canada.ca>

P.S.
>> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

>That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
>we hide names like that behind a .Sys call (but then he introduced getwd).
>There is already at least one object called sleep (a dataset) in an R
>package.

Changing these names is fine with me.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:06:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:06:50 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F05D.A40D22FD@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211904440.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> Brian
> 
> >> local.host.netname <- function() {system.call("uname -n")}
> >> whoami <- function(){system.call("whoami")} # return user id (for mail)
> 
> >Those are not even meaningful on vanilla (non-networked) Windows systems. I
> >am not really sure why one would want them in general R code.
> 
> I thought whoami was meanful on Windows NT even without a network, but in any

NT, yes, Win 9x, no, and Win 9x is > 90% of the market.

> case it is true that I want it for a network environment. You could put in
> somewhat meaningful defaults like "localhost" and "root", but I think most
> people are on a network these days.

I doubt it. DUN does not count as a network for these purposes, and indeed
the local and network IDs can be different even on NT (and frequently are).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:20:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:20:58 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F0EA.413B6DF3@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211917210.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> P.S.
> >> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
> 
> >That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
> >we hide names like that behind a .Sys call (but then he introduced getwd).
> >There is already at least one object called sleep (a dataset) in an R
> >package.
> 
> Changing these names is fine with me.

BTW, your sleep function is a really bad idea in a GUI environment (GNOME
or tcltk or even an X11 graphics device) as it blocks all GUI events.  The
version I use for the Windows port of xgobi sleeps for 500ms, then wakes up
and handles Windows events, goes back to sleep .... S-PLUS runs its
graphics devices (on Unix) in separate processes, but R does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Jun 22 15:43:26 2000
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221443.QAA22735@pubhealth.ku.dk>

Full_Name: Peter Malewski
Version: RW-1010
OS: w95
Submission from: (NULL) (193.174.111.250)


On w95b, de crashes rterm (with ess) when a vector with long strings appear:

for (i in 1:100){
  print(i)
  xx <- rep(paste(rep("a",i),collapse=""),10)
  de(xx)
}

crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I found
this by editing a data.frame with addresses).

Best wishes
P.Malewski



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  C

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 22 16:01:32 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 22 Jun 2000 17:01:32 +0200 (MET DST)
Subject: [Rd] Re: [R] R 1.1 congrat; undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006221501.RAA22869@pubhealth.ku.dk>

I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.

	-p

Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:

> Hello,
> 
> first, I'd like to congratulate the core team to the new R version 1.1. I
> think it's a great update, with glimpses into an even greater future
> (tcltk!).
> 
> While playing around with the new functions (on Win 95), I found the
> following:
> 
> As the documentation states, when I generate a plot and save it with
> recordPlot, I can regenerate it by printing the variable:
> 
> > plot(1:10)
> > abline(h=5)
> > abline(v=5)
> > t.plot<-recordPlot()
> > t.plot
> 
> works perfectly.
> 
> Now, if I add further elements to this (regenerated) plot, they get drawn
> all right (I tested only abline()), which surprised me . But when I re-save
> the result, only the new additions get saved:
> 
> > abline(h=9)     # works (to my surprise)
> > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > str(t.plot2)
> 
> OK, so I thought I might regenerate the combined plot by
> 
> > t.plot   # worked
> > t.plot2 # cleared graph, but did nothing
> 
> I think it would be useful to be able to save and replay additions to a plot
> as well as complete plots. One might, for example, try out several additions
> to a basic plot (different kinds of regression lines, to give an example)
> and save the final version with the plot to move on and try out several
> legend placements etc., thus building up the final graph in several steps.
> 
> So it would be nice if either recordPlot could "update" a saved plot with
> new additions or if replayPlot could reproduce additions on another plot.
> 
> Just a suggestion (I hope I made myself clear).
> 
> 
> Kaspar
> 
> -- 
> 
> Kaspar Pflugshaupt
> Geobotanisches Institut
> Zuerichbergstr. 38
> CH-8044 Zuerich
> 
> Tel. ++41 1 632 43 19
> Fax  ++41 1 632 12 15
> 
> mailto:pflugshaupt@geobot.umnw.ethz.ch
> privat:pflugshaupt@mails.ch
> http://www.geobot.umnw.ethz.ch
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jun 22 16:50:34 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 22 Jun 2000 16:50:34 +0100 (BST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221550.QAA01867@toucan.stats.ox.ac.uk>


> From: p.malewski@tu-bs.de
> Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Peter Malewski
> Version: RW-1010
> OS: w95
> Submission from: (NULL) (193.174.111.250)
> 
> 
> On w95b, de crashes rterm (with ess) when a vector with long strings appear:
> 
> for (i in 1:100){
>   print(i)
>   xx <- rep(paste(rep("a",i),collapse=""),10)
>   de(xx)
> }
> 
> crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I 
found
> this by editing a data.frame with addresses).

Yes, there is a limit of 44 chars displayed in a field.  Will fix for the next
release (probably by limiting the cell width, which was limited when
this limit was set).

The bug potentially applies on Unix too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Jun 23 08:10:24 2000
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Fri, 23 Jun 2000 09:10:24 +0200 (MET DST)
Subject: [Rd] Re: undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006230710.JAA26160@pubhealth.ku.dk>

On Thu, Jun 22, 2000 at 05:01:32PM +0200, p.dalgaard@biostat.ku.dk wrote:
> I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.
> 
> 	-p
> 
> Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:
> > As the documentation states, when I generate a plot and save it with
> > recordPlot, I can regenerate it by printing the variable:
> > 
> > > plot(1:10)
> > > abline(h=5)
> > > abline(v=5)
> > > t.plot<-recordPlot()
> > > t.plot
> > 
> > works perfectly.
> > 
> > Now, if I add further elements to this (regenerated) plot, they get drawn
> > all right (I tested only abline()), which surprised me . But when I re-save
> > the result, only the new additions get saved:
> > 
> > > abline(h=9)     # works (to my surprise)
> > > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > > str(t.plot2)
> > 
> > OK, so I thought I might regenerate the combined plot by
> > 
> > > t.plot   # worked
> > > t.plot2 # cleared graph, but did nothing
> > 

  The problem is that main/plot.c:do_playDL doesn't set the device 
  diplay list. Inserting towards the beginning a line like
          dd->dipslayList = theList;
  works for me at least under Unix. I will commit it after testing
  under Windows.

  BTW, Kaspar, I have no Windows at hand in this moment but 
  does the problem manifest itself also with the plot history mechanism?
  E.g., (i) if you set (with the menu) the graphics window in 
  'recording mode', (ii) make some plots , (iii) go back to the
  first plot using 'PgUp', (iv) add some new elements to it and 
  (v) go to some other plot and then back to the first plot 
  with 'PgDown' and 'PgUp', the first plot you get is the modified one
  or not? Reason of the question is that replayng of the saved history
  is implemented in a different way.

  guido 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:05:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:05:39 +0200 (CEST)
Subject: [Rd] MAINLD and SHLIBLD
Message-ID: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>

I would like to always use ${CC} for linking the main binary and the
shlibs.

Inspection of configure.in reveals that we currently deviate in the
following cases:

			mainld				shlibld
	aix[2-9]*	ld				ld
	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}
	hpux*		${CC}				ld

Does anyone recall why we do not use ${CC} in these cases?  Did anyone
successfully build R on these platforms with ${CC} for mainld/shlibld?
(Inspection of ltconfig from libtool seems to indicate that ${CC} should
be possible ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:29:55 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:29:55 +0200 (CEST)
Subject: [Rd] Re: [R] R and OpenBSD
In-Reply-To: <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
References: <p04320401b574dcb5f7c5@[134.76.136.114]>
 <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
Message-ID: <14675.29795.986062.850729@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Tue, 20 Jun 2000, Ragnar Beer wrote:
>> Meanwhile I downloaded R-1.1.0.tgz and got the following error in the 
>> make step:

> Could you please not send such messages (twice as far as I can see)
> personally to members of R-core.  I am not the right persion for this
> error, and in general posting to R-devel is encouraged as it gets a
> wider pool of experts.

> I think you can solve this by undefining HAVE_MATHERR in
> config.h. Your correspondent's analysis seems wrong in detail to me:
> configure does not look in libm.a directly.

> I suspect we need a more elaborate test for MATHERR_BROKEN, but as I
> said, I am not the configure specialist.

Has anyone encountered a similar problem with matherr() on OpenBSD?
If so, can anyone recommend a test for matherr() to be broken?

-k

>> 
>> -----snip-----
>> making util.d from util.c
>> making version.d from version.c
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c apply.c -o apply.o
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
>> arithmetic.c:48: warning: `struct exception' declared inside parameter list
>> arithmetic.c:48: warning: its scope is only this definition or 
>> declaration, which is probably not what you want.
>> arithmetic.c: In function `matherr':
>> arithmetic.c:50: dereferencing pointer to incomplete type
>> arithmetic.c:59: dereferencing pointer to incomplete type
>> arithmetic.c:53: warning: unreachable code at beginning of switch statement
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main.
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
>> -----snip-----
>> 
>> I also posted my question to the OpenBSD list and got this reply:
>> 
>> -----snip-----
>> From: Marc Espie <Marc.Espie@liafa.jussieu.fr>
>> To: Ragnar Beer <rbeer@uni-goettingen.de>
>> Cc: misc@openbsd.org
>> Subject: Re: Compiling Linux programs under OpenBSD?
>> Mail-Followup-To: Ragnar Beer <rbeer@uni-goettingen.de>, misc@openbsd.org
>> Sender: owner-misc@openbsd.org
>> X-Loop: misc@openbsd.org
>> 
>> I've looked, briefly. Its configure trips up on matherr. Specifically, it
>> only does a nm libm.a, finds matherr, and assumes it works. Unfortunately,
>> OpenBSD namespace is not squeaky clean (yet), and matherr is a private
>> function of libm: no user-visible prototype, no declaration of struct
>> exception, and hence failure.
>> -----snip-----
>> 
>> Hope this helps...
>> 
>> 
>> --Ragnar
>> 
>> 
>> >Ragnar Beer <rbeer@uni-goettingen.de> wrote:
>> >
>> >>  Has anybody successfully installed R under OpenBSD? I just tried to
>> >>  install the latest R-release under OpenBSD 2.7 and got the following
>> >>  errors in the make step:
>> >>  pnorm.c:62 'ML_ERR_return_NAN' undeclared
>> >>  pnorm.c:62 'ML_NAN' undeclared
>> >>  pnorm.c:62 'ML_NEGINF' undeclared
>> >
>> >The file pnorm.c is out-of-date in the current R-release.tar.bz2 (but not
>> >in the cvs archive). Please try R-1.1.0.tgz instead, or at least copy
>> >src/nmath/pnorm.c from R-1.1.0.tgz onto your unpacked copy of R-release.
>> >
>> >--
>> >Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> >Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> >University of Oxford,             Tel:  +44 1865 272861 (self)
>> >1 South Parks Road,                     +44 1865 272860 (secr)
>> >Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 23 17:03:13 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Jun 2000 12:03:13 -0400
Subject: [Rd] matlab2R, rats2R and gauss2R
Message-ID: <39538A41.664EB10F@bank-banque-canada.ca>

>From time to time I get request about some less than perfect scripts I posted on
S-new (a long time ago) for converting Matlab, Rats and Gauss code to S/R. More
often than not these requests are from Windows users who cannot figure out how
to use a Unix script that calls ex. It would be nice to have a CRAN email
facility that works like the f2c email site: accept code by email and return a
converted result. I can supply some scripts which are a reasonable start.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 17:34:15 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
Message-ID: <200006251634.SAA09674@pubhealth.ku.dk>

Dear R team,

I don't get what I think I should get when using anova.glm() with
family="gaussian" -- please ignore this and forgive me if this turns out
to be another example of a fundamental misunderstanding on my part (a
highly likely event!) For example: 

S <- as.factor(rep(c(rep("m",2),rep("f",2)),2))
A <- as.factor(c(rep("a",4),rep("b",4)))
y <- c(10,11,13,15,12,11,16,17)

f.glm.1 <- glm(y~A*S)
f.glm.2 <- glm(y~A+S)
anova(f.glm.1,f.glm.2,test="F")

# Analysis of Deviance Table 
#
# Response: y
#
#
#             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
# A + S + A:S         4      3.500                         
# A + S               5      4.625 -1    0.000 0.000      1

#  compared with the same analysis using anova.lm() below:

f.lm.1 <- aov(y~A*S)
f.lm.2 <- aov(y~A+S)
anova(f.lm.1,f.lm.2)

# Analysis of Variance Table
#
# Model 1: y ~ A + S + A:S
# Model 2: y ~ A + S
#   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
# 1      4      3.500                         
# 2      5      4.625 -1 -1.125  1.2857 0.3202


Thank you again for R and best regards,

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 18:42:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 19:42:36 +0200
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)"
References: <200006251634.SAA09674@pubhealth.ku.dk>
Message-ID: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> anova(f.glm.1,f.glm.2,test="F")

> #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> # A + S + A:S         4      3.500                         
> # A + S               5      4.625 -1    0.000 0.000      1
> 
> anova(f.lm.1,f.lm.2)

> #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> # 1      4      3.500                         
> # 2      5      4.625 -1 -1.125  1.2857 0.3202

Hum.. It is being done on purpose. anova.glmlist has this nugget
inside:

    table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
        pmax(0, -diff(resdev))))

This is obviously inconsistent with the lm version, but I wonder which
one is wrong? There may be a point in requiring models to be in
increasing order. However, something is clearly wrong with that too:

> anova(f.glm.2,f.glm.1,test="F")
...
            Resid. Df Resid. Dev Df Deviance      F Pr(>F)
A + S               5     4.6250                          
A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745

Notice the p value! This comes from an F with 2 df in the denominator
instead of 4. Comes out of this bit:

    if (!is.null(test)) {
        bigmodel <- object[[(rdf <- order(resdf)[1])]]
        dispersion <- summary(bigmodel, dispersion =
        dispersion)$dispersion
        df.dispersion <- if (dispersion == 1) 
            Inf
        else rdf

which is clearly wrong since rdf will be an integer between 1 and the
number of models compared...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:00:20 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sun, 25 Jun 2000 15:00:20 -0400 (EDT)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000625145600.247A-100000@bio3.acpub.duke.edu>

Many thanks for your reply.

For some reason I usually think about the models in decreasing order, and 
tend to list them that way in the argument to anova.  But as you noted 
that is not all of the problem.  Regarding the order: if there is a 
reason for requiring increasing order, then might it not be good to 
issue an error message or warning when the order used is wrong?

Thank you again!

Rashid



On 25 Jun 2000, Peter Dalgaard BSA wrote:

> Date: 25 Jun 2000 19:42:36 +0200
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
> 
> rnassar@duke.edu writes:
> 
> > anova(f.glm.1,f.glm.2,test="F")
> 
> > #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> > # A + S + A:S         4      3.500                         
> > # A + S               5      4.625 -1    0.000 0.000      1
> > 
> > anova(f.lm.1,f.lm.2)
> 
> > #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> > # 1      4      3.500                         
> > # 2      5      4.625 -1 -1.125  1.2857 0.3202
> 
> Hum.. It is being done on purpose. anova.glmlist has this nugget
> inside:
> 
>     table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
>         pmax(0, -diff(resdev))))
> 
> This is obviously inconsistent with the lm version, but I wonder which
> one is wrong? There may be a point in requiring models to be in
> increasing order. However, something is clearly wrong with that too:
> 
> > anova(f.glm.2,f.glm.1,test="F")
> ...
>             Resid. Df Resid. Dev Df Deviance      F Pr(>F)
> A + S               5     4.6250                          
> A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745
> 
> Notice the p value! This comes from an F with 2 df in the denominator
> instead of 4. Comes out of this bit:
> 
>     if (!is.null(test)) {
>         bigmodel <- object[[(rdf <- order(resdf)[1])]]
>         dispersion <- summary(bigmodel, dispersion =
>         dispersion)$dispersion
>         df.dispersion <- if (dispersion == 1) 
>             Inf
>         else rdf
> 
> which is clearly wrong since rdf will be an integer between 1 and the
> number of models compared...
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:38:56 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)
Subject: [Rd] dotplot() colors reversed (PR#580)
Message-ID: <200006251938.VAA10074@pubhealth.ku.dk>


dotplot() colors are plotted (probably unintentionally?) in reverse order.

x <- c(rep(1,3),rep(2,3),rep(3,3))
dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 21:04:16 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 22:04:16 +0200 (MET DST)
Subject: [Rd] help screens: typos, suggestions (PR#581)
Message-ID: <200006252004.WAA10158@pubhealth.ku.dk>

Dear R team,

If I may offer some suggestions for specific help screens:

1.
help(plot.default):  shouldn't `type = "n"' be listed as a possible value?

also, would it be better to say, e.g., "the following values (rather than
'possibilities') are possible" ?

2.
help(glm) data: misprint (ffrom)

    data: an optional data frame containing the variables in the model.
           By default the variables are taken from the environment
          ffrom which `glm' is called.
         ^^^

3. 
help(all):  might it be helpful to add:

  "see also `any'"

and,

help(any)

  "see also `all'"  ?

Many thanks!

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 22:37:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 23:37:58 +0200
Subject: [Rd] dotplot() colors reversed (PR#580)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)"
References: <200006251938.VAA10074@pubhealth.ku.dk>
Message-ID: <x2vgyxigqx.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> dotplot() colors are plotted (probably unintentionally?) in reverse order.
> 
> x <- c(rep(1,3),rep(2,3),rep(3,3))
> dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Yes. This is caused by 

        o <- rev(order(as.numeric(groups)))
        x <- x[o]
        groups <- groups[o]

and no corresponding reordering of color. A little care is needed when
fixing this since color is not necessarily a vector. Same thing with
lcolor, by the way.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jun 26 14:50:44 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 26 Jun 2000 15:50:44 +0200 (MET DST)
Subject: [Rd] lm.{w}fit(x,y,*) : fails when x has no column names (PR#582)
Message-ID: <200006261350.PAA18255@pubhealth.ku.dk>


(and bug.report() with vanilla setting is *REALLY* horrible inside ESS ... !)

> X <- matrix(rnorm(10),5,2)
> y <- rnorm(5)
> w <- rnorm(5)^2

> lm.fit (x=X, y=y) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector

> lm.wfit(x=X, y=y, w=w) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector
> 

--

Now, since  help(lm.fit) and help(lm.wfit) really do not contain any
information on these, one could argue that the above is not a bug.

However as build blocks for programming (many regressions),
these functions *should* work reasonably generally.

(I'm trying to fix this bug myself).

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramin.nakisa@ncr.com  Mon Jun 26 19:06:40 2000
From: ramin.nakisa@ncr.com (ramin.nakisa@ncr.com)
Date: Mon, 26 Jun 2000 20:06:40 +0200 (MET DST)
Subject: [Rd] persp greek label problem (PR#583)
Message-ID: <200006261806.UAA19700@pubhealth.ku.dk>

Full_Name: Ramin Nakisa
Version: 1.1.0
OS: i386 linux
Submission from: (NULL) (192.127.94.7)


Labels created with expression seem to disappear, e.g. the x axis label in

x <- -6:16
contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
xlab=expression(theta[0]), ylab=expression(theta[1]))

and all three labels in

x <- -6:16
persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
zlab=expression(theta[2]), ticktype="detailed")


Is this just a clipping problem, with a large bounding box for expression=...?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:37:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:37:15 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <200006261806.UAA19700@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:

> Full_Name: Ramin Nakisa
> Version: 1.1.0
> OS: i386 linux
> Submission from: (NULL) (192.127.94.7)
> 
> 
> Labels created with expression seem to disappear, e.g. the x axis label in
> 
> x <- -6:16
> contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> xlab=expression(theta[0]), ylab=expression(theta[1]))
> 
> and all three labels in
> 
> x <- -6:16
> persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> zlab=expression(theta[2]), ticktype="detailed")
> 
> 
> Is this just a clipping problem, with a large bounding box for expression=...?

No. It's a bug in the C code.

It was reported and fixed last week, so it should be fixed in
R-patched on CRAN.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:42:50 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:42:50 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0006261142200.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000, Thomas Lumley wrote:

> On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:
> 
> > Full_Name: Ramin Nakisa
> > Version: 1.1.0
> > OS: i386 linux
> > Submission from: (NULL) (192.127.94.7)
> > 
> > 
> > Labels created with expression seem to disappear, e.g. the x axis label in
> > 
> > x <- -6:16
> > contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> > xlab=expression(theta[0]), ylab=expression(theta[1]))
> > 
> > and all three labels in
> > 
> > x <- -6:16
> > persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> > zlab=expression(theta[2]), ticktype="detailed")
> > 
> > 
> > Is this just a clipping problem, with a large bounding box for expression=...?
> 
> No. It's a bug in the C code.
> 
> It was reported and fixed last week, so it should be fixed in
> R-patched on CRAN.

Actually, it was only reported and fixed for two-d plots. It is probably
still broken for persp()

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 27 08:11:36 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 27 Jun 2000 09:11:36 +0200 (MET DST)
Subject: [Rd] par(lty = "1") -- lty storage-etc bug (PR#584)
Message-ID: <200006270711.JAA22047@pubhealth.ku.dk>

Bug report, rather than R-help;
This is at least since 1.0.0; didn't try even older versions ..

    Jim> Anon wrote:

    Anon> ...However, if I use Fred <- c(1,"33")...  Is this a
    Anon> bug, or am I missing something?

this made use it  essentially something like   
      par(lty = "1")

    Jim> This is an interesting problem.  It boils down to the fact that
    Jim> PostScript expects an array (even if it's empty) and an offset for
    Jim> "setdash".  Normally, a solid line is specified with an empty
    Jim> array and zero offset.  However, if R gets specs that convert to
    Jim> zero and puts a zero in the array, the PostScript interpreter will
    Jim> barf.  Zero can appear, but there must be at least one non-zero
    Jim> number in the array.  Hexadecimal strings supplied to lty are
    Jim> converted to array elements, but a single character "1" seems to
    Jim> produce "0.00".  Remember that the c() operater will coerce the
    Jim> number 1 to the string "1" when combining it with "33".  That is,
    Jim> it's probably a bad idea to mix the two methods of specifying line
    Jim> types with "lty".

I think there's at least another (maybe the only one) bug in main/graphics.c
which is not related to postscript at all, see below.

    Jim> A possible fix is to insert a test for zero in the function
    Jim> SetLineStyle() - devPS.c:

 >> static void SetLineStyle(int newlty, double newlwd, DevDesc *dd)
 >> {
 >>     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 >>     int i, ltyarray[8];
 >>     int sum = 0;
 >>     if (pd->lty != newlty || pd->lwd != newlwd) {
 >>       pd->lwd = newlwd;
 >>       pd->lty = newlty;
 >>       PostScriptSetLineWidth(pd->psfp, dd->gp.lwd*0.75);
 >>       for(i = 0; i < 8 && newlty & 15 ; i++) {
 >>           ltyarray[i] = newlty & 15;
 >>           sum += ltyarray[i];
 >>           newlty = newlty >> 4;
 >>       }
 >>       if(!sum) i = 0;
 >>       PostScriptSetLineTexture(pd->psfp, ltyarray, i, dd->gp.lwd * 0.75);
 >>     }
 >> }

    Jim> producing a solid line when all elements of 'ltyarray' are zero.

yes, but I think this shouldn't be necessary.

The real bug is uglier:
If you use something like   par(lty="1")  
or any other one-letter (hex digit) string,
this leads to an invalid `code', and further, the storage location 
(such dd->lty in C) of that string somehow loses it's final string
terminator (\0 in C) and gets mangled.
I can reproduce this most easily with the following


for(i in seq(along=dev.list())) dev.off()
par(lty="1")
example(barplot) 
## (almost!) always ends in an error, see below,

## and then
for(i in 1:4) print(par("lty"))

--------

Note that in the Error message below,
    "invalid hex digit in color" 
has been changed in the very latest R-release sources to
    "invalid hex digit in color or lty" 
which is ``more helpful'' here :

> example(barplot) ## (almost!) always ends in an error, see below,

barplt> tN <- table(Ni <- rpois(100, lambda = 5))
barplt> r <- barplot(tN, col = "gray")

barplt> lines(r, tN, type = "h", col = "red", lwd = 2)
Error in plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...) : 
	invalid hex digit in color

> traceback()
[1] "plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...)"         
[2] "lines.default(r, tN, type = \"h\", col = \"red\", lwd = 2)"               
[3] "lines(r, tN, type = \"h\", col = \"red\", lwd = 2)"                       
[4] "eval.with.vis(expr, envir, enclos)"                                       
[5] "eval.with.vis(ei, envir)"                                                 
[6] "source(zfile, echo = echo, prompt.echo = prompt.echo, verbose = verbose, "
[7] "    max.deparse.length = 250)"                                            
[8] "example(barplot)"                                                         

> for(i in 1:4) print(par("lty"))
[1] "1r"
[1] "1SI@}@gMG@\\}@\"J@}@U\\F@4}@?D@|@A@|@]G@|@(B@names"
[1] "1|@ult"
[1] "1"
> 

---------
Peter D., I'd like to learn how to use watchpoints to debug this...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Jun 27 21:10:00 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Tue, 27 Jun 2000 22:10:00 +0200 (MET DST)
Subject: [Rd] MAINLD and SHLIBLD
In-Reply-To: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.21.0006251512130.17819-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 23 Jun 2000, Kurt Hornik wrote:

> I would like to always use ${CC} for linking the main binary and the
> shlibs.
> 
> Inspection of configure.in reveals that we currently deviate in the
> following cases:
> 
> 			mainld				shlibld
> 	aix[2-9]*	ld				ld
> 	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}

I'm only speaking for alpha*osf*:

I think these settings have their roots in very old R versions, where we
had no means to determine the system dependent Fortran libraries (-lUfor
-lots ... for DEC compilers). Now it works without these settings, i.e. 
with mainld=shlibld=${CC}. 

With DEC compilers it still fails in a "make check" with 
  ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
  /bin/sh: 19080 Memory fault
but this is unrelated to shlibld and mainld settings, as it occurs the
same way with current settings. 

The combination gcc/g77 (version 2.95.2) works as before (successfull
"make check"), the nofor_main and fpe3 options where meaningless (and even
generated some warnings) for GNU compilers.

Here is what I did:  
agebhard@delta[R-1.2.0]$ diff configure.in.bak configure.in
630,633c630,635
<     mainld="${FC} -g -nofor_main -fpe3 "
<     cpicflags=
<     cxxpicflags=
<     shlibld=${FC}
---
>     if test "${GCC}" != yes; then
>   #    mainld="${FC} -g -nofor_main -fpe3 "
>       cpicflags=
>       cxxpicflags=
>   #    shlibld=${FC}
>     fi

DEC compilers have no PIC flags, thats the reason for setting them to "", 
but may be configure would guess this automatically.

This was with a current r-devel version, on alpha-dec-osf4.0e

Albrecht


> 	hpux*		${CC}				ld
> 
> Does anyone recall why we do not use ${CC} in these cases?  Did anyone
> successfully build R on these platforms with ${CC} for mainld/shlibld?
> (Inspection of ltconfig from libtool seems to indicate that ${CC} should
> be possible ...)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Wed Jun 28 14:57:38 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Wed, 28 Jun 2000 15:57:38 +0200
Subject: [Rd] Re: [R] using graphapp.h
In-Reply-To: <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>; from vadim@kutsyy.com on Wed, Jun 28, 2000 at 08:28:45AM -0400
References: <20000628135107.C7950@sirio.stat.unipd.it> <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>
Message-ID: <20000628155738.A8378@sirio.stat.unipd.it>

On Wed, Jun 28, 2000 at 08:28:45AM -0400, Vadim Kutsyy wrote:
> What I need to do as to plot a few tens thousands squares of different
> colors.  As David mention, it can be done with polygon(), but it still be
> slow.  So I am trying to do it from c code.
> 
> As a result, I open the window with plot(), and then I want to plot in to
> that window from c code (in S it is done using "graphics.h").  The only
> thing I could think about, is to use "graphapp.h".  "graphapp.h" defines a
> lot of function for that (fillrect(rect r) for example), but I can not
> figure out how to make it grow in that window, which is already open by
> plot().
> 

  I move to r-devel.
  
  I am not sure that plotting directly on a graphics device is a
  safe idea. I see it as a little adventure. Anyway, 
  since I not against adventures, my 0.01Euro on what I know.

  A possibility is to call do_polygon - the C front end of the
  R 'polygon' function - directly from your C code.

  Another  portable alternative is clone do_polygon and friends. 
  You need to get a pointer to the current device driver and then you
  must use the device operation functions.
  Scheleton:
  #include "Graphics.h"
  .............
  DevDesc *dd = CurrentDevice() /* or GetDevice(number of device) */
  Then 
  (a) using GPolygon or similar function (in main/graphics.c )
   or 
  (b) dd->dp.polygon(...)  
  you can draw to the device (difference between (a) e (b) is that
  (b) calls directly the device).
  Essentially, (a)  is what do_polygon does.


  Alternatively, if you want, you can also call graphapp directly
  (but this isn't portable).
  A pointer to the graphapp window is hided in the DeviceSpecific part 
  of DevDesc. So, you need to copy the definition of 'gadesc' from devga.c. 
  Then 
  window w = ((gadesc *) dd->DeviceSpecific)->gawin;
  will give you the pointer.

  Keep in mind that, if I remember well Graphics.h is not 
  a part of the R API. Surely, the details
  of the DeviceSpecific part of a DevDesc are subject to changes.

  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nopause.berkeley.edu  Thu Jun 29 10:44:17 2000
From: acuster@nopause.berkeley.edu (Adrian Vance Custer)
Date: Thu, 29 Jun 2000 02:44:17 -0700
Subject: [Rd] Question on an alternative to ls() and expanded R object types
Message-ID: <20000629024417.B9659@nopause.berkeley.edu>

Hello everyone,

This question and associated comments come from a desire for more sanity in
my object name space. These ideas may just be a whacky, way too difficult
to implement or already possible with existing functions.


Would it be possible to improve R's listing ability by adding the capability
to list objects by type, creation date, modification date, ancestry and/or
user comments?


Right now my object names are devoted to keeping track of these issues
rather gouping objects by subject. My object names have their types either as
prefixes or suffixes and my name space is structured whith A.~~ as storage
space, f.~~ as functions, p.~~ as plot scripts and working.~~ or z.~~ as
working.data. Then I use dummy variables, for instance, fxxxxxxxxxxxxxxxxxx~
to delimit the space between functions and plots. This is all done so that
ls() returns a well structured workspace. Note that my only organizational
structure is the alphbetical nature of the objects rather than object
attributes. Splus has solved these issues with the object browser which is
complex and non-intuitive. While eventually such a system could be created,
it is a large project.

ls() returns a vector of names which is useful for language constructs
(functions that might manipulate the listing) but perhaps less useful for
interactive use. It would be neat to be able to get a colorized list of
object names with colors assigned to object type. This would,of course,
require a color terminal. Alternatively, the listing could return a list
of name vectors for different types so that I could say, newls()$vectors,
and get the vectors. I've started working on something like this but it
has the look and feel of someone largely unfamiliar with the subtleties of
the language. (Note typeof(), and thereby mode(), does not differentiate
between lists and frames.)

Another luxury would be able to list the objects I've played with in the
past few days. Since this facility doesn't exist I have to be exceedingly
careful to remember the objects I have worked with recently. Similarly,
when I derive an object from another, I currently have to remember the
hierarchy. I am working mostly from a single large frame from which I
extract various pieces. I modify these pieces to attempt an analysis or
another but I must track both the objects and subobjects and the operations
that happened along the way. I envison something like the call object in
the model objects.  I suspect adding to each object its ancestry would
take up a fair amount of space but I have no real sense of the memory
requirements of such an addition.

The idea of a comment space may suffer similar difficulties of storage. I
sometime could use the ability to do
> z.vec.log.tsetse_(A.FRAME.tsela.300.cont$logtse,comment="First six samples")
so that the name space does not have to hold all the clues about the
object itself.

The newls() function I discuss earlier is implementable in
userspace. However, the other issues are not. I would be interested
to read your responses. Perhaps these issues can be solved with better
organization. If that is the case, I would like the learn this and get these
suggestions into the user documentation. Perhaps these issues only affect
me, or affect everyone but are huge coding efforts. I suspect getting color
into the terminal would be a large effort. Similarly, expanding the base
object with object histories, times and comments may be too much work. If I
remember correctly, there is a substantial difference between Splus5 objects
and earlier types which may be relevant to the ability to do such things.

Thank you for any responses,

adrian
acuster@nature.berkeley.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Jun 29 09:16:27 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 29 Jun 2000 09:16:27 +0100 (BST)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.LNX.4.10.10006290912540.2519-100000@localhost.localdomain>


> suggestions into the user documentation. Perhaps these issues only affect
> me, or affect everyone but are huge coding efforts. I suspect getting color
Well, these issues don't affect me at all. (You said you wanted feedback).

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@bavaria.ece.cmu.edu  Thu Jun 29 13:11:41 2000
From: tov@bavaria.ece.cmu.edu (tov@bavaria.ece.cmu.edu)
Date: Thu, 29 Jun 2000 14:11:41 +0200 (MET DST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
Message-ID: <200006291211.OAA18674@pubhealth.ku.dk>

Hi,

  After the installation I can't search, clicking on "Search Engine &
  Keywords" gives me a 404, file not found.  I can concatenate 
  SearchEngine-head and -foot.html into SearchEngine.html which allows
  me to search, but I'm missing the key words.
  Finally the question:  What happened that SearchEngine.html is not
  generated at install time?  

  Thanks,
  -tom


P.S.  I quickly checked "?bug.report" to see its options.  The doc
    contains the "method" and "address" twice.  Do you want something
    trivial like this reported thru bug.report or is there another channel?
    Do you have a severity option for bug.reports?


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 29 13:34:14 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jun 2000 14:34:14 +0200 (CEST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
In-Reply-To: <200006291211.OAA18674@pubhealth.ku.dk>
References: <200006291211.OAA18674@pubhealth.ku.dk>
Message-ID: <14683.16966.871882.23608@galadriel.ci.tuwien.ac.at>


>>>>> On Thu, 29 Jun 2000 14:11:41 +0200 (MET DST),
>>>>> tov  (t) wrote:

t> Hi,
t>   After the installation I can't search, clicking on "Search Engine &
t>   Keywords" gives me a 404, file not found.  I can concatenate 
t>   SearchEngine-head and -foot.html into SearchEngine.html which allows
t>   me to search, but I'm missing the key words.
t>   Finally the question:  What happened that SearchEngine.html is not
t>   generated at install time?  

t>   Thanks,
t>   -tom



There was a bug (already fixed in the patched release version) which
did not install SearchEngine.html (though it was built) when the build
directory was not the src directory.

If you did compile R yourself, could you get R-patched from CRAN and
see if the problem still exists?


t> P.S.  I quickly checked "?bug.report" to see its options.  The doc
t>     contains the "method" and "address" twice.  Do you want

Fixed.


t>     trivial like this reported thru bug.report or is there another
t>	channel?

The channel is correct.

t>     Do you have a severity option for bug.reports?

Not yet.

Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 29 15:21:33 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 29 Jun 2000 16:21:33 +0200 (MET DST)
Subject: [Rd] PR#563 - fix installed
Message-ID: <200006291421.QAA20238@pubhealth.ku.dk>

Our thanks to Setzer Woodrow for an admirably thorough bug report.
His suggested fix of having formula.default check for an attribute
named "formula" in the object has been installed as a bug fix in R-1.1
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 16:35:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 29 Jun 2000 08:35:51 -0700 (PDT)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.GSO.4.21.0006290820030.10459-100000@atlas.biostat.washington.edu>

On Thu, 29 Jun 2000, Adrian Vance Custer wrote:
> 
> Would it be possible to improve R's listing ability by adding the capability
> to list objects by type, creation date, modification date, ancestry and/or
> user comments?

As you point out, the listing by type could be done in userspace.  The
comments could also be done this way, and you could add creation and
modification dates by hand this way or with simple functions like the
following, which adds a comment and the date it was made

addComment<-function(x,commment){
	cc<-attr(x,"comment")
	if (is.null(cc))
	    cc<-list()
	cc[[length(cc)+1]]<-paste(comment,date)
	attr(x,"comment")<-cc	
	x
	}	

showComments<-function(x){
	cc<-attr(x,"comment")
	if (is.null(cc)) 
	   return("No Comment")
        else
	   cc
	}
 
> Another luxury would be able to list the objects I've played with in the
> past few days. Since this facility doesn't exist I have to be exceedingly
> careful to remember the objects I have worked with recently. Similarly,
> when I derive an object from another, I currently have to remember the
> hierarchy. I am working mostly from a single large frame from which I
> extract various pieces. I modify these pieces to attempt an analysis or
> another but I must track both the objects and subobjects and the operations
> that happened along the way. I envison something like the call object in
> the model objects.  I suspect adding to each object its ancestry would
> take up a fair amount of space but I have no real sense of the memory
> requirements of such an addition.

The problem here is not so much the space, since Unix time and date
information can be stored in 32 bits (at least until 2038), but the
time.  Adding a creation time to every object would probably have serious
effects on the speed of R (in addition to the amount of work it would
take to implement). That's why it's probably better to just use comments.

Storing a pointer to the parents of an object would be a real pain (since
it would require keeping track of what objects were evaluated to do each
modification) and to do it properly would require keeping old versions of
the objects.

Something less general but more useful is probably to keep ESS transcripts
of sessions, which can then be replayed if the data changes. Some R
developers and others are interested in this sort of idea as 'Literate
Data Analysis' by analogy with Literate Programming.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 17:49:37 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 29 Jun 2000 18:49:37 +0200 (MET DST)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
Message-ID: <200006291649.SAA21319@pubhealth.ku.dk>


Under Windows, system.file() can return a path with both / and \\
characters (R 1.0.0)
eg
> system.file("libs",pkg="modreg")
"C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"

This is fine when passed to R functions but not when passed to eg Tcl.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 29 18:03:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 29 Jun 2000 18:03:17 +0100 (GMT Daylight Time)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
In-Reply-To: <200006291649.SAA21319@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006291756380.337-100000@tern.stats>

On Thu, 29 Jun 2000 thomas@biostat.washington.edu wrote:

> 
> Under Windows, system.file() can return a path with both / and \\
> characters (R 1.0.0)
> eg
> > system.file("libs",pkg="modreg")
> "C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"
> 
> This is fine when passed to R functions but not when passed to eg Tcl.

Yes, but the bug is in TCL, not R!  Such paths are valid paths on Windows,
with \ being preferred, but TCL does not accept paths containing \, which I
find pretty amazing.  I am not sure it handles drives properly, either.

In a few cases / or \ is required, so you will see gsub used quite
frequently in Windows R code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 29 18:46:25 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 29 Jun 2000 13:46:25 -0400
Subject: [Rd] Binary file functions in R
Message-ID: <395c8897.556056@fisher.stats.uwo.ca>

This is just to let people know that I'm going to try to put together
a little package of binary file read/write functions for R, along the
lines described in my message in r-help.  I'm going to do it first in
R for Windows using a DLL written in Delphi; I'll let people comment
on that, and once the design settles down, I'll redo the external code
in C so that it should be portable to Unix as well.

One immediate change from my first pass suggestion below:

I'll just have readint, readfloat, readchar; the size and whether
signed or unsigned will be determined by parameters to those
functions.

Other suggested changes are welcome!

Duncan Murdoch

>I think a set of stream like functions would be really handy
>sometimes, especially for those of us who aren't that comfortable with
>the external function interface.
>
>For example:
>
>fopen would take a filename and some information about the open mode
>(read and write would probably be enough modes) and would return a
>file handle.
>
>readint8, readint16, readint32, readint64 would read a specified count
>of integers into an integer vector.
>
>readfloat4, readfloat8 would read a specified count of floating point
>values into a vector of doubles.
>
>readchar would read a specified count of characters into a single
>component character vector, or take two counts, and read n characters
>m times into an m component vector.
>
>There would be similar writexxxx functions, a seek function, and an
>fclose function.
>
>Some issues to consider would be whether these functions should worry
>about big vs. little endian storage (I'd say probably not, but there
>should be other functions that can change it in memory), how errors
>should be handled, whether the garbage collector should be smart
>enough to automatically close an abandoned file, whether you should be
>allowed to use these low level functions on things in memory or just
>on files, etc.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 29 21:45:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 29 Jun 2000 16:45:42 -0400
Subject: [Rd] more Rd ordering
Message-ID: <395BB576.E1BAB8D0@bank-banque-canada.ca>

Although the ordering from Rdindex and R CMD build now agrees when I run them at
a command prompt, for some reason Rdindex now gives a different order when it is
run at a command prompt than it does when it is run from make. My Makefile entry
is:

%/INDEX : %/man
 @echo "making target $@ ..."
 (cd $(dir $@) ; R  CMD    Rdindex man/*.Rd >INDEX )

Any ideas?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 30 05:33:50 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 30 Jun 2000 04:33:50 GMT
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c8897.556056@fisher.stats.uwo.ca>
References: <395c8897.556056@fisher.stats.uwo.ca>
Message-ID: <395c1fdc.944518@julian.uwo.ca>

I've put together the first version of "Rstreams", a package that
allows binary access to files.  This version is for Windows only.
You can pick it up as
<http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
Comments are welcome!

Some known problems:

I tried to set it up as a package, but couldn't figure out from the
documentation where the .DLL should go.  It's sitting in the src
directory for now.

There are other things wrong with the organization as a package; R
says "no R code found" when I try to attach it.  If you want to use
it, you'll have to source the Rstreams.R file and dyn.load the DLL
yourself.

I used the .C() interface to external functions, but I'm not sure how
it handles character vectors being returned from DLLs.  I'm sticking
string pointers into the result vector, which is likely to cause
memory problems, since I don't use Ralloc to allocate the strings.
How are you supposed to return a string value?  (This only applies to
the print method; it needs to find out the filename.  The readchar
method pre-allocates the space that's needed and uses that.)

The routines that I've implemented so far are:

openstream
closestream
print.stream
readint
readfloat
readchar
writeint
writefloat
writechar
seek
truncate

One other comment for Robert G.::

Most of the information about a stream variable is kept in the DLL.
All that R gets is a handle.  This means you're safe to make
assignments of stream variables to other variables; both refer to the
same stream object in the DLL.  That's how I think environments should
be handled.

Again, comments are welcome!

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 30 07:22:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 30 Jun 2000 07:22:51 +0100 (BST)
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c1fdc.944518@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006300717310.3250-100000@auk.stats>

On Fri, 30 Jun 2000, Duncan Murdoch wrote:

> I've put together the first version of "Rstreams", a package that
> allows binary access to files.  This version is for Windows only.
> You can pick it up as
> <http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
> Comments are welcome!
> 
> Some known problems:
> 
> I tried to set it up as a package, but couldn't figure out from the
> documentation where the .DLL should go.  It's sitting in the src
> directory for now.

It is not intended to be in the source of a package. Once the package is
compiled, the DLL goes in the libs directory.

> There are other things wrong with the organization as a package; R
> says "no R code found" when I try to attach it.  If you want to use
> it, you'll have to source the Rstreams.R file and dyn.load the DLL
> yourself.

Yes, you need to compile the package before using library() on it
(and that converts the help files too).

> I used the .C() interface to external functions, but I'm not sure how
> it handles character vectors being returned from DLLs.  I'm sticking
> string pointers into the result vector, which is likely to cause
> memory problems, since I don't use Ralloc to allocate the strings.
> How are you supposed to return a string value?  (This only applies to
> the print method; it needs to find out the filename.  The readchar
> method pre-allocates the space that's needed and uses that.)

You do need to use Ralloc to allocate storage for strings.  The .C
interface copies the strings on the way in and out, so the memory
needs to be de-allocated after the copy.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jun 30 19:15:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 30 Jun 2000 20:15:51 +0200 (MET DST)
Subject: [Rd] dim(a <- ...) sets invisible flag erronously (PR#587)
Message-ID: <200006301815.UAA02861@pubhealth.ku.dk>

{Nothing really harmful;  R 1.1.0}

dim(.) sets (or doesn't clear) the  ``invisible flag'' for printing in
certain circumstances:

  > dim(a <- cbind(1))
  >

does *not* print as it should :

  > dim(a)
  [1] 1 1

---

Question to the real "hackers" :

How can I check this using R code alone (not using files),
i.e. (how) can I ask an R expression if its ``invisible flag'' is set or not ?

{help(invisible) doesn't help here}.

Maybe one would want an

      is.invisible(.)

function?

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jun  1 00:10:41 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:10:41 -0400 (EDT)
Subject: [Rd] legend with multiple columns
Message-ID: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>


  I have made a minor hack to "legend" (in R 1.0.0, but I didn't notice
any changes to legend in the 1.0.1 NEWS) to allow the legend to be
formatted in multiple columns, or horizontally (number of columns <-
number of legend items).  (I find this helpful when I have lots of legend
items and not a lot of vertical space to squeeze the legend into.)
  (Another hack I've considered is allowing location to be specified more
flexibly, but I haven't bothered so far.)

  I haven't stringently tested it, but it seems to work.

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

PATCHES to legend.Rd and legend.R:

*** legend2.txt	Wed May 31 14:45:18 2000
--- legend2.R	Wed May 31 15:02:22 2000
***************
*** 1,7 ****
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
! 	      bg = par("bg"), cex = 1,
!               xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!               text.width = NULL, merge = do.lines && has.pch, trace = FALSE)
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
--- 1,9 ----
! function (x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
!                        bg = par("bg"), cex = 1,
!                        xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
!                        text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
!                        ncol=1, horiz =FALSE)
!   ## BB hacked for multiple columns
  {
      if(is.list(x)) {
          if(!missing(y)) {               # the 2nd arg maybe really is `legend'
***************
*** 67,72 ****
--- 69,78 ----
      do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
      n.leg <- length(legend)
  
+     if (horiz && ncol!=1) warning("horizontal specification overrides number of columns")
+     if (horiz) ncol <- n.leg
+     n.legpercol <- ceiling(n.leg / ncol)  ## legends per column
+ 
      if(has.pch <- !missing(pch)) {
  	if(is.character(pch) && nchar(pch[1]) > 1) {
              if(length(pch) > 1)
***************
*** 98,108 ****
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.leg * ychar + yc
!         w <- text.width + (1.5 + x.intersp) * xchar
!         if(!missing(fill))      w <- w + dx.fill
!         if(has.pch && !merge)   w <- w + dx.pch
!         if(do.lines)		w <- w + (2+x.off) * xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
--- 104,115 ----
  
      } else {## nx == 1
          ## -- (w,h) := (width,height) of the box to draw -- computed in steps
!         h <- n.legpercol * ychar + yc
!         w0 <- text.width + (x.intersp+1) * xchar
!         if(!missing(fill))      w0 <- w0 + dx.fill
!         if(has.pch && !merge)   w0 <- w0 + dx.pch
!         if(do.lines)		w0 <- w0 + (2+x.off) * xchar
!         w <- w0*ncol+xchar
          ##-- (w,h) are now the final box width/height.
          left <- x      - xjust  * w
          top  <- y + (1 - yjust) * h
***************
*** 112,119 ****
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + xchar
!     yt <- top - (1:n.leg) * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)
--- 119,126 ----
  	rect2(left, top, dx = w, dy = h, col = bg)
  
      ## (xt[],yt[]) := 'current' vectors of (x/y) legend text
!     xt <- rep(left, n.leg) + (w0*rep(0:(ncol-1),rep(n.legpercol,ncol)))[1:n.leg] + xchar
!     yt <- top - rep(1:n.legpercol,ncol)[1:n.leg] * ychar
  
      if (!missing(fill)) {               #- draw filled boxes -------------
  	fill <- rep(fill, length.out=n.leg)

*** legend.Rd.old	Wed May 31 19:02:55 2000
--- legend.Rd	Wed May 31 19:05:14 2000
***************
*** 43,48 ****
--- 43,52 ----
      Defaults to the proper value computed by \code{\link{strwidth}(legend)}.}
    \item{merge}{logical; if \code{TRUE}, ``merge'' points and lines but
      not filled boxes.  Defaults to \code{TRUE} if there are points and lines.}
+   \item{ncol}{the number of columns in which to set the legend item (default is 1,
+       a vertical legend.}
+   \item{horiz}{logical; if \code{TRUE}, set the legend horizontally rather than
+      vertically (specifying \code{horiz} overrides the \code{ncol} specification).}
  }
  \description{
    This function can be used to add legends to plots.  Note that a call

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Jun  1 00:30:05 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 31 May 2000 19:30:05 -0400 (EDT)
Subject: [Rd] legend with multiple columns
In-Reply-To: <Pine.LNX.4.10.10005311859490.3340-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.10.10005311929350.3397-100000@bolker.zoo.ufl.edu>


  oops, replying to my own message.  I notice there's a typo: "item"
should be "items" in the description of the "ncol" argument ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  1 07:24:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)
Subject: [Rd] read.table and strip.white
In-Reply-To: <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>

On Wed, 31 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley wrote:
> 
> > > [...]
> 
> > I was rather surprised here, and this is not what the prototype does:
> > 
> >   .col1. .col2. .col3.
> > 1      1      1      1
> > 2      2      2      2
> > 
> > Should not strip.white be true for the header line?
> 
> If there are no compatibility problems, setting it to TRUE would be
> useful ...
> But compatibility is an important point, especially in read.table(.), I
> think. Many R users have got their own functions using read.table(.), I
> suppose. Maybe changing the defaults could break anything?

That's tantamount to saying we should not fix bugs because users might be
relying on the undocumented and unintended behaviour!  Yes, changing this
could change things: for a start the V&R MASS datasets would load correctly
on R without R-specific editing.  Does anyone seriously intend to have
heading spaces in their column names in a data frame? Especially as those
are not S variable names, and as you see S-PLUS (but not R) does enforce
that.  (read.table circumvents that by not using the class
constructor, but S-PLUS has an explicit call to make.names lacking in R.)

I am inclined to make the change _and_ to check the column names.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun  1 22:00:28 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2000 23:00:28 +0200
Subject: [Rd] read.table and strip.white
In-Reply-To: Prof Brian D Ripley's message of "Thu, 1 Jun 2000 07:24:55 +0100 (GMT Daylight Time)"
References: <Pine.WNT.4.05.10006010714300.193-100000@tern.stats>
Message-ID: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 31 May 2000, Uwe Ligges wrote:
> 
> > Prof Brian Ripley wrote:
> > 
> > > > [...]
> > 
> > > I was rather surprised here, and this is not what the prototype does:
> > > 
> > >   .col1. .col2. .col3.
> > > 1      1      1      1
> > > 2      2      2      2
> > > 
> > > Should not strip.white be true for the header line?
> > 
> > If there are no compatibility problems, setting it to TRUE would be
> > useful ...
> > But compatibility is an important point, especially in read.table(.), I
> > think. Many R users have got their own functions using read.table(.), I
> > suppose. Maybe changing the defaults could break anything?
> 
> That's tantamount to saying we should not fix bugs because users might be
> relying on the undocumented and unintended behaviour!  Yes, changing this
> could change things: for a start the V&R MASS datasets would load correctly
> on R without R-specific editing.  Does anyone seriously intend to have
> heading spaces in their column names in a data frame? Especially as those
> are not S variable names, and as you see S-PLUS (but not R) does enforce
> that.  (read.table circumvents that by not using the class
> constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> 
> I am inclined to make the change _and_ to check the column names.

I tend to agree, recently having had dealings with an SPSS-created
.cvs file with "Height SDS" and so on as variable names. However, it
would seem that the prototype *does* read the leading whitespace and
replaces it with a dot while fixing the names, no? I don't disagree
that we're probably better off without that effect, but if we're going
for compatibility.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Fri Jun  2 01:08:40 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Fri, 2 Jun 2000 02:08:40 +0200 (MET DST)
Subject: [Rd] problem loading packages (PR#559)
Message-ID: <200006020008.CAA03727@pubhealth.ku.dk>

Dear R team,

I had a strange problem that appeared suddenly, and which I'd like to
to mention in case it is of interest (although I suspect that I
may have unwittingly done something dumb: if so please accept my apology)

> library(ctest)      ## or any package other than "oz" that I tried
Error in as.character(table) : Object ".Dyn.libs" not found
> traceback()
[1] "as.character(table)"                "match(chname, 
.Dyn.libs)"          
[3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
package)"  
[5] "library(ctest)"                    

I traced the problem to my .RData file, and specifically to ".AutoloadEnv"

> ls(all.names=TRUE)
 [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
 [4] ".Machine"            ".Platform"           ".PostScript.Options"
 [7] ".Provided"           ".Random.seed"        ".Traceback"         
[10] ".lib.loc"           

I removed the above, one at a time, and tried loading a library.  It
worked after I removed  ".AutoloadEnv".  I confirmed it by checking
that R works normally if I only remove ".AutoloadEnv".  I don't know
what could have caused the problem in the first place.  The contents
of ".AutoloadEnv" are shown below: 

> .AutoloadEnv
<environment: 0x40691ddc>
attr(,"name")
[1] "Autoloads"

> rm(".AutoloadEnv")
> library(gee)
> library(nlme)
Loading required package: nls 


Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-unknown-linux
 arch = i586
 os = linux
 system = i586, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 06:48:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 06:48:55 +0100 (BST)
Subject: [Rd] read.table and strip.white
In-Reply-To: <x2wvk9yv4j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006020639510.1330-100000@auk.stats>

On 1 Jun 2000, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > On Wed, 31 May 2000, Uwe Ligges wrote:
> > 
> > > Prof Brian Ripley wrote:
> > > 
> > > > > [...]
> > > 
> > > > I was rather surprised here, and this is not what the prototype does:
> > > > 
> > > >   .col1. .col2. .col3.
> > > > 1      1      1      1
> > > > 2      2      2      2
> > > > 
> > > > Should not strip.white be true for the header line?
> > > 
> > > If there are no compatibility problems, setting it to TRUE would be
> > > useful ...
> > > But compatibility is an important point, especially in read.table(.), I
> > > think. Many R users have got their own functions using read.table(.), I
> > > suppose. Maybe changing the defaults could break anything?
> > 
> > That's tantamount to saying we should not fix bugs because users might be
> > relying on the undocumented and unintended behaviour!  Yes, changing this
> > could change things: for a start the V&R MASS datasets would load correctly
> > on R without R-specific editing.  Does anyone seriously intend to have
> > heading spaces in their column names in a data frame? Especially as those
> > are not S variable names, and as you see S-PLUS (but not R) does enforce
> > that.  (read.table circumvents that by not using the class
> > constructor, but S-PLUS has an explicit call to make.names lacking in R.)
> > 
> > I am inclined to make the change _and_ to check the column names.
> 
> I tend to agree, recently having had dealings with an SPSS-created
> .cvs file with "Height SDS" and so on as variable names. However, it
> would seem that the prototype *does* read the leading whitespace and
> replaces it with a dot while fixing the names, no? I don't disagree
> that we're probably better off without that effect, but if we're going
> for compatibility.

No, those are the quotes being converted to `.'  The original example
was

"col1", "col2", "col3"

Now in R the quoting mechanism removes the quotes, but with quote=""
one (now) gets X.col1. etc.  S-PLUS does not have the quoting mechanism,
and leading spaces just disappear (as shown in my original posting).

I've added this in, so now read.table has check.names=TRUE and
strip.white=FALSE arguments, and the header line is always stripped
but only converted if check.names is true.  If you want leading spaces
in the col names, you will need to use quotes and check.names=FALSE,
but you can still do it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 20:34:36 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
Message-ID: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>


I just tried the rsync version of R-1.1.0 on one of my alphas:
It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
but make check stops in base-Ex.R at

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> stopifnot(abs(X - s$u %*% D %*% t(s$v)) < Eps)#  X = U D V'
Error: abs(X - s$"u" %*% D %*% t(s$"v")) < Eps is not TRUE
Execution halted

if I repeat all the svd tests manually I get:

>
> hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
> str(X <- hilbert(9)[,1:6])
 num [1:9, 1:6] 1.000 0.500 0.333 0.250 0.200 ...
> str(s <- svd(X))
List of 3
 $ d: num [1:6] 1.67e+00 2.77e-01 2.22e-02 1.08e-03 3.24e-05 ...
 $ u: num [1:9, 1:6] -0.724 -0.428 -0.312 -0.248 -0.206 ...
 $ v: num [1:6, 1:6] -0.736 -0.443 -0.327 -0.263 -0.220 ...
> Eps <- 10 * .Machine$double.eps
> D <- diag(s$d)
> abs(X - s$u %*% D %*% t(s$v)) < Eps
      [,1] [,2] [,3] [,4] [,5] [,6]
 [1,] TRUE TRUE TRUE TRUE TRUE TRUE
 [2,] TRUE TRUE TRUE TRUE TRUE TRUE
 [3,] TRUE TRUE TRUE TRUE TRUE TRUE
 [4,] TRUE TRUE TRUE TRUE TRUE TRUE
 [5,] TRUE TRUE TRUE TRUE TRUE TRUE
 [6,] TRUE TRUE TRUE TRUE TRUE TRUE
 [7,] TRUE TRUE TRUE TRUE TRUE TRUE
 [8,] TRUE TRUE TRUE TRUE TRUE TRUE
 [9,] TRUE TRUE TRUE TRUE TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,] TRUE TRUE TRUE TRUE TRUE TRUE
[2,] TRUE TRUE TRUE TRUE TRUE TRUE
[3,] TRUE TRUE TRUE TRUE TRUE TRUE
[4,] TRUE TRUE TRUE TRUE TRUE TRUE
[5,] TRUE TRUE TRUE TRUE TRUE TRUE
[6,] TRUE TRUE TRUE TRUE TRUE TRUE
> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1]  [,2]
[1,] TRUE  TRUE
[2,] TRUE  TRUE
[3,] TRUE  TRUE
[4,] TRUE  TRUE
[5,] TRUE  TRUE
[6,] TRUE FALSE
[7,] TRUE  TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
      [,1] [,2]
[1,] FALSE TRUE
[2,]  TRUE TRUE

and the errors are:

> abs(X - s$u %*% D %*% t(s$v)) - Eps
              [,1]          [,2]
[1,] -2.109424e-15 -2.220446e-16
[2,] -1.998401e-15 -8.881784e-16
[3,] -2.220446e-15 -1.776357e-15
[4,] -1.998401e-15 -1.332268e-15
[5,] -1.998401e-15 -1.332268e-15
[6,] -1.998401e-15  4.440892e-16
[7,] -1.332268e-15 -2.220446e-15
> abs(D - t(s$u) %*% X %*% s$v) - Eps
              [,1]          [,2]
[1,]  3.108624e-15 -8.881784e-16
[2,] -1.165734e-15 -2.220446e-15

4.440892e-16 and 3.108624e-15 

Eps was: 
> Eps
[1] 2.220446e-15
This seems to be ok, I tried in Fortran

      EPSMCH=DLAMCH('E')
      WRITE(*,*)"eps:",EPSMCH

and got 
 eps:  2.22044605E-16

I compiled --whithout-dxml, so I'm not using any special numeric library.

When I comment out the few lines for svd the tests from base-Ex.R complete
successfully.

All other tests succeed (other libraries and strict and sloppy specific
tests)


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  2 21:07:45 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jun 2000 22:07:45 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: Albrecht Gebhardt's message of "Fri, 2 Jun 2000 21:34:36 +0200 (MET DST)"
References: <Pine.OSF.4.21.0006022021190.4127-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>

Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

> > abs(X - s$u %*% D %*% t(s$v)) - Eps
>               [,1]          [,2]
> [1,] -2.109424e-15 -2.220446e-16
> [2,] -1.998401e-15 -8.881784e-16
> [3,] -2.220446e-15 -1.776357e-15
> [4,] -1.998401e-15 -1.332268e-15
> [5,] -1.998401e-15 -1.332268e-15
> [6,] -1.998401e-15  4.440892e-16
> [7,] -1.332268e-15 -2.220446e-15
> > abs(D - t(s$u) %*% X %*% s$v) - Eps
>               [,1]          [,2]
> [1,]  3.108624e-15 -8.881784e-16
> [2,] -1.165734e-15 -2.220446e-15
> 
> 4.440892e-16 and 3.108624e-15 
> 
> Eps was: 
> > Eps
> [1] 2.220446e-15
...
>  eps:  2.22044605E-16

So one of the calculations end up at about 5.3e-15 which is over 20
times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
Alpha hardware doesn't have the extended precision of Intel FPUs but
does this look reasonable enough that we should just use a bigger Eps?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun  2 21:22:43 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 2 Jun 2000 21:22:43 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <x2r9af7soe.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10006022118070.4372-100000@auk.stats>

On 2 Jun 2000, Peter Dalgaard BSA wrote:

> Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:
> 
> > > abs(X - s$u %*% D %*% t(s$v)) - Eps
> >               [,1]          [,2]
> > [1,] -2.109424e-15 -2.220446e-16
> > [2,] -1.998401e-15 -8.881784e-16
> > [3,] -2.220446e-15 -1.776357e-15
> > [4,] -1.998401e-15 -1.332268e-15
> > [5,] -1.998401e-15 -1.332268e-15
> > [6,] -1.998401e-15  4.440892e-16
> > [7,] -1.332268e-15 -2.220446e-15
> > > abs(D - t(s$u) %*% X %*% s$v) - Eps
> >               [,1]          [,2]
> > [1,]  3.108624e-15 -8.881784e-16
> > [2,] -1.165734e-15 -2.220446e-15
> > 
> > 4.440892e-16 and 3.108624e-15 
> > 
> > Eps was: 
> > > Eps
> > [1] 2.220446e-15
> ...
> >  eps:  2.22044605E-16
> 
> So one of the calculations end up at about 5.3e-15 which is over 20
> times the machine epsilon. OK, Hilbert matrices are nasty and AFAIR
> Alpha hardware doesn't have the extended precision of Intel FPUs but
> does this look reasonable enough that we should just use a bigger Eps?

Other hardware with standard IEEE arithmetic succeeds. But I think
Eps = 100 * .Machine$double.eps would be adequate.  My Solaris box gets up
to 1.77e-15.  I've just committed 100 * .Machine$double.eps.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:21:42 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:21:42 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022229570.8086-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > 
> > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > .........
> > 
> > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > 
> 
> Sorry I mixed something up in my report: In this compile I used the alpha
> specific DXML library, in my rpms I omit it with --without-dxml (because
> it sometimes crashes). I will try once more now without dxml, may be this
> changes something, don't know if it gets used at all in the svd code.
> 

That was the reason. Now without DXML I pass the test without modifying
Eps:

> X <- cbind(1, 1:7)
> str(s <- svd(X)); D <- diag(s$d)
List of 3
 $ d: num [1:2] 12.07  1.16
 $ u: num [1:7, 1:2] -0.0976 -0.1788 -0.2601 -0.3413 -0.4225 ...
 $ v: num [1:2, 1:2] -0.198 -0.980 -0.980  0.198
> abs(X - s$u %*% D %*% t(s$v)) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE
[3,] TRUE TRUE
[4,] TRUE TRUE
[5,] TRUE TRUE
[6,] TRUE TRUE
[7,] TRUE TRUE
> abs(D - t(s$u) %*% X %*% s$v) < Eps
     [,1] [,2]
[1,] TRUE TRUE
[2,] TRUE TRUE


So may be it is better do disable dxml support by default in ./configure?

The following patch should do this:
--- configure.in.orig        Fri Jun  2 23:10:20 2000
+++ configure.in     Fri Jun  2 23:10:02 2000
@@ -122,7 +122,7 @@
     else
       use_dxml=true;
     fi],
-  use_dxml=true)
+  use_dxml=false)

 AC_ARG_WITH(atlas,
   [  --with-atlas            use ATLAS library (if available)],


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Fri Jun  2 22:36:55 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Fri, 2 Jun 2000 23:36:55 +0200 (MET DST)
Subject: [Rd] R.bin (1.1.0) gives segfault
Message-ID: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>


During testing with R-devel on the alpha I just noticed (after misspelling
"bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
variable and should better give an error instead of a crash:

a gdb output snippet:
...
Program received signal SIGSEGV, Segmentation fault.
0x3ff800d6a10 in strcpy ()
(gdb) backtrace
#0  0x3ff800d6a10 in strcpy ()
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
#2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
(gdb) up
#1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
454         strcpy(X11_DLL, getenv("R_HOME"));

some test for getenv returning NULL followed by exit(1) would be
better. 


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:23:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:23:41 +0100 (BST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > 
> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > .........
> > > 
> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > 
> > 
> > Sorry I mixed something up in my report: In this compile I used the alpha
> > specific DXML library, in my rpms I omit it with --without-dxml (because
> > it sometimes crashes). I will try once more now without dxml, may be this
> > changes something, don't know if it gets used at all in the svd code.
> > 
> 
> That was the reason. Now without DXML I pass the test without modifying
> Eps:

Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
Solaris and Windows) are giving errors of 8 or 9 times the 
machine precision, and with dxml you got 10x (and this failed as
Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
and I've given svd's 100x.

[...]

> So may be it is better do disable dxml support by default in ./configure?

Well, what does dxml support do for you?  Making the errors 1x machine
precision larger than without is hardly critical.  On the other hand, I am
not convinced that these optimized blas operations are worthwhile for all
but the most unusual uses of R.

On the other hand, I think it would be worth omitting the check for
-ldxml and -latlas except on appropriate platforms (whatever they are).

[...]


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 06:29:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 06:29:22 +0100 (BST)
Subject: [Rd] R.bin (1.1.0) gives segfault
In-Reply-To: <Pine.OSF.4.21.0006022328510.9152-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10006030624570.5027-100000@auk.stats>

On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:

> 
> During testing with R-devel on the alpha I just noticed (after misspelling
> "bin/R" as "bin/R.bin") that R.bin segfaults. It accesses the empty R_HOME
> variable and should better give an error instead of a crash:
> 
> a gdb output snippet:
> ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x3ff800d6a10 in strcpy ()
> (gdb) backtrace
> #0  0x3ff800d6a10 in strcpy ()
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> #2  0x1200ecc88 in main (ac=1, av=0x11fffef28) at system.c:160
> (gdb) up
> #1  0x1200efda0 in R_load_X11_shlib () at dynload.c:454
> 454         strcpy(X11_DLL, getenv("R_HOME"));
> 
> some test for getenv returning NULL followed by exit(1) would be
> better. 

Yes, will do.  That's hardly a misspelling, though, and it is hard to know
how far to go to protect users from negligence.  I did actually think about
that, and think `it can't happen: R_HOME is always set in R.sh'.

We've been here before: that construction crashes on some systems and not
on others.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun  3 07:11:34 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <200006020008.CAA03727@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>

My guess is that this is due to a very old .RData, as .Dyn.libs
disappeared a couple of years ago, I believe. In any case, 
.GlobalEnv etc are in a .RData of recent provenance.

General warning: do not expect .RData files from alpha or beta versions
of R to work without some cleaning.

On Fri, 2 Jun 2000 rnassar@duke.edu wrote:

> Dear R team,
> 
> I had a strange problem that appeared suddenly, and which I'd like to
> to mention in case it is of interest (although I suspect that I
> may have unwittingly done something dumb: if so please accept my apology)
> 
> > library(ctest)      ## or any package other than "oz" that I tried
> Error in as.character(table) : Object ".Dyn.libs" not found
> > traceback()
> [1] "as.character(table)"                "match(chname, 
> .Dyn.libs)"          
> [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> package)"  
> [5] "library(ctest)"                    
> 
> I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> 
> > ls(all.names=TRUE)
>  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
>  [4] ".Machine"            ".Platform"           ".PostScript.Options"
>  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> [10] ".lib.loc"           
> 
> I removed the above, one at a time, and tried loading a library.  It
> worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> that R works normally if I only remove ".AutoloadEnv".  I don't know
> what could have caused the problem in the first place.  The contents
> of ".AutoloadEnv" are shown below: 
> 
> > .AutoloadEnv
> <environment: 0x40691ddc>
> attr(,"name")
> [1] "Autoloads"
> 
> > rm(".AutoloadEnv")
> > library(gee)
> > library(nlme)
> Loading required package: nls 
> 
> 
> Thank you very much.
> 
> Rashid Nassar
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i586-unknown-linux
>  arch = i586
>  os = linux
>  system = i586, linux
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sat Jun  3 18:10:13 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sat, 3 Jun 2000 13:10:13 -0400 (EDT)
Subject: [Rd] problem loading packages (PR#559)
In-Reply-To: <Pine.GSO.4.05.10006030659030.9087-100000@auk.stats>
Message-ID: <Pine.SOL.3.91.1000603130741.3645A-100000@bio3.acpub.duke.edu>

Dear Professor Ripley,

Thank you for your reply.  What you said reminded me that I have recently 
been searching for some old data, and may well have loaded an old .RData 
file in an attempt to find them.  Thank you again.

Rashid Nassar

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> Date: Sat, 3 Jun 2000 07:11:34 +0100 (BST)
> From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] problem loading packages (PR#559)
> 
> My guess is that this is due to a very old .RData, as .Dyn.libs
> disappeared a couple of years ago, I believe. In any case, 
> .GlobalEnv etc are in a .RData of recent provenance.
> 
> General warning: do not expect .RData files from alpha or beta versions
> of R to work without some cleaning.
> 
> On Fri, 2 Jun 2000 rnassar@duke.edu wrote:
> 
> > Dear R team,
> > 
> > I had a strange problem that appeared suddenly, and which I'd like to
> > to mention in case it is of interest (although I suspect that I
> > may have unwittingly done something dumb: if so please accept my apology)
> > 
> > > library(ctest)      ## or any package other than "oz" that I tried
> > Error in as.character(table) : Object ".Dyn.libs" not found
> > > traceback()
> > [1] "as.character(table)"                "match(chname, 
> > .Dyn.libs)"          
> > [3] "library.dynam(\"ctest\", pkg, lib)" "firstlib(which.lib.loc, 
> > package)"  
> > [5] "library(ctest)"                    
> > 
> > I traced the problem to my .RData file, and specifically to ".AutoloadEnv"
> > 
> > > ls(all.names=TRUE)
> >  [1] ".AutoloadEnv"        ".GlobalEnv"          ".Library"           
> >  [4] ".Machine"            ".Platform"           ".PostScript.Options"
> >  [7] ".Provided"           ".Random.seed"        ".Traceback"         
> > [10] ".lib.loc"           
> > 
> > I removed the above, one at a time, and tried loading a library.  It
> > worked after I removed  ".AutoloadEnv".  I confirmed it by checking
> > that R works normally if I only remove ".AutoloadEnv".  I don't know
> > what could have caused the problem in the first place.  The contents
> > of ".AutoloadEnv" are shown below: 
> > 
> > > .AutoloadEnv
> > <environment: 0x40691ddc>
> > attr(,"name")
> > [1] "Autoloads"
> > 
> > > rm(".AutoloadEnv")
> > > library(gee)
> > > library(nlme)
> > Loading required package: nls 
> > 
> > 
> > Thank you very much.
> > 
> > Rashid Nassar
> > 
> > --please do not edit the information below--
> > 
> > Version:
> >  platform = i586-unknown-linux
> >  arch = i586
> >  os = linux
> >  system = i586, linux
> >  status = 
> >  major = 1
> >  minor = 0.1
> >  year = 2000
> >  month = April
> >  day = 14
> >  language = R
> > 
> > Search Path:
> >  .GlobalEnv, package:ctest, Autoloads, package:base
> > 
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pi.broberg@telia.com  Sun Jun  4 15:50:19 2000
From: pi.broberg@telia.com (pi.broberg@telia.com)
Date: Sun, 4 Jun 2000 16:50:19 +0200 (MET DST)
Subject: [Rd] mle (PR#560)
Message-ID: <200006041450.QAA14887@pubhealth.ku.dk>

Full_Name: Per Broberg
Version: 1.00
OS: Windows 98
Submission from: (NULL) (62.20.231.229)


I tested my installation with the following:

> library(lme)
Loading required package: nls 
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
  LoadLibrary failure
> data(Orthodont)
> fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table
> fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
        C/Fortran function name not in load table

What is wrong? Could it be the path
"C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?


Regards 

Per Broberg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jun  4 17:20:39 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 04 Jun 2000 18:20:39 +0200
Subject: [Rd] mle (PR#560)
References: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <393A81D7.68618F59@statistik.uni-dortmund.de>

pi.broberg@telia.com wrote:
> 
> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> I tested my installation with the following:
> 
> > library(lme)

Package lme is _not_ designed for R-1.0.0 (or later).
Try package nlme, available at CRAN.

You should also upgrade to R-1.0.1 (rw1001).

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Jun  4 17:38:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 4 Jun 2000 17:38:42 +0100 (BST)
Subject: [Rd] mle (PR#560)
In-Reply-To: <200006041450.QAA14887@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006041726480.6121-100000@auk.stats>

On Sun, 4 Jun 2000 pi.broberg@telia.com wrote:

> Full_Name: Per Broberg
> Version: 1.00
> OS: Windows 98
> Submission from: (NULL) (62.20.231.229)
> 
> 
> I tested my installation with the following:
> 
> > library(lme)

Where did you get that from?  lme has been obselete for a long time.

> Loading required package: nls 
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll":
>   LoadLibrary failure
> > data(Orthodont)
> > fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> > fm2 <- lme(distance ~ age + Sex, data = Orthodont, random = ~ 1)
> Error in .C("inner_perc_table", as.double(X), as.integer(unlist(grps)),  : 
>         C/Fortran function name not in load table
> 
> What is wrong? Could it be the path
> "C:\PROGRAM\R\RW1000/library/nls/libs/nls.dll"?

What I suspect has happened is that you have also installed an old
version of nls on top of the system's copy, and that does not work.
The message probably means that there are unsatisfied entry points, as
there will be with pre-2000 versions.  (No current package version
is older than 2000/1/29.)

My suggestion is that you wipe out your rw1000 installation and install a
fresh copy of rw1001 from CRAN, together with nlme.zip.  And throw away
anything else you have that is from before 2000/1/29.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun  4 19:05:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 4 Jun 2000 20:05:00 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > 
>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > .........
>> > > 
>> > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > 
>> > 
>> > Sorry I mixed something up in my report: In this compile I used the alpha
>> > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > it sometimes crashes). I will try once more now without dxml, may be this
>> > changes something, don't know if it gets used at all in the svd code.
>> > 
>> 
>> That was the reason. Now without DXML I pass the test without modifying
>> Eps:

> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.

> [...]

>> So may be it is better do disable dxml support by default in ./configure?

> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

> On the other hand, I think it would be worth omitting the check for
> -ldxml and -latlas except on appropriate platforms (whatever they
> are).

If we can give precise meaning to this, we can of course change the
configure time defaults accordingly.  Any suggestion?

On the other hand, if we turn too much OFF by default, we will need a
mechanism for developers to store their standard R configure arguments
somewhere so that they do not have to retype them all the time ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Jun  5 09:16:04 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Jun 2000 10:16:04 +0200 (CEST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
References: <Pine.OSF.4.21.0006022258240.8745-100000@zidsrv.sci.uni-klu.ac.at>
 <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <200006041805.UAA14395@aragorn.ci.tuwien.ac.at>
Message-ID: <14651.25028.7856.544781@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> Prof Brian D Ripley writes:
    >> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> 
    >>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
    >>> > 
    >>> > > 
    >>> > > I just tried the rsync version of R-1.1.0 on one of my alphas:
    >>> > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
    >>> > > .........
    >>> > > 
    >>> > > I compiled --whithout-dxml, so I'm not using any special
    >>> numeric library.
    >>> > > 
    >>> > 
    >>> > Sorry I mixed something up in my report: In this compile I used
    >>> the alpha > specific DXML library, in my rpms I omit it with
    >>> --without-dxml (because > it sometimes crashes). I will try once
    >>> more now without dxml, may be this > changes something, don't know
    >>> if it gets used at all in the svd code.
    >>> > 
    >>> 
    >>> That was the reason. Now without DXML I pass the test without
    >>> modifying Eps:

    >> Nevertheless, the tolerance was too low. Most machines (e.g. Linux,
    >> Solaris and Windows) are giving errors of 8 or 9 times the machine
    >> precision, and with dxml you got 10x (and this failed as Eps was
    >> exactly 10x). eigen's help page has tolerances of 60x and 1000x, and
    >> I've given svd's 100x.

    >> [...]

    >>> So may be it is better do disable dxml support by default in
    >>> ./configure?

    >> Well, what does dxml support do for you?  Making the errors 1x
    >> machine precision larger than without is hardly critical.  On the
    >> other hand, I am not convinced that these optimized blas operations
    >> are worthwhile for all but the most unusual uses of R.

    >> On the other hand, I think it would be worth omitting the check for
    >> -ldxml and -latlas except on appropriate platforms (whatever they
    >> are).

For Atlas, [3-6]86  *are* appropriate from what I've read on the  octave
mailing list about this, and these probably account for 80%+  (?). 
Actually some people there where giving loud praises about
speed improvements for octave using Atlas -- I think not only on Intel&clones.

    KH> If we can give precise meaning to this, we can of course change the
    KH> configure time defaults accordingly.  Any suggestion?

(one of us would have to read Atlas docu).
The improvements for R wouldn't be so big, for one reason because we do NOT
use BLAS consistently
Btw, (commenting to things of yesterday or so):
     BLAS is much more basic than solve(.); solve(.) is Linpack level 
     which is on top of BLAS).

    KH> On the other hand, if we turn too much OFF by default, we will need
    KH> a mechanism for developers to store their standard R configure
    KH> arguments somewhere so that they do not have to retype them all the
    KH> time ...

;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Mon Jun  5 11:25:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Mon, 5 Jun 2000 12:25:10 +0200 (MET DST)
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>

On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:

> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> 
> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > 
> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
> > > 
> > > > 
> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
> > > > .........
> > > > 
> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
> > > > 
> > > 
> > > Sorry I mixed something up in my report: In this compile I used the alpha
> > > specific DXML library, in my rpms I omit it with --without-dxml (because
> > > it sometimes crashes). I will try once more now without dxml, may be this
> > > changes something, don't know if it gets used at all in the svd code.
> > > 
> > 
> > That was the reason. Now without DXML I pass the test without modifying
> > Eps:
> 
> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
> Solaris and Windows) are giving errors of 8 or 9 times the 
> machine precision, and with dxml you got 10x (and this failed as
> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
> and I've given svd's 100x.
> 
> [...]
> 
> > So may be it is better do disable dxml support by default in ./configure?
> 
> Well, what does dxml support do for you?  Making the errors 1x machine
> precision larger than without is hardly critical.  On the other hand, I am
> not convinced that these optimized blas operations are worthwhile for all
> but the most unusual uses of R.

I did not make any performance analysis for dxml, of course it should be
better than plain BLAS or LAPACK. But I have it disabled in my setups for
long now, because I ran frequently into troubles with special LAPACK
routines. I remember the case where I used DSYEVX (selected symmetric
eigenvalues/vectors) in one of my development libraries and got
reproducable crashes, if R was linked with dxml, it was fine without. It
even crashed when I downloaded the dsyevx source from netlib and put it
into my library, R still jumped into DSYEVX from dxml and crashed. 

I guess I could gain much more performance if I could revert from using
gcc/g77 back to DEC cc/f77, but this seems impossible or at least very
difficult (R-1.1.0 compiles with DEC cc/f77 but has problems loading
libjpeg when accessing the X11 code, and crashes with memory allocation
problems in make check if called with --gui=none)


Albrecht


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

.....................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Jun  6 17:17:14 2000
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Jun 2000 18:17:14 +0200 (MET DST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
Message-ID: <200006061617.SAA01315@pubhealth.ku.dk>

Hi!

I tried to use compiled html on the following system:
NT4.0 SP6 (with _old_ IE3), R-1.0.1.

R > help(ls, chmhelp=TRUE)
... but nothing happens ...

>From the R Readme:
   "To make use of this you will need a recent version of 
   Windows or IE4 or later installed, or use the updater hhupd.exe 
   on CRAN at bin/windows/windows-NT/etc."

So I used the updater 'hhupd.exe'. After that (and rebooting, ...):

R > help(ls, chmhelp=TRUE)

Here R crashes (Dr. Watson)....

The same happens on another machine with IE3 _and_ Netscape 4.73.
After installing IE5 everything works fine.

Regards, 
Uwe Ligges


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Jun  6 18:04:02 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 6 Jun 2000 19:04:02 +0200
Subject: [Rd] make check on DU4 with R-1.1.0 snapshot
In-Reply-To: <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
References: <Pine.GSO.4.05.10006030612260.5027-100000@auk.stats>
 <Pine.OSF.4.21.0006051216460.25005-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <200006061704.TAA00374@aragorn.ci.tuwien.ac.at>

>>>>> Albrecht Gebhardt writes:

> On Sat, 3 Jun 2000, Prof Brian D Ripley wrote:
>> On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> 
>> > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > 
>> > > On Fri, 2 Jun 2000, Albrecht Gebhardt wrote:
>> > > 
>> > > > 
>> > > > I just tried the rsync version of R-1.1.0 on one of my alphas:
>> > > > It compiles without problems (gcc/g77 2.95.2, system is DU4.0E)
>> > > > .........
>> > > > 
>> > > > I compiled --whithout-dxml, so I'm not using any special numeric library.
>> > > > 
>> > > 
>> > > Sorry I mixed something up in my report: In this compile I used the alpha
>> > > specific DXML library, in my rpms I omit it with --without-dxml (because
>> > > it sometimes crashes). I will try once more now without dxml, may be this
>> > > changes something, don't know if it gets used at all in the svd code.
>> > > 
>> > 
>> > That was the reason. Now without DXML I pass the test without modifying
>> > Eps:
>> 
>> Nevertheless, the tolerance was too low. Most machines (e.g. Linux, 
>> Solaris and Windows) are giving errors of 8 or 9 times the 
>> machine precision, and with dxml you got 10x (and this failed as
>> Eps was exactly 10x). eigen's help page has tolerances of 60x and 1000x,
>> and I've given svd's 100x.
>> 
>> [...]
>> 
>> > So may be it is better do disable dxml support by default in ./configure?
>> 
>> Well, what does dxml support do for you?  Making the errors 1x machine
>> precision larger than without is hardly critical.  On the other hand, I am
>> not convinced that these optimized blas operations are worthwhile for all
>> but the most unusual uses of R.

> I did not make any performance analysis for dxml, of course it should
> be better than plain BLAS or LAPACK. But I have it disabled in my
> setups for long now, because I ran frequently into troubles with
> special LAPACK routines. I remember the case where I used DSYEVX
> (selected symmetric eigenvalues/vectors) in one of my development
> libraries and got reproducable crashes, if R was linked with dxml, it
> was fine without. It even crashed when I downloaded the dsyevx source
> from netlib and put it into my library, R still jumped into DSYEVX
> from dxml and crashed.

Is that a problem with dxml or with R?  If dxml is buggy and does not
gain performance, then surely we should disable it by default.

> I guess I could gain much more performance if I could revert from
> using gcc/g77 back to DEC cc/f77, but this seems impossible or at
> least very difficult (R-1.1.0 compiles with DEC cc/f77 but has
> problems loading libjpeg when accessing the X11 code, and crashes with
> memory allocation problems in make check if called with --gui=none)

Hmm ... any ideas what is going on there?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun  6 18:49:24 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Jun 2000 18:49:24 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <200006061617.SAA01315@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>

On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:

> Hi!
> 
> I tried to use compiled html on the following system:
> NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> 
> R > help(ls, chmhelp=TRUE)
> ... but nothing happens ...
> 
> >From the R Readme:
>    "To make use of this you will need a recent version of 
>    Windows or IE4 or later installed, or use the updater hhupd.exe 
>    on CRAN at bin/windows/windows-NT/etc."
> 
> So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> 
> R > help(ls, chmhelp=TRUE)
> 
> Here R crashes (Dr. Watson)....
> 
> The same happens on another machine with IE3 _and_ Netscape 4.73.
> After installing IE5 everything works fine.

Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
of Windows', surely.

Not an R bug, surely?

> 
> Regards, 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 07:31:56 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 08:31:56 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006061847550.8745-100000@auk.stats>
Message-ID: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> 
> > Hi!
> >
> > I tried to use compiled html on the following system:
> > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> >
> > R > help(ls, chmhelp=TRUE)
> > ... but nothing happens ...
> >
> > >From the R Readme:
> >    "To make use of this you will need a recent version of
> >    Windows or IE4 or later installed, or use the updater hhupd.exe
> >    on CRAN at bin/windows/windows-NT/etc."
> >
> > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> >
> > R > help(ls, chmhelp=TRUE)
> >
> > Here R crashes (Dr. Watson)....
> >
> > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > After installing IE5 everything works fine.
> 
> Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> of Windows', surely.
>
> Not an R bug, surely?


But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
  R > help(ls, chmhelp=TRUE)

Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Maybe this crash of RGui is not really an R bug (?), but it should be
mentioned in the readme, I think.

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun  7 07:38:53 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Jun 2000 07:38:53 +0100 (BST)
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
In-Reply-To: <393DEC5C.E23DEBDB@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>

On Wed, 7 Jun 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> > 
> > On Tue, 6 Jun 2000 ligges@statistik.uni-dortmund.de wrote:
> > 
> > > Hi!
> > >
> > > I tried to use compiled html on the following system:
> > > NT4.0 SP6 (with _old_ IE3), R-1.0.1.
> > >
> > > R > help(ls, chmhelp=TRUE)
> > > ... but nothing happens ...
> > >
> > > >From the R Readme:
> > >    "To make use of this you will need a recent version of
> > >    Windows or IE4 or later installed, or use the updater hhupd.exe
> > >    on CRAN at bin/windows/windows-NT/etc."
> > >
> > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > >
> > > R > help(ls, chmhelp=TRUE)
> > >
> > > Here R crashes (Dr. Watson)....
> > >
> > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > After installing IE5 everything works fine.
> > 
> > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > of Windows', surely.
> >
> > Not an R bug, surely?
> 
> 
> But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
>   R > help(ls, chmhelp=TRUE)

Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?

> Or do I misunderstand the Readme?  If not, it is a "bug" of the readme.

Microsoft claim that the updater will work on all versions of Windows.
You understood aright, but it seems a false claim on your system.

> Maybe this crash of RGui is not really an R bug (?), but it should be
> mentioned in the readme, I think.

I am reluctant to document Microsoft's errors in the README!  I'll
add  `according to Microsoft'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun  7 06:15:03 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Jun 2000 07:15:03 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006070515.HAA03575@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem.

Directory:  Windows

none

Directory:  incoming

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 562 *
Subject: crash after help(..., chmhelp=TRUE)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Tue, 06 Jun 2000 18:18:15 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jun  7 10:16:02 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 07 Jun 2000 11:16:02 +0200
Subject: [Rd] crash after help(..., chmhelp=TRUE) (PR#562)
References: <Pine.GSO.4.05.10006070735300.1398-100000@auk.stats>
Message-ID: <393E12D2.C09BED4A@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

[....]
> > > > So I used the updater 'hhupd.exe'. After that (and rebooting, ...):
> > > >
> > > > R > help(ls, chmhelp=TRUE)
> > > >
> > > > Here R crashes (Dr. Watson)....
> > > >
> > > > The same happens on another machine with IE3 _and_ Netscape 4.73.
> > > > After installing IE5 everything works fine.
> > >
> > > Looks like a MicroSoft versioning problem....  With NT4.0Sp5 the updater
> > > works. I doubt if is needed at all for NT4.0Sp6, which is `a recent version
> > > of Windows', surely.

Hm.
I tested the same thing on a NT4.0Sp5 now: R crashes here also (after
using 'hhupd.exe').
So this is no problem with SP6 only! 


Note: I have used german versions of NT4, Sp5 or 6, IE3 and 'hhupd.exe'.

So is there anyone having installed english versions of these (and not
IE4 or 5)? 
Is it possible to reproduce the crash on such a system?

> > > Not an R bug, surely?
> >
> >
> > But without using 'hhupd.exe' on NT4.0Sp6, really nothing happens after
> >   R > help(ls, chmhelp=TRUE)
> 
> Does here, but then installing NT4SP6 put IE5 on. How did you avoid that?
[.....]

I took a version of SP6 without IE5-update.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Wed Jun  7 11:04:51 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Wed, 07 Jun 2000 12:04:51 +0200
Subject: [Rd] pointer to emacs-lisp
Message-ID: <3.0.5.32.20000607120451.00973100@mail.wsl.ch>

Hi everyone,

Sorry for misusing this list to pose two lisp questions:

1)
Do you have any information on how to join an (x)emacs related news group?

2)  in Xemacs version 20.4
In .emacs I am trying to define a function like

(defun chcom
       (interactive "p")
       (string-rectangle (region-beginning) (region-end) "## "))

but on using it I get the error 

"wrong type argument commandp, chcom".
What is wrong here?

3)
I am having difficulties evaluating lisp expressions in Xemacs ver 20.4
On WinNT I am using Xwindows to work on Solaris 5.5.1.
ESC-ESC will not open a lisp evauation buffer.

Thanks for any help.

--Christian
Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Jun  7 22:06:24 2000
From: albrecht.gebhardt@uni-klu.ac.at (albrecht.gebhardt@uni-klu.ac.at)
Date: Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)
Subject: [Rd] "clipping error in x11()" (PR#564)
Message-ID: <200006072106.XAA13880@pubhealth.ku.dk>


There seems to be an error in the X11 display code:

try:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

it gives a big "V" as expexted. Now zoom in using small xlim and ylim:

plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
     xlim=c(-5,5),ylim=c(0,5))
points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))

gives no "V" as expected but kind of a "M".

It occures not only on Digital Unix as indicated below but also on
Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
egcs 2.91.57 on SuSE 5.3.

Interestingly the plots are correct with postscript().

The error does not occur with rwin 1001.


BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
in my tripack package.


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'


--please do not edit the information below--

Version:
 platform = alpha-dec-osf4.0
 arch = alpha
 os = osf4.0
 system = alpha, osf4.0
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 22:40:43 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Jun 2000 23:40:43 +0200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: albrecht.gebhardt@uni-klu.ac.at's message of "Wed, 7 Jun 2000 23:06:24 +0200 (MET DST)"
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <x2r9a9qiec.fsf@blueberry.kubism.ku.dk>

albrecht.gebhardt@uni-klu.ac.at writes:

> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".

Seems to be gone in the development sources. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun  7 23:08:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Jun 2000 00:08:55 +0200
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <x2og5dqh3c.fsf@blueberry.kubism.ku.dk>


The planned release of R 1.1.0 will be next Thursday. The development
version is going into feature freeze tomorrow, meaning that we'll only
do testing and fix simple bugs during the next week.

Those of you who prefer to find bugs before releases instead of
afterwards may want to try it out and tell us what crawls out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun  8 17:54:48 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Jun 2000 12:54:48 -0400
Subject: [Rd] require
Message-ID: <393FCFD8.376F067@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 7, 2000)

require() returns NULL rather than TRUE as it previously did if a library is
already attached.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 18:35:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 18:35:47 +0100 (BST)
Subject: [Rd] require
In-Reply-To: <393FCFD8.376F067@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006081834180.12184-100000@auk.stats>

On Thu, 8 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 7, 2000)
> 
> require() returns NULL rather than TRUE as it previously did if a library is
> already attached.

Thanks: it does return TRUE again now (dangling else problem).

It was a side effect of provides() becoming deprecated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cferna3@uic.edu  Thu Jun  8 19:54:19 2000
From: cferna3@uic.edu (Cheryl J Fernandes)
Date: Thu, 8 Jun 2000 13:54:19 -0500 (CDT)
Subject: [Rd] creating models from "Objects" in R's environment
Message-ID: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>

Hi
  I'm trying to create Tree based models in R using the downloadable
package called "tree".

  It is mentioned in the R documentation that Objects are created and 
stored in the R environment by name.

So I have saved all the objects formed during the creation of a tree model
using the R command:

dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");

Here's a snapshot of the output file outputTree.txt:


"hc" <-
structure(list(merge = structure(c(-1, -10, -12, -14, -18, -20, 
-22, -24, -26, -28, -30, -33, -36, -38, -40, -42, -44, -49, -52, 
-54, -56, -58, -60, -62, -64, -66, -68, -72, -74, -77, -80, -84, 
-88, -90, -93, -3, -4, -5, -46, -51, -95, -16, -35, -71, -76, 
80, 76, 83, 81, 85, 82, 89, 86, 88, 91, 93), .Dim = c(94, 2)), 
    height = c(0.00099999999999989, 0.00099999999999989,
0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.00099999999999989, 0.00099999999999989, 0.00099999999999989, 
    0.0389999999999997, 0.0539999999999998, 0.0943398113205659
    ), order = c(79, 82, 83, 84, 85, 77, 78, 80, 81, 86, 92, 
    95, 93, 94, 90, 91, 87, 88, 89, 56, 57, 58, 59, 60, 61, 62, 
    34, 24, 25, 26, 27, 32, 28, 29), labels = c("1", "2", "3", 
    "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", 
  "85", "86", "87", "88", "89", "90", "91", "92", "93", "94", 
    "95"), method = "complete", call = hclust(d = dist(vegtest), 
        method = "complete"), dist.method = "euclidean"), .Names =
c("merge", 
	"height", "order", "labels", "method", "call", "dist.method"),
class = "hclust")
	"last.warning" <-
	structure(list("NAs introduced by coercion" = NULL), .Names = "NAs
introduced by 	        

coercion")
	"v.tr" <-
	structure(list(frame = structure(list(var = structure(c(2, 1, 
	2, 2, 2, 1, 1, 2, 1, 1, 2, 1, 2, 2, 1, 1, 2, 1, 1), .Label =
c("<leaf>", 
	"Veg"), class = "factor"), n = c(95, 7, 88, 34, 22, 5, 17, 12, 
	5, 7, 54, 5, 49, 23, 9, 14, 26, 7, 19), dev =
c(0.00174753684210526, 
.
..
....


After creating the models, one needs to analyse them with some new data.
Hence, I am now trying to analyze this model with a new set of data.

Is it possible in R to recreate the models by reading from the "Object"
output file.
ie By reading from the above displayed file, can we recreate the tree
model ??

Any help/hints would be highly appreciated.

Thanks much 
Cheryl Fernandes

Cheryl Fernandes
Laboratory of Advanced Computing 
University of Illinois at Chicago.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun  8 20:32:46 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Jun 2000 20:32:46 +0100 (BST)
Subject: [Rd] creating models from "Objects" in R's environment
In-Reply-To: <Pine.GSO.4.10.10006081350200.11509-100000@icarus.cc.uic.edu>
Message-ID: <Pine.GSO.4.05.10006082028520.27560-100000@auk.stats>

On Thu, 8 Jun 2000, Cheryl J Fernandes wrote:

> Hi
>   I'm trying to create Tree based models in R using the downloadable
> package called "tree".
> 
>   It is mentioned in the R documentation that Objects are created and 
> stored in the R environment by name.
> 
> So I have saved all the objects formed during the creation of a tree model
> using the R command:
> 
> dump(objects(),"Z:\\Project\\Exammples\\Output\\outputTree.txt");
> 
[..]

> Here's a snapshot of the output file outputTree.txt:

> After creating the models, one needs to analyse them with some new data.
> Hence, I am now trying to analyze this model with a new set of data.
> 
> Is it possible in R to recreate the models by reading from the "Object"
> output file.

Eveything is possible in R: you can program a Turing machine in it
but you might need unlimited memory.

> ie By reading from the above displayed file, can we recreate the tree
> model ??

Yes, but to fit the *formula* to a new dataset (hence a *new* model) you
will need to use update.

I suggest you use save() not dump() to store objects.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Thu Jun  8 21:58:34 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Fri, 9 Jun 2000 08:58:34 +1200
Subject: [Rd] "clipping error in x11()" (PR#564)
In-Reply-To: <200006072106.XAA13880@pubhealth.ku.dk>; from albrecht.gebhardt@uni-klu.ac.at on Wed, Jun 07, 2000 at 11:06:24PM +0200
References: <200006072106.XAA13880@pubhealth.ku.dk>
Message-ID: <20000609085834.A5928@stat1.stat.auckland.ac.nz>

On Wed, Jun 07, 2000 at 11:06:24PM +0200, albrecht.gebhardt@uni-klu.ac.at wrote:
> 
> There seems to be an error in the X11 display code:
> 
> try:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l")
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> it gives a big "V" as expexted. Now zoom in using small xlim and ylim:
> 
> plot(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000),type="l",
>      xlim=c(-5,5),ylim=c(0,5))
> points(c(-30000,-1,0,1,30000),c(30000,1,0,1,30000))
> 
> gives no "V" as expected but kind of a "M".
> 
> It occures not only on Digital Unix as indicated below but also on
> Linux (SuSE 5.3 as well as SuSE 6.4), only the angles in the "M"-like display
> are sligthly different. Compilers where: gcc 2.95.2 on Tru64 and SuSE 6.4,
> egcs 2.91.57 on SuSE 5.3.
> 
> Interestingly the plots are correct with postscript().
> 
> The error does not occur with rwin 1001.
> 
> 
> BTW: This is the error which "destroys" sometimes the output of plot.voronoi()
> in my tripack package.

Paul Murrell and I recently made some changes to the clipping code
which seems to have fixed this (and other) problems.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Fri Jun  9 09:17:05 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090817.KAA29023@pubhealth.ku.dk>

Hi,

This may just be an inconsistency between terminal drivers, rather
than a proper bug.

If the main title of a plot is too wide to all fit on the plot, the
X11 driver prints as much of the title as it can, but the postscript
driver totally ignores the title.

Here's a simple example:

% R
> plot(runif(1000), main="a long xxxxxxxxxxxx title") 
> dev.print(file="test.ps")

On my setup, I needed about 110 x's in the title to reproduce this
problem.  This may seem an unlikely long title, but I found the
problem when using much shorter titles on multiple figures (created
using par(mfrow=c(2,3)) for example).

Perhaps the postscript driver could give a warning if the title is
too long to be printed?  

Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
 - on line 48:
%%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   ../../../unix/devPS.c
the pathname to devPS.c should be: ../../../main/devPS.c


Cheers,

Stephen

> version
         _               
platform alpha-dec-osf4.0
arch     alpha           
os       osf4.0          
system   alpha, osf4.0   
status                   
major    1               
minor    0.1             
year     2000            
month    April           
day      14              
language R               

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 10:37:22 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 10:37:22 +0100 (BST)
Subject: [Rd] Postscript device ignores title if it is too long. (PR#565)
Message-ID: <200006090937.KAA25854@toucan.stats.ox.ac.uk>


> From: stephen@anc.ed.ac.uk
> Date: Fri, 9 Jun 2000 10:17:05 +0200 (MET DST)
> 
> Also, I found a small typo in R-1.0.1/src/library/base/man/postscript.Rd
>  - on line 48:
> %%>>> REAL DOC in SOURCE:    ../../../main/devices.c  &   
../../../unix/devPS.c
> the pathname to devPS.c should be: ../../../main/devPS.c

Already corrected, thank you.

(More on the rest later).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun  9 12:12:37 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 9 Jun 2000 12:12:37 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
Message-ID: <200006091112.MAA04174@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 08 Jun 2000 00:08:55 +0200
> 
> The planned release of R 1.1.0 will be next Thursday. The development
> version is going into feature freeze tomorrow, meaning that we'll only
> do testing and fix simple bugs during the next week.
> 
> Those of you who prefer to find bugs before releases instead of
> afterwards may want to try it out and tell us what crawls out.

For anyone wanting to try the release-candidate Windows version,
it is up at

	http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

Warning: this is cross-compiled and so lacks a few things including
CHM / Windows help and the bitmap DLL.  The release version will be
natively compiled.

In particular, we would be grateful if anyone can try it on a Pentium
I/II/III on Win2000:  we know there are problems on Athlon cpus on
Win2000.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Fri Jun  9 15:33:11 2000
From: kjetil.kjernsmo@astro.uio.no (kjetil.kjernsmo@astro.uio.no)
Date: Fri, 9 Jun 2000 16:33:11 +0200 (MET DST)
Subject: [Rd] Disappearing values (PR#551)
Message-ID: <200006091433.QAA05945@pubhealth.ku.dk>

Dear all,

Uwe e-mailed me yesterday about the problems some time ago. I had hoped
someone would have a look at our computers, but due to some unfortunate
circumstances, it hasn't happened. However, it seems unlikely that it is
connected to a specific piece of hardware. It could be an
architecture-dependent problem though. I also had a word with those who
did the installation of R, and they had some problems when tuning it for
alphaev6, but it all went smoothly when tuning for alphaev56, and that is
the build I'm running. This is basically the stuff I sent to Uwe
yesterday. 

I have been testing it on three different machines:
alnair, a XP1000 with a 500MHz alphaev6 processor and 619 MB RAM
rukbat, a PWS500au with a 500MHz alphaev56 processor with 238 MB RAM
mirfak, a DEC255/233 with a 233MHz (?) alphaev4 (?) processor with 245MB
(RAM is according to top). All show the same problems consistently. 
I'm not using the match.arg()-approach anymore, BTW, I have moved on to
some object-oriented stuff. 

However, some apparently related (?) problem occurs. Yesterday, I started
working on some simulations I have done (with R of course! :-) ). I did
exactly the same operations on rukbat and mirfak (using ESS-elsewhere
while sitting on alnair), starting with the same calls, vsize=80M,
nsize=800k, no-restore. I loaded a 58MB file with load, and there are a
few variables with arrays of htest-objects. Then, I did 
as.vector(sapply(chisq5M11000, function(x) x$statistic))
to get a vector of the test statistics. Now, occasionally, it prints a
nice vector with all the values intact. Occasionally, one of the entries
are NULL, and then it prints a list, e.g.
[[892]]
X-squared 
 1933.637 

[[893]]
NULL

[[894]]
X-squared 
 1741.416 

The funny thing is that when I did this sapply thing on mirfak and rukbat,
it happened on at exactly the same place on the two machines. First,
mirfak would produce a vector then rukbat would produce a vector, mirfak
would give a list where element # 238 (if I remember correctly) was NULL,
rukbat would produce a list with element #238 NULL, both would produce a
vector again, both would produce a list with element #602 NULL, etc... 

This is pretty much what I've got now... :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun  9 19:29:34 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Jun 2000 14:29:34 -0400
Subject: [Rd] w0 in legend
Message-ID: <3941378E.F64657EA@bank-banque-canada.ca>

In Version 1.1.0 Under development (unstable) (June 8, 2000)
there seems to be a problem with an internal variable w0 in legend that
generates the following new error:

Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
 Object "w0" not found
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jun  9 20:08:07 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Jun 2000 21:08:07 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Paul Gilbert's message of "Fri, 09 Jun 2000 14:29:34 -0400"
References: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >

Looks like it isn't getting set in the nx==2 case. But what is the
correct value here, 0?

    if (nx == 2) {
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top <- y[2]
        w <- diff(x)
        h <- diff(y)
        x <- mean(x)
        y <- mean(y)
        if (missing(xjust)) 
            xjust <- 0.5
        if (missing(yjust)) 
            yjust <- 0.5
    }
    else {
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if (!missing(fill)) 
            w0 <- w0 + dx.fill
        if (has.pch && !merge) 
            w0 <- w0 + dx.pch
        if (do.lines) 
            w0 <- w0 + (2 + x.off) * xchar
        w <- ncol * w0 + 0.5 * xchar
        left <- x - xjust * w
        top <- y + (1 - yjust) * h
    }


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:21:14 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:21:14 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <3941378E.F64657EA@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>

 
  Ooops.  This is my fault.
  When extending legend() to do multiple columns, I neglected to do
anything about the case where the user specified both sides of the box
(which is actually an easy case).

  Something like the following patch should take care of it, although I
don't know if the version of legend in the unstable package is exactly the
same as what I have here.  It's pretty straightforward, though.

*** legend.R.old Tue Jun  6 18:31:11 2000
--- legend.R	 Fri Jun  9 16:08:55 2000
***************
*** 95,100 ****
--- 95,101 ----
          top  <- y[2]
          w <- diff(x)# width
          h <- diff(y)# height
+         w0 <- w/ncol # column width
  
  	x <- mean(x)
  	y <- mean(y)


  Also, here's a set of examples that tests the full box specification,
with one or two columns.  This could go in the examples for legend() but
need not (but if it had been there running the examples would have found
the bug!)

set.seed(1001)
x1 <- runif(30)
x2 <- rnorm(30,mean=0.5)
x3 <- rnorm(30,mean=0.5,sd=0.05)
matplot(1:30,cbind(x1,x2,x3),col=1:3,pch=1:3)
legstr <- c("foo","bar","bletch")
legend(c(20,par("usr")[2]),c(2.0,par("usr")[4]),
       legstr,
       bg="gray",
       col=1:3,
       pch=1:3)
legend(c(20,par("usr")[2]),c(1.6,2.0),
       legstr,
       bg="lightblue",
       col=1:3,
       pch=1:3,
       ncol=2)


On Fri, 9 Jun 2000, Paul Gilbert wrote:

> In Version 1.1.0 Under development (unstable) (June 8, 2000)
> there seems to be a problem with an internal variable w0 in legend that
> generates the following new error:
> 
> Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
>  Object "w0" not found
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Jun  9 21:26:10 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 9 Jun 2000 16:26:10 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2pupqr7u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006091624400.27056-100000@bolker.zoo.ufl.edu>

On 9 Jun 2000, Peter Dalgaard BSA wrote:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > In Version 1.1.0 Under development (unstable) (June 8, 2000)
> > there seems to be a problem with an internal variable w0 in legend that
> > generates the following new error:
> > 
> > Error in legend((par()$usr)[1:2], (par()$usr)[3:4], Legend, lty = lty,  :
> >  Object "w0" not found
> > >
> 
> Looks like it isn't getting set in the nx==2 case. But what is the
> correct value here, 0?

  No, w/ncol; w0 is the width of a single column within the legend.  If
n==1 it reduces to w.
  Again, sorry about the bug.

> 
>     if (nx == 2) {
>         x <- sort(x)
>         y <- sort(y)
>         left <- x[1]
>         top <- y[2]
>         w <- diff(x)

          w0 <- w/ncol

>         h <- diff(y)
>         x <- mean(x)
 [snip]

--
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Jun 10 00:13:52 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jun 2000 01:13:52 +0200
Subject: [Rd] w0 in legend
In-Reply-To: Ben Bolker's message of "Fri, 9 Jun 2000 16:21:14 -0400 (EDT)"
References: <Pine.LNX.4.10.10006091500330.27003-100000@bolker.zoo.ufl.edu>
Message-ID: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>           w <- diff(x)# width
>           h <- diff(y)# height
> +         w0 <- w/ncol # column width
>   
>   	x <- mean(x)
>   	y <- mean(y)

Thanks, committed. 

>   Also, here's a set of examples that tests the full box specification,
> with one or two columns.  This could go in the examples for legend() but
> need not (but if it had been there running the examples would have found
> the bug!)

As a principle, we don't add tests or examples during a feature
freeze. Yours looks harmless, but there have been cases where a new
example caused "make check" to fail (on someone else's machine), and
we have a strict policy of not committing changes without running
"make check" at this stage. It's being paranoid, but simple rules are
easier to follow, and I think it is important for the general
stability to avoid disturbing the release process at this stage. We
can put your examples in the 1.2 tree when we get to that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Sat Jun 10 18:05:46 2000
From: kjetilh@umsanet.edu.bo (halvorsen)
Date: Sat, 10 Jun 2000 13:05:46 -0400
Subject: [Rd] R 1.1.0 going into feature freeze
References: <200006091112.MAA04174@toucan.stats.ox.ac.uk>
Message-ID: <39427569.26DA3E8A@umsanet.edu.bo>

In rw1001 the html help file  chisq.test.html is missing.

Kjetil Halvorsen

Prof Brian Ripley wrote:

> > From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> > Date: 08 Jun 2000 00:08:55 +0200
> >
> > The planned release of R 1.1.0 will be next Thursday. The development
> > version is going into feature freeze tomorrow, meaning that we'll only
> > do testing and fix simple bugs during the next week.
> >
> > Those of you who prefer to find bugs before releases instead of
> > afterwards may want to try it out and tell us what crawls out.
>
> For anyone wanting to try the release-candidate Windows version,
> it is up at
>
>         http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
>
> Warning: this is cross-compiled and so lacks a few things including
> CHM / Windows help and the bitmap DLL.  The release version will be
> natively compiled.
>
> In particular, we would be grateful if anyone can try it on a Pentium
> I/II/III on Win2000:  we know there are problems on Athlon cpus on
> Win2000.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:17:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:17:48 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <39427569.26DA3E8A@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>

On Sat, 10 Jun 2000, halvorsen wrote:

> In rw1001 the html help file  chisq.test.html is missing.

That I believe to be an incorrect report, and I also do not see the
connection with the subject.  (Bug reports on R 1.0.1 should go to 
R-bugs, still.)

The file *is* there on the version of rw1001 I downloaded and in the
pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
to have loaded that to get the help, or specify it explicitly in the call
to help.

I suspect the confusion arises because someone decided to make chisq.test
an autoload, and so the function appears to be available from base when it
is not really:

> ?chisq.test
Error in help(chisq.test) : No documentation for `chisq.test'
> junk <- chisq.test # loads package ctest silently
> ?chisq.test
chisq.test               package:ctest               R Documentation
 ...

If this is not what happens on your version of rw1001, please try
re-installing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 10 18:26:19 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 10 Jun 2000 18:26:19 +0100 (BST)
Subject: [Rd] R 1.1.0 going into feature freeze
In-Reply-To: <Pine.GSO.4.05.10006101804450.18950-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10006101823500.18950-100000@auk.stats>

On Sat, 10 Jun 2000, Prof Brian D Ripley wrote:

> On Sat, 10 Jun 2000, halvorsen wrote:
> 
> > In rw1001 the html help file  chisq.test.html is missing.
> 
> That I believe to be an incorrect report, and I also do not see the
> connection with the subject.  (Bug reports on R 1.0.1 should go to 
> R-bugs, still.)
> 
> The file *is* there on the version of rw1001 I downloaded and in the
> pre-test of rw1010 I put up. chisq.test is in package ctest, and you have
> to have loaded that to get the help, or specify it explicitly in the call
> to help.

Just to add: if you use help.start() or HTML help from the file menu
the file *is* in the index list and *is* found by the search engine,
as both those routes cover all packages installed in rw1001/library.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jun 11 19:36:22 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Sun, 11 Jun 2000 14:36:22 -0400 (EDT)
Subject: [Rd] w0 in legend
In-Reply-To: <x2aegu5txr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.10.10006111435440.28671-100000@bolker.zoo.ufl.edu>

On 10 Jun 2000, Peter Dalgaard BSA wrote:
> 
> As a principle, we don't add tests or examples during a feature
> freeze. Yours looks harmless, but there have been cases where a new
> example caused "make check" to fail (on someone else's machine), and
> we have a strict policy of not committing changes without running
> "make check" at this stage. It's being paranoid, but simple rules are
> easier to follow, and I think it is important for the general
> stability to avoid disturbing the release process at this stage. We
> can put your examples in the 1.2 tree when we get to that.

  Sounds entirely sensible -- particularly given my culpability in
introducing a new bug recently ...

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From george@cpqam.fiocruz.br  Mon Jun 12 12:10:29 2000
From: george@cpqam.fiocruz.br (george@cpqam.fiocruz.br)
Date: Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121110.NAA15979@pubhealth.ku.dk>

I try load ctest, and don't have sucess

> library(ctest)
Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
  /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f

What I must to do

I will waiting  your answer

George Diniz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 12:53:14 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 13:53:14 +0200
Subject: [Rd] ctest not works (PR#567)
In-Reply-To: george@cpqam.fiocruz.br's message of "Mon, 12 Jun 2000 13:10:29 +0200 (MET DST)"
References: <200006121110.NAA15979@pubhealth.ku.dk>
Message-ID: <x24s6z6rpx.fsf@blueberry.kubism.ku.dk>

george@cpqam.fiocruz.br writes:

> I try load ctest, and don't have sucess
> 
> > library(ctest)
> Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
>   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> 
> What I must to do
> 
> I will waiting  your answer

First of all tell us what system you are on. With that information,
all we can say is that that is not what is supposed to happen...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jun 12 12:57:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 12 Jun 2000 12:57:35 +0100 (BST)
Subject: [Rd] ctest not works (PR#567)
Message-ID: <200006121157.MAA00504@toucan.stats.ox.ac.uk>


> To: george@cpqam.fiocruz.br
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 12 Jun 2000 13:53:14 +0200
> 
> george@cpqam.fiocruz.br writes:
> 
> > I try load ctest, and don't have sucess
> > 
> > > library(ctest)
> > Error in dyn.load(x, as.logical(local), as.logical(now)) : unable to
> > load shared library "/usr/local/lib/R/library/ctest/libs/ctest.so":
> >   /usr/local/lib/R/library/ctest/libs/ctest.so: undefined symbol: f
> > 
> > What I must to do
> > 
> > I will waiting  your answer
> 
> First of all tell us what system you are on. With that information,
> all we can say is that that is not what is supposed to happen...

True, but we can tell you:

This is Linux/Unix not Windows (and not HP either).

That silly symbol name suggests that this is the Fortran bug in RH6.2
we have met before.  If so, the solution is to compile with gcc-2.95.2.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 17:08:10 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 12:08:10 -0400
Subject: [Rd] Depends: R(>= ?)
Message-ID: <39450AEA.A65F25E8@bank-banque-canada.ca>

I am just working through my set of tests for R 1.1.0 and everything
seems to be going fairly well other than a couple of bugs already
reported and fixed.

I previously specified Depends: R(>= 1.0.1). I have been making small
changes to my own code and since I have been doing this with R 1.0.1  I
am fairly sure everything still works with it, but I don't intend to
test this as carefully as R 1.1.0. Should I change "Depends" to indicate
1.1.0?

Now I realize what the "safest" answer would be, but I can see this will
be an ongoing problem and the implication of changing each time is that
my packages always depend on the latest version of R. I can see the
posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
see any possibility for testing every version since R 1.0.1. Should
"Depends" indicate what is "known to be at least necessary" or should it
be something stronger than that?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Jun 12 18:41:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Jun 2000 19:41:33 +0200
Subject: [Rd] Depends: R(>= ?)
In-Reply-To: Paul Gilbert's message of "Mon, 12 Jun 2000 12:08:10 -0400"
References: <39450AEA.A65F25E8@bank-banque-canada.ca>
Message-ID: <x2u2eyer02.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> I am just working through my set of tests for R 1.1.0 and everything
> seems to be going fairly well other than a couple of bugs already
> reported and fixed.
> 
> I previously specified Depends: R(>= 1.0.1). I have been making small
> changes to my own code and since I have been doing this with R 1.0.1  I
> am fairly sure everything still works with it, but I don't intend to
> test this as carefully as R 1.1.0. Should I change "Depends" to indicate
> 1.1.0?
> 
> Now I realize what the "safest" answer would be, but I can see this will
> be an ongoing problem and the implication of changing each time is that
> my packages always depend on the latest version of R. I can see the
> posssibilty of testing 1.0.1 and 1.1.0, but when R 1.99 arrives I don't
> see any possibility for testing every version since R 1.0.1. Should
> "Depends" indicate what is "known to be at least necessary" or should it
> be something stronger than that?

Hmm. We try pretty hard not to change the API and otherwise break
package code after 1.0. I think it should be reasonable if you took a
laid-back attitude and assume that things work as they used to unless
you knowingly access new features. If things turn out to be broken
with earlier versions, then blame the core team and update the version
number. If you do use new features and try to blame us, we'll blame
you back...

It would of course be nice if you kept a version of 1.0.1 around and
checked against it, but checking all intermediate versions would be
overdoing it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 12 19:33:32 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 12 Jun 2000 14:33:32 -0400
Subject: [Rd] build buglet
Message-ID: <39452CFB.B218A583@bank-banque-canada.ca>

I use
     R CMD Rdindex man/*.Rd >INDEX
in my makefile to generate an INDEX. When I then use
     R CMD build whatever
the newindex seems to be in a slightly different order, resulting in a
* checking whether index is up-to-date ... NO
(because the result of diff is not empty) and a suggestion to use
--force.
However, --force results in the INDEX in my source directory being
re-written, which means that I can't use it as a dependency for
installing because it is always out of date after I build. But if I
don't use INDEX as a dependency  then my own help system may not be
up-to-date, which will be a problem when I'm working on documentation.

However, if I don't use --force I will always get warnings which I will
tend to ignore, so I won't notice more serious warnings. Is there some
way to guaranty the same order from these two ways for generating INDEX?

Paul Gilbert

(P.S. - I'm not an expert at makefiles but if anyone is interested I am
willing to share a fairly good makefile which I use for maintaining two
packages and two bundles with several packages in them.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 12 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 12 Jun 2000 21:19:13 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39452CFB.B218A583@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>

On Mon, 12 Jun 2000, Paul Gilbert wrote:

> I use
>      R CMD Rdindex man/*.Rd >INDEX
> in my makefile to generate an INDEX. When I then use
>      R CMD build whatever
> the newindex seems to be in a slightly different order, resulting in a
> * checking whether index is up-to-date ... NO
> (because the result of diff is not empty) and a suggestion to use
> --force.
> However, --force results in the INDEX in my source directory being
> re-written, which means that I can't use it as a dependency for
> installing because it is always out of date after I build. But if I
> don't use INDEX as a dependency  then my own help system may not be
> up-to-date, which will be a problem when I'm working on documentation.
> 
> However, if I don't use --force I will always get warnings which I will
> tend to ignore, so I won't notice more serious warnings. Is there some
> way to guaranty the same order from these two ways for generating INDEX?

Set the locale to C?  What are the differences: are they related to sort
orders?  That's the only problem I have seen. (On Solaris en_UK sorts
AaBb... not AB..ab....)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jim.lemon@uts.edu.au  Tue Jun 13 04:17:40 2000
From: jim.lemon@uts.edu.au (jim.lemon@uts.edu.au)
Date: Tue, 13 Jun 2000 05:17:40 +0200 (MET DST)
Subject: [Rd] problem with aperm? (PR#568)
Message-ID: <200006130317.FAA19080@pubhealth.ku.dk>

R version 1.0.1
OS RedHat Linux 6.1

In attempting to test for numeric vectors in a data frame, I tried:

apply(dataframe,2,is.numeric)

and found that it returned FALSE for all vectors whether they were
numeric or not.  I tracked this to the fact that as.array() was
converting the data frame to character vectors, and thought I could
solve it by using array(), which preserved the mode of the columns. 
However, I then got an error from aperm():

Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
must be a vector

even though the second argument tested as a vector.  This happened both
within the apply() function and calling aperm() separately, even if I
explicitly used a numeric vector for the second argument.  I then had a
look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
to give up after trying to work out what CADR and SEXP were.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 07:41:41 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 07:41:41 +0100 (BST)
Subject: [Rd] problem with aperm? (PR#568)
In-Reply-To: <200006130317.FAA19080@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006130730410.12267-100000@auk.stats>

On Tue, 13 Jun 2000 jim.lemon@uts.edu.au wrote:

> R version 1.0.1
> OS RedHat Linux 6.1
> 
> In attempting to test for numeric vectors in a data frame, I tried:
> 
> apply(dataframe,2,is.numeric)
> 
> and found that it returned FALSE for all vectors whether they were
> numeric or not.  I tracked this to the fact that as.array() was
> converting the data frame to character vectors, and thought I could
> solve it by using array(), which preserved the mode of the columns. 
> However, I then got an error from aperm():

What? arrays are only of one mode. Try

sapply(dataframe, is.numeric)

for what you wanted.  For example,

library(MASS)
data(Cars93)
sapply(Cars93, is.numeric)
      Manufacturer              Model               Type          Min.Price 
             FALSE              FALSE              FALSE               TRUE 
             Price          Max.Price           MPG.city        MPG.highway 
              TRUE               TRUE               TRUE               TRUE 
...


The help page for array says

Arguments:

       x: the array to be used.

and a dataframe is *not* an array (or a matrix).

What did you run to get the following?

> Error in aperm(X, c(s.call, s.ans)) : aperm: invalid second argument,
> must be a vector
> 
> even though the second argument tested as a vector.  This happened both
> within the apply() function and calling aperm() separately, even if I
> explicitly used a numeric vector for the second argument.  I then had a
> look at the code for do_aperm(), but as I am unfamiliar with Scheme, had
> to give up after trying to work out what CADR and SEXP were.

Can you please tell us exactly what you did: there is no actual example
of a problem with aperm here!

The error message is too curt: it actually means `must be a vector of the
right length', and I am fairly sure that is your error here. The code

    if (!isVector(perm) || (length(perm) != length(dimsa)))
        error("aperm: invalid second argument, must be a vector");

is not too hard to understand without any knowledge of Scheme (and I have
none either: the internal R language is described in `Writing R
Extensions').


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 16:09:55 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 11:09:55 -0400
Subject: [Rd] build buglet
References: <Pine.GSO.4.05.10006122116450.2900-100000@auk.stats>
Message-ID: <39464EC3.A3BEDAA5@bank-banque-canada.ca>

>Set the locale to C?  What are the differences: are they related to sort
>orders?  That's the only problem I have seen. (On Solaris en_UK sorts
>AaBb... not AB..ab....)

Yes, the problems are all sort order and it looks like this is the reason,
though I haven't completely figured it out yet. My locale setting is "en_CA" at
the office but "C" when I telework, which was confusing things even more. Can I
assume it is "C" that is used by R CMD build?

Thanks,
Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue Jun 13 16:58:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 13 Jun 2000 16:58:35 +0100 (BST)
Subject: [Rd] build buglet
Message-ID: <200006131558.QAA17119@toucan.stats.ox.ac.uk>

> Date: Tue, 13 Jun 2000 11:09:55 -0400
> From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> >Set the locale to C?  What are the differences: are they related to sort
> >orders?  That's the only problem I have seen. (On Solaris en_UK sorts
> >AaBb... not AB..ab....)
> 
> Yes, the problems are all sort order and it looks like this is the reason,
> though I haven't completely figured it out yet. My locale setting is "en_CA" 
at
> the office but "C" when I telework, which was confusing things even more. Can 
I
> assume it is "C" that is used by R CMD build?

Depends on your Perl installation, perhaps. I would expect it to
recognize locales if it is recent.   It is more likely that your shell
is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
Makefile, script, whatever.

I got tired of this and set all my machines back to C, but you may not
have that choice.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jun 13 19:37:41 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 13 Jun 2000 14:37:41 -0400
Subject: [Rd] build buglet
References: <200006131558.QAA17119@toucan.stats.ox.ac.uk>
Message-ID: <39467F75.42BF88B1@bank-banque-canada.ca>


>> assume it is "C" that is used by R CMD build?

>Depends on your Perl installation, perhaps. I would expect it to
>recognize locales if it is recent.

I'm using Perl 5.004_04 built for sun4-solaris.

>It is more likely that your shell
>is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
>Makefile, script, whatever.

Should I be doing a sort to get the result of Rdindex into the same order as "R
CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 13 21:47:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 13 Jun 2000 21:47:30 +0100 (BST)
Subject: [Rd] build buglet
In-Reply-To: <39467F75.42BF88B1@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>

On Tue, 13 Jun 2000, Paul Gilbert wrote:

> 
> >> assume it is "C" that is used by R CMD build?
> 
> >Depends on your Perl installation, perhaps. I would expect it to
> >recognize locales if it is recent.
> 
> I'm using Perl 5.004_04 built for sun4-solaris.

Um. Pretty old. May not be built with locale support then. (The current
version, 5.6.0, is two `major' versions on.)

> >It is more likely that your shell
> >is not using the locale sort.  I'd set LANG=C LC_ALL=C via your
> >Makefile, script, whatever.
> 
> Should I be doing a sort to get the result of Rdindex into the same order as "R
> CMD build" gets? I can't seem to get Rdindex to recognize any locale settings.

The shell expands the * before Rdindex ever gets hold of it. And what it
does re locales is an installation default (assuming it is a Solaris shell
not bash or tcsh, for both of which NLS support is optional).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bhm@math.uio.no  Wed Jun 14 13:15:57 2000
From: bhm@math.uio.no (bhm@math.uio.no)
Date: Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141215.OAA07492@pubhealth.ku.dk>

The help for prcomp on R 1.0.0 states that the component sdev of the
return value is the eigenvalues of the cov matrix.  Am I completely
mistaken, or should this be the _square root_ of the eigenvalues?

Also, the documentation is not very clear about how tol is used to omit
components.  (The _code_ is clear, though. :-)

-- 
B/H

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jun 14 13:36:13 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jun 2000 14:36:13 +0200
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
In-Reply-To: bhm@math.uio.no's message of "Wed, 14 Jun 2000 14:15:57 +0200 (MET DST)"
References: <200006141215.OAA07492@pubhealth.ku.dk>
Message-ID: <x2aegowibm.fsf@blueberry.kubism.ku.dk>

bhm@math.uio.no writes:

> The help for prcomp on R 1.0.0 states that the component sdev of the
> return value is the eigenvalues of the cov matrix.  Am I completely
> mistaken, or should this be the _square root_ of the eigenvalues?

Yup. Will fix for 1.1.0

> Also, the documentation is not very clear about how tol is used to omit
> components.  (The _code_ is clear, though. :-)

Hmm. Can't think of a concise way of saying this. Hardly something
that needs fixing here and now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed Jun 14 14:05:38 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 14 Jun 2000 14:05:38 +0100 (BST)
Subject: [Rd] Typo in the documentation of prcomp. (PR#569)
Message-ID: <200006141305.OAA28754@toucan.stats.ox.ac.uk>

> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> Date: 14 Jun 2000 14:36:13 +0200
> 
> bhm@math.uio.no writes:
> 
> > The help for prcomp on R 1.0.0 states that the component sdev of the
> > return value is the eigenvalues of the cov matrix.  Am I completely
> > mistaken, or should this be the _square root_ of the eigenvalues?
> 
> Yup. Will fix for 1.1.0

I've just fixed rather a lot of typos ....

> > Also, the documentation is not very clear about how tol is used to omit
> > components.  (The _code_ is clear, though. :-)
> 
> Hmm. Can't think of a concise way of saying this. Hardly something
> that needs fixing here and now.

I think I have found a way ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Wed Jun 14 20:45:37 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Wed, 14 Jun 2000 21:45:37 +0200 (MET DST)
Subject: [Rd] extra comma in configure (PR#570)
Message-ID: <200006141945.VAA11555@pubhealth.ku.dk>

Full_Name: Tom Vogels
Version: 1.1.0 (2000/June/14)
OS: Linux
Submission from: (NULL) (128.2.216.84)


There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
look very pretty either when configure reports ",: command not found"
-tom

(This showed up when running configure on a linux machine with gnome enabled.)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 14 21:23:44 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Jun 2000 21:23:44 +0100 (BST)
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: <200006141945.VAA11555@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>

On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:

> Full_Name: Tom Vogels
> Version: 1.1.0 (2000/June/14)
> OS: Linux
> Submission from: (NULL) (128.2.216.84)
> 
> 
> There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> look very pretty either when configure reports ",: command not found"
> -tom

At the end of line 398 in configure.in, I presume.

What other options did you give?  I don't see it on RH6.0 with 

.../configure --with-gnome

but then I don't have atlas.

> (This showed up when running configure on a linux machine with gnome enabled.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 01:47:34 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 14 Jun 2000 20:47:34 -0400
Subject: [Rd] extra comma in configure (PR#570)
In-Reply-To: Prof Brian D Ripley's message of "Wed, 14 Jun 2000 21:23:44 +0100 (BST)"
References: <Pine.GSO.4.05.10006142119300.29041-100000@auk.stats>
Message-ID: <87d7lj3h3t.fsf@bavaria.ece.cmu.edu>


Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 14 Jun 2000 tov@ece.cmu.edu wrote:
> 
> > Full_Name: Tom Vogels
> > Version: 1.1.0 (2000/June/14)
> > OS: Linux
> > Submission from: (NULL) (128.2.216.84)
> > 
> > 
> > There is a random comma on line 3617 in configure.  Doesn't hurt but doesn't
> > look very pretty either when configure reports ",: command not found"
> > -tom
> 
> At the end of line 398 in configure.in, I presume.
> 
> What other options did you give?  I don't see it on RH6.0 with 
> 
> ../configure --with-gnome
> 
> but then I don't have atlas.

(... I do -- curiosity killed the cat).

Yes, the extra ',' comes from the end of line 398.  I removed it, ran autoconf,
and the comma was gone.  Bingo.

Thanks,
  -tom

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 15 17:25:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 15 Jun 2000 12:25:42 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
Message-ID: <39490386.8029CB0B@bank-banque-canada.ca>

This is a synopsis for the r-devel archives of my solution to the problem that

R CMD Rdindex zzz/man/* >INDEX
and
R CMD build zzz

do not always result in the same order, which causes make problems outlined
further below. The source of the problem was suggested by Brian Ripley:

BDR>The shell expands the * before Rdindex ever gets hold of it. And what it
BDR>does re locales is an installation default (assuming it is a Solaris shell
BDR>not bash or tcsh, for both of which NLS support is optional).

The need to build INDEX separately from using the one generated by build is
so that R INSTALL zzz does not require R CMD build zzz first. This means
that code changes can be tested separately from documentation changes and
vice versa, thus remakes are faster.

INDEX needs to be generated in the same order as produced by
R CMD build or build's diff comparison suggests that the index is out
of date and suggests using --force. Using --force rewrites INDEX which
causes make to think the install is out of date, so the next make always starts
at the beginning again.

The * expansion (in Solaris sh) does not seem to recognize LC (locale)
settings. Sort does, but some of the output of R CMD Rdindex is on two
lines, so sorting the output does not work. It is possible to
   ls -1 man/* | sort
and get the locale sort order, but it does not seem possible to feed this
into "R CMD Rdindex". ( LC_COLLATE is not adequate for sort, LC_ALL is needed.)

The fix is to generate INDEX in the C order imposed by the
 Solaris sh expansion of *, then set LC_ALL=C for R CMD build.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@infiniti.ece.cmu.edu  Thu Jun 15 18:42:33 2000
From: tov@infiniti.ece.cmu.edu (tov@infiniti.ece.cmu.edu)
Date: Thu, 15 Jun 2000 19:42:33 +0200 (MET DST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
Message-ID: <200006151742.TAA25549@pubhealth.ku.dk>

Hi,

  Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
  Linux and Sun.  But AIX, of course, is a problem...

  When linking shared libs, the symbols from libc.a are not found.  I
  apologize for not investigating this further at the moment - they
  may not be properly or not all exported from R.bin.

  Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
  my build directory after running configure.  Then compilation proceeds
  without problems.
  (Alternatively, you could use cc instead of ld to link.)

  Regards,
  -tom
 

P.S. Any reason the status field is empty?  It is stable, right? ;-)

--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Thu Jun 15 18:57:55 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 15 Jun 2000 13:57:55 -0400
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <87vgzax1wc.fsf@bavaria.ece.cmu.edu>


Hi, I ran the test again with the newly released version of R (1.1) and I
now get the correct eigen values.  ("make check" succeeds.)

The scary part is that I think that I also used gcc+f77 last time and
the libs weren't changed.  Maybe the scary part is that I think...

So the comments that this is compiler specific probably hold.

Thanks,
  -tom


tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 
> Here are the results:
> 
> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> m
>      [,1] [,2]
> [1,]  6.8  2.4
> [2,]  2.4  8.2
> R> eigen(m)
> $values
> [1] 19.281403  6.337993
> 
> $vectors
>           [,1]       [,2]
> [1,] 0.1918866  0.9967987
> [2,] 0.9967987 -0.1918866
> 
> 
> And for comparison, here is what I get on a Sun (with r-stable):

(same results now on AIX 4.3 with R 1.1.0 

> R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
> R> eigen (m)
> $values
> [1] 10  5
> 
> $vectors
>      [,1] [,2]
> [1,]  0.6  0.8
> [2,]  0.8 -0.6

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ntakebay@bio.indiana.edu  Thu Jun 15 20:24:31 2000
From: ntakebay@bio.indiana.edu (Naoki Takebayashi)
Date: Thu, 15 Jun 2000 14:24:31 -0500 (EST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.1.0)
Message-ID: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>

I think I reported this bug in the past.  At that time, I was told that
it is a bug of autoconf.

./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
of Alpha EV56), so all the compilation flags were set incorrectly.  I
don't know the right way to fix it (I don't know how autoconf works
yet ...), but the following patch fixes the problem.

Thank you,
Naoki

Naoki Takebayashi     <ntakebay@bio.indiana.edu>
--- Dept. of Biology, Indiana University, Jordan Hall 142
--- 1001 E. Third St. Bloomington, IN 47405-3700 USA


--- R-1.1.0/tools/config.sub.orig	Thu Jun 15 13:49:01 2000
+++ R-1.1.0/tools/config.sub	Thu Jun 15 14:00:25 2000
@@ -153,6 +153,7 @@
 		| arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
 		| 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
 		| alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
+		| alphapca56 \
 		| i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
 		| mips64 | mipsel | mips64el | mips64orion | mips64orionel \
 		| mipstx39 | mipstx39el \
@@ -177,6 +178,7 @@
 	      | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
 	      | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
 	      | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
+	      | alphapca56-* \
 	      | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
 	      | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
 	      | sparc64-* | mips64-* | mipsel-* \

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rcreecy@census.gov  Thu Jun 15 21:13:25 2000
From: rcreecy@census.gov (Rob Creecy)
Date: Thu, 15 Jun 2000 16:13:25 -0400
Subject: [Rd] Lies, damn lies, and statistics
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <394938E5.CA845487@census.gov>

In the documentation for data.entry, R-1.1.0 the description reads:

A spreadsheet-lie editor for entering or editing data. 

Perhaps we shouldn't encourage users to lie with statistics any more
than they already do? It seems especially egregious to lie when entering
data.

Rob Creecy
Census Bureau
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 15 23:29:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Jun 2000 00:29:58 +0200
Subject: [Rd] Lies, damn lies, and statistics
In-Reply-To: Rob Creecy's message of "Thu, 15 Jun 2000 16:13:25 -0400"
References: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu> <394938E5.CA845487@census.gov>
Message-ID: <x2ln067f2x.fsf@blueberry.kubism.ku.dk>

Rob Creecy <rcreecy@census.gov> writes:

> In the documentation for data.entry, R-1.1.0 the description reads:
> 
> A spreadsheet-lie editor for entering or editing data. 
> 
> Perhaps we shouldn't encourage users to lie with statistics any more
> than they already do? It seems especially egregious to lie when entering
> data.

Looks like a Freudian slip, from the mere mentioning of spreadsheets
in connection with statistics I suppose.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 16 06:35:35 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 16 Jun 2000 07:35:35 +0200 (CEST)
Subject: [Rd] Missing -lc for compilation on AIX (R 1.1.0) (PR#571)
In-Reply-To: <200006151742.TAA25549@pubhealth.ku.dk>
References: <200006151742.TAA25549@pubhealth.ku.dk>
Message-ID: <14665.48295.450473.518062@aragorn.ci.tuwien.ac.at>

>>>>> tov  writes:

> Hi,
>   Kudos to all who've worked on getting 1.1 out.  It installs cleanly on
>   Linux and Sun.  But AIX, of course, is a problem...

>   When linking shared libs, the symbols from libc.a are not found.  I
>   apologize for not investigating this further at the moment - they
>   may not be properly or not all exported from R.bin.

>   Fix: I've added ' -lc' to SHLIBLDFLAGS in Makeconf and etc/Makeconf in
>   my build directory after running configure.  Then compilation proceeds
>   without problems.
>   (Alternatively, you could use cc instead of ld to link.)

Yes.  I definitely want to switch back to using the C compiler rather
than ld for linking.  Give us a few days ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 08:46:24 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
In-Reply-To: <Pine.SOL.4.10.10006151411360.8403-100000@sunflower.bio.indiana.edu>
Message-ID: <XFMail.000616094624.plummer@iarc.fr>

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jun 16 13:02:03 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 16 Jun 2000 14:02:03 +0200 (MET DST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
Message-ID: <200006161202.OAA01503@pubhealth.ku.dk>

I am filing this as a bug report so it doesn't get lost.
Martyn

-----FW: <XFMail.000616094624.plummer@iarc.fr>-----

Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
Sender: owner-r-devel@stat.math.ethz.ch
From: Martyn Plummer <plummer@iarc.fr>
To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
Cc: r-devel@stat.math.ethz.ch

On 15-Jun-00 Naoki Takebayashi wrote:
> I think I reported this bug in the past.  At that time, I was told that
> it is a bug of autoconf.
> 
> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
> of Alpha EV56), so all the compilation flags were set incorrectly.  I
> don't know the right way to fix it (I don't know how autoconf works
> yet ...), but the following patch fixes the problem.
> 
> Thank you,
> Naoki
> 
> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
> --- Dept. of Biology, Indiana University, Jordan Hall 142
> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
> 
> 
> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
> @@ -153,6 +153,7 @@
>               | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>               | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>               | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
> +             | alphapca56 \
>               | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>               | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>               | mipstx39 | mipstx39el \
> @@ -177,6 +178,7 @@
>             | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>             | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>             | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
> +           | alphapca56-* \
>             | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>             | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>             | sparc64-* | mips64-* | mipsel-* \

The config.sub file is part of the GNU automake package and is meant to be
used as is.  The version on my system (automake-1.4) does have an entry for
alphapca5[67], so I guess the config.sub that comes with R just needs to
be replaced with an up-to-date version.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--------------End of forwarded message-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@phoenix.ece.cmu.edu  Fri Jun 16 15:32:36 2000
From: tov@phoenix.ece.cmu.edu (tov@phoenix.ece.cmu.edu)
Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161432.QAA02711@pubhealth.ku.dk>

Hi,

  ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
  out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
  after configure.
  Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
  during configure? Excerpt from tkConfig.sh on my machine:

# Linker switch(es) to use to link with the X11 library archive.
TK_XLIBSW='-lX11' 

# Additional libraries to use when linking Tk.
TK_LIBS='-lX11 -lld  -lm' 

  The '-lld' wouldn't hurt, would it?
  Maybe the following would work for configure?

case "${host}" in
  *aix*)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
    ;;      
  *)
    LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
    ;;      
esac      

  I'll try that myself, but compilation takes a long, long time...
  Thanks,
    -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Jun 16 15:51:07 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 16 Jun 2000 15:51:07 +0100 (BST)
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
Message-ID: <200006161451.PAA04375@toucan.stats.ox.ac.uk>


> From: tov@phoenix.ece.cmu.edu
> Date: Fri, 16 Jun 2000 16:32:36 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Hi,
> 
>   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
>   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
>   after configure.

Yes, I guess that's because it insists on resolving libm at the shared
libs build stage.

>   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
>   during configure? Excerpt from tkConfig.sh on my machine:
> 
> # Linker switch(es) to use to link with the X11 library archive.
> TK_XLIBSW='-lX11' 
> 
> # Additional libraries to use when linking Tk.
> TK_LIBS='-lX11 -lld  -lm' 
> 
>   The '-lld' wouldn't hurt, would it?
>   Maybe the following would work for configure?
> 
> case "${host}" in
>   *aix*)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
>     ;;      
>   *)
>     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
>     ;;      
> esac      

It's not done like that. Take a look in aclocal.m4.  I suspect that
${TK_LIBS} would do everywhere, but will need to do some testing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sat Jun 17 10:03:50 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sat, 17 Jun 2000 11:03:50 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <394B3EF6.BC1466E5@univie.ac.at>

in the windows version
> z<-1:10
> dataentry(z)
Error in dataentry(z) : Argument "modes" is missing, with no default
according to the docs,
Modes=NULL should be default



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Jun 17 10:34:31 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 17 Jun 2000 10:34:31 +0100 (BST)
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>

On Sat, 17 Jun 2000, Erich Neuwirth wrote:

> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default

That is for data.entry() not dataentry().  They are different, and the 
argument for dataentry is `modes' not `Modes'.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Sat Jun 17 10:41:15 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Sat, 17 Jun 2000 11:41:15 +0200
Subject: [Rd] datanentry in windows version, Modes has no default
In-Reply-To: <394B3EF6.BC1466E5@univie.ac.at>; from erich.neuwirth@univie.ac.at on Sat, Jun 17, 2000 at 11:03:50AM +0200
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk> <394B3EF6.BC1466E5@univie.ac.at>
Message-ID: <20000617114115.A15351@sirio.stat.unipd.it>

On Sat, Jun 17, 2000 at 11:03:50AM +0200, Erich Neuwirth wrote:
> in the windows version
> > z<-1:10
> > dataentry(z)
> Error in dataentry(z) : Argument "modes" is missing, with no default
> according to the docs,
> Modes=NULL should be default
> 
> 

  Same under Linux. But, as said in the documentation, 'dataentry'
  is the 'primitive function'. Indeed,
  > de(z)
  works.
  guido
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Sun Jun 18 07:53:07 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Sun, 18 Jun 2000 08:53:07 +0200
Subject: [Rd] design question
References: <Pine.GSO.4.05.10006171026400.12703-100000@auk.stats>
Message-ID: <394C71D3.B490F97A@univie.ac.at>

let me ask you as possibly very silly question.

what  would you think of a shorthand notation for anonymous fuctions in
arguments?

let me illustrate this in how mathematica does it.

mathematica has a function notation like R

Map[Function[x, x^2], {1, 2, 3}]

this can be abbreviated as
Map[#^2 &, {1, 2, 3}]

& indicates a function expression,
and # is the (one) anonymous argument.
functions with more that one arguments
(whch are positional) can be written as
#1  #2
and so on

here is an example
Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

in some cases, this notation is quite convenient.
and since r is lexically scoped, it also should not be too dangerous.
what do our architects think about introducing this kind of notation
in r?



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Sun Jun 18 08:57:29 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Sun, 18 Jun 2000 17:57:29 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "Sun, 18 Jun 2000 08:53:07 +0200."
 <394C71D3.B490F97A@univie.ac.at>
Message-ID: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>

Erich Neuwirth asks:

> let me ask you as possibly very silly question.
> 
> what  would you think of a shorthand notation for anonymous fuctions in
> arguments?
> 
> let me illustrate this in how mathematica does it.
> 
> mathematica has a function notation like R
> 
> Map[Function[x, x^2], {1, 2, 3}]
> 
> this can be abbreviated as
> Map[#^2 &, {1, 2, 3}]

The Maple notation is more understandable to most people:

	map(x -> x^2, {1, 2, 3})

but of course "->" is already taken in S/R as the right pointing
assignment operator (although maybe I'm the only one who even knows
about it, let alone uses it...)

> 
> & indicates a function expression,
> and # is the (one) anonymous argument.
> functions with more that one arguments
> (whch are positional) can be written as
> #1  #2
> and so on

Either swiped from TeX or both have swiped the idea from a common
source.  It has the look of a macro language, which can be misleading.

> 
> here is an example
> Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]

Cryptic for most users, I'd say, and very macro-like.

> 
> in some cases, this notation is quite convenient.
> and since r is lexically scoped, it also should not be too dangerous.
> what do our architects think about introducing this kind of notation
> in r?

It has to have very low priority, possibly negative.  If syntactic
revisions were ever seriously contemplated, I would strongly favour
trying to bring in some of the S4 changes, but even there I would
regard the semantic extensions as much more urgent than the purely
syntactic ones.  Consistency with S-PLUS is not the final arbiter of
everthing but it does really matter.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 18 10:56:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Jun 2000 11:56:27 +0200
Subject: [Rd] design question
In-Reply-To: Bill Venables's message of "Sun, 18 Jun 2000 17:57:29 +1000"
References: <200006180757.RAA24273@snowy.nsw.cmis.CSIRO.AU>
Message-ID: <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>

Bill Venables <venables@acland.qld.cmis.csiro.au> writes:

> > here is an example
> > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> 
> Cryptic for most users, I'd say, and very macro-like.
> 
> > 
> > in some cases, this notation is quite convenient.
> > and since r is lexically scoped, it also should not be too dangerous.
> > what do our architects think about introducing this kind of notation
> > in r?
> 
> It has to have very low priority, possibly negative.  If syntactic
> revisions were ever seriously contemplated, I would strongly favour
> trying to bring in some of the S4 changes, but even there I would
> regard the semantic extensions as much more urgent than the purely
> syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> everthing but it does really matter.

We do have a couple of cases where we allow expressions instead of
functions of one variable, with "x" marking the spot of the
indep.var., e.g. curve(exp(x)) works that way.

In principle we could allow a similar convention for functions of two
variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
pitfalls in the kind of code needed to support this, though: For
instance, writing a function that passes its argument on to curve()
needs to do it with substitute() magic and evaluation in parent
frames. Also take a look at the beginning of curve() for the
contorsions the code needs to go through to handle the non-function
cases. On the whole, I'm not sure this kind of apparent
user-convenience is worth it.

BTW, we also have positional TeX-style arguments, but fortunately
nobody knows about them:

> f<-function(...)..1^2+..2^2
> f(2,3)
[1] 13


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Sun Jun 18 11:09:45 2000
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Sun, 18 Jun 2000 12:09:45 +0200 (CEST)
Subject: [Rd] Announce: exact Distributions
Message-ID: <Pine.LNX.4.21.0006181208240.24384-100000@artemis.imbe.med.uni-erlangen.de>


Hi,

I just uploaded the package exactDistr to the CRAN devel section (Fritz will
add it tomorrow, I think). ExactDistr implements the
Streitberg/Roehmel shift-algorithm for the exact distributions of
permutation- and rank tests. This is done in R (just a few lines of code)
and is IMO fast enough for m,n < 50. I added the  usual [dpq]perm
functions and an example how to track the exact distribution of the
Wilcoxon-Mann-Whitney test (especially with ties).

I would like to ask the experts to have a look at this algorithm, maybe we
can add exact p-values etc. to the rank tests in R without adapting the
network algorithm this way.

The weather is beautiful here, so I will stop hacking right now.
If it is raining somewhere:

http://www.bioinf.uni-hannover.de/~torsten/exactDistr_0.1-2.tar.gz

Torsten


 _______________________________________________________________________
|									|
|	Dipl.-Stat. Torsten Hothorn					|
|	Institut fuer Medizininformatik, Biometrie und Epidemiologie	|	
|	Waldstrasse 6, D-91054 Erlangen, Deutschland			|
|	Tel: ++49-9131-85-22707						|
|	Fax: ++49-9131-85-25740						|
|	Email: Torsten.Hothorn@rzmail.uni-erlangen.de			|
|_______________________________________________________________________|	

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 11:28:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 12:28:39 +0200
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
In-Reply-To: <39490386.8029CB0B@bank-banque-canada.ca>
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca>
Message-ID: <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>

>>>>> Paul Gilbert writes:

> This is a synopsis for the r-devel archives of my solution to the problem that
> R CMD Rdindex zzz/man/* >INDEX
> and
> R CMD build zzz

> do not always result in the same order, which causes make problems outlined
> further below. The source of the problem was suggested by Brian Ripley:

BDR> The shell expands the * before Rdindex ever gets hold of it. And what it
BDR> does re locales is an installation default (assuming it is a Solaris shell
BDR> not bash or tcsh, for both of which NLS support is optional).

> The need to build INDEX separately from using the one generated by
> build is so that R INSTALL zzz does not require R CMD build zzz
> first. This means that code changes can be tested separately from
> documentation changes and vice versa, thus remakes are faster.

> INDEX needs to be generated in the same order as produced by R CMD
> build or build's diff comparison suggests that the index is out of
> date and suggests using --force. Using --force rewrites INDEX which
> causes make to think the install is out of date, so the next make
> always starts at the beginning again.

> The * expansion (in Solaris sh) does not seem to recognize LC (locale)
> settings. Sort does, but some of the output of R CMD Rdindex is on two
> lines, so sorting the output does not work. It is possible to ls -1
> man/* | sort and get the locale sort order, but it does not seem
> possible to feed this into "R CMD Rdindex". ( LC_COLLATE is not
> adequate for sort, LC_ALL is needed.)

> The fix is to generate INDEX in the C order imposed by the Solaris sh
>  expansion of *, then set LC_ALL=C for R CMD build.

Maybe I miss something here, but ...

What R CMD build currently does to list the Rd files in a package is

	find man -name "*.[Rr]d" -print | sort

When building the indices this list is fed to R CMD Rdindex.

On the other hand, R CMD Rdindex itself simply loops through the list of
Rd files it was given as arguments, without any reordering (which I
think is what it should do).

Now note that R CMD Rdindex dates back to a time where we did not have R
CMD build.  Now that we have it, I am inclined to say that when you
start with a package, you simply use R CMD build to bundle it up, and
this will automatically build the index for you (without having to worry
about the ordering), i.e., I would consider Rdindex as something more
low-level.

But in any case, I recommend we do the following:

* Extend Rdindex so that if one of its arguments is a directory, it
obtains the list of Rd files as done by R CMD build.

* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
build and Rdindex should both do LC_ALL=C.

Note that currently we are not very smart building indices, because the
name/alias scheme of Rd is not powerful enough.  1.2 may have something
like an \index entry allowing to specify the information that should go
into the INDEX (and searchable indices etc.).

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Jun 18 13:04:29 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 18 Jun 2000 14:04:29 +0200
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#572)
In-Reply-To: <200006161202.OAA01503@pubhealth.ku.dk>
References: <200006161202.OAA01503@pubhealth.ku.dk>
Message-ID: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>

>>>>> plummer  writes:

> I am filing this as a bug report so it doesn't get lost.

Thanks.

> -----FW: <XFMail.000616094624.plummer@iarc.fr>-----

> Date: Fri, 16 Jun 2000 09:46:24 +0200 (CEST)
> Sender: owner-r-devel@stat.math.ethz.ch
> From: Martyn Plummer <plummer@iarc.fr>
> To: Naoki Takebayashi <ntakebay@bio.indiana.edu>
> Subject: RE: [Rd] [PATCH] ./configure fails to recognize alphapca56 (R-1.
> Cc: r-devel@stat.math.ethz.ch

> On 15-Jun-00 Naoki Takebayashi wrote:
>> I think I reported this bug in the past.  At that time, I was told that
>> it is a bug of autoconf.
>> 
>> ./configure does not recognize Linux on DEC Alpha 21164PC (a cheap version
>> of Alpha EV56), so all the compilation flags were set incorrectly.  I
>> don't know the right way to fix it (I don't know how autoconf works
>> yet ...), but the following patch fixes the problem.
>> 
>> Thank you,
>> Naoki
>> 
>> Naoki Takebayashi     <ntakebay@bio.indiana.edu>
>> --- Dept. of Biology, Indiana University, Jordan Hall 142
>> --- 1001 E. Third St. Bloomington, IN 47405-3700 USA
>> 
>> 
>> --- R-1.1.0/tools/config.sub.orig     Thu Jun 15 13:49:01 2000
>> +++ R-1.1.0/tools/config.sub  Thu Jun 15 14:00:25 2000
>> @@ -153,6 +153,7 @@
>> | arme[lb] | pyramid | mn10200 | mn10300 | tron | a29k \
>> | 580 | i960 | h8300 | hppa | hppa1.0 | hppa1.1 | hppa2.0 \
>> | alpha | alphaev5 | alphaev56 | we32k | ns16k | clipper \
>> +             | alphapca56 \
>> | i370 | sh | powerpc | powerpcle | 1750a | dsp16xx | pdp11 \
>> | mips64 | mipsel | mips64el | mips64orion | mips64orionel \
>> | mipstx39 | mipstx39el \
>> @@ -177,6 +178,7 @@
>> | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
>> | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
>> | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
>> +           | alphapca56-* \
>> | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
>> | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \
>> | sparc64-* | mips64-* | mipsel-* \

> The config.sub file is part of the GNU automake package and is meant
> to be used as is.  The version on my system (automake-1.4) does have
> an entry for alphapca5[67], so I guess the config.sub that comes with
> R just needs to be replaced with an up-to-date version.

Interesting.  You're on a Debian system like myself?  The automake 1.4
sources do not have that, but the versions in /usr/share/... do, same
for libtool.

Anyway, I just realized that autoconf is available by anonCVS, and that
the most current versions of the config.guess and config.sub scripts are
always in the CVS tree.  Will update the versions in the sources.

[Peter: this is something else we should most likely always do before a
new release, similar to changing the version numbers in the FAQ etc.  Do
we have a list of these front-matter things?]

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Mon Jun 19 00:00:45 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Mon, 19 Jun 2000 09:00:45 +1000
Subject: [Rd] design question
In-Reply-To: Your message of "18 Jun 2000 11:56:27 +0200."
 <x24s6rfh2s.fsf@blueberry.kubism.ku.dk>
Message-ID: <200006182300.JAA13439@snowy.nsw.cmis.CSIRO.AU>

> Bill Venables <venables@acland.qld.cmis.csiro.au> writes:
> 
> > > here is an example
> > > Outer[#1^2 + #2^2 &, {1, 2}, {3, 4}]
> > 
> > Cryptic for most users, I'd say, and very macro-like.
> > 
> > > 
> > > in some cases, this notation is quite convenient.
> > > and since r is lexically scoped, it also should not be too dangerous.
> > > what do our architects think about introducing this kind of notation
> > > in r?
> > 
> > It has to have very low priority, possibly negative.  If syntactic
> > revisions were ever seriously contemplated, I would strongly favour
> > trying to bring in some of the S4 changes, but even there I would
> > regard the semantic extensions as much more urgent than the purely
> > syntactic ones.  Consistency with S-PLUS is not the final arbiter of
> > everthing but it does really matter.
> 
> We do have a couple of cases where we allow expressions instead of
> functions of one variable, with "x" marking the spot of the
> indep.var., e.g. curve(exp(x)) works that way.

Yes, but that doesn't require any syntactic change, it's already
there.  If people want to write functions that way, it's up to them.

> In principle we could allow a similar convention for functions of two
> variables, e.g. outer(u, v, x^2 + y^2). There are various nasty
> pitfalls in the kind of code needed to support this, though: For
> instance, writing a function that passes its argument on to curve()
> needs to do it with substitute() magic and evaluation in parent
> frames. Also take a look at the beginning of curve() for the
> contorsions the code needs to go through to handle the non-function
> cases. On the whole, I'm not sure this kind of apparent
> user-convenience is worth it.

I'm pretty sure it's not worth it.  Utlimately it leads to user
confusion when a variety of different kinds of object are allowed in
various places only to have them ultimately coerced to the same thing.
I know this is sometimes pretty well unavoidable, such as with
outer(u, v, "+") but overall I think it is something to be avoided.

> 
> BTW, we also have positional TeX-style arguments, but fortunately
> nobody knows about them:
> 
> > f<-function(...)..1^2+..2^2
> > f(2,3)
> [1] 13

Oh I knew about it all right, Peter.  It's just that *I* never told
anyone about it...  :-) 

Cheers,
Bill Venables.
-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Jun 19 10:18:44 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 19 Jun 2000 11:18:44 +0200 (CEST)
Subject: [Rd] [PATCH] ./configure fails to recognize alphapca56 (PR#5
In-Reply-To: <200006181204.OAA04247@aragorn.ci.tuwien.ac.at>
Message-ID: <XFMail.000619111844.plummer@iarc.fr>

On 18-Jun-00 Kurt Hornik wrote:
>>>>>> plummer  writes:
>> The config.sub file is part of the GNU automake package and is meant
>> to be used as is.  The version on my system (automake-1.4) does have
>> an entry for alphapca5[67], so I guess the config.sub that comes with
>> R just needs to be replaced with an up-to-date version.
> 
> Interesting.  You're on a Debian system like myself?  The automake 1.4
> sources do not have that, but the versions in /usr/share/... do, same
> for libtool.

This is much more complicated than I thought.  I'm using Red Hat, but I
see that the same thing: the version of config.sub in the source for 
automake is not the one that gets installed into /usr/share/automake.
During the build process, rpm runs "libtoolize --copy --force" which copies
the version of config.sub from /usr/share/libtool into the source directory.
The source for libtool-1.3.4 does have the up-to-date version of config.sub,
so I suppose this should be regarded as the original.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Jun 19 16:54:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Jun 2000 11:54:37 -0400
Subject: [Rd] ordering in R CMD build & R CMD Rdindex
References: <Pine.GSO.4.05.10006132142060.22203-100000@auk.stats>
 <39490386.8029CB0B@bank-banque-canada.ca> <200006181028.MAA04207@aragorn.ci.tuwien.ac.at>
Message-ID: <394E423C.4935AFF3@bank-banque-canada.ca>

Kurt

>Maybe I miss something here, but ...

I'm not trying to make this into a big deal, but it did take me awhile
to track down so I thought it would be worth recording. Let me explain
the general problem a little more clearly, even though I think you do
understand it,  since someone may see a better overall solution.

I am trying to set up a good structure for package development, which
takes into account the eventuality that documentation testing may become
a more time consuming process. There seem to be two keys: small
independent packages and a reasonably clean separation of code changes
and testing from documentation changes and testing. These allow the
possibility of setting up a fairly efficient makefile.

Running "R CMD check zzz" for all my packages takes several hours on a
Sparc ultra 10 and the complete set of my other tests takes days to run.
I have been splitting things into smaller packages which are as
independent as I can make them, so that I can test pieces separately.
Now I want to set up my makefile so that I can work on documentation and
run the  "R CMD build zzz" tests without changing any file dates that
would indicate my installed code is out of date. If I change code rather
than documentation then I want make to recognize that and do "R INSTALL
zzz" but not "R CMD build zzz", since the build takes some time too.
(This has been a less serious consequence and until recently I was just
rebuilding each time.) Examples in the documentation are a gray area,
but since I have them all working I am thinking of them breaking when
code changes rather than when documentation changes, so I do "R CMD
check zzz" after I change code rather than after I change documentation.
My bundle has dependencies install, build, check for each of the
packages since the above split is not perfect (and I also run my own
tests).

Now the only bug in this whole approach seems to be the file INDEX which
is needed for R INSTALL and is also checked by R CMD build. If I
generate it before an install in the simple quick way using Rdindex,
then this solves my problem as long a "R CMD build" gets the same
result. If it doesn't get the same result (because of a different sort
order) then I get a lot of warning messages which I will start ignoring,
and then miss important warnings. On the other hand, if I use --force,
it changes the INDEX file so that I loose the independence between code
and documentation and end up re-installing almost ever time I run make,
and more importantly, my checks and tests also then appear to be out of
date. If I don't use INDEX as a dependency in my makefile then it
doesn't get re-made when it should be. So it would be nice to be able to
generate the INDEX file in the same format "R CMD build" gets, but
running something simple. As I explained in the previous message, this
depends on the sort order and my Solaris sh does not sort in the same
order as it expands * unless LC_ALL=C, which is the solution I am using.

>What R CMD build currently does to list the Rd files in a package is
>        find man -name "*.[Rr]d" -print | sort
>When building the indices this list is fed to R CMD Rdindex.

This would also work (and would be better since one could choose the
sort order) but I can't see how to feed this sorted list of files into
"R CMD Rdindex." Probably I am missing something here.

>Now note that R CMD Rdindex dates back to a time where we did not have
R
>CMD build.  Now that we have it, I am inclined to say that when you
>start with a package, you simply use R CMD build to bundle it up, and
>this will automatically build the index for you (without having to
worry
>about the ordering)

I was using this approach until recently and it works fine with small
packages. The time penalty is not too severe now, although it is not
insignificant for some of my packages. When I am actively working on
code development it can be a bottleneck, since I re-make often. In the
longer run I expect "R CMD build" will do more checks and take longer,
so I am mainly trying to set up a good structure for package development
which takes this into account.

>But in any case, I recommend we do the following:
>* Extend Rdindex so that if one of its arguments is a directory, it
>obtains the list of Rd files as done by R CMD build.

That would be nice but don't bother if it is a big deal, since I have a
working solution and I doubt that this is an issue for many people.

>* In both cases, ensure e.g. the C order for consistency.  I.e., R CMD
>build and Rdindex should both do LC_ALL=C.

Ensure consistency, but I wouldn't force LC_ALL=C as AaBb... would
probably be a better order for the index and "C" gives AB...ab...

>Note that currently we are not very smart building indices, because the

>name/alias scheme of Rd is not powerful enough.  1.2 may have something

>like an \index entry allowing to specify the information that should go

>into the INDEX (and searchable indices etc.).

Maybe it would be better to work on this rather than put effort into a
temporary fix.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keitt@nceas.ucsb.edu  Mon Jun 19 18:20:17 2000
From: keitt@nceas.ucsb.edu (keitt@nceas.ucsb.edu)
Date: Mon, 19 Jun 2000 19:20:17 +0200 (MET DST)
Subject: [Rd] chron library (PR#574)
Message-ID: <200006191720.TAA21739@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1
OS: Linux
Submission from: (NULL) (128.111.220.188)


The chron library does not handle 4 digit years.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Mon Jun 19 19:27:23 2000
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas J Vogels)
Date: 19 Jun 2000 14:27:23 -0400
Subject: [Rd] Missing -lm for tcltk (R 1.1.0, AIX 4.3) (PR#573)
In-Reply-To: Prof Brian Ripley's message of "Fri, 16 Jun 2000 15:51:07 +0100 (BST)"
References: <200006161451.PAA04375@toucan.stats.ox.ac.uk>
Message-ID: <87n1khbk6s.fsf@bavaria.ece.cmu.edu>



Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > From: tov@phoenix.ece.cmu.edu

> >   ok, AIX 4.3 insists on being different.  I can't compile --with-tcltk
> >   out of the box.  I have to add '-lm' to the SHLIBLDFLAGS manually
> >   after configure.
> 
> Yes, I guess that's because it insists on resolving libm at the shared
> libs build stage.

And the symbols from libm don't make it into R.exp.

> >   Which brings up the question:  Can you use TK_LIBS instead of TK_XLIBSW
> >   during configure? Excerpt from tkConfig.sh on my machine:
> > 
> > # Linker switch(es) to use to link with the X11 library archive.
> > TK_XLIBSW='-lX11' 
> > 
> > # Additional libraries to use when linking Tk.
> > TK_LIBS='-lX11 -lld  -lm' 
> > 
> >   The '-lld' wouldn't hurt, would it?
> >   Maybe the following would work for configure?
> > 
> > case "${host}" in
> >   *aix*)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_LIBS}  $LIBS"
> >     ;;      
> >   *)
> >     LIBS="-ltk${TK_VERSION} ${TCLTK_LIBS} ${TK_XLIBSW}  $LIBS"
> >     ;;      
> > esac      
> 
> It's not done like that. Take a look in aclocal.m4.  I suspect that
> ${TK_LIBS} would do everywhere, but will need to do some testing.

Ok, aclocal.m4 was obviously new to me.  Below is the patch.  It
works for me...  

With this patch and "SHLIBLD=CC ./configure" I can compile, install,
check R 1.1.

Regards,
  -tom


*** aclocal.m4  Mon Jun 19 11:39:56 2000
--- aclocal.m4.orig     Mon Jun 19 11:34:21 2000
***************
*** 840,847 ****
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_LIBS}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_LIBS}] )
            fi
          fi
        fi
--- 840,847 ----
            if test -n "${TK_CONFIG}"; then
              . ${TK_CONFIG}    # get TK_VERSION
              AC_CHECK_LIB(tk${TK_VERSION}, Tk_Init,
!               [ TCLTK_LIBS="${TCLTK_LIBS} -ltk${TK_VERSION}  ${TK_XLIBSW}"
!                 have_tcltk=yes ], , [${TCLTK_LIBS} ${TK_XLIBSW}] )
            fi
          fi
        fi

-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Jun 19 21:01:26 2000
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 19 Jun 2000 22:01:26 +0200 (MET DST)
Subject: [Rd] missing include in pnorm.c (PR#575)
Message-ID: <200006192001.WAA22499@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: R-Release (June 15)
OS: Linux (redhat)
Submission from: (NULL) (141.211.66.172)


R fails to compile on the current released version. Some constants 
are undefined in pnorm.c. It appears that adding

#include "nmath.h"

to pnorm.c solves this problem.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jun 19 21:19:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <200006192001.WAA22499@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>

On Mon, 19 Jun 2000 faraway@umich.edu wrote:

> Full_Name: Julian Faraway
> Version: R-Release (June 15)
> OS: Linux (redhat)
> Submission from: (NULL) (141.211.66.172)
> 
> 
> R fails to compile on the current released version. Some constants 
> are undefined in pnorm.c. It appears that adding
> 
> #include "nmath.h"

Let us stress that pnorm.c does contain that line in `the current released
version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
have noticed traffic about this on R-help earlier today.  Sorry to be
picky, but quite a lot of time has been misdirected by initial reports on
this not being precise enough (and this is the third report).

R-release is the current version with all committed patches applied.  
(On release day there are not likely to be any patches.)
Unfortunately, something has gone wrong with checking it out of the
archives to the tar file.  The file is correct in the archives, so the
problem is in R-release.tar.*, not in R-release per se.  With that sort of
level of detail being important, we need to be as precise as possible.

I wondered it there was any room for misunderstanding in what was said on
CRAN, but it looks clear enough to me. R-release.tar.* is described there
as a `snapshot', and that is the intention. Those of us who download
snapshots from other projects know that sometimes they are badly broken.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Jun 20 07:39:29 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 20 Jun 2000 08:39:29 +0200 (CEST)
Subject: [Rd] missing include in pnorm.c (PR#575)
In-Reply-To: <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
References: <200006192001.WAA22499@pubhealth.ku.dk>
 <Pine.WNT.4.05.10006192104150.225-100000@tern.stats>
Message-ID: <14671.4513.37090.479733@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 19 Jun 2000 21:19:13 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

PBDR> On Mon, 19 Jun 2000 faraway@umich.edu wrote:
>> Full_Name: Julian Faraway
>> Version: R-Release (June 15)
>> OS: Linux (redhat)
>> Submission from: (NULL) (141.211.66.172)
>> 
>> 
>> R fails to compile on the current released version. Some constants 
>> are undefined in pnorm.c. It appears that adding
>> 
>> #include "nmath.h"

PBDR> Let us stress that pnorm.c does contain that line in `the current released
PBDR> version', which is R-1.1.0, and *not* R-release.tar.{gz,bz2}.  You might
PBDR> have noticed traffic about this on R-help earlier today.  Sorry to be
PBDR> picky, but quite a lot of time has been misdirected by initial reports on
PBDR> this not being precise enough (and this is the third report).

PBDR> R-release is the current version with all committed patches applied.  
PBDR> (On release day there are not likely to be any patches.)
PBDR> Unfortunately, something has gone wrong with checking it out of the
PBDR> archives to the tar file.  The file is correct in the archives, so the
PBDR> problem is in R-release.tar.*, not in R-release per se.  With that sort of
PBDR> level of detail being important, we need to be as precise as possible.

PBDR> I wondered it there was any room for misunderstanding in what was said on
PBDR> CRAN, but it looks clear enough to me. R-release.tar.* is described there
PBDR> as a `snapshot', and that is the intention. Those of us who download
PBDR> snapshots from other projects know that sometimes they are badly broken.

I've added a much stronger statement to CRAN saying that ``These
archives are created automatically every night from the CVS tree,
hence might not even compile on your platform and can contain any
number of bugs. They will probably work, but maybe not.''

Hope this helps,
Fritz


PS: Of course ``night'' is only true from a European perspective  :-)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jun 20 12:03:20 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 20 Jun 2000 13:03:20 +0200 (MET DST)
Subject: [Rd] exists() and the mode argument (PR#576)
Message-ID: <200006201103.NAA27861@pubhealth.ku.dk>

The following seems to be odd behaviour:

fred <- 1:10
mode(fred) # "numeric"
exists("fred") # TRUE
exists("fred", mode="numeric") # FALSE

Unless I have misunderstood, the final evaluation should be TRUE,
as an object called "fred" exists and its mode is "numeric".  In
the same category, I have just noticed that

get("fred") # 1:10
get("fred", mode="numeric") # gives an Error: variable "fred" was not found

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jun 20 13:19:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 20 Jun 2000 13:19:11 +0100 (BST)
Subject: [Rd] exists() and the mode argument (PR#576)
In-Reply-To: <200006201103.NAA27861@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10006201313251.23397-100000@auk.stats>

On Tue, 20 Jun 2000 J.C.Rougier@durham.ac.uk wrote:

> The following seems to be odd behaviour:
> 
> fred <- 1:10
> mode(fred) # "numeric"
> exists("fred") # TRUE
> exists("fred", mode="numeric") # FALSE
> 
> Unless I have misunderstood, the final evaluation should be TRUE,
> as an object called "fred" exists and its mode is "numeric".  In

Its `mode' is 
> typeof(fred)
[1] "integer"

and so

> exists("fred", mode="integer")
[1] TRUE

See ?exists

    mode: the type of interest for the object.
              ^^^^ 

I think this needs to be re-written in the documentation, or do
people think it should be the value of mode?  The latter appears
to be what the prototype uses, in that

> exists("fred", mode="numeric")
[1] T
> exists("fred", mode="integer")
[1] T
> exists("fred", mode="double")
[1] T

(sic)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rbeer@uni-goettingen.de  Tue Jun 20 17:47:54 2000
From: rbeer@uni-goettingen.de (Ragnar Beer)
Date: Tue, 20 Jun 2000 18:47:54 +0200
Subject: [Rd] Compiling R 1.1.0 under OpenBSD 2.7
Message-ID: <p04320401b5754f249535@[134.76.136.114]>

Howdy!

I was trying to compile R 1.1.0 under OpenBSD 2.7 and got the 
following output from the make step:

-----snip-----
gcc -I. -I../../src/include -I../../src/include 
-I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
-mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
arithmetic.c:48: warning: `struct exception' declared inside parameter list
arithmetic.c:48: warning: its scope is only this definition or 
declaration, which is probably not what you want.
arithmetic.c: In function `matherr':
arithmetic.c:50: dereferencing pointer to incomplete type
arithmetic.c:59: dereferencing pointer to incomplete type
arithmetic.c:53: warning: unreachable code at beginning of switch statement
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main.
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
*** Error code 1

Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
-----snip-----

Can anyone help? I'm in the process of switching to OpenBSD from 
Linux because of OpenBSD's _very_ good security features but I just 
won't get R running :(

--Ragnar
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Jun 21 01:51:24 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 21 Jun 2000 00:51:24 GMT
Subject: [Rd] Port of R header files to Delphi
Message-ID: <39510d92.13120879@julian.uwo.ca>

I'm in the process of porting R header files to Delphi.  The short
term aim is to be able to make calls into the R.dll from Delphi; the
longer term aim is to play around with writing a Windows front-end
with some of the features of the S-PLUS environment (e.g. scripts),
and other features from other IDEs I've used (e.g. watch windows,
popup values of variables selected by mouse, etc.)

I've got a port of the simple rterm.c sample front-end sort of
working, but I need lower level access, and I'm having trouble getting
any further.  Is this the place to ask technical questions on this, or
should I ask somewhere else (or just not bug everyone, since I'm not
working on Unix or in C)?

For example:

1.  Syntax errors are causing my rterm to shut down, apparently
because I'm not catching the exceptions that are thrown.  How are
exceptions thrown?

2.  If I want to get R to give me a string showing how an existing
variable would be printed, what's the normal procedure?  I tried
calling "PrintValue", passing it the Rinternals export
"R_LastvalueSymbol", but I just get an access violation in R.DLL.
This could be because I'm not handling the export properly (DLLs
normally export entry points, not pointers to variables, so I had to
try to guess what indirection was being used here).  Or I could be
calling PrintValue at the wrong time.  Or something else.  How much
needs to be set up in advance before PrintValue will work?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Wed Jun 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Jun 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200006210515.HAA15155@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 563 *
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 06 Jun 2000 14:21:35 -0400
--gls{nlme}; should formula.default() look for attr(*,"formula") ?
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 576 *
Subject:  exists() and the mode argument 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 20 Jun 2000 12:03:36 +0100 (BST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 564 *
Subject: "clipping error in x11()"
From: Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>
Date: Wed, 7 Jun 2000 23:06:54 +0200 (MET DST)
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
* PR# 565 *
Subject: Postscript device ignores title if it is too long.
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Fri, 9 Jun 2000 09:17:09 +0100 (BST)
* PR# 569 *
Subject: Typo in the documentation of prcomp.
From: =?iso-8859-1?q?Bj=F8rn-Helge_Mevik?= <bhm@math.uio.no>
Date: 14 Jun 2000 14:16:14 +0200
* PR# 568 *
Subject: problem with aperm?
From: Jim Lemon <jim.lemon@uts.edu.au>
Date: Tue, 13 Jun 2000 13:20:10 +1000
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
* PR# 571 *
Subject:  Missing -lc for compilation on AIX (R 1.1.0) 
From: Thomas Vogels <tov@infiniti.ece.cmu.edu>
Date: Thu, 15 Jun 2000 13:42:50 -0400
* PR# 570 *
Subject: extra comma in configure
From: tov@ece.cmu.edu
Date: Wed, 14 Jun 2000 21:45:35 +0200 (MET DST)
* PR# 575 *
Subject: missing include in pnorm.c
From: faraway@umich.edu
Date: Mon, 19 Jun 2000 22:01:25 +0200 (MET DST)
* PR# 574 *
Subject: chron library
From: keitt@nceas.ucsb.edu
Date: Mon, 19 Jun 2000 19:20:16 +0200 (MET DST)
* PR# 573 *
Subject:  Missing -lm for tcltk (R 1.1.0, AIX 4.3) 
From: Thomas Vogels <tov@phoenix.ece.cmu.edu>
Date: Fri, 16 Jun 2000 10:32:54 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 07:52:59 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 07:52:59 +0100 (BST)
Subject: [Rd] Port of R header files to Delphi
In-Reply-To: <39510d92.13120879@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006210727330.29833-100000@auk.stats>

On Wed, 21 Jun 2000, Duncan Murdoch wrote:

> I'm in the process of porting R header files to Delphi.  The short
> term aim is to be able to make calls into the R.dll from Delphi; the
> longer term aim is to play around with writing a Windows front-end
> with some of the features of the S-PLUS environment (e.g. scripts),
> and other features from other IDEs I've used (e.g. watch windows,
> popup values of variables selected by mouse, etc.)
> 
> I've got a port of the simple rterm.c sample front-end sort of
> working, but I need lower level access, and I'm having trouble getting
> any further.  Is this the place to ask technical questions on this, or
> should I ask somewhere else (or just not bug everyone, since I'm not
> working on Unix or in C)?

I suspect it is the best place, as most of your questions are about
R internals.  As for the R for Windows internals, probably only Guido 
knows, but you can read the code as I have to frequently.

> For example:
> 
> 1.  Syntax errors are causing my rterm to shut down, apparently
> because I'm not catching the exceptions that are thrown.  How are
> exceptions thrown?

I suspect that is just because you are not set up to run in interactive
mode (the internal variable R_Interactive).  The default error handler
does abort on error in non-interactive mode.  I don't know what your
`rterm' is, but rtest.c is specifically in non-interactive mode.
The real rterm.c sets R_Interactive based on isatty(0) and the --ess flag.
If you set interactive mode, you will need some way to interrupt,
and with a Windows front-end, the easiest way is to set UserBreak to
non-zero (which is equivalent to Ctrl-C on Unix or Esc in Rgui).

On my TODO list is to run more threads, so that there is a control
thread different from the one running the R interpreter.  Principally
to make interruption easier to handle, and to allow looping C code
to be interrupted.

> 2.  If I want to get R to give me a string showing how an existing
> variable would be printed, what's the normal procedure?  I tried
> calling "PrintValue", passing it the Rinternals export
> "R_LastvalueSymbol", but I just get an access violation in R.DLL.

That's a symbol, not a variable.  Section 3.6.7 of `Writing R Extensions'
may help: the key is to use findVar or one of the related functions.

> This could be because I'm not handling the export properly (DLLs
> normally export entry points, not pointers to variables, so I had to
> try to guess what indirection was being used here).  

Um. DLLs often export both.  Unfortunately, the mechanisms for *imports*
are messy, especially for exported pointers.  You need to refer to them as
_imp___blah, and that's purpose of globalvar.h.  There is no extra
indirection: apart from the name mapping they are handled just like
externs to other modules not in Dlls.

> Or I could be
> calling PrintValue at the wrong time.  Or something else.  How much
> needs to be set up in advance before PrintValue will work?

PrintValue can be called on a SEXP pointing to an R object: you may find
R_PV a little safer. (Both are in src/main/print.c.)  You will need
R_WriteConsole set up, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 15:49:03 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 10:49:03 -0400
Subject: [Rd] OS calls
Message-ID: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>

I've just been reviewing some functions in my syskern library. This library was
set up originally to provide me with a way to program around small R/S
differences  and to encapsulate some operating system requests in one place, so
that these problems would not be spread throughout my code.  Over the years the
need for many of the programs in this library has disappeared.

I have always worked in Unix but my hope was that other R users would implement
the operating system functions for other OSs. To some extent this has happened,
in the sense that many functions I once had in syskern are now handled in Rbase.
Most of the remaining functions are rather trivial or small variations on things
already done in Rbase, and I think it would be valuable for everyone if these
too could be added to Rbase. The most difficult of the functions is probably
mail, but that is already being done in bug.report(), so I am only suggesting
that it should be separated out of bug.report() and provided as a separate
function.

Below are my Unix implementations of remaining OS utilities.

Paul Gilbert
_______

sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
present.working.directory <- function(){system.call("pwd")} #present directory
local.host.netname <- function() {system.call("uname -n")}
whoami <- function(){system.call("whoami")} # return user id (for mail)
   # There are problems with different shells returning different results for
whoami when
   #    a user does  su to another name. It is probably better to use a C call
for this.
file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

file.date.info <- function(file.name)
     {# This could be a lot better. It will fail for files older than a year.
      # Also, a returned format like date() below would be better.
      mo <- (1:12)[c("Jan","Feb","Mar","Apr","May", "Jun","Jul","Aug", "Sep",
         "Oct","Nov","Dec") ==
          substring(system.call(paste("ls -l ",file)),33,35)]
      day <- as.integer(substring(system.call(paste("ls -l ",file.name)),37,38))

      hr  <- as.integer(substring(system.call(paste("ls -l ",file.name)),40,41))

      sec <- as.integer(substring(system.call(paste("ls -l ",file.name)),43,44))

      c(mo,day,hr,sec)
     }

# Except for tz this could use the date() function in R, but that may not be the
best way.
date.parsed <- function()
        {d<-parse(text=strsplit(
              system.call("date \'+%Y %m %d %H %M %S\'")," ")[[1]])
         list(y=  eval(d[1]),
              m=eval(d[2]),
              d= eval(d[3]),
              H= eval(d[4]),
              M= eval(d[5]),
              S= eval(d[6]),
              tz=system.call("date '+%Z'"))
        }

mail <- function(to, subject="", text="")
     {# If to is null then mail is not sent (useful for testing).
      file <- tempfile()
      write(text, file=file)
      if(!is.null(to))
         system.call(paste("cat ",file, " | mail  -s '", subject, "' ", to))
      unlink(file)
      invisible()
     }



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 16:16:13 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 16:16:13 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950D5DE.E3B7ED7D@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> I've just been reviewing some functions in my syskern library. This library was
> set up originally to provide me with a way to program around small R/S
> differences  and to encapsulate some operating system requests in one place, so
> that these problems would not be spread throughout my code.  Over the years the
> need for many of the programs in this library has disappeared.
> 
> I have always worked in Unix but my hope was that other R users would implement
> the operating system functions for other OSs. To some extent this has happened,
> in the sense that many functions I once had in syskern are now handled in Rbase.
> Most of the remaining functions are rather trivial or small variations on things
> already done in Rbase, and I think it would be valuable for everyone if these
> too could be added to Rbase. The most difficult of the functions is probably
> mail, but that is already being done in bug.report(), so I am only suggesting
> that it should be separated out of bug.report() and provided as a separate
> function.
> 
> Below are my Unix implementations of remaining OS utilities.
> 
> Paul Gilbert
> _______
> 
> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
we hide names like that behind a .Sys call (but then he introduced getwd).
There is already at least one object called sleep (a dataset) in an R
package.

> present.working.directory <- function(){system.call("pwd")} #present directory

Look at getwd!

> local.host.netname <- function() {system.call("uname -n")}
> whoami <- function(){system.call("whoami")} # return user id (for mail)
>    # There are problems with different shells returning different results for
> whoami when
>    #    a user does  su to another name. It is probably better to use a C call
> for this.

Those are not even meaningful on vanilla (non-networked) Windows systems. I
am not really sure why one would want them in general R code.

> file.copy <- function(from, to)system.call(paste("cp ", from, to)) #copy file

Easy: use file.create and file.append.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:42:05 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:42:05 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F05D.A40D22FD@bank-banque-canada.ca>

Brian

>> local.host.netname <- function() {system.call("uname -n")}
>> whoami <- function(){system.call("whoami")} # return user id (for mail)

>Those are not even meaningful on vanilla (non-networked) Windows systems. I
>am not really sure why one would want them in general R code.

I thought whoami was meanful on Windows NT even without a network, but in any
case it is true that I want it for a network environment. You could put in
somewhat meaningful defaults like "localhost" and "root", but I think most
people are on a network these days.

Thanks for pointing out some of the other things that are already working.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Jun 21 17:44:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 21 Jun 2000 12:44:26 -0400
Subject: [Rd] OS calls
References: <Pine.GSO.4.05.10006211606030.20536-100000@auk.stats>
Message-ID: <3950F0EA.413B6DF3@bank-banque-canada.ca>

P.S.
>> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds

>That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
>we hide names like that behind a .Sys call (but then he introduced getwd).
>There is already at least one object called sleep (a dataset) in an R
>package.

Changing these names is fine with me.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:06:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:06:50 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F05D.A40D22FD@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211904440.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> Brian
> 
> >> local.host.netname <- function() {system.call("uname -n")}
> >> whoami <- function(){system.call("whoami")} # return user id (for mail)
> 
> >Those are not even meaningful on vanilla (non-networked) Windows systems. I
> >am not really sure why one would want them in general R code.
> 
> I thought whoami was meanful on Windows NT even without a network, but in any

NT, yes, Win 9x, no, and Win 9x is > 90% of the market.

> case it is true that I want it for a network environment. You could put in
> somewhat meaningful defaults like "localhost" and "root", but I think most
> people are on a network these days.

I doubt it. DUN does not count as a network for these purposes, and indeed
the local and network IDs can be different even on NT (and frequently are).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jun 21 19:20:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 21 Jun 2000 19:20:58 +0100 (BST)
Subject: [Rd] OS calls
In-Reply-To: <3950F0EA.413B6DF3@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10006211917210.20797-100000@auk.stats>

On Wed, 21 Jun 2000, Paul Gilbert wrote:

> P.S.
> >> sleep <- function(n) {system.call(paste("sleep ", n))} # pause for n seconds
> 
> >That's on my TODO list (but allowing sub-sec accuracy). KH suggested that
> >we hide names like that behind a .Sys call (but then he introduced getwd).
> >There is already at least one object called sleep (a dataset) in an R
> >package.
> 
> Changing these names is fine with me.

BTW, your sleep function is a really bad idea in a GUI environment (GNOME
or tcltk or even an X11 graphics device) as it blocks all GUI events.  The
version I use for the Windows port of xgobi sleeps for 500ms, then wakes up
and handles Windows events, goes back to sleep .... S-PLUS runs its
graphics devices (on Unix) in separate processes, but R does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Thu Jun 22 15:43:26 2000
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221443.QAA22735@pubhealth.ku.dk>

Full_Name: Peter Malewski
Version: RW-1010
OS: w95
Submission from: (NULL) (193.174.111.250)


On w95b, de crashes rterm (with ess) when a vector with long strings appear:

for (i in 1:100){
  print(i)
  xx <- rep(paste(rep("a",i),collapse=""),10)
  de(xx)
}

crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I found
this by editing a data.frame with addresses).

Best wishes
P.Malewski



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Windows 9x 4.0 (build 1111)  C

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Jun 22 16:01:32 2000
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 22 Jun 2000 17:01:32 +0200 (MET DST)
Subject: [Rd] Re: [R] R 1.1 congrat; undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006221501.RAA22869@pubhealth.ku.dk>

I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.

	-p

Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:

> Hello,
> 
> first, I'd like to congratulate the core team to the new R version 1.1. I
> think it's a great update, with glimpses into an even greater future
> (tcltk!).
> 
> While playing around with the new functions (on Win 95), I found the
> following:
> 
> As the documentation states, when I generate a plot and save it with
> recordPlot, I can regenerate it by printing the variable:
> 
> > plot(1:10)
> > abline(h=5)
> > abline(v=5)
> > t.plot<-recordPlot()
> > t.plot
> 
> works perfectly.
> 
> Now, if I add further elements to this (regenerated) plot, they get drawn
> all right (I tested only abline()), which surprised me . But when I re-save
> the result, only the new additions get saved:
> 
> > abline(h=9)     # works (to my surprise)
> > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > str(t.plot2)
> 
> OK, so I thought I might regenerate the combined plot by
> 
> > t.plot   # worked
> > t.plot2 # cleared graph, but did nothing
> 
> I think it would be useful to be able to save and replay additions to a plot
> as well as complete plots. One might, for example, try out several additions
> to a basic plot (different kinds of regression lines, to give an example)
> and save the final version with the plot to move on and try out several
> legend placements etc., thus building up the final graph in several steps.
> 
> So it would be nice if either recordPlot could "update" a saved plot with
> new additions or if replayPlot could reproduce additions on another plot.
> 
> Just a suggestion (I hope I made myself clear).
> 
> 
> Kaspar
> 
> -- 
> 
> Kaspar Pflugshaupt
> Geobotanisches Institut
> Zuerichbergstr. 38
> CH-8044 Zuerich
> 
> Tel. ++41 1 632 43 19
> Fax  ++41 1 632 12 15
> 
> mailto:pflugshaupt@geobot.umnw.ethz.ch
> privat:pflugshaupt@mails.ch
> http://www.geobot.umnw.ethz.ch
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Jun 22 16:50:34 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 22 Jun 2000 16:50:34 +0100 (BST)
Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
Message-ID: <200006221550.QAA01867@toucan.stats.ox.ac.uk>


> From: p.malewski@tu-bs.de
> Date: Thu, 22 Jun 2000 16:43:26 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] de on w95b crash rterm with long strings (PR#577)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Peter Malewski
> Version: RW-1010
> OS: w95
> Submission from: (NULL) (193.174.111.250)
> 
> 
> On w95b, de crashes rterm (with ess) when a vector with long strings appear:
> 
> for (i in 1:100){
>   print(i)
>   xx <- rep(paste(rep("a",i),collapse=""),10)
>   de(xx)
> }
> 
> crashes at i=48. The length of the vector + vsize/nsize is irrelevant. (I 
found
> this by editing a data.frame with addresses).

Yes, there is a limit of 44 chars displayed in a field.  Will fix for the next
release (probably by limiting the cell width, which was limited when
this limit was set).

The bug potentially applies on Unix too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Fri Jun 23 08:10:24 2000
From: guido@sirio.stat.unipd.it (guido@sirio.stat.unipd.it)
Date: Fri, 23 Jun 2000 09:10:24 +0200 (MET DST)
Subject: [Rd] Re: undocumented behaviour of recordPlot (PR#578)
Message-ID: <200006230710.JAA26160@pubhealth.ku.dk>

On Thu, Jun 22, 2000 at 05:01:32PM +0200, p.dalgaard@biostat.ku.dk wrote:
> I think this is pretty certainly a bug, so I'm cc'ing this to r-bugs.
> 
> 	-p
> 
> Kaspar Pflugshaupt <pflugshaupt@geobot.umnw.ethz.ch> writes:
> > As the documentation states, when I generate a plot and save it with
> > recordPlot, I can regenerate it by printing the variable:
> > 
> > > plot(1:10)
> > > abline(h=5)
> > > abline(v=5)
> > > t.plot<-recordPlot()
> > > t.plot
> > 
> > works perfectly.
> > 
> > Now, if I add further elements to this (regenerated) plot, they get drawn
> > all right (I tested only abline()), which surprised me . But when I re-save
> > the result, only the new additions get saved:
> > 
> > > abline(h=9)     # works (to my surprise)
> > > t.plot2<-recordPlot # saves only the addition, as can be seen by:
> > > str(t.plot2)
> > 
> > OK, so I thought I might regenerate the combined plot by
> > 
> > > t.plot   # worked
> > > t.plot2 # cleared graph, but did nothing
> > 

  The problem is that main/plot.c:do_playDL doesn't set the device 
  diplay list. Inserting towards the beginning a line like
          dd->dipslayList = theList;
  works for me at least under Unix. I will commit it after testing
  under Windows.

  BTW, Kaspar, I have no Windows at hand in this moment but 
  does the problem manifest itself also with the plot history mechanism?
  E.g., (i) if you set (with the menu) the graphics window in 
  'recording mode', (ii) make some plots , (iii) go back to the
  first plot using 'PgUp', (iv) add some new elements to it and 
  (v) go to some other plot and then back to the first plot 
  with 'PgDown' and 'PgUp', the first plot you get is the modified one
  or not? Reason of the question is that replayng of the saved history
  is implemented in a different way.

  guido 





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:05:39 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:05:39 +0200 (CEST)
Subject: [Rd] MAINLD and SHLIBLD
Message-ID: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>

I would like to always use ${CC} for linking the main binary and the
shlibs.

Inspection of configure.in reveals that we currently deviate in the
following cases:

			mainld				shlibld
	aix[2-9]*	ld				ld
	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}
	hpux*		${CC}				ld

Does anyone recall why we do not use ${CC} in these cases?  Did anyone
successfully build R on these platforms with ${CC} for mainld/shlibld?
(Inspection of ltconfig from libtool seems to indicate that ${CC} should
be possible ...)

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jun 23 15:29:55 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 23 Jun 2000 16:29:55 +0200 (CEST)
Subject: [Rd] Re: [R] R and OpenBSD
In-Reply-To: <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
References: <p04320401b574dcb5f7c5@[134.76.136.114]>
 <Pine.GSO.4.05.10006201056320.23095-100000@auk.stats>
Message-ID: <14675.29795.986062.850729@aragorn.ci.tuwien.ac.at>

>>>>> Prof Brian D Ripley writes:

> On Tue, 20 Jun 2000, Ragnar Beer wrote:
>> Meanwhile I downloaded R-1.1.0.tgz and got the following error in the 
>> make step:

> Could you please not send such messages (twice as far as I can see)
> personally to members of R-core.  I am not the right persion for this
> error, and in general posting to R-devel is encouraged as it gets a
> wider pool of experts.

> I think you can solve this by undefining HAVE_MATHERR in
> config.h. Your correspondent's analysis seems wrong in detail to me:
> configure does not look in libm.a directly.

> I suspect we need a more elaborate test for MATHERR_BROKEN, but as I
> said, I am not the configure specialist.

Has anyone encountered a similar problem with matherr() on OpenBSD?
If so, can anyone recommend a test for matherr() to be broken?

-k

>> 
>> -----snip-----
>> making util.d from util.c
>> making version.d from version.c
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c apply.c -o apply.o
>> gcc -I. -I../../src/include -I../../src/include 
>> -I../../src/include/R_ext -I/usr/local/include -DHAVE_CONFIG_H 
>> -mieee-fp  -g -O2 -c arithmetic.c -o arithmetic.o
>> arithmetic.c:48: warning: `struct exception' declared inside parameter list
>> arithmetic.c:48: warning: its scope is only this definition or 
>> declaration, which is probably not what you want.
>> arithmetic.c: In function `matherr':
>> arithmetic.c:50: dereferencing pointer to incomplete type
>> arithmetic.c:59: dereferencing pointer to incomplete type
>> arithmetic.c:53: warning: unreachable code at beginning of switch statement
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main.
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src/main (line 131 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0/src (line 21 of Makefile).
>> *** Error code 1
>> 
>> Stop in /home/rbeer/src/R-1.1.0 (line 42 of Makefile).
>> -----snip-----
>> 
>> I also posted my question to the OpenBSD list and got this reply:
>> 
>> -----snip-----
>> From: Marc Espie <Marc.Espie@liafa.jussieu.fr>
>> To: Ragnar Beer <rbeer@uni-goettingen.de>
>> Cc: misc@openbsd.org
>> Subject: Re: Compiling Linux programs under OpenBSD?
>> Mail-Followup-To: Ragnar Beer <rbeer@uni-goettingen.de>, misc@openbsd.org
>> Sender: owner-misc@openbsd.org
>> X-Loop: misc@openbsd.org
>> 
>> I've looked, briefly. Its configure trips up on matherr. Specifically, it
>> only does a nm libm.a, finds matherr, and assumes it works. Unfortunately,
>> OpenBSD namespace is not squeaky clean (yet), and matherr is a private
>> function of libm: no user-visible prototype, no declaration of struct
>> exception, and hence failure.
>> -----snip-----
>> 
>> Hope this helps...
>> 
>> 
>> --Ragnar
>> 
>> 
>> >Ragnar Beer <rbeer@uni-goettingen.de> wrote:
>> >
>> >>  Has anybody successfully installed R under OpenBSD? I just tried to
>> >>  install the latest R-release under OpenBSD 2.7 and got the following
>> >>  errors in the make step:
>> >>  pnorm.c:62 'ML_ERR_return_NAN' undeclared
>> >>  pnorm.c:62 'ML_NAN' undeclared
>> >>  pnorm.c:62 'ML_NEGINF' undeclared
>> >
>> >The file pnorm.c is out-of-date in the current R-release.tar.bz2 (but not
>> >in the cvs archive). Please try R-1.1.0.tgz instead, or at least copy
>> >src/nmath/pnorm.c from R-1.1.0.tgz onto your unpacked copy of R-release.
>> >
>> >--
>> >Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> >Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> >University of Oxford,             Tel:  +44 1865 272861 (self)
>> >1 South Parks Road,                     +44 1865 272860 (secr)
>> >Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>> 
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Jun 23 17:03:13 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Jun 2000 12:03:13 -0400
Subject: [Rd] matlab2R, rats2R and gauss2R
Message-ID: <39538A41.664EB10F@bank-banque-canada.ca>

>From time to time I get request about some less than perfect scripts I posted on
S-new (a long time ago) for converting Matlab, Rats and Gauss code to S/R. More
often than not these requests are from Windows users who cannot figure out how
to use a Unix script that calls ex. It would be nice to have a CRAN email
facility that works like the f2c email site: accept code by email and return a
converted result. I can supply some scripts which are a reasonable start.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 17:34:15 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
Message-ID: <200006251634.SAA09674@pubhealth.ku.dk>

Dear R team,

I don't get what I think I should get when using anova.glm() with
family="gaussian" -- please ignore this and forgive me if this turns out
to be another example of a fundamental misunderstanding on my part (a
highly likely event!) For example: 

S <- as.factor(rep(c(rep("m",2),rep("f",2)),2))
A <- as.factor(c(rep("a",4),rep("b",4)))
y <- c(10,11,13,15,12,11,16,17)

f.glm.1 <- glm(y~A*S)
f.glm.2 <- glm(y~A+S)
anova(f.glm.1,f.glm.2,test="F")

# Analysis of Deviance Table 
#
# Response: y
#
#
#             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
# A + S + A:S         4      3.500                         
# A + S               5      4.625 -1    0.000 0.000      1

#  compared with the same analysis using anova.lm() below:

f.lm.1 <- aov(y~A*S)
f.lm.2 <- aov(y~A+S)
anova(f.lm.1,f.lm.2)

# Analysis of Variance Table
#
# Model 1: y ~ A + S + A:S
# Model 2: y ~ A + S
#   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
# 1      4      3.500                         
# 2      5      4.625 -1 -1.125  1.2857 0.3202


Thank you again for R and best regards,

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 18:42:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 19:42:36 +0200
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 18:34:15 +0200 (MET DST)"
References: <200006251634.SAA09674@pubhealth.ku.dk>
Message-ID: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> anova(f.glm.1,f.glm.2,test="F")

> #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> # A + S + A:S         4      3.500                         
> # A + S               5      4.625 -1    0.000 0.000      1
> 
> anova(f.lm.1,f.lm.2)

> #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> # 1      4      3.500                         
> # 2      5      4.625 -1 -1.125  1.2857 0.3202

Hum.. It is being done on purpose. anova.glmlist has this nugget
inside:

    table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
        pmax(0, -diff(resdev))))

This is obviously inconsistent with the lm version, but I wonder which
one is wrong? There may be a point in requiring models to be in
increasing order. However, something is clearly wrong with that too:

> anova(f.glm.2,f.glm.1,test="F")
...
            Resid. Df Resid. Dev Df Deviance      F Pr(>F)
A + S               5     4.6250                          
A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745

Notice the p value! This comes from an F with 2 df in the denominator
instead of 4. Comes out of this bit:

    if (!is.null(test)) {
        bigmodel <- object[[(rdf <- order(resdf)[1])]]
        dispersion <- summary(bigmodel, dispersion =
        dispersion)$dispersion
        df.dispersion <- if (dispersion == 1) 
            Inf
        else rdf

which is clearly wrong since rdf will be an integer between 1 and the
number of models compared...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:00:20 2000
From: rnassar@duke.edu (Rashid Nassar)
Date: Sun, 25 Jun 2000 15:00:20 -0400 (EDT)
Subject: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
In-Reply-To: <x2wvjd4pyr.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.3.91.1000625145600.247A-100000@bio3.acpub.duke.edu>

Many thanks for your reply.

For some reason I usually think about the models in decreasing order, and 
tend to list them that way in the argument to anova.  But as you noted 
that is not all of the problem.  Regarding the order: if there is a 
reason for requiring increasing order, then might it not be good to 
issue an error message or warning when the order used is wrong?

Thank you again!

Rashid



On 25 Jun 2000, Peter Dalgaard BSA wrote:

> Date: 25 Jun 2000 19:42:36 +0200
> From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
> To: rnassar@duke.edu
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] possible bug, anova.glm(), family="gaussian" (PR#579)
> 
> rnassar@duke.edu writes:
> 
> > anova(f.glm.1,f.glm.2,test="F")
> 
> > #             Resid. Df Resid. Dev Df Deviance     F Pr(>F)
> > # A + S + A:S         4      3.500                         
> > # A + S               5      4.625 -1    0.000 0.000      1
> > 
> > anova(f.lm.1,f.lm.2)
> 
> > #   Res.Df Res.Sum Sq Df Sum Sq F value Pr(>F)
> > # 1      4      3.500                         
> > # 2      5      4.625 -1 -1.125  1.2857 0.3202
> 
> Hum.. It is being done on purpose. anova.glmlist has this nugget
> inside:
> 
>     table <- data.frame(resdf, resdev, c(NA, -diff(resdf)), c(NA, 
>         pmax(0, -diff(resdev))))
> 
> This is obviously inconsistent with the lm version, but I wonder which
> one is wrong? There may be a point in requiring models to be in
> increasing order. However, something is clearly wrong with that too:
> 
> > anova(f.glm.2,f.glm.1,test="F")
> ...
>             Resid. Df Resid. Dev Df Deviance      F Pr(>F)
> A + S               5     4.6250                          
> A + S + A:S         4     3.5000  1   1.1250 1.2857 0.3745
> 
> Notice the p value! This comes from an F with 2 df in the denominator
> instead of 4. Comes out of this bit:
> 
>     if (!is.null(test)) {
>         bigmodel <- object[[(rdf <- order(resdf)[1])]]
>         dispersion <- summary(bigmodel, dispersion =
>         dispersion)$dispersion
>         df.dispersion <- if (dispersion == 1) 
>             Inf
>         else rdf
> 
> which is clearly wrong since rdf will be an integer between 1 and the
> number of models compared...
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 20:38:56 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)
Subject: [Rd] dotplot() colors reversed (PR#580)
Message-ID: <200006251938.VAA10074@pubhealth.ku.dk>


dotplot() colors are plotted (probably unintentionally?) in reverse order.

x <- c(rep(1,3),rep(2,3),rep(3,3))
dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Thank you very much.

Rashid Nassar

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rnassar@duke.edu  Sun Jun 25 21:04:16 2000
From: rnassar@duke.edu (rnassar@duke.edu)
Date: Sun, 25 Jun 2000 22:04:16 +0200 (MET DST)
Subject: [Rd] help screens: typos, suggestions (PR#581)
Message-ID: <200006252004.WAA10158@pubhealth.ku.dk>

Dear R team,

If I may offer some suggestions for specific help screens:

1.
help(plot.default):  shouldn't `type = "n"' be listed as a possible value?

also, would it be better to say, e.g., "the following values (rather than
'possibilities') are possible" ?

2.
help(glm) data: misprint (ffrom)

    data: an optional data frame containing the variables in the model.
           By default the variables are taken from the environment
          ffrom which `glm' is called.
         ^^^

3. 
help(all):  might it be helpful to add:

  "see also `any'"

and,

help(any)

  "see also `all'"  ?

Many thanks!

Rashid Nassar


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:MASS, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jun 25 22:37:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jun 2000 23:37:58 +0200
Subject: [Rd] dotplot() colors reversed (PR#580)
In-Reply-To: rnassar@duke.edu's message of "Sun, 25 Jun 2000 21:38:56 +0200 (MET DST)"
References: <200006251938.VAA10074@pubhealth.ku.dk>
Message-ID: <x2vgyxigqx.fsf@blueberry.kubism.ku.dk>

rnassar@duke.edu writes:

> dotplot() colors are plotted (probably unintentionally?) in reverse order.
> 
> x <- c(rep(1,3),rep(2,3),rep(3,3))
> dotplot(x,groups=factor(x),col=x)        # 1 plotted with col=3, etc.

Yes. This is caused by 

        o <- rev(order(as.numeric(groups)))
        x <- x[o]
        groups <- groups[o]

and no corresponding reordering of color. A little care is needed when
fixing this since color is not necessarily a vector. Same thing with
lcolor, by the way.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Jun 26 14:50:44 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 26 Jun 2000 15:50:44 +0200 (MET DST)
Subject: [Rd] lm.{w}fit(x,y,*) : fails when x has no column names (PR#582)
Message-ID: <200006261350.PAA18255@pubhealth.ku.dk>


(and bug.report() with vanilla setting is *REALLY* horrible inside ESS ... !)

> X <- matrix(rnorm(10),5,2)
> y <- rnorm(5)
> w <- rnorm(5)^2

> lm.fit (x=X, y=y) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector

> lm.wfit(x=X, y=y, w=w) ##-> error
Error in names<-.default(*tmp*, value = c("", "", "")) : 
	names attribute must be the same length as the vector
> 

--

Now, since  help(lm.fit) and help(lm.wfit) really do not contain any
information on these, one could argue that the above is not a bug.

However as build blocks for programming (many regressions),
these functions *should* work reasonably generally.

(I'm trying to fix this bug myself).

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ramin.nakisa@ncr.com  Mon Jun 26 19:06:40 2000
From: ramin.nakisa@ncr.com (ramin.nakisa@ncr.com)
Date: Mon, 26 Jun 2000 20:06:40 +0200 (MET DST)
Subject: [Rd] persp greek label problem (PR#583)
Message-ID: <200006261806.UAA19700@pubhealth.ku.dk>

Full_Name: Ramin Nakisa
Version: 1.1.0
OS: i386 linux
Submission from: (NULL) (192.127.94.7)


Labels created with expression seem to disappear, e.g. the x axis label in

x <- -6:16
contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
xlab=expression(theta[0]), ylab=expression(theta[1]))

and all three labels in

x <- -6:16
persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
zlab=expression(theta[2]), ticktype="detailed")


Is this just a clipping problem, with a large bounding box for expression=...?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:37:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:37:15 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <200006261806.UAA19700@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:

> Full_Name: Ramin Nakisa
> Version: 1.1.0
> OS: i386 linux
> Submission from: (NULL) (192.127.94.7)
> 
> 
> Labels created with expression seem to disappear, e.g. the x axis label in
> 
> x <- -6:16
> contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> xlab=expression(theta[0]), ylab=expression(theta[1]))
> 
> and all three labels in
> 
> x <- -6:16
> persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> zlab=expression(theta[2]), ticktype="detailed")
> 
> 
> Is this just a clipping problem, with a large bounding box for expression=...?

No. It's a bug in the C code.

It was reported and fixed last week, so it should be fixed in
R-patched on CRAN.

	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Jun 26 19:42:50 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 26 Jun 2000 11:42:50 -0700 (PDT)
Subject: [Rd] persp greek label problem (PR#583)
In-Reply-To: <Pine.GSO.4.21.0006261135060.14198-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0006261142200.14198-100000@atlas.biostat.washington.edu>

On Mon, 26 Jun 2000, Thomas Lumley wrote:

> On Mon, 26 Jun 2000 ramin.nakisa@ncr.com wrote:
> 
> > Full_Name: Ramin Nakisa
> > Version: 1.1.0
> > OS: i386 linux
> > Submission from: (NULL) (192.127.94.7)
> > 
> > 
> > Labels created with expression seem to disappear, e.g. the x axis label in
> > 
> > x <- -6:16
> > contour(outer(x, x), method = "edge", vfont = c("sans serif", "plain"),
> > xlab=expression(theta[0]), ylab=expression(theta[1]))
> > 
> > and all three labels in
> > 
> > x <- -6:16
> > persp(outer(x, x), xlab=expression(theta[0]), ylab=expression(theta[1]),
> > zlab=expression(theta[2]), ticktype="detailed")
> > 
> > 
> > Is this just a clipping problem, with a large bounding box for expression=...?
> 
> No. It's a bug in the C code.
> 
> It was reported and fixed last week, so it should be fixed in
> R-patched on CRAN.

Actually, it was only reported and fixed for two-d plots. It is probably
still broken for persp()

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Jun 27 08:11:36 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 27 Jun 2000 09:11:36 +0200 (MET DST)
Subject: [Rd] par(lty = "1") -- lty storage-etc bug (PR#584)
Message-ID: <200006270711.JAA22047@pubhealth.ku.dk>

Bug report, rather than R-help;
This is at least since 1.0.0; didn't try even older versions ..

    Jim> Anon wrote:

    Anon> ...However, if I use Fred <- c(1,"33")...  Is this a
    Anon> bug, or am I missing something?

this made use it  essentially something like   
      par(lty = "1")

    Jim> This is an interesting problem.  It boils down to the fact that
    Jim> PostScript expects an array (even if it's empty) and an offset for
    Jim> "setdash".  Normally, a solid line is specified with an empty
    Jim> array and zero offset.  However, if R gets specs that convert to
    Jim> zero and puts a zero in the array, the PostScript interpreter will
    Jim> barf.  Zero can appear, but there must be at least one non-zero
    Jim> number in the array.  Hexadecimal strings supplied to lty are
    Jim> converted to array elements, but a single character "1" seems to
    Jim> produce "0.00".  Remember that the c() operater will coerce the
    Jim> number 1 to the string "1" when combining it with "33".  That is,
    Jim> it's probably a bad idea to mix the two methods of specifying line
    Jim> types with "lty".

I think there's at least another (maybe the only one) bug in main/graphics.c
which is not related to postscript at all, see below.

    Jim> A possible fix is to insert a test for zero in the function
    Jim> SetLineStyle() - devPS.c:

 >> static void SetLineStyle(int newlty, double newlwd, DevDesc *dd)
 >> {
 >>     PostScriptDesc *pd = (PostScriptDesc *) dd->deviceSpecific;
 >>     int i, ltyarray[8];
 >>     int sum = 0;
 >>     if (pd->lty != newlty || pd->lwd != newlwd) {
 >>       pd->lwd = newlwd;
 >>       pd->lty = newlty;
 >>       PostScriptSetLineWidth(pd->psfp, dd->gp.lwd*0.75);
 >>       for(i = 0; i < 8 && newlty & 15 ; i++) {
 >>           ltyarray[i] = newlty & 15;
 >>           sum += ltyarray[i];
 >>           newlty = newlty >> 4;
 >>       }
 >>       if(!sum) i = 0;
 >>       PostScriptSetLineTexture(pd->psfp, ltyarray, i, dd->gp.lwd * 0.75);
 >>     }
 >> }

    Jim> producing a solid line when all elements of 'ltyarray' are zero.

yes, but I think this shouldn't be necessary.

The real bug is uglier:
If you use something like   par(lty="1")  
or any other one-letter (hex digit) string,
this leads to an invalid `code', and further, the storage location 
(such dd->lty in C) of that string somehow loses it's final string
terminator (\0 in C) and gets mangled.
I can reproduce this most easily with the following


for(i in seq(along=dev.list())) dev.off()
par(lty="1")
example(barplot) 
## (almost!) always ends in an error, see below,

## and then
for(i in 1:4) print(par("lty"))

--------

Note that in the Error message below,
    "invalid hex digit in color" 
has been changed in the very latest R-release sources to
    "invalid hex digit in color or lty" 
which is ``more helpful'' here :

> example(barplot) ## (almost!) always ends in an error, see below,

barplt> tN <- table(Ni <- rpois(100, lambda = 5))
barplt> r <- barplot(tN, col = "gray")

barplt> lines(r, tN, type = "h", col = "red", lwd = 2)
Error in plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...) : 
	invalid hex digit in color

> traceback()
[1] "plot.xy(xy.coords(x, y), type = type, col = col, lty = lty, ...)"         
[2] "lines.default(r, tN, type = \"h\", col = \"red\", lwd = 2)"               
[3] "lines(r, tN, type = \"h\", col = \"red\", lwd = 2)"                       
[4] "eval.with.vis(expr, envir, enclos)"                                       
[5] "eval.with.vis(ei, envir)"                                                 
[6] "source(zfile, echo = echo, prompt.echo = prompt.echo, verbose = verbose, "
[7] "    max.deparse.length = 250)"                                            
[8] "example(barplot)"                                                         

> for(i in 1:4) print(par("lty"))
[1] "1r"
[1] "1SI@}@gMG@\\}@\"J@}@U\\F@4}@?D@|@A@|@]G@|@(B@names"
[1] "1|@ult"
[1] "1"
> 

---------
Peter D., I'd like to learn how to use watchpoints to debug this...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Tue Jun 27 21:10:00 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Tue, 27 Jun 2000 22:10:00 +0200 (MET DST)
Subject: [Rd] MAINLD and SHLIBLD
In-Reply-To: <14675.28339.959408.881584@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.OSF.4.21.0006251512130.17819-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 23 Jun 2000, Kurt Hornik wrote:

> I would like to always use ${CC} for linking the main binary and the
> shlibs.
> 
> Inspection of configure.in reveals that we currently deviate in the
> following cases:
> 
> 			mainld				shlibld
> 	aix[2-9]*	ld				ld
> 	alpha*osf*	${FC} -g -nofor_main -fpe3	${FC}

I'm only speaking for alpha*osf*:

I think these settings have their roots in very old R versions, where we
had no means to determine the system dependent Fortran libraries (-lUfor
-lots ... for DEC compilers). Now it works without these settings, i.e. 
with mainld=shlibld=${CC}. 

With DEC compilers it still fails in a "make check" with 
  ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
  /bin/sh: 19080 Memory fault
but this is unrelated to shlibld and mainld settings, as it occurs the
same way with current settings. 

The combination gcc/g77 (version 2.95.2) works as before (successfull
"make check"), the nofor_main and fpe3 options where meaningless (and even
generated some warnings) for GNU compilers.

Here is what I did:  
agebhard@delta[R-1.2.0]$ diff configure.in.bak configure.in
630,633c630,635
<     mainld="${FC} -g -nofor_main -fpe3 "
<     cpicflags=
<     cxxpicflags=
<     shlibld=${FC}
---
>     if test "${GCC}" != yes; then
>   #    mainld="${FC} -g -nofor_main -fpe3 "
>       cpicflags=
>       cxxpicflags=
>   #    shlibld=${FC}
>     fi

DEC compilers have no PIC flags, thats the reason for setting them to "", 
but may be configure would guess this automatically.

This was with a current r-devel version, on alpha-dec-osf4.0e

Albrecht


> 	hpux*		${CC}				ld
> 
> Does anyone recall why we do not use ${CC} in these cases?  Did anyone
> successfully build R on these platforms with ${CC} for mainld/shlibld?
> (Inspection of ltconfig from libtool seems to indicate that ${CC} should
> be possible ...)
> 
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@sirio.stat.unipd.it  Wed Jun 28 14:57:38 2000
From: guido@sirio.stat.unipd.it (Guido Masarotto)
Date: Wed, 28 Jun 2000 15:57:38 +0200
Subject: [Rd] Re: [R] using graphapp.h
In-Reply-To: <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>; from vadim@kutsyy.com on Wed, Jun 28, 2000 at 08:28:45AM -0400
References: <20000628135107.C7950@sirio.stat.unipd.it> <OFEGJMACADMFOKHCCFBJAEONCIAA.vadim@kutsyy.com>
Message-ID: <20000628155738.A8378@sirio.stat.unipd.it>

On Wed, Jun 28, 2000 at 08:28:45AM -0400, Vadim Kutsyy wrote:
> What I need to do as to plot a few tens thousands squares of different
> colors.  As David mention, it can be done with polygon(), but it still be
> slow.  So I am trying to do it from c code.
> 
> As a result, I open the window with plot(), and then I want to plot in to
> that window from c code (in S it is done using "graphics.h").  The only
> thing I could think about, is to use "graphapp.h".  "graphapp.h" defines a
> lot of function for that (fillrect(rect r) for example), but I can not
> figure out how to make it grow in that window, which is already open by
> plot().
> 

  I move to r-devel.
  
  I am not sure that plotting directly on a graphics device is a
  safe idea. I see it as a little adventure. Anyway, 
  since I not against adventures, my 0.01Euro on what I know.

  A possibility is to call do_polygon - the C front end of the
  R 'polygon' function - directly from your C code.

  Another  portable alternative is clone do_polygon and friends. 
  You need to get a pointer to the current device driver and then you
  must use the device operation functions.
  Scheleton:
  #include "Graphics.h"
  .............
  DevDesc *dd = CurrentDevice() /* or GetDevice(number of device) */
  Then 
  (a) using GPolygon or similar function (in main/graphics.c )
   or 
  (b) dd->dp.polygon(...)  
  you can draw to the device (difference between (a) e (b) is that
  (b) calls directly the device).
  Essentially, (a)  is what do_polygon does.


  Alternatively, if you want, you can also call graphapp directly
  (but this isn't portable).
  A pointer to the graphapp window is hided in the DeviceSpecific part 
  of DevDesc. So, you need to copy the definition of 'gadesc' from devga.c. 
  Then 
  window w = ((gadesc *) dd->DeviceSpecific)->gawin;
  will give you the pointer.

  Keep in mind that, if I remember well Graphics.h is not 
  a part of the R API. Surely, the details
  of the DeviceSpecific part of a DevDesc are subject to changes.

  guido



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nopause.berkeley.edu  Thu Jun 29 10:44:17 2000
From: acuster@nopause.berkeley.edu (Adrian Vance Custer)
Date: Thu, 29 Jun 2000 02:44:17 -0700
Subject: [Rd] Question on an alternative to ls() and expanded R object types
Message-ID: <20000629024417.B9659@nopause.berkeley.edu>

Hello everyone,

This question and associated comments come from a desire for more sanity in
my object name space. These ideas may just be a whacky, way too difficult
to implement or already possible with existing functions.


Would it be possible to improve R's listing ability by adding the capability
to list objects by type, creation date, modification date, ancestry and/or
user comments?


Right now my object names are devoted to keeping track of these issues
rather gouping objects by subject. My object names have their types either as
prefixes or suffixes and my name space is structured whith A.~~ as storage
space, f.~~ as functions, p.~~ as plot scripts and working.~~ or z.~~ as
working.data. Then I use dummy variables, for instance, fxxxxxxxxxxxxxxxxxx~
to delimit the space between functions and plots. This is all done so that
ls() returns a well structured workspace. Note that my only organizational
structure is the alphbetical nature of the objects rather than object
attributes. Splus has solved these issues with the object browser which is
complex and non-intuitive. While eventually such a system could be created,
it is a large project.

ls() returns a vector of names which is useful for language constructs
(functions that might manipulate the listing) but perhaps less useful for
interactive use. It would be neat to be able to get a colorized list of
object names with colors assigned to object type. This would,of course,
require a color terminal. Alternatively, the listing could return a list
of name vectors for different types so that I could say, newls()$vectors,
and get the vectors. I've started working on something like this but it
has the look and feel of someone largely unfamiliar with the subtleties of
the language. (Note typeof(), and thereby mode(), does not differentiate
between lists and frames.)

Another luxury would be able to list the objects I've played with in the
past few days. Since this facility doesn't exist I have to be exceedingly
careful to remember the objects I have worked with recently. Similarly,
when I derive an object from another, I currently have to remember the
hierarchy. I am working mostly from a single large frame from which I
extract various pieces. I modify these pieces to attempt an analysis or
another but I must track both the objects and subobjects and the operations
that happened along the way. I envison something like the call object in
the model objects.  I suspect adding to each object its ancestry would
take up a fair amount of space but I have no real sense of the memory
requirements of such an addition.

The idea of a comment space may suffer similar difficulties of storage. I
sometime could use the ability to do
> z.vec.log.tsetse_(A.FRAME.tsela.300.cont$logtse,comment="First six samples")
so that the name space does not have to hold all the clues about the
object itself.

The newls() function I discuss earlier is implementable in
userspace. However, the other issues are not. I would be interested
to read your responses. Perhaps these issues can be solved with better
organization. If that is the case, I would like the learn this and get these
suggestions into the user documentation. Perhaps these issues only affect
me, or affect everyone but are huge coding efforts. I suspect getting color
into the terminal would be a large effort. Similarly, expanding the base
object with object histories, times and comments may be too much work. If I
remember correctly, there is a substantial difference between Splus5 objects
and earlier types which may be relevant to the ability to do such things.

Thank you for any responses,

adrian
acuster@nature.berkeley.edu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wsi@gcal.ac.uk  Thu Jun 29 09:16:27 2000
From: wsi@gcal.ac.uk (Bill Simpson)
Date: Thu, 29 Jun 2000 09:16:27 +0100 (BST)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.LNX.4.10.10006290912540.2519-100000@localhost.localdomain>


> suggestions into the user documentation. Perhaps these issues only affect
> me, or affect everyone but are huge coding efforts. I suspect getting color
Well, these issues don't affect me at all. (You said you wanted feedback).

Bill

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@bavaria.ece.cmu.edu  Thu Jun 29 13:11:41 2000
From: tov@bavaria.ece.cmu.edu (tov@bavaria.ece.cmu.edu)
Date: Thu, 29 Jun 2000 14:11:41 +0200 (MET DST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
Message-ID: <200006291211.OAA18674@pubhealth.ku.dk>

Hi,

  After the installation I can't search, clicking on "Search Engine &
  Keywords" gives me a 404, file not found.  I can concatenate 
  SearchEngine-head and -foot.html into SearchEngine.html which allows
  me to search, but I'm missing the key words.
  Finally the question:  What happened that SearchEngine.html is not
  generated at install time?  

  Thanks,
  -tom


P.S.  I quickly checked "?bug.report" to see its options.  The doc
    contains the "method" and "address" twice.  Do you want something
    trivial like this reported thru bug.report or is there another channel?
    Do you have a severity option for bug.reports?


--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Jun 29 13:34:14 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 29 Jun 2000 14:34:14 +0200 (CEST)
Subject: [Rd] Missing SearchEngine.html (PR#585)
In-Reply-To: <200006291211.OAA18674@pubhealth.ku.dk>
References: <200006291211.OAA18674@pubhealth.ku.dk>
Message-ID: <14683.16966.871882.23608@galadriel.ci.tuwien.ac.at>


>>>>> On Thu, 29 Jun 2000 14:11:41 +0200 (MET DST),
>>>>> tov  (t) wrote:

t> Hi,
t>   After the installation I can't search, clicking on "Search Engine &
t>   Keywords" gives me a 404, file not found.  I can concatenate 
t>   SearchEngine-head and -foot.html into SearchEngine.html which allows
t>   me to search, but I'm missing the key words.
t>   Finally the question:  What happened that SearchEngine.html is not
t>   generated at install time?  

t>   Thanks,
t>   -tom



There was a bug (already fixed in the patched release version) which
did not install SearchEngine.html (though it was built) when the build
directory was not the src directory.

If you did compile R yourself, could you get R-patched from CRAN and
see if the problem still exists?


t> P.S.  I quickly checked "?bug.report" to see its options.  The doc
t>     contains the "method" and "address" twice.  Do you want

Fixed.


t>     trivial like this reported thru bug.report or is there another
t>	channel?

The channel is correct.

t>     Do you have a severity option for bug.reports?

Not yet.

Best,
Fritz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Jun 29 15:21:33 2000
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 29 Jun 2000 16:21:33 +0200 (MET DST)
Subject: [Rd] PR#563 - fix installed
Message-ID: <200006291421.QAA20238@pubhealth.ku.dk>

Our thanks to Setzer Woodrow for an admirably thorough bug report.
His suggested fix of having formula.default check for an attribute
named "formula" in the object has been installed as a bug fix in R-1.1
-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 16:35:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 29 Jun 2000 08:35:51 -0700 (PDT)
Subject: [Rd] Question on an alternative to ls() and expanded R object
 types
In-Reply-To: <20000629024417.B9659@nopause.berkeley.edu>
Message-ID: <Pine.GSO.4.21.0006290820030.10459-100000@atlas.biostat.washington.edu>

On Thu, 29 Jun 2000, Adrian Vance Custer wrote:
> 
> Would it be possible to improve R's listing ability by adding the capability
> to list objects by type, creation date, modification date, ancestry and/or
> user comments?

As you point out, the listing by type could be done in userspace.  The
comments could also be done this way, and you could add creation and
modification dates by hand this way or with simple functions like the
following, which adds a comment and the date it was made

addComment<-function(x,commment){
	cc<-attr(x,"comment")
	if (is.null(cc))
	    cc<-list()
	cc[[length(cc)+1]]<-paste(comment,date)
	attr(x,"comment")<-cc	
	x
	}	

showComments<-function(x){
	cc<-attr(x,"comment")
	if (is.null(cc)) 
	   return("No Comment")
        else
	   cc
	}
 
> Another luxury would be able to list the objects I've played with in the
> past few days. Since this facility doesn't exist I have to be exceedingly
> careful to remember the objects I have worked with recently. Similarly,
> when I derive an object from another, I currently have to remember the
> hierarchy. I am working mostly from a single large frame from which I
> extract various pieces. I modify these pieces to attempt an analysis or
> another but I must track both the objects and subobjects and the operations
> that happened along the way. I envison something like the call object in
> the model objects.  I suspect adding to each object its ancestry would
> take up a fair amount of space but I have no real sense of the memory
> requirements of such an addition.

The problem here is not so much the space, since Unix time and date
information can be stored in 32 bits (at least until 2038), but the
time.  Adding a creation time to every object would probably have serious
effects on the speed of R (in addition to the amount of work it would
take to implement). That's why it's probably better to just use comments.

Storing a pointer to the parents of an object would be a real pain (since
it would require keeping track of what objects were evaluated to do each
modification) and to do it properly would require keeping old versions of
the objects.

Something less general but more useful is probably to keep ESS transcripts
of sessions, which can then be replayed if the data changes. Some R
developers and others are interested in this sort of idea as 'Literate
Data Analysis' by analogy with Literate Programming.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Jun 29 17:49:37 2000
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 29 Jun 2000 18:49:37 +0200 (MET DST)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
Message-ID: <200006291649.SAA21319@pubhealth.ku.dk>


Under Windows, system.file() can return a path with both / and \\
characters (R 1.0.0)
eg
> system.file("libs",pkg="modreg")
"C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"

This is fine when passed to R functions but not when passed to eg Tcl.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jun 29 18:03:17 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 29 Jun 2000 18:03:17 +0100 (GMT Daylight Time)
Subject: [Rd] system.file on Windows, / vs \\ (PR#586)
In-Reply-To: <200006291649.SAA21319@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.05.10006291756380.337-100000@tern.stats>

On Thu, 29 Jun 2000 thomas@biostat.washington.edu wrote:

> 
> Under Windows, system.file() can return a path with both / and \\
> characters (R 1.0.0)
> eg
> > system.file("libs",pkg="modreg")
> "C:\\PROGRA~1\\R\\rw1000/library/modreg/libs"
> 
> This is fine when passed to R functions but not when passed to eg Tcl.

Yes, but the bug is in TCL, not R!  Such paths are valid paths on Windows,
with \ being preferred, but TCL does not accept paths containing \, which I
find pretty amazing.  I am not sure it handles drives properly, either.

In a few cases / or \ is required, so you will see gsub used quite
frequently in Windows R code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Jun 29 18:46:25 2000
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 29 Jun 2000 13:46:25 -0400
Subject: [Rd] Binary file functions in R
Message-ID: <395c8897.556056@fisher.stats.uwo.ca>

This is just to let people know that I'm going to try to put together
a little package of binary file read/write functions for R, along the
lines described in my message in r-help.  I'm going to do it first in
R for Windows using a DLL written in Delphi; I'll let people comment
on that, and once the design settles down, I'll redo the external code
in C so that it should be portable to Unix as well.

One immediate change from my first pass suggestion below:

I'll just have readint, readfloat, readchar; the size and whether
signed or unsigned will be determined by parameters to those
functions.

Other suggested changes are welcome!

Duncan Murdoch

>I think a set of stream like functions would be really handy
>sometimes, especially for those of us who aren't that comfortable with
>the external function interface.
>
>For example:
>
>fopen would take a filename and some information about the open mode
>(read and write would probably be enough modes) and would return a
>file handle.
>
>readint8, readint16, readint32, readint64 would read a specified count
>of integers into an integer vector.
>
>readfloat4, readfloat8 would read a specified count of floating point
>values into a vector of doubles.
>
>readchar would read a specified count of characters into a single
>component character vector, or take two counts, and read n characters
>m times into an m component vector.
>
>There would be similar writexxxx functions, a seek function, and an
>fclose function.
>
>Some issues to consider would be whether these functions should worry
>about big vs. little endian storage (I'd say probably not, but there
>should be other functions that can change it in memory), how errors
>should be handled, whether the garbage collector should be smart
>enough to automatically close an abandoned file, whether you should be
>allowed to use these low level functions on things in memory or just
>on files, etc.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Jun 29 21:45:42 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 29 Jun 2000 16:45:42 -0400
Subject: [Rd] more Rd ordering
Message-ID: <395BB576.E1BAB8D0@bank-banque-canada.ca>

Although the ordering from Rdindex and R CMD build now agrees when I run them at
a command prompt, for some reason Rdindex now gives a different order when it is
run at a command prompt than it does when it is run from make. My Makefile entry
is:

%/INDEX : %/man
 @echo "making target $@ ..."
 (cd $(dir $@) ; R  CMD    Rdindex man/*.Rd >INDEX )

Any ideas?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Jun 30 05:33:50 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 30 Jun 2000 04:33:50 GMT
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c8897.556056@fisher.stats.uwo.ca>
References: <395c8897.556056@fisher.stats.uwo.ca>
Message-ID: <395c1fdc.944518@julian.uwo.ca>

I've put together the first version of "Rstreams", a package that
allows binary access to files.  This version is for Windows only.
You can pick it up as
<http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
Comments are welcome!

Some known problems:

I tried to set it up as a package, but couldn't figure out from the
documentation where the .DLL should go.  It's sitting in the src
directory for now.

There are other things wrong with the organization as a package; R
says "no R code found" when I try to attach it.  If you want to use
it, you'll have to source the Rstreams.R file and dyn.load the DLL
yourself.

I used the .C() interface to external functions, but I'm not sure how
it handles character vectors being returned from DLLs.  I'm sticking
string pointers into the result vector, which is likely to cause
memory problems, since I don't use Ralloc to allocate the strings.
How are you supposed to return a string value?  (This only applies to
the print method; it needs to find out the filename.  The readchar
method pre-allocates the space that's needed and uses that.)

The routines that I've implemented so far are:

openstream
closestream
print.stream
readint
readfloat
readchar
writeint
writefloat
writechar
seek
truncate

One other comment for Robert G.::

Most of the information about a stream variable is kept in the DLL.
All that R gets is a handle.  This means you're safe to make
assignments of stream variables to other variables; both refer to the
same stream object in the DLL.  That's how I think environments should
be handled.

Again, comments are welcome!

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jun 30 07:22:51 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 30 Jun 2000 07:22:51 +0100 (BST)
Subject: [Rd] Binary file functions in R
In-Reply-To: <395c1fdc.944518@julian.uwo.ca>
Message-ID: <Pine.GSO.4.05.10006300717310.3250-100000@auk.stats>

On Fri, 30 Jun 2000, Duncan Murdoch wrote:

> I've put together the first version of "Rstreams", a package that
> allows binary access to files.  This version is for Windows only.
> You can pick it up as
> <http://www.stats.uwo.ca/faculty/murdoch/software/rstreams.zip>.
> Comments are welcome!
> 
> Some known problems:
> 
> I tried to set it up as a package, but couldn't figure out from the
> documentation where the .DLL should go.  It's sitting in the src
> directory for now.

It is not intended to be in the source of a package. Once the package is
compiled, the DLL goes in the libs directory.

> There are other things wrong with the organization as a package; R
> says "no R code found" when I try to attach it.  If you want to use
> it, you'll have to source the Rstreams.R file and dyn.load the DLL
> yourself.

Yes, you need to compile the package before using library() on it
(and that converts the help files too).

> I used the .C() interface to external functions, but I'm not sure how
> it handles character vectors being returned from DLLs.  I'm sticking
> string pointers into the result vector, which is likely to cause
> memory problems, since I don't use Ralloc to allocate the strings.
> How are you supposed to return a string value?  (This only applies to
> the print method; it needs to find out the filename.  The readchar
> method pre-allocates the space that's needed and uses that.)

You do need to use Ralloc to allocate storage for strings.  The .C
interface copies the strings on the way in and out, so the memory
needs to be de-allocated after the copy.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Jun 30 19:15:51 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 30 Jun 2000 20:15:51 +0200 (MET DST)
Subject: [Rd] dim(a <- ...) sets invisible flag erronously (PR#587)
Message-ID: <200006301815.UAA02861@pubhealth.ku.dk>

{Nothing really harmful;  R 1.1.0}

dim(.) sets (or doesn't clear) the  ``invisible flag'' for printing in
certain circumstances:

  > dim(a <- cbind(1))
  >

does *not* print as it should :

  > dim(a)
  [1] 1 1

---

Question to the real "hackers" :

How can I check this using R code alone (not using files),
i.e. (how) can I ask an R expression if its ``invisible flag'' is set or not ?

{help(invisible) doesn't help here}.

Maybe one would want an

      is.invisible(.)

function?

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

