From kleiweg@let.rug.nl  Wed May  1 00:17:10 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:17:10 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.58586.18835.665434@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > In either case, you probably want to upgrade. Even 5.005 is "old",
> > so the upgrade to 5.6.1 is probably advisable.
>
> Correct.  R 1.6 will unconditionally assume 5.005.

I am sorry to hear that.

> >> 1.4.1 instead. Can I expect this to cause any problems, for
> >> instance when I build a package?
>
> > Possibly, though probably only Kurt et al could say for sure.
>
> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> 5.6.1.

Unfortunately, that is not an option at the moment. I guess most
people working with R are professionals with the means to work
with relative new hardware. I have to make do with a very old
system, a disk drive that is almost full, so no possibility to
compile a recent version of gcc, or upgrade anything that
demands a C compiler that is not from last century.

I write quite some software myself. Working with an old system
like I have has the advantage that I never hear people complain
that my software doesn't work on their system because there
system is too old.

But I have to accept that my system, for the time it keeps
working, is becoming state-of-the-art-long-gone.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 00:35:09 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:35:09 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15566.58739.585706.678109@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > I had to edit tkConfig.sh to solve this problem. This line:
>
> > TK_XINCLUDES='# no special path needed'
>
> > changed to this:
>
> > TK_XINCLUDES=
>
>
> > After this fix, R was configured for tcl/tk, and the package
> > tcltk seems to work OK (at least on this platform).
>
> A bug in your Tcl/Tk installation, I think.

If it is, it never caused any problem before, with older
versions of R.

> Which version of Linux is this?

This is on a recent distro of SuSE. Don't know what version. The
kernel is 2.4.4-4GB from May 2001. The same problem occured on
HP-UX 10.20 (July 1996).

The problem did not occur on an older version of SuSE for Alpha
from November 1999, or my own RedHat 5.0 (November 1997, I
think).

These are the same four systems mentioned in bug report PR#1499
about unresolved symbols for tcltk.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Elvie6761q57@dolfijn.nl  Wed May  1 23:34:49 2002
From: Elvie6761q57@dolfijn.nl (Elvie6761q57@dolfijn.nl)
Date: Wed, 01 May 2002 12:34:49 -1000
Subject: [Rd] To interested parties.
Message-ID: <026a22d10a6c$8137c7d8$5ca00bd2@nummmp>

------=_NextPart_000_00A5_83A62A4B.B1860A75
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: base64


Vm9sdW1lIE92ZXIgMS4yIFRyaWxsaW9uIERvbGxhcnMgYSBEYXkgDQpUYXAg
aW50byB0aGUgaGlnaC1pbmNvbWUgb3Bwb3J0dW5pdHkNCmZvdW5kIGluIHRo
ZSBXb3JsZCdzIGxhcmdlc3QgZmluYW5jaWFsIG1hcmtldC4gDQoNClRoZSBG
b3JlaWduIEN1cnJlbmN5IE1hcmtldHMNCg0KLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCg0KRGlzY292ZXIgaG93Og0KJDEwLDAwMCAi
cHJvcGVybHkgcG9zaXRpb25lZCIgaW4gdGhlIEV1cm8gdnMuIHRoZSBVUyBE
b2xsYXIsDQpjb3VsZCBwb3RlbnRpYWxseSBtYWtlIGEgMjAtMzBrIG1vdmUg
d2l0aGluIDYtOCBtb250aHMhDQoNCkxlYXJuIGhvdyBzdWNjZXNzZnVsIHBy
b2Zlc3Npb25hbCB0cmFkZXJzIGFzc2lzdGluZyB5b3UgY2FuIHBvdGVudGlh
bGx5DQphY2hpZXZlIGRvdWJsZS1kaWdpdCBtb250aGx5IHJldHVybnMgb2Yg
MTAtMzAlIG9yIG1vcmUhDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQoNCkZvciBhIEZSRUUgRVVSTyByZXBvcnQuDQpDbGljayBv
biB0aGUgbGluayBiZWxvdy4gDQoNCmh0dHA6Ly93d3cuaW52ZXN0bWVudDR1
LmNvbS9DdXJyZW5jeUV4Y2hhbmdlLw0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KDQpUbyBiZSB0YWtlbiBvZmYgb3VyIG1haWxp
bmcgbGlzdC4NCg0KaHR0cDovL3d3dy5pbnZlc3RtZW50NHUuY29tL3Rha2Vt
ZW9mZi8NCg0KNzM4NVBQREcwLTcyN3VxR0IwOTM5a3RHTTgtODYxR2JydTk3
MDVlclJTNS0xOTBtVHZVbDQ4
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:07:45 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:07:45 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
References: <15566.58739.585706.678109@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
Message-ID: <15567.48753.173522.300608@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > I had to edit tkConfig.sh to solve this problem. This line:
>> 
>> > TK_XINCLUDES='# no special path needed'
>> 
>> > changed to this:
>> 
>> > TK_XINCLUDES=
>> 
>> 
>> > After this fix, R was configured for tcl/tk, and the package
>> > tcltk seems to work OK (at least on this platform).
>> 
>> A bug in your Tcl/Tk installation, I think.

> If it is, it never caused any problem before, with older versions of
> R.

Interesting.  My tkConfig.sh has

# -I switch(es) to use to make all of the X11 include files accessible:
TK_XINCLUDES='-I/usr/X11R6/include'

and I would not think that '# no special path needed' is a valid switch.

If this problem persists acroess platforms we can work around it but I
must say that Tcl/Tk configuration testing is getting a bit silly after
all.

>> Which version of Linux is this?

> This is on a recent distro of SuSE. Don't know what version. The
> kernel is 2.4.4-4GB from May 2001. The same problem occured on
> HP-UX 10.20 (July 1996).

> The problem did not occur on an older version of SuSE for Alpha
> from November 1999, or my own RedHat 5.0 (November 1997, I
> think).

Maybe we did not use TK_XINCLUDES then.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:11:34 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:11:34 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
References: <15566.58586.18835.665434@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <15567.48982.979129.244967@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > In either case, you probably want to upgrade. Even 5.005 is "old",
>> > so the upgrade to 5.6.1 is probably advisable.
>> 
>> Correct.  R 1.6 will unconditionally assume 5.005.

> I am sorry to hear that.

>> >> 1.4.1 instead. Can I expect this to cause any problems, for
>> >> instance when I build a package?
>> 
>> > Possibly, though probably only Kurt et al could say for sure.
>> 
>> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
>> 5.6.1.

> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

> I write quite some software myself. Working with an old system
> like I have has the advantage that I never hear people complain
> that my software doesn't work on their system because there
> system is too old.

Following the same reasoning, wouldn't one always stay with R 0.14 or
similar?  Note that e.g. requiring Perl 5.005 only has implications for
*developers* and not for users because we have no dependency on Perl at
run-time.  And the hope would be that developers have access to software
which is 4 years old and typically available in pre-packaged binaries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 12:27:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 12:27:24 +0100 (BST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.31.0205011221510.10970-100000@gannet.stats>

On Wed, 1 May 2002, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > > In either case, you probably want to upgrade. Even 5.005 is "old",
> > > so the upgrade to 5.6.1 is probably advisable.
> >
> > Correct.  R 1.6 will unconditionally assume 5.005.
>
> I am sorry to hear that.
>
> > >> 1.4.1 instead. Can I expect this to cause any problems, for
> > >> instance when I build a package?
> >
> > > Possibly, though probably only Kurt et al could say for sure.
> >
> > As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> > 5.6.1.
>
> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

I think we are almost all amateurs at computing.  Certainly most of my R
development is done on machines bought with my own money, the main ones
being 4 and 3 years' old respectively.

I think the solution may be to not upgrade R either!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:12:38 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:12:38 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15567.48753.173522.300608@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011406510.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:
>
> > Kurt Hornik scribeva...
> >> > I had to edit tkConfig.sh to solve this problem. This line:
> >>
> >> > TK_XINCLUDES='# no special path needed'
> >>
> >> > changed to this:
> >>
> >> > TK_XINCLUDES=
> >>
> >>
> >> > After this fix, R was configured for tcl/tk, and the package
> >> > tcltk seems to work OK (at least on this platform).
> >>
> >> A bug in your Tcl/Tk installation, I think.
>
> > If it is, it never caused any problem before, with older versions of
> > R.
>
> Interesting.  My tkConfig.sh has
>
> # -I switch(es) to use to make all of the X11 include files accessible:
> TK_XINCLUDES='-I/usr/X11R6/include'
>
> and I would not think that '# no special path needed' is a valid switch.
>
> If this problem persists acroess platforms we can work around it but I
> must say that Tcl/Tk configuration testing is getting a bit silly after
> all.

Of course it is a bug in tkConfig.sh. But since I encountered it
on two out of four platforms, one very old, one new, it could be
a problem more people will run into. Whether this is something
the configure script of R should take care of is something I
don't have an opinion about.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:33:04 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:33:04 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15567.48982.979129.244967@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:

> > I write quite some software myself. Working with an old system
> > like I have has the advantage that I never hear people complain
> > that my software doesn't work on their system because there
> > system is too old.
>
> Following the same reasoning, wouldn't one always stay with R 0.14 or
> similar?  Note that e.g. requiring Perl 5.005 only has implications for
> *developers* and not for users because we have no dependency on Perl at
> run-time.  And the hope would be that developers have access to software
> which is 4 years old and typically available in pre-packaged binaries.

Of course R should be developed further. But requiring Perl
5.005 does effect end users. I have stopped downloading
binaries long ago, because they never work on older systems. So
just to use R, I have to compile R myself. And just installing
the recommended packages for R 1.5.0 needs Perl 5.005.

And what about new or upgraded packages? Do you ask users
to reinstall R just because they want to add a package, or do
you keep packages compatible with older versions of R? I always
go for backward compatibility as much as possible when I'm
developing software.

Of course, my system is very old. There won't be many people
left working with such an old system. I can understand you have
to draw the line somewhere. But the package 'tcltk' won't work
on a system just over two years old. I guess this will be a
problem for many people.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:12:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:12:04 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
Message-ID: <87helsovvf.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    peter> Of course, my system is very old. There won't be many people
    peter> left working with such an old system. I can understand you have
    peter> to draw the line somewhere. But the package 'tcltk' won't work
    peter> on a system just over two years old. I guess this will be a
    peter> problem for many people.

Sure, but there are perfectly great stat language/packages which are
small, compilable, and work like a charm, without some of the great
benefits of R.

XLispStat comes to mind, and in fact, has had functional
cross-platform widgets for a while.

Of course, there is always S-PLUS.  It doesn't require building,
and may be comparable to a full installation of R, depending on what
that means to you.

It seems like it might be worth reconsidering your software platform
in light of your hardware requirements.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ale@ini.phys.ethz.ch  Wed May  1 14:23:16 2002
From: ale@ini.phys.ethz.ch (ale@ini.phys.ethz.ch)
Date: Wed, 1 May 2002 15:23:16 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011323.PAA27271@pubhealth.ku.dk>

Full_Name: Alessandro Usseglio V.
Version: 1.5.0
OS: Linux RH 7.1
Submission from: (NULL) (130.60.71.55)


Error during configure

$ ./configure

[...]
checking for an ANSI C-conforming const... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for long long... yes
checking size of long long... 8
checking for long double... yes
checking size of long double... 12
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from fort77... --verbose
checking for Fortran 77 libraries...
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore, extra
underscore
checking whether fort77 and gcc agree on int and double... configure: WARNING:
fort77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?
$

>From `config.log'

configure:14869: checking whether fort77 and gcc agree on int and double
conftestf.f:
   cftest:
conftestf.o: In function `cftest_':
/disks/zebra3/ale/Local/temp/R-1.5.0/conftestf.f:9: undefined reference to
`pow_di'collect2: ld returned 1 exit status
configure:14942: WARNING: fort77 and gcc disagree on int and double
configure:14944: error: Maybe change CFLAGS or FFLAGS?

I hope that's enough to understand why I cannot configure.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 14:32:37 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 15:32:37 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <87helsovvf.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>

A.J. Rossini scribeva...

> Sure, but there are perfectly great stat language/packages which are
> small, compilable, and work like a charm, without some of the great
> benefits of R.
>
> XLispStat comes to mind, and in fact, has had functional
> cross-platform widgets for a while.
>
> Of course, there is always S-PLUS.  It doesn't require building,
> and may be comparable to a full installation of R, depending on what
> that means to you.
>
> It seems like it might be worth reconsidering your software platform
> in light of your hardware requirements.

It seems some people think I am criticising the development of R
because it won't work (in some time) on my machine. That is not
the case. My comments are meant in general, as something to
think about. My only interest is in helping the development of
R, with the limited suggestions I can offer.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 14:49:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 15:49:41 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011349.PAA27465@pubhealth.ku.dk>

First, this is not a bug in R, so please don't use the BUGS database for
errors on your own system.

The message actually means that fort77 is not working properly: some
library is missing.

On Wed, 1 May 2002 ale@ini.phys.ethz.ch wrote:

> Full_Name: Alessandro Usseglio V.
> Version: 1.5.0
> OS: Linux RH 7.1
> Submission from: (NULL) (130.60.71.55)

Please install g77 and try again.  On RH7.2 it is in rpm  gcc-g77-2.96-98.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:55:22 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:55:22 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
Message-ID: <87y9f4nfat.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    >> It seems like it might be worth reconsidering your software platform
    >> in light of your hardware requirements.

    peter> It seems some people think I am criticising the development of R
    peter> because it won't work (in some time) on my machine. That is not
    peter> the case. My comments are meant in general, as something to
    peter> think about. My only interest is in helping the development of
    peter> R, with the limited suggestions I can offer.

No, the general issue is that software construction is difficult.
There are tradeoffs, and your comments actually are more specific than
general, bringing up a situation which is not necessarily common.

People do want to have ancient software supported.  I.e. with ESS, we
ended up supporting truly ancient, unbuildable (on modern compiler
platforms) software, i.e. Emacs 19.28, because it was what DEC
shipped, and a vocal (SMALL) minority wanted it.  It crippled (but
didn't halt) development of some rather useful features, because of
lisp-level functionality that was introduced by the end of 19.xx
series, Emacs 19.34, which was deployed around 1995 or so (I'd have to
check dates, but its ancient).  In retrospect, we should've nuked
support in 1999 (not 2001).

I don't feel that your comments are critical, but I do feel that they
aren't addressing the point (well, it's one, anyway), which is how to
get a usable system built and deployed given the constraints of all
(developers and users) involved.  Your constraints are not really
solvable (want R 1.5+, and Perl 4..), and hence, I suggested (modern,
functional) tools which may solve it, of course introducing a
completely different (and unevaluated) set of tradeoffs...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lsjensen@micron.com  Wed May  1 17:35:04 2002
From: lsjensen@micron.com (lsjensen)
Date: Wed, 1 May 2002 10:35:04 -0600
Subject: [Rd] converting #sec to POSIX* format
Message-ID: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>

Sure I'm missing something simple here, but I haven't been able to find a
easy way to convert a pure numeric (# of seconds since the beginning of
1970) back into a POSIX* object. 

ex.
> z<-as.POSIXct(Sys.time()) 
> z
[1] "2002-05-01 10:33:56 Mountain Daylight Time"
> x<-unclass(z)
> x
[1] 1020270836

Is there a simple way to transform x back into a POSIX* object similar to z?

Landon Jensen
Micron Technology, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  1 17:53:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 May 2002 18:53:44 +0200
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
References: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
Message-ID: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>

lsjensen <lsjensen@micron.com> writes:

> Sure I'm missing something simple here, but I haven't been able to find a
> easy way to convert a pure numeric (# of seconds since the beginning of
> 1970) back into a POSIX* object. 
> 
> ex.
> > z<-as.POSIXct(Sys.time()) 
> > z
> [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > x<-unclass(z)
> > x
> [1] 1020270836
> 
> Is there a simple way to transform x back into a POSIX* object similar to z?

> 1020270836 + ISOdate(1970,1,1,0,0)
[1] "2002-05-01 18:33:56 CEST"


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 18:32:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 18:32:31 +0100 (BST)
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0205011830210.31101-100000@gannet.stats>

On 1 May 2002, Peter Dalgaard BSA wrote:

> lsjensen <lsjensen@micron.com> writes:
>
> > Sure I'm missing something simple here, but I haven't been able to find a
> > easy way to convert a pure numeric (# of seconds since the beginning of
> > 1970) back into a POSIX* object.
> >
> > ex.
> > > z<-as.POSIXct(Sys.time())

It's POSIXct already.

> > > z
> > [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > > x<-unclass(z)
> > > x
> > [1] 1020270836
> >
> > Is there a simple way to transform x back into a POSIX* object similar to z?
>
> > 1020270836 + ISOdate(1970,1,1,0,0)
> [1] "2002-05-01 18:33:56 CEST"

Or, as you did unclass(), reverse that by classing it:

class(x) <- c("POSIXt", "POSIXct")

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Wed May  1 19:45:41 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Wed, 1 May 2002 11:45:41 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.SOL.4.31.0205011141440.9179-100000@pooh.Berkeley.EDU>

Okay, I found the cause of the problem. Because mandrake 8.2 shipped with
a prerelease of g77 library,

    __G77_LIBU77_VERSION__: 0.5.26 20000731 (prerelease)

after upgrading to

    __G77_LIBU77_VERSION__: 0.5.26 20020220 (release)

then the segmentation error disappeared. I suspect other mandrake 8.2
users will experience the same problem.

Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  1 21:39:45 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 1 May 2002 16:39:45 -0400
Subject: [Rd] Problems with embedded R for v1.5.0
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C42@Groexmbcr10.pfizer.com>


I've just tried using both Duncan's RSPython and Walter Moriera's rpy with R
1.5.0.  Both segfaulted during startup in exactly the same place,
apparently while trying to load the ctest package.  Recompiling the packages
doesn't seem to have any effect on this outcome.

Here's the first few lines of a gdb backtrace:

#0  0xff132df8 in strlen () from /usr/lib/libc.so.1
#1  0xfe612bcc in Rf_mkChar (name=0x12a46d9 <Address 0x12a46d9 out of
bounds>)
    at dstruct.c:102
#2  0xfe5f5f40 in do_readDCF (call=0x0, op=0xffffffff, args=0x950ce0, 
    env=0x954370) at dcf.c:109
#3  0xfe64d010 in do_internal (call=0xfe7694f4, op=0x12b9c4, args=0x950ce0, 
    env=0x9503b8) at names.c:1020

(I can provide the full trace if desired)

Has anyone else found problems with embedded R with version 1.5.0?  Did
anything change in the proper way to start up embedded R?

-Greg

Obligatory version info:

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status   Patched             
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      30                  
language R                   

> uname -a 
SunOS gsun124 5.8 Generic_108528-03 sun4u sparc SUNW,Ultra-5_10

> gcc -v
Reading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/2.95.2/specs
gcc version 2.95.2 19991024 (release)





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonin@genethon.fr  Thu May  2 08:30:08 2002
From: gonin@genethon.fr (gonin@genethon.fr)
Date: Thu, 2 May 2002 09:30:08 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020730.JAA00989@pubhealth.ku.dk>

Hi R colleagues,

I don't know whether this is a bug, but something weird happen with R-GNOME.
Version 1.5.0.
I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
R can be started with or without the Gnome interface: fine.
However, when I start with Gnome interface, jpeg and a few other 
things are unavailable (checked using capabilities()), whereas 
everything is available (except Gnome) when I start R without Gnome.
Also, some calls seem available with Gnome: system("..") returns nothing.
Maybe this is related to the experimental nature of the Gnome interface.
Hope that helps.
Cheers,
-- 
----------------------------
Patrick Gonin, DVM, PhD
Head of in vivo Evaluation Dept
Généthon
1 bis, rue de l'Internationale- BP 60
91002 EVRY CEDEX
FRANCE
Tel: 33-1-69-47-10-21
Fax: 33-1-60-77-86-98
gonin@genethon.fr
----------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 10:22:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:22:25 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020922.LAA02927@pubhealth.ku.dk>

On Thu, 2 May 2002 gonin@genethon.fr wrote:

> Hi R colleagues,
>
> I don't know whether this is a bug, but something weird happen with R-GNOME.
> Version 1.5.0.
> I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
> R can be started with or without the Gnome interface: fine.
> However, when I start with Gnome interface, jpeg and a few other
> things are unavailable (checked using capabilities()), whereas
> everything is available (except Gnome) when I start R without Gnome.

Have you actually tried them?  capabilities() can be wrong, as it only
reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
do all work under R --gui=gnome.  (Well, actually gnome has problems with
its dialogs as it makes assumptions about the X11 system in use and I am
not using XFree86.)

I will try to work out a more definitive algorithm for capabilities, but
its main use is to test if checks should be run, so it needs to be
conservative.  And as you note, Gnome is experimental and has a separate
maintainer ....

> Also, some calls seem available with Gnome: system("..") returns nothing.
> Maybe this is related to the experimental nature of the Gnome interface.
> Hope that helps.
> Cheers,
> --
> ----------------------------
> Patrick Gonin, DVM, PhD
> Head of in vivo Evaluation Dept
> Généthon
> 1 bis, rue de l'Internationale- BP 60
> 91002 EVRY CEDEX
> FRANCE
> Tel: 33-1-69-47-10-21
> Fax: 33-1-60-77-86-98
> gonin@genethon.fr
> ----------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luchini@ehess.cnrs-mrs.fr  Thu May  2 11:23:22 2002
From: luchini@ehess.cnrs-mrs.fr (luchini@ehess.cnrs-mrs.fr)
Date: Thu, 2 May 2002 12:23:22 +0200 (MET DST)
Subject: [Rd] pictex (PR#1505)
Message-ID: <200205021023.MAA03892@pubhealth.ku.dk>

Full_Name: Stephane Luchini
Version: 1.4.1
OS: Redhat 7.2
Submission from: (NULL) (193.50.233.43)


I want to use R to plot an histogram of a vector of size 759 with min=-63260e+06

and max=3.700646.

When I use X11 as the output device, there is no problem to obtain the desired 
graphics using the following instructions:

hist(VED,br=60,prob=TRUE)
lines(density(VED,bw=7.668e+05))

Now, if I use the pictex driver :
pictex(file = "test.pictex")

The whole pictex code is not generated. It stops after line 760.
When I put debug = TRUE, it stops after 243 lines.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May  2 11:32:10 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 May 2002 12:32:10 +0200 (CEST)
Subject: [Rd] R-GNOME (PR#1503)
In-Reply-To: <200205020922.LAA02927@pubhealth.ku.dk>
Message-ID: <XFMail.20020502123210.plummer@iarc.fr>

On 02-May-2002 ripley@stats.ox.ac.uk wrote:
> On Thu, 2 May 2002 gonin@genethon.fr wrote:
> 
>> Hi R colleagues,
>>
>> I don't know whether this is a bug, but something weird happen with R-GNOME.
>> Version 1.5.0.
>> I compiled the stuff under i-686 Linux RH 7.2 using ./configure
>> --with-gnome.
>> R can be started with or without the Gnome interface: fine.
>> However, when I start with Gnome interface, jpeg and a few other
>> things are unavailable (checked using capabilities()), whereas
>> everything is available (except Gnome) when I start R without Gnome.
> 
> Have you actually tried them?  capabilities() can be wrong, as it only
> reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
> do all work under R --gui=gnome.  (Well, actually gnome has problems with
> its dialogs as it makes assumptions about the X11 system in use and I am
> not using XFree86.)
> 
> I will try to work out a more definitive algorithm for capabilities, but
> its main use is to test if checks should be run, so it needs to be
> conservative.  And as you note, Gnome is experimental and has a separate
> maintainer ....

jpeg() is available under the GNOME interface and works correctly.

>> Also, some calls seem available with Gnome: system("..") returns nothing.
>> Maybe this is related to the experimental nature of the Gnome interface.
>> Hope that helps.

The GNOME port currently uses the same version of do_system as the unix
command line port of R.  This sends the output of the system call to
the standard output.  So, for example, if you R-GNOME from a terminal,
the output will appear in the terminal and not the R GNOME console.
GNOME needs its own version of do_system.  I will fix this for R 1.5.1.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 11:33:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:33:47 +0100 (BST)
Subject: [Rd] Rversion.h
Message-ID: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>

Our current intention is to no longer include Rversion.h from R.h as from
R 1.6.0 (which is months away).

Package maintainers when revising code might like to check if they
actually use Rversion.h, and if so include it explicitly.

I did a quick grep through the CRAN packages, and in all but one case
(mda) the test is for R < 1.2.0, so it may be simplest just to tidy up
and add  `Depends: R (>= 1.2.0)'  to the DESCRIPTION file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  2 13:51:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 May 2002 14:51:43 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
Message-ID: <x26626lnkw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Our current intention is to no longer include Rversion.h from R.h as from
> R 1.6.0 (which is months away).

For the inquisitive minds: The reason we want to do this lies in
makefile dependencies: Every file that includes R.h currently ends up
depending on the date stamp which changes automatically every 24
hours. So even a simple bug fix involves substantial rebuilding
activity, which is annoying for the developers, and also carries some
risk of compiler warning getting missed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 16:52:44 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 17:52:44 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <x26626lnkw.fsf@blueberry.kubism.ku.dk>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
Message-ID: <15569.24780.734088.702887@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ripley@stats.ox.ac.uk writes:
>> Our current intention is to no longer include Rversion.h from R.h as from
>> R 1.6.0 (which is months away).

> For the inquisitive minds: The reason we want to do this lies in
> makefile dependencies: Every file that includes R.h currently ends up
> depending on the date stamp which changes automatically every 24
> hours. So even a simple bug fix involves substantial rebuilding
> activity, which is annoying for the developers, and also carries some
> risk of compiler warning getting missed.

Note that this implies that packages which unconditionally use R_VERSION
or R_Version (note that R-exts in facts recommends

  #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

will fail to install under the current r-devel.

These packages seems to be

	Matrix
	RArcInfo
	RODBC
	XML
	chron
	gafit
	mda
	odesolve

(two of which I happen to maintain myself ...) as well as the Omegahat
packages

	CORBA
	RGnumeric
	RSPerl
	RSPython
	SJava
	SNetscape
	SXalan
	Slcc
	Sxslt

It would be great if we could have updates of these packages in the near
future, either via following the recommended procedure from R-exts or,
perhaps preferably, removing the pre-1.2.0 compatibility code and adding

	Depends: R (>= 1.2.0)

in the package DESCRIPTION file.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 17:34:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 18:34:11 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <15569.24780.734088.702887@mithrandir.hornik.net>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
 <15569.24780.734088.702887@mithrandir.hornik.net>
Message-ID: <15569.27267.926617.344251@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Peter Dalgaard BSA writes:
>> ripley@stats.ox.ac.uk writes:
>>> Our current intention is to no longer include Rversion.h from R.h as from
>>> R 1.6.0 (which is months away).

>> For the inquisitive minds: The reason we want to do this lies in
>> makefile dependencies: Every file that includes R.h currently ends up
>> depending on the date stamp which changes automatically every 24
>> hours. So even a simple bug fix involves substantial rebuilding
>> activity, which is annoying for the developers, and also carries some
>> risk of compiler warning getting missed.

> Note that this implies that packages which unconditionally use R_VERSION
> or R_Version (note that R-exts in facts recommends

>   #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

> will fail to install under the current r-devel.

> These packages seems to be

> ...

> It would be great if we could have updates of these packages in the near
> future, either via following the recommended procedure from R-exts or,
> perhaps preferably, removing the pre-1.2.0 compatibility code and adding

> 	Depends: R (>= 1.2.0)

> in the package DESCRIPTION file.

Sorry, that's not quite correct.

As we can have tests in both
    #if R_VERSION < R_Version(1, 2, 0)
and
    #if R_VERSION >= R_Version(1, 2, 0)
style, following the 'recommended procedure' is obviously not good
enough ...

I suggest removing pre-1.2.0 compatibility code and adding
   Depends: R (>= 1.2.0)
in the package DESCRIPTION file.

For version checks for later versions please add
   #include <Rversion.h>

CRAN/Omegaht packages affected by the change are

CORBA
Matrix
RArcInfo
RGnumeric
RMySQL
RODBC
ROracle
RSPerl
RSPython
RSQLite
SJava
SNetscape
SXalan
Slcc
Sxslt
XML
chron
gafit
mda
odesolve

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From drew.tyre@csiro.au  Fri May  3 03:26:08 2002
From: drew.tyre@csiro.au (drew.tyre@csiro.au)
Date: Fri, 3 May 2002 04:26:08 +0200 (MET DST)
Subject: [Rd] copy or save to metafile from graphics device shrinks plots (PR#1507)
Message-ID: <200205030226.EAA09900@pubhealth.ku.dk>

Full_Name: Drew Tyre
Version: 1.4.0
OS: Win 2000
Submission from: (NULL) (140.253.74.225)


When creating a rather complex plot, the resulting figures 'shrink' when either
copied to the clipboard or saved as a metafile using the GUI menu. Also saving
as postscript or pdf causes the same problem, as does printing the figure
directly from the graphics window. Only the figure areas shrink, the contents
appear to have the same size, leading to clipping around the edges. Saving as
PNG format works, as does drawing directly to a win.metafile() device. I haven't
tried bitmap format.

The code is below; Aus() is an extension of oz() written by Nick Ellis - but
doesn't seem to be related to the problem (ie. replacing that call with a simple
plot() still creates the problem). I've tried to reproduce it with simpler plots
for some hours to no avail. Bug 1242 seems like the only related one, but I'm
not using lattice.grid. Given that there is a straightforward workaround
(suggested by Nick Ellis) by writing directly to a metafile device it seems like
a low priority. I'm happy to provide the data if anyone wants to look at it in
detail. 
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.0            
year     2001           
month    12             
day      19             
language R              

[1] ".GlobalEnv"        "sulphuric.accepta" "package:MASS"     
[4] "package:ctest"     "Autoloads"         "package:base"    


#source("C:/Program Files/R/rw1040/library/Aus/source.q")
#win.metafile("mapfigure.emf")
par(mfrow=c(2,2),mar=c(5.1,4.1,0.1,0.1))
Aus()
hermit.hill <- list(x=136.8314,y=-30.02850)
points(hermit.hill,pch="*",cex=2)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.accepta)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("B",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.isopods)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("C",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(bopeechee.zeidleri)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("D",side=2,cex=2,las=2,at=par("yaxp")[2])
#dev.off()

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 07:52:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 08:52:48 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205030652.IAA10584@pubhealth.ku.dk>

On Fri, 3 May 2002 drew.tyre@csiro.au wrote:

> Full_Name: Drew Tyre
> Version: 1.4.0
> OS: Win 2000
> Submission from: (NULL) (140.253.74.225)
>
>
> When creating a rather complex plot, the resulting figures 'shrink' when either
> copied to the clipboard or saved as a metafile using the GUI menu. Also saving
> as postscript or pdf causes the same problem, as does printing the figure
> directly from the graphics window. Only the figure areas shrink, the contents

That says the problem is in the replaying of graphics and not to do
with metafiles.  (But I've shorten the subject for the sake of R-bugs.)

1.4.0 was the first version with new graphics drivers, and we would
first need to know if this is still present in 1.5.0, and also if specific
to Windows.  Could you test 1.5.0 once that becomes available, and let us
know?  If the problem is still present, it would help if we had a complete
reproducible example on a web site somewhere.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:12:12 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 3 May 2002 12:12:12 +0200 (MET DST)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
Message-ID: <200205031012.MAA13485@pubhealth.ku.dk>

Hi Everyone, 

I've noticed that setting the environment of a function from a package
actually creates a copy of that function in .GlobalEnv and sets the
environment on this copy:

> find(.profile)
[1] "package:newblips"
> environment(.profile) <- bb1$getEnv() # this is an environment
> find(.profile)
[1] ".GlobalEnv"       "package:newblips"

I don't have a problem with this behaviour (now I understand it!) but
I think that it would help to document it in the help file.  May I
suggest that instead of

     The assignment form sets the environment of the function or
     formula `fun' to the `value' given.

we have

     The assignment form sets the environment of the function or
     formula \code{fun} to \code{value} if \code{fun} is in the
     current environment, otherwise it makes a copy of \code{fun} in
     the current environment and sets the environment of the copy.

I think that describes the current procedure: please correct me if I
am wrong!

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:newblips, package:MASS, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  3 11:26:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2002 12:26:58 +0200
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <200205031012.MAA13485@pubhealth.ku.dk>
References: <200205031012.MAA13485@pubhealth.ku.dk>
Message-ID: <x26625y1al.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Hi Everyone, 
> 
> I've noticed that setting the environment of a function from a package
> actually creates a copy of that function in .GlobalEnv and sets the
> environment on this copy:
> 
> > find(.profile)
> [1] "package:newblips"
> > environment(.profile) <- bb1$getEnv() # this is an environment
> > find(.profile)
> [1] ".GlobalEnv"       "package:newblips"
> 
> I don't have a problem with this behaviour (now I understand it!) but
> I think that it would help to document it in the help file.  May I
> suggest that instead of
> 
>      The assignment form sets the environment of the function or
>      formula `fun' to the `value' given.
> 
> we have
> 
>      The assignment form sets the environment of the function or
>      formula \code{fun} to \code{value} if \code{fun} is in the
>      current environment, otherwise it makes a copy of \code{fun} in
>      the current environment and sets the environment of the copy.
> 
> I think that describes the current procedure: please correct me if I
> am wrong!

But this is generic behaviour for *all* attribute assignment. It makes
no sense to describe a specific instance of it. Consider

data(airquality)
f<-function() { x <- class(airquality)<-NULL; ls() }
f()
class(airquality)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:49:25 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 03 May 2002 11:49:25 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CD26B35.1F72FD86@durham.ac.uk>

Peter Dalgaard BSA wrote:
> 
> J.C.Rougier@durham.ac.uk writes:
> 
> > Hi Everyone,
> >
> > I've noticed that setting the environment of a function from a package
> > actually creates a copy of that function in .GlobalEnv and sets the
> > environment on this copy:
> >
> > > find(.profile)
> > [1] "package:newblips"
> > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > find(.profile)
> > [1] ".GlobalEnv"       "package:newblips"
> >
> > I don't have a problem with this behaviour (now I understand it!) but
> > I think that it would help to document it in the help file.  May I
> > suggest that instead of
> >
> >      The assignment form sets the environment of the function or
> >      formula `fun' to the `value' given.
> >
> > we have
> >
> >      The assignment form sets the environment of the function or
> >      formula \code{fun} to \code{value} if \code{fun} is in the
> >      current environment, otherwise it makes a copy of \code{fun} in
> >      the current environment and sets the environment of the copy.
> >
> > I think that describes the current procedure: please correct me if I
> > am wrong!
> 
> But this is generic behaviour for *all* attribute assignment. It makes
> no sense to describe a specific instance of it. Consider
> 
> data(airquality)
> f<-function() { x <- class(airquality)<-NULL; ls() }
> f()
> class(airquality)

I understand.  However, I still think that the help page for environment
is wrong!  Using "enviroment<-" does not necessarily set the environment
of the function, as stated.  What happened to me is that I modified
.profile in the package newblips and then re-assigned its environment
but didn't see any change, because it was masked by the copy of .profile
in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
and I think that changing the environment help page would clarify this
for other users.  J.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri May  3 15:26:33 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 3 May 2002 09:26:33 -0500
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD26B35.1F72FD86@durham.ac.uk>; from J.C.Rougier@durham.ac.uk on Fri, May 03, 2002 at 11:49:25AM +0100
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk>
Message-ID: <20020503092633.A11402@nokomis.stat.umn.edu>

On Fri, May 03, 2002 at 11:49:25AM +0100, Jonathan Rougier wrote:
> Peter Dalgaard BSA wrote:
> > 
> > J.C.Rougier@durham.ac.uk writes:
> > 
> > > Hi Everyone,
> > >
> > > I've noticed that setting the environment of a function from a package
> > > actually creates a copy of that function in .GlobalEnv and sets the
> > > environment on this copy:
> > >
> > > > find(.profile)
> > > [1] "package:newblips"
> > > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > > find(.profile)
> > > [1] ".GlobalEnv"       "package:newblips"
> > >
> > > I don't have a problem with this behaviour (now I understand it!) but
> > > I think that it would help to document it in the help file.  May I
> > > suggest that instead of
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula `fun' to the `value' given.
> > >
> > > we have
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula \code{fun} to \code{value} if \code{fun} is in the
> > >      current environment, otherwise it makes a copy of \code{fun} in
> > >      the current environment and sets the environment of the copy.
> > >
> > > I think that describes the current procedure: please correct me if I
> > > am wrong!
> > 
> > But this is generic behaviour for *all* attribute assignment. It makes
> > no sense to describe a specific instance of it. Consider
> > 
> > data(airquality)
> > f<-function() { x <- class(airquality)<-NULL; ls() }
> > f()
> > class(airquality)
> 
> I understand.  However, I still think that the help page for environment
> is wrong!  Using "enviroment<-" does not necessarily set the environment
> of the function, as stated.  What happened to me is that I modified
> .profile in the package newblips and then re-assigned its environment
> but didn't see any change, because it was masked by the copy of .profile
> in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
> and I think that changing the environment help page would clarify this
> for other users.  J.

I agree with Peter.  The compound assignment process is quite complex
but it is uniform across compound assignments.  One way to describe it
is that

	f(x)<- y

does roughly (modulo some performance tweaks)

	if (! exists("x", inherits = FALSE))
            x <- x  # insures x is local
        x <- "f<-"(x, value = y)

The shorthand used in ?"environment<-" is the same as the shorthand
used in at lest some other assignment contexts, for example in ?"[<-":

     If one of these expressions appears on the left side of an
     assignment then that part of `x' is set to the value of the right
     hand side of the assignment.

I don't see much point in adding a substantial amount of legalese to
all of these, and doing so in only some places is likely to lead to
more confusion.

Specific to environment<-, if any change is warranted is might be to
add a disclaimer like

	Changing the environment of a function can have unexpected
	consequences.  There is usually a safer way to achieve what
	you are trying to do.

A similar warning would be appropriate for formals<- and body<-.  When
you define a function the usual way you cause a function expression
consisting of formals and body to be evaluated in a particular
environment.  That creates a closure in which the three pieces are
assembled in a consistent fashion.  Assigning to any one of them
separately is quite likely to lead to inconsistencies and is one
reason the internal code loses all attributes on the function when you
do this (in particular the 'source' attribute if there was one).  If
we get byte code compilation and f is a compiled function, then after

	environment(f)<- myenv

the value of f will have to either be an interpreted function or the
assignment will have to trigger a new compilation since the original
compilation will have used information from the original environment.

In fact, given these issues I would argue that a pretty strong case
can be made for eliminating formals<-, body<- and environment<- (at
least for functions), though there are some very limited circumstances
where they can be useful if used with care.

So, after all that, the real question: why are you doing this and are
you sure there isn't a better way?

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From elff@rumms.uni-mannheim.de  Fri May  3 15:42:30 2002
From: elff@rumms.uni-mannheim.de (elff@rumms.uni-mannheim.de)
Date: Fri, 3 May 2002 16:42:30 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031442.QAA16928@pubhealth.ku.dk>

Full_Name: Martin Elff
Version: 1.5.0
OS: MS Windows 98
Submission from: (NULL) (134.155.91.46)


Merging of two data frames by variables with different names 
(using by.x and by.y) is no 
longer possible (it was possible in version 1.4.1). 
Call:

mvoteint.classd.matadd <- merge(
                            unique(mvoteint.classd),
                            unique(subset(dimens.mpp,
                                select=c(nation,year,mecode,
                                        econlrdiff,
                                        eeconlrdiff,
                                        welfdiff,
                                        labmiddiff,
                                        authlibdiff,
                                        authlibdiffn)
                            )),
                            by.x=c("nation","eyear","mvoteint"),
                            by.y=c("nation","year","mecode"),
                            all.x=TRUE,
                            sort=TRUE
                            )

Error message:
Error in match.names(clabs, names(xi)) : names don't match previous names:
         year, mecode


Traceback:

10: stop(paste("names don't match previous names:\n     ", paste(nmi[nii == 
        0], collapse = ", ")))
9: match.names(clabs, names(xi))
8: rbind(...)
7: rbind(x[, by.x], y[, by.y])
6: do.call("paste", c(rbind(x[, by.x], y[, by.y]), sep = "\r"))
5: merge.data.frame(unique(mvoteint.classd), unique(subset(dimens.mpp, 
       select = c(nation, year, mecode, econlrdiff, eeconlrdiff, 
           welfdiff, labmiddiff, authlibdiff, authlibdiffn))), by.x =
c("nation", 
       "eyear", "mvoteint"), by.y = c("nation", "year", "mecode"), 
       all.x = TRUE, sort = TRUE)
4: merge(unique(mvoteint.classd), unique(subset(dimens.mpp, select = c(nation, 
       year, mecode, econlrdiff, eeconlrdiff, welfdiff, labmiddiff, 
       authlibdiff, authlibdiffn))), by.x = c("nation", "eyear", 
       "mvoteint"), by.y = c("nation", "year", "mecode"), all.x = TRUE, 
       sort = TRUE)
3: eval.with.vis(expr, envir, enclos)
2: eval.with.vis(ei, envir)
1: source("setup-classd-mat-additiv.R", echo = T)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  3 17:06:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 3 May 2002 09:06:14 -0700 (PDT)
Subject: [Rd] merge (PR#1510)
In-Reply-To: <200205031442.QAA16928@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205030859300.100836-100000@homer39.u.washington.edu>

On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:

> Full_Name: Martin Elff
> Version: 1.5.0
> OS: MS Windows 98
> Submission from: (NULL) (134.155.91.46)
>
>
> Merging of two data frames by variables with different names
> (using by.x and by.y) is no
> longer possible (it was possible in version 1.4.1).

To be precise, it doesn't seem to work with multiple by columns, so
> df<-data.frame(x=1:10,y=rnorm(10))
> fd<-data.frame(z=1:10,w=rnorm(10))
> merge(df,fd,by.x="x",by.y="z")
succeeds but
> fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
Error in match.names(clabs, names(xi)) : names don't match previous names:
         z, m


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 17:16:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 18:16:32 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031616.SAA17458@pubhealth.ku.dk>

On Fri, 3 May 2002, Thomas Lumley wrote:

> On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:
>
> > Full_Name: Martin Elff
> > Version: 1.5.0
> > OS: MS Windows 98
> > Submission from: (NULL) (134.155.91.46)
> >
> >
> > Merging of two data frames by variables with different names
> > (using by.x and by.y) is no
> > longer possible (it was possible in version 1.4.1).
>
> To be precise, it doesn't seem to work with multiple by columns, so
> > df<-data.frame(x=1:10,y=rnorm(10))
> > fd<-data.frame(z=1:10,w=rnorm(10))
> > merge(df,fd,by.x="x",by.y="z")
> succeeds but

Yes, and there is an example on the help page for that case.

> > fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> > df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> > merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
> Error in match.names(clabs, names(xi)) : names don't match previous names:
>          z, m

Yes, the code is different for multiple match columns, and I know how to
fix it.

Thank you Thomas for the example: creating one was my next task.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Mon May  6 10:34:06 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Mon, 06 May 2002 11:34:06 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <200205010201.EAA14443@stat.math.ethz.ch>
Message-ID: <3CD64E0E.9FE073A4@lmttrading.com>

> Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> From: Gang Liang <liang@stat.berkeley.edu>
> Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
>
> Thanks, Peter!
>
> Yes, I tried the latest package of tseries, but I guess I made a mistake
> about the version number. Okay I am going to try the development version
> of R on my machine.
>
> BTW, there are some minor typos in tseries package's help package, such as
> some links named temp -- I am quite sure it's really temp, :).

Can you give me a more detailed description such that I am able to correct these typos?

Thanks
Adrian

> Regards,
>
> Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Sonia.Leach@uchsc.edu  Mon May  6 17:16:44 2002
From: Sonia.Leach@uchsc.edu (Sonia.Leach@uchsc.edu)
Date: Mon, 6 May 2002 18:16:44 +0200 (MET DST)
Subject: [Rd] subscript problem with function qr.X (PR#1519)
Message-ID: <200205061616.SAA01494@pubhealth.ku.dk>


R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> x <- matrix(scan(), 4,5)
1:     0.9501    0.8913    0.8214    0.9218    0.9355
6:     0.2311    0.7621    0.4447    0.7382    0.9169
11:     0.6068    0.4565    0.6154    0.1763    0.4103
16:     0.4860    0.0185    0.7919    0.4057    0.8936
21: 
Read 20 items
> QR <- qr(x)
> qr.Q(QR)
           [,1]       [,2]        [,3]         [,4]
[1,] -0.5293452  0.5626939 -0.19540556 -0.604140627
[2,] -0.4965850 -0.6566910 -0.56754804  0.007036243
[3,] -0.4576404  0.4009461 -0.05368566  0.791786145
[4,] -0.5135779 -0.3022824  0.79801236 -0.089662111
> qr.R(QR)
          [,1]       [,2]        [,3]        [,4]       [,5]
[1,] -1.794859 -1.1871191 -1.35822590 -0.85067570 -1.0476365
[2,]  0.000000  0.5457749 -0.08143716  0.24810615 -0.6170795
[3,]  0.000000  0.0000000 -0.33291700  0.14549548  0.2382673
[4,]  0.000000  0.0000000  0.00000000 -0.08925358  0.2355010
> qr.X(QR)
Error in qr.X(QR) : subscript out of bounds
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cjpelton@ucdavis.edu  Mon May  6 20:26:14 2002
From: cjpelton@ucdavis.edu (cjpelton@ucdavis.edu)
Date: Mon, 6 May 2002 21:26:14 +0200 (MET DST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205061926.VAA02070@pubhealth.ku.dk>

Full_Name: Chris Pelton
Version: R-1.5.0
OS: Solaris &
Submission from: (NULL) (169.237.121.210)


I am unable to compile R-1.5.0, and am getting the following errors with make. I
searched through
the buglist and didn't see anything similar, although I wouldn't doubt if I was
just
using the wrong version of something. 

gcc version 3.0.3



gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
".subsection"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
".previous"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
*** Error code 1
make: Fatal error: Command failed for target `lbfgsb.o'
Current working directory /export/home/cjpelton/R-1.5.0/src/appl
*** Error code 1
make: Fatal error: Command failed for target `R'

Thanks,
Chris


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Mon May  6 20:49:47 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Mon, 6 May 2002 21:49:47 +0200 (MET DST)
Subject: [Rd] Accessing C code for 'optim' (PR#1521)
Message-ID: <200205061949.VAA02132@pubhealth.ku.dk>

Full_Name: Göran Broström
Version: 1.5.0
OS: RH Linux 7.2 (i686)
Submission from: (NULL) (130.235.138.224)


The documentation (p. 55, "R Extensions") describes the gradient function as

typedef double optimgr(...

which is wrong. The correct description is

typedef void optimgr(...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  6 21:46:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2002 22:46:44 +0200
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <200205061926.VAA02070@pubhealth.ku.dk>
References: <200205061926.VAA02070@pubhealth.ku.dk>
Message-ID: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>

cjpelton@ucdavis.edu writes:

> I am unable to compile R-1.5.0, and am getting the following errors with make. I
> searched through
> the buglist and didn't see anything similar, although I wouldn't doubt if I was
> just
> using the wrong version of something. 
> 
> gcc version 3.0.3
> 
> 
> 
> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> ".subsection"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> ".previous"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> *** Error code 1
> make: Fatal error: Command failed for target `lbfgsb.o'
> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> *** Error code 1
> make: Fatal error: Command failed for target `R'

I think this is a generic problem, unrelated to R: To use gcc-3.0.3
the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
and obviously also to make sure that it is found before the one in
/usr/ccs. I have have built R succesfully on a system where the
following holds:

Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
[pd@rubin pd]$ which as
/usr/local/bin/as
[pd@rubin pd]$ /usr/local/bin/as --version
GNU assembler 2.11.2
Copyright 2001 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License.  This program has absolutely no warranty.
This assembler was configured for a target of `sparc-sun-solaris2.7'.
[pd@rubin pd]$ gcc --version
3.0.3

The assembler is part of binutils-2.11.2 installed from sunfreeware.com.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C Pelton <cjpelton@ucdavis.edu>  Mon May  6 23:41:38 2002
From: C Pelton <cjpelton@ucdavis.edu> (C Pelton)
Date: Mon, 6 May 2002 15:41:38 -0700 (PDT)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205062241.g46Mfcc21648@pop12.ucdavis.edu>

You are right, this was due to my using gcc and /usr/ccs/bin/as. I installed 
binutils and got through that error. Sorry for the needless bug report. Thanks 
for the quick response though.

-Chris



>X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to 
p.dalgaard@biostat.ku.dk using -f
>To: cjpelton@ucdavis.edu
>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>Subject: Re: [Rd] compiling on Solaris 7 (PR#1520)
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>Date: 06 May 2002 22:46:44 +0200
>User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
>MIME-Version: 1.0
>
>cjpelton@ucdavis.edu writes:
>
>> I am unable to compile R-1.5.0, and am getting the following errors with 
make. I
>> searched through
>> the buglist and didn't see anything similar, although I wouldn't doubt if I 
was
>> just
>> using the wrong version of something. 
>> 
>> gcc version 3.0.3
>> 
>> 
>> 
>> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
>> ".subsection"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
>> ".previous"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
>> *** Error code 1
>> make: Fatal error: Command failed for target `lbfgsb.o'
>> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
>> *** Error code 1
>> make: Fatal error: Command failed for target `R'
>
>I think this is a generic problem, unrelated to R: To use gcc-3.0.3
>the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
>and obviously also to make sure that it is found before the one in
>/usr/ccs. I have have built R succesfully on a system where the
>following holds:
>
>Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
>[pd@rubin pd]$ which as
>/usr/local/bin/as
>[pd@rubin pd]$ /usr/local/bin/as --version
>GNU assembler 2.11.2
>Copyright 2001 Free Software Foundation, Inc.
>This program is free software; you may redistribute it under the terms of
>the GNU General Public License.  This program has absolutely no warranty.
>This assembler was configured for a target of `sparc-sun-solaris2.7'.
>[pd@rubin pd]$ gcc --version
>3.0.3
>
>The assembler is part of binutils-2.11.2 installed from sunfreeware.com.
>
>-- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205070515.g475F4x31385@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve()
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above
--mayhave side-effects in many other pieces of interpreted code
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using ==
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local"
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
* PR# 1473 *
Subject: predict.*bSpline() bugs extrapolating for deriv >= 1
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 22 Apr 2002 12:30:12 +0200
* PR# 1486 *
Subject: Can't install packages
From: Poizot Emmanuel <poizot@cnam.fr>
Date: Fri, 26 Apr 2002 17:13:05 +0200
* PR# 1497 *
Subject: tseries package segmentation fault
From: liang@stat.berkeley.edu
Date: Mon, 29 Apr 2002 21:06:41 +0200 (MET DST)
* PR# 1499 *
Subject: Undefined symbols in loading tcltk
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:13:42 +0200 (CEST)
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
* PR# 1505 *
Subject: pictex
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
* PR# 1509 *
Subject:  Behaviour of environment(foo)<-
From: J.C.Rougier@durham.ac.uk
Date: Fri, 3 May 2002 11:10:21 +0100
* PR# 1510 *
Subject: merge
From: elff@rumms.uni-mannheim.de
Date: Fri, 3 May 2002 16:42:29 +0200 (MET DST)
* PR# 1511 *
Subject: PlantGrowth))
From: me <me@localhost.com>
Date: Fri,  3 May 2002 19:54:15 +0200 (CEST)
* PR# 1515 *
Subject: A  WinXP patch
From: webmasters <webmasters@www.gnu.org>
Date: Sun, 5 May 2002 15:57:16 +0200
* PR# 1519 *
Subject: subscript problem with function qr.X
From: Sonia Leach <Sonia.Leach@uchsc.edu>
Date: Mon, 06 May 2002 10:12:34 -0600
* PR# 1520 *
Subject: compiling on Solaris 7
From: cjpelton@ucdavis.edu
Date: Mon, 6 May 2002 21:26:12 +0200 (MET DST)
* PR# 1521 *
Subject: Accessing C code for 'optim'
From: gb@stat.umu.se
Date: Mon, 6 May 2002 21:49:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 07:22:27 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 May 2002 07:22:27 +0100 (BST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0205070719310.1175-100000@auk.stats>

On 6 May 2002, Peter Dalgaard BSA wrote:

> cjpelton@ucdavis.edu writes:
>
> > I am unable to compile R-1.5.0, and am getting the following errors with make. I
> > searched through
> > the buglist and didn't see anything similar, although I wouldn't doubt if I was
> > just
> > using the wrong version of something.
> >
> > gcc version 3.0.3
> >
> >
> >
> > gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> > -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> > ".subsection"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> > ".previous"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> > *** Error code 1
> > make: Fatal error: Command failed for target `lbfgsb.o'
> > Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
>
> I think this is a generic problem, unrelated to R: To use gcc-3.0.3
> the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,

It's fine: I use it all the time.  The issue is that you must use the same
`as' as gcc was built to use.  The simplest and safest route is to build
gcc (3.0.4 with 3.1 imminent) on the target system.

Quite a lot of traffic on R-bugs is about mis-configured versions of gcc.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue May  7 10:07:49 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 07 May 2002 10:07:49 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk> <20020503092633.A11402@nokomis.stat.umn.edu>
Message-ID: <3CD79965.F38D93F1@durham.ac.uk>

Luke Tierney wrote:
> 
> A similar warning would be appropriate for formals<- and body<-.  When
> you define a function the usual way you cause a function expression
> consisting of formals and body to be evaluated in a particular
> environment.  That creates a closure in which the three pieces are
> assembled in a consistent fashion.  Assigning to any one of them
> separately is quite likely to lead to inconsistencies and is one
> reason the internal code loses all attributes on the function when you
> do this (in particular the 'source' attribute if there was one).  If
> we get byte code compilation and f is a compiled function, then after
> 
>         environment(f)<- myenv
> 
> the value of f will have to either be an interpreted function or the
> assignment will have to trigger a new compilation since the original
> compilation will have used information from the original environment.
> 
> In fact, given these issues I would argue that a pretty strong case
> can be made for eliminating formals<-, body<- and environment<- (at
> least for functions), though there are some very limited circumstances
> where they can be useful if used with care.
> 
> So, after all that, the real question: why are you doing this and are
> you sure there isn't a better way?

Now you've scared me!  I've been using the "list of functions with a
common environment" approach to implement objects with methods and
shared data, similar to that used by Douglas Bates and Saikat DebRoy in
"nls", particularly their function "nlsModel".  So I can write
foo$method() to use method on the foo object and its collection of
common variables.  If I want to assign a function defined outside as a
method then I need something like

robj$method <- functionDefinedOutside
environment(robj$method) <- myEnv

inside the function that constructs foo by returning the list robj. 
This enables functionDefinedOutside to reference variables in foo
directly, which makes for much clearer code.  The problem for me arose
when I was debugging a new method.  Rather than rebuilding object foo
from scratch each time I make a change in functionDefinedOutside I find
it easier just leave functionDefinedOutside on its own in the package
and use

environment(functionDefinedOutside) <- foo$getEnv()

(where the getEnv method simply returns myEnv) to simulate it being a
method of foo, and then I can test it where it stands.

I like the foo$method() construction: I find it easy to work with and
think it is quite transparent.  Is it likely to stop working in a future
version of R?  
And are there current risks I have yet to encounter?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue May  7 12:15:50 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 7 May 2002 13:15:50 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071115.NAA07246@pubhealth.ku.dk>

names(unlist(...)) seems to be able to construct corrupt strings
detected via: two identical strings behave different in paste
observed in RW1.4.1 and RW1.5.0
pure replication code after output

Best


Jens Oehlschlägel


> l <- names(unlist(list(aa = list(bb = 1))))
> l
[1] "aa.bb"
> # this is exactly "aa.bb"
> identical(l, "aa.bb")
[1] TRUE
> 
> # BUT 
> identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))
[1] FALSE
> 
> # this of course works
> paste("aa.bb", "this should be added")
[1] "aa.bb this should be added"
> 
> # BUT THIS FAILS
> paste(l, "this should be added")
[1] "aa.bb"



l <- names(unlist(list(aa = list(bb = 1))))
l
# this is exactly "aa.bb"
identical(l, "aa.bb")

# BUT 
identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))

# this of course works
paste("aa.bb", "this should be added")

# BUT THIS FAILS
paste(l, "this should be added")




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows 2000 Professional (build 2195) Service Pack 1.0

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
GMX - Die Kommunikationsplattform im Internet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:38:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:38:59 -0700 (PDT)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD79965.F38D93F1@durham.ac.uk>
Message-ID: <Pine.A41.4.44.0205070828560.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002, Jonathan Rougier wrote:

> Luke Tierney wrote:
> >
> >
> > In fact, given these issues I would argue that a pretty strong case
> > can be made for eliminating formals<-, body<- and environment<- (at
> > least for functions), though there are some very limited circumstances
> > where they can be useful if used with care.
> >
> > So, after all that, the real question: why are you doing this and are
> > you sure there isn't a better way?
>
> Now you've scared me!  I've been using the "list of functions with a
> common environment" approach to implement objects with methods and
> shared data, similar to that used by Douglas Bates and Saikat DebRoy in
> "nls", particularly their function "nlsModel".  So I can write
> foo$method() to use method on the foo object and its collection of
> common variables.  If I want to assign a function defined outside as a
> method then I need something like
>
> robj$method <- functionDefinedOutside
> environment(robj$method) <- myEnv
>

Tony Rossini and I have also been using something similar for the
interface to Orca, essentially for the same reasons.

It would also be possible to do this with a macro:

   robj$method<-functionFactory()
with
   functionFactory<-defmacro(body={
			functionDefinedOutside(args){body;body;body}})
using the macro code from R-News 3/2001
or equivalently
   functionFactory<-function(){
		  fn<-quote(functionDefinedOutside(args){body;body;body})
	          eval.parent(fn)
		}



	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:55:31 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:55:31 -0700 (PDT)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
In-Reply-To: <200205071115.NAA07246@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205070848330.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002 oehl_list@gmx.de wrote:

> names(unlist(...)) seems to be able to construct corrupt strings
> detected via: two identical strings behave different in paste
> observed in RW1.4.1 and RW1.5.0
> pure replication code after output
>
> Best
>
>
> Jens Oehlschlägel
>
>
> > l <- names(unlist(list(aa = list(bb = 1))))
> > l
> [1] "aa.bb"

This is the same problem with do_paste that showed up with read.dta. If
you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".

In general we have the problem that a string has two ways of defining its
length:  LENGTH() and strlen()

Most functions use just one of these, but paste() uses LENGTH() to set up
the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
but strlen 5, and the result from paste() is a string with a null as its
sixth character, which thus appears to be a five-character string.

Given that this is the second appearance of the problem perhaps do_paste()
should be changed instead of (as well as?) unlist().

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 17:26:09 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:26:09 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071626.SAA10504@pubhealth.ku.dk>

On Tue, 7 May 2002, Thomas Lumley wrote:

> On Tue, 7 May 2002 oehl_list@gmx.de wrote:
>
> > names(unlist(...)) seems to be able to construct corrupt strings
> > detected via: two identical strings behave different in paste
> > observed in RW1.4.1 and RW1.5.0
> > pure replication code after output
> >
> > Best
> >
> >
> > Jens Oehlschlägel
> >
> >
> > > l <- names(unlist(list(aa = list(bb = 1))))
> > > l
> > [1] "aa.bb"
>
> This is the same problem with do_paste that showed up with read.dta. If
> you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".
>
> In general we have the problem that a string has two ways of defining its
> length:  LENGTH() and strlen()
>
> Most functions use just one of these, but paste() uses LENGTH() to set up
> the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
> but strlen 5, and the result from paste() is a string with a null as its
> sixth character, which thus appears to be a five-character string.
>
> Given that this is the second appearance of the problem perhaps do_paste()
> should be changed instead of (as well as?) unlist().

I'm fixing both.  The root bug is on line 334 of bind.c.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue May  7 18:21:52 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Tue, 7 May 2002 10:21:52 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <3CD64E0E.9FE073A4@lmttrading.com>
Message-ID: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>

If go through the help.start() --> Packages --> tseries, you will see some
duplication items in the html help page.

Thanks,
Gang

On Mon, 6 May 2002, Adrian Trapletti wrote:

> > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > From: Gang Liang <liang@stat.berkeley.edu>
> > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> >
> > Thanks, Peter!
> >
> > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > about the version number. Okay I am going to try the development version
> > of R on my machine.
> >
> > BTW, there are some minor typos in tseries package's help package, such as
> > some links named temp -- I am quite sure it's really temp, :).
>
> Can you give me a more detailed description such that I am able to correct these typos?
>
> Thanks
> Adrian
>
> > Regards,
> >
> > Gang
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 18:32:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:32:02 +0100 (BST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.LNX.4.31.0205071829320.6671-100000@gannet.stats>

On Tue, 7 May 2002, Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

That's an autogenerated page.  It seems correct to me on my machines:
maybe you have misunderstood what should be there.

There really is an object called `temp' documented on the ice.river page.
Looks like the software is better at indexing that some human readers.

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  7 20:33:02 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 07 May 2002 15:33:02 -0400
Subject: [Rd] Generic/method consistency in print and summary
Message-ID: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>

In R 1.5.0 (and earlier):

 > print
 function (x, ...) 
 UseMethod("print")
 > summary
 function (object, ...) 
 UseMethod("summary")

Is there a reason for this inconsistency in the name of the object?
It makes a single help file for both functions look ugly, because it
has to document both "x" and "object", which are really the same
thing.

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 21:04:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 21:04:14 +0100 (BST)
Subject: [Rd] Generic/method consistency in print and summary
In-Reply-To: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>
Message-ID: <Pine.LNX.4.31.0205072102580.8910-100000@gannet.stats>

On Tue, 7 May 2002, Duncan Murdoch wrote:

> In R 1.5.0 (and earlier):
>
>  > print
>  function (x, ...)
>  UseMethod("print")
>  > summary
>  function (object, ...)
>  UseMethod("summary")
>
> Is there a reason for this inconsistency in the name of the object?

Long-term S compatibility.  It's been like that since at least 1991.

> It makes a single help file for both functions look ugly, because it
> has to document both "x" and "object", which are really the same
> thing.

\item{x, object} ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Tue May  7 21:46:45 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Tue, 07 May 2002 22:46:45 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <3CD83D35.3232175C@lmttrading.com>

Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

Can you tell me which ones? I can´t find any...

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >

Adrian

--
Dr. Adrian Trapletti   Phone:       +41 (0)1 994 56 31
Wildsbergstrasse 31    Fax  :       +41 (0)1 994 56 33
CH-8610 Uster          Email:   a.trapletti@bluewin.ch
Switzerland            WWW  :  trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 07:18:22 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 02:18:22 -0400
Subject: [Rd] embedded R regexec returning nonsense
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C68@Groexmbcr10.pfizer.com>

Under RSPython and rpy, the regexec C function is returning nonsensical
results leading to segmentation faults.  This is happening in some
situations under R 1.4.1 and (more often?) under R 1.5.0  on my Solaris 8
box.  R 1.4.1 was compiled with gcc 2.95.2, and I've tried 1.5.0 with both
gcc 2.95.2 and gcc 3.0.3.   The error appears to be exactly the same under
both python tools and both compilers.  This makes me suspect that there is
some hairy interaction between the R regex functions and something in
python.

With R 1.4.1, R starts up smoothly under rpy and RSPython and only certain
functions elicit the error.  For instance, doing "bitmap('file.bmp')" will
cause a segfault in do_strsplit (character.c:260) because the regmatch
structure contains the nonsense values:

	(gdb) print regmatch[0]
	$1 = {rm_so = 9257728, rm_eo = 9257729}


With R 1.5.0, R fails to complete startup initialization under both rpy and
RSPython, segfaulting in do_readDCF (dcf.c:109) with similar nonsense values
in the regmatch structure:

	(gdb) print regmatch
	$7 = {{rm_so = 9777896, rm_eo = 9777905}}


Does anyone have asuggestion on the best way to track down the cause of this
problem?   I'll be happy to provide tracebacks, core dumps, etc if that
would help.

Thanks,

Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed May  8 17:45:57 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 08 May 2002 11:45:57 -0500
Subject: [Rd] Questions about S4 style methods and generics
Message-ID: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>

I have some questions about S4 style methods and generics.

First of all, is there any way of using default values for arguments
in the generics/methods? My own experiments show that such arguments
are always ignored. The green book seems to be silent on this
matter.

The second question is about using a non-trivial function body for
generics. Page 351 of the green book gives an example of this and the
documentation for setGeneric seems to suggest I should be able to do
this at least by using myDispatch=TRUE. However, the current
implementation seems to set the body of the generic definition to a
call to standardGeneric all the time. Is this a bug or a modification
of the green book description?

Thanks,

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  8 19:05:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 8 May 2002 20:05:24 +0200 (MET DST)
Subject: [Rd] [.data.frame handles drop inconsistently (PR#1530)
Message-ID: <200205081805.UAA20673@pubhealth.ku.dk>

R 1.5.0:

d.df <- data.frame(x = 1:3, y = c("A","D","E"), z = c(6,9,10))
d.df[1,1:3]
xx <- d.df[1,]
xx[, 1:3]

d.df[1,1:3] and xx[, 1:3] should be the same, and they are in S.

d.df[1,1:3] is a data frame.

xx[, 1:3] is a list, and it should not be.
xx[, 1:3, drop=FALSE]  is the desired answer.

(This cropped up when looking at merge, which was caught by it.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 21:25:05 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 16:25:05 -0400
Subject: [Rd] embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>


Hi All,

When R is embedded in python on my system (Solaris 8), calls to the c
functions 'regcomp' and 'regexec' are being resolved to the c-library,
rather than the functions compiled from regex.c.  This leads to segfaults
because the c-library functions have quite different semantics.

Is there any way to get around this, other than renaming the offending
functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
perhaps there is another argument which says 'check inside this library for
symbols before looking elsewhere'?

Thanks,

-Greg

----------------- obligatory version information

R 1.4.1, 1.5.0,
gcc 2.95.2, 3.0.3,
python 2.1.1, 2.1.3
SunOs 5.8, sparc




LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu May  9 00:15:28 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 8 May 2002 19:15:28 -0400
Subject: [Rd] Re: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Wed, May 08, 2002 at 04:25:05PM -0400
References: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>
Message-ID: <20020508191528.B27246@jessie.research.bell-labs.com>

Hi Greg.
  
 Yes, there are some ways to arrange for tight/eager binding
rather than dynamically loading libraries. They do depend on
the linker being used and unfortunately precisely how the
libraries containing the symbols are being "included".

One GNU linker option that is of relevance here is -Bsymbolic
which is documented as
 "When creating a shared library, bind references to global symbols
 to the definition within the shared library, if any.  ....."

As a quick guess, I would add this to R's Makeconf for building
libR.so so that all possible symbols are resolved locally within that 
library. Then try linking again.


I have seen this on several different systems over the past few years
and I have written up _some_ of the details that I discovered on this topic.
Unfortunately,  I won't have time to dig them up until I get back to the office at the 
beginning of next week. Please remind me.

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> When R is embedded in python on my system (Solaris 8), calls to the c
> functions 'regcomp' and 'regexec' are being resolved to the c-library,
> rather than the functions compiled from regex.c.  This leads to segfaults
> because the c-library functions have quite different semantics.
> 
> Is there any way to get around this, other than renaming the offending
> functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
> perhaps there is another argument which says 'check inside this library for
> symbols before looking elsewhere'?
> 
> Thanks,
> 
> -Greg
> 
> ----------------- obligatory version information
> 
> R 1.4.1, 1.5.0,
> gcc 2.95.2, 3.0.3,
> python 2.1.1, 2.1.3
> SunOs 5.8, sparc
> 
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-andrews.ac.uk  Thu May  9 12:57:56 2002
From: scs10@st-andrews.ac.uk (scs10@st-andrews.ac.uk)
Date: Thu, 9 May 2002 13:57:56 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091157.NAA22633@pubhealth.ku.dk>

I'm having a problem with nls:

it iterates the correct number of times according to nls.control, but
mis-reports how many iterations have occured!

It converges on the correct parameter values, but doesn't stop and report
them until it's done all its iterations. Then it reports as an error that
it's stopped becaue it's done all its iterations.

Not sure what's going on....

Sophie


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 13:29:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 14:29:27 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091229.OAA22729@pubhealth.ku.dk>

On Thu, 9 May 2002 scs10@st-andrews.ac.uk wrote:

> I'm having a problem with nls:
>
> it iterates the correct number of times according to nls.control, but
> mis-reports how many iterations have occured!
>
> It converges on the correct parameter values, but doesn't stop and report
> them until it's done all its iterations. Then it reports as an error that
> it's stopped becaue it's done all its iterations.
>
> Not sure what's going on....

But I suspect you have more idea than we do.  Please read the section on
BUGS in the FAQ and send us a reproducible example.

(The iteration count is a *limit*, so sounds as if nls is not converging
if it does that number of iterations.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-and.ac.uk  Thu May  9 14:46:20 2002
From: scs10@st-and.ac.uk (scs10@st-and.ac.uk)
Date: Thu, 9 May 2002 15:46:20 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091346.PAA22891@pubhealth.ku.dk>

Full_Name: Sophie Smout
Version: 1.5.0
OS: windows 2000, pc
Submission from: (NULL) (138.251.190.17)


I'm finding that nls iterates to the end of its iteration setting and does not
jump out to report convergence even when it has clearly converged. It is also
mis-reporting the number of iterations completed. These may not be
unconnected...

This is an example:

[note - details of my computer, version etc are at the end of this message]

##### some 'data'


> x
 [1]  1  2  3  4  5  6  7  8  9 10

> y
 [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
 [8] 8.6486486 8.9010989 9.0909091

### call to nls

> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

### nls spits out

1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066689e-07 :  0.9999465 2.0000191 0.0999903 
3.651161e-15 :  1.0 2.0 0.1 
1.518557e-29 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
        number of iterations exceeded maximum of 5.27058e-308
> 
### ??? the converged parameter values are correct
### but nls has not reported convergence. Instead it's just gone on iterating,
### but not 5.27058e-308 times, which would in any case be tricky...



### try another simple example
### generate some data 



> x<-c(1:10)
> y<-3*x^2+1
> y
 [1]   4  13  28  49  76 109 148 193 244 301
> x
 [1]  1  2  3  4  5  6  7  8  9 10

### call to nls


> nls(y~a*x^b+c,start=list(a=1,b=1,c=1))

Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
        number of iterations exceeded maximum of 5.27058e-308

### another call to nls with more details requested

> nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
210232 :  1 1 1 
209552.9 :  0.3814959 1.4296089 1.7349535 
191724.4 :  0.2824096 1.9134931 1.9513585 
165276.9 :  0.4484658 1.9827257 1.8983138 
125378.7 :  0.7671348 1.9977192 1.7865044 
70298.31 :  1.325342 1.999960 1.589895 
17571.14 :  2.162671 2.000005 1.294948 
4.457052e-06 :  3.0000000 1.9999979 0.9999999 
2.200966e-17 :  3 2 1 
6.125505e-27 :  3 2 1 
6.12235e-27 :  3 2 1 
Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
: 
        number of iterations exceeded maximum of 5.27058e-308



#### same problem!!
##############################################

here is what I get when I type 'version'
to get details of computer etc.



platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R   
###############################################

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 14:47:03 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 09:47:03 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDA7DD7.E8DE7292@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> I have some questions about S4 style methods and generics.
> 
> First of all, is there any way of using default values for arguments
> in the generics/methods? My own experiments show that such arguments
> are always ignored.

Yes there is and no they are not.

But there are a couple of points to keep in mind.

The definition of method dispatch is that the _body_ of the selected
method is evaluated, without rematching arguments.  That means that it's
the default values in the (generic) function definition that will be
found in the context of the call.

An example:

R> bar <- function(x, y = 0)x+y
R> setGeneric("bar")
R> bar
function (x, y = 0) 
standardGeneric("bar")
<environment: 0x8622a18>
R> setMethod("bar", "character", function(x, y) paste(x,y))
[1] "bar"
R> bar(1,2)
[1] 3
R> bar(99)
[1] 99
R> bar("test")
[1] "test 0"

OTOH, the default expressions for the arguments in the method are
available in the method object.  You can extract them by getting the
method and retrieving, for example, def$y.  It seems a sufficiently
asked-for item that we'll provide a tool for it.

Maybe
  evaluateMethodDefault("y")
??  The point is to allow access but not burden the standard method
dispatch with re-matching arguments.

> The green book seems to be silent on this
> matter.
> 
> The second question is about using a non-trivial function body for
> generics. Page 351 of the green book gives an example of this and the
> documentation for setGeneric seems to suggest I should be able to do
> this at least by using myDispatch=TRUE. However, the current
> implementation seems to set the body of the generic definition to a
> call to standardGeneric all the time. Is this a bug or a modification
> of the green book description?

It's a bug.  Having said that, though, nonstandard generic functions are
slightly deprecated.  There are some potential efficiency enhancements
for dispatch that might be introduced but that would likely depend on
the function being a standard generic.

Also, experience is that people get a little confused and sometimes
provide a definition of the generic that doesn't call
standardGeneric("foo") and so does not give them the method dispatch
they expected.

But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
you're willing to be a bit klunky.  You define the generic and then
replace the body, being careful to preserve the function's environment.

Another example:

R> foo <- function(x) x
R> setGeneric("foo")
[1] "foo"
R> body(foo, envir = environment(foo)) <- 
+ quote({cat("Here we go!\n"); standardGeneric("foo")})
R> setMethod("foo", "numeric", function(x)sum(x))
[1] "foo"
R> foo(1:10)
Here we go!
[1] 55
R> foo("test")
Here we go!
[1] "test"

> 
> Thanks,
> 
> Saikat
> --
> Department of Statistics                       Email: saikat@stat.wisc.edu
> University of Wisconsin - Madison              Phone: (608) 263 5948
> 1210 West Dayton Street                        Fax:   (608) 262 0032
> Madison, WI 53706-1685
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 15:04:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 16:04:35 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091404.QAA22941@pubhealth.ku.dk>

The iteration count is being reported incorrectly as a real not an
integer, and I've fixed that for 1.5.1.

I can't reproduce your first example, but I suspect the numbers have
lost digits.  It looks as if the model you are fitting is an exact fit (to
machine accuracy).  nls() cannot fit exact fits: rounding error gets in
the way.

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:04:24 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:04:24 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
References: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <6ry9etto2f.fsf@franz.stat.wisc.edu>

Your results are not reproducible

> library(nls)
> x = 1:10
> y = c(0.9090909, 2.8571429, 4.7368421, 6.1538462, 7.1428571, 7.8260870, 8.3050847, 8.6486486, 8.9010989, 9.0909091)
> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066695e-07 :  0.9999465 2.0000191 0.0999903 
1.421765e-14 :  1.0 2.0 0.1 
1.056486e-14 :  1.0 2.0 0.1 
Nonlinear regression model
  model:  y ~ a * x^m/(1 + b * x^m) 
   data:  parent.frame 
  a   m   b 
1.0 2.0 0.1 
 residual sum-of-squares:  1.056486e-14 

You are encountering a well-known anomaly which occurs only in
artificial examples with a zero residual sum of squares.  The
statistical model to be fit with nls is y = f(x, theta) + eps
but your data are y = f(x, theta)

If there is any noise in the data, such as created from my copying and
pasting above, nls performs correctly.


scs10@st-and.ac.uk writes:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
> 
> 
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
> 
> This is an example:
> 
> [note - details of my computer, version etc are at the end of this message]
> 
> ##### some 'data'
> 
> 
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
> 
> ### call to nls
> 
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
> 
> ### nls spits out
> 
> 1.474151 :  1.10 2.10 0.11 
> 0.01060234 :  1.0092752 1.9893808 0.1012907 
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903 
> 3.651161e-15 :  1.0 2.0 0.1 
> 1.518557e-29 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
>         number of iterations exceeded maximum of 5.27058e-308
> > 
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
> 
> 
> 
> ### try another simple example
> ### generate some data 
> 
> 
> 
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> ### call to nls
> 
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
> 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> ### another call to nls with more details requested
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1 
> 209552.9 :  0.3814959 1.4296089 1.7349535 
> 191724.4 :  0.2824096 1.9134931 1.9513585 
> 165276.9 :  0.4484658 1.9827257 1.8983138 
> 125378.7 :  0.7671348 1.9977192 1.7865044 
> 70298.31 :  1.325342 1.999960 1.589895 
> 17571.14 :  2.162671 2.000005 1.294948 
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999 
> 2.200966e-17 :  3 2 1 
> 6.125505e-27 :  3 2 1 
> 6.12235e-27 :  3 2 1 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
> : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> 
> 
> #### same problem!!
> ##############################################
> 
> here is what I get when I type 'version'
> to get details of computer etc.
> 
> 
> 
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    5.0            
> year     2002           
> month    04             
> day      29             
> language R   
> ###############################################
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu May  9 15:17:39 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 9 May 2002 10:17:39 -0400 (EDT)
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>


  OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
documentation??):

  nls() uses convergence criteria that don't work well for artificial data
where the fit is perfect (but work reasonably well for "real" data -- it's
a reasonable tradeoff)
  There may still be a "bug" in nls() in terms of what it actually reports
(it should still report what it is doing correctly, even in a pathological
case).
  Try

ys <- y+rnorm(10,sd=0.001)
nls(ys~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

See:
http://maths.newcastle.edu.au/~rking/R/devel/00b/0102.html
(and following thread)
http://maths.newcastle.edu.au/~rking/R/help/00b/2547.html
(one-paragraph comment at the end)

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:49 2002
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 9 May 2002 16:32:49 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091432.QAA23022@pubhealth.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:00 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:32:00 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
Message-ID: <6rvg9xs87z.fsf@franz.stat.wisc.edu>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May  9 17:33:43 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 9 May 2002 12:33:43 -0400
Subject: [Rd] Fixed: embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>

Hi Duncan

Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
tried that and it didn't work because I'm using gcc instead of Sun's
compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
rather than '-Bsymbolic'.

Once I figured that out, changing 
	LIBR_LDFLAGS = -shared
to
	LIBR_LDFLAGS = -symbolic -shared
in Makeconf resolves the problem, albeit generating a long list of undefined
reference warnings during the link.

-Greg


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Wednesday, May 08, 2002 7:15 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> Subject: Re: embedded R resolving wrong symbols
> 
> 
> Hi Greg.
>   
>  Yes, there are some ways to arrange for tight/eager binding
> rather than dynamically loading libraries. They do depend on
> the linker being used and unfortunately precisely how the
> libraries containing the symbols are being "included".
> 
> One GNU linker option that is of relevance here is -Bsymbolic
> which is documented as
>  "When creating a shared library, bind references to global symbols
>  to the definition within the shared library, if any.  ....."
> 
> As a quick guess, I would add this to R's Makeconf for building
> libR.so so that all possible symbols are resolved locally within that 
> library. Then try linking again.
> 
> 
> I have seen this on several different systems over the past few years
> and I have written up _some_ of the details that I discovered 
> on this topic.
> Unfortunately,  I won't have time to dig them up until I get 
> back to the office at the 
> beginning of next week. Please remind me.
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > When R is embedded in python on my system (Solaris 8), 
> calls to the c
> > functions 'regcomp' and 'regexec' are being resolved to the 
> c-library,
> > rather than the functions compiled from regex.c.  This 
> leads to segfaults
> > because the c-library functions have quite different semantics.
> > 
> > Is there any way to get around this, other than renaming 
> the offending
> > functions?  E.G., would it be possible to use the '-wrap' 
> argument to ld, or
> > perhaps there is another argument which says 'check inside 
> this library for
> > symbols before looking elsewhere'?
> > 
> > Thanks,
> > 
> > -Greg
> > 
> > ----------------- obligatory version information
> > 
> > R 1.4.1, 1.5.0,
> > gcc 2.95.2, 3.0.3,
> > python 2.1.1, 2.1.3
> > SunOs 5.8, sparc
> > 
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ebura@gwu.edu  Thu May  9 17:47:01 2002
From: ebura@gwu.edu (ebura@gwu.edu)
Date: Thu, 9 May 2002 18:47:01 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091647.SAA23384@pubhealth.ku.dk>

I downloaded the latest version of R (1.5.0) and issued a read.table() command 
that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
drive after I downloaded R 1.5.0.

Here's the command and the error message I get under 1.5.0:

> 
golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
uote="",header=T,row.names=NULL)
Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
:
        line 6808 did not have 79 elements

Any help will be appreciated!

Thanks,
Efstathia



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:47:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 17:47:50 +0100 (BST)
Subject: [Rd] Fixed: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>
Message-ID: <Pine.LNX.4.31.0205091745580.2166-100000@gannet.stats>

Coincidentally, the regex symbols are now remapped in R-devel.  This was
to allow the use of PCRE (which also defines them), so that may merely
have made the problem worse on machines with PCRE installed.

Maybe one day I'll summon the energy to use PCRE's native interface
instead.

On Thu, 9 May 2002, Warnes, Gregory R wrote:

> Hi Duncan
>
> Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
> tried that and it didn't work because I'm using gcc instead of Sun's
> compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
> rather than '-Bsymbolic'.
>
> Once I figured that out, changing
> 	LIBR_LDFLAGS = -shared
> to
> 	LIBR_LDFLAGS = -symbolic -shared
> in Makeconf resolves the problem, albeit generating a long list of undefined
> reference warnings during the link.
>
> -Greg
>
>
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Wednesday, May 08, 2002 7:15 PM
> > To: Warnes, Gregory R
> > Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> > Subject: Re: embedded R resolving wrong symbols
> >
> >
> > Hi Greg.
> >
> >  Yes, there are some ways to arrange for tight/eager binding
> > rather than dynamically loading libraries. They do depend on
> > the linker being used and unfortunately precisely how the
> > libraries containing the symbols are being "included".
> >
> > One GNU linker option that is of relevance here is -Bsymbolic
> > which is documented as
> >  "When creating a shared library, bind references to global symbols
> >  to the definition within the shared library, if any.  ....."
> >
> > As a quick guess, I would add this to R's Makeconf for building
> > libR.so so that all possible symbols are resolved locally within that
> > library. Then try linking again.
> >
> >
> > I have seen this on several different systems over the past few years
> > and I have written up _some_ of the details that I discovered
> > on this topic.
> > Unfortunately,  I won't have time to dig them up until I get
> > back to the office at the
> > beginning of next week. Please remind me.
> >
> >  D.
> >
> > Warnes, Gregory R wrote:
> > >
> > > Hi All,
> > >
> > > When R is embedded in python on my system (Solaris 8),
> > calls to the c
> > > functions 'regcomp' and 'regexec' are being resolved to the
> > c-library,
> > > rather than the functions compiled from regex.c.  This
> > leads to segfaults
> > > because the c-library functions have quite different semantics.
> > >
> > > Is there any way to get around this, other than renaming
> > the offending
> > > functions?  E.G., would it be possible to use the '-wrap'
> > argument to ld, or
> > > perhaps there is another argument which says 'check inside
> > this library for
> > > symbols before looking elsewhere'?
> > >
> > > Thanks,
> > >
> > > -Greg
> > >
> > > ----------------- obligatory version information
> > >
> > > R 1.4.1, 1.5.0,
> > > gcc 2.95.2, 3.0.3,
> > > python 2.1.1, 2.1.3
> > > SunOs 5.8, sparc
> > >
> > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is
> > confidential and may be privileged. It is intended for the
> > addressee(s) only. Access to this E-mail by anyone else is
> > unauthorized. If you are not an addressee, any disclosure or
> > copying of the contents of this E-mail or any action taken
> > (or not taken) in reliance on it is unauthorized and may be
> > unlawful. If you are not an addressee, please inform the
> > sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:53:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 18:53:22 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091653.SAA23417@pubhealth.ku.dk>

Note that read.table changed in 1.4.0: see the NEWS file and its help
page.

Here's my guess: line 6808 contains a comment character #.

There is a section on BUGS in the FAQ: please read it!

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> drive after I downloaded R 1.5.0.
>
> Here's the command and the error message I get under 1.5.0:
>
> >
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> :
>         line 6808 did not have 79 elements
>
> Any help will be appreciated!
>
> Thanks,
> Efstathia
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu May  9 18:10:39 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 09 May 2002 12:10:39 -0500
Subject: [Rd] Questions about S4 style methods and generics
In-Reply-To: <3CDA7DD7.E8DE7292@research.bell-labs.com>
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com>
Message-ID: <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>

>>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:

  John> Saikat DebRoy wrote:
  >> 
  >> I have some questions about S4 style methods and generics.
  >> 
  >> First of all, is there any way of using default values for arguments
  >> in the generics/methods? My own experiments show that such arguments
  >> are always ignored.

  John> Yes there is and no they are not.

  John> But there are a couple of points to keep in mind.

  John> The definition of method dispatch is that the _body_ of the selected
  John> method is evaluated, without rematching arguments.  That means that it's
  John> the default values in the (generic) function definition that will be
  John> found in the context of the call.

I was in a situation where there is no default method.

> setGeneric("foo", function(x, y=0) standardGeneric("foo"))
[1] "foo"
> setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
[1] "foo"
> foo(1, 2)
[1] 3
> foo(1)
Error in foo(1) : No direct or inherited method for function "foo" for this call

So are the default values are substituted in the function call after the
method signature is matched? I tried a few other variations. In all
cases it ended up calling the default method if any or gave the same
error if there was no default method. I then moved to three arguments
and got some surprising (to me) results.

R> setGeneric("foo", function(x=1, y=2,z=3) standardGeneric("foo"))
[1] "foo"
R> setMethod("foo", signature(x="ANY", y="ANY",z="ANY"), function(x, y,z) cat("in default method\n"))
[1] "foo"
R> setMethod("foo", signature(x="numeric", y="numeric",z="numeric"), function(x, y,z) cat("in other method\n"))
[1] "foo"
R> foo(5,6,7)
in other method
R> foo(5,6)
Error in foo(1, 2) : No matching method for function "NA" (argument "z", with class missing)
R> foo(5)
in default method
R> getMethods("foo")
x = "ANY", y = "ANY", z = "ANY":
function (x, y, z) 
cat("in default method\n")

x = "numeric", y = "numeric", z = "numeric":
function (x, y, z) 
cat("in other method\n")

x = "numeric", y = "numeric", z = "ANY":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")

x = "numeric", y = "missing":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")


  John> An example:

  John> R> bar <- function(x, y = 0)x+y
  John> R> setGeneric("bar")
  John> R> bar
  John> function (x, y = 0) 
  John> standardGeneric("bar")
  John> <environment: 0x8622a18>
  John> R> setMethod("bar", "character", function(x, y) paste(x,y))
  John> [1] "bar"
  John> R> bar(1,2)
  John> [1] 3
  John> R> bar(99)
  John> [1] 99
  John> R> bar("test")
  John> [1] "test 0"

  John> OTOH, the default expressions for the arguments in the method are
  John> available in the method object.  You can extract them by getting the
  John> method and retrieving, for example, def$y.  It seems a sufficiently
  John> asked-for item that we'll provide a tool for it.

  John> Maybe
  John>   evaluateMethodDefault("y")
  John> ??  The point is to allow access but not burden the standard method
  John> dispatch with re-matching arguments.

  >> The green book seems to be silent on this
  >> matter.
  >> 
  >> The second question is about using a non-trivial function body for
  >> generics. Page 351 of the green book gives an example of this and the
  >> documentation for setGeneric seems to suggest I should be able to do
  >> this at least by using myDispatch=TRUE. However, the current
  >> implementation seems to set the body of the generic definition to a
  >> call to standardGeneric all the time. Is this a bug or a modification
  >> of the green book description?

  John> It's a bug.  Having said that, though, nonstandard generic functions are
  John> slightly deprecated.  There are some potential efficiency enhancements
  John> for dispatch that might be introduced but that would likely depend on
  John> the function being a standard generic.

  John> Also, experience is that people get a little confused and sometimes
  John> provide a definition of the generic that doesn't call
  John> standardGeneric("foo") and so does not give them the method dispatch
  John> they expected.

  John> But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
  John> you're willing to be a bit klunky.  You define the generic and then
  John> replace the body, being careful to preserve the function's environment.

  John> Another example:

  John> R> foo <- function(x) x
  John> R> setGeneric("foo")
  John> [1] "foo"
  John> R> body(foo, envir = environment(foo)) <- 
  John> + quote({cat("Here we go!\n"); standardGeneric("foo")})
  John> R> setMethod("foo", "numeric", function(x)sum(x))
  John> [1] "foo"
  John> R> foo(1:10)
  John> Here we go!
  John> [1] 55
  John> R> foo("test")
  John> Here we go!
  John> [1] "test"

  >> 
  >> Thanks,
  >> 
  >> Saikat
  >> --
  >> Department of Statistics                       Email: saikat@stat.wisc.edu
  >> University of Wisconsin - Madison              Phone: (608) 263 5948
  >> 1210 West Dayton Street                        Fax:   (608) 262 0032
  >> Madison, WI 53706-1685
  >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
  >> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
  >> Send "info", "help", or "[un]subscribe"
  >> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 20:26:02 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 15:26:02 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com> <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDACD4A.1B3DDC77@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> >>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:
> 
>   John> Saikat DebRoy wrote:
>   >>
>   >> I have some questions about S4 style methods and generics.
>   >>
>   >> First of all, is there any way of using default values for arguments
>   >> in the generics/methods? My own experiments show that such arguments
>   >> are always ignored.
> 
>   John> Yes there is and no they are not.
> 
>   John> But there are a couple of points to keep in mind.
> 
>   John> The definition of method dispatch is that the _body_ of the selected
>   John> method is evaluated, without rematching arguments.  That means that it's
>   John> the default values in the (generic) function definition that will be
>   John> found in the context of the call.
> 
> I was in a situation where there is no default method.
> 
> > setGeneric("foo", function(x, y=0) standardGeneric("foo"))
> [1] "foo"
> > setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
> [1] "foo"
> > foo(1, 2)
> [1] 3
> > foo(1)
> Error in foo(1) : No direct or inherited method for function "foo" for this call
> 
> So are the default values are substituted in the function call after the
> method signature is matched? 

Hmmm, well "substituted" may not be the best term to use.

What happens here is pretty much determined by the API, not R-specific. 
Your question about defaults has come up before; should be in a
to-be-written FAQ.

Basically everything is standard S (R or S-Plus) up to the point that
standardGeneric is called.  With an ordinary generic function, arguments
are matched but not evaluated, because of lazy evaluation.

Now the dispatch code examines as many arguments as are involved in
existing signatures (2 in your example).  The class for each argument
inserted into the current signature for dispatch is:
  - "missing" if the corresponding argument is missing from the call;
  - the class of the evaluated actual argument otherwise.
Because of the first step, default expressions are not evaluated during
method selection; they obey the standard S rules of lazy evaluation, as
do arguments not needed for the signature.

(Not relevant to the question, but the dispatch is done first in C; if
there is no method matching the signature exactly, then S language code
is used to select a method by inheritance, and the selected method is
cached under the current signature.)

Your later example seems to be a bug of some sort, but I'll examine it
more closely.  Thanks.  (Dispatch on 3+ arguments probably hasn't had
much exercise!)

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu May  9 21:29:16 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 9 May 2002 22:29:16 +0200 (MET DST)
Subject: [Rd] rbind.data.frame converts logical to factor (PR#1536)
Message-ID: <200205092029.WAA23882@pubhealth.ku.dk>


> df<-data.frame(a=1:10)
> df$b<-df$a<5
> is.factor(df$b)
[1] FALSE
> ddf<-rbind(df,df)
> is.factor(ddf$b)
[1] TRUE


platform i386-pc-linux-gnu
arch     i386
os       linux-gnu
system   i386, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri May 10 01:53:36 2002
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 10 May 2002 08:53:36 +0800 (GMT-8)
Subject: [Rd] read.table (PR#1535)
In-Reply-To: <200205091647.SAA23384@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0205100850290.27456-100000@sf3.comp.nus.edu.sg>

Hi,
I don't think there is anything wrong with R in this case, it is the
file. I had to do a bit of editing to read those mit files into R. The
problem is that the tabs are not quite right. I fixed it by reading it
into Gnumeric and rewriting. I can send you some R dumps of the files if
you like.

Nicholas 

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command 
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
> drive after I downloaded R 1.5.0.
> 
> Here's the command and the error message I get under 1.5.0:
> 
> > 
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
> :
>         line 6808 did not have 79 elements
> 
> Any help will be appreciated!
> 
> Thanks,
> Efstathia
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Drew.Tyre@csiro.au  Fri May 10 06:01:00 2002
From: Drew.Tyre@csiro.au (Drew.Tyre@csiro.au)
Date: Fri, 10 May 2002 07:01:00 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205100501.HAA24965@pubhealth.ku.dk>

Hi,

I have now created the plot under 1.5.0, and the same problem reoccurs. I
have found a simpler code that produces the problem on my computer at least:

map.springs <- function(x, ...){
	plot(x$easting,x$northing,type="n",bty="n",
		axes=FALSE,xlab="",ylab="",...)
	filled <- x$occupied == 1
	points(x$easting[filled],x$northing[filled],
		pch=19,cex=log10(x$area[filled]))
	points(x$easting[!filled],x$northing[!filled],
		pch=21,cex=log10(x$area[!filled]))
	plot.limits <- par(c("xaxp","yaxp"))
	segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
	plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
	
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c(
"100 m"))
}

a.spring <-
data.frame(easting=runif(20)*1000,northing=runif(20)*1000,occupied=rbinom(20
,1,0.5),area=runif(20)*10000)

map.springs(a.spring)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])



Drew Tyre
CSIRO Marine Research Drew.Tyre@csiro.au
PO Box 120		 ph: +61 (07) 3826 7263
Cleveland QLD 4163 fax:+61 (07) 3826 7222
Australia	http://www.marine.csiro.au



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 10 07:09:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 May 2002 08:09:52 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205100609.IAA25122@pubhealth.ku.dk>

This was confirmed as a comment character in the file, a new feature in
1.4.0.

On Fri, 10 May 2002, Nicholas Lewin-Koh wrote:

> Hi,
> I don't think there is anything wrong with R in this case, it is the
> file. I had to do a bit of editing to read those mit files into R. The
> problem is that the tabs are not quite right. I fixed it by reading it
> into Gnumeric and rewriting. I can send you some R dumps of the files if
> you like.
>
> Nicholas
>
> On Thu, 9 May 2002 ebura@gwu.edu wrote:
>
> > I downloaded the latest version of R (1.5.0) and issued a read.table() command
> > that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> > drive after I downloaded R 1.5.0.
> >
> > Here's the command and the error message I get under 1.5.0:
> >
> > >
> > golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> > uote="",header=T,row.names=NULL)
> > Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> > :
> >         line 6808 did not have 79 elements
> >
> > Any help will be appreciated!
> >
> > Thanks,
> > Efstathia
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 10 10:35:03 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 10 May 2002 11:35:03 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200205100935.LAA26278@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> I've already fixed the bugs, but as with the last one, this is
    MM> not critical enough to allow breaking current R-devel's code
    MM> freeze.  I hope I will have corrected it for 1.5.1..

yes, done: the fix has been in R-patched for about 2 days now..

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Sat May 11 02:13:13 2002
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Sat, 11 May 2002 03:13:13 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110113.DAA29237@pubhealth.ku.dk>

I don't seem to be able to initialize a vector of NAs. I hope this is a
bug and not a new feature (I realize I have not paid much attention to a
lot of recent discussion about NA):

platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 
> vector(NA, 3)
Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> matrix(NA,2,2)
     [,1] [,2]
[1,]   NA   NA
[2,]   NA   NA

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat May 11 07:03:40 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 10 May 2002 23:03:40 -0700
Subject: [Rd] Rmpi
Message-ID: <D72E35A2-64A4-11D6-BE69-000393860F3C@stat.ucla.edu>

Compiled and installed this on OS X, using lam-6.5.5, but the usual 
glitch:

[cabledoc68:~/Desktop/Rmpi/src] deleeuw% gcc -bundle -bundle_loader 
/usr/local/lib/R/bin/R.bin -L/sw/lib -o Rmpi.so Rmpi.o conversion.o 
internal.o -L/usr/local/lam-6.5.5/lib -lmpi -llam
/usr/bin/ld: multiple definitions of symbol _do_args
/usr/local/lib/R/bin/R.bin definition of _do_args
/usr/local/lam-6.5.5/lib/liblam.a(do_args.o) definition of _do_args in 
section (__TEXT,__text)

By linking Rmpi.so manually with the -m flag we circumvent this.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 07:28:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 08:28:56 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110628.IAA29669@pubhealth.ku.dk>

On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:

> I don't seem to be able to initialize a vector of NAs. I hope this is a
> bug and not a new feature (I realize I have not paid much attention to a
> lot of recent discussion about NA):

It's an incorrect use!

>From the help page:

    mode: A character string giving an atomic mode, or `"any"'.

I think you meant rep(NA, 3).


>
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> > vector(NA, 3)
> Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> > matrix(NA,2,2)
>      [,1] [,2]
> [1,]   NA   NA
> [2,]   NA   NA

> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 10:51:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 10:51:02 +0100 (BST)
Subject: [Rd] vector(NA, 3) (PR#1541)
In-Reply-To: <200205110628.IAA29669@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205111045550.26771-100000@gannet.stats>

On Sat, 11 May 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:
>
> > I don't seem to be able to initialize a vector of NAs. I hope this is a
> > bug and not a new feature (I realize I have not paid much attention to a
> > lot of recent discussion about NA):
>
> It's an incorrect use!
>
> From the help page:
>
>     mode: A character string giving an atomic mode, or `"any"'.
>
> I think you meant rep(NA, 3).

To amplify that, rep(NA, 3) gives a vector of *logical* NAs, just as
matrix(NA, 2, 2) gives a logical matrix.   There are five different
missing values in R, and `NA' happens to be mapped to the logical one
(unless coerced, implicitly or explicitly).

People normally want numerical missing values, for which use
rep(as.numeric(NA), 3).  Replace `numeric' by `integer', `complex' or
`character' for the other possibilities.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Sun May 12 06:24:23 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Sun, 12 May 2002 07:24:23 +0200 (MET DST)
Subject: [Rd] {round,trunc}.POSIXt and daylight savings time (PR#1543)
Message-ID: <200205120524.HAA01710@pubhealth.ku.dk>

I have found what looks like a small problem in trunc.POSIXt() 
involving the transition to/from standard time and daylight savings 
time. Assuming my assessment is correct, I have a potential solution 
to offer.

If a time in daylight savings time is rounded such that the rounded 
value is on the other side of the transition, the isdst element does 
not get changed accordingly. I have tested only the case of PDT 
rounded to PST in the US/Pacific time zone. I have tested it on 
(only) two different platforms, with slightly different results.  See 
below.

More specifically, in the US/Pacific time zone the transition from 
standard to daylight savings time takes place at 02:00 on the first 
Sunday in April, which in 2001 was 1 April.   My example is a vector 
x of two dates. x[1] is 2001-4-1 3:15, which is in daylight savings 
time. Rounded to the nearest midnight it is 2001-4-1 00:00, which is 
in standard time.

A potential solution is to insert
      x$isdst <- as.POSIXlt(format(x))$isdst
into trunc.POSIXt as its penultimate expression.

-Don

#### Solaris #####
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)    ## note that tmp[1] is labeled PDT, not PST
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### converting back to POSIXct reveals the problem more explicitly
>  print( as.POSIXct(tmp) )
[1] "2001-03-31 23:00:00 PST" "2001-05-03 00:00:00 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

>  Sys.getenv('TZ')
           TZ
"US/Pacific"

###### Darwin ######
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### gets NA instead
>  print( as.POSIXct(tmp) )
[1] NA               "2001-05-03 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform powerpc-apple-darwin5.5
arch     powerpc
os       darwin5.5
system   powerpc, darwin5.5
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon May 13 19:22:25 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Mon, 13 May 2002 20:22:25 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205131822.UAA13101@pubhealth.ku.dk>

Under R-1.5.0 on Solaris 2.6:

R> prettyNum(123456789, big.mark=",")
   [1] ",123,456,789"

and that bad behavior (leading comma) spills into formatC as well:

R> formatC(123456789, digits=0, format="f", big.mark=",")
   [1] ",123,456,789"

Looks to me like a bug in src/library/base/R/format.R, in function prettyNum:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})"),          # Original
                           P0("\\1",big.mark), revStr(B.[i.big])))

where we reverse the "before-the-decimal" string, then put a comma after each
set of 3 digits.  One solution is to make the first regexp check that it is not
followed by a word boundary, i.e. add "\\B" to the end of it:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})\\B"),       # DB's fix
                           P0("\\1",big.mark), revStr(B.[i.big])))

which seems to correct the problem:

R-with-fix> prettyNum(123456789, big.mark=",")
            [1] "123,456,789"
-- 
                              -- David Brahm (brahm@alum.mit.edu)


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From carne006@umn.edu  Mon May 13 21:25:46 2002
From: carne006@umn.edu (carne006@umn.edu)
Date: Mon, 13 May 2002 22:25:46 +0200 (MET DST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
Message-ID: <200205132025.WAA13461@pubhealth.ku.dk>

Full_Name: Edward Carney
Version: 1.5.0
OS: Win98
Submission from: (NULL) (160.94.222.161)


Bookmarks do not work in Table of Contents nor in Index in the
refman.pdf file for version 1.5.0.

Reading under Acrobat 4.05

Thanks,

EC

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue May 14 10:01:28 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 14 May 2002 11:01:28 +0200
Subject: [Rd] Quartz device for Darwin R (MacOS X)
Message-ID: <2D50434A-6719-11D6-AA2B-003065CC4CB8@mclink.it>

This announce is for Mac R developers mostly.

I have just updated the R-devel repository with a brand new quartz() 
device.
This will allow the Darwin build of R to display graphics without the 
need of X11.

The device is in its first release so it is needed more feedback as 
possible to let it become the true natural graphics device of Darwin R.


You should try to build R from the R-devel sources.

Please read the R-admin manual on how to build Darwin R for details, but 
two more things have to be done to let this version of R-devel to build 
under OSX.

The first is to add the "-framework Carbon" to the linker options.

Once R is built, your have to rename bin/help as something else 
otherwise R will not launch properly.

We are working for a better configuration process to avoid these last to 
steps.


To use the quartz device simply open it with quartz(). See the man page 
for the options ?quartz.

Looking forward for your comments,

							Stefano

p.s. one remark: the graphic window is not resizable and cannot be moved 
at the moment so don't send feedback on this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 10:13:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 11:13:08 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205140913.LAA16941@pubhealth.ku.dk>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> Under R-1.5.0 on Solaris 2.6:
    R> prettyNum(123456789, big.mark=",")
    DavidB>    [1] ",123,456,789"

    ....

    DavidB> Looks to me like a bug in
    DavidB> src/library/base/R/format.R, in function prettyNum:

definitely a bug that will be fixed in 1.5.1.
Thank you for the example and patch proposal!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.GRUM@CGIAR.ORG  Tue May 14 14:23:17 2002
From: M.GRUM@CGIAR.ORG (M.GRUM@CGIAR.ORG)
Date: Tue, 14 May 2002 15:23:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141323.PAA20671@pubhealth.ku.dk>

I'm resending this bug report with a new example.  As seen below,
cut.dendrogram gives an error message for some heights, but not for others
and with some datasets adn not others.  I can't see why.

Last time I unwittingly sent my message with HTML formatting.  This time I'm
travelling and using an e-mail system that I am unfamiliar with.  As far as
I can see, I am not using HTML.

Best wishes,
Mikkel

> library(cluster)
> data(flower)
> dfl1 <- daisy(flower, type = list(asymm = 3))
> hdfl1<-hclust(dfl1,method="average")
> plot(hdfl1)
> ddfl1<-as.dendrogram(hdfl1)
> cdfl1<-cut(ddfl1,h=0.5)
> cdfl1<-cut(ddfl1,h=0.4)
> cdfl1<-cut(ddfl1,h=0.31312)
> cdfl1<-cut(ddfl1,h=0.31311)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.2)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14179)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14178)
> cdfl1<-cut(ddfl1,h=0.1)
> ## but,
> dfl2 <- daisy(flower, type = list(asymm = c(1, 3), ordratio = 7))
> hdfl2<-hclust(dfl2,method="average")
> plot(hdfl2)
> ddfl2<-as.dendrogram(hdfl2)
> cdfl2<-cut(ddfl2,h=0.5)
> cdfl2<-cut(ddfl2,h=0.4)
> cdfl2<-cut(ddfl2,h=0.3)
> cdfl2<-cut(ddfl2,h=0.2)
> cdfl2<-cut(ddfl2,h=0.1)
>
--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows XP Professional (build 2600) Service Pack 0.0

Search Path:
 .GlobalEnv, package:mva, package:cluster, package:ctest, Autoloads,
package:base


-----Original Message-----
From: Martin Maechler
To: Grum, Mikkel
Cc: Martin Maechler
Sent: 10/05/02 12:28
Subject: Re: cut.dendrogram

Dear Mikkel,

Thank you for your report,
but
could you re-"compile" this message to make it (more) useful as
bug report?

1) Please turn *off* the HTML-ification that your e-mail
   software has used.  It can make messages in the R-bugs archive
   almost unusable (the same goes for attachments!)

2) Please use *complete* examples!  I.e. you can't use an object
   `x' that is only available to you.
   Try to use R datasets -- via data(<...>) -- or construct them
   explicitly. To do this, do  dput(yourdata) if yourdata is
   relatively small.
   Otherwise generate random data such as

   set.seed(532) # make it reproducible!
   y <- rnorm(100)
   mdat <- data.frame(x = 1:100, y = y, u = cut(y,3), v = y^2)

Thank you one more
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 15:11:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 16:11:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141411.QAA21267@pubhealth.ku.dk>

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:

    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    <...example deleted..>

yes, this time your message has been very useful;
thank you, Mikkel!

Indeed, there is a (at least one!) problem in the  "dendrogram"
class/methods, currently --- which might not be so astonishing,
given the following excerpt from its documentation :

 >> dendrogram                package:mva                R Documentation
 >> 
 >> General Tree Structures
 >> 
 >> Description:
 >> 
 >>      Class `"dendrogram"' provides general functions for handling
 >>      tree-like structures.  It is intended as a replacement for similar
 >>      functions in hierarchical clustering and classification/regression
 >>      trees, such that all of these can use the same engine for plotting
 >>      or cutting trees. Currently the code is in alpha stage and the API
 >>      may change at any point in time.

 >> .............

 >> Details:
 >> 
 >>      Warning: This documentation is preliminary.

Really, it has been on my todo list to look into this, and at least
provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
objects.
As you may have read above, we have not even settled about
several details. {suggestions are welcome!}

BTW, in your example, even the first cut() result couldn't be
plotted any more.

We will look into this.
Thanks for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.ox.ac.uk  Tue May 14 16:13:16 2002
From: david.firth@nuffield.ox.ac.uk (david.firth@nuffield.ox.ac.uk)
Date: Tue, 14 May 2002 17:13:16 +0200 (MET DST)
Subject: [Rd] R-admin docs, Installing packages (PR#1554)
Message-ID: <200205141513.RAA21776@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.5.0
OS: Mac OS X (Darwin)
Submission from: (NULL) (163.1.103.123)


In the R-admin document, at "Installing packages", it says:

  To install packages from source on Unix use

  R CMD INSTALL -l /path/to/library pkg1 pkg2 ...

  The part -l /path/to/library can be omitted, when the first library in R_LIBS
is   
  used if set, otherwise the main library R_HOME/library.

1.  Can I suggest re-wording this last sentence?  Replace "when" by "in which
case", and add "is used" at the end.  I puzzled for quite a while before I
understood what the present wording meant (and I hope I got it right!)

2.  I got confused also because although my .Renviron has
R_LIBS=/Users/david/Library/R
and that works when finding packages within an R session, when I use R CMD
install  without the -l /path/to/library part, packages still get installed in
R_HOME/library.  Am I right to conclude that .Renviron is not used by R CMD
install, and that R_LIBS has to be set by some other method before installing
packages to a private library in this way?  This could be clearer in the
documentation I think.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Tue May 14 18:44:52 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Tue, 14 May 2002 10:44:52 -0700 (PDT)
Subject: [Rd] R/S-Plus incompatibility in segments()
Message-ID: <20020514174452.54076.qmail@web13908.mail.yahoo.com>


There seems to be an incompatibility in the argument names of segments().

In Splus:

USAGE:

segments(x1, y1, x2, y2)

In R:

Usage:

segments(x0, y0, x1, y1,
         col = par("fg"), lty = par("lty"), lwd = par("lwd"), ...)

Any particular reason ? Should I report this as a bug ? (This is currently
messing up some nlme plot methods which uses lsegments() from lattice)

Deepayan



__________________________________________________

LAUNCH - Your Yahoo! Music Experience

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Tue May 14 19:02:12 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Tue, 14 May 2002 13:02:12 -0500
Subject: [Rd] changes to prepare for name space support
Message-ID: <20020514130212.C30020@nokomis.stat.umn.edu>

Two changes in the main development branch to prepare for name space
support:

	Functions in base now have .BaseNamespaceEnv as their
	environment instead of .GlobalEnv

	UseMethod dispatch now behaves like internal dispatch in
	searching for methods in the environment of the call to the
	generic rather than the definition environment of the generic.

The dispatch change should not be noticed at all but is needed to
obtain somewhat more sensible behavior once method definitions are
placed in name spaces.

The main effect of placing base in a name space is that redefinitions
of base functions in .GlobalEnv or loaded packages will not be seen
when when executing bodies of functions defined in base.  If your
intention is to redefine a function that is used by code in base you
need to explicitly assign the new definition into the base
environment.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

----- End forwarded message -----

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:30:51 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:30:51 +0200 (MET DST)
Subject: [Rd] lib.fixup, .GlobalEnv, and R1.5.0 (PR#1556)
Message-ID: <200205150630.IAA24619@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: 1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In R1.3.1, I used the following code inside a function to set a "path" attribute
to .GlobalEnv:

  env_ pos.to.env( 1)
  attr( env, 'path')_ .Path # .Path is a named char vector of length 1
  .Internal( lib.fixup( env, .GlobalEnv)) # adds the attribute

And this works fine. But in R1.5.0, the same code (executed e.g. within a call
to "local" from the command line) removes all the objects in .GlobalEnv (note,
though, that the 'path' attribute does get set OK). For various reasons, this
feature is crucial to me, so I can't actually use R1.5.0 without it!

Oddly, my code used to explicitly set a path attribute for newly-attached things
using this mechanism, and this has now been incorporated into R1.5.0 "library"
command. So I'm clearly not doing anything naughty here!

A suggestion: wouldn't it be easier if we could use

attr( env, <<whatever>>) # where env is an environment

and

attr( env, <<whatever>>)_ 45

instead of having to go via "lib.fixup"?

cheers
Mark


  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:40:01 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:40:01 +0200 (MET DST)
Subject: [Rd] wishlist: I miss Frame 0 (PR#1557)
Message-ID: <200205150640.IAA24742@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R 1.3.1 + 
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In the process of part-switching from S to R, one thing I find myself missing
greatly is S's Frame 0 feature. This is a very convenient place to put
session-level stuff, and to make temporary copies of things (e.g. system
functions) without overwriting the "real" objects lower down the search path.
The operation of Frame 0 is that it is searched during lookup before .GlobalEnv
and the rest of the search path, but it is NOT assigned to unless specified
explicitly in "assign". It seems to me that it would be simple to add this
feature in R. One particular area where it would be useful: I have a debugger
for S, which makes a modified copy of the debuggee function in frame 0. This
means that the original isn't modified. In the R version of the debugger, I have
to overwrite the original function, and there is a risk that I'll call
"save.image" or similar with the modified debug version being saved
inadvertently, losing the original copy.

Another thing I like to do with Frame 0, is to put session-level info in there
(general info for the debugger, information I use for project organization,
etc.). In R, I have to stuff all this into a list somewhere down the search
path, and I guess other people who need this facility have to create their own
equivalents. Having a shared Frame 0 at the top of the search path, would be
much nicer.

NB that I don't like S's Frame 1, and am happy to see the back of that one!

Any chance of getting Frame 0 back? I don't think it would disturb normal
operations unless people WANT to use it-- it's impossible of "accidentally"
putting things there.

cheers
Mark




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:54:53 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:54:53 +0200 (MET DST)
Subject: [Rd] language: bug or feature: vector-subscript of list (PR#1558)
Message-ID: <200205150654.IAA24894@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R1.3.1 & R1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


R doesn't like the use of subscripts with length > 1, to get into recursive
lists:

> listio_ list( a=list( b=9, c='hello'), d=1:5)
> listio[[ c( 1, 2)]]
Error: attempt to select more than one element
> 

S is more relaxed:

test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
test> listio[[ c(1,2)]]
[1] "hello"
test> 

The same goes for assignment into recursive lists.

I find this feature essential, so I eventually wrote the workarounds below. But
I'm sure these are slow and ungainly.

Could this feature not be added as a primitive?

cheers
Mark
assign( '[[', function( var, ...) {
  pg_ .Primitive( '[[')
  vv_ as.name( 'var')
  for( i in c(...))
    vv_ call( 'pg', vv, i)
  eval( vv)
})

assign( '[[<-', function( var, ..., value) {
  i_ c( ...)
  if( length( i)<2)
return( .Primitive( '[[<-')( var, i, value))

  pa_ .Primitive( '[[<-')
  pg_ .Primitive( '[[')
  vario_ as.name( 'var')
  for( ii in i[ -length(i)])
    vario_ call( 'pg', vario, ii)

#  print( vario)

  callio_ substitute( value, envir=parent.frame())
  for( ii in rev( i)) {
    callio_ call( 'pa', vario, ii, callio)
    if( length( vario)>1)
      vario_ vario[[ 2]]
  }
#  print( callio)
return( eval( callio))
})




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 08:08:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 09:08:31 +0200 (MET DST)
Subject: (PR#1558) [Rd] language: bug or feature: vector-subscript of
Message-ID: <200205150708.JAA25040@pubhealth.ku.dk>

On Wed, 15 May 2002 mark.bravington@csiro.au wrote:

> Full_Name: Mark Bravington
> Version: R1.3.1 & R1.5.0
> OS: Windows 2000
> Submission from: (NULL) (140.79.2.3)
>
>
> R doesn't like the use of subscripts with length > 1, to get into recursive
> lists:
>
> > listio_ list( a=list( b=9, c='hello'), d=1:5)
> > listio[[ c( 1, 2)]]
> Error: attempt to select more than one element
> >
>
> S is more relaxed:
>
> test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
> test> listio[[ c(1,2)]]
> [1] "hello"
> test>
>
> The same goes for assignment into recursive lists.
>
> I find this feature essential, so I eventually wrote the workarounds below. But
> I'm sure these are slow and ungainly.
>
> Could this feature not be added as a primitive?

[[ is already a primitive, and nowhere that I can see is it documented
that it allows an argument of length 2.  So it is neither a bug nor a
feature, but a difference from S.

If you submit a patch based on the current R-devel sources, we will add it
if it checks out.  Otherwise, as no one else has ever expressed a need of
this feature, it is very unlikely to get implemented.  R is not a clone of
S, and has the features it has because the workers had need of them.

Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
planned to deprecate `_' in R shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 15 10:54:47 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 15 May 2002 11:54:47 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205150954.LAA27417@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:
    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    MM> <...example deleted..>

    MM> yes, this time your message has been very useful;
    MM> thank you, Mikkel!

    MM> Indeed, there is a (at least one!) problem in the  "dendrogram"
    MM> class/methods, currently --- which might not be so astonishing,
    MM> given the following excerpt from its documentation :

    <......>

    MM> Really, it has been on my todo list to look into this, and at least
    MM> provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
    MM> Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
    MM> objects.

several of these will be in R-devel (to become 1.6 in fall)

    MM> As you may have read above, we have not even settled about
    MM> several details. {suggestions are welcome!}

    MM> BTW, in your example, even the first cut() result couldn't be
    MM> plotted any more.

{nonsense; cut() does not produce a dendrogram but a list
	   containing them!}

    MM> We will look into this.
done.

The fix (now in R-patched which will become 1.5.1) is very easy:

--- src/library/mva/R/dendrogram.R.~1~	13 Aug 2001 21:41:50
+++ src/library/mva/R/dendrogram.R	15 May 2002 09:47:50
@@ -136,7 +136,7 @@
 
 cut.dendrogram <- function(x, h, ...)
 {
-    LOWER <- NULL
+    LOWER <- list()
     X <- 1
 
--------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Minette3557n14@webinfo.fi  Thu May 16 09:46:46 2002
From: Minette3557n14@webinfo.fi (Minette3557n14@webinfo.fi)
Date: Wed, 15 May 2002 21:46:46 -1100
Subject: [Rd] Financial strategies
Message-ID: <000a84c11d7d$6183b4a0$1bd31cd8@lcokco>

------=_NextPart_000_00C7_71E13B5A.B1167A52
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: base64


PCEtLSBzYXZlZCBmcm9tIHVybD0oMDAyMilodHRwOi8vaW50ZXJuZXQuZS1t
YWlsIC0tPg0KPGh0bWw+DQo8Ym9keT4NCjxwIGFsaWduPSJjZW50ZXIiPjxi
Pjxmb250IHNpemU9IjYiIGNvbG9yPSIjRkYwMDAwIj5FWENMVVNJVkUgRlJF
RSBGSU5BTkNJQUwgTUFSS0VUIFJFUE9SVDwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PGZvbnQgc2l6ZT0iNSIgY29sb3I9IiMwMDAw
RkYiPkEgc21hbGwgaW52ZXN0bWVudCBjb3VsZCByZXR1cm4gMiB0byAzIHRp
bWVzIG9yIG1vcmUgb24geW91ciBtb25leTwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5OiBU
aW1lcyBOZXcgUm9tYW47IG1zby1mYXJlYXN0LWZvbnQtZmFtaWx5OiBUaW1l
cyBOZXcgUm9tYW47IG1zby1hbnNpLWxhbmd1YWdlOiBFTi1VUzsgbXNvLWZh
cmVhc3QtbGFuZ3VhZ2U6IEVOLVVTOyBtc28tYmlkaS1sYW5ndWFnZTogQVIt
U0EiPjxmb250IHNpemU9IjYiPjxhIGhyZWY9Imh0dHA6Ly84MS45LjguNC9U
cmFkaW5nRG9sbGFycy8iPkdPDQpIRVJFIFRPIExFQVJOIEhPVzwvYT48L2Zv
bnQ+PC9zcGFuPjwvYj48L3A+DQo8cCBhbGlnbj0iY2VudGVyIj48YSBocmVm
PSJodHRwOi8vODEuOS44LjQvTGlzdE9wdE91dC8iPjxiPjxmb250IHNpemU9
IjUiIGNvbG9yPSIjMDAwMDAwIj5MaXN0DQpvcCBPdXQ8L2ZvbnQ+PC9iPjwv
YT48L3A+DQoNCjwvYm9keT4NCg0KPC9odG1sPg0KDQoxNmwy
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 16:39:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 16:39:55 +0100 (BST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
In-Reply-To: <200205132025.WAA13461@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205151638260.12307-100000@gannet.stats>

I've traced this to something in the methods package, and am investiating
further.  Building excluding that package makes the links work, with it
they do not.  There are duplicate links, which may the cause.


On Mon, 13 May 2002 carne006@umn.edu wrote:

> Full_Name: Edward Carney
> Version: 1.5.0
> OS: Win98
> Submission from: (NULL) (160.94.222.161)
>
>
> Bookmarks do not work in Table of Contents nor in Index in the
> refman.pdf file for version 1.5.0.
>
> Reading under Acrobat 4.05
>
> Thanks,
>
> EC
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 03:29:03 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 04:29:03 +0200 (MET DST)
Subject: [Rd] (PR#1558)
Message-ID: <200205160229.EAA03603@pubhealth.ku.dk>

My reading of the R documentation is that the nature of the subscript i in
x[[i]] is not specified; the only obvious rule is that it should lead to to
a single element. Which is what I'm after: a way of extracting or changing
the 4th element of the 2nd element of a list. Incidentally, the operational
difficulty comes in general programming when I don't know in advance how
many levels down the list I'm going. Otherwise I could just grit my teeth &
type x[[ i[1] ]] [[ i[ 2] ]] [[ i[ 3] ]] instead of x[[ i]].

The S2000 documentation says this:

  A special case of the [[ construct is when x is recursive (e.g., a list)
and i is a list. The components of i should all have length 1 and be
character or numeric. The statement x[[i]] is equivalent to:

  x [[ i[[1]] ]] [[ i[[2]] ]]  ...  [[ i[[length(i)]] ]]

  For example, x[[list("b", 2, 4)]] will pick out the 4th component of the
2nd component of the b component of x.
  
In S2000, it turns out that this also works if "i" is a numeric or character
vector rather than a list, as in my example. This extension to non-lists is
useful and harmless but not essential, because one could always use
"as.list". In R, though, neither the list nor the vector version currently
exists.

#If you submit a patch based on the current R-devel sources, we will add it
#if it checks out.  Otherwise, as no one else has ever expressed a need of
#this feature, it is very unlikely to get implemented.  R is not a clone of
#S, and has the features it has because the workers had need of them.

Well, this worker has need of this feature, which is why I wrote those
workarounds! It does seem to me that, if a language allows one to use
recursive structures of arbitrary nestedness, then there should be a simple
mechanism for accessing and changing arbitrary elements of a recursive
structure.

For now, I will just submit my R code as a mini-library. My point about
having a .Primitive was one of speed-- my R code seems to work OK, but it
must slow things down. I doubt that I'm up to producing a C patch-- I use
Delphi not C, so this sounds a bit daunting. If anyone else would like to
pick up the challenge..?

#Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
#planned to deprecate `_' in R shortly.

As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
ambiguous "<-" goes onto the same pyre ;)

cheers

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 16 04:25:36 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 May 2002 20:25:36 -0700
Subject: [Rd] (PR#1558)
In-Reply-To: <200205160229.EAA03603@pubhealth.ku.dk>
References: <200205160229.EAA03603@pubhealth.ku.dk>
Message-ID: <87sn4svknj.fsf@jeeves.blindglobe.net>

>>>>> "mark" == Mark Bravington <Mark.Bravington@csiro.au> writes:


    mark> As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
    mark> ambiguous "<-" goes onto the same pyre ;)

I feel completely opposite.  And I'm not terribly happy about the idea
of using "=", either, having just been bit by the = vs. == classic user
slip up.  

I actually do like "<-", but then again, I'm using ESS...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 07:48:29 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 08:48:29 +0200 (MET DST)
Subject: [Rd] (PR#1556)
Message-ID: <200205160648.IAA04154@pubhealth.ku.dk>

lib.fixup

My previous post mentions a problem encountered when calling ".Internal(
lib.fixup..." in R1.5.0. I have since found a workaround. It's possible in
R1.5.0 to set attributes of search path environments directly, like so:

> env_ pos.to.env( 3)
> attr( env, 'any.attr')_ 'any.value'
> pos.to.env( 3)
<environment: package:tcltk>
attr(,"name")
[1] "package:tcltk"
attr(,"path")
[1] "C:/R/rw1050/library/tcltk"
attr(,"any.attr")
[1] "any.value"

In R1.3.1, it used to be necessary to use lib.fixup to achieve this. It's
still not possible to call

> attr( pos.to.env( 3), 'any.attr')_ 'any.value'

directly, but this doesn't matter. My (mis-typed) wish-lish-suggestion in
the last post, is therefore irrelevant, and personally I no longer need
lib.fixup. NB that it can still cause problems if it is used-- but as it's
undocumented, I don't suppose this will be a major issue.

Nevertheless, calls to ".Internal( lib.fixup..." are not things of beauty,
and I wonder whether the current usage in "library" is actually necessary?
The code currently reads

            loadenv <- new.env(hash = TRUE, parent = .GlobalEnv)
            <<...>>
                sys.source(codeFile, loadenv, keep.source = keep.source)
            <<...>>
            env <- attach(NULL, name = pkgname)
            on.exit(do.call("detach", list(name = pkgname)))
            attr(env, "path") <- file.path(which.lib.loc, package)
            .Internal(lib.fixup(loadenv, env))
            
but I seem to get satisfactory results with

      env_ attach( NULL, name = pkgname)
      on.exit(do.call("detach", list(name = pkgname)))            
      attr( env, "path") <- file.path(which.lib.loc, package)
      <<...>>
          sys.source(codeFile, env, keep.source = keep.source) # i.e.
straight into "env" not into "loadenv"
      <<...>>
      
which does away with the calls to "new.env" and "lib.fixup". As far as I can
see, the "parent=.GlobalEnv" argument to "new.env" doesn't have any effect
after "lib.fixup"; I'm not sure about the "hash=TRUE".

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu May 16 09:04:30 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 16 May 2002 10:04:30 +0200 (MET DST)
Subject: [Rd] Re: [R] NaN/NA and sprintf double format (PR#1561)
Message-ID: <200205160804.KAA05351@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 14 May 2002, Dirk Eddelbuettel wrote:
> 
> > With a (late prerelease of) 1.5.0 on Windows, using sprintf on NaN
> > yields garbage when the number of decimal is specified while it
> > works fine for NA:
> >
> > > sprintf("%.2f", NA)
> > [1] "0.00"
> 
> I get that on Linux too, but why is it fine?  See below.
> 
> > > sprintf("%.2f", NaN)
> > [1] "-1.#J"
> >
> > Not specifying the decimal precision lets both print garbage:
> >
> > > sprintf("%f", NaN)
> > [1] "-1.#IND00"
> > > sprintf("%f", NA)
> > [1] "-1.#QNAN0"
> >
> > Is this a bug or a feature?
> 
> Remember that NA is logical, so this is not correct usage.  Not that the
> correct usage works very much better ....
> 
> The C code says
> 
> /* Simple wrapper for C sprintf function: does very little checking to
>    see that the format conversion character and the argument are
>    compatible.  This is the user's responsibility!
> */
> 
> and I think that should be on the help page.  If it were, this is a
> feature.

Naturally it's a feature!  But I agree that an extra sentance or two on
the help page would be a good idea.  I suggest appending the following
as a new paragraph to the Value section:

As \code{sprintf} is simply a wrapper for the C function of the same
name, it is the user's responsibility to ensure that the objects passed
in \code{\dots} correspond to the format.  Otherwise the resulting
string may contain garbage.  For example, the typical R numeric object
is a float not an integer (see Examples, below).  Likewise, C does not
recognise special values like \code{NA}, so \code{sprintf("Our survey
said: %f", NA)} is not going to work as you might want.

I've cc'ed this to r-bugs.  Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 01:06:28 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 02:06:28 +0200 (MET DST)
Subject: [Rd] R-1.5.0 on NetBSD (PR#1565)
Message-ID: <200205170006.CAA12976@pubhealth.ku.dk>

NetBSD 1.5ZA on intel

There is a problem with the R-1.5.0 compile under NetBSD caused by a
non-standard zconf.h in NetBSD.  The configure script quite happily
accepts the installed zlib.h, but because the NetBSD zconf.h
substitutes the OF macro by an  __P macro (in zconf.h) the make fails
when trying to compile dounzip.c with many errors like:

In file included from dounzip.c:28:
unzip.h:114: parse error before `OF'

(unzip.h includes zlib.h which includes zconf.h)

So I guess the ideal is for the configure script to test this aspect
(the existence of the OF macro) while it is checking the zlib.h itself,
then fall back to the supplied zconf.h if the OF macro is not defined.

I'll try to construct a workaround, but I am not at all familiar with
the intricacies of the configure script, so I expect this will be much
more efficiently achieved by someone who is.

Certainly I can easily test any proposed solution.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 02:14:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 16 May 2002 21:14:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
Message-ID: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>

So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
version) into src/extra/pcre and compiling on Win32 but its dying during
the final link (undefined reference to 'pcre_free') is there some special
magic I'm missing or do I get to hunt this one down on my own?

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 05:59:55 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 06:59:55 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170459.GAA13479@pubhealth.ku.dk>

Firstly I omitted the following information from my original message:

R is now configured for i386--netbsdelf

  Source directory:          .
  Installation directory:    /usr/pkg
  C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     no


Secondly, a workaround patch is the following:

--- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
+++ src/main/unzip.h
@@ -49,6 +49,16 @@
 #include "zlib.h"
 #endif
 
+/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
+
+#ifndef OF /* function prototypes */
+#  ifdef STDC
+#    define OF(args)  args
+#  else
+#    define OF(args)  ()
+#  endif
+#endif
+
 #if defined(STRICTUNZIP) || defined(STRICTZIPUNZIP)
 /* like the STRICT of WIN32, we define a pointer that cannot be converted
     from (void*) without cast */


Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:14:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 May 2002 07:14:17 +0100 (BST)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>

On Thu, 16 May 2002, Byron Ellis wrote:

> So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> version) into src/extra/pcre and compiling on Win32 but its dying during
> the final link (undefined reference to 'pcre_free') is there some special
> magic I'm missing or do I get to hunt this one down on my own?

It's worked for me on three separate installations (one cross-compiling).
Please check that the files did get compiled and that pcre_free is
exported by libpcre.a.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:45:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 08:45:48 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170645.IAA13861@pubhealth.ku.dk>

On Fri, 17 May 2002 Ray.Brownrigg@mcs.vuw.ac.nz wrote:

> Firstly I omitted the following information from my original message:
>
> R is now configured for i386--netbsdelf
>
>   Source directory:          .
>   Installation directory:    /usr/pkg
>   C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
>
>   R profiling support:       yes
>   R as a shared library:     no
>
>
> Secondly, a workaround patch is the following:
>
> --- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
> +++ src/main/unzip.h
> @@ -49,6 +49,16 @@
>  #include "zlib.h"
>  #endif
>
> +/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
> +
> +#ifndef OF /* function prototypes */
> +#  ifdef STDC
> +#    define OF(args)  args
> +#  else
> +#    define OF(args)  ()
> +#  endif
> +#endif
> +

Thanks. That extract is taken directly from zconf.h in the official
version, so do I gather that NetNSD has gratuitously removed it?

R assumes ISO C, so we don't need the test for STDC.

This is surely a bug in NetBSD and not in R, so I hope you have also filed
a NetBSD bug report.  I've add the comment

/* workaround for NetBSD vandalism on zconf.h */

and that seems a reasonable description to me (and a lot less rude
that some comments about other OSes legitimate differences in the R
sources).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Fri May 17 13:59:04 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Fri, 17 May 2002 14:59:04 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as intended from version 1.5 (PR#1567)
Message-ID: <200205171259.OAA19894@pubhealth.ku.dk>

# replication code at end of mail

> # As from R 1.5 
> 
> identical(as.character(NA), "NA")
[1] FALSE
> 
> # there is no longer a fundamental difference between "NA" 
> # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> # however, though "NA" is not given as na.strings we have
> 
> type.convert(c("NA", "1", NA), na.strings="b")
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings="b")
[1] NN   1    <NA>
Levels:  1 NN NA 
> 
> # dito
> type.convert(c("NA", "1", NA), na.strings=character())
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings=character())
[1] NN   1    <NA>
Levels:  1 NN NA 
 
 
# furthermore, may be type.convert should have default
# function(x, na.strings = NA, as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = character(), as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = NULL, as.is = FALSE, dec = ".")
# rather then
# function(x, na.strings = "NA", as.is = FALSE, dec = ".")


# As from R 1.5 

identical(as.character(NA), "NA")

# there is no longer a fundamental difference between "NA" 
# and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
# however, though "NA" is not given as na.strings we have

type.convert(c("NA", "1", NA), na.strings="b")
# compare to
type.convert(c("NN", "1", NA), na.strings="b")

# dito
type.convert(c("NA", "1", NA), na.strings=character())
# compare to
type.convert(c("NN", "1", NA), na.strings=character())



-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 15:48:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 16:48:43 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as (PR#1568)
Message-ID: <200205171448.QAA21029@pubhealth.ku.dk>

On Fri, 17 May 2002 oehl_list@gmx.de wrote:

> # replication code at end of mail
>
> > # As from R 1.5
> >
> > identical(as.character(NA), "NA")
> [1] FALSE
> >
> > # there is no longer a fundamental difference between "NA"
> > # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> > # however, though "NA" is not given as na.strings we have
> >
> > type.convert(c("NA", "1", NA), na.strings="b")
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings="b")
> [1] NN   1    <NA>
> Levels:  1 NN NA
> >
> > # dito
> > type.convert(c("NA", "1", NA), na.strings=character())
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings=character())
> [1] NN   1    <NA>
> Levels:  1 NN NA

Yes. Thanks for pointing it out.
Notice that is a real result, as the real convertor was hard-coded to
handle "NA" as a missing real.  It proved a little tricky to disentangle
it.

> # furthermore, may be type.convert should have default
> # function(x, na.strings = NA, as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = character(), as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = NULL, as.is = FALSE, dec = ".")
> # rather then
> # function(x, na.strings = "NA", as.is = FALSE, dec = ".")

That was intentional.  It is intended to convert character input read from
a file, and R does still regards "NA" in a file as missing unless told
otherwise.  So it makes sense to have the same default for type.convert,
and also for backwards compatibility.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 16:04:52 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 17 May 2002 11:04:52 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205171104210.29395-100000@hsph.harvard.edu>

So cut-n-pasting the pcre 3.9 files should work fine? Hrmmm, I'll poke
around.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 17 17:30:11 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 17 May 2002 18:30:11 +0200 (MET DST)
Subject: [Rd] pbinom gotcha (PR#1569)
Message-ID: <200205171630.SAA21501@pubhealth.ku.dk>

This came up due to a question from Anders Hald:

Bernoulli calculated an approximation to the smallest n so that

P(0.58 <= x/n <= 0.62) >= 1000/1001

What is the exact value?

Now try

n <- 6350:6500
Pr <- function(n)pbinom(0.62*n,n,0.6) -  
  pbinom(0.58*n,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

Next, try

Pr <- function(n)pbinom(0.62*n,n,0.6) - 
        pbinom(0.58*n + 1e-7,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

At least on Linux, you get quite different results.
The reason is of course that 

> 0.58*6400-3712
[1] -4.547474e-13

and dbinom has a fuzz factor, but pbinom unceremoniously takes
floor(x). I suppose we ought to build the same fuzz into pbinom? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:04:27 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 17 May 2002 23:04:27 +0200 (MET DST)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
Message-ID: <200205172104.XAA22116@pubhealth.ku.dk>

>
> 	I have a function called FitModels(), which simply takes in the
> names of a data.frame and two variable names within that data.frame, and
> fits and returns a list of objects from 2 coxph() fits, one main effects and
> one interaction model.  Sometimes the two variables are such that there is a
> warning message: convergence has not been reached, or the X matrix is
> singular, or some such.

In fact the warning that the convergence may not have been reached in
coxph is usually spurious, so you probably don't want to catch it.
However, there does seem to be something strange going on.


Simplified version
 f<-function(){
    x<-try(warning("a"))
    y<-try(warning("b"))
    list(x,y)
 }

> options(warn=2)
> f()
Error in try(warning("a")) : (converted from warning) a
[[1]]
[1] "Error in try(warning(\"a\")) : (converted from warning) a\n"
attr(,"class")
[1] "try-error"

[[2]]
[1] "b"

> f()
[[1]]
[1] "a"

[[2]]
[1] "b"


Or even more simply

> options(warn=2)
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))
> warnings()
Error in warnings() : Object "last.warning" not found
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))



	-thomas
Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:22:05 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 17 May 2002 14:22:05 -0700 (PDT)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
In-Reply-To: <200205172104.XAA22116@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205171418050.95512-100000@homer11.u.washington.edu>


Even try() isn't really involved.

The problem is in src/errors.c:warningcall

It sets a flag inWarning, presumably to ensure that infinite loops of
recursive warnings don't happen, but if options(warn)==2 then an error is
signalled and the flag is not cleared until the next error.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat May 18 19:51:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sat, 18 May 2002 14:51:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205181450281.4117-100000@hsph.harvard.edu>

I found the problem---for some reason when libpcre.a is being built the R
Makefiles try to build it from pcre.dll, not build a static library. When
I built the static library separately everything went swimmingly.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dciemo@excite.com  Mon May 20 04:42:40 2002
From: dciemo@excite.com (dciemo@excite.com)
Date: Mon, 20 May 2002 05:42:40 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect  R-lang.pdf (PR#1575)
Message-ID: <200205200342.FAA27132@pubhealth.ku.dk>

Full_Name: David Ciemiewicz
Version: 1.3.1
OS: Windows 2000
Submission from: (NULL) (63.192.218.208)


In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
expression which uses the function "any".

> if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> y <- if( any(x)<= 0 ) log(1+x) else log(x)

However, the parenthesis are incorrect in the conditional part of the if.

It should be:

    if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
    y <- if ( any(x <= 0) ) log(1+x) else log(x)


However, if we are really being pedantic, this is still not correct.  If any
values of x are <= -1, you will still get an error.

I'm still too new to R to figure out how to get what I thing I really want which
would set all values less than or equal to zero to be 1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 11:12:47 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect (PR#1576)
Message-ID: <200205200912.LAA27719@pubhealth.ku.dk>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:01 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect
 R-lang.pdf (PR#1575)
In-Reply-To: <200205200342.FAA27132@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205201007360.16296-100000@gannet.stats>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 11:46:16 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 12:46:16 +0200 (MET DST)
Subject: [Rd] is.na<- coerces character vectors to be factors within dataframes (PR#1577)
Message-ID: <200205201046.MAA27985@pubhealth.ku.dk>

I am not sure if this is a bug within is.na<- or if it lies deeper in the
dataframe construction process. Indeed, perhaps it is not a bug at all (in
which case I would suggest that the help page for NA be provided with a warning
for unsuspecting users (like me)).

When used on a character vector within a dataframe, is.na<- coerces the vector
to factor.

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> x
  var
1   A
2   B
3   C
> is.character(x$var)
[1] TRUE
> is.na(x[[1]]) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] FALSE
> is.factor(x$var)
[1] TRUE
>

Interestingly enough, this coersion does not occur if you refer to x$var
instead of x[[1]].

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> is.na(x$var) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE
> 

I could (ort of) imagine a story in which the coercision is the desired
behavior --  by using is.na you are implicitly taking apart a dataframe and
putting it back together and, when you make dataframes, character vectors are
coerced to factor by default. But I can't come up with a story as to why x$var
should be handled differently then x[[1]].

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Thanks,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 12:46:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 13:46:35 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201146.NAA28130@pubhealth.ku.dk>

The inconsistency is that you use $<- to set the column, then [[<- to
change it.  Had you tried to set the column by

x[[1]] <- as.character(x[[1]])

you would have seen the problem immediately (it does not work as you would
have intended).  If you want to be sure to turn off conversion to factor,
you need to set the column to class "AsIs".  My belief is that
will behave consistently.

> x <- data.frame(var = I(LETTERS[1:3]))
> is.na(x[[1]]) <- 2
> x
   var
1    A
2 <NA>
3    C
>  is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE

In any case, it is nothing to do with is.na<-:

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
>
> x[[1]][2] <- "3"
> x
  var
1   A
2   3
3   C
> is.character(x$var)
[1] FALSE

You'll see that [[<-.data.frame contains

            if (!inherits(value, "data.frame"))
                value <- as.data.frame(value)

and that is where the coercion is done.  It really isn't possible to tell
your intentions if you replace a whole column of a data frame.

Having said all that, the source says

    if(nargs() < 4) {
	## really ambiguous, but follow common use as if list
	## el(x,i) <- value is the preferred approach

and S4 does not do the conversion.

I don't understand the comment, as

> get("el<-")
.Primitive("[[<-")

and so el<- just calls [[<- ....



On Mon, 20 May 2002 a296180@mica.fmr.com wrote:

> I am not sure if this is a bug within is.na<- or if it lies deeper in the
> dataframe construction process. Indeed, perhaps it is not a bug at all (in
> which case I would suggest that the help page for NA be provided with a warning
> for unsuspecting users (like me)).

Not appropriate!

> When used on a character vector within a dataframe, is.na<- coerces the vector
> to factor.
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > x
>   var
> 1   A
> 2   B
> 3   C
> > is.character(x$var)
> [1] TRUE
> > is.na(x[[1]]) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] FALSE
> > is.factor(x$var)
> [1] TRUE
> >
>
> Interestingly enough, this coersion does not occur if you refer to x$var
> instead of x[[1]].
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > is.na(x$var) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] TRUE
> > is.factor(x$var)
> [1] FALSE
> >
>
> I could (ort of) imagine a story in which the coercision is the desired
> behavior --  by using is.na you are implicitly taking apart a dataframe and
> putting it back together and, when you make dataframes, character vectors are
> coerced to factor by default. But I can't come up with a story as to why x$var
> should be handled differently then x[[1]].
>
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
>
> Thanks,
>
> David Kane
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:25:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 19:25:10 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201725.TAA29076@pubhealth.ku.dk>

Thanks for taking the time and trouble to explain this to me.

ripley@stats.ox.ac.uk writes:
 > You'll see that [[<-.data.frame contains
 > 
 >             if (!inherits(value, "data.frame"))
 >                 value <- as.data.frame(value)
 > 
 > and that is where the coercion is done.  It really isn't possible to tell
 > your intentions if you replace a whole column of a data frame.

What is the appropriate way to change the value in a single row in a dataframe
to NA without having to "replace a whole column"? That is, how can I change the
value "B" in row 2 to being NA while keeping var as a vector of characters?

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)

One obvious answer is to use simple assignment.

> x[2,1] <- NA
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> 

This has the desired effect. Moreover, something like this would work with my
merge.data.frame problem. However, I have been operating under the (mistaken?)
impression that assigning NA directly was A Bad Thing.


 > On Mon, 20 May 2002 a296180@mica.fmr.com wrote:
 > 
 > > I am not sure if this is a bug within is.na<- or if it lies deeper in the
 > > dataframe construction process. Indeed, perhaps it is not a bug at all (in
 > > which case I would suggest that the help page for NA be provided with a warning
 > > for unsuspecting users (like me)).
 > 
 > Not appropriate!

Yes. I see that now.

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:38:06 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Mon, 20 May 2002 13:38:06 -0400
Subject: [Rd] Suggested change in merge.data.frame
Message-ID: <15593.13438.272566.100291@gargle.gargle.HOWL>

AFAIK, this is not a bug since it could be a feature that merge.data.frame
coerces character vectors to be factor in certain circumstabces. (I think that
these circumstances require that all.x is TRUE, that y has fewer rows than x
and that the coerced column comes from y.)

In any event, changing the line 

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)

to 

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

solves the (or, rather, my) problem. The main reason that I hesitate to
recommend it heartily is that I thought that assigning NA directly was A Bad
Thing, but perhaps this is not so.

If this is a bad idea, I would love to understand why. It seems to work fine
with the help page examples and in my own code. Here is a simple example:

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3])
> y$b <- as.character(y$b)
> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
Row.names         a         b 
 "factor" "integer"  "factor" 
>

## Load up new merge.data.frame

> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
  Row.names           a           b 
   "factor"   "integer" "character" 
> merge(x, y, by = 0, all.x = TRUE)
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> 

Thanks to Brian Ripley for much explanation (which I may not have fully
understood) of the issues involved.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhitchco@stat.ufl.edu  Mon May 20 19:34:12 2002
From: dhitchco@stat.ufl.edu (dhitchco@stat.ufl.edu)
Date: Mon, 20 May 2002 20:34:12 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205201834.UAA29307@pubhealth.ku.dk>

I have apparently found an error in the "pam" function of the "cluster"
library package.  Please pardon me if this error has been pointed out or
if this e-mail should be directed to someone else.

The problem only started occurring with R version 1.5.0, which I started
using about a week ago.  The problem occurs when you try to use "pam"
with the input being a dissimilarity matrix instead of a data matrix;
the results when using the dissimilarity matrix are very strange and not
at all like those obtained when using the data matrix.

For example, try this code:

library(cluster)
data(ruspini)
#the clustering using a data matrix as the input:
pam(ruspini,4)
#the clustering using a dissimilarity matrix as input:
pam(daisy(ruspini),4,diss=T)

The clustering results should be the same but are wildly different.
Again, this problem started happening with the upgrade to R 1.5.0.
Thank you for any help you can provide.

David Hitchcock


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 22:31:43 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 23:31:43 +0200 (MET DST)
Subject: [Rd] No documentation for class AsIs (PR#1582)
Message-ID: <200205202131.XAA29915@pubhealth.ku.dk>

There is no documentation for class AsIs, that is ?AsIs gives you
nothing. Relatedly, there is no discussion of the use of I() to create objects
of class AsIs on the help page for I(). This means that it is hard to find
information in the help pages about the following usage.

> test <- data.frame(x = I(letters[1:3]))
> test
  x
1 a
2 b
3 c
> class(test$x)
[1] "AsIs"      "character"
> 

Apologies if this is present in some place that I could not find.

> help.search("AsIs")
Help files with alias or title matching `AsIs',
type `help(FOO, package = PKG)' to inspect entry `FOO(PKG) TITLE':

format(base)                                 Encode in a Common Format
data.frame(base)                             Data Frames
bs(splines)                                  Generate a Basis for Polynomial Splines
ns(splines)                                  Generate a Basis Matrix for Natural Cubic Splines
predict.bs(splines)                          Evaluate a Spline Basis

Other than a brief and opaque mention in ?data.frame, I couldn't find anything
applicable. If it would be helpful, I would be happy to try my hand at an
addition to the ?I page for this usage.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205210515.g4L5F4H28757@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1570 *
Subject: Re: [R] options()$warn==2 and try()
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Fri, 17 May 2002 14:03:40 -0700 (PDT)
--I assume that clearing inWarning is safe because recursive warnings will create
--recursive errors, which will be ignored in errorcall()
--

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1543 *
Subject: {round,trunc}.POSIXt and daylight savings time
From: Don MacQueen <macq@llnl.gov>
Date: Sat, 11 May 2002 22:22:41 -0700
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1569 *
Subject: pbinom gotcha
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 May 2002 18:26:30 +0200
* PR# 1576 *
Subject: Re: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect 
From: ripley@stats.ox.ac.uk
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
* PR# 1577 *
Subject: is.na<- coerces character vectors to be factors within dataframes
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 06:45:07 -0400
* PR# 1578 *
Subject: Spice girls' vocal concert
From: kota-h <kota-h@mtc.biglobe.ne.jp>
Date: Mon, 20 May 2002 06:35:27 -0500 (CDT)
* PR# 1579 *
Subject: Involved In Fundraising?
From: "Fund Raisee" <fundraisehelp01@yahoo.com.au>
Date: Mon, 20 May 2002 19:43:39 +0800
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 21 09:21:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 May 2002 10:21:42 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205210821.KAA02494@pubhealth.ku.dk>

>>>>> "DavidH" == David Hitchcock <dhitchco@stat.ufl.edu> writes:

    DavidH> I have apparently found an error in the "pam"
    DavidH> function of the "cluster" library package.  Please
    DavidH> pardon me if this error has been pointed out or if
    DavidH> this e-mail should be directed to someone else.

    DavidH> The problem only started occurring with R version
    DavidH> 1.5.0, which I started using about a week ago.  The
    DavidH> problem occurs when you try to use "pam" with the
    DavidH> input being a dissimilarity matrix instead of a data
    DavidH> matrix; the results when using the dissimilarity
    DavidH> matrix are very strange and not at all like those
    DavidH> obtained when using the data matrix.

    DavidH> For example, try this code:

     library(cluster)
     data(ruspini)
     ## the clustering using a data matrix as the input:
     pam(ruspini,4)
     ## the clustering using a dissimilarity matrix as input:
     pam(daisy(ruspini),4,diss=T)

    DavidH> The clustering results should be the same but are wildly different.

well, "wildly different" is an  ``unusual''  description of

   > daisy(ruspini)
   Error in daisy(ruspini) : NAs in foreign function call (arg 7)

which does happen when  library(methods)  is attached (as it is
for me)  
and  is not new in 1.5.0, (it does happen in the 1.4.x versions
as well, because since then, read.table() does not coerce
integer to numeric anymore).

This is clearly an omission in daisy() which only checks for "numeric"
instead of "integer" as well.

Can you make sure you detach methods, e.g., by

    if(any(i.meth <- search() == "package:methods")) detach(i.meth)

and retry then. For me the result is then almost identical
(apart from the fact that in the 2nd case the medoid coordinates are
 not available, of course!)

    DavidH> Again, this problem started happening with the upgrade to R 1.5.0.

(but not from 1.4.x ...)

    DavidH> David Hitchcock

Thanks for reporting.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Tue May 21 21:17:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Tue, 21 May 2002 22:17:10 +0200 (MET DST)
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
Message-ID: <200205212017.WAA09766@pubhealth.ku.dk>

Although the documentation is somewhat sketchy, I() can be used to create
objects of class AsIs:

> I("a")
[1] "a"
attr(,"class")
[1] "AsIs"      "character"
> I(4)
[1] 4
attr(,"class")
[1] "AsIs"    "numeric"
> I(4 + 0i)
[1] 4+0i
attr(,"class")
[1] "AsIs"    "complex"
> 

This fails for objects of class POSIXct.

> class(ISOdate(2002, 5, 21))
[1] "POSIXt"  "POSIXct"
> I(ISOdate(2002, 5, 21))
Error in names(x) : evaluation is nested too deeply: infinite recursion?
>

Interestingly enough, it produces an (incorrect?) answer for objects of class
POSIXlt

> class(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "POSIXt"  "POSIXlt"
> I(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> 

Of course, this may not be a bug since it is not clear that I() is documented
to do anything like this.

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 21 21:48:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2002 22:48:27 +0200
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
In-Reply-To: <200205212017.WAA09766@pubhealth.ku.dk>
References: <200205212017.WAA09766@pubhealth.ku.dk>
Message-ID: <x2bsb94484.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> Although the documentation is somewhat sketchy, I() can be used to create
> objects of class AsIs:
...
> This fails for objects of class POSIXct.
> 
> > class(ISOdate(2002, 5, 21))
> [1] "POSIXt"  "POSIXct"
> > I(ISOdate(2002, 5, 21))
> Error in names(x) : evaluation is nested too deeply: infinite recursion?
> >

Actually I() works fine, but the resulting object has a print
method problem:

>  x <- I(ISOdate(2002, 5, 21))
> x
Error in names(x) : evaluation is nested too deeply: infinite recursion?
> dput(x)
structure(1021982400, class = c("AsIs", "POSIXt", "POSIXct"))

Looks like the issue is that print calls format.AsIs which calls toString
which calls paste which calls as.character which calls format which....

----
> Interestingly enough, it produces an (incorrect?) answer for objects of class
> POSIXlt
> 
> > class(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "POSIXt"  "POSIXlt"
> > I(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> > 

However, that is not particularly incorrect:

> dput(as.POSIXlt(ISOdate(2002, 5, 21)))
structure(list(sec = 0, min = 0, hour = 14, mday = 21, mon = 4, 
    year = 102, wday = 2, yday = 140, isdst = 1), .Names = c("sec", 
"min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
), class = c("POSIXt", "POSIXlt"), tzone = c("", "CET", "CEST"
))

(Notice the 6hr time diff..)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 13:03:25 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 22 May 2002 08:03:25 -0400
Subject: package names with `.' cause problems in the Depends field
Message-ID: <15595.35085.417551.700833@gargle.gargle.HOWL>

Some of my package names have `.' in them. An example is "g.data". R CMD check
complains about this as follows:

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Is the problem:

1) That `.' is not allowed in package names or

2) With R CMD check or

3) With my analysis?

The key Perl code in check seems to be:

	foreach my $dep (@dependencies) {
	    $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;
	    ## The entry is malformed if there is no match, or there is
	    ## a match but the dep_op is different from `<=' or `>', or
	    ## the dep_version does not only consist of digits, `.' or
	    ## `-'.
	    if(!($1) || ($2 && (!(($3 eq "<=") || ($3 eq ">="))
				|| ($4 =~ /[^\d\.\-]/)))) {
		$any++;
		break;
	    }
	}
	if($any == 0) {
	    $log->result("OK")
	}
	else {
	    $log->error();
	    $log->print("Malformed Depends field.\n");
	    $log->print(wrap("", "", @msg_DESCRIPTION));
	    exit(1);
 	}

Alas, I am not Perl savvy enough to fully understand this. Simple testing shows
that the matching yields no matches ($1 is empty) for a name like "g.data". If
`.' is allowed in package names, then I suspect that this is a bug.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Wed May 22 13:28:36 2002
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Wed, 22 May 2002 14:28:36 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221228.OAA16397@pubhealth.ku.dk>

I wonder if something like this has been reported 
before:

> pexp(85:86,0.438)
[1]    1 -Inf




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:tools, package:ctest, Autoloads, package:base

Dietrich Trenkler

--
Dietrich Trenkler   Universität Osnabrück                                  
FB Wirtschaftswissenschaften           
Rolandstr.8              D-49069 Osnabrück

dtrenkler@nts6.oec.uni-osnabrueck.de 

        
     
 
                                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 22 13:59:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 May 2002 14:59:17 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221259.OAA16871@pubhealth.ku.dk>

>>>>> "dtrenkler" == dtrenkler  <dtrenkler@nts6.oec.uni-osnabrueck.de> writes:

    dtrenkler> I wonder if something like this has been reported
    dtrenkler> before:

    >> pexp(85:86,0.438)
    dtrenkler> [1] 1 -Inf

yes, it has been reported (May 11, R-help) for pweibull() and
was tracked to a bug in the new R internal expm1() function
which only shows when no system-internal expm1() function is
present. Hence the problem has only been seen on Windows.

It has been fixed in "R-patched" for quite a while, and we
recommend you get "R-patched" pre-compiled for Windows
by Prof Ripley

	  http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre/SetupRpatched.exe

Thank you for reporting it anyway (it was not obvious if you haven't
followed R-help closely).

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed May 22 13:58:18 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 22 May 2002 14:58:18 +0200 (MEST)
Subject: Bug in pexp (PR#1590)
In-Reply-To: <200205221228.OAA16397@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0205221457590.6197-100000@artemis.imbe.med.uni-erlangen.de>



> I wonder if something like this has been reported 
> before:
> 
> > pexp(85:86,0.438)
> [1]    1 -Inf
> 

R> pexp(85:86,0.438)
[1] 1 1

Torsten

R> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    6.0                         
year     2002                        
month    05                          
day      21                          
language R                           


> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, package:tools, package:ctest, Autoloads, package:base
> 
> Dietrich Trenkler
> 
> --
> Dietrich Trenkler   Universität Osnabrück                                  
> FB Wirtschaftswissenschaften           
> Rolandstr.8              D-49069 Osnabrück
> 
> dtrenkler@nts6.oec.uni-osnabrueck.de 
> 
>         
>      
>  
>                                            
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 14:57:02 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Wed, 22 May 2002 15:57:02 +0200 (MET DST)
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
Message-ID: <200205221357.PAA17525@pubhealth.ku.dk>

R CMD check fails when the Depends field in the DESCRIPTION file includes a
single package with `.' in the name.

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Assuming that `.' is allowed in a package name (there are two such packages on
CRAN and I could find nothing to the contrary in Writing R Extensions), the
following line in check should be changed from:

$dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

to:

$dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

that is, (\w+) becomes ([\w\.]+) in order to match names that have a
`.'. Thanks to David Brahm for suggesting this fix.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@ms.cc.sunysb.edu  Wed May 22 22:04:54 2002
From: tkeitt@ms.cc.sunysb.edu (tkeitt@ms.cc.sunysb.edu)
Date: Wed, 22 May 2002 23:04:54 +0200 (MET DST)
Subject: signature match in setMethod (PR#1592)
Message-ID: <200205222104.XAA19333@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.5
OS: Linux
Submission from: (NULL) (128.227.201.237)


The function "setMethod" makes the following call to "insertMethod":

allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)], 
        asMethodDefinition(definition, signature))

If I understand insertMethod correctly, the third argument should be the names
of the formal arguments of the method. However, this fails if the signature is
something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
'j', '...', 'drop')" because the "..." gets passed instead of "drop". Changing
this to

allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
fnames)], 
        asMethodDefinition(definition, signature))

seems to solve the problem.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri May 24 19:41:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 24 May 2002 20:41:18 +0200
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
In-Reply-To: <200205221357.PAA17525@pubhealth.ku.dk>
References: <200205221357.PAA17525@pubhealth.ku.dk>
Message-ID: <15598.35150.17889.571234@mithrandir.hornik.net>

>>>>> a296180  writes:

> R CMD check fails when the Depends field in the DESCRIPTION file includes a
> single package with `.' in the name.

> * checking for file 'financials/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... ERROR
> Malformed Depends field.
> See the information on DESCRIPTION files in section 'Creating R packages'
> of the 'Writing R Extensions' manual.
> mica|tmp> 

> Assuming that `.' is allowed in a package name (there are two such packages on
> CRAN and I could find nothing to the contrary in Writing R Extensions), the
> following line in check should be changed from:

> $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

> to:

> $dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

> that is, (\w+) becomes ([\w\.]+) in order to match names that have a
> `.'. Thanks to David Brahm for suggesting this fix.

Thanks.  Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmate@coh.org  Sat May 25 01:15:30 2002
From: jlongmate@coh.org (jlongmate@coh.org)
Date: Sat, 25 May 2002 02:15:30 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250015.CAA08110@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: 1.5.0
OS: Windows NT 4.00
Submission from: (NULL) (151.152.101.44)


On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
a printer selection window, and produces a printed plot:
> plot(1:10,1:10)
> dev.print(win.print)
but with focus on the graphics window, neither the printer button, the printer
selection from the file menu, nor CTRL-P do anything.  No printer window
appears.  These all work in version 1.4.1 on the same machine, on the same day. 
I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
thing happened.
I can use the file menu to save to a PDF file, or to copy to the clipboard, but
not to directly print the contents of the graphics window.

The R for Windows FAQ, Version for rw1050, states "You can print the graphics
window from its menu or by using dev.print with suitable arguments (see its help
page: most likely dev.print(win.graph) will work)."  The reference to win.graph
should probably be to win.print.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R     


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 25 08:40:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 25 May 2002 09:40:23 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250740.JAA08768@pubhealth.ku.dk>

This is known, already fixed in R-patched.  Please look in the R-help
archives (including for where you can get a pre-compiled version of
a late enough version to have the fix).


On Sat, 25 May 2002 jlongmate@coh.org wrote:

> Full_Name: Jeffrey Longmate
> Version: 1.5.0
> OS: Windows NT 4.00
> Submission from: (NULL) (151.152.101.44)
>
>
> On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
> a printer selection window, and produces a printed plot:
> > plot(1:10,1:10)
> > dev.print(win.print)
> but with focus on the graphics window, neither the printer button, the printer
> selection from the file menu, nor CTRL-P do anything.  No printer window
> appears.  These all work in version 1.4.1 on the same machine, on the same day.
> I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
> thing happened.
> I can use the file menu to save to a PDF file, or to copy to the clipboard, but
> not to directly print the contents of the graphics window.
>
> The R for Windows FAQ, Version for rw1050, states "You can print the graphics
> window from its menu or by using dev.print with suitable arguments (see its help
> page: most likely dev.print(win.graph) will work)."  The reference to win.graph
> should probably be to win.print.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun May 26 09:34:48 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 May 2002 10:34:48 +0200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu>
Message-ID: <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>

[moved to R-devel]

Thomas Lumley wrote:
> 
> On Sat, 25 May 2002, Patrick Buetzberger wrote:
> 
> > Dear colleagues,
> >
> > I often use chemical formulas to label my x-axis, e.g. in barplots. I
> > used to do this like the following example and it worked just fine:
> >
> <snip>
> >
> > The important point is the x-axis here: before we installed the new R
> > 1.5 on our workstations, the chemical formulas were properly aligned and
> > looked well. Ever since, if I use the exact same procedure, I get the
> > graphic but the chemical formulas are not aligned horizontally properly
> > anymore: e.g. Mg^{2+''} or NO[3]^{-''} are a bit higher than F^{-''} or
> > H^{+''} (it seems to depend on whether there is a subscript or a letter
> > with a part below the main line like a 'g').
> > I didin't find any hint on the r-project homepage. I don't know if we
> > forgot some feature when newly installing R or if something changed in
> > version 1.5.
> 
> I think something changed.  In the NEWS file we have
> 
> o       The vertical alignment of mathematical annotations was wrong.
>         When a vertical adjustment was not given, it was bottom-adjusting
>         i.e,. it was treating adj=0 as adj=c(0, 0).  It now treats
>         adj=0 as adj=c(0, 0.5) as for "normal" text. (PR#1302)
> 
> and I expect this is responsible.  

That change indeed is reasonable, but I don't think it is this
particular change (at least as documented) that makes Patrick's example
doesn't work any more.


> It looks to me as if R is now trying to center the expressions vertically. 

Right for text() and friends, but not for axis(), see the example below,
and maybe this is a bug (Paul?). Anyway, fixing this bug (?) won't
change much for Patrick's example.


> This is also consistent with the previous reply that suggested putting blank 
> subscripts on everything as a work-around.

If sub- or superscripts are a expression, space is added below
respective above that expression (if not already done before), so
complex formulas can be generated. And, at least for me, the result is
somehow expected.

I am very surprised and wondered why Patrick's example worked in
R-1.4.1.
Without having looked into the code, there must have been something
fuzzy that is broken since R-1.5.0.


> I don't think there's a complete fix for this, since sometimes people want
> expressions aligned on their actual vertical centers and sometimes on the
> center of the main line of text (as you do).

Here an example on the alignments:

 plot(1:12, type="n", axes=FALSE)

 expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
    PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
    Mg^{2+''}, Ca^{2+''}, H^{+''})

 axis(1, 1:12, lab=expr)  # the "problem"

 text(1:12, 3, expr) # adj=c(0.5, 0.5), the default for text()

# This looks like the x-axis annotation:
 text(1:12, 5, expr, adj=c(0.5, 0)) 

# And this is all in *one* formula, as Patrick would like to get it
somehow.
# Only a guess: Was there something like a "coerce to one formula" in
R-1.4.1?

 text(6, 9, 
    labels = expression(F^{-''} * Cl^{-''} * NO[2]^{-''} * NO[3]^{-''} * 
    PO[4]^{3-''} * SO[4]^{2-''} * Na^{+''} * NH[4]^{+''} * K^{+''} *
    Mg^{2+''} * Ca^{2+''} * H^{+''}))


I am sure, Paul will get the point in less than a second.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gorazd.brumen@student.fmf.uni-lj.si  Mon May 27 14:34:25 2002
From: gorazd.brumen@student.fmf.uni-lj.si (Gorazd Brumen)
Date: Mon, 27 May 2002 15:34:25 +0200
Subject: Pressing TAB
Message-ID: <20020527112954.C1B17535A2@smtp1.volja.net>

Hello,

I am new on the list and in R language. I only have one question - 
could it be achieved that pressing a TAB key autocompletes 
the possible directions to the R language. This is a Unix 
feature and it would greatly boost the performance. 

I have R-1.3.1 installed on Linux.

Gorazd 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon May 27 13:49:29 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 27 May 2002 08:49:29 -0400
Subject: CRAN links
Message-ID: <3CF22B59.FF323D1D@bank-banque-canada.ca>

Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
<ftp://cvs.r-project.org/pub/> ?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 27 15:19:31 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 May 2002 09:19:31 -0500
Subject: CRAN links
In-Reply-To: <3CF22B59.FF323D1D@bank-banque-canada.ca>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
Message-ID: <6r8z658yh8.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> <ftp://cvs.r-project.org/pub/> ?

Curious.  I fixed up those directories and restarted the ftp server on
the machine that serves as cvs.r-project.org.   Now I can reach those
directories via an ftp client (ncftp) but not via a web browser
(netscape).  I'm not sure why.

The same file system is available as
                    http://cran.us.r-project.org/
I would recommend using that URL instead of ftp://cvs.r-project.org/
for an http client.  A less desirable alternative is to notice that
the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
/pub/e19/CRAN and to use
                 ftp://cvs.r-project.org/pub/e19/CRAN

I'm not sure why a web browser cannot follow the symbolic link but an
ftp client can.  I would have thought this would be determined by the
server, not by the client.  Can anyone suggest why the symbolic links
do not work for netscape?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 27 15:44:45 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 2002 16:44:45 +0200
Subject: CRAN links
In-Reply-To: <6r8z658yh8.fsf@franz.stat.wisc.edu>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu>
Message-ID: <x24rgttztu.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > <ftp://cvs.r-project.org/pub/> ?
> 
> Curious.  I fixed up those directories and restarted the ftp server on
> the machine that serves as cvs.r-project.org.   Now I can reach those
> directories via an ftp client (ncftp) but not via a web browser
> (netscape).  I'm not sure why.
> 
> The same file system is available as
>                     http://cran.us.r-project.org/
> I would recommend using that URL instead of ftp://cvs.r-project.org/
> for an http client.  A less desirable alternative is to notice that
> the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> /pub/e19/CRAN and to use
>                  ftp://cvs.r-project.org/pub/e19/CRAN
> 
> I'm not sure why a web browser cannot follow the symbolic link but an
> ftp client can.  I would have thought this would be determined by the
> server, not by the client.  Can anyone suggest why the symbolic links
> do not work for netscape?

No, and it appears to be Netscape-specific too. Mozilla follows the
links OK. (The form of the link - relative/absolute - appears to be
irrelevant, so my first guess was wrong.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon May 27 17:57:23 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 27 May 2002 18:57:23 +0200
Subject: CRAN links
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu> <x24rgttztu.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CF26573.B7732A56@univie.ac.at>

i just checked with netscape 4.79 on win2k,
and i had no problem getting the directory listing of

ftp://cvs.r-project.org/pub/





Peter Dalgaard BSA wrote:
> 
> Douglas Bates <bates@stat.wisc.edu> writes:
> 
> > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> >
> > > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > > <ftp://cvs.r-project.org/pub/> ?
> >
> > Curious.  I fixed up those directories and restarted the ftp server on
> > the machine that serves as cvs.r-project.org.   Now I can reach those
> > directories via an ftp client (ncftp) but not via a web browser
> > (netscape).  I'm not sure why.
> >
> > The same file system is available as
> >                     http://cran.us.r-project.org/
> > I would recommend using that URL instead of ftp://cvs.r-project.org/
> > for an http client.  A less desirable alternative is to notice that
> > the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> > /pub/e19/CRAN and to use
> >                  ftp://cvs.r-project.org/pub/e19/CRAN
> >
> > I'm not sure why a web browser cannot follow the symbolic link but an
> > ftp client can.  I would have thought this would be determined by the
> > server, not by the client.  Can anyone suggest why the symbolic links
> > do not work for netscape?
> 
> No, and it appears to be Netscape-specific too. Mozilla follows the
> links OK. (The form of the link - relative/absolute - appears to be
> irrelevant, so my first guess was wrong.)
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:02 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:02 +0200 (MET DST)
Subject: When dev.list() is NULL, dev.control() causes core dump (PR#1605)
Message-ID: <200205280642.IAA22334@pubhealth.ku.dk>

The following sequence of commands:
graphics.off()
dev.control("inhibit")

causes R to memory-fault and core dump. This is reported
for a new port of R, but is also reproducible on Windows
and Solaris. The Windows fault is:

RGUI caused an invalid page fault in
module R.DLL at 017f:00475663.
Registers:
EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
Bytes at CS:EIP:
89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
Stack dump:
0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55

The following patch (diff -c) corrects the problem,
when applied to src/main/plot.c:

PATCH BEGIN
*** plot.c.orig Tue Dec  4 23:43:43 2001
--- plot.c Sun May 26 11:06:25 2002
***************
*** 52,58 ****
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     inhibitDisplayList(CurrentDevice());
      return R_NilValue;
  }

--- 52,60 ----
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     if(!NoDevices()){
!  inhibitDisplayList(CurrentDevice());
!     }
      return R_NilValue;
  }


PATCH END

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:00 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:00 +0200 (MET DST)
Subject: Platform-specific: simple assignments in Rprofile cause core dump (PR#1604)
Message-ID: <200205280642.IAA22326@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT


This only happens on platforms with a faulty implementation
of realloc(). Some C libraries do not allow realloc() to be
called with a NULL pointer to resize. The assignment

ISOLatin1 <- 0:255

in Rprofile then causes a core dump. The attached set
of 4 patches should be very safe to use and fix the problem.

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_character.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_character.c.txt

*** character.c.orig	Wed Sep 19 09:04:16 2001
--- character.c	Sun May 12 00:54:18 2002
***************
*** 75,81 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buff = (char *) realloc(buff, len);
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
--- 75,85 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buff==NULL){
! 	    buff = (char *) malloc(len);
! 	} else {
! 	    buff = (char *) realloc(buff, len);
! 	}
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
***************
*** 267,273 ****
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {
--- 271,281 ----
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    if(pt==NULL){
! 	        pt = (char *) malloc((strlen(buff)+1) * sizeof(char));
! 	    } else {
! 	        pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
! 	    }
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_memory.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_memory.c.txt

*** memory.c.orig	Tue Nov 27 02:41:16 2001
--- memory.c	Sun May 12 00:41:44 2002
***************
*** 2030,2036 ****
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     p = realloc(ptr, size);
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }
--- 2030,2040 ----
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     if(ptr==NULL){
! 	p = malloc(size);
!     } else {
! 	p = realloc(ptr, size);
!     }
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_printutils.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_printutils.c.txt

*** printutils.c.orig	Tue Oct 30 06:18:10 2001
--- printutils.c	Sun May 12 01:08:14 2002
***************
*** 73,79 ****
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     Encodebuf = (char *) realloc(Encodebuf, len);
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;
--- 73,83 ----
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     if(Encodebuf==NULL) {
!         Encodebuf = (char *) malloc(len);
!     } else {
!         Encodebuf = (char *) realloc(Encodebuf, len);
!     }
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_saveload.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_saveload.c.txt

*** saveload.c.orig	Tue Dec  4 08:52:41 2001
--- saveload.c	Sun May 12 01:16:44 2002
***************
*** 87,93 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buf = (char *) realloc(buf, len);
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;
--- 87,97 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buf==NULL){
! 	    buf = (char *) malloc(len);
! 	} else {
! 	    buf = (char *) realloc(buf, len);
! 	}
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 08:33:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 May 2002 08:33:24 +0100 (BST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
 cause core dump (PR#1604)
In-Reply-To: <200205280642.IAA22326@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205280817440.18605-100000@auk.stats>

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> This only happens on platforms with a faulty implementation
> of realloc(). Some C libraries do not allow realloc() to be
> called with a NULL pointer to resize.

What other platforms give the problem?

The behaviour R assumes is required by the ISO C89 standard (at least
according to Lewine's book). Would it not be better to fix realloc rather
than R: there are many alternative implementations of malloc out there (and
R uses one for Windows).

One issue is that realloc is used in several R packages on CRAN, and
quite possibly in others.  These are likely to assume standard-conformant
behaviour.  (It is used in other places within the R sources too, but I
assume you checked all of those.)

> The assignment
>
> ISOLatin1 <- 0:255
>
> in Rprofile then causes a core dump. The attached set
> of 4 patches should be very safe to use and fix the problem.
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R

That is not current.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:45:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:45:15 +0200 (MET DST)
Subject: (PR#1605)When dev.list() is NULL, dev.control() causes core dump
Message-ID: <200205280945.LAA25116@pubhealth.ku.dk>

This is of course an incorrect usage, which I've trapped at R level, so as
to give an informative warning.

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> The following sequence of commands:
> graphics.off()
> dev.control("inhibit")
>
> causes R to memory-fault and core dump. This is reported
> for a new port of R, but is also reproducible on Windows
> and Solaris. The Windows fault is:
>
> RGUI caused an invalid page fault in
> module R.DLL at 017f:00475663.
> Registers:
> EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
> EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
> ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
> EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
> Bytes at CS:EIP:
> 89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
> Stack dump:
> 0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
> 0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55
>
> The following patch (diff -c) corrects the problem,
> when applied to src/main/plot.c:
>
> PATCH BEGIN
> *** plot.c.orig Tue Dec  4 23:43:43 2001
> --- plot.c Sun May 26 11:06:25 2002
> ***************
> *** 52,58 ****
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     inhibitDisplayList(CurrentDevice());
>       return R_NilValue;
>   }
>
> --- 52,60 ----
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     if(!NoDevices()){
> !  inhibitDisplayList(CurrentDevice());
> !     }
>       return R_NilValue;
>   }
>
>
> PATCH END
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:48:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:48:42 +0200 (MET DST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
Message-ID: <200205280948.LAA25173@pubhealth.ku.dk>

On Tue, 28 May 2002, Prof Brian D Ripley wrote:

> On Tue, 28 May 2002 NEFTH@pacbell.net wrote:
>
> > This only happens on platforms with a faulty implementation
> > of realloc(). Some C libraries do not allow realloc() to be
> > called with a NULL pointer to resize.
>
> What other platforms give the problem?
>
> The behaviour R assumes is required by the ISO C89 standard (at least
> according to Lewine's book). Would it not be better to fix realloc rather
> than R: there are many alternative implementations of malloc out there (and
> R uses one for Windows).
>
> One issue is that realloc is used in several R packages on CRAN, and
> quite possibly in others.  These are likely to assume standard-conformant
> behaviour.  (It is used in other places within the R sources too, but I
> assume you checked all of those.)

There are several other uses of realloc in the R sources with the same
assumption ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 11:07:08 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Tue, 28 May 2002 12:07:08 +0200 (MET DST)
Subject: hitting ^C breaks readline history (PR#1606)
Message-ID: <200205281007.MAA25465@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.5.0
OS: linux
Submission from: (NULL) (193.50.159.2)


Hitting ^C breaks readline history (when R is stared in an xterm).

xterm -e R
^C    -> arrow key and history stop working.
For example, up-arrow gives "^[[A".

ldd ./R.bin 
    [../..]
    libreadline.so.4.1 => /usr/lib/libreadline.so.4.1 (0x40020000)
    libncurses.so.5 => /usr/lib/libncurses.so.5 (0x4004c000)
    [../..]

libncurses version is 5.2.
Note. I've got the same problem with libreadline.so.4.2.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 28 13:32:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2002 14:32:31 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <200205281007.MAA25465@pubhealth.ku.dk>
References: <200205281007.MAA25465@pubhealth.ku.dk>
Message-ID: <x28z64fo68.fsf@blueberry.kubism.ku.dk>

humbertc@univ-mlv.fr writes:

> Hitting ^C breaks readline history (when R is stared in an xterm).
> 
> xterm -e R
> ^C    -> arrow key and history stop working.
> For example, up-arrow gives "^[[A".

Yes, I've noticed as well. However, press Enter and things return to
normal.

If you give us a clue as to what causes the problem, we might fix it...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 13:48:50 2002
From: humbertc@univ-mlv.fr (Cyril Humbert)
Date: Tue, 28 May 2002 14:48:50 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <x28z64fo68.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, May 28, 2002 at 02:32:31PM +0200
References: <200205281007.MAA25465@pubhealth.ku.dk> <x28z64fo68.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020528144850.A24847@borneo.univ-mlv.fr>

Peter Dalgaard BSA wrote:
> humbertc@univ-mlv.fr writes:
> 
> > Hitting ^C breaks readline history (when R is stared in an xterm).
> > 
> > xterm -e R
> > ^C    -> arrow key and history stop working.
> > For example, up-arrow gives "^[[A".
> 
> Yes, I've noticed as well. However, press Enter and things return to
> normal.

Thanks,
that's much better than my previous solution (quit and restart R).


> 
> If you give us a clue as to what causes the problem, we might fix it...

Probably something wrong with readline and/or ncurses but currently I
don't know exactly what...

-- 
Cyril Humbert 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue May 28 19:14:53 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 28 May 2002 14:14:53 -0400
Subject: signature match in setMethod (PR#1592)
References: <200205222104.XAA19333@pubhealth.ku.dk>
Message-ID: <3CF3C91D.C71FFE4A@research.bell-labs.com>

tkeitt@ms.cc.sunysb.edu wrote:
> 
> Full_Name: Tim Keitt
> Version: 1.5
> OS: Linux
> Submission from: (NULL) (128.227.201.237)
> 
> The function "setMethod" makes the following call to "insertMethod":
> 
> allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)],
>         asMethodDefinition(definition, signature))
> 
> If I understand insertMethod correctly, the third argument should be the names
> of the formal arguments of the method. However, this fails if the signature is
> something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
> 'j', '...', 'drop')" because the "..." gets passed instead of "drop". 

Not quite:  "..." gets passed (with class "ANY") in addition to "drop",
and insertMethod then generates an error, because it refuses to handle
"..."

> Changing
> this to
> 
> allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
> fnames)],
>         asMethodDefinition(definition, signature))
> 
> seems to solve the problem.

Not quite.  The signature has already been processed at this point, so
match() isn't needed, but we do need to remove "..." from fnames and the
corresponding "ANY" from signature.  Also, the "..." isn't used for
dispatch, but it is needed to honor conforming methods that replace
"..." with specific arguments (a feature added to the API recently), so
it must be retained for comparing arguments of the generic and the
method definition.

There is a version committed to r-patched that should fix the problem.

> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Tue May 28 23:30:13 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Tue, 28 May 2002 15:30:13 -0700
Subject: masking
Message-ID: <20020528153013.D7826@brandybuck>

Dear R developers,

I am newbie to R-development.

I have written mutated the rpart to obtain myown package that performs some additional calculations
on trees.  I have altered the names of rpart's functions so there is no namespace conflict, but there
is redunant functionality.  However there some remaining functions that I am not sure what to do with.

When I run R and load both libraries I get masking:


> library(dI)
> library(rpart)

Attaching package `rpart':


	The following object(s) are masked from package:dI :

	 is.Surv string.bounding.box tree.depth 


There is conflict because of the zzz.R file


% less  zzz.R
.First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)

is.Surv <- function(x) inherits(x, "Surv")

tree.depth <- function (nodes)
{
    depth <- floor(log(nodes, base = 2) + 1e-7)
    as.vector(depth - min(depth))
}

string.bounding.box <- function(s)
{
    s2 <- strsplit(s, "\n")
    rows <- sapply(s2, length)
    columns <- sapply(s2, function(x) max(nchar(x)))
    list(columns=columns, rows=rows)
}


My question:

1.  Why is the functionality of the 'zzz.R' file needed?

2.  How do I retain it without creating conflicts with rpart proper?


thanks in advance for your help,

Clayton
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 29 01:27:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 28 May 2002 17:27:03 -0700 (PDT)
Subject: masking
In-Reply-To: <20020528153013.D7826@brandybuck>
Message-ID: <Pine.A41.4.44.0205281721570.53892-100000@homer16.u.washington.edu>

On Tue, 28 May 2002, Clayton Springer wrote:
>
> % less  zzz.R
> .First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)
>
> is.Surv <- function(x) inherits(x, "Surv")
>
> tree.depth <- function (nodes)
> {
>     depth <- floor(log(nodes, base = 2) + 1e-7)
>     as.vector(depth - min(depth))
> }
>
> string.bounding.box <- function(s)
> {
>     s2 <- strsplit(s, "\n")
>     rows <- sapply(s2, length)
>     columns <- sapply(s2, function(x) max(nchar(x)))
>     list(columns=columns, rows=rows)
> }
>
>
> My question:
>
> 1.  Why is the functionality of the 'zzz.R' file needed?

To provide functions that aren't in base R but are needed by rpart. For
example, is.Surv is only in the survival package.

> 2.  How do I retain it without creating conflicts with rpart proper?

You could require rpart to be loaded, in which case your package wouldn't
need to contain these functions. (add require("rpart") to the .First.lib
function)

It may be that you don't need these functions, in which case you can just
remove them

Otherwise you're stuck -- you need the functions in your package and rpart
needs them, so you will get the warning when both are loaded together.
This is fairly harmless.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed May 29 01:54:25 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 29 May 2002 12:54:25 +1200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu> <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>
Message-ID: <3CF426C1.2F8B2A86@stat.auckland.ac.nz>

Hi

<lots of examples snipped to be replaced by my own ...>

I don't think the current code is performing incorrectly, but its
behaviour may need a bit more explanation.  Here goes ... :)

1.  Here's a demonstration that, using text(), the horizontal and
vertical adjustments of mathematical annotations are done according to
the bounding boxes of the annotations ...

    expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
        PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
        Mg^{2+''}, Ca^{2+''}, H^{+''})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    abline(v=1:12, h=1:12, col="grey")
    y <- 1
    for (xadj in c(0, .5, 1))
      for (yadj in c(0, .5, 1)) {
        text(1:12, y, expr, adj=c(xadj, yadj))
        y <- y+1
      }

... this is a very "graphical" view of these annotations, which makes
some sense when drawing annotations within the data region, but less
sense in the margins.  We probably need to allow the user to choose a
more "textual" alignment based on the "baseline" of the text in the
annotation.  One day ...

2. The mtext() and axis() functions do not allow the user to control
"vertical" adjustment of text -- they determine this adjustment
themselves based on the setting of par(las).  In the example given by
Patrick, where the x-axis labels are horizontal, the tick labels are
bottom-adjusted -- adj=c(<user xadj>, 0) -- relative to the "line" in
the margin that the labels are to be drawn on.  This is comparable to
row 4 in the plot produced above ...

    axis(1, at=1:12, labels=expr)

... In the old code, the tick labels were vertically centred --
adj=c(<user xadj>, 0.5) -- comparable to row 5 in the plot.  Sorry that
my bug fix to correct this "wrong" behaviour broke your example;  I
always worry that this sort of thing will occur when I try to "fix" bits
of the graphics code :(

3.  One "recommended" way to get your example to work would be to place
"phantom" subscripts and superscripts in your labels so that they are
all the same "height".  It's not pretty, but here's an example, ...

    expr <- expression(F[phantom(0)]^{-phantom(0)},
        Cl[phantom(0)]^{-phantom(0)},
        NO[2]^{-phantom(0)}, NO[3]^{-phantom(0)}, 
        PO[4]^{3-phantom(0)}, SO[4]^{2-phantom(0)},
        Na[phantom(0)]^{+phantom(0)},
        NH[4]^{+phantom(0)}, K[phantom(0)]^{+phantom(0)},
        Mg[phantom(0)]^{2+phantom(0)}, Ca[phantom(0)]^{2+phantom(0)},
        H[phantom(0)]^{+phantom(0)})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    axis(1, at=1:12, labels=expr)

Hope that helps.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:10:19 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:10:19 +0200 (MET DST)
Subject: merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
Message-ID: <200205291110.NAA06480@pubhealth.ku.dk>

If the following two conditions are met:

1) all.x is TRUE

2) at least 1 row in y does not have a match in x

then any character vectors in y will be coerced to be factors. Here is a simple
example (previously provided on r-devel):

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3]) 
> y$b <- as.character(y$b) 
> z <- merge(x, y, by = 0, all.x = TRUE)
> z
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> sapply(z, data.class)
Row.names         a         b 
 "factor" "numeric"  "factor" 
> 

This problem could be fixed by changing the line in merge.data.frame:

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx) 

to:

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA 

To the extent that this is a feature rather than a bug (if so, I would like to
know why), then I would suggest that the following sentence be added to the
documentation for merge at the end of the section on all.x

"Be aware that, if all.x equals `TRUE', character vectors in `y' will be
converted to factors if any rows in y have no matching row in `x'."

Thanks,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 12:34:32 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 12:34:32 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <200205291110.NAA06480@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>

On Wed, 29 May 2002 a296180@agate.fmr.com wrote:

> If the following two conditions are met:
>
> 1) all.x is TRUE
>
> 2) at least 1 row in y does not have a match in x
>
> then any character vectors in y will be coerced to be factors. Here is a simple
> example (previously provided on r-devel):
>
> > x <- data.frame(a = 1:4)
> > y <- data.frame(b = LETTERS[1:3])
> > y$b <- as.character(y$b)
> > z <- merge(x, y, by = 0, all.x = TRUE)
> > z
>   Row.names a    b
> 1         1 1    A
> 2         2 2    B
> 3         3 3    C
> 4         4 4   <NA>
> > sapply(z, data.class)
> Row.names         a         b
>  "factor" "numeric"  "factor"
> >
>
> This problem could be fixed by changing the line in merge.data.frame:
>
> for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)
>
> to:
>
> for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

But other problems would be introduced, as the two operations are
not equivalent (and the right one has been used).

> To the extent that this is a feature rather than a bug (if so, I would like to
> know why),

I have already patiently explained it to you.  It is a side issue of
subscripting of data frames converting character columns to factor.
I have also given you a workaround.

>  then I would suggest that the following sentence be added to the
> documentation for merge at the end of the section on all.x
>
> "Be aware that, if all.x equals `TRUE', character vectors in `y' will be
> converted to factors if any rows in y have no matching row in `x'."

As I said before, this is a consequence of the general rules.  Data frames
are not designed to have character columns, and those who insist on using
them must make themselves aware of the consequences.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:54:40 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:54:40 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205291154.NAA07211@pubhealth.ku.dk>

In section 6.3 in "An Introduction to R", it says:

". . . as is, non-numeric (character and logical) vectors are coerced to be factors
. . . "

In the help for ?data.frame, it says:

Note:

     In versions of R prior to 1.4.0 (and in S3) logical columns were
     converted to factors.

I believe that the help for data.frame is correct and that, therefore, An
Introduction to R should be changed to:

". . . as is, character vectors are coerced to be factors
. . . "

Of course, this could reflect my continuing inability to understand dataframes,
but I hope not! ;-)

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 13:48:03 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 08:48:03 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
Message-ID: <15604.52739.590128.620397@gargle.gargle.HOWL>

Prof Brian D Ripley writes:
 > I have already patiently explained it to you.  It is a side issue of
 > subscripting of data frames converting character columns to factor.
 > I have also given you a workaround.

Yes, and many thanks for the patient explanations! Indeed, thanks to you and
the rest of R core for a simply amazing piece of software. Even though our
budget would allow us to use most any statistics package around, we use R
because it seems to us to be the best.

My only comment on the workaround (using I() to create vectors of class AsIs)
is that it is largely undocumented. I was concerned that, in this case,
undocumented meant "discouraged from use and possibly not present in future
versions." In any event, we will now do as you suggested.

 > As I said before, this is a consequence of the general rules.  Data frames
 > are not designed to have character columns, and those who insist on using
 > them must make themselves aware of the consequences.

Ahh! It had never been clear to me that data frames are not "designed to have
character columns." Of course, now that I carefully (re)read the documentation,
I see that this is the case. My comment here is that R certainly provides
enough rope (colClasses as "character" in read.table, for example) for
unsuspecting users like me to hang themselves on this point. Indeed, I would
wager that the vast majority of users (even some members of R core?) have
dataframes with character variables in them. My question is: Why aren't
dataframes "designed" to have character columns? This would seem to be a
desirable feature . . . but perhaps I am misunderstanding what a dataframe
really "is". Or, perhaps the answer is: "Patches are accepted." ;-)

Thanks again,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed May 29 14:32:43 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 29 May 2002 09:32:43 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>; from a296180@agate.fmr.com on Wed, May 29, 2002 at 08:48:03AM -0400
References: <200205291110.NAA06480@pubhealth.ku.dk> <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats> <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <20020529093243.B24223@jessie.research.bell-labs.com>

I do use data frames for storing character data, fully aware that I'm
stretching their intended use.  Data frames came about in the context
of modeling software (see "Statistical Models in S," the "White book"
by Chambers and Hastie, eds).  Originally, the primary use of data
frames was for holding the data given to the model fitting functions,
and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
required are simple ones (numeric and factors -- note that character
vectors are not well suited for fitting models).  Very soon after,
people began to include other types of objects (Terry Therneau's
censored/survival classes, among others, come to my mind).  So the
behaviour of the data.frame class has evolved into what we are
currently using, and some of its apparent "idiosincracies" make
perfect sense in light of its original intended purpose.

It has been argued before that we may need other more general
container classes to hold other "tabular" data (e.g., contigency
tables, data from relational databases) that don't require the 
restriction that data frames have traditionally imposed.  Of course
is not obvious to me that introducing yet another set of classes
is necessarily a good thing --- a lot of care and thought would have
to be put into the effort to ensure that any new container classes (or
any other type, for that matter) are well designed and with a clear
purpose, just like data frames were well-designed for the purpose
of holding data for fitting models.

David Kane  <David Kane wrote:
> Prof Brian D Ripley writes:
>  > I have already patiently explained it to you.  It is a side issue of
>  > subscripting of data frames converting character columns to factor.
>  > I have also given you a workaround.
> 
> Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> the rest of R core for a simply amazing piece of software. Even though our
> budget would allow us to use most any statistics package around, we use R
> because it seems to us to be the best.
> 
> My only comment on the workaround (using I() to create vectors of class AsIs)
> is that it is largely undocumented. I was concerned that, in this case,
> undocumented meant "discouraged from use and possibly not present in future
> versions." In any event, we will now do as you suggested.
> 
>  > As I said before, this is a consequence of the general rules.  Data frames
>  > are not designed to have character columns, and those who insist on using
>  > them must make themselves aware of the consequences.
> 
> Ahh! It had never been clear to me that data frames are not "designed to have
> character columns." Of course, now that I carefully (re)read the documentation,
> I see that this is the case. My comment here is that R certainly provides
> enough rope (colClasses as "character" in read.table, for example) for
> unsuspecting users like me to hang themselves on this point. Indeed, I would
> wager that the vast majority of users (even some members of R core?) have
> dataframes with character variables in them. My question is: Why aren't
> dataframes "designed" to have character columns? This would seem to be a
> desirable feature . . . but perhaps I am misunderstanding what a dataframe
> really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> 
> Thanks again,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 14:42:15 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 14:42:15 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <20020529093243.B24223@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.44.0205291437100.23828-100000@auk.stats>

In this case I think I know how to solve the idiosyncracy of the subsetting
methods.  As far as I can tell (and similar things have come up before)
the dataframe.R code is taken from an early version of S (as David James
alludes to) and a number of things have been changed since in S but the
problems remain in R.

On the other hand, I don't make such changes without ample time to think
them through ....

B

On Wed, 29 May 2002, David James wrote:

> I do use data frames for storing character data, fully aware that I'm
> stretching their intended use.  Data frames came about in the context
> of modeling software (see "Statistical Models in S," the "White book"
> by Chambers and Hastie, eds).  Originally, the primary use of data
> frames was for holding the data given to the model fitting functions,
> and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
> required are simple ones (numeric and factors -- note that character
> vectors are not well suited for fitting models).  Very soon after,
> people began to include other types of objects (Terry Therneau's
> censored/survival classes, among others, come to my mind).  So the
> behaviour of the data.frame class has evolved into what we are
> currently using, and some of its apparent "idiosincracies" make
> perfect sense in light of its original intended purpose.
>
> It has been argued before that we may need other more general
> container classes to hold other "tabular" data (e.g., contigency
> tables, data from relational databases) that don't require the
> restriction that data frames have traditionally imposed.  Of course
> is not obvious to me that introducing yet another set of classes
> is necessarily a good thing --- a lot of care and thought would have
> to be put into the effort to ensure that any new container classes (or
> any other type, for that matter) are well designed and with a clear
> purpose, just like data frames were well-designed for the purpose
> of holding data for fitting models.
>
> David Kane  <David Kane wrote:
> > Prof Brian D Ripley writes:
> >  > I have already patiently explained it to you.  It is a side issue of
> >  > subscripting of data frames converting character columns to factor.
> >  > I have also given you a workaround.
> >
> > Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> > the rest of R core for a simply amazing piece of software. Even though our
> > budget would allow us to use most any statistics package around, we use R
> > because it seems to us to be the best.
> >
> > My only comment on the workaround (using I() to create vectors of class AsIs)
> > is that it is largely undocumented. I was concerned that, in this case,
> > undocumented meant "discouraged from use and possibly not present in future
> > versions." In any event, we will now do as you suggested.
> >
> >  > As I said before, this is a consequence of the general rules.  Data frames
> >  > are not designed to have character columns, and those who insist on using
> >  > them must make themselves aware of the consequences.
> >
> > Ahh! It had never been clear to me that data frames are not "designed to have
> > character columns." Of course, now that I carefully (re)read the documentation,
> > I see that this is the case. My comment here is that R certainly provides
> > enough rope (colClasses as "character" in read.table, for example) for
> > unsuspecting users like me to hang themselves on this point. Indeed, I would
> > wager that the vast majority of users (even some members of R core?) have
> > dataframes with character variables in them. My question is: Why aren't
> > dataframes "designed" to have character columns? This would seem to be a
> > desirable feature . . . but perhaps I am misunderstanding what a dataframe
> > really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> >
> > Thanks again,
> >
> > Dave Kane
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>
> --
> David A. James
> Statistics Research, Room 2C-253            Phone:  (908) 582-3082
> Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
> Murray Hill, NJ 09794-0636
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed May 29 14:58:55 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 29 May 2002 09:58:55 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
 <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <15604.56991.282396.570441@gargle.gargle.HOWL>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> As I said before, [characters converted to factors] is a consequence of the
> general rules.  Data frames are not designed to have character columns, and
> those who insist on using them must make themselves aware of the
> consequences.

I think this is as true in S-Plus as it is in R, because S is fundamentally a
language designed for statistics, where everything is a real number or a
conditioning variable.  As a result, I (and my former group) abandoned the use
of dataframes years ago.  We created our own pseudo-class of "dataobjects"
(lists of equal-length vectors), and built our own versions of many standard
functions (read.table -> g.dataobj, merge -> g.join, "[" -> g.subset, etc.) for
them.

Dave Kane has made a strong push to use existing R classes and built-in
functions, but I'm convinced now I can bring him over to the Dark Side.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 15:33:19 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 10:33:19 -0400
Subject: warning message for setAs when using class AsIs
Message-ID: <15604.59055.655673.283148@gargle.gargle.HOWL>

This seemed too advanced for r-help and is related to the recent discussion of
character vectors in dataframes.

Following Brian Ripley's most excellent advice, we are moving to a world in
which character vectors in dataframes are always of class AsIs. The cool way of
doing this seemed to be the following:

> cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> x <- read.table("test.txt")
> class(x$V1)
[1] "factor"

This is what we expect.

> library(methods)
> setAs('character', "AsIs", function(from) I(from))
Warning message: 
Class "AsIs"not defined in: matchSignature(fnames, signature, fdef) 
>

This warning seems wrong to me, although I am not smart enough to follow the
logic through the underlying code. It *seems* as if setAs does not consider
`AsIs' to be an allowed class. However, the desired effect is achieved.

> x <- read.table("test.txt", colClasses=c("AsIs"))
> x
  V1
1  x
2  y
3  z
> class(x$V1)
[1] "AsIs"      "character"
> unlink("test.txt")
> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Any comments/suggestions would be much appreciated.

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed May 29 16:45:49 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 29 May 2002 11:45:49 -0400
Subject: warning message for setAs when using class AsIs
References: <15604.59055.655673.283148@gargle.gargle.HOWL>
Message-ID: <3CF4F7AD.2D9B5A82@research.bell-labs.com>

"David Kane
> 
> This seemed too advanced for r-help and is related to the recent discussion of
> character vectors in dataframes.
> 
> Following Brian Ripley's most excellent advice, we are moving to a world in
> which character vectors in dataframes are always of class AsIs. The cool way of
> doing this seemed to be the following:
> 
> > cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> > x <- read.table("test.txt")
> > class(x$V1)
> [1] "factor"
> 
> This is what we expect.
> 
> > library(methods)
> > setAs('character', "AsIs", function(from) I(from))
> Warning message:
> Class "AsIs"not defined in: matchSignature(fnames, signature, fdef)
> >
> 
> This warning seems wrong to me, although I am not smart enough to follow the
> logic through the underlying code. It *seems* as if setAs does not consider
> `AsIs' to be an allowed class. However, the desired effect is achieved.

In the sense of the methods package (i.e., of "S4" classes) the class
"AsIs" and all S3-style classes are undefined.  Literally, in that there
is no object containing their definition.

In general, mixing old and new classes can cause confusion.  In this
case, you will be OK if the as() function finds a specific method to
coerce character to "AsIs".  The warning is saying that there won't be
any way to infer inheritance for the class "AsIs", but inheritance for
the target class is not important for the call to as().

John

PS: the current version of read.table implicitly requires the methods
package if the argument colClasses is supplied.  Should that be made
explicit?

Otherwise, users get errors if they forget library(methods):

R> x <- read.table("testR/test.txt", colClasses=c("AsIs"))
Error: couldn't find function "as"




> 
> > x <- read.table("test.txt", colClasses=c("AsIs"))
> > x
>   V1
> 1  x
> 2  y
> 3  z
> > class(x$V1)
> [1] "AsIs"      "character"
> > unlink("test.txt")
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> 
> Any comments/suggestions would be much appreciated.
> 
> Thanks,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmascott@att.net  Thu May 30 16:55:06 2002
From: cmascott@att.net (cmascott@att.net)
Date: Thu, 30 May 2002 17:55:06 +0200 (MET DST)
Subject: se.contrast: matrix contrast.obj doesn't work as documented (PR#1613)
Message-ID: <200205301555.RAA19202@pubhealth.ku.dk>


The man page for se.contrast, when describing the contrast.obj
parameter, states that "Multiple contrasts should be specified
by a matrix as returned by contrasts."

When doing an unbalanced single factor ANOVA, using a contrast.obj
as returned by contrasts results in the following error from
qr.qty when se.contrast is called:

Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows

In fact, the matrix contrast.obj parameter that se.contrast
requires is not a contrast matrix as returned by contrasts.
It is a matrix each of whose columns is in the same form as
the vector constructed by se.contrast when contrast.obj is
a list.  This matrix has one row per observation, not one
row per treatment (contrast matrix).  See the session log
below for an example.

I wrote a little function to produce the one-row-per-
observation matrix and se.contrast works correctly when
given this matrix.

-----------------------------------------------------------------
Script started on Thu May 30 11:21:31 2002

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> debug("qr.qty")
> se.contrast(reading.aov.t, list(group=="1", group=="2"), c(-1,1), reading.df)
debugging in: qr.qty(object$qr, contrast)
debug: {
    if (!is.qr(qr)) 
        stop("argument is not a QR decomposition")
    if (is.complex(qr$qr)) {
        y <- as.matrix(y)
        if (!is.complex(y)) 
            y[] <- as.complex(y)
        return(.Call("qr_qy_cmplx", qr, y, 1, PACKAGE = "base"))
    }
    n <- nrow(qr$qr)
    p <- ncol(qr$qr)
    k <- as.integer(qr$rank)
    ny <- NCOL(y)
    if (NROW(y) != n) 
        stop("qr and y must have the same number of rows")
    storage.mode(y) <- "double"
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux), 
        y, ny, qty = y, PACKAGE = "base")$qty
}
Browse[1]> y
       
         [,1]
   [1,] -0.20
   [2,] -0.20
   [3,] -0.20
   [4,] -0.20
   [5,] -0.20
   [6,]  0.25
   [7,]  0.25
   [8,]  0.25
   [9,]  0.25
  [10,]  0.00
  [11,]  0.00
  [12,]  0.00
  [13,]  0.00
  [14,]  0.00
  [15,]  0.00
  [16,]  0.00
  [17,]  0.00
  [18,]  0.00
  [19,]  0.00
  [20,]  0.00
  [21,]  0.00
  [22,]  0.00
  [23,]  0.00
Browse[1]> c
exiting from: qr.qty(object$qr, contrast)
[1] 3.126500
> undebug("qr.qty")
> se.contrast(reading.aov.t, contr.t5, data=reading.df)
Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows
> contr.t5
   2  3  4  5
1 -1 -1 -1 -1
2  1  0  0  0
3  0  1  0  0
4  0  0  1  0
5  0  0  0  1
> q()
Save workspace image? [y/n/c]: n

Script done on Thu May 30 11:25:49 2002
-----------------------------------------------------------------


--please do not edit the information below--

Version:
 platform = i386--freebsd4.3
 arch = i386
 os = freebsd4.3
 system = i386, freebsd4.3
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Thu May 30 23:41:05 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 31 May 2002 00:41:05 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205302241.AAA20637@pubhealth.ku.dk>


Just a few documentation "bugs" that I've noticed recently.

1.  In the help for (dpqr)weibull(), the formula given for the
    variance of a Weibull is wrong.  The correct formula is

      b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

    Note that I've also changed Gamma to gamma, which I think is
    preferable since this is actually the name of the gamma() function
    in R (whereas Gamma() is quite a different animal).

2.  The help for quantile() function (in base) refers to the function
    ecdf(), but doesn't mention that it is in package stepfun (which
    is not loaded by default).  It would be helpful if it did.

3.  There's a typo in the help for optim(): "comprehansive".

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 5.0
 year = 2002
 month = 05
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 11:32:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 12:32:56 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205311032.MAA25305@pubhealth.ku.dk>

>>>>> "Brett" == Brett Presnell <presnell@stat.ufl.edu> writes:

    Brett> Just a few documentation "bugs" that I've noticed
    Brett> recently.

Thank you!

    Brett> 1.  In the help for (dpqr)weibull(), the formula
    Brett> given for the variance of a Weibull is wrong.  

yes..

    Brett> The correct formula is

    Brett>       b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

which is even wronger, but I'm sure you meant

         	 b^2 *     (gamma(1 + 2/a) - (gamma(1 + 1/a))^2)


    Brett>     Note that I've also changed Gamma to gamma, which
    Brett> I think is preferable since this is actually the name
    Brett> of the gamma() function in R (whereas Gamma() is
    Brett> quite a different animal).

(but in LaTeX, that's  \Gamma  and that's why we have used it
 even for the non-latex formula (you see in the text and html
 version of help).

    Brett> 2.  The help for quantile() function (in base) refers
    Brett> to the function ecdf(), but doesn't mention that it
    Brett> is in package stepfun (which is not loaded by
    Brett> default).  It would be helpful if it did.

yes, it seems, thank you; I'm adding it.

    Brett> 3.  There's a typo in the help for optim():
    Brett> "comprehansive".

(BDR has already fixed this).

Thanks once more!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 13:40:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 14:40:07 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205311240.OAA27466@pubhealth.ku.dk>

>>>>> "a296180" == a296180  <a296180@agate.fmr.com> writes:

    a296180> In section 6.3 in "An Introduction to R", it says:
    a296180> ". . . as is, non-numeric (character and logical)
    a296180> vectors are coerced to be factors . . . "

    a296180> In the help for ?data.frame, it says:

    a296180> Note:

    a296180>      In versions of R prior to 1.4.0 (and in S3)
    a296180> logical columns were converted to factors.

    a296180> I believe that the help for data.frame is correct
    a296180> and that, therefore, An Introduction to R should be
    a296180> changed to:

    a296180> ". . . as is, character vectors are coerced to be
    a296180> factors . . . "

Thank you. 
Actually, I added ", logicals" earlier in the sentence (in the
source which is R-intro.texi !) to 

   @item
   Numeric vectors, logicals and factors are included as is, and character
   vectors are coerced to be factors, whose levels are the unique values
   appearing in the vector.

    a296180> Of course, this could reflect my continuing
    a296180> inability to understand dataframes, but I hope not! ;-)

well hoped ;-)  you are right here.

As a matter of fact we are quite happy for careful readers (and
reports) of R-intro, because this is something not so
interesting to reread for R corers...  
Hence: Thanks again!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 00:17:10 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:17:10 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.58586.18835.665434@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > In either case, you probably want to upgrade. Even 5.005 is "old",
> > so the upgrade to 5.6.1 is probably advisable.
>
> Correct.  R 1.6 will unconditionally assume 5.005.

I am sorry to hear that.

> >> 1.4.1 instead. Can I expect this to cause any problems, for
> >> instance when I build a package?
>
> > Possibly, though probably only Kurt et al could say for sure.
>
> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> 5.6.1.

Unfortunately, that is not an option at the moment. I guess most
people working with R are professionals with the means to work
with relative new hardware. I have to make do with a very old
system, a disk drive that is almost full, so no possibility to
compile a recent version of gcc, or upgrade anything that
demands a C compiler that is not from last century.

I write quite some software myself. Working with an old system
like I have has the advantage that I never hear people complain
that my software doesn't work on their system because there
system is too old.

But I have to accept that my system, for the time it keeps
working, is becoming state-of-the-art-long-gone.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 00:35:09 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:35:09 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15566.58739.585706.678109@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > I had to edit tkConfig.sh to solve this problem. This line:
>
> > TK_XINCLUDES='# no special path needed'
>
> > changed to this:
>
> > TK_XINCLUDES=
>
>
> > After this fix, R was configured for tcl/tk, and the package
> > tcltk seems to work OK (at least on this platform).
>
> A bug in your Tcl/Tk installation, I think.

If it is, it never caused any problem before, with older
versions of R.

> Which version of Linux is this?

This is on a recent distro of SuSE. Don't know what version. The
kernel is 2.4.4-4GB from May 2001. The same problem occured on
HP-UX 10.20 (July 1996).

The problem did not occur on an older version of SuSE for Alpha
from November 1999, or my own RedHat 5.0 (November 1997, I
think).

These are the same four systems mentioned in bug report PR#1499
about unresolved symbols for tcltk.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Elvie6761q57@dolfijn.nl  Wed May  1 23:34:49 2002
From: Elvie6761q57@dolfijn.nl (Elvie6761q57@dolfijn.nl)
Date: Wed, 01 May 2002 12:34:49 -1000
Subject: [Rd] To interested parties.
Message-ID: <026a22d10a6c$8137c7d8$5ca00bd2@nummmp>

------=_NextPart_000_00A5_83A62A4B.B1860A75
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: base64


Vm9sdW1lIE92ZXIgMS4yIFRyaWxsaW9uIERvbGxhcnMgYSBEYXkgDQpUYXAg
aW50byB0aGUgaGlnaC1pbmNvbWUgb3Bwb3J0dW5pdHkNCmZvdW5kIGluIHRo
ZSBXb3JsZCdzIGxhcmdlc3QgZmluYW5jaWFsIG1hcmtldC4gDQoNClRoZSBG
b3JlaWduIEN1cnJlbmN5IE1hcmtldHMNCg0KLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCg0KRGlzY292ZXIgaG93Og0KJDEwLDAwMCAi
cHJvcGVybHkgcG9zaXRpb25lZCIgaW4gdGhlIEV1cm8gdnMuIHRoZSBVUyBE
b2xsYXIsDQpjb3VsZCBwb3RlbnRpYWxseSBtYWtlIGEgMjAtMzBrIG1vdmUg
d2l0aGluIDYtOCBtb250aHMhDQoNCkxlYXJuIGhvdyBzdWNjZXNzZnVsIHBy
b2Zlc3Npb25hbCB0cmFkZXJzIGFzc2lzdGluZyB5b3UgY2FuIHBvdGVudGlh
bGx5DQphY2hpZXZlIGRvdWJsZS1kaWdpdCBtb250aGx5IHJldHVybnMgb2Yg
MTAtMzAlIG9yIG1vcmUhDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQoNCkZvciBhIEZSRUUgRVVSTyByZXBvcnQuDQpDbGljayBv
biB0aGUgbGluayBiZWxvdy4gDQoNCmh0dHA6Ly93d3cuaW52ZXN0bWVudDR1
LmNvbS9DdXJyZW5jeUV4Y2hhbmdlLw0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KDQpUbyBiZSB0YWtlbiBvZmYgb3VyIG1haWxp
bmcgbGlzdC4NCg0KaHR0cDovL3d3dy5pbnZlc3RtZW50NHUuY29tL3Rha2Vt
ZW9mZi8NCg0KNzM4NVBQREcwLTcyN3VxR0IwOTM5a3RHTTgtODYxR2JydTk3
MDVlclJTNS0xOTBtVHZVbDQ4
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:07:45 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:07:45 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
References: <15566.58739.585706.678109@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
Message-ID: <15567.48753.173522.300608@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > I had to edit tkConfig.sh to solve this problem. This line:
>> 
>> > TK_XINCLUDES='# no special path needed'
>> 
>> > changed to this:
>> 
>> > TK_XINCLUDES=
>> 
>> 
>> > After this fix, R was configured for tcl/tk, and the package
>> > tcltk seems to work OK (at least on this platform).
>> 
>> A bug in your Tcl/Tk installation, I think.

> If it is, it never caused any problem before, with older versions of
> R.

Interesting.  My tkConfig.sh has

# -I switch(es) to use to make all of the X11 include files accessible:
TK_XINCLUDES='-I/usr/X11R6/include'

and I would not think that '# no special path needed' is a valid switch.

If this problem persists acroess platforms we can work around it but I
must say that Tcl/Tk configuration testing is getting a bit silly after
all.

>> Which version of Linux is this?

> This is on a recent distro of SuSE. Don't know what version. The
> kernel is 2.4.4-4GB from May 2001. The same problem occured on
> HP-UX 10.20 (July 1996).

> The problem did not occur on an older version of SuSE for Alpha
> from November 1999, or my own RedHat 5.0 (November 1997, I
> think).

Maybe we did not use TK_XINCLUDES then.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:11:34 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:11:34 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
References: <15566.58586.18835.665434@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <15567.48982.979129.244967@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > In either case, you probably want to upgrade. Even 5.005 is "old",
>> > so the upgrade to 5.6.1 is probably advisable.
>> 
>> Correct.  R 1.6 will unconditionally assume 5.005.

> I am sorry to hear that.

>> >> 1.4.1 instead. Can I expect this to cause any problems, for
>> >> instance when I build a package?
>> 
>> > Possibly, though probably only Kurt et al could say for sure.
>> 
>> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
>> 5.6.1.

> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

> I write quite some software myself. Working with an old system
> like I have has the advantage that I never hear people complain
> that my software doesn't work on their system because there
> system is too old.

Following the same reasoning, wouldn't one always stay with R 0.14 or
similar?  Note that e.g. requiring Perl 5.005 only has implications for
*developers* and not for users because we have no dependency on Perl at
run-time.  And the hope would be that developers have access to software
which is 4 years old and typically available in pre-packaged binaries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 12:27:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 12:27:24 +0100 (BST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.31.0205011221510.10970-100000@gannet.stats>

On Wed, 1 May 2002, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > > In either case, you probably want to upgrade. Even 5.005 is "old",
> > > so the upgrade to 5.6.1 is probably advisable.
> >
> > Correct.  R 1.6 will unconditionally assume 5.005.
>
> I am sorry to hear that.
>
> > >> 1.4.1 instead. Can I expect this to cause any problems, for
> > >> instance when I build a package?
> >
> > > Possibly, though probably only Kurt et al could say for sure.
> >
> > As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> > 5.6.1.
>
> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

I think we are almost all amateurs at computing.  Certainly most of my R
development is done on machines bought with my own money, the main ones
being 4 and 3 years' old respectively.

I think the solution may be to not upgrade R either!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:12:38 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:12:38 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15567.48753.173522.300608@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011406510.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:
>
> > Kurt Hornik scribeva...
> >> > I had to edit tkConfig.sh to solve this problem. This line:
> >>
> >> > TK_XINCLUDES='# no special path needed'
> >>
> >> > changed to this:
> >>
> >> > TK_XINCLUDES=
> >>
> >>
> >> > After this fix, R was configured for tcl/tk, and the package
> >> > tcltk seems to work OK (at least on this platform).
> >>
> >> A bug in your Tcl/Tk installation, I think.
>
> > If it is, it never caused any problem before, with older versions of
> > R.
>
> Interesting.  My tkConfig.sh has
>
> # -I switch(es) to use to make all of the X11 include files accessible:
> TK_XINCLUDES='-I/usr/X11R6/include'
>
> and I would not think that '# no special path needed' is a valid switch.
>
> If this problem persists acroess platforms we can work around it but I
> must say that Tcl/Tk configuration testing is getting a bit silly after
> all.

Of course it is a bug in tkConfig.sh. But since I encountered it
on two out of four platforms, one very old, one new, it could be
a problem more people will run into. Whether this is something
the configure script of R should take care of is something I
don't have an opinion about.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:33:04 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:33:04 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15567.48982.979129.244967@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:

> > I write quite some software myself. Working with an old system
> > like I have has the advantage that I never hear people complain
> > that my software doesn't work on their system because there
> > system is too old.
>
> Following the same reasoning, wouldn't one always stay with R 0.14 or
> similar?  Note that e.g. requiring Perl 5.005 only has implications for
> *developers* and not for users because we have no dependency on Perl at
> run-time.  And the hope would be that developers have access to software
> which is 4 years old and typically available in pre-packaged binaries.

Of course R should be developed further. But requiring Perl
5.005 does effect end users. I have stopped downloading
binaries long ago, because they never work on older systems. So
just to use R, I have to compile R myself. And just installing
the recommended packages for R 1.5.0 needs Perl 5.005.

And what about new or upgraded packages? Do you ask users
to reinstall R just because they want to add a package, or do
you keep packages compatible with older versions of R? I always
go for backward compatibility as much as possible when I'm
developing software.

Of course, my system is very old. There won't be many people
left working with such an old system. I can understand you have
to draw the line somewhere. But the package 'tcltk' won't work
on a system just over two years old. I guess this will be a
problem for many people.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:12:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:12:04 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
Message-ID: <87helsovvf.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    peter> Of course, my system is very old. There won't be many people
    peter> left working with such an old system. I can understand you have
    peter> to draw the line somewhere. But the package 'tcltk' won't work
    peter> on a system just over two years old. I guess this will be a
    peter> problem for many people.

Sure, but there are perfectly great stat language/packages which are
small, compilable, and work like a charm, without some of the great
benefits of R.

XLispStat comes to mind, and in fact, has had functional
cross-platform widgets for a while.

Of course, there is always S-PLUS.  It doesn't require building,
and may be comparable to a full installation of R, depending on what
that means to you.

It seems like it might be worth reconsidering your software platform
in light of your hardware requirements.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ale@ini.phys.ethz.ch  Wed May  1 14:23:16 2002
From: ale@ini.phys.ethz.ch (ale@ini.phys.ethz.ch)
Date: Wed, 1 May 2002 15:23:16 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011323.PAA27271@pubhealth.ku.dk>

Full_Name: Alessandro Usseglio V.
Version: 1.5.0
OS: Linux RH 7.1
Submission from: (NULL) (130.60.71.55)


Error during configure

$ ./configure

[...]
checking for an ANSI C-conforming const... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for long long... yes
checking size of long long... 8
checking for long double... yes
checking size of long double... 12
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from fort77... --verbose
checking for Fortran 77 libraries...
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore, extra
underscore
checking whether fort77 and gcc agree on int and double... configure: WARNING:
fort77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?
$

>From `config.log'

configure:14869: checking whether fort77 and gcc agree on int and double
conftestf.f:
   cftest:
conftestf.o: In function `cftest_':
/disks/zebra3/ale/Local/temp/R-1.5.0/conftestf.f:9: undefined reference to
`pow_di'collect2: ld returned 1 exit status
configure:14942: WARNING: fort77 and gcc disagree on int and double
configure:14944: error: Maybe change CFLAGS or FFLAGS?

I hope that's enough to understand why I cannot configure.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 14:32:37 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 15:32:37 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <87helsovvf.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>

A.J. Rossini scribeva...

> Sure, but there are perfectly great stat language/packages which are
> small, compilable, and work like a charm, without some of the great
> benefits of R.
>
> XLispStat comes to mind, and in fact, has had functional
> cross-platform widgets for a while.
>
> Of course, there is always S-PLUS.  It doesn't require building,
> and may be comparable to a full installation of R, depending on what
> that means to you.
>
> It seems like it might be worth reconsidering your software platform
> in light of your hardware requirements.

It seems some people think I am criticising the development of R
because it won't work (in some time) on my machine. That is not
the case. My comments are meant in general, as something to
think about. My only interest is in helping the development of
R, with the limited suggestions I can offer.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 14:49:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 15:49:41 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011349.PAA27465@pubhealth.ku.dk>

First, this is not a bug in R, so please don't use the BUGS database for
errors on your own system.

The message actually means that fort77 is not working properly: some
library is missing.

On Wed, 1 May 2002 ale@ini.phys.ethz.ch wrote:

> Full_Name: Alessandro Usseglio V.
> Version: 1.5.0
> OS: Linux RH 7.1
> Submission from: (NULL) (130.60.71.55)

Please install g77 and try again.  On RH7.2 it is in rpm  gcc-g77-2.96-98.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:55:22 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:55:22 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
Message-ID: <87y9f4nfat.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    >> It seems like it might be worth reconsidering your software platform
    >> in light of your hardware requirements.

    peter> It seems some people think I am criticising the development of R
    peter> because it won't work (in some time) on my machine. That is not
    peter> the case. My comments are meant in general, as something to
    peter> think about. My only interest is in helping the development of
    peter> R, with the limited suggestions I can offer.

No, the general issue is that software construction is difficult.
There are tradeoffs, and your comments actually are more specific than
general, bringing up a situation which is not necessarily common.

People do want to have ancient software supported.  I.e. with ESS, we
ended up supporting truly ancient, unbuildable (on modern compiler
platforms) software, i.e. Emacs 19.28, because it was what DEC
shipped, and a vocal (SMALL) minority wanted it.  It crippled (but
didn't halt) development of some rather useful features, because of
lisp-level functionality that was introduced by the end of 19.xx
series, Emacs 19.34, which was deployed around 1995 or so (I'd have to
check dates, but its ancient).  In retrospect, we should've nuked
support in 1999 (not 2001).

I don't feel that your comments are critical, but I do feel that they
aren't addressing the point (well, it's one, anyway), which is how to
get a usable system built and deployed given the constraints of all
(developers and users) involved.  Your constraints are not really
solvable (want R 1.5+, and Perl 4..), and hence, I suggested (modern,
functional) tools which may solve it, of course introducing a
completely different (and unevaluated) set of tradeoffs...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lsjensen@micron.com  Wed May  1 17:35:04 2002
From: lsjensen@micron.com (lsjensen)
Date: Wed, 1 May 2002 10:35:04 -0600
Subject: [Rd] converting #sec to POSIX* format
Message-ID: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>

Sure I'm missing something simple here, but I haven't been able to find a
easy way to convert a pure numeric (# of seconds since the beginning of
1970) back into a POSIX* object. 

ex.
> z<-as.POSIXct(Sys.time()) 
> z
[1] "2002-05-01 10:33:56 Mountain Daylight Time"
> x<-unclass(z)
> x
[1] 1020270836

Is there a simple way to transform x back into a POSIX* object similar to z?

Landon Jensen
Micron Technology, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  1 17:53:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 May 2002 18:53:44 +0200
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
References: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
Message-ID: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>

lsjensen <lsjensen@micron.com> writes:

> Sure I'm missing something simple here, but I haven't been able to find a
> easy way to convert a pure numeric (# of seconds since the beginning of
> 1970) back into a POSIX* object. 
> 
> ex.
> > z<-as.POSIXct(Sys.time()) 
> > z
> [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > x<-unclass(z)
> > x
> [1] 1020270836
> 
> Is there a simple way to transform x back into a POSIX* object similar to z?

> 1020270836 + ISOdate(1970,1,1,0,0)
[1] "2002-05-01 18:33:56 CEST"


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 18:32:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 18:32:31 +0100 (BST)
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0205011830210.31101-100000@gannet.stats>

On 1 May 2002, Peter Dalgaard BSA wrote:

> lsjensen <lsjensen@micron.com> writes:
>
> > Sure I'm missing something simple here, but I haven't been able to find a
> > easy way to convert a pure numeric (# of seconds since the beginning of
> > 1970) back into a POSIX* object.
> >
> > ex.
> > > z<-as.POSIXct(Sys.time())

It's POSIXct already.

> > > z
> > [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > > x<-unclass(z)
> > > x
> > [1] 1020270836
> >
> > Is there a simple way to transform x back into a POSIX* object similar to z?
>
> > 1020270836 + ISOdate(1970,1,1,0,0)
> [1] "2002-05-01 18:33:56 CEST"

Or, as you did unclass(), reverse that by classing it:

class(x) <- c("POSIXt", "POSIXct")

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Wed May  1 19:45:41 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Wed, 1 May 2002 11:45:41 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.SOL.4.31.0205011141440.9179-100000@pooh.Berkeley.EDU>

Okay, I found the cause of the problem. Because mandrake 8.2 shipped with
a prerelease of g77 library,

    __G77_LIBU77_VERSION__: 0.5.26 20000731 (prerelease)

after upgrading to

    __G77_LIBU77_VERSION__: 0.5.26 20020220 (release)

then the segmentation error disappeared. I suspect other mandrake 8.2
users will experience the same problem.

Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  1 21:39:45 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 1 May 2002 16:39:45 -0400
Subject: [Rd] Problems with embedded R for v1.5.0
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C42@Groexmbcr10.pfizer.com>


I've just tried using both Duncan's RSPython and Walter Moriera's rpy with R
1.5.0.  Both segfaulted during startup in exactly the same place,
apparently while trying to load the ctest package.  Recompiling the packages
doesn't seem to have any effect on this outcome.

Here's the first few lines of a gdb backtrace:

#0  0xff132df8 in strlen () from /usr/lib/libc.so.1
#1  0xfe612bcc in Rf_mkChar (name=0x12a46d9 <Address 0x12a46d9 out of
bounds>)
    at dstruct.c:102
#2  0xfe5f5f40 in do_readDCF (call=0x0, op=0xffffffff, args=0x950ce0, 
    env=0x954370) at dcf.c:109
#3  0xfe64d010 in do_internal (call=0xfe7694f4, op=0x12b9c4, args=0x950ce0, 
    env=0x9503b8) at names.c:1020

(I can provide the full trace if desired)

Has anyone else found problems with embedded R with version 1.5.0?  Did
anything change in the proper way to start up embedded R?

-Greg

Obligatory version info:

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status   Patched             
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      30                  
language R                   

> uname -a 
SunOS gsun124 5.8 Generic_108528-03 sun4u sparc SUNW,Ultra-5_10

> gcc -v
Reading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/2.95.2/specs
gcc version 2.95.2 19991024 (release)





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonin@genethon.fr  Thu May  2 08:30:08 2002
From: gonin@genethon.fr (gonin@genethon.fr)
Date: Thu, 2 May 2002 09:30:08 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020730.JAA00989@pubhealth.ku.dk>

Hi R colleagues,

I don't know whether this is a bug, but something weird happen with R-GNOME.
Version 1.5.0.
I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
R can be started with or without the Gnome interface: fine.
However, when I start with Gnome interface, jpeg and a few other 
things are unavailable (checked using capabilities()), whereas 
everything is available (except Gnome) when I start R without Gnome.
Also, some calls seem available with Gnome: system("..") returns nothing.
Maybe this is related to the experimental nature of the Gnome interface.
Hope that helps.
Cheers,
-- 
----------------------------
Patrick Gonin, DVM, PhD
Head of in vivo Evaluation Dept
Généthon
1 bis, rue de l'Internationale- BP 60
91002 EVRY CEDEX
FRANCE
Tel: 33-1-69-47-10-21
Fax: 33-1-60-77-86-98
gonin@genethon.fr
----------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 10:22:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:22:25 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020922.LAA02927@pubhealth.ku.dk>

On Thu, 2 May 2002 gonin@genethon.fr wrote:

> Hi R colleagues,
>
> I don't know whether this is a bug, but something weird happen with R-GNOME.
> Version 1.5.0.
> I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
> R can be started with or without the Gnome interface: fine.
> However, when I start with Gnome interface, jpeg and a few other
> things are unavailable (checked using capabilities()), whereas
> everything is available (except Gnome) when I start R without Gnome.

Have you actually tried them?  capabilities() can be wrong, as it only
reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
do all work under R --gui=gnome.  (Well, actually gnome has problems with
its dialogs as it makes assumptions about the X11 system in use and I am
not using XFree86.)

I will try to work out a more definitive algorithm for capabilities, but
its main use is to test if checks should be run, so it needs to be
conservative.  And as you note, Gnome is experimental and has a separate
maintainer ....

> Also, some calls seem available with Gnome: system("..") returns nothing.
> Maybe this is related to the experimental nature of the Gnome interface.
> Hope that helps.
> Cheers,
> --
> ----------------------------
> Patrick Gonin, DVM, PhD
> Head of in vivo Evaluation Dept
> Généthon
> 1 bis, rue de l'Internationale- BP 60
> 91002 EVRY CEDEX
> FRANCE
> Tel: 33-1-69-47-10-21
> Fax: 33-1-60-77-86-98
> gonin@genethon.fr
> ----------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luchini@ehess.cnrs-mrs.fr  Thu May  2 11:23:22 2002
From: luchini@ehess.cnrs-mrs.fr (luchini@ehess.cnrs-mrs.fr)
Date: Thu, 2 May 2002 12:23:22 +0200 (MET DST)
Subject: [Rd] pictex (PR#1505)
Message-ID: <200205021023.MAA03892@pubhealth.ku.dk>

Full_Name: Stephane Luchini
Version: 1.4.1
OS: Redhat 7.2
Submission from: (NULL) (193.50.233.43)


I want to use R to plot an histogram of a vector of size 759 with min=-63260e+06

and max=3.700646.

When I use X11 as the output device, there is no problem to obtain the desired 
graphics using the following instructions:

hist(VED,br=60,prob=TRUE)
lines(density(VED,bw=7.668e+05))

Now, if I use the pictex driver :
pictex(file = "test.pictex")

The whole pictex code is not generated. It stops after line 760.
When I put debug = TRUE, it stops after 243 lines.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May  2 11:32:10 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 May 2002 12:32:10 +0200 (CEST)
Subject: [Rd] R-GNOME (PR#1503)
In-Reply-To: <200205020922.LAA02927@pubhealth.ku.dk>
Message-ID: <XFMail.20020502123210.plummer@iarc.fr>

On 02-May-2002 ripley@stats.ox.ac.uk wrote:
> On Thu, 2 May 2002 gonin@genethon.fr wrote:
> 
>> Hi R colleagues,
>>
>> I don't know whether this is a bug, but something weird happen with R-GNOME.
>> Version 1.5.0.
>> I compiled the stuff under i-686 Linux RH 7.2 using ./configure
>> --with-gnome.
>> R can be started with or without the Gnome interface: fine.
>> However, when I start with Gnome interface, jpeg and a few other
>> things are unavailable (checked using capabilities()), whereas
>> everything is available (except Gnome) when I start R without Gnome.
> 
> Have you actually tried them?  capabilities() can be wrong, as it only
> reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
> do all work under R --gui=gnome.  (Well, actually gnome has problems with
> its dialogs as it makes assumptions about the X11 system in use and I am
> not using XFree86.)
> 
> I will try to work out a more definitive algorithm for capabilities, but
> its main use is to test if checks should be run, so it needs to be
> conservative.  And as you note, Gnome is experimental and has a separate
> maintainer ....

jpeg() is available under the GNOME interface and works correctly.

>> Also, some calls seem available with Gnome: system("..") returns nothing.
>> Maybe this is related to the experimental nature of the Gnome interface.
>> Hope that helps.

The GNOME port currently uses the same version of do_system as the unix
command line port of R.  This sends the output of the system call to
the standard output.  So, for example, if you R-GNOME from a terminal,
the output will appear in the terminal and not the R GNOME console.
GNOME needs its own version of do_system.  I will fix this for R 1.5.1.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 11:33:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:33:47 +0100 (BST)
Subject: [Rd] Rversion.h
Message-ID: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>

Our current intention is to no longer include Rversion.h from R.h as from
R 1.6.0 (which is months away).

Package maintainers when revising code might like to check if they
actually use Rversion.h, and if so include it explicitly.

I did a quick grep through the CRAN packages, and in all but one case
(mda) the test is for R < 1.2.0, so it may be simplest just to tidy up
and add  `Depends: R (>= 1.2.0)'  to the DESCRIPTION file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  2 13:51:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 May 2002 14:51:43 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
Message-ID: <x26626lnkw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Our current intention is to no longer include Rversion.h from R.h as from
> R 1.6.0 (which is months away).

For the inquisitive minds: The reason we want to do this lies in
makefile dependencies: Every file that includes R.h currently ends up
depending on the date stamp which changes automatically every 24
hours. So even a simple bug fix involves substantial rebuilding
activity, which is annoying for the developers, and also carries some
risk of compiler warning getting missed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 16:52:44 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 17:52:44 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <x26626lnkw.fsf@blueberry.kubism.ku.dk>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
Message-ID: <15569.24780.734088.702887@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ripley@stats.ox.ac.uk writes:
>> Our current intention is to no longer include Rversion.h from R.h as from
>> R 1.6.0 (which is months away).

> For the inquisitive minds: The reason we want to do this lies in
> makefile dependencies: Every file that includes R.h currently ends up
> depending on the date stamp which changes automatically every 24
> hours. So even a simple bug fix involves substantial rebuilding
> activity, which is annoying for the developers, and also carries some
> risk of compiler warning getting missed.

Note that this implies that packages which unconditionally use R_VERSION
or R_Version (note that R-exts in facts recommends

  #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

will fail to install under the current r-devel.

These packages seems to be

	Matrix
	RArcInfo
	RODBC
	XML
	chron
	gafit
	mda
	odesolve

(two of which I happen to maintain myself ...) as well as the Omegahat
packages

	CORBA
	RGnumeric
	RSPerl
	RSPython
	SJava
	SNetscape
	SXalan
	Slcc
	Sxslt

It would be great if we could have updates of these packages in the near
future, either via following the recommended procedure from R-exts or,
perhaps preferably, removing the pre-1.2.0 compatibility code and adding

	Depends: R (>= 1.2.0)

in the package DESCRIPTION file.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 17:34:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 18:34:11 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <15569.24780.734088.702887@mithrandir.hornik.net>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
 <15569.24780.734088.702887@mithrandir.hornik.net>
Message-ID: <15569.27267.926617.344251@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Peter Dalgaard BSA writes:
>> ripley@stats.ox.ac.uk writes:
>>> Our current intention is to no longer include Rversion.h from R.h as from
>>> R 1.6.0 (which is months away).

>> For the inquisitive minds: The reason we want to do this lies in
>> makefile dependencies: Every file that includes R.h currently ends up
>> depending on the date stamp which changes automatically every 24
>> hours. So even a simple bug fix involves substantial rebuilding
>> activity, which is annoying for the developers, and also carries some
>> risk of compiler warning getting missed.

> Note that this implies that packages which unconditionally use R_VERSION
> or R_Version (note that R-exts in facts recommends

>   #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

> will fail to install under the current r-devel.

> These packages seems to be

> ...

> It would be great if we could have updates of these packages in the near
> future, either via following the recommended procedure from R-exts or,
> perhaps preferably, removing the pre-1.2.0 compatibility code and adding

> 	Depends: R (>= 1.2.0)

> in the package DESCRIPTION file.

Sorry, that's not quite correct.

As we can have tests in both
    #if R_VERSION < R_Version(1, 2, 0)
and
    #if R_VERSION >= R_Version(1, 2, 0)
style, following the 'recommended procedure' is obviously not good
enough ...

I suggest removing pre-1.2.0 compatibility code and adding
   Depends: R (>= 1.2.0)
in the package DESCRIPTION file.

For version checks for later versions please add
   #include <Rversion.h>

CRAN/Omegaht packages affected by the change are

CORBA
Matrix
RArcInfo
RGnumeric
RMySQL
RODBC
ROracle
RSPerl
RSPython
RSQLite
SJava
SNetscape
SXalan
Slcc
Sxslt
XML
chron
gafit
mda
odesolve

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From drew.tyre@csiro.au  Fri May  3 03:26:08 2002
From: drew.tyre@csiro.au (drew.tyre@csiro.au)
Date: Fri, 3 May 2002 04:26:08 +0200 (MET DST)
Subject: [Rd] copy or save to metafile from graphics device shrinks plots (PR#1507)
Message-ID: <200205030226.EAA09900@pubhealth.ku.dk>

Full_Name: Drew Tyre
Version: 1.4.0
OS: Win 2000
Submission from: (NULL) (140.253.74.225)


When creating a rather complex plot, the resulting figures 'shrink' when either
copied to the clipboard or saved as a metafile using the GUI menu. Also saving
as postscript or pdf causes the same problem, as does printing the figure
directly from the graphics window. Only the figure areas shrink, the contents
appear to have the same size, leading to clipping around the edges. Saving as
PNG format works, as does drawing directly to a win.metafile() device. I haven't
tried bitmap format.

The code is below; Aus() is an extension of oz() written by Nick Ellis - but
doesn't seem to be related to the problem (ie. replacing that call with a simple
plot() still creates the problem). I've tried to reproduce it with simpler plots
for some hours to no avail. Bug 1242 seems like the only related one, but I'm
not using lattice.grid. Given that there is a straightforward workaround
(suggested by Nick Ellis) by writing directly to a metafile device it seems like
a low priority. I'm happy to provide the data if anyone wants to look at it in
detail. 
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.0            
year     2001           
month    12             
day      19             
language R              

[1] ".GlobalEnv"        "sulphuric.accepta" "package:MASS"     
[4] "package:ctest"     "Autoloads"         "package:base"    


#source("C:/Program Files/R/rw1040/library/Aus/source.q")
#win.metafile("mapfigure.emf")
par(mfrow=c(2,2),mar=c(5.1,4.1,0.1,0.1))
Aus()
hermit.hill <- list(x=136.8314,y=-30.02850)
points(hermit.hill,pch="*",cex=2)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.accepta)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("B",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.isopods)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("C",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(bopeechee.zeidleri)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("D",side=2,cex=2,las=2,at=par("yaxp")[2])
#dev.off()

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 07:52:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 08:52:48 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205030652.IAA10584@pubhealth.ku.dk>

On Fri, 3 May 2002 drew.tyre@csiro.au wrote:

> Full_Name: Drew Tyre
> Version: 1.4.0
> OS: Win 2000
> Submission from: (NULL) (140.253.74.225)
>
>
> When creating a rather complex plot, the resulting figures 'shrink' when either
> copied to the clipboard or saved as a metafile using the GUI menu. Also saving
> as postscript or pdf causes the same problem, as does printing the figure
> directly from the graphics window. Only the figure areas shrink, the contents

That says the problem is in the replaying of graphics and not to do
with metafiles.  (But I've shorten the subject for the sake of R-bugs.)

1.4.0 was the first version with new graphics drivers, and we would
first need to know if this is still present in 1.5.0, and also if specific
to Windows.  Could you test 1.5.0 once that becomes available, and let us
know?  If the problem is still present, it would help if we had a complete
reproducible example on a web site somewhere.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:12:12 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 3 May 2002 12:12:12 +0200 (MET DST)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
Message-ID: <200205031012.MAA13485@pubhealth.ku.dk>

Hi Everyone, 

I've noticed that setting the environment of a function from a package
actually creates a copy of that function in .GlobalEnv and sets the
environment on this copy:

> find(.profile)
[1] "package:newblips"
> environment(.profile) <- bb1$getEnv() # this is an environment
> find(.profile)
[1] ".GlobalEnv"       "package:newblips"

I don't have a problem with this behaviour (now I understand it!) but
I think that it would help to document it in the help file.  May I
suggest that instead of

     The assignment form sets the environment of the function or
     formula `fun' to the `value' given.

we have

     The assignment form sets the environment of the function or
     formula \code{fun} to \code{value} if \code{fun} is in the
     current environment, otherwise it makes a copy of \code{fun} in
     the current environment and sets the environment of the copy.

I think that describes the current procedure: please correct me if I
am wrong!

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:newblips, package:MASS, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  3 11:26:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2002 12:26:58 +0200
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <200205031012.MAA13485@pubhealth.ku.dk>
References: <200205031012.MAA13485@pubhealth.ku.dk>
Message-ID: <x26625y1al.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Hi Everyone, 
> 
> I've noticed that setting the environment of a function from a package
> actually creates a copy of that function in .GlobalEnv and sets the
> environment on this copy:
> 
> > find(.profile)
> [1] "package:newblips"
> > environment(.profile) <- bb1$getEnv() # this is an environment
> > find(.profile)
> [1] ".GlobalEnv"       "package:newblips"
> 
> I don't have a problem with this behaviour (now I understand it!) but
> I think that it would help to document it in the help file.  May I
> suggest that instead of
> 
>      The assignment form sets the environment of the function or
>      formula `fun' to the `value' given.
> 
> we have
> 
>      The assignment form sets the environment of the function or
>      formula \code{fun} to \code{value} if \code{fun} is in the
>      current environment, otherwise it makes a copy of \code{fun} in
>      the current environment and sets the environment of the copy.
> 
> I think that describes the current procedure: please correct me if I
> am wrong!

But this is generic behaviour for *all* attribute assignment. It makes
no sense to describe a specific instance of it. Consider

data(airquality)
f<-function() { x <- class(airquality)<-NULL; ls() }
f()
class(airquality)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:49:25 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 03 May 2002 11:49:25 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CD26B35.1F72FD86@durham.ac.uk>

Peter Dalgaard BSA wrote:
> 
> J.C.Rougier@durham.ac.uk writes:
> 
> > Hi Everyone,
> >
> > I've noticed that setting the environment of a function from a package
> > actually creates a copy of that function in .GlobalEnv and sets the
> > environment on this copy:
> >
> > > find(.profile)
> > [1] "package:newblips"
> > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > find(.profile)
> > [1] ".GlobalEnv"       "package:newblips"
> >
> > I don't have a problem with this behaviour (now I understand it!) but
> > I think that it would help to document it in the help file.  May I
> > suggest that instead of
> >
> >      The assignment form sets the environment of the function or
> >      formula `fun' to the `value' given.
> >
> > we have
> >
> >      The assignment form sets the environment of the function or
> >      formula \code{fun} to \code{value} if \code{fun} is in the
> >      current environment, otherwise it makes a copy of \code{fun} in
> >      the current environment and sets the environment of the copy.
> >
> > I think that describes the current procedure: please correct me if I
> > am wrong!
> 
> But this is generic behaviour for *all* attribute assignment. It makes
> no sense to describe a specific instance of it. Consider
> 
> data(airquality)
> f<-function() { x <- class(airquality)<-NULL; ls() }
> f()
> class(airquality)

I understand.  However, I still think that the help page for environment
is wrong!  Using "enviroment<-" does not necessarily set the environment
of the function, as stated.  What happened to me is that I modified
.profile in the package newblips and then re-assigned its environment
but didn't see any change, because it was masked by the copy of .profile
in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
and I think that changing the environment help page would clarify this
for other users.  J.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri May  3 15:26:33 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 3 May 2002 09:26:33 -0500
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD26B35.1F72FD86@durham.ac.uk>; from J.C.Rougier@durham.ac.uk on Fri, May 03, 2002 at 11:49:25AM +0100
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk>
Message-ID: <20020503092633.A11402@nokomis.stat.umn.edu>

On Fri, May 03, 2002 at 11:49:25AM +0100, Jonathan Rougier wrote:
> Peter Dalgaard BSA wrote:
> > 
> > J.C.Rougier@durham.ac.uk writes:
> > 
> > > Hi Everyone,
> > >
> > > I've noticed that setting the environment of a function from a package
> > > actually creates a copy of that function in .GlobalEnv and sets the
> > > environment on this copy:
> > >
> > > > find(.profile)
> > > [1] "package:newblips"
> > > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > > find(.profile)
> > > [1] ".GlobalEnv"       "package:newblips"
> > >
> > > I don't have a problem with this behaviour (now I understand it!) but
> > > I think that it would help to document it in the help file.  May I
> > > suggest that instead of
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula `fun' to the `value' given.
> > >
> > > we have
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula \code{fun} to \code{value} if \code{fun} is in the
> > >      current environment, otherwise it makes a copy of \code{fun} in
> > >      the current environment and sets the environment of the copy.
> > >
> > > I think that describes the current procedure: please correct me if I
> > > am wrong!
> > 
> > But this is generic behaviour for *all* attribute assignment. It makes
> > no sense to describe a specific instance of it. Consider
> > 
> > data(airquality)
> > f<-function() { x <- class(airquality)<-NULL; ls() }
> > f()
> > class(airquality)
> 
> I understand.  However, I still think that the help page for environment
> is wrong!  Using "enviroment<-" does not necessarily set the environment
> of the function, as stated.  What happened to me is that I modified
> .profile in the package newblips and then re-assigned its environment
> but didn't see any change, because it was masked by the copy of .profile
> in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
> and I think that changing the environment help page would clarify this
> for other users.  J.

I agree with Peter.  The compound assignment process is quite complex
but it is uniform across compound assignments.  One way to describe it
is that

	f(x)<- y

does roughly (modulo some performance tweaks)

	if (! exists("x", inherits = FALSE))
            x <- x  # insures x is local
        x <- "f<-"(x, value = y)

The shorthand used in ?"environment<-" is the same as the shorthand
used in at lest some other assignment contexts, for example in ?"[<-":

     If one of these expressions appears on the left side of an
     assignment then that part of `x' is set to the value of the right
     hand side of the assignment.

I don't see much point in adding a substantial amount of legalese to
all of these, and doing so in only some places is likely to lead to
more confusion.

Specific to environment<-, if any change is warranted is might be to
add a disclaimer like

	Changing the environment of a function can have unexpected
	consequences.  There is usually a safer way to achieve what
	you are trying to do.

A similar warning would be appropriate for formals<- and body<-.  When
you define a function the usual way you cause a function expression
consisting of formals and body to be evaluated in a particular
environment.  That creates a closure in which the three pieces are
assembled in a consistent fashion.  Assigning to any one of them
separately is quite likely to lead to inconsistencies and is one
reason the internal code loses all attributes on the function when you
do this (in particular the 'source' attribute if there was one).  If
we get byte code compilation and f is a compiled function, then after

	environment(f)<- myenv

the value of f will have to either be an interpreted function or the
assignment will have to trigger a new compilation since the original
compilation will have used information from the original environment.

In fact, given these issues I would argue that a pretty strong case
can be made for eliminating formals<-, body<- and environment<- (at
least for functions), though there are some very limited circumstances
where they can be useful if used with care.

So, after all that, the real question: why are you doing this and are
you sure there isn't a better way?

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From elff@rumms.uni-mannheim.de  Fri May  3 15:42:30 2002
From: elff@rumms.uni-mannheim.de (elff@rumms.uni-mannheim.de)
Date: Fri, 3 May 2002 16:42:30 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031442.QAA16928@pubhealth.ku.dk>

Full_Name: Martin Elff
Version: 1.5.0
OS: MS Windows 98
Submission from: (NULL) (134.155.91.46)


Merging of two data frames by variables with different names 
(using by.x and by.y) is no 
longer possible (it was possible in version 1.4.1). 
Call:

mvoteint.classd.matadd <- merge(
                            unique(mvoteint.classd),
                            unique(subset(dimens.mpp,
                                select=c(nation,year,mecode,
                                        econlrdiff,
                                        eeconlrdiff,
                                        welfdiff,
                                        labmiddiff,
                                        authlibdiff,
                                        authlibdiffn)
                            )),
                            by.x=c("nation","eyear","mvoteint"),
                            by.y=c("nation","year","mecode"),
                            all.x=TRUE,
                            sort=TRUE
                            )

Error message:
Error in match.names(clabs, names(xi)) : names don't match previous names:
         year, mecode


Traceback:

10: stop(paste("names don't match previous names:\n     ", paste(nmi[nii == 
        0], collapse = ", ")))
9: match.names(clabs, names(xi))
8: rbind(...)
7: rbind(x[, by.x], y[, by.y])
6: do.call("paste", c(rbind(x[, by.x], y[, by.y]), sep = "\r"))
5: merge.data.frame(unique(mvoteint.classd), unique(subset(dimens.mpp, 
       select = c(nation, year, mecode, econlrdiff, eeconlrdiff, 
           welfdiff, labmiddiff, authlibdiff, authlibdiffn))), by.x =
c("nation", 
       "eyear", "mvoteint"), by.y = c("nation", "year", "mecode"), 
       all.x = TRUE, sort = TRUE)
4: merge(unique(mvoteint.classd), unique(subset(dimens.mpp, select = c(nation, 
       year, mecode, econlrdiff, eeconlrdiff, welfdiff, labmiddiff, 
       authlibdiff, authlibdiffn))), by.x = c("nation", "eyear", 
       "mvoteint"), by.y = c("nation", "year", "mecode"), all.x = TRUE, 
       sort = TRUE)
3: eval.with.vis(expr, envir, enclos)
2: eval.with.vis(ei, envir)
1: source("setup-classd-mat-additiv.R", echo = T)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  3 17:06:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 3 May 2002 09:06:14 -0700 (PDT)
Subject: [Rd] merge (PR#1510)
In-Reply-To: <200205031442.QAA16928@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205030859300.100836-100000@homer39.u.washington.edu>

On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:

> Full_Name: Martin Elff
> Version: 1.5.0
> OS: MS Windows 98
> Submission from: (NULL) (134.155.91.46)
>
>
> Merging of two data frames by variables with different names
> (using by.x and by.y) is no
> longer possible (it was possible in version 1.4.1).

To be precise, it doesn't seem to work with multiple by columns, so
> df<-data.frame(x=1:10,y=rnorm(10))
> fd<-data.frame(z=1:10,w=rnorm(10))
> merge(df,fd,by.x="x",by.y="z")
succeeds but
> fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
Error in match.names(clabs, names(xi)) : names don't match previous names:
         z, m


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 17:16:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 18:16:32 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031616.SAA17458@pubhealth.ku.dk>

On Fri, 3 May 2002, Thomas Lumley wrote:

> On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:
>
> > Full_Name: Martin Elff
> > Version: 1.5.0
> > OS: MS Windows 98
> > Submission from: (NULL) (134.155.91.46)
> >
> >
> > Merging of two data frames by variables with different names
> > (using by.x and by.y) is no
> > longer possible (it was possible in version 1.4.1).
>
> To be precise, it doesn't seem to work with multiple by columns, so
> > df<-data.frame(x=1:10,y=rnorm(10))
> > fd<-data.frame(z=1:10,w=rnorm(10))
> > merge(df,fd,by.x="x",by.y="z")
> succeeds but

Yes, and there is an example on the help page for that case.

> > fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> > df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> > merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
> Error in match.names(clabs, names(xi)) : names don't match previous names:
>          z, m

Yes, the code is different for multiple match columns, and I know how to
fix it.

Thank you Thomas for the example: creating one was my next task.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Mon May  6 10:34:06 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Mon, 06 May 2002 11:34:06 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <200205010201.EAA14443@stat.math.ethz.ch>
Message-ID: <3CD64E0E.9FE073A4@lmttrading.com>

> Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> From: Gang Liang <liang@stat.berkeley.edu>
> Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
>
> Thanks, Peter!
>
> Yes, I tried the latest package of tseries, but I guess I made a mistake
> about the version number. Okay I am going to try the development version
> of R on my machine.
>
> BTW, there are some minor typos in tseries package's help package, such as
> some links named temp -- I am quite sure it's really temp, :).

Can you give me a more detailed description such that I am able to correct these typos?

Thanks
Adrian

> Regards,
>
> Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Sonia.Leach@uchsc.edu  Mon May  6 17:16:44 2002
From: Sonia.Leach@uchsc.edu (Sonia.Leach@uchsc.edu)
Date: Mon, 6 May 2002 18:16:44 +0200 (MET DST)
Subject: [Rd] subscript problem with function qr.X (PR#1519)
Message-ID: <200205061616.SAA01494@pubhealth.ku.dk>


R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> x <- matrix(scan(), 4,5)
1:     0.9501    0.8913    0.8214    0.9218    0.9355
6:     0.2311    0.7621    0.4447    0.7382    0.9169
11:     0.6068    0.4565    0.6154    0.1763    0.4103
16:     0.4860    0.0185    0.7919    0.4057    0.8936
21: 
Read 20 items
> QR <- qr(x)
> qr.Q(QR)
           [,1]       [,2]        [,3]         [,4]
[1,] -0.5293452  0.5626939 -0.19540556 -0.604140627
[2,] -0.4965850 -0.6566910 -0.56754804  0.007036243
[3,] -0.4576404  0.4009461 -0.05368566  0.791786145
[4,] -0.5135779 -0.3022824  0.79801236 -0.089662111
> qr.R(QR)
          [,1]       [,2]        [,3]        [,4]       [,5]
[1,] -1.794859 -1.1871191 -1.35822590 -0.85067570 -1.0476365
[2,]  0.000000  0.5457749 -0.08143716  0.24810615 -0.6170795
[3,]  0.000000  0.0000000 -0.33291700  0.14549548  0.2382673
[4,]  0.000000  0.0000000  0.00000000 -0.08925358  0.2355010
> qr.X(QR)
Error in qr.X(QR) : subscript out of bounds
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cjpelton@ucdavis.edu  Mon May  6 20:26:14 2002
From: cjpelton@ucdavis.edu (cjpelton@ucdavis.edu)
Date: Mon, 6 May 2002 21:26:14 +0200 (MET DST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205061926.VAA02070@pubhealth.ku.dk>

Full_Name: Chris Pelton
Version: R-1.5.0
OS: Solaris &
Submission from: (NULL) (169.237.121.210)


I am unable to compile R-1.5.0, and am getting the following errors with make. I
searched through
the buglist and didn't see anything similar, although I wouldn't doubt if I was
just
using the wrong version of something. 

gcc version 3.0.3



gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
".subsection"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
".previous"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
*** Error code 1
make: Fatal error: Command failed for target `lbfgsb.o'
Current working directory /export/home/cjpelton/R-1.5.0/src/appl
*** Error code 1
make: Fatal error: Command failed for target `R'

Thanks,
Chris


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Mon May  6 20:49:47 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Mon, 6 May 2002 21:49:47 +0200 (MET DST)
Subject: [Rd] Accessing C code for 'optim' (PR#1521)
Message-ID: <200205061949.VAA02132@pubhealth.ku.dk>

Full_Name: Göran Broström
Version: 1.5.0
OS: RH Linux 7.2 (i686)
Submission from: (NULL) (130.235.138.224)


The documentation (p. 55, "R Extensions") describes the gradient function as

typedef double optimgr(...

which is wrong. The correct description is

typedef void optimgr(...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  6 21:46:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2002 22:46:44 +0200
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <200205061926.VAA02070@pubhealth.ku.dk>
References: <200205061926.VAA02070@pubhealth.ku.dk>
Message-ID: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>

cjpelton@ucdavis.edu writes:

> I am unable to compile R-1.5.0, and am getting the following errors with make. I
> searched through
> the buglist and didn't see anything similar, although I wouldn't doubt if I was
> just
> using the wrong version of something. 
> 
> gcc version 3.0.3
> 
> 
> 
> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> ".subsection"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> ".previous"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> *** Error code 1
> make: Fatal error: Command failed for target `lbfgsb.o'
> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> *** Error code 1
> make: Fatal error: Command failed for target `R'

I think this is a generic problem, unrelated to R: To use gcc-3.0.3
the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
and obviously also to make sure that it is found before the one in
/usr/ccs. I have have built R succesfully on a system where the
following holds:

Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
[pd@rubin pd]$ which as
/usr/local/bin/as
[pd@rubin pd]$ /usr/local/bin/as --version
GNU assembler 2.11.2
Copyright 2001 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License.  This program has absolutely no warranty.
This assembler was configured for a target of `sparc-sun-solaris2.7'.
[pd@rubin pd]$ gcc --version
3.0.3

The assembler is part of binutils-2.11.2 installed from sunfreeware.com.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C Pelton <cjpelton@ucdavis.edu>  Mon May  6 23:41:38 2002
From: C Pelton <cjpelton@ucdavis.edu> (C Pelton)
Date: Mon, 6 May 2002 15:41:38 -0700 (PDT)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205062241.g46Mfcc21648@pop12.ucdavis.edu>

You are right, this was due to my using gcc and /usr/ccs/bin/as. I installed 
binutils and got through that error. Sorry for the needless bug report. Thanks 
for the quick response though.

-Chris



>X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to 
p.dalgaard@biostat.ku.dk using -f
>To: cjpelton@ucdavis.edu
>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>Subject: Re: [Rd] compiling on Solaris 7 (PR#1520)
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>Date: 06 May 2002 22:46:44 +0200
>User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
>MIME-Version: 1.0
>
>cjpelton@ucdavis.edu writes:
>
>> I am unable to compile R-1.5.0, and am getting the following errors with 
make. I
>> searched through
>> the buglist and didn't see anything similar, although I wouldn't doubt if I 
was
>> just
>> using the wrong version of something. 
>> 
>> gcc version 3.0.3
>> 
>> 
>> 
>> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
>> ".subsection"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
>> ".previous"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
>> *** Error code 1
>> make: Fatal error: Command failed for target `lbfgsb.o'
>> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
>> *** Error code 1
>> make: Fatal error: Command failed for target `R'
>
>I think this is a generic problem, unrelated to R: To use gcc-3.0.3
>the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
>and obviously also to make sure that it is found before the one in
>/usr/ccs. I have have built R succesfully on a system where the
>following holds:
>
>Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
>[pd@rubin pd]$ which as
>/usr/local/bin/as
>[pd@rubin pd]$ /usr/local/bin/as --version
>GNU assembler 2.11.2
>Copyright 2001 Free Software Foundation, Inc.
>This program is free software; you may redistribute it under the terms of
>the GNU General Public License.  This program has absolutely no warranty.
>This assembler was configured for a target of `sparc-sun-solaris2.7'.
>[pd@rubin pd]$ gcc --version
>3.0.3
>
>The assembler is part of binutils-2.11.2 installed from sunfreeware.com.
>
>-- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205070515.g475F4x31385@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve()
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above
--mayhave side-effects in many other pieces of interpreted code
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using ==
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local"
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
* PR# 1473 *
Subject: predict.*bSpline() bugs extrapolating for deriv >= 1
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 22 Apr 2002 12:30:12 +0200
* PR# 1486 *
Subject: Can't install packages
From: Poizot Emmanuel <poizot@cnam.fr>
Date: Fri, 26 Apr 2002 17:13:05 +0200
* PR# 1497 *
Subject: tseries package segmentation fault
From: liang@stat.berkeley.edu
Date: Mon, 29 Apr 2002 21:06:41 +0200 (MET DST)
* PR# 1499 *
Subject: Undefined symbols in loading tcltk
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:13:42 +0200 (CEST)
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
* PR# 1505 *
Subject: pictex
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
* PR# 1509 *
Subject:  Behaviour of environment(foo)<-
From: J.C.Rougier@durham.ac.uk
Date: Fri, 3 May 2002 11:10:21 +0100
* PR# 1510 *
Subject: merge
From: elff@rumms.uni-mannheim.de
Date: Fri, 3 May 2002 16:42:29 +0200 (MET DST)
* PR# 1511 *
Subject: PlantGrowth))
From: me <me@localhost.com>
Date: Fri,  3 May 2002 19:54:15 +0200 (CEST)
* PR# 1515 *
Subject: A  WinXP patch
From: webmasters <webmasters@www.gnu.org>
Date: Sun, 5 May 2002 15:57:16 +0200
* PR# 1519 *
Subject: subscript problem with function qr.X
From: Sonia Leach <Sonia.Leach@uchsc.edu>
Date: Mon, 06 May 2002 10:12:34 -0600
* PR# 1520 *
Subject: compiling on Solaris 7
From: cjpelton@ucdavis.edu
Date: Mon, 6 May 2002 21:26:12 +0200 (MET DST)
* PR# 1521 *
Subject: Accessing C code for 'optim'
From: gb@stat.umu.se
Date: Mon, 6 May 2002 21:49:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 07:22:27 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 May 2002 07:22:27 +0100 (BST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0205070719310.1175-100000@auk.stats>

On 6 May 2002, Peter Dalgaard BSA wrote:

> cjpelton@ucdavis.edu writes:
>
> > I am unable to compile R-1.5.0, and am getting the following errors with make. I
> > searched through
> > the buglist and didn't see anything similar, although I wouldn't doubt if I was
> > just
> > using the wrong version of something.
> >
> > gcc version 3.0.3
> >
> >
> >
> > gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> > -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> > ".subsection"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> > ".previous"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> > *** Error code 1
> > make: Fatal error: Command failed for target `lbfgsb.o'
> > Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
>
> I think this is a generic problem, unrelated to R: To use gcc-3.0.3
> the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,

It's fine: I use it all the time.  The issue is that you must use the same
`as' as gcc was built to use.  The simplest and safest route is to build
gcc (3.0.4 with 3.1 imminent) on the target system.

Quite a lot of traffic on R-bugs is about mis-configured versions of gcc.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue May  7 10:07:49 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 07 May 2002 10:07:49 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk> <20020503092633.A11402@nokomis.stat.umn.edu>
Message-ID: <3CD79965.F38D93F1@durham.ac.uk>

Luke Tierney wrote:
> 
> A similar warning would be appropriate for formals<- and body<-.  When
> you define a function the usual way you cause a function expression
> consisting of formals and body to be evaluated in a particular
> environment.  That creates a closure in which the three pieces are
> assembled in a consistent fashion.  Assigning to any one of them
> separately is quite likely to lead to inconsistencies and is one
> reason the internal code loses all attributes on the function when you
> do this (in particular the 'source' attribute if there was one).  If
> we get byte code compilation and f is a compiled function, then after
> 
>         environment(f)<- myenv
> 
> the value of f will have to either be an interpreted function or the
> assignment will have to trigger a new compilation since the original
> compilation will have used information from the original environment.
> 
> In fact, given these issues I would argue that a pretty strong case
> can be made for eliminating formals<-, body<- and environment<- (at
> least for functions), though there are some very limited circumstances
> where they can be useful if used with care.
> 
> So, after all that, the real question: why are you doing this and are
> you sure there isn't a better way?

Now you've scared me!  I've been using the "list of functions with a
common environment" approach to implement objects with methods and
shared data, similar to that used by Douglas Bates and Saikat DebRoy in
"nls", particularly their function "nlsModel".  So I can write
foo$method() to use method on the foo object and its collection of
common variables.  If I want to assign a function defined outside as a
method then I need something like

robj$method <- functionDefinedOutside
environment(robj$method) <- myEnv

inside the function that constructs foo by returning the list robj. 
This enables functionDefinedOutside to reference variables in foo
directly, which makes for much clearer code.  The problem for me arose
when I was debugging a new method.  Rather than rebuilding object foo
from scratch each time I make a change in functionDefinedOutside I find
it easier just leave functionDefinedOutside on its own in the package
and use

environment(functionDefinedOutside) <- foo$getEnv()

(where the getEnv method simply returns myEnv) to simulate it being a
method of foo, and then I can test it where it stands.

I like the foo$method() construction: I find it easy to work with and
think it is quite transparent.  Is it likely to stop working in a future
version of R?  
And are there current risks I have yet to encounter?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue May  7 12:15:50 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 7 May 2002 13:15:50 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071115.NAA07246@pubhealth.ku.dk>

names(unlist(...)) seems to be able to construct corrupt strings
detected via: two identical strings behave different in paste
observed in RW1.4.1 and RW1.5.0
pure replication code after output

Best


Jens Oehlschlägel


> l <- names(unlist(list(aa = list(bb = 1))))
> l
[1] "aa.bb"
> # this is exactly "aa.bb"
> identical(l, "aa.bb")
[1] TRUE
> 
> # BUT 
> identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))
[1] FALSE
> 
> # this of course works
> paste("aa.bb", "this should be added")
[1] "aa.bb this should be added"
> 
> # BUT THIS FAILS
> paste(l, "this should be added")
[1] "aa.bb"



l <- names(unlist(list(aa = list(bb = 1))))
l
# this is exactly "aa.bb"
identical(l, "aa.bb")

# BUT 
identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))

# this of course works
paste("aa.bb", "this should be added")

# BUT THIS FAILS
paste(l, "this should be added")




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows 2000 Professional (build 2195) Service Pack 1.0

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
GMX - Die Kommunikationsplattform im Internet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:38:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:38:59 -0700 (PDT)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD79965.F38D93F1@durham.ac.uk>
Message-ID: <Pine.A41.4.44.0205070828560.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002, Jonathan Rougier wrote:

> Luke Tierney wrote:
> >
> >
> > In fact, given these issues I would argue that a pretty strong case
> > can be made for eliminating formals<-, body<- and environment<- (at
> > least for functions), though there are some very limited circumstances
> > where they can be useful if used with care.
> >
> > So, after all that, the real question: why are you doing this and are
> > you sure there isn't a better way?
>
> Now you've scared me!  I've been using the "list of functions with a
> common environment" approach to implement objects with methods and
> shared data, similar to that used by Douglas Bates and Saikat DebRoy in
> "nls", particularly their function "nlsModel".  So I can write
> foo$method() to use method on the foo object and its collection of
> common variables.  If I want to assign a function defined outside as a
> method then I need something like
>
> robj$method <- functionDefinedOutside
> environment(robj$method) <- myEnv
>

Tony Rossini and I have also been using something similar for the
interface to Orca, essentially for the same reasons.

It would also be possible to do this with a macro:

   robj$method<-functionFactory()
with
   functionFactory<-defmacro(body={
			functionDefinedOutside(args){body;body;body}})
using the macro code from R-News 3/2001
or equivalently
   functionFactory<-function(){
		  fn<-quote(functionDefinedOutside(args){body;body;body})
	          eval.parent(fn)
		}



	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:55:31 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:55:31 -0700 (PDT)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
In-Reply-To: <200205071115.NAA07246@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205070848330.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002 oehl_list@gmx.de wrote:

> names(unlist(...)) seems to be able to construct corrupt strings
> detected via: two identical strings behave different in paste
> observed in RW1.4.1 and RW1.5.0
> pure replication code after output
>
> Best
>
>
> Jens Oehlschlägel
>
>
> > l <- names(unlist(list(aa = list(bb = 1))))
> > l
> [1] "aa.bb"

This is the same problem with do_paste that showed up with read.dta. If
you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".

In general we have the problem that a string has two ways of defining its
length:  LENGTH() and strlen()

Most functions use just one of these, but paste() uses LENGTH() to set up
the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
but strlen 5, and the result from paste() is a string with a null as its
sixth character, which thus appears to be a five-character string.

Given that this is the second appearance of the problem perhaps do_paste()
should be changed instead of (as well as?) unlist().

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 17:26:09 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:26:09 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071626.SAA10504@pubhealth.ku.dk>

On Tue, 7 May 2002, Thomas Lumley wrote:

> On Tue, 7 May 2002 oehl_list@gmx.de wrote:
>
> > names(unlist(...)) seems to be able to construct corrupt strings
> > detected via: two identical strings behave different in paste
> > observed in RW1.4.1 and RW1.5.0
> > pure replication code after output
> >
> > Best
> >
> >
> > Jens Oehlschlägel
> >
> >
> > > l <- names(unlist(list(aa = list(bb = 1))))
> > > l
> > [1] "aa.bb"
>
> This is the same problem with do_paste that showed up with read.dta. If
> you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".
>
> In general we have the problem that a string has two ways of defining its
> length:  LENGTH() and strlen()
>
> Most functions use just one of these, but paste() uses LENGTH() to set up
> the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
> but strlen 5, and the result from paste() is a string with a null as its
> sixth character, which thus appears to be a five-character string.
>
> Given that this is the second appearance of the problem perhaps do_paste()
> should be changed instead of (as well as?) unlist().

I'm fixing both.  The root bug is on line 334 of bind.c.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue May  7 18:21:52 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Tue, 7 May 2002 10:21:52 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <3CD64E0E.9FE073A4@lmttrading.com>
Message-ID: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>

If go through the help.start() --> Packages --> tseries, you will see some
duplication items in the html help page.

Thanks,
Gang

On Mon, 6 May 2002, Adrian Trapletti wrote:

> > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > From: Gang Liang <liang@stat.berkeley.edu>
> > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> >
> > Thanks, Peter!
> >
> > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > about the version number. Okay I am going to try the development version
> > of R on my machine.
> >
> > BTW, there are some minor typos in tseries package's help package, such as
> > some links named temp -- I am quite sure it's really temp, :).
>
> Can you give me a more detailed description such that I am able to correct these typos?
>
> Thanks
> Adrian
>
> > Regards,
> >
> > Gang
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 18:32:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:32:02 +0100 (BST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.LNX.4.31.0205071829320.6671-100000@gannet.stats>

On Tue, 7 May 2002, Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

That's an autogenerated page.  It seems correct to me on my machines:
maybe you have misunderstood what should be there.

There really is an object called `temp' documented on the ice.river page.
Looks like the software is better at indexing that some human readers.

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  7 20:33:02 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 07 May 2002 15:33:02 -0400
Subject: [Rd] Generic/method consistency in print and summary
Message-ID: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>

In R 1.5.0 (and earlier):

 > print
 function (x, ...) 
 UseMethod("print")
 > summary
 function (object, ...) 
 UseMethod("summary")

Is there a reason for this inconsistency in the name of the object?
It makes a single help file for both functions look ugly, because it
has to document both "x" and "object", which are really the same
thing.

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 21:04:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 21:04:14 +0100 (BST)
Subject: [Rd] Generic/method consistency in print and summary
In-Reply-To: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>
Message-ID: <Pine.LNX.4.31.0205072102580.8910-100000@gannet.stats>

On Tue, 7 May 2002, Duncan Murdoch wrote:

> In R 1.5.0 (and earlier):
>
>  > print
>  function (x, ...)
>  UseMethod("print")
>  > summary
>  function (object, ...)
>  UseMethod("summary")
>
> Is there a reason for this inconsistency in the name of the object?

Long-term S compatibility.  It's been like that since at least 1991.

> It makes a single help file for both functions look ugly, because it
> has to document both "x" and "object", which are really the same
> thing.

\item{x, object} ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Tue May  7 21:46:45 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Tue, 07 May 2002 22:46:45 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <3CD83D35.3232175C@lmttrading.com>

Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

Can you tell me which ones? I can´t find any...

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >

Adrian

--
Dr. Adrian Trapletti   Phone:       +41 (0)1 994 56 31
Wildsbergstrasse 31    Fax  :       +41 (0)1 994 56 33
CH-8610 Uster          Email:   a.trapletti@bluewin.ch
Switzerland            WWW  :  trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 07:18:22 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 02:18:22 -0400
Subject: [Rd] embedded R regexec returning nonsense
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C68@Groexmbcr10.pfizer.com>

Under RSPython and rpy, the regexec C function is returning nonsensical
results leading to segmentation faults.  This is happening in some
situations under R 1.4.1 and (more often?) under R 1.5.0  on my Solaris 8
box.  R 1.4.1 was compiled with gcc 2.95.2, and I've tried 1.5.0 with both
gcc 2.95.2 and gcc 3.0.3.   The error appears to be exactly the same under
both python tools and both compilers.  This makes me suspect that there is
some hairy interaction between the R regex functions and something in
python.

With R 1.4.1, R starts up smoothly under rpy and RSPython and only certain
functions elicit the error.  For instance, doing "bitmap('file.bmp')" will
cause a segfault in do_strsplit (character.c:260) because the regmatch
structure contains the nonsense values:

	(gdb) print regmatch[0]
	$1 = {rm_so = 9257728, rm_eo = 9257729}


With R 1.5.0, R fails to complete startup initialization under both rpy and
RSPython, segfaulting in do_readDCF (dcf.c:109) with similar nonsense values
in the regmatch structure:

	(gdb) print regmatch
	$7 = {{rm_so = 9777896, rm_eo = 9777905}}


Does anyone have asuggestion on the best way to track down the cause of this
problem?   I'll be happy to provide tracebacks, core dumps, etc if that
would help.

Thanks,

Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed May  8 17:45:57 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 08 May 2002 11:45:57 -0500
Subject: [Rd] Questions about S4 style methods and generics
Message-ID: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>

I have some questions about S4 style methods and generics.

First of all, is there any way of using default values for arguments
in the generics/methods? My own experiments show that such arguments
are always ignored. The green book seems to be silent on this
matter.

The second question is about using a non-trivial function body for
generics. Page 351 of the green book gives an example of this and the
documentation for setGeneric seems to suggest I should be able to do
this at least by using myDispatch=TRUE. However, the current
implementation seems to set the body of the generic definition to a
call to standardGeneric all the time. Is this a bug or a modification
of the green book description?

Thanks,

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  8 19:05:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 8 May 2002 20:05:24 +0200 (MET DST)
Subject: [Rd] [.data.frame handles drop inconsistently (PR#1530)
Message-ID: <200205081805.UAA20673@pubhealth.ku.dk>

R 1.5.0:

d.df <- data.frame(x = 1:3, y = c("A","D","E"), z = c(6,9,10))
d.df[1,1:3]
xx <- d.df[1,]
xx[, 1:3]

d.df[1,1:3] and xx[, 1:3] should be the same, and they are in S.

d.df[1,1:3] is a data frame.

xx[, 1:3] is a list, and it should not be.
xx[, 1:3, drop=FALSE]  is the desired answer.

(This cropped up when looking at merge, which was caught by it.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 21:25:05 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 16:25:05 -0400
Subject: [Rd] embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>


Hi All,

When R is embedded in python on my system (Solaris 8), calls to the c
functions 'regcomp' and 'regexec' are being resolved to the c-library,
rather than the functions compiled from regex.c.  This leads to segfaults
because the c-library functions have quite different semantics.

Is there any way to get around this, other than renaming the offending
functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
perhaps there is another argument which says 'check inside this library for
symbols before looking elsewhere'?

Thanks,

-Greg

----------------- obligatory version information

R 1.4.1, 1.5.0,
gcc 2.95.2, 3.0.3,
python 2.1.1, 2.1.3
SunOs 5.8, sparc




LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu May  9 00:15:28 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 8 May 2002 19:15:28 -0400
Subject: [Rd] Re: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Wed, May 08, 2002 at 04:25:05PM -0400
References: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>
Message-ID: <20020508191528.B27246@jessie.research.bell-labs.com>

Hi Greg.
  
 Yes, there are some ways to arrange for tight/eager binding
rather than dynamically loading libraries. They do depend on
the linker being used and unfortunately precisely how the
libraries containing the symbols are being "included".

One GNU linker option that is of relevance here is -Bsymbolic
which is documented as
 "When creating a shared library, bind references to global symbols
 to the definition within the shared library, if any.  ....."

As a quick guess, I would add this to R's Makeconf for building
libR.so so that all possible symbols are resolved locally within that 
library. Then try linking again.


I have seen this on several different systems over the past few years
and I have written up _some_ of the details that I discovered on this topic.
Unfortunately,  I won't have time to dig them up until I get back to the office at the 
beginning of next week. Please remind me.

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> When R is embedded in python on my system (Solaris 8), calls to the c
> functions 'regcomp' and 'regexec' are being resolved to the c-library,
> rather than the functions compiled from regex.c.  This leads to segfaults
> because the c-library functions have quite different semantics.
> 
> Is there any way to get around this, other than renaming the offending
> functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
> perhaps there is another argument which says 'check inside this library for
> symbols before looking elsewhere'?
> 
> Thanks,
> 
> -Greg
> 
> ----------------- obligatory version information
> 
> R 1.4.1, 1.5.0,
> gcc 2.95.2, 3.0.3,
> python 2.1.1, 2.1.3
> SunOs 5.8, sparc
> 
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-andrews.ac.uk  Thu May  9 12:57:56 2002
From: scs10@st-andrews.ac.uk (scs10@st-andrews.ac.uk)
Date: Thu, 9 May 2002 13:57:56 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091157.NAA22633@pubhealth.ku.dk>

I'm having a problem with nls:

it iterates the correct number of times according to nls.control, but
mis-reports how many iterations have occured!

It converges on the correct parameter values, but doesn't stop and report
them until it's done all its iterations. Then it reports as an error that
it's stopped becaue it's done all its iterations.

Not sure what's going on....

Sophie


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 13:29:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 14:29:27 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091229.OAA22729@pubhealth.ku.dk>

On Thu, 9 May 2002 scs10@st-andrews.ac.uk wrote:

> I'm having a problem with nls:
>
> it iterates the correct number of times according to nls.control, but
> mis-reports how many iterations have occured!
>
> It converges on the correct parameter values, but doesn't stop and report
> them until it's done all its iterations. Then it reports as an error that
> it's stopped becaue it's done all its iterations.
>
> Not sure what's going on....

But I suspect you have more idea than we do.  Please read the section on
BUGS in the FAQ and send us a reproducible example.

(The iteration count is a *limit*, so sounds as if nls is not converging
if it does that number of iterations.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-and.ac.uk  Thu May  9 14:46:20 2002
From: scs10@st-and.ac.uk (scs10@st-and.ac.uk)
Date: Thu, 9 May 2002 15:46:20 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091346.PAA22891@pubhealth.ku.dk>

Full_Name: Sophie Smout
Version: 1.5.0
OS: windows 2000, pc
Submission from: (NULL) (138.251.190.17)


I'm finding that nls iterates to the end of its iteration setting and does not
jump out to report convergence even when it has clearly converged. It is also
mis-reporting the number of iterations completed. These may not be
unconnected...

This is an example:

[note - details of my computer, version etc are at the end of this message]

##### some 'data'


> x
 [1]  1  2  3  4  5  6  7  8  9 10

> y
 [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
 [8] 8.6486486 8.9010989 9.0909091

### call to nls

> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

### nls spits out

1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066689e-07 :  0.9999465 2.0000191 0.0999903 
3.651161e-15 :  1.0 2.0 0.1 
1.518557e-29 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
        number of iterations exceeded maximum of 5.27058e-308
> 
### ??? the converged parameter values are correct
### but nls has not reported convergence. Instead it's just gone on iterating,
### but not 5.27058e-308 times, which would in any case be tricky...



### try another simple example
### generate some data 



> x<-c(1:10)
> y<-3*x^2+1
> y
 [1]   4  13  28  49  76 109 148 193 244 301
> x
 [1]  1  2  3  4  5  6  7  8  9 10

### call to nls


> nls(y~a*x^b+c,start=list(a=1,b=1,c=1))

Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
        number of iterations exceeded maximum of 5.27058e-308

### another call to nls with more details requested

> nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
210232 :  1 1 1 
209552.9 :  0.3814959 1.4296089 1.7349535 
191724.4 :  0.2824096 1.9134931 1.9513585 
165276.9 :  0.4484658 1.9827257 1.8983138 
125378.7 :  0.7671348 1.9977192 1.7865044 
70298.31 :  1.325342 1.999960 1.589895 
17571.14 :  2.162671 2.000005 1.294948 
4.457052e-06 :  3.0000000 1.9999979 0.9999999 
2.200966e-17 :  3 2 1 
6.125505e-27 :  3 2 1 
6.12235e-27 :  3 2 1 
Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
: 
        number of iterations exceeded maximum of 5.27058e-308



#### same problem!!
##############################################

here is what I get when I type 'version'
to get details of computer etc.



platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R   
###############################################

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 14:47:03 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 09:47:03 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDA7DD7.E8DE7292@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> I have some questions about S4 style methods and generics.
> 
> First of all, is there any way of using default values for arguments
> in the generics/methods? My own experiments show that such arguments
> are always ignored.

Yes there is and no they are not.

But there are a couple of points to keep in mind.

The definition of method dispatch is that the _body_ of the selected
method is evaluated, without rematching arguments.  That means that it's
the default values in the (generic) function definition that will be
found in the context of the call.

An example:

R> bar <- function(x, y = 0)x+y
R> setGeneric("bar")
R> bar
function (x, y = 0) 
standardGeneric("bar")
<environment: 0x8622a18>
R> setMethod("bar", "character", function(x, y) paste(x,y))
[1] "bar"
R> bar(1,2)
[1] 3
R> bar(99)
[1] 99
R> bar("test")
[1] "test 0"

OTOH, the default expressions for the arguments in the method are
available in the method object.  You can extract them by getting the
method and retrieving, for example, def$y.  It seems a sufficiently
asked-for item that we'll provide a tool for it.

Maybe
  evaluateMethodDefault("y")
??  The point is to allow access but not burden the standard method
dispatch with re-matching arguments.

> The green book seems to be silent on this
> matter.
> 
> The second question is about using a non-trivial function body for
> generics. Page 351 of the green book gives an example of this and the
> documentation for setGeneric seems to suggest I should be able to do
> this at least by using myDispatch=TRUE. However, the current
> implementation seems to set the body of the generic definition to a
> call to standardGeneric all the time. Is this a bug or a modification
> of the green book description?

It's a bug.  Having said that, though, nonstandard generic functions are
slightly deprecated.  There are some potential efficiency enhancements
for dispatch that might be introduced but that would likely depend on
the function being a standard generic.

Also, experience is that people get a little confused and sometimes
provide a definition of the generic that doesn't call
standardGeneric("foo") and so does not give them the method dispatch
they expected.

But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
you're willing to be a bit klunky.  You define the generic and then
replace the body, being careful to preserve the function's environment.

Another example:

R> foo <- function(x) x
R> setGeneric("foo")
[1] "foo"
R> body(foo, envir = environment(foo)) <- 
+ quote({cat("Here we go!\n"); standardGeneric("foo")})
R> setMethod("foo", "numeric", function(x)sum(x))
[1] "foo"
R> foo(1:10)
Here we go!
[1] 55
R> foo("test")
Here we go!
[1] "test"

> 
> Thanks,
> 
> Saikat
> --
> Department of Statistics                       Email: saikat@stat.wisc.edu
> University of Wisconsin - Madison              Phone: (608) 263 5948
> 1210 West Dayton Street                        Fax:   (608) 262 0032
> Madison, WI 53706-1685
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 15:04:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 16:04:35 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091404.QAA22941@pubhealth.ku.dk>

The iteration count is being reported incorrectly as a real not an
integer, and I've fixed that for 1.5.1.

I can't reproduce your first example, but I suspect the numbers have
lost digits.  It looks as if the model you are fitting is an exact fit (to
machine accuracy).  nls() cannot fit exact fits: rounding error gets in
the way.

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:04:24 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:04:24 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
References: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <6ry9etto2f.fsf@franz.stat.wisc.edu>

Your results are not reproducible

> library(nls)
> x = 1:10
> y = c(0.9090909, 2.8571429, 4.7368421, 6.1538462, 7.1428571, 7.8260870, 8.3050847, 8.6486486, 8.9010989, 9.0909091)
> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066695e-07 :  0.9999465 2.0000191 0.0999903 
1.421765e-14 :  1.0 2.0 0.1 
1.056486e-14 :  1.0 2.0 0.1 
Nonlinear regression model
  model:  y ~ a * x^m/(1 + b * x^m) 
   data:  parent.frame 
  a   m   b 
1.0 2.0 0.1 
 residual sum-of-squares:  1.056486e-14 

You are encountering a well-known anomaly which occurs only in
artificial examples with a zero residual sum of squares.  The
statistical model to be fit with nls is y = f(x, theta) + eps
but your data are y = f(x, theta)

If there is any noise in the data, such as created from my copying and
pasting above, nls performs correctly.


scs10@st-and.ac.uk writes:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
> 
> 
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
> 
> This is an example:
> 
> [note - details of my computer, version etc are at the end of this message]
> 
> ##### some 'data'
> 
> 
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
> 
> ### call to nls
> 
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
> 
> ### nls spits out
> 
> 1.474151 :  1.10 2.10 0.11 
> 0.01060234 :  1.0092752 1.9893808 0.1012907 
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903 
> 3.651161e-15 :  1.0 2.0 0.1 
> 1.518557e-29 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
>         number of iterations exceeded maximum of 5.27058e-308
> > 
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
> 
> 
> 
> ### try another simple example
> ### generate some data 
> 
> 
> 
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> ### call to nls
> 
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
> 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> ### another call to nls with more details requested
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1 
> 209552.9 :  0.3814959 1.4296089 1.7349535 
> 191724.4 :  0.2824096 1.9134931 1.9513585 
> 165276.9 :  0.4484658 1.9827257 1.8983138 
> 125378.7 :  0.7671348 1.9977192 1.7865044 
> 70298.31 :  1.325342 1.999960 1.589895 
> 17571.14 :  2.162671 2.000005 1.294948 
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999 
> 2.200966e-17 :  3 2 1 
> 6.125505e-27 :  3 2 1 
> 6.12235e-27 :  3 2 1 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
> : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> 
> 
> #### same problem!!
> ##############################################
> 
> here is what I get when I type 'version'
> to get details of computer etc.
> 
> 
> 
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    5.0            
> year     2002           
> month    04             
> day      29             
> language R   
> ###############################################
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu May  9 15:17:39 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 9 May 2002 10:17:39 -0400 (EDT)
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>


  OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
documentation??):

  nls() uses convergence criteria that don't work well for artificial data
where the fit is perfect (but work reasonably well for "real" data -- it's
a reasonable tradeoff)
  There may still be a "bug" in nls() in terms of what it actually reports
(it should still report what it is doing correctly, even in a pathological
case).
  Try

ys <- y+rnorm(10,sd=0.001)
nls(ys~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

See:
http://maths.newcastle.edu.au/~rking/R/devel/00b/0102.html
(and following thread)
http://maths.newcastle.edu.au/~rking/R/help/00b/2547.html
(one-paragraph comment at the end)

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:49 2002
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 9 May 2002 16:32:49 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091432.QAA23022@pubhealth.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:00 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:32:00 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
Message-ID: <6rvg9xs87z.fsf@franz.stat.wisc.edu>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May  9 17:33:43 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 9 May 2002 12:33:43 -0400
Subject: [Rd] Fixed: embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>

Hi Duncan

Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
tried that and it didn't work because I'm using gcc instead of Sun's
compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
rather than '-Bsymbolic'.

Once I figured that out, changing 
	LIBR_LDFLAGS = -shared
to
	LIBR_LDFLAGS = -symbolic -shared
in Makeconf resolves the problem, albeit generating a long list of undefined
reference warnings during the link.

-Greg


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Wednesday, May 08, 2002 7:15 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> Subject: Re: embedded R resolving wrong symbols
> 
> 
> Hi Greg.
>   
>  Yes, there are some ways to arrange for tight/eager binding
> rather than dynamically loading libraries. They do depend on
> the linker being used and unfortunately precisely how the
> libraries containing the symbols are being "included".
> 
> One GNU linker option that is of relevance here is -Bsymbolic
> which is documented as
>  "When creating a shared library, bind references to global symbols
>  to the definition within the shared library, if any.  ....."
> 
> As a quick guess, I would add this to R's Makeconf for building
> libR.so so that all possible symbols are resolved locally within that 
> library. Then try linking again.
> 
> 
> I have seen this on several different systems over the past few years
> and I have written up _some_ of the details that I discovered 
> on this topic.
> Unfortunately,  I won't have time to dig them up until I get 
> back to the office at the 
> beginning of next week. Please remind me.
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > When R is embedded in python on my system (Solaris 8), 
> calls to the c
> > functions 'regcomp' and 'regexec' are being resolved to the 
> c-library,
> > rather than the functions compiled from regex.c.  This 
> leads to segfaults
> > because the c-library functions have quite different semantics.
> > 
> > Is there any way to get around this, other than renaming 
> the offending
> > functions?  E.G., would it be possible to use the '-wrap' 
> argument to ld, or
> > perhaps there is another argument which says 'check inside 
> this library for
> > symbols before looking elsewhere'?
> > 
> > Thanks,
> > 
> > -Greg
> > 
> > ----------------- obligatory version information
> > 
> > R 1.4.1, 1.5.0,
> > gcc 2.95.2, 3.0.3,
> > python 2.1.1, 2.1.3
> > SunOs 5.8, sparc
> > 
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ebura@gwu.edu  Thu May  9 17:47:01 2002
From: ebura@gwu.edu (ebura@gwu.edu)
Date: Thu, 9 May 2002 18:47:01 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091647.SAA23384@pubhealth.ku.dk>

I downloaded the latest version of R (1.5.0) and issued a read.table() command 
that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
drive after I downloaded R 1.5.0.

Here's the command and the error message I get under 1.5.0:

> 
golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
uote="",header=T,row.names=NULL)
Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
:
        line 6808 did not have 79 elements

Any help will be appreciated!

Thanks,
Efstathia



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:47:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 17:47:50 +0100 (BST)
Subject: [Rd] Fixed: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>
Message-ID: <Pine.LNX.4.31.0205091745580.2166-100000@gannet.stats>

Coincidentally, the regex symbols are now remapped in R-devel.  This was
to allow the use of PCRE (which also defines them), so that may merely
have made the problem worse on machines with PCRE installed.

Maybe one day I'll summon the energy to use PCRE's native interface
instead.

On Thu, 9 May 2002, Warnes, Gregory R wrote:

> Hi Duncan
>
> Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
> tried that and it didn't work because I'm using gcc instead of Sun's
> compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
> rather than '-Bsymbolic'.
>
> Once I figured that out, changing
> 	LIBR_LDFLAGS = -shared
> to
> 	LIBR_LDFLAGS = -symbolic -shared
> in Makeconf resolves the problem, albeit generating a long list of undefined
> reference warnings during the link.
>
> -Greg
>
>
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Wednesday, May 08, 2002 7:15 PM
> > To: Warnes, Gregory R
> > Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> > Subject: Re: embedded R resolving wrong symbols
> >
> >
> > Hi Greg.
> >
> >  Yes, there are some ways to arrange for tight/eager binding
> > rather than dynamically loading libraries. They do depend on
> > the linker being used and unfortunately precisely how the
> > libraries containing the symbols are being "included".
> >
> > One GNU linker option that is of relevance here is -Bsymbolic
> > which is documented as
> >  "When creating a shared library, bind references to global symbols
> >  to the definition within the shared library, if any.  ....."
> >
> > As a quick guess, I would add this to R's Makeconf for building
> > libR.so so that all possible symbols are resolved locally within that
> > library. Then try linking again.
> >
> >
> > I have seen this on several different systems over the past few years
> > and I have written up _some_ of the details that I discovered
> > on this topic.
> > Unfortunately,  I won't have time to dig them up until I get
> > back to the office at the
> > beginning of next week. Please remind me.
> >
> >  D.
> >
> > Warnes, Gregory R wrote:
> > >
> > > Hi All,
> > >
> > > When R is embedded in python on my system (Solaris 8),
> > calls to the c
> > > functions 'regcomp' and 'regexec' are being resolved to the
> > c-library,
> > > rather than the functions compiled from regex.c.  This
> > leads to segfaults
> > > because the c-library functions have quite different semantics.
> > >
> > > Is there any way to get around this, other than renaming
> > the offending
> > > functions?  E.G., would it be possible to use the '-wrap'
> > argument to ld, or
> > > perhaps there is another argument which says 'check inside
> > this library for
> > > symbols before looking elsewhere'?
> > >
> > > Thanks,
> > >
> > > -Greg
> > >
> > > ----------------- obligatory version information
> > >
> > > R 1.4.1, 1.5.0,
> > > gcc 2.95.2, 3.0.3,
> > > python 2.1.1, 2.1.3
> > > SunOs 5.8, sparc
> > >
> > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is
> > confidential and may be privileged. It is intended for the
> > addressee(s) only. Access to this E-mail by anyone else is
> > unauthorized. If you are not an addressee, any disclosure or
> > copying of the contents of this E-mail or any action taken
> > (or not taken) in reliance on it is unauthorized and may be
> > unlawful. If you are not an addressee, please inform the
> > sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:53:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 18:53:22 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091653.SAA23417@pubhealth.ku.dk>

Note that read.table changed in 1.4.0: see the NEWS file and its help
page.

Here's my guess: line 6808 contains a comment character #.

There is a section on BUGS in the FAQ: please read it!

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> drive after I downloaded R 1.5.0.
>
> Here's the command and the error message I get under 1.5.0:
>
> >
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> :
>         line 6808 did not have 79 elements
>
> Any help will be appreciated!
>
> Thanks,
> Efstathia
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu May  9 18:10:39 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 09 May 2002 12:10:39 -0500
Subject: [Rd] Questions about S4 style methods and generics
In-Reply-To: <3CDA7DD7.E8DE7292@research.bell-labs.com>
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com>
Message-ID: <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>

>>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:

  John> Saikat DebRoy wrote:
  >> 
  >> I have some questions about S4 style methods and generics.
  >> 
  >> First of all, is there any way of using default values for arguments
  >> in the generics/methods? My own experiments show that such arguments
  >> are always ignored.

  John> Yes there is and no they are not.

  John> But there are a couple of points to keep in mind.

  John> The definition of method dispatch is that the _body_ of the selected
  John> method is evaluated, without rematching arguments.  That means that it's
  John> the default values in the (generic) function definition that will be
  John> found in the context of the call.

I was in a situation where there is no default method.

> setGeneric("foo", function(x, y=0) standardGeneric("foo"))
[1] "foo"
> setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
[1] "foo"
> foo(1, 2)
[1] 3
> foo(1)
Error in foo(1) : No direct or inherited method for function "foo" for this call

So are the default values are substituted in the function call after the
method signature is matched? I tried a few other variations. In all
cases it ended up calling the default method if any or gave the same
error if there was no default method. I then moved to three arguments
and got some surprising (to me) results.

R> setGeneric("foo", function(x=1, y=2,z=3) standardGeneric("foo"))
[1] "foo"
R> setMethod("foo", signature(x="ANY", y="ANY",z="ANY"), function(x, y,z) cat("in default method\n"))
[1] "foo"
R> setMethod("foo", signature(x="numeric", y="numeric",z="numeric"), function(x, y,z) cat("in other method\n"))
[1] "foo"
R> foo(5,6,7)
in other method
R> foo(5,6)
Error in foo(1, 2) : No matching method for function "NA" (argument "z", with class missing)
R> foo(5)
in default method
R> getMethods("foo")
x = "ANY", y = "ANY", z = "ANY":
function (x, y, z) 
cat("in default method\n")

x = "numeric", y = "numeric", z = "numeric":
function (x, y, z) 
cat("in other method\n")

x = "numeric", y = "numeric", z = "ANY":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")

x = "numeric", y = "missing":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")


  John> An example:

  John> R> bar <- function(x, y = 0)x+y
  John> R> setGeneric("bar")
  John> R> bar
  John> function (x, y = 0) 
  John> standardGeneric("bar")
  John> <environment: 0x8622a18>
  John> R> setMethod("bar", "character", function(x, y) paste(x,y))
  John> [1] "bar"
  John> R> bar(1,2)
  John> [1] 3
  John> R> bar(99)
  John> [1] 99
  John> R> bar("test")
  John> [1] "test 0"

  John> OTOH, the default expressions for the arguments in the method are
  John> available in the method object.  You can extract them by getting the
  John> method and retrieving, for example, def$y.  It seems a sufficiently
  John> asked-for item that we'll provide a tool for it.

  John> Maybe
  John>   evaluateMethodDefault("y")
  John> ??  The point is to allow access but not burden the standard method
  John> dispatch with re-matching arguments.

  >> The green book seems to be silent on this
  >> matter.
  >> 
  >> The second question is about using a non-trivial function body for
  >> generics. Page 351 of the green book gives an example of this and the
  >> documentation for setGeneric seems to suggest I should be able to do
  >> this at least by using myDispatch=TRUE. However, the current
  >> implementation seems to set the body of the generic definition to a
  >> call to standardGeneric all the time. Is this a bug or a modification
  >> of the green book description?

  John> It's a bug.  Having said that, though, nonstandard generic functions are
  John> slightly deprecated.  There are some potential efficiency enhancements
  John> for dispatch that might be introduced but that would likely depend on
  John> the function being a standard generic.

  John> Also, experience is that people get a little confused and sometimes
  John> provide a definition of the generic that doesn't call
  John> standardGeneric("foo") and so does not give them the method dispatch
  John> they expected.

  John> But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
  John> you're willing to be a bit klunky.  You define the generic and then
  John> replace the body, being careful to preserve the function's environment.

  John> Another example:

  John> R> foo <- function(x) x
  John> R> setGeneric("foo")
  John> [1] "foo"
  John> R> body(foo, envir = environment(foo)) <- 
  John> + quote({cat("Here we go!\n"); standardGeneric("foo")})
  John> R> setMethod("foo", "numeric", function(x)sum(x))
  John> [1] "foo"
  John> R> foo(1:10)
  John> Here we go!
  John> [1] 55
  John> R> foo("test")
  John> Here we go!
  John> [1] "test"

  >> 
  >> Thanks,
  >> 
  >> Saikat
  >> --
  >> Department of Statistics                       Email: saikat@stat.wisc.edu
  >> University of Wisconsin - Madison              Phone: (608) 263 5948
  >> 1210 West Dayton Street                        Fax:   (608) 262 0032
  >> Madison, WI 53706-1685
  >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
  >> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
  >> Send "info", "help", or "[un]subscribe"
  >> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 20:26:02 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 15:26:02 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com> <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDACD4A.1B3DDC77@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> >>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:
> 
>   John> Saikat DebRoy wrote:
>   >>
>   >> I have some questions about S4 style methods and generics.
>   >>
>   >> First of all, is there any way of using default values for arguments
>   >> in the generics/methods? My own experiments show that such arguments
>   >> are always ignored.
> 
>   John> Yes there is and no they are not.
> 
>   John> But there are a couple of points to keep in mind.
> 
>   John> The definition of method dispatch is that the _body_ of the selected
>   John> method is evaluated, without rematching arguments.  That means that it's
>   John> the default values in the (generic) function definition that will be
>   John> found in the context of the call.
> 
> I was in a situation where there is no default method.
> 
> > setGeneric("foo", function(x, y=0) standardGeneric("foo"))
> [1] "foo"
> > setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
> [1] "foo"
> > foo(1, 2)
> [1] 3
> > foo(1)
> Error in foo(1) : No direct or inherited method for function "foo" for this call
> 
> So are the default values are substituted in the function call after the
> method signature is matched? 

Hmmm, well "substituted" may not be the best term to use.

What happens here is pretty much determined by the API, not R-specific. 
Your question about defaults has come up before; should be in a
to-be-written FAQ.

Basically everything is standard S (R or S-Plus) up to the point that
standardGeneric is called.  With an ordinary generic function, arguments
are matched but not evaluated, because of lazy evaluation.

Now the dispatch code examines as many arguments as are involved in
existing signatures (2 in your example).  The class for each argument
inserted into the current signature for dispatch is:
  - "missing" if the corresponding argument is missing from the call;
  - the class of the evaluated actual argument otherwise.
Because of the first step, default expressions are not evaluated during
method selection; they obey the standard S rules of lazy evaluation, as
do arguments not needed for the signature.

(Not relevant to the question, but the dispatch is done first in C; if
there is no method matching the signature exactly, then S language code
is used to select a method by inheritance, and the selected method is
cached under the current signature.)

Your later example seems to be a bug of some sort, but I'll examine it
more closely.  Thanks.  (Dispatch on 3+ arguments probably hasn't had
much exercise!)

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu May  9 21:29:16 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 9 May 2002 22:29:16 +0200 (MET DST)
Subject: [Rd] rbind.data.frame converts logical to factor (PR#1536)
Message-ID: <200205092029.WAA23882@pubhealth.ku.dk>


> df<-data.frame(a=1:10)
> df$b<-df$a<5
> is.factor(df$b)
[1] FALSE
> ddf<-rbind(df,df)
> is.factor(ddf$b)
[1] TRUE


platform i386-pc-linux-gnu
arch     i386
os       linux-gnu
system   i386, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri May 10 01:53:36 2002
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 10 May 2002 08:53:36 +0800 (GMT-8)
Subject: [Rd] read.table (PR#1535)
In-Reply-To: <200205091647.SAA23384@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0205100850290.27456-100000@sf3.comp.nus.edu.sg>

Hi,
I don't think there is anything wrong with R in this case, it is the
file. I had to do a bit of editing to read those mit files into R. The
problem is that the tabs are not quite right. I fixed it by reading it
into Gnumeric and rewriting. I can send you some R dumps of the files if
you like.

Nicholas 

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command 
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
> drive after I downloaded R 1.5.0.
> 
> Here's the command and the error message I get under 1.5.0:
> 
> > 
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
> :
>         line 6808 did not have 79 elements
> 
> Any help will be appreciated!
> 
> Thanks,
> Efstathia
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Drew.Tyre@csiro.au  Fri May 10 06:01:00 2002
From: Drew.Tyre@csiro.au (Drew.Tyre@csiro.au)
Date: Fri, 10 May 2002 07:01:00 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205100501.HAA24965@pubhealth.ku.dk>

Hi,

I have now created the plot under 1.5.0, and the same problem reoccurs. I
have found a simpler code that produces the problem on my computer at least:

map.springs <- function(x, ...){
	plot(x$easting,x$northing,type="n",bty="n",
		axes=FALSE,xlab="",ylab="",...)
	filled <- x$occupied == 1
	points(x$easting[filled],x$northing[filled],
		pch=19,cex=log10(x$area[filled]))
	points(x$easting[!filled],x$northing[!filled],
		pch=21,cex=log10(x$area[!filled]))
	plot.limits <- par(c("xaxp","yaxp"))
	segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
	plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
	
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c(
"100 m"))
}

a.spring <-
data.frame(easting=runif(20)*1000,northing=runif(20)*1000,occupied=rbinom(20
,1,0.5),area=runif(20)*10000)

map.springs(a.spring)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])



Drew Tyre
CSIRO Marine Research Drew.Tyre@csiro.au
PO Box 120		 ph: +61 (07) 3826 7263
Cleveland QLD 4163 fax:+61 (07) 3826 7222
Australia	http://www.marine.csiro.au



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 10 07:09:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 May 2002 08:09:52 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205100609.IAA25122@pubhealth.ku.dk>

This was confirmed as a comment character in the file, a new feature in
1.4.0.

On Fri, 10 May 2002, Nicholas Lewin-Koh wrote:

> Hi,
> I don't think there is anything wrong with R in this case, it is the
> file. I had to do a bit of editing to read those mit files into R. The
> problem is that the tabs are not quite right. I fixed it by reading it
> into Gnumeric and rewriting. I can send you some R dumps of the files if
> you like.
>
> Nicholas
>
> On Thu, 9 May 2002 ebura@gwu.edu wrote:
>
> > I downloaded the latest version of R (1.5.0) and issued a read.table() command
> > that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> > drive after I downloaded R 1.5.0.
> >
> > Here's the command and the error message I get under 1.5.0:
> >
> > >
> > golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> > uote="",header=T,row.names=NULL)
> > Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> > :
> >         line 6808 did not have 79 elements
> >
> > Any help will be appreciated!
> >
> > Thanks,
> > Efstathia
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 10 10:35:03 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 10 May 2002 11:35:03 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200205100935.LAA26278@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> I've already fixed the bugs, but as with the last one, this is
    MM> not critical enough to allow breaking current R-devel's code
    MM> freeze.  I hope I will have corrected it for 1.5.1..

yes, done: the fix has been in R-patched for about 2 days now..

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Sat May 11 02:13:13 2002
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Sat, 11 May 2002 03:13:13 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110113.DAA29237@pubhealth.ku.dk>

I don't seem to be able to initialize a vector of NAs. I hope this is a
bug and not a new feature (I realize I have not paid much attention to a
lot of recent discussion about NA):

platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 
> vector(NA, 3)
Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> matrix(NA,2,2)
     [,1] [,2]
[1,]   NA   NA
[2,]   NA   NA

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat May 11 07:03:40 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 10 May 2002 23:03:40 -0700
Subject: [Rd] Rmpi
Message-ID: <D72E35A2-64A4-11D6-BE69-000393860F3C@stat.ucla.edu>

Compiled and installed this on OS X, using lam-6.5.5, but the usual 
glitch:

[cabledoc68:~/Desktop/Rmpi/src] deleeuw% gcc -bundle -bundle_loader 
/usr/local/lib/R/bin/R.bin -L/sw/lib -o Rmpi.so Rmpi.o conversion.o 
internal.o -L/usr/local/lam-6.5.5/lib -lmpi -llam
/usr/bin/ld: multiple definitions of symbol _do_args
/usr/local/lib/R/bin/R.bin definition of _do_args
/usr/local/lam-6.5.5/lib/liblam.a(do_args.o) definition of _do_args in 
section (__TEXT,__text)

By linking Rmpi.so manually with the -m flag we circumvent this.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 07:28:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 08:28:56 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110628.IAA29669@pubhealth.ku.dk>

On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:

> I don't seem to be able to initialize a vector of NAs. I hope this is a
> bug and not a new feature (I realize I have not paid much attention to a
> lot of recent discussion about NA):

It's an incorrect use!

>From the help page:

    mode: A character string giving an atomic mode, or `"any"'.

I think you meant rep(NA, 3).


>
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> > vector(NA, 3)
> Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> > matrix(NA,2,2)
>      [,1] [,2]
> [1,]   NA   NA
> [2,]   NA   NA

> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 10:51:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 10:51:02 +0100 (BST)
Subject: [Rd] vector(NA, 3) (PR#1541)
In-Reply-To: <200205110628.IAA29669@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205111045550.26771-100000@gannet.stats>

On Sat, 11 May 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:
>
> > I don't seem to be able to initialize a vector of NAs. I hope this is a
> > bug and not a new feature (I realize I have not paid much attention to a
> > lot of recent discussion about NA):
>
> It's an incorrect use!
>
> From the help page:
>
>     mode: A character string giving an atomic mode, or `"any"'.
>
> I think you meant rep(NA, 3).

To amplify that, rep(NA, 3) gives a vector of *logical* NAs, just as
matrix(NA, 2, 2) gives a logical matrix.   There are five different
missing values in R, and `NA' happens to be mapped to the logical one
(unless coerced, implicitly or explicitly).

People normally want numerical missing values, for which use
rep(as.numeric(NA), 3).  Replace `numeric' by `integer', `complex' or
`character' for the other possibilities.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Sun May 12 06:24:23 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Sun, 12 May 2002 07:24:23 +0200 (MET DST)
Subject: [Rd] {round,trunc}.POSIXt and daylight savings time (PR#1543)
Message-ID: <200205120524.HAA01710@pubhealth.ku.dk>

I have found what looks like a small problem in trunc.POSIXt() 
involving the transition to/from standard time and daylight savings 
time. Assuming my assessment is correct, I have a potential solution 
to offer.

If a time in daylight savings time is rounded such that the rounded 
value is on the other side of the transition, the isdst element does 
not get changed accordingly. I have tested only the case of PDT 
rounded to PST in the US/Pacific time zone. I have tested it on 
(only) two different platforms, with slightly different results.  See 
below.

More specifically, in the US/Pacific time zone the transition from 
standard to daylight savings time takes place at 02:00 on the first 
Sunday in April, which in 2001 was 1 April.   My example is a vector 
x of two dates. x[1] is 2001-4-1 3:15, which is in daylight savings 
time. Rounded to the nearest midnight it is 2001-4-1 00:00, which is 
in standard time.

A potential solution is to insert
      x$isdst <- as.POSIXlt(format(x))$isdst
into trunc.POSIXt as its penultimate expression.

-Don

#### Solaris #####
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)    ## note that tmp[1] is labeled PDT, not PST
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### converting back to POSIXct reveals the problem more explicitly
>  print( as.POSIXct(tmp) )
[1] "2001-03-31 23:00:00 PST" "2001-05-03 00:00:00 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

>  Sys.getenv('TZ')
           TZ
"US/Pacific"

###### Darwin ######
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### gets NA instead
>  print( as.POSIXct(tmp) )
[1] NA               "2001-05-03 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform powerpc-apple-darwin5.5
arch     powerpc
os       darwin5.5
system   powerpc, darwin5.5
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon May 13 19:22:25 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Mon, 13 May 2002 20:22:25 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205131822.UAA13101@pubhealth.ku.dk>

Under R-1.5.0 on Solaris 2.6:

R> prettyNum(123456789, big.mark=",")
   [1] ",123,456,789"

and that bad behavior (leading comma) spills into formatC as well:

R> formatC(123456789, digits=0, format="f", big.mark=",")
   [1] ",123,456,789"

Looks to me like a bug in src/library/base/R/format.R, in function prettyNum:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})"),          # Original
                           P0("\\1",big.mark), revStr(B.[i.big])))

where we reverse the "before-the-decimal" string, then put a comma after each
set of 3 digits.  One solution is to make the first regexp check that it is not
followed by a word boundary, i.e. add "\\B" to the end of it:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})\\B"),       # DB's fix
                           P0("\\1",big.mark), revStr(B.[i.big])))

which seems to correct the problem:

R-with-fix> prettyNum(123456789, big.mark=",")
            [1] "123,456,789"
-- 
                              -- David Brahm (brahm@alum.mit.edu)


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From carne006@umn.edu  Mon May 13 21:25:46 2002
From: carne006@umn.edu (carne006@umn.edu)
Date: Mon, 13 May 2002 22:25:46 +0200 (MET DST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
Message-ID: <200205132025.WAA13461@pubhealth.ku.dk>

Full_Name: Edward Carney
Version: 1.5.0
OS: Win98
Submission from: (NULL) (160.94.222.161)


Bookmarks do not work in Table of Contents nor in Index in the
refman.pdf file for version 1.5.0.

Reading under Acrobat 4.05

Thanks,

EC

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue May 14 10:01:28 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 14 May 2002 11:01:28 +0200
Subject: [Rd] Quartz device for Darwin R (MacOS X)
Message-ID: <2D50434A-6719-11D6-AA2B-003065CC4CB8@mclink.it>

This announce is for Mac R developers mostly.

I have just updated the R-devel repository with a brand new quartz() 
device.
This will allow the Darwin build of R to display graphics without the 
need of X11.

The device is in its first release so it is needed more feedback as 
possible to let it become the true natural graphics device of Darwin R.


You should try to build R from the R-devel sources.

Please read the R-admin manual on how to build Darwin R for details, but 
two more things have to be done to let this version of R-devel to build 
under OSX.

The first is to add the "-framework Carbon" to the linker options.

Once R is built, your have to rename bin/help as something else 
otherwise R will not launch properly.

We are working for a better configuration process to avoid these last to 
steps.


To use the quartz device simply open it with quartz(). See the man page 
for the options ?quartz.

Looking forward for your comments,

							Stefano

p.s. one remark: the graphic window is not resizable and cannot be moved 
at the moment so don't send feedback on this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 10:13:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 11:13:08 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205140913.LAA16941@pubhealth.ku.dk>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> Under R-1.5.0 on Solaris 2.6:
    R> prettyNum(123456789, big.mark=",")
    DavidB>    [1] ",123,456,789"

    ....

    DavidB> Looks to me like a bug in
    DavidB> src/library/base/R/format.R, in function prettyNum:

definitely a bug that will be fixed in 1.5.1.
Thank you for the example and patch proposal!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.GRUM@CGIAR.ORG  Tue May 14 14:23:17 2002
From: M.GRUM@CGIAR.ORG (M.GRUM@CGIAR.ORG)
Date: Tue, 14 May 2002 15:23:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141323.PAA20671@pubhealth.ku.dk>

I'm resending this bug report with a new example.  As seen below,
cut.dendrogram gives an error message for some heights, but not for others
and with some datasets adn not others.  I can't see why.

Last time I unwittingly sent my message with HTML formatting.  This time I'm
travelling and using an e-mail system that I am unfamiliar with.  As far as
I can see, I am not using HTML.

Best wishes,
Mikkel

> library(cluster)
> data(flower)
> dfl1 <- daisy(flower, type = list(asymm = 3))
> hdfl1<-hclust(dfl1,method="average")
> plot(hdfl1)
> ddfl1<-as.dendrogram(hdfl1)
> cdfl1<-cut(ddfl1,h=0.5)
> cdfl1<-cut(ddfl1,h=0.4)
> cdfl1<-cut(ddfl1,h=0.31312)
> cdfl1<-cut(ddfl1,h=0.31311)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.2)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14179)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14178)
> cdfl1<-cut(ddfl1,h=0.1)
> ## but,
> dfl2 <- daisy(flower, type = list(asymm = c(1, 3), ordratio = 7))
> hdfl2<-hclust(dfl2,method="average")
> plot(hdfl2)
> ddfl2<-as.dendrogram(hdfl2)
> cdfl2<-cut(ddfl2,h=0.5)
> cdfl2<-cut(ddfl2,h=0.4)
> cdfl2<-cut(ddfl2,h=0.3)
> cdfl2<-cut(ddfl2,h=0.2)
> cdfl2<-cut(ddfl2,h=0.1)
>
--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows XP Professional (build 2600) Service Pack 0.0

Search Path:
 .GlobalEnv, package:mva, package:cluster, package:ctest, Autoloads,
package:base


-----Original Message-----
From: Martin Maechler
To: Grum, Mikkel
Cc: Martin Maechler
Sent: 10/05/02 12:28
Subject: Re: cut.dendrogram

Dear Mikkel,

Thank you for your report,
but
could you re-"compile" this message to make it (more) useful as
bug report?

1) Please turn *off* the HTML-ification that your e-mail
   software has used.  It can make messages in the R-bugs archive
   almost unusable (the same goes for attachments!)

2) Please use *complete* examples!  I.e. you can't use an object
   `x' that is only available to you.
   Try to use R datasets -- via data(<...>) -- or construct them
   explicitly. To do this, do  dput(yourdata) if yourdata is
   relatively small.
   Otherwise generate random data such as

   set.seed(532) # make it reproducible!
   y <- rnorm(100)
   mdat <- data.frame(x = 1:100, y = y, u = cut(y,3), v = y^2)

Thank you one more
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 15:11:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 16:11:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141411.QAA21267@pubhealth.ku.dk>

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:

    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    <...example deleted..>

yes, this time your message has been very useful;
thank you, Mikkel!

Indeed, there is a (at least one!) problem in the  "dendrogram"
class/methods, currently --- which might not be so astonishing,
given the following excerpt from its documentation :

 >> dendrogram                package:mva                R Documentation
 >> 
 >> General Tree Structures
 >> 
 >> Description:
 >> 
 >>      Class `"dendrogram"' provides general functions for handling
 >>      tree-like structures.  It is intended as a replacement for similar
 >>      functions in hierarchical clustering and classification/regression
 >>      trees, such that all of these can use the same engine for plotting
 >>      or cutting trees. Currently the code is in alpha stage and the API
 >>      may change at any point in time.

 >> .............

 >> Details:
 >> 
 >>      Warning: This documentation is preliminary.

Really, it has been on my todo list to look into this, and at least
provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
objects.
As you may have read above, we have not even settled about
several details. {suggestions are welcome!}

BTW, in your example, even the first cut() result couldn't be
plotted any more.

We will look into this.
Thanks for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.ox.ac.uk  Tue May 14 16:13:16 2002
From: david.firth@nuffield.ox.ac.uk (david.firth@nuffield.ox.ac.uk)
Date: Tue, 14 May 2002 17:13:16 +0200 (MET DST)
Subject: [Rd] R-admin docs, Installing packages (PR#1554)
Message-ID: <200205141513.RAA21776@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.5.0
OS: Mac OS X (Darwin)
Submission from: (NULL) (163.1.103.123)


In the R-admin document, at "Installing packages", it says:

  To install packages from source on Unix use

  R CMD INSTALL -l /path/to/library pkg1 pkg2 ...

  The part -l /path/to/library can be omitted, when the first library in R_LIBS
is   
  used if set, otherwise the main library R_HOME/library.

1.  Can I suggest re-wording this last sentence?  Replace "when" by "in which
case", and add "is used" at the end.  I puzzled for quite a while before I
understood what the present wording meant (and I hope I got it right!)

2.  I got confused also because although my .Renviron has
R_LIBS=/Users/david/Library/R
and that works when finding packages within an R session, when I use R CMD
install  without the -l /path/to/library part, packages still get installed in
R_HOME/library.  Am I right to conclude that .Renviron is not used by R CMD
install, and that R_LIBS has to be set by some other method before installing
packages to a private library in this way?  This could be clearer in the
documentation I think.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Tue May 14 18:44:52 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Tue, 14 May 2002 10:44:52 -0700 (PDT)
Subject: [Rd] R/S-Plus incompatibility in segments()
Message-ID: <20020514174452.54076.qmail@web13908.mail.yahoo.com>


There seems to be an incompatibility in the argument names of segments().

In Splus:

USAGE:

segments(x1, y1, x2, y2)

In R:

Usage:

segments(x0, y0, x1, y1,
         col = par("fg"), lty = par("lty"), lwd = par("lwd"), ...)

Any particular reason ? Should I report this as a bug ? (This is currently
messing up some nlme plot methods which uses lsegments() from lattice)

Deepayan



__________________________________________________

LAUNCH - Your Yahoo! Music Experience

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Tue May 14 19:02:12 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Tue, 14 May 2002 13:02:12 -0500
Subject: [Rd] changes to prepare for name space support
Message-ID: <20020514130212.C30020@nokomis.stat.umn.edu>

Two changes in the main development branch to prepare for name space
support:

	Functions in base now have .BaseNamespaceEnv as their
	environment instead of .GlobalEnv

	UseMethod dispatch now behaves like internal dispatch in
	searching for methods in the environment of the call to the
	generic rather than the definition environment of the generic.

The dispatch change should not be noticed at all but is needed to
obtain somewhat more sensible behavior once method definitions are
placed in name spaces.

The main effect of placing base in a name space is that redefinitions
of base functions in .GlobalEnv or loaded packages will not be seen
when when executing bodies of functions defined in base.  If your
intention is to redefine a function that is used by code in base you
need to explicitly assign the new definition into the base
environment.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

----- End forwarded message -----

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:30:51 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:30:51 +0200 (MET DST)
Subject: [Rd] lib.fixup, .GlobalEnv, and R1.5.0 (PR#1556)
Message-ID: <200205150630.IAA24619@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: 1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In R1.3.1, I used the following code inside a function to set a "path" attribute
to .GlobalEnv:

  env_ pos.to.env( 1)
  attr( env, 'path')_ .Path # .Path is a named char vector of length 1
  .Internal( lib.fixup( env, .GlobalEnv)) # adds the attribute

And this works fine. But in R1.5.0, the same code (executed e.g. within a call
to "local" from the command line) removes all the objects in .GlobalEnv (note,
though, that the 'path' attribute does get set OK). For various reasons, this
feature is crucial to me, so I can't actually use R1.5.0 without it!

Oddly, my code used to explicitly set a path attribute for newly-attached things
using this mechanism, and this has now been incorporated into R1.5.0 "library"
command. So I'm clearly not doing anything naughty here!

A suggestion: wouldn't it be easier if we could use

attr( env, <<whatever>>) # where env is an environment

and

attr( env, <<whatever>>)_ 45

instead of having to go via "lib.fixup"?

cheers
Mark


  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:40:01 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:40:01 +0200 (MET DST)
Subject: [Rd] wishlist: I miss Frame 0 (PR#1557)
Message-ID: <200205150640.IAA24742@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R 1.3.1 + 
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In the process of part-switching from S to R, one thing I find myself missing
greatly is S's Frame 0 feature. This is a very convenient place to put
session-level stuff, and to make temporary copies of things (e.g. system
functions) without overwriting the "real" objects lower down the search path.
The operation of Frame 0 is that it is searched during lookup before .GlobalEnv
and the rest of the search path, but it is NOT assigned to unless specified
explicitly in "assign". It seems to me that it would be simple to add this
feature in R. One particular area where it would be useful: I have a debugger
for S, which makes a modified copy of the debuggee function in frame 0. This
means that the original isn't modified. In the R version of the debugger, I have
to overwrite the original function, and there is a risk that I'll call
"save.image" or similar with the modified debug version being saved
inadvertently, losing the original copy.

Another thing I like to do with Frame 0, is to put session-level info in there
(general info for the debugger, information I use for project organization,
etc.). In R, I have to stuff all this into a list somewhere down the search
path, and I guess other people who need this facility have to create their own
equivalents. Having a shared Frame 0 at the top of the search path, would be
much nicer.

NB that I don't like S's Frame 1, and am happy to see the back of that one!

Any chance of getting Frame 0 back? I don't think it would disturb normal
operations unless people WANT to use it-- it's impossible of "accidentally"
putting things there.

cheers
Mark




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:54:53 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:54:53 +0200 (MET DST)
Subject: [Rd] language: bug or feature: vector-subscript of list (PR#1558)
Message-ID: <200205150654.IAA24894@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R1.3.1 & R1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


R doesn't like the use of subscripts with length > 1, to get into recursive
lists:

> listio_ list( a=list( b=9, c='hello'), d=1:5)
> listio[[ c( 1, 2)]]
Error: attempt to select more than one element
> 

S is more relaxed:

test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
test> listio[[ c(1,2)]]
[1] "hello"
test> 

The same goes for assignment into recursive lists.

I find this feature essential, so I eventually wrote the workarounds below. But
I'm sure these are slow and ungainly.

Could this feature not be added as a primitive?

cheers
Mark
assign( '[[', function( var, ...) {
  pg_ .Primitive( '[[')
  vv_ as.name( 'var')
  for( i in c(...))
    vv_ call( 'pg', vv, i)
  eval( vv)
})

assign( '[[<-', function( var, ..., value) {
  i_ c( ...)
  if( length( i)<2)
return( .Primitive( '[[<-')( var, i, value))

  pa_ .Primitive( '[[<-')
  pg_ .Primitive( '[[')
  vario_ as.name( 'var')
  for( ii in i[ -length(i)])
    vario_ call( 'pg', vario, ii)

#  print( vario)

  callio_ substitute( value, envir=parent.frame())
  for( ii in rev( i)) {
    callio_ call( 'pa', vario, ii, callio)
    if( length( vario)>1)
      vario_ vario[[ 2]]
  }
#  print( callio)
return( eval( callio))
})




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 08:08:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 09:08:31 +0200 (MET DST)
Subject: (PR#1558) [Rd] language: bug or feature: vector-subscript of
Message-ID: <200205150708.JAA25040@pubhealth.ku.dk>

On Wed, 15 May 2002 mark.bravington@csiro.au wrote:

> Full_Name: Mark Bravington
> Version: R1.3.1 & R1.5.0
> OS: Windows 2000
> Submission from: (NULL) (140.79.2.3)
>
>
> R doesn't like the use of subscripts with length > 1, to get into recursive
> lists:
>
> > listio_ list( a=list( b=9, c='hello'), d=1:5)
> > listio[[ c( 1, 2)]]
> Error: attempt to select more than one element
> >
>
> S is more relaxed:
>
> test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
> test> listio[[ c(1,2)]]
> [1] "hello"
> test>
>
> The same goes for assignment into recursive lists.
>
> I find this feature essential, so I eventually wrote the workarounds below. But
> I'm sure these are slow and ungainly.
>
> Could this feature not be added as a primitive?

[[ is already a primitive, and nowhere that I can see is it documented
that it allows an argument of length 2.  So it is neither a bug nor a
feature, but a difference from S.

If you submit a patch based on the current R-devel sources, we will add it
if it checks out.  Otherwise, as no one else has ever expressed a need of
this feature, it is very unlikely to get implemented.  R is not a clone of
S, and has the features it has because the workers had need of them.

Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
planned to deprecate `_' in R shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 15 10:54:47 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 15 May 2002 11:54:47 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205150954.LAA27417@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:
    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    MM> <...example deleted..>

    MM> yes, this time your message has been very useful;
    MM> thank you, Mikkel!

    MM> Indeed, there is a (at least one!) problem in the  "dendrogram"
    MM> class/methods, currently --- which might not be so astonishing,
    MM> given the following excerpt from its documentation :

    <......>

    MM> Really, it has been on my todo list to look into this, and at least
    MM> provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
    MM> Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
    MM> objects.

several of these will be in R-devel (to become 1.6 in fall)

    MM> As you may have read above, we have not even settled about
    MM> several details. {suggestions are welcome!}

    MM> BTW, in your example, even the first cut() result couldn't be
    MM> plotted any more.

{nonsense; cut() does not produce a dendrogram but a list
	   containing them!}

    MM> We will look into this.
done.

The fix (now in R-patched which will become 1.5.1) is very easy:

--- src/library/mva/R/dendrogram.R.~1~	13 Aug 2001 21:41:50
+++ src/library/mva/R/dendrogram.R	15 May 2002 09:47:50
@@ -136,7 +136,7 @@
 
 cut.dendrogram <- function(x, h, ...)
 {
-    LOWER <- NULL
+    LOWER <- list()
     X <- 1
 
--------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Minette3557n14@webinfo.fi  Thu May 16 09:46:46 2002
From: Minette3557n14@webinfo.fi (Minette3557n14@webinfo.fi)
Date: Wed, 15 May 2002 21:46:46 -1100
Subject: [Rd] Financial strategies
Message-ID: <000a84c11d7d$6183b4a0$1bd31cd8@lcokco>

------=_NextPart_000_00C7_71E13B5A.B1167A52
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: base64


PCEtLSBzYXZlZCBmcm9tIHVybD0oMDAyMilodHRwOi8vaW50ZXJuZXQuZS1t
YWlsIC0tPg0KPGh0bWw+DQo8Ym9keT4NCjxwIGFsaWduPSJjZW50ZXIiPjxi
Pjxmb250IHNpemU9IjYiIGNvbG9yPSIjRkYwMDAwIj5FWENMVVNJVkUgRlJF
RSBGSU5BTkNJQUwgTUFSS0VUIFJFUE9SVDwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PGZvbnQgc2l6ZT0iNSIgY29sb3I9IiMwMDAw
RkYiPkEgc21hbGwgaW52ZXN0bWVudCBjb3VsZCByZXR1cm4gMiB0byAzIHRp
bWVzIG9yIG1vcmUgb24geW91ciBtb25leTwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5OiBU
aW1lcyBOZXcgUm9tYW47IG1zby1mYXJlYXN0LWZvbnQtZmFtaWx5OiBUaW1l
cyBOZXcgUm9tYW47IG1zby1hbnNpLWxhbmd1YWdlOiBFTi1VUzsgbXNvLWZh
cmVhc3QtbGFuZ3VhZ2U6IEVOLVVTOyBtc28tYmlkaS1sYW5ndWFnZTogQVIt
U0EiPjxmb250IHNpemU9IjYiPjxhIGhyZWY9Imh0dHA6Ly84MS45LjguNC9U
cmFkaW5nRG9sbGFycy8iPkdPDQpIRVJFIFRPIExFQVJOIEhPVzwvYT48L2Zv
bnQ+PC9zcGFuPjwvYj48L3A+DQo8cCBhbGlnbj0iY2VudGVyIj48YSBocmVm
PSJodHRwOi8vODEuOS44LjQvTGlzdE9wdE91dC8iPjxiPjxmb250IHNpemU9
IjUiIGNvbG9yPSIjMDAwMDAwIj5MaXN0DQpvcCBPdXQ8L2ZvbnQ+PC9iPjwv
YT48L3A+DQoNCjwvYm9keT4NCg0KPC9odG1sPg0KDQoxNmwy
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 16:39:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 16:39:55 +0100 (BST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
In-Reply-To: <200205132025.WAA13461@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205151638260.12307-100000@gannet.stats>

I've traced this to something in the methods package, and am investiating
further.  Building excluding that package makes the links work, with it
they do not.  There are duplicate links, which may the cause.


On Mon, 13 May 2002 carne006@umn.edu wrote:

> Full_Name: Edward Carney
> Version: 1.5.0
> OS: Win98
> Submission from: (NULL) (160.94.222.161)
>
>
> Bookmarks do not work in Table of Contents nor in Index in the
> refman.pdf file for version 1.5.0.
>
> Reading under Acrobat 4.05
>
> Thanks,
>
> EC
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 03:29:03 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 04:29:03 +0200 (MET DST)
Subject: [Rd] (PR#1558)
Message-ID: <200205160229.EAA03603@pubhealth.ku.dk>

My reading of the R documentation is that the nature of the subscript i in
x[[i]] is not specified; the only obvious rule is that it should lead to to
a single element. Which is what I'm after: a way of extracting or changing
the 4th element of the 2nd element of a list. Incidentally, the operational
difficulty comes in general programming when I don't know in advance how
many levels down the list I'm going. Otherwise I could just grit my teeth &
type x[[ i[1] ]] [[ i[ 2] ]] [[ i[ 3] ]] instead of x[[ i]].

The S2000 documentation says this:

  A special case of the [[ construct is when x is recursive (e.g., a list)
and i is a list. The components of i should all have length 1 and be
character or numeric. The statement x[[i]] is equivalent to:

  x [[ i[[1]] ]] [[ i[[2]] ]]  ...  [[ i[[length(i)]] ]]

  For example, x[[list("b", 2, 4)]] will pick out the 4th component of the
2nd component of the b component of x.
  
In S2000, it turns out that this also works if "i" is a numeric or character
vector rather than a list, as in my example. This extension to non-lists is
useful and harmless but not essential, because one could always use
"as.list". In R, though, neither the list nor the vector version currently
exists.

#If you submit a patch based on the current R-devel sources, we will add it
#if it checks out.  Otherwise, as no one else has ever expressed a need of
#this feature, it is very unlikely to get implemented.  R is not a clone of
#S, and has the features it has because the workers had need of them.

Well, this worker has need of this feature, which is why I wrote those
workarounds! It does seem to me that, if a language allows one to use
recursive structures of arbitrary nestedness, then there should be a simple
mechanism for accessing and changing arbitrary elements of a recursive
structure.

For now, I will just submit my R code as a mini-library. My point about
having a .Primitive was one of speed-- my R code seems to work OK, but it
must slow things down. I doubt that I'm up to producing a C patch-- I use
Delphi not C, so this sounds a bit daunting. If anyone else would like to
pick up the challenge..?

#Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
#planned to deprecate `_' in R shortly.

As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
ambiguous "<-" goes onto the same pyre ;)

cheers

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 16 04:25:36 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 May 2002 20:25:36 -0700
Subject: [Rd] (PR#1558)
In-Reply-To: <200205160229.EAA03603@pubhealth.ku.dk>
References: <200205160229.EAA03603@pubhealth.ku.dk>
Message-ID: <87sn4svknj.fsf@jeeves.blindglobe.net>

>>>>> "mark" == Mark Bravington <Mark.Bravington@csiro.au> writes:


    mark> As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
    mark> ambiguous "<-" goes onto the same pyre ;)

I feel completely opposite.  And I'm not terribly happy about the idea
of using "=", either, having just been bit by the = vs. == classic user
slip up.  

I actually do like "<-", but then again, I'm using ESS...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 07:48:29 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 08:48:29 +0200 (MET DST)
Subject: [Rd] (PR#1556)
Message-ID: <200205160648.IAA04154@pubhealth.ku.dk>

lib.fixup

My previous post mentions a problem encountered when calling ".Internal(
lib.fixup..." in R1.5.0. I have since found a workaround. It's possible in
R1.5.0 to set attributes of search path environments directly, like so:

> env_ pos.to.env( 3)
> attr( env, 'any.attr')_ 'any.value'
> pos.to.env( 3)
<environment: package:tcltk>
attr(,"name")
[1] "package:tcltk"
attr(,"path")
[1] "C:/R/rw1050/library/tcltk"
attr(,"any.attr")
[1] "any.value"

In R1.3.1, it used to be necessary to use lib.fixup to achieve this. It's
still not possible to call

> attr( pos.to.env( 3), 'any.attr')_ 'any.value'

directly, but this doesn't matter. My (mis-typed) wish-lish-suggestion in
the last post, is therefore irrelevant, and personally I no longer need
lib.fixup. NB that it can still cause problems if it is used-- but as it's
undocumented, I don't suppose this will be a major issue.

Nevertheless, calls to ".Internal( lib.fixup..." are not things of beauty,
and I wonder whether the current usage in "library" is actually necessary?
The code currently reads

            loadenv <- new.env(hash = TRUE, parent = .GlobalEnv)
            <<...>>
                sys.source(codeFile, loadenv, keep.source = keep.source)
            <<...>>
            env <- attach(NULL, name = pkgname)
            on.exit(do.call("detach", list(name = pkgname)))
            attr(env, "path") <- file.path(which.lib.loc, package)
            .Internal(lib.fixup(loadenv, env))
            
but I seem to get satisfactory results with

      env_ attach( NULL, name = pkgname)
      on.exit(do.call("detach", list(name = pkgname)))            
      attr( env, "path") <- file.path(which.lib.loc, package)
      <<...>>
          sys.source(codeFile, env, keep.source = keep.source) # i.e.
straight into "env" not into "loadenv"
      <<...>>
      
which does away with the calls to "new.env" and "lib.fixup". As far as I can
see, the "parent=.GlobalEnv" argument to "new.env" doesn't have any effect
after "lib.fixup"; I'm not sure about the "hash=TRUE".

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu May 16 09:04:30 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 16 May 2002 10:04:30 +0200 (MET DST)
Subject: [Rd] Re: [R] NaN/NA and sprintf double format (PR#1561)
Message-ID: <200205160804.KAA05351@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 14 May 2002, Dirk Eddelbuettel wrote:
> 
> > With a (late prerelease of) 1.5.0 on Windows, using sprintf on NaN
> > yields garbage when the number of decimal is specified while it
> > works fine for NA:
> >
> > > sprintf("%.2f", NA)
> > [1] "0.00"
> 
> I get that on Linux too, but why is it fine?  See below.
> 
> > > sprintf("%.2f", NaN)
> > [1] "-1.#J"
> >
> > Not specifying the decimal precision lets both print garbage:
> >
> > > sprintf("%f", NaN)
> > [1] "-1.#IND00"
> > > sprintf("%f", NA)
> > [1] "-1.#QNAN0"
> >
> > Is this a bug or a feature?
> 
> Remember that NA is logical, so this is not correct usage.  Not that the
> correct usage works very much better ....
> 
> The C code says
> 
> /* Simple wrapper for C sprintf function: does very little checking to
>    see that the format conversion character and the argument are
>    compatible.  This is the user's responsibility!
> */
> 
> and I think that should be on the help page.  If it were, this is a
> feature.

Naturally it's a feature!  But I agree that an extra sentance or two on
the help page would be a good idea.  I suggest appending the following
as a new paragraph to the Value section:

As \code{sprintf} is simply a wrapper for the C function of the same
name, it is the user's responsibility to ensure that the objects passed
in \code{\dots} correspond to the format.  Otherwise the resulting
string may contain garbage.  For example, the typical R numeric object
is a float not an integer (see Examples, below).  Likewise, C does not
recognise special values like \code{NA}, so \code{sprintf("Our survey
said: %f", NA)} is not going to work as you might want.

I've cc'ed this to r-bugs.  Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 01:06:28 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 02:06:28 +0200 (MET DST)
Subject: [Rd] R-1.5.0 on NetBSD (PR#1565)
Message-ID: <200205170006.CAA12976@pubhealth.ku.dk>

NetBSD 1.5ZA on intel

There is a problem with the R-1.5.0 compile under NetBSD caused by a
non-standard zconf.h in NetBSD.  The configure script quite happily
accepts the installed zlib.h, but because the NetBSD zconf.h
substitutes the OF macro by an  __P macro (in zconf.h) the make fails
when trying to compile dounzip.c with many errors like:

In file included from dounzip.c:28:
unzip.h:114: parse error before `OF'

(unzip.h includes zlib.h which includes zconf.h)

So I guess the ideal is for the configure script to test this aspect
(the existence of the OF macro) while it is checking the zlib.h itself,
then fall back to the supplied zconf.h if the OF macro is not defined.

I'll try to construct a workaround, but I am not at all familiar with
the intricacies of the configure script, so I expect this will be much
more efficiently achieved by someone who is.

Certainly I can easily test any proposed solution.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 02:14:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 16 May 2002 21:14:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
Message-ID: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>

So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
version) into src/extra/pcre and compiling on Win32 but its dying during
the final link (undefined reference to 'pcre_free') is there some special
magic I'm missing or do I get to hunt this one down on my own?

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 05:59:55 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 06:59:55 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170459.GAA13479@pubhealth.ku.dk>

Firstly I omitted the following information from my original message:

R is now configured for i386--netbsdelf

  Source directory:          .
  Installation directory:    /usr/pkg
  C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     no


Secondly, a workaround patch is the following:

--- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
+++ src/main/unzip.h
@@ -49,6 +49,16 @@
 #include "zlib.h"
 #endif
 
+/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
+
+#ifndef OF /* function prototypes */
+#  ifdef STDC
+#    define OF(args)  args
+#  else
+#    define OF(args)  ()
+#  endif
+#endif
+
 #if defined(STRICTUNZIP) || defined(STRICTZIPUNZIP)
 /* like the STRICT of WIN32, we define a pointer that cannot be converted
     from (void*) without cast */


Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:14:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 May 2002 07:14:17 +0100 (BST)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>

On Thu, 16 May 2002, Byron Ellis wrote:

> So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> version) into src/extra/pcre and compiling on Win32 but its dying during
> the final link (undefined reference to 'pcre_free') is there some special
> magic I'm missing or do I get to hunt this one down on my own?

It's worked for me on three separate installations (one cross-compiling).
Please check that the files did get compiled and that pcre_free is
exported by libpcre.a.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:45:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 08:45:48 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170645.IAA13861@pubhealth.ku.dk>

On Fri, 17 May 2002 Ray.Brownrigg@mcs.vuw.ac.nz wrote:

> Firstly I omitted the following information from my original message:
>
> R is now configured for i386--netbsdelf
>
>   Source directory:          .
>   Installation directory:    /usr/pkg
>   C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
>
>   R profiling support:       yes
>   R as a shared library:     no
>
>
> Secondly, a workaround patch is the following:
>
> --- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
> +++ src/main/unzip.h
> @@ -49,6 +49,16 @@
>  #include "zlib.h"
>  #endif
>
> +/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
> +
> +#ifndef OF /* function prototypes */
> +#  ifdef STDC
> +#    define OF(args)  args
> +#  else
> +#    define OF(args)  ()
> +#  endif
> +#endif
> +

Thanks. That extract is taken directly from zconf.h in the official
version, so do I gather that NetNSD has gratuitously removed it?

R assumes ISO C, so we don't need the test for STDC.

This is surely a bug in NetBSD and not in R, so I hope you have also filed
a NetBSD bug report.  I've add the comment

/* workaround for NetBSD vandalism on zconf.h */

and that seems a reasonable description to me (and a lot less rude
that some comments about other OSes legitimate differences in the R
sources).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Fri May 17 13:59:04 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Fri, 17 May 2002 14:59:04 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as intended from version 1.5 (PR#1567)
Message-ID: <200205171259.OAA19894@pubhealth.ku.dk>

# replication code at end of mail

> # As from R 1.5 
> 
> identical(as.character(NA), "NA")
[1] FALSE
> 
> # there is no longer a fundamental difference between "NA" 
> # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> # however, though "NA" is not given as na.strings we have
> 
> type.convert(c("NA", "1", NA), na.strings="b")
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings="b")
[1] NN   1    <NA>
Levels:  1 NN NA 
> 
> # dito
> type.convert(c("NA", "1", NA), na.strings=character())
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings=character())
[1] NN   1    <NA>
Levels:  1 NN NA 
 
 
# furthermore, may be type.convert should have default
# function(x, na.strings = NA, as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = character(), as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = NULL, as.is = FALSE, dec = ".")
# rather then
# function(x, na.strings = "NA", as.is = FALSE, dec = ".")


# As from R 1.5 

identical(as.character(NA), "NA")

# there is no longer a fundamental difference between "NA" 
# and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
# however, though "NA" is not given as na.strings we have

type.convert(c("NA", "1", NA), na.strings="b")
# compare to
type.convert(c("NN", "1", NA), na.strings="b")

# dito
type.convert(c("NA", "1", NA), na.strings=character())
# compare to
type.convert(c("NN", "1", NA), na.strings=character())



-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 15:48:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 16:48:43 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as (PR#1568)
Message-ID: <200205171448.QAA21029@pubhealth.ku.dk>

On Fri, 17 May 2002 oehl_list@gmx.de wrote:

> # replication code at end of mail
>
> > # As from R 1.5
> >
> > identical(as.character(NA), "NA")
> [1] FALSE
> >
> > # there is no longer a fundamental difference between "NA"
> > # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> > # however, though "NA" is not given as na.strings we have
> >
> > type.convert(c("NA", "1", NA), na.strings="b")
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings="b")
> [1] NN   1    <NA>
> Levels:  1 NN NA
> >
> > # dito
> > type.convert(c("NA", "1", NA), na.strings=character())
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings=character())
> [1] NN   1    <NA>
> Levels:  1 NN NA

Yes. Thanks for pointing it out.
Notice that is a real result, as the real convertor was hard-coded to
handle "NA" as a missing real.  It proved a little tricky to disentangle
it.

> # furthermore, may be type.convert should have default
> # function(x, na.strings = NA, as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = character(), as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = NULL, as.is = FALSE, dec = ".")
> # rather then
> # function(x, na.strings = "NA", as.is = FALSE, dec = ".")

That was intentional.  It is intended to convert character input read from
a file, and R does still regards "NA" in a file as missing unless told
otherwise.  So it makes sense to have the same default for type.convert,
and also for backwards compatibility.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 16:04:52 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 17 May 2002 11:04:52 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205171104210.29395-100000@hsph.harvard.edu>

So cut-n-pasting the pcre 3.9 files should work fine? Hrmmm, I'll poke
around.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 17 17:30:11 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 17 May 2002 18:30:11 +0200 (MET DST)
Subject: [Rd] pbinom gotcha (PR#1569)
Message-ID: <200205171630.SAA21501@pubhealth.ku.dk>

This came up due to a question from Anders Hald:

Bernoulli calculated an approximation to the smallest n so that

P(0.58 <= x/n <= 0.62) >= 1000/1001

What is the exact value?

Now try

n <- 6350:6500
Pr <- function(n)pbinom(0.62*n,n,0.6) -  
  pbinom(0.58*n,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

Next, try

Pr <- function(n)pbinom(0.62*n,n,0.6) - 
        pbinom(0.58*n + 1e-7,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

At least on Linux, you get quite different results.
The reason is of course that 

> 0.58*6400-3712
[1] -4.547474e-13

and dbinom has a fuzz factor, but pbinom unceremoniously takes
floor(x). I suppose we ought to build the same fuzz into pbinom? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:04:27 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 17 May 2002 23:04:27 +0200 (MET DST)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
Message-ID: <200205172104.XAA22116@pubhealth.ku.dk>

>
> 	I have a function called FitModels(), which simply takes in the
> names of a data.frame and two variable names within that data.frame, and
> fits and returns a list of objects from 2 coxph() fits, one main effects and
> one interaction model.  Sometimes the two variables are such that there is a
> warning message: convergence has not been reached, or the X matrix is
> singular, or some such.

In fact the warning that the convergence may not have been reached in
coxph is usually spurious, so you probably don't want to catch it.
However, there does seem to be something strange going on.


Simplified version
 f<-function(){
    x<-try(warning("a"))
    y<-try(warning("b"))
    list(x,y)
 }

> options(warn=2)
> f()
Error in try(warning("a")) : (converted from warning) a
[[1]]
[1] "Error in try(warning(\"a\")) : (converted from warning) a\n"
attr(,"class")
[1] "try-error"

[[2]]
[1] "b"

> f()
[[1]]
[1] "a"

[[2]]
[1] "b"


Or even more simply

> options(warn=2)
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))
> warnings()
Error in warnings() : Object "last.warning" not found
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))



	-thomas
Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:22:05 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 17 May 2002 14:22:05 -0700 (PDT)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
In-Reply-To: <200205172104.XAA22116@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205171418050.95512-100000@homer11.u.washington.edu>


Even try() isn't really involved.

The problem is in src/errors.c:warningcall

It sets a flag inWarning, presumably to ensure that infinite loops of
recursive warnings don't happen, but if options(warn)==2 then an error is
signalled and the flag is not cleared until the next error.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat May 18 19:51:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sat, 18 May 2002 14:51:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205181450281.4117-100000@hsph.harvard.edu>

I found the problem---for some reason when libpcre.a is being built the R
Makefiles try to build it from pcre.dll, not build a static library. When
I built the static library separately everything went swimmingly.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dciemo@excite.com  Mon May 20 04:42:40 2002
From: dciemo@excite.com (dciemo@excite.com)
Date: Mon, 20 May 2002 05:42:40 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect  R-lang.pdf (PR#1575)
Message-ID: <200205200342.FAA27132@pubhealth.ku.dk>

Full_Name: David Ciemiewicz
Version: 1.3.1
OS: Windows 2000
Submission from: (NULL) (63.192.218.208)


In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
expression which uses the function "any".

> if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> y <- if( any(x)<= 0 ) log(1+x) else log(x)

However, the parenthesis are incorrect in the conditional part of the if.

It should be:

    if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
    y <- if ( any(x <= 0) ) log(1+x) else log(x)


However, if we are really being pedantic, this is still not correct.  If any
values of x are <= -1, you will still get an error.

I'm still too new to R to figure out how to get what I thing I really want which
would set all values less than or equal to zero to be 1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 11:12:47 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect (PR#1576)
Message-ID: <200205200912.LAA27719@pubhealth.ku.dk>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:01 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect
 R-lang.pdf (PR#1575)
In-Reply-To: <200205200342.FAA27132@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205201007360.16296-100000@gannet.stats>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 11:46:16 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 12:46:16 +0200 (MET DST)
Subject: [Rd] is.na<- coerces character vectors to be factors within dataframes (PR#1577)
Message-ID: <200205201046.MAA27985@pubhealth.ku.dk>

I am not sure if this is a bug within is.na<- or if it lies deeper in the
dataframe construction process. Indeed, perhaps it is not a bug at all (in
which case I would suggest that the help page for NA be provided with a warning
for unsuspecting users (like me)).

When used on a character vector within a dataframe, is.na<- coerces the vector
to factor.

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> x
  var
1   A
2   B
3   C
> is.character(x$var)
[1] TRUE
> is.na(x[[1]]) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] FALSE
> is.factor(x$var)
[1] TRUE
>

Interestingly enough, this coersion does not occur if you refer to x$var
instead of x[[1]].

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> is.na(x$var) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE
> 

I could (ort of) imagine a story in which the coercision is the desired
behavior --  by using is.na you are implicitly taking apart a dataframe and
putting it back together and, when you make dataframes, character vectors are
coerced to factor by default. But I can't come up with a story as to why x$var
should be handled differently then x[[1]].

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Thanks,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 12:46:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 13:46:35 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201146.NAA28130@pubhealth.ku.dk>

The inconsistency is that you use $<- to set the column, then [[<- to
change it.  Had you tried to set the column by

x[[1]] <- as.character(x[[1]])

you would have seen the problem immediately (it does not work as you would
have intended).  If you want to be sure to turn off conversion to factor,
you need to set the column to class "AsIs".  My belief is that
will behave consistently.

> x <- data.frame(var = I(LETTERS[1:3]))
> is.na(x[[1]]) <- 2
> x
   var
1    A
2 <NA>
3    C
>  is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE

In any case, it is nothing to do with is.na<-:

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
>
> x[[1]][2] <- "3"
> x
  var
1   A
2   3
3   C
> is.character(x$var)
[1] FALSE

You'll see that [[<-.data.frame contains

            if (!inherits(value, "data.frame"))
                value <- as.data.frame(value)

and that is where the coercion is done.  It really isn't possible to tell
your intentions if you replace a whole column of a data frame.

Having said all that, the source says

    if(nargs() < 4) {
	## really ambiguous, but follow common use as if list
	## el(x,i) <- value is the preferred approach

and S4 does not do the conversion.

I don't understand the comment, as

> get("el<-")
.Primitive("[[<-")

and so el<- just calls [[<- ....



On Mon, 20 May 2002 a296180@mica.fmr.com wrote:

> I am not sure if this is a bug within is.na<- or if it lies deeper in the
> dataframe construction process. Indeed, perhaps it is not a bug at all (in
> which case I would suggest that the help page for NA be provided with a warning
> for unsuspecting users (like me)).

Not appropriate!

> When used on a character vector within a dataframe, is.na<- coerces the vector
> to factor.
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > x
>   var
> 1   A
> 2   B
> 3   C
> > is.character(x$var)
> [1] TRUE
> > is.na(x[[1]]) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] FALSE
> > is.factor(x$var)
> [1] TRUE
> >
>
> Interestingly enough, this coersion does not occur if you refer to x$var
> instead of x[[1]].
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > is.na(x$var) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] TRUE
> > is.factor(x$var)
> [1] FALSE
> >
>
> I could (ort of) imagine a story in which the coercision is the desired
> behavior --  by using is.na you are implicitly taking apart a dataframe and
> putting it back together and, when you make dataframes, character vectors are
> coerced to factor by default. But I can't come up with a story as to why x$var
> should be handled differently then x[[1]].
>
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
>
> Thanks,
>
> David Kane
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:25:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 19:25:10 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201725.TAA29076@pubhealth.ku.dk>

Thanks for taking the time and trouble to explain this to me.

ripley@stats.ox.ac.uk writes:
 > You'll see that [[<-.data.frame contains
 > 
 >             if (!inherits(value, "data.frame"))
 >                 value <- as.data.frame(value)
 > 
 > and that is where the coercion is done.  It really isn't possible to tell
 > your intentions if you replace a whole column of a data frame.

What is the appropriate way to change the value in a single row in a dataframe
to NA without having to "replace a whole column"? That is, how can I change the
value "B" in row 2 to being NA while keeping var as a vector of characters?

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)

One obvious answer is to use simple assignment.

> x[2,1] <- NA
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> 

This has the desired effect. Moreover, something like this would work with my
merge.data.frame problem. However, I have been operating under the (mistaken?)
impression that assigning NA directly was A Bad Thing.


 > On Mon, 20 May 2002 a296180@mica.fmr.com wrote:
 > 
 > > I am not sure if this is a bug within is.na<- or if it lies deeper in the
 > > dataframe construction process. Indeed, perhaps it is not a bug at all (in
 > > which case I would suggest that the help page for NA be provided with a warning
 > > for unsuspecting users (like me)).
 > 
 > Not appropriate!

Yes. I see that now.

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:38:06 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Mon, 20 May 2002 13:38:06 -0400
Subject: [Rd] Suggested change in merge.data.frame
Message-ID: <15593.13438.272566.100291@gargle.gargle.HOWL>

AFAIK, this is not a bug since it could be a feature that merge.data.frame
coerces character vectors to be factor in certain circumstabces. (I think that
these circumstances require that all.x is TRUE, that y has fewer rows than x
and that the coerced column comes from y.)

In any event, changing the line 

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)

to 

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

solves the (or, rather, my) problem. The main reason that I hesitate to
recommend it heartily is that I thought that assigning NA directly was A Bad
Thing, but perhaps this is not so.

If this is a bad idea, I would love to understand why. It seems to work fine
with the help page examples and in my own code. Here is a simple example:

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3])
> y$b <- as.character(y$b)
> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
Row.names         a         b 
 "factor" "integer"  "factor" 
>

## Load up new merge.data.frame

> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
  Row.names           a           b 
   "factor"   "integer" "character" 
> merge(x, y, by = 0, all.x = TRUE)
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> 

Thanks to Brian Ripley for much explanation (which I may not have fully
understood) of the issues involved.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhitchco@stat.ufl.edu  Mon May 20 19:34:12 2002
From: dhitchco@stat.ufl.edu (dhitchco@stat.ufl.edu)
Date: Mon, 20 May 2002 20:34:12 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205201834.UAA29307@pubhealth.ku.dk>

I have apparently found an error in the "pam" function of the "cluster"
library package.  Please pardon me if this error has been pointed out or
if this e-mail should be directed to someone else.

The problem only started occurring with R version 1.5.0, which I started
using about a week ago.  The problem occurs when you try to use "pam"
with the input being a dissimilarity matrix instead of a data matrix;
the results when using the dissimilarity matrix are very strange and not
at all like those obtained when using the data matrix.

For example, try this code:

library(cluster)
data(ruspini)
#the clustering using a data matrix as the input:
pam(ruspini,4)
#the clustering using a dissimilarity matrix as input:
pam(daisy(ruspini),4,diss=T)

The clustering results should be the same but are wildly different.
Again, this problem started happening with the upgrade to R 1.5.0.
Thank you for any help you can provide.

David Hitchcock


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 22:31:43 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 23:31:43 +0200 (MET DST)
Subject: [Rd] No documentation for class AsIs (PR#1582)
Message-ID: <200205202131.XAA29915@pubhealth.ku.dk>

There is no documentation for class AsIs, that is ?AsIs gives you
nothing. Relatedly, there is no discussion of the use of I() to create objects
of class AsIs on the help page for I(). This means that it is hard to find
information in the help pages about the following usage.

> test <- data.frame(x = I(letters[1:3]))
> test
  x
1 a
2 b
3 c
> class(test$x)
[1] "AsIs"      "character"
> 

Apologies if this is present in some place that I could not find.

> help.search("AsIs")
Help files with alias or title matching `AsIs',
type `help(FOO, package = PKG)' to inspect entry `FOO(PKG) TITLE':

format(base)                                 Encode in a Common Format
data.frame(base)                             Data Frames
bs(splines)                                  Generate a Basis for Polynomial Splines
ns(splines)                                  Generate a Basis Matrix for Natural Cubic Splines
predict.bs(splines)                          Evaluate a Spline Basis

Other than a brief and opaque mention in ?data.frame, I couldn't find anything
applicable. If it would be helpful, I would be happy to try my hand at an
addition to the ?I page for this usage.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205210515.g4L5F4H28757@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1570 *
Subject: Re: [R] options()$warn==2 and try()
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Fri, 17 May 2002 14:03:40 -0700 (PDT)
--I assume that clearing inWarning is safe because recursive warnings will create
--recursive errors, which will be ignored in errorcall()
--

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1543 *
Subject: {round,trunc}.POSIXt and daylight savings time
From: Don MacQueen <macq@llnl.gov>
Date: Sat, 11 May 2002 22:22:41 -0700
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1569 *
Subject: pbinom gotcha
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 May 2002 18:26:30 +0200
* PR# 1576 *
Subject: Re: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect 
From: ripley@stats.ox.ac.uk
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
* PR# 1577 *
Subject: is.na<- coerces character vectors to be factors within dataframes
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 06:45:07 -0400
* PR# 1578 *
Subject: Spice girls' vocal concert
From: kota-h <kota-h@mtc.biglobe.ne.jp>
Date: Mon, 20 May 2002 06:35:27 -0500 (CDT)
* PR# 1579 *
Subject: Involved In Fundraising?
From: "Fund Raisee" <fundraisehelp01@yahoo.com.au>
Date: Mon, 20 May 2002 19:43:39 +0800
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 21 09:21:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 May 2002 10:21:42 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205210821.KAA02494@pubhealth.ku.dk>

>>>>> "DavidH" == David Hitchcock <dhitchco@stat.ufl.edu> writes:

    DavidH> I have apparently found an error in the "pam"
    DavidH> function of the "cluster" library package.  Please
    DavidH> pardon me if this error has been pointed out or if
    DavidH> this e-mail should be directed to someone else.

    DavidH> The problem only started occurring with R version
    DavidH> 1.5.0, which I started using about a week ago.  The
    DavidH> problem occurs when you try to use "pam" with the
    DavidH> input being a dissimilarity matrix instead of a data
    DavidH> matrix; the results when using the dissimilarity
    DavidH> matrix are very strange and not at all like those
    DavidH> obtained when using the data matrix.

    DavidH> For example, try this code:

     library(cluster)
     data(ruspini)
     ## the clustering using a data matrix as the input:
     pam(ruspini,4)
     ## the clustering using a dissimilarity matrix as input:
     pam(daisy(ruspini),4,diss=T)

    DavidH> The clustering results should be the same but are wildly different.

well, "wildly different" is an  ``unusual''  description of

   > daisy(ruspini)
   Error in daisy(ruspini) : NAs in foreign function call (arg 7)

which does happen when  library(methods)  is attached (as it is
for me)  
and  is not new in 1.5.0, (it does happen in the 1.4.x versions
as well, because since then, read.table() does not coerce
integer to numeric anymore).

This is clearly an omission in daisy() which only checks for "numeric"
instead of "integer" as well.

Can you make sure you detach methods, e.g., by

    if(any(i.meth <- search() == "package:methods")) detach(i.meth)

and retry then. For me the result is then almost identical
(apart from the fact that in the 2nd case the medoid coordinates are
 not available, of course!)

    DavidH> Again, this problem started happening with the upgrade to R 1.5.0.

(but not from 1.4.x ...)

    DavidH> David Hitchcock

Thanks for reporting.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Tue May 21 21:17:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Tue, 21 May 2002 22:17:10 +0200 (MET DST)
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
Message-ID: <200205212017.WAA09766@pubhealth.ku.dk>

Although the documentation is somewhat sketchy, I() can be used to create
objects of class AsIs:

> I("a")
[1] "a"
attr(,"class")
[1] "AsIs"      "character"
> I(4)
[1] 4
attr(,"class")
[1] "AsIs"    "numeric"
> I(4 + 0i)
[1] 4+0i
attr(,"class")
[1] "AsIs"    "complex"
> 

This fails for objects of class POSIXct.

> class(ISOdate(2002, 5, 21))
[1] "POSIXt"  "POSIXct"
> I(ISOdate(2002, 5, 21))
Error in names(x) : evaluation is nested too deeply: infinite recursion?
>

Interestingly enough, it produces an (incorrect?) answer for objects of class
POSIXlt

> class(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "POSIXt"  "POSIXlt"
> I(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> 

Of course, this may not be a bug since it is not clear that I() is documented
to do anything like this.

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 21 21:48:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2002 22:48:27 +0200
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
In-Reply-To: <200205212017.WAA09766@pubhealth.ku.dk>
References: <200205212017.WAA09766@pubhealth.ku.dk>
Message-ID: <x2bsb94484.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> Although the documentation is somewhat sketchy, I() can be used to create
> objects of class AsIs:
...
> This fails for objects of class POSIXct.
> 
> > class(ISOdate(2002, 5, 21))
> [1] "POSIXt"  "POSIXct"
> > I(ISOdate(2002, 5, 21))
> Error in names(x) : evaluation is nested too deeply: infinite recursion?
> >

Actually I() works fine, but the resulting object has a print
method problem:

>  x <- I(ISOdate(2002, 5, 21))
> x
Error in names(x) : evaluation is nested too deeply: infinite recursion?
> dput(x)
structure(1021982400, class = c("AsIs", "POSIXt", "POSIXct"))

Looks like the issue is that print calls format.AsIs which calls toString
which calls paste which calls as.character which calls format which....

----
> Interestingly enough, it produces an (incorrect?) answer for objects of class
> POSIXlt
> 
> > class(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "POSIXt"  "POSIXlt"
> > I(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> > 

However, that is not particularly incorrect:

> dput(as.POSIXlt(ISOdate(2002, 5, 21)))
structure(list(sec = 0, min = 0, hour = 14, mday = 21, mon = 4, 
    year = 102, wday = 2, yday = 140, isdst = 1), .Names = c("sec", 
"min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
), class = c("POSIXt", "POSIXlt"), tzone = c("", "CET", "CEST"
))

(Notice the 6hr time diff..)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 13:03:25 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 22 May 2002 08:03:25 -0400
Subject: package names with `.' cause problems in the Depends field
Message-ID: <15595.35085.417551.700833@gargle.gargle.HOWL>

Some of my package names have `.' in them. An example is "g.data". R CMD check
complains about this as follows:

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Is the problem:

1) That `.' is not allowed in package names or

2) With R CMD check or

3) With my analysis?

The key Perl code in check seems to be:

	foreach my $dep (@dependencies) {
	    $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;
	    ## The entry is malformed if there is no match, or there is
	    ## a match but the dep_op is different from `<=' or `>', or
	    ## the dep_version does not only consist of digits, `.' or
	    ## `-'.
	    if(!($1) || ($2 && (!(($3 eq "<=") || ($3 eq ">="))
				|| ($4 =~ /[^\d\.\-]/)))) {
		$any++;
		break;
	    }
	}
	if($any == 0) {
	    $log->result("OK")
	}
	else {
	    $log->error();
	    $log->print("Malformed Depends field.\n");
	    $log->print(wrap("", "", @msg_DESCRIPTION));
	    exit(1);
 	}

Alas, I am not Perl savvy enough to fully understand this. Simple testing shows
that the matching yields no matches ($1 is empty) for a name like "g.data". If
`.' is allowed in package names, then I suspect that this is a bug.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Wed May 22 13:28:36 2002
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Wed, 22 May 2002 14:28:36 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221228.OAA16397@pubhealth.ku.dk>

I wonder if something like this has been reported 
before:

> pexp(85:86,0.438)
[1]    1 -Inf




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:tools, package:ctest, Autoloads, package:base

Dietrich Trenkler

--
Dietrich Trenkler   Universität Osnabrück                                  
FB Wirtschaftswissenschaften           
Rolandstr.8              D-49069 Osnabrück

dtrenkler@nts6.oec.uni-osnabrueck.de 

        
     
 
                                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 22 13:59:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 May 2002 14:59:17 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221259.OAA16871@pubhealth.ku.dk>

>>>>> "dtrenkler" == dtrenkler  <dtrenkler@nts6.oec.uni-osnabrueck.de> writes:

    dtrenkler> I wonder if something like this has been reported
    dtrenkler> before:

    >> pexp(85:86,0.438)
    dtrenkler> [1] 1 -Inf

yes, it has been reported (May 11, R-help) for pweibull() and
was tracked to a bug in the new R internal expm1() function
which only shows when no system-internal expm1() function is
present. Hence the problem has only been seen on Windows.

It has been fixed in "R-patched" for quite a while, and we
recommend you get "R-patched" pre-compiled for Windows
by Prof Ripley

	  http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre/SetupRpatched.exe

Thank you for reporting it anyway (it was not obvious if you haven't
followed R-help closely).

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed May 22 13:58:18 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 22 May 2002 14:58:18 +0200 (MEST)
Subject: Bug in pexp (PR#1590)
In-Reply-To: <200205221228.OAA16397@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0205221457590.6197-100000@artemis.imbe.med.uni-erlangen.de>



> I wonder if something like this has been reported 
> before:
> 
> > pexp(85:86,0.438)
> [1]    1 -Inf
> 

R> pexp(85:86,0.438)
[1] 1 1

Torsten

R> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    6.0                         
year     2002                        
month    05                          
day      21                          
language R                           


> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, package:tools, package:ctest, Autoloads, package:base
> 
> Dietrich Trenkler
> 
> --
> Dietrich Trenkler   Universität Osnabrück                                  
> FB Wirtschaftswissenschaften           
> Rolandstr.8              D-49069 Osnabrück
> 
> dtrenkler@nts6.oec.uni-osnabrueck.de 
> 
>         
>      
>  
>                                            
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 14:57:02 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Wed, 22 May 2002 15:57:02 +0200 (MET DST)
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
Message-ID: <200205221357.PAA17525@pubhealth.ku.dk>

R CMD check fails when the Depends field in the DESCRIPTION file includes a
single package with `.' in the name.

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Assuming that `.' is allowed in a package name (there are two such packages on
CRAN and I could find nothing to the contrary in Writing R Extensions), the
following line in check should be changed from:

$dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

to:

$dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

that is, (\w+) becomes ([\w\.]+) in order to match names that have a
`.'. Thanks to David Brahm for suggesting this fix.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@ms.cc.sunysb.edu  Wed May 22 22:04:54 2002
From: tkeitt@ms.cc.sunysb.edu (tkeitt@ms.cc.sunysb.edu)
Date: Wed, 22 May 2002 23:04:54 +0200 (MET DST)
Subject: signature match in setMethod (PR#1592)
Message-ID: <200205222104.XAA19333@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.5
OS: Linux
Submission from: (NULL) (128.227.201.237)


The function "setMethod" makes the following call to "insertMethod":

allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)], 
        asMethodDefinition(definition, signature))

If I understand insertMethod correctly, the third argument should be the names
of the formal arguments of the method. However, this fails if the signature is
something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
'j', '...', 'drop')" because the "..." gets passed instead of "drop". Changing
this to

allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
fnames)], 
        asMethodDefinition(definition, signature))

seems to solve the problem.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri May 24 19:41:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 24 May 2002 20:41:18 +0200
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
In-Reply-To: <200205221357.PAA17525@pubhealth.ku.dk>
References: <200205221357.PAA17525@pubhealth.ku.dk>
Message-ID: <15598.35150.17889.571234@mithrandir.hornik.net>

>>>>> a296180  writes:

> R CMD check fails when the Depends field in the DESCRIPTION file includes a
> single package with `.' in the name.

> * checking for file 'financials/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... ERROR
> Malformed Depends field.
> See the information on DESCRIPTION files in section 'Creating R packages'
> of the 'Writing R Extensions' manual.
> mica|tmp> 

> Assuming that `.' is allowed in a package name (there are two such packages on
> CRAN and I could find nothing to the contrary in Writing R Extensions), the
> following line in check should be changed from:

> $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

> to:

> $dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

> that is, (\w+) becomes ([\w\.]+) in order to match names that have a
> `.'. Thanks to David Brahm for suggesting this fix.

Thanks.  Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmate@coh.org  Sat May 25 01:15:30 2002
From: jlongmate@coh.org (jlongmate@coh.org)
Date: Sat, 25 May 2002 02:15:30 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250015.CAA08110@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: 1.5.0
OS: Windows NT 4.00
Submission from: (NULL) (151.152.101.44)


On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
a printer selection window, and produces a printed plot:
> plot(1:10,1:10)
> dev.print(win.print)
but with focus on the graphics window, neither the printer button, the printer
selection from the file menu, nor CTRL-P do anything.  No printer window
appears.  These all work in version 1.4.1 on the same machine, on the same day. 
I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
thing happened.
I can use the file menu to save to a PDF file, or to copy to the clipboard, but
not to directly print the contents of the graphics window.

The R for Windows FAQ, Version for rw1050, states "You can print the graphics
window from its menu or by using dev.print with suitable arguments (see its help
page: most likely dev.print(win.graph) will work)."  The reference to win.graph
should probably be to win.print.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R     


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 25 08:40:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 25 May 2002 09:40:23 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250740.JAA08768@pubhealth.ku.dk>

This is known, already fixed in R-patched.  Please look in the R-help
archives (including for where you can get a pre-compiled version of
a late enough version to have the fix).


On Sat, 25 May 2002 jlongmate@coh.org wrote:

> Full_Name: Jeffrey Longmate
> Version: 1.5.0
> OS: Windows NT 4.00
> Submission from: (NULL) (151.152.101.44)
>
>
> On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
> a printer selection window, and produces a printed plot:
> > plot(1:10,1:10)
> > dev.print(win.print)
> but with focus on the graphics window, neither the printer button, the printer
> selection from the file menu, nor CTRL-P do anything.  No printer window
> appears.  These all work in version 1.4.1 on the same machine, on the same day.
> I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
> thing happened.
> I can use the file menu to save to a PDF file, or to copy to the clipboard, but
> not to directly print the contents of the graphics window.
>
> The R for Windows FAQ, Version for rw1050, states "You can print the graphics
> window from its menu or by using dev.print with suitable arguments (see its help
> page: most likely dev.print(win.graph) will work)."  The reference to win.graph
> should probably be to win.print.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun May 26 09:34:48 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 May 2002 10:34:48 +0200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu>
Message-ID: <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>

[moved to R-devel]

Thomas Lumley wrote:
> 
> On Sat, 25 May 2002, Patrick Buetzberger wrote:
> 
> > Dear colleagues,
> >
> > I often use chemical formulas to label my x-axis, e.g. in barplots. I
> > used to do this like the following example and it worked just fine:
> >
> <snip>
> >
> > The important point is the x-axis here: before we installed the new R
> > 1.5 on our workstations, the chemical formulas were properly aligned and
> > looked well. Ever since, if I use the exact same procedure, I get the
> > graphic but the chemical formulas are not aligned horizontally properly
> > anymore: e.g. Mg^{2+''} or NO[3]^{-''} are a bit higher than F^{-''} or
> > H^{+''} (it seems to depend on whether there is a subscript or a letter
> > with a part below the main line like a 'g').
> > I didin't find any hint on the r-project homepage. I don't know if we
> > forgot some feature when newly installing R or if something changed in
> > version 1.5.
> 
> I think something changed.  In the NEWS file we have
> 
> o       The vertical alignment of mathematical annotations was wrong.
>         When a vertical adjustment was not given, it was bottom-adjusting
>         i.e,. it was treating adj=0 as adj=c(0, 0).  It now treats
>         adj=0 as adj=c(0, 0.5) as for "normal" text. (PR#1302)
> 
> and I expect this is responsible.  

That change indeed is reasonable, but I don't think it is this
particular change (at least as documented) that makes Patrick's example
doesn't work any more.


> It looks to me as if R is now trying to center the expressions vertically. 

Right for text() and friends, but not for axis(), see the example below,
and maybe this is a bug (Paul?). Anyway, fixing this bug (?) won't
change much for Patrick's example.


> This is also consistent with the previous reply that suggested putting blank 
> subscripts on everything as a work-around.

If sub- or superscripts are a expression, space is added below
respective above that expression (if not already done before), so
complex formulas can be generated. And, at least for me, the result is
somehow expected.

I am very surprised and wondered why Patrick's example worked in
R-1.4.1.
Without having looked into the code, there must have been something
fuzzy that is broken since R-1.5.0.


> I don't think there's a complete fix for this, since sometimes people want
> expressions aligned on their actual vertical centers and sometimes on the
> center of the main line of text (as you do).

Here an example on the alignments:

 plot(1:12, type="n", axes=FALSE)

 expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
    PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
    Mg^{2+''}, Ca^{2+''}, H^{+''})

 axis(1, 1:12, lab=expr)  # the "problem"

 text(1:12, 3, expr) # adj=c(0.5, 0.5), the default for text()

# This looks like the x-axis annotation:
 text(1:12, 5, expr, adj=c(0.5, 0)) 

# And this is all in *one* formula, as Patrick would like to get it
somehow.
# Only a guess: Was there something like a "coerce to one formula" in
R-1.4.1?

 text(6, 9, 
    labels = expression(F^{-''} * Cl^{-''} * NO[2]^{-''} * NO[3]^{-''} * 
    PO[4]^{3-''} * SO[4]^{2-''} * Na^{+''} * NH[4]^{+''} * K^{+''} *
    Mg^{2+''} * Ca^{2+''} * H^{+''}))


I am sure, Paul will get the point in less than a second.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gorazd.brumen@student.fmf.uni-lj.si  Mon May 27 14:34:25 2002
From: gorazd.brumen@student.fmf.uni-lj.si (Gorazd Brumen)
Date: Mon, 27 May 2002 15:34:25 +0200
Subject: Pressing TAB
Message-ID: <20020527112954.C1B17535A2@smtp1.volja.net>

Hello,

I am new on the list and in R language. I only have one question - 
could it be achieved that pressing a TAB key autocompletes 
the possible directions to the R language. This is a Unix 
feature and it would greatly boost the performance. 

I have R-1.3.1 installed on Linux.

Gorazd 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon May 27 13:49:29 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 27 May 2002 08:49:29 -0400
Subject: CRAN links
Message-ID: <3CF22B59.FF323D1D@bank-banque-canada.ca>

Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
<ftp://cvs.r-project.org/pub/> ?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 27 15:19:31 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 May 2002 09:19:31 -0500
Subject: CRAN links
In-Reply-To: <3CF22B59.FF323D1D@bank-banque-canada.ca>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
Message-ID: <6r8z658yh8.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> <ftp://cvs.r-project.org/pub/> ?

Curious.  I fixed up those directories and restarted the ftp server on
the machine that serves as cvs.r-project.org.   Now I can reach those
directories via an ftp client (ncftp) but not via a web browser
(netscape).  I'm not sure why.

The same file system is available as
                    http://cran.us.r-project.org/
I would recommend using that URL instead of ftp://cvs.r-project.org/
for an http client.  A less desirable alternative is to notice that
the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
/pub/e19/CRAN and to use
                 ftp://cvs.r-project.org/pub/e19/CRAN

I'm not sure why a web browser cannot follow the symbolic link but an
ftp client can.  I would have thought this would be determined by the
server, not by the client.  Can anyone suggest why the symbolic links
do not work for netscape?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 27 15:44:45 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 2002 16:44:45 +0200
Subject: CRAN links
In-Reply-To: <6r8z658yh8.fsf@franz.stat.wisc.edu>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu>
Message-ID: <x24rgttztu.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > <ftp://cvs.r-project.org/pub/> ?
> 
> Curious.  I fixed up those directories and restarted the ftp server on
> the machine that serves as cvs.r-project.org.   Now I can reach those
> directories via an ftp client (ncftp) but not via a web browser
> (netscape).  I'm not sure why.
> 
> The same file system is available as
>                     http://cran.us.r-project.org/
> I would recommend using that URL instead of ftp://cvs.r-project.org/
> for an http client.  A less desirable alternative is to notice that
> the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> /pub/e19/CRAN and to use
>                  ftp://cvs.r-project.org/pub/e19/CRAN
> 
> I'm not sure why a web browser cannot follow the symbolic link but an
> ftp client can.  I would have thought this would be determined by the
> server, not by the client.  Can anyone suggest why the symbolic links
> do not work for netscape?

No, and it appears to be Netscape-specific too. Mozilla follows the
links OK. (The form of the link - relative/absolute - appears to be
irrelevant, so my first guess was wrong.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon May 27 17:57:23 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 27 May 2002 18:57:23 +0200
Subject: CRAN links
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu> <x24rgttztu.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CF26573.B7732A56@univie.ac.at>

i just checked with netscape 4.79 on win2k,
and i had no problem getting the directory listing of

ftp://cvs.r-project.org/pub/





Peter Dalgaard BSA wrote:
> 
> Douglas Bates <bates@stat.wisc.edu> writes:
> 
> > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> >
> > > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > > <ftp://cvs.r-project.org/pub/> ?
> >
> > Curious.  I fixed up those directories and restarted the ftp server on
> > the machine that serves as cvs.r-project.org.   Now I can reach those
> > directories via an ftp client (ncftp) but not via a web browser
> > (netscape).  I'm not sure why.
> >
> > The same file system is available as
> >                     http://cran.us.r-project.org/
> > I would recommend using that URL instead of ftp://cvs.r-project.org/
> > for an http client.  A less desirable alternative is to notice that
> > the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> > /pub/e19/CRAN and to use
> >                  ftp://cvs.r-project.org/pub/e19/CRAN
> >
> > I'm not sure why a web browser cannot follow the symbolic link but an
> > ftp client can.  I would have thought this would be determined by the
> > server, not by the client.  Can anyone suggest why the symbolic links
> > do not work for netscape?
> 
> No, and it appears to be Netscape-specific too. Mozilla follows the
> links OK. (The form of the link - relative/absolute - appears to be
> irrelevant, so my first guess was wrong.)
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:02 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:02 +0200 (MET DST)
Subject: When dev.list() is NULL, dev.control() causes core dump (PR#1605)
Message-ID: <200205280642.IAA22334@pubhealth.ku.dk>

The following sequence of commands:
graphics.off()
dev.control("inhibit")

causes R to memory-fault and core dump. This is reported
for a new port of R, but is also reproducible on Windows
and Solaris. The Windows fault is:

RGUI caused an invalid page fault in
module R.DLL at 017f:00475663.
Registers:
EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
Bytes at CS:EIP:
89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
Stack dump:
0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55

The following patch (diff -c) corrects the problem,
when applied to src/main/plot.c:

PATCH BEGIN
*** plot.c.orig Tue Dec  4 23:43:43 2001
--- plot.c Sun May 26 11:06:25 2002
***************
*** 52,58 ****
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     inhibitDisplayList(CurrentDevice());
      return R_NilValue;
  }

--- 52,60 ----
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     if(!NoDevices()){
!  inhibitDisplayList(CurrentDevice());
!     }
      return R_NilValue;
  }


PATCH END

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:00 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:00 +0200 (MET DST)
Subject: Platform-specific: simple assignments in Rprofile cause core dump (PR#1604)
Message-ID: <200205280642.IAA22326@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT


This only happens on platforms with a faulty implementation
of realloc(). Some C libraries do not allow realloc() to be
called with a NULL pointer to resize. The assignment

ISOLatin1 <- 0:255

in Rprofile then causes a core dump. The attached set
of 4 patches should be very safe to use and fix the problem.

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_character.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_character.c.txt

*** character.c.orig	Wed Sep 19 09:04:16 2001
--- character.c	Sun May 12 00:54:18 2002
***************
*** 75,81 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buff = (char *) realloc(buff, len);
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
--- 75,85 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buff==NULL){
! 	    buff = (char *) malloc(len);
! 	} else {
! 	    buff = (char *) realloc(buff, len);
! 	}
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
***************
*** 267,273 ****
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {
--- 271,281 ----
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    if(pt==NULL){
! 	        pt = (char *) malloc((strlen(buff)+1) * sizeof(char));
! 	    } else {
! 	        pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
! 	    }
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_memory.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_memory.c.txt

*** memory.c.orig	Tue Nov 27 02:41:16 2001
--- memory.c	Sun May 12 00:41:44 2002
***************
*** 2030,2036 ****
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     p = realloc(ptr, size);
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }
--- 2030,2040 ----
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     if(ptr==NULL){
! 	p = malloc(size);
!     } else {
! 	p = realloc(ptr, size);
!     }
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_printutils.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_printutils.c.txt

*** printutils.c.orig	Tue Oct 30 06:18:10 2001
--- printutils.c	Sun May 12 01:08:14 2002
***************
*** 73,79 ****
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     Encodebuf = (char *) realloc(Encodebuf, len);
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;
--- 73,83 ----
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     if(Encodebuf==NULL) {
!         Encodebuf = (char *) malloc(len);
!     } else {
!         Encodebuf = (char *) realloc(Encodebuf, len);
!     }
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_saveload.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_saveload.c.txt

*** saveload.c.orig	Tue Dec  4 08:52:41 2001
--- saveload.c	Sun May 12 01:16:44 2002
***************
*** 87,93 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buf = (char *) realloc(buf, len);
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;
--- 87,97 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buf==NULL){
! 	    buf = (char *) malloc(len);
! 	} else {
! 	    buf = (char *) realloc(buf, len);
! 	}
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 08:33:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 May 2002 08:33:24 +0100 (BST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
 cause core dump (PR#1604)
In-Reply-To: <200205280642.IAA22326@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205280817440.18605-100000@auk.stats>

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> This only happens on platforms with a faulty implementation
> of realloc(). Some C libraries do not allow realloc() to be
> called with a NULL pointer to resize.

What other platforms give the problem?

The behaviour R assumes is required by the ISO C89 standard (at least
according to Lewine's book). Would it not be better to fix realloc rather
than R: there are many alternative implementations of malloc out there (and
R uses one for Windows).

One issue is that realloc is used in several R packages on CRAN, and
quite possibly in others.  These are likely to assume standard-conformant
behaviour.  (It is used in other places within the R sources too, but I
assume you checked all of those.)

> The assignment
>
> ISOLatin1 <- 0:255
>
> in Rprofile then causes a core dump. The attached set
> of 4 patches should be very safe to use and fix the problem.
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R

That is not current.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:45:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:45:15 +0200 (MET DST)
Subject: (PR#1605)When dev.list() is NULL, dev.control() causes core dump
Message-ID: <200205280945.LAA25116@pubhealth.ku.dk>

This is of course an incorrect usage, which I've trapped at R level, so as
to give an informative warning.

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> The following sequence of commands:
> graphics.off()
> dev.control("inhibit")
>
> causes R to memory-fault and core dump. This is reported
> for a new port of R, but is also reproducible on Windows
> and Solaris. The Windows fault is:
>
> RGUI caused an invalid page fault in
> module R.DLL at 017f:00475663.
> Registers:
> EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
> EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
> ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
> EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
> Bytes at CS:EIP:
> 89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
> Stack dump:
> 0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
> 0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55
>
> The following patch (diff -c) corrects the problem,
> when applied to src/main/plot.c:
>
> PATCH BEGIN
> *** plot.c.orig Tue Dec  4 23:43:43 2001
> --- plot.c Sun May 26 11:06:25 2002
> ***************
> *** 52,58 ****
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     inhibitDisplayList(CurrentDevice());
>       return R_NilValue;
>   }
>
> --- 52,60 ----
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     if(!NoDevices()){
> !  inhibitDisplayList(CurrentDevice());
> !     }
>       return R_NilValue;
>   }
>
>
> PATCH END
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:48:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:48:42 +0200 (MET DST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
Message-ID: <200205280948.LAA25173@pubhealth.ku.dk>

On Tue, 28 May 2002, Prof Brian D Ripley wrote:

> On Tue, 28 May 2002 NEFTH@pacbell.net wrote:
>
> > This only happens on platforms with a faulty implementation
> > of realloc(). Some C libraries do not allow realloc() to be
> > called with a NULL pointer to resize.
>
> What other platforms give the problem?
>
> The behaviour R assumes is required by the ISO C89 standard (at least
> according to Lewine's book). Would it not be better to fix realloc rather
> than R: there are many alternative implementations of malloc out there (and
> R uses one for Windows).
>
> One issue is that realloc is used in several R packages on CRAN, and
> quite possibly in others.  These are likely to assume standard-conformant
> behaviour.  (It is used in other places within the R sources too, but I
> assume you checked all of those.)

There are several other uses of realloc in the R sources with the same
assumption ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 11:07:08 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Tue, 28 May 2002 12:07:08 +0200 (MET DST)
Subject: hitting ^C breaks readline history (PR#1606)
Message-ID: <200205281007.MAA25465@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.5.0
OS: linux
Submission from: (NULL) (193.50.159.2)


Hitting ^C breaks readline history (when R is stared in an xterm).

xterm -e R
^C    -> arrow key and history stop working.
For example, up-arrow gives "^[[A".

ldd ./R.bin 
    [../..]
    libreadline.so.4.1 => /usr/lib/libreadline.so.4.1 (0x40020000)
    libncurses.so.5 => /usr/lib/libncurses.so.5 (0x4004c000)
    [../..]

libncurses version is 5.2.
Note. I've got the same problem with libreadline.so.4.2.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 28 13:32:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2002 14:32:31 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <200205281007.MAA25465@pubhealth.ku.dk>
References: <200205281007.MAA25465@pubhealth.ku.dk>
Message-ID: <x28z64fo68.fsf@blueberry.kubism.ku.dk>

humbertc@univ-mlv.fr writes:

> Hitting ^C breaks readline history (when R is stared in an xterm).
> 
> xterm -e R
> ^C    -> arrow key and history stop working.
> For example, up-arrow gives "^[[A".

Yes, I've noticed as well. However, press Enter and things return to
normal.

If you give us a clue as to what causes the problem, we might fix it...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 13:48:50 2002
From: humbertc@univ-mlv.fr (Cyril Humbert)
Date: Tue, 28 May 2002 14:48:50 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <x28z64fo68.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, May 28, 2002 at 02:32:31PM +0200
References: <200205281007.MAA25465@pubhealth.ku.dk> <x28z64fo68.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020528144850.A24847@borneo.univ-mlv.fr>

Peter Dalgaard BSA wrote:
> humbertc@univ-mlv.fr writes:
> 
> > Hitting ^C breaks readline history (when R is stared in an xterm).
> > 
> > xterm -e R
> > ^C    -> arrow key and history stop working.
> > For example, up-arrow gives "^[[A".
> 
> Yes, I've noticed as well. However, press Enter and things return to
> normal.

Thanks,
that's much better than my previous solution (quit and restart R).


> 
> If you give us a clue as to what causes the problem, we might fix it...

Probably something wrong with readline and/or ncurses but currently I
don't know exactly what...

-- 
Cyril Humbert 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue May 28 19:14:53 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 28 May 2002 14:14:53 -0400
Subject: signature match in setMethod (PR#1592)
References: <200205222104.XAA19333@pubhealth.ku.dk>
Message-ID: <3CF3C91D.C71FFE4A@research.bell-labs.com>

tkeitt@ms.cc.sunysb.edu wrote:
> 
> Full_Name: Tim Keitt
> Version: 1.5
> OS: Linux
> Submission from: (NULL) (128.227.201.237)
> 
> The function "setMethod" makes the following call to "insertMethod":
> 
> allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)],
>         asMethodDefinition(definition, signature))
> 
> If I understand insertMethod correctly, the third argument should be the names
> of the formal arguments of the method. However, this fails if the signature is
> something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
> 'j', '...', 'drop')" because the "..." gets passed instead of "drop". 

Not quite:  "..." gets passed (with class "ANY") in addition to "drop",
and insertMethod then generates an error, because it refuses to handle
"..."

> Changing
> this to
> 
> allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
> fnames)],
>         asMethodDefinition(definition, signature))
> 
> seems to solve the problem.

Not quite.  The signature has already been processed at this point, so
match() isn't needed, but we do need to remove "..." from fnames and the
corresponding "ANY" from signature.  Also, the "..." isn't used for
dispatch, but it is needed to honor conforming methods that replace
"..." with specific arguments (a feature added to the API recently), so
it must be retained for comparing arguments of the generic and the
method definition.

There is a version committed to r-patched that should fix the problem.

> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Tue May 28 23:30:13 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Tue, 28 May 2002 15:30:13 -0700
Subject: masking
Message-ID: <20020528153013.D7826@brandybuck>

Dear R developers,

I am newbie to R-development.

I have written mutated the rpart to obtain myown package that performs some additional calculations
on trees.  I have altered the names of rpart's functions so there is no namespace conflict, but there
is redunant functionality.  However there some remaining functions that I am not sure what to do with.

When I run R and load both libraries I get masking:


> library(dI)
> library(rpart)

Attaching package `rpart':


	The following object(s) are masked from package:dI :

	 is.Surv string.bounding.box tree.depth 


There is conflict because of the zzz.R file


% less  zzz.R
.First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)

is.Surv <- function(x) inherits(x, "Surv")

tree.depth <- function (nodes)
{
    depth <- floor(log(nodes, base = 2) + 1e-7)
    as.vector(depth - min(depth))
}

string.bounding.box <- function(s)
{
    s2 <- strsplit(s, "\n")
    rows <- sapply(s2, length)
    columns <- sapply(s2, function(x) max(nchar(x)))
    list(columns=columns, rows=rows)
}


My question:

1.  Why is the functionality of the 'zzz.R' file needed?

2.  How do I retain it without creating conflicts with rpart proper?


thanks in advance for your help,

Clayton
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 29 01:27:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 28 May 2002 17:27:03 -0700 (PDT)
Subject: masking
In-Reply-To: <20020528153013.D7826@brandybuck>
Message-ID: <Pine.A41.4.44.0205281721570.53892-100000@homer16.u.washington.edu>

On Tue, 28 May 2002, Clayton Springer wrote:
>
> % less  zzz.R
> .First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)
>
> is.Surv <- function(x) inherits(x, "Surv")
>
> tree.depth <- function (nodes)
> {
>     depth <- floor(log(nodes, base = 2) + 1e-7)
>     as.vector(depth - min(depth))
> }
>
> string.bounding.box <- function(s)
> {
>     s2 <- strsplit(s, "\n")
>     rows <- sapply(s2, length)
>     columns <- sapply(s2, function(x) max(nchar(x)))
>     list(columns=columns, rows=rows)
> }
>
>
> My question:
>
> 1.  Why is the functionality of the 'zzz.R' file needed?

To provide functions that aren't in base R but are needed by rpart. For
example, is.Surv is only in the survival package.

> 2.  How do I retain it without creating conflicts with rpart proper?

You could require rpart to be loaded, in which case your package wouldn't
need to contain these functions. (add require("rpart") to the .First.lib
function)

It may be that you don't need these functions, in which case you can just
remove them

Otherwise you're stuck -- you need the functions in your package and rpart
needs them, so you will get the warning when both are loaded together.
This is fairly harmless.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed May 29 01:54:25 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 29 May 2002 12:54:25 +1200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu> <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>
Message-ID: <3CF426C1.2F8B2A86@stat.auckland.ac.nz>

Hi

<lots of examples snipped to be replaced by my own ...>

I don't think the current code is performing incorrectly, but its
behaviour may need a bit more explanation.  Here goes ... :)

1.  Here's a demonstration that, using text(), the horizontal and
vertical adjustments of mathematical annotations are done according to
the bounding boxes of the annotations ...

    expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
        PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
        Mg^{2+''}, Ca^{2+''}, H^{+''})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    abline(v=1:12, h=1:12, col="grey")
    y <- 1
    for (xadj in c(0, .5, 1))
      for (yadj in c(0, .5, 1)) {
        text(1:12, y, expr, adj=c(xadj, yadj))
        y <- y+1
      }

... this is a very "graphical" view of these annotations, which makes
some sense when drawing annotations within the data region, but less
sense in the margins.  We probably need to allow the user to choose a
more "textual" alignment based on the "baseline" of the text in the
annotation.  One day ...

2. The mtext() and axis() functions do not allow the user to control
"vertical" adjustment of text -- they determine this adjustment
themselves based on the setting of par(las).  In the example given by
Patrick, where the x-axis labels are horizontal, the tick labels are
bottom-adjusted -- adj=c(<user xadj>, 0) -- relative to the "line" in
the margin that the labels are to be drawn on.  This is comparable to
row 4 in the plot produced above ...

    axis(1, at=1:12, labels=expr)

... In the old code, the tick labels were vertically centred --
adj=c(<user xadj>, 0.5) -- comparable to row 5 in the plot.  Sorry that
my bug fix to correct this "wrong" behaviour broke your example;  I
always worry that this sort of thing will occur when I try to "fix" bits
of the graphics code :(

3.  One "recommended" way to get your example to work would be to place
"phantom" subscripts and superscripts in your labels so that they are
all the same "height".  It's not pretty, but here's an example, ...

    expr <- expression(F[phantom(0)]^{-phantom(0)},
        Cl[phantom(0)]^{-phantom(0)},
        NO[2]^{-phantom(0)}, NO[3]^{-phantom(0)}, 
        PO[4]^{3-phantom(0)}, SO[4]^{2-phantom(0)},
        Na[phantom(0)]^{+phantom(0)},
        NH[4]^{+phantom(0)}, K[phantom(0)]^{+phantom(0)},
        Mg[phantom(0)]^{2+phantom(0)}, Ca[phantom(0)]^{2+phantom(0)},
        H[phantom(0)]^{+phantom(0)})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    axis(1, at=1:12, labels=expr)

Hope that helps.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:10:19 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:10:19 +0200 (MET DST)
Subject: merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
Message-ID: <200205291110.NAA06480@pubhealth.ku.dk>

If the following two conditions are met:

1) all.x is TRUE

2) at least 1 row in y does not have a match in x

then any character vectors in y will be coerced to be factors. Here is a simple
example (previously provided on r-devel):

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3]) 
> y$b <- as.character(y$b) 
> z <- merge(x, y, by = 0, all.x = TRUE)
> z
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> sapply(z, data.class)
Row.names         a         b 
 "factor" "numeric"  "factor" 
> 

This problem could be fixed by changing the line in merge.data.frame:

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx) 

to:

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA 

To the extent that this is a feature rather than a bug (if so, I would like to
know why), then I would suggest that the following sentence be added to the
documentation for merge at the end of the section on all.x

"Be aware that, if all.x equals `TRUE', character vectors in `y' will be
converted to factors if any rows in y have no matching row in `x'."

Thanks,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 12:34:32 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 12:34:32 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <200205291110.NAA06480@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>

On Wed, 29 May 2002 a296180@agate.fmr.com wrote:

> If the following two conditions are met:
>
> 1) all.x is TRUE
>
> 2) at least 1 row in y does not have a match in x
>
> then any character vectors in y will be coerced to be factors. Here is a simple
> example (previously provided on r-devel):
>
> > x <- data.frame(a = 1:4)
> > y <- data.frame(b = LETTERS[1:3])
> > y$b <- as.character(y$b)
> > z <- merge(x, y, by = 0, all.x = TRUE)
> > z
>   Row.names a    b
> 1         1 1    A
> 2         2 2    B
> 3         3 3    C
> 4         4 4   <NA>
> > sapply(z, data.class)
> Row.names         a         b
>  "factor" "numeric"  "factor"
> >
>
> This problem could be fixed by changing the line in merge.data.frame:
>
> for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)
>
> to:
>
> for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

But other problems would be introduced, as the two operations are
not equivalent (and the right one has been used).

> To the extent that this is a feature rather than a bug (if so, I would like to
> know why),

I have already patiently explained it to you.  It is a side issue of
subscripting of data frames converting character columns to factor.
I have also given you a workaround.

>  then I would suggest that the following sentence be added to the
> documentation for merge at the end of the section on all.x
>
> "Be aware that, if all.x equals `TRUE', character vectors in `y' will be
> converted to factors if any rows in y have no matching row in `x'."

As I said before, this is a consequence of the general rules.  Data frames
are not designed to have character columns, and those who insist on using
them must make themselves aware of the consequences.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:54:40 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:54:40 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205291154.NAA07211@pubhealth.ku.dk>

In section 6.3 in "An Introduction to R", it says:

". . . as is, non-numeric (character and logical) vectors are coerced to be factors
. . . "

In the help for ?data.frame, it says:

Note:

     In versions of R prior to 1.4.0 (and in S3) logical columns were
     converted to factors.

I believe that the help for data.frame is correct and that, therefore, An
Introduction to R should be changed to:

". . . as is, character vectors are coerced to be factors
. . . "

Of course, this could reflect my continuing inability to understand dataframes,
but I hope not! ;-)

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 13:48:03 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 08:48:03 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
Message-ID: <15604.52739.590128.620397@gargle.gargle.HOWL>

Prof Brian D Ripley writes:
 > I have already patiently explained it to you.  It is a side issue of
 > subscripting of data frames converting character columns to factor.
 > I have also given you a workaround.

Yes, and many thanks for the patient explanations! Indeed, thanks to you and
the rest of R core for a simply amazing piece of software. Even though our
budget would allow us to use most any statistics package around, we use R
because it seems to us to be the best.

My only comment on the workaround (using I() to create vectors of class AsIs)
is that it is largely undocumented. I was concerned that, in this case,
undocumented meant "discouraged from use and possibly not present in future
versions." In any event, we will now do as you suggested.

 > As I said before, this is a consequence of the general rules.  Data frames
 > are not designed to have character columns, and those who insist on using
 > them must make themselves aware of the consequences.

Ahh! It had never been clear to me that data frames are not "designed to have
character columns." Of course, now that I carefully (re)read the documentation,
I see that this is the case. My comment here is that R certainly provides
enough rope (colClasses as "character" in read.table, for example) for
unsuspecting users like me to hang themselves on this point. Indeed, I would
wager that the vast majority of users (even some members of R core?) have
dataframes with character variables in them. My question is: Why aren't
dataframes "designed" to have character columns? This would seem to be a
desirable feature . . . but perhaps I am misunderstanding what a dataframe
really "is". Or, perhaps the answer is: "Patches are accepted." ;-)

Thanks again,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed May 29 14:32:43 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 29 May 2002 09:32:43 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>; from a296180@agate.fmr.com on Wed, May 29, 2002 at 08:48:03AM -0400
References: <200205291110.NAA06480@pubhealth.ku.dk> <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats> <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <20020529093243.B24223@jessie.research.bell-labs.com>

I do use data frames for storing character data, fully aware that I'm
stretching their intended use.  Data frames came about in the context
of modeling software (see "Statistical Models in S," the "White book"
by Chambers and Hastie, eds).  Originally, the primary use of data
frames was for holding the data given to the model fitting functions,
and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
required are simple ones (numeric and factors -- note that character
vectors are not well suited for fitting models).  Very soon after,
people began to include other types of objects (Terry Therneau's
censored/survival classes, among others, come to my mind).  So the
behaviour of the data.frame class has evolved into what we are
currently using, and some of its apparent "idiosincracies" make
perfect sense in light of its original intended purpose.

It has been argued before that we may need other more general
container classes to hold other "tabular" data (e.g., contigency
tables, data from relational databases) that don't require the 
restriction that data frames have traditionally imposed.  Of course
is not obvious to me that introducing yet another set of classes
is necessarily a good thing --- a lot of care and thought would have
to be put into the effort to ensure that any new container classes (or
any other type, for that matter) are well designed and with a clear
purpose, just like data frames were well-designed for the purpose
of holding data for fitting models.

David Kane  <David Kane wrote:
> Prof Brian D Ripley writes:
>  > I have already patiently explained it to you.  It is a side issue of
>  > subscripting of data frames converting character columns to factor.
>  > I have also given you a workaround.
> 
> Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> the rest of R core for a simply amazing piece of software. Even though our
> budget would allow us to use most any statistics package around, we use R
> because it seems to us to be the best.
> 
> My only comment on the workaround (using I() to create vectors of class AsIs)
> is that it is largely undocumented. I was concerned that, in this case,
> undocumented meant "discouraged from use and possibly not present in future
> versions." In any event, we will now do as you suggested.
> 
>  > As I said before, this is a consequence of the general rules.  Data frames
>  > are not designed to have character columns, and those who insist on using
>  > them must make themselves aware of the consequences.
> 
> Ahh! It had never been clear to me that data frames are not "designed to have
> character columns." Of course, now that I carefully (re)read the documentation,
> I see that this is the case. My comment here is that R certainly provides
> enough rope (colClasses as "character" in read.table, for example) for
> unsuspecting users like me to hang themselves on this point. Indeed, I would
> wager that the vast majority of users (even some members of R core?) have
> dataframes with character variables in them. My question is: Why aren't
> dataframes "designed" to have character columns? This would seem to be a
> desirable feature . . . but perhaps I am misunderstanding what a dataframe
> really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> 
> Thanks again,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 14:42:15 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 14:42:15 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <20020529093243.B24223@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.44.0205291437100.23828-100000@auk.stats>

In this case I think I know how to solve the idiosyncracy of the subsetting
methods.  As far as I can tell (and similar things have come up before)
the dataframe.R code is taken from an early version of S (as David James
alludes to) and a number of things have been changed since in S but the
problems remain in R.

On the other hand, I don't make such changes without ample time to think
them through ....

B

On Wed, 29 May 2002, David James wrote:

> I do use data frames for storing character data, fully aware that I'm
> stretching their intended use.  Data frames came about in the context
> of modeling software (see "Statistical Models in S," the "White book"
> by Chambers and Hastie, eds).  Originally, the primary use of data
> frames was for holding the data given to the model fitting functions,
> and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
> required are simple ones (numeric and factors -- note that character
> vectors are not well suited for fitting models).  Very soon after,
> people began to include other types of objects (Terry Therneau's
> censored/survival classes, among others, come to my mind).  So the
> behaviour of the data.frame class has evolved into what we are
> currently using, and some of its apparent "idiosincracies" make
> perfect sense in light of its original intended purpose.
>
> It has been argued before that we may need other more general
> container classes to hold other "tabular" data (e.g., contigency
> tables, data from relational databases) that don't require the
> restriction that data frames have traditionally imposed.  Of course
> is not obvious to me that introducing yet another set of classes
> is necessarily a good thing --- a lot of care and thought would have
> to be put into the effort to ensure that any new container classes (or
> any other type, for that matter) are well designed and with a clear
> purpose, just like data frames were well-designed for the purpose
> of holding data for fitting models.
>
> David Kane  <David Kane wrote:
> > Prof Brian D Ripley writes:
> >  > I have already patiently explained it to you.  It is a side issue of
> >  > subscripting of data frames converting character columns to factor.
> >  > I have also given you a workaround.
> >
> > Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> > the rest of R core for a simply amazing piece of software. Even though our
> > budget would allow us to use most any statistics package around, we use R
> > because it seems to us to be the best.
> >
> > My only comment on the workaround (using I() to create vectors of class AsIs)
> > is that it is largely undocumented. I was concerned that, in this case,
> > undocumented meant "discouraged from use and possibly not present in future
> > versions." In any event, we will now do as you suggested.
> >
> >  > As I said before, this is a consequence of the general rules.  Data frames
> >  > are not designed to have character columns, and those who insist on using
> >  > them must make themselves aware of the consequences.
> >
> > Ahh! It had never been clear to me that data frames are not "designed to have
> > character columns." Of course, now that I carefully (re)read the documentation,
> > I see that this is the case. My comment here is that R certainly provides
> > enough rope (colClasses as "character" in read.table, for example) for
> > unsuspecting users like me to hang themselves on this point. Indeed, I would
> > wager that the vast majority of users (even some members of R core?) have
> > dataframes with character variables in them. My question is: Why aren't
> > dataframes "designed" to have character columns? This would seem to be a
> > desirable feature . . . but perhaps I am misunderstanding what a dataframe
> > really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> >
> > Thanks again,
> >
> > Dave Kane
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>
> --
> David A. James
> Statistics Research, Room 2C-253            Phone:  (908) 582-3082
> Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
> Murray Hill, NJ 09794-0636
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed May 29 14:58:55 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 29 May 2002 09:58:55 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
 <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <15604.56991.282396.570441@gargle.gargle.HOWL>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> As I said before, [characters converted to factors] is a consequence of the
> general rules.  Data frames are not designed to have character columns, and
> those who insist on using them must make themselves aware of the
> consequences.

I think this is as true in S-Plus as it is in R, because S is fundamentally a
language designed for statistics, where everything is a real number or a
conditioning variable.  As a result, I (and my former group) abandoned the use
of dataframes years ago.  We created our own pseudo-class of "dataobjects"
(lists of equal-length vectors), and built our own versions of many standard
functions (read.table -> g.dataobj, merge -> g.join, "[" -> g.subset, etc.) for
them.

Dave Kane has made a strong push to use existing R classes and built-in
functions, but I'm convinced now I can bring him over to the Dark Side.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 15:33:19 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 10:33:19 -0400
Subject: warning message for setAs when using class AsIs
Message-ID: <15604.59055.655673.283148@gargle.gargle.HOWL>

This seemed too advanced for r-help and is related to the recent discussion of
character vectors in dataframes.

Following Brian Ripley's most excellent advice, we are moving to a world in
which character vectors in dataframes are always of class AsIs. The cool way of
doing this seemed to be the following:

> cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> x <- read.table("test.txt")
> class(x$V1)
[1] "factor"

This is what we expect.

> library(methods)
> setAs('character', "AsIs", function(from) I(from))
Warning message: 
Class "AsIs"not defined in: matchSignature(fnames, signature, fdef) 
>

This warning seems wrong to me, although I am not smart enough to follow the
logic through the underlying code. It *seems* as if setAs does not consider
`AsIs' to be an allowed class. However, the desired effect is achieved.

> x <- read.table("test.txt", colClasses=c("AsIs"))
> x
  V1
1  x
2  y
3  z
> class(x$V1)
[1] "AsIs"      "character"
> unlink("test.txt")
> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Any comments/suggestions would be much appreciated.

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed May 29 16:45:49 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 29 May 2002 11:45:49 -0400
Subject: warning message for setAs when using class AsIs
References: <15604.59055.655673.283148@gargle.gargle.HOWL>
Message-ID: <3CF4F7AD.2D9B5A82@research.bell-labs.com>

"David Kane
> 
> This seemed too advanced for r-help and is related to the recent discussion of
> character vectors in dataframes.
> 
> Following Brian Ripley's most excellent advice, we are moving to a world in
> which character vectors in dataframes are always of class AsIs. The cool way of
> doing this seemed to be the following:
> 
> > cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> > x <- read.table("test.txt")
> > class(x$V1)
> [1] "factor"
> 
> This is what we expect.
> 
> > library(methods)
> > setAs('character', "AsIs", function(from) I(from))
> Warning message:
> Class "AsIs"not defined in: matchSignature(fnames, signature, fdef)
> >
> 
> This warning seems wrong to me, although I am not smart enough to follow the
> logic through the underlying code. It *seems* as if setAs does not consider
> `AsIs' to be an allowed class. However, the desired effect is achieved.

In the sense of the methods package (i.e., of "S4" classes) the class
"AsIs" and all S3-style classes are undefined.  Literally, in that there
is no object containing their definition.

In general, mixing old and new classes can cause confusion.  In this
case, you will be OK if the as() function finds a specific method to
coerce character to "AsIs".  The warning is saying that there won't be
any way to infer inheritance for the class "AsIs", but inheritance for
the target class is not important for the call to as().

John

PS: the current version of read.table implicitly requires the methods
package if the argument colClasses is supplied.  Should that be made
explicit?

Otherwise, users get errors if they forget library(methods):

R> x <- read.table("testR/test.txt", colClasses=c("AsIs"))
Error: couldn't find function "as"




> 
> > x <- read.table("test.txt", colClasses=c("AsIs"))
> > x
>   V1
> 1  x
> 2  y
> 3  z
> > class(x$V1)
> [1] "AsIs"      "character"
> > unlink("test.txt")
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> 
> Any comments/suggestions would be much appreciated.
> 
> Thanks,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmascott@att.net  Thu May 30 16:55:06 2002
From: cmascott@att.net (cmascott@att.net)
Date: Thu, 30 May 2002 17:55:06 +0200 (MET DST)
Subject: se.contrast: matrix contrast.obj doesn't work as documented (PR#1613)
Message-ID: <200205301555.RAA19202@pubhealth.ku.dk>


The man page for se.contrast, when describing the contrast.obj
parameter, states that "Multiple contrasts should be specified
by a matrix as returned by contrasts."

When doing an unbalanced single factor ANOVA, using a contrast.obj
as returned by contrasts results in the following error from
qr.qty when se.contrast is called:

Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows

In fact, the matrix contrast.obj parameter that se.contrast
requires is not a contrast matrix as returned by contrasts.
It is a matrix each of whose columns is in the same form as
the vector constructed by se.contrast when contrast.obj is
a list.  This matrix has one row per observation, not one
row per treatment (contrast matrix).  See the session log
below for an example.

I wrote a little function to produce the one-row-per-
observation matrix and se.contrast works correctly when
given this matrix.

-----------------------------------------------------------------
Script started on Thu May 30 11:21:31 2002

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> debug("qr.qty")
> se.contrast(reading.aov.t, list(group=="1", group=="2"), c(-1,1), reading.df)
debugging in: qr.qty(object$qr, contrast)
debug: {
    if (!is.qr(qr)) 
        stop("argument is not a QR decomposition")
    if (is.complex(qr$qr)) {
        y <- as.matrix(y)
        if (!is.complex(y)) 
            y[] <- as.complex(y)
        return(.Call("qr_qy_cmplx", qr, y, 1, PACKAGE = "base"))
    }
    n <- nrow(qr$qr)
    p <- ncol(qr$qr)
    k <- as.integer(qr$rank)
    ny <- NCOL(y)
    if (NROW(y) != n) 
        stop("qr and y must have the same number of rows")
    storage.mode(y) <- "double"
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux), 
        y, ny, qty = y, PACKAGE = "base")$qty
}
Browse[1]> y
       
         [,1]
   [1,] -0.20
   [2,] -0.20
   [3,] -0.20
   [4,] -0.20
   [5,] -0.20
   [6,]  0.25
   [7,]  0.25
   [8,]  0.25
   [9,]  0.25
  [10,]  0.00
  [11,]  0.00
  [12,]  0.00
  [13,]  0.00
  [14,]  0.00
  [15,]  0.00
  [16,]  0.00
  [17,]  0.00
  [18,]  0.00
  [19,]  0.00
  [20,]  0.00
  [21,]  0.00
  [22,]  0.00
  [23,]  0.00
Browse[1]> c
exiting from: qr.qty(object$qr, contrast)
[1] 3.126500
> undebug("qr.qty")
> se.contrast(reading.aov.t, contr.t5, data=reading.df)
Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows
> contr.t5
   2  3  4  5
1 -1 -1 -1 -1
2  1  0  0  0
3  0  1  0  0
4  0  0  1  0
5  0  0  0  1
> q()
Save workspace image? [y/n/c]: n

Script done on Thu May 30 11:25:49 2002
-----------------------------------------------------------------


--please do not edit the information below--

Version:
 platform = i386--freebsd4.3
 arch = i386
 os = freebsd4.3
 system = i386, freebsd4.3
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Thu May 30 23:41:05 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 31 May 2002 00:41:05 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205302241.AAA20637@pubhealth.ku.dk>


Just a few documentation "bugs" that I've noticed recently.

1.  In the help for (dpqr)weibull(), the formula given for the
    variance of a Weibull is wrong.  The correct formula is

      b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

    Note that I've also changed Gamma to gamma, which I think is
    preferable since this is actually the name of the gamma() function
    in R (whereas Gamma() is quite a different animal).

2.  The help for quantile() function (in base) refers to the function
    ecdf(), but doesn't mention that it is in package stepfun (which
    is not loaded by default).  It would be helpful if it did.

3.  There's a typo in the help for optim(): "comprehansive".

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 5.0
 year = 2002
 month = 05
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 11:32:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 12:32:56 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205311032.MAA25305@pubhealth.ku.dk>

>>>>> "Brett" == Brett Presnell <presnell@stat.ufl.edu> writes:

    Brett> Just a few documentation "bugs" that I've noticed
    Brett> recently.

Thank you!

    Brett> 1.  In the help for (dpqr)weibull(), the formula
    Brett> given for the variance of a Weibull is wrong.  

yes..

    Brett> The correct formula is

    Brett>       b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

which is even wronger, but I'm sure you meant

         	 b^2 *     (gamma(1 + 2/a) - (gamma(1 + 1/a))^2)


    Brett>     Note that I've also changed Gamma to gamma, which
    Brett> I think is preferable since this is actually the name
    Brett> of the gamma() function in R (whereas Gamma() is
    Brett> quite a different animal).

(but in LaTeX, that's  \Gamma  and that's why we have used it
 even for the non-latex formula (you see in the text and html
 version of help).

    Brett> 2.  The help for quantile() function (in base) refers
    Brett> to the function ecdf(), but doesn't mention that it
    Brett> is in package stepfun (which is not loaded by
    Brett> default).  It would be helpful if it did.

yes, it seems, thank you; I'm adding it.

    Brett> 3.  There's a typo in the help for optim():
    Brett> "comprehansive".

(BDR has already fixed this).

Thanks once more!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 13:40:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 14:40:07 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205311240.OAA27466@pubhealth.ku.dk>

>>>>> "a296180" == a296180  <a296180@agate.fmr.com> writes:

    a296180> In section 6.3 in "An Introduction to R", it says:
    a296180> ". . . as is, non-numeric (character and logical)
    a296180> vectors are coerced to be factors . . . "

    a296180> In the help for ?data.frame, it says:

    a296180> Note:

    a296180>      In versions of R prior to 1.4.0 (and in S3)
    a296180> logical columns were converted to factors.

    a296180> I believe that the help for data.frame is correct
    a296180> and that, therefore, An Introduction to R should be
    a296180> changed to:

    a296180> ". . . as is, character vectors are coerced to be
    a296180> factors . . . "

Thank you. 
Actually, I added ", logicals" earlier in the sentence (in the
source which is R-intro.texi !) to 

   @item
   Numeric vectors, logicals and factors are included as is, and character
   vectors are coerced to be factors, whose levels are the unique values
   appearing in the vector.

    a296180> Of course, this could reflect my continuing
    a296180> inability to understand dataframes, but I hope not! ;-)

well hoped ;-)  you are right here.

As a matter of fact we are quite happy for careful readers (and
reports) of R-intro, because this is something not so
interesting to reread for R corers...  
Hence: Thanks again!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 00:17:10 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:17:10 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.58586.18835.665434@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > In either case, you probably want to upgrade. Even 5.005 is "old",
> > so the upgrade to 5.6.1 is probably advisable.
>
> Correct.  R 1.6 will unconditionally assume 5.005.

I am sorry to hear that.

> >> 1.4.1 instead. Can I expect this to cause any problems, for
> >> instance when I build a package?
>
> > Possibly, though probably only Kurt et al could say for sure.
>
> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> 5.6.1.

Unfortunately, that is not an option at the moment. I guess most
people working with R are professionals with the means to work
with relative new hardware. I have to make do with a very old
system, a disk drive that is almost full, so no possibility to
compile a recent version of gcc, or upgrade anything that
demands a C compiler that is not from last century.

I write quite some software myself. Working with an old system
like I have has the advantage that I never hear people complain
that my software doesn't work on their system because there
system is too old.

But I have to accept that my system, for the time it keeps
working, is becoming state-of-the-art-long-gone.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 00:35:09 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 01:35:09 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15566.58739.585706.678109@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>

Kurt Hornik scribeva...

> > I had to edit tkConfig.sh to solve this problem. This line:
>
> > TK_XINCLUDES='# no special path needed'
>
> > changed to this:
>
> > TK_XINCLUDES=
>
>
> > After this fix, R was configured for tcl/tk, and the package
> > tcltk seems to work OK (at least on this platform).
>
> A bug in your Tcl/Tk installation, I think.

If it is, it never caused any problem before, with older
versions of R.

> Which version of Linux is this?

This is on a recent distro of SuSE. Don't know what version. The
kernel is 2.4.4-4GB from May 2001. The same problem occured on
HP-UX 10.20 (July 1996).

The problem did not occur on an older version of SuSE for Alpha
from November 1999, or my own RedHat 5.0 (November 1997, I
think).

These are the same four systems mentioned in bug report PR#1499
about unresolved symbols for tcltk.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Elvie6761q57@dolfijn.nl  Wed May  1 23:34:49 2002
From: Elvie6761q57@dolfijn.nl (Elvie6761q57@dolfijn.nl)
Date: Wed, 01 May 2002 12:34:49 -1000
Subject: [Rd] To interested parties.
Message-ID: <026a22d10a6c$8137c7d8$5ca00bd2@nummmp>

------=_NextPart_000_00A5_83A62A4B.B1860A75
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: base64


Vm9sdW1lIE92ZXIgMS4yIFRyaWxsaW9uIERvbGxhcnMgYSBEYXkgDQpUYXAg
aW50byB0aGUgaGlnaC1pbmNvbWUgb3Bwb3J0dW5pdHkNCmZvdW5kIGluIHRo
ZSBXb3JsZCdzIGxhcmdlc3QgZmluYW5jaWFsIG1hcmtldC4gDQoNClRoZSBG
b3JlaWduIEN1cnJlbmN5IE1hcmtldHMNCg0KLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCg0KRGlzY292ZXIgaG93Og0KJDEwLDAwMCAi
cHJvcGVybHkgcG9zaXRpb25lZCIgaW4gdGhlIEV1cm8gdnMuIHRoZSBVUyBE
b2xsYXIsDQpjb3VsZCBwb3RlbnRpYWxseSBtYWtlIGEgMjAtMzBrIG1vdmUg
d2l0aGluIDYtOCBtb250aHMhDQoNCkxlYXJuIGhvdyBzdWNjZXNzZnVsIHBy
b2Zlc3Npb25hbCB0cmFkZXJzIGFzc2lzdGluZyB5b3UgY2FuIHBvdGVudGlh
bGx5DQphY2hpZXZlIGRvdWJsZS1kaWdpdCBtb250aGx5IHJldHVybnMgb2Yg
MTAtMzAlIG9yIG1vcmUhDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQoNCkZvciBhIEZSRUUgRVVSTyByZXBvcnQuDQpDbGljayBv
biB0aGUgbGluayBiZWxvdy4gDQoNCmh0dHA6Ly93d3cuaW52ZXN0bWVudDR1
LmNvbS9DdXJyZW5jeUV4Y2hhbmdlLw0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KDQpUbyBiZSB0YWtlbiBvZmYgb3VyIG1haWxp
bmcgbGlzdC4NCg0KaHR0cDovL3d3dy5pbnZlc3RtZW50NHUuY29tL3Rha2Vt
ZW9mZi8NCg0KNzM4NVBQREcwLTcyN3VxR0IwOTM5a3RHTTgtODYxR2JydTk3
MDVlclJTNS0xOTBtVHZVbDQ4
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:07:45 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:07:45 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
References: <15566.58739.585706.678109@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010119420.351-100000@kleigh.nl>
Message-ID: <15567.48753.173522.300608@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > I had to edit tkConfig.sh to solve this problem. This line:
>> 
>> > TK_XINCLUDES='# no special path needed'
>> 
>> > changed to this:
>> 
>> > TK_XINCLUDES=
>> 
>> 
>> > After this fix, R was configured for tcl/tk, and the package
>> > tcltk seems to work OK (at least on this platform).
>> 
>> A bug in your Tcl/Tk installation, I think.

> If it is, it never caused any problem before, with older versions of
> R.

Interesting.  My tkConfig.sh has

# -I switch(es) to use to make all of the X11 include files accessible:
TK_XINCLUDES='-I/usr/X11R6/include'

and I would not think that '# no special path needed' is a valid switch.

If this problem persists acroess platforms we can work around it but I
must say that Tcl/Tk configuration testing is getting a bit silly after
all.

>> Which version of Linux is this?

> This is on a recent distro of SuSE. Don't know what version. The
> kernel is 2.4.4-4GB from May 2001. The same problem occured on
> HP-UX 10.20 (July 1996).

> The problem did not occur on an older version of SuSE for Alpha
> from November 1999, or my own RedHat 5.0 (November 1997, I
> think).

Maybe we did not use TK_XINCLUDES then.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed May  1 11:11:34 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 1 May 2002 12:11:34 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
References: <15566.58586.18835.665434@mithrandir.hornik.net>
 <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <15567.48982.979129.244967@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> > In either case, you probably want to upgrade. Even 5.005 is "old",
>> > so the upgrade to 5.6.1 is probably advisable.
>> 
>> Correct.  R 1.6 will unconditionally assume 5.005.

> I am sorry to hear that.

>> >> 1.4.1 instead. Can I expect this to cause any problems, for
>> >> instance when I build a package?
>> 
>> > Possibly, though probably only Kurt et al could say for sure.
>> 
>> As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
>> 5.6.1.

> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

> I write quite some software myself. Working with an old system
> like I have has the advantage that I never hear people complain
> that my software doesn't work on their system because there
> system is too old.

Following the same reasoning, wouldn't one always stay with R 0.14 or
similar?  Note that e.g. requiring Perl 5.005 only has implications for
*developers* and not for users because we have no dependency on Perl at
run-time.  And the hope would be that developers have access to software
which is 4 years old and typically available in pre-packaged binaries.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 12:27:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 12:27:24 +0100 (BST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205010059110.351-100000@kleigh.nl>
Message-ID: <Pine.LNX.4.31.0205011221510.10970-100000@gannet.stats>

On Wed, 1 May 2002, Peter Kleiweg wrote:

> Kurt Hornik scribeva...
>
> > > In either case, you probably want to upgrade. Even 5.005 is "old",
> > > so the upgrade to 5.6.1 is probably advisable.
> >
> > Correct.  R 1.6 will unconditionally assume 5.005.
>
> I am sorry to hear that.
>
> > >> 1.4.1 instead. Can I expect this to cause any problems, for
> > >> instance when I build a package?
> >
> > > Possibly, though probably only Kurt et al could say for sure.
> >
> > As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
> > 5.6.1.
>
> Unfortunately, that is not an option at the moment. I guess most
> people working with R are professionals with the means to work
> with relative new hardware. I have to make do with a very old
> system, a disk drive that is almost full, so no possibility to
> compile a recent version of gcc, or upgrade anything that
> demands a C compiler that is not from last century.

I think we are almost all amateurs at computing.  Certainly most of my R
development is done on machines bought with my own money, the main ones
being 4 and 3 years' old respectively.

I think the solution may be to not upgrade R either!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:12:38 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:12:38 +0200 (CEST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <15567.48753.173522.300608@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011406510.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:
>
> > Kurt Hornik scribeva...
> >> > I had to edit tkConfig.sh to solve this problem. This line:
> >>
> >> > TK_XINCLUDES='# no special path needed'
> >>
> >> > changed to this:
> >>
> >> > TK_XINCLUDES=
> >>
> >>
> >> > After this fix, R was configured for tcl/tk, and the package
> >> > tcltk seems to work OK (at least on this platform).
> >>
> >> A bug in your Tcl/Tk installation, I think.
>
> > If it is, it never caused any problem before, with older versions of
> > R.
>
> Interesting.  My tkConfig.sh has
>
> # -I switch(es) to use to make all of the X11 include files accessible:
> TK_XINCLUDES='-I/usr/X11R6/include'
>
> and I would not think that '# no special path needed' is a valid switch.
>
> If this problem persists acroess platforms we can work around it but I
> must say that Tcl/Tk configuration testing is getting a bit silly after
> all.

Of course it is a bug in tkConfig.sh. But since I encountered it
on two out of four platforms, one very old, one new, it could be
a problem more people will run into. Whether this is something
the configure script of R should take care of is something I
don't have an opinion about.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 13:33:04 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 14:33:04 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15567.48982.979129.244967@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> Peter Kleiweg writes:

> > I write quite some software myself. Working with an old system
> > like I have has the advantage that I never hear people complain
> > that my software doesn't work on their system because there
> > system is too old.
>
> Following the same reasoning, wouldn't one always stay with R 0.14 or
> similar?  Note that e.g. requiring Perl 5.005 only has implications for
> *developers* and not for users because we have no dependency on Perl at
> run-time.  And the hope would be that developers have access to software
> which is 4 years old and typically available in pre-packaged binaries.

Of course R should be developed further. But requiring Perl
5.005 does effect end users. I have stopped downloading
binaries long ago, because they never work on older systems. So
just to use R, I have to compile R myself. And just installing
the recommended packages for R 1.5.0 needs Perl 5.005.

And what about new or upgraded packages? Do you ask users
to reinstall R just because they want to add a package, or do
you keep packages compatible with older versions of R? I always
go for backward compatibility as much as possible when I'm
developing software.

Of course, my system is very old. There won't be many people
left working with such an old system. I can understand you have
to draw the line somewhere. But the package 'tcltk' won't work
on a system just over two years old. I guess this will be a
problem for many people.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:12:04 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:12:04 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011413170.426-100000@kleigh.nl>
Message-ID: <87helsovvf.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    peter> Of course, my system is very old. There won't be many people
    peter> left working with such an old system. I can understand you have
    peter> to draw the line somewhere. But the package 'tcltk' won't work
    peter> on a system just over two years old. I guess this will be a
    peter> problem for many people.

Sure, but there are perfectly great stat language/packages which are
small, compilable, and work like a charm, without some of the great
benefits of R.

XLispStat comes to mind, and in fact, has had functional
cross-platform widgets for a while.

Of course, there is always S-PLUS.  It doesn't require building,
and may be comparable to a full installation of R, depending on what
that means to you.

It seems like it might be worth reconsidering your software platform
in light of your hardware requirements.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ale@ini.phys.ethz.ch  Wed May  1 14:23:16 2002
From: ale@ini.phys.ethz.ch (ale@ini.phys.ethz.ch)
Date: Wed, 1 May 2002 15:23:16 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011323.PAA27271@pubhealth.ku.dk>

Full_Name: Alessandro Usseglio V.
Version: 1.5.0
OS: Linux RH 7.1
Submission from: (NULL) (130.60.71.55)


Error during configure

$ ./configure

[...]
checking for an ANSI C-conforming const... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for long long... yes
checking size of long long... 8
checking for long double... yes
checking size of long double... 12
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from fort77... --verbose
checking for Fortran 77 libraries...
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore, extra
underscore
checking whether fort77 and gcc agree on int and double... configure: WARNING:
fort77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?
$

>From `config.log'

configure:14869: checking whether fort77 and gcc agree on int and double
conftestf.f:
   cftest:
conftestf.o: In function `cftest_':
/disks/zebra3/ale/Local/temp/R-1.5.0/conftestf.f:9: undefined reference to
`pow_di'collect2: ld returned 1 exit status
configure:14942: WARNING: fort77 and gcc disagree on int and double
configure:14944: error: Maybe change CFLAGS or FFLAGS?

I hope that's enough to understand why I cannot configure.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed May  1 14:32:37 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 1 May 2002 15:32:37 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <87helsovvf.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>

A.J. Rossini scribeva...

> Sure, but there are perfectly great stat language/packages which are
> small, compilable, and work like a charm, without some of the great
> benefits of R.
>
> XLispStat comes to mind, and in fact, has had functional
> cross-platform widgets for a while.
>
> Of course, there is always S-PLUS.  It doesn't require building,
> and may be comparable to a full installation of R, depending on what
> that means to you.
>
> It seems like it might be worth reconsidering your software platform
> in light of your hardware requirements.

It seems some people think I am criticising the development of R
because it won't work (in some time) on my machine. That is not
the case. My comments are meant in general, as something to
think about. My only interest is in helping the development of
R, with the limited suggestions I can offer.

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 14:49:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 15:49:41 +0200 (MET DST)
Subject: [Rd] configure error: Maybe change CFLAGS or FFLAGS? (PR#1501)
Message-ID: <200205011349.PAA27465@pubhealth.ku.dk>

First, this is not a bug in R, so please don't use the BUGS database for
errors on your own system.

The message actually means that fort77 is not working properly: some
library is missing.

On Wed, 1 May 2002 ale@ini.phys.ethz.ch wrote:

> Full_Name: Alessandro Usseglio V.
> Version: 1.5.0
> OS: Linux RH 7.1
> Submission from: (NULL) (130.60.71.55)

Please install g77 and try again.  On RH7.2 it is in rpm  gcc-g77-2.96-98.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May  1 14:55:22 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2002 06:55:22 -0700
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
References: <Pine.LNX.4.33.0205011526080.426-100000@kleigh.nl>
Message-ID: <87y9f4nfat.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Kleiweg <kleiweg@let.rug.nl> writes:

    >> It seems like it might be worth reconsidering your software platform
    >> in light of your hardware requirements.

    peter> It seems some people think I am criticising the development of R
    peter> because it won't work (in some time) on my machine. That is not
    peter> the case. My comments are meant in general, as something to
    peter> think about. My only interest is in helping the development of
    peter> R, with the limited suggestions I can offer.

No, the general issue is that software construction is difficult.
There are tradeoffs, and your comments actually are more specific than
general, bringing up a situation which is not necessarily common.

People do want to have ancient software supported.  I.e. with ESS, we
ended up supporting truly ancient, unbuildable (on modern compiler
platforms) software, i.e. Emacs 19.28, because it was what DEC
shipped, and a vocal (SMALL) minority wanted it.  It crippled (but
didn't halt) development of some rather useful features, because of
lisp-level functionality that was introduced by the end of 19.xx
series, Emacs 19.34, which was deployed around 1995 or so (I'd have to
check dates, but its ancient).  In retrospect, we should've nuked
support in 1999 (not 2001).

I don't feel that your comments are critical, but I do feel that they
aren't addressing the point (well, it's one, anyway), which is how to
get a usable system built and deployed given the constraints of all
(developers and users) involved.  Your constraints are not really
solvable (want R 1.5+, and Perl 4..), and hence, I suggested (modern,
functional) tools which may solve it, of course introducing a
completely different (and unevaluated) set of tradeoffs...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lsjensen@micron.com  Wed May  1 17:35:04 2002
From: lsjensen@micron.com (lsjensen)
Date: Wed, 1 May 2002 10:35:04 -0600
Subject: [Rd] converting #sec to POSIX* format
Message-ID: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>

Sure I'm missing something simple here, but I haven't been able to find a
easy way to convert a pure numeric (# of seconds since the beginning of
1970) back into a POSIX* object. 

ex.
> z<-as.POSIXct(Sys.time()) 
> z
[1] "2002-05-01 10:33:56 Mountain Daylight Time"
> x<-unclass(z)
> x
[1] 1020270836

Is there a simple way to transform x back into a POSIX* object similar to z?

Landon Jensen
Micron Technology, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  1 17:53:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 May 2002 18:53:44 +0200
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
References: <D7E178FC91F3D21186A90008C7B9A5B810080FD9@ntexchange09.micron.com>
Message-ID: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>

lsjensen <lsjensen@micron.com> writes:

> Sure I'm missing something simple here, but I haven't been able to find a
> easy way to convert a pure numeric (# of seconds since the beginning of
> 1970) back into a POSIX* object. 
> 
> ex.
> > z<-as.POSIXct(Sys.time()) 
> > z
> [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > x<-unclass(z)
> > x
> [1] 1020270836
> 
> Is there a simple way to transform x back into a POSIX* object similar to z?

> 1020270836 + ISOdate(1970,1,1,0,0)
[1] "2002-05-01 18:33:56 CEST"


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  1 18:32:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 1 May 2002 18:32:31 +0100 (BST)
Subject: [Rd] converting #sec to POSIX* format
In-Reply-To: <x24rhrn71j.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0205011830210.31101-100000@gannet.stats>

On 1 May 2002, Peter Dalgaard BSA wrote:

> lsjensen <lsjensen@micron.com> writes:
>
> > Sure I'm missing something simple here, but I haven't been able to find a
> > easy way to convert a pure numeric (# of seconds since the beginning of
> > 1970) back into a POSIX* object.
> >
> > ex.
> > > z<-as.POSIXct(Sys.time())

It's POSIXct already.

> > > z
> > [1] "2002-05-01 10:33:56 Mountain Daylight Time"
> > > x<-unclass(z)
> > > x
> > [1] 1020270836
> >
> > Is there a simple way to transform x back into a POSIX* object similar to z?
>
> > 1020270836 + ISOdate(1970,1,1,0,0)
> [1] "2002-05-01 18:33:56 CEST"

Or, as you did unclass(), reverse that by classing it:

class(x) <- c("POSIXt", "POSIXct")

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Wed May  1 19:45:41 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Wed, 1 May 2002 11:45:41 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.SOL.4.31.0205011141440.9179-100000@pooh.Berkeley.EDU>

Okay, I found the cause of the problem. Because mandrake 8.2 shipped with
a prerelease of g77 library,

    __G77_LIBU77_VERSION__: 0.5.26 20000731 (prerelease)

after upgrading to

    __G77_LIBU77_VERSION__: 0.5.26 20020220 (release)

then the segmentation error disappeared. I suspect other mandrake 8.2
users will experience the same problem.

Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  1 21:39:45 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 1 May 2002 16:39:45 -0400
Subject: [Rd] Problems with embedded R for v1.5.0
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C42@Groexmbcr10.pfizer.com>


I've just tried using both Duncan's RSPython and Walter Moriera's rpy with R
1.5.0.  Both segfaulted during startup in exactly the same place,
apparently while trying to load the ctest package.  Recompiling the packages
doesn't seem to have any effect on this outcome.

Here's the first few lines of a gdb backtrace:

#0  0xff132df8 in strlen () from /usr/lib/libc.so.1
#1  0xfe612bcc in Rf_mkChar (name=0x12a46d9 <Address 0x12a46d9 out of
bounds>)
    at dstruct.c:102
#2  0xfe5f5f40 in do_readDCF (call=0x0, op=0xffffffff, args=0x950ce0, 
    env=0x954370) at dcf.c:109
#3  0xfe64d010 in do_internal (call=0xfe7694f4, op=0x12b9c4, args=0x950ce0, 
    env=0x9503b8) at names.c:1020

(I can provide the full trace if desired)

Has anyone else found problems with embedded R with version 1.5.0?  Did
anything change in the proper way to start up embedded R?

-Greg

Obligatory version info:

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status   Patched             
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      30                  
language R                   

> uname -a 
SunOS gsun124 5.8 Generic_108528-03 sun4u sparc SUNW,Ultra-5_10

> gcc -v
Reading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/2.95.2/specs
gcc version 2.95.2 19991024 (release)





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gonin@genethon.fr  Thu May  2 08:30:08 2002
From: gonin@genethon.fr (gonin@genethon.fr)
Date: Thu, 2 May 2002 09:30:08 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020730.JAA00989@pubhealth.ku.dk>

Hi R colleagues,

I don't know whether this is a bug, but something weird happen with R-GNOME.
Version 1.5.0.
I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
R can be started with or without the Gnome interface: fine.
However, when I start with Gnome interface, jpeg and a few other 
things are unavailable (checked using capabilities()), whereas 
everything is available (except Gnome) when I start R without Gnome.
Also, some calls seem available with Gnome: system("..") returns nothing.
Maybe this is related to the experimental nature of the Gnome interface.
Hope that helps.
Cheers,
-- 
----------------------------
Patrick Gonin, DVM, PhD
Head of in vivo Evaluation Dept
Généthon
1 bis, rue de l'Internationale- BP 60
91002 EVRY CEDEX
FRANCE
Tel: 33-1-69-47-10-21
Fax: 33-1-60-77-86-98
gonin@genethon.fr
----------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 10:22:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:22:25 +0200 (MET DST)
Subject: [Rd] R-GNOME (PR#1503)
Message-ID: <200205020922.LAA02927@pubhealth.ku.dk>

On Thu, 2 May 2002 gonin@genethon.fr wrote:

> Hi R colleagues,
>
> I don't know whether this is a bug, but something weird happen with R-GNOME.
> Version 1.5.0.
> I compiled the stuff under i-686 Linux RH 7.2 using ./configure --with-gnome.
> R can be started with or without the Gnome interface: fine.
> However, when I start with Gnome interface, jpeg and a few other
> things are unavailable (checked using capabilities()), whereas
> everything is available (except Gnome) when I start R without Gnome.

Have you actually tried them?  capabilities() can be wrong, as it only
reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
do all work under R --gui=gnome.  (Well, actually gnome has problems with
its dialogs as it makes assumptions about the X11 system in use and I am
not using XFree86.)

I will try to work out a more definitive algorithm for capabilities, but
its main use is to test if checks should be run, so it needs to be
conservative.  And as you note, Gnome is experimental and has a separate
maintainer ....

> Also, some calls seem available with Gnome: system("..") returns nothing.
> Maybe this is related to the experimental nature of the Gnome interface.
> Hope that helps.
> Cheers,
> --
> ----------------------------
> Patrick Gonin, DVM, PhD
> Head of in vivo Evaluation Dept
> Généthon
> 1 bis, rue de l'Internationale- BP 60
> 91002 EVRY CEDEX
> FRANCE
> Tel: 33-1-69-47-10-21
> Fax: 33-1-60-77-86-98
> gonin@genethon.fr
> ----------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luchini@ehess.cnrs-mrs.fr  Thu May  2 11:23:22 2002
From: luchini@ehess.cnrs-mrs.fr (luchini@ehess.cnrs-mrs.fr)
Date: Thu, 2 May 2002 12:23:22 +0200 (MET DST)
Subject: [Rd] pictex (PR#1505)
Message-ID: <200205021023.MAA03892@pubhealth.ku.dk>

Full_Name: Stephane Luchini
Version: 1.4.1
OS: Redhat 7.2
Submission from: (NULL) (193.50.233.43)


I want to use R to plot an histogram of a vector of size 759 with min=-63260e+06

and max=3.700646.

When I use X11 as the output device, there is no problem to obtain the desired 
graphics using the following instructions:

hist(VED,br=60,prob=TRUE)
lines(density(VED,bw=7.668e+05))

Now, if I use the pictex driver :
pictex(file = "test.pictex")

The whole pictex code is not generated. It stops after line 760.
When I put debug = TRUE, it stops after 243 lines.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu May  2 11:32:10 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Thu, 02 May 2002 12:32:10 +0200 (CEST)
Subject: [Rd] R-GNOME (PR#1503)
In-Reply-To: <200205020922.LAA02927@pubhealth.ku.dk>
Message-ID: <XFMail.20020502123210.plummer@iarc.fr>

On 02-May-2002 ripley@stats.ox.ac.uk wrote:
> On Thu, 2 May 2002 gonin@genethon.fr wrote:
> 
>> Hi R colleagues,
>>
>> I don't know whether this is a bug, but something weird happen with R-GNOME.
>> Version 1.5.0.
>> I compiled the stuff under i-686 Linux RH 7.2 using ./configure
>> --with-gnome.
>> R can be started with or without the Gnome interface: fine.
>> However, when I start with Gnome interface, jpeg and a few other
>> things are unavailable (checked using capabilities()), whereas
>> everything is available (except Gnome) when I start R without Gnome.
> 
> Have you actually tried them?  capabilities() can be wrong, as it only
> reports what it is sure about.  For me under RH7.2 jpeg(), png() and X11()
> do all work under R --gui=gnome.  (Well, actually gnome has problems with
> its dialogs as it makes assumptions about the X11 system in use and I am
> not using XFree86.)
> 
> I will try to work out a more definitive algorithm for capabilities, but
> its main use is to test if checks should be run, so it needs to be
> conservative.  And as you note, Gnome is experimental and has a separate
> maintainer ....

jpeg() is available under the GNOME interface and works correctly.

>> Also, some calls seem available with Gnome: system("..") returns nothing.
>> Maybe this is related to the experimental nature of the Gnome interface.
>> Hope that helps.

The GNOME port currently uses the same version of do_system as the unix
command line port of R.  This sends the output of the system call to
the standard output.  So, for example, if you R-GNOME from a terminal,
the output will appear in the terminal and not the R GNOME console.
GNOME needs its own version of do_system.  I will fix this for R 1.5.1.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  2 11:33:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 2 May 2002 11:33:47 +0100 (BST)
Subject: [Rd] Rversion.h
Message-ID: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>

Our current intention is to no longer include Rversion.h from R.h as from
R 1.6.0 (which is months away).

Package maintainers when revising code might like to check if they
actually use Rversion.h, and if so include it explicitly.

I did a quick grep through the CRAN packages, and in all but one case
(mda) the test is for R < 1.2.0, so it may be simplest just to tidy up
and add  `Depends: R (>= 1.2.0)'  to the DESCRIPTION file.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  2 13:51:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 May 2002 14:51:43 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
Message-ID: <x26626lnkw.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Our current intention is to no longer include Rversion.h from R.h as from
> R 1.6.0 (which is months away).

For the inquisitive minds: The reason we want to do this lies in
makefile dependencies: Every file that includes R.h currently ends up
depending on the date stamp which changes automatically every 24
hours. So even a simple bug fix involves substantial rebuilding
activity, which is annoying for the developers, and also carries some
risk of compiler warning getting missed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 16:52:44 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 17:52:44 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <x26626lnkw.fsf@blueberry.kubism.ku.dk>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
Message-ID: <15569.24780.734088.702887@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ripley@stats.ox.ac.uk writes:
>> Our current intention is to no longer include Rversion.h from R.h as from
>> R 1.6.0 (which is months away).

> For the inquisitive minds: The reason we want to do this lies in
> makefile dependencies: Every file that includes R.h currently ends up
> depending on the date stamp which changes automatically every 24
> hours. So even a simple bug fix involves substantial rebuilding
> activity, which is annoying for the developers, and also carries some
> risk of compiler warning getting missed.

Note that this implies that packages which unconditionally use R_VERSION
or R_Version (note that R-exts in facts recommends

  #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

will fail to install under the current r-devel.

These packages seems to be

	Matrix
	RArcInfo
	RODBC
	XML
	chron
	gafit
	mda
	odesolve

(two of which I happen to maintain myself ...) as well as the Omegahat
packages

	CORBA
	RGnumeric
	RSPerl
	RSPython
	SJava
	SNetscape
	SXalan
	Slcc
	Sxslt

It would be great if we could have updates of these packages in the near
future, either via following the recommended procedure from R-exts or,
perhaps preferably, removing the pre-1.2.0 compatibility code and adding

	Depends: R (>= 1.2.0)

in the package DESCRIPTION file.

Thanks
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu May  2 17:34:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 2 May 2002 18:34:11 +0200
Subject: [Rd] Rversion.h
In-Reply-To: <15569.24780.734088.702887@mithrandir.hornik.net>
References: <Pine.LNX.4.31.0205021125370.4830-100000@gannet.stats>
 <x26626lnkw.fsf@blueberry.kubism.ku.dk>
 <15569.24780.734088.702887@mithrandir.hornik.net>
Message-ID: <15569.27267.926617.344251@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> Peter Dalgaard BSA writes:
>> ripley@stats.ox.ac.uk writes:
>>> Our current intention is to no longer include Rversion.h from R.h as from
>>> R 1.6.0 (which is months away).

>> For the inquisitive minds: The reason we want to do this lies in
>> makefile dependencies: Every file that includes R.h currently ends up
>> depending on the date stamp which changes automatically every 24
>> hours. So even a simple bug fix involves substantial rebuilding
>> activity, which is annoying for the developers, and also carries some
>> risk of compiler warning getting missed.

> Note that this implies that packages which unconditionally use R_VERSION
> or R_Version (note that R-exts in facts recommends

>   #if defined(R_VERSION) && R_VERSION >= R_Version(0, 99, 0)

> will fail to install under the current r-devel.

> These packages seems to be

> ...

> It would be great if we could have updates of these packages in the near
> future, either via following the recommended procedure from R-exts or,
> perhaps preferably, removing the pre-1.2.0 compatibility code and adding

> 	Depends: R (>= 1.2.0)

> in the package DESCRIPTION file.

Sorry, that's not quite correct.

As we can have tests in both
    #if R_VERSION < R_Version(1, 2, 0)
and
    #if R_VERSION >= R_Version(1, 2, 0)
style, following the 'recommended procedure' is obviously not good
enough ...

I suggest removing pre-1.2.0 compatibility code and adding
   Depends: R (>= 1.2.0)
in the package DESCRIPTION file.

For version checks for later versions please add
   #include <Rversion.h>

CRAN/Omegaht packages affected by the change are

CORBA
Matrix
RArcInfo
RGnumeric
RMySQL
RODBC
ROracle
RSPerl
RSPython
RSQLite
SJava
SNetscape
SXalan
Slcc
Sxslt
XML
chron
gafit
mda
odesolve

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From drew.tyre@csiro.au  Fri May  3 03:26:08 2002
From: drew.tyre@csiro.au (drew.tyre@csiro.au)
Date: Fri, 3 May 2002 04:26:08 +0200 (MET DST)
Subject: [Rd] copy or save to metafile from graphics device shrinks plots (PR#1507)
Message-ID: <200205030226.EAA09900@pubhealth.ku.dk>

Full_Name: Drew Tyre
Version: 1.4.0
OS: Win 2000
Submission from: (NULL) (140.253.74.225)


When creating a rather complex plot, the resulting figures 'shrink' when either
copied to the clipboard or saved as a metafile using the GUI menu. Also saving
as postscript or pdf causes the same problem, as does printing the figure
directly from the graphics window. Only the figure areas shrink, the contents
appear to have the same size, leading to clipping around the edges. Saving as
PNG format works, as does drawing directly to a win.metafile() device. I haven't
tried bitmap format.

The code is below; Aus() is an extension of oz() written by Nick Ellis - but
doesn't seem to be related to the problem (ie. replacing that call with a simple
plot() still creates the problem). I've tried to reproduce it with simpler plots
for some hours to no avail. Bug 1242 seems like the only related one, but I'm
not using lattice.grid. Given that there is a straightforward workaround
(suggested by Nick Ellis) by writing directly to a metafile device it seems like
a low priority. I'm happy to provide the data if anyone wants to look at it in
detail. 
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.0            
year     2001           
month    12             
day      19             
language R              

[1] ".GlobalEnv"        "sulphuric.accepta" "package:MASS"     
[4] "package:ctest"     "Autoloads"         "package:base"    


#source("C:/Program Files/R/rw1040/library/Aus/source.q")
#win.metafile("mapfigure.emf")
par(mfrow=c(2,2),mar=c(5.1,4.1,0.1,0.1))
Aus()
hermit.hill <- list(x=136.8314,y=-30.02850)
points(hermit.hill,pch="*",cex=2)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.accepta)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("B",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(sulphuric.isopods)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("C",side=2,cex=2,las=2,at=par("yaxp")[2])

attach(bopeechee.zeidleri)
plot(easting,northing,type="n",bty="n",
axes=FALSE,xlab="",ylab="")
filled <- occupied == 1
points(easting[filled],northing[filled],
pch=19,cex=log10(area[filled]))
points(easting[!filled],northing[!filled],
pch=21,cex=log10(area[!filled]))
detach(2)

plot.limits <- par(c("xaxp","yaxp"))
segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c("100
m"))

mtext("D",side=2,cex=2,las=2,at=par("yaxp")[2])
#dev.off()

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 07:52:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 08:52:48 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205030652.IAA10584@pubhealth.ku.dk>

On Fri, 3 May 2002 drew.tyre@csiro.au wrote:

> Full_Name: Drew Tyre
> Version: 1.4.0
> OS: Win 2000
> Submission from: (NULL) (140.253.74.225)
>
>
> When creating a rather complex plot, the resulting figures 'shrink' when either
> copied to the clipboard or saved as a metafile using the GUI menu. Also saving
> as postscript or pdf causes the same problem, as does printing the figure
> directly from the graphics window. Only the figure areas shrink, the contents

That says the problem is in the replaying of graphics and not to do
with metafiles.  (But I've shorten the subject for the sake of R-bugs.)

1.4.0 was the first version with new graphics drivers, and we would
first need to know if this is still present in 1.5.0, and also if specific
to Windows.  Could you test 1.5.0 once that becomes available, and let us
know?  If the problem is still present, it would help if we had a complete
reproducible example on a web site somewhere.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:12:12 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 3 May 2002 12:12:12 +0200 (MET DST)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
Message-ID: <200205031012.MAA13485@pubhealth.ku.dk>

Hi Everyone, 

I've noticed that setting the environment of a function from a package
actually creates a copy of that function in .GlobalEnv and sets the
environment on this copy:

> find(.profile)
[1] "package:newblips"
> environment(.profile) <- bb1$getEnv() # this is an environment
> find(.profile)
[1] ".GlobalEnv"       "package:newblips"

I don't have a problem with this behaviour (now I understand it!) but
I think that it would help to document it in the help file.  May I
suggest that instead of

     The assignment form sets the environment of the function or
     formula `fun' to the `value' given.

we have

     The assignment form sets the environment of the function or
     formula \code{fun} to \code{value} if \code{fun} is in the
     current environment, otherwise it makes a copy of \code{fun} in
     the current environment and sets the environment of the copy.

I think that describes the current procedure: please correct me if I
am wrong!

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:newblips, package:MASS, package:mva, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  3 11:26:58 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2002 12:26:58 +0200
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <200205031012.MAA13485@pubhealth.ku.dk>
References: <200205031012.MAA13485@pubhealth.ku.dk>
Message-ID: <x26625y1al.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> Hi Everyone, 
> 
> I've noticed that setting the environment of a function from a package
> actually creates a copy of that function in .GlobalEnv and sets the
> environment on this copy:
> 
> > find(.profile)
> [1] "package:newblips"
> > environment(.profile) <- bb1$getEnv() # this is an environment
> > find(.profile)
> [1] ".GlobalEnv"       "package:newblips"
> 
> I don't have a problem with this behaviour (now I understand it!) but
> I think that it would help to document it in the help file.  May I
> suggest that instead of
> 
>      The assignment form sets the environment of the function or
>      formula `fun' to the `value' given.
> 
> we have
> 
>      The assignment form sets the environment of the function or
>      formula \code{fun} to \code{value} if \code{fun} is in the
>      current environment, otherwise it makes a copy of \code{fun} in
>      the current environment and sets the environment of the copy.
> 
> I think that describes the current procedure: please correct me if I
> am wrong!

But this is generic behaviour for *all* attribute assignment. It makes
no sense to describe a specific instance of it. Consider

data(airquality)
f<-function() { x <- class(airquality)<-NULL; ls() }
f()
class(airquality)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May  3 11:49:25 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 03 May 2002 11:49:25 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CD26B35.1F72FD86@durham.ac.uk>

Peter Dalgaard BSA wrote:
> 
> J.C.Rougier@durham.ac.uk writes:
> 
> > Hi Everyone,
> >
> > I've noticed that setting the environment of a function from a package
> > actually creates a copy of that function in .GlobalEnv and sets the
> > environment on this copy:
> >
> > > find(.profile)
> > [1] "package:newblips"
> > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > find(.profile)
> > [1] ".GlobalEnv"       "package:newblips"
> >
> > I don't have a problem with this behaviour (now I understand it!) but
> > I think that it would help to document it in the help file.  May I
> > suggest that instead of
> >
> >      The assignment form sets the environment of the function or
> >      formula `fun' to the `value' given.
> >
> > we have
> >
> >      The assignment form sets the environment of the function or
> >      formula \code{fun} to \code{value} if \code{fun} is in the
> >      current environment, otherwise it makes a copy of \code{fun} in
> >      the current environment and sets the environment of the copy.
> >
> > I think that describes the current procedure: please correct me if I
> > am wrong!
> 
> But this is generic behaviour for *all* attribute assignment. It makes
> no sense to describe a specific instance of it. Consider
> 
> data(airquality)
> f<-function() { x <- class(airquality)<-NULL; ls() }
> f()
> class(airquality)

I understand.  However, I still think that the help page for environment
is wrong!  Using "enviroment<-" does not necessarily set the environment
of the function, as stated.  What happened to me is that I modified
.profile in the package newblips and then re-assigned its environment
but didn't see any change, because it was masked by the copy of .profile
in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
and I think that changing the environment help page would clarify this
for other users.  J.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri May  3 15:26:33 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 3 May 2002 09:26:33 -0500
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD26B35.1F72FD86@durham.ac.uk>; from J.C.Rougier@durham.ac.uk on Fri, May 03, 2002 at 11:49:25AM +0100
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk>
Message-ID: <20020503092633.A11402@nokomis.stat.umn.edu>

On Fri, May 03, 2002 at 11:49:25AM +0100, Jonathan Rougier wrote:
> Peter Dalgaard BSA wrote:
> > 
> > J.C.Rougier@durham.ac.uk writes:
> > 
> > > Hi Everyone,
> > >
> > > I've noticed that setting the environment of a function from a package
> > > actually creates a copy of that function in .GlobalEnv and sets the
> > > environment on this copy:
> > >
> > > > find(.profile)
> > > [1] "package:newblips"
> > > > environment(.profile) <- bb1$getEnv() # this is an environment
> > > > find(.profile)
> > > [1] ".GlobalEnv"       "package:newblips"
> > >
> > > I don't have a problem with this behaviour (now I understand it!) but
> > > I think that it would help to document it in the help file.  May I
> > > suggest that instead of
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula `fun' to the `value' given.
> > >
> > > we have
> > >
> > >      The assignment form sets the environment of the function or
> > >      formula \code{fun} to \code{value} if \code{fun} is in the
> > >      current environment, otherwise it makes a copy of \code{fun} in
> > >      the current environment and sets the environment of the copy.
> > >
> > > I think that describes the current procedure: please correct me if I
> > > am wrong!
> > 
> > But this is generic behaviour for *all* attribute assignment. It makes
> > no sense to describe a specific instance of it. Consider
> > 
> > data(airquality)
> > f<-function() { x <- class(airquality)<-NULL; ls() }
> > f()
> > class(airquality)
> 
> I understand.  However, I still think that the help page for environment
> is wrong!  Using "enviroment<-" does not necessarily set the environment
> of the function, as stated.  What happened to me is that I modified
> .profile in the package newblips and then re-assigned its environment
> but didn't see any change, because it was masked by the copy of .profile
> in .GlobalEnv that I didn't know I had.  That's quite a subtle outcome
> and I think that changing the environment help page would clarify this
> for other users.  J.

I agree with Peter.  The compound assignment process is quite complex
but it is uniform across compound assignments.  One way to describe it
is that

	f(x)<- y

does roughly (modulo some performance tweaks)

	if (! exists("x", inherits = FALSE))
            x <- x  # insures x is local
        x <- "f<-"(x, value = y)

The shorthand used in ?"environment<-" is the same as the shorthand
used in at lest some other assignment contexts, for example in ?"[<-":

     If one of these expressions appears on the left side of an
     assignment then that part of `x' is set to the value of the right
     hand side of the assignment.

I don't see much point in adding a substantial amount of legalese to
all of these, and doing so in only some places is likely to lead to
more confusion.

Specific to environment<-, if any change is warranted is might be to
add a disclaimer like

	Changing the environment of a function can have unexpected
	consequences.  There is usually a safer way to achieve what
	you are trying to do.

A similar warning would be appropriate for formals<- and body<-.  When
you define a function the usual way you cause a function expression
consisting of formals and body to be evaluated in a particular
environment.  That creates a closure in which the three pieces are
assembled in a consistent fashion.  Assigning to any one of them
separately is quite likely to lead to inconsistencies and is one
reason the internal code loses all attributes on the function when you
do this (in particular the 'source' attribute if there was one).  If
we get byte code compilation and f is a compiled function, then after

	environment(f)<- myenv

the value of f will have to either be an interpreted function or the
assignment will have to trigger a new compilation since the original
compilation will have used information from the original environment.

In fact, given these issues I would argue that a pretty strong case
can be made for eliminating formals<-, body<- and environment<- (at
least for functions), though there are some very limited circumstances
where they can be useful if used with care.

So, after all that, the real question: why are you doing this and are
you sure there isn't a better way?

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From elff@rumms.uni-mannheim.de  Fri May  3 15:42:30 2002
From: elff@rumms.uni-mannheim.de (elff@rumms.uni-mannheim.de)
Date: Fri, 3 May 2002 16:42:30 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031442.QAA16928@pubhealth.ku.dk>

Full_Name: Martin Elff
Version: 1.5.0
OS: MS Windows 98
Submission from: (NULL) (134.155.91.46)


Merging of two data frames by variables with different names 
(using by.x and by.y) is no 
longer possible (it was possible in version 1.4.1). 
Call:

mvoteint.classd.matadd <- merge(
                            unique(mvoteint.classd),
                            unique(subset(dimens.mpp,
                                select=c(nation,year,mecode,
                                        econlrdiff,
                                        eeconlrdiff,
                                        welfdiff,
                                        labmiddiff,
                                        authlibdiff,
                                        authlibdiffn)
                            )),
                            by.x=c("nation","eyear","mvoteint"),
                            by.y=c("nation","year","mecode"),
                            all.x=TRUE,
                            sort=TRUE
                            )

Error message:
Error in match.names(clabs, names(xi)) : names don't match previous names:
         year, mecode


Traceback:

10: stop(paste("names don't match previous names:\n     ", paste(nmi[nii == 
        0], collapse = ", ")))
9: match.names(clabs, names(xi))
8: rbind(...)
7: rbind(x[, by.x], y[, by.y])
6: do.call("paste", c(rbind(x[, by.x], y[, by.y]), sep = "\r"))
5: merge.data.frame(unique(mvoteint.classd), unique(subset(dimens.mpp, 
       select = c(nation, year, mecode, econlrdiff, eeconlrdiff, 
           welfdiff, labmiddiff, authlibdiff, authlibdiffn))), by.x =
c("nation", 
       "eyear", "mvoteint"), by.y = c("nation", "year", "mecode"), 
       all.x = TRUE, sort = TRUE)
4: merge(unique(mvoteint.classd), unique(subset(dimens.mpp, select = c(nation, 
       year, mecode, econlrdiff, eeconlrdiff, welfdiff, labmiddiff, 
       authlibdiff, authlibdiffn))), by.x = c("nation", "eyear", 
       "mvoteint"), by.y = c("nation", "year", "mecode"), all.x = TRUE, 
       sort = TRUE)
3: eval.with.vis(expr, envir, enclos)
2: eval.with.vis(ei, envir)
1: source("setup-classd-mat-additiv.R", echo = T)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  3 17:06:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 3 May 2002 09:06:14 -0700 (PDT)
Subject: [Rd] merge (PR#1510)
In-Reply-To: <200205031442.QAA16928@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205030859300.100836-100000@homer39.u.washington.edu>

On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:

> Full_Name: Martin Elff
> Version: 1.5.0
> OS: MS Windows 98
> Submission from: (NULL) (134.155.91.46)
>
>
> Merging of two data frames by variables with different names
> (using by.x and by.y) is no
> longer possible (it was possible in version 1.4.1).

To be precise, it doesn't seem to work with multiple by columns, so
> df<-data.frame(x=1:10,y=rnorm(10))
> fd<-data.frame(z=1:10,w=rnorm(10))
> merge(df,fd,by.x="x",by.y="z")
succeeds but
> fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
Error in match.names(clabs, names(xi)) : names don't match previous names:
         z, m


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  3 17:16:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 May 2002 18:16:32 +0200 (MET DST)
Subject: [Rd] merge (PR#1510)
Message-ID: <200205031616.SAA17458@pubhealth.ku.dk>

On Fri, 3 May 2002, Thomas Lumley wrote:

> On Fri, 3 May 2002 elff@rumms.uni-mannheim.de wrote:
>
> > Full_Name: Martin Elff
> > Version: 1.5.0
> > OS: MS Windows 98
> > Submission from: (NULL) (134.155.91.46)
> >
> >
> > Merging of two data frames by variables with different names
> > (using by.x and by.y) is no
> > longer possible (it was possible in version 1.4.1).
>
> To be precise, it doesn't seem to work with multiple by columns, so
> > df<-data.frame(x=1:10,y=rnorm(10))
> > fd<-data.frame(z=1:10,w=rnorm(10))
> > merge(df,fd,by.x="x",by.y="z")
> succeeds but

Yes, and there is an example on the help page for that case.

> > fd<-data.frame(z=1:10,m=letters[1:10],w=rnorm(10))
> > df<-data.frame(x=1:10,y=rnorm(10),n=letters[1:10])
> > merge(df,fd,by.x=c("x","n"),by.y=c("z","m"))
> Error in match.names(clabs, names(xi)) : names don't match previous names:
>          z, m

Yes, the code is different for multiple match columns, and I know how to
fix it.

Thank you Thomas for the example: creating one was my next task.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Mon May  6 10:34:06 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Mon, 06 May 2002 11:34:06 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <200205010201.EAA14443@stat.math.ethz.ch>
Message-ID: <3CD64E0E.9FE073A4@lmttrading.com>

> Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> From: Gang Liang <liang@stat.berkeley.edu>
> Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
>
> Thanks, Peter!
>
> Yes, I tried the latest package of tseries, but I guess I made a mistake
> about the version number. Okay I am going to try the development version
> of R on my machine.
>
> BTW, there are some minor typos in tseries package's help package, such as
> some links named temp -- I am quite sure it's really temp, :).

Can you give me a more detailed description such that I am able to correct these typos?

Thanks
Adrian

> Regards,
>
> Gang

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Sonia.Leach@uchsc.edu  Mon May  6 17:16:44 2002
From: Sonia.Leach@uchsc.edu (Sonia.Leach@uchsc.edu)
Date: Mon, 6 May 2002 18:16:44 +0200 (MET DST)
Subject: [Rd] subscript problem with function qr.X (PR#1519)
Message-ID: <200205061616.SAA01494@pubhealth.ku.dk>


R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> x <- matrix(scan(), 4,5)
1:     0.9501    0.8913    0.8214    0.9218    0.9355
6:     0.2311    0.7621    0.4447    0.7382    0.9169
11:     0.6068    0.4565    0.6154    0.1763    0.4103
16:     0.4860    0.0185    0.7919    0.4057    0.8936
21: 
Read 20 items
> QR <- qr(x)
> qr.Q(QR)
           [,1]       [,2]        [,3]         [,4]
[1,] -0.5293452  0.5626939 -0.19540556 -0.604140627
[2,] -0.4965850 -0.6566910 -0.56754804  0.007036243
[3,] -0.4576404  0.4009461 -0.05368566  0.791786145
[4,] -0.5135779 -0.3022824  0.79801236 -0.089662111
> qr.R(QR)
          [,1]       [,2]        [,3]        [,4]       [,5]
[1,] -1.794859 -1.1871191 -1.35822590 -0.85067570 -1.0476365
[2,]  0.000000  0.5457749 -0.08143716  0.24810615 -0.6170795
[3,]  0.000000  0.0000000 -0.33291700  0.14549548  0.2382673
[4,]  0.000000  0.0000000  0.00000000 -0.08925358  0.2355010
> qr.X(QR)
Error in qr.X(QR) : subscript out of bounds
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cjpelton@ucdavis.edu  Mon May  6 20:26:14 2002
From: cjpelton@ucdavis.edu (cjpelton@ucdavis.edu)
Date: Mon, 6 May 2002 21:26:14 +0200 (MET DST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205061926.VAA02070@pubhealth.ku.dk>

Full_Name: Chris Pelton
Version: R-1.5.0
OS: Solaris &
Submission from: (NULL) (169.237.121.210)


I am unable to compile R-1.5.0, and am getting the following errors with make. I
searched through
the buglist and didn't see anything similar, although I wouldn't doubt if I was
just
using the wrong version of something. 

gcc version 3.0.3



gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
".subsection"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
".previous"
/usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
*** Error code 1
make: Fatal error: Command failed for target `lbfgsb.o'
Current working directory /export/home/cjpelton/R-1.5.0/src/appl
*** Error code 1
make: Fatal error: Command failed for target `R'

Thanks,
Chris


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Mon May  6 20:49:47 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Mon, 6 May 2002 21:49:47 +0200 (MET DST)
Subject: [Rd] Accessing C code for 'optim' (PR#1521)
Message-ID: <200205061949.VAA02132@pubhealth.ku.dk>

Full_Name: Göran Broström
Version: 1.5.0
OS: RH Linux 7.2 (i686)
Submission from: (NULL) (130.235.138.224)


The documentation (p. 55, "R Extensions") describes the gradient function as

typedef double optimgr(...

which is wrong. The correct description is

typedef void optimgr(...


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  6 21:46:44 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2002 22:46:44 +0200
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <200205061926.VAA02070@pubhealth.ku.dk>
References: <200205061926.VAA02070@pubhealth.ku.dk>
Message-ID: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>

cjpelton@ucdavis.edu writes:

> I am unable to compile R-1.5.0, and am getting the following errors with make. I
> searched through
> the buglist and didn't see anything similar, although I wouldn't doubt if I was
> just
> using the wrong version of something. 
> 
> gcc version 3.0.3
> 
> 
> 
> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> ".subsection"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> ".previous"
> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> *** Error code 1
> make: Fatal error: Command failed for target `lbfgsb.o'
> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> *** Error code 1
> make: Fatal error: Command failed for target `R'

I think this is a generic problem, unrelated to R: To use gcc-3.0.3
the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
and obviously also to make sure that it is found before the one in
/usr/ccs. I have have built R succesfully on a system where the
following holds:

Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
[pd@rubin pd]$ which as
/usr/local/bin/as
[pd@rubin pd]$ /usr/local/bin/as --version
GNU assembler 2.11.2
Copyright 2001 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License.  This program has absolutely no warranty.
This assembler was configured for a target of `sparc-sun-solaris2.7'.
[pd@rubin pd]$ gcc --version
3.0.3

The assembler is part of binutils-2.11.2 installed from sunfreeware.com.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From C Pelton <cjpelton@ucdavis.edu>  Mon May  6 23:41:38 2002
From: C Pelton <cjpelton@ucdavis.edu> (C Pelton)
Date: Mon, 6 May 2002 15:41:38 -0700 (PDT)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
Message-ID: <200205062241.g46Mfcc21648@pop12.ucdavis.edu>

You are right, this was due to my using gcc and /usr/ccs/bin/as. I installed 
binutils and got through that error. Sorry for the needless bug report. Thanks 
for the quick response though.

-Chris



>X-Authentication-Warning: blueberry.kubism.ku.dk: pd set sender to 
p.dalgaard@biostat.ku.dk using -f
>To: cjpelton@ucdavis.edu
>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
>Subject: Re: [Rd] compiling on Solaris 7 (PR#1520)
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>Date: 06 May 2002 22:46:44 +0200
>User-Agent: Gnus/5.0808 (Gnus v5.8.8) Emacs/20.7
>MIME-Version: 1.0
>
>cjpelton@ucdavis.edu writes:
>
>> I am unable to compile R-1.5.0, and am getting the following errors with 
make. I
>> searched through
>> the buglist and didn't see anything similar, although I wouldn't doubt if I 
was
>> just
>> using the wrong version of something. 
>> 
>> gcc version 3.0.3
>> 
>> 
>> 
>> gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
>> ".subsection"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
>> ".previous"
>> /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
>> *** Error code 1
>> make: Fatal error: Command failed for target `lbfgsb.o'
>> Current working directory /export/home/cjpelton/R-1.5.0/src/appl
>> *** Error code 1
>> make: Fatal error: Command failed for target `R'
>
>I think this is a generic problem, unrelated to R: To use gcc-3.0.3
>the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,
>and obviously also to make sure that it is found before the one in
>/usr/ccs. I have have built R succesfully on a system where the
>following holds:
>
>Sun Microsystems Inc.   SunOS 5.7       Generic October 1998
>[pd@rubin pd]$ which as
>/usr/local/bin/as
>[pd@rubin pd]$ /usr/local/bin/as --version
>GNU assembler 2.11.2
>Copyright 2001 Free Software Foundation, Inc.
>This program is free software; you may redistribute it under the terms of
>the GNU General Public License.  This program has absolutely no warranty.
>This assembler was configured for a target of `sparc-sun-solaris2.7'.
>[pd@rubin pd]$ gcc --version
>3.0.3
>
>The assembler is part of binutils-2.11.2 installed from sunfreeware.com.
>
>-- 
>   O__  ---- Peter Dalgaard             Blegdamsvej 3  
>  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205070515.g475F4x31385@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve()
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame,
--which is always plotted first.
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above
--mayhave side-effects in many other pieces of interpreted code
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using ==
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local"
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
* PR# 1473 *
Subject: predict.*bSpline() bugs extrapolating for deriv >= 1
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 22 Apr 2002 12:30:12 +0200
* PR# 1486 *
Subject: Can't install packages
From: Poizot Emmanuel <poizot@cnam.fr>
Date: Fri, 26 Apr 2002 17:13:05 +0200
* PR# 1497 *
Subject: tseries package segmentation fault
From: liang@stat.berkeley.edu
Date: Mon, 29 Apr 2002 21:06:41 +0200 (MET DST)
* PR# 1499 *
Subject: Undefined symbols in loading tcltk
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:13:42 +0200 (CEST)
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
* PR# 1505 *
Subject: pictex
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
* PR# 1509 *
Subject:  Behaviour of environment(foo)<-
From: J.C.Rougier@durham.ac.uk
Date: Fri, 3 May 2002 11:10:21 +0100
* PR# 1510 *
Subject: merge
From: elff@rumms.uni-mannheim.de
Date: Fri, 3 May 2002 16:42:29 +0200 (MET DST)
* PR# 1511 *
Subject: PlantGrowth))
From: me <me@localhost.com>
Date: Fri,  3 May 2002 19:54:15 +0200 (CEST)
* PR# 1515 *
Subject: A  WinXP patch
From: webmasters <webmasters@www.gnu.org>
Date: Sun, 5 May 2002 15:57:16 +0200
* PR# 1519 *
Subject: subscript problem with function qr.X
From: Sonia Leach <Sonia.Leach@uchsc.edu>
Date: Mon, 06 May 2002 10:12:34 -0600
* PR# 1520 *
Subject: compiling on Solaris 7
From: cjpelton@ucdavis.edu
Date: Mon, 6 May 2002 21:26:12 +0200 (MET DST)
* PR# 1521 *
Subject: Accessing C code for 'optim'
From: gb@stat.umu.se
Date: Mon, 6 May 2002 21:49:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 07:22:27 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 7 May 2002 07:22:27 +0100 (BST)
Subject: [Rd] compiling on Solaris 7 (PR#1520)
In-Reply-To: <x23cx5vwaz.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0205070719310.1175-100000@auk.stats>

On 6 May 2002, Peter Dalgaard BSA wrote:

> cjpelton@ucdavis.edu writes:
>
> > I am unable to compile R-1.5.0, and am getting the following errors with make. I
> > searched through
> > the buglist and didn't see anything similar, although I wouldn't doubt if I was
> > just
> > using the wrong version of something.
> >
> > gcc version 3.0.3
> >
> >
> >
> > gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> > -DHAVE_CONFIG_H   -g -O2 -c lbfgsb.c -o lbfgsb.o
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: unknown opcode
> > ".subsection"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12970: error: statement syntax
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: unknown opcode
> > ".previous"
> > /usr/ccs/bin/as: "/var/tmp/ccBVo80F.s", line 12982: error: statement syntax
> > *** Error code 1
> > make: Fatal error: Command failed for target `lbfgsb.o'
> > Current working directory /export/home/cjpelton/R-1.5.0/src/appl
> > *** Error code 1
> > make: Fatal error: Command failed for target `R'
>
> I think this is a generic problem, unrelated to R: To use gcc-3.0.3
> the assembler in /usr/ccs/bin/as is in sufficient. You need GNU as,

It's fine: I use it all the time.  The issue is that you must use the same
`as' as gcc was built to use.  The simplest and safest route is to build
gcc (3.0.4 with 3.1 imminent) on the target system.

Quite a lot of traffic on R-bugs is about mis-configured versions of gcc.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue May  7 10:07:49 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 07 May 2002 10:07:49 +0100
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
References: <200205031012.MAA13485@pubhealth.ku.dk> <x26625y1al.fsf@blueberry.kubism.ku.dk> <3CD26B35.1F72FD86@durham.ac.uk> <20020503092633.A11402@nokomis.stat.umn.edu>
Message-ID: <3CD79965.F38D93F1@durham.ac.uk>

Luke Tierney wrote:
> 
> A similar warning would be appropriate for formals<- and body<-.  When
> you define a function the usual way you cause a function expression
> consisting of formals and body to be evaluated in a particular
> environment.  That creates a closure in which the three pieces are
> assembled in a consistent fashion.  Assigning to any one of them
> separately is quite likely to lead to inconsistencies and is one
> reason the internal code loses all attributes on the function when you
> do this (in particular the 'source' attribute if there was one).  If
> we get byte code compilation and f is a compiled function, then after
> 
>         environment(f)<- myenv
> 
> the value of f will have to either be an interpreted function or the
> assignment will have to trigger a new compilation since the original
> compilation will have used information from the original environment.
> 
> In fact, given these issues I would argue that a pretty strong case
> can be made for eliminating formals<-, body<- and environment<- (at
> least for functions), though there are some very limited circumstances
> where they can be useful if used with care.
> 
> So, after all that, the real question: why are you doing this and are
> you sure there isn't a better way?

Now you've scared me!  I've been using the "list of functions with a
common environment" approach to implement objects with methods and
shared data, similar to that used by Douglas Bates and Saikat DebRoy in
"nls", particularly their function "nlsModel".  So I can write
foo$method() to use method on the foo object and its collection of
common variables.  If I want to assign a function defined outside as a
method then I need something like

robj$method <- functionDefinedOutside
environment(robj$method) <- myEnv

inside the function that constructs foo by returning the list robj. 
This enables functionDefinedOutside to reference variables in foo
directly, which makes for much clearer code.  The problem for me arose
when I was debugging a new method.  Rather than rebuilding object foo
from scratch each time I make a change in functionDefinedOutside I find
it easier just leave functionDefinedOutside on its own in the package
and use

environment(functionDefinedOutside) <- foo$getEnv()

(where the getEnv method simply returns myEnv) to simulate it being a
method of foo, and then I can test it where it stands.

I like the foo$method() construction: I find it easy to work with and
think it is quite transparent.  Is it likely to stop working in a future
version of R?  
And are there current risks I have yet to encounter?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue May  7 12:15:50 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 7 May 2002 13:15:50 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071115.NAA07246@pubhealth.ku.dk>

names(unlist(...)) seems to be able to construct corrupt strings
detected via: two identical strings behave different in paste
observed in RW1.4.1 and RW1.5.0
pure replication code after output

Best


Jens Oehlschlägel


> l <- names(unlist(list(aa = list(bb = 1))))
> l
[1] "aa.bb"
> # this is exactly "aa.bb"
> identical(l, "aa.bb")
[1] TRUE
> 
> # BUT 
> identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))
[1] FALSE
> 
> # this of course works
> paste("aa.bb", "this should be added")
[1] "aa.bb this should be added"
> 
> # BUT THIS FAILS
> paste(l, "this should be added")
[1] "aa.bb"



l <- names(unlist(list(aa = list(bb = 1))))
l
# this is exactly "aa.bb"
identical(l, "aa.bb")

# BUT 
identical(paste("aa.bb", "this should be added"), paste(l, "this should be
added"))

# this of course works
paste("aa.bb", "this should be added")

# BUT THIS FAILS
paste(l, "this should be added")




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows 2000 Professional (build 2195) Service Pack 1.0

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
GMX - Die Kommunikationsplattform im Internet.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:38:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:38:59 -0700 (PDT)
Subject: [Rd] Behaviour of environment(foo)<- (PR#1509)
In-Reply-To: <3CD79965.F38D93F1@durham.ac.uk>
Message-ID: <Pine.A41.4.44.0205070828560.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002, Jonathan Rougier wrote:

> Luke Tierney wrote:
> >
> >
> > In fact, given these issues I would argue that a pretty strong case
> > can be made for eliminating formals<-, body<- and environment<- (at
> > least for functions), though there are some very limited circumstances
> > where they can be useful if used with care.
> >
> > So, after all that, the real question: why are you doing this and are
> > you sure there isn't a better way?
>
> Now you've scared me!  I've been using the "list of functions with a
> common environment" approach to implement objects with methods and
> shared data, similar to that used by Douglas Bates and Saikat DebRoy in
> "nls", particularly their function "nlsModel".  So I can write
> foo$method() to use method on the foo object and its collection of
> common variables.  If I want to assign a function defined outside as a
> method then I need something like
>
> robj$method <- functionDefinedOutside
> environment(robj$method) <- myEnv
>

Tony Rossini and I have also been using something similar for the
interface to Orca, essentially for the same reasons.

It would also be possible to do this with a macro:

   robj$method<-functionFactory()
with
   functionFactory<-defmacro(body={
			functionDefinedOutside(args){body;body;body}})
using the macro code from R-News 3/2001
or equivalently
   functionFactory<-function(){
		  fn<-quote(functionDefinedOutside(args){body;body;body})
	          eval.parent(fn)
		}



	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May  7 16:55:31 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 7 May 2002 08:55:31 -0700 (PDT)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
In-Reply-To: <200205071115.NAA07246@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205070848330.50664-100000@homer39.u.washington.edu>

On Tue, 7 May 2002 oehl_list@gmx.de wrote:

> names(unlist(...)) seems to be able to construct corrupt strings
> detected via: two identical strings behave different in paste
> observed in RW1.4.1 and RW1.5.0
> pure replication code after output
>
> Best
>
>
> Jens Oehlschlägel
>
>
> > l <- names(unlist(list(aa = list(bb = 1))))
> > l
> [1] "aa.bb"

This is the same problem with do_paste that showed up with read.dta. If
you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".

In general we have the problem that a string has two ways of defining its
length:  LENGTH() and strlen()

Most functions use just one of these, but paste() uses LENGTH() to set up
the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
but strlen 5, and the result from paste() is a string with a null as its
sixth character, which thus appears to be a five-character string.

Given that this is the second appearance of the problem perhaps do_paste()
should be changed instead of (as well as?) unlist().

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 17:26:09 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:26:09 +0200 (MET DST)
Subject: [Rd] names(unlist(...)) may construct corrupt strings (PR#1524)
Message-ID: <200205071626.SAA10504@pubhealth.ku.dk>

On Tue, 7 May 2002, Thomas Lumley wrote:

> On Tue, 7 May 2002 oehl_list@gmx.de wrote:
>
> > names(unlist(...)) seems to be able to construct corrupt strings
> > detected via: two identical strings behave different in paste
> > observed in RW1.4.1 and RW1.5.0
> > pure replication code after output
> >
> > Best
> >
> >
> > Jens Oehlschlägel
> >
> >
> > > l <- names(unlist(list(aa = list(bb = 1))))
> > > l
> > [1] "aa.bb"
>
> This is the same problem with do_paste that showed up with read.dta. If
> you look at the C level, LENGTH() is 6 for l and 5 for "aa.bb".
>
> In general we have the problem that a string has two ways of defining its
> length:  LENGTH() and strlen()
>
> Most functions use just one of these, but paste() uses LENGTH() to set up
> the buffer and then strcpy() to copy into it. The string l has LENGTH 6,
> but strlen 5, and the result from paste() is a string with a null as its
> sixth character, which thus appears to be a five-character string.
>
> Given that this is the second appearance of the problem perhaps do_paste()
> should be changed instead of (as well as?) unlist().

I'm fixing both.  The root bug is on line 334 of bind.c.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue May  7 18:21:52 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Tue, 7 May 2002 10:21:52 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <3CD64E0E.9FE073A4@lmttrading.com>
Message-ID: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>

If go through the help.start() --> Packages --> tseries, you will see some
duplication items in the html help page.

Thanks,
Gang

On Mon, 6 May 2002, Adrian Trapletti wrote:

> > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > From: Gang Liang <liang@stat.berkeley.edu>
> > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> >
> > Thanks, Peter!
> >
> > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > about the version number. Okay I am going to try the development version
> > of R on my machine.
> >
> > BTW, there are some minor typos in tseries package's help package, such as
> > some links named temp -- I am quite sure it's really temp, :).
>
> Can you give me a more detailed description such that I am able to correct these typos?
>
> Thanks
> Adrian
>
> > Regards,
> >
> > Gang
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 18:32:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 18:32:02 +0100 (BST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <Pine.LNX.4.31.0205071829320.6671-100000@gannet.stats>

On Tue, 7 May 2002, Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

That's an autogenerated page.  It seems correct to me on my machines:
maybe you have misunderstood what should be there.

There really is an object called `temp' documented on the ice.river page.
Looks like the software is better at indexing that some human readers.

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  7 20:33:02 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 07 May 2002 15:33:02 -0400
Subject: [Rd] Generic/method consistency in print and summary
Message-ID: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>

In R 1.5.0 (and earlier):

 > print
 function (x, ...) 
 UseMethod("print")
 > summary
 function (object, ...) 
 UseMethod("summary")

Is there a reason for this inconsistency in the name of the object?
It makes a single help file for both functions look ugly, because it
has to document both "x" and "object", which are really the same
thing.

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  7 21:04:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 May 2002 21:04:14 +0100 (BST)
Subject: [Rd] Generic/method consistency in print and summary
In-Reply-To: <pqagdusnjm16vlm3k40smfnlaok013e04m@4ax.com>
Message-ID: <Pine.LNX.4.31.0205072102580.8910-100000@gannet.stats>

On Tue, 7 May 2002, Duncan Murdoch wrote:

> In R 1.5.0 (and earlier):
>
>  > print
>  function (x, ...)
>  UseMethod("print")
>  > summary
>  function (object, ...)
>  UseMethod("summary")
>
> Is there a reason for this inconsistency in the name of the object?

Long-term S compatibility.  It's been like that since at least 1991.

> It makes a single help file for both functions look ugly, because it
> has to document both "x" and "object", which are really the same
> thing.

\item{x, object} ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Tue May  7 21:46:45 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Tue, 07 May 2002 22:46:45 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
References: <Pine.SOL.4.31.0205071017080.4750-100000@pooh.Berkeley.EDU>
Message-ID: <3CD83D35.3232175C@lmttrading.com>

Gang Liang wrote:

> If go through the help.start() --> Packages --> tseries, you will see some
> duplication items in the html help page.

Can you tell me which ones? I can´t find any...

>
> Thanks,
> Gang
>
> On Mon, 6 May 2002, Adrian Trapletti wrote:
>
> > > Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
> > > From: Gang Liang <liang@stat.berkeley.edu>
> > > Subject: Re: [Rd] tseries package segmentation fault (PR#1497)
> > >
> > > Thanks, Peter!
> > >
> > > Yes, I tried the latest package of tseries, but I guess I made a mistake
> > > about the version number. Okay I am going to try the development version
> > > of R on my machine.
> > >
> > > BTW, there are some minor typos in tseries package's help package, such as
> > > some links named temp -- I am quite sure it's really temp, :).
> >
> > Can you give me a more detailed description such that I am able to correct these typos?
> >
> > Thanks
> > Adrian
> >
> > > Regards,
> > >
> > > Gang
> >

Adrian

--
Dr. Adrian Trapletti   Phone:       +41 (0)1 994 56 31
Wildsbergstrasse 31    Fax  :       +41 (0)1 994 56 33
CH-8610 Uster          Email:   a.trapletti@bluewin.ch
Switzerland            WWW  :  trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 07:18:22 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 02:18:22 -0400
Subject: [Rd] embedded R regexec returning nonsense
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C68@Groexmbcr10.pfizer.com>

Under RSPython and rpy, the regexec C function is returning nonsensical
results leading to segmentation faults.  This is happening in some
situations under R 1.4.1 and (more often?) under R 1.5.0  on my Solaris 8
box.  R 1.4.1 was compiled with gcc 2.95.2, and I've tried 1.5.0 with both
gcc 2.95.2 and gcc 3.0.3.   The error appears to be exactly the same under
both python tools and both compilers.  This makes me suspect that there is
some hairy interaction between the R regex functions and something in
python.

With R 1.4.1, R starts up smoothly under rpy and RSPython and only certain
functions elicit the error.  For instance, doing "bitmap('file.bmp')" will
cause a segfault in do_strsplit (character.c:260) because the regmatch
structure contains the nonsense values:

	(gdb) print regmatch[0]
	$1 = {rm_so = 9257728, rm_eo = 9257729}


With R 1.5.0, R fails to complete startup initialization under both rpy and
RSPython, segfaulting in do_readDCF (dcf.c:109) with similar nonsense values
in the regmatch structure:

	(gdb) print regmatch
	$7 = {{rm_so = 9777896, rm_eo = 9777905}}


Does anyone have asuggestion on the best way to track down the cause of this
problem?   I'll be happy to provide tracebacks, core dumps, etc if that
would help.

Thanks,

Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed May  8 17:45:57 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 08 May 2002 11:45:57 -0500
Subject: [Rd] Questions about S4 style methods and generics
Message-ID: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>

I have some questions about S4 style methods and generics.

First of all, is there any way of using default values for arguments
in the generics/methods? My own experiments show that such arguments
are always ignored. The green book seems to be silent on this
matter.

The second question is about using a non-trivial function body for
generics. Page 351 of the green book gives an example of this and the
documentation for setGeneric seems to suggest I should be able to do
this at least by using myDispatch=TRUE. However, the current
implementation seems to set the body of the generic definition to a
call to standardGeneric all the time. Is this a bug or a modification
of the green book description?

Thanks,

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  8 19:05:24 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 8 May 2002 20:05:24 +0200 (MET DST)
Subject: [Rd] [.data.frame handles drop inconsistently (PR#1530)
Message-ID: <200205081805.UAA20673@pubhealth.ku.dk>

R 1.5.0:

d.df <- data.frame(x = 1:3, y = c("A","D","E"), z = c(6,9,10))
d.df[1,1:3]
xx <- d.df[1,]
xx[, 1:3]

d.df[1,1:3] and xx[, 1:3] should be the same, and they are in S.

d.df[1,1:3] is a data frame.

xx[, 1:3] is a list, and it should not be.
xx[, 1:3, drop=FALSE]  is the desired answer.

(This cropped up when looking at merge, which was caught by it.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May  8 21:25:05 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 8 May 2002 16:25:05 -0400
Subject: [Rd] embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>


Hi All,

When R is embedded in python on my system (Solaris 8), calls to the c
functions 'regcomp' and 'regexec' are being resolved to the c-library,
rather than the functions compiled from regex.c.  This leads to segfaults
because the c-library functions have quite different semantics.

Is there any way to get around this, other than renaming the offending
functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
perhaps there is another argument which says 'check inside this library for
symbols before looking elsewhere'?

Thanks,

-Greg

----------------- obligatory version information

R 1.4.1, 1.5.0,
gcc 2.95.2, 3.0.3,
python 2.1.1, 2.1.3
SunOs 5.8, sparc




LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu May  9 00:15:28 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 8 May 2002 19:15:28 -0400
Subject: [Rd] Re: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Wed, May 08, 2002 at 04:25:05PM -0400
References: <97E365D56960A642A79B2EE0ADA14E803F4C70@Groexmbcr10.pfizer.com>
Message-ID: <20020508191528.B27246@jessie.research.bell-labs.com>

Hi Greg.
  
 Yes, there are some ways to arrange for tight/eager binding
rather than dynamically loading libraries. They do depend on
the linker being used and unfortunately precisely how the
libraries containing the symbols are being "included".

One GNU linker option that is of relevance here is -Bsymbolic
which is documented as
 "When creating a shared library, bind references to global symbols
 to the definition within the shared library, if any.  ....."

As a quick guess, I would add this to R's Makeconf for building
libR.so so that all possible symbols are resolved locally within that 
library. Then try linking again.


I have seen this on several different systems over the past few years
and I have written up _some_ of the details that I discovered on this topic.
Unfortunately,  I won't have time to dig them up until I get back to the office at the 
beginning of next week. Please remind me.

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> When R is embedded in python on my system (Solaris 8), calls to the c
> functions 'regcomp' and 'regexec' are being resolved to the c-library,
> rather than the functions compiled from regex.c.  This leads to segfaults
> because the c-library functions have quite different semantics.
> 
> Is there any way to get around this, other than renaming the offending
> functions?  E.G., would it be possible to use the '-wrap' argument to ld, or
> perhaps there is another argument which says 'check inside this library for
> symbols before looking elsewhere'?
> 
> Thanks,
> 
> -Greg
> 
> ----------------- obligatory version information
> 
> R 1.4.1, 1.5.0,
> gcc 2.95.2, 3.0.3,
> python 2.1.1, 2.1.3
> SunOs 5.8, sparc
> 
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-andrews.ac.uk  Thu May  9 12:57:56 2002
From: scs10@st-andrews.ac.uk (scs10@st-andrews.ac.uk)
Date: Thu, 9 May 2002 13:57:56 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091157.NAA22633@pubhealth.ku.dk>

I'm having a problem with nls:

it iterates the correct number of times according to nls.control, but
mis-reports how many iterations have occured!

It converges on the correct parameter values, but doesn't stop and report
them until it's done all its iterations. Then it reports as an error that
it's stopped becaue it's done all its iterations.

Not sure what's going on....

Sophie


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 13:29:27 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 14:29:27 +0200 (MET DST)
Subject: [Rd] nls (PR#1532)
Message-ID: <200205091229.OAA22729@pubhealth.ku.dk>

On Thu, 9 May 2002 scs10@st-andrews.ac.uk wrote:

> I'm having a problem with nls:
>
> it iterates the correct number of times according to nls.control, but
> mis-reports how many iterations have occured!
>
> It converges on the correct parameter values, but doesn't stop and report
> them until it's done all its iterations. Then it reports as an error that
> it's stopped becaue it's done all its iterations.
>
> Not sure what's going on....

But I suspect you have more idea than we do.  Please read the section on
BUGS in the FAQ and send us a reproducible example.

(The iteration count is a *limit*, so sounds as if nls is not converging
if it does that number of iterations.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From scs10@st-and.ac.uk  Thu May  9 14:46:20 2002
From: scs10@st-and.ac.uk (scs10@st-and.ac.uk)
Date: Thu, 9 May 2002 15:46:20 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091346.PAA22891@pubhealth.ku.dk>

Full_Name: Sophie Smout
Version: 1.5.0
OS: windows 2000, pc
Submission from: (NULL) (138.251.190.17)


I'm finding that nls iterates to the end of its iteration setting and does not
jump out to report convergence even when it has clearly converged. It is also
mis-reporting the number of iterations completed. These may not be
unconnected...

This is an example:

[note - details of my computer, version etc are at the end of this message]

##### some 'data'


> x
 [1]  1  2  3  4  5  6  7  8  9 10

> y
 [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
 [8] 8.6486486 8.9010989 9.0909091

### call to nls

> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

### nls spits out

1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066689e-07 :  0.9999465 2.0000191 0.0999903 
3.651161e-15 :  1.0 2.0 0.1 
1.518557e-29 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
8.09815e-30 :  1.0 2.0 0.1 
Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
        number of iterations exceeded maximum of 5.27058e-308
> 
### ??? the converged parameter values are correct
### but nls has not reported convergence. Instead it's just gone on iterating,
### but not 5.27058e-308 times, which would in any case be tricky...



### try another simple example
### generate some data 



> x<-c(1:10)
> y<-3*x^2+1
> y
 [1]   4  13  28  49  76 109 148 193 244 301
> x
 [1]  1  2  3  4  5  6  7  8  9 10

### call to nls


> nls(y~a*x^b+c,start=list(a=1,b=1,c=1))

Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
        number of iterations exceeded maximum of 5.27058e-308

### another call to nls with more details requested

> nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
210232 :  1 1 1 
209552.9 :  0.3814959 1.4296089 1.7349535 
191724.4 :  0.2824096 1.9134931 1.9513585 
165276.9 :  0.4484658 1.9827257 1.8983138 
125378.7 :  0.7671348 1.9977192 1.7865044 
70298.31 :  1.325342 1.999960 1.589895 
17571.14 :  2.162671 2.000005 1.294948 
4.457052e-06 :  3.0000000 1.9999979 0.9999999 
2.200966e-17 :  3 2 1 
6.125505e-27 :  3 2 1 
6.12235e-27 :  3 2 1 
Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
: 
        number of iterations exceeded maximum of 5.27058e-308



#### same problem!!
##############################################

here is what I get when I type 'version'
to get details of computer etc.



platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R   
###############################################

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 14:47:03 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 09:47:03 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDA7DD7.E8DE7292@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> I have some questions about S4 style methods and generics.
> 
> First of all, is there any way of using default values for arguments
> in the generics/methods? My own experiments show that such arguments
> are always ignored.

Yes there is and no they are not.

But there are a couple of points to keep in mind.

The definition of method dispatch is that the _body_ of the selected
method is evaluated, without rematching arguments.  That means that it's
the default values in the (generic) function definition that will be
found in the context of the call.

An example:

R> bar <- function(x, y = 0)x+y
R> setGeneric("bar")
R> bar
function (x, y = 0) 
standardGeneric("bar")
<environment: 0x8622a18>
R> setMethod("bar", "character", function(x, y) paste(x,y))
[1] "bar"
R> bar(1,2)
[1] 3
R> bar(99)
[1] 99
R> bar("test")
[1] "test 0"

OTOH, the default expressions for the arguments in the method are
available in the method object.  You can extract them by getting the
method and retrieving, for example, def$y.  It seems a sufficiently
asked-for item that we'll provide a tool for it.

Maybe
  evaluateMethodDefault("y")
??  The point is to allow access but not burden the standard method
dispatch with re-matching arguments.

> The green book seems to be silent on this
> matter.
> 
> The second question is about using a non-trivial function body for
> generics. Page 351 of the green book gives an example of this and the
> documentation for setGeneric seems to suggest I should be able to do
> this at least by using myDispatch=TRUE. However, the current
> implementation seems to set the body of the generic definition to a
> call to standardGeneric all the time. Is this a bug or a modification
> of the green book description?

It's a bug.  Having said that, though, nonstandard generic functions are
slightly deprecated.  There are some potential efficiency enhancements
for dispatch that might be introduced but that would likely depend on
the function being a standard generic.

Also, experience is that people get a little confused and sometimes
provide a definition of the generic that doesn't call
standardGeneric("foo") and so does not give them the method dispatch
they expected.

But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
you're willing to be a bit klunky.  You define the generic and then
replace the body, being careful to preserve the function's environment.

Another example:

R> foo <- function(x) x
R> setGeneric("foo")
[1] "foo"
R> body(foo, envir = environment(foo)) <- 
+ quote({cat("Here we go!\n"); standardGeneric("foo")})
R> setMethod("foo", "numeric", function(x)sum(x))
[1] "foo"
R> foo(1:10)
Here we go!
[1] 55
R> foo("test")
Here we go!
[1] "test"

> 
> Thanks,
> 
> Saikat
> --
> Department of Statistics                       Email: saikat@stat.wisc.edu
> University of Wisconsin - Madison              Phone: (608) 263 5948
> 1210 West Dayton Street                        Fax:   (608) 262 0032
> Madison, WI 53706-1685
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 15:04:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 16:04:35 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091404.QAA22941@pubhealth.ku.dk>

The iteration count is being reported incorrectly as a real not an
integer, and I've fixed that for 1.5.1.

I can't reproduce your first example, but I suspect the numbers have
lost digits.  It looks as if the model you are fitting is an exact fit (to
machine accuracy).  nls() cannot fit exact fits: rounding error gets in
the way.

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:04:24 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:04:24 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
References: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <6ry9etto2f.fsf@franz.stat.wisc.edu>

Your results are not reproducible

> library(nls)
> x = 1:10
> y = c(0.9090909, 2.8571429, 4.7368421, 6.1538462, 7.1428571, 7.8260870, 8.3050847, 8.6486486, 8.9010989, 9.0909091)
> nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
1.474151 :  1.10 2.10 0.11 
0.01060234 :  1.0092752 1.9893808 0.1012907 
5.066695e-07 :  0.9999465 2.0000191 0.0999903 
1.421765e-14 :  1.0 2.0 0.1 
1.056486e-14 :  1.0 2.0 0.1 
Nonlinear regression model
  model:  y ~ a * x^m/(1 + b * x^m) 
   data:  parent.frame 
  a   m   b 
1.0 2.0 0.1 
 residual sum-of-squares:  1.056486e-14 

You are encountering a well-known anomaly which occurs only in
artificial examples with a zero residual sum of squares.  The
statistical model to be fit with nls is y = f(x, theta) + eps
but your data are y = f(x, theta)

If there is any noise in the data, such as created from my copying and
pasting above, nls performs correctly.


scs10@st-and.ac.uk writes:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
> 
> 
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
> 
> This is an example:
> 
> [note - details of my computer, version etc are at the end of this message]
> 
> ##### some 'data'
> 
> 
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
> 
> ### call to nls
> 
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
> 
> ### nls spits out
> 
> 1.474151 :  1.10 2.10 0.11 
> 0.01060234 :  1.0092752 1.9893808 0.1012907 
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903 
> 3.651161e-15 :  1.0 2.0 0.1 
> 1.518557e-29 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> 8.09815e-30 :  1.0 2.0 0.1 
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  : 
>         number of iterations exceeded maximum of 5.27058e-308
> > 
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
> 
> 
> 
> ### try another simple example
> ### generate some data 
> 
> 
> 
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
> 
> ### call to nls
> 
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
> 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> ### another call to nls with more details requested
> 
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1 
> 209552.9 :  0.3814959 1.4296089 1.7349535 
> 191724.4 :  0.2824096 1.9134931 1.9513585 
> 165276.9 :  0.4484658 1.9827257 1.8983138 
> 125378.7 :  0.7671348 1.9977192 1.7865044 
> 70298.31 :  1.325342 1.999960 1.589895 
> 17571.14 :  2.162671 2.000005 1.294948 
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999 
> 2.200966e-17 :  3 2 1 
> 6.125505e-27 :  3 2 1 
> 6.12235e-27 :  3 2 1 
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE, 
> : 
>         number of iterations exceeded maximum of 5.27058e-308
> 
> 
> 
> #### same problem!!
> ##############################################
> 
> here is what I get when I type 'version'
> to get details of computer etc.
> 
> 
> 
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    1              
> minor    5.0            
> year     2002           
> month    04             
> day      29             
> language R   
> ###############################################
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu May  9 15:17:39 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 9 May 2002 10:17:39 -0400 (EDT)
Subject: [Rd] nls (PR#1533)
In-Reply-To: <200205091346.PAA22891@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>


  OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
documentation??):

  nls() uses convergence criteria that don't work well for artificial data
where the fit is perfect (but work reasonably well for "real" data -- it's
a reasonable tradeoff)
  There may still be a "bug" in nls() in terms of what it actually reports
(it should still report what it is doing correctly, even in a pathological
case).
  Try

ys <- y+rnorm(10,sd=0.001)
nls(ys~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)

See:
http://maths.newcastle.edu.au/~rking/R/devel/00b/0102.html
(and following thread)
http://maths.newcastle.edu.au/~rking/R/help/00b/2547.html
(one-paragraph comment at the end)

On Thu, 9 May 2002 scs10@st-and.ac.uk wrote:

> Full_Name: Sophie Smout
> Version: 1.5.0
> OS: windows 2000, pc
> Submission from: (NULL) (138.251.190.17)
>
>
> I'm finding that nls iterates to the end of its iteration setting and does not
> jump out to report convergence even when it has clearly converged. It is also
> mis-reporting the number of iterations completed. These may not be
> unconnected...
>
> This is an example:
>
> [note - details of my computer, version etc are at the end of this message]
>
> ##### some 'data'
>
>
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> > y
>  [1] 0.9090909 2.8571429 4.7368421 6.1538462 7.1428571 7.8260870 8.3050847
>  [8] 8.6486486 8.9010989 9.0909091
>
> ### call to nls
>
> > nls(y~a*x^m/(1+b*x^m),start=list(a=1.1,m=2.1,b=.11),trace=TRUE)
>
> ### nls spits out
>
> 1.474151 :  1.10 2.10 0.11
> 0.01060234 :  1.0092752 1.9893808 0.1012907
> 5.066689e-07 :  0.9999465 2.0000191 0.0999903
> 3.651161e-15 :  1.0 2.0 0.1
> 1.518557e-29 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> 8.09815e-30 :  1.0 2.0 0.1
> Error in nls(y ~ a * x^m/(1 + b * x^m), start = list(a = 1.1, m = 2.1,  :
>         number of iterations exceeded maximum of 5.27058e-308
> >
> ### ??? the converged parameter values are correct
> ### but nls has not reported convergence. Instead it's just gone on iterating,
> ### but not 5.27058e-308 times, which would in any case be tricky...
>
>
>
> ### try another simple example
> ### generate some data
>
>
>
> > x<-c(1:10)
> > y<-3*x^2+1
> > y
>  [1]   4  13  28  49  76 109 148 193 244 301
> > x
>  [1]  1  2  3  4  5  6  7  8  9 10
>
> ### call to nls
>
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1))
>
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1)) :
>         number of iterations exceeded maximum of 5.27058e-308
>
> ### another call to nls with more details requested
>
> > nls(y~a*x^b+c,start=list(a=1,b=1,c=1),trace=TRUE,control=nls.control(maxiter=10))
> 210232 :  1 1 1
> 209552.9 :  0.3814959 1.4296089 1.7349535
> 191724.4 :  0.2824096 1.9134931 1.9513585
> 165276.9 :  0.4484658 1.9827257 1.8983138
> 125378.7 :  0.7671348 1.9977192 1.7865044
> 70298.31 :  1.325342 1.999960 1.589895
> 17571.14 :  2.162671 2.000005 1.294948
> 4.457052e-06 :  3.0000000 1.9999979 0.9999999
> 2.200966e-17 :  3 2 1
> 6.125505e-27 :  3 2 1
> 6.12235e-27 :  3 2 1
> Error in nls(y ~ a * x^b + c, start = list(a = 1, b = 1, c = 1), trace = TRUE,
> :
>         number of iterations exceeded maximum of 5.27058e-308
>
>
>
> #### same problem!!
> ##############################################
>
> here is what I get when I type 'version'
> to get details of computer etc.
>
>
>
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> ###############################################
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:49 2002
From: bates@stat.wisc.edu (bates@stat.wisc.edu)
Date: Thu, 9 May 2002 16:32:49 +0200 (MET DST)
Subject: [Rd] nls (PR#1533)
Message-ID: <200205091432.QAA23022@pubhealth.ku.dk>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  9 15:32:00 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 09 May 2002 09:32:00 -0500
Subject: [Rd] nls (PR#1533)
In-Reply-To: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
References: <Pine.LNX.4.30.0205091009350.9152-100000@bolker.zoo.ufl.edu>
Message-ID: <6rvg9xs87z.fsf@franz.stat.wisc.edu>

Ben Bolker <ben@zoo.ufl.edu> writes:

>   OK, this is a FAQ (perhaps it should be added as a "Note" in the nls
> documentation??):

Agreed!  I am in the process of doing so.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May  9 17:33:43 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 9 May 2002 12:33:43 -0400
Subject: [Rd] Fixed: embedded R resolving wrong symbols
Message-ID: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>

Hi Duncan

Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
tried that and it didn't work because I'm using gcc instead of Sun's
compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
rather than '-Bsymbolic'.

Once I figured that out, changing 
	LIBR_LDFLAGS = -shared
to
	LIBR_LDFLAGS = -symbolic -shared
in Makeconf resolves the problem, albeit generating a long list of undefined
reference warnings during the link.

-Greg


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Wednesday, May 08, 2002 7:15 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> Subject: Re: embedded R resolving wrong symbols
> 
> 
> Hi Greg.
>   
>  Yes, there are some ways to arrange for tight/eager binding
> rather than dynamically loading libraries. They do depend on
> the linker being used and unfortunately precisely how the
> libraries containing the symbols are being "included".
> 
> One GNU linker option that is of relevance here is -Bsymbolic
> which is documented as
>  "When creating a shared library, bind references to global symbols
>  to the definition within the shared library, if any.  ....."
> 
> As a quick guess, I would add this to R's Makeconf for building
> libR.so so that all possible symbols are resolved locally within that 
> library. Then try linking again.
> 
> 
> I have seen this on several different systems over the past few years
> and I have written up _some_ of the details that I discovered 
> on this topic.
> Unfortunately,  I won't have time to dig them up until I get 
> back to the office at the 
> beginning of next week. Please remind me.
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > When R is embedded in python on my system (Solaris 8), 
> calls to the c
> > functions 'regcomp' and 'regexec' are being resolved to the 
> c-library,
> > rather than the functions compiled from regex.c.  This 
> leads to segfaults
> > because the c-library functions have quite different semantics.
> > 
> > Is there any way to get around this, other than renaming 
> the offending
> > functions?  E.G., would it be possible to use the '-wrap' 
> argument to ld, or
> > perhaps there is another argument which says 'check inside 
> this library for
> > symbols before looking elsewhere'?
> > 
> > Thanks,
> > 
> > -Greg
> > 
> > ----------------- obligatory version information
> > 
> > R 1.4.1, 1.5.0,
> > gcc 2.95.2, 3.0.3,
> > python 2.1.1, 2.1.3
> > SunOs 5.8, sparc
> > 
> > 
> > 
> > 
> > LEGAL NOTICE
> > Unless expressly stated otherwise, this message is 
> confidential and may be privileged. It is intended for the 
> addressee(s) only. Access to this E-mail by anyone else is 
> unauthorized. If you are not an addressee, any disclosure or 
> copying of the contents of this E-mail or any action taken 
> (or not taken) in reliance on it is unauthorized and may be 
> unlawful. If you are not an addressee, please inform the 
> sender immediately.
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ebura@gwu.edu  Thu May  9 17:47:01 2002
From: ebura@gwu.edu (ebura@gwu.edu)
Date: Thu, 9 May 2002 18:47:01 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091647.SAA23384@pubhealth.ku.dk>

I downloaded the latest version of R (1.5.0) and issued a read.table() command 
that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
drive after I downloaded R 1.5.0.

Here's the command and the error message I get under 1.5.0:

> 
golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
uote="",header=T,row.names=NULL)
Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
:
        line 6808 did not have 79 elements

Any help will be appreciated!

Thanks,
Efstathia



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:47:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 17:47:50 +0100 (BST)
Subject: [Rd] Fixed: embedded R resolving wrong symbols
In-Reply-To: <97E365D56960A642A79B2EE0ADA14E803F4C79@Groexmbcr10.pfizer.com>
Message-ID: <Pine.LNX.4.31.0205091745580.2166-100000@gannet.stats>

Coincidentally, the regex symbols are now remapped in R-devel.  This was
to allow the use of PCRE (which also defines them), so that may merely
have made the problem worse on machines with PCRE installed.

Maybe one day I'll summon the energy to use PCRE's native interface
instead.

On Thu, 9 May 2002, Warnes, Gregory R wrote:

> Hi Duncan
>
> Your suggestion to use '-Bsymbolic' proved to be (almost) the solution.  I
> tried that and it didn't work because I'm using gcc instead of Sun's
> compilers.  It took me a bit of time to discoed that gcc uses '-symbolic'
> rather than '-Bsymbolic'.
>
> Once I figured that out, changing
> 	LIBR_LDFLAGS = -shared
> to
> 	LIBR_LDFLAGS = -symbolic -shared
> in Makeconf resolves the problem, albeit generating a long list of undefined
> reference warnings during the link.
>
> -Greg
>
>
> > -----Original Message-----
> > From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> > Sent: Wednesday, May 08, 2002 7:15 PM
> > To: Warnes, Gregory R
> > Cc: 'R-devel@stat.math.ethz.ch'; 'Walter Moreira'
> > Subject: Re: embedded R resolving wrong symbols
> >
> >
> > Hi Greg.
> >
> >  Yes, there are some ways to arrange for tight/eager binding
> > rather than dynamically loading libraries. They do depend on
> > the linker being used and unfortunately precisely how the
> > libraries containing the symbols are being "included".
> >
> > One GNU linker option that is of relevance here is -Bsymbolic
> > which is documented as
> >  "When creating a shared library, bind references to global symbols
> >  to the definition within the shared library, if any.  ....."
> >
> > As a quick guess, I would add this to R's Makeconf for building
> > libR.so so that all possible symbols are resolved locally within that
> > library. Then try linking again.
> >
> >
> > I have seen this on several different systems over the past few years
> > and I have written up _some_ of the details that I discovered
> > on this topic.
> > Unfortunately,  I won't have time to dig them up until I get
> > back to the office at the
> > beginning of next week. Please remind me.
> >
> >  D.
> >
> > Warnes, Gregory R wrote:
> > >
> > > Hi All,
> > >
> > > When R is embedded in python on my system (Solaris 8),
> > calls to the c
> > > functions 'regcomp' and 'regexec' are being resolved to the
> > c-library,
> > > rather than the functions compiled from regex.c.  This
> > leads to segfaults
> > > because the c-library functions have quite different semantics.
> > >
> > > Is there any way to get around this, other than renaming
> > the offending
> > > functions?  E.G., would it be possible to use the '-wrap'
> > argument to ld, or
> > > perhaps there is another argument which says 'check inside
> > this library for
> > > symbols before looking elsewhere'?
> > >
> > > Thanks,
> > >
> > > -Greg
> > >
> > > ----------------- obligatory version information
> > >
> > > R 1.4.1, 1.5.0,
> > > gcc 2.95.2, 3.0.3,
> > > python 2.1.1, 2.1.3
> > > SunOs 5.8, sparc
> > >
> > >
> > >
> > >
> > > LEGAL NOTICE
> > > Unless expressly stated otherwise, this message is
> > confidential and may be privileged. It is intended for the
> > addressee(s) only. Access to this E-mail by anyone else is
> > unauthorized. If you are not an addressee, any disclosure or
> > copying of the contents of this E-mail or any action taken
> > (or not taken) in reliance on it is unauthorized and may be
> > unlawful. If you are not an addressee, please inform the
> > sender immediately.
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  9 17:53:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 9 May 2002 18:53:22 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205091653.SAA23417@pubhealth.ku.dk>

Note that read.table changed in 1.4.0: see the NEWS file and its help
page.

Here's my guess: line 6808 contains a comment character #.

There is a section on BUGS in the FAQ: please read it!

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> drive after I downloaded R 1.5.0.
>
> Here's the command and the error message I get under 1.5.0:
>
> >
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> :
>         line 6808 did not have 79 elements
>
> Any help will be appreciated!
>
> Thanks,
> Efstathia
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu May  9 18:10:39 2002
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 09 May 2002 12:10:39 -0500
Subject: [Rd] Questions about S4 style methods and generics
In-Reply-To: <3CDA7DD7.E8DE7292@research.bell-labs.com>
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com>
Message-ID: <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>

>>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:

  John> Saikat DebRoy wrote:
  >> 
  >> I have some questions about S4 style methods and generics.
  >> 
  >> First of all, is there any way of using default values for arguments
  >> in the generics/methods? My own experiments show that such arguments
  >> are always ignored.

  John> Yes there is and no they are not.

  John> But there are a couple of points to keep in mind.

  John> The definition of method dispatch is that the _body_ of the selected
  John> method is evaluated, without rematching arguments.  That means that it's
  John> the default values in the (generic) function definition that will be
  John> found in the context of the call.

I was in a situation where there is no default method.

> setGeneric("foo", function(x, y=0) standardGeneric("foo"))
[1] "foo"
> setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
[1] "foo"
> foo(1, 2)
[1] 3
> foo(1)
Error in foo(1) : No direct or inherited method for function "foo" for this call

So are the default values are substituted in the function call after the
method signature is matched? I tried a few other variations. In all
cases it ended up calling the default method if any or gave the same
error if there was no default method. I then moved to three arguments
and got some surprising (to me) results.

R> setGeneric("foo", function(x=1, y=2,z=3) standardGeneric("foo"))
[1] "foo"
R> setMethod("foo", signature(x="ANY", y="ANY",z="ANY"), function(x, y,z) cat("in default method\n"))
[1] "foo"
R> setMethod("foo", signature(x="numeric", y="numeric",z="numeric"), function(x, y,z) cat("in other method\n"))
[1] "foo"
R> foo(5,6,7)
in other method
R> foo(5,6)
Error in foo(1, 2) : No matching method for function "NA" (argument "z", with class missing)
R> foo(5)
in default method
R> getMethods("foo")
x = "ANY", y = "ANY", z = "ANY":
function (x, y, z) 
cat("in default method\n")

x = "numeric", y = "numeric", z = "numeric":
function (x, y, z) 
cat("in other method\n")

x = "numeric", y = "numeric", z = "ANY":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")

x = "numeric", y = "missing":
function (x, y, z) 
cat("in default method\n")
##:    (inherited from x = "ANY", y = "ANY", z = "ANY")


  John> An example:

  John> R> bar <- function(x, y = 0)x+y
  John> R> setGeneric("bar")
  John> R> bar
  John> function (x, y = 0) 
  John> standardGeneric("bar")
  John> <environment: 0x8622a18>
  John> R> setMethod("bar", "character", function(x, y) paste(x,y))
  John> [1] "bar"
  John> R> bar(1,2)
  John> [1] 3
  John> R> bar(99)
  John> [1] 99
  John> R> bar("test")
  John> [1] "test 0"

  John> OTOH, the default expressions for the arguments in the method are
  John> available in the method object.  You can extract them by getting the
  John> method and retrieving, for example, def$y.  It seems a sufficiently
  John> asked-for item that we'll provide a tool for it.

  John> Maybe
  John>   evaluateMethodDefault("y")
  John> ??  The point is to allow access but not burden the standard method
  John> dispatch with re-matching arguments.

  >> The green book seems to be silent on this
  >> matter.
  >> 
  >> The second question is about using a non-trivial function body for
  >> generics. Page 351 of the green book gives an example of this and the
  >> documentation for setGeneric seems to suggest I should be able to do
  >> this at least by using myDispatch=TRUE. However, the current
  >> implementation seems to set the body of the generic definition to a
  >> call to standardGeneric all the time. Is this a bug or a modification
  >> of the green book description?

  John> It's a bug.  Having said that, though, nonstandard generic functions are
  John> slightly deprecated.  There are some potential efficiency enhancements
  John> for dispatch that might be introduced but that would likely depend on
  John> the function being a standard generic.

  John> Also, experience is that people get a little confused and sometimes
  John> provide a definition of the generic that doesn't call
  John> standardGeneric("foo") and so does not give them the method dispatch
  John> they expected.

  John> But it's a bug & will be fixed.  Meanwhile, there is a workaround, if
  John> you're willing to be a bit klunky.  You define the generic and then
  John> replace the body, being careful to preserve the function's environment.

  John> Another example:

  John> R> foo <- function(x) x
  John> R> setGeneric("foo")
  John> [1] "foo"
  John> R> body(foo, envir = environment(foo)) <- 
  John> + quote({cat("Here we go!\n"); standardGeneric("foo")})
  John> R> setMethod("foo", "numeric", function(x)sum(x))
  John> [1] "foo"
  John> R> foo(1:10)
  John> Here we go!
  John> [1] 55
  John> R> foo("test")
  John> Here we go!
  John> [1] "test"

  >> 
  >> Thanks,
  >> 
  >> Saikat
  >> --
  >> Department of Statistics                       Email: saikat@stat.wisc.edu
  >> University of Wisconsin - Madison              Phone: (608) 263 5948
  >> 1210 West Dayton Street                        Fax:   (608) 262 0032
  >> Madison, WI 53706-1685
  >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
  >> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
  >> Send "info", "help", or "[un]subscribe"
  >> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
  >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu May  9 20:26:02 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 09 May 2002 15:26:02 -0400
Subject: [Rd] Questions about S4 style methods and generics
References: <qxp661ysi4a.fsf@verdi.stat.wisc.edu>
 <3CDA7DD7.E8DE7292@research.bell-labs.com> <qxp8z6txn5c.fsf@verdi.stat.wisc.edu>
Message-ID: <3CDACD4A.1B3DDC77@research.bell-labs.com>

Saikat DebRoy wrote:
> 
> >>>>> "John" == John Chambers <jmc@research.bell-labs.com> writes:
> 
>   John> Saikat DebRoy wrote:
>   >>
>   >> I have some questions about S4 style methods and generics.
>   >>
>   >> First of all, is there any way of using default values for arguments
>   >> in the generics/methods? My own experiments show that such arguments
>   >> are always ignored.
> 
>   John> Yes there is and no they are not.
> 
>   John> But there are a couple of points to keep in mind.
> 
>   John> The definition of method dispatch is that the _body_ of the selected
>   John> method is evaluated, without rematching arguments.  That means that it's
>   John> the default values in the (generic) function definition that will be
>   John> found in the context of the call.
> 
> I was in a situation where there is no default method.
> 
> > setGeneric("foo", function(x, y=0) standardGeneric("foo"))
> [1] "foo"
> > setMethod("foo", signature(x="numeric", y="numeric"), function(x, y) x+y)
> [1] "foo"
> > foo(1, 2)
> [1] 3
> > foo(1)
> Error in foo(1) : No direct or inherited method for function "foo" for this call
> 
> So are the default values are substituted in the function call after the
> method signature is matched? 

Hmmm, well "substituted" may not be the best term to use.

What happens here is pretty much determined by the API, not R-specific. 
Your question about defaults has come up before; should be in a
to-be-written FAQ.

Basically everything is standard S (R or S-Plus) up to the point that
standardGeneric is called.  With an ordinary generic function, arguments
are matched but not evaluated, because of lazy evaluation.

Now the dispatch code examines as many arguments as are involved in
existing signatures (2 in your example).  The class for each argument
inserted into the current signature for dispatch is:
  - "missing" if the corresponding argument is missing from the call;
  - the class of the evaluated actual argument otherwise.
Because of the first step, default expressions are not evaluated during
method selection; they obey the standard S rules of lazy evaluation, as
do arguments not needed for the signature.

(Not relevant to the question, but the dispatch is done first in C; if
there is no method matching the signature exactly, then S language code
is used to select a method by inheritance, and the selected method is
cached under the current signature.)

Your later example seems to be a bug of some sort, but I'll examine it
more closely.  Thanks.  (Dispatch on 3+ arguments probably hasn't had
much exercise!)

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu May  9 21:29:16 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 9 May 2002 22:29:16 +0200 (MET DST)
Subject: [Rd] rbind.data.frame converts logical to factor (PR#1536)
Message-ID: <200205092029.WAA23882@pubhealth.ku.dk>


> df<-data.frame(a=1:10)
> df$b<-df$a<5
> is.factor(df$b)
[1] FALSE
> ddf<-rbind(df,df)
> is.factor(ddf$b)
[1] TRUE


platform i386-pc-linux-gnu
arch     i386
os       linux-gnu
system   i386, linux-gnu
status
major    1
minor    5.0
year     2002
month    04
day      29
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Fri May 10 01:53:36 2002
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Fri, 10 May 2002 08:53:36 +0800 (GMT-8)
Subject: [Rd] read.table (PR#1535)
In-Reply-To: <200205091647.SAA23384@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0205100850290.27456-100000@sf3.comp.nus.edu.sg>

Hi,
I don't think there is anything wrong with R in this case, it is the
file. I had to do a bit of editing to read those mit files into R. The
problem is that the tabs are not quite right. I fixed it by reading it
into Gnumeric and rewriting. I can send you some R dumps of the files if
you like.

Nicholas 

On Thu, 9 May 2002 ebura@gwu.edu wrote:

> I downloaded the latest version of R (1.5.0) and issued a read.table() command 
> that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard 
> drive after I downloaded R 1.5.0.
> 
> Here's the command and the error message I get under 1.5.0:
> 
> > 
> golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> uote="",header=T,row.names=NULL)
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  
> :
>         line 6808 did not have 79 elements
> 
> Any help will be appreciated!
> 
> Thanks,
> Efstathia
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Drew.Tyre@csiro.au  Fri May 10 06:01:00 2002
From: Drew.Tyre@csiro.au (Drew.Tyre@csiro.au)
Date: Fri, 10 May 2002 07:01:00 +0200 (MET DST)
Subject: [Rd] copy or save  of plots (PR#1507)
Message-ID: <200205100501.HAA24965@pubhealth.ku.dk>

Hi,

I have now created the plot under 1.5.0, and the same problem reoccurs. I
have found a simpler code that produces the problem on my computer at least:

map.springs <- function(x, ...){
	plot(x$easting,x$northing,type="n",bty="n",
		axes=FALSE,xlab="",ylab="",...)
	filled <- x$occupied == 1
	points(x$easting[filled],x$northing[filled],
		pch=19,cex=log10(x$area[filled]))
	points(x$easting[!filled],x$northing[!filled],
		pch=21,cex=log10(x$area[!filled]))
	plot.limits <- par(c("xaxp","yaxp"))
	segments(plot.limits$xaxp[1],plot.limits$yaxp[2],
	plot.limits$xaxp[1]+100,plot.limits$yaxp[2],lwd=3)
	
text(x=plot.limits$xaxp[1]+50,y=plot.limits$yaxp[2]-5,adj=c(0.5,1),labels=c(
"100 m"))
}

a.spring <-
data.frame(easting=runif(20)*1000,northing=runif(20)*1000,occupied=rbinom(20
,1,0.5),area=runif(20)*10000)

map.springs(a.spring)
mtext("A",side=2,cex=2,las=2,at=par("yaxp")[2])



Drew Tyre
CSIRO Marine Research Drew.Tyre@csiro.au
PO Box 120		 ph: +61 (07) 3826 7263
Cleveland QLD 4163 fax:+61 (07) 3826 7222
Australia	http://www.marine.csiro.au



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 10 07:09:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 May 2002 08:09:52 +0200 (MET DST)
Subject: [Rd] read.table (PR#1535)
Message-ID: <200205100609.IAA25122@pubhealth.ku.dk>

This was confirmed as a comment character in the file, a new feature in
1.4.0.

On Fri, 10 May 2002, Nicholas Lewin-Koh wrote:

> Hi,
> I don't think there is anything wrong with R in this case, it is the
> file. I had to do a bit of editing to read those mit files into R. The
> problem is that the tabs are not quite right. I fixed it by reading it
> into Gnumeric and rewriting. I can send you some R dumps of the files if
> you like.
>
> Nicholas
>
> On Thu, 9 May 2002 ebura@gwu.edu wrote:
>
> > I downloaded the latest version of R (1.5.0) and issued a read.table() command
> > that used to work with (1.3.1). Unfortunately I erased 1.3.1 from my hard
> > drive after I downloaded R 1.5.0.
> >
> > Here's the command and the error message I get under 1.5.0:
> >
> > >
> > golub1<-read.table("C:/Microarrays/code/data_set_ALL_AML_train.txt",sep="\t",q
> > uote="",header=T,row.names=NULL)
> > Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,
> > :
> >         line 6808 did not have 79 elements
> >
> > Any help will be appreciated!
> >
> > Thanks,
> > Efstathia
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
>                  CH3
>                   |
>                   N             Nicholas Lewin-Koh
>                  / \            Dept of Statistics
>            N----C   C==O        Program in Ecology and Evolutionary Biology
>           ||   ||   |           Iowa State University
>           ||   ||   |           Ames, IA 50011
>           CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
>             \  / \ /            nlewin@iastate.edu
>              N    C
>              |   ||             Currently
>             CH3   O             Graphics Lab
>                                 School of Computing
>                                 National University of Singapore
>      The Real Part of Coffee    kohnicho@comp.nus.edu.sg
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 10 10:35:03 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 10 May 2002 11:35:03 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200205100935.LAA26278@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> I've already fixed the bugs, but as with the last one, this is
    MM> not critical enough to allow breaking current R-devel's code
    MM> freeze.  I hope I will have corrected it for 1.5.1..

yes, done: the fix has been in R-patched for about 2 days now..

MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Sat May 11 02:13:13 2002
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Sat, 11 May 2002 03:13:13 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110113.DAA29237@pubhealth.ku.dk>

I don't seem to be able to initialize a vector of NAs. I hope this is a
bug and not a new feature (I realize I have not paid much attention to a
lot of recent discussion about NA):

platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 
> vector(NA, 3)
Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> matrix(NA,2,2)
     [,1] [,2]
[1,]   NA   NA
[2,]   NA   NA

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat May 11 07:03:40 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Fri, 10 May 2002 23:03:40 -0700
Subject: [Rd] Rmpi
Message-ID: <D72E35A2-64A4-11D6-BE69-000393860F3C@stat.ucla.edu>

Compiled and installed this on OS X, using lam-6.5.5, but the usual 
glitch:

[cabledoc68:~/Desktop/Rmpi/src] deleeuw% gcc -bundle -bundle_loader 
/usr/local/lib/R/bin/R.bin -L/sw/lib -o Rmpi.so Rmpi.o conversion.o 
internal.o -L/usr/local/lam-6.5.5/lib -lmpi -llam
/usr/bin/ld: multiple definitions of symbol _do_args
/usr/local/lib/R/bin/R.bin definition of _do_args
/usr/local/lam-6.5.5/lib/liblam.a(do_args.o) definition of _do_args in 
section (__TEXT,__text)

By linking Rmpi.so manually with the -m flag we circumvent this.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 07:28:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 08:28:56 +0200 (MET DST)
Subject: [Rd] vector(NA, 3) (PR#1541)
Message-ID: <200205110628.IAA29669@pubhealth.ku.dk>

On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:

> I don't seem to be able to initialize a vector of NAs. I hope this is a
> bug and not a new feature (I realize I have not paid much attention to a
> lot of recent discussion about NA):

It's an incorrect use!

>From the help page:

    mode: A character string giving an atomic mode, or `"any"'.

I think you meant rep(NA, 3).


>
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> > vector(NA, 3)
> Error in vector(NA, 3) : vector: cannot make a vector of mode "NA".
> > matrix(NA,2,2)
>      [,1] [,2]
> [1,]   NA   NA
> [2,]   NA   NA

> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 11 10:51:02 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 11 May 2002 10:51:02 +0100 (BST)
Subject: [Rd] vector(NA, 3) (PR#1541)
In-Reply-To: <200205110628.IAA29669@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205111045550.26771-100000@gannet.stats>

On Sat, 11 May 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 11 May 2002 pgilbert@bank-banque-canada.ca wrote:
>
> > I don't seem to be able to initialize a vector of NAs. I hope this is a
> > bug and not a new feature (I realize I have not paid much attention to a
> > lot of recent discussion about NA):
>
> It's an incorrect use!
>
> From the help page:
>
>     mode: A character string giving an atomic mode, or `"any"'.
>
> I think you meant rep(NA, 3).

To amplify that, rep(NA, 3) gives a vector of *logical* NAs, just as
matrix(NA, 2, 2) gives a logical matrix.   There are five different
missing values in R, and `NA' happens to be mapped to the logical one
(unless coerced, implicitly or explicitly).

People normally want numerical missing values, for which use
rep(as.numeric(NA), 3).  Replace `numeric' by `integer', `complex' or
`character' for the other possibilities.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Sun May 12 06:24:23 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Sun, 12 May 2002 07:24:23 +0200 (MET DST)
Subject: [Rd] {round,trunc}.POSIXt and daylight savings time (PR#1543)
Message-ID: <200205120524.HAA01710@pubhealth.ku.dk>

I have found what looks like a small problem in trunc.POSIXt() 
involving the transition to/from standard time and daylight savings 
time. Assuming my assessment is correct, I have a potential solution 
to offer.

If a time in daylight savings time is rounded such that the rounded 
value is on the other side of the transition, the isdst element does 
not get changed accordingly. I have tested only the case of PDT 
rounded to PST in the US/Pacific time zone. I have tested it on 
(only) two different platforms, with slightly different results.  See 
below.

More specifically, in the US/Pacific time zone the transition from 
standard to daylight savings time takes place at 02:00 on the first 
Sunday in April, which in 2001 was 1 April.   My example is a vector 
x of two dates. x[1] is 2001-4-1 3:15, which is in daylight savings 
time. Rounded to the nearest midnight it is 2001-4-1 00:00, which is 
in standard time.

A potential solution is to insert
      x$isdst <- as.POSIXlt(format(x))$isdst
into trunc.POSIXt as its penultimate expression.

-Don

#### Solaris #####
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)    ## note that tmp[1] is labeled PDT, not PST
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### converting back to POSIXct reveals the problem more explicitly
>  print( as.POSIXct(tmp) )
[1] "2001-03-31 23:00:00 PST" "2001-05-03 00:00:00 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

>  Sys.getenv('TZ')
           TZ
"US/Pacific"

###### Darwin ######
>  x <- c(as.POSIXct('2001-4-1 3:15'),as.POSIXct('2001-5-2 17:56'))
>  print(x)
[1] "2001-04-01 03:15:00 PDT" "2001-05-02 17:56:00 PDT"
>
>  tmp <- round.POSIXt(x,'day')
>  print(tmp)
[1] "2001-04-01 PDT" "2001-05-03 PDT"
>
### gets NA instead
>  print( as.POSIXct(tmp) )
[1] NA               "2001-05-03 PDT"
>
>  tmp$isdst <- as.POSIXlt(format(tmp))$isdst
>  print( as.POSIXct(tmp) )
[1] "2001-04-01 PST" "2001-05-03 PDT"
>
>  version
          _
platform powerpc-apple-darwin5.5
arch     powerpc
os       darwin5.5
system   powerpc, darwin5.5
status
major    1
minor    5.0
year     2002
month    04
day      29
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon May 13 19:22:25 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Mon, 13 May 2002 20:22:25 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205131822.UAA13101@pubhealth.ku.dk>

Under R-1.5.0 on Solaris 2.6:

R> prettyNum(123456789, big.mark=",")
   [1] ",123,456,789"

and that bad behavior (leading comma) spills into formatC as well:

R> formatC(123456789, digits=0, format="f", big.mark=",")
   [1] ",123,456,789"

Looks to me like a bug in src/library/base/R/format.R, in function prettyNum:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})"),          # Original
                           P0("\\1",big.mark), revStr(B.[i.big])))

where we reverse the "before-the-decimal" string, then put a comma after each
set of 3 digits.  One solution is to make the first regexp check that it is not
followed by a word boundary, i.e. add "\\B" to the end of it:

  B.[i.big] <- revStr(gsub(P0("([0-9]{",big.interval,"})\\B"),       # DB's fix
                           P0("\\1",big.mark), revStr(B.[i.big])))

which seems to correct the problem:

R-with-fix> prettyNum(123456789, big.mark=",")
            [1] "123,456,789"
-- 
                              -- David Brahm (brahm@alum.mit.edu)


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From carne006@umn.edu  Mon May 13 21:25:46 2002
From: carne006@umn.edu (carne006@umn.edu)
Date: Mon, 13 May 2002 22:25:46 +0200 (MET DST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
Message-ID: <200205132025.WAA13461@pubhealth.ku.dk>

Full_Name: Edward Carney
Version: 1.5.0
OS: Win98
Submission from: (NULL) (160.94.222.161)


Bookmarks do not work in Table of Contents nor in Index in the
refman.pdf file for version 1.5.0.

Reading under Acrobat 4.05

Thanks,

EC

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue May 14 10:01:28 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 14 May 2002 11:01:28 +0200
Subject: [Rd] Quartz device for Darwin R (MacOS X)
Message-ID: <2D50434A-6719-11D6-AA2B-003065CC4CB8@mclink.it>

This announce is for Mac R developers mostly.

I have just updated the R-devel repository with a brand new quartz() 
device.
This will allow the Darwin build of R to display graphics without the 
need of X11.

The device is in its first release so it is needed more feedback as 
possible to let it become the true natural graphics device of Darwin R.


You should try to build R from the R-devel sources.

Please read the R-admin manual on how to build Darwin R for details, but 
two more things have to be done to let this version of R-devel to build 
under OSX.

The first is to add the "-framework Carbon" to the linker options.

Once R is built, your have to rename bin/help as something else 
otherwise R will not launch properly.

We are working for a better configuration process to avoid these last to 
steps.


To use the quartz device simply open it with quartz(). See the man page 
for the options ?quartz.

Looking forward for your comments,

							Stefano

p.s. one remark: the graphic window is not resizable and cannot be moved 
at the moment so don't send feedback on this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 10:13:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 11:13:08 +0200 (MET DST)
Subject: [Rd] prettyNum inserts leading commas (PR#1548)
Message-ID: <200205140913.LAA16941@pubhealth.ku.dk>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> Under R-1.5.0 on Solaris 2.6:
    R> prettyNum(123456789, big.mark=",")
    DavidB>    [1] ",123,456,789"

    ....

    DavidB> Looks to me like a bug in
    DavidB> src/library/base/R/format.R, in function prettyNum:

definitely a bug that will be fixed in 1.5.1.
Thank you for the example and patch proposal!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.GRUM@CGIAR.ORG  Tue May 14 14:23:17 2002
From: M.GRUM@CGIAR.ORG (M.GRUM@CGIAR.ORG)
Date: Tue, 14 May 2002 15:23:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141323.PAA20671@pubhealth.ku.dk>

I'm resending this bug report with a new example.  As seen below,
cut.dendrogram gives an error message for some heights, but not for others
and with some datasets adn not others.  I can't see why.

Last time I unwittingly sent my message with HTML formatting.  This time I'm
travelling and using an e-mail system that I am unfamiliar with.  As far as
I can see, I am not using HTML.

Best wishes,
Mikkel

> library(cluster)
> data(flower)
> dfl1 <- daisy(flower, type = list(asymm = 3))
> hdfl1<-hclust(dfl1,method="average")
> plot(hdfl1)
> ddfl1<-as.dendrogram(hdfl1)
> cdfl1<-cut(ddfl1,h=0.5)
> cdfl1<-cut(ddfl1,h=0.4)
> cdfl1<-cut(ddfl1,h=0.31312)
> cdfl1<-cut(ddfl1,h=0.31311)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.2)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14179)
Error: more elements supplied than there are to replace
> cdfl1<-cut(ddfl1,h=0.14178)
> cdfl1<-cut(ddfl1,h=0.1)
> ## but,
> dfl2 <- daisy(flower, type = list(asymm = c(1, 3), ordratio = 7))
> hdfl2<-hclust(dfl2,method="average")
> plot(hdfl2)
> ddfl2<-as.dendrogram(hdfl2)
> cdfl2<-cut(ddfl2,h=0.5)
> cdfl2<-cut(ddfl2,h=0.4)
> cdfl2<-cut(ddfl2,h=0.3)
> cdfl2<-cut(ddfl2,h=0.2)
> cdfl2<-cut(ddfl2,h=0.1)
>
--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows XP Professional (build 2600) Service Pack 0.0

Search Path:
 .GlobalEnv, package:mva, package:cluster, package:ctest, Autoloads,
package:base


-----Original Message-----
From: Martin Maechler
To: Grum, Mikkel
Cc: Martin Maechler
Sent: 10/05/02 12:28
Subject: Re: cut.dendrogram

Dear Mikkel,

Thank you for your report,
but
could you re-"compile" this message to make it (more) useful as
bug report?

1) Please turn *off* the HTML-ification that your e-mail
   software has used.  It can make messages in the R-bugs archive
   almost unusable (the same goes for attachments!)

2) Please use *complete* examples!  I.e. you can't use an object
   `x' that is only available to you.
   Try to use R datasets -- via data(<...>) -- or construct them
   explicitly. To do this, do  dput(yourdata) if yourdata is
   relatively small.
   Otherwise generate random data such as

   set.seed(532) # make it reproducible!
   y <- rnorm(100)
   mdat <- data.frame(x = 1:100, y = y, u = cut(y,3), v = y^2)

Thank you one more
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 14 15:11:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 14 May 2002 16:11:17 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205141411.QAA21267@pubhealth.ku.dk>

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:

    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    <...example deleted..>

yes, this time your message has been very useful;
thank you, Mikkel!

Indeed, there is a (at least one!) problem in the  "dendrogram"
class/methods, currently --- which might not be so astonishing,
given the following excerpt from its documentation :

 >> dendrogram                package:mva                R Documentation
 >> 
 >> General Tree Structures
 >> 
 >> Description:
 >> 
 >>      Class `"dendrogram"' provides general functions for handling
 >>      tree-like structures.  It is intended as a replacement for similar
 >>      functions in hierarchical clustering and classification/regression
 >>      trees, such that all of these can use the same engine for plotting
 >>      or cutting trees. Currently the code is in alpha stage and the API
 >>      may change at any point in time.

 >> .............

 >> Details:
 >> 
 >>      Warning: This documentation is preliminary.

Really, it has been on my todo list to look into this, and at least
provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
objects.
As you may have read above, we have not even settled about
several details. {suggestions are welcome!}

BTW, in your example, even the first cut() result couldn't be
plotted any more.

We will look into this.
Thanks for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.ox.ac.uk  Tue May 14 16:13:16 2002
From: david.firth@nuffield.ox.ac.uk (david.firth@nuffield.ox.ac.uk)
Date: Tue, 14 May 2002 17:13:16 +0200 (MET DST)
Subject: [Rd] R-admin docs, Installing packages (PR#1554)
Message-ID: <200205141513.RAA21776@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.5.0
OS: Mac OS X (Darwin)
Submission from: (NULL) (163.1.103.123)


In the R-admin document, at "Installing packages", it says:

  To install packages from source on Unix use

  R CMD INSTALL -l /path/to/library pkg1 pkg2 ...

  The part -l /path/to/library can be omitted, when the first library in R_LIBS
is   
  used if set, otherwise the main library R_HOME/library.

1.  Can I suggest re-wording this last sentence?  Replace "when" by "in which
case", and add "is used" at the end.  I puzzled for quite a while before I
understood what the present wording meant (and I hope I got it right!)

2.  I got confused also because although my .Renviron has
R_LIBS=/Users/david/Library/R
and that works when finding packages within an R session, when I use R CMD
install  without the -l /path/to/library part, packages still get installed in
R_HOME/library.  Am I right to conclude that .Renviron is not used by R CMD
install, and that R_LIBS has to be set by some other method before installing
packages to a private library in this way?  This could be clearer in the
documentation I think.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Tue May 14 18:44:52 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Tue, 14 May 2002 10:44:52 -0700 (PDT)
Subject: [Rd] R/S-Plus incompatibility in segments()
Message-ID: <20020514174452.54076.qmail@web13908.mail.yahoo.com>


There seems to be an incompatibility in the argument names of segments().

In Splus:

USAGE:

segments(x1, y1, x2, y2)

In R:

Usage:

segments(x0, y0, x1, y1,
         col = par("fg"), lty = par("lty"), lwd = par("lwd"), ...)

Any particular reason ? Should I report this as a bug ? (This is currently
messing up some nlme plot methods which uses lsegments() from lattice)

Deepayan



__________________________________________________

LAUNCH - Your Yahoo! Music Experience

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Tue May 14 19:02:12 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Tue, 14 May 2002 13:02:12 -0500
Subject: [Rd] changes to prepare for name space support
Message-ID: <20020514130212.C30020@nokomis.stat.umn.edu>

Two changes in the main development branch to prepare for name space
support:

	Functions in base now have .BaseNamespaceEnv as their
	environment instead of .GlobalEnv

	UseMethod dispatch now behaves like internal dispatch in
	searching for methods in the environment of the call to the
	generic rather than the definition environment of the generic.

The dispatch change should not be noticed at all but is needed to
obtain somewhat more sensible behavior once method definitions are
placed in name spaces.

The main effect of placing base in a name space is that redefinitions
of base functions in .GlobalEnv or loaded packages will not be seen
when when executing bodies of functions defined in base.  If your
intention is to redefine a function that is used by code in base you
need to explicitly assign the new definition into the base
environment.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

----- End forwarded message -----

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:30:51 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:30:51 +0200 (MET DST)
Subject: [Rd] lib.fixup, .GlobalEnv, and R1.5.0 (PR#1556)
Message-ID: <200205150630.IAA24619@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: 1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In R1.3.1, I used the following code inside a function to set a "path" attribute
to .GlobalEnv:

  env_ pos.to.env( 1)
  attr( env, 'path')_ .Path # .Path is a named char vector of length 1
  .Internal( lib.fixup( env, .GlobalEnv)) # adds the attribute

And this works fine. But in R1.5.0, the same code (executed e.g. within a call
to "local" from the command line) removes all the objects in .GlobalEnv (note,
though, that the 'path' attribute does get set OK). For various reasons, this
feature is crucial to me, so I can't actually use R1.5.0 without it!

Oddly, my code used to explicitly set a path attribute for newly-attached things
using this mechanism, and this has now been incorporated into R1.5.0 "library"
command. So I'm clearly not doing anything naughty here!

A suggestion: wouldn't it be easier if we could use

attr( env, <<whatever>>) # where env is an environment

and

attr( env, <<whatever>>)_ 45

instead of having to go via "lib.fixup"?

cheers
Mark


  

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:40:01 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:40:01 +0200 (MET DST)
Subject: [Rd] wishlist: I miss Frame 0 (PR#1557)
Message-ID: <200205150640.IAA24742@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R 1.3.1 + 
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


In the process of part-switching from S to R, one thing I find myself missing
greatly is S's Frame 0 feature. This is a very convenient place to put
session-level stuff, and to make temporary copies of things (e.g. system
functions) without overwriting the "real" objects lower down the search path.
The operation of Frame 0 is that it is searched during lookup before .GlobalEnv
and the rest of the search path, but it is NOT assigned to unless specified
explicitly in "assign". It seems to me that it would be simple to add this
feature in R. One particular area where it would be useful: I have a debugger
for S, which makes a modified copy of the debuggee function in frame 0. This
means that the original isn't modified. In the R version of the debugger, I have
to overwrite the original function, and there is a risk that I'll call
"save.image" or similar with the modified debug version being saved
inadvertently, losing the original copy.

Another thing I like to do with Frame 0, is to put session-level info in there
(general info for the debugger, information I use for project organization,
etc.). In R, I have to stuff all this into a list somewhere down the search
path, and I guess other people who need this facility have to create their own
equivalents. Having a shared Frame 0 at the top of the search path, would be
much nicer.

NB that I don't like S's Frame 1, and am happy to see the back of that one!

Any chance of getting Frame 0 back? I don't think it would disturb normal
operations unless people WANT to use it-- it's impossible of "accidentally"
putting things there.

cheers
Mark




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark.bravington@csiro.au  Wed May 15 07:54:53 2002
From: mark.bravington@csiro.au (mark.bravington@csiro.au)
Date: Wed, 15 May 2002 08:54:53 +0200 (MET DST)
Subject: [Rd] language: bug or feature: vector-subscript of list (PR#1558)
Message-ID: <200205150654.IAA24894@pubhealth.ku.dk>

Full_Name: Mark Bravington
Version: R1.3.1 & R1.5.0
OS: Windows 2000
Submission from: (NULL) (140.79.2.3)


R doesn't like the use of subscripts with length > 1, to get into recursive
lists:

> listio_ list( a=list( b=9, c='hello'), d=1:5)
> listio[[ c( 1, 2)]]
Error: attempt to select more than one element
> 

S is more relaxed:

test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
test> listio[[ c(1,2)]]
[1] "hello"
test> 

The same goes for assignment into recursive lists.

I find this feature essential, so I eventually wrote the workarounds below. But
I'm sure these are slow and ungainly.

Could this feature not be added as a primitive?

cheers
Mark
assign( '[[', function( var, ...) {
  pg_ .Primitive( '[[')
  vv_ as.name( 'var')
  for( i in c(...))
    vv_ call( 'pg', vv, i)
  eval( vv)
})

assign( '[[<-', function( var, ..., value) {
  i_ c( ...)
  if( length( i)<2)
return( .Primitive( '[[<-')( var, i, value))

  pa_ .Primitive( '[[<-')
  pg_ .Primitive( '[[')
  vario_ as.name( 'var')
  for( ii in i[ -length(i)])
    vario_ call( 'pg', vario, ii)

#  print( vario)

  callio_ substitute( value, envir=parent.frame())
  for( ii in rev( i)) {
    callio_ call( 'pa', vario, ii, callio)
    if( length( vario)>1)
      vario_ vario[[ 2]]
  }
#  print( callio)
return( eval( callio))
})




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 08:08:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 09:08:31 +0200 (MET DST)
Subject: (PR#1558) [Rd] language: bug or feature: vector-subscript of
Message-ID: <200205150708.JAA25040@pubhealth.ku.dk>

On Wed, 15 May 2002 mark.bravington@csiro.au wrote:

> Full_Name: Mark Bravington
> Version: R1.3.1 & R1.5.0
> OS: Windows 2000
> Submission from: (NULL) (140.79.2.3)
>
>
> R doesn't like the use of subscripts with length > 1, to get into recursive
> lists:
>
> > listio_ list( a=list( b=9, c='hello'), d=1:5)
> > listio[[ c( 1, 2)]]
> Error: attempt to select more than one element
> >
>
> S is more relaxed:
>
> test>  listio_ list( a=list( b=9, c='hello'), d=1:5)
> test> listio[[ c(1,2)]]
> [1] "hello"
> test>
>
> The same goes for assignment into recursive lists.
>
> I find this feature essential, so I eventually wrote the workarounds below. But
> I'm sure these are slow and ungainly.
>
> Could this feature not be added as a primitive?

[[ is already a primitive, and nowhere that I can see is it documented
that it allows an argument of length 2.  So it is neither a bug nor a
feature, but a difference from S.

If you submit a patch based on the current R-devel sources, we will add it
if it checks out.  Otherwise, as no one else has ever expressed a need of
this feature, it is very unlikely to get implemented.  R is not a clone of
S, and has the features it has because the workers had need of them.

Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
planned to deprecate `_' in R shortly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 15 10:54:47 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 15 May 2002 11:54:47 +0200 (MET DST)
Subject: [Rd] RE: cut.dendrogram (PR#1552)
Message-ID: <200205150954.LAA27417@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "MikG" == M GRUM <M.GRUM@CGIAR.ORG> writes:
    MikG> I'm resending this bug report with a new example.  As
    MikG> seen below, cut.dendrogram gives an error message for
    MikG> some heights, but not for others and with some
    MikG> datasets adn not others.  I can't see why.

    MikG> Last time I unwittingly sent my message with HTML
    MikG> formatting.  This time I'm travelling and using an
    MikG> e-mail system that I am unfamiliar with.  As far as I
    MikG> can see, I am not using HTML.

    MM> <...example deleted..>

    MM> yes, this time your message has been very useful;
    MM> thank you, Mikkel!

    MM> Indeed, there is a (at least one!) problem in the  "dendrogram"
    MM> class/methods, currently --- which might not be so astonishing,
    MM> given the following excerpt from its documentation :

    <......>

    MM> Really, it has been on my todo list to look into this, and at least
    MM> provide a few more methods, e.g. print(), str(), and maybe "[", "[[".
    MM> Also, as.dendrogram.<class> for "tree" and/or "rpart" and "VLMC"
    MM> objects.

several of these will be in R-devel (to become 1.6 in fall)

    MM> As you may have read above, we have not even settled about
    MM> several details. {suggestions are welcome!}

    MM> BTW, in your example, even the first cut() result couldn't be
    MM> plotted any more.

{nonsense; cut() does not produce a dendrogram but a list
	   containing them!}

    MM> We will look into this.
done.

The fix (now in R-patched which will become 1.5.1) is very easy:

--- src/library/mva/R/dendrogram.R.~1~	13 Aug 2001 21:41:50
+++ src/library/mva/R/dendrogram.R	15 May 2002 09:47:50
@@ -136,7 +136,7 @@
 
 cut.dendrogram <- function(x, h, ...)
 {
-    LOWER <- NULL
+    LOWER <- list()
     X <- 1
 
--------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Minette3557n14@webinfo.fi  Thu May 16 09:46:46 2002
From: Minette3557n14@webinfo.fi (Minette3557n14@webinfo.fi)
Date: Wed, 15 May 2002 21:46:46 -1100
Subject: [Rd] Financial strategies
Message-ID: <000a84c11d7d$6183b4a0$1bd31cd8@lcokco>

------=_NextPart_000_00C7_71E13B5A.B1167A52
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: base64


PCEtLSBzYXZlZCBmcm9tIHVybD0oMDAyMilodHRwOi8vaW50ZXJuZXQuZS1t
YWlsIC0tPg0KPGh0bWw+DQo8Ym9keT4NCjxwIGFsaWduPSJjZW50ZXIiPjxi
Pjxmb250IHNpemU9IjYiIGNvbG9yPSIjRkYwMDAwIj5FWENMVVNJVkUgRlJF
RSBGSU5BTkNJQUwgTUFSS0VUIFJFUE9SVDwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PGZvbnQgc2l6ZT0iNSIgY29sb3I9IiMwMDAw
RkYiPkEgc21hbGwgaW52ZXN0bWVudCBjb3VsZCByZXR1cm4gMiB0byAzIHRp
bWVzIG9yIG1vcmUgb24geW91ciBtb25leTwvZm9udD48L2I+PC9wPg0KPHAg
YWxpZ249ImNlbnRlciI+PGI+PHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5OiBU
aW1lcyBOZXcgUm9tYW47IG1zby1mYXJlYXN0LWZvbnQtZmFtaWx5OiBUaW1l
cyBOZXcgUm9tYW47IG1zby1hbnNpLWxhbmd1YWdlOiBFTi1VUzsgbXNvLWZh
cmVhc3QtbGFuZ3VhZ2U6IEVOLVVTOyBtc28tYmlkaS1sYW5ndWFnZTogQVIt
U0EiPjxmb250IHNpemU9IjYiPjxhIGhyZWY9Imh0dHA6Ly84MS45LjguNC9U
cmFkaW5nRG9sbGFycy8iPkdPDQpIRVJFIFRPIExFQVJOIEhPVzwvYT48L2Zv
bnQ+PC9zcGFuPjwvYj48L3A+DQo8cCBhbGlnbj0iY2VudGVyIj48YSBocmVm
PSJodHRwOi8vODEuOS44LjQvTGlzdE9wdE91dC8iPjxiPjxmb250IHNpemU9
IjUiIGNvbG9yPSIjMDAwMDAwIj5MaXN0DQpvcCBPdXQ8L2ZvbnQ+PC9iPjwv
YT48L3A+DQoNCjwvYm9keT4NCg0KPC9odG1sPg0KDQoxNmwy
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 15 16:39:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 May 2002 16:39:55 +0100 (BST)
Subject: [Rd] Problem with Refman.pdf (PR#1550)
In-Reply-To: <200205132025.WAA13461@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205151638260.12307-100000@gannet.stats>

I've traced this to something in the methods package, and am investiating
further.  Building excluding that package makes the links work, with it
they do not.  There are duplicate links, which may the cause.


On Mon, 13 May 2002 carne006@umn.edu wrote:

> Full_Name: Edward Carney
> Version: 1.5.0
> OS: Win98
> Submission from: (NULL) (160.94.222.161)
>
>
> Bookmarks do not work in Table of Contents nor in Index in the
> refman.pdf file for version 1.5.0.
>
> Reading under Acrobat 4.05
>
> Thanks,
>
> EC
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 03:29:03 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 04:29:03 +0200 (MET DST)
Subject: [Rd] (PR#1558)
Message-ID: <200205160229.EAA03603@pubhealth.ku.dk>

My reading of the R documentation is that the nature of the subscript i in
x[[i]] is not specified; the only obvious rule is that it should lead to to
a single element. Which is what I'm after: a way of extracting or changing
the 4th element of the 2nd element of a list. Incidentally, the operational
difficulty comes in general programming when I don't know in advance how
many levels down the list I'm going. Otherwise I could just grit my teeth &
type x[[ i[1] ]] [[ i[ 2] ]] [[ i[ 3] ]] instead of x[[ i]].

The S2000 documentation says this:

  A special case of the [[ construct is when x is recursive (e.g., a list)
and i is a list. The components of i should all have length 1 and be
character or numeric. The statement x[[i]] is equivalent to:

  x [[ i[[1]] ]] [[ i[[2]] ]]  ...  [[ i[[length(i)]] ]]

  For example, x[[list("b", 2, 4)]] will pick out the 4th component of the
2nd component of the b component of x.
  
In S2000, it turns out that this also works if "i" is a numeric or character
vector rather than a list, as in my example. This extension to non-lists is
useful and harmless but not essential, because one could always use
"as.list". In R, though, neither the list nor the vector version currently
exists.

#If you submit a patch based on the current R-devel sources, we will add it
#if it checks out.  Otherwise, as no one else has ever expressed a need of
#this feature, it is very unlikely to get implemented.  R is not a clone of
#S, and has the features it has because the workers had need of them.

Well, this worker has need of this feature, which is why I wrote those
workarounds! It does seem to me that, if a language allows one to use
recursive structures of arbitrary nestedness, then there should be a simple
mechanism for accessing and changing arbitrary elements of a recursive
structure.

For now, I will just submit my R code as a mini-library. My point about
having a .Primitive was one of speed-- my R code seems to work OK, but it
must slow things down. I doubt that I'm up to producing a C patch-- I use
Delphi not C, so this sounds a bit daunting. If anyone else would like to
pick up the challenge..?

#Please do _not_ use "foo_ ".  It is not a meaningful grouping, and it is
#planned to deprecate `_' in R shortly.

As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
ambiguous "<-" goes onto the same pyre ;)

cheers

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 16 04:25:36 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 15 May 2002 20:25:36 -0700
Subject: [Rd] (PR#1558)
In-Reply-To: <200205160229.EAA03603@pubhealth.ku.dk>
References: <200205160229.EAA03603@pubhealth.ku.dk>
Message-ID: <87sn4svknj.fsf@jeeves.blindglobe.net>

>>>>> "mark" == Mark Bravington <Mark.Bravington@csiro.au> writes:


    mark> As to "_": I'll be happy to sacrifice the unambiguous "_" provided that the
    mark> ambiguous "<-" goes onto the same pyre ;)

I feel completely opposite.  And I'm not terribly happy about the idea
of using "=", either, having just been bit by the = vs. == classic user
slip up.  

I actually do like "<-", but then again, I'm using ESS...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Thu May 16 07:48:29 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Thu, 16 May 2002 08:48:29 +0200 (MET DST)
Subject: [Rd] (PR#1556)
Message-ID: <200205160648.IAA04154@pubhealth.ku.dk>

lib.fixup

My previous post mentions a problem encountered when calling ".Internal(
lib.fixup..." in R1.5.0. I have since found a workaround. It's possible in
R1.5.0 to set attributes of search path environments directly, like so:

> env_ pos.to.env( 3)
> attr( env, 'any.attr')_ 'any.value'
> pos.to.env( 3)
<environment: package:tcltk>
attr(,"name")
[1] "package:tcltk"
attr(,"path")
[1] "C:/R/rw1050/library/tcltk"
attr(,"any.attr")
[1] "any.value"

In R1.3.1, it used to be necessary to use lib.fixup to achieve this. It's
still not possible to call

> attr( pos.to.env( 3), 'any.attr')_ 'any.value'

directly, but this doesn't matter. My (mis-typed) wish-lish-suggestion in
the last post, is therefore irrelevant, and personally I no longer need
lib.fixup. NB that it can still cause problems if it is used-- but as it's
undocumented, I don't suppose this will be a major issue.

Nevertheless, calls to ".Internal( lib.fixup..." are not things of beauty,
and I wonder whether the current usage in "library" is actually necessary?
The code currently reads

            loadenv <- new.env(hash = TRUE, parent = .GlobalEnv)
            <<...>>
                sys.source(codeFile, loadenv, keep.source = keep.source)
            <<...>>
            env <- attach(NULL, name = pkgname)
            on.exit(do.call("detach", list(name = pkgname)))
            attr(env, "path") <- file.path(which.lib.loc, package)
            .Internal(lib.fixup(loadenv, env))
            
but I seem to get satisfactory results with

      env_ attach( NULL, name = pkgname)
      on.exit(do.call("detach", list(name = pkgname)))            
      attr( env, "path") <- file.path(which.lib.loc, package)
      <<...>>
          sys.source(codeFile, env, keep.source = keep.source) # i.e.
straight into "env" not into "loadenv"
      <<...>>
      
which does away with the calls to "new.env" and "lib.fixup". As far as I can
see, the "parent=.GlobalEnv" argument to "new.env" doesn't have any effect
after "lib.fixup"; I'm not sure about the "hash=TRUE".

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu May 16 09:04:30 2002
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Thu, 16 May 2002 10:04:30 +0200 (MET DST)
Subject: [Rd] Re: [R] NaN/NA and sprintf double format (PR#1561)
Message-ID: <200205160804.KAA05351@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 14 May 2002, Dirk Eddelbuettel wrote:
> 
> > With a (late prerelease of) 1.5.0 on Windows, using sprintf on NaN
> > yields garbage when the number of decimal is specified while it
> > works fine for NA:
> >
> > > sprintf("%.2f", NA)
> > [1] "0.00"
> 
> I get that on Linux too, but why is it fine?  See below.
> 
> > > sprintf("%.2f", NaN)
> > [1] "-1.#J"
> >
> > Not specifying the decimal precision lets both print garbage:
> >
> > > sprintf("%f", NaN)
> > [1] "-1.#IND00"
> > > sprintf("%f", NA)
> > [1] "-1.#QNAN0"
> >
> > Is this a bug or a feature?
> 
> Remember that NA is logical, so this is not correct usage.  Not that the
> correct usage works very much better ....
> 
> The C code says
> 
> /* Simple wrapper for C sprintf function: does very little checking to
>    see that the format conversion character and the argument are
>    compatible.  This is the user's responsibility!
> */
> 
> and I think that should be on the help page.  If it were, this is a
> feature.

Naturally it's a feature!  But I agree that an extra sentance or two on
the help page would be a good idea.  I suggest appending the following
as a new paragraph to the Value section:

As \code{sprintf} is simply a wrapper for the C function of the same
name, it is the user's responsibility to ensure that the objects passed
in \code{\dots} correspond to the format.  Otherwise the resulting
string may contain garbage.  For example, the typical R numeric object
is a float not an integer (see Examples, below).  Likewise, C does not
recognise special values like \code{NA}, so \code{sprintf("Our survey
said: %f", NA)} is not going to work as you might want.

I've cc'ed this to r-bugs.  Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 01:06:28 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 02:06:28 +0200 (MET DST)
Subject: [Rd] R-1.5.0 on NetBSD (PR#1565)
Message-ID: <200205170006.CAA12976@pubhealth.ku.dk>

NetBSD 1.5ZA on intel

There is a problem with the R-1.5.0 compile under NetBSD caused by a
non-standard zconf.h in NetBSD.  The configure script quite happily
accepts the installed zlib.h, but because the NetBSD zconf.h
substitutes the OF macro by an  __P macro (in zconf.h) the make fails
when trying to compile dounzip.c with many errors like:

In file included from dounzip.c:28:
unzip.h:114: parse error before `OF'

(unzip.h includes zlib.h which includes zconf.h)

So I guess the ideal is for the configure script to test this aspect
(the existence of the OF macro) while it is checking the zlib.h itself,
then fall back to the supplied zconf.h if the OF macro is not defined.

I'll try to construct a workaround, but I am not at all familiar with
the intricacies of the configure script, so I expect this will be much
more efficiently achieved by someone who is.

Certainly I can easily test any proposed solution.

Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 02:14:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 16 May 2002 21:14:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
Message-ID: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>

So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
version) into src/extra/pcre and compiling on Win32 but its dying during
the final link (undefined reference to 'pcre_free') is there some special
magic I'm missing or do I get to hunt this one down on my own?

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ray.Brownrigg@mcs.vuw.ac.nz  Fri May 17 05:59:55 2002
From: Ray.Brownrigg@mcs.vuw.ac.nz (Ray.Brownrigg@mcs.vuw.ac.nz)
Date: Fri, 17 May 2002 06:59:55 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170459.GAA13479@pubhealth.ku.dk>

Firstly I omitted the following information from my original message:

R is now configured for i386--netbsdelf

  Source directory:          .
  Installation directory:    /usr/pkg
  C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
  FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            yes
  Readline support:          yes

  R profiling support:       yes
  R as a shared library:     no


Secondly, a workaround patch is the following:

--- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
+++ src/main/unzip.h
@@ -49,6 +49,16 @@
 #include "zlib.h"
 #endif
 
+/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
+
+#ifndef OF /* function prototypes */
+#  ifdef STDC
+#    define OF(args)  args
+#  else
+#    define OF(args)  ()
+#  endif
+#endif
+
 #if defined(STRICTUNZIP) || defined(STRICTZIPUNZIP)
 /* like the STRICT of WIN32, we define a pointer that cannot be converted
     from (void*) without cast */


Ray Brownrigg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:14:17 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 17 May 2002 07:14:17 +0100 (BST)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.10.10205162113020.372-100000@hsph.harvard.edu>
Message-ID: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>

On Thu, 16 May 2002, Byron Ellis wrote:

> So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> version) into src/extra/pcre and compiling on Win32 but its dying during
> the final link (undefined reference to 'pcre_free') is there some special
> magic I'm missing or do I get to hunt this one down on my own?

It's worked for me on three separate installations (one cross-compiling).
Please check that the files did get compiled and that pcre_free is
exported by libpcre.a.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 07:45:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 08:45:48 +0200 (MET DST)
Subject: [Rd] Re: R-1.5.0 on NetBSD (PR#1566)
Message-ID: <200205170645.IAA13861@pubhealth.ku.dk>

On Fri, 17 May 2002 Ray.Brownrigg@mcs.vuw.ac.nz wrote:

> Firstly I omitted the following information from my original message:
>
> R is now configured for i386--netbsdelf
>
>   Source directory:          .
>   Installation directory:    /usr/pkg
>   C compiler:                cc  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   C++ compiler:              c++  -mieee-fp -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -I/mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/include -O2 -I/usr/pkg/share/x11-links/include
>   FORTRAN compiler:          /mnt/scratch/pkgsrc/math/R/work.i386/.buildlink/bin/f2c-f77 -O
>   X11 support:               yes
>   Gnome support:             no
>   Tcl/Tk support:            yes
>   Readline support:          yes
>
>   R profiling support:       yes
>   R as a shared library:     no
>
>
> Secondly, a workaround patch is the following:
>
> --- src/main/unzip.h.orig       Mon Feb  4 11:48:57 2002
> +++ src/main/unzip.h
> @@ -49,6 +49,16 @@
>  #include "zlib.h"
>  #endif
>
> +/* Fudge for NetBSD's replacement of OF by __P in zconf.h */
> +
> +#ifndef OF /* function prototypes */
> +#  ifdef STDC
> +#    define OF(args)  args
> +#  else
> +#    define OF(args)  ()
> +#  endif
> +#endif
> +

Thanks. That extract is taken directly from zconf.h in the official
version, so do I gather that NetNSD has gratuitously removed it?

R assumes ISO C, so we don't need the test for STDC.

This is surely a bug in NetBSD and not in R, so I hope you have also filed
a NetBSD bug report.  I've add the comment

/* workaround for NetBSD vandalism on zconf.h */

and that seems a reasonable description to me (and a lot less rude
that some comments about other OSes legitimate differences in the R
sources).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Fri May 17 13:59:04 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Fri, 17 May 2002 14:59:04 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as intended from version 1.5 (PR#1567)
Message-ID: <200205171259.OAA19894@pubhealth.ku.dk>

# replication code at end of mail

> # As from R 1.5 
> 
> identical(as.character(NA), "NA")
[1] FALSE
> 
> # there is no longer a fundamental difference between "NA" 
> # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> # however, though "NA" is not given as na.strings we have
> 
> type.convert(c("NA", "1", NA), na.strings="b")
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings="b")
[1] NN   1    <NA>
Levels:  1 NN NA 
> 
> # dito
> type.convert(c("NA", "1", NA), na.strings=character())
[1] NA  1 NA
> # compare to
> type.convert(c("NN", "1", NA), na.strings=character())
[1] NN   1    <NA>
Levels:  1 NN NA 
 
 
# furthermore, may be type.convert should have default
# function(x, na.strings = NA, as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = character(), as.is = FALSE, dec = ".")
# or 
# function(x, na.strings = NULL, as.is = FALSE, dec = ".")
# rather then
# function(x, na.strings = "NA", as.is = FALSE, dec = ".")


# As from R 1.5 

identical(as.character(NA), "NA")

# there is no longer a fundamental difference between "NA" 
# and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
# however, though "NA" is not given as na.strings we have

type.convert(c("NA", "1", NA), na.strings="b")
# compare to
type.convert(c("NN", "1", NA), na.strings="b")

# dito
type.convert(c("NA", "1", NA), na.strings=character())
# compare to
type.convert(c("NN", "1", NA), na.strings=character())



-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 17 15:48:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 17 May 2002 16:48:43 +0200 (MET DST)
Subject: [Rd] type.convert() does not treat "NA" as ordinary string as (PR#1568)
Message-ID: <200205171448.QAA21029@pubhealth.ku.dk>

On Fri, 17 May 2002 oehl_list@gmx.de wrote:

> # replication code at end of mail
>
> > # As from R 1.5
> >
> > identical(as.character(NA), "NA")
> [1] FALSE
> >
> > # there is no longer a fundamental difference between "NA"
> > # and an ordinary string like "NN" (WHICH IS A GREAT IDEA!!)
> > # however, though "NA" is not given as na.strings we have
> >
> > type.convert(c("NA", "1", NA), na.strings="b")
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings="b")
> [1] NN   1    <NA>
> Levels:  1 NN NA
> >
> > # dito
> > type.convert(c("NA", "1", NA), na.strings=character())
> [1] NA  1 NA
> > # compare to
> > type.convert(c("NN", "1", NA), na.strings=character())
> [1] NN   1    <NA>
> Levels:  1 NN NA

Yes. Thanks for pointing it out.
Notice that is a real result, as the real convertor was hard-coded to
handle "NA" as a missing real.  It proved a little tricky to disentangle
it.

> # furthermore, may be type.convert should have default
> # function(x, na.strings = NA, as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = character(), as.is = FALSE, dec = ".")
> # or
> # function(x, na.strings = NULL, as.is = FALSE, dec = ".")
> # rather then
> # function(x, na.strings = "NA", as.is = FALSE, dec = ".")

That was intentional.  It is intended to convert character input read from
a file, and R does still regards "NA" in a file as missing unless told
otherwise.  So it makes sense to have the same default for type.convert,
and also for backwards compatibility.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 17 16:04:52 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 17 May 2002 11:04:52 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205171104210.29395-100000@hsph.harvard.edu>

So cut-n-pasting the pcre 3.9 files should work fine? Hrmmm, I'll poke
around.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 17 17:30:11 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 17 May 2002 18:30:11 +0200 (MET DST)
Subject: [Rd] pbinom gotcha (PR#1569)
Message-ID: <200205171630.SAA21501@pubhealth.ku.dk>

This came up due to a question from Anders Hald:

Bernoulli calculated an approximation to the smallest n so that

P(0.58 <= x/n <= 0.62) >= 1000/1001

What is the exact value?

Now try

n <- 6350:6500
Pr <- function(n)pbinom(0.62*n,n,0.6) -  
  pbinom(0.58*n,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

Next, try

Pr <- function(n)pbinom(0.62*n,n,0.6) - 
        pbinom(0.58*n + 1e-7,n,0.6) + dbinom(0.58*n,n,0.6)
plot(n,Pr(n),type="b")
abline(h=1000/1001)
min(n[Pr(n)>1000/1001])

At least on Linux, you get quite different results.
The reason is of course that 

> 0.58*6400-3712
[1] -4.547474e-13

and dbinom has a fuzz factor, but pbinom unceremoniously takes
floor(x). I suppose we ought to build the same fuzz into pbinom? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:04:27 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 17 May 2002 23:04:27 +0200 (MET DST)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
Message-ID: <200205172104.XAA22116@pubhealth.ku.dk>

>
> 	I have a function called FitModels(), which simply takes in the
> names of a data.frame and two variable names within that data.frame, and
> fits and returns a list of objects from 2 coxph() fits, one main effects and
> one interaction model.  Sometimes the two variables are such that there is a
> warning message: convergence has not been reached, or the X matrix is
> singular, or some such.

In fact the warning that the convergence may not have been reached in
coxph is usually spurious, so you probably don't want to catch it.
However, there does seem to be something strange going on.


Simplified version
 f<-function(){
    x<-try(warning("a"))
    y<-try(warning("b"))
    list(x,y)
 }

> options(warn=2)
> f()
Error in try(warning("a")) : (converted from warning) a
[[1]]
[1] "Error in try(warning(\"a\")) : (converted from warning) a\n"
attr(,"class")
[1] "try-error"

[[2]]
[1] "b"

> f()
[[1]]
[1] "a"

[[2]]
[1] "b"


Or even more simply

> options(warn=2)
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))
> warnings()
Error in warnings() : Object "last.warning" not found
> try(warning("Danger, Will Robinson"))
Error in try(warning("Danger, Will Robinson")) :
        (converted from warning) Danger, Will Robinson
> try(warning("Danger, Will Robinson"))
> try(warning("Danger, Will Robinson"))



	-thomas
Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May 17 22:22:05 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 17 May 2002 14:22:05 -0700 (PDT)
Subject: [Rd] Re: [R] options()$warn==2 and try() (PR#1570)
In-Reply-To: <200205172104.XAA22116@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0205171418050.95512-100000@homer11.u.washington.edu>


Even try() isn't really involved.

The problem is in src/errors.c:warningcall

It sets a flag inWarning, presumably to ensure that infinite loops of
recursive warnings don't happen, but if options(warn)==2 then an error is
signalled and the flag is not cleared until the next error.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat May 18 19:51:45 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sat, 18 May 2002 14:51:45 -0400 (EDT)
Subject: [Rd] PCRE in development code?
In-Reply-To: <Pine.GSO.4.44.0205170712120.3903-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10205181450281.4117-100000@hsph.harvard.edu>

I found the problem---for some reason when libpcre.a is being built the R
Makefiles try to build it from pcre.dll, not build a static library. When
I built the static library separately everything went swimmingly.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys

On Fri, 17 May 2002, Prof Brian D Ripley wrote:

> On Thu, 16 May 2002, Byron Ellis wrote:
> 
> > So PCRE dropped into R-devel recently, I tried just dropping 3.9 (latest
> > version) into src/extra/pcre and compiling on Win32 but its dying during
> > the final link (undefined reference to 'pcre_free') is there some special
> > magic I'm missing or do I get to hunt this one down on my own?
> 
> It's worked for me on three separate installations (one cross-compiling).
> Please check that the files did get compiled and that pcre_free is
> exported by libpcre.a.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dciemo@excite.com  Mon May 20 04:42:40 2002
From: dciemo@excite.com (dciemo@excite.com)
Date: Mon, 20 May 2002 05:42:40 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect  R-lang.pdf (PR#1575)
Message-ID: <200205200342.FAA27132@pubhealth.ku.dk>

Full_Name: David Ciemiewicz
Version: 1.3.1
OS: Windows 2000
Submission from: (NULL) (63.192.218.208)


In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
expression which uses the function "any".

> if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> y <- if( any(x)<= 0 ) log(1+x) else log(x)

However, the parenthesis are incorrect in the conditional part of the if.

It should be:

    if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
    y <- if ( any(x <= 0) ) log(1+x) else log(x)


However, if we are really being pedantic, this is still not correct.  If any
values of x are <= -1, you will still get an error.

I'm still too new to R to figure out how to get what I thing I really want which
would set all values less than or equal to zero to be 1.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 11:12:47 +0200 (MET DST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect (PR#1576)
Message-ID: <200205200912.LAA27719@pubhealth.ku.dk>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 10:12:01 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
Subject: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect
 R-lang.pdf (PR#1575)
In-Reply-To: <200205200342.FAA27132@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0205201007360.16296-100000@gannet.stats>

On Mon, 20 May 2002 dciemo@excite.com wrote:

> Full_Name: David Ciemiewicz
> Version: 1.3.1
> OS: Windows 2000
> Submission from: (NULL) (63.192.218.208)
>
>
> In the R Language Manual (R-lang.pdf), section 3.2.1 "if", there is an example
> expression which uses the function "any".
>
> > if( any(x) <= 0 ) y <- log(1+x) else y <- log(x)
> > y <- if( any(x)<= 0 ) log(1+x) else log(x)
>
> However, the parenthesis are incorrect in the conditional part of the if.
>
> It should be:
>
>     if ( any(x <= 0) ) y <- log(1+x) else y <- log(x)
>     y <- if ( any(x <= 0) ) log(1+x) else log(x)

Yes, fixed for 1.5.1, thanks.

> However, if we are really being pedantic, this is still not correct.  If any
> values of x are <= -1, you will still get an error.

But that may be the intention: the intention is not explained.  Or it may
be already known that x > -1.

Not that log(0) is not an error (it is -Inf) so only x < -1 would generate
an error.

> I'm still too new to R to figure out how to get what I thing I really want which
> would set all values less than or equal to zero to be 1.

x[x <= 0] <- 1



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 11:46:16 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 12:46:16 +0200 (MET DST)
Subject: [Rd] is.na<- coerces character vectors to be factors within dataframes (PR#1577)
Message-ID: <200205201046.MAA27985@pubhealth.ku.dk>

I am not sure if this is a bug within is.na<- or if it lies deeper in the
dataframe construction process. Indeed, perhaps it is not a bug at all (in
which case I would suggest that the help page for NA be provided with a warning
for unsuspecting users (like me)).

When used on a character vector within a dataframe, is.na<- coerces the vector
to factor.

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> x
  var
1   A
2   B
3   C
> is.character(x$var)
[1] TRUE
> is.na(x[[1]]) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] FALSE
> is.factor(x$var)
[1] TRUE
>

Interestingly enough, this coersion does not occur if you refer to x$var
instead of x[[1]].

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
> is.na(x$var) <- 2
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE
> 

I could (ort of) imagine a story in which the coercision is the desired
behavior --  by using is.na you are implicitly taking apart a dataframe and
putting it back together and, when you make dataframes, character vectors are
coerced to factor by default. But I can't come up with a story as to why x$var
should be handled differently then x[[1]].

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Thanks,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 20 12:46:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 May 2002 13:46:35 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201146.NAA28130@pubhealth.ku.dk>

The inconsistency is that you use $<- to set the column, then [[<- to
change it.  Had you tried to set the column by

x[[1]] <- as.character(x[[1]])

you would have seen the problem immediately (it does not work as you would
have intended).  If you want to be sure to turn off conversion to factor,
you need to set the column to class "AsIs".  My belief is that
will behave consistently.

> x <- data.frame(var = I(LETTERS[1:3]))
> is.na(x[[1]]) <- 2
> x
   var
1    A
2 <NA>
3    C
>  is.character(x$var)
[1] TRUE
> is.factor(x$var)
[1] FALSE

In any case, it is nothing to do with is.na<-:

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)
>
> x[[1]][2] <- "3"
> x
  var
1   A
2   3
3   C
> is.character(x$var)
[1] FALSE

You'll see that [[<-.data.frame contains

            if (!inherits(value, "data.frame"))
                value <- as.data.frame(value)

and that is where the coercion is done.  It really isn't possible to tell
your intentions if you replace a whole column of a data frame.

Having said all that, the source says

    if(nargs() < 4) {
	## really ambiguous, but follow common use as if list
	## el(x,i) <- value is the preferred approach

and S4 does not do the conversion.

I don't understand the comment, as

> get("el<-")
.Primitive("[[<-")

and so el<- just calls [[<- ....



On Mon, 20 May 2002 a296180@mica.fmr.com wrote:

> I am not sure if this is a bug within is.na<- or if it lies deeper in the
> dataframe construction process. Indeed, perhaps it is not a bug at all (in
> which case I would suggest that the help page for NA be provided with a warning
> for unsuspecting users (like me)).

Not appropriate!

> When used on a character vector within a dataframe, is.na<- coerces the vector
> to factor.
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > x
>   var
> 1   A
> 2   B
> 3   C
> > is.character(x$var)
> [1] TRUE
> > is.na(x[[1]]) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] FALSE
> > is.factor(x$var)
> [1] TRUE
> >
>
> Interestingly enough, this coersion does not occur if you refer to x$var
> instead of x[[1]].
>
> > x <- data.frame(var = LETTERS[1:3])
> > x$var <- as.character(x$var)
> > is.na(x$var) <- 2
> > x
>    var
> 1    A
> 2   <NA>
> 3    C
> > is.character(x$var)
> [1] TRUE
> > is.factor(x$var)
> [1] FALSE
> >
>
> I could (ort of) imagine a story in which the coercision is the desired
> behavior --  by using is.na you are implicitly taking apart a dataframe and
> putting it back together and, when you make dataframes, character vectors are
> coerced to factor by default. But I can't come up with a story as to why x$var
> should be handled differently then x[[1]].
>
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
>
> Thanks,
>
> David Kane
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:25:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 19:25:10 +0200 (MET DST)
Subject: (PR#1577) [Rd] is.na<- coerces character vectors to be factors
Message-ID: <200205201725.TAA29076@pubhealth.ku.dk>

Thanks for taking the time and trouble to explain this to me.

ripley@stats.ox.ac.uk writes:
 > You'll see that [[<-.data.frame contains
 > 
 >             if (!inherits(value, "data.frame"))
 >                 value <- as.data.frame(value)
 > 
 > and that is where the coercion is done.  It really isn't possible to tell
 > your intentions if you replace a whole column of a data frame.

What is the appropriate way to change the value in a single row in a dataframe
to NA without having to "replace a whole column"? That is, how can I change the
value "B" in row 2 to being NA while keeping var as a vector of characters?

> x <- data.frame(var = LETTERS[1:3])
> x$var <- as.character(x$var)

One obvious answer is to use simple assignment.

> x[2,1] <- NA
> x
   var
1    A
2   <NA>
3    C
> is.character(x$var)
[1] TRUE
> 

This has the desired effect. Moreover, something like this would work with my
merge.data.frame problem. However, I have been operating under the (mistaken?)
impression that assigning NA directly was A Bad Thing.


 > On Mon, 20 May 2002 a296180@mica.fmr.com wrote:
 > 
 > > I am not sure if this is a bug within is.na<- or if it lies deeper in the
 > > dataframe construction process. Indeed, perhaps it is not a bug at all (in
 > > which case I would suggest that the help page for NA be provided with a warning
 > > for unsuspecting users (like me)).
 > 
 > Not appropriate!

Yes. I see that now.

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 18:38:06 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Mon, 20 May 2002 13:38:06 -0400
Subject: [Rd] Suggested change in merge.data.frame
Message-ID: <15593.13438.272566.100291@gargle.gargle.HOWL>

AFAIK, this is not a bug since it could be a feature that merge.data.frame
coerces character vectors to be factor in certain circumstabces. (I think that
these circumstances require that all.x is TRUE, that y has fewer rows than x
and that the coerced column comes from y.)

In any event, changing the line 

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)

to 

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

solves the (or, rather, my) problem. The main reason that I hesitate to
recommend it heartily is that I thought that assigning NA directly was A Bad
Thing, but perhaps this is not so.

If this is a bad idea, I would love to understand why. It seems to work fine
with the help page examples and in my own code. Here is a simple example:

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3])
> y$b <- as.character(y$b)
> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
Row.names         a         b 
 "factor" "integer"  "factor" 
>

## Load up new merge.data.frame

> sapply(merge(x, y, by = 0, all.x = TRUE), data.class)
  Row.names           a           b 
   "factor"   "integer" "character" 
> merge(x, y, by = 0, all.x = TRUE)
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> 

Thanks to Brian Ripley for much explanation (which I may not have fully
understood) of the issues involved.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dhitchco@stat.ufl.edu  Mon May 20 19:34:12 2002
From: dhitchco@stat.ufl.edu (dhitchco@stat.ufl.edu)
Date: Mon, 20 May 2002 20:34:12 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205201834.UAA29307@pubhealth.ku.dk>

I have apparently found an error in the "pam" function of the "cluster"
library package.  Please pardon me if this error has been pointed out or
if this e-mail should be directed to someone else.

The problem only started occurring with R version 1.5.0, which I started
using about a week ago.  The problem occurs when you try to use "pam"
with the input being a dissimilarity matrix instead of a data matrix;
the results when using the dissimilarity matrix are very strange and not
at all like those obtained when using the data matrix.

For example, try this code:

library(cluster)
data(ruspini)
#the clustering using a data matrix as the input:
pam(ruspini,4)
#the clustering using a dissimilarity matrix as input:
pam(daisy(ruspini),4,diss=T)

The clustering results should be the same but are wildly different.
Again, this problem started happening with the upgrade to R 1.5.0.
Thank you for any help you can provide.

David Hitchcock


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Mon May 20 22:31:43 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Mon, 20 May 2002 23:31:43 +0200 (MET DST)
Subject: [Rd] No documentation for class AsIs (PR#1582)
Message-ID: <200205202131.XAA29915@pubhealth.ku.dk>

There is no documentation for class AsIs, that is ?AsIs gives you
nothing. Relatedly, there is no discussion of the use of I() to create objects
of class AsIs on the help page for I(). This means that it is hard to find
information in the help pages about the following usage.

> test <- data.frame(x = I(letters[1:3]))
> test
  x
1 a
2 b
3 c
> class(test$x)
[1] "AsIs"      "character"
> 

Apologies if this is present in some place that I could not find.

> help.search("AsIs")
Help files with alias or title matching `AsIs',
type `help(FOO, package = PKG)' to inspect entry `FOO(PKG) TITLE':

format(base)                                 Encode in a Common Format
data.frame(base)                             Data Frames
bs(splines)                                  Generate a Basis for Polynomial Splines
ns(splines)                                  Generate a Basis Matrix for Natural Cubic Splines
predict.bs(splines)                          Evaluate a Spline Basis

Other than a brief and opaque mention in ?data.frame, I couldn't find anything
applicable. If it would be helpful, I would be happy to try my hand at an
addition to the ?I page for this usage.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue May 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 May 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200205210515.g4L5F4H28757@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

* PR# 1531 *
Subject: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
Date: Thu, 09 May 2002 03:17:17 -0700
--see #1552 (fixed for 1.5.1)
* PR# 1552 *
Subject: RE: cut.dendrogram
Subject: Re: cut.dendrogram
From: "Grum, Mikkel" <M.GRUM@CGIAR.ORG>
From: Martin Maechler
Date: Tue, 14 May 2002 06:22:17 -0700
--fixed for 1.5.1

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)
* PR# 1554 *
Subject: R-admin docs, Installing packages
From: david.firth@nuffield.ox.ac.uk
Date: Tue, 14 May 2002 17:13:14 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1570 *
Subject: Re: [R] options()$warn==2 and try()
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Fri, 17 May 2002 14:03:40 -0700 (PDT)
--I assume that clearing inWarning is safe because recursive warnings will create
--recursive errors, which will be ignored in errorcall()
--

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1548 *
Subject: prettyNum inserts leading commas
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 13 May 2002 14:21:08 -0400
--fixed for 1.5.1 (using the suggestion)

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1507 *
Subject: copy or save to metafile from graphics device shrinks plots
From: drew.tyre@csiro.au
Date: Fri, 3 May 2002 04:26:07 +0200 (MET DST)
--report on 1.4.0, about copying of graphics.
--Awaiting test under 1.5.0.

Directory:  incoming

* PR# 1543 *
Subject: {round,trunc}.POSIXt and daylight savings time
From: Don MacQueen <macq@llnl.gov>
Date: Sat, 11 May 2002 22:22:41 -0700
* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1569 *
Subject: pbinom gotcha
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 17 May 2002 18:26:30 +0200
* PR# 1576 *
Subject: Re: [Rd] Use of 'any' in 3.2.1 if ... else example is incorrect 
From: ripley@stats.ox.ac.uk
Date: Mon, 20 May 2002 10:12:01 +0100 (BST)
* PR# 1577 *
Subject: is.na<- coerces character vectors to be factors within dataframes
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 06:45:07 -0400
* PR# 1578 *
Subject: Spice girls' vocal concert
From: kota-h <kota-h@mtc.biglobe.ne.jp>
Date: Mon, 20 May 2002 06:35:27 -0500 (CDT)
* PR# 1579 *
Subject: Involved In Fundraising?
From: "Fund Raisee" <fundraisehelp01@yahoo.com.au>
Date: Mon, 20 May 2002 19:43:39 +0800
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1582 *
Subject: No documentation for class AsIs
From: "David Kane  <David Kane" <a296180@mica.fmr.com>
Date: Mon, 20 May 2002 17:30:42 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 21 09:21:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 21 May 2002 10:21:42 +0200 (MET DST)
Subject: [Rd] R bug in cluster package (PR#1580)
Message-ID: <200205210821.KAA02494@pubhealth.ku.dk>

>>>>> "DavidH" == David Hitchcock <dhitchco@stat.ufl.edu> writes:

    DavidH> I have apparently found an error in the "pam"
    DavidH> function of the "cluster" library package.  Please
    DavidH> pardon me if this error has been pointed out or if
    DavidH> this e-mail should be directed to someone else.

    DavidH> The problem only started occurring with R version
    DavidH> 1.5.0, which I started using about a week ago.  The
    DavidH> problem occurs when you try to use "pam" with the
    DavidH> input being a dissimilarity matrix instead of a data
    DavidH> matrix; the results when using the dissimilarity
    DavidH> matrix are very strange and not at all like those
    DavidH> obtained when using the data matrix.

    DavidH> For example, try this code:

     library(cluster)
     data(ruspini)
     ## the clustering using a data matrix as the input:
     pam(ruspini,4)
     ## the clustering using a dissimilarity matrix as input:
     pam(daisy(ruspini),4,diss=T)

    DavidH> The clustering results should be the same but are wildly different.

well, "wildly different" is an  ``unusual''  description of

   > daisy(ruspini)
   Error in daisy(ruspini) : NAs in foreign function call (arg 7)

which does happen when  library(methods)  is attached (as it is
for me)  
and  is not new in 1.5.0, (it does happen in the 1.4.x versions
as well, because since then, read.table() does not coerce
integer to numeric anymore).

This is clearly an omission in daisy() which only checks for "numeric"
instead of "integer" as well.

Can you make sure you detach methods, e.g., by

    if(any(i.meth <- search() == "package:methods")) detach(i.meth)

and retry then. For me the result is then almost identical
(apart from the fact that in the 2nd case the medoid coordinates are
 not available, of course!)

    DavidH> Again, this problem started happening with the upgrade to R 1.5.0.

(but not from 1.4.x ...)

    DavidH> David Hitchcock

Thanks for reporting.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Tue May 21 21:17:10 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Tue, 21 May 2002 22:17:10 +0200 (MET DST)
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
Message-ID: <200205212017.WAA09766@pubhealth.ku.dk>

Although the documentation is somewhat sketchy, I() can be used to create
objects of class AsIs:

> I("a")
[1] "a"
attr(,"class")
[1] "AsIs"      "character"
> I(4)
[1] 4
attr(,"class")
[1] "AsIs"    "numeric"
> I(4 + 0i)
[1] 4+0i
attr(,"class")
[1] "AsIs"    "complex"
> 

This fails for objects of class POSIXct.

> class(ISOdate(2002, 5, 21))
[1] "POSIXt"  "POSIXct"
> I(ISOdate(2002, 5, 21))
Error in names(x) : evaluation is nested too deeply: infinite recursion?
>

Interestingly enough, it produces an (incorrect?) answer for objects of class
POSIXlt

> class(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "POSIXt"  "POSIXlt"
> I(as.POSIXlt(ISOdate(2002, 5, 21)))
[1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> 

Of course, this may not be a bug since it is not clear that I() is documented
to do anything like this.

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   

Regards,

David Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 21 21:48:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2002 22:48:27 +0200
Subject: [Rd] I() fails on objects of class POSIXct (PR#1587)
In-Reply-To: <200205212017.WAA09766@pubhealth.ku.dk>
References: <200205212017.WAA09766@pubhealth.ku.dk>
Message-ID: <x2bsb94484.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> Although the documentation is somewhat sketchy, I() can be used to create
> objects of class AsIs:
...
> This fails for objects of class POSIXct.
> 
> > class(ISOdate(2002, 5, 21))
> [1] "POSIXt"  "POSIXct"
> > I(ISOdate(2002, 5, 21))
> Error in names(x) : evaluation is nested too deeply: infinite recursion?
> >

Actually I() works fine, but the resulting object has a print
method problem:

>  x <- I(ISOdate(2002, 5, 21))
> x
Error in names(x) : evaluation is nested too deeply: infinite recursion?
> dput(x)
structure(1021982400, class = c("AsIs", "POSIXt", "POSIXct"))

Looks like the issue is that print calls format.AsIs which calls toString
which calls paste which calls as.character which calls format which....

----
> Interestingly enough, it produces an (incorrect?) answer for objects of class
> POSIXlt
> 
> > class(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "POSIXt"  "POSIXlt"
> > I(as.POSIXlt(ISOdate(2002, 5, 21)))
> [1] "  0" "  0" "  8" " 21" "  4" "102" "  2" "140" "  1"
> > 

However, that is not particularly incorrect:

> dput(as.POSIXlt(ISOdate(2002, 5, 21)))
structure(list(sec = 0, min = 0, hour = 14, mday = 21, mon = 4, 
    year = 102, wday = 2, yday = 140, isdst = 1), .Names = c("sec", 
"min", "hour", "mday", "mon", "year", "wday", "yday", "isdst"
), class = c("POSIXt", "POSIXlt"), tzone = c("", "CET", "CEST"
))

(Notice the 6hr time diff..)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 13:03:25 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 22 May 2002 08:03:25 -0400
Subject: package names with `.' cause problems in the Depends field
Message-ID: <15595.35085.417551.700833@gargle.gargle.HOWL>

Some of my package names have `.' in them. An example is "g.data". R CMD check
complains about this as follows:

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Is the problem:

1) That `.' is not allowed in package names or

2) With R CMD check or

3) With my analysis?

The key Perl code in check seems to be:

	foreach my $dep (@dependencies) {
	    $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;
	    ## The entry is malformed if there is no match, or there is
	    ## a match but the dep_op is different from `<=' or `>', or
	    ## the dep_version does not only consist of digits, `.' or
	    ## `-'.
	    if(!($1) || ($2 && (!(($3 eq "<=") || ($3 eq ">="))
				|| ($4 =~ /[^\d\.\-]/)))) {
		$any++;
		break;
	    }
	}
	if($any == 0) {
	    $log->result("OK")
	}
	else {
	    $log->error();
	    $log->print("Malformed Depends field.\n");
	    $log->print(wrap("", "", @msg_DESCRIPTION));
	    exit(1);
 	}

Alas, I am not Perl savvy enough to fully understand this. Simple testing shows
that the matching yields no matches ($1 is empty) for a name like "g.data". If
`.' is allowed in package names, then I suspect that this is a bug.

Regards,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dtrenkler@nts6.oec.uni-osnabrueck.de  Wed May 22 13:28:36 2002
From: dtrenkler@nts6.oec.uni-osnabrueck.de (dtrenkler@nts6.oec.uni-osnabrueck.de)
Date: Wed, 22 May 2002 14:28:36 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221228.OAA16397@pubhealth.ku.dk>

I wonder if something like this has been reported 
before:

> pexp(85:86,0.438)
[1]    1 -Inf




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:tools, package:ctest, Autoloads, package:base

Dietrich Trenkler

--
Dietrich Trenkler   Universität Osnabrück                                  
FB Wirtschaftswissenschaften           
Rolandstr.8              D-49069 Osnabrück

dtrenkler@nts6.oec.uni-osnabrueck.de 

        
     
 
                                           



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May 22 13:59:17 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 May 2002 14:59:17 +0200 (MET DST)
Subject: Bug in pexp (PR#1590)
Message-ID: <200205221259.OAA16871@pubhealth.ku.dk>

>>>>> "dtrenkler" == dtrenkler  <dtrenkler@nts6.oec.uni-osnabrueck.de> writes:

    dtrenkler> I wonder if something like this has been reported
    dtrenkler> before:

    >> pexp(85:86,0.438)
    dtrenkler> [1] 1 -Inf

yes, it has been reported (May 11, R-help) for pweibull() and
was tracked to a bug in the new R internal expm1() function
which only shows when no system-internal expm1() function is
present. Hence the problem has only been seen on Windows.

It has been fixed in "R-patched" for quite a while, and we
recommend you get "R-patched" pre-compiled for Windows
by Prof Ripley

	  http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre/SetupRpatched.exe

Thank you for reporting it anyway (it was not obvious if you haven't
followed R-help closely).

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed May 22 13:58:18 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 22 May 2002 14:58:18 +0200 (MEST)
Subject: Bug in pexp (PR#1590)
In-Reply-To: <200205221228.OAA16397@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0205221457590.6197-100000@artemis.imbe.med.uni-erlangen.de>



> I wonder if something like this has been reported 
> before:
> 
> > pexp(85:86,0.438)
> [1]    1 -Inf
> 

R> pexp(85:86,0.438)
[1] 1 1

Torsten

R> version
         _                           
platform i686-pc-linux-gnu           
arch     i686                        
os       linux-gnu                   
system   i686, linux-gnu             
status   Under development (unstable)
major    1                           
minor    6.0                         
year     2002                        
month    05                          
day      21                          
language R                           


> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status = 
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>  .GlobalEnv, package:tools, package:ctest, Autoloads, package:base
> 
> Dietrich Trenkler
> 
> --
> Dietrich Trenkler   Universität Osnabrück                                  
> FB Wirtschaftswissenschaften           
> Rolandstr.8              D-49069 Osnabrück
> 
> dtrenkler@nts6.oec.uni-osnabrueck.de 
> 
>         
>      
>  
>                                            
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed May 22 14:57:02 2002
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Wed, 22 May 2002 15:57:02 +0200 (MET DST)
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
Message-ID: <200205221357.PAA17525@pubhealth.ku.dk>

R CMD check fails when the Depends field in the DESCRIPTION file includes a
single package with `.' in the name.

* checking for file 'financials/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Description field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... OK
* checking DESCRIPTION Depends field ... ERROR
Malformed Depends field.
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.
mica|tmp> 

Assuming that `.' is allowed in a package name (there are two such packages on
CRAN and I could find nothing to the contrary in Writing R Extensions), the
following line in check should be changed from:

$dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

to:

$dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

that is, (\w+) becomes ([\w\.]+) in order to match names that have a
`.'. Thanks to David Brahm for suggesting this fix.

Regards,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@ms.cc.sunysb.edu  Wed May 22 22:04:54 2002
From: tkeitt@ms.cc.sunysb.edu (tkeitt@ms.cc.sunysb.edu)
Date: Wed, 22 May 2002 23:04:54 +0200 (MET DST)
Subject: signature match in setMethod (PR#1592)
Message-ID: <200205222104.XAA19333@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.5
OS: Linux
Submission from: (NULL) (128.227.201.237)


The function "setMethod" makes the following call to "insertMethod":

allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)], 
        asMethodDefinition(definition, signature))

If I understand insertMethod correctly, the third argument should be the names
of the formal arguments of the method. However, this fails if the signature is
something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
'j', '...', 'drop')" because the "..." gets passed instead of "drop". Changing
this to

allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
fnames)], 
        asMethodDefinition(definition, signature))

seems to solve the problem.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri May 24 19:41:18 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 24 May 2002 20:41:18 +0200
Subject: R CMD check fails if Depends field includes a package with a `.' in it (PR#1591)
In-Reply-To: <200205221357.PAA17525@pubhealth.ku.dk>
References: <200205221357.PAA17525@pubhealth.ku.dk>
Message-ID: <15598.35150.17889.571234@mithrandir.hornik.net>

>>>>> a296180  writes:

> R CMD check fails when the Depends field in the DESCRIPTION file includes a
> single package with `.' in the name.

> * checking for file 'financials/DESCRIPTION' ... OK
> * checking package directory ... OK
> * checking DESCRIPTION Package field ... OK
> * checking DESCRIPTION Version field ... OK
> * checking DESCRIPTION License field ... OK
> * checking DESCRIPTION Description field ... OK
> * checking DESCRIPTION Title field ... OK
> * checking DESCRIPTION Author field ... OK
> * checking DESCRIPTION Maintainer field ... OK
> * checking DESCRIPTION Depends field ... ERROR
> Malformed Depends field.
> See the information on DESCRIPTION files in section 'Creating R packages'
> of the 'Writing R Extensions' manual.
> mica|tmp> 

> Assuming that `.' is allowed in a package name (there are two such packages on
> CRAN and I could find nothing to the contrary in Writing R Extensions), the
> following line in check should be changed from:

> $dep =~ /^\s*(\w+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;

> to:

> $dep =~ /^\s*([\w\.]+)(\s*\(([^) ]+)\s+([^) ]+)\))?\s*$/;	

> that is, (\w+) becomes ([\w\.]+) in order to match names that have a
> `.'. Thanks to David Brahm for suggesting this fix.

Thanks.  Fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlongmate@coh.org  Sat May 25 01:15:30 2002
From: jlongmate@coh.org (jlongmate@coh.org)
Date: Sat, 25 May 2002 02:15:30 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250015.CAA08110@pubhealth.ku.dk>

Full_Name: Jeffrey Longmate
Version: 1.5.0
OS: Windows NT 4.00
Submission from: (NULL) (151.152.101.44)


On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
a printer selection window, and produces a printed plot:
> plot(1:10,1:10)
> dev.print(win.print)
but with focus on the graphics window, neither the printer button, the printer
selection from the file menu, nor CTRL-P do anything.  No printer window
appears.  These all work in version 1.4.1 on the same machine, on the same day. 
I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
thing happened.
I can use the file menu to save to a PDF file, or to copy to the clipboard, but
not to directly print the contents of the graphics window.

The R for Windows FAQ, Version for rw1050, states "You can print the graphics
window from its menu or by using dev.print with suitable arguments (see its help
page: most likely dev.print(win.graph) will work)."  The reference to win.graph
should probably be to win.print.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R     


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May 25 08:40:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 25 May 2002 09:40:23 +0200 (MET DST)
Subject: menu printing fails for windows graphics device (PR#1601)
Message-ID: <200205250740.JAA08768@pubhealth.ku.dk>

This is known, already fixed in R-patched.  Please look in the R-help
archives (including for where you can get a pre-compiled version of
a late enough version to have the fix).


On Sat, 25 May 2002 jlongmate@coh.org wrote:

> Full_Name: Jeffrey Longmate
> Version: 1.5.0
> OS: Windows NT 4.00
> Submission from: (NULL) (151.152.101.44)
>
>
> On Version 1.5.0  (2002-04-29) for Windows, the following brings up a plot, then
> a printer selection window, and produces a printed plot:
> > plot(1:10,1:10)
> > dev.print(win.print)
> but with focus on the graphics window, neither the printer button, the printer
> selection from the file menu, nor CTRL-P do anything.  No printer window
> appears.  These all work in version 1.4.1 on the same machine, on the same day.
> I tried re-installing R 1.5.0 from a freshly downloaded SetupR.exe, and the same
> thing happened.
> I can use the file menu to save to a PDF file, or to copy to the clipboard, but
> not to directly print the contents of the graphics window.
>
> The R for Windows FAQ, Version for rw1050, states "You can print the graphics
> window from its menu or by using dev.print with suitable arguments (see its help
> page: most likely dev.print(win.graph) will work)."  The reference to win.graph
> should probably be to win.print.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun May 26 09:34:48 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 26 May 2002 10:34:48 +0200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu>
Message-ID: <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>

[moved to R-devel]

Thomas Lumley wrote:
> 
> On Sat, 25 May 2002, Patrick Buetzberger wrote:
> 
> > Dear colleagues,
> >
> > I often use chemical formulas to label my x-axis, e.g. in barplots. I
> > used to do this like the following example and it worked just fine:
> >
> <snip>
> >
> > The important point is the x-axis here: before we installed the new R
> > 1.5 on our workstations, the chemical formulas were properly aligned and
> > looked well. Ever since, if I use the exact same procedure, I get the
> > graphic but the chemical formulas are not aligned horizontally properly
> > anymore: e.g. Mg^{2+''} or NO[3]^{-''} are a bit higher than F^{-''} or
> > H^{+''} (it seems to depend on whether there is a subscript or a letter
> > with a part below the main line like a 'g').
> > I didin't find any hint on the r-project homepage. I don't know if we
> > forgot some feature when newly installing R or if something changed in
> > version 1.5.
> 
> I think something changed.  In the NEWS file we have
> 
> o       The vertical alignment of mathematical annotations was wrong.
>         When a vertical adjustment was not given, it was bottom-adjusting
>         i.e,. it was treating adj=0 as adj=c(0, 0).  It now treats
>         adj=0 as adj=c(0, 0.5) as for "normal" text. (PR#1302)
> 
> and I expect this is responsible.  

That change indeed is reasonable, but I don't think it is this
particular change (at least as documented) that makes Patrick's example
doesn't work any more.


> It looks to me as if R is now trying to center the expressions vertically. 

Right for text() and friends, but not for axis(), see the example below,
and maybe this is a bug (Paul?). Anyway, fixing this bug (?) won't
change much for Patrick's example.


> This is also consistent with the previous reply that suggested putting blank 
> subscripts on everything as a work-around.

If sub- or superscripts are a expression, space is added below
respective above that expression (if not already done before), so
complex formulas can be generated. And, at least for me, the result is
somehow expected.

I am very surprised and wondered why Patrick's example worked in
R-1.4.1.
Without having looked into the code, there must have been something
fuzzy that is broken since R-1.5.0.


> I don't think there's a complete fix for this, since sometimes people want
> expressions aligned on their actual vertical centers and sometimes on the
> center of the main line of text (as you do).

Here an example on the alignments:

 plot(1:12, type="n", axes=FALSE)

 expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
    PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
    Mg^{2+''}, Ca^{2+''}, H^{+''})

 axis(1, 1:12, lab=expr)  # the "problem"

 text(1:12, 3, expr) # adj=c(0.5, 0.5), the default for text()

# This looks like the x-axis annotation:
 text(1:12, 5, expr, adj=c(0.5, 0)) 

# And this is all in *one* formula, as Patrick would like to get it
somehow.
# Only a guess: Was there something like a "coerce to one formula" in
R-1.4.1?

 text(6, 9, 
    labels = expression(F^{-''} * Cl^{-''} * NO[2]^{-''} * NO[3]^{-''} * 
    PO[4]^{3-''} * SO[4]^{2-''} * Na^{+''} * NH[4]^{+''} * K^{+''} *
    Mg^{2+''} * Ca^{2+''} * H^{+''}))


I am sure, Paul will get the point in less than a second.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gorazd.brumen@student.fmf.uni-lj.si  Mon May 27 14:34:25 2002
From: gorazd.brumen@student.fmf.uni-lj.si (Gorazd Brumen)
Date: Mon, 27 May 2002 15:34:25 +0200
Subject: Pressing TAB
Message-ID: <20020527112954.C1B17535A2@smtp1.volja.net>

Hello,

I am new on the list and in R language. I only have one question - 
could it be achieved that pressing a TAB key autocompletes 
the possible directions to the R language. This is a Unix 
feature and it would greatly boost the performance. 

I have R-1.3.1 installed on Linux.

Gorazd 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon May 27 13:49:29 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 27 May 2002 08:49:29 -0400
Subject: CRAN links
Message-ID: <3CF22B59.FF323D1D@bank-banque-canada.ca>

Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
<ftp://cvs.r-project.org/pub/> ?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May 27 15:19:31 2002
From: bates@stat.wisc.edu (Douglas Bates)
Date: 27 May 2002 09:19:31 -0500
Subject: CRAN links
In-Reply-To: <3CF22B59.FF323D1D@bank-banque-canada.ca>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
Message-ID: <6r8z658yh8.fsf@franz.stat.wisc.edu>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> <ftp://cvs.r-project.org/pub/> ?

Curious.  I fixed up those directories and restarted the ftp server on
the machine that serves as cvs.r-project.org.   Now I can reach those
directories via an ftp client (ncftp) but not via a web browser
(netscape).  I'm not sure why.

The same file system is available as
                    http://cran.us.r-project.org/
I would recommend using that URL instead of ftp://cvs.r-project.org/
for an http client.  A less desirable alternative is to notice that
the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
/pub/e19/CRAN and to use
                 ftp://cvs.r-project.org/pub/e19/CRAN

I'm not sure why a web browser cannot follow the symbolic link but an
ftp client can.  I would have thought this would be determined by the
server, not by the client.  Can anyone suggest why the symbolic links
do not work for netscape?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 27 15:44:45 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 May 2002 16:44:45 +0200
Subject: CRAN links
In-Reply-To: <6r8z658yh8.fsf@franz.stat.wisc.edu>
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu>
Message-ID: <x24rgttztu.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > <ftp://cvs.r-project.org/pub/> ?
> 
> Curious.  I fixed up those directories and restarted the ftp server on
> the machine that serves as cvs.r-project.org.   Now I can reach those
> directories via an ftp client (ncftp) but not via a web browser
> (netscape).  I'm not sure why.
> 
> The same file system is available as
>                     http://cran.us.r-project.org/
> I would recommend using that URL instead of ftp://cvs.r-project.org/
> for an http client.  A less desirable alternative is to notice that
> the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> /pub/e19/CRAN and to use
>                  ftp://cvs.r-project.org/pub/e19/CRAN
> 
> I'm not sure why a web browser cannot follow the symbolic link but an
> ftp client can.  I would have thought this would be determined by the
> server, not by the client.  Can anyone suggest why the symbolic links
> do not work for netscape?

No, and it appears to be Netscape-specific too. Mozilla follows the
links OK. (The form of the link - relative/absolute - appears to be
irrelevant, so my first guess was wrong.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon May 27 17:57:23 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 27 May 2002 18:57:23 +0200
Subject: CRAN links
References: <3CF22B59.FF323D1D@bank-banque-canada.ca>
 <6r8z658yh8.fsf@franz.stat.wisc.edu> <x24rgttztu.fsf@blueberry.kubism.ku.dk>
Message-ID: <3CF26573.B7732A56@univie.ac.at>

i just checked with netscape 4.79 on win2k,
and i had no problem getting the directory listing of

ftp://cvs.r-project.org/pub/





Peter Dalgaard BSA wrote:
> 
> Douglas Bates <bates@stat.wisc.edu> writes:
> 
> > Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> >
> > > Is anyone else have trouble with links to CRAN, R, R-CRAN, etc. at
> > > <ftp://cvs.r-project.org/pub/> ?
> >
> > Curious.  I fixed up those directories and restarted the ftp server on
> > the machine that serves as cvs.r-project.org.   Now I can reach those
> > directories via an ftp client (ncftp) but not via a web browser
> > (netscape).  I'm not sure why.
> >
> > The same file system is available as
> >                     http://cran.us.r-project.org/
> > I would recommend using that URL instead of ftp://cvs.r-project.org/
> > for an http client.  A less desirable alternative is to notice that
> > the names /pub/CRAN, /pub/R, and /pub/R-CRAN are all symbolic links to
> > /pub/e19/CRAN and to use
> >                  ftp://cvs.r-project.org/pub/e19/CRAN
> >
> > I'm not sure why a web browser cannot follow the symbolic link but an
> > ftp client can.  I would have thought this would be determined by the
> > server, not by the client.  Can anyone suggest why the symbolic links
> > do not work for netscape?
> 
> No, and it appears to be Netscape-specific too. Mozilla follows the
> links OK. (The form of the link - relative/absolute - appears to be
> irrelevant, so my first guess was wrong.)
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:02 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:02 +0200 (MET DST)
Subject: When dev.list() is NULL, dev.control() causes core dump (PR#1605)
Message-ID: <200205280642.IAA22334@pubhealth.ku.dk>

The following sequence of commands:
graphics.off()
dev.control("inhibit")

causes R to memory-fault and core dump. This is reported
for a new port of R, but is also reproducible on Windows
and Solaris. The Windows fault is:

RGUI caused an invalid page fault in
module R.DLL at 017f:00475663.
Registers:
EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
Bytes at CS:EIP:
89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
Stack dump:
0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55

The following patch (diff -c) corrects the problem,
when applied to src/main/plot.c:

PATCH BEGIN
*** plot.c.orig Tue Dec  4 23:43:43 2001
--- plot.c Sun May 26 11:06:25 2002
***************
*** 52,58 ****
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     inhibitDisplayList(CurrentDevice());
      return R_NilValue;
  }

--- 52,60 ----
  SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
  {
      checkArity(op, args);
!     if(!NoDevices()){
!  inhibitDisplayList(CurrentDevice());
!     }
      return R_NilValue;
  }


PATCH END

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status =
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NEFTH@pacbell.net  Tue May 28 07:42:00 2002
From: NEFTH@pacbell.net (NEFTH@pacbell.net)
Date: Tue, 28 May 2002 08:42:00 +0200 (MET DST)
Subject: Platform-specific: simple assignments in Rprofile cause core dump (PR#1604)
Message-ID: <200205280642.IAA22326@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT


This only happens on platforms with a faulty implementation
of realloc(). Some C libraries do not allow realloc() to be
called with a NULL pointer to resize. The assignment

ISOLatin1 <- 0:255

in Rprofile then causes a core dump. The attached set
of 4 patches should be very safe to use and fix the problem.

--please do not edit the information below--

Version:
 platform = i386-pc-sco3.2v4.2
 arch = i386
 os = sco3.2v4.2
 system = i386, sco3.2v4.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_character.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_character.c.txt

*** character.c.orig	Wed Sep 19 09:04:16 2001
--- character.c	Sun May 12 00:54:18 2002
***************
*** 75,81 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buff = (char *) realloc(buff, len);
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
--- 75,85 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buff==NULL){
! 	    buff = (char *) malloc(len);
! 	} else {
! 	    buff = (char *) realloc(buff, len);
! 	}
  	bufsize = len;
  	if(!buff) {
  	    bufsize = 0;
***************
*** 267,273 ****
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {
--- 271,281 ----
  		PROTECT(t = allocVector(STRSXP, ntok + 1));
  	    /* and fill with the splits */
  	    bufp = buff;
! 	    if(pt==NULL){
! 	        pt = (char *) malloc((strlen(buff)+1) * sizeof(char));
! 	    } else {
! 	        pt = (char *) realloc(pt, (strlen(buff)+1) * sizeof(char));
! 	    }
  	    for(j = 0; j < ntok; j++) {
  		regexec(&reg, bufp, 1, regmatch, eflags);
  		if(regmatch[0].rm_eo > 0) {

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_memory.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_memory.c.txt

*** memory.c.orig	Tue Nov 27 02:41:16 2001
--- memory.c	Sun May 12 00:41:44 2002
***************
*** 2030,2036 ****
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     p = realloc(ptr, size);
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }
--- 2030,2040 ----
  void *R_chk_realloc(void *ptr, size_t size)
  {
      void *p;
!     if(ptr==NULL){
! 	p = malloc(size);
!     } else {
! 	p = realloc(ptr, size);
!     }
      if(!p) error("Realloc could not re-allocate (size %d) memory", size);
      return(p);
  }

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_printutils.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_printutils.c.txt

*** printutils.c.orig	Tue Oct 30 06:18:10 2001
--- printutils.c	Sun May 12 01:08:14 2002
***************
*** 73,79 ****
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     Encodebuf = (char *) realloc(Encodebuf, len);
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;
--- 73,83 ----
      if(len*sizeof(char) < bufsize) return;
      len = (len+1)*sizeof(char);
      if(len < BUFSIZE) len = BUFSIZE;
!     if(Encodebuf==NULL) {
!         Encodebuf = (char *) malloc(len);
!     } else {
!         Encodebuf = (char *) realloc(Encodebuf, len);
!     }
      bufsize = len;
      if(!Encodebuf) {
  	bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)
Content-type: text/plain; name=SCOPATCH_saveload.c.txt
Content-transfer-encoding: 7BIT
Content-disposition: attachment; filename=SCOPATCH_saveload.c.txt

*** saveload.c.orig	Tue Dec  4 08:52:41 2001
--- saveload.c	Sun May 12 01:16:44 2002
***************
*** 87,93 ****
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	buf = (char *) realloc(buf, len);
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;
--- 87,97 ----
  	if(len*sizeof(char) < bufsize) return;
  	len = (len+1)*sizeof(char);
  	if(len < MAXELTSIZE) len = MAXELTSIZE;
! 	if(buf==NULL){
! 	    buf = (char *) malloc(len);
! 	} else {
! 	    buf = (char *) realloc(buf, len);
! 	}
  	bufsize = len;
  	if(!buf) {
  	    bufsize = 0;

--Boundary_(ID_S+/3Ro4Z3k6S6Z4btch70w)--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 08:33:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 May 2002 08:33:24 +0100 (BST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
 cause core dump (PR#1604)
In-Reply-To: <200205280642.IAA22326@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205280817440.18605-100000@auk.stats>

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> This only happens on platforms with a faulty implementation
> of realloc(). Some C libraries do not allow realloc() to be
> called with a NULL pointer to resize.

What other platforms give the problem?

The behaviour R assumes is required by the ISO C89 standard (at least
according to Lewine's book). Would it not be better to fix realloc rather
than R: there are many alternative implementations of malloc out there (and
R uses one for Windows).

One issue is that realloc is used in several R packages on CRAN, and
quite possibly in others.  These are likely to assume standard-conformant
behaviour.  (It is used in other places within the R sources too, but I
assume you checked all of those.)

> The assignment
>
> ISOLatin1 <- 0:255
>
> in Rprofile then causes a core dump. The attached set
> of 4 patches should be very safe to use and fix the problem.
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R

That is not current.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:45:15 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:45:15 +0200 (MET DST)
Subject: (PR#1605)When dev.list() is NULL, dev.control() causes core dump
Message-ID: <200205280945.LAA25116@pubhealth.ku.dk>

This is of course an incorrect usage, which I've trapped at R level, so as
to give an informative warning.

On Tue, 28 May 2002 NEFTH@pacbell.net wrote:

> The following sequence of commands:
> graphics.off()
> dev.control("inhibit")
>
> causes R to memory-fault and core dump. This is reported
> for a new port of R, but is also reproducible on Windows
> and Solaris. The Windows fault is:
>
> RGUI caused an invalid page fault in
> module R.DLL at 017f:00475663.
> Registers:
> EAX=00e4dfd8 CS=017f EIP=00475663 EFLGS=00010246
> EBX=00000001 SS=0187 ESP=008ff144 EBP=008ff15c
> ECX=00002af0 DS=0187 ESI=0059f8c0 FS=4a17
> EDX=00000000 ES=0187 EDI=00e68dd0 GS=0000
> Bytes at CS:EIP:
> 89 82 d8 00 00 00 8d 65 e8 5b 5e c9 c3 55 89 e5
> Stack dump:
> 0059f8c0 00e4dfd8 01758ba0 8065a5a8 17a70d3f 0c700f47 008ff18c 00497293
> 0059f8c0 010abc04 008ff19c 004fb6d0 00000001 00476385 008ff1cc 0047da55
>
> The following patch (diff -c) corrects the problem,
> when applied to src/main/plot.c:
>
> PATCH BEGIN
> *** plot.c.orig Tue Dec  4 23:43:43 2001
> --- plot.c Sun May 26 11:06:25 2002
> ***************
> *** 52,58 ****
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     inhibitDisplayList(CurrentDevice());
>       return R_NilValue;
>   }
>
> --- 52,60 ----
>   SEXP do_devcontrol(SEXP call, SEXP op, SEXP args, SEXP env)
>   {
>       checkArity(op, args);
> !     if(!NoDevices()){
> !  inhibitDisplayList(CurrentDevice());
> !     }
>       return R_NilValue;
>   }
>
>
> PATCH END
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-sco3.2v4.2
>  arch = i386
>  os = sco3.2v4.2
>  system = i386, sco3.2v4.2
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 28 10:48:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 28 May 2002 11:48:42 +0200 (MET DST)
Subject: (PR#1604) Re: Platform-specific: simple assignments in Rprofile
Message-ID: <200205280948.LAA25173@pubhealth.ku.dk>

On Tue, 28 May 2002, Prof Brian D Ripley wrote:

> On Tue, 28 May 2002 NEFTH@pacbell.net wrote:
>
> > This only happens on platforms with a faulty implementation
> > of realloc(). Some C libraries do not allow realloc() to be
> > called with a NULL pointer to resize.
>
> What other platforms give the problem?
>
> The behaviour R assumes is required by the ISO C89 standard (at least
> according to Lewine's book). Would it not be better to fix realloc rather
> than R: there are many alternative implementations of malloc out there (and
> R uses one for Windows).
>
> One issue is that realloc is used in several R packages on CRAN, and
> quite possibly in others.  These are likely to assume standard-conformant
> behaviour.  (It is used in other places within the R sources too, but I
> assume you checked all of those.)

There are several other uses of realloc in the R sources with the same
assumption ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 11:07:08 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Tue, 28 May 2002 12:07:08 +0200 (MET DST)
Subject: hitting ^C breaks readline history (PR#1606)
Message-ID: <200205281007.MAA25465@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.5.0
OS: linux
Submission from: (NULL) (193.50.159.2)


Hitting ^C breaks readline history (when R is stared in an xterm).

xterm -e R
^C    -> arrow key and history stop working.
For example, up-arrow gives "^[[A".

ldd ./R.bin 
    [../..]
    libreadline.so.4.1 => /usr/lib/libreadline.so.4.1 (0x40020000)
    libncurses.so.5 => /usr/lib/libncurses.so.5 (0x4004c000)
    [../..]

libncurses version is 5.2.
Note. I've got the same problem with libreadline.so.4.2.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 28 13:32:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2002 14:32:31 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <200205281007.MAA25465@pubhealth.ku.dk>
References: <200205281007.MAA25465@pubhealth.ku.dk>
Message-ID: <x28z64fo68.fsf@blueberry.kubism.ku.dk>

humbertc@univ-mlv.fr writes:

> Hitting ^C breaks readline history (when R is stared in an xterm).
> 
> xterm -e R
> ^C    -> arrow key and history stop working.
> For example, up-arrow gives "^[[A".

Yes, I've noticed as well. However, press Enter and things return to
normal.

If you give us a clue as to what causes the problem, we might fix it...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Tue May 28 13:48:50 2002
From: humbertc@univ-mlv.fr (Cyril Humbert)
Date: Tue, 28 May 2002 14:48:50 +0200
Subject: hitting ^C breaks readline history (PR#1606)
In-Reply-To: <x28z64fo68.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, May 28, 2002 at 02:32:31PM +0200
References: <200205281007.MAA25465@pubhealth.ku.dk> <x28z64fo68.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020528144850.A24847@borneo.univ-mlv.fr>

Peter Dalgaard BSA wrote:
> humbertc@univ-mlv.fr writes:
> 
> > Hitting ^C breaks readline history (when R is stared in an xterm).
> > 
> > xterm -e R
> > ^C    -> arrow key and history stop working.
> > For example, up-arrow gives "^[[A".
> 
> Yes, I've noticed as well. However, press Enter and things return to
> normal.

Thanks,
that's much better than my previous solution (quit and restart R).


> 
> If you give us a clue as to what causes the problem, we might fix it...

Probably something wrong with readline and/or ncurses but currently I
don't know exactly what...

-- 
Cyril Humbert 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Tue May 28 19:14:53 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Tue, 28 May 2002 14:14:53 -0400
Subject: signature match in setMethod (PR#1592)
References: <200205222104.XAA19333@pubhealth.ku.dk>
Message-ID: <3CF3C91D.C71FFE4A@research.bell-labs.com>

tkeitt@ms.cc.sunysb.edu wrote:
> 
> Full_Name: Tim Keitt
> Version: 1.5
> OS: Linux
> Submission from: (NULL) (128.227.201.237)
> 
> The function "setMethod" makes the following call to "insertMethod":
> 
> allMethods <- insertMethod(allMethods, signature, fnames[1:length(signature)],
>         asMethodDefinition(definition, signature))
> 
> If I understand insertMethod correctly, the third argument should be the names
> of the formal arguments of the method. However, this fails if the signature is
> something like "c('x', 'i', 'j', 'drop')" and the formal args are "c('x', 'i',
> 'j', '...', 'drop')" because the "..." gets passed instead of "drop". 

Not quite:  "..." gets passed (with class "ANY") in addition to "drop",
and insertMethod then generates an error, because it refuses to handle
"..."

> Changing
> this to
> 
> allMethods <- insertMethod(allMethods, signature, fnames[match(signature,
> fnames)],
>         asMethodDefinition(definition, signature))
> 
> seems to solve the problem.

Not quite.  The signature has already been processed at this point, so
match() isn't needed, but we do need to remove "..." from fnames and the
corresponding "ANY" from signature.  Also, the "..." isn't used for
dispatch, but it is needed to honor conforming methods that replace
"..." with specific arguments (a feature added to the API recently), so
it must be retained for comparing arguments of the generic and the
method definition.

There is a version committed to r-patched that should fix the problem.

> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Tue May 28 23:30:13 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Tue, 28 May 2002 15:30:13 -0700
Subject: masking
Message-ID: <20020528153013.D7826@brandybuck>

Dear R developers,

I am newbie to R-development.

I have written mutated the rpart to obtain myown package that performs some additional calculations
on trees.  I have altered the names of rpart's functions so there is no namespace conflict, but there
is redunant functionality.  However there some remaining functions that I am not sure what to do with.

When I run R and load both libraries I get masking:


> library(dI)
> library(rpart)

Attaching package `rpart':


	The following object(s) are masked from package:dI :

	 is.Surv string.bounding.box tree.depth 


There is conflict because of the zzz.R file


% less  zzz.R
.First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)

is.Surv <- function(x) inherits(x, "Surv")

tree.depth <- function (nodes)
{
    depth <- floor(log(nodes, base = 2) + 1e-7)
    as.vector(depth - min(depth))
}

string.bounding.box <- function(s)
{
    s2 <- strsplit(s, "\n")
    rows <- sapply(s2, length)
    columns <- sapply(s2, function(x) max(nchar(x)))
    list(columns=columns, rows=rows)
}


My question:

1.  Why is the functionality of the 'zzz.R' file needed?

2.  How do I retain it without creating conflicts with rpart proper?


thanks in advance for your help,

Clayton
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 29 01:27:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 28 May 2002 17:27:03 -0700 (PDT)
Subject: masking
In-Reply-To: <20020528153013.D7826@brandybuck>
Message-ID: <Pine.A41.4.44.0205281721570.53892-100000@homer16.u.washington.edu>

On Tue, 28 May 2002, Clayton Springer wrote:
>
> % less  zzz.R
> .First.lib <- function(lib, pkg) library.dynam("dI", pkg, lib)
>
> is.Surv <- function(x) inherits(x, "Surv")
>
> tree.depth <- function (nodes)
> {
>     depth <- floor(log(nodes, base = 2) + 1e-7)
>     as.vector(depth - min(depth))
> }
>
> string.bounding.box <- function(s)
> {
>     s2 <- strsplit(s, "\n")
>     rows <- sapply(s2, length)
>     columns <- sapply(s2, function(x) max(nchar(x)))
>     list(columns=columns, rows=rows)
> }
>
>
> My question:
>
> 1.  Why is the functionality of the 'zzz.R' file needed?

To provide functions that aren't in base R but are needed by rpart. For
example, is.Surv is only in the survival package.

> 2.  How do I retain it without creating conflicts with rpart proper?

You could require rpart to be loaded, in which case your package wouldn't
need to contain these functions. (add require("rpart") to the .First.lib
function)

It may be that you don't need these functions, in which case you can just
remove them

Otherwise you're stuck -- you need the functions in your package and rpart
needs them, so you will get the warning when both are loaded together.
This is fairly harmless.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed May 29 01:54:25 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 29 May 2002 12:54:25 +1200
Subject: [R] expressions as axis labels
References: <Pine.A41.4.44.0205251157270.128430-100000@homer17.u.washington.edu> <3CF09E28.8BB7DDC9@statistik.uni-dortmund.de>
Message-ID: <3CF426C1.2F8B2A86@stat.auckland.ac.nz>

Hi

<lots of examples snipped to be replaced by my own ...>

I don't think the current code is performing incorrectly, but its
behaviour may need a bit more explanation.  Here goes ... :)

1.  Here's a demonstration that, using text(), the horizontal and
vertical adjustments of mathematical annotations are done according to
the bounding boxes of the annotations ...

    expr <- expression(F^{-''}, Cl^{-''}, NO[2]^{-''}, NO[3]^{-''}, 
        PO[4]^{3-''}, SO[4]^{2-''}, Na^{+''}, NH[4]^{+''}, K^{+''},
        Mg^{2+''}, Ca^{2+''}, H^{+''})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    abline(v=1:12, h=1:12, col="grey")
    y <- 1
    for (xadj in c(0, .5, 1))
      for (yadj in c(0, .5, 1)) {
        text(1:12, y, expr, adj=c(xadj, yadj))
        y <- y+1
      }

... this is a very "graphical" view of these annotations, which makes
some sense when drawing annotations within the data region, but less
sense in the margins.  We probably need to allow the user to choose a
more "textual" alignment based on the "baseline" of the text in the
annotation.  One day ...

2. The mtext() and axis() functions do not allow the user to control
"vertical" adjustment of text -- they determine this adjustment
themselves based on the setting of par(las).  In the example given by
Patrick, where the x-axis labels are horizontal, the tick labels are
bottom-adjusted -- adj=c(<user xadj>, 0) -- relative to the "line" in
the margin that the labels are to be drawn on.  This is comparable to
row 4 in the plot produced above ...

    axis(1, at=1:12, labels=expr)

... In the old code, the tick labels were vertically centred --
adj=c(<user xadj>, 0.5) -- comparable to row 5 in the plot.  Sorry that
my bug fix to correct this "wrong" behaviour broke your example;  I
always worry that this sort of thing will occur when I try to "fix" bits
of the graphics code :(

3.  One "recommended" way to get your example to work would be to place
"phantom" subscripts and superscripts in your labels so that they are
all the same "height".  It's not pretty, but here's an example, ...

    expr <- expression(F[phantom(0)]^{-phantom(0)},
        Cl[phantom(0)]^{-phantom(0)},
        NO[2]^{-phantom(0)}, NO[3]^{-phantom(0)}, 
        PO[4]^{3-phantom(0)}, SO[4]^{2-phantom(0)},
        Na[phantom(0)]^{+phantom(0)},
        NH[4]^{+phantom(0)}, K[phantom(0)]^{+phantom(0)},
        Mg[phantom(0)]^{2+phantom(0)}, Ca[phantom(0)]^{2+phantom(0)},
        H[phantom(0)]^{+phantom(0)})
    plot(1:12, type="n", axes=FALSE)
    box()
    axis(2)
    axis(1, at=1:12, labels=expr)

Hope that helps.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:10:19 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:10:19 +0200 (MET DST)
Subject: merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
Message-ID: <200205291110.NAA06480@pubhealth.ku.dk>

If the following two conditions are met:

1) all.x is TRUE

2) at least 1 row in y does not have a match in x

then any character vectors in y will be coerced to be factors. Here is a simple
example (previously provided on r-devel):

> x <- data.frame(a = 1:4)
> y <- data.frame(b = LETTERS[1:3]) 
> y$b <- as.character(y$b) 
> z <- merge(x, y, by = 0, all.x = TRUE)
> z
  Row.names a    b
1         1 1    A
2         2 2    B
3         3 3    C
4         4 4   <NA>
> sapply(z, data.class)
Row.names         a         b 
 "factor" "numeric"  "factor" 
> 

This problem could be fixed by changing the line in merge.data.frame:

for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx) 

to:

for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA 

To the extent that this is a feature rather than a bug (if so, I would like to
know why), then I would suggest that the following sentence be added to the
documentation for merge at the end of the section on all.x

"Be aware that, if all.x equals `TRUE', character vectors in `y' will be
converted to factors if any rows in y have no matching row in `x'."

Thanks,

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 12:34:32 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 12:34:32 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <200205291110.NAA06480@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>

On Wed, 29 May 2002 a296180@agate.fmr.com wrote:

> If the following two conditions are met:
>
> 1) all.x is TRUE
>
> 2) at least 1 row in y does not have a match in x
>
> then any character vectors in y will be coerced to be factors. Here is a simple
> example (previously provided on r-devel):
>
> > x <- data.frame(a = 1:4)
> > y <- data.frame(b = LETTERS[1:3])
> > y$b <- as.character(y$b)
> > z <- merge(x, y, by = 0, all.x = TRUE)
> > z
>   Row.names a    b
> 1         1 1    A
> 2         2 2    B
> 3         3 3    C
> 4         4 4   <NA>
> > sapply(z, data.class)
> Row.names         a         b
>  "factor" "numeric"  "factor"
> >
>
> This problem could be fixed by changing the line in merge.data.frame:
>
> for (i in seq(along = y)) is.na(y[[i]]) <- (lxy + 1):(lxy + nxx)
>
> to:
>
> for (i in seq(along = y)) y[((lxy + 1):(lxy + nxx)), i] <- NA

But other problems would be introduced, as the two operations are
not equivalent (and the right one has been used).

> To the extent that this is a feature rather than a bug (if so, I would like to
> know why),

I have already patiently explained it to you.  It is a side issue of
subscripting of data frames converting character columns to factor.
I have also given you a workaround.

>  then I would suggest that the following sentence be added to the
> documentation for merge at the end of the section on all.x
>
> "Be aware that, if all.x equals `TRUE', character vectors in `y' will be
> converted to factors if any rows in y have no matching row in `x'."

As I said before, this is a consequence of the general rules.  Data frames
are not designed to have character columns, and those who insist on using
them must make themselves aware of the consequences.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 12:54:40 2002
From: a296180@agate.fmr.com (a296180@agate.fmr.com)
Date: Wed, 29 May 2002 13:54:40 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205291154.NAA07211@pubhealth.ku.dk>

In section 6.3 in "An Introduction to R", it says:

". . . as is, non-numeric (character and logical) vectors are coerced to be factors
. . . "

In the help for ?data.frame, it says:

Note:

     In versions of R prior to 1.4.0 (and in S3) logical columns were
     converted to factors.

I believe that the help for data.frame is correct and that, therefore, An
Introduction to R should be changed to:

". . . as is, character vectors are coerced to be factors
. . . "

Of course, this could reflect my continuing inability to understand dataframes,
but I hope not! ;-)

Dave Kane

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 13:48:03 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 08:48:03 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
Message-ID: <15604.52739.590128.620397@gargle.gargle.HOWL>

Prof Brian D Ripley writes:
 > I have already patiently explained it to you.  It is a side issue of
 > subscripting of data frames converting character columns to factor.
 > I have also given you a workaround.

Yes, and many thanks for the patient explanations! Indeed, thanks to you and
the rest of R core for a simply amazing piece of software. Even though our
budget would allow us to use most any statistics package around, we use R
because it seems to us to be the best.

My only comment on the workaround (using I() to create vectors of class AsIs)
is that it is largely undocumented. I was concerned that, in this case,
undocumented meant "discouraged from use and possibly not present in future
versions." In any event, we will now do as you suggested.

 > As I said before, this is a consequence of the general rules.  Data frames
 > are not designed to have character columns, and those who insist on using
 > them must make themselves aware of the consequences.

Ahh! It had never been clear to me that data frames are not "designed to have
character columns." Of course, now that I carefully (re)read the documentation,
I see that this is the case. My comment here is that R certainly provides
enough rope (colClasses as "character" in read.table, for example) for
unsuspecting users like me to hang themselves on this point. Indeed, I would
wager that the vast majority of users (even some members of R core?) have
dataframes with character variables in them. My question is: Why aren't
dataframes "designed" to have character columns? This would seem to be a
desirable feature . . . but perhaps I am misunderstanding what a dataframe
really "is". Or, perhaps the answer is: "Patches are accepted." ;-)

Thanks again,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed May 29 14:32:43 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 29 May 2002 09:32:43 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>; from a296180@agate.fmr.com on Wed, May 29, 2002 at 08:48:03AM -0400
References: <200205291110.NAA06480@pubhealth.ku.dk> <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats> <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <20020529093243.B24223@jessie.research.bell-labs.com>

I do use data frames for storing character data, fully aware that I'm
stretching their intended use.  Data frames came about in the context
of modeling software (see "Statistical Models in S," the "White book"
by Chambers and Hastie, eds).  Originally, the primary use of data
frames was for holding the data given to the model fitting functions,
and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
required are simple ones (numeric and factors -- note that character
vectors are not well suited for fitting models).  Very soon after,
people began to include other types of objects (Terry Therneau's
censored/survival classes, among others, come to my mind).  So the
behaviour of the data.frame class has evolved into what we are
currently using, and some of its apparent "idiosincracies" make
perfect sense in light of its original intended purpose.

It has been argued before that we may need other more general
container classes to hold other "tabular" data (e.g., contigency
tables, data from relational databases) that don't require the 
restriction that data frames have traditionally imposed.  Of course
is not obvious to me that introducing yet another set of classes
is necessarily a good thing --- a lot of care and thought would have
to be put into the effort to ensure that any new container classes (or
any other type, for that matter) are well designed and with a clear
purpose, just like data frames were well-designed for the purpose
of holding data for fitting models.

David Kane  <David Kane wrote:
> Prof Brian D Ripley writes:
>  > I have already patiently explained it to you.  It is a side issue of
>  > subscripting of data frames converting character columns to factor.
>  > I have also given you a workaround.
> 
> Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> the rest of R core for a simply amazing piece of software. Even though our
> budget would allow us to use most any statistics package around, we use R
> because it seems to us to be the best.
> 
> My only comment on the workaround (using I() to create vectors of class AsIs)
> is that it is largely undocumented. I was concerned that, in this case,
> undocumented meant "discouraged from use and possibly not present in future
> versions." In any event, we will now do as you suggested.
> 
>  > As I said before, this is a consequence of the general rules.  Data frames
>  > are not designed to have character columns, and those who insist on using
>  > them must make themselves aware of the consequences.
> 
> Ahh! It had never been clear to me that data frames are not "designed to have
> character columns." Of course, now that I carefully (re)read the documentation,
> I see that this is the case. My comment here is that R certainly provides
> enough rope (colClasses as "character" in read.table, for example) for
> unsuspecting users like me to hang themselves on this point. Indeed, I would
> wager that the vast majority of users (even some members of R core?) have
> dataframes with character variables in them. My question is: Why aren't
> dataframes "designed" to have character columns? This would seem to be a
> desirable feature . . . but perhaps I am misunderstanding what a dataframe
> really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> 
> Thanks again,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 29 14:42:15 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 29 May 2002 14:42:15 +0100 (BST)
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor
 in some circumstances (PR#1608)
In-Reply-To: <20020529093243.B24223@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.44.0205291437100.23828-100000@auk.stats>

In this case I think I know how to solve the idiosyncracy of the subsetting
methods.  As far as I can tell (and similar things have come up before)
the dataframe.R code is taken from an early version of S (as David James
alludes to) and a number of things have been changed since in S but the
problems remain in R.

On the other hand, I don't make such changes without ample time to think
them through ....

B

On Wed, 29 May 2002, David James wrote:

> I do use data frames for storing character data, fully aware that I'm
> stretching their intended use.  Data frames came about in the context
> of modeling software (see "Statistical Models in S," the "White book"
> by Chambers and Hastie, eds).  Originally, the primary use of data
> frames was for holding the data given to the model fitting functions,
> and thus the classes of objects that LM, GLM, GAM, Tree, etc.,
> required are simple ones (numeric and factors -- note that character
> vectors are not well suited for fitting models).  Very soon after,
> people began to include other types of objects (Terry Therneau's
> censored/survival classes, among others, come to my mind).  So the
> behaviour of the data.frame class has evolved into what we are
> currently using, and some of its apparent "idiosincracies" make
> perfect sense in light of its original intended purpose.
>
> It has been argued before that we may need other more general
> container classes to hold other "tabular" data (e.g., contigency
> tables, data from relational databases) that don't require the
> restriction that data frames have traditionally imposed.  Of course
> is not obvious to me that introducing yet another set of classes
> is necessarily a good thing --- a lot of care and thought would have
> to be put into the effort to ensure that any new container classes (or
> any other type, for that matter) are well designed and with a clear
> purpose, just like data frames were well-designed for the purpose
> of holding data for fitting models.
>
> David Kane  <David Kane wrote:
> > Prof Brian D Ripley writes:
> >  > I have already patiently explained it to you.  It is a side issue of
> >  > subscripting of data frames converting character columns to factor.
> >  > I have also given you a workaround.
> >
> > Yes, and many thanks for the patient explanations! Indeed, thanks to you and
> > the rest of R core for a simply amazing piece of software. Even though our
> > budget would allow us to use most any statistics package around, we use R
> > because it seems to us to be the best.
> >
> > My only comment on the workaround (using I() to create vectors of class AsIs)
> > is that it is largely undocumented. I was concerned that, in this case,
> > undocumented meant "discouraged from use and possibly not present in future
> > versions." In any event, we will now do as you suggested.
> >
> >  > As I said before, this is a consequence of the general rules.  Data frames
> >  > are not designed to have character columns, and those who insist on using
> >  > them must make themselves aware of the consequences.
> >
> > Ahh! It had never been clear to me that data frames are not "designed to have
> > character columns." Of course, now that I carefully (re)read the documentation,
> > I see that this is the case. My comment here is that R certainly provides
> > enough rope (colClasses as "character" in read.table, for example) for
> > unsuspecting users like me to hang themselves on this point. Indeed, I would
> > wager that the vast majority of users (even some members of R core?) have
> > dataframes with character variables in them. My question is: Why aren't
> > dataframes "designed" to have character columns? This would seem to be a
> > desirable feature . . . but perhaps I am misunderstanding what a dataframe
> > really "is". Or, perhaps the answer is: "Patches are accepted." ;-)
> >
> > Thanks again,
> >
> > Dave Kane
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>
> --
> David A. James
> Statistics Research, Room 2C-253            Phone:  (908) 582-3082
> Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
> Murray Hill, NJ 09794-0636
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed May 29 14:58:55 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 29 May 2002 09:58:55 -0400
Subject: (PR#1608) merge.data.frame can coerce character vectors to factor in some circumstances (PR#1608)
In-Reply-To: <15604.52739.590128.620397@gargle.gargle.HOWL>
References: <200205291110.NAA06480@pubhealth.ku.dk>
 <Pine.GSO.4.44.0205291229250.23715-100000@auk.stats>
 <15604.52739.590128.620397@gargle.gargle.HOWL>
Message-ID: <15604.56991.282396.570441@gargle.gargle.HOWL>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> As I said before, [characters converted to factors] is a consequence of the
> general rules.  Data frames are not designed to have character columns, and
> those who insist on using them must make themselves aware of the
> consequences.

I think this is as true in S-Plus as it is in R, because S is fundamentally a
language designed for statistics, where everything is a real number or a
conditioning variable.  As a result, I (and my former group) abandoned the use
of dataframes years ago.  We created our own pseudo-class of "dataobjects"
(lists of equal-length vectors), and built our own versions of many standard
functions (read.table -> g.dataobj, merge -> g.join, "[" -> g.subset, etc.) for
them.

Dave Kane has made a strong push to use existing R classes and built-in
functions, but I'm convinced now I can bring him over to the Dark Side.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@agate.fmr.com  Wed May 29 15:33:19 2002
From: a296180@agate.fmr.com (David Kane  <David Kane)
Date: Wed, 29 May 2002 10:33:19 -0400
Subject: warning message for setAs when using class AsIs
Message-ID: <15604.59055.655673.283148@gargle.gargle.HOWL>

This seemed too advanced for r-help and is related to the recent discussion of
character vectors in dataframes.

Following Brian Ripley's most excellent advice, we are moving to a world in
which character vectors in dataframes are always of class AsIs. The cool way of
doing this seemed to be the following:

> cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> x <- read.table("test.txt")
> class(x$V1)
[1] "factor"

This is what we expect.

> library(methods)
> setAs('character', "AsIs", function(from) I(from))
Warning message: 
Class "AsIs"not defined in: matchSignature(fnames, signature, fdef) 
>

This warning seems wrong to me, although I am not smart enough to follow the
logic through the underlying code. It *seems* as if setAs does not consider
`AsIs' to be an allowed class. However, the desired effect is achieved.

> x <- read.table("test.txt", colClasses=c("AsIs"))
> x
  V1
1  x
2  y
3  z
> class(x$V1)
[1] "AsIs"      "character"
> unlink("test.txt")
> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.0                 
year     2002                
month    04                  
day      29                  
language R                   
> 

Any comments/suggestions would be much appreciated.

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed May 29 16:45:49 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 29 May 2002 11:45:49 -0400
Subject: warning message for setAs when using class AsIs
References: <15604.59055.655673.283148@gargle.gargle.HOWL>
Message-ID: <3CF4F7AD.2D9B5A82@research.bell-labs.com>

"David Kane
> 
> This seemed too advanced for r-help and is related to the recent discussion of
> character vectors in dataframes.
> 
> Following Brian Ripley's most excellent advice, we are moving to a world in
> which character vectors in dataframes are always of class AsIs. The cool way of
> doing this seemed to be the following:
> 
> > cat(c("x", "y", "z"), file = "test.txt", sep = "\n")
> > x <- read.table("test.txt")
> > class(x$V1)
> [1] "factor"
> 
> This is what we expect.
> 
> > library(methods)
> > setAs('character', "AsIs", function(from) I(from))
> Warning message:
> Class "AsIs"not defined in: matchSignature(fnames, signature, fdef)
> >
> 
> This warning seems wrong to me, although I am not smart enough to follow the
> logic through the underlying code. It *seems* as if setAs does not consider
> `AsIs' to be an allowed class. However, the desired effect is achieved.

In the sense of the methods package (i.e., of "S4" classes) the class
"AsIs" and all S3-style classes are undefined.  Literally, in that there
is no object containing their definition.

In general, mixing old and new classes can cause confusion.  In this
case, you will be OK if the as() function finds a specific method to
coerce character to "AsIs".  The warning is saying that there won't be
any way to infer inheritance for the class "AsIs", but inheritance for
the target class is not important for the call to as().

John

PS: the current version of read.table implicitly requires the methods
package if the argument colClasses is supplied.  Should that be made
explicit?

Otherwise, users get errors if they forget library(methods):

R> x <- read.table("testR/test.txt", colClasses=c("AsIs"))
Error: couldn't find function "as"




> 
> > x <- read.table("test.txt", colClasses=c("AsIs"))
> > x
>   V1
> 1  x
> 2  y
> 3  z
> > class(x$V1)
> [1] "AsIs"      "character"
> > unlink("test.txt")
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
> >
> 
> Any comments/suggestions would be much appreciated.
> 
> Thanks,
> 
> Dave Kane
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmascott@att.net  Thu May 30 16:55:06 2002
From: cmascott@att.net (cmascott@att.net)
Date: Thu, 30 May 2002 17:55:06 +0200 (MET DST)
Subject: se.contrast: matrix contrast.obj doesn't work as documented (PR#1613)
Message-ID: <200205301555.RAA19202@pubhealth.ku.dk>


The man page for se.contrast, when describing the contrast.obj
parameter, states that "Multiple contrasts should be specified
by a matrix as returned by contrasts."

When doing an unbalanced single factor ANOVA, using a contrast.obj
as returned by contrasts results in the following error from
qr.qty when se.contrast is called:

Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows

In fact, the matrix contrast.obj parameter that se.contrast
requires is not a contrast matrix as returned by contrasts.
It is a matrix each of whose columns is in the same form as
the vector constructed by se.contrast when contrast.obj is
a list.  This matrix has one row per observation, not one
row per treatment (contrast matrix).  See the session log
below for an example.

I wrote a little function to produce the one-row-per-
observation matrix and se.contrast works correctly when
given this matrix.

-----------------------------------------------------------------
Script started on Thu May 30 11:21:31 2002

R : Copyright 2002, The R Development Core Team
Version 1.5.0  (2002-04-29)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> debug("qr.qty")
> se.contrast(reading.aov.t, list(group=="1", group=="2"), c(-1,1), reading.df)
debugging in: qr.qty(object$qr, contrast)
debug: {
    if (!is.qr(qr)) 
        stop("argument is not a QR decomposition")
    if (is.complex(qr$qr)) {
        y <- as.matrix(y)
        if (!is.complex(y)) 
            y[] <- as.complex(y)
        return(.Call("qr_qy_cmplx", qr, y, 1, PACKAGE = "base"))
    }
    n <- nrow(qr$qr)
    p <- ncol(qr$qr)
    k <- as.integer(qr$rank)
    ny <- NCOL(y)
    if (NROW(y) != n) 
        stop("qr and y must have the same number of rows")
    storage.mode(y) <- "double"
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux), 
        y, ny, qty = y, PACKAGE = "base")$qty
}
Browse[1]> y
       
         [,1]
   [1,] -0.20
   [2,] -0.20
   [3,] -0.20
   [4,] -0.20
   [5,] -0.20
   [6,]  0.25
   [7,]  0.25
   [8,]  0.25
   [9,]  0.25
  [10,]  0.00
  [11,]  0.00
  [12,]  0.00
  [13,]  0.00
  [14,]  0.00
  [15,]  0.00
  [16,]  0.00
  [17,]  0.00
  [18,]  0.00
  [19,]  0.00
  [20,]  0.00
  [21,]  0.00
  [22,]  0.00
  [23,]  0.00
Browse[1]> c
exiting from: qr.qty(object$qr, contrast)
[1] 3.126500
> undebug("qr.qty")
> se.contrast(reading.aov.t, contr.t5, data=reading.df)
Error in qr.qty(object$qr, contrast) : qr and y must have the same number of rows
> contr.t5
   2  3  4  5
1 -1 -1 -1 -1
2  1  0  0  0
3  0  1  0  0
4  0  0  1  0
5  0  0  0  1
> q()
Save workspace image? [y/n/c]: n

Script done on Thu May 30 11:25:49 2002
-----------------------------------------------------------------


--please do not edit the information below--

Version:
 platform = i386--freebsd4.3
 arch = i386
 os = freebsd4.3
 system = i386, freebsd4.3
 status = 
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Thu May 30 23:41:05 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 31 May 2002 00:41:05 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205302241.AAA20637@pubhealth.ku.dk>


Just a few documentation "bugs" that I've noticed recently.

1.  In the help for (dpqr)weibull(), the formula given for the
    variance of a Weibull is wrong.  The correct formula is

      b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

    Note that I've also changed Gamma to gamma, which I think is
    preferable since this is actually the name of the gamma() function
    in R (whereas Gamma() is quite a different animal).

2.  The help for quantile() function (in base) refers to the function
    ecdf(), but doesn't mention that it is in package stepfun (which
    is not loaded by default).  It would be helpful if it did.

3.  There's a typo in the help for optim(): "comprehansive".

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Patched
 major = 1
 minor = 5.0
 year = 2002
 month = 05
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 11:32:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 12:32:56 +0200 (MET DST)
Subject: Documentation Bugs (PR#1618)
Message-ID: <200205311032.MAA25305@pubhealth.ku.dk>

>>>>> "Brett" == Brett Presnell <presnell@stat.ufl.edu> writes:

    Brett> Just a few documentation "bugs" that I've noticed
    Brett> recently.

Thank you!

    Brett> 1.  In the help for (dpqr)weibull(), the formula
    Brett> given for the variance of a Weibull is wrong.  

yes..

    Brett> The correct formula is

    Brett>       b^2 * sqrt(gamma(1 + 2/a) - (gamma(1 + 1/a))^2))

which is even wronger, but I'm sure you meant

         	 b^2 *     (gamma(1 + 2/a) - (gamma(1 + 1/a))^2)


    Brett>     Note that I've also changed Gamma to gamma, which
    Brett> I think is preferable since this is actually the name
    Brett> of the gamma() function in R (whereas Gamma() is
    Brett> quite a different animal).

(but in LaTeX, that's  \Gamma  and that's why we have used it
 even for the non-latex formula (you see in the text and html
 version of help).

    Brett> 2.  The help for quantile() function (in base) refers
    Brett> to the function ecdf(), but doesn't mention that it
    Brett> is in package stepfun (which is not loaded by
    Brett> default).  It would be helpful if it did.

yes, it seems, thank you; I'm adding it.

    Brett> 3.  There's a typo in the help for optim():
    Brett> "comprehansive".

(BDR has already fixed this).

Thanks once more!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 31 13:40:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 31 May 2002 14:40:07 +0200 (MET DST)
Subject: typo in Introduction to R on dataframes (PR#1609)
Message-ID: <200205311240.OAA27466@pubhealth.ku.dk>

>>>>> "a296180" == a296180  <a296180@agate.fmr.com> writes:

    a296180> In section 6.3 in "An Introduction to R", it says:
    a296180> ". . . as is, non-numeric (character and logical)
    a296180> vectors are coerced to be factors . . . "

    a296180> In the help for ?data.frame, it says:

    a296180> Note:

    a296180>      In versions of R prior to 1.4.0 (and in S3)
    a296180> logical columns were converted to factors.

    a296180> I believe that the help for data.frame is correct
    a296180> and that, therefore, An Introduction to R should be
    a296180> changed to:

    a296180> ". . . as is, character vectors are coerced to be
    a296180> factors . . . "

Thank you. 
Actually, I added ", logicals" earlier in the sentence (in the
source which is R-intro.texi !) to 

   @item
   Numeric vectors, logicals and factors are included as is, and character
   vectors are coerced to be factors, whose levels are the unique values
   appearing in the vector.

    a296180> Of course, this could reflect my continuing
    a296180> inability to understand dataframes, but I hope not! ;-)

well hoped ;-)  you are right here.

As a matter of fact we are quite happy for careful readers (and
reports) of R-intro, because this is something not so
interesting to reread for R corers...  
Hence: Thanks again!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

