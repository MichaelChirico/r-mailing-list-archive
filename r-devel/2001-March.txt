From aa@gwen.stat.unipd.it  Thu Mar  1 09:04:35 2001
From: aa@gwen.stat.unipd.it (aa@gwen.stat.unipd.it)
Date: Thu, 1 Mar 2001 10:04:35 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010904.KAA19346@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


Today I have installed R 1.02.1  on my MSW-95 laptop;
it essentially worked, but thre are two problems:

1) Although I have chose to install "standard", compiled HTML"
and "WinHelp"  documentation files, and in spite of the fact
that the installer program mwinst.exe reported to hve done this, 
only the first type of documentation is actually accessible
from the Help menu of RGui.

2) I have then attempted to load some packages, but some of
them are declared "non-existent"... see below.
Some others (sm, survival5, nlme) installed correctly and they work;
so the missing "lib" 

>  install.packages(c("sm","sn","integrate","survival5","nlme"))

Delete downloaded files (y/N)? y

Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages(c("sm", "sn", "integrate", "survival5", "nlme")) 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
3: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  


> install.packages("integrate")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("integrate") 
2: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  
> install.packages("sn")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("sn") 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
> 

Thanks for your attention and consideration.
Best wishes

Adelchi Azzalini

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows 9x 4.0 (build 950) 

Search Path:
 .GlobalEnv, package:sm, Autoloads, package:base
--
Adelchi Azzalini    <azzalini@stat.unipd.it>
Dept Statistical Sciences, University of Padua, Italy.
http://www.stat.unipd.it/~azzalini



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  1 09:20:46 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 1 Mar 2001 10:20:46 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010920.KAA19623@pubhealth.ku.dk>

On Thu, 1 Mar 2001 aa@gwen.stat.unipd.it wrote:

> Today I have installed R 1.02.1  on my MSW-95 laptop;

1.2.1 I presume.

> it essentially worked, but thre are two problems:
>
> 1) Although I have chose to install "standard", compiled HTML"
> and "WinHelp"  documentation files, and in spite of the fact
> that the installer program mwinst.exe reported to hve done this,
> only the first type of documentation is actually accessible
> from the Help menu of RGui.

That's not a bug: see ?help and ?help.start.  You can only use the CHTML
and WinHlp documentation via help or directly in Windows Explorer.

> 2) I have then attempted to load some packages, but some of
> them are declared "non-existent"... see below.

[...]

Again, see the documentation, namely the R for Windows FAQ.
Not all packages are available in pre-compiled form, so you will need
to compile the others yourself.  In particular, sn and integrate are not,
currently.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 13:52:09 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
Subject: [Rd] timeline for R-1.2.x where x>1? Just curious as
Message-ID: <Pine.SOL.3.96.1010301085117.16605A-100000@mfcf.math.uwaterloo.ca>

I am looking to update our installation.

-wt

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 14:28:51 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 14:28:51 +0000 (GMT)
Subject: [Rd] timeline for R-1.2.x where x>1?
Message-ID: <200103011428.OAA20064@toucan.stats.ox.ac.uk>

> Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>

Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
our installation.

You can always find the current plans on developer.r-project.org.
That says

   The latest release of R was 1.2.2 on February 26th, 2001. We might
   have a 1.2.3 release mainly with fixes for the Macintosh port, but
   development will target v.1.3 now.
   No dates for upcoming releases have been scheduled yet.

My own guess would be mid-year for 1.3.0, as a twice-yearly schedule for
1.x.0 releases is the `norm'.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 15:09:48 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
Subject: [Rd] webpage should be updated regarding 1.2.2
In-Reply-To: <200103011428.OAA20064@toucan.stats.ox.ac.uk>
Message-ID: <Pine.SOL.3.96.1010301100821.16605D-100000@mfcf.math.uwaterloo.ca>



On Thu, 1 Mar 2001, Prof Brian Ripley wrote:

> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> 
> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
> our installation.
> 
> You can always find the current plans on developer.r-project.org.
> That says
> 
>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>    development will target v.1.3 now.
>    No dates for upcoming releases have been scheduled yet.

Thanks, Perhaps the main webpage at www.r-project.org downloads areas could have
a note to this effect as it mentions 1.2.1 as the latest.

-walter tautz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 15:24:58 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 15:24:58 +0000 (GMT)
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <200103011524.PAA20197@toucan.stats.ox.ac.uk>


> X-Authentication-Warning: mfcf.math: wtautz owned process doing -bs
> Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: R-devel@r-project.org
> Subject: [Rd] webpage should be updated regarding 1.2.2
> 
> 
> 
> On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
> 
> > > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> > 
> > Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to 
update 
> > our installation.
> > 
> > You can always find the current plans on developer.r-project.org.
> > That says
> > 
> >    The latest release of R was 1.2.2 on February 26th, 2001. We might
> >    have a 1.2.3 release mainly with fixes for the Macintosh port, but
> >    development will target v.1.3 now.
> >    No dates for upcoming releases have been scheduled yet.
> 
> Thanks, Perhaps the main webpage at www.r-project.org downloads areas could 
have
> a note to this effect as it mentions 1.2.1 as the latest.

It just so happens that updating was late this one time!  (R people are
volunteers, and not available all day every day.  In particular, Fritz
Leisch who does the bulk of the work on the web sites is in Australia
or in transit.)

I think you mean the main page of cran.r-project.org, which is linked
off www.r-project.org.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Mar  1 15:36:21 2001
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 01 Mar 2001 16:36:21 +0100
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <3.0.32.20010301163621.008fc6a0@162.38.183.200>

At 10:09 01/03/01 -0500, you wrote:
>
>
>On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
>
>> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
>> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
>> 
>> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to
update 
>> our installation.
>> 
>> You can always find the current plans on developer.r-project.org.
>> That says
>> 
>>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>>    development will target v.1.3 now.
>>    No dates for upcoming releases have been scheduled yet.
>
>Thanks, Perhaps the main webpage at www.r-project.org downloads areas
could have
>a note to this effect as it mentions 1.2.1 as the latest.
>
>-walter tautz

No, it doesn't. Look at http://cran.r-project.org/

1.2.2 is mentioned as the lastest.
	

	EP
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Thu Mar  1 23:19:56 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Fri, 02 Mar 2001 10:19:56 +1100
Subject: [Rd] Finalization and external pointer objects
Message-ID: <3A9ED91C.7E2DBCA1@cmis.csiro.au>

Hi,

I've been developing an image analysis package based on R for a while
now and I've had problems relating to garbage collection, so it with
great interest that I've noticed the work done by Luke Tierney in this
area, and I'd like to discuss how best to fit it into my package. I'll
start with how my package is structured - an image is represented by an
integer with a class of "image". This is actually a pointer to a C
abstract data type. Most imaging functions in my library have a form
like this


IMAGE *imquickthresh(const IMAGE *src, IMAGE *target, float p1, int p2);

the target parameter is optional and never used from R.

This is made appropriate for a .C call like this

Rimquickthresh(IMAGE **output, IMAGE **src, Sfloat *p1, Sint *p2)
{
  IMAGE *dummy;

  dummy = imquickthresh(*src, NULL, (float)(*p1), (int)(*p2));

  *output = dummy;
}

the R code calling this looks like

function(src, p1, p2)
{
  if (!is.image(src))
    stop("Parameter 'src' should be an image.")
  output <- POINTER
  output<-.C("Rimquickthresh", val = output, (src), as.double(p1),
as.integer(p2))$val
  if (output == POINTER)
    return(0)
  class(output) <- c("image")
  AddGlobalImageFunc(output)
  output
}


The AddGlobalImageFunc is related to my GC mechanism.
POINTER is as.integer(0) or as.double(0), depending on platform.

This is mostly generated automatically. I'd really like to discard my GC
mechanism and make use of the special facilities that are being
developed. So far it seems that most of these are related to the .Call
mechanism, so is there a sensible way to use them with pointers passed
to or returned from a .C call? I'd like to avoid changing everything to
make use of the .Call facility because I suspect it might make porting
to Splus more difficult and it's likely to be a significant amount of
work.

I'm guessing that there needs to be some of the following functions at
the R level - perhaps they are already around and I've missed them.

GenExtPointer - basically the same thing that can get returned by a
.Call using  R_MakeExternalPtr. The address of the appropriate part of
this would then need to be passed in the place of "output" above,
presumably by using an R interface to R_ExternalPtrAddr.

register.finalizer mentioned in Lukes discussion papers is needed.

I welcome any advice about other ways of approaching this problem,
indications of where the development of these things are at and if there
is ever likely to be any hope of using similar functionality under
Splus? Are the results from an approach based on .C going to be so
horrible that I should just give up and work on a .Call based approach?


I look forward to hearing from you.

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sergei@stams.strath.ac.uk  Fri Mar  2 17:14:31 2001
From: sergei@stams.strath.ac.uk (sergei@stams.strath.ac.uk)
Date: Fri, 2 Mar 2001 18:14:31 +0100 (MET)
Subject: [Rd] apply on data.frame does not work properly (PR#859)
Message-ID: <200103021714.SAA10405@pubhealth.ku.dk>

Full_Name: Dr. Sergei Zuyev
Version: 1.1.0 and 1.2.2
OS: Solaris
Submission from: (NULL) (130.159.248.36)


apply on data.frame with floats, factors and NA's does not work properly. Here
is
an example:
I am searching for rows containig NA values.

X1 <- c(1, NA)
X2<-c("A","B")
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it should
 
# But:
X1 <- c(1.5, NA) # float instead of natural
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE FALSE
# as it shouldn't
 
# However,
apply(df[2,],1,function(x){any(is.na(x))})
# gives TRUE
 
# Change X2 to a numeric vector and everything works fine:
X2<-c(2.5,3)
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it shouldn't                                                               
            

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Fri Mar  2 17:40:17 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 02 Mar 2001 18:40:17 +0100
Subject: [Rd] apply on data.frame does not work properly (PR#859)
In-Reply-To: sergei@stams.strath.ac.uk's message of "Fri, 2 Mar 2001 18:14:31 +0100 (MET)"
References: <200103021714.SAA10405@pubhealth.ku.dk>
Message-ID: <x2snkw83y6.fsf@blueberry.kubism.ku.dk>

sergei@stams.strath.ac.uk writes:

> Full_Name: Dr. Sergei Zuyev
> Version: 1.1.0 and 1.2.2
> OS: Solaris
> Submission from: (NULL) (130.159.248.36)
> 
> 
> apply on data.frame with floats, factors and NA's does not work properly. Here
> is
> an example:
> I am searching for rows containig NA values.
> 
> X1 <- c(1, NA)
> X2<-c("A","B")
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it should
>  
> # But:
> X1 <- c(1.5, NA) # float instead of natural
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE FALSE
> # as it shouldn't
>  
> # However,
> apply(df[2,],1,function(x){any(is.na(x))})
> # gives TRUE
>  
> # Change X2 to a numeric vector and everything works fine:
> X2<-c(2.5,3)
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it shouldn't                                                          
 
This traces back to the use of format() when coercing dataframes to
character:

> format(c(1,NA))
[1] " 1" "NA"
> format(c(1000,NA))
[1] "1000" "  NA"

And "  NA" is not a character NA....

apply(is.na(df),1,any) seems to be better though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b4h443@arabia.com  Fri Mar  2 23:04:34 2001
From: b4h443@arabia.com (b4h443@arabia.com)
Date: Fri, 02 Mar 2001 17:04:34 -0600
Subject: [Rd] Brand New E-Mail pager for FR-EE!
Message-ID: <000037602e56$00007599$00004fa8@mail.dptechnology.com>

Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check

   Put Free pagers on your kids - Give one to your loved ones - For FR-EE

   Here at Paging America we are excited to be offering you this exclusive, top of the line, full featured pager in your choice
   of color for FR=EE. This side viewable display pager is one of the smallest and lightest pagers on the market today.


   Call 877-699-8546 to be Guaranteed Your FR-EE Pager Today


   Your pager will hold up to 20 numeric messages. It has 9 music alerts and silent vibration. New FLEX technology provides three
   times the battery life. Also, message time and date stamping and smart alarm so you can set a daily or weekly reminder.
   This pager comes in black, teal and blue.

   To receive your free pager all we ask is that you allow us to provide you with the monthly airtime cancelable at any time.
   There is no long term contract. Just call the toll free number and we'll ship your Fr-ee pager to you immediately in your choice of color
   already programmed with a local telephone number for your town.

   Make this easy phone call and we will deliver your pager immediately.


   Call 877-699-8546 to get in on this exciting offer today












Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  3 20:56:20 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Mar 2001 21:56:20 +0100 (MET)
Subject: [Rd] Context problem with ... and rbind (PR#860)
Message-ID: <200103032056.VAA13487@pubhealth.ku.dk>

R 1.2.2, Solaris and Linux:

f <- function(x, ...)
{
   g <- function(x, ...) x
   rbind(numeric(), g(x, ...))
}
> f(1:3)
Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

S-PLUS 3.4 gives

     [,1] [,2] [,3]
[1,]    1    2    3

as I would expect.

f <- function(x, ...)
{
   g <- function(x, ...) x
   tmp <- g(x, ...)
   rbind(numeric(), tmp)
}
> f(1:3)

does work, and I believe this should be equivalent.


This is an abstract of code used in the latest S version of the boot
package.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 11:56:35 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 12:56:35 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sat, 3 Mar 2001 21:56:20 +0100 (MET)"
References: <200103032056.VAA13487@pubhealth.ku.dk>
Message-ID: <x23dctbvd8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> f <- function(x, ...)
> {
>    g <- function(x, ...) x
>    rbind(numeric(), g(x, ...))
> }
> > f(1:3)
> Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

It's not really rbind that is the culprit here, but the deparsing of
its argument. A near-minimal version of what I think is the same issue
is

f <- function(x, ...) h(g(x, ...))
g <- function(x, ...) x
h <- function(...)substitute(list(...))
f(1)
#Error in h(g(x, ...)) : ... used in an incorrect context

Also, the following is perplexing, given the definition of quote():

> quote(list(...))
list(...)
> substitute(list(...))
Error: ... used in an incorrect context

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:26:13 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:26:13 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 12:56:35 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zml2mt6.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > f <- function(x, ...)
> > {
> >    g <- function(x, ...) x
> >    rbind(numeric(), g(x, ...))
> > }
> > > f(1:3)
> > Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context
> 
> It's not really rbind that is the culprit here, but the deparsing of
> its argument. A near-minimal version of what I think is the same issue
> is
> 
> f <- function(x, ...) h(g(x, ...))
> g <- function(x, ...) x
> h <- function(...)substitute(list(...))
> f(1)
> #Error in h(g(x, ...)) : ... used in an incorrect context

Hmm.... The patch below stops the error, and passes make check, but I
have a nagging suspicion that it isn't the right way to fix this:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:11:12
@@ -1749,11 +1749,11 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue || h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:53:34 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:53:34 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:26:13 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266hp4041.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> Hmm.... The patch below stops the error, and passes make check, but I
> have a nagging suspicion that it isn't the right way to fix this:

This might work rather better:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:46:27
@@ -1749,11 +1749,13 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue)
+               return el;
+           if( h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Sun Mar  4 23:23:09 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 05 Mar 2001 09:23:09 +1000
Subject: [Rd] passing pointer types via .C calls
Message-ID: <3AA2CE5D.D00E9052@cmis.csiro.au>

Hi,
this relates to my earlier message about external references and
finalizers. I was experimenting over the weekend and now suspect that
the appropriate solution to my problem will be to have a special case in
the code that handles the .C call so that external references are
handled appropriately - I guess that a pointer to the reference should
be passed to the C code. As I've never experimented with the R internals
before I thought that I had better check peoples opinion. Does this
approach break anything in the work the Luke Tierney has been doing?
I've only had a quick look so far so I'm not really certain how the code
that handling the .C call is meant to work. I have successfully passed
the pointer to the external reference to my code, but I'm really not
sure about how the conventions used for this kind of thing - who should
I be talking to about it?

All advice welcome....

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bernd.winkler@genedata.com  Mon Mar  5 14:01:55 2001
From: bernd.winkler@genedata.com (bernd.winkler@genedata.com)
Date: Mon, 5 Mar 2001 15:01:55 +0100 (MET)
Subject: [Rd] histogram of frequencies (PR#861)
Message-ID: <200103051401.PAA28206@pubhealth.ku.dk>

Full_Name: Dr. Bernd Winkler
Version: 1.2.2
OS: Linux
Submission from: (NULL) (194.59.179.176)


Hi all,

having updated to version 1.2.2 last week I experienced some strange behaviour
of 
the hist function.

I want to plot a histogram of frequencies resp. counts, for example poisson 
random numbers, on a predefined and fixed x scale

> hist(rpois(500, 2), breaks=0:10)

But instead of the frequencies I get the density of these data.
Introducing the parameter freq=TRUE then I get the frequencies but 
with the following warning message

> hist(rpois(500, 2),breaks=0:10, freq=TRUE)
Warning message: 
the AREAS in the plot are wrong -- rather use `freq=FALSE'! in:
plot.histogram(r, freq = freq, col = col, border = border, main = main,  

The following excerpt from hist.default(...) (new in 1.2.2) might have caused
this behaviour:
    ...
    diddle <- 1e-07 * max(abs(range(breaks)))
    fuzz <- if (right) 
        c(if (include.lowest) -diddle else diddle, rep(diddle, 
            length(breaks) - 1))
    else c(rep(-diddle, length(breaks) - 1), if (include.lowest) diddle else
-diddle)
    breaks <- breaks + fuzz
    ...

The addition of the fuzz variable to the breaks causes hist 
to think of no equidistant breaks (even if they are) and therefore 
a density plot is generated by default. Removing these lines the 
behaviour is like the one in version 1.2.1 and earlier. 
Is there an alternative doing this with the new version?
And what about the border color parameter in barplot?

Many thanks in advance

Bernd





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 14:59:37 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 15:59:37 +0100
Subject: [Rd] histogram of frequencies (PR#861)
In-Reply-To: bernd.winkler@genedata.com's message of "Mon, 5 Mar 2001 15:01:55 +0100 (MET)"
References: <200103051401.PAA28206@pubhealth.ku.dk>
Message-ID: <x2itlob6sm.fsf@blueberry.kubism.ku.dk>

bernd.winkler@genedata.com writes:

> The addition of the fuzz variable to the breaks causes hist 
> to think of no equidistant breaks (even if they are) and therefore 
> a density plot is generated by default. Removing these lines the 
> behaviour is like the one in version 1.2.1 and earlier. 
> Is there an alternative doing this with the new version?
> And what about the border color parameter in barplot?

Argh! This just goes to prove how hard it is to fix one bug without
introducing another.... 

The two types of fuzz in hist.default should not be of the same size! 
Try setting the multiplier in "diddle" to a smaller value, like 1e-12.
Either that or we should test for equidistant breaks before adding the
fuzz. 

It only happens with user-specified breaks, though, and the error
message with freq=T is of course ignorable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar  5 15:17:03 2001
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 5 Mar 2001 09:17:03 -0600 (CST)
Subject: [Rd] passing pointer types via .C calls
In-Reply-To: <3AA2CE5D.D00E9052@cmis.csiro.au> from Richard Beare at "Mar 5,
 2001 09:23:09 am"
Message-ID: <200103051517.f25FH3X26098@muskrat.stat.umn.edu>

Richard Beare wrote:
> Hi,
> this relates to my earlier message about external references and
> finalizers. I was experimenting over the weekend and now suspect that
> the appropriate solution to my problem will be to have a special case in
> the code that handles the .C call so that external references are
> handled appropriately - I guess that a pointer to the reference should
> be passed to the C code. As I've never experimented with the R internals
> before I thought that I had better check peoples opinion. Does this
> approach break anything in the work the Luke Tierney has been doing?
> I've only had a quick look so far so I'm not really certain how the code
> that handling the .C call is meant to work. I have successfully passed
> the pointer to the external reference to my code, but I'm really not
> sure about how the conventions used for this kind of thing - who should
> I be talking to about it?
> 
> All advice welcome....
> 

I am a little confused about exactly how you are doing things but
maybe the following will help. Or not :-)

To let the R memory manager manage your external object you need to

	create a *single* R object that represents your external one

	only reference your external object through its R representative

That way once the memory manager finds that it is not possible to
access the R representative from R any more the it knows that it is
safe for your external object to be reclaimed, using say the
reclamation code you register as a finalizer.

In languages like Java where objects are passed by reference there
isn't much more to it--any object can have a finalizer attached to it
(either via a finalize mehtod or using the weak reference mechanism).

In R things are a bit more complicated because (most) objects are
passed by value.  So if you do

	x <- some calculation that yields a numeric
	...
	y <- x

then all that is guaranteed is that y refers to a value with the same
numeric contents (and attributes and the like) but not necessarily to
the same physical object in memory.  It might be the same or it might
be a copy.  So if you represent your external object as a numeric
containing some encoding of the pointer value and do

	x<-NewExternalObject()
        ...
	y<-x

then y will contain the same pointer value but may not reference the
same internal R object.  If it does not, and there are no more
references to the original object, and a finalizer was attached to the
original object, then your external object may have been reclaimed
before you use y, and then .... Using a standard numeric object to
represent external objects means you cannot quarantee that there is a
*single* R object to represent your external one.

This is the reason for a special external pointer object.  These
things are never copied, they are passed by reference. (There are a
few other objects that are also always passed by reference:
environments and symbols). This guarantees the one-to-one
correspondence between the R representation and the external object
that you need to get the memory management to work.

How you get things from C to R and back (.Call, .C, whatever) doesn't
really matter.  What matters is that you use a representation in R
that will be passed by reference.

Hope that helps

luke
 
-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Mar  5 17:04:35 2001
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 5 Mar 2001 18:04:35 +0100 (MET)
Subject: [Rd] Wrong sign for Pearson residuals (PR#862)
Message-ID: <200103051704.SAA01343@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: 1.2.1
OS: Linux + NT
Submission from: (NULL) (141.211.66.172)


Consider the following data from McCullagh and Nelder:

> clot
   time conc lot
1   118    5 one
2    58   10 one
3    42   15 one
4    35   20 one
5    27   30 one
6    25   40 one
7    21   60 one
8    19   80 one
9    18  100 one
10   69    5 two
11   35   10 two
12   26   15 two
13   21   20 two
14   18   30 two
15   16   40 two
16   13   60 two
17   12   80 two
18   12  100 two
> g <- glm(time ~ log(conc)*lot, Gamma, clot)
> residuals(g)
         1          2          3          4          5          6          7 
-0.0400835  0.0864112  0.0490090  0.0290499 -0.0384659  0.0011126 -0.0286959 
         8          9         10         11         12         13         14 
-0.0375571 -0.0263724 -0.0292475  0.0637151  0.0394632 -0.0175449  0.0143592 
        15         16         17         18 
 0.0103035 -0.0557378 -0.0466764  0.0171410 
> residuals(g,type="pearson")
         1          2          3          4          5          6          7 
 0.0395493 -0.0889174 -0.0498126 -0.0293318  0.0379742 -0.0011130  0.0284220 
         8          9         10         11         12         13         14 
 0.0370884  0.0261410  0.0289630 -0.0650753 -0.0399839  0.0174424 -0.0144280 
        15         16         17         18 
-0.0103389  0.0547070  0.0459530 -0.0172391 

The Pearson residuals have the wrong sign. It seems the sign is taken from the 
working residuals. The sign is reversed because the inverse link function
used in this example. The problem could be easily fixed by taking the sign from

the response residuals.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 21:20:10 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 22:20:10 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:53:34 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk> <x266hp4041.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2pufvj4l1.fsf@blueberry.kubism.ku.dk>


OK, I decided that it was definitely better than the original this
way. Committed for 1.3.0.

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> diff -u -r1.85 coerce.c
> --- src/main/coerce.c   2001/01/15 14:52:09     1.85
> +++ src/main/coerce.c   2001/03/04 22:46:27
> @@ -1749,11 +1749,13 @@
>      if (isNull(el))
>         return el;
>      if (CAR(el) == R_DotsSymbol) {
> -       h = findVar(CAR(el), rho);
> +       h = findVarInFrame(rho, CAR(el));
>         if (h == R_NilValue)
>             return substituteList(CDR(el), rho);
>         if (TYPEOF(h) != DOTSXP) {
> -           if (h == R_MissingArg)
> +           if (h == R_UnboundValue)
> +               return el;
> +           if( h == R_MissingArg)
>                 return substituteList(CDR(el), rho);
>             error("... used in an incorrect context");
>         }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 08:35:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Mar 2001 08:35:10 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103050832.KAA01502@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>

[Moved to R-devel, as more appropriate.]

On Mon, 5 Mar 2001, Jari Oksanen wrote:

> Canberra distance is defined in function `dist' (standard library `mva') as
>
> sum(|x_i - y_i| / |x_i + y_i|)
>
> Obviously this is undefined for cases where both x_i and y_i are zeros.  Since
> double zeros are common in many data sets, this is a nuisance.  In our field
> (from which the distance is coming), it is customary to remove double zeros:
> contribution to distance is zero when both x_i and y_i are zero.  Could it be
> possible to have this kind of feature in R as well?
>
> It seems that this would do the trick without breaking applications where
> double zeros do not occur:

I am sure we should do something, but is this exactly right?  From dist()
in the R-devel version (1.3.x, eventually) I have enabled the handling of
missing values.  With this solution, identically zero elements contribute
zero to the distance, and are not regarded as missing.  Canberra is
similar to binary, where x_i = y_i = 0 is treated as equivalent to
missing.  The issue is if count should be incremented if
sum == 0.0 or not.

A related issue is the test (sum > 0.0).  I guess there are potential
problems with optimization on machines that use extended-precision
arithmetic, where sum might be non-zero in a register but zero if stored.
Not sure if that can actually happen, but a tolerance (e.g. machar's
xmax) is usually safer.


>
> --- R-1.2.2/src/appl/distance.c	Sun Oct 15 18:13:25 2000
> +++ R-work/src/appl/distance.c	Mon Mar  5 10:16:53 2001
> @@ -93,5 +93,5 @@
>  double R_canberra(double *x, int nr, int nc, int i1, int i2)
>  {
> -    double dist;
> +    double dist, sum;
>      int count, j;
>
> @@ -100,5 +100,7 @@
>      for(j=0 ; j<nc ; j++) {
>  	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> -	    dist += fabs(x[i1] - x[i2])/fabs(x[i1] + x[i2]);
> +	    sum = fabs(x[i1] + x[i2]);
> +	    if (sum > 0.0)
> +		dist += fabs(x[i1] - x[i2])/sum;
>  	    count++;
>  	}
>
>
>
> Best wishes, Jari Oksanen
> --
> Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
> Ph. +358 8 5531526 (job), mobile +358 40 5136529
> email jari.oksanen@oulu.fi, homepage http://cc.oulu.fi/~jarioksa/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jarioksa@cc.oulu.fi  Tue Mar  6 09:16:20 2001
From: jarioksa@cc.oulu.fi (Jari Oksanen)
Date: Tue, 06 Mar 2001 11:16:20 +0200
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: Message from Prof Brian D Ripley <ripley@stats.ox.ac.uk>
 of "Tue, 06 Mar 2001 08:35:10 GMT." <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>
Message-ID: <200103060916.LAA27821@pc112145.oulu.fi>


ripley@stats.ox.ac.uk said:
> [Moved to R-devel, as more appropriate.]

This means that I probably have to subsribe (momentarily) for R-devel which I 
have regarded as too technical for non-developer like me.


ripley@stats.ox.ac.uk said:
> I am sure we should do something, but is this exactly right?

I am not sure either: it is right for me in my present applications, but I 
think it may not be right in general.  I used dist() for community data, where 
zero *is* zero (not only approximately zero floating point number) and means 
that the species is absent, and of course, all numbers are positive or zeros.  
Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1 
would yield 2/0 which probably shouldn't be regarded as zero, but rather as 
NaN.  So a better test would be for above-zero numerator or explicitly for 
both x_i && y_i.

ripley@stats.ox.ac.uk said:
>  The issue is if count should be incremented if sum == 0.0 or not.

I don't know, and I don't have Lance & Williams 1967 to check. However, more 
recent papers by Canberra people do *not* increment count for double-zeros 
(Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure 
of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the 
really *correct* solution or what are the arguments for incrementing or not 
incrementing count. At least not incrementing means that count varies with 
pairs of observations instead of being a simple down-scaling by a constant for 
the entire matrix.  However, probably the original Lance & Williams choice was 
to increment only for sum > 0.  Some other people may have better libraries to 
check both the choice and the argument (I may have a look there, but I would 
be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for 
incrementing count would need testing above-zero denominator which begins to 
look ugly coding if we need testing for numerator as well.

In community ecology data, the number of species per site (= non-zero values 
per column) is a valid statistic of something, but the total number of species 
in a data set (= number of rows in the matrix) increases with the size of the 
sample set.  So the data is the more infested with zeros the larger the data 
set is.  I guess this the argument here for incrementing only for 
non-double-zeros: the count is dependent only on the pair compared instead of 
other observations not involved in this comparison.  On the other hand, I do 
not understand why you need to divide at all instead of using only the sum 
(this formulation occurs as well in literature).

As a quick solutions with the original 1.2.2 code  I replaced:

> str(dist(kasvit, method="can"))
Class 'dist'  atomic [1:153] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...
....
with a dirty hack:
> str(dist(kasvit+.Machine$double.eps, method="can"))
Class 'dist'  atomic [1:153] 49.2 61.7 50.9 52.1 60.1 ...

which certainly increments count for every pair, although it shouldn't.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 09:40:30 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 09:40:30 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103060916.LAA27821@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060930001.7798-100000@toucan.stats>

On Tue, 6 Mar 2001, Jari Oksanen wrote:

> ripley@stats.ox.ac.uk said:
> > [Moved to R-devel, as more appropriate.]
>
> This means that I probably have to subsribe (momentarily) for R-devel which I
> have regarded as too technical for non-developer like me.

We'll keep you on the Cc: list.  Normally things like this are on R-devel,
as they are specialized.

> ripley@stats.ox.ac.uk said:
> > I am sure we should do something, but is this exactly right?
>
> I am not sure either: it is right for me in my present applications, but I
> think it may not be right in general.  I used dist() for community data, where
> zero *is* zero (not only approximately zero floating point number) and means
> that the species is absent, and of course, all numbers are positive or zeros.
> Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1
> would yield 2/0 which probably shouldn't be regarded as zero, but rather as
> NaN.  So a better test would be for above-zero numerator or explicitly for
> both x_i && y_i.

I think it should be Inf, and was going to comment that was another
problem.

> ripley@stats.ox.ac.uk said:
> >  The issue is if count should be incremented if sum == 0.0 or not.
>
> I don't know, and I don't have Lance & Williams 1967 to check. However, more
> recent papers by Canberra people do *not* increment count for double-zeros
> (Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure
> of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the
> really *correct* solution or what are the arguments for incrementing or not
> incrementing count. At least not incrementing means that count varies with
> pairs of observations instead of being a simple down-scaling by a constant for
> the entire matrix.  However, probably the original Lance & Williams choice was
> to increment only for sum > 0.

Note count is only relevant if count < nc, and the code in 1.2.2 is wrong:
it should have been

    if(count != nc) dist /= ((double)count/nc);

Fortunately, it was never used.

> Some other people may have better libraries to
> check both the choice and the argument (I may have a look there, but I would
> be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for
> incrementing count would need testing above-zero denominator which begins to
> look ugly coding if we need testing for numerator as well.

You do anyway to get 2/0 different from 0/0.  We can code any solution,
and this is simple and clean compared to, say, scan.c!

I am going to implement that x1=x1=0 is equivalent to missing, and that
x1=+1, x2=-1 gives 2/0 = Inf.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar  6 15:33:20 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 06 Mar 2001 10:33:20 -0500
Subject: [Rd] pac2bin
Message-ID: <3AA50340.ED03EAD7@bank-banque-canada.ca>


I sometimes wonder how difficult it would be to set up an email system, like the
netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
packages. Has anyone every thought about this? I guess the main use would be for
Windows, about which I know almost nothing, so I won't volunteer myself.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 16:21:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 16:21:57 +0000 (GMT)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103061610340.8440-100000@toucan.stats>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.

If it all worked without a hitch, yes.  Many do not: for example several
need to be configured manually (without instructions, either) as their
configure scripts do not work under Windows (or use Unix-specific paths).
The real problems are packages that fail make pkgcheck-foo, e.g.
because they have par(ask=T) and Windows is using smaller buffers.
And then there are those which use data directories in unintended ways so
they cannot be zipped ....

Also, some of building has to be done under Windows, so one would need a
Windows server running.

There are ideas to ease this.  Peter D and I have talking about
cross-compiling and using Wine or Win4lin.  A couple of people are
exploring volunteering to help with or automate Windows builds.
When shortly I actually have my own suitable box (a dual PIII Linux box)
on the Internet, I will explore too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Mar  6 16:23:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 6 Mar 2001 08:23:35 -0800 (PST)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103060821290.53780-100000@homer06.u.washington.edu>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>

There are security issues, since a configure script can do anything,
as can R CMD check.

Also, I believe quite a few packages require hand-configuring of some sort
under Windows (another reason for the increasing workload).

It might be possible, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Mar  6 20:10:26 2001
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 6 Mar 2001 15:10:26 -0500
Subject: [Rd] pac2bin
References: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <02ca01c0a679$7c52aae0$0201a8c0@Workgroup>

Hi

I wonder if I could contribute in some way as grateful user of R and as a
Windows NT user. It could also be useful to know that I have a high speed
link to the Internet.

I would gladly give up CPU time to build binary packages for Windows if this
can help others. I understand that some package(s) might not build out of
the box as some of you have pointed out but I have no doubt a solution can
be found.

Thanks for your time and effort.

Yves Gauvreau


----- Original Message -----
From: "Paul Gilbert" <pgilbert@bank-banque-canada.ca>
To: "R-devel" <R-devel@stat.math.ethz.ch>
Sent: Tuesday, March 06, 2001 10:33 AM
Subject: [Rd] pac2bin


>
> I sometimes wonder how difficult it would be to set up an email system,
like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary
versions of
> packages. Has anyone every thought about this? I guess the main use would
be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>
> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ian@darwinsys.com  Wed Mar  7 00:50:06 2001
From: ian@darwinsys.com (ian@darwinsys.com)
Date: Wed, 7 Mar 2001 01:50:06 +0100 (MET)
Subject: [Rd] src/main/arithmetic.c on OpenBSD (PR#863)
Message-ID: <200103070050.BAA17436@pubhealth.ku.dk>

First, let me say how glad I am to discover R! As a former user of S
at the University of Toronto and, briefly S-Plus from StatSci (I had
a binary version of that on Slolaris for a while), I was really glad
to find the "R" project.

This is perhaps not your bug, but I did have one minor glitch in
compiling R. OpenBSD 2.8's math.h does not export the "struct
exception" unless you define __LIBM_PRIVATE. The attached patch is
all that is needed to make it compile. Feel free to apply this patch
in future releases, or not (maybe with "#ifdef __OpenBSD__" around it).

Again, thanks for the software.

Ian Darwin
ian@darwinsys.com

--- src/main/arithmetic.c.orig	Tue Mar  6 17:58:18 2001
+++ src/main/arithmetic.c	Tue Mar  6 18:27:38 2001
@@ -22,7 +22,9 @@
 #include <config.h>
 #endif
 
-#include "Defn.h"		/*-> Arith.h */
+#define __LIBM_PRIVATE	/* OpenBSD -> for definition of "struct exception" */
+#include "Defn.h"		/*-> Arith.h -> math.h */
+#undef __LIBM_PRIVATE	
 #define MATHLIB_PRIVATE
 #include <Rmath.h>
 #undef MATHLIB_PRIVATE

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Wed Mar  7 06:15:04 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103070615.HAA02646@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

none

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 860 *
Subject: Context problem with ... and rbind
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sat, 3 Mar 2001 20:59:04 +0000 (GMT)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)
* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Wed Mar  7 10:18:33 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Wed, 7 Mar 2001 11:18:33 +0100 (MET)
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
Message-ID: <200103071018.LAA22110@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: rw1022
OS: Windows Me
Submission from: (NULL) (216.175.126.55)


When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that is longer
than $lc-3 (=13) characters long, it repeats the package name on line two.

Example: Now it generates an output like:
com.braju.graphics
com.braju.graphics                Bla bla bla...

But, I believe it should generate:
com.braju.graphics
                Bla bla bla...

To solve this minor bug, just include a line '$old=""'. See line 49 below.

maketitle.pl:
L42: $S = '';
L43: $lc = 16;
L44: $rc = 72;
L45: $old = $package;
L46: $len = length($old);
L47: if ($len > $lc - 3) {
L48:   $S = $old;
L49:   $old = "";                    ### Forgot to this line.
L50:   for ($j = 1; $j < $lc; $j++) {
L51:     $old = $old . ' ';
L52:   }
L53: }
L54: else {
L55:   for ($j = 1; $j < $lc - $len; $j++) {
L56:     $old = $old . ' ';
L57:   }
L58: }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar  7 10:47:11 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Mar 2001 11:47:11 +0100
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
In-Reply-To: <200103071018.LAA22110@pubhealth.ku.dk>
References: <200103071018.LAA22110@pubhealth.ku.dk>
Message-ID: <15014.4527.291001.545417@mithrandir.hornik.net>

>>>>> henrikb  writes:

> Full_Name: Henrik Bengtsson
> Version: rw1022
> OS: Windows Me
> Submission from: (NULL) (216.175.126.55)


> When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that
> is longer than $lc-3 (=13) characters long, it repeats the package
> name on line two.

> Example: Now it generates an output like:
> com.braju.graphics
> com.braju.graphics                Bla bla bla...

> But, I believe it should generate:
> com.braju.graphics
>                 Bla bla bla...

> To solve this minor bug, just include a line '$old=""'. See line 49
> below.

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar  7 17:09:01 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 7 Mar 2001 18:09:01 +0100 (MET)
Subject: [Rd] axis(...,las=1) breaks postscript code in certain cases (PR#865)
Message-ID: <200103071709.SAA29219@pubhealth.ku.dk>

A colleage of mine (Roland Brun) has found the following 
reproducible problem: 

  In some circumstances, incorrect (for gv/gs) PostScript seems to be
  created when "las = 1".

  {for many versions of R (Linux) at least}

The following code shows you the symptom
    (gv pops up an error message window) :


##- Generate data 
y1 <- 10^seq(0,6)   ##- positive exponents 
y2 <- 10^seq(-4,2)  ##- including negative exponents 

postscript("test.ps")

par(mfrow=c(2,2),mar=c(3,6,0,0)+0.1,oma=c(3,1,1,1),mgp=c(4.5,1,0))

##- Plot1: works perfectly (y1 and las=0)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=0) 

##- Plot2: works perfectly (y1 and las=1)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=1) 

##- Plot3: works perfectly (y2 and las=0)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=0) 

##- Plot4: breaks postscript code (y2 and las=1)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=1) 

dev.off()
system("gv test.ps")




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 03
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 18:23:03 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy.Keitt@StonyBrook.Edu)
Date: Wed, 7 Mar 2001 19:23:03 +0100 (MET)
Subject: [Rd] mkString (PR#866)
Message-ID: <200103071823.TAA29687@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.2x
OS: Linux
Submission from: (NULL) (129.49.19.70)


The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
pointer.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar  7 18:41:09 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 7 Mar 2001 10:41:09 -0800 (PST)
Subject: [Rd] mkString (PR#866)
In-Reply-To: <200103071823.TAA29687@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>

On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:

> Full_Name: Tim Keitt
> Version: 1.2x
> OS: Linux
> Submission from: (NULL) (129.49.19.70)
>
>
> The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
> pointer.


Don't do that, then?

It's supposed to be passed a zero-terminated string, so it doesn't seem
unreasonable for it to assume that it can dereference its argument. The C
library functions don't in general accept NULL pointers as string
arguments.

I suppose a check for NULL would be fairly harmless, though.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:09:13 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:09:13 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA68759.9040203@StonyBrook.Edu>

Thomas Lumley wrote:

> 
> Don't do that, then?

Indeed, it could be a feature. :-)  (That said, I do prefer functions that handle all possible values of a type.)

T.

> 
> It's supposed to be passed a zero-terminated string, so it doesn't seem
> unreasonable for it to assume that it can dereference its argument. The C
> library functions don't in general accept NULL pointers as string
> arguments.
> 
> I suppose a check for NULL would be fairly harmless, though.
> 
> 	-thomas
> 
> Thomas Lumley			Asst. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 19:44:19 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 14:44:19 -0500
Subject: [Rd] CRAN Windows links
Message-ID: <3AA68F93.F17D890@bank-banque-canada.ca>

The links to windows-9x and windows-NT on the CRAN Windows download page
seem to be broken. I have the impression that the files are all in the
base directory, for which the link works.

Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:53:36 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:53:36 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA691C0.9040305@StonyBrook.Edu>

Thomas Lumley wrote:

> On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:
>
> Don't do that, then?
> 

Actually, on second thought, I think I agree with you.  The caller 
should insure the pointer is valid.  I'm just cranky having to do 
pointer hand-holding for C after enjoying nice languages (like R!) with 
real string types.  **sigh**

T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 20:38:03 2001
From: mendes@cse.ucsc.edu (mendes@cse.ucsc.edu)
Date: Wed, 7 Mar 2001 21:38:03 +0100 (MET)
Subject: [Rd] unable to open the base package (PR#867)
Message-ID: <200103072038.VAA00253@pubhealth.ku.dk>


Hi.

I'm trying to use R that someone installed in his own home directory
(which is located on a common filesystem). Now, he is able to use it with
no problems, but when I try to run it I get the following messages (the
first line is just the command line, and the way I call the program):

an2 1> /projects/draper/R-1.2.1/bin/R
cannot find system Renviron
R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Fatal error: unable to open the base package


The system we are running is SunOS Release 5.8 Generic.

Can you help us in any way?

	Bruno Mendes.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:00:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:00:45 +0000 (GMT)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <200103072038.VAA00253@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>

On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:

>
> Hi.
>
> I'm trying to use R that someone installed in his own home directory
> (which is located on a common filesystem). Now, he is able to use it with
> no problems, but when I try to run it I get the following messages (the
> first line is just the command line, and the way I call the program):
>
> an2 1> /projects/draper/R-1.2.1/bin/R
> cannot find system Renviron
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> Fatal error: unable to open the base package
>
>
> The system we are running is SunOS Release 5.8 Generic.
>
> Can you help us in any way?

Do you permission to read the files in his R installation?
Looks not.

The current version is 1.2.2, BTW.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:05:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:05:50 +0000 (GMT)
Subject: [Rd] CRAN Windows links
In-Reply-To: <3AA68F93.F17D890@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103072103050.16251-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

[...]
> Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Shhh!  We were hoping no one would use it.

Seriously, the plan was to abandon WinHelp once CHTML became popular, but
it seems some users prefer the older system. We don't advertise it, and
there is a fair chance it will be abandoned fairly soon -- certainly it
will not be fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 21:55:46 2001
From: mendes@cse.ucsc.edu (Bruno Mendes)
Date: Wed, 7 Mar 2001 13:55:46 -0800 (PST)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10103071354510.6746-100000@an2.cse.ucsc.edu>


As silly as it might seem, that was right.

Thanks very much Prof. Ripley.

	Bruno Mendes.

On Wed, 7 Mar 2001, Prof Brian D Ripley wrote:

> On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:
> 
> >
> > Hi.
> >
> > I'm trying to use R that someone installed in his own home directory
> > (which is located on a common filesystem). Now, he is able to use it with
> > no problems, but when I try to run it I get the following messages (the
> > first line is just the command line, and the way I call the program):
> >
> > an2 1> /projects/draper/R-1.2.1/bin/R
> > cannot find system Renviron
> > R : Copyright 2001, The R Development Core Team
> > Version 1.2.1  (2001-01-15)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type `license()' or `licence()' for distribution details.
> >
> > R is a collaborative project with many contributors.
> > Type `contributors()' for more information.
> >
> > Type `demo()' for some demos, `help()' for on-line help, or
> > `help.start()' for a HTML browser interface to help.
> > Type `q()' to quit R.
> >
> > Fatal error: unable to open the base package
> >
> >
> > The system we are running is SunOS Release 5.8 Generic.
> >
> > Can you help us in any way?
> 
> Do you permission to read the files in his R installation?
> Looks not.
> 
> The current version is 1.2.2, BTW.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 22:53:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 17:53:23 -0500
Subject: [Rd] syskern
Message-ID: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>

The bug list summary reported an error in syskern which I finally
realized is due to a badly chosen example in the help rather an error in
the code. However, I have taken the opportunity to re-evaluate  what I
have been trying to do with syskern, since some parts may no longer be
important. Since syskern was intended to address certain problems in
package development I would appreciate other opinions on whether these
are still concerns.

The package provides a standardized way to deal with some programming
differences between R and S (e.g. is.R() and is.S() ) and their various
versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
get the point), and also standardized ways to identify  different
operating systems in order for a program to take any operating system
specific action.  Dealing with the  R and S differences I think is still
fairly important although I can no doubt abandon some versions. However,
R has now evolved to the point where it actually deals with most of the
operating system differences (at least the ones that there is much hope
of dealing with).

My main use of the operating system determination has been with Splus to
distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
compiled code. I don't think this is an issue in R, but I haven't tried
to load a windows dll so I don't really know. The point of the syskern
code is to have a function is.Sun5() that works in R and in S and looks
after the fact that the R code needed to figure this out is different
from the S code needed to figure this out. These examples may be relics
but there is a possibility new variants will appear. So the question
then is: Are there still needs for an R (or S) program to use (rather
than just report) information about the operating system it is running
on?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Thu Mar  8 06:24:02 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Thu, 8 Mar 2001 07:24:02 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080624.HAA01643@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R 1.2.2 for Windows
OS: Windows Me
Submission from: (NULL) (216.175.124.217)


I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
that the png graphical device driver is corrupt. Previous versions have worked
just fine for me.

EXAMPLE:
> png("test.png")
> plot(1,1)
> dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible

WORK AROUND:
Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
by ditto found in version 1.2.1 (rw1021b1.zip).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 06:44:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 07:44:10 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080644.HAA01708@pubhealth.ku.dk>

Just to be clear, this is a problem only with the precompiled versions on
CRAN, and the sources for Rbitmap.dll are unchanged since 1.2.0.  Indeed,
compiling against libpng-1.0.6 works for me, although it is no longer
current.

Also, it is the build that is corrupt not the png device driver (which is
not in that DLL).

On Thu, 8 Mar 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: R 1.2.2 for Windows
> OS: Windows Me
> Submission from: (NULL) (216.175.124.217)
>
>
> I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
> that the png graphical device driver is corrupt. Previous versions have worked
> just fine for me.
>
> EXAMPLE:
> > png("test.png")
> > plot(1,1)
> > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible
>
> WORK AROUND:
> Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
> by ditto found in version 1.2.1 (rw1021b1.zip).

Alternatively, build from the sources.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 07:00:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Mar 2001 07:00:48 +0000 (GMT)
Subject: [Rd] syskern
In-Reply-To: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103080648400.16587-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

> The bug list summary reported an error in syskern which I finally
> realized is due to a badly chosen example in the help rather an error in
> the code.

It fails Rcmd check as a result. It also reports incorrect results
on Windows.

> However, I have taken the opportunity to re-evaluate  what I
> have been trying to do with syskern, since some parts may no longer be
> important. Since syskern was intended to address certain problems in
> package development I would appreciate other opinions on whether these
> are still concerns.
>
> The package provides a standardized way to deal with some programming
> differences between R and S (e.g. is.R() and is.S() ) and their various
> versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
> get the point), and also standardized ways to identify  different
> operating systems in order for a program to take any operating system
> specific action.  Dealing with the  R and S differences I think is still
> fairly important although I can no doubt abandon some versions. However,
> R has now evolved to the point where it actually deals with most of the
> operating system differences (at least the ones that there is much hope
> of dealing with).

You might want to use the SLanguage package to cover over R/S differences
(although often the code can be written to work on either).

> My main use of the operating system determination has been with Splus to
> distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
> compiled code. I don't think this is an issue in R, but I haven't tried
> to load a windows dll so I don't really know. The point of the syskern

Not an issue with R, and also not an issue in S-PLUS for at least five
years (use dyn.load.lib in S-PLUS 3.4/4.x/2000, nothing in 5.0/5.1/6.0 as
compiled code is loaded automatically).

> code is to have a function is.Sun5() that works in R and in S and looks
> after the fact that the R code needed to figure this out is different
> from the S code needed to figure this out. These examples may be relics
> but there is a possibility new variants will appear. So the question
> then is: Are there still needs for an R (or S) program to use (rather
> than just report) information about the operating system it is running
> on?

Very little in my experience, and what is needed is in .Platform and
.Machine.

As Fritz Leisch point out recently, the package sources on CRAN are for all
platforms, and should work equally on Unix, Linux, Windows and Macintosh.
Bundle dse is the only exception I know of.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Thu Mar  8 07:34:51 2001
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Thu, 8 Mar 2001 08:34:51 +0100 (MET)
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
Message-ID: <200103080734.IAA02098@pubhealth.ku.dk>

Hello Bug people,

I have an unexpected behavior and am unsure whether the problem is in my
thinking, my implementation or the program R.

Basically I get two different answers depending on how I call a function
which takes other functions as arguments as indicated below.
To me it should make no difference if f is a function that returns the
function g then z(f(x)) whould give the same as
y<- f(x)
z(y)
but I appear to get different answers as below. I have not distilled the
problem down to something you can replicate in total but have I done
something obviously wrong ?

Regards
Paul White 
ps I just checked with 1.2.2 and it still has the same behavior.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R


> risk <- function(f,g,H,lower.limits,upper.limits) 
+ {   prob.of.fracture <-  function(x)
+       { a  <- x[1] 
+         kc <- x[2] 
+         f(a) * g(kc) * H(a,kc) }
+
adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
ps=1e-3) }
>
risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
[1] 1.999471
       value       relerr       minpts       lenwrk        ifail 
    28.39852 0.0003455776          627         2803            0 
> 
> eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
[1] 1.999471
> risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
       value       relerr       minpts       lenwrk        ifail 
5.461088e-13 0.0006449058          741         2803            0 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar  8 07:56:06 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 8 Mar 2001 08:56:06 +0100
Subject: [Rd] Re: Download problems with Windows version
In-Reply-To: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
References: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
Message-ID: <15015.15126.497225.787464@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 8 Mar 2001 08:42:21 +0100 ,
>>>>> marcel baumgartner (mb) wrote:

  > Hello,
  > I tried to download the Windows version of R at the cran site,
  > but I cannot get down to the files. When clicking on the on
  > any of the windows sources, you create strange links:

  > http://cran.r-project.org/bin/windows/windows-NT

  > then, clicking again it becomes

  > http://cran.r-project.org/bin/windows/windows-NT/windows-NT

  > and so on ...

  > The same happens at the mirror site at ETH Zurich. I use IE 5.5.


>>>>> On Wed, 07 Mar 2001 14:44:19 -0500,
>>>>> Paul Gilbert (PG) wrote:

  > The links to windows-9x and windows-NT on the CRAN Windows download page
  > seem to be broken. I have the impression that the files are all in the
  > base directory, for which the link works.

  > Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.



These are recursive links for backwards compatibilty, and have been in
place for a couple of months now. Simply go to

	http://cran.r-project.org/bin/windows/base
	http://cran.r-project.org/bin/windows/contrib

for the base sytem or contributed packages, respectively.

Older versions of R expect to find the contributed packages in 

	http://cran.r-project.org/bin/windows/windows-NT/contrib

and removing the links would break install.packages() there. I'll add
some message in the directory to make things clearer.

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 09:23:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 10:23:50 +0100
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
In-Reply-To: Paul.White@dsto.defence.gov.au's message of "Thu, 8 Mar 2001 08:34:51 +0100 (MET)"
References: <200103080734.IAA02098@pubhealth.ku.dk>
Message-ID: <x2elw8fwbd.fsf@blueberry.kubism.ku.dk>

Paul.White@dsto.defence.gov.au writes:

> Hello Bug people,
> 
> I have an unexpected behavior and am unsure whether the problem is in my
> thinking, my implementation or the program R.
> 
> Basically I get two different answers depending on how I call a function
> which takes other functions as arguments as indicated below.
> To me it should make no difference if f is a function that returns the
> function g then z(f(x)) whould give the same as
> y<- f(x)
> z(y)
> but I appear to get different answers as below. I have not distilled the
> problem down to something you can replicate in total but have I done
> something obviously wrong ?

Lazy evaluation sometimes plays tricks on the unsuspecting. In the
first case, eifs.at.time.using.density(5000,eifs,1e-4,2) is evaluated
when adapt first calls prob.of.fracture, in the other it is of course
evaluated from the start. If eifs.at.time.using.density is dependent
on values that might have changed...

You're not showing us eifs.at.time.using.density, so it is difficult
to say whether you have a bug or not.

> > risk <- function(f,g,H,lower.limits,upper.limits) 
> + {   prob.of.fracture <-  function(x)
> +       { a  <- x[1] 
> +         kc <- x[2] 
> +         f(a) * g(kc) * H(a,kc) }
> +
> adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
> ps=1e-3) }
> >
> risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
> [1] 1.999471
>        value       relerr       minpts       lenwrk        ifail 
>     28.39852 0.0003455776          627         2803            0 
> > 
> > eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
> [1] 1.999471
> > risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
>        value       relerr       minpts       lenwrk        ifail 
> 5.461088e-13 0.0006449058          741         2803            0 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:20:21 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:20:21 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103081520.QAA10571@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Is this done with purpose...:

In R I get:
---
> as.numeric(" ")
[1] 0 

> as.integer(" ")
[1] 0 
---

While in the same in S-PLUS returns:
---
> as.numeric(" ")
[1] NA 

> as.integer(" ")
[1] NA
---

For my applications, the later (S-PLUS) definitely makes most sense, but you my
have some good reasons for your choose?
(Anyway it is quite dangers with these differences when porting applications).


Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:29:55 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081529.QAA10737@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Actually, this is not a bug, but a small remark about a way R is working that
makes trouble in porting the code to S.

If I run the following i R:
---
midl <- 4
attr(midl,"Object created") <- date()
dump("midl","midl.R")
---

I get a file like:
---
"midl" <-
structure(4, Object created = "Thu Mar 08 16:04:04 2001")
---

This works well inside R, but S-PLUS has trouble reading it, because S needs "
around a attribute with spaces. E.g. S-PLUS wants:

---
"midl" <-
structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
---

This last example reads well into both systems, so way not let R print out the
attributes names with "..."

Again - Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  8 15:33:45 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Mar 2001 10:33:45 -0500
Subject: [Rd] bug.report/mail
Message-ID: <3AA7A659.6B8F55DE@bank-banque-canada.ca>

One of the functions I would like to clean out of my syskern package is a program to
send mail. This is a common feature other programs (e.g. bug.report) may use so I
would like it to be included in R/base. I will volunteer to do this as it looks like
a fairly straightforward dissection of bug.report but I have some questions:

Has anyone done this already?

Is "mail" a good name or would something like "Sys.mail" be better?

Should I generate a diff relative to something or just files for src/library/base/R?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From niels.waller@home.com  Thu Mar  8 18:26:54 2001
From: niels.waller@home.com (niels Waller)
Date: Thu, 8 Mar 2001 10:26:54 -0800
Subject: [Rd] APM announcement
Message-ID: <NCBBKMNKKMFCIGDCHLDOGEHLCGAA.niels.waller@home.com>




Developers of R,

Hello.  My name is Niels Waller and I am the "Computer Program Exchange"
editor of Applied Psychological Measurement (APM).  APM is one of the top
journals in the field of psychometrics.  The journal publishes new
developments or interesting applications of psychometric methods.  It also
publishes brief (1 or 2 typeset pages) announcements of free programs that
would be of interest to our readership.


APM is described more fully at:

http://www.sagepub.co.uk/frame.html?http://www.sagepub.co.uk/journals/detail
s/j0071.html



As a long-time user of S-PLUS, I have fallen in love with R (in fact, I
prefer R for simulation work as it is often much faster for my problems) and
I am confident that many other social scientists/psychometricians will also
appreciate what R has to offer.  Therefore, I would like to invite someone
from the R development team to write a brief description of the program for
publication.

If anyone is interesting in this project they may contact me via the
information provided below.

Niels


*******************************************************
Niels Waller, Ph.D.
Director of Quantitative Methods and Evaluation
Department of Psychology and Human Development
Vanderbilt University
Phone: (615) 322-8380    email: niels.waller@vanderbilt.edu
QME Home page: http://www.vanderbilt.edu/quantmetheval/
*******************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 16:45:58 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 17:45:58 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081645.RAA11604@pubhealth.ku.dk>


> From: harald.fekjar@basalmed.uio.no
> Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
> 
> Full_Name: Harald Fekjr
> Version: 1.22
> OS: Windows 
> Submission from: (NULL) (158.36.132.220)
> 
> 
> Dear R developers
> 
> Actually, this is not a bug, but a small remark about a way R is working that
> makes trouble in porting the code to S.

It *is* a bug: see later.

> If I run the following i R:
> ---
> midl <- 4
> attr(midl,"Object created") <- date()
> dump("midl","midl.R")
> ---
> 
> I get a file like:
> ---
> "midl" <-
> structure(4, Object created = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This works well inside R, but S-PLUS has trouble reading it, because S needs "
> around a attribute with spaces. E.g. S-PLUS wants:

My version of R can't read that either.  Did you try it in R?
> source("midl.R")
Error in parse(file, n, text, prompt) : syntax error on line 2

Similarly,

> deparse(midl)
[1] "structure(4, Object created = \"Thu Mar  8 16:24:16 2001\")"

cannot be re-parsed.

> ---
> "midl" <-
> structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This last example reads well into both systems, so way not let R print out the
> attributes names with "..."

Yes, it should do.  However, the code (in deparse.c) is pretty complicated
and used recursively.  I think I have a solution ... still testing.

Meanwhile, avoid attributes with non-standard S names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Thu Mar  8 17:26:29 2001
From: hfe@math.uio.no (hfe@math.uio.no)
Date: Thu, 8 Mar 2001 18:26:29 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081726.SAA11909@pubhealth.ku.dk>

On Thu, 8 Mar 2001, Prof Brian Ripley wrote:
> ...
> > around a attribute with spaces. E.g. S-PLUS wants:
>
> My version of R can't read that either.  Did you try it in R?

Dear Prof. Ripley

Actually, I did not (Sorry for incorrect reporting first time). I have now
tested it, and it is an R bug.

Sincerely
Harald Fekjaer
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Harald Fekjr                 |   E-mail:   harald.fekjar@basalmed.uio.no
Researcher                    |   Phone:    (+047) 22 85 10 76
University of Oslo, Norway    |   Homepage: http://www.uio.no/~hfe/
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 18:27:07 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 8 Mar 2001 19:27:07 +0100 (MET)
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <200103081827.TAA12196@pubhealth.ku.dk>

If a function needs to be passed as an argument to another function,
default arguments to the function being passed are lost.  Consider this
example:

fun1 <- function(x, A=c("power","constant")) {
  arg <- match.arg(A)
  cat(paste("A is:",paste(A,collapse=", "),"\narg is:",arg,"\n"))
  cat("formals:\n")
  print(formals())
  2*x
}

topfun <- function(x, Fun=fun1) {
  cat("\n>>>Called as fun1:\n")
  fun1(x)
  cat("\n>>>Called as Fun:\n")
  Fun(x,A="power")
  Fun2 <- fun1
  cat("\n>>>Called as Fun2:\n")
  Fun2(x,A="power")
}
cat("\n>>>>>>>>>>fun1\n")
print(topfun(2,fun1))

When run, this gives:

> source("C:/home/tasks/OPModels/TestBugs/demo.R")

>>>>>>>>>>fun1

>>>Called as fun1:
A is: power, constant
arg is: power
formals:
$x


$A
c("power", "constant")


>>>Called as Fun:
A is: power
arg is:
formals:
NULL

>>>Called as Fun2:
A is: power
arg is: power
formals:
$x


$A
c("power", "constant")

[1] 4
>

I included the assignment within topfun() because I originally thought the problem would apply to any assignment of a function as a value.
This is apparently incorrect.  I've sent this to r-bugs because it seems that this behavior would surely not have been intended.

I am running (actually, I'm still normally running 1.2.1, but I figured if I didn't check on 1.2.2, I'd find out this had been fixed :>)

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Windows 9x 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 18:43:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 19:43:56 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Thu, 8 Mar 2001 19:27:07 +0100 (MET)"
References: <200103081827.TAA12196@pubhealth.ku.dk>
Message-ID: <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting... 

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 19:30:33 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 08 Mar 2001 14:30:33 -0500
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <OFBFFAD3E9.4E8693DA-ON85256A09.006ADE75@rtp.epa.gov>


So, in my toy example, when I add the line Fun <- Fun after the first
invocation of Fun(), Fun finds the default args when invoked a second time.
That gives me an easy work around for the real problem where I encountered
this.  Thanks.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                  
                    Peter Dalgaard                                                                                
                    BSA                     To:     Woodrow Setzer/RTP/USEPA/US@EPA                               
                    <p.dalgaard@bios        cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk               
                    tat.ku.dk>              Subject:     Re: [Rd] surprising behavior of match.arg() (PR#872)     
                    Sent by:                                                                                      
                    pd@pubhealth.ku.                                                                              
                    dk                                                                                            
                                                                                                                  
                                                                                                                  
                    03/08/01 01:43                                                                                
                    PM                                                                                            
                                                                                                                  
                                                                                                                  




Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting...

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Mar  8 21:30:07 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 8 Mar 2001 22:30:07 +0100 (MET)
Subject: [Rd] long formulas in terms() (PR#873)
Message-ID: <200103082130.WAA13002@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.2.2
OS: Windows 95
Submission from: (NULL) (142.52.81.1)



I need to use the "terms()" function to decompose a formula.
The function seems to work for small formulas, but not for long formulas.

##############################
#The following works!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4)) ~ precip*I(Tmax^2)
terms(form)

#But enlarging the left-hand side of the formula causes an error!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
terms(form) # ERROR
##############################

I noticed that when the left-hand side term of the formula is
too large to be written on one line, an error occurs in terms().
However, increasing the line width by "options(width=200)" did
not solve the problem.

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.2            
year     2001           
month    02             
day      26             
language R              


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 21:51:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 22:51:50 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Peter Dalgaard BSA's message of "08 Mar 2001 19:43:56 +0100"
References: <200103081827.TAA12196@pubhealth.ku.dk> <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21ys8gc95.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > If a function needs to be passed as an argument to another function,
> > default arguments to the function being passed are lost.  Consider this
> > example:
> 
> Interesting... 
> 
> Apparently, sys.function() is still a promise after the  function has
> been called (and the promise obviously forced).
> Minimal example of same effect:
> 
> > f<-function()sys.function()
> > f()
> function()sys.function()
> > g<-delay(f)
> > g()
> <promise: 0x8b248b4>
> > g<-g
> > g()
> function()sys.function()

Fixed for 1.3.0.

(Not sure I'm happy with this yet. R_sysfunction works on the *call*
of the function, and if the head of the call is a LANGSXP - as in
h(x)(y) - it gets evaluated a second time, and I don't think that
is guaranteed to give the same function as the first time! We really
ought to keep a pointer to the function itself around too.)

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Mar  8 21:57:41 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 8 Mar 2001 13:57:41 -0800 (PST)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103081351320.141870-100000@homer10.u.washington.edu>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
<snip>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

The problem is in fixFormulaObject in terms.formula(). It uses deparse()
on the lhs of the formula.

A work-around is to change the line near the top of fixFormulaObject in
terms.formula from
	else deparse(form[[2]])
 to
	else deparse(form[[2]],width.cutoff=200)

but this may not be the final solution -- we should have something without
a width limit

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  9 07:13:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 9 Mar 2001 07:13:56 +0000 (GMT)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103090706010.8948-100000@auk.stats>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
> ##############################
> #The following works!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4)) ~ precip*I(Tmax^2)
> terms(form)
>
> #But enlarging the left-hand side of the formula causes an error!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
> terms(form) # ERROR
> ##############################
>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

You can edit fixFormulaObject in terms.formula and set

deparse(form[[2]], width.cutoff = 500)

This still has a limit, but a much higher one.  Or write a shorter lhs?

deparse has been changed since that function was written, I believe,
but both a long time ago.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  9 09:08:38 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 9 Mar 2001 10:08:38 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103090908.KAA16434@pubhealth.ku.dk>

>>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:

    harald> Full_Name: Harald Fekjr
    harald> Version: 1.22
    harald> OS: Windows 
    harald> Submission from: (NULL) (158.36.132.220)


    harald> Dear R developers

    harald> Is this done with purpose...:

    harald> In R I get:
    harald> ---
    >> as.numeric(" ")
    harald> [1] 0 

    >> as.integer(" ")
    harald> [1] 0 
    harald> ---

    harald> While in the same in S-PLUS returns:
    harald> ---
    >> as.numeric(" ")
    harald> [1] NA 

    >> as.integer(" ")
    harald> [1] NA
    harald> ---

    harald> For my applications, the later (S-PLUS) definitely makes most
    harald> sense, but you my have some good reasons for your choose?
    harald> (Anyway it is quite dangers with these differences when porting
    harald> applications).

Note that it's also for other ``blank like'' strings :

 > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
       \t \n \r 
  0  0  0  0  0 

Without having the time currently to investigate your suggested change,
I tend to agree.


    harald> Thanks for a wonderful program!

you're welcome!

    harald> Harald Fekjr, Oslo, Norway

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  9 09:15:50 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 9 Mar 2001 10:15:50 +0100
Subject: [Rd] bug.report/mail
In-Reply-To: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
Message-ID: <15016.40774.376518.961962@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> One of the functions I would like to clean out of my syskern
    PaulG> package is a program to send mail. This is a common feature
    PaulG> other programs (e.g. bug.report) may use so I would like it to
    PaulG> be included in R/base. I will volunteer to do this as it looks
    PaulG> like a fairly straightforward dissection of bug.report but I
    PaulG> have some questions:

    PaulG> Has anyone done this already?

yes,  bug.report()  *does* all this already (when system resources are
available), using getOption("mailer") and/or argument  `method = '

    PaulG> Is "mail" a good name or would something like "Sys.mail" be
    PaulG> better?


I think what we want is modularizing  bug.report()
by having it call a new  Sys.mail()
function passing it the subject, from & body  (and may be more).

A good idea!

    PaulG> Should I generate a diff relative to something or just files for
    PaulG> src/library/base/R?

I think useful would be to just modularize  bug.report() as indicated above

    PaulG> Paul Gilbert

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 09:46:15 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 10:46:15 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Fri, 9 Mar 2001 10:08:38 +0100 (MET)"
References: <200103090908.KAA16434@pubhealth.ku.dk>
Message-ID: <x2itljl1g8.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:
> 
>     harald> In R I get:
>     harald> ---
>     >> as.numeric(" ")
>     harald> [1] 0 
...
> 
> Note that it's also for other ``blank like'' strings :
> 
>  > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
>        \t \n \r 
>   0  0  0  0  0 
> 
> Without having the time currently to investigate your suggested change,
> I tend to agree.

We fixed the same problem in scan() recently. Particularly insidious
since SPSS codes missing with a single blank when exporting delimited
files...

The problem there was that we used strtod which returns 0 for
nonnumerics (what else can it do?) and then checked the rest of the
field with isBlankString - which was true of course. I'll have a look
and see if as.numeric is similar.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 10:29:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 11:29:14 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: Peter Dalgaard BSA's message of "09 Mar 2001 10:46:15 +0100"
References: <200103090908.KAA16434@pubhealth.ku.dk> <x2itljl1g8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2g0gnkzgl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The problem there was that we used strtod which returns 0 for
> nonnumerics (what else can it do?) and then checked the rest of the
> field with isBlankString - which was true of course. I'll have a look
> and see if as.numeric is similar.

It was. Fixed and committed for 1.3. (as.integer and as.complex too)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  9 14:47:08 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Mar 2001 09:47:08 -0500
Subject: [Rd] bug.report/mail
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca> <15016.40774.376518.961962@gargle.gargle.HOWL>
Message-ID: <3AA8ECEC.FE45E857@bank-banque-canada.ca>

>I think what we want is modularizing  bug.report()
>by having it call a new  Sys.mail()
>function passing it the subject, from & body  (and may be more).

Yes, that is exactly what I meant. Sorry if it wasn't clear.

Is the name Sys.mail() preferred to simply  mail()?

Should I go ahead or would someone else prefer to do it? (It looks trivial.)

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 10 01:24:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 10 Mar 2001 02:24:18 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103100124.CAA25085@pubhealth.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> Hello developers and users:
> 
> My system fails (the computer freezes) when I use the ncp  parameter,
> with the lower.tail=FALSE option in the qchisq function.
> 
> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

Yup, that's a bug. We have in pnchisq.c

48          for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) <
p; ux *= 2);
49          for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) >
p; lx *= 0.5);

but if we look at the opposite tail, we also need to reverse that
logic since pnchisq(x,...) is now decreasing in x. Otherwise the
algorithm will get stuck in one of the for loops.

(Mailed to r-bugs)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 13 09:43:54 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Mar 2001 10:43:54 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103130943.KAA16613@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> Kenneth Cabrera <krcabrer@epm.net.co> writes:
    >> Hello developers and users:
    >> 
    >> My system fails (the computer freezes) when I use the ncp  parameter,
    >> with the lower.tail=FALSE option in the qchisq function.
    >> 
    >> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

    PD> Yup, that's a bug. We have in pnchisq.c

    PD> 48   for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) < p; 
    PD> 	ux *= 2);
    PD> 49   for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) > p;
    PD> 	lx *= 0.5);

    PD> but if we look at the opposite tail, we also need to reverse that
    PD> logic since pnchisq(x,...) is now decreasing in x. Otherwise the
    PD> algorithm will get stuck in one of the for loops.

Now fixed for R-devel (to become 1.3.0), together with the "FIXME" comment
a few lines above.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From I.Wilson@maths.abdn.ac.uk  Tue Mar 13 12:58:58 2001
From: I.Wilson@maths.abdn.ac.uk (I.Wilson@maths.abdn.ac.uk)
Date: Tue, 13 Mar 2001 13:58:58 +0100 (MET)
Subject: [Rd] (PR#876)
Message-ID: <200103131258.NAA20109@pubhealth.ku.dk>

png files do not appear to work properly on the distributed
version for windows.

this was not a problem for rw1021.

 > png()
 > plot(rnorm(100),rnorm(100))
 > dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible


Ian Wilson


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.2
  year = 2001
  month = 02
  day = 26
  language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
  .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 13:28:33 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 14:28:33 +0100
Subject: [Rd] (PR#876)
In-Reply-To: I.Wilson@maths.abdn.ac.uk's message of "Tue, 13 Mar 2001 13:58:58 +0100 (MET)"
References: <200103131258.NAA20109@pubhealth.ku.dk>
Message-ID: <x21ys1ssqm.fsf@blueberry.kubism.ku.dk>

I.Wilson@maths.abdn.ac.uk writes:

> png files do not appear to work properly on the distributed
> version for windows.
> 
> this was not a problem for rw1021.
> 
>  > png()
>  > plot(rnorm(100),rnorm(100))
>  > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible

See PR#868 (recompile from sources or use Rbitmap.dll from 1.2.1)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Tue Mar 13 21:26:23 2001
From: Martin.Schlather@uni-bayreuth.de (Martin Schlather)
Date: Tue, 13 Mar 2001 22:26:23 +0100
Subject: [Rd] .C-calls
Message-ID: <3AAE907F.525541C9@uni-bayreuth.de>


Dear all,

(sorry I got the wrong button for subscribing a minute ago)

At the moment I'm writing on a package for random field
simulation that I'd like to make publically availabe
in near future.
To this end I've asked Martin Maechler to have a look
at my R-code. He was very surprised about how
I perform the ".C"-calls, and encouraged me to
make this request for comments.

My calls typically look like
    result <- double(10000)
    .C("test",as.double(inputparameter),result,DUP=FALSE)
    return(result)

In order to avoid sending C-code, I'd like to
give the following example that uses `chol' of
the "base"-package of R. The fact that it is a
.Fortran-call instead of a .C-call shouldn't
matter.                                        

## creating a positive definite matrix of size 100x100
lc <- as.integer(100);
cov.matrix <- matrix(runif(lc * lc), nrow=lc)
cov.matrix <- t(cov.matrix) %*% cov.matrix

## the usual way of getting the Cholesky decomposition
c0 <- chol(cov.matrix)

## direct call of the Fortran routine; the code is
## taken from the R-code of `chol'
dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
               v = matrix(0, nr = lc, nc = lc), info = integer(1),
               DUP = FALSE, PACKAGE = "base")
c1 <- dummy1$v

## The third way.
## The code seems working very well... but?
dummy2 <- double(lc * lc)
.Fortran("chol", cov.matrix, lc, lc,
         dummy2, info = integer(1),
         DUP = FALSE, PACKAGE = "base")
c2 <- matrix(dummy2, lc, lc)

sum(abs(c0-c2)) # == 0

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 21:32:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 22:32:17 +0100
Subject: [Rd] .C-calls
In-Reply-To: Martin Schlather's message of "Tue, 13 Mar 2001 22:26:23 +0100"
References: <3AAE907F.525541C9@uni-bayreuth.de>
Message-ID: <x2snkhicda.fsf@blueberry.kubism.ku.dk>

Martin Schlather <Martin.Schlather@uni-bayreuth.de> writes:

> ## the usual way of getting the Cholesky decomposition
> c0 <- chol(cov.matrix)
> 
> ## direct call of the Fortran routine; the code is
> ## taken from the R-code of `chol'
> dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
>                v = matrix(0, nr = lc, nc = lc), info = integer(1),
>                DUP = FALSE, PACKAGE = "base")
> c1 <- dummy1$v
> 
> ## The third way.
> ## The code seems working very well... but?
> dummy2 <- double(lc * lc)
> .Fortran("chol", cov.matrix, lc, lc,
>          dummy2, info = integer(1),
>          DUP = FALSE, PACKAGE = "base")
> c2 <- matrix(dummy2, lc, lc)
> 
> sum(abs(c0-c2)) # == 0

Well... As far as I can see, method 3 should work as long as DUP=FALSE
is used and break if DUP=TRUE. Some might prefer to consider the DUP
argument as an optimization hint and not something that should allow a
completely different calling sequence, but apart from that I cannot
see anything wrong with it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Wed Mar 14 15:41:24 2001
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Wed, 14 Mar 2001 16:41:24 +0100 (MET)
Subject: [Rd] segmentation fault of unknown cause (PR#877)
Message-ID: <200103141541.QAA05231@pubhealth.ku.dk>


Dear all,

Paulo Ribeiro, p.ribeiro@lancaster.ac.uk, and myself noticed 
that R sometimes breaks down with a segmentation fault of
(at least for us) unknown course. (We've read #411 and #671 
in the bug report on "optim" -- the problem described
there sounds familiar; but we have not found any hint on a 
segmentation fault.)

Please find at the very end of this email the file 
strange.R and on 
  http://www.geo.uni-bayreuth.de/~martin/R/strange.tgz
an archiv of three files, namely strange.R, cov.data, 
and rf.data. 

The file strange.R uses only mva as library; it does
not contain any Fortran or C call.

On three machines in Lancaster and on my three
computers (2x R-1.2.2, 1x R-1.2.1) we get 
`segmentation fault' for
  /usr/bin/R --vanilla < strange.R

Furthermore, I get a segmentation fault for
  /usr/bin/R
  source("strange.R")
but not Paulo at Lancaster, neither Martin Maechler on
his preversion R-1.3.0 (I had asked Martin before Paulo
found out that `usr/bin/R --vanilla < strange.R' breaks
on his (and mine) computers.)

We would be happy for any comment on whether the
segmentation fault appears anywhere else (and why). 
We noticed that R does not fail if /usr/bin/R is called 
with other or further options but `--vanilla' (Not 
extensively tested yet.)

Cheers,
Martin


PS: For example, a computer in Lancaster (all RedHat) and 
    one here (all SuSe) are both installed by compiling the
    source code of R-1.2.2 and have the specification
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R   
             
PPS: If the file strange.R works well then it stops with an 
     error message different from "segmentation fault".

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

#### the comments in the file strange.R give a report on what happens
#### additionally on all *my* computers -- not tested elsewhere yet


######################################################
############         strange.R         ###############
######################################################

# calling R (v1.2.1 or v1.2.2) without options and
# then `source("strange.R")' causes a segmentation fault

# Note that before failure MLEtarget is called with
# variab=c(1.0501141215486309848e-267, 1.0000000000000000208e-03)
# a value that is outside the given bounds, see lb and optim below
# (This is something that appears quite frequently, independently (?)
# of the segmentation fault I'm interested here!)

# The segmentation fault does not appear if R is called by
#       /usr/bin/R --vsize 20M --nsize 250K --no-save
# (The algorithm will fail with "fn(par, ...) : subscript out of bounds"
#  then, what is OK since the matrix `cm' does not have enough 
#  components)

library(mva)

"mleRF" <-
function (data, coord) 
{
    ENVIR <- environment()
    lc <- nrow(coord)

    ## if you comment out either line, the algorithm
    ## returns the correct error message
    ## "fn(par, ...) : subscript out of bounds"
    distances <- as.double(dist(coord))
    distances <- dist(coord)

    ## lower und upper bounds for optim
    lb <- c(0.00235992765321886, 0.2)
    ub <- c(39.6649897977748, 10)
    
    assign("COUNTER", 1, envir = ENVIR)
    CoVariate <- matrix(1, ncol = 1, nrow = lc)
    MLEtarget <- function(variab) {
        print(variab, dig = 20)
        
        ## the covariance matrix is calculated by an own C programme;
        ## therefore the results have been stored in `cm' to exclude
        ## my programme as course of the trouble
        cov.matrix <- cm[, COUNTER]
        cov.matrix <- try(chol(matrix(cov.matrix, ncol = lc)))
        ## if you replace the above two lines by
        ##    cov.matrix <- matrix(cm[, COUNTER], ncol = lc)
        ##    cov.matrix <- try(chol(cov.matrix))
        ## segmentation fault vanishes, and `optim' returns
        ## "Error in optim(...:  bad value"
        
        assign("COUNTER", COUNTER + 1, envir = ENVIR)
        if (is.numeric(cov.matrix)) {
            if (any(diag(cov.matrix) < 0)) {
                stop("chol det<0!")
            }
        }
        else {
            return(1e+30)
        }
        logdet <- 2 * sum(log(diag(cov.matrix)))
        cov.matrix <- chol2inv(cov.matrix)
        dummy <- t(CoVariate) %*% cov.matrix
        m <- (solve(dummy %*% CoVariate) %*% (dummy %*% data))
        V <- data - CoVariate %*% m
        quadratic <- (t(V) %*% cov.matrix %*% V)
        res <- logdet + lc * log(quadratic)
        print(as.vector(res), dig = 20)
        return(res)
    }
    ## if you outcomment the following `for'-loop
    ## the segmenatation fault vanishes, and optim returns
    ## "Error in optim(...:  bad value"
    for (W in 1:3) {
        mlet <- MLEtarget(c(1,1))
    }
    ## if the `for'-loop is active, the following line
    ## is not necessary as COUNTER has already the value 4
    assign("COUNTER", 4, envir = ENVIR)    
    variab <- c(0.00235992765321890, 2.66384186745229)
    ## if you outcomment the following line, the algorithm
    ## returns the correct error message "fn ... out of bounds"
    distances <- as.double(distances) 
    variab <- try(optim(variab, MLEtarget, method = "L-BFGS-B", 
        lower = lb, upper = ub)$par)
    print("END")
}



## the random field given on a grid by x,y and f is
## calculated by an own C-programme. Therefore the results
## have been stored to exclude my programme as course of
## the trouble
#save(file="rf.data",x,y,f,.Random.seed)
load("rf.data")
  
## see `MLEtarget' for comments on `cm'
#save(file="cov.data",cm)
load("cov.data");

mleRF(coord=cbind(x,y),data=f)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ians@connexus.net.au  Fri Mar 16 19:58:06 2001
From: ians@connexus.net.au (ians@connexus.net.au)
Date: Fri, 16 Mar 2001 20:58:06 +0100 (MET)
Subject: [Rd] sorry (PR#878)
Message-ID: <200103161958.UAA00958@pubhealth.ku.dk>

uhm???

i looked but am too lazy...  wot th fuk iz R

pleez send relo. shit to chellam@bigpond.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 22:56:08 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 14:56:08 -0800
Subject: No subject
Message-ID: <200103172256.OAA12160@pine.frazmtn.com>

Without too much difficulty I made an R 1.2.2 for Mac OS X (final 
release candidate)
using X11R6 and the dlopen shimlibs (which interface to the Mach-O dyld
system).  I am still working on the tcl/tk part, and I don't have an X11 
browser
yet for the html help, but the nice thing is that certainly the dynamic 
loading
and the graphics work fine.

Of course it's X11, so it looks much worse than the classic Mac OS 
version
that Stefano did, and a Carbon version  would be infinitely more useful,
but  this was quick and painless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 23:56:30 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 15:56:30 -0800
Subject: [Rd] R 1.2.2 on Mac OS X with X11/tcltk
Message-ID: <200103172356.PAA19805@pine.frazmtn.com>

The tcl/tk part now also works -- of course coming from Aqua/Quartz and 
then
being sucked into X11 and/or  Tcl/Tk is quite traumatic.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sun Mar 18 09:32:12 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Annette Molinaro-Clark)
Date: Sun, 18 Mar 2001 10:32:12 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
Message-ID: <15028.32924.553285.477996@gargle.gargle.HOWL>

This was addressed to the wrong place ...

------- start of forwarded message -------
From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
To: maechler@R-project.org
Subject: R-Installation
Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

Hi -
I'm trying to install R to a supercomputer which has a Fortran 77
compiler; however,
when i do ./configure I receive this error . . .


checking for g77... /usr/local/gnu/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... no
configure: error: installation or configuration problem: Fortran 77
compiler cannot create 
executables.


Can you tell me what I need to do?
Thanks,
Annette
------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Mar 19 07:07:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 19 Mar 2001 08:07:00 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
In-Reply-To: <15028.32924.553285.477996@gargle.gargle.HOWL>
References: <15028.32924.553285.477996@gargle.gargle.HOWL>
Message-ID: <15029.45076.44960.436261@mithrandir.hornik.net>

>>>>> Annette Molinaro-Clark writes:

> This was addressed to the wrong place ...
> ------- start of forwarded message -------
> From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
> To: maechler@R-project.org
> Subject: R-Installation
> Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

> Hi -
> I'm trying to install R to a supercomputer which has a Fortran 77
> compiler; however,
> when i do ./configure I receive this error . . .


> checking for g77... /usr/local/gnu/bin/g77
> checking whether the Fortran 77 compiler (g77  ) works... no
> configure: error: installation or configuration problem: Fortran 77
> compiler cannot create 
> executables.


> Can you tell me what I need to do?

Can you have a look at config.log to see what the problem is?

[What happens if you try using the native FORTRAN compiler on your
system?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 15:45:52 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 10:45:52 -0500
Subject: [Rd] DUP=T/F
Message-ID: <3AB629B0.868D2008@bank-banque-canada.ca>

In some tests I am getting a difference in the 7th or 8th significant digit depending
on whether I set DUP=T or DUP=F in the .Fortran call below. While this is not a huge
error it is bigger than I would expect and may be a symptom of another problem. Any
comments or suggestions? (R1.2.2 on Solaris.)

Paul Gilbert
_______

genD.ARMA <- function(model, data, d=0.01, eps=1e-4, r=6, warn=F){
   n <-length(c(output.data(data))) # this has the same length as the residual
   sampleT <-periods(data)
   ps <-dim(model$A)[3]
      ms <-dim(model$C)[3]
      ns <-ps  # this could be 1 except z0 is used for TREND and F, Q and R for
scratch
     loc   <- match(model$location,       c("A","B","C","t"))
     cloc  <- match(model$const.location, c("A","B","C","t"))
   if(is.null(ms))
     {ms<-0
      C<-array(0,c(1,ns,1)) # can't call compiled with 0 length arrays
      u <- matrix(0,sampleT,1)
      G <- matrix(0,ns,1)
     }
   else
     {C <-model$C
      u <- input.data(data)
      G <- matrix(0,ns,ms)
     }
   x <-model$parms
   h0 <- abs(d*x)+eps*(x==0.0)
   D <- matrix(1e20, n,(length(x)*(length(x) + 3))/2)
   Daprox <-  matrix(0,n,r)
   Hdiag  <-  matrix(0,n,length(x))
   Haprox <-  matrix(0,n,r)
   storage.mode(D)     <-"double"
   storage.mode(Daprox)<-"double"
   storage.mode(Haprox)<-"double"
   storage.mode(Hdiag )<-"double"
   D <-.Fortran("gend",
            D=D,
            as.integer(is.ARMA(model)),
            p=as.integer(length(x)),
            x=as.double(x),
            as.double(h0),
            as.integer(n),    #6
            as.integer((length(x)*(length(x)+ 3))/2), #cols of D
            f0=double(n),
            r=as.integer(r),
            #                       work space for GEND
            Haprox=Haprox,     #10
            Hdiag=Hdiag,
            Daprox=Daprox,
            x=double(length(x)),
            delta=double(length(x)),
            f1=double(n),
            f2=double(n),
            #                   work space for ARMAp / KFp
         #     cov=matrix(1e20,ps,ps),
            # pred is f0,f1,f2 passed above
            as.integer(ms),     #  input dimension m  #17
            as.integer(ps),     # output dimension p
            as.integer(sampleT),
            as.integer(periods(data)),
            u=as.double(u),
            y=as.double(output.data(data)),
            as.integer(loc),   #as.character(model$location), #23
            as.integer(model$i),
            as.integer(model$j),
            as.integer(length(model$const)),
            const=as.double(model$const),
            as.integer(cloc),  #as.character(model$const.location),
            as.integer(model$const.i ),
            as.integer(model$const.j),
        #  for ARMA models:
            as.integer(model$l),       #31
            as.integer(model$const.l),
            as.integer( dim(model$A)[1]),#1+order of A
            as.integer( dim(model$B)[1]),#1+order of B
            as.integer( dim(C)[1]),#1+order of C
            A=model$A,
            B=model$B,
            C=C,
        #  for state space models:
            as.integer(ns),  # state dim.  #39
        #    state=as.double(matrix(0,sampleT,ns)),
        #    track=as.double(array(0,c(sampleT,ns,ns))),
            z0=as.double(rep(0,ps)), # note: this is TREND for ARMA
            P0=as.double(diag(0,ps)),
            F=as.double(matrix(0,ns,ns)),
            G=as.double(G),
            H=as.double(matrix(0,ps,ns)),
            K=as.double(matrix(0,ns,ps)),
            Q=as.double(matrix(0,ns,ns)),
            R=as.double(matrix(0,ps,ps)),
            gain=as.integer(F),   #48
            DUP=T)[c("D","p","f0", "x", "r")]
   D$d   <- d
   D$eps <- eps
   D$f0 <- l(model, data, result="pred") - c(output.data(data))
   invisible(classed(D,"Darray")) #constructor
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Mon Mar 19 20:16:37 2001
From: hfe@math.uio.no (Harald Fekjaer)
Date: Mon, 19 Mar 2001 21:16:37 +0100 (MET)
Subject: [Rd] Possible improvement of "read.fwf"
Message-ID: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>

Dear R developers

I have little improvement to "R base", that I hope you will include in the official version.

Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
http://www.uio.no/~hfe/midl/R/readfwf-source.html

You will find my suggestion to improve the "read.fwf".
(New code is marked with red colour. Pure code is avilble at:
http://www.uio.no/~hfe/midl/R/readfwf.R)

And you will find the new documentation on:
http://www.uio.no/~hfe/midl/R/readfwf.html

Hope you will appreciate this small improvement.

Yours sincerely
Harald Fekjr, <harald.fekjar@basalmed.uio.no>
---
University of Oslo, Norway & Norwegian cancer registry

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Mon Mar 19 21:19:39 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Mon, 19 Mar 2001 16:19:39 -0500
Subject: [Rd] generic database access methods
Message-ID: <3AB677EB.9030406@StonyBrook.Edu>

I've been putting together a package that defined generic methods for 
database access.  The packages is called "Rdbi."  It borrows as much as 
possible from existing database packages / proposals.  I'd like to start 
a discussion about the proposed interface.  Here's what I've come up 
with so far:

#
# Rdbi: connectionMethods.R
#

dbConnect <- function(dbObj, ...) UseMethod("dbConnect")
#
# dbObj should be generated by an implementation defined function,
# e.g., RPgSQL(), which returns a object with an approprite class
# name, e.g., "PostgreSQL" or "MySQL".  The implementation then
# provides a method that actually opens the connection.
#

dbConnect.default <- function(dbObj, ...) stop("Invalid database class")
#
# User passed something other than a defined database class
#

dbDisconnect <- function(conn) UseMethod("dbDisconnect")
#
# Close connection and free resources
#

dbDisconnect.default <- function(conn) stop("Invalid connection object")

dbReconnect <- function(conn) UseMethod("dbReconnect")
#
# The conn object should store the options passed to dbConnect so that
# it can reestablish the connection.
#

dbReconnect.default <- function(conn) stop("Invalid connection object")
#
# User passed something other than a defined connection class
#

dbConnectionOK <- function(conn) UseMethod("dbConnectionOK")
#
# Returns TRUE if the connection object is valid and the connection
# can be used to communicate with the database backend.
#

dbConnectionOK.default <- function(conn) FALSE
#
# User passed something other than a defined connection class
#


#
# Rdbi: ioMethods.R
#

dbSendQuery <- function(conn, ...) UseMethod("dbSendQuery")
#
# This function submits a query string to the backend.  If the query
# generates any results, they should be returned in a data frame;
# otherwise the function returns NULL.  Printing error messgages is
# left to the implementation, but this function should not issue a
# call to error() or stop().  Error messages may be retrievable from
# the connection object depending on implementation.
#

dbSendQuery.default <- function(conn, ...) stop("Invalid connection object")
#
# This means that the method was called on something other than a
# connection object.
#

dbListTables <- function(conn, ...) UseMethod("dbListTables")
#
# Output a list of table names associated with the connection object.
# Output should look like output from ls().
#

dbListTables.default <- function(conn, ...) stop("Invalid connection 
object")

dbReadTable <- function(conn, ...) UseMethod("dbReadTable")
#
# Analog of the read.table() function.  Returns a data frame.  Some
# facility for converting DB types to R types is helpfull.  Generally,
# this will just pass a "select * from mytable" to dbSendQuery() which
# returns the data frame.
#

dbReadTable.default <- function(conn, ...) stop("Invalid connection object")

dbWriteTable <- function(conn, ...) UseMethod("dbWriteTable")
#
# Analog of write.table().  It should assemble input into a data frame
# and write the frame into a table in database.
#

dbWriteTable.default <- function(conn, ...) stop("Invalid connection 
object")


T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chyihung.hsu@pharma.Novartis.com  Mon Mar 19 21:52:04 2001
From: chyihung.hsu@pharma.Novartis.com (chyihung.hsu@pharma.Novartis.com)
Date: Mon, 19 Mar 2001 22:52:04 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103192152.WAA19583@pubhealth.ku.dk>

Dear R Development Team,

I have encountered the following difficulty in using the function polyroot
under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
provided example, the non-zero root of c(0,0,0,1) depends on the results of
the previous call of polyroot.

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
>

Thank you for your attention.

Best regards,

Chyi-Hung Hsu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 22:12:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 17:12:30 -0500
Subject: [Rd] A limitation for polyroot ? (PR#880)
References: <200103192152.WAA19583@pubhealth.ku.dk>
Message-ID: <3AB6844E.41ECE58E@bank-banque-canada.ca>

>Dear R Development Team,

I think most of the core team is at a conference,  but I seem to recall that this
problem was fixed in 1.2.2. You should probably upgrade. Below is what I get.

Paul Gilbert
_____

R : Copyright 2001, The R Development Core Team
Version 1.2.2  (2001-02-26)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 11:52:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Mar 2001 12:52:26 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103201152.MAA25198@pubhealth.ku.dk>

On Mon, 19 Mar 2001 chyihung.hsu@pharma.Novartis.com wrote:

> Dear R Development Team,
>
> I have encountered the following difficulty in using the function polyroot
> under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
> provided example, the non-zero root of c(0,0,0,1) depends on the results of
> the previous call of polyroot.

This is AFAIK already solved in 1.2.2.  Please upgrade, at least that
Linux version ....

>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > polyroot(c(6,-5,1))
> [1] 2+1.615587e-27i 3-1.615587e-27i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> > polyroot(c(4,-4,1))
> [1] 2+1.110223e-16i 2-1.110223e-16i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
> >
>
> Thank you for your attention.
>
> Best regards,
>
> Chyi-Hung Hsu
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 12:42:01 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 20 Mar 2001 12:42:01 +0000 (GMT)
Subject: [Rd] Possible improvement of "read.fwf"
In-Reply-To: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>
Message-ID: <Pine.GSO.4.31.0103201241250.3467-100000@toucan.stats>

This has been far down my TODO list with connections, so many thanks,
and I will take a look for 1.3.0.

Brian


On Mon, 19 Mar 2001, Harald Fekjaer wrote:

> Dear R developers
>
> I have little improvement to "R base", that I hope you will include in the official version.
>
> Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
> http://www.uio.no/~hfe/midl/R/readfwf-source.html
>
> You will find my suggestion to improve the "read.fwf".
> (New code is marked with red colour. Pure code is avilble at:
> http://www.uio.no/~hfe/midl/R/readfwf.R)
>
> And you will find the new documentation on:
> http://www.uio.no/~hfe/midl/R/readfwf.html
>
> Hope you will appreciate this small improvement.
>
> Yours sincerely
> Harald Fekjr, <harald.fekjar@basalmed.uio.no>
> ---
> University of Oslo, Norway & Norwegian cancer registry
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From marketers@toyi.zzn.com  Tue Mar 20 22:14:58 2001
From: marketers@toyi.zzn.com (marketers@toyi.zzn.com)
Date: Tue, 20 Mar 2001 23:14:58 +0100 (MET)
Subject: [Rd] How  to  Have  More  Customer ?
Message-ID: <200103202214.XAA20557@stat.math.ethz.ch>


  Dear r-devel,

  we know you from below url:
  http://www.ukc.ac.uk/php/mff/netres/statlist.html
  If you don't want to receive any message again,
  please email to remove@toyi.zzn.com to
  remove your email: r-devel@stat.math.ethz.ch
   

  **************       How to         ***************

  Have More Customer and Competition?

  **************    In Internet Time  ***************
 
  Answer is:             

       Email Spider Easy 
       ----Targeted Email Address Extract Software.
           http://www.emailspidereasy.com

      
        Key Features: 
        1 Search and Spider from a starting url such 
            as web url, search engine, message 
            board,  newsgroup to  extract bulk email 
            addresses and Url Addresses in pair. 

        2 Integrate with 18 top search engines
           such as Yahoo, Google, Altavista, AOL, 
           MSN, Lycos,Hotbot, Go.

        3 Search speed is very fast. 
           Allow up to 500 threads to search and 
           extract emails  simultaneously.
 
        4 Both Web and Url are extracted.

           For more info and free test ,
           please access url: 
           http://www.emailspidereasy.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Mar 21 06:15:04 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103210615.HAA12158@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 879 *
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Sun, 18 Mar 2001 07:45:13 -0500 (EST)
--precedence of %% appears to be not as documented
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 869 *
Subject:  inconsistent results when calling functions with other func
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 8 Mar 2001 18:26:35 +1100 
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 875 *
Subject: Re: [R] Bug in qchisq?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 10 Mar 2001 02:26:11 +0100

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 880 *
Subject: A limitation for polyroot ?
From: chyihung.hsu@pharma.Novartis.com
Date: Mon, 19 Mar 2001 16:45:59 -0500
* PR# 877 *
Subject: segmentation fault of unknown cause
From: Martin Schlather <Martin.Schlather@uni-bayreuth.de>
Date: Wed, 14 Mar 2001 17:45:25 +0100
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 21 11:16:10 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 21 Mar 2001 11:16:10 +0000 (GMT)
Subject: [Rd] Suggest new outer for R-1.3
Message-ID: <Pine.GSO.4.20.0103211044220.12440-100000@laplace>

Hi everyone,

Can I suggest the following modification of outer for R-1.3, in the
interests of speed and size of calculation:

*******************************************************************

"outer" <-
function (X, Y, FUN = "*", ...) 
{
    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
    dX <- dim(X)
    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
    dY <- dim(Y)
    if (is.character(FUN) && FUN=="*") {
      robj <- as.vector(X) %*% t(as.vector(Y))
      dim(robj) <- c(dX, dY)
    } else {
      FUN <- match.fun(FUN)
      Y <- rep(Y, rep(length(X), length(Y)))
      X <- rep(X, length.out = length(Y))
      robj <- array(FUN(X, Y, ...), c(dX, dY))
    }
    ## no dimnames if both don't have ..
    if (no.nx) 
        nx <- vector("list", length(dX))
    else if (no.ny) 
        ny <- vector("list", length(dY))
    if (!(no.nx && no.ny)) 
        dimnames(robj) <- c(nx, ny)
    robj
}

"%o%" <- .Alias(outer)

*******************************************************************

In other words, branch in the default case to a simple matrix outer
product.  For R-1.1 --vanilla on sparc-sun-solaris2.7 I have

> system.time(outer(1:1000, 1:300, "*"))
Error: heap memory (6144 Kb) exhausted [needed 1171 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 0.49 0 0.49 0 0 
> system.time(new.outer(1:1000, 1:300, "*"))
[1] 0.38 0.00 0.38 0.00 0.00
> system.time(outer(1:500, 1:300, "*"))
[1] 0.47 0.00 0.47 0.00 0.00
> system.time(new.outer(1:500, 1:300, "*"))
[1] 0.25 0.00 0.25 0.00 0.00

i.e. a saving of about 50% in time.  There will be a similar speed-up in
"kronecker".

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 21 17:21:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 21 Mar 2001 18:21:55 +0100 (MET)
Subject: [Rd] Incorrect values in non-central chisq values on Linux (PR#881)
Message-ID: <200103211721.SAA10812@pubhealth.ku.dk>

On the system below

dchisq(7.2, df=2,ncp=20)
[1] 0.00804528

Solaris 2.7 gives

[1] 0.01175302

which is correct, as can be seen from

x<-seq(0,50,.1)
y<-x
for(i in 1:length(x)){
   y[i]<-dchisq(x[i],df=2,ncp=20)}

plot(x,y,typ="l")

The problem is that q in dnchisq.c can be 1, and then errorbound
should be Inf. It is on Solaris, but -105822722841527.296875 on Linux
(so it has been evaluated q to greater than one).

I am about to commit a patch for 1.2.3.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 02:26:16 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Mar 2001 18:26:16 -0800
Subject: [Rd] MacOS X (Darwin) version of R-1.2.2
Message-ID: <200103220226.SAA57875@pine.frazmtn.com>

a version of R-1.2.2 for MacOS X (more precisely, for Darwin 1.3 with
X11R6) is at

http://www.stat.ucla.edu/~deleeuw/R-1.2.2-MacOSX.tar.gz

the file should be 5161540 bytes

-- su root
-- unpack in /

and everything gets put in /usr/local/bin and /usr/local/lib

this has the standard packages, including tcltk, and it has
X11R6 support

it uses tcl/tk 8.0 from the GRASS distribution

i also have a version with gnome support, but it still needs
some work -- and it's probably nonsense anyway

of course you need to install an X server and an X browser

i have not tried this in the Public Beta, so some of you may have
to wait a couple of days

there were no big problems in porting, but of course you need
Darwin versions of X11R6, of tcl/tk, and a shim for dlopen (that
maps the usual calls to Mach-O dyld calls). because of dyld
you have to replace "-shared" when linking foo.so to
"-bundle -undefined suppress".
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 22 16:23:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 22 Mar 2001 11:23:28 -0500
Subject: [Rd] lazy evaluation and DUP=F
Message-ID: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>

I am having some difficulty understanding the implication of lazy evaluation mixed
with DUP=F in a .Fortran call.  In qr.qty from base DUP is not used as an argument so
defaults to T. I am calling qr.qty with a very large array and would like to set
DUP=F in the .Fortran call so that qr.qty would be defined as copied below. Is there
some risk that a variable used as the argument in the original calling environment
would be modified, or is there some other reason that this should not be done?

Also, I still find it surprising that I get very slightly different results in some
calculations depending on whether I have DUP=T or DUP=F in a call to some of my own
fortran. I don't think that I am reusing the arguments in anyway that would require
duplicating them, and if I were I would expect a much bigger difference in the
result? Can anyone think of an explanation?

Thanks,
Paul Gilbert
_____

qr.qty <- function (qr, y)
{
    if (!is.qr(qr))
        stop("argument is not a QR decomposition")
    n <- as.integer(nrow(qr$qr))
    p <- as.integer(ncol(qr$qr))
    k <- as.integer(qr$rank)
    ny <- as.integer(NCOL(y))
    storage.mode(y) <- "double"
    if (NROW(y) != n)
        stop("qr and y must have the same number of rows")
    qty <- if (is.matrix(y))
        matrix(double(n * ny), n, ny)
    else double(n)
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux),
        y, ny, qty = qty, PACKAGE = "base", DUP=F)$qty
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 17:36:58 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 22 Mar 2001 09:36:58 -0800
Subject: [Rd] dlcompat code for Darwin
Message-ID: <200103221737.JAA67187@pine.frazmtn.com>


--Apple-Mail-663745359-3
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

There were some requests for this.

<Attachment missing>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-663745359-3
Content-Type: multipart/mixed;
	boundary=Apple-Mail-1921440476-4


--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed

There were some requests for this.


--Apple-Mail-1921440476-4
Content-Disposition: attachment;
	filename=dlcompat.tar.gz
Content-Type: application/x-gzip;
	name=dlcompat.tar.gz;
	x-unix-mode=0644
Content-Transfer-Encoding: base64

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
Wl2ra3WtrtX1Bdf/AcxOOfAAyAAA

--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed


===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-1921440476-4--

--Apple-Mail-663745359-3--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 23 11:56:58 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 23 Mar 2001 03:56:58 -0800 (PST)
Subject: [Rd] lazy evaluation and DUP=F
In-Reply-To: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103230351590.16764-100000@homer34.u.washington.edu>

On Thu, 22 Mar 2001, Paul Gilbert wrote:

> I am having some difficulty understanding the implication of lazy
> evaluation mixed with DUP=F in a .Fortran call.  In qr.qty from base
> DUP is not used as an argument so defaults to T. I am calling qr.qty
> with a very large array and would like to set DUP=F in the .Fortran
> call so that qr.qty would be defined as copied below. Is there some
> risk that a variable used as the argument in the original calling
> environment would be modified, or is there some other reason that this
> should not be done?

I am not sure that DUP=FALSE can't change objects in the original calling
environment (this is why help(.Fortran) says that there is a risk). It's
not precisely lazy evaluation that causes the problem: if the lazy
evaluation really worked under the hood the way it appears to work there
would be no problem. The problem is that R actually calls by
reference until an object is modified. It should be fairly easy to tell by
experiment whether this can happen

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 23 15:34:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Mar 2001 16:34:11 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231534.QAA06745@pubhealth.ku.dk>

>From one of my students' simulations:

m <- matrix(1, 0, 0)  # 1 to force numeric not logical
eigen(m)

and segfault in TRED2 in src/appl/eigen.f

Easy to fix, but I wonder what else might have been overlooked?
(svd is protected).

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 23 16:43:00 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 23 Mar 2001 17:43:00 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231643.RAA07187@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> From one of my students' simulations:
    BDR> m <- matrix(1, 0, 0) # 1 to force numeric not logical eigen(m)

    BDR> and segfault in TRED2 in src/appl/eigen.f

    BDR> Easy to fix, but I wonder what else might have been overlooked?
    BDR> (svd is protected).

nothing else seems overlooked.
I've added the above matrix (as `m0') to the list of things that the
no-segfault test throughs at every function,
and there's no further segfault {after you have fixed eigen()}.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 23 16:47:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Mar 2001 11:47:23 -0500
Subject: [Rd] bug.report and wait
Message-ID: <3ABB7E1B.A1585970@bank-banque-canada.ca>

I have being looking at bug.report in an attempt to separate out a Sys.mail function.
The unix version of bug.report does not have a "wait" parameter but the Windows
version does.  I find that in Unix with my editor set to nedit I really do need a
wait parameter. This is because nedit forks a separate process and returns, so
currently unix bug.report sends the unedited stub file.

Does anyone object to bug.report having a wait parameter? Should the default be FALSE
which would replicate current behavior in Unix or TRUE which would be safer and
correspond to the Windows version?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Mar 23 19:34:56 2001
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 23 Mar 2001 20:34:56 +0100 (MET)
Subject: [Rd] cor(x,y) when is.null(y) (PR#883)
Message-ID: <200103231934.UAA07843@pubhealth.ku.dk>


Problem:
> names(my.dat)
[1] "x" "y"
> cor(my.dat$x,my.dat$y)     # desired result
[1] 0.8660254
> cor(my.dat$x,my.dat$y.NOT) # typo
[1] 1
> 

I'd prefer a warning() or stop() in that case.

Solution (??) :

*** 1,5 ****
--- 1,7 ----
  cor <- function (x, y=NULL, use="all.obs")
  {
+     if (is.null(y) && !is.null( match.call()$y ) )
+         stop("y evaluated as NULL")
      na.method <- pmatch(use, c("all.obs", "complete.obs",
"pairwise.complete.obs"))
      if(is.data.frame(x)) x <- as.matrix(x)
      if(is.data.frame(y)) y <- as.matrix(y)

then:

> cor(my.dat$x,my.dat$y.NOT)
Error in cor(my.dat$x, my.dat$y.NOT) : y evaluated as NULL
>
> cor(my.dat$x,NULL) # intended NULL still passes
[1] 1
> 
> cor(my.dat$x)      # default: arg y = NULL
[1] 1
> 

Likewise for var() and cov()


Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Mar 26 08:34:07 2001
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 26 Mar 2001 02:34:07 -0500
Subject: [Rd] Need some help for building R!
Message-ID: <3ABEF0EF.619E072F@epm.net.co>

Hello Dear R Developers and Users:

I'm trying to compile R with all the tools of the CRAN page.
I compile the R-1.2.2 version without problem.

But when I try to compile the development version 1.3.0 it
doesn't work  when I write the command:

make BUILD=MINGW32

First it shows me something like this (I think without problems):
As I make when I compile succesfuly the R-1.2.2 version:

----------------------------------------------------------------------------------------------------------------------------

mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/fixed'
zip -q bins bin/BATCH bin/INSTALL bin/REMOVE bin/Rd2dvi.sh bin/Rd2txt
bin/SHLIB bin/helpPRINT.bat
unzip -oaq bins -d  ../../..
rm -f bins.zip
echo done > fixbin
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../appl  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/appl'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/appl'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../main  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/main'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/main'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../nmath OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/nmath'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/nmath'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./graphapp
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/graphapp'
MAKE.EXE[1]: `../ga.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/graphapp'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./getline
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/getline'
MAKE.EXE[1]: `../gl.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/getline'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../extra/xdr
MAKE.EXE[1]: Entering directory `F:/R-devel/src/extra/xdr'
MAKE.EXE[1]: `../../gnuwin32/xdr.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/extra/xdr'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./math
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/math'
MAKE.EXE[1]: `../em.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/math'
------- Building R.dll from R.a malloc.o libmain.a libappl.a libmath.a
ga.a gl.a xdr.a em.a dllversion.o --------
echo LIBRARY R > R.def
echo EXPORTS >> R.def
nm R.a malloc.o libmain.a libappl.a libmath.a ga.a gl.a xdr.a em.a
dllversion.o > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> R.def
rm -f Defs
gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
-lwsock32 -lcomctl32 -lversion
-----------------------------------------------------------------------------------------------------------------------------------------

Then it stops with this error:

------------------------------------------------------------------------------------------------------------------------------------------

gcc: unrecognized option '-shared'
ld:R.def: file format not recognized; treating as linker script
ld:R.def:1: parse error
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
-------------------------------------------------------------------------------------------------------------------------------------------

What is my mistake? (Remember that the process work with the previous
version 1.2.2)

Thank you very much for you help

Kenneth Cabrera



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 26 08:58:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Mar 2001 09:58:02 +0200
Subject: [Rd] Need some help for building R!
In-Reply-To: Kenneth Cabrera's message of "Mon, 26 Mar 2001 02:34:07 -0500"
References: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <x2zoe97yid.fsf@blueberry.kubism.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
> libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
> -lwsock32 -lcomctl32 -lversion
> -----------------------------------------------------------------------------------------------------------------------------------------
> 
> Then it stops with this error:
> 
> ------------------------------------------------------------------------------------------------------------------------------------------
> 
> gcc: unrecognized option '-shared'

Hmm. Some stuff in MkRules has been changed:

--- src/gnuwin32/MkRules        2001/02/03 20:11:37     1.26.2.1
+++ src/gnuwin32/MkRules        2001/02/08 07:25:59     1.29
@@ -3,8 +3,6 @@
 
 # Alternatives CYGWIN (-mno-cygwin), MINGW32 (mingw32 gcc), CROSS (Linux)
 BUILD=MINGW32
-# Set this to YES if you use MINGW32 and gcc-2.95.2.1 or later, or cygwin-1.1.
-HAVE_SHARED=YES
 
 # Where does 'HTML Help Workshop' live? (unused if compiled HTML help is
 # not requested. Spaces allowed.)
@@ -88,16 +86,7 @@
        $(NM) $^ > Defs
        $(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $*.def
        $(RM) Defs
-ifeq ($(strip $(HAVE_SHARED)),YES)
        $(DLL) --shared $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $*.def $^ $($*-DLLLIBS) $(DLLLIBS)
-else
-       $(DLL) -mdll -Wl,--base-file,$*.b $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $^ $
...

> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
         ^^^^^^

Are you sure you are using the appropriate compiler? Looks like
support for compilers before gcc-2.95.2.1 has gone away. (The flag
looks a bit dodgy though. Isn't it normally "-shared" with a single
hyphen?) 

Anyway, Brian will know...

> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 09:02:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Mar 2001 09:02:05 +0100 (BST)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>

On Mon, 26 Mar 2001, Kenneth Cabrera wrote:

> Hello Dear R Developers and Users:
>
> I'm trying to compile R with all the tools of the CRAN page.
> I compile the R-1.2.2 version without problem.
>
> But when I try to compile the development version 1.3.0 it
> doesn't work  when I write the command:
>
> make BUILD=MINGW32
>
> First it shows me something like this (I think without problems):
> As I make when I compile succesfuly the R-1.2.2 version:

[...]

> Then it stops with this error:
>
> ------------------------------------------------------------------------------------------------------------------------------------------
>
> gcc: unrecognized option '-shared'
> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> -------------------------------------------------------------------------------------------------------------------------------------------
>
> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)

Not reading the documentation!   The file CHANGES says:

rw1030
======

No Windows-specific changes (nor are any planned).

Support for earlier compilers has been dropped: you must use a
compiler system that supports --shared and an in-memory dlltool.


So, please get the compiler system as recommended in the INSTALL file.
(Yours must be over a year old.)  There's a good reason for this: I am not
prepared to keep testing under obselete compilers like yours.

If you want to play with development versions of R you do really need to
read the documentation, and to be aware that it is an unstable version:
there is no guarantee that it will compile anywhere, let alone under
Windows (which you didn't mention: please do so).  It is very likely that
R-devel will be broken under Windows for several periods between now and
the release of 1.3.0 as new features are added.

And please do not post to both R-help and R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Mar 26 14:32:30 2001
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 26 Mar 2001 15:32:30 +0200 (MET DST)
Subject: [Rd] Problems with R CMD COMPILE within Makefile (PR#885)
Message-ID: <200103261332.PAA25104@pubhealth.ku.dk>

Dear R-developpers

This concerns a problem I posted about half a year ago on the R-help list
and to which I got some answer by Duncan Temple Lang (see below), but the
basic problem still continues. Even though I managed a workaround which is
sufficient for me Martin Maechler asked me to send a toy example of the
problem to R-bugs. So that's what I try here.

The following Makefile will not work:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	R CMD COMPILE tst.c
----------------------------------------

It results in:
----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[2]: *** No rule to make target `w'.  Stop.
make[2]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[1]: *** [tst.o] Error 2
make[1]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make: *** [tst.o] Error 2

Compilation exited abnormally with code 2 at Mon Mar 26 15:10:07
----------------------------------------

The following alternative ends in an infinite loop:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
----------------------------------------

----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[3]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[4]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
...
----------------------------------------


(My workaround consists in using R SHLIB instead of R COMPILE (which works
perfectly) and removing the files that disturb or that I don't need.)

I work under Linux. tst.c consists just of one line:

int  x() {return(1);}

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R                


Here is Duncan's answer:

>>  I took a quick look at the R COMPILE problem and it seems that there
>> are in fact two problems.  One is the problem with the attempt to
>> build a target `w'. And the other is that if that error didn't arise,
>> you would have an infinite loop.
>> 
>> Here is quick fix to your problem. Add the line
>> 
>>   include $(R_HOME)/etc/Makeconf
>> 
>> to your Makefile. Then, make will compile imageio.o with the correct flags.
>> 
>> eyore[RCompile-174]>make
>> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 
>> 
>> 
>> That should be enough to get things working.  The more detailed
>> explanation is as follows.
>> 
>> a) The rule
>> imageio.o: imageio.c
>>  	R COMPILE imageio.c
>> 
>> is executed by the first call to make.
>> The COMPILE script expands this to call
>> 
>>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o
>> 
>> At this point, this second make process sees the same rule, and does
>> the same thing. Hence, you have infinite recursion.
>> 
>> 
>> 
>> b) The problem about the target `w' is a problem resulting from the R
>> COMPILE script being called recursively from a make process.  The
>> second make process getting called via the COMPILE script is getting
>> the value of the make variable MAKEFLAG from the top-level make you
>> executed manually.  This is implicitly set to w (meaning to print
>> directory information before and after the makefile is "executed")
>> and not -w. At this point, I am not certain whether this is an
>> R oversight or a GNU make bug.


Peter

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://stat.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bwheeler@echip.com  Mon Mar 26 16:09:45 2001
From: bwheeler@echip.com (Bob Wheeler)
Date: Mon, 26 Mar 2001 10:09:45 -0500
Subject: [Rd] Need some help for building R!
References: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>
Message-ID: <3ABF5BB9.47ACA831@echip.com>

The problem traces to
http://www.stats.ox.ac.uk/pub/Rtools/, where the
1999 version (gcc-2.95.2) of the compiler is
recommended in the first paragraph under
Compilers. The second paragraph provides zip files
for gcc-2.95.2.1 which support --shared.

Perhaps the old reference could be deleted.


Prof Brian Ripley wrote:
> 
<snip>
> > Then it stops with this error:
> >
> > ------------------------------------------------------------------------------------------------------------------------------------------
> >
> > gcc: unrecognized option '-shared'
> > ld:R.def: file format not recognized; treating as linker script
> > ld:R.def:1: parse error
> > F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> > -------------------------------------------------------------------------------------------------------------------------------------------
> >
> > What is my mistake? (Remember that the process work with the previous
> > version 1.2.2)
> 
> Not reading the documentation!   The file CHANGES says:
> 
> rw1030
> ======
> 
> No Windows-specific changes (nor are any planned).
> 
> Support for earlier compilers has been dropped: you must use a
> compiler system that supports --shared and an in-memory dlltool.
> 
> So, please get the compiler system as recommended in the INSTALL file.
> (Yours must be over a year old.)  There's a good reason for this: I am not
> prepared to keep testing under obselete compilers like yours.
> 
> If you want to play with development versions of R you do really need to
> read the documentation, and to be aware that it is an unstable version:
> there is no guarantee that it will compile anywhere, let alone under
> Windows (which you didn't mention: please do so).  It is very likely that
> R-devel will be broken under Windows for several periods between now and
> the release of 1.3.0 as new features are added.
> 
> And please do not post to both R-help and R-devel.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Bob Wheeler --- (Reply to: bwheeler@echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 16:37:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 26 Mar 2001 16:37:41 +0100 (GMT Daylight Time)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABF5BB9.47ACA831@echip.com>
Message-ID: <Pine.WNT.4.31.0103261634530.256-100000@gannet>

On Mon, 26 Mar 2001, Bob Wheeler wrote:

> The problem traces to
> http://www.stats.ox.ac.uk/pub/Rtools/, where the
> 1999 version (gcc-2.95.2) of the compiler is
> recommended in the first paragraph under
> Compilers. The second paragraph provides zip files
> for gcc-2.95.2.1 which support --shared.
>
> Perhaps the old reference could be deleted.


Kenneth Cabrera is using an unreleased version of R: the information
on the web site is not designed for future versions of R.  If you want
to use *that*, read *its* documentation.

The information on that site is currently correct!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 22:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 13:05:16 -0800 (PST)
Subject: [Rd] DUP=FALSE
Message-ID: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>


Last week Paul Gilbert asked about DUP=FALSE and whether parent
environments can be affected.  I have experimented and they can.
Consider the R functions
> f
function(x){ .C("badidea",x,DUP=FALSE)}
> g
function(y) f(y)
> h
function(z){
        z<-as.integer(z)
        g(z)
        z
}

and the C function
	void badidea(int *x){
	    *x=7;
	}

This gives
> h(4)
[1] 7

so the modification of x in f() reaches up past g() to modify z in h().
The conclusion is that one should not pass a formal parameter of a
function using DUP=FALSE if it might be modified.  Assigning the parameter
seems to be sufficient to prevent the problem: replacing g by

 g<-function(y) {
	w<-y
	f(w)
 }
gives
> h(4)
[1] 4
as expected.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 26 23:36:03 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 17:36:03 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFC453.BBC38B69@bank-banque-canada.ca>

Thomas

Thanks for verifying that this actually does work the way you thought it
did. In the example I asked about  (qr.qty ) I am fairly sure that it
does not modify the y argument. Unfortunately this seems relatively
difficult to trace for certain, and experimenting works but may not hit
all cases.

Another thing I find I do not understand is how many copies of an
argument are made. For example, in a call to a function like

f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }

there is the original x and the duplicated x in the argument to .C, but
is there a third in the list returned by .C, or is that somehow the same
one as in the argument to .C.  My problem is that my x is very big.

Thanks,
Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 23:58:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 14:58:10 -0800 (PST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFC453.BBC38B69@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> Thanks for verifying that this actually does work the way you thought it
> did. In the example I asked about  (qr.qty ) I am fairly sure that it
> does not modify the y argument. Unfortunately this seems relatively
> difficult to trace for certain, and experimenting works but may not hit
> all cases.
>
> Another thing I find I do not understand is how many copies of an
> argument are made. For example, in a call to a function like
>
> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>
> there is the original x and the duplicated x in the argument to .C, but
> is there a third in the list returned by .C, or is that somehow the same
> one as in the argument to .C.  My problem is that my x is very big.

There's a third one. In dotcode.c the following happens

a) x is copied to a C array at the top of the R heap
b) the C function is called
c) the C array is copied into a newly created R object
d) this new R object is returned.

You only have three copies for a very short time, since the C array is
freed as soon as the new R object is returned.

A more selective version of DUP would be nice, but the only real way to do
it at the moment is to write a wrapper using .Call or .External and do any
necessary copying yourself.

I don't know why you are getting slightly different results with
DUP=FALSE. I can't think of any good explanation.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 03:00:47 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 21:00:47 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>

Thomas

>> Another thing I find I do not understand is how many copies of an
>> argument are made. For example, in a call to a function like
>>
>> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>>
>> there is the original x and the duplicated x in the argument to .C,
but
>> is there a third in the list returned by .C, or is that somehow the
same
>> one as in the argument to .C.  My problem is that my x is very big.

>There's a third one. In dotcode.c the following happens

>a) x is copied to a C array at the top of the R heap
>b) the C function is called
>c) the C array is copied into a newly created R object
>d) this new R object is returned.

It seems like there is an unnecessary extra copy here, unless of course
the array in the R object cannot be the C array (but your example of
messing up things in the parent environment suggests it can be). If
DUP=TRUE then there should be no harm in the result being just a pointer
to the copy which is the argument, and if DUP=FALSE then the result is
already in the copy as illustrated in the example circulated by Martin
Schlather on Martin Maechler suggestion a few days ago, so again there
is no harm. I won't pretend to understand the internals of R but I know
I am getting clobbered by a big array in an argument.

>I don't know why you are getting slightly different results with
>DUP=FALSE. I can't think of any good explanation.

I'll try to track this down sometime. If you think of anything please
let me know.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 06:37:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 06:37:09 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> >> Another thing I find I do not understand is how many copies of an
> >> argument are made. For example, in a call to a function like
> >>
> >> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
> >>
> >> there is the original x and the duplicated x in the argument to .C,
> but
> >> is there a third in the list returned by .C, or is that somehow the
> same
> >> one as in the argument to .C.  My problem is that my x is very big.
>
> >There's a third one. In dotcode.c the following happens
>
> >a) x is copied to a C array at the top of the R heap
> >b) the C function is called
> >c) the C array is copied into a newly created R object
> >d) this new R object is returned.
>
> It seems like there is an unnecessary extra copy here, unless of course
> the array in the R object cannot be the C array (but your example of
> messing up things in the parent environment suggests it can be). If

Well, in current R internals there is no simple way to create an R array
out of data held in a C array.  (It can be done, but is messy AFAIK.)
Also, with DUP=TRUE, you need protection.  The C routine might have cached
that address and use it next time it was called, thereby working with part
of the `newly created R object'.

> DUP=TRUE then there should be no harm in the result being just a pointer
> to the copy which is the argument, and if DUP=FALSE then the result is
> already in the copy as illustrated in the example circulated by Martin
> Schlather on Martin Maechler suggestion a few days ago, so again there
> is no harm. I won't pretend to understand the internals of R but I know
> I am getting clobbered by a big array in an argument.

Why are you using .C not .Call anyway?  These things are much easier to
control with .Call.

> >I don't know why you are getting slightly different results with
> >DUP=FALSE. I can't think of any good explanation.
>
> I'll try to track this down sometime. If you think of anything please
> let me know.

Linux? If so I think this is probably due to forced stores or not.  gcc on
Linux is getting notorious with me for not doing IEEE-compatible
arithmetic, and so getting inconsistent results. Compiling with
-fforce-store seems to solve this (at some performance expense).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 27 17:05:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 27 Mar 2001 18:05:51 +0200
Subject: [Rd] sort(list(..)) ?
Message-ID: <15040.47711.87247.785763@gargle.gargle.HOWL>

Looking at the source code of  sort()
-- for some speedup considerations --
I found that we currently use isVector() for testing the validity of x in
sort(x) whereas I think we should use isVectorAtomic(),
actually for S-plus compatibility additionally allowing NULL.
Hence I'd propose to replace
the test

    if (!isVector(CAR(args)))
	errorcall(call, "only vectors can be sorted");

by

    if(CAR(args) == R_NilValue) return R_NilValue;
    if(!isVectorAtomic(CAR(args)))
	errorcall(call, "only atomic vectors can be sorted");

in do_sort(.) in src/main/sort.c .
This doesn't quite pass "make check" currently because

  is.factor(factor(list()))

now would give an error.

I still think we should not silently allow list()s {or expression()s} as
argument to sort() as we do now; BTW, we just return them unchanged.

We could produce a warning instead of an error 
which would be more back-compatible, but I'd prefer the error.

Opinions?
{no feedback will be interpreted as:  
    "agreed, go ahead and change for R 1.3.0"}

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 27 17:21:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2001 18:21:25 +0200
Subject: [Rd] sort(list(..)) ?
In-Reply-To: Martin Maechler's message of "Tue, 27 Mar 2001 18:05:51 +0200"
References: <15040.47711.87247.785763@gargle.gargle.HOWL>
Message-ID: <x2g0fz9o8q.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> in do_sort(.) in src/main/sort.c .
> This doesn't quite pass "make check" currently because
> 
>   is.factor(factor(list()))
> 
> now would give an error.

...which is no big loss, because already now

> factor(list(1,2,3))
Error in unique(x) : unique() applies only to vectors
> factor(list(1:3))
Error in unique(x) : unique() applies only to vectors

> I still think we should not silently allow list()s {or expression()s} as
> argument to sort() as we do now; BTW, we just return them unchanged.

Agreed. Unless someone feels a great need to generalize sort() to sort
complex structures that can only be stored in a list....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 18:04:04 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Mar 2001 12:04:04 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>
Message-ID: <3AC0C803.F296CECE@bank-banque-canada.ca>

>> It seems like there is an unnecessary extra copy here, unless of course
>> the array in the R object cannot be the C array (but your example of
>> messing up things in the parent environment suggests it can be). If

>Well, in current R internals there is no simple way to create an R array
>out of data held in a C array.  (It can be done, but is messy AFAIK.)
>Also, with DUP=TRUE, you need protection.  The C routine might have cached
>that address and use it next time it was called, thereby working with part
>of the `newly created R object'.

ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
call which distinguished items to return and only built an R object of those rather
than the complete list of arguments in the call  (for me with .Fortran especially).

>Why are you using .C not .Call anyway?  These things are much easier to
>control with .Call.

Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
the documentation to mean that .Call and .External are only alternatives to .C and
not to .Fortran. If I'm wrong on that please let me know.

>> >I don't know why you are getting slightly different results with
>> >DUP=FALSE. I can't think of any good explanation.

>> I'll try to track this down sometime. If you think of anything please
>> let me know.

>Linux? If so I think this is probably due to forced stores or not.  gcc on
>Linux is getting notorious with me for not doing IEEE-compatible
>arithmetic, and so getting inconsistent results. Compiling with
>-fforce-store seems to solve this (at some performance expense).

Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
my man pages may be older.

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 18:27:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 18:27:21 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3AC0C803.F296CECE@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103271824250.10215-100000@auk.stats>

On Tue, 27 Mar 2001, Paul Gilbert wrote:

> >> It seems like there is an unnecessary extra copy here, unless of course
> >> the array in the R object cannot be the C array (but your example of
> >> messing up things in the parent environment suggests it can be). If
>
> >Well, in current R internals there is no simple way to create an R array
> >out of data held in a C array.  (It can be done, but is messy AFAIK.)
> >Also, with DUP=TRUE, you need protection.  The C routine might have cached
> >that address and use it next time it was called, thereby working with part
> >of the `newly created R object'.
>
> ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
> call which distinguished items to return and only built an R object of those rather
> than the complete list of arguments in the call  (for me with .Fortran especially).
>
> >Why are you using .C not .Call anyway?  These things are much easier to
> >control with .Call.
>
> Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
> the documentation to mean that .Call and .External are only alternatives to .C and
> not to .Fortran. If I'm wrong on that please let me know.

You can write a C wrapper and .Call that, of course.

> >> >I don't know why you are getting slightly different results with
> >> >DUP=FALSE. I can't think of any good explanation.
>
> >> I'll try to track this down sometime. If you think of anything please
> >> let me know.
>
> >Linux? If so I think this is probably due to forced stores or not.  gcc on
> >Linux is getting notorious with me for not doing IEEE-compatible
> >arithmetic, and so getting inconsistent results. Compiling with
> >-fforce-store seems to solve this (at some performance expense).
>
> Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
> my man pages may be older.

It's not a Solaris issue, but 2.8.1 is rather old: I use 2.95.2 on Solaris.
There may be order-of-evaluation issue though.  Does the difference persist
with optimization turned off?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From k.j.mcconway@open.ac.uk  Wed Mar 28 15:46:50 2001
From: k.j.mcconway@open.ac.uk (k.j.mcconway@open.ac.uk)
Date: Wed, 28 Mar 2001 16:46:50 +0200 (MET DST)
Subject: [Rd] Error (?) in documentation of 'swiss' data in R base package (PR#886)
Message-ID: <200103281446.QAA22300@pubhealth.ku.dk>

Full_Name: Kevin McConway
Version: 1.2.2
OS: WinNT
Submission from: (NULL) (137.108.11.58)


Hardly crucial, but I've come upon a potential error in the documentation of the
'swiss' datafram in the R base package. The description accurately matches what
is said in the Mosteller and Tukey source quoted, but according to the data
archived at Princeton (links from
http://opr.princeton.edu/archive/eufert/switz.html), the variable that Mosteller
and Tukey report as infant mortality is actually the proportion of 'draftees'
with education beyond primary school. Infant mortality is on the archived file,
but the values are quite a lot different. Of course, it's possible that
Mosteller and Tukey were right and the people who did the archiving at
Princenton, later, got it wrong.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Wed Mar 28 19:51:06 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Wed, 28 Mar 2001 20:51:06 +0200 (MET DST)
Subject: [Rd] axis(adj=anything) has no effect (PR#887)
Message-ID: <200103281851.UAA23275@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 29 14:38:57 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 29 Mar 2001 14:38:57 +0100 (BST)
Subject: [Rd] Detaching "ctest"
Message-ID: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>

Hi Everyone,

We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
ctest is now loaded automatically.  The mechanism for this is to create a
.First function in base:

.First <- function() {
    require("ctest", quietly=TRUE)
}

Now I don't want ctest, but I find that simply putting

if (length(grep("ctest", search())))
  detach(package:ctest)

into my ".Rprofile" does not work, for the simple reason that .First is
invoked after .Rprofile.  I thought that one possible solution is to
remove .First from base, but when I tried this I got

> find(".First")
[1] "package:base"
> search()
[1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
[5] "package:base"   
> remove(".First", pos=5)
Warning message: 
remove: variable ".First" was not found 
> remove(".First", inherits=TRUE)
Warning message: 
remove: variable ".First" was not found 

Is it not possible to remove things from "base"?  The alternative is to
mask the .First with a blank one in my .Rprofile, but this seems rather
inelegant.

So my questions are:

(1) Why has ctest been included among the start-up options, and why has
this mechanism of using the .First been used, rather than relying on
people putting the command require("ctest", quietly=TRUE) into the
.Rprofile?

(2) Is there an elegant way of me stopping ctest from being loaded, other
then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

Many thanks, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 11:03:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 12:03:02 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
Message-ID: <15044.22998.24033.91361@mithrandir.hornik.net>

>>>>> Jonathan Rougier writes:

> Hi Everyone,
> We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
> ctest is now loaded automatically.  The mechanism for this is to create a
> .First function in base:

> .First <- function() {
>     require("ctest", quietly=TRUE)
> }

> Now I don't want ctest, but I find that simply putting

> if (length(grep("ctest", search())))
>   detach(package:ctest)

> into my ".Rprofile" does not work, for the simple reason that .First is
> invoked after .Rprofile.  I thought that one possible solution is to
> remove .First from base, but when I tried this I got

>> find(".First")
> [1] "package:base"
>> search()
> [1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
> [5] "package:base"   
>> remove(".First", pos=5)
> Warning message: 
> remove: variable ".First" was not found 
>> remove(".First", inherits=TRUE)
> Warning message: 
> remove: variable ".First" was not found

Which looks rather strange to me ... 

> Is it not possible to remove things from "base"?  The alternative is
> to mask the .First with a blank one in my .Rprofile, but this seems
> rather inelegant.

> So my questions are:

> (1) Why has ctest been included among the start-up options, and why has
> this mechanism of using the .First been used, rather than relying on
> people putting the command require("ctest", quietly=TRUE) into the
> .Rprofile?

> (2) Is there an elegant way of me stopping ctest from being loaded, other
> then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

There was a great amount of discussion on r-core whether or not ctest
should be preloaded.  We all agree that base is way too large, and that
it eventually should basically be a core S language interpreter, with
everything else available ``on demand''.  Re add-on packages, there are
two obvious possibilities:

* only provide base by default, and let users or site admins customize
  the list of packages they want by default.

* provide packages like ctest (and maybe ts) by default, and have site
  admins or users overrule the default settings.

In a Unix-centric world the former would be the obvious choice.
However, there was great concern about the situation on Windows, where
the intermediate ``site admin'' level typically would not be available,
and we do not want to have first time R windows users start complaining
about R as a stats package that cannot even do a t test.  Hence, we went
for the latter.

The ``elegant'' way we recommend is that either you as site admin
provide a site version of .First in $R_HOME/etc/Rprofile, or you as user
provide your private version of .First in $HOME/.Rprofile.

Hope this helps.

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 14:02:13 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 2001 15:02:13 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: Kurt Hornik's message of "Fri, 30 Mar 2001 12:03:02 +0200"
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace> <15044.22998.24033.91361@mithrandir.hornik.net>
Message-ID: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Jonathan Rougier writes:

> >> remove(".First", pos=5)
> > Warning message: 
> > remove: variable ".First" was not found 
> >> remove(".First", inherits=TRUE)
> > Warning message: 
> > remove: variable ".First" was not found
> 
> Which looks rather strange to me ... 

One of the anomalies with the base frame is that you cannot remove
variables from it (this has to do with the fact that base has its
values bound directly to symbols, whereas other frames are essentially
hashed lists). The error message is a bit weird, though. 

> > Is it not possible to remove things from "base"?  The alternative is
> > to mask the .First with a blank one in my .Rprofile, but this seems
> > rather inelegant.

You can't. However, you wouldn't really gain anything by it since the
base frame is not saved as part of your workspace. The intended way is
as Kurt said: Override .First in your own .Rprofile.

> > So my questions are:
> 
> > (1) Why has ctest been included among the start-up options, and why has
> > this mechanism of using the .First been used, rather than relying on
> > people putting the command require("ctest", quietly=TRUE) into the
> > .Rprofile?
> 
> > (2) Is there an elegant way of me stopping ctest from being loaded, other
> > then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?
> 
> There was a great amount of discussion on r-core whether or not ctest
> should be preloaded.  We all agree that base is way too large, and that
> it eventually should basically be a core S language interpreter, with
> everything else available ``on demand''.  Re add-on packages, there are
> two obvious possibilities:
> 
> * only provide base by default, and let users or site admins customize
>   the list of packages they want by default.
> 
> * provide packages like ctest (and maybe ts) by default, and have site
>   admins or users overrule the default settings.
> 
> In a Unix-centric world the former would be the obvious choice.
> However, there was great concern about the situation on Windows, where
> the intermediate ``site admin'' level typically would not be available,
> and we do not want to have first time R windows users start complaining
> about R as a stats package that cannot even do a t test.  Hence, we went
> for the latter.

Not too sure whether the former is really all that obvious even on
Unix. We'll be getting casual users there too who'd expect that
standard procedures like t.test are available by default and site
admins who wouldn't know anything about the packages they install (and
on Linux, the situation is quite often a single-user one anyway).
However, I do like the idea of having a small core, in particular with
a view to e.g. calling R in shell scripts.

I think the current situation is mainly a stopgap, which got inserted
when we realised that moving t.test into ctest and autoloading ctest
when t.test was requested led to a situation that was really difficult
to explain to users ("cor.test only works after t.test?"). Longer
term, I think we need something more elegant than .Rprofile/.First to
let the users edit their default configuration easily. I'm not quite
sure what I want, but say for the sake of argument that the user
interface was

> configure("packages")

which could do different things depending on whether you were using a
GUI, terminal interface, ESS, or maybe even batch mode. In simple
modes it might simply be based on edit()ing the output of

  data.frame(package=.packages(all=T),
             load=!is.na(match(.packages(all=T),.packages())))

- although you might want to distinguish between the usual profile-ish
things (site-level/user-level/directory-level/workspace-specific) too.
With a GUI, you'd likely want something with checkboxes instead.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Mar 30 16:20:05 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 30 Mar 2001 10:20:05 -0500 (EST)
Subject: [Rd] Re: [Omega-bugs] RSMethods pkg causes data.frame misbehavior in R
References: <200103292310.SAA06361@falmouth.bwh.harvard.edu>
Message-ID: <200103301520.KAA20458@jessie.research.bell-labs.com>

Right.  The methods such as as.data.frame.numeric don't get
dispatched, basically because RSMethods tries to interpret class(x) in
the S4 sense (so, e.g. a numeric vector has class "numeric").

Problems can then come from different semantics for S3-style and
S4-style methods.  The older methods don't dispatch on the mode of
vectors (or equivalently, on the value of data.class(x)), but only on
an explicit "class" attribute.

In order to have separate methods for as.data.frame.numeric, etc.,
the S3-style generic function explicitly assigns a class (attribute).

In the newer class model, every object has a class so no explicit
attribute is needed.

The long-term solution depends on how we want to approach the two
kinds of methods:  Do we want them to live side-by-side or do we want
a single method dispatch model?

Meanwhile, a work-around is to find places, like as.data.frame, where
the class attribute is set, and make this explicit.

This specific bug goes away if the RSMethods package overrides
as.data.frame with the following definition.  (I'll add it to the next
version of RSMethods if it proves OK.)

as.data.frame <-
function (x, row.names = NULL, optional = FALSE) 
{
    if (is.null(x)) 
        return(as.data.frame(list()))
    if (is.null(attr(x, "class"))) 
        attr(x, "class") <- data.class(x)
    UseMethod("as.data.frame", x, row.names, optional)
}
  
Like most of these problems, I suspect, all that's needed is to
replace "class(x)" with "attr(x, 'class')".

Thanks, Vince.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

> From: "Vincent J. Carey, Jr." <stvjc@channing.harvard.edu>
> Sender: omega-bugs-admin@omegahat.org
> Errors-To: omega-bugs-admin@omegahat.org
> Precedence: bulk
> List-Help: <mailto:omega-bugs-request@omegahat.org?subject=help>
> List-Post: <mailto:omega-bugs@omegahat.org>
> List-Subscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=subscribe>
> List-Id: Bug reports and related mail for Omegahat software. <omega-bugs.omegahat.org>
> List-Unsubscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=unsubscribe>
> List-Archive: <http://www.omegahat.org/pipermail/omega-bugs/>
> Date: Thu, 29 Mar 2001 18:10:49 -0500 (EST)
> 
> 
> I've run into a problem with data.frame printing/attachment
> in R1.3 (also detected in 1.2) when RSMethods is attached as a library.
> Here are the versions I'm using, they are the latest ones pointed to
> on omega.stat.wisc.edu:
> 
> -rw-r--r--   1 stvjc    st         16920 Mar  5 13:38 SLanguage_0.1-0.tar.gz
> -rw-r--r--   1 stvjc    st         38139 Mar  5 13:37 RSMethods_0.1-2.tar.gz
> 
> A transcript displaying the problem and a traceback is given
> below.  When RSMethods is detached the problem goes away.
> I haven't been able to understand why as.data.frame.default
> kicks in erroneously.
> 
> I'm still able to make progress with the S4 classes in R
> with the RSMethods library, so I don't consider this too 
> urgent.
> 
> vc
> 
> # normal operations prior to library attachment
> 
> > data(stackloss)
> > stackloss[1:3,]
>   Air.Flow Water.Temp Acid.Conc. stack.loss
> 1       80         27         89         42
> 2       80         27         88         37
> 3       75         25         90         37
> 
> # attach
> 
> > library(RSMethods)
> 
> Attaching Package "package:RSMethods":
> 
> 
> 	The following object(s) are masked from package:base :
> 
> 	 all.names all.vars assign exists find get objects remove substring substring<- warning 
> 
> # problem
> 
> > stackloss[1:3,]
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
> 	can't coerce character into a data.frame
> Execution halted
> 
> > traceback()
> 11: stop(paste("can't coerce", data.class(x), "into a data.frame"))
> 10: as.data.frame.default(x[[i]], optional = TRUE)
> 9: as.data.frame(x[[i]], optional = TRUE)
> 8: data.frame(Air.Flow = c("80", "80", "75"), Water.Temp = c("27", 
>    "27", "25"), Acid.Conc. = c("89", "88", "90"), stack.loss = c("42", 
>    "37", "37"), check.names = FALSE, row.names = c("1", "2", "3"
>    ))
> 7: do.call("data.frame", rval)
> 6: format.data.frame(x)
> 5: format(x)
> 4: as.matrix(x)
> 3: print.matrix(format(x), ..., quote = quote, right = right)
> 2: print.data.frame(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 1: print(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 
> --
> 
> # also occurs when just running data()
> 
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:RSMethods"
> [4] "package:ctest"     "Autoloads"         "package:base"     
> > data(stackloss)
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
>         can't coerce numeric into a data.frame
> > detach(3)
> > data(stackloss)
> # no error now
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:ctest"    
> [4] "Autoloads"         "package:base"     
> 
> 
> > 
> > version
>          _                           
> platform sparc-sun-solaris2.6        
> arch     sparc                       
> os       solaris2.6                  
> system   sparc, solaris2.6           
> status   Under development (unstable)
> major    1                           
> minor    3.0                         
> year     2001                        
> month    03                          
> day      04                          
> language R                           
> 
> i've had the same behavior under R1.3 on RH linux 6.1
> and in R1.2b on that OS
> -- 
> stvjc@gauss.bwh.harvard.edu
> _______________________________________________
> Omega-bugs mailing list  -  Omega-bugs@omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-bugs
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 17:26:52 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 18:26:52 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
 <15044.22998.24033.91361@mithrandir.hornik.net>
 <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
Message-ID: <15044.46028.686427.367469@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ...

>> configure("packages")

> which could do different things depending on whether you were using a
> GUI, terminal interface, ESS, or maybe even batch mode. In simple
> modes it might simply be based on edit()ing the output of

>   data.frame(package=.packages(all=T),
>              load=!is.na(match(.packages(all=T),.packages())))

> - although you might want to distinguish between the usual profile-ish
> things (site-level/user-level/directory-level/workspace-specific) too.
> With a GUI, you'd likely want something with checkboxes instead.

Nice idea!  Two remarks.

* We might want similar ways of setting `preferences' such as options.
  [E.g., via something like Emacs M-x customize, or in a GUI style.]

* In any case, as far as I am concerned the real problem is not having a
  convenient interface but on agreeing on what the choices should be,
  and how well-educated users or site admins need to be to make the
  right choices.  E.g., when it comes to setting a default profile for
  packages, how does the user find out which packages he wants?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Fri Mar 30 22:03:10 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
Message-ID: <200103302103.XAA17985@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: Solaris
Submission from: (NULL) (132.200.32.33)


"boink<-" <- function(x, a = 1, b = 2, value){
    print(match.call())
    x
}

> z <- 1
> boink(z, b = 4) <- 22
boink<-(x = *tmp*, a = 4, value = 22)
>
     
Shouldn't it have matched the 4 to b, not a?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 23:46:29 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Mar 2001 00:46:29 +0200
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
In-Reply-To: jhallman@frb.gov's message of "Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)"
References: <200103302103.XAA17985@pubhealth.ku.dk>
Message-ID: <x2d7aykh8a.fsf@blueberry.kubism.ku.dk>

jhallman@frb.gov writes:

> "boink<-" <- function(x, a = 1, b = 2, value){
>     print(match.call())
>     x
> }
> 
> > z <- 1
> > boink(z, b = 4) <- 22
> boink<-(x = *tmp*, a = 4, value = 22)
> >
>      
> Shouldn't it have matched the 4 to b, not a?

Yes. Fixed for 1.2.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Mar 31 21:38:44 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 31 Mar 2001 22:38:44 +0200
Subject: [Rd] Comments on R-1.2.1 builds (PR#851)
In-Reply-To: <14990.35273.167526.4092@mithrandir.hornik.net>
References: <200102170044.BAA19310@pubhealth.ku.dk>
 <14990.35273.167526.4092@mithrandir.hornik.net>
Message-ID: <15046.16468.885425.640832@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> beebe  writes:
>> The R-1.2.1 builds have gone fairly smoothly on most of my UNIX
>> architectures, but there were many warnings reported by the picky SGI
>> compiler that could be eliminated in future releases.

>> Generally, I have found the SGI compilers very helpful in ferreting
>> out portability problems, unused and/or obsolete variables, unexpected
>> datatype coercions, etc., and they compile faster than any other
>> compilers too.

>> First, I configured like this:

>> env CC='c89 -mips3 -O3' ./configure && make all

>> This reports:

>> R is now configured for mips-sgi-irix6.5

>> Source directory:          .
>> Installation directory:    /usr/local
>> C compiler:                c89 -mips3 -O3  -OPT:IEEE_NaN_inf=ON -g
>> C++ compiler:              c++  -g -O2
>> FORTRAN compiler:          g77  -OPT:IEEE_NaN_inf=ON -g -O2

>> X11 support:               yes
>> Gnome support:             no
>> Tcl/Tk support:            yes

>> R profiling support:       yes
>> R as a shared library:     no

>> The build proceeds until this failure:

>> g77 -OPT:IEEE_NaN_inf=ON  -g -O2 -c ch2inv.f -o ch2inv.o
>> f771: Invalid option `-OPT:IEEE_NaN_inf=ON'
>> make[3]: *** [ch2inv.o] Error 1

>> Evidently, it was not prepared for the GNU Fortran compiler.

> Yep, that is a bug.  I need some feedback for fixing this, though.  The
> current logic is to run the autoconf R_C_OPTIEEE test if the platform is
> IRIX.  The test itself tries to compile and run

> #include <math.h>
> #include <ieeefp.h>
> int main () {
>   double x = 0;
>   fpsetmask(0); x = x / x; return (x != x);
> }

> and if that works adds -OPT:IEEE_NaN_inf=ON to both R_XTRA_CFLAGS and
> R_XTRA_FFLAGS.

> This obviously does not make sense for FORTRAN, and should be made more
> defensive for C.

> * For C, one should additionally test whether the compiler accepts this
>   flag.  I assume gcc would not, so should we do

> 	if_not_using_gcc  check_arg("-OPT:IEEE_NaN_inf=ON")

> * For FORTRAN, I am not sure whether the result of the above test has
>   any relevance.  Question is, do we have a FORTRAN test program similar
>   to the above to determine whether the flag is needed?  Again, we
>   should also check whether the compiler accepts the flag ...

> * Or should we simply unconditionally add the flag for ``native'', i.e.,
>   non-GNU compilers?

> (Sorry but I do not have access to SGIs ...)

I would like to fix this for 1.2.3, so it would be great if anyone with
access to IRIX could comment ... Personally, I'd prefer the last idea if
this is feasible.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa@gwen.stat.unipd.it  Thu Mar  1 09:04:35 2001
From: aa@gwen.stat.unipd.it (aa@gwen.stat.unipd.it)
Date: Thu, 1 Mar 2001 10:04:35 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010904.KAA19346@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


Today I have installed R 1.02.1  on my MSW-95 laptop;
it essentially worked, but thre are two problems:

1) Although I have chose to install "standard", compiled HTML"
and "WinHelp"  documentation files, and in spite of the fact
that the installer program mwinst.exe reported to hve done this, 
only the first type of documentation is actually accessible
from the Help menu of RGui.

2) I have then attempted to load some packages, but some of
them are declared "non-existent"... see below.
Some others (sm, survival5, nlme) installed correctly and they work;
so the missing "lib" 

>  install.packages(c("sm","sn","integrate","survival5","nlme"))

Delete downloaded files (y/N)? y

Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages(c("sm", "sn", "integrate", "survival5", "nlme")) 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
3: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  


> install.packages("integrate")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("integrate") 
2: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  
> install.packages("sn")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("sn") 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
> 

Thanks for your attention and consideration.
Best wishes

Adelchi Azzalini

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows 9x 4.0 (build 950) 

Search Path:
 .GlobalEnv, package:sm, Autoloads, package:base
--
Adelchi Azzalini    <azzalini@stat.unipd.it>
Dept Statistical Sciences, University of Padua, Italy.
http://www.stat.unipd.it/~azzalini



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  1 09:20:46 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 1 Mar 2001 10:20:46 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010920.KAA19623@pubhealth.ku.dk>

On Thu, 1 Mar 2001 aa@gwen.stat.unipd.it wrote:

> Today I have installed R 1.02.1  on my MSW-95 laptop;

1.2.1 I presume.

> it essentially worked, but thre are two problems:
>
> 1) Although I have chose to install "standard", compiled HTML"
> and "WinHelp"  documentation files, and in spite of the fact
> that the installer program mwinst.exe reported to hve done this,
> only the first type of documentation is actually accessible
> from the Help menu of RGui.

That's not a bug: see ?help and ?help.start.  You can only use the CHTML
and WinHlp documentation via help or directly in Windows Explorer.

> 2) I have then attempted to load some packages, but some of
> them are declared "non-existent"... see below.

[...]

Again, see the documentation, namely the R for Windows FAQ.
Not all packages are available in pre-compiled form, so you will need
to compile the others yourself.  In particular, sn and integrate are not,
currently.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 13:52:09 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
Subject: [Rd] timeline for R-1.2.x where x>1? Just curious as
Message-ID: <Pine.SOL.3.96.1010301085117.16605A-100000@mfcf.math.uwaterloo.ca>

I am looking to update our installation.

-wt

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 14:28:51 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 14:28:51 +0000 (GMT)
Subject: [Rd] timeline for R-1.2.x where x>1?
Message-ID: <200103011428.OAA20064@toucan.stats.ox.ac.uk>

> Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>

Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
our installation.

You can always find the current plans on developer.r-project.org.
That says

   The latest release of R was 1.2.2 on February 26th, 2001. We might
   have a 1.2.3 release mainly with fixes for the Macintosh port, but
   development will target v.1.3 now.
   No dates for upcoming releases have been scheduled yet.

My own guess would be mid-year for 1.3.0, as a twice-yearly schedule for
1.x.0 releases is the `norm'.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 15:09:48 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
Subject: [Rd] webpage should be updated regarding 1.2.2
In-Reply-To: <200103011428.OAA20064@toucan.stats.ox.ac.uk>
Message-ID: <Pine.SOL.3.96.1010301100821.16605D-100000@mfcf.math.uwaterloo.ca>



On Thu, 1 Mar 2001, Prof Brian Ripley wrote:

> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> 
> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
> our installation.
> 
> You can always find the current plans on developer.r-project.org.
> That says
> 
>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>    development will target v.1.3 now.
>    No dates for upcoming releases have been scheduled yet.

Thanks, Perhaps the main webpage at www.r-project.org downloads areas could have
a note to this effect as it mentions 1.2.1 as the latest.

-walter tautz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 15:24:58 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 15:24:58 +0000 (GMT)
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <200103011524.PAA20197@toucan.stats.ox.ac.uk>


> X-Authentication-Warning: mfcf.math: wtautz owned process doing -bs
> Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: R-devel@r-project.org
> Subject: [Rd] webpage should be updated regarding 1.2.2
> 
> 
> 
> On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
> 
> > > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> > 
> > Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to 
update 
> > our installation.
> > 
> > You can always find the current plans on developer.r-project.org.
> > That says
> > 
> >    The latest release of R was 1.2.2 on February 26th, 2001. We might
> >    have a 1.2.3 release mainly with fixes for the Macintosh port, but
> >    development will target v.1.3 now.
> >    No dates for upcoming releases have been scheduled yet.
> 
> Thanks, Perhaps the main webpage at www.r-project.org downloads areas could 
have
> a note to this effect as it mentions 1.2.1 as the latest.

It just so happens that updating was late this one time!  (R people are
volunteers, and not available all day every day.  In particular, Fritz
Leisch who does the bulk of the work on the web sites is in Australia
or in transit.)

I think you mean the main page of cran.r-project.org, which is linked
off www.r-project.org.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Mar  1 15:36:21 2001
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 01 Mar 2001 16:36:21 +0100
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <3.0.32.20010301163621.008fc6a0@162.38.183.200>

At 10:09 01/03/01 -0500, you wrote:
>
>
>On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
>
>> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
>> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
>> 
>> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to
update 
>> our installation.
>> 
>> You can always find the current plans on developer.r-project.org.
>> That says
>> 
>>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>>    development will target v.1.3 now.
>>    No dates for upcoming releases have been scheduled yet.
>
>Thanks, Perhaps the main webpage at www.r-project.org downloads areas
could have
>a note to this effect as it mentions 1.2.1 as the latest.
>
>-walter tautz

No, it doesn't. Look at http://cran.r-project.org/

1.2.2 is mentioned as the lastest.
	

	EP
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Thu Mar  1 23:19:56 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Fri, 02 Mar 2001 10:19:56 +1100
Subject: [Rd] Finalization and external pointer objects
Message-ID: <3A9ED91C.7E2DBCA1@cmis.csiro.au>

Hi,

I've been developing an image analysis package based on R for a while
now and I've had problems relating to garbage collection, so it with
great interest that I've noticed the work done by Luke Tierney in this
area, and I'd like to discuss how best to fit it into my package. I'll
start with how my package is structured - an image is represented by an
integer with a class of "image". This is actually a pointer to a C
abstract data type. Most imaging functions in my library have a form
like this


IMAGE *imquickthresh(const IMAGE *src, IMAGE *target, float p1, int p2);

the target parameter is optional and never used from R.

This is made appropriate for a .C call like this

Rimquickthresh(IMAGE **output, IMAGE **src, Sfloat *p1, Sint *p2)
{
  IMAGE *dummy;

  dummy = imquickthresh(*src, NULL, (float)(*p1), (int)(*p2));

  *output = dummy;
}

the R code calling this looks like

function(src, p1, p2)
{
  if (!is.image(src))
    stop("Parameter 'src' should be an image.")
  output <- POINTER
  output<-.C("Rimquickthresh", val = output, (src), as.double(p1),
as.integer(p2))$val
  if (output == POINTER)
    return(0)
  class(output) <- c("image")
  AddGlobalImageFunc(output)
  output
}


The AddGlobalImageFunc is related to my GC mechanism.
POINTER is as.integer(0) or as.double(0), depending on platform.

This is mostly generated automatically. I'd really like to discard my GC
mechanism and make use of the special facilities that are being
developed. So far it seems that most of these are related to the .Call
mechanism, so is there a sensible way to use them with pointers passed
to or returned from a .C call? I'd like to avoid changing everything to
make use of the .Call facility because I suspect it might make porting
to Splus more difficult and it's likely to be a significant amount of
work.

I'm guessing that there needs to be some of the following functions at
the R level - perhaps they are already around and I've missed them.

GenExtPointer - basically the same thing that can get returned by a
.Call using  R_MakeExternalPtr. The address of the appropriate part of
this would then need to be passed in the place of "output" above,
presumably by using an R interface to R_ExternalPtrAddr.

register.finalizer mentioned in Lukes discussion papers is needed.

I welcome any advice about other ways of approaching this problem,
indications of where the development of these things are at and if there
is ever likely to be any hope of using similar functionality under
Splus? Are the results from an approach based on .C going to be so
horrible that I should just give up and work on a .Call based approach?


I look forward to hearing from you.

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sergei@stams.strath.ac.uk  Fri Mar  2 17:14:31 2001
From: sergei@stams.strath.ac.uk (sergei@stams.strath.ac.uk)
Date: Fri, 2 Mar 2001 18:14:31 +0100 (MET)
Subject: [Rd] apply on data.frame does not work properly (PR#859)
Message-ID: <200103021714.SAA10405@pubhealth.ku.dk>

Full_Name: Dr. Sergei Zuyev
Version: 1.1.0 and 1.2.2
OS: Solaris
Submission from: (NULL) (130.159.248.36)


apply on data.frame with floats, factors and NA's does not work properly. Here
is
an example:
I am searching for rows containig NA values.

X1 <- c(1, NA)
X2<-c("A","B")
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it should
 
# But:
X1 <- c(1.5, NA) # float instead of natural
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE FALSE
# as it shouldn't
 
# However,
apply(df[2,],1,function(x){any(is.na(x))})
# gives TRUE
 
# Change X2 to a numeric vector and everything works fine:
X2<-c(2.5,3)
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it shouldn't                                                               
            

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Fri Mar  2 17:40:17 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 02 Mar 2001 18:40:17 +0100
Subject: [Rd] apply on data.frame does not work properly (PR#859)
In-Reply-To: sergei@stams.strath.ac.uk's message of "Fri, 2 Mar 2001 18:14:31 +0100 (MET)"
References: <200103021714.SAA10405@pubhealth.ku.dk>
Message-ID: <x2snkw83y6.fsf@blueberry.kubism.ku.dk>

sergei@stams.strath.ac.uk writes:

> Full_Name: Dr. Sergei Zuyev
> Version: 1.1.0 and 1.2.2
> OS: Solaris
> Submission from: (NULL) (130.159.248.36)
> 
> 
> apply on data.frame with floats, factors and NA's does not work properly. Here
> is
> an example:
> I am searching for rows containig NA values.
> 
> X1 <- c(1, NA)
> X2<-c("A","B")
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it should
>  
> # But:
> X1 <- c(1.5, NA) # float instead of natural
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE FALSE
> # as it shouldn't
>  
> # However,
> apply(df[2,],1,function(x){any(is.na(x))})
> # gives TRUE
>  
> # Change X2 to a numeric vector and everything works fine:
> X2<-c(2.5,3)
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it shouldn't                                                          
 
This traces back to the use of format() when coercing dataframes to
character:

> format(c(1,NA))
[1] " 1" "NA"
> format(c(1000,NA))
[1] "1000" "  NA"

And "  NA" is not a character NA....

apply(is.na(df),1,any) seems to be better though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b4h443@arabia.com  Fri Mar  2 23:04:34 2001
From: b4h443@arabia.com (b4h443@arabia.com)
Date: Fri, 02 Mar 2001 17:04:34 -0600
Subject: [Rd] Brand New E-Mail pager for FR-EE!
Message-ID: <000037602e56$00007599$00004fa8@mail.dptechnology.com>

Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check

   Put Free pagers on your kids - Give one to your loved ones - For FR-EE

   Here at Paging America we are excited to be offering you this exclusive, top of the line, full featured pager in your choice
   of color for FR=EE. This side viewable display pager is one of the smallest and lightest pagers on the market today.


   Call 877-699-8546 to be Guaranteed Your FR-EE Pager Today


   Your pager will hold up to 20 numeric messages. It has 9 music alerts and silent vibration. New FLEX technology provides three
   times the battery life. Also, message time and date stamping and smart alarm so you can set a daily or weekly reminder.
   This pager comes in black, teal and blue.

   To receive your free pager all we ask is that you allow us to provide you with the monthly airtime cancelable at any time.
   There is no long term contract. Just call the toll free number and we'll ship your Fr-ee pager to you immediately in your choice of color
   already programmed with a local telephone number for your town.

   Make this easy phone call and we will deliver your pager immediately.


   Call 877-699-8546 to get in on this exciting offer today












Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  3 20:56:20 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Mar 2001 21:56:20 +0100 (MET)
Subject: [Rd] Context problem with ... and rbind (PR#860)
Message-ID: <200103032056.VAA13487@pubhealth.ku.dk>

R 1.2.2, Solaris and Linux:

f <- function(x, ...)
{
   g <- function(x, ...) x
   rbind(numeric(), g(x, ...))
}
> f(1:3)
Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

S-PLUS 3.4 gives

     [,1] [,2] [,3]
[1,]    1    2    3

as I would expect.

f <- function(x, ...)
{
   g <- function(x, ...) x
   tmp <- g(x, ...)
   rbind(numeric(), tmp)
}
> f(1:3)

does work, and I believe this should be equivalent.


This is an abstract of code used in the latest S version of the boot
package.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 11:56:35 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 12:56:35 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sat, 3 Mar 2001 21:56:20 +0100 (MET)"
References: <200103032056.VAA13487@pubhealth.ku.dk>
Message-ID: <x23dctbvd8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> f <- function(x, ...)
> {
>    g <- function(x, ...) x
>    rbind(numeric(), g(x, ...))
> }
> > f(1:3)
> Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

It's not really rbind that is the culprit here, but the deparsing of
its argument. A near-minimal version of what I think is the same issue
is

f <- function(x, ...) h(g(x, ...))
g <- function(x, ...) x
h <- function(...)substitute(list(...))
f(1)
#Error in h(g(x, ...)) : ... used in an incorrect context

Also, the following is perplexing, given the definition of quote():

> quote(list(...))
list(...)
> substitute(list(...))
Error: ... used in an incorrect context

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:26:13 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:26:13 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 12:56:35 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zml2mt6.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > f <- function(x, ...)
> > {
> >    g <- function(x, ...) x
> >    rbind(numeric(), g(x, ...))
> > }
> > > f(1:3)
> > Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context
> 
> It's not really rbind that is the culprit here, but the deparsing of
> its argument. A near-minimal version of what I think is the same issue
> is
> 
> f <- function(x, ...) h(g(x, ...))
> g <- function(x, ...) x
> h <- function(...)substitute(list(...))
> f(1)
> #Error in h(g(x, ...)) : ... used in an incorrect context

Hmm.... The patch below stops the error, and passes make check, but I
have a nagging suspicion that it isn't the right way to fix this:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:11:12
@@ -1749,11 +1749,11 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue || h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:53:34 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:53:34 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:26:13 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266hp4041.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> Hmm.... The patch below stops the error, and passes make check, but I
> have a nagging suspicion that it isn't the right way to fix this:

This might work rather better:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:46:27
@@ -1749,11 +1749,13 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue)
+               return el;
+           if( h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Sun Mar  4 23:23:09 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 05 Mar 2001 09:23:09 +1000
Subject: [Rd] passing pointer types via .C calls
Message-ID: <3AA2CE5D.D00E9052@cmis.csiro.au>

Hi,
this relates to my earlier message about external references and
finalizers. I was experimenting over the weekend and now suspect that
the appropriate solution to my problem will be to have a special case in
the code that handles the .C call so that external references are
handled appropriately - I guess that a pointer to the reference should
be passed to the C code. As I've never experimented with the R internals
before I thought that I had better check peoples opinion. Does this
approach break anything in the work the Luke Tierney has been doing?
I've only had a quick look so far so I'm not really certain how the code
that handling the .C call is meant to work. I have successfully passed
the pointer to the external reference to my code, but I'm really not
sure about how the conventions used for this kind of thing - who should
I be talking to about it?

All advice welcome....

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bernd.winkler@genedata.com  Mon Mar  5 14:01:55 2001
From: bernd.winkler@genedata.com (bernd.winkler@genedata.com)
Date: Mon, 5 Mar 2001 15:01:55 +0100 (MET)
Subject: [Rd] histogram of frequencies (PR#861)
Message-ID: <200103051401.PAA28206@pubhealth.ku.dk>

Full_Name: Dr. Bernd Winkler
Version: 1.2.2
OS: Linux
Submission from: (NULL) (194.59.179.176)


Hi all,

having updated to version 1.2.2 last week I experienced some strange behaviour
of 
the hist function.

I want to plot a histogram of frequencies resp. counts, for example poisson 
random numbers, on a predefined and fixed x scale

> hist(rpois(500, 2), breaks=0:10)

But instead of the frequencies I get the density of these data.
Introducing the parameter freq=TRUE then I get the frequencies but 
with the following warning message

> hist(rpois(500, 2),breaks=0:10, freq=TRUE)
Warning message: 
the AREAS in the plot are wrong -- rather use `freq=FALSE'! in:
plot.histogram(r, freq = freq, col = col, border = border, main = main,  

The following excerpt from hist.default(...) (new in 1.2.2) might have caused
this behaviour:
    ...
    diddle <- 1e-07 * max(abs(range(breaks)))
    fuzz <- if (right) 
        c(if (include.lowest) -diddle else diddle, rep(diddle, 
            length(breaks) - 1))
    else c(rep(-diddle, length(breaks) - 1), if (include.lowest) diddle else
-diddle)
    breaks <- breaks + fuzz
    ...

The addition of the fuzz variable to the breaks causes hist 
to think of no equidistant breaks (even if they are) and therefore 
a density plot is generated by default. Removing these lines the 
behaviour is like the one in version 1.2.1 and earlier. 
Is there an alternative doing this with the new version?
And what about the border color parameter in barplot?

Many thanks in advance

Bernd





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 14:59:37 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 15:59:37 +0100
Subject: [Rd] histogram of frequencies (PR#861)
In-Reply-To: bernd.winkler@genedata.com's message of "Mon, 5 Mar 2001 15:01:55 +0100 (MET)"
References: <200103051401.PAA28206@pubhealth.ku.dk>
Message-ID: <x2itlob6sm.fsf@blueberry.kubism.ku.dk>

bernd.winkler@genedata.com writes:

> The addition of the fuzz variable to the breaks causes hist 
> to think of no equidistant breaks (even if they are) and therefore 
> a density plot is generated by default. Removing these lines the 
> behaviour is like the one in version 1.2.1 and earlier. 
> Is there an alternative doing this with the new version?
> And what about the border color parameter in barplot?

Argh! This just goes to prove how hard it is to fix one bug without
introducing another.... 

The two types of fuzz in hist.default should not be of the same size! 
Try setting the multiplier in "diddle" to a smaller value, like 1e-12.
Either that or we should test for equidistant breaks before adding the
fuzz. 

It only happens with user-specified breaks, though, and the error
message with freq=T is of course ignorable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar  5 15:17:03 2001
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 5 Mar 2001 09:17:03 -0600 (CST)
Subject: [Rd] passing pointer types via .C calls
In-Reply-To: <3AA2CE5D.D00E9052@cmis.csiro.au> from Richard Beare at "Mar 5,
 2001 09:23:09 am"
Message-ID: <200103051517.f25FH3X26098@muskrat.stat.umn.edu>

Richard Beare wrote:
> Hi,
> this relates to my earlier message about external references and
> finalizers. I was experimenting over the weekend and now suspect that
> the appropriate solution to my problem will be to have a special case in
> the code that handles the .C call so that external references are
> handled appropriately - I guess that a pointer to the reference should
> be passed to the C code. As I've never experimented with the R internals
> before I thought that I had better check peoples opinion. Does this
> approach break anything in the work the Luke Tierney has been doing?
> I've only had a quick look so far so I'm not really certain how the code
> that handling the .C call is meant to work. I have successfully passed
> the pointer to the external reference to my code, but I'm really not
> sure about how the conventions used for this kind of thing - who should
> I be talking to about it?
> 
> All advice welcome....
> 

I am a little confused about exactly how you are doing things but
maybe the following will help. Or not :-)

To let the R memory manager manage your external object you need to

	create a *single* R object that represents your external one

	only reference your external object through its R representative

That way once the memory manager finds that it is not possible to
access the R representative from R any more the it knows that it is
safe for your external object to be reclaimed, using say the
reclamation code you register as a finalizer.

In languages like Java where objects are passed by reference there
isn't much more to it--any object can have a finalizer attached to it
(either via a finalize mehtod or using the weak reference mechanism).

In R things are a bit more complicated because (most) objects are
passed by value.  So if you do

	x <- some calculation that yields a numeric
	...
	y <- x

then all that is guaranteed is that y refers to a value with the same
numeric contents (and attributes and the like) but not necessarily to
the same physical object in memory.  It might be the same or it might
be a copy.  So if you represent your external object as a numeric
containing some encoding of the pointer value and do

	x<-NewExternalObject()
        ...
	y<-x

then y will contain the same pointer value but may not reference the
same internal R object.  If it does not, and there are no more
references to the original object, and a finalizer was attached to the
original object, then your external object may have been reclaimed
before you use y, and then .... Using a standard numeric object to
represent external objects means you cannot quarantee that there is a
*single* R object to represent your external one.

This is the reason for a special external pointer object.  These
things are never copied, they are passed by reference. (There are a
few other objects that are also always passed by reference:
environments and symbols). This guarantees the one-to-one
correspondence between the R representation and the external object
that you need to get the memory management to work.

How you get things from C to R and back (.Call, .C, whatever) doesn't
really matter.  What matters is that you use a representation in R
that will be passed by reference.

Hope that helps

luke
 
-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Mar  5 17:04:35 2001
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 5 Mar 2001 18:04:35 +0100 (MET)
Subject: [Rd] Wrong sign for Pearson residuals (PR#862)
Message-ID: <200103051704.SAA01343@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: 1.2.1
OS: Linux + NT
Submission from: (NULL) (141.211.66.172)


Consider the following data from McCullagh and Nelder:

> clot
   time conc lot
1   118    5 one
2    58   10 one
3    42   15 one
4    35   20 one
5    27   30 one
6    25   40 one
7    21   60 one
8    19   80 one
9    18  100 one
10   69    5 two
11   35   10 two
12   26   15 two
13   21   20 two
14   18   30 two
15   16   40 two
16   13   60 two
17   12   80 two
18   12  100 two
> g <- glm(time ~ log(conc)*lot, Gamma, clot)
> residuals(g)
         1          2          3          4          5          6          7 
-0.0400835  0.0864112  0.0490090  0.0290499 -0.0384659  0.0011126 -0.0286959 
         8          9         10         11         12         13         14 
-0.0375571 -0.0263724 -0.0292475  0.0637151  0.0394632 -0.0175449  0.0143592 
        15         16         17         18 
 0.0103035 -0.0557378 -0.0466764  0.0171410 
> residuals(g,type="pearson")
         1          2          3          4          5          6          7 
 0.0395493 -0.0889174 -0.0498126 -0.0293318  0.0379742 -0.0011130  0.0284220 
         8          9         10         11         12         13         14 
 0.0370884  0.0261410  0.0289630 -0.0650753 -0.0399839  0.0174424 -0.0144280 
        15         16         17         18 
-0.0103389  0.0547070  0.0459530 -0.0172391 

The Pearson residuals have the wrong sign. It seems the sign is taken from the 
working residuals. The sign is reversed because the inverse link function
used in this example. The problem could be easily fixed by taking the sign from

the response residuals.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 21:20:10 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 22:20:10 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:53:34 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk> <x266hp4041.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2pufvj4l1.fsf@blueberry.kubism.ku.dk>


OK, I decided that it was definitely better than the original this
way. Committed for 1.3.0.

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> diff -u -r1.85 coerce.c
> --- src/main/coerce.c   2001/01/15 14:52:09     1.85
> +++ src/main/coerce.c   2001/03/04 22:46:27
> @@ -1749,11 +1749,13 @@
>      if (isNull(el))
>         return el;
>      if (CAR(el) == R_DotsSymbol) {
> -       h = findVar(CAR(el), rho);
> +       h = findVarInFrame(rho, CAR(el));
>         if (h == R_NilValue)
>             return substituteList(CDR(el), rho);
>         if (TYPEOF(h) != DOTSXP) {
> -           if (h == R_MissingArg)
> +           if (h == R_UnboundValue)
> +               return el;
> +           if( h == R_MissingArg)
>                 return substituteList(CDR(el), rho);
>             error("... used in an incorrect context");
>         }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 08:35:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Mar 2001 08:35:10 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103050832.KAA01502@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>

[Moved to R-devel, as more appropriate.]

On Mon, 5 Mar 2001, Jari Oksanen wrote:

> Canberra distance is defined in function `dist' (standard library `mva') as
>
> sum(|x_i - y_i| / |x_i + y_i|)
>
> Obviously this is undefined for cases where both x_i and y_i are zeros.  Since
> double zeros are common in many data sets, this is a nuisance.  In our field
> (from which the distance is coming), it is customary to remove double zeros:
> contribution to distance is zero when both x_i and y_i are zero.  Could it be
> possible to have this kind of feature in R as well?
>
> It seems that this would do the trick without breaking applications where
> double zeros do not occur:

I am sure we should do something, but is this exactly right?  From dist()
in the R-devel version (1.3.x, eventually) I have enabled the handling of
missing values.  With this solution, identically zero elements contribute
zero to the distance, and are not regarded as missing.  Canberra is
similar to binary, where x_i = y_i = 0 is treated as equivalent to
missing.  The issue is if count should be incremented if
sum == 0.0 or not.

A related issue is the test (sum > 0.0).  I guess there are potential
problems with optimization on machines that use extended-precision
arithmetic, where sum might be non-zero in a register but zero if stored.
Not sure if that can actually happen, but a tolerance (e.g. machar's
xmax) is usually safer.


>
> --- R-1.2.2/src/appl/distance.c	Sun Oct 15 18:13:25 2000
> +++ R-work/src/appl/distance.c	Mon Mar  5 10:16:53 2001
> @@ -93,5 +93,5 @@
>  double R_canberra(double *x, int nr, int nc, int i1, int i2)
>  {
> -    double dist;
> +    double dist, sum;
>      int count, j;
>
> @@ -100,5 +100,7 @@
>      for(j=0 ; j<nc ; j++) {
>  	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> -	    dist += fabs(x[i1] - x[i2])/fabs(x[i1] + x[i2]);
> +	    sum = fabs(x[i1] + x[i2]);
> +	    if (sum > 0.0)
> +		dist += fabs(x[i1] - x[i2])/sum;
>  	    count++;
>  	}
>
>
>
> Best wishes, Jari Oksanen
> --
> Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
> Ph. +358 8 5531526 (job), mobile +358 40 5136529
> email jari.oksanen@oulu.fi, homepage http://cc.oulu.fi/~jarioksa/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jarioksa@cc.oulu.fi  Tue Mar  6 09:16:20 2001
From: jarioksa@cc.oulu.fi (Jari Oksanen)
Date: Tue, 06 Mar 2001 11:16:20 +0200
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: Message from Prof Brian D Ripley <ripley@stats.ox.ac.uk>
 of "Tue, 06 Mar 2001 08:35:10 GMT." <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>
Message-ID: <200103060916.LAA27821@pc112145.oulu.fi>


ripley@stats.ox.ac.uk said:
> [Moved to R-devel, as more appropriate.]

This means that I probably have to subsribe (momentarily) for R-devel which I 
have regarded as too technical for non-developer like me.


ripley@stats.ox.ac.uk said:
> I am sure we should do something, but is this exactly right?

I am not sure either: it is right for me in my present applications, but I 
think it may not be right in general.  I used dist() for community data, where 
zero *is* zero (not only approximately zero floating point number) and means 
that the species is absent, and of course, all numbers are positive or zeros.  
Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1 
would yield 2/0 which probably shouldn't be regarded as zero, but rather as 
NaN.  So a better test would be for above-zero numerator or explicitly for 
both x_i && y_i.

ripley@stats.ox.ac.uk said:
>  The issue is if count should be incremented if sum == 0.0 or not.

I don't know, and I don't have Lance & Williams 1967 to check. However, more 
recent papers by Canberra people do *not* increment count for double-zeros 
(Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure 
of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the 
really *correct* solution or what are the arguments for incrementing or not 
incrementing count. At least not incrementing means that count varies with 
pairs of observations instead of being a simple down-scaling by a constant for 
the entire matrix.  However, probably the original Lance & Williams choice was 
to increment only for sum > 0.  Some other people may have better libraries to 
check both the choice and the argument (I may have a look there, but I would 
be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for 
incrementing count would need testing above-zero denominator which begins to 
look ugly coding if we need testing for numerator as well.

In community ecology data, the number of species per site (= non-zero values 
per column) is a valid statistic of something, but the total number of species 
in a data set (= number of rows in the matrix) increases with the size of the 
sample set.  So the data is the more infested with zeros the larger the data 
set is.  I guess this the argument here for incrementing only for 
non-double-zeros: the count is dependent only on the pair compared instead of 
other observations not involved in this comparison.  On the other hand, I do 
not understand why you need to divide at all instead of using only the sum 
(this formulation occurs as well in literature).

As a quick solutions with the original 1.2.2 code  I replaced:

> str(dist(kasvit, method="can"))
Class 'dist'  atomic [1:153] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...
....
with a dirty hack:
> str(dist(kasvit+.Machine$double.eps, method="can"))
Class 'dist'  atomic [1:153] 49.2 61.7 50.9 52.1 60.1 ...

which certainly increments count for every pair, although it shouldn't.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 09:40:30 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 09:40:30 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103060916.LAA27821@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060930001.7798-100000@toucan.stats>

On Tue, 6 Mar 2001, Jari Oksanen wrote:

> ripley@stats.ox.ac.uk said:
> > [Moved to R-devel, as more appropriate.]
>
> This means that I probably have to subsribe (momentarily) for R-devel which I
> have regarded as too technical for non-developer like me.

We'll keep you on the Cc: list.  Normally things like this are on R-devel,
as they are specialized.

> ripley@stats.ox.ac.uk said:
> > I am sure we should do something, but is this exactly right?
>
> I am not sure either: it is right for me in my present applications, but I
> think it may not be right in general.  I used dist() for community data, where
> zero *is* zero (not only approximately zero floating point number) and means
> that the species is absent, and of course, all numbers are positive or zeros.
> Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1
> would yield 2/0 which probably shouldn't be regarded as zero, but rather as
> NaN.  So a better test would be for above-zero numerator or explicitly for
> both x_i && y_i.

I think it should be Inf, and was going to comment that was another
problem.

> ripley@stats.ox.ac.uk said:
> >  The issue is if count should be incremented if sum == 0.0 or not.
>
> I don't know, and I don't have Lance & Williams 1967 to check. However, more
> recent papers by Canberra people do *not* increment count for double-zeros
> (Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure
> of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the
> really *correct* solution or what are the arguments for incrementing or not
> incrementing count. At least not incrementing means that count varies with
> pairs of observations instead of being a simple down-scaling by a constant for
> the entire matrix.  However, probably the original Lance & Williams choice was
> to increment only for sum > 0.

Note count is only relevant if count < nc, and the code in 1.2.2 is wrong:
it should have been

    if(count != nc) dist /= ((double)count/nc);

Fortunately, it was never used.

> Some other people may have better libraries to
> check both the choice and the argument (I may have a look there, but I would
> be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for
> incrementing count would need testing above-zero denominator which begins to
> look ugly coding if we need testing for numerator as well.

You do anyway to get 2/0 different from 0/0.  We can code any solution,
and this is simple and clean compared to, say, scan.c!

I am going to implement that x1=x1=0 is equivalent to missing, and that
x1=+1, x2=-1 gives 2/0 = Inf.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar  6 15:33:20 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 06 Mar 2001 10:33:20 -0500
Subject: [Rd] pac2bin
Message-ID: <3AA50340.ED03EAD7@bank-banque-canada.ca>


I sometimes wonder how difficult it would be to set up an email system, like the
netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
packages. Has anyone every thought about this? I guess the main use would be for
Windows, about which I know almost nothing, so I won't volunteer myself.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 16:21:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 16:21:57 +0000 (GMT)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103061610340.8440-100000@toucan.stats>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.

If it all worked without a hitch, yes.  Many do not: for example several
need to be configured manually (without instructions, either) as their
configure scripts do not work under Windows (or use Unix-specific paths).
The real problems are packages that fail make pkgcheck-foo, e.g.
because they have par(ask=T) and Windows is using smaller buffers.
And then there are those which use data directories in unintended ways so
they cannot be zipped ....

Also, some of building has to be done under Windows, so one would need a
Windows server running.

There are ideas to ease this.  Peter D and I have talking about
cross-compiling and using Wine or Win4lin.  A couple of people are
exploring volunteering to help with or automate Windows builds.
When shortly I actually have my own suitable box (a dual PIII Linux box)
on the Internet, I will explore too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Mar  6 16:23:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 6 Mar 2001 08:23:35 -0800 (PST)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103060821290.53780-100000@homer06.u.washington.edu>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>

There are security issues, since a configure script can do anything,
as can R CMD check.

Also, I believe quite a few packages require hand-configuring of some sort
under Windows (another reason for the increasing workload).

It might be possible, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Mar  6 20:10:26 2001
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 6 Mar 2001 15:10:26 -0500
Subject: [Rd] pac2bin
References: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <02ca01c0a679$7c52aae0$0201a8c0@Workgroup>

Hi

I wonder if I could contribute in some way as grateful user of R and as a
Windows NT user. It could also be useful to know that I have a high speed
link to the Internet.

I would gladly give up CPU time to build binary packages for Windows if this
can help others. I understand that some package(s) might not build out of
the box as some of you have pointed out but I have no doubt a solution can
be found.

Thanks for your time and effort.

Yves Gauvreau


----- Original Message -----
From: "Paul Gilbert" <pgilbert@bank-banque-canada.ca>
To: "R-devel" <R-devel@stat.math.ethz.ch>
Sent: Tuesday, March 06, 2001 10:33 AM
Subject: [Rd] pac2bin


>
> I sometimes wonder how difficult it would be to set up an email system,
like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary
versions of
> packages. Has anyone every thought about this? I guess the main use would
be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>
> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ian@darwinsys.com  Wed Mar  7 00:50:06 2001
From: ian@darwinsys.com (ian@darwinsys.com)
Date: Wed, 7 Mar 2001 01:50:06 +0100 (MET)
Subject: [Rd] src/main/arithmetic.c on OpenBSD (PR#863)
Message-ID: <200103070050.BAA17436@pubhealth.ku.dk>

First, let me say how glad I am to discover R! As a former user of S
at the University of Toronto and, briefly S-Plus from StatSci (I had
a binary version of that on Slolaris for a while), I was really glad
to find the "R" project.

This is perhaps not your bug, but I did have one minor glitch in
compiling R. OpenBSD 2.8's math.h does not export the "struct
exception" unless you define __LIBM_PRIVATE. The attached patch is
all that is needed to make it compile. Feel free to apply this patch
in future releases, or not (maybe with "#ifdef __OpenBSD__" around it).

Again, thanks for the software.

Ian Darwin
ian@darwinsys.com

--- src/main/arithmetic.c.orig	Tue Mar  6 17:58:18 2001
+++ src/main/arithmetic.c	Tue Mar  6 18:27:38 2001
@@ -22,7 +22,9 @@
 #include <config.h>
 #endif
 
-#include "Defn.h"		/*-> Arith.h */
+#define __LIBM_PRIVATE	/* OpenBSD -> for definition of "struct exception" */
+#include "Defn.h"		/*-> Arith.h -> math.h */
+#undef __LIBM_PRIVATE	
 #define MATHLIB_PRIVATE
 #include <Rmath.h>
 #undef MATHLIB_PRIVATE

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Wed Mar  7 06:15:04 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103070615.HAA02646@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

none

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 860 *
Subject: Context problem with ... and rbind
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sat, 3 Mar 2001 20:59:04 +0000 (GMT)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)
* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Wed Mar  7 10:18:33 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Wed, 7 Mar 2001 11:18:33 +0100 (MET)
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
Message-ID: <200103071018.LAA22110@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: rw1022
OS: Windows Me
Submission from: (NULL) (216.175.126.55)


When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that is longer
than $lc-3 (=13) characters long, it repeats the package name on line two.

Example: Now it generates an output like:
com.braju.graphics
com.braju.graphics                Bla bla bla...

But, I believe it should generate:
com.braju.graphics
                Bla bla bla...

To solve this minor bug, just include a line '$old=""'. See line 49 below.

maketitle.pl:
L42: $S = '';
L43: $lc = 16;
L44: $rc = 72;
L45: $old = $package;
L46: $len = length($old);
L47: if ($len > $lc - 3) {
L48:   $S = $old;
L49:   $old = "";                    ### Forgot to this line.
L50:   for ($j = 1; $j < $lc; $j++) {
L51:     $old = $old . ' ';
L52:   }
L53: }
L54: else {
L55:   for ($j = 1; $j < $lc - $len; $j++) {
L56:     $old = $old . ' ';
L57:   }
L58: }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar  7 10:47:11 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Mar 2001 11:47:11 +0100
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
In-Reply-To: <200103071018.LAA22110@pubhealth.ku.dk>
References: <200103071018.LAA22110@pubhealth.ku.dk>
Message-ID: <15014.4527.291001.545417@mithrandir.hornik.net>

>>>>> henrikb  writes:

> Full_Name: Henrik Bengtsson
> Version: rw1022
> OS: Windows Me
> Submission from: (NULL) (216.175.126.55)


> When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that
> is longer than $lc-3 (=13) characters long, it repeats the package
> name on line two.

> Example: Now it generates an output like:
> com.braju.graphics
> com.braju.graphics                Bla bla bla...

> But, I believe it should generate:
> com.braju.graphics
>                 Bla bla bla...

> To solve this minor bug, just include a line '$old=""'. See line 49
> below.

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar  7 17:09:01 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 7 Mar 2001 18:09:01 +0100 (MET)
Subject: [Rd] axis(...,las=1) breaks postscript code in certain cases (PR#865)
Message-ID: <200103071709.SAA29219@pubhealth.ku.dk>

A colleage of mine (Roland Brun) has found the following 
reproducible problem: 

  In some circumstances, incorrect (for gv/gs) PostScript seems to be
  created when "las = 1".

  {for many versions of R (Linux) at least}

The following code shows you the symptom
    (gv pops up an error message window) :


##- Generate data 
y1 <- 10^seq(0,6)   ##- positive exponents 
y2 <- 10^seq(-4,2)  ##- including negative exponents 

postscript("test.ps")

par(mfrow=c(2,2),mar=c(3,6,0,0)+0.1,oma=c(3,1,1,1),mgp=c(4.5,1,0))

##- Plot1: works perfectly (y1 and las=0)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=0) 

##- Plot2: works perfectly (y1 and las=1)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=1) 

##- Plot3: works perfectly (y2 and las=0)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=0) 

##- Plot4: breaks postscript code (y2 and las=1)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=1) 

dev.off()
system("gv test.ps")




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 03
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 18:23:03 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy.Keitt@StonyBrook.Edu)
Date: Wed, 7 Mar 2001 19:23:03 +0100 (MET)
Subject: [Rd] mkString (PR#866)
Message-ID: <200103071823.TAA29687@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.2x
OS: Linux
Submission from: (NULL) (129.49.19.70)


The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
pointer.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar  7 18:41:09 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 7 Mar 2001 10:41:09 -0800 (PST)
Subject: [Rd] mkString (PR#866)
In-Reply-To: <200103071823.TAA29687@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>

On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:

> Full_Name: Tim Keitt
> Version: 1.2x
> OS: Linux
> Submission from: (NULL) (129.49.19.70)
>
>
> The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
> pointer.


Don't do that, then?

It's supposed to be passed a zero-terminated string, so it doesn't seem
unreasonable for it to assume that it can dereference its argument. The C
library functions don't in general accept NULL pointers as string
arguments.

I suppose a check for NULL would be fairly harmless, though.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:09:13 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:09:13 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA68759.9040203@StonyBrook.Edu>

Thomas Lumley wrote:

> 
> Don't do that, then?

Indeed, it could be a feature. :-)  (That said, I do prefer functions that handle all possible values of a type.)

T.

> 
> It's supposed to be passed a zero-terminated string, so it doesn't seem
> unreasonable for it to assume that it can dereference its argument. The C
> library functions don't in general accept NULL pointers as string
> arguments.
> 
> I suppose a check for NULL would be fairly harmless, though.
> 
> 	-thomas
> 
> Thomas Lumley			Asst. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 19:44:19 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 14:44:19 -0500
Subject: [Rd] CRAN Windows links
Message-ID: <3AA68F93.F17D890@bank-banque-canada.ca>

The links to windows-9x and windows-NT on the CRAN Windows download page
seem to be broken. I have the impression that the files are all in the
base directory, for which the link works.

Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:53:36 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:53:36 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA691C0.9040305@StonyBrook.Edu>

Thomas Lumley wrote:

> On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:
>
> Don't do that, then?
> 

Actually, on second thought, I think I agree with you.  The caller 
should insure the pointer is valid.  I'm just cranky having to do 
pointer hand-holding for C after enjoying nice languages (like R!) with 
real string types.  **sigh**

T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 20:38:03 2001
From: mendes@cse.ucsc.edu (mendes@cse.ucsc.edu)
Date: Wed, 7 Mar 2001 21:38:03 +0100 (MET)
Subject: [Rd] unable to open the base package (PR#867)
Message-ID: <200103072038.VAA00253@pubhealth.ku.dk>


Hi.

I'm trying to use R that someone installed in his own home directory
(which is located on a common filesystem). Now, he is able to use it with
no problems, but when I try to run it I get the following messages (the
first line is just the command line, and the way I call the program):

an2 1> /projects/draper/R-1.2.1/bin/R
cannot find system Renviron
R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Fatal error: unable to open the base package


The system we are running is SunOS Release 5.8 Generic.

Can you help us in any way?

	Bruno Mendes.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:00:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:00:45 +0000 (GMT)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <200103072038.VAA00253@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>

On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:

>
> Hi.
>
> I'm trying to use R that someone installed in his own home directory
> (which is located on a common filesystem). Now, he is able to use it with
> no problems, but when I try to run it I get the following messages (the
> first line is just the command line, and the way I call the program):
>
> an2 1> /projects/draper/R-1.2.1/bin/R
> cannot find system Renviron
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> Fatal error: unable to open the base package
>
>
> The system we are running is SunOS Release 5.8 Generic.
>
> Can you help us in any way?

Do you permission to read the files in his R installation?
Looks not.

The current version is 1.2.2, BTW.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:05:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:05:50 +0000 (GMT)
Subject: [Rd] CRAN Windows links
In-Reply-To: <3AA68F93.F17D890@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103072103050.16251-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

[...]
> Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Shhh!  We were hoping no one would use it.

Seriously, the plan was to abandon WinHelp once CHTML became popular, but
it seems some users prefer the older system. We don't advertise it, and
there is a fair chance it will be abandoned fairly soon -- certainly it
will not be fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 21:55:46 2001
From: mendes@cse.ucsc.edu (Bruno Mendes)
Date: Wed, 7 Mar 2001 13:55:46 -0800 (PST)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10103071354510.6746-100000@an2.cse.ucsc.edu>


As silly as it might seem, that was right.

Thanks very much Prof. Ripley.

	Bruno Mendes.

On Wed, 7 Mar 2001, Prof Brian D Ripley wrote:

> On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:
> 
> >
> > Hi.
> >
> > I'm trying to use R that someone installed in his own home directory
> > (which is located on a common filesystem). Now, he is able to use it with
> > no problems, but when I try to run it I get the following messages (the
> > first line is just the command line, and the way I call the program):
> >
> > an2 1> /projects/draper/R-1.2.1/bin/R
> > cannot find system Renviron
> > R : Copyright 2001, The R Development Core Team
> > Version 1.2.1  (2001-01-15)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type `license()' or `licence()' for distribution details.
> >
> > R is a collaborative project with many contributors.
> > Type `contributors()' for more information.
> >
> > Type `demo()' for some demos, `help()' for on-line help, or
> > `help.start()' for a HTML browser interface to help.
> > Type `q()' to quit R.
> >
> > Fatal error: unable to open the base package
> >
> >
> > The system we are running is SunOS Release 5.8 Generic.
> >
> > Can you help us in any way?
> 
> Do you permission to read the files in his R installation?
> Looks not.
> 
> The current version is 1.2.2, BTW.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 22:53:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 17:53:23 -0500
Subject: [Rd] syskern
Message-ID: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>

The bug list summary reported an error in syskern which I finally
realized is due to a badly chosen example in the help rather an error in
the code. However, I have taken the opportunity to re-evaluate  what I
have been trying to do with syskern, since some parts may no longer be
important. Since syskern was intended to address certain problems in
package development I would appreciate other opinions on whether these
are still concerns.

The package provides a standardized way to deal with some programming
differences between R and S (e.g. is.R() and is.S() ) and their various
versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
get the point), and also standardized ways to identify  different
operating systems in order for a program to take any operating system
specific action.  Dealing with the  R and S differences I think is still
fairly important although I can no doubt abandon some versions. However,
R has now evolved to the point where it actually deals with most of the
operating system differences (at least the ones that there is much hope
of dealing with).

My main use of the operating system determination has been with Splus to
distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
compiled code. I don't think this is an issue in R, but I haven't tried
to load a windows dll so I don't really know. The point of the syskern
code is to have a function is.Sun5() that works in R and in S and looks
after the fact that the R code needed to figure this out is different
from the S code needed to figure this out. These examples may be relics
but there is a possibility new variants will appear. So the question
then is: Are there still needs for an R (or S) program to use (rather
than just report) information about the operating system it is running
on?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Thu Mar  8 06:24:02 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Thu, 8 Mar 2001 07:24:02 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080624.HAA01643@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R 1.2.2 for Windows
OS: Windows Me
Submission from: (NULL) (216.175.124.217)


I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
that the png graphical device driver is corrupt. Previous versions have worked
just fine for me.

EXAMPLE:
> png("test.png")
> plot(1,1)
> dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible

WORK AROUND:
Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
by ditto found in version 1.2.1 (rw1021b1.zip).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 06:44:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 07:44:10 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080644.HAA01708@pubhealth.ku.dk>

Just to be clear, this is a problem only with the precompiled versions on
CRAN, and the sources for Rbitmap.dll are unchanged since 1.2.0.  Indeed,
compiling against libpng-1.0.6 works for me, although it is no longer
current.

Also, it is the build that is corrupt not the png device driver (which is
not in that DLL).

On Thu, 8 Mar 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: R 1.2.2 for Windows
> OS: Windows Me
> Submission from: (NULL) (216.175.124.217)
>
>
> I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
> that the png graphical device driver is corrupt. Previous versions have worked
> just fine for me.
>
> EXAMPLE:
> > png("test.png")
> > plot(1,1)
> > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible
>
> WORK AROUND:
> Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
> by ditto found in version 1.2.1 (rw1021b1.zip).

Alternatively, build from the sources.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 07:00:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Mar 2001 07:00:48 +0000 (GMT)
Subject: [Rd] syskern
In-Reply-To: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103080648400.16587-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

> The bug list summary reported an error in syskern which I finally
> realized is due to a badly chosen example in the help rather an error in
> the code.

It fails Rcmd check as a result. It also reports incorrect results
on Windows.

> However, I have taken the opportunity to re-evaluate  what I
> have been trying to do with syskern, since some parts may no longer be
> important. Since syskern was intended to address certain problems in
> package development I would appreciate other opinions on whether these
> are still concerns.
>
> The package provides a standardized way to deal with some programming
> differences between R and S (e.g. is.R() and is.S() ) and their various
> versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
> get the point), and also standardized ways to identify  different
> operating systems in order for a program to take any operating system
> specific action.  Dealing with the  R and S differences I think is still
> fairly important although I can no doubt abandon some versions. However,
> R has now evolved to the point where it actually deals with most of the
> operating system differences (at least the ones that there is much hope
> of dealing with).

You might want to use the SLanguage package to cover over R/S differences
(although often the code can be written to work on either).

> My main use of the operating system determination has been with Splus to
> distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
> compiled code. I don't think this is an issue in R, but I haven't tried
> to load a windows dll so I don't really know. The point of the syskern

Not an issue with R, and also not an issue in S-PLUS for at least five
years (use dyn.load.lib in S-PLUS 3.4/4.x/2000, nothing in 5.0/5.1/6.0 as
compiled code is loaded automatically).

> code is to have a function is.Sun5() that works in R and in S and looks
> after the fact that the R code needed to figure this out is different
> from the S code needed to figure this out. These examples may be relics
> but there is a possibility new variants will appear. So the question
> then is: Are there still needs for an R (or S) program to use (rather
> than just report) information about the operating system it is running
> on?

Very little in my experience, and what is needed is in .Platform and
.Machine.

As Fritz Leisch point out recently, the package sources on CRAN are for all
platforms, and should work equally on Unix, Linux, Windows and Macintosh.
Bundle dse is the only exception I know of.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Thu Mar  8 07:34:51 2001
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Thu, 8 Mar 2001 08:34:51 +0100 (MET)
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
Message-ID: <200103080734.IAA02098@pubhealth.ku.dk>

Hello Bug people,

I have an unexpected behavior and am unsure whether the problem is in my
thinking, my implementation or the program R.

Basically I get two different answers depending on how I call a function
which takes other functions as arguments as indicated below.
To me it should make no difference if f is a function that returns the
function g then z(f(x)) whould give the same as
y<- f(x)
z(y)
but I appear to get different answers as below. I have not distilled the
problem down to something you can replicate in total but have I done
something obviously wrong ?

Regards
Paul White 
ps I just checked with 1.2.2 and it still has the same behavior.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R


> risk <- function(f,g,H,lower.limits,upper.limits) 
+ {   prob.of.fracture <-  function(x)
+       { a  <- x[1] 
+         kc <- x[2] 
+         f(a) * g(kc) * H(a,kc) }
+
adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
ps=1e-3) }
>
risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
[1] 1.999471
       value       relerr       minpts       lenwrk        ifail 
    28.39852 0.0003455776          627         2803            0 
> 
> eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
[1] 1.999471
> risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
       value       relerr       minpts       lenwrk        ifail 
5.461088e-13 0.0006449058          741         2803            0 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar  8 07:56:06 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 8 Mar 2001 08:56:06 +0100
Subject: [Rd] Re: Download problems with Windows version
In-Reply-To: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
References: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
Message-ID: <15015.15126.497225.787464@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 8 Mar 2001 08:42:21 +0100 ,
>>>>> marcel baumgartner (mb) wrote:

  > Hello,
  > I tried to download the Windows version of R at the cran site,
  > but I cannot get down to the files. When clicking on the on
  > any of the windows sources, you create strange links:

  > http://cran.r-project.org/bin/windows/windows-NT

  > then, clicking again it becomes

  > http://cran.r-project.org/bin/windows/windows-NT/windows-NT

  > and so on ...

  > The same happens at the mirror site at ETH Zurich. I use IE 5.5.


>>>>> On Wed, 07 Mar 2001 14:44:19 -0500,
>>>>> Paul Gilbert (PG) wrote:

  > The links to windows-9x and windows-NT on the CRAN Windows download page
  > seem to be broken. I have the impression that the files are all in the
  > base directory, for which the link works.

  > Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.



These are recursive links for backwards compatibilty, and have been in
place for a couple of months now. Simply go to

	http://cran.r-project.org/bin/windows/base
	http://cran.r-project.org/bin/windows/contrib

for the base sytem or contributed packages, respectively.

Older versions of R expect to find the contributed packages in 

	http://cran.r-project.org/bin/windows/windows-NT/contrib

and removing the links would break install.packages() there. I'll add
some message in the directory to make things clearer.

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 09:23:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 10:23:50 +0100
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
In-Reply-To: Paul.White@dsto.defence.gov.au's message of "Thu, 8 Mar 2001 08:34:51 +0100 (MET)"
References: <200103080734.IAA02098@pubhealth.ku.dk>
Message-ID: <x2elw8fwbd.fsf@blueberry.kubism.ku.dk>

Paul.White@dsto.defence.gov.au writes:

> Hello Bug people,
> 
> I have an unexpected behavior and am unsure whether the problem is in my
> thinking, my implementation or the program R.
> 
> Basically I get two different answers depending on how I call a function
> which takes other functions as arguments as indicated below.
> To me it should make no difference if f is a function that returns the
> function g then z(f(x)) whould give the same as
> y<- f(x)
> z(y)
> but I appear to get different answers as below. I have not distilled the
> problem down to something you can replicate in total but have I done
> something obviously wrong ?

Lazy evaluation sometimes plays tricks on the unsuspecting. In the
first case, eifs.at.time.using.density(5000,eifs,1e-4,2) is evaluated
when adapt first calls prob.of.fracture, in the other it is of course
evaluated from the start. If eifs.at.time.using.density is dependent
on values that might have changed...

You're not showing us eifs.at.time.using.density, so it is difficult
to say whether you have a bug or not.

> > risk <- function(f,g,H,lower.limits,upper.limits) 
> + {   prob.of.fracture <-  function(x)
> +       { a  <- x[1] 
> +         kc <- x[2] 
> +         f(a) * g(kc) * H(a,kc) }
> +
> adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
> ps=1e-3) }
> >
> risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
> [1] 1.999471
>        value       relerr       minpts       lenwrk        ifail 
>     28.39852 0.0003455776          627         2803            0 
> > 
> > eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
> [1] 1.999471
> > risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
>        value       relerr       minpts       lenwrk        ifail 
> 5.461088e-13 0.0006449058          741         2803            0 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:20:21 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:20:21 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103081520.QAA10571@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Is this done with purpose...:

In R I get:
---
> as.numeric(" ")
[1] 0 

> as.integer(" ")
[1] 0 
---

While in the same in S-PLUS returns:
---
> as.numeric(" ")
[1] NA 

> as.integer(" ")
[1] NA
---

For my applications, the later (S-PLUS) definitely makes most sense, but you my
have some good reasons for your choose?
(Anyway it is quite dangers with these differences when porting applications).


Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:29:55 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081529.QAA10737@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Actually, this is not a bug, but a small remark about a way R is working that
makes trouble in porting the code to S.

If I run the following i R:
---
midl <- 4
attr(midl,"Object created") <- date()
dump("midl","midl.R")
---

I get a file like:
---
"midl" <-
structure(4, Object created = "Thu Mar 08 16:04:04 2001")
---

This works well inside R, but S-PLUS has trouble reading it, because S needs "
around a attribute with spaces. E.g. S-PLUS wants:

---
"midl" <-
structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
---

This last example reads well into both systems, so way not let R print out the
attributes names with "..."

Again - Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  8 15:33:45 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Mar 2001 10:33:45 -0500
Subject: [Rd] bug.report/mail
Message-ID: <3AA7A659.6B8F55DE@bank-banque-canada.ca>

One of the functions I would like to clean out of my syskern package is a program to
send mail. This is a common feature other programs (e.g. bug.report) may use so I
would like it to be included in R/base. I will volunteer to do this as it looks like
a fairly straightforward dissection of bug.report but I have some questions:

Has anyone done this already?

Is "mail" a good name or would something like "Sys.mail" be better?

Should I generate a diff relative to something or just files for src/library/base/R?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From niels.waller@home.com  Thu Mar  8 18:26:54 2001
From: niels.waller@home.com (niels Waller)
Date: Thu, 8 Mar 2001 10:26:54 -0800
Subject: [Rd] APM announcement
Message-ID: <NCBBKMNKKMFCIGDCHLDOGEHLCGAA.niels.waller@home.com>




Developers of R,

Hello.  My name is Niels Waller and I am the "Computer Program Exchange"
editor of Applied Psychological Measurement (APM).  APM is one of the top
journals in the field of psychometrics.  The journal publishes new
developments or interesting applications of psychometric methods.  It also
publishes brief (1 or 2 typeset pages) announcements of free programs that
would be of interest to our readership.


APM is described more fully at:

http://www.sagepub.co.uk/frame.html?http://www.sagepub.co.uk/journals/detail
s/j0071.html



As a long-time user of S-PLUS, I have fallen in love with R (in fact, I
prefer R for simulation work as it is often much faster for my problems) and
I am confident that many other social scientists/psychometricians will also
appreciate what R has to offer.  Therefore, I would like to invite someone
from the R development team to write a brief description of the program for
publication.

If anyone is interesting in this project they may contact me via the
information provided below.

Niels


*******************************************************
Niels Waller, Ph.D.
Director of Quantitative Methods and Evaluation
Department of Psychology and Human Development
Vanderbilt University
Phone: (615) 322-8380    email: niels.waller@vanderbilt.edu
QME Home page: http://www.vanderbilt.edu/quantmetheval/
*******************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 16:45:58 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 17:45:58 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081645.RAA11604@pubhealth.ku.dk>


> From: harald.fekjar@basalmed.uio.no
> Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
> 
> Full_Name: Harald Fekjr
> Version: 1.22
> OS: Windows 
> Submission from: (NULL) (158.36.132.220)
> 
> 
> Dear R developers
> 
> Actually, this is not a bug, but a small remark about a way R is working that
> makes trouble in porting the code to S.

It *is* a bug: see later.

> If I run the following i R:
> ---
> midl <- 4
> attr(midl,"Object created") <- date()
> dump("midl","midl.R")
> ---
> 
> I get a file like:
> ---
> "midl" <-
> structure(4, Object created = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This works well inside R, but S-PLUS has trouble reading it, because S needs "
> around a attribute with spaces. E.g. S-PLUS wants:

My version of R can't read that either.  Did you try it in R?
> source("midl.R")
Error in parse(file, n, text, prompt) : syntax error on line 2

Similarly,

> deparse(midl)
[1] "structure(4, Object created = \"Thu Mar  8 16:24:16 2001\")"

cannot be re-parsed.

> ---
> "midl" <-
> structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This last example reads well into both systems, so way not let R print out the
> attributes names with "..."

Yes, it should do.  However, the code (in deparse.c) is pretty complicated
and used recursively.  I think I have a solution ... still testing.

Meanwhile, avoid attributes with non-standard S names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Thu Mar  8 17:26:29 2001
From: hfe@math.uio.no (hfe@math.uio.no)
Date: Thu, 8 Mar 2001 18:26:29 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081726.SAA11909@pubhealth.ku.dk>

On Thu, 8 Mar 2001, Prof Brian Ripley wrote:
> ...
> > around a attribute with spaces. E.g. S-PLUS wants:
>
> My version of R can't read that either.  Did you try it in R?

Dear Prof. Ripley

Actually, I did not (Sorry for incorrect reporting first time). I have now
tested it, and it is an R bug.

Sincerely
Harald Fekjaer
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Harald Fekjr                 |   E-mail:   harald.fekjar@basalmed.uio.no
Researcher                    |   Phone:    (+047) 22 85 10 76
University of Oslo, Norway    |   Homepage: http://www.uio.no/~hfe/
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 18:27:07 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 8 Mar 2001 19:27:07 +0100 (MET)
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <200103081827.TAA12196@pubhealth.ku.dk>

If a function needs to be passed as an argument to another function,
default arguments to the function being passed are lost.  Consider this
example:

fun1 <- function(x, A=c("power","constant")) {
  arg <- match.arg(A)
  cat(paste("A is:",paste(A,collapse=", "),"\narg is:",arg,"\n"))
  cat("formals:\n")
  print(formals())
  2*x
}

topfun <- function(x, Fun=fun1) {
  cat("\n>>>Called as fun1:\n")
  fun1(x)
  cat("\n>>>Called as Fun:\n")
  Fun(x,A="power")
  Fun2 <- fun1
  cat("\n>>>Called as Fun2:\n")
  Fun2(x,A="power")
}
cat("\n>>>>>>>>>>fun1\n")
print(topfun(2,fun1))

When run, this gives:

> source("C:/home/tasks/OPModels/TestBugs/demo.R")

>>>>>>>>>>fun1

>>>Called as fun1:
A is: power, constant
arg is: power
formals:
$x


$A
c("power", "constant")


>>>Called as Fun:
A is: power
arg is:
formals:
NULL

>>>Called as Fun2:
A is: power
arg is: power
formals:
$x


$A
c("power", "constant")

[1] 4
>

I included the assignment within topfun() because I originally thought the problem would apply to any assignment of a function as a value.
This is apparently incorrect.  I've sent this to r-bugs because it seems that this behavior would surely not have been intended.

I am running (actually, I'm still normally running 1.2.1, but I figured if I didn't check on 1.2.2, I'd find out this had been fixed :>)

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Windows 9x 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 18:43:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 19:43:56 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Thu, 8 Mar 2001 19:27:07 +0100 (MET)"
References: <200103081827.TAA12196@pubhealth.ku.dk>
Message-ID: <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting... 

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 19:30:33 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 08 Mar 2001 14:30:33 -0500
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <OFBFFAD3E9.4E8693DA-ON85256A09.006ADE75@rtp.epa.gov>


So, in my toy example, when I add the line Fun <- Fun after the first
invocation of Fun(), Fun finds the default args when invoked a second time.
That gives me an easy work around for the real problem where I encountered
this.  Thanks.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                  
                    Peter Dalgaard                                                                                
                    BSA                     To:     Woodrow Setzer/RTP/USEPA/US@EPA                               
                    <p.dalgaard@bios        cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk               
                    tat.ku.dk>              Subject:     Re: [Rd] surprising behavior of match.arg() (PR#872)     
                    Sent by:                                                                                      
                    pd@pubhealth.ku.                                                                              
                    dk                                                                                            
                                                                                                                  
                                                                                                                  
                    03/08/01 01:43                                                                                
                    PM                                                                                            
                                                                                                                  
                                                                                                                  




Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting...

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Mar  8 21:30:07 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 8 Mar 2001 22:30:07 +0100 (MET)
Subject: [Rd] long formulas in terms() (PR#873)
Message-ID: <200103082130.WAA13002@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.2.2
OS: Windows 95
Submission from: (NULL) (142.52.81.1)



I need to use the "terms()" function to decompose a formula.
The function seems to work for small formulas, but not for long formulas.

##############################
#The following works!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4)) ~ precip*I(Tmax^2)
terms(form)

#But enlarging the left-hand side of the formula causes an error!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
terms(form) # ERROR
##############################

I noticed that when the left-hand side term of the formula is
too large to be written on one line, an error occurs in terms().
However, increasing the line width by "options(width=200)" did
not solve the problem.

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.2            
year     2001           
month    02             
day      26             
language R              


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 21:51:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 22:51:50 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Peter Dalgaard BSA's message of "08 Mar 2001 19:43:56 +0100"
References: <200103081827.TAA12196@pubhealth.ku.dk> <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21ys8gc95.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > If a function needs to be passed as an argument to another function,
> > default arguments to the function being passed are lost.  Consider this
> > example:
> 
> Interesting... 
> 
> Apparently, sys.function() is still a promise after the  function has
> been called (and the promise obviously forced).
> Minimal example of same effect:
> 
> > f<-function()sys.function()
> > f()
> function()sys.function()
> > g<-delay(f)
> > g()
> <promise: 0x8b248b4>
> > g<-g
> > g()
> function()sys.function()

Fixed for 1.3.0.

(Not sure I'm happy with this yet. R_sysfunction works on the *call*
of the function, and if the head of the call is a LANGSXP - as in
h(x)(y) - it gets evaluated a second time, and I don't think that
is guaranteed to give the same function as the first time! We really
ought to keep a pointer to the function itself around too.)

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Mar  8 21:57:41 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 8 Mar 2001 13:57:41 -0800 (PST)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103081351320.141870-100000@homer10.u.washington.edu>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
<snip>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

The problem is in fixFormulaObject in terms.formula(). It uses deparse()
on the lhs of the formula.

A work-around is to change the line near the top of fixFormulaObject in
terms.formula from
	else deparse(form[[2]])
 to
	else deparse(form[[2]],width.cutoff=200)

but this may not be the final solution -- we should have something without
a width limit

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  9 07:13:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 9 Mar 2001 07:13:56 +0000 (GMT)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103090706010.8948-100000@auk.stats>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
> ##############################
> #The following works!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4)) ~ precip*I(Tmax^2)
> terms(form)
>
> #But enlarging the left-hand side of the formula causes an error!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
> terms(form) # ERROR
> ##############################
>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

You can edit fixFormulaObject in terms.formula and set

deparse(form[[2]], width.cutoff = 500)

This still has a limit, but a much higher one.  Or write a shorter lhs?

deparse has been changed since that function was written, I believe,
but both a long time ago.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  9 09:08:38 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 9 Mar 2001 10:08:38 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103090908.KAA16434@pubhealth.ku.dk>

>>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:

    harald> Full_Name: Harald Fekjr
    harald> Version: 1.22
    harald> OS: Windows 
    harald> Submission from: (NULL) (158.36.132.220)


    harald> Dear R developers

    harald> Is this done with purpose...:

    harald> In R I get:
    harald> ---
    >> as.numeric(" ")
    harald> [1] 0 

    >> as.integer(" ")
    harald> [1] 0 
    harald> ---

    harald> While in the same in S-PLUS returns:
    harald> ---
    >> as.numeric(" ")
    harald> [1] NA 

    >> as.integer(" ")
    harald> [1] NA
    harald> ---

    harald> For my applications, the later (S-PLUS) definitely makes most
    harald> sense, but you my have some good reasons for your choose?
    harald> (Anyway it is quite dangers with these differences when porting
    harald> applications).

Note that it's also for other ``blank like'' strings :

 > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
       \t \n \r 
  0  0  0  0  0 

Without having the time currently to investigate your suggested change,
I tend to agree.


    harald> Thanks for a wonderful program!

you're welcome!

    harald> Harald Fekjr, Oslo, Norway

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  9 09:15:50 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 9 Mar 2001 10:15:50 +0100
Subject: [Rd] bug.report/mail
In-Reply-To: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
Message-ID: <15016.40774.376518.961962@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> One of the functions I would like to clean out of my syskern
    PaulG> package is a program to send mail. This is a common feature
    PaulG> other programs (e.g. bug.report) may use so I would like it to
    PaulG> be included in R/base. I will volunteer to do this as it looks
    PaulG> like a fairly straightforward dissection of bug.report but I
    PaulG> have some questions:

    PaulG> Has anyone done this already?

yes,  bug.report()  *does* all this already (when system resources are
available), using getOption("mailer") and/or argument  `method = '

    PaulG> Is "mail" a good name or would something like "Sys.mail" be
    PaulG> better?


I think what we want is modularizing  bug.report()
by having it call a new  Sys.mail()
function passing it the subject, from & body  (and may be more).

A good idea!

    PaulG> Should I generate a diff relative to something or just files for
    PaulG> src/library/base/R?

I think useful would be to just modularize  bug.report() as indicated above

    PaulG> Paul Gilbert

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 09:46:15 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 10:46:15 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Fri, 9 Mar 2001 10:08:38 +0100 (MET)"
References: <200103090908.KAA16434@pubhealth.ku.dk>
Message-ID: <x2itljl1g8.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:
> 
>     harald> In R I get:
>     harald> ---
>     >> as.numeric(" ")
>     harald> [1] 0 
...
> 
> Note that it's also for other ``blank like'' strings :
> 
>  > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
>        \t \n \r 
>   0  0  0  0  0 
> 
> Without having the time currently to investigate your suggested change,
> I tend to agree.

We fixed the same problem in scan() recently. Particularly insidious
since SPSS codes missing with a single blank when exporting delimited
files...

The problem there was that we used strtod which returns 0 for
nonnumerics (what else can it do?) and then checked the rest of the
field with isBlankString - which was true of course. I'll have a look
and see if as.numeric is similar.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 10:29:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 11:29:14 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: Peter Dalgaard BSA's message of "09 Mar 2001 10:46:15 +0100"
References: <200103090908.KAA16434@pubhealth.ku.dk> <x2itljl1g8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2g0gnkzgl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The problem there was that we used strtod which returns 0 for
> nonnumerics (what else can it do?) and then checked the rest of the
> field with isBlankString - which was true of course. I'll have a look
> and see if as.numeric is similar.

It was. Fixed and committed for 1.3. (as.integer and as.complex too)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  9 14:47:08 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Mar 2001 09:47:08 -0500
Subject: [Rd] bug.report/mail
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca> <15016.40774.376518.961962@gargle.gargle.HOWL>
Message-ID: <3AA8ECEC.FE45E857@bank-banque-canada.ca>

>I think what we want is modularizing  bug.report()
>by having it call a new  Sys.mail()
>function passing it the subject, from & body  (and may be more).

Yes, that is exactly what I meant. Sorry if it wasn't clear.

Is the name Sys.mail() preferred to simply  mail()?

Should I go ahead or would someone else prefer to do it? (It looks trivial.)

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 10 01:24:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 10 Mar 2001 02:24:18 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103100124.CAA25085@pubhealth.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> Hello developers and users:
> 
> My system fails (the computer freezes) when I use the ncp  parameter,
> with the lower.tail=FALSE option in the qchisq function.
> 
> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

Yup, that's a bug. We have in pnchisq.c

48          for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) <
p; ux *= 2);
49          for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) >
p; lx *= 0.5);

but if we look at the opposite tail, we also need to reverse that
logic since pnchisq(x,...) is now decreasing in x. Otherwise the
algorithm will get stuck in one of the for loops.

(Mailed to r-bugs)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 13 09:43:54 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Mar 2001 10:43:54 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103130943.KAA16613@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> Kenneth Cabrera <krcabrer@epm.net.co> writes:
    >> Hello developers and users:
    >> 
    >> My system fails (the computer freezes) when I use the ncp  parameter,
    >> with the lower.tail=FALSE option in the qchisq function.
    >> 
    >> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

    PD> Yup, that's a bug. We have in pnchisq.c

    PD> 48   for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) < p; 
    PD> 	ux *= 2);
    PD> 49   for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) > p;
    PD> 	lx *= 0.5);

    PD> but if we look at the opposite tail, we also need to reverse that
    PD> logic since pnchisq(x,...) is now decreasing in x. Otherwise the
    PD> algorithm will get stuck in one of the for loops.

Now fixed for R-devel (to become 1.3.0), together with the "FIXME" comment
a few lines above.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From I.Wilson@maths.abdn.ac.uk  Tue Mar 13 12:58:58 2001
From: I.Wilson@maths.abdn.ac.uk (I.Wilson@maths.abdn.ac.uk)
Date: Tue, 13 Mar 2001 13:58:58 +0100 (MET)
Subject: [Rd] (PR#876)
Message-ID: <200103131258.NAA20109@pubhealth.ku.dk>

png files do not appear to work properly on the distributed
version for windows.

this was not a problem for rw1021.

 > png()
 > plot(rnorm(100),rnorm(100))
 > dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible


Ian Wilson


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.2
  year = 2001
  month = 02
  day = 26
  language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
  .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 13:28:33 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 14:28:33 +0100
Subject: [Rd] (PR#876)
In-Reply-To: I.Wilson@maths.abdn.ac.uk's message of "Tue, 13 Mar 2001 13:58:58 +0100 (MET)"
References: <200103131258.NAA20109@pubhealth.ku.dk>
Message-ID: <x21ys1ssqm.fsf@blueberry.kubism.ku.dk>

I.Wilson@maths.abdn.ac.uk writes:

> png files do not appear to work properly on the distributed
> version for windows.
> 
> this was not a problem for rw1021.
> 
>  > png()
>  > plot(rnorm(100),rnorm(100))
>  > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible

See PR#868 (recompile from sources or use Rbitmap.dll from 1.2.1)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Tue Mar 13 21:26:23 2001
From: Martin.Schlather@uni-bayreuth.de (Martin Schlather)
Date: Tue, 13 Mar 2001 22:26:23 +0100
Subject: [Rd] .C-calls
Message-ID: <3AAE907F.525541C9@uni-bayreuth.de>


Dear all,

(sorry I got the wrong button for subscribing a minute ago)

At the moment I'm writing on a package for random field
simulation that I'd like to make publically availabe
in near future.
To this end I've asked Martin Maechler to have a look
at my R-code. He was very surprised about how
I perform the ".C"-calls, and encouraged me to
make this request for comments.

My calls typically look like
    result <- double(10000)
    .C("test",as.double(inputparameter),result,DUP=FALSE)
    return(result)

In order to avoid sending C-code, I'd like to
give the following example that uses `chol' of
the "base"-package of R. The fact that it is a
.Fortran-call instead of a .C-call shouldn't
matter.                                        

## creating a positive definite matrix of size 100x100
lc <- as.integer(100);
cov.matrix <- matrix(runif(lc * lc), nrow=lc)
cov.matrix <- t(cov.matrix) %*% cov.matrix

## the usual way of getting the Cholesky decomposition
c0 <- chol(cov.matrix)

## direct call of the Fortran routine; the code is
## taken from the R-code of `chol'
dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
               v = matrix(0, nr = lc, nc = lc), info = integer(1),
               DUP = FALSE, PACKAGE = "base")
c1 <- dummy1$v

## The third way.
## The code seems working very well... but?
dummy2 <- double(lc * lc)
.Fortran("chol", cov.matrix, lc, lc,
         dummy2, info = integer(1),
         DUP = FALSE, PACKAGE = "base")
c2 <- matrix(dummy2, lc, lc)

sum(abs(c0-c2)) # == 0

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 21:32:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 22:32:17 +0100
Subject: [Rd] .C-calls
In-Reply-To: Martin Schlather's message of "Tue, 13 Mar 2001 22:26:23 +0100"
References: <3AAE907F.525541C9@uni-bayreuth.de>
Message-ID: <x2snkhicda.fsf@blueberry.kubism.ku.dk>

Martin Schlather <Martin.Schlather@uni-bayreuth.de> writes:

> ## the usual way of getting the Cholesky decomposition
> c0 <- chol(cov.matrix)
> 
> ## direct call of the Fortran routine; the code is
> ## taken from the R-code of `chol'
> dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
>                v = matrix(0, nr = lc, nc = lc), info = integer(1),
>                DUP = FALSE, PACKAGE = "base")
> c1 <- dummy1$v
> 
> ## The third way.
> ## The code seems working very well... but?
> dummy2 <- double(lc * lc)
> .Fortran("chol", cov.matrix, lc, lc,
>          dummy2, info = integer(1),
>          DUP = FALSE, PACKAGE = "base")
> c2 <- matrix(dummy2, lc, lc)
> 
> sum(abs(c0-c2)) # == 0

Well... As far as I can see, method 3 should work as long as DUP=FALSE
is used and break if DUP=TRUE. Some might prefer to consider the DUP
argument as an optimization hint and not something that should allow a
completely different calling sequence, but apart from that I cannot
see anything wrong with it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Wed Mar 14 15:41:24 2001
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Wed, 14 Mar 2001 16:41:24 +0100 (MET)
Subject: [Rd] segmentation fault of unknown cause (PR#877)
Message-ID: <200103141541.QAA05231@pubhealth.ku.dk>


Dear all,

Paulo Ribeiro, p.ribeiro@lancaster.ac.uk, and myself noticed 
that R sometimes breaks down with a segmentation fault of
(at least for us) unknown course. (We've read #411 and #671 
in the bug report on "optim" -- the problem described
there sounds familiar; but we have not found any hint on a 
segmentation fault.)

Please find at the very end of this email the file 
strange.R and on 
  http://www.geo.uni-bayreuth.de/~martin/R/strange.tgz
an archiv of three files, namely strange.R, cov.data, 
and rf.data. 

The file strange.R uses only mva as library; it does
not contain any Fortran or C call.

On three machines in Lancaster and on my three
computers (2x R-1.2.2, 1x R-1.2.1) we get 
`segmentation fault' for
  /usr/bin/R --vanilla < strange.R

Furthermore, I get a segmentation fault for
  /usr/bin/R
  source("strange.R")
but not Paulo at Lancaster, neither Martin Maechler on
his preversion R-1.3.0 (I had asked Martin before Paulo
found out that `usr/bin/R --vanilla < strange.R' breaks
on his (and mine) computers.)

We would be happy for any comment on whether the
segmentation fault appears anywhere else (and why). 
We noticed that R does not fail if /usr/bin/R is called 
with other or further options but `--vanilla' (Not 
extensively tested yet.)

Cheers,
Martin


PS: For example, a computer in Lancaster (all RedHat) and 
    one here (all SuSe) are both installed by compiling the
    source code of R-1.2.2 and have the specification
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R   
             
PPS: If the file strange.R works well then it stops with an 
     error message different from "segmentation fault".

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

#### the comments in the file strange.R give a report on what happens
#### additionally on all *my* computers -- not tested elsewhere yet


######################################################
############         strange.R         ###############
######################################################

# calling R (v1.2.1 or v1.2.2) without options and
# then `source("strange.R")' causes a segmentation fault

# Note that before failure MLEtarget is called with
# variab=c(1.0501141215486309848e-267, 1.0000000000000000208e-03)
# a value that is outside the given bounds, see lb and optim below
# (This is something that appears quite frequently, independently (?)
# of the segmentation fault I'm interested here!)

# The segmentation fault does not appear if R is called by
#       /usr/bin/R --vsize 20M --nsize 250K --no-save
# (The algorithm will fail with "fn(par, ...) : subscript out of bounds"
#  then, what is OK since the matrix `cm' does not have enough 
#  components)

library(mva)

"mleRF" <-
function (data, coord) 
{
    ENVIR <- environment()
    lc <- nrow(coord)

    ## if you comment out either line, the algorithm
    ## returns the correct error message
    ## "fn(par, ...) : subscript out of bounds"
    distances <- as.double(dist(coord))
    distances <- dist(coord)

    ## lower und upper bounds for optim
    lb <- c(0.00235992765321886, 0.2)
    ub <- c(39.6649897977748, 10)
    
    assign("COUNTER", 1, envir = ENVIR)
    CoVariate <- matrix(1, ncol = 1, nrow = lc)
    MLEtarget <- function(variab) {
        print(variab, dig = 20)
        
        ## the covariance matrix is calculated by an own C programme;
        ## therefore the results have been stored in `cm' to exclude
        ## my programme as course of the trouble
        cov.matrix <- cm[, COUNTER]
        cov.matrix <- try(chol(matrix(cov.matrix, ncol = lc)))
        ## if you replace the above two lines by
        ##    cov.matrix <- matrix(cm[, COUNTER], ncol = lc)
        ##    cov.matrix <- try(chol(cov.matrix))
        ## segmentation fault vanishes, and `optim' returns
        ## "Error in optim(...:  bad value"
        
        assign("COUNTER", COUNTER + 1, envir = ENVIR)
        if (is.numeric(cov.matrix)) {
            if (any(diag(cov.matrix) < 0)) {
                stop("chol det<0!")
            }
        }
        else {
            return(1e+30)
        }
        logdet <- 2 * sum(log(diag(cov.matrix)))
        cov.matrix <- chol2inv(cov.matrix)
        dummy <- t(CoVariate) %*% cov.matrix
        m <- (solve(dummy %*% CoVariate) %*% (dummy %*% data))
        V <- data - CoVariate %*% m
        quadratic <- (t(V) %*% cov.matrix %*% V)
        res <- logdet + lc * log(quadratic)
        print(as.vector(res), dig = 20)
        return(res)
    }
    ## if you outcomment the following `for'-loop
    ## the segmenatation fault vanishes, and optim returns
    ## "Error in optim(...:  bad value"
    for (W in 1:3) {
        mlet <- MLEtarget(c(1,1))
    }
    ## if the `for'-loop is active, the following line
    ## is not necessary as COUNTER has already the value 4
    assign("COUNTER", 4, envir = ENVIR)    
    variab <- c(0.00235992765321890, 2.66384186745229)
    ## if you outcomment the following line, the algorithm
    ## returns the correct error message "fn ... out of bounds"
    distances <- as.double(distances) 
    variab <- try(optim(variab, MLEtarget, method = "L-BFGS-B", 
        lower = lb, upper = ub)$par)
    print("END")
}



## the random field given on a grid by x,y and f is
## calculated by an own C-programme. Therefore the results
## have been stored to exclude my programme as course of
## the trouble
#save(file="rf.data",x,y,f,.Random.seed)
load("rf.data")
  
## see `MLEtarget' for comments on `cm'
#save(file="cov.data",cm)
load("cov.data");

mleRF(coord=cbind(x,y),data=f)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ians@connexus.net.au  Fri Mar 16 19:58:06 2001
From: ians@connexus.net.au (ians@connexus.net.au)
Date: Fri, 16 Mar 2001 20:58:06 +0100 (MET)
Subject: [Rd] sorry (PR#878)
Message-ID: <200103161958.UAA00958@pubhealth.ku.dk>

uhm???

i looked but am too lazy...  wot th fuk iz R

pleez send relo. shit to chellam@bigpond.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 22:56:08 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 14:56:08 -0800
Subject: No subject
Message-ID: <200103172256.OAA12160@pine.frazmtn.com>

Without too much difficulty I made an R 1.2.2 for Mac OS X (final 
release candidate)
using X11R6 and the dlopen shimlibs (which interface to the Mach-O dyld
system).  I am still working on the tcl/tk part, and I don't have an X11 
browser
yet for the html help, but the nice thing is that certainly the dynamic 
loading
and the graphics work fine.

Of course it's X11, so it looks much worse than the classic Mac OS 
version
that Stefano did, and a Carbon version  would be infinitely more useful,
but  this was quick and painless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 23:56:30 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 15:56:30 -0800
Subject: [Rd] R 1.2.2 on Mac OS X with X11/tcltk
Message-ID: <200103172356.PAA19805@pine.frazmtn.com>

The tcl/tk part now also works -- of course coming from Aqua/Quartz and 
then
being sucked into X11 and/or  Tcl/Tk is quite traumatic.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sun Mar 18 09:32:12 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Annette Molinaro-Clark)
Date: Sun, 18 Mar 2001 10:32:12 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
Message-ID: <15028.32924.553285.477996@gargle.gargle.HOWL>

This was addressed to the wrong place ...

------- start of forwarded message -------
From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
To: maechler@R-project.org
Subject: R-Installation
Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

Hi -
I'm trying to install R to a supercomputer which has a Fortran 77
compiler; however,
when i do ./configure I receive this error . . .


checking for g77... /usr/local/gnu/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... no
configure: error: installation or configuration problem: Fortran 77
compiler cannot create 
executables.


Can you tell me what I need to do?
Thanks,
Annette
------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Mar 19 07:07:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 19 Mar 2001 08:07:00 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
In-Reply-To: <15028.32924.553285.477996@gargle.gargle.HOWL>
References: <15028.32924.553285.477996@gargle.gargle.HOWL>
Message-ID: <15029.45076.44960.436261@mithrandir.hornik.net>

>>>>> Annette Molinaro-Clark writes:

> This was addressed to the wrong place ...
> ------- start of forwarded message -------
> From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
> To: maechler@R-project.org
> Subject: R-Installation
> Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

> Hi -
> I'm trying to install R to a supercomputer which has a Fortran 77
> compiler; however,
> when i do ./configure I receive this error . . .


> checking for g77... /usr/local/gnu/bin/g77
> checking whether the Fortran 77 compiler (g77  ) works... no
> configure: error: installation or configuration problem: Fortran 77
> compiler cannot create 
> executables.


> Can you tell me what I need to do?

Can you have a look at config.log to see what the problem is?

[What happens if you try using the native FORTRAN compiler on your
system?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 15:45:52 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 10:45:52 -0500
Subject: [Rd] DUP=T/F
Message-ID: <3AB629B0.868D2008@bank-banque-canada.ca>

In some tests I am getting a difference in the 7th or 8th significant digit depending
on whether I set DUP=T or DUP=F in the .Fortran call below. While this is not a huge
error it is bigger than I would expect and may be a symptom of another problem. Any
comments or suggestions? (R1.2.2 on Solaris.)

Paul Gilbert
_______

genD.ARMA <- function(model, data, d=0.01, eps=1e-4, r=6, warn=F){
   n <-length(c(output.data(data))) # this has the same length as the residual
   sampleT <-periods(data)
   ps <-dim(model$A)[3]
      ms <-dim(model$C)[3]
      ns <-ps  # this could be 1 except z0 is used for TREND and F, Q and R for
scratch
     loc   <- match(model$location,       c("A","B","C","t"))
     cloc  <- match(model$const.location, c("A","B","C","t"))
   if(is.null(ms))
     {ms<-0
      C<-array(0,c(1,ns,1)) # can't call compiled with 0 length arrays
      u <- matrix(0,sampleT,1)
      G <- matrix(0,ns,1)
     }
   else
     {C <-model$C
      u <- input.data(data)
      G <- matrix(0,ns,ms)
     }
   x <-model$parms
   h0 <- abs(d*x)+eps*(x==0.0)
   D <- matrix(1e20, n,(length(x)*(length(x) + 3))/2)
   Daprox <-  matrix(0,n,r)
   Hdiag  <-  matrix(0,n,length(x))
   Haprox <-  matrix(0,n,r)
   storage.mode(D)     <-"double"
   storage.mode(Daprox)<-"double"
   storage.mode(Haprox)<-"double"
   storage.mode(Hdiag )<-"double"
   D <-.Fortran("gend",
            D=D,
            as.integer(is.ARMA(model)),
            p=as.integer(length(x)),
            x=as.double(x),
            as.double(h0),
            as.integer(n),    #6
            as.integer((length(x)*(length(x)+ 3))/2), #cols of D
            f0=double(n),
            r=as.integer(r),
            #                       work space for GEND
            Haprox=Haprox,     #10
            Hdiag=Hdiag,
            Daprox=Daprox,
            x=double(length(x)),
            delta=double(length(x)),
            f1=double(n),
            f2=double(n),
            #                   work space for ARMAp / KFp
         #     cov=matrix(1e20,ps,ps),
            # pred is f0,f1,f2 passed above
            as.integer(ms),     #  input dimension m  #17
            as.integer(ps),     # output dimension p
            as.integer(sampleT),
            as.integer(periods(data)),
            u=as.double(u),
            y=as.double(output.data(data)),
            as.integer(loc),   #as.character(model$location), #23
            as.integer(model$i),
            as.integer(model$j),
            as.integer(length(model$const)),
            const=as.double(model$const),
            as.integer(cloc),  #as.character(model$const.location),
            as.integer(model$const.i ),
            as.integer(model$const.j),
        #  for ARMA models:
            as.integer(model$l),       #31
            as.integer(model$const.l),
            as.integer( dim(model$A)[1]),#1+order of A
            as.integer( dim(model$B)[1]),#1+order of B
            as.integer( dim(C)[1]),#1+order of C
            A=model$A,
            B=model$B,
            C=C,
        #  for state space models:
            as.integer(ns),  # state dim.  #39
        #    state=as.double(matrix(0,sampleT,ns)),
        #    track=as.double(array(0,c(sampleT,ns,ns))),
            z0=as.double(rep(0,ps)), # note: this is TREND for ARMA
            P0=as.double(diag(0,ps)),
            F=as.double(matrix(0,ns,ns)),
            G=as.double(G),
            H=as.double(matrix(0,ps,ns)),
            K=as.double(matrix(0,ns,ps)),
            Q=as.double(matrix(0,ns,ns)),
            R=as.double(matrix(0,ps,ps)),
            gain=as.integer(F),   #48
            DUP=T)[c("D","p","f0", "x", "r")]
   D$d   <- d
   D$eps <- eps
   D$f0 <- l(model, data, result="pred") - c(output.data(data))
   invisible(classed(D,"Darray")) #constructor
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Mon Mar 19 20:16:37 2001
From: hfe@math.uio.no (Harald Fekjaer)
Date: Mon, 19 Mar 2001 21:16:37 +0100 (MET)
Subject: [Rd] Possible improvement of "read.fwf"
Message-ID: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>

Dear R developers

I have little improvement to "R base", that I hope you will include in the official version.

Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
http://www.uio.no/~hfe/midl/R/readfwf-source.html

You will find my suggestion to improve the "read.fwf".
(New code is marked with red colour. Pure code is avilble at:
http://www.uio.no/~hfe/midl/R/readfwf.R)

And you will find the new documentation on:
http://www.uio.no/~hfe/midl/R/readfwf.html

Hope you will appreciate this small improvement.

Yours sincerely
Harald Fekjr, <harald.fekjar@basalmed.uio.no>
---
University of Oslo, Norway & Norwegian cancer registry

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Mon Mar 19 21:19:39 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Mon, 19 Mar 2001 16:19:39 -0500
Subject: [Rd] generic database access methods
Message-ID: <3AB677EB.9030406@StonyBrook.Edu>

I've been putting together a package that defined generic methods for 
database access.  The packages is called "Rdbi."  It borrows as much as 
possible from existing database packages / proposals.  I'd like to start 
a discussion about the proposed interface.  Here's what I've come up 
with so far:

#
# Rdbi: connectionMethods.R
#

dbConnect <- function(dbObj, ...) UseMethod("dbConnect")
#
# dbObj should be generated by an implementation defined function,
# e.g., RPgSQL(), which returns a object with an approprite class
# name, e.g., "PostgreSQL" or "MySQL".  The implementation then
# provides a method that actually opens the connection.
#

dbConnect.default <- function(dbObj, ...) stop("Invalid database class")
#
# User passed something other than a defined database class
#

dbDisconnect <- function(conn) UseMethod("dbDisconnect")
#
# Close connection and free resources
#

dbDisconnect.default <- function(conn) stop("Invalid connection object")

dbReconnect <- function(conn) UseMethod("dbReconnect")
#
# The conn object should store the options passed to dbConnect so that
# it can reestablish the connection.
#

dbReconnect.default <- function(conn) stop("Invalid connection object")
#
# User passed something other than a defined connection class
#

dbConnectionOK <- function(conn) UseMethod("dbConnectionOK")
#
# Returns TRUE if the connection object is valid and the connection
# can be used to communicate with the database backend.
#

dbConnectionOK.default <- function(conn) FALSE
#
# User passed something other than a defined connection class
#


#
# Rdbi: ioMethods.R
#

dbSendQuery <- function(conn, ...) UseMethod("dbSendQuery")
#
# This function submits a query string to the backend.  If the query
# generates any results, they should be returned in a data frame;
# otherwise the function returns NULL.  Printing error messgages is
# left to the implementation, but this function should not issue a
# call to error() or stop().  Error messages may be retrievable from
# the connection object depending on implementation.
#

dbSendQuery.default <- function(conn, ...) stop("Invalid connection object")
#
# This means that the method was called on something other than a
# connection object.
#

dbListTables <- function(conn, ...) UseMethod("dbListTables")
#
# Output a list of table names associated with the connection object.
# Output should look like output from ls().
#

dbListTables.default <- function(conn, ...) stop("Invalid connection 
object")

dbReadTable <- function(conn, ...) UseMethod("dbReadTable")
#
# Analog of the read.table() function.  Returns a data frame.  Some
# facility for converting DB types to R types is helpfull.  Generally,
# this will just pass a "select * from mytable" to dbSendQuery() which
# returns the data frame.
#

dbReadTable.default <- function(conn, ...) stop("Invalid connection object")

dbWriteTable <- function(conn, ...) UseMethod("dbWriteTable")
#
# Analog of write.table().  It should assemble input into a data frame
# and write the frame into a table in database.
#

dbWriteTable.default <- function(conn, ...) stop("Invalid connection 
object")


T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chyihung.hsu@pharma.Novartis.com  Mon Mar 19 21:52:04 2001
From: chyihung.hsu@pharma.Novartis.com (chyihung.hsu@pharma.Novartis.com)
Date: Mon, 19 Mar 2001 22:52:04 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103192152.WAA19583@pubhealth.ku.dk>

Dear R Development Team,

I have encountered the following difficulty in using the function polyroot
under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
provided example, the non-zero root of c(0,0,0,1) depends on the results of
the previous call of polyroot.

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
>

Thank you for your attention.

Best regards,

Chyi-Hung Hsu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 22:12:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 17:12:30 -0500
Subject: [Rd] A limitation for polyroot ? (PR#880)
References: <200103192152.WAA19583@pubhealth.ku.dk>
Message-ID: <3AB6844E.41ECE58E@bank-banque-canada.ca>

>Dear R Development Team,

I think most of the core team is at a conference,  but I seem to recall that this
problem was fixed in 1.2.2. You should probably upgrade. Below is what I get.

Paul Gilbert
_____

R : Copyright 2001, The R Development Core Team
Version 1.2.2  (2001-02-26)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 11:52:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Mar 2001 12:52:26 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103201152.MAA25198@pubhealth.ku.dk>

On Mon, 19 Mar 2001 chyihung.hsu@pharma.Novartis.com wrote:

> Dear R Development Team,
>
> I have encountered the following difficulty in using the function polyroot
> under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
> provided example, the non-zero root of c(0,0,0,1) depends on the results of
> the previous call of polyroot.

This is AFAIK already solved in 1.2.2.  Please upgrade, at least that
Linux version ....

>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > polyroot(c(6,-5,1))
> [1] 2+1.615587e-27i 3-1.615587e-27i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> > polyroot(c(4,-4,1))
> [1] 2+1.110223e-16i 2-1.110223e-16i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
> >
>
> Thank you for your attention.
>
> Best regards,
>
> Chyi-Hung Hsu
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 12:42:01 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 20 Mar 2001 12:42:01 +0000 (GMT)
Subject: [Rd] Possible improvement of "read.fwf"
In-Reply-To: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>
Message-ID: <Pine.GSO.4.31.0103201241250.3467-100000@toucan.stats>

This has been far down my TODO list with connections, so many thanks,
and I will take a look for 1.3.0.

Brian


On Mon, 19 Mar 2001, Harald Fekjaer wrote:

> Dear R developers
>
> I have little improvement to "R base", that I hope you will include in the official version.
>
> Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
> http://www.uio.no/~hfe/midl/R/readfwf-source.html
>
> You will find my suggestion to improve the "read.fwf".
> (New code is marked with red colour. Pure code is avilble at:
> http://www.uio.no/~hfe/midl/R/readfwf.R)
>
> And you will find the new documentation on:
> http://www.uio.no/~hfe/midl/R/readfwf.html
>
> Hope you will appreciate this small improvement.
>
> Yours sincerely
> Harald Fekjr, <harald.fekjar@basalmed.uio.no>
> ---
> University of Oslo, Norway & Norwegian cancer registry
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From marketers@toyi.zzn.com  Tue Mar 20 22:14:58 2001
From: marketers@toyi.zzn.com (marketers@toyi.zzn.com)
Date: Tue, 20 Mar 2001 23:14:58 +0100 (MET)
Subject: [Rd] How  to  Have  More  Customer ?
Message-ID: <200103202214.XAA20557@stat.math.ethz.ch>


  Dear r-devel,

  we know you from below url:
  http://www.ukc.ac.uk/php/mff/netres/statlist.html
  If you don't want to receive any message again,
  please email to remove@toyi.zzn.com to
  remove your email: r-devel@stat.math.ethz.ch
   

  **************       How to         ***************

  Have More Customer and Competition?

  **************    In Internet Time  ***************
 
  Answer is:             

       Email Spider Easy 
       ----Targeted Email Address Extract Software.
           http://www.emailspidereasy.com

      
        Key Features: 
        1 Search and Spider from a starting url such 
            as web url, search engine, message 
            board,  newsgroup to  extract bulk email 
            addresses and Url Addresses in pair. 

        2 Integrate with 18 top search engines
           such as Yahoo, Google, Altavista, AOL, 
           MSN, Lycos,Hotbot, Go.

        3 Search speed is very fast. 
           Allow up to 500 threads to search and 
           extract emails  simultaneously.
 
        4 Both Web and Url are extracted.

           For more info and free test ,
           please access url: 
           http://www.emailspidereasy.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Mar 21 06:15:04 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103210615.HAA12158@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 879 *
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Sun, 18 Mar 2001 07:45:13 -0500 (EST)
--precedence of %% appears to be not as documented
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 869 *
Subject:  inconsistent results when calling functions with other func
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 8 Mar 2001 18:26:35 +1100 
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 875 *
Subject: Re: [R] Bug in qchisq?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 10 Mar 2001 02:26:11 +0100

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 880 *
Subject: A limitation for polyroot ?
From: chyihung.hsu@pharma.Novartis.com
Date: Mon, 19 Mar 2001 16:45:59 -0500
* PR# 877 *
Subject: segmentation fault of unknown cause
From: Martin Schlather <Martin.Schlather@uni-bayreuth.de>
Date: Wed, 14 Mar 2001 17:45:25 +0100
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 21 11:16:10 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 21 Mar 2001 11:16:10 +0000 (GMT)
Subject: [Rd] Suggest new outer for R-1.3
Message-ID: <Pine.GSO.4.20.0103211044220.12440-100000@laplace>

Hi everyone,

Can I suggest the following modification of outer for R-1.3, in the
interests of speed and size of calculation:

*******************************************************************

"outer" <-
function (X, Y, FUN = "*", ...) 
{
    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
    dX <- dim(X)
    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
    dY <- dim(Y)
    if (is.character(FUN) && FUN=="*") {
      robj <- as.vector(X) %*% t(as.vector(Y))
      dim(robj) <- c(dX, dY)
    } else {
      FUN <- match.fun(FUN)
      Y <- rep(Y, rep(length(X), length(Y)))
      X <- rep(X, length.out = length(Y))
      robj <- array(FUN(X, Y, ...), c(dX, dY))
    }
    ## no dimnames if both don't have ..
    if (no.nx) 
        nx <- vector("list", length(dX))
    else if (no.ny) 
        ny <- vector("list", length(dY))
    if (!(no.nx && no.ny)) 
        dimnames(robj) <- c(nx, ny)
    robj
}

"%o%" <- .Alias(outer)

*******************************************************************

In other words, branch in the default case to a simple matrix outer
product.  For R-1.1 --vanilla on sparc-sun-solaris2.7 I have

> system.time(outer(1:1000, 1:300, "*"))
Error: heap memory (6144 Kb) exhausted [needed 1171 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 0.49 0 0.49 0 0 
> system.time(new.outer(1:1000, 1:300, "*"))
[1] 0.38 0.00 0.38 0.00 0.00
> system.time(outer(1:500, 1:300, "*"))
[1] 0.47 0.00 0.47 0.00 0.00
> system.time(new.outer(1:500, 1:300, "*"))
[1] 0.25 0.00 0.25 0.00 0.00

i.e. a saving of about 50% in time.  There will be a similar speed-up in
"kronecker".

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 21 17:21:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 21 Mar 2001 18:21:55 +0100 (MET)
Subject: [Rd] Incorrect values in non-central chisq values on Linux (PR#881)
Message-ID: <200103211721.SAA10812@pubhealth.ku.dk>

On the system below

dchisq(7.2, df=2,ncp=20)
[1] 0.00804528

Solaris 2.7 gives

[1] 0.01175302

which is correct, as can be seen from

x<-seq(0,50,.1)
y<-x
for(i in 1:length(x)){
   y[i]<-dchisq(x[i],df=2,ncp=20)}

plot(x,y,typ="l")

The problem is that q in dnchisq.c can be 1, and then errorbound
should be Inf. It is on Solaris, but -105822722841527.296875 on Linux
(so it has been evaluated q to greater than one).

I am about to commit a patch for 1.2.3.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 02:26:16 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Mar 2001 18:26:16 -0800
Subject: [Rd] MacOS X (Darwin) version of R-1.2.2
Message-ID: <200103220226.SAA57875@pine.frazmtn.com>

a version of R-1.2.2 for MacOS X (more precisely, for Darwin 1.3 with
X11R6) is at

http://www.stat.ucla.edu/~deleeuw/R-1.2.2-MacOSX.tar.gz

the file should be 5161540 bytes

-- su root
-- unpack in /

and everything gets put in /usr/local/bin and /usr/local/lib

this has the standard packages, including tcltk, and it has
X11R6 support

it uses tcl/tk 8.0 from the GRASS distribution

i also have a version with gnome support, but it still needs
some work -- and it's probably nonsense anyway

of course you need to install an X server and an X browser

i have not tried this in the Public Beta, so some of you may have
to wait a couple of days

there were no big problems in porting, but of course you need
Darwin versions of X11R6, of tcl/tk, and a shim for dlopen (that
maps the usual calls to Mach-O dyld calls). because of dyld
you have to replace "-shared" when linking foo.so to
"-bundle -undefined suppress".
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 22 16:23:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 22 Mar 2001 11:23:28 -0500
Subject: [Rd] lazy evaluation and DUP=F
Message-ID: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>

I am having some difficulty understanding the implication of lazy evaluation mixed
with DUP=F in a .Fortran call.  In qr.qty from base DUP is not used as an argument so
defaults to T. I am calling qr.qty with a very large array and would like to set
DUP=F in the .Fortran call so that qr.qty would be defined as copied below. Is there
some risk that a variable used as the argument in the original calling environment
would be modified, or is there some other reason that this should not be done?

Also, I still find it surprising that I get very slightly different results in some
calculations depending on whether I have DUP=T or DUP=F in a call to some of my own
fortran. I don't think that I am reusing the arguments in anyway that would require
duplicating them, and if I were I would expect a much bigger difference in the
result? Can anyone think of an explanation?

Thanks,
Paul Gilbert
_____

qr.qty <- function (qr, y)
{
    if (!is.qr(qr))
        stop("argument is not a QR decomposition")
    n <- as.integer(nrow(qr$qr))
    p <- as.integer(ncol(qr$qr))
    k <- as.integer(qr$rank)
    ny <- as.integer(NCOL(y))
    storage.mode(y) <- "double"
    if (NROW(y) != n)
        stop("qr and y must have the same number of rows")
    qty <- if (is.matrix(y))
        matrix(double(n * ny), n, ny)
    else double(n)
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux),
        y, ny, qty = qty, PACKAGE = "base", DUP=F)$qty
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 17:36:58 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 22 Mar 2001 09:36:58 -0800
Subject: [Rd] dlcompat code for Darwin
Message-ID: <200103221737.JAA67187@pine.frazmtn.com>


--Apple-Mail-663745359-3
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

There were some requests for this.

<Attachment missing>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-663745359-3
Content-Type: multipart/mixed;
	boundary=Apple-Mail-1921440476-4


--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed

There were some requests for this.


--Apple-Mail-1921440476-4
Content-Disposition: attachment;
	filename=dlcompat.tar.gz
Content-Type: application/x-gzip;
	name=dlcompat.tar.gz;
	x-unix-mode=0644
Content-Transfer-Encoding: base64

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
Wl2ra3WtrtX1Bdf/AcxOOfAAyAAA

--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed


===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-1921440476-4--

--Apple-Mail-663745359-3--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 23 11:56:58 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 23 Mar 2001 03:56:58 -0800 (PST)
Subject: [Rd] lazy evaluation and DUP=F
In-Reply-To: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103230351590.16764-100000@homer34.u.washington.edu>

On Thu, 22 Mar 2001, Paul Gilbert wrote:

> I am having some difficulty understanding the implication of lazy
> evaluation mixed with DUP=F in a .Fortran call.  In qr.qty from base
> DUP is not used as an argument so defaults to T. I am calling qr.qty
> with a very large array and would like to set DUP=F in the .Fortran
> call so that qr.qty would be defined as copied below. Is there some
> risk that a variable used as the argument in the original calling
> environment would be modified, or is there some other reason that this
> should not be done?

I am not sure that DUP=FALSE can't change objects in the original calling
environment (this is why help(.Fortran) says that there is a risk). It's
not precisely lazy evaluation that causes the problem: if the lazy
evaluation really worked under the hood the way it appears to work there
would be no problem. The problem is that R actually calls by
reference until an object is modified. It should be fairly easy to tell by
experiment whether this can happen

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 23 15:34:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Mar 2001 16:34:11 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231534.QAA06745@pubhealth.ku.dk>

>From one of my students' simulations:

m <- matrix(1, 0, 0)  # 1 to force numeric not logical
eigen(m)

and segfault in TRED2 in src/appl/eigen.f

Easy to fix, but I wonder what else might have been overlooked?
(svd is protected).

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 23 16:43:00 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 23 Mar 2001 17:43:00 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231643.RAA07187@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> From one of my students' simulations:
    BDR> m <- matrix(1, 0, 0) # 1 to force numeric not logical eigen(m)

    BDR> and segfault in TRED2 in src/appl/eigen.f

    BDR> Easy to fix, but I wonder what else might have been overlooked?
    BDR> (svd is protected).

nothing else seems overlooked.
I've added the above matrix (as `m0') to the list of things that the
no-segfault test throughs at every function,
and there's no further segfault {after you have fixed eigen()}.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 23 16:47:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Mar 2001 11:47:23 -0500
Subject: [Rd] bug.report and wait
Message-ID: <3ABB7E1B.A1585970@bank-banque-canada.ca>

I have being looking at bug.report in an attempt to separate out a Sys.mail function.
The unix version of bug.report does not have a "wait" parameter but the Windows
version does.  I find that in Unix with my editor set to nedit I really do need a
wait parameter. This is because nedit forks a separate process and returns, so
currently unix bug.report sends the unedited stub file.

Does anyone object to bug.report having a wait parameter? Should the default be FALSE
which would replicate current behavior in Unix or TRUE which would be safer and
correspond to the Windows version?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Mar 23 19:34:56 2001
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 23 Mar 2001 20:34:56 +0100 (MET)
Subject: [Rd] cor(x,y) when is.null(y) (PR#883)
Message-ID: <200103231934.UAA07843@pubhealth.ku.dk>


Problem:
> names(my.dat)
[1] "x" "y"
> cor(my.dat$x,my.dat$y)     # desired result
[1] 0.8660254
> cor(my.dat$x,my.dat$y.NOT) # typo
[1] 1
> 

I'd prefer a warning() or stop() in that case.

Solution (??) :

*** 1,5 ****
--- 1,7 ----
  cor <- function (x, y=NULL, use="all.obs")
  {
+     if (is.null(y) && !is.null( match.call()$y ) )
+         stop("y evaluated as NULL")
      na.method <- pmatch(use, c("all.obs", "complete.obs",
"pairwise.complete.obs"))
      if(is.data.frame(x)) x <- as.matrix(x)
      if(is.data.frame(y)) y <- as.matrix(y)

then:

> cor(my.dat$x,my.dat$y.NOT)
Error in cor(my.dat$x, my.dat$y.NOT) : y evaluated as NULL
>
> cor(my.dat$x,NULL) # intended NULL still passes
[1] 1
> 
> cor(my.dat$x)      # default: arg y = NULL
[1] 1
> 

Likewise for var() and cov()


Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Mar 26 08:34:07 2001
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 26 Mar 2001 02:34:07 -0500
Subject: [Rd] Need some help for building R!
Message-ID: <3ABEF0EF.619E072F@epm.net.co>

Hello Dear R Developers and Users:

I'm trying to compile R with all the tools of the CRAN page.
I compile the R-1.2.2 version without problem.

But when I try to compile the development version 1.3.0 it
doesn't work  when I write the command:

make BUILD=MINGW32

First it shows me something like this (I think without problems):
As I make when I compile succesfuly the R-1.2.2 version:

----------------------------------------------------------------------------------------------------------------------------

mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/fixed'
zip -q bins bin/BATCH bin/INSTALL bin/REMOVE bin/Rd2dvi.sh bin/Rd2txt
bin/SHLIB bin/helpPRINT.bat
unzip -oaq bins -d  ../../..
rm -f bins.zip
echo done > fixbin
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../appl  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/appl'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/appl'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../main  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/main'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/main'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../nmath OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/nmath'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/nmath'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./graphapp
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/graphapp'
MAKE.EXE[1]: `../ga.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/graphapp'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./getline
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/getline'
MAKE.EXE[1]: `../gl.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/getline'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../extra/xdr
MAKE.EXE[1]: Entering directory `F:/R-devel/src/extra/xdr'
MAKE.EXE[1]: `../../gnuwin32/xdr.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/extra/xdr'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./math
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/math'
MAKE.EXE[1]: `../em.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/math'
------- Building R.dll from R.a malloc.o libmain.a libappl.a libmath.a
ga.a gl.a xdr.a em.a dllversion.o --------
echo LIBRARY R > R.def
echo EXPORTS >> R.def
nm R.a malloc.o libmain.a libappl.a libmath.a ga.a gl.a xdr.a em.a
dllversion.o > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> R.def
rm -f Defs
gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
-lwsock32 -lcomctl32 -lversion
-----------------------------------------------------------------------------------------------------------------------------------------

Then it stops with this error:

------------------------------------------------------------------------------------------------------------------------------------------

gcc: unrecognized option '-shared'
ld:R.def: file format not recognized; treating as linker script
ld:R.def:1: parse error
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
-------------------------------------------------------------------------------------------------------------------------------------------

What is my mistake? (Remember that the process work with the previous
version 1.2.2)

Thank you very much for you help

Kenneth Cabrera



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 26 08:58:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Mar 2001 09:58:02 +0200
Subject: [Rd] Need some help for building R!
In-Reply-To: Kenneth Cabrera's message of "Mon, 26 Mar 2001 02:34:07 -0500"
References: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <x2zoe97yid.fsf@blueberry.kubism.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
> libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
> -lwsock32 -lcomctl32 -lversion
> -----------------------------------------------------------------------------------------------------------------------------------------
> 
> Then it stops with this error:
> 
> ------------------------------------------------------------------------------------------------------------------------------------------
> 
> gcc: unrecognized option '-shared'

Hmm. Some stuff in MkRules has been changed:

--- src/gnuwin32/MkRules        2001/02/03 20:11:37     1.26.2.1
+++ src/gnuwin32/MkRules        2001/02/08 07:25:59     1.29
@@ -3,8 +3,6 @@
 
 # Alternatives CYGWIN (-mno-cygwin), MINGW32 (mingw32 gcc), CROSS (Linux)
 BUILD=MINGW32
-# Set this to YES if you use MINGW32 and gcc-2.95.2.1 or later, or cygwin-1.1.
-HAVE_SHARED=YES
 
 # Where does 'HTML Help Workshop' live? (unused if compiled HTML help is
 # not requested. Spaces allowed.)
@@ -88,16 +86,7 @@
        $(NM) $^ > Defs
        $(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $*.def
        $(RM) Defs
-ifeq ($(strip $(HAVE_SHARED)),YES)
        $(DLL) --shared $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $*.def $^ $($*-DLLLIBS) $(DLLLIBS)
-else
-       $(DLL) -mdll -Wl,--base-file,$*.b $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $^ $
...

> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
         ^^^^^^

Are you sure you are using the appropriate compiler? Looks like
support for compilers before gcc-2.95.2.1 has gone away. (The flag
looks a bit dodgy though. Isn't it normally "-shared" with a single
hyphen?) 

Anyway, Brian will know...

> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 09:02:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Mar 2001 09:02:05 +0100 (BST)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>

On Mon, 26 Mar 2001, Kenneth Cabrera wrote:

> Hello Dear R Developers and Users:
>
> I'm trying to compile R with all the tools of the CRAN page.
> I compile the R-1.2.2 version without problem.
>
> But when I try to compile the development version 1.3.0 it
> doesn't work  when I write the command:
>
> make BUILD=MINGW32
>
> First it shows me something like this (I think without problems):
> As I make when I compile succesfuly the R-1.2.2 version:

[...]

> Then it stops with this error:
>
> ------------------------------------------------------------------------------------------------------------------------------------------
>
> gcc: unrecognized option '-shared'
> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> -------------------------------------------------------------------------------------------------------------------------------------------
>
> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)

Not reading the documentation!   The file CHANGES says:

rw1030
======

No Windows-specific changes (nor are any planned).

Support for earlier compilers has been dropped: you must use a
compiler system that supports --shared and an in-memory dlltool.


So, please get the compiler system as recommended in the INSTALL file.
(Yours must be over a year old.)  There's a good reason for this: I am not
prepared to keep testing under obselete compilers like yours.

If you want to play with development versions of R you do really need to
read the documentation, and to be aware that it is an unstable version:
there is no guarantee that it will compile anywhere, let alone under
Windows (which you didn't mention: please do so).  It is very likely that
R-devel will be broken under Windows for several periods between now and
the release of 1.3.0 as new features are added.

And please do not post to both R-help and R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Mar 26 14:32:30 2001
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 26 Mar 2001 15:32:30 +0200 (MET DST)
Subject: [Rd] Problems with R CMD COMPILE within Makefile (PR#885)
Message-ID: <200103261332.PAA25104@pubhealth.ku.dk>

Dear R-developpers

This concerns a problem I posted about half a year ago on the R-help list
and to which I got some answer by Duncan Temple Lang (see below), but the
basic problem still continues. Even though I managed a workaround which is
sufficient for me Martin Maechler asked me to send a toy example of the
problem to R-bugs. So that's what I try here.

The following Makefile will not work:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	R CMD COMPILE tst.c
----------------------------------------

It results in:
----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[2]: *** No rule to make target `w'.  Stop.
make[2]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[1]: *** [tst.o] Error 2
make[1]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make: *** [tst.o] Error 2

Compilation exited abnormally with code 2 at Mon Mar 26 15:10:07
----------------------------------------

The following alternative ends in an infinite loop:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
----------------------------------------

----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[3]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[4]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
...
----------------------------------------


(My workaround consists in using R SHLIB instead of R COMPILE (which works
perfectly) and removing the files that disturb or that I don't need.)

I work under Linux. tst.c consists just of one line:

int  x() {return(1);}

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R                


Here is Duncan's answer:

>>  I took a quick look at the R COMPILE problem and it seems that there
>> are in fact two problems.  One is the problem with the attempt to
>> build a target `w'. And the other is that if that error didn't arise,
>> you would have an infinite loop.
>> 
>> Here is quick fix to your problem. Add the line
>> 
>>   include $(R_HOME)/etc/Makeconf
>> 
>> to your Makefile. Then, make will compile imageio.o with the correct flags.
>> 
>> eyore[RCompile-174]>make
>> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 
>> 
>> 
>> That should be enough to get things working.  The more detailed
>> explanation is as follows.
>> 
>> a) The rule
>> imageio.o: imageio.c
>>  	R COMPILE imageio.c
>> 
>> is executed by the first call to make.
>> The COMPILE script expands this to call
>> 
>>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o
>> 
>> At this point, this second make process sees the same rule, and does
>> the same thing. Hence, you have infinite recursion.
>> 
>> 
>> 
>> b) The problem about the target `w' is a problem resulting from the R
>> COMPILE script being called recursively from a make process.  The
>> second make process getting called via the COMPILE script is getting
>> the value of the make variable MAKEFLAG from the top-level make you
>> executed manually.  This is implicitly set to w (meaning to print
>> directory information before and after the makefile is "executed")
>> and not -w. At this point, I am not certain whether this is an
>> R oversight or a GNU make bug.


Peter

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://stat.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bwheeler@echip.com  Mon Mar 26 16:09:45 2001
From: bwheeler@echip.com (Bob Wheeler)
Date: Mon, 26 Mar 2001 10:09:45 -0500
Subject: [Rd] Need some help for building R!
References: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>
Message-ID: <3ABF5BB9.47ACA831@echip.com>

The problem traces to
http://www.stats.ox.ac.uk/pub/Rtools/, where the
1999 version (gcc-2.95.2) of the compiler is
recommended in the first paragraph under
Compilers. The second paragraph provides zip files
for gcc-2.95.2.1 which support --shared.

Perhaps the old reference could be deleted.


Prof Brian Ripley wrote:
> 
<snip>
> > Then it stops with this error:
> >
> > ------------------------------------------------------------------------------------------------------------------------------------------
> >
> > gcc: unrecognized option '-shared'
> > ld:R.def: file format not recognized; treating as linker script
> > ld:R.def:1: parse error
> > F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> > -------------------------------------------------------------------------------------------------------------------------------------------
> >
> > What is my mistake? (Remember that the process work with the previous
> > version 1.2.2)
> 
> Not reading the documentation!   The file CHANGES says:
> 
> rw1030
> ======
> 
> No Windows-specific changes (nor are any planned).
> 
> Support for earlier compilers has been dropped: you must use a
> compiler system that supports --shared and an in-memory dlltool.
> 
> So, please get the compiler system as recommended in the INSTALL file.
> (Yours must be over a year old.)  There's a good reason for this: I am not
> prepared to keep testing under obselete compilers like yours.
> 
> If you want to play with development versions of R you do really need to
> read the documentation, and to be aware that it is an unstable version:
> there is no guarantee that it will compile anywhere, let alone under
> Windows (which you didn't mention: please do so).  It is very likely that
> R-devel will be broken under Windows for several periods between now and
> the release of 1.3.0 as new features are added.
> 
> And please do not post to both R-help and R-devel.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Bob Wheeler --- (Reply to: bwheeler@echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 16:37:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 26 Mar 2001 16:37:41 +0100 (GMT Daylight Time)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABF5BB9.47ACA831@echip.com>
Message-ID: <Pine.WNT.4.31.0103261634530.256-100000@gannet>

On Mon, 26 Mar 2001, Bob Wheeler wrote:

> The problem traces to
> http://www.stats.ox.ac.uk/pub/Rtools/, where the
> 1999 version (gcc-2.95.2) of the compiler is
> recommended in the first paragraph under
> Compilers. The second paragraph provides zip files
> for gcc-2.95.2.1 which support --shared.
>
> Perhaps the old reference could be deleted.


Kenneth Cabrera is using an unreleased version of R: the information
on the web site is not designed for future versions of R.  If you want
to use *that*, read *its* documentation.

The information on that site is currently correct!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 22:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 13:05:16 -0800 (PST)
Subject: [Rd] DUP=FALSE
Message-ID: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>


Last week Paul Gilbert asked about DUP=FALSE and whether parent
environments can be affected.  I have experimented and they can.
Consider the R functions
> f
function(x){ .C("badidea",x,DUP=FALSE)}
> g
function(y) f(y)
> h
function(z){
        z<-as.integer(z)
        g(z)
        z
}

and the C function
	void badidea(int *x){
	    *x=7;
	}

This gives
> h(4)
[1] 7

so the modification of x in f() reaches up past g() to modify z in h().
The conclusion is that one should not pass a formal parameter of a
function using DUP=FALSE if it might be modified.  Assigning the parameter
seems to be sufficient to prevent the problem: replacing g by

 g<-function(y) {
	w<-y
	f(w)
 }
gives
> h(4)
[1] 4
as expected.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 26 23:36:03 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 17:36:03 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFC453.BBC38B69@bank-banque-canada.ca>

Thomas

Thanks for verifying that this actually does work the way you thought it
did. In the example I asked about  (qr.qty ) I am fairly sure that it
does not modify the y argument. Unfortunately this seems relatively
difficult to trace for certain, and experimenting works but may not hit
all cases.

Another thing I find I do not understand is how many copies of an
argument are made. For example, in a call to a function like

f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }

there is the original x and the duplicated x in the argument to .C, but
is there a third in the list returned by .C, or is that somehow the same
one as in the argument to .C.  My problem is that my x is very big.

Thanks,
Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 23:58:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 14:58:10 -0800 (PST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFC453.BBC38B69@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> Thanks for verifying that this actually does work the way you thought it
> did. In the example I asked about  (qr.qty ) I am fairly sure that it
> does not modify the y argument. Unfortunately this seems relatively
> difficult to trace for certain, and experimenting works but may not hit
> all cases.
>
> Another thing I find I do not understand is how many copies of an
> argument are made. For example, in a call to a function like
>
> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>
> there is the original x and the duplicated x in the argument to .C, but
> is there a third in the list returned by .C, or is that somehow the same
> one as in the argument to .C.  My problem is that my x is very big.

There's a third one. In dotcode.c the following happens

a) x is copied to a C array at the top of the R heap
b) the C function is called
c) the C array is copied into a newly created R object
d) this new R object is returned.

You only have three copies for a very short time, since the C array is
freed as soon as the new R object is returned.

A more selective version of DUP would be nice, but the only real way to do
it at the moment is to write a wrapper using .Call or .External and do any
necessary copying yourself.

I don't know why you are getting slightly different results with
DUP=FALSE. I can't think of any good explanation.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 03:00:47 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 21:00:47 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>

Thomas

>> Another thing I find I do not understand is how many copies of an
>> argument are made. For example, in a call to a function like
>>
>> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>>
>> there is the original x and the duplicated x in the argument to .C,
but
>> is there a third in the list returned by .C, or is that somehow the
same
>> one as in the argument to .C.  My problem is that my x is very big.

>There's a third one. In dotcode.c the following happens

>a) x is copied to a C array at the top of the R heap
>b) the C function is called
>c) the C array is copied into a newly created R object
>d) this new R object is returned.

It seems like there is an unnecessary extra copy here, unless of course
the array in the R object cannot be the C array (but your example of
messing up things in the parent environment suggests it can be). If
DUP=TRUE then there should be no harm in the result being just a pointer
to the copy which is the argument, and if DUP=FALSE then the result is
already in the copy as illustrated in the example circulated by Martin
Schlather on Martin Maechler suggestion a few days ago, so again there
is no harm. I won't pretend to understand the internals of R but I know
I am getting clobbered by a big array in an argument.

>I don't know why you are getting slightly different results with
>DUP=FALSE. I can't think of any good explanation.

I'll try to track this down sometime. If you think of anything please
let me know.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 06:37:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 06:37:09 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> >> Another thing I find I do not understand is how many copies of an
> >> argument are made. For example, in a call to a function like
> >>
> >> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
> >>
> >> there is the original x and the duplicated x in the argument to .C,
> but
> >> is there a third in the list returned by .C, or is that somehow the
> same
> >> one as in the argument to .C.  My problem is that my x is very big.
>
> >There's a third one. In dotcode.c the following happens
>
> >a) x is copied to a C array at the top of the R heap
> >b) the C function is called
> >c) the C array is copied into a newly created R object
> >d) this new R object is returned.
>
> It seems like there is an unnecessary extra copy here, unless of course
> the array in the R object cannot be the C array (but your example of
> messing up things in the parent environment suggests it can be). If

Well, in current R internals there is no simple way to create an R array
out of data held in a C array.  (It can be done, but is messy AFAIK.)
Also, with DUP=TRUE, you need protection.  The C routine might have cached
that address and use it next time it was called, thereby working with part
of the `newly created R object'.

> DUP=TRUE then there should be no harm in the result being just a pointer
> to the copy which is the argument, and if DUP=FALSE then the result is
> already in the copy as illustrated in the example circulated by Martin
> Schlather on Martin Maechler suggestion a few days ago, so again there
> is no harm. I won't pretend to understand the internals of R but I know
> I am getting clobbered by a big array in an argument.

Why are you using .C not .Call anyway?  These things are much easier to
control with .Call.

> >I don't know why you are getting slightly different results with
> >DUP=FALSE. I can't think of any good explanation.
>
> I'll try to track this down sometime. If you think of anything please
> let me know.

Linux? If so I think this is probably due to forced stores or not.  gcc on
Linux is getting notorious with me for not doing IEEE-compatible
arithmetic, and so getting inconsistent results. Compiling with
-fforce-store seems to solve this (at some performance expense).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 27 17:05:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 27 Mar 2001 18:05:51 +0200
Subject: [Rd] sort(list(..)) ?
Message-ID: <15040.47711.87247.785763@gargle.gargle.HOWL>

Looking at the source code of  sort()
-- for some speedup considerations --
I found that we currently use isVector() for testing the validity of x in
sort(x) whereas I think we should use isVectorAtomic(),
actually for S-plus compatibility additionally allowing NULL.
Hence I'd propose to replace
the test

    if (!isVector(CAR(args)))
	errorcall(call, "only vectors can be sorted");

by

    if(CAR(args) == R_NilValue) return R_NilValue;
    if(!isVectorAtomic(CAR(args)))
	errorcall(call, "only atomic vectors can be sorted");

in do_sort(.) in src/main/sort.c .
This doesn't quite pass "make check" currently because

  is.factor(factor(list()))

now would give an error.

I still think we should not silently allow list()s {or expression()s} as
argument to sort() as we do now; BTW, we just return them unchanged.

We could produce a warning instead of an error 
which would be more back-compatible, but I'd prefer the error.

Opinions?
{no feedback will be interpreted as:  
    "agreed, go ahead and change for R 1.3.0"}

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 27 17:21:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2001 18:21:25 +0200
Subject: [Rd] sort(list(..)) ?
In-Reply-To: Martin Maechler's message of "Tue, 27 Mar 2001 18:05:51 +0200"
References: <15040.47711.87247.785763@gargle.gargle.HOWL>
Message-ID: <x2g0fz9o8q.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> in do_sort(.) in src/main/sort.c .
> This doesn't quite pass "make check" currently because
> 
>   is.factor(factor(list()))
> 
> now would give an error.

...which is no big loss, because already now

> factor(list(1,2,3))
Error in unique(x) : unique() applies only to vectors
> factor(list(1:3))
Error in unique(x) : unique() applies only to vectors

> I still think we should not silently allow list()s {or expression()s} as
> argument to sort() as we do now; BTW, we just return them unchanged.

Agreed. Unless someone feels a great need to generalize sort() to sort
complex structures that can only be stored in a list....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 18:04:04 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Mar 2001 12:04:04 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>
Message-ID: <3AC0C803.F296CECE@bank-banque-canada.ca>

>> It seems like there is an unnecessary extra copy here, unless of course
>> the array in the R object cannot be the C array (but your example of
>> messing up things in the parent environment suggests it can be). If

>Well, in current R internals there is no simple way to create an R array
>out of data held in a C array.  (It can be done, but is messy AFAIK.)
>Also, with DUP=TRUE, you need protection.  The C routine might have cached
>that address and use it next time it was called, thereby working with part
>of the `newly created R object'.

ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
call which distinguished items to return and only built an R object of those rather
than the complete list of arguments in the call  (for me with .Fortran especially).

>Why are you using .C not .Call anyway?  These things are much easier to
>control with .Call.

Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
the documentation to mean that .Call and .External are only alternatives to .C and
not to .Fortran. If I'm wrong on that please let me know.

>> >I don't know why you are getting slightly different results with
>> >DUP=FALSE. I can't think of any good explanation.

>> I'll try to track this down sometime. If you think of anything please
>> let me know.

>Linux? If so I think this is probably due to forced stores or not.  gcc on
>Linux is getting notorious with me for not doing IEEE-compatible
>arithmetic, and so getting inconsistent results. Compiling with
>-fforce-store seems to solve this (at some performance expense).

Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
my man pages may be older.

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 18:27:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 18:27:21 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3AC0C803.F296CECE@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103271824250.10215-100000@auk.stats>

On Tue, 27 Mar 2001, Paul Gilbert wrote:

> >> It seems like there is an unnecessary extra copy here, unless of course
> >> the array in the R object cannot be the C array (but your example of
> >> messing up things in the parent environment suggests it can be). If
>
> >Well, in current R internals there is no simple way to create an R array
> >out of data held in a C array.  (It can be done, but is messy AFAIK.)
> >Also, with DUP=TRUE, you need protection.  The C routine might have cached
> >that address and use it next time it was called, thereby working with part
> >of the `newly created R object'.
>
> ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
> call which distinguished items to return and only built an R object of those rather
> than the complete list of arguments in the call  (for me with .Fortran especially).
>
> >Why are you using .C not .Call anyway?  These things are much easier to
> >control with .Call.
>
> Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
> the documentation to mean that .Call and .External are only alternatives to .C and
> not to .Fortran. If I'm wrong on that please let me know.

You can write a C wrapper and .Call that, of course.

> >> >I don't know why you are getting slightly different results with
> >> >DUP=FALSE. I can't think of any good explanation.
>
> >> I'll try to track this down sometime. If you think of anything please
> >> let me know.
>
> >Linux? If so I think this is probably due to forced stores or not.  gcc on
> >Linux is getting notorious with me for not doing IEEE-compatible
> >arithmetic, and so getting inconsistent results. Compiling with
> >-fforce-store seems to solve this (at some performance expense).
>
> Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
> my man pages may be older.

It's not a Solaris issue, but 2.8.1 is rather old: I use 2.95.2 on Solaris.
There may be order-of-evaluation issue though.  Does the difference persist
with optimization turned off?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From k.j.mcconway@open.ac.uk  Wed Mar 28 15:46:50 2001
From: k.j.mcconway@open.ac.uk (k.j.mcconway@open.ac.uk)
Date: Wed, 28 Mar 2001 16:46:50 +0200 (MET DST)
Subject: [Rd] Error (?) in documentation of 'swiss' data in R base package (PR#886)
Message-ID: <200103281446.QAA22300@pubhealth.ku.dk>

Full_Name: Kevin McConway
Version: 1.2.2
OS: WinNT
Submission from: (NULL) (137.108.11.58)


Hardly crucial, but I've come upon a potential error in the documentation of the
'swiss' datafram in the R base package. The description accurately matches what
is said in the Mosteller and Tukey source quoted, but according to the data
archived at Princeton (links from
http://opr.princeton.edu/archive/eufert/switz.html), the variable that Mosteller
and Tukey report as infant mortality is actually the proportion of 'draftees'
with education beyond primary school. Infant mortality is on the archived file,
but the values are quite a lot different. Of course, it's possible that
Mosteller and Tukey were right and the people who did the archiving at
Princenton, later, got it wrong.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Wed Mar 28 19:51:06 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Wed, 28 Mar 2001 20:51:06 +0200 (MET DST)
Subject: [Rd] axis(adj=anything) has no effect (PR#887)
Message-ID: <200103281851.UAA23275@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 29 14:38:57 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 29 Mar 2001 14:38:57 +0100 (BST)
Subject: [Rd] Detaching "ctest"
Message-ID: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>

Hi Everyone,

We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
ctest is now loaded automatically.  The mechanism for this is to create a
.First function in base:

.First <- function() {
    require("ctest", quietly=TRUE)
}

Now I don't want ctest, but I find that simply putting

if (length(grep("ctest", search())))
  detach(package:ctest)

into my ".Rprofile" does not work, for the simple reason that .First is
invoked after .Rprofile.  I thought that one possible solution is to
remove .First from base, but when I tried this I got

> find(".First")
[1] "package:base"
> search()
[1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
[5] "package:base"   
> remove(".First", pos=5)
Warning message: 
remove: variable ".First" was not found 
> remove(".First", inherits=TRUE)
Warning message: 
remove: variable ".First" was not found 

Is it not possible to remove things from "base"?  The alternative is to
mask the .First with a blank one in my .Rprofile, but this seems rather
inelegant.

So my questions are:

(1) Why has ctest been included among the start-up options, and why has
this mechanism of using the .First been used, rather than relying on
people putting the command require("ctest", quietly=TRUE) into the
.Rprofile?

(2) Is there an elegant way of me stopping ctest from being loaded, other
then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

Many thanks, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 11:03:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 12:03:02 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
Message-ID: <15044.22998.24033.91361@mithrandir.hornik.net>

>>>>> Jonathan Rougier writes:

> Hi Everyone,
> We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
> ctest is now loaded automatically.  The mechanism for this is to create a
> .First function in base:

> .First <- function() {
>     require("ctest", quietly=TRUE)
> }

> Now I don't want ctest, but I find that simply putting

> if (length(grep("ctest", search())))
>   detach(package:ctest)

> into my ".Rprofile" does not work, for the simple reason that .First is
> invoked after .Rprofile.  I thought that one possible solution is to
> remove .First from base, but when I tried this I got

>> find(".First")
> [1] "package:base"
>> search()
> [1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
> [5] "package:base"   
>> remove(".First", pos=5)
> Warning message: 
> remove: variable ".First" was not found 
>> remove(".First", inherits=TRUE)
> Warning message: 
> remove: variable ".First" was not found

Which looks rather strange to me ... 

> Is it not possible to remove things from "base"?  The alternative is
> to mask the .First with a blank one in my .Rprofile, but this seems
> rather inelegant.

> So my questions are:

> (1) Why has ctest been included among the start-up options, and why has
> this mechanism of using the .First been used, rather than relying on
> people putting the command require("ctest", quietly=TRUE) into the
> .Rprofile?

> (2) Is there an elegant way of me stopping ctest from being loaded, other
> then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

There was a great amount of discussion on r-core whether or not ctest
should be preloaded.  We all agree that base is way too large, and that
it eventually should basically be a core S language interpreter, with
everything else available ``on demand''.  Re add-on packages, there are
two obvious possibilities:

* only provide base by default, and let users or site admins customize
  the list of packages they want by default.

* provide packages like ctest (and maybe ts) by default, and have site
  admins or users overrule the default settings.

In a Unix-centric world the former would be the obvious choice.
However, there was great concern about the situation on Windows, where
the intermediate ``site admin'' level typically would not be available,
and we do not want to have first time R windows users start complaining
about R as a stats package that cannot even do a t test.  Hence, we went
for the latter.

The ``elegant'' way we recommend is that either you as site admin
provide a site version of .First in $R_HOME/etc/Rprofile, or you as user
provide your private version of .First in $HOME/.Rprofile.

Hope this helps.

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 14:02:13 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 2001 15:02:13 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: Kurt Hornik's message of "Fri, 30 Mar 2001 12:03:02 +0200"
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace> <15044.22998.24033.91361@mithrandir.hornik.net>
Message-ID: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Jonathan Rougier writes:

> >> remove(".First", pos=5)
> > Warning message: 
> > remove: variable ".First" was not found 
> >> remove(".First", inherits=TRUE)
> > Warning message: 
> > remove: variable ".First" was not found
> 
> Which looks rather strange to me ... 

One of the anomalies with the base frame is that you cannot remove
variables from it (this has to do with the fact that base has its
values bound directly to symbols, whereas other frames are essentially
hashed lists). The error message is a bit weird, though. 

> > Is it not possible to remove things from "base"?  The alternative is
> > to mask the .First with a blank one in my .Rprofile, but this seems
> > rather inelegant.

You can't. However, you wouldn't really gain anything by it since the
base frame is not saved as part of your workspace. The intended way is
as Kurt said: Override .First in your own .Rprofile.

> > So my questions are:
> 
> > (1) Why has ctest been included among the start-up options, and why has
> > this mechanism of using the .First been used, rather than relying on
> > people putting the command require("ctest", quietly=TRUE) into the
> > .Rprofile?
> 
> > (2) Is there an elegant way of me stopping ctest from being loaded, other
> > then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?
> 
> There was a great amount of discussion on r-core whether or not ctest
> should be preloaded.  We all agree that base is way too large, and that
> it eventually should basically be a core S language interpreter, with
> everything else available ``on demand''.  Re add-on packages, there are
> two obvious possibilities:
> 
> * only provide base by default, and let users or site admins customize
>   the list of packages they want by default.
> 
> * provide packages like ctest (and maybe ts) by default, and have site
>   admins or users overrule the default settings.
> 
> In a Unix-centric world the former would be the obvious choice.
> However, there was great concern about the situation on Windows, where
> the intermediate ``site admin'' level typically would not be available,
> and we do not want to have first time R windows users start complaining
> about R as a stats package that cannot even do a t test.  Hence, we went
> for the latter.

Not too sure whether the former is really all that obvious even on
Unix. We'll be getting casual users there too who'd expect that
standard procedures like t.test are available by default and site
admins who wouldn't know anything about the packages they install (and
on Linux, the situation is quite often a single-user one anyway).
However, I do like the idea of having a small core, in particular with
a view to e.g. calling R in shell scripts.

I think the current situation is mainly a stopgap, which got inserted
when we realised that moving t.test into ctest and autoloading ctest
when t.test was requested led to a situation that was really difficult
to explain to users ("cor.test only works after t.test?"). Longer
term, I think we need something more elegant than .Rprofile/.First to
let the users edit their default configuration easily. I'm not quite
sure what I want, but say for the sake of argument that the user
interface was

> configure("packages")

which could do different things depending on whether you were using a
GUI, terminal interface, ESS, or maybe even batch mode. In simple
modes it might simply be based on edit()ing the output of

  data.frame(package=.packages(all=T),
             load=!is.na(match(.packages(all=T),.packages())))

- although you might want to distinguish between the usual profile-ish
things (site-level/user-level/directory-level/workspace-specific) too.
With a GUI, you'd likely want something with checkboxes instead.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Mar 30 16:20:05 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 30 Mar 2001 10:20:05 -0500 (EST)
Subject: [Rd] Re: [Omega-bugs] RSMethods pkg causes data.frame misbehavior in R
References: <200103292310.SAA06361@falmouth.bwh.harvard.edu>
Message-ID: <200103301520.KAA20458@jessie.research.bell-labs.com>

Right.  The methods such as as.data.frame.numeric don't get
dispatched, basically because RSMethods tries to interpret class(x) in
the S4 sense (so, e.g. a numeric vector has class "numeric").

Problems can then come from different semantics for S3-style and
S4-style methods.  The older methods don't dispatch on the mode of
vectors (or equivalently, on the value of data.class(x)), but only on
an explicit "class" attribute.

In order to have separate methods for as.data.frame.numeric, etc.,
the S3-style generic function explicitly assigns a class (attribute).

In the newer class model, every object has a class so no explicit
attribute is needed.

The long-term solution depends on how we want to approach the two
kinds of methods:  Do we want them to live side-by-side or do we want
a single method dispatch model?

Meanwhile, a work-around is to find places, like as.data.frame, where
the class attribute is set, and make this explicit.

This specific bug goes away if the RSMethods package overrides
as.data.frame with the following definition.  (I'll add it to the next
version of RSMethods if it proves OK.)

as.data.frame <-
function (x, row.names = NULL, optional = FALSE) 
{
    if (is.null(x)) 
        return(as.data.frame(list()))
    if (is.null(attr(x, "class"))) 
        attr(x, "class") <- data.class(x)
    UseMethod("as.data.frame", x, row.names, optional)
}
  
Like most of these problems, I suspect, all that's needed is to
replace "class(x)" with "attr(x, 'class')".

Thanks, Vince.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

> From: "Vincent J. Carey, Jr." <stvjc@channing.harvard.edu>
> Sender: omega-bugs-admin@omegahat.org
> Errors-To: omega-bugs-admin@omegahat.org
> Precedence: bulk
> List-Help: <mailto:omega-bugs-request@omegahat.org?subject=help>
> List-Post: <mailto:omega-bugs@omegahat.org>
> List-Subscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=subscribe>
> List-Id: Bug reports and related mail for Omegahat software. <omega-bugs.omegahat.org>
> List-Unsubscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=unsubscribe>
> List-Archive: <http://www.omegahat.org/pipermail/omega-bugs/>
> Date: Thu, 29 Mar 2001 18:10:49 -0500 (EST)
> 
> 
> I've run into a problem with data.frame printing/attachment
> in R1.3 (also detected in 1.2) when RSMethods is attached as a library.
> Here are the versions I'm using, they are the latest ones pointed to
> on omega.stat.wisc.edu:
> 
> -rw-r--r--   1 stvjc    st         16920 Mar  5 13:38 SLanguage_0.1-0.tar.gz
> -rw-r--r--   1 stvjc    st         38139 Mar  5 13:37 RSMethods_0.1-2.tar.gz
> 
> A transcript displaying the problem and a traceback is given
> below.  When RSMethods is detached the problem goes away.
> I haven't been able to understand why as.data.frame.default
> kicks in erroneously.
> 
> I'm still able to make progress with the S4 classes in R
> with the RSMethods library, so I don't consider this too 
> urgent.
> 
> vc
> 
> # normal operations prior to library attachment
> 
> > data(stackloss)
> > stackloss[1:3,]
>   Air.Flow Water.Temp Acid.Conc. stack.loss
> 1       80         27         89         42
> 2       80         27         88         37
> 3       75         25         90         37
> 
> # attach
> 
> > library(RSMethods)
> 
> Attaching Package "package:RSMethods":
> 
> 
> 	The following object(s) are masked from package:base :
> 
> 	 all.names all.vars assign exists find get objects remove substring substring<- warning 
> 
> # problem
> 
> > stackloss[1:3,]
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
> 	can't coerce character into a data.frame
> Execution halted
> 
> > traceback()
> 11: stop(paste("can't coerce", data.class(x), "into a data.frame"))
> 10: as.data.frame.default(x[[i]], optional = TRUE)
> 9: as.data.frame(x[[i]], optional = TRUE)
> 8: data.frame(Air.Flow = c("80", "80", "75"), Water.Temp = c("27", 
>    "27", "25"), Acid.Conc. = c("89", "88", "90"), stack.loss = c("42", 
>    "37", "37"), check.names = FALSE, row.names = c("1", "2", "3"
>    ))
> 7: do.call("data.frame", rval)
> 6: format.data.frame(x)
> 5: format(x)
> 4: as.matrix(x)
> 3: print.matrix(format(x), ..., quote = quote, right = right)
> 2: print.data.frame(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 1: print(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 
> --
> 
> # also occurs when just running data()
> 
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:RSMethods"
> [4] "package:ctest"     "Autoloads"         "package:base"     
> > data(stackloss)
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
>         can't coerce numeric into a data.frame
> > detach(3)
> > data(stackloss)
> # no error now
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:ctest"    
> [4] "Autoloads"         "package:base"     
> 
> 
> > 
> > version
>          _                           
> platform sparc-sun-solaris2.6        
> arch     sparc                       
> os       solaris2.6                  
> system   sparc, solaris2.6           
> status   Under development (unstable)
> major    1                           
> minor    3.0                         
> year     2001                        
> month    03                          
> day      04                          
> language R                           
> 
> i've had the same behavior under R1.3 on RH linux 6.1
> and in R1.2b on that OS
> -- 
> stvjc@gauss.bwh.harvard.edu
> _______________________________________________
> Omega-bugs mailing list  -  Omega-bugs@omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-bugs
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 17:26:52 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 18:26:52 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
 <15044.22998.24033.91361@mithrandir.hornik.net>
 <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
Message-ID: <15044.46028.686427.367469@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ...

>> configure("packages")

> which could do different things depending on whether you were using a
> GUI, terminal interface, ESS, or maybe even batch mode. In simple
> modes it might simply be based on edit()ing the output of

>   data.frame(package=.packages(all=T),
>              load=!is.na(match(.packages(all=T),.packages())))

> - although you might want to distinguish between the usual profile-ish
> things (site-level/user-level/directory-level/workspace-specific) too.
> With a GUI, you'd likely want something with checkboxes instead.

Nice idea!  Two remarks.

* We might want similar ways of setting `preferences' such as options.
  [E.g., via something like Emacs M-x customize, or in a GUI style.]

* In any case, as far as I am concerned the real problem is not having a
  convenient interface but on agreeing on what the choices should be,
  and how well-educated users or site admins need to be to make the
  right choices.  E.g., when it comes to setting a default profile for
  packages, how does the user find out which packages he wants?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Fri Mar 30 22:03:10 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
Message-ID: <200103302103.XAA17985@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: Solaris
Submission from: (NULL) (132.200.32.33)


"boink<-" <- function(x, a = 1, b = 2, value){
    print(match.call())
    x
}

> z <- 1
> boink(z, b = 4) <- 22
boink<-(x = *tmp*, a = 4, value = 22)
>
     
Shouldn't it have matched the 4 to b, not a?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 23:46:29 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Mar 2001 00:46:29 +0200
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
In-Reply-To: jhallman@frb.gov's message of "Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)"
References: <200103302103.XAA17985@pubhealth.ku.dk>
Message-ID: <x2d7aykh8a.fsf@blueberry.kubism.ku.dk>

jhallman@frb.gov writes:

> "boink<-" <- function(x, a = 1, b = 2, value){
>     print(match.call())
>     x
> }
> 
> > z <- 1
> > boink(z, b = 4) <- 22
> boink<-(x = *tmp*, a = 4, value = 22)
> >
>      
> Shouldn't it have matched the 4 to b, not a?

Yes. Fixed for 1.2.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Mar 31 21:38:44 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 31 Mar 2001 22:38:44 +0200
Subject: [Rd] Comments on R-1.2.1 builds (PR#851)
In-Reply-To: <14990.35273.167526.4092@mithrandir.hornik.net>
References: <200102170044.BAA19310@pubhealth.ku.dk>
 <14990.35273.167526.4092@mithrandir.hornik.net>
Message-ID: <15046.16468.885425.640832@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> beebe  writes:
>> The R-1.2.1 builds have gone fairly smoothly on most of my UNIX
>> architectures, but there were many warnings reported by the picky SGI
>> compiler that could be eliminated in future releases.

>> Generally, I have found the SGI compilers very helpful in ferreting
>> out portability problems, unused and/or obsolete variables, unexpected
>> datatype coercions, etc., and they compile faster than any other
>> compilers too.

>> First, I configured like this:

>> env CC='c89 -mips3 -O3' ./configure && make all

>> This reports:

>> R is now configured for mips-sgi-irix6.5

>> Source directory:          .
>> Installation directory:    /usr/local
>> C compiler:                c89 -mips3 -O3  -OPT:IEEE_NaN_inf=ON -g
>> C++ compiler:              c++  -g -O2
>> FORTRAN compiler:          g77  -OPT:IEEE_NaN_inf=ON -g -O2

>> X11 support:               yes
>> Gnome support:             no
>> Tcl/Tk support:            yes

>> R profiling support:       yes
>> R as a shared library:     no

>> The build proceeds until this failure:

>> g77 -OPT:IEEE_NaN_inf=ON  -g -O2 -c ch2inv.f -o ch2inv.o
>> f771: Invalid option `-OPT:IEEE_NaN_inf=ON'
>> make[3]: *** [ch2inv.o] Error 1

>> Evidently, it was not prepared for the GNU Fortran compiler.

> Yep, that is a bug.  I need some feedback for fixing this, though.  The
> current logic is to run the autoconf R_C_OPTIEEE test if the platform is
> IRIX.  The test itself tries to compile and run

> #include <math.h>
> #include <ieeefp.h>
> int main () {
>   double x = 0;
>   fpsetmask(0); x = x / x; return (x != x);
> }

> and if that works adds -OPT:IEEE_NaN_inf=ON to both R_XTRA_CFLAGS and
> R_XTRA_FFLAGS.

> This obviously does not make sense for FORTRAN, and should be made more
> defensive for C.

> * For C, one should additionally test whether the compiler accepts this
>   flag.  I assume gcc would not, so should we do

> 	if_not_using_gcc  check_arg("-OPT:IEEE_NaN_inf=ON")

> * For FORTRAN, I am not sure whether the result of the above test has
>   any relevance.  Question is, do we have a FORTRAN test program similar
>   to the above to determine whether the flag is needed?  Again, we
>   should also check whether the compiler accepts the flag ...

> * Or should we simply unconditionally add the flag for ``native'', i.e.,
>   non-GNU compilers?

> (Sorry but I do not have access to SGIs ...)

I would like to fix this for 1.2.3, so it would be great if anyone with
access to IRIX could comment ... Personally, I'd prefer the last idea if
this is feasible.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aa@gwen.stat.unipd.it  Thu Mar  1 09:04:35 2001
From: aa@gwen.stat.unipd.it (aa@gwen.stat.unipd.it)
Date: Thu, 1 Mar 2001 10:04:35 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010904.KAA19346@pubhealth.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################


Today I have installed R 1.02.1  on my MSW-95 laptop;
it essentially worked, but thre are two problems:

1) Although I have chose to install "standard", compiled HTML"
and "WinHelp"  documentation files, and in spite of the fact
that the installer program mwinst.exe reported to hve done this, 
only the first type of documentation is actually accessible
from the Help menu of RGui.

2) I have then attempted to load some packages, but some of
them are declared "non-existent"... see below.
Some others (sm, survival5, nlme) installed correctly and they work;
so the missing "lib" 

>  install.packages(c("sm","sn","integrate","survival5","nlme"))

Delete downloaded files (y/N)? y

Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages(c("sm", "sn", "integrate", "survival5", "nlme")) 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
3: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  


> install.packages("integrate")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("integrate") 
2: No package "integrate" on CRAN. in: download.packages(pkgs, destdir =
tmpd, available = available,  
> install.packages("sn")
Warning messages: 
1: argument `lib` is missing: using C:/STAT/R/RW1021/library in:
install.packages("sn") 
2: No package "sn" on CRAN. in: download.packages(pkgs, destdir = tmpd,
available = available,  
> 

Thanks for your attention and consideration.
Best wishes

Adelchi Azzalini

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows 9x 4.0 (build 950) 

Search Path:
 .GlobalEnv, package:sm, Autoloads, package:base
--
Adelchi Azzalini    <azzalini@stat.unipd.it>
Dept Statistical Sciences, University of Padua, Italy.
http://www.stat.unipd.it/~azzalini



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  1 09:20:46 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 1 Mar 2001 10:20:46 +0100 (MET)
Subject: [Rd] docs + packages (PR#858)
Message-ID: <200103010920.KAA19623@pubhealth.ku.dk>

On Thu, 1 Mar 2001 aa@gwen.stat.unipd.it wrote:

> Today I have installed R 1.02.1  on my MSW-95 laptop;

1.2.1 I presume.

> it essentially worked, but thre are two problems:
>
> 1) Although I have chose to install "standard", compiled HTML"
> and "WinHelp"  documentation files, and in spite of the fact
> that the installer program mwinst.exe reported to hve done this,
> only the first type of documentation is actually accessible
> from the Help menu of RGui.

That's not a bug: see ?help and ?help.start.  You can only use the CHTML
and WinHlp documentation via help or directly in Windows Explorer.

> 2) I have then attempted to load some packages, but some of
> them are declared "non-existent"... see below.

[...]

Again, see the documentation, namely the R for Windows FAQ.
Not all packages are available in pre-compiled form, so you will need
to compile the others yourself.  In particular, sn and integrate are not,
currently.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 13:52:09 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
Subject: [Rd] timeline for R-1.2.x where x>1? Just curious as
Message-ID: <Pine.SOL.3.96.1010301085117.16605A-100000@mfcf.math.uwaterloo.ca>

I am looking to update our installation.

-wt

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 14:28:51 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 14:28:51 +0000 (GMT)
Subject: [Rd] timeline for R-1.2.x where x>1?
Message-ID: <200103011428.OAA20064@toucan.stats.ox.ac.uk>

> Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>

Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
our installation.

You can always find the current plans on developer.r-project.org.
That says

   The latest release of R was 1.2.2 on February 26th, 2001. We might
   have a 1.2.3 release mainly with fixes for the Macintosh port, but
   development will target v.1.3 now.
   No dates for upcoming releases have been scheduled yet.

My own guess would be mid-year for 1.3.0, as a twice-yearly schedule for
1.x.0 releases is the `norm'.

BDR

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Thu Mar  1 15:09:48 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
Subject: [Rd] webpage should be updated regarding 1.2.2
In-Reply-To: <200103011428.OAA20064@toucan.stats.ox.ac.uk>
Message-ID: <Pine.SOL.3.96.1010301100821.16605D-100000@mfcf.math.uwaterloo.ca>



On Thu, 1 Mar 2001, Prof Brian Ripley wrote:

> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> 
> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to update 
> our installation.
> 
> You can always find the current plans on developer.r-project.org.
> That says
> 
>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>    development will target v.1.3 now.
>    No dates for upcoming releases have been scheduled yet.

Thanks, Perhaps the main webpage at www.r-project.org downloads areas could have
a note to this effect as it mentions 1.2.1 as the latest.

-walter tautz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar  1 15:24:58 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 1 Mar 2001 15:24:58 +0000 (GMT)
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <200103011524.PAA20197@toucan.stats.ox.ac.uk>


> X-Authentication-Warning: mfcf.math: wtautz owned process doing -bs
> Date: Thu, 1 Mar 2001 10:09:48 -0500 (EST)
> From: Walter Tautz <wtautz@math.uwaterloo.ca>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: R-devel@r-project.org
> Subject: [Rd] webpage should be updated regarding 1.2.2
> 
> 
> 
> On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
> 
> > > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
> > > From: Walter Tautz <wtautz@math.uwaterloo.ca>
> > 
> > Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to 
update 
> > our installation.
> > 
> > You can always find the current plans on developer.r-project.org.
> > That says
> > 
> >    The latest release of R was 1.2.2 on February 26th, 2001. We might
> >    have a 1.2.3 release mainly with fixes for the Macintosh port, but
> >    development will target v.1.3 now.
> >    No dates for upcoming releases have been scheduled yet.
> 
> Thanks, Perhaps the main webpage at www.r-project.org downloads areas could 
have
> a note to this effect as it mentions 1.2.1 as the latest.

It just so happens that updating was late this one time!  (R people are
volunteers, and not available all day every day.  In particular, Fritz
Leisch who does the bulk of the work on the web sites is in Australia
or in transit.)

I think you mean the main page of cran.r-project.org, which is linked
off www.r-project.org.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Thu Mar  1 15:36:21 2001
From: paradis@isem.univ-montp2.fr (Emmanuel Paradis)
Date: Thu, 01 Mar 2001 16:36:21 +0100
Subject: [Rd] webpage should be updated regarding 1.2.2
Message-ID: <3.0.32.20010301163621.008fc6a0@162.38.183.200>

At 10:09 01/03/01 -0500, you wrote:
>
>
>On Thu, 1 Mar 2001, Prof Brian Ripley wrote:
>
>> > Date: Thu, 1 Mar 2001 08:52:09 -0500 (EST)
>> > From: Walter Tautz <wtautz@math.uwaterloo.ca>
>> 
>> Re: [Rd] timeline for R-1.2.x where x>1? Just curious as I am looking to
update 
>> our installation.
>> 
>> You can always find the current plans on developer.r-project.org.
>> That says
>> 
>>    The latest release of R was 1.2.2 on February 26th, 2001. We might
>>    have a 1.2.3 release mainly with fixes for the Macintosh port, but
>>    development will target v.1.3 now.
>>    No dates for upcoming releases have been scheduled yet.
>
>Thanks, Perhaps the main webpage at www.r-project.org downloads areas
could have
>a note to this effect as it mentions 1.2.1 as the latest.
>
>-walter tautz

No, it doesn't. Look at http://cran.r-project.org/

1.2.2 is mentioned as the lastest.
	

	EP
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Thu Mar  1 23:19:56 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Fri, 02 Mar 2001 10:19:56 +1100
Subject: [Rd] Finalization and external pointer objects
Message-ID: <3A9ED91C.7E2DBCA1@cmis.csiro.au>

Hi,

I've been developing an image analysis package based on R for a while
now and I've had problems relating to garbage collection, so it with
great interest that I've noticed the work done by Luke Tierney in this
area, and I'd like to discuss how best to fit it into my package. I'll
start with how my package is structured - an image is represented by an
integer with a class of "image". This is actually a pointer to a C
abstract data type. Most imaging functions in my library have a form
like this


IMAGE *imquickthresh(const IMAGE *src, IMAGE *target, float p1, int p2);

the target parameter is optional and never used from R.

This is made appropriate for a .C call like this

Rimquickthresh(IMAGE **output, IMAGE **src, Sfloat *p1, Sint *p2)
{
  IMAGE *dummy;

  dummy = imquickthresh(*src, NULL, (float)(*p1), (int)(*p2));

  *output = dummy;
}

the R code calling this looks like

function(src, p1, p2)
{
  if (!is.image(src))
    stop("Parameter 'src' should be an image.")
  output <- POINTER
  output<-.C("Rimquickthresh", val = output, (src), as.double(p1),
as.integer(p2))$val
  if (output == POINTER)
    return(0)
  class(output) <- c("image")
  AddGlobalImageFunc(output)
  output
}


The AddGlobalImageFunc is related to my GC mechanism.
POINTER is as.integer(0) or as.double(0), depending on platform.

This is mostly generated automatically. I'd really like to discard my GC
mechanism and make use of the special facilities that are being
developed. So far it seems that most of these are related to the .Call
mechanism, so is there a sensible way to use them with pointers passed
to or returned from a .C call? I'd like to avoid changing everything to
make use of the .Call facility because I suspect it might make porting
to Splus more difficult and it's likely to be a significant amount of
work.

I'm guessing that there needs to be some of the following functions at
the R level - perhaps they are already around and I've missed them.

GenExtPointer - basically the same thing that can get returned by a
.Call using  R_MakeExternalPtr. The address of the appropriate part of
this would then need to be passed in the place of "output" above,
presumably by using an R interface to R_ExternalPtrAddr.

register.finalizer mentioned in Lukes discussion papers is needed.

I welcome any advice about other ways of approaching this problem,
indications of where the development of these things are at and if there
is ever likely to be any hope of using similar functionality under
Splus? Are the results from an approach based on .C going to be so
horrible that I should just give up and work on a .Call based approach?


I look forward to hearing from you.

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sergei@stams.strath.ac.uk  Fri Mar  2 17:14:31 2001
From: sergei@stams.strath.ac.uk (sergei@stams.strath.ac.uk)
Date: Fri, 2 Mar 2001 18:14:31 +0100 (MET)
Subject: [Rd] apply on data.frame does not work properly (PR#859)
Message-ID: <200103021714.SAA10405@pubhealth.ku.dk>

Full_Name: Dr. Sergei Zuyev
Version: 1.1.0 and 1.2.2
OS: Solaris
Submission from: (NULL) (130.159.248.36)


apply on data.frame with floats, factors and NA's does not work properly. Here
is
an example:
I am searching for rows containig NA values.

X1 <- c(1, NA)
X2<-c("A","B")
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it should
 
# But:
X1 <- c(1.5, NA) # float instead of natural
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE FALSE
# as it shouldn't
 
# However,
apply(df[2,],1,function(x){any(is.na(x))})
# gives TRUE
 
# Change X2 to a numeric vector and everything works fine:
X2<-c(2.5,3)
df<-data.frame(X1,X2)
apply(df,1,function(x){any(is.na(x))})
# gives
# 1     2
# FALSE TRUE
# as it shouldn't                                                               
            

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Fri Mar  2 17:40:17 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 02 Mar 2001 18:40:17 +0100
Subject: [Rd] apply on data.frame does not work properly (PR#859)
In-Reply-To: sergei@stams.strath.ac.uk's message of "Fri, 2 Mar 2001 18:14:31 +0100 (MET)"
References: <200103021714.SAA10405@pubhealth.ku.dk>
Message-ID: <x2snkw83y6.fsf@blueberry.kubism.ku.dk>

sergei@stams.strath.ac.uk writes:

> Full_Name: Dr. Sergei Zuyev
> Version: 1.1.0 and 1.2.2
> OS: Solaris
> Submission from: (NULL) (130.159.248.36)
> 
> 
> apply on data.frame with floats, factors and NA's does not work properly. Here
> is
> an example:
> I am searching for rows containig NA values.
> 
> X1 <- c(1, NA)
> X2<-c("A","B")
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it should
>  
> # But:
> X1 <- c(1.5, NA) # float instead of natural
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE FALSE
> # as it shouldn't
>  
> # However,
> apply(df[2,],1,function(x){any(is.na(x))})
> # gives TRUE
>  
> # Change X2 to a numeric vector and everything works fine:
> X2<-c(2.5,3)
> df<-data.frame(X1,X2)
> apply(df,1,function(x){any(is.na(x))})
> # gives
> # 1     2
> # FALSE TRUE
> # as it shouldn't                                                          
 
This traces back to the use of format() when coercing dataframes to
character:

> format(c(1,NA))
[1] " 1" "NA"
> format(c(1000,NA))
[1] "1000" "  NA"

And "  NA" is not a character NA....

apply(is.na(df),1,any) seems to be better though.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b4h443@arabia.com  Fri Mar  2 23:04:34 2001
From: b4h443@arabia.com (b4h443@arabia.com)
Date: Fri, 02 Mar 2001 17:04:34 -0600
Subject: [Rd] Brand New E-Mail pager for FR-EE!
Message-ID: <000037602e56$00007599$00004fa8@mail.dptechnology.com>

Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check

   Put Free pagers on your kids - Give one to your loved ones - For FR-EE

   Here at Paging America we are excited to be offering you this exclusive, top of the line, full featured pager in your choice
   of color for FR=EE. This side viewable display pager is one of the smallest and lightest pagers on the market today.


   Call 877-699-8546 to be Guaranteed Your FR-EE Pager Today


   Your pager will hold up to 20 numeric messages. It has 9 music alerts and silent vibration. New FLEX technology provides three
   times the battery life. Also, message time and date stamping and smart alarm so you can set a daily or weekly reminder.
   This pager comes in black, teal and blue.

   To receive your free pager all we ask is that you allow us to provide you with the monthly airtime cancelable at any time.
   There is no long term contract. Just call the toll free number and we'll ship your Fr-ee pager to you immediately in your choice of color
   already programmed with a local telephone number for your town.

   Make this easy phone call and we will deliver your pager immediately.


   Call 877-699-8546 to get in on this exciting offer today












Brand New Pager for FR-EE!

   No long term contract
   No big prepayment of airtime
   No credit check



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  3 20:56:20 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Mar 2001 21:56:20 +0100 (MET)
Subject: [Rd] Context problem with ... and rbind (PR#860)
Message-ID: <200103032056.VAA13487@pubhealth.ku.dk>

R 1.2.2, Solaris and Linux:

f <- function(x, ...)
{
   g <- function(x, ...) x
   rbind(numeric(), g(x, ...))
}
> f(1:3)
Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

S-PLUS 3.4 gives

     [,1] [,2] [,3]
[1,]    1    2    3

as I would expect.

f <- function(x, ...)
{
   g <- function(x, ...) x
   tmp <- g(x, ...)
   rbind(numeric(), tmp)
}
> f(1:3)

does work, and I believe this should be equivalent.


This is an abstract of code used in the latest S version of the boot
package.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 11:56:35 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 12:56:35 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sat, 3 Mar 2001 21:56:20 +0100 (MET)"
References: <200103032056.VAA13487@pubhealth.ku.dk>
Message-ID: <x23dctbvd8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> f <- function(x, ...)
> {
>    g <- function(x, ...) x
>    rbind(numeric(), g(x, ...))
> }
> > f(1:3)
> Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context

It's not really rbind that is the culprit here, but the deparsing of
its argument. A near-minimal version of what I think is the same issue
is

f <- function(x, ...) h(g(x, ...))
g <- function(x, ...) x
h <- function(...)substitute(list(...))
f(1)
#Error in h(g(x, ...)) : ... used in an incorrect context

Also, the following is perplexing, given the definition of quote():

> quote(list(...))
list(...)
> substitute(list(...))
Error: ... used in an incorrect context

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:26:13 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:26:13 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 12:56:35 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x28zml2mt6.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> ripley@stats.ox.ac.uk writes:
> 
> > f <- function(x, ...)
> > {
> >    g <- function(x, ...) x
> >    rbind(numeric(), g(x, ...))
> > }
> > > f(1:3)
> > Error in rbind(numeric(), g(x, ...)) : ... used in an incorrect context
> 
> It's not really rbind that is the culprit here, but the deparsing of
> its argument. A near-minimal version of what I think is the same issue
> is
> 
> f <- function(x, ...) h(g(x, ...))
> g <- function(x, ...) x
> h <- function(...)substitute(list(...))
> f(1)
> #Error in h(g(x, ...)) : ... used in an incorrect context

Hmm.... The patch below stops the error, and passes make check, but I
have a nagging suspicion that it isn't the right way to fix this:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:11:12
@@ -1749,11 +1749,11 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue || h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Sun Mar  4 22:53:34 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 04 Mar 2001 23:53:34 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:26:13 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk>
Message-ID: <x266hp4041.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> Hmm.... The patch below stops the error, and passes make check, but I
> have a nagging suspicion that it isn't the right way to fix this:

This might work rather better:

diff -u -r1.85 coerce.c
--- src/main/coerce.c   2001/01/15 14:52:09     1.85
+++ src/main/coerce.c   2001/03/04 22:46:27
@@ -1749,11 +1749,13 @@
     if (isNull(el))
        return el;
     if (CAR(el) == R_DotsSymbol) {
-       h = findVar(CAR(el), rho);
+       h = findVarInFrame(rho, CAR(el));
        if (h == R_NilValue)
            return substituteList(CDR(el), rho);
        if (TYPEOF(h) != DOTSXP) {
-           if (h == R_MissingArg)
+           if (h == R_UnboundValue)
+               return el;
+           if( h == R_MissingArg)
                return substituteList(CDR(el), rho);
            error("... used in an incorrect context");
        }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Sun Mar  4 23:23:09 2001
From: Richard.Beare@cmis.csiro.au (Richard Beare)
Date: Mon, 05 Mar 2001 09:23:09 +1000
Subject: [Rd] passing pointer types via .C calls
Message-ID: <3AA2CE5D.D00E9052@cmis.csiro.au>

Hi,
this relates to my earlier message about external references and
finalizers. I was experimenting over the weekend and now suspect that
the appropriate solution to my problem will be to have a special case in
the code that handles the .C call so that external references are
handled appropriately - I guess that a pointer to the reference should
be passed to the C code. As I've never experimented with the R internals
before I thought that I had better check peoples opinion. Does this
approach break anything in the work the Luke Tierney has been doing?
I've only had a quick look so far so I'm not really certain how the code
that handling the .C call is meant to work. I have successfully passed
the pointer to the external reference to my code, but I'm really not
sure about how the conventions used for this kind of thing - who should
I be talking to about it?

All advice welcome....

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bernd.winkler@genedata.com  Mon Mar  5 14:01:55 2001
From: bernd.winkler@genedata.com (bernd.winkler@genedata.com)
Date: Mon, 5 Mar 2001 15:01:55 +0100 (MET)
Subject: [Rd] histogram of frequencies (PR#861)
Message-ID: <200103051401.PAA28206@pubhealth.ku.dk>

Full_Name: Dr. Bernd Winkler
Version: 1.2.2
OS: Linux
Submission from: (NULL) (194.59.179.176)


Hi all,

having updated to version 1.2.2 last week I experienced some strange behaviour
of 
the hist function.

I want to plot a histogram of frequencies resp. counts, for example poisson 
random numbers, on a predefined and fixed x scale

> hist(rpois(500, 2), breaks=0:10)

But instead of the frequencies I get the density of these data.
Introducing the parameter freq=TRUE then I get the frequencies but 
with the following warning message

> hist(rpois(500, 2),breaks=0:10, freq=TRUE)
Warning message: 
the AREAS in the plot are wrong -- rather use `freq=FALSE'! in:
plot.histogram(r, freq = freq, col = col, border = border, main = main,  

The following excerpt from hist.default(...) (new in 1.2.2) might have caused
this behaviour:
    ...
    diddle <- 1e-07 * max(abs(range(breaks)))
    fuzz <- if (right) 
        c(if (include.lowest) -diddle else diddle, rep(diddle, 
            length(breaks) - 1))
    else c(rep(-diddle, length(breaks) - 1), if (include.lowest) diddle else
-diddle)
    breaks <- breaks + fuzz
    ...

The addition of the fuzz variable to the breaks causes hist 
to think of no equidistant breaks (even if they are) and therefore 
a density plot is generated by default. Removing these lines the 
behaviour is like the one in version 1.2.1 and earlier. 
Is there an alternative doing this with the new version?
And what about the border color parameter in barplot?

Many thanks in advance

Bernd





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 14:59:37 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 15:59:37 +0100
Subject: [Rd] histogram of frequencies (PR#861)
In-Reply-To: bernd.winkler@genedata.com's message of "Mon, 5 Mar 2001 15:01:55 +0100 (MET)"
References: <200103051401.PAA28206@pubhealth.ku.dk>
Message-ID: <x2itlob6sm.fsf@blueberry.kubism.ku.dk>

bernd.winkler@genedata.com writes:

> The addition of the fuzz variable to the breaks causes hist 
> to think of no equidistant breaks (even if they are) and therefore 
> a density plot is generated by default. Removing these lines the 
> behaviour is like the one in version 1.2.1 and earlier. 
> Is there an alternative doing this with the new version?
> And what about the border color parameter in barplot?

Argh! This just goes to prove how hard it is to fix one bug without
introducing another.... 

The two types of fuzz in hist.default should not be of the same size! 
Try setting the multiplier in "diddle" to a smaller value, like 1e-12.
Either that or we should test for equidistant breaks before adding the
fuzz. 

It only happens with user-specified breaks, though, and the error
message with freq=T is of course ignorable.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar  5 15:17:03 2001
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 5 Mar 2001 09:17:03 -0600 (CST)
Subject: [Rd] passing pointer types via .C calls
In-Reply-To: <3AA2CE5D.D00E9052@cmis.csiro.au> from Richard Beare at "Mar 5,
 2001 09:23:09 am"
Message-ID: <200103051517.f25FH3X26098@muskrat.stat.umn.edu>

Richard Beare wrote:
> Hi,
> this relates to my earlier message about external references and
> finalizers. I was experimenting over the weekend and now suspect that
> the appropriate solution to my problem will be to have a special case in
> the code that handles the .C call so that external references are
> handled appropriately - I guess that a pointer to the reference should
> be passed to the C code. As I've never experimented with the R internals
> before I thought that I had better check peoples opinion. Does this
> approach break anything in the work the Luke Tierney has been doing?
> I've only had a quick look so far so I'm not really certain how the code
> that handling the .C call is meant to work. I have successfully passed
> the pointer to the external reference to my code, but I'm really not
> sure about how the conventions used for this kind of thing - who should
> I be talking to about it?
> 
> All advice welcome....
> 

I am a little confused about exactly how you are doing things but
maybe the following will help. Or not :-)

To let the R memory manager manage your external object you need to

	create a *single* R object that represents your external one

	only reference your external object through its R representative

That way once the memory manager finds that it is not possible to
access the R representative from R any more the it knows that it is
safe for your external object to be reclaimed, using say the
reclamation code you register as a finalizer.

In languages like Java where objects are passed by reference there
isn't much more to it--any object can have a finalizer attached to it
(either via a finalize mehtod or using the weak reference mechanism).

In R things are a bit more complicated because (most) objects are
passed by value.  So if you do

	x <- some calculation that yields a numeric
	...
	y <- x

then all that is guaranteed is that y refers to a value with the same
numeric contents (and attributes and the like) but not necessarily to
the same physical object in memory.  It might be the same or it might
be a copy.  So if you represent your external object as a numeric
containing some encoding of the pointer value and do

	x<-NewExternalObject()
        ...
	y<-x

then y will contain the same pointer value but may not reference the
same internal R object.  If it does not, and there are no more
references to the original object, and a finalizer was attached to the
original object, then your external object may have been reclaimed
before you use y, and then .... Using a standard numeric object to
represent external objects means you cannot quarantee that there is a
*single* R object to represent your external one.

This is the reason for a special external pointer object.  These
things are never copied, they are passed by reference. (There are a
few other objects that are also always passed by reference:
environments and symbols). This guarantees the one-to-one
correspondence between the R representation and the external object
that you need to get the memory management to work.

How you get things from C to R and back (.Call, .C, whatever) doesn't
really matter.  What matters is that you use a representation in R
that will be passed by reference.

Hope that helps

luke
 
-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From faraway@umich.edu  Mon Mar  5 17:04:35 2001
From: faraway@umich.edu (faraway@umich.edu)
Date: Mon, 5 Mar 2001 18:04:35 +0100 (MET)
Subject: [Rd] Wrong sign for Pearson residuals (PR#862)
Message-ID: <200103051704.SAA01343@pubhealth.ku.dk>

Full_Name: Julian Faraway
Version: 1.2.1
OS: Linux + NT
Submission from: (NULL) (141.211.66.172)


Consider the following data from McCullagh and Nelder:

> clot
   time conc lot
1   118    5 one
2    58   10 one
3    42   15 one
4    35   20 one
5    27   30 one
6    25   40 one
7    21   60 one
8    19   80 one
9    18  100 one
10   69    5 two
11   35   10 two
12   26   15 two
13   21   20 two
14   18   30 two
15   16   40 two
16   13   60 two
17   12   80 two
18   12  100 two
> g <- glm(time ~ log(conc)*lot, Gamma, clot)
> residuals(g)
         1          2          3          4          5          6          7 
-0.0400835  0.0864112  0.0490090  0.0290499 -0.0384659  0.0011126 -0.0286959 
         8          9         10         11         12         13         14 
-0.0375571 -0.0263724 -0.0292475  0.0637151  0.0394632 -0.0175449  0.0143592 
        15         16         17         18 
 0.0103035 -0.0557378 -0.0466764  0.0171410 
> residuals(g,type="pearson")
         1          2          3          4          5          6          7 
 0.0395493 -0.0889174 -0.0498126 -0.0293318  0.0379742 -0.0011130  0.0284220 
         8          9         10         11         12         13         14 
 0.0370884  0.0261410  0.0289630 -0.0650753 -0.0399839  0.0174424 -0.0144280 
        15         16         17         18 
-0.0103389  0.0547070  0.0459530 -0.0172391 

The Pearson residuals have the wrong sign. It seems the sign is taken from the 
working residuals. The sign is reversed because the inverse link function
used in this example. The problem could be easily fixed by taking the sign from

the response residuals.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@pubhealth.ku.dk  Mon Mar  5 21:20:10 2001
From: p.dalgaard@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 2001 22:20:10 +0100
Subject: [Rd] Context problem with ... and rbind (PR#860)
In-Reply-To: Peter Dalgaard BSA's message of "04 Mar 2001 23:53:34 +0100"
References: <200103032056.VAA13487@pubhealth.ku.dk> <x23dctbvd8.fsf@blueberry.kubism.ku.dk> <x28zml2mt6.fsf@blueberry.kubism.ku.dk> <x266hp4041.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2pufvj4l1.fsf@blueberry.kubism.ku.dk>


OK, I decided that it was definitely better than the original this
way. Committed for 1.3.0.

Peter Dalgaard BSA <p.dalgaard@pubhealth.ku.dk> writes:

> diff -u -r1.85 coerce.c
> --- src/main/coerce.c   2001/01/15 14:52:09     1.85
> +++ src/main/coerce.c   2001/03/04 22:46:27
> @@ -1749,11 +1749,13 @@
>      if (isNull(el))
>         return el;
>      if (CAR(el) == R_DotsSymbol) {
> -       h = findVar(CAR(el), rho);
> +       h = findVarInFrame(rho, CAR(el));
>         if (h == R_NilValue)
>             return substituteList(CDR(el), rho);
>         if (TYPEOF(h) != DOTSXP) {
> -           if (h == R_MissingArg)
> +           if (h == R_UnboundValue)
> +               return el;
> +           if( h == R_MissingArg)
>                 return substituteList(CDR(el), rho);
>             error("... used in an incorrect context");
>         }

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 08:35:10 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 6 Mar 2001 08:35:10 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103050832.KAA01502@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>

[Moved to R-devel, as more appropriate.]

On Mon, 5 Mar 2001, Jari Oksanen wrote:

> Canberra distance is defined in function `dist' (standard library `mva') as
>
> sum(|x_i - y_i| / |x_i + y_i|)
>
> Obviously this is undefined for cases where both x_i and y_i are zeros.  Since
> double zeros are common in many data sets, this is a nuisance.  In our field
> (from which the distance is coming), it is customary to remove double zeros:
> contribution to distance is zero when both x_i and y_i are zero.  Could it be
> possible to have this kind of feature in R as well?
>
> It seems that this would do the trick without breaking applications where
> double zeros do not occur:

I am sure we should do something, but is this exactly right?  From dist()
in the R-devel version (1.3.x, eventually) I have enabled the handling of
missing values.  With this solution, identically zero elements contribute
zero to the distance, and are not regarded as missing.  Canberra is
similar to binary, where x_i = y_i = 0 is treated as equivalent to
missing.  The issue is if count should be incremented if
sum == 0.0 or not.

A related issue is the test (sum > 0.0).  I guess there are potential
problems with optimization on machines that use extended-precision
arithmetic, where sum might be non-zero in a register but zero if stored.
Not sure if that can actually happen, but a tolerance (e.g. machar's
xmax) is usually safer.


>
> --- R-1.2.2/src/appl/distance.c	Sun Oct 15 18:13:25 2000
> +++ R-work/src/appl/distance.c	Mon Mar  5 10:16:53 2001
> @@ -93,5 +93,5 @@
>  double R_canberra(double *x, int nr, int nc, int i1, int i2)
>  {
> -    double dist;
> +    double dist, sum;
>      int count, j;
>
> @@ -100,5 +100,7 @@
>      for(j=0 ; j<nc ; j++) {
>  	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> -	    dist += fabs(x[i1] - x[i2])/fabs(x[i1] + x[i2]);
> +	    sum = fabs(x[i1] + x[i2]);
> +	    if (sum > 0.0)
> +		dist += fabs(x[i1] - x[i2])/sum;
>  	    count++;
>  	}
>
>
>
> Best wishes, Jari Oksanen
> --
> Jari Oksanen -- Dept Biology, Univ Oulu, 90014 Oulu, Finland
> Ph. +358 8 5531526 (job), mobile +358 40 5136529
> email jari.oksanen@oulu.fi, homepage http://cc.oulu.fi/~jarioksa/
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jarioksa@cc.oulu.fi  Tue Mar  6 09:16:20 2001
From: jarioksa@cc.oulu.fi (Jari Oksanen)
Date: Tue, 06 Mar 2001 11:16:20 +0200
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: Message from Prof Brian D Ripley <ripley@stats.ox.ac.uk>
 of "Tue, 06 Mar 2001 08:35:10 GMT." <Pine.GSO.4.31.0103060822390.25708-100000@auk.stats>
Message-ID: <200103060916.LAA27821@pc112145.oulu.fi>


ripley@stats.ox.ac.uk said:
> [Moved to R-devel, as more appropriate.]

This means that I probably have to subsribe (momentarily) for R-devel which I 
have regarded as too technical for non-developer like me.


ripley@stats.ox.ac.uk said:
> I am sure we should do something, but is this exactly right?

I am not sure either: it is right for me in my present applications, but I 
think it may not be right in general.  I used dist() for community data, where 
zero *is* zero (not only approximately zero floating point number) and means 
that the species is absent, and of course, all numbers are positive or zeros.  
Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1 
would yield 2/0 which probably shouldn't be regarded as zero, but rather as 
NaN.  So a better test would be for above-zero numerator or explicitly for 
both x_i && y_i.

ripley@stats.ox.ac.uk said:
>  The issue is if count should be incremented if sum == 0.0 or not.

I don't know, and I don't have Lance & Williams 1967 to check. However, more 
recent papers by Canberra people do *not* increment count for double-zeros 
(Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure 
of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the 
really *correct* solution or what are the arguments for incrementing or not 
incrementing count. At least not incrementing means that count varies with 
pairs of observations instead of being a simple down-scaling by a constant for 
the entire matrix.  However, probably the original Lance & Williams choice was 
to increment only for sum > 0.  Some other people may have better libraries to 
check both the choice and the argument (I may have a look there, but I would 
be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for 
incrementing count would need testing above-zero denominator which begins to 
look ugly coding if we need testing for numerator as well.

In community ecology data, the number of species per site (= non-zero values 
per column) is a valid statistic of something, but the total number of species 
in a data set (= number of rows in the matrix) increases with the size of the 
sample set.  So the data is the more infested with zeros the larger the data 
set is.  I guess this the argument here for incrementing only for 
non-double-zeros: the count is dependent only on the pair compared instead of 
other observations not involved in this comparison.  On the other hand, I do 
not understand why you need to divide at all instead of using only the sum 
(this formulation occurs as well in literature).

As a quick solutions with the original 1.2.2 code  I replaced:

> str(dist(kasvit, method="can"))
Class 'dist'  atomic [1:153] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...
....
with a dirty hack:
> str(dist(kasvit+.Machine$double.eps, method="can"))
Class 'dist'  atomic [1:153] 49.2 61.7 50.9 52.1 60.1 ...

which certainly increments count for every pair, although it shouldn't.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 09:40:30 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 09:40:30 +0000 (GMT)
Subject: [Rd] Re: [R] Canberra dist and double zeros
In-Reply-To: <200103060916.LAA27821@pc112145.oulu.fi>
Message-ID: <Pine.GSO.4.31.0103060930001.7798-100000@toucan.stats>

On Tue, 6 Mar 2001, Jari Oksanen wrote:

> ripley@stats.ox.ac.uk said:
> > [Moved to R-devel, as more appropriate.]
>
> This means that I probably have to subsribe (momentarily) for R-devel which I
> have regarded as too technical for non-developer like me.

We'll keep you on the Cc: list.  Normally things like this are on R-devel,
as they are specialized.

> ripley@stats.ox.ac.uk said:
> > I am sure we should do something, but is this exactly right?
>
> I am not sure either: it is right for me in my present applications, but I
> think it may not be right in general.  I used dist() for community data, where
> zero *is* zero (not only approximately zero floating point number) and means
> that the species is absent, and of course, all numbers are positive or zeros.
> Canberra distance is OK for negative numbers as well, and so x_i = -1, y_1 = 1
> would yield 2/0 which probably shouldn't be regarded as zero, but rather as
> NaN.  So a better test would be for above-zero numerator or explicitly for
> both x_i && y_i.

I think it should be Inf, and was going to comment that was another
problem.

> ripley@stats.ox.ac.uk said:
> >  The issue is if count should be incremented if sum == 0.0 or not.
>
> I don't know, and I don't have Lance & Williams 1967 to check. However, more
> recent papers by Canberra people do *not* increment count for double-zeros
> (Faith, Minchin, Belbin 1987. Compositional dissimilarity as a robust measure
> of ecological distance. Vegetatio 69, 57-68.).  I have no idea about the
> really *correct* solution or what are the arguments for incrementing or not
> incrementing count. At least not incrementing means that count varies with
> pairs of observations instead of being a simple down-scaling by a constant for
> the entire matrix.  However, probably the original Lance & Williams choice was
> to increment only for sum > 0.

Note count is only relevant if count < nc, and the code in 1.2.2 is wrong:
it should have been

    if(count != nc) dist /= ((double)count/nc);

Fortunately, it was never used.

> Some other people may have better libraries to
> check both the choice and the argument (I may have a look there, but I would
> be surprised if I find Aust. Comput. J. 1, 15-20 here).  Checking for
> incrementing count would need testing above-zero denominator which begins to
> look ugly coding if we need testing for numerator as well.

You do anyway to get 2/0 different from 0/0.  We can code any solution,
and this is simple and clean compared to, say, scan.c!

I am going to implement that x1=x1=0 is equivalent to missing, and that
x1=+1, x2=-1 gives 2/0 = Inf.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar  6 15:33:20 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 06 Mar 2001 10:33:20 -0500
Subject: [Rd] pac2bin
Message-ID: <3AA50340.ED03EAD7@bank-banque-canada.ca>


I sometimes wonder how difficult it would be to set up an email system, like the
netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
packages. Has anyone every thought about this? I guess the main use would be for
Windows, about which I know almost nothing, so I won't volunteer myself.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  6 16:21:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 6 Mar 2001 16:21:57 +0000 (GMT)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103061610340.8440-100000@toucan.stats>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.

If it all worked without a hitch, yes.  Many do not: for example several
need to be configured manually (without instructions, either) as their
configure scripts do not work under Windows (or use Unix-specific paths).
The real problems are packages that fail make pkgcheck-foo, e.g.
because they have par(ask=T) and Windows is using smaller buffers.
And then there are those which use data directories in unintended ways so
they cannot be zipped ....

Also, some of building has to be done under Windows, so one would need a
Windows server running.

There are ideas to ease this.  Peter D and I have talking about
cross-compiling and using Wine or Win4lin.  A couple of people are
exploring volunteering to help with or automate Windows builds.
When shortly I actually have my own suitable box (a dual PIII Linux box)
on the Internet, I will explore too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Mar  6 16:23:35 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 6 Mar 2001 08:23:35 -0800 (PST)
Subject: [Rd] pac2bin
In-Reply-To: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103060821290.53780-100000@homer06.u.washington.edu>

On Tue, 6 Mar 2001, Paul Gilbert wrote:

>
> I sometimes wonder how difficult it would be to set up an email system, like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary versions of
> packages. Has anyone every thought about this? I guess the main use would be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>

There are security issues, since a configure script can do anything,
as can R CMD check.

Also, I believe quite a few packages require hand-configuring of some sort
under Windows (another reason for the increasing workload).

It might be possible, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cyg@sympatico.ca  Tue Mar  6 20:10:26 2001
From: cyg@sympatico.ca (Yves Gauvreau)
Date: Tue, 6 Mar 2001 15:10:26 -0500
Subject: [Rd] pac2bin
References: <3AA50340.ED03EAD7@bank-banque-canada.ca>
Message-ID: <02ca01c0a679$7c52aae0$0201a8c0@Workgroup>

Hi

I wonder if I could contribute in some way as grateful user of R and as a
Windows NT user. It could also be useful to know that I have a high speed
link to the Internet.

I would gladly give up CPU time to build binary packages for Windows if this
can help others. I understand that some package(s) might not build out of
the box as some of you have pointed out but I have no doubt a solution can
be found.

Thanks for your time and effort.

Yves Gauvreau


----- Original Message -----
From: "Paul Gilbert" <pgilbert@bank-banque-canada.ca>
To: "R-devel" <R-devel@stat.math.ethz.ch>
Sent: Tuesday, March 06, 2001 10:33 AM
Subject: [Rd] pac2bin


>
> I sometimes wonder how difficult it would be to set up an email system,
like the
> netlib@netlib.bell-labs.com facility for f2c, but for producing binary
versions of
> packages. Has anyone every thought about this? I guess the main use would
be for
> Windows, about which I know almost nothing, so I won't volunteer myself.
>
> Paul Gilbert
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ian@darwinsys.com  Wed Mar  7 00:50:06 2001
From: ian@darwinsys.com (ian@darwinsys.com)
Date: Wed, 7 Mar 2001 01:50:06 +0100 (MET)
Subject: [Rd] src/main/arithmetic.c on OpenBSD (PR#863)
Message-ID: <200103070050.BAA17436@pubhealth.ku.dk>

First, let me say how glad I am to discover R! As a former user of S
at the University of Toronto and, briefly S-Plus from StatSci (I had
a binary version of that on Slolaris for a while), I was really glad
to find the "R" project.

This is perhaps not your bug, but I did have one minor glitch in
compiling R. OpenBSD 2.8's math.h does not export the "struct
exception" unless you define __LIBM_PRIVATE. The attached patch is
all that is needed to make it compile. Feel free to apply this patch
in future releases, or not (maybe with "#ifdef __OpenBSD__" around it).

Again, thanks for the software.

Ian Darwin
ian@darwinsys.com

--- src/main/arithmetic.c.orig	Tue Mar  6 17:58:18 2001
+++ src/main/arithmetic.c	Tue Mar  6 18:27:38 2001
@@ -22,7 +22,9 @@
 #include <config.h>
 #endif
 
-#include "Defn.h"		/*-> Arith.h */
+#define __LIBM_PRIVATE	/* OpenBSD -> for definition of "struct exception" */
+#include "Defn.h"		/*-> Arith.h -> math.h */
+#undef __LIBM_PRIVATE	
 #define MATHLIB_PRIVATE
 #include <Rmath.h>
 #undef MATHLIB_PRIVATE

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Wed Mar  7 06:15:04 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103070615.HAA02646@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

none

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 860 *
Subject: Context problem with ... and rbind
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Sat, 3 Mar 2001 20:59:04 +0000 (GMT)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)
* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Wed Mar  7 10:18:33 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Wed, 7 Mar 2001 11:18:33 +0100 (MET)
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
Message-ID: <200103071018.LAA22110@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: rw1022
OS: Windows Me
Submission from: (NULL) (216.175.126.55)


When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that is longer
than $lc-3 (=13) characters long, it repeats the package name on line two.

Example: Now it generates an output like:
com.braju.graphics
com.braju.graphics                Bla bla bla...

But, I believe it should generate:
com.braju.graphics
                Bla bla bla...

To solve this minor bug, just include a line '$old=""'. See line 49 below.

maketitle.pl:
L42: $S = '';
L43: $lc = 16;
L44: $rc = 72;
L45: $old = $package;
L46: $len = length($old);
L47: if ($len > $lc - 3) {
L48:   $S = $old;
L49:   $old = "";                    ### Forgot to this line.
L50:   for ($j = 1; $j < $lc; $j++) {
L51:     $old = $old . ' ';
L52:   }
L53: }
L54: else {
L55:   for ($j = 1; $j < $lc - $len; $j++) {
L56:     $old = $old . ' ';
L57:   }
L58: }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar  7 10:47:11 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 7 Mar 2001 11:47:11 +0100
Subject: [Rd] Minor bug in maketitle.pl (with bug correction) (PR#864)
In-Reply-To: <200103071018.LAA22110@pubhealth.ku.dk>
References: <200103071018.LAA22110@pubhealth.ku.dk>
Message-ID: <15014.4527.291001.545417@mithrandir.hornik.net>

>>>>> henrikb  writes:

> Full_Name: Henrik Bengtsson
> Version: rw1022
> OS: Windows Me
> Submission from: (NULL) (216.175.126.55)


> When ${R_HOME}/share/perl/maketitle.pl tries to generate a TITLE that
> is longer than $lc-3 (=13) characters long, it repeats the package
> name on line two.

> Example: Now it generates an output like:
> com.braju.graphics
> com.braju.graphics                Bla bla bla...

> But, I believe it should generate:
> com.braju.graphics
>                 Bla bla bla...

> To solve this minor bug, just include a line '$old=""'. See line 49
> below.

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar  7 17:09:01 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 7 Mar 2001 18:09:01 +0100 (MET)
Subject: [Rd] axis(...,las=1) breaks postscript code in certain cases (PR#865)
Message-ID: <200103071709.SAA29219@pubhealth.ku.dk>

A colleage of mine (Roland Brun) has found the following 
reproducible problem: 

  In some circumstances, incorrect (for gv/gs) PostScript seems to be
  created when "las = 1".

  {for many versions of R (Linux) at least}

The following code shows you the symptom
    (gv pops up an error message window) :


##- Generate data 
y1 <- 10^seq(0,6)   ##- positive exponents 
y2 <- 10^seq(-4,2)  ##- including negative exponents 

postscript("test.ps")

par(mfrow=c(2,2),mar=c(3,6,0,0)+0.1,oma=c(3,1,1,1),mgp=c(4.5,1,0))

##- Plot1: works perfectly (y1 and las=0)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=0) 

##- Plot2: works perfectly (y1 and las=1)
plot(1:length(y1),y1,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y1))
  axis(2,at=y1,las=1) 

##- Plot3: works perfectly (y2 and las=0)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=0) 

##- Plot4: breaks postscript code (y2 and las=1)
plot(1:length(y2),y2,type="p",axes=F,log="y")
  box()
  axis(1,at=1:length(y2))
  axis(2,at=y2,las=1) 

dev.off()
system("gv test.ps")




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 03
 day = 07
 language = R

Search Path:
 .GlobalEnv, package:ctest, package:SfS, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 18:23:03 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy.Keitt@StonyBrook.Edu)
Date: Wed, 7 Mar 2001 19:23:03 +0100 (MET)
Subject: [Rd] mkString (PR#866)
Message-ID: <200103071823.TAA29687@pubhealth.ku.dk>

Full_Name: Tim Keitt
Version: 1.2x
OS: Linux
Submission from: (NULL) (129.49.19.70)


The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
pointer.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar  7 18:41:09 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 7 Mar 2001 10:41:09 -0800 (PST)
Subject: [Rd] mkString (PR#866)
In-Reply-To: <200103071823.TAA29687@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>

On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:

> Full_Name: Tim Keitt
> Version: 1.2x
> OS: Linux
> Submission from: (NULL) (129.49.19.70)
>
>
> The function "mkString" declared in "Rinternals.h" dumps core if passed a NULL
> pointer.


Don't do that, then?

It's supposed to be passed a zero-terminated string, so it doesn't seem
unreasonable for it to assume that it can dereference its argument. The C
library functions don't in general accept NULL pointers as string
arguments.

I suppose a check for NULL would be fairly harmless, though.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:09:13 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:09:13 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA68759.9040203@StonyBrook.Edu>

Thomas Lumley wrote:

> 
> Don't do that, then?

Indeed, it could be a feature. :-)  (That said, I do prefer functions that handle all possible values of a type.)

T.

> 
> It's supposed to be passed a zero-terminated string, so it doesn't seem
> unreasonable for it to assume that it can dereference its argument. The C
> library functions don't in general accept NULL pointers as string
> arguments.
> 
> I suppose a check for NULL would be fairly harmless, though.
> 
> 	-thomas
> 
> Thomas Lumley			Asst. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle


-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 19:44:19 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 14:44:19 -0500
Subject: [Rd] CRAN Windows links
Message-ID: <3AA68F93.F17D890@bank-banque-canada.ca>

The links to windows-9x and windows-NT on the CRAN Windows download page
seem to be broken. I have the impression that the files are all in the
base directory, for which the link works.

Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Wed Mar  7 19:53:36 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Wed, 07 Mar 2001 14:53:36 -0500
Subject: [Rd] mkString (PR#866)
References: <Pine.A41.4.33.0103071026150.93332-100000@homer29.u.washington.edu>
Message-ID: <3AA691C0.9040305@StonyBrook.Edu>

Thomas Lumley wrote:

> On Wed, 7 Mar 2001 Timothy.Keitt@StonyBrook.Edu wrote:
>
> Don't do that, then?
> 

Actually, on second thought, I think I agree with you.  The caller 
should insure the pointer is valid.  I'm just cranky having to do 
pointer hand-holding for C after enjoying nice languages (like R!) with 
real string types.  **sigh**

T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 20:38:03 2001
From: mendes@cse.ucsc.edu (mendes@cse.ucsc.edu)
Date: Wed, 7 Mar 2001 21:38:03 +0100 (MET)
Subject: [Rd] unable to open the base package (PR#867)
Message-ID: <200103072038.VAA00253@pubhealth.ku.dk>


Hi.

I'm trying to use R that someone installed in his own home directory
(which is located on a common filesystem). Now, he is able to use it with
no problems, but when I try to run it I get the following messages (the
first line is just the command line, and the way I call the program):

an2 1> /projects/draper/R-1.2.1/bin/R
cannot find system Renviron
R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Fatal error: unable to open the base package


The system we are running is SunOS Release 5.8 Generic.

Can you help us in any way?

	Bruno Mendes.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:00:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:00:45 +0000 (GMT)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <200103072038.VAA00253@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>

On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:

>
> Hi.
>
> I'm trying to use R that someone installed in his own home directory
> (which is located on a common filesystem). Now, he is able to use it with
> no problems, but when I try to run it I get the following messages (the
> first line is just the command line, and the way I call the program):
>
> an2 1> /projects/draper/R-1.2.1/bin/R
> cannot find system Renviron
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> Fatal error: unable to open the base package
>
>
> The system we are running is SunOS Release 5.8 Generic.
>
> Can you help us in any way?

Do you permission to read the files in his R installation?
Looks not.

The current version is 1.2.2, BTW.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar  7 21:05:50 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 7 Mar 2001 21:05:50 +0000 (GMT)
Subject: [Rd] CRAN Windows links
In-Reply-To: <3AA68F93.F17D890@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103072103050.16251-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

[...]
> Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.

Shhh!  We were hoping no one would use it.

Seriously, the plan was to abandon WinHelp once CHTML became popular, but
it seems some users prefer the older system. We don't advertise it, and
there is a fair chance it will be abandoned fairly soon -- certainly it
will not be fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mendes@cse.ucsc.edu  Wed Mar  7 21:55:46 2001
From: mendes@cse.ucsc.edu (Bruno Mendes)
Date: Wed, 7 Mar 2001 13:55:46 -0800 (PST)
Subject: [Rd] unable to open the base package (PR#867)
In-Reply-To: <Pine.GSO.4.31.0103072059530.16251-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10103071354510.6746-100000@an2.cse.ucsc.edu>


As silly as it might seem, that was right.

Thanks very much Prof. Ripley.

	Bruno Mendes.

On Wed, 7 Mar 2001, Prof Brian D Ripley wrote:

> On Wed, 7 Mar 2001 mendes@cse.ucsc.edu wrote:
> 
> >
> > Hi.
> >
> > I'm trying to use R that someone installed in his own home directory
> > (which is located on a common filesystem). Now, he is able to use it with
> > no problems, but when I try to run it I get the following messages (the
> > first line is just the command line, and the way I call the program):
> >
> > an2 1> /projects/draper/R-1.2.1/bin/R
> > cannot find system Renviron
> > R : Copyright 2001, The R Development Core Team
> > Version 1.2.1  (2001-01-15)
> >
> > R is free software and comes with ABSOLUTELY NO WARRANTY.
> > You are welcome to redistribute it under certain conditions.
> > Type `license()' or `licence()' for distribution details.
> >
> > R is a collaborative project with many contributors.
> > Type `contributors()' for more information.
> >
> > Type `demo()' for some demos, `help()' for on-line help, or
> > `help.start()' for a HTML browser interface to help.
> > Type `q()' to quit R.
> >
> > Fatal error: unable to open the base package
> >
> >
> > The system we are running is SunOS Release 5.8 Generic.
> >
> > Can you help us in any way?
> 
> Do you permission to read the files in his R installation?
> Looks not.
> 
> The current version is 1.2.2, BTW.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar  7 22:53:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 07 Mar 2001 17:53:23 -0500
Subject: [Rd] syskern
Message-ID: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>

The bug list summary reported an error in syskern which I finally
realized is due to a badly chosen example in the help rather an error in
the code. However, I have taken the opportunity to re-evaluate  what I
have been trying to do with syskern, since some parts may no longer be
important. Since syskern was intended to address certain problems in
package development I would appreciate other opinions on whether these
are still concerns.

The package provides a standardized way to deal with some programming
differences between R and S (e.g. is.R() and is.S() ) and their various
versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
get the point), and also standardized ways to identify  different
operating systems in order for a program to take any operating system
specific action.  Dealing with the  R and S differences I think is still
fairly important although I can no doubt abandon some versions. However,
R has now evolved to the point where it actually deals with most of the
operating system differences (at least the ones that there is much hope
of dealing with).

My main use of the operating system determination has been with Splus to
distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
compiled code. I don't think this is an issue in R, but I haven't tried
to load a windows dll so I don't really know. The point of the syskern
code is to have a function is.Sun5() that works in R and in S and looks
after the fact that the R code needed to figure this out is different
from the S code needed to figure this out. These examples may be relics
but there is a possibility new variants will appear. So the question
then is: Are there still needs for an R (or S) program to use (rather
than just report) information about the operating system it is running
on?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From henrikb@braju.com  Thu Mar  8 06:24:02 2001
From: henrikb@braju.com (henrikb@braju.com)
Date: Thu, 8 Mar 2001 07:24:02 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080624.HAA01643@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R 1.2.2 for Windows
OS: Windows Me
Submission from: (NULL) (216.175.124.217)


I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
that the png graphical device driver is corrupt. Previous versions have worked
just fine for me.

EXAMPLE:
> png("test.png")
> plot(1,1)
> dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible

WORK AROUND:
Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
by ditto found in version 1.2.1 (rw1021b1.zip).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 06:44:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 07:44:10 +0100 (MET)
Subject: [Rd] png device driver corrupt! (Rbitmap.dll?) (PR#868)
Message-ID: <200103080644.HAA01708@pubhealth.ku.dk>

Just to be clear, this is a problem only with the precompiled versions on
CRAN, and the sources for Rbitmap.dll are unchanged since 1.2.0.  Indeed,
compiling against libpng-1.0.6 works for me, although it is no longer
current.

Also, it is the build that is corrupt not the png device driver (which is
not in that DLL).

On Thu, 8 Mar 2001 henrikb@braju.com wrote:

> Full_Name: Henrik Bengtsson
> Version: R 1.2.2 for Windows
> OS: Windows Me
> Submission from: (NULL) (216.175.124.217)
>
>
> I downloaded the precompiled Windows version of R v1.2.2 (rw1022) and found out
> that the png graphical device driver is corrupt. Previous versions have worked
> just fine for me.
>
> EXAMPLE:
> > png("test.png")
> > plot(1,1)
> > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible
>
> WORK AROUND:
> Until a new version comes out, one can simply replace ${R_HOME}/bin/Rbitmap.dll
> by ditto found in version 1.2.1 (rw1021b1.zip).

Alternatively, build from the sources.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 07:00:48 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 8 Mar 2001 07:00:48 +0000 (GMT)
Subject: [Rd] syskern
In-Reply-To: <3AA6BBE2.D9A82C21@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103080648400.16587-100000@auk.stats>

On Wed, 7 Mar 2001, Paul Gilbert wrote:

> The bug list summary reported an error in syskern which I finally
> realized is due to a badly chosen example in the help rather an error in
> the code.

It fails Rcmd check as a result. It also reports incorrect results
on Windows.

> However, I have taken the opportunity to re-evaluate  what I
> have been trying to do with syskern, since some parts may no longer be
> important. Since syskern was intended to address certain problems in
> package development I would appreciate other opinions on whether these
> are still concerns.
>
> The package provides a standardized way to deal with some programming
> differences between R and S (e.g. is.R() and is.S() ) and their various
> versions (e.g. is.Rpre1.2() and is.Rpre0.60() - yes this is old but you
> get the point), and also standardized ways to identify  different
> operating systems in order for a program to take any operating system
> specific action.  Dealing with the  R and S differences I think is still
> fairly important although I can no doubt abandon some versions. However,
> R has now evolved to the point where it actually deals with most of the
> operating system differences (at least the ones that there is much hope
> of dealing with).

You might want to use the SLanguage package to cover over R/S differences
(although often the code can be written to work on either).

> My main use of the operating system determination has been with Splus to
> distinguish Sun4, Sun5, and MSwindow in order to load the appropriate
> compiled code. I don't think this is an issue in R, but I haven't tried
> to load a windows dll so I don't really know. The point of the syskern

Not an issue with R, and also not an issue in S-PLUS for at least five
years (use dyn.load.lib in S-PLUS 3.4/4.x/2000, nothing in 5.0/5.1/6.0 as
compiled code is loaded automatically).

> code is to have a function is.Sun5() that works in R and in S and looks
> after the fact that the R code needed to figure this out is different
> from the S code needed to figure this out. These examples may be relics
> but there is a possibility new variants will appear. So the question
> then is: Are there still needs for an R (or S) program to use (rather
> than just report) information about the operating system it is running
> on?

Very little in my experience, and what is needed is in .Platform and
.Machine.

As Fritz Leisch point out recently, the package sources on CRAN are for all
platforms, and should work equally on Unix, Linux, Windows and Macintosh.
Bundle dse is the only exception I know of.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Thu Mar  8 07:34:51 2001
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Thu, 8 Mar 2001 08:34:51 +0100 (MET)
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
Message-ID: <200103080734.IAA02098@pubhealth.ku.dk>

Hello Bug people,

I have an unexpected behavior and am unsure whether the problem is in my
thinking, my implementation or the program R.

Basically I get two different answers depending on how I call a function
which takes other functions as arguments as indicated below.
To me it should make no difference if f is a function that returns the
function g then z(f(x)) whould give the same as
y<- f(x)
z(y)
but I appear to get different answers as below. I have not distilled the
problem down to something you can replicate in total but have I done
something obviously wrong ?

Regards
Paul White 
ps I just checked with 1.2.2 and it still has the same behavior.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R


> risk <- function(f,g,H,lower.limits,upper.limits) 
+ {   prob.of.fracture <-  function(x)
+       { a  <- x[1] 
+         kc <- x[2] 
+         f(a) * g(kc) * H(a,kc) }
+
adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
ps=1e-3) }
>
risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
[1] 1.999471
       value       relerr       minpts       lenwrk        ifail 
    28.39852 0.0003455776          627         2803            0 
> 
> eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
[1] 1.999471
> risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
       value       relerr       minpts       lenwrk        ifail 
5.461088e-13 0.0006449058          741         2803            0 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Mar  8 07:56:06 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 8 Mar 2001 08:56:06 +0100
Subject: [Rd] Re: Download problems with Windows version
In-Reply-To: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
References: <4130D5B1F917D21189F1080009FCC209023916B7@lsmail.crn.nestrd.ch>
Message-ID: <15015.15126.497225.787464@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 8 Mar 2001 08:42:21 +0100 ,
>>>>> marcel baumgartner (mb) wrote:

  > Hello,
  > I tried to download the Windows version of R at the cran site,
  > but I cannot get down to the files. When clicking on the on
  > any of the windows sources, you create strange links:

  > http://cran.r-project.org/bin/windows/windows-NT

  > then, clicking again it becomes

  > http://cran.r-project.org/bin/windows/windows-NT/windows-NT

  > and so on ...

  > The same happens at the mirror site at ETH Zurich. I use IE 5.5.


>>>>> On Wed, 07 Mar 2001 14:44:19 -0500,
>>>>> Paul Gilbert (PG) wrote:

  > The links to windows-9x and windows-NT on the CRAN Windows download page
  > seem to be broken. I have the impression that the files are all in the
  > base directory, for which the link works.

  > Also, the ReadMe.rw1022 makes no mention of the file rw1022wh.zip.



These are recursive links for backwards compatibilty, and have been in
place for a couple of months now. Simply go to

	http://cran.r-project.org/bin/windows/base
	http://cran.r-project.org/bin/windows/contrib

for the base sytem or contributed packages, respectively.

Older versions of R expect to find the contributed packages in 

	http://cran.r-project.org/bin/windows/windows-NT/contrib

and removing the links would break install.packages() there. I'll add
some message in the directory to make things clearer.

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich  Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 09:23:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 10:23:50 +0100
Subject: [Rd] inconsistent results when calling functions with other func (PR#869)
In-Reply-To: Paul.White@dsto.defence.gov.au's message of "Thu, 8 Mar 2001 08:34:51 +0100 (MET)"
References: <200103080734.IAA02098@pubhealth.ku.dk>
Message-ID: <x2elw8fwbd.fsf@blueberry.kubism.ku.dk>

Paul.White@dsto.defence.gov.au writes:

> Hello Bug people,
> 
> I have an unexpected behavior and am unsure whether the problem is in my
> thinking, my implementation or the program R.
> 
> Basically I get two different answers depending on how I call a function
> which takes other functions as arguments as indicated below.
> To me it should make no difference if f is a function that returns the
> function g then z(f(x)) whould give the same as
> y<- f(x)
> z(y)
> but I appear to get different answers as below. I have not distilled the
> problem down to something you can replicate in total but have I done
> something obviously wrong ?

Lazy evaluation sometimes plays tricks on the unsuspecting. In the
first case, eifs.at.time.using.density(5000,eifs,1e-4,2) is evaluated
when adapt first calls prob.of.fracture, in the other it is of course
evaluated from the start. If eifs.at.time.using.density is dependent
on values that might have changed...

You're not showing us eifs.at.time.using.density, so it is difficult
to say whether you have a bug or not.

> > risk <- function(f,g,H,lower.limits,upper.limits) 
> + {   prob.of.fracture <-  function(x)
> +       { a  <- x[1] 
> +         kc <- x[2] 
> +         f(a) * g(kc) * H(a,kc) }
> +
> adapt(2,lower.limits,upper.limits,minpts=200,maxpts=20000,prob.of.fracture,e
> ps=1e-3) }
> >
> risk(eifs.at.time.using.density(5000,eifs,1e-4,2),g,H,c(0.001,20),c(.5,60))
> [1] 1.999471
>        value       relerr       minpts       lenwrk        ifail 
>     28.39852 0.0003455776          627         2803            0 
> > 
> > eifs.5000 <- eifs.at.time.using.density(5000,eifs,1e-4,2)
> [1] 1.999471
> > risk(eifs.5000,g,H,c(0.001,20),c(.5,60))
>        value       relerr       minpts       lenwrk        ifail 
> 5.461088e-13 0.0006449058          741         2803            0 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:20:21 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:20:21 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103081520.QAA10571@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Is this done with purpose...:

In R I get:
---
> as.numeric(" ")
[1] 0 

> as.integer(" ")
[1] 0 
---

While in the same in S-PLUS returns:
---
> as.numeric(" ")
[1] NA 

> as.integer(" ")
[1] NA
---

For my applications, the later (S-PLUS) definitely makes most sense, but you my
have some good reasons for your choose?
(Anyway it is quite dangers with these differences when porting applications).


Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From harald.fekjar@basalmed.uio.no  Thu Mar  8 15:29:55 2001
From: harald.fekjar@basalmed.uio.no (harald.fekjar@basalmed.uio.no)
Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081529.QAA10737@pubhealth.ku.dk>

Full_Name: Harald Fekjr
Version: 1.22
OS: Windows 
Submission from: (NULL) (158.36.132.220)


Dear R developers

Actually, this is not a bug, but a small remark about a way R is working that
makes trouble in porting the code to S.

If I run the following i R:
---
midl <- 4
attr(midl,"Object created") <- date()
dump("midl","midl.R")
---

I get a file like:
---
"midl" <-
structure(4, Object created = "Thu Mar 08 16:04:04 2001")
---

This works well inside R, but S-PLUS has trouble reading it, because S needs "
around a attribute with spaces. E.g. S-PLUS wants:

---
"midl" <-
structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
---

This last example reads well into both systems, so way not let R print out the
attributes names with "..."

Again - Thanks for a wonderful program!

Harald Fekjr, Oslo, Norway

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar  8 15:33:45 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 08 Mar 2001 10:33:45 -0500
Subject: [Rd] bug.report/mail
Message-ID: <3AA7A659.6B8F55DE@bank-banque-canada.ca>

One of the functions I would like to clean out of my syskern package is a program to
send mail. This is a common feature other programs (e.g. bug.report) may use so I
would like it to be included in R/base. I will volunteer to do this as it looks like
a fairly straightforward dissection of bug.report but I have some questions:

Has anyone done this already?

Is "mail" a good name or would something like "Sys.mail" be better?

Should I generate a diff relative to something or just files for src/library/base/R?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From niels.waller@home.com  Thu Mar  8 18:26:54 2001
From: niels.waller@home.com (niels Waller)
Date: Thu, 8 Mar 2001 10:26:54 -0800
Subject: [Rd] APM announcement
Message-ID: <NCBBKMNKKMFCIGDCHLDOGEHLCGAA.niels.waller@home.com>




Developers of R,

Hello.  My name is Niels Waller and I am the "Computer Program Exchange"
editor of Applied Psychological Measurement (APM).  APM is one of the top
journals in the field of psychometrics.  The journal publishes new
developments or interesting applications of psychometric methods.  It also
publishes brief (1 or 2 typeset pages) announcements of free programs that
would be of interest to our readership.


APM is described more fully at:

http://www.sagepub.co.uk/frame.html?http://www.sagepub.co.uk/journals/detail
s/j0071.html



As a long-time user of S-PLUS, I have fallen in love with R (in fact, I
prefer R for simulation work as it is often much faster for my problems) and
I am confident that many other social scientists/psychometricians will also
appreciate what R has to offer.  Therefore, I would like to invite someone
from the R development team to write a brief description of the program for
publication.

If anyone is interesting in this project they may contact me via the
information provided below.

Niels


*******************************************************
Niels Waller, Ph.D.
Director of Quantitative Methods and Evaluation
Department of Psychology and Human Development
Vanderbilt University
Phone: (615) 322-8380    email: niels.waller@vanderbilt.edu
QME Home page: http://www.vanderbilt.edu/quantmetheval/
*******************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar  8 16:45:58 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Mar 2001 17:45:58 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081645.RAA11604@pubhealth.ku.dk>


> From: harald.fekjar@basalmed.uio.no
> Date: Thu, 8 Mar 2001 16:29:55 +0100 (MET)
> 
> Full_Name: Harald Fekjr
> Version: 1.22
> OS: Windows 
> Submission from: (NULL) (158.36.132.220)
> 
> 
> Dear R developers
> 
> Actually, this is not a bug, but a small remark about a way R is working that
> makes trouble in porting the code to S.

It *is* a bug: see later.

> If I run the following i R:
> ---
> midl <- 4
> attr(midl,"Object created") <- date()
> dump("midl","midl.R")
> ---
> 
> I get a file like:
> ---
> "midl" <-
> structure(4, Object created = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This works well inside R, but S-PLUS has trouble reading it, because S needs "
> around a attribute with spaces. E.g. S-PLUS wants:

My version of R can't read that either.  Did you try it in R?
> source("midl.R")
Error in parse(file, n, text, prompt) : syntax error on line 2

Similarly,

> deparse(midl)
[1] "structure(4, Object created = \"Thu Mar  8 16:24:16 2001\")"

cannot be re-parsed.

> ---
> "midl" <-
> structure(4, "Object created" = "Thu Mar 08 16:04:04 2001")
> ---
> 
> This last example reads well into both systems, so way not let R print out the
> attributes names with "..."

Yes, it should do.  However, the code (in deparse.c) is pretty complicated
and used recursively.  I think I have a solution ... still testing.

Meanwhile, avoid attributes with non-standard S names.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Thu Mar  8 17:26:29 2001
From: hfe@math.uio.no (hfe@math.uio.no)
Date: Thu, 8 Mar 2001 18:26:29 +0100 (MET)
Subject: [Rd] Smal problem with porting code to S-PLUS (PR#871)
Message-ID: <200103081726.SAA11909@pubhealth.ku.dk>

On Thu, 8 Mar 2001, Prof Brian Ripley wrote:
> ...
> > around a attribute with spaces. E.g. S-PLUS wants:
>
> My version of R can't read that either.  Did you try it in R?

Dear Prof. Ripley

Actually, I did not (Sorry for incorrect reporting first time). I have now
tested it, and it is an R bug.

Sincerely
Harald Fekjaer
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Harald Fekjr                 |   E-mail:   harald.fekjar@basalmed.uio.no
Researcher                    |   Phone:    (+047) 22 85 10 76
University of Oslo, Norway    |   Homepage: http://www.uio.no/~hfe/
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 18:27:07 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 8 Mar 2001 19:27:07 +0100 (MET)
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <200103081827.TAA12196@pubhealth.ku.dk>

If a function needs to be passed as an argument to another function,
default arguments to the function being passed are lost.  Consider this
example:

fun1 <- function(x, A=c("power","constant")) {
  arg <- match.arg(A)
  cat(paste("A is:",paste(A,collapse=", "),"\narg is:",arg,"\n"))
  cat("formals:\n")
  print(formals())
  2*x
}

topfun <- function(x, Fun=fun1) {
  cat("\n>>>Called as fun1:\n")
  fun1(x)
  cat("\n>>>Called as Fun:\n")
  Fun(x,A="power")
  Fun2 <- fun1
  cat("\n>>>Called as Fun2:\n")
  Fun2(x,A="power")
}
cat("\n>>>>>>>>>>fun1\n")
print(topfun(2,fun1))

When run, this gives:

> source("C:/home/tasks/OPModels/TestBugs/demo.R")

>>>>>>>>>>fun1

>>>Called as fun1:
A is: power, constant
arg is: power
formals:
$x


$A
c("power", "constant")


>>>Called as Fun:
A is: power
arg is:
formals:
NULL

>>>Called as Fun2:
A is: power
arg is: power
formals:
$x


$A
c("power", "constant")

[1] 4
>

I included the assignment within topfun() because I originally thought the problem would apply to any assignment of a function as a value.
This is apparently incorrect.  I've sent this to r-bugs because it seems that this behavior would surely not have been intended.

I am running (actually, I'm still normally running 1.2.1, but I figured if I didn't check on 1.2.2, I'd find out this had been fixed :>)

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Windows 9x 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 18:43:56 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 19:43:56 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Setzer.Woodrow@epamail.epa.gov's message of "Thu, 8 Mar 2001 19:27:07 +0100 (MET)"
References: <200103081827.TAA12196@pubhealth.ku.dk>
Message-ID: <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>

Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting... 

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu Mar  8 19:30:33 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 08 Mar 2001 14:30:33 -0500
Subject: [Rd] surprising behavior of match.arg() (PR#872)
Message-ID: <OFBFFAD3E9.4E8693DA-ON85256A09.006ADE75@rtp.epa.gov>


So, in my toy example, when I add the line Fun <- Fun after the first
invocation of Fun(), Fun finds the default args when invoked a second time.
That gives me an easy work around for the real problem where I encountered
this.  Thanks.

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


                                                                                                                  
                    Peter Dalgaard                                                                                
                    BSA                     To:     Woodrow Setzer/RTP/USEPA/US@EPA                               
                    <p.dalgaard@bios        cc:     r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk               
                    tat.ku.dk>              Subject:     Re: [Rd] surprising behavior of match.arg() (PR#872)     
                    Sent by:                                                                                      
                    pd@pubhealth.ku.                                                                              
                    dk                                                                                            
                                                                                                                  
                                                                                                                  
                    03/08/01 01:43                                                                                
                    PM                                                                                            
                                                                                                                  
                                                                                                                  




Setzer.Woodrow@epamail.epa.gov writes:

> If a function needs to be passed as an argument to another function,
> default arguments to the function being passed are lost.  Consider this
> example:

Interesting...

Apparently, sys.function() is still a promise after the  function has
been called (and the promise obviously forced).
Minimal example of same effect:

> f<-function()sys.function()
> f()
function()sys.function()
> g<-delay(f)
> g()
<promise: 0x8b248b4>
> g<-g
> g()
function()sys.function()


--
   O__  ---- Peter Dalgaard             Blegdamsvej 3
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Mar  8 21:30:07 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 8 Mar 2001 22:30:07 +0100 (MET)
Subject: [Rd] long formulas in terms() (PR#873)
Message-ID: <200103082130.WAA13002@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.2.2
OS: Windows 95
Submission from: (NULL) (142.52.81.1)



I need to use the "terms()" function to decompose a formula.
The function seems to work for small formulas, but not for long formulas.

##############################
#The following works!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4)) ~ precip*I(Tmax^2)
terms(form)

#But enlarging the left-hand side of the formula causes an error!
form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
    log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
terms(form) # ERROR
##############################

I noticed that when the left-hand side term of the formula is
too large to be written on one line, an error occurs in terms().
However, increasing the line width by "options(width=200)" did
not solve the problem.

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.2            
year     2001           
month    02             
day      26             
language R              


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  8 21:51:50 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Mar 2001 22:51:50 +0100
Subject: [Rd] surprising behavior of match.arg() (PR#872)
In-Reply-To: Peter Dalgaard BSA's message of "08 Mar 2001 19:43:56 +0100"
References: <200103081827.TAA12196@pubhealth.ku.dk> <x2y9ugt82b.fsf@blueberry.kubism.ku.dk>
Message-ID: <x21ys8gc95.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Setzer.Woodrow@epamail.epa.gov writes:
> 
> > If a function needs to be passed as an argument to another function,
> > default arguments to the function being passed are lost.  Consider this
> > example:
> 
> Interesting... 
> 
> Apparently, sys.function() is still a promise after the  function has
> been called (and the promise obviously forced).
> Minimal example of same effect:
> 
> > f<-function()sys.function()
> > f()
> function()sys.function()
> > g<-delay(f)
> > g()
> <promise: 0x8b248b4>
> > g<-g
> > g()
> function()sys.function()

Fixed for 1.3.0.

(Not sure I'm happy with this yet. R_sysfunction works on the *call*
of the function, and if the head of the call is a LANGSXP - as in
h(x)(y) - it gets evaluated a second time, and I don't think that
is guaranteed to give the same function as the first time! We really
ought to keep a pointer to the function itself around too.)

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Mar  8 21:57:41 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 8 Mar 2001 13:57:41 -0800 (PST)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0103081351320.141870-100000@homer10.u.washington.edu>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
<snip>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

The problem is in fixFormulaObject in terms.formula(). It uses deparse()
on the lhs of the formula.

A work-around is to change the line near the top of fixFormulaObject in
terms.formula from
	else deparse(form[[2]])
 to
	else deparse(form[[2]],width.cutoff=200)

but this may not be the final solution -- we should have something without
a width limit

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  9 07:13:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 9 Mar 2001 07:13:56 +0000 (GMT)
Subject: [Rd] long formulas in terms() (PR#873)
In-Reply-To: <200103082130.WAA13002@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0103090706010.8948-100000@auk.stats>

On Thu, 8 Mar 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.2.2
> OS: Windows 95
> Submission from: (NULL) (142.52.81.1)
>
>
>
> I need to use the "terms()" function to decompose a formula.
> The function seems to work for small formulas, but not for long formulas.
>
> ##############################
> #The following works!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4)) ~ precip*I(Tmax^2)
> terms(form)
>
> #But enlarging the left-hand side of the formula causes an error!
> form <- cbind(log(inflowd1),log(inflowd2),log(inflowd3),
>     log(inflowd4),log(inflowd5),log(inflowd6)) ~ precip*I(Tmax^2)
> terms(form) # ERROR
> ##############################
>
> I noticed that when the left-hand side term of the formula is
> too large to be written on one line, an error occurs in terms().
> However, increasing the line width by "options(width=200)" did
> not solve the problem.

You can edit fixFormulaObject in terms.formula and set

deparse(form[[2]], width.cutoff = 500)

This still has a limit, but a much higher one.  Or write a shorter lhs?

deparse has been changed since that function was written, I believe,
but both a long time ago.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  9 09:08:38 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 9 Mar 2001 10:08:38 +0100 (MET)
Subject: [Rd] as.numeric - Possible error (PR#870)
Message-ID: <200103090908.KAA16434@pubhealth.ku.dk>

>>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:

    harald> Full_Name: Harald Fekjr
    harald> Version: 1.22
    harald> OS: Windows 
    harald> Submission from: (NULL) (158.36.132.220)


    harald> Dear R developers

    harald> Is this done with purpose...:

    harald> In R I get:
    harald> ---
    >> as.numeric(" ")
    harald> [1] 0 

    >> as.integer(" ")
    harald> [1] 0 
    harald> ---

    harald> While in the same in S-PLUS returns:
    harald> ---
    >> as.numeric(" ")
    harald> [1] NA 

    >> as.integer(" ")
    harald> [1] NA
    harald> ---

    harald> For my applications, the later (S-PLUS) definitely makes most
    harald> sense, but you my have some good reasons for your choose?
    harald> (Anyway it is quite dangers with these differences when porting
    harald> applications).

Note that it's also for other ``blank like'' strings :

 > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
       \t \n \r 
  0  0  0  0  0 

Without having the time currently to investigate your suggested change,
I tend to agree.


    harald> Thanks for a wonderful program!

you're welcome!

    harald> Harald Fekjr, Oslo, Norway

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  9 09:15:50 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 9 Mar 2001 10:15:50 +0100
Subject: [Rd] bug.report/mail
In-Reply-To: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca>
Message-ID: <15016.40774.376518.961962@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> One of the functions I would like to clean out of my syskern
    PaulG> package is a program to send mail. This is a common feature
    PaulG> other programs (e.g. bug.report) may use so I would like it to
    PaulG> be included in R/base. I will volunteer to do this as it looks
    PaulG> like a fairly straightforward dissection of bug.report but I
    PaulG> have some questions:

    PaulG> Has anyone done this already?

yes,  bug.report()  *does* all this already (when system resources are
available), using getOption("mailer") and/or argument  `method = '

    PaulG> Is "mail" a good name or would something like "Sys.mail" be
    PaulG> better?


I think what we want is modularizing  bug.report()
by having it call a new  Sys.mail()
function passing it the subject, from & body  (and may be more).

A good idea!

    PaulG> Should I generate a diff relative to something or just files for
    PaulG> src/library/base/R?

I think useful would be to just modularize  bug.report() as indicated above

    PaulG> Paul Gilbert

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 09:46:15 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 10:46:15 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Fri, 9 Mar 2001 10:08:38 +0100 (MET)"
References: <200103090908.KAA16434@pubhealth.ku.dk>
Message-ID: <x2itljl1g8.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "harald" == harald fekjar <harald.fekjar@basalmed.uio.no> writes:
> 
>     harald> In R I get:
>     harald> ---
>     >> as.numeric(" ")
>     harald> [1] 0 
...
> 
> Note that it's also for other ``blank like'' strings :
> 
>  > sapply(c("", " ", "\t", "\n", "\r"), as.numeric)
>        \t \n \r 
>   0  0  0  0  0 
> 
> Without having the time currently to investigate your suggested change,
> I tend to agree.

We fixed the same problem in scan() recently. Particularly insidious
since SPSS codes missing with a single blank when exporting delimited
files...

The problem there was that we used strtod which returns 0 for
nonnumerics (what else can it do?) and then checked the rest of the
field with isBlankString - which was true of course. I'll have a look
and see if as.numeric is similar.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  9 10:29:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2001 11:29:14 +0100
Subject: [Rd] as.numeric - Possible error (PR#870)
In-Reply-To: Peter Dalgaard BSA's message of "09 Mar 2001 10:46:15 +0100"
References: <200103090908.KAA16434@pubhealth.ku.dk> <x2itljl1g8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2g0gnkzgl.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The problem there was that we used strtod which returns 0 for
> nonnumerics (what else can it do?) and then checked the rest of the
> field with isBlankString - which was true of course. I'll have a look
> and see if as.numeric is similar.

It was. Fixed and committed for 1.3. (as.integer and as.complex too)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar  9 14:47:08 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 09 Mar 2001 09:47:08 -0500
Subject: [Rd] bug.report/mail
References: <3AA7A659.6B8F55DE@bank-banque-canada.ca> <15016.40774.376518.961962@gargle.gargle.HOWL>
Message-ID: <3AA8ECEC.FE45E857@bank-banque-canada.ca>

>I think what we want is modularizing  bug.report()
>by having it call a new  Sys.mail()
>function passing it the subject, from & body  (and may be more).

Yes, that is exactly what I meant. Sorry if it wasn't clear.

Is the name Sys.mail() preferred to simply  mail()?

Should I go ahead or would someone else prefer to do it? (It looks trivial.)

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar 10 01:24:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 10 Mar 2001 02:24:18 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103100124.CAA25085@pubhealth.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> Hello developers and users:
> 
> My system fails (the computer freezes) when I use the ncp  parameter,
> with the lower.tail=FALSE option in the qchisq function.
> 
> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

Yup, that's a bug. We have in pnchisq.c

48          for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) <
p; ux *= 2);
49          for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) >
p; lx *= 0.5);

but if we look at the opposite tail, we also need to reverse that
logic since pnchisq(x,...) is now decreasing in x. Otherwise the
algorithm will get stuck in one of the for loops.

(Mailed to r-bugs)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar 13 09:43:54 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Mar 2001 10:43:54 +0100 (MET)
Subject: [Rd] Re: [R] Bug in qchisq? (PR#875)
Message-ID: <200103130943.KAA16613@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> Kenneth Cabrera <krcabrer@epm.net.co> writes:
    >> Hello developers and users:
    >> 
    >> My system fails (the computer freezes) when I use the ncp  parameter,
    >> with the lower.tail=FALSE option in the qchisq function.
    >> 
    >> qchisq(0.025,31,ncp=1,lower.tail=FALSE)

    PD> Yup, that's a bug. We have in pnchisq.c

    PD> 48   for (ux = 1.0; pnchisq(ux, n, lambda, lower_tail, log_p) < p; 
    PD> 	ux *= 2);
    PD> 49   for (lx = ux;  pnchisq(lx, n, lambda, lower_tail, log_p) > p;
    PD> 	lx *= 0.5);

    PD> but if we look at the opposite tail, we also need to reverse that
    PD> logic since pnchisq(x,...) is now decreasing in x. Otherwise the
    PD> algorithm will get stuck in one of the for loops.

Now fixed for R-devel (to become 1.3.0), together with the "FIXME" comment
a few lines above.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From I.Wilson@maths.abdn.ac.uk  Tue Mar 13 12:58:58 2001
From: I.Wilson@maths.abdn.ac.uk (I.Wilson@maths.abdn.ac.uk)
Date: Tue, 13 Mar 2001 13:58:58 +0100 (MET)
Subject: [Rd] (PR#876)
Message-ID: <200103131258.NAA20109@pubhealth.ku.dk>

png files do not appear to work properly on the distributed
version for windows.

this was not a problem for rw1021.

 > png()
 > plot(rnorm(100),rnorm(100))
 > dev.off()
libpng error: Application must be recompiled; version 1.0.6 was incompatible


Ian Wilson


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.2
  year = 2001
  month = 02
  day = 26
  language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
  .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 13:28:33 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 14:28:33 +0100
Subject: [Rd] (PR#876)
In-Reply-To: I.Wilson@maths.abdn.ac.uk's message of "Tue, 13 Mar 2001 13:58:58 +0100 (MET)"
References: <200103131258.NAA20109@pubhealth.ku.dk>
Message-ID: <x21ys1ssqm.fsf@blueberry.kubism.ku.dk>

I.Wilson@maths.abdn.ac.uk writes:

> png files do not appear to work properly on the distributed
> version for windows.
> 
> this was not a problem for rw1021.
> 
>  > png()
>  > plot(rnorm(100),rnorm(100))
>  > dev.off()
> libpng error: Application must be recompiled; version 1.0.6 was incompatible

See PR#868 (recompile from sources or use Rbitmap.dll from 1.2.1)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Tue Mar 13 21:26:23 2001
From: Martin.Schlather@uni-bayreuth.de (Martin Schlather)
Date: Tue, 13 Mar 2001 22:26:23 +0100
Subject: [Rd] .C-calls
Message-ID: <3AAE907F.525541C9@uni-bayreuth.de>


Dear all,

(sorry I got the wrong button for subscribing a minute ago)

At the moment I'm writing on a package for random field
simulation that I'd like to make publically availabe
in near future.
To this end I've asked Martin Maechler to have a look
at my R-code. He was very surprised about how
I perform the ".C"-calls, and encouraged me to
make this request for comments.

My calls typically look like
    result <- double(10000)
    .C("test",as.double(inputparameter),result,DUP=FALSE)
    return(result)

In order to avoid sending C-code, I'd like to
give the following example that uses `chol' of
the "base"-package of R. The fact that it is a
.Fortran-call instead of a .C-call shouldn't
matter.                                        

## creating a positive definite matrix of size 100x100
lc <- as.integer(100);
cov.matrix <- matrix(runif(lc * lc), nrow=lc)
cov.matrix <- t(cov.matrix) %*% cov.matrix

## the usual way of getting the Cholesky decomposition
c0 <- chol(cov.matrix)

## direct call of the Fortran routine; the code is
## taken from the R-code of `chol'
dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
               v = matrix(0, nr = lc, nc = lc), info = integer(1),
               DUP = FALSE, PACKAGE = "base")
c1 <- dummy1$v

## The third way.
## The code seems working very well... but?
dummy2 <- double(lc * lc)
.Fortran("chol", cov.matrix, lc, lc,
         dummy2, info = integer(1),
         DUP = FALSE, PACKAGE = "base")
c2 <- matrix(dummy2, lc, lc)

sum(abs(c0-c2)) # == 0

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 13 21:32:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Mar 2001 22:32:17 +0100
Subject: [Rd] .C-calls
In-Reply-To: Martin Schlather's message of "Tue, 13 Mar 2001 22:26:23 +0100"
References: <3AAE907F.525541C9@uni-bayreuth.de>
Message-ID: <x2snkhicda.fsf@blueberry.kubism.ku.dk>

Martin Schlather <Martin.Schlather@uni-bayreuth.de> writes:

> ## the usual way of getting the Cholesky decomposition
> c0 <- chol(cov.matrix)
> 
> ## direct call of the Fortran routine; the code is
> ## taken from the R-code of `chol'
> dummy1 <- .Fortran("chol", cov.matrix, lc, lc,
>                v = matrix(0, nr = lc, nc = lc), info = integer(1),
>                DUP = FALSE, PACKAGE = "base")
> c1 <- dummy1$v
> 
> ## The third way.
> ## The code seems working very well... but?
> dummy2 <- double(lc * lc)
> .Fortran("chol", cov.matrix, lc, lc,
>          dummy2, info = integer(1),
>          DUP = FALSE, PACKAGE = "base")
> c2 <- matrix(dummy2, lc, lc)
> 
> sum(abs(c0-c2)) # == 0

Well... As far as I can see, method 3 should work as long as DUP=FALSE
is used and break if DUP=TRUE. Some might prefer to consider the DUP
argument as an optimization hint and not something that should allow a
completely different calling sequence, but apart from that I cannot
see anything wrong with it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Wed Mar 14 15:41:24 2001
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Wed, 14 Mar 2001 16:41:24 +0100 (MET)
Subject: [Rd] segmentation fault of unknown cause (PR#877)
Message-ID: <200103141541.QAA05231@pubhealth.ku.dk>


Dear all,

Paulo Ribeiro, p.ribeiro@lancaster.ac.uk, and myself noticed 
that R sometimes breaks down with a segmentation fault of
(at least for us) unknown course. (We've read #411 and #671 
in the bug report on "optim" -- the problem described
there sounds familiar; but we have not found any hint on a 
segmentation fault.)

Please find at the very end of this email the file 
strange.R and on 
  http://www.geo.uni-bayreuth.de/~martin/R/strange.tgz
an archiv of three files, namely strange.R, cov.data, 
and rf.data. 

The file strange.R uses only mva as library; it does
not contain any Fortran or C call.

On three machines in Lancaster and on my three
computers (2x R-1.2.2, 1x R-1.2.1) we get 
`segmentation fault' for
  /usr/bin/R --vanilla < strange.R

Furthermore, I get a segmentation fault for
  /usr/bin/R
  source("strange.R")
but not Paulo at Lancaster, neither Martin Maechler on
his preversion R-1.3.0 (I had asked Martin before Paulo
found out that `usr/bin/R --vanilla < strange.R' breaks
on his (and mine) computers.)

We would be happy for any comment on whether the
segmentation fault appears anywhere else (and why). 
We noticed that R does not fail if /usr/bin/R is called 
with other or further options but `--vanilla' (Not 
extensively tested yet.)

Cheers,
Martin


PS: For example, a computer in Lancaster (all RedHat) and 
    one here (all SuSe) are both installed by compiling the
    source code of R-1.2.2 and have the specification
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R   
             
PPS: If the file strange.R works well then it stops with an 
     error message different from "segmentation fault".

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

#### the comments in the file strange.R give a report on what happens
#### additionally on all *my* computers -- not tested elsewhere yet


######################################################
############         strange.R         ###############
######################################################

# calling R (v1.2.1 or v1.2.2) without options and
# then `source("strange.R")' causes a segmentation fault

# Note that before failure MLEtarget is called with
# variab=c(1.0501141215486309848e-267, 1.0000000000000000208e-03)
# a value that is outside the given bounds, see lb and optim below
# (This is something that appears quite frequently, independently (?)
# of the segmentation fault I'm interested here!)

# The segmentation fault does not appear if R is called by
#       /usr/bin/R --vsize 20M --nsize 250K --no-save
# (The algorithm will fail with "fn(par, ...) : subscript out of bounds"
#  then, what is OK since the matrix `cm' does not have enough 
#  components)

library(mva)

"mleRF" <-
function (data, coord) 
{
    ENVIR <- environment()
    lc <- nrow(coord)

    ## if you comment out either line, the algorithm
    ## returns the correct error message
    ## "fn(par, ...) : subscript out of bounds"
    distances <- as.double(dist(coord))
    distances <- dist(coord)

    ## lower und upper bounds for optim
    lb <- c(0.00235992765321886, 0.2)
    ub <- c(39.6649897977748, 10)
    
    assign("COUNTER", 1, envir = ENVIR)
    CoVariate <- matrix(1, ncol = 1, nrow = lc)
    MLEtarget <- function(variab) {
        print(variab, dig = 20)
        
        ## the covariance matrix is calculated by an own C programme;
        ## therefore the results have been stored in `cm' to exclude
        ## my programme as course of the trouble
        cov.matrix <- cm[, COUNTER]
        cov.matrix <- try(chol(matrix(cov.matrix, ncol = lc)))
        ## if you replace the above two lines by
        ##    cov.matrix <- matrix(cm[, COUNTER], ncol = lc)
        ##    cov.matrix <- try(chol(cov.matrix))
        ## segmentation fault vanishes, and `optim' returns
        ## "Error in optim(...:  bad value"
        
        assign("COUNTER", COUNTER + 1, envir = ENVIR)
        if (is.numeric(cov.matrix)) {
            if (any(diag(cov.matrix) < 0)) {
                stop("chol det<0!")
            }
        }
        else {
            return(1e+30)
        }
        logdet <- 2 * sum(log(diag(cov.matrix)))
        cov.matrix <- chol2inv(cov.matrix)
        dummy <- t(CoVariate) %*% cov.matrix
        m <- (solve(dummy %*% CoVariate) %*% (dummy %*% data))
        V <- data - CoVariate %*% m
        quadratic <- (t(V) %*% cov.matrix %*% V)
        res <- logdet + lc * log(quadratic)
        print(as.vector(res), dig = 20)
        return(res)
    }
    ## if you outcomment the following `for'-loop
    ## the segmenatation fault vanishes, and optim returns
    ## "Error in optim(...:  bad value"
    for (W in 1:3) {
        mlet <- MLEtarget(c(1,1))
    }
    ## if the `for'-loop is active, the following line
    ## is not necessary as COUNTER has already the value 4
    assign("COUNTER", 4, envir = ENVIR)    
    variab <- c(0.00235992765321890, 2.66384186745229)
    ## if you outcomment the following line, the algorithm
    ## returns the correct error message "fn ... out of bounds"
    distances <- as.double(distances) 
    variab <- try(optim(variab, MLEtarget, method = "L-BFGS-B", 
        lower = lb, upper = ub)$par)
    print("END")
}



## the random field given on a grid by x,y and f is
## calculated by an own C-programme. Therefore the results
## have been stored to exclude my programme as course of
## the trouble
#save(file="rf.data",x,y,f,.Random.seed)
load("rf.data")
  
## see `MLEtarget' for comments on `cm'
#save(file="cov.data",cm)
load("cov.data");

mleRF(coord=cbind(x,y),data=f)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ians@connexus.net.au  Fri Mar 16 19:58:06 2001
From: ians@connexus.net.au (ians@connexus.net.au)
Date: Fri, 16 Mar 2001 20:58:06 +0100 (MET)
Subject: [Rd] sorry (PR#878)
Message-ID: <200103161958.UAA00958@pubhealth.ku.dk>

uhm???

i looked but am too lazy...  wot th fuk iz R

pleez send relo. shit to chellam@bigpond.com


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 22:56:08 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 14:56:08 -0800
Subject: No subject
Message-ID: <200103172256.OAA12160@pine.frazmtn.com>

Without too much difficulty I made an R 1.2.2 for Mac OS X (final 
release candidate)
using X11R6 and the dlopen shimlibs (which interface to the Mach-O dyld
system).  I am still working on the tcl/tk part, and I don't have an X11 
browser
yet for the html help, but the nice thing is that certainly the dynamic 
loading
and the graphics work fine.

Of course it's X11, so it looks much worse than the classic Mac OS 
version
that Stefano did, and a Carbon version  would be infinitely more useful,
but  this was quick and painless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar 17 23:56:30 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 17 Mar 2001 15:56:30 -0800
Subject: [Rd] R 1.2.2 on Mac OS X with X11/tcltk
Message-ID: <200103172356.PAA19805@pine.frazmtn.com>

The tcl/tk part now also works -- of course coming from Aqua/Quartz and 
then
being sucked into X11 and/or  Tcl/Tk is quite traumatic.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sun Mar 18 09:32:12 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Annette Molinaro-Clark)
Date: Sun, 18 Mar 2001 10:32:12 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
Message-ID: <15028.32924.553285.477996@gargle.gargle.HOWL>

This was addressed to the wrong place ...

------- start of forwarded message -------
From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
To: maechler@R-project.org
Subject: R-Installation
Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

Hi -
I'm trying to install R to a supercomputer which has a Fortran 77
compiler; however,
when i do ./configure I receive this error . . .


checking for g77... /usr/local/gnu/bin/g77
checking whether the Fortran 77 compiler (g77  ) works... no
configure: error: installation or configuration problem: Fortran 77
compiler cannot create 
executables.


Can you tell me what I need to do?
Thanks,
Annette
------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Mar 19 07:07:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 19 Mar 2001 08:07:00 +0100
Subject: [Rd] R-Installation on supercomputer -- f77 problem
In-Reply-To: <15028.32924.553285.477996@gargle.gargle.HOWL>
References: <15028.32924.553285.477996@gargle.gargle.HOWL>
Message-ID: <15029.45076.44960.436261@mithrandir.hornik.net>

>>>>> Annette Molinaro-Clark writes:

> This was addressed to the wrong place ...
> ------- start of forwarded message -------
> From: Annette Molinaro-Clark <annette@pacific.llnl.gov>
> To: maechler@R-project.org
> Subject: R-Installation
> Date: Thu, 15 Mar 2001 12:10:19 -0800 (PST)

> Hi -
> I'm trying to install R to a supercomputer which has a Fortran 77
> compiler; however,
> when i do ./configure I receive this error . . .


> checking for g77... /usr/local/gnu/bin/g77
> checking whether the Fortran 77 compiler (g77  ) works... no
> configure: error: installation or configuration problem: Fortran 77
> compiler cannot create 
> executables.


> Can you tell me what I need to do?

Can you have a look at config.log to see what the problem is?

[What happens if you try using the native FORTRAN compiler on your
system?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 15:45:52 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 10:45:52 -0500
Subject: [Rd] DUP=T/F
Message-ID: <3AB629B0.868D2008@bank-banque-canada.ca>

In some tests I am getting a difference in the 7th or 8th significant digit depending
on whether I set DUP=T or DUP=F in the .Fortran call below. While this is not a huge
error it is bigger than I would expect and may be a symptom of another problem. Any
comments or suggestions? (R1.2.2 on Solaris.)

Paul Gilbert
_______

genD.ARMA <- function(model, data, d=0.01, eps=1e-4, r=6, warn=F){
   n <-length(c(output.data(data))) # this has the same length as the residual
   sampleT <-periods(data)
   ps <-dim(model$A)[3]
      ms <-dim(model$C)[3]
      ns <-ps  # this could be 1 except z0 is used for TREND and F, Q and R for
scratch
     loc   <- match(model$location,       c("A","B","C","t"))
     cloc  <- match(model$const.location, c("A","B","C","t"))
   if(is.null(ms))
     {ms<-0
      C<-array(0,c(1,ns,1)) # can't call compiled with 0 length arrays
      u <- matrix(0,sampleT,1)
      G <- matrix(0,ns,1)
     }
   else
     {C <-model$C
      u <- input.data(data)
      G <- matrix(0,ns,ms)
     }
   x <-model$parms
   h0 <- abs(d*x)+eps*(x==0.0)
   D <- matrix(1e20, n,(length(x)*(length(x) + 3))/2)
   Daprox <-  matrix(0,n,r)
   Hdiag  <-  matrix(0,n,length(x))
   Haprox <-  matrix(0,n,r)
   storage.mode(D)     <-"double"
   storage.mode(Daprox)<-"double"
   storage.mode(Haprox)<-"double"
   storage.mode(Hdiag )<-"double"
   D <-.Fortran("gend",
            D=D,
            as.integer(is.ARMA(model)),
            p=as.integer(length(x)),
            x=as.double(x),
            as.double(h0),
            as.integer(n),    #6
            as.integer((length(x)*(length(x)+ 3))/2), #cols of D
            f0=double(n),
            r=as.integer(r),
            #                       work space for GEND
            Haprox=Haprox,     #10
            Hdiag=Hdiag,
            Daprox=Daprox,
            x=double(length(x)),
            delta=double(length(x)),
            f1=double(n),
            f2=double(n),
            #                   work space for ARMAp / KFp
         #     cov=matrix(1e20,ps,ps),
            # pred is f0,f1,f2 passed above
            as.integer(ms),     #  input dimension m  #17
            as.integer(ps),     # output dimension p
            as.integer(sampleT),
            as.integer(periods(data)),
            u=as.double(u),
            y=as.double(output.data(data)),
            as.integer(loc),   #as.character(model$location), #23
            as.integer(model$i),
            as.integer(model$j),
            as.integer(length(model$const)),
            const=as.double(model$const),
            as.integer(cloc),  #as.character(model$const.location),
            as.integer(model$const.i ),
            as.integer(model$const.j),
        #  for ARMA models:
            as.integer(model$l),       #31
            as.integer(model$const.l),
            as.integer( dim(model$A)[1]),#1+order of A
            as.integer( dim(model$B)[1]),#1+order of B
            as.integer( dim(C)[1]),#1+order of C
            A=model$A,
            B=model$B,
            C=C,
        #  for state space models:
            as.integer(ns),  # state dim.  #39
        #    state=as.double(matrix(0,sampleT,ns)),
        #    track=as.double(array(0,c(sampleT,ns,ns))),
            z0=as.double(rep(0,ps)), # note: this is TREND for ARMA
            P0=as.double(diag(0,ps)),
            F=as.double(matrix(0,ns,ns)),
            G=as.double(G),
            H=as.double(matrix(0,ps,ns)),
            K=as.double(matrix(0,ns,ps)),
            Q=as.double(matrix(0,ns,ns)),
            R=as.double(matrix(0,ps,ps)),
            gain=as.integer(F),   #48
            DUP=T)[c("D","p","f0", "x", "r")]
   D$d   <- d
   D$eps <- eps
   D$f0 <- l(model, data, result="pred") - c(output.data(data))
   invisible(classed(D,"Darray")) #constructor
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hfe@math.uio.no  Mon Mar 19 20:16:37 2001
From: hfe@math.uio.no (Harald Fekjaer)
Date: Mon, 19 Mar 2001 21:16:37 +0100 (MET)
Subject: [Rd] Possible improvement of "read.fwf"
Message-ID: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>

Dear R developers

I have little improvement to "R base", that I hope you will include in the official version.

Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
http://www.uio.no/~hfe/midl/R/readfwf-source.html

You will find my suggestion to improve the "read.fwf".
(New code is marked with red colour. Pure code is avilble at:
http://www.uio.no/~hfe/midl/R/readfwf.R)

And you will find the new documentation on:
http://www.uio.no/~hfe/midl/R/readfwf.html

Hope you will appreciate this small improvement.

Yours sincerely
Harald Fekjr, <harald.fekjar@basalmed.uio.no>
---
University of Oslo, Norway & Norwegian cancer registry

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@StonyBrook.Edu  Mon Mar 19 21:19:39 2001
From: Timothy.Keitt@StonyBrook.Edu (Timothy H. Keitt)
Date: Mon, 19 Mar 2001 16:19:39 -0500
Subject: [Rd] generic database access methods
Message-ID: <3AB677EB.9030406@StonyBrook.Edu>

I've been putting together a package that defined generic methods for 
database access.  The packages is called "Rdbi."  It borrows as much as 
possible from existing database packages / proposals.  I'd like to start 
a discussion about the proposed interface.  Here's what I've come up 
with so far:

#
# Rdbi: connectionMethods.R
#

dbConnect <- function(dbObj, ...) UseMethod("dbConnect")
#
# dbObj should be generated by an implementation defined function,
# e.g., RPgSQL(), which returns a object with an approprite class
# name, e.g., "PostgreSQL" or "MySQL".  The implementation then
# provides a method that actually opens the connection.
#

dbConnect.default <- function(dbObj, ...) stop("Invalid database class")
#
# User passed something other than a defined database class
#

dbDisconnect <- function(conn) UseMethod("dbDisconnect")
#
# Close connection and free resources
#

dbDisconnect.default <- function(conn) stop("Invalid connection object")

dbReconnect <- function(conn) UseMethod("dbReconnect")
#
# The conn object should store the options passed to dbConnect so that
# it can reestablish the connection.
#

dbReconnect.default <- function(conn) stop("Invalid connection object")
#
# User passed something other than a defined connection class
#

dbConnectionOK <- function(conn) UseMethod("dbConnectionOK")
#
# Returns TRUE if the connection object is valid and the connection
# can be used to communicate with the database backend.
#

dbConnectionOK.default <- function(conn) FALSE
#
# User passed something other than a defined connection class
#


#
# Rdbi: ioMethods.R
#

dbSendQuery <- function(conn, ...) UseMethod("dbSendQuery")
#
# This function submits a query string to the backend.  If the query
# generates any results, they should be returned in a data frame;
# otherwise the function returns NULL.  Printing error messgages is
# left to the implementation, but this function should not issue a
# call to error() or stop().  Error messages may be retrievable from
# the connection object depending on implementation.
#

dbSendQuery.default <- function(conn, ...) stop("Invalid connection object")
#
# This means that the method was called on something other than a
# connection object.
#

dbListTables <- function(conn, ...) UseMethod("dbListTables")
#
# Output a list of table names associated with the connection object.
# Output should look like output from ls().
#

dbListTables.default <- function(conn, ...) stop("Invalid connection 
object")

dbReadTable <- function(conn, ...) UseMethod("dbReadTable")
#
# Analog of the read.table() function.  Returns a data frame.  Some
# facility for converting DB types to R types is helpfull.  Generally,
# this will just pass a "select * from mytable" to dbSendQuery() which
# returns the data frame.
#

dbReadTable.default <- function(conn, ...) stop("Invalid connection object")

dbWriteTable <- function(conn, ...) UseMethod("dbWriteTable")
#
# Analog of write.table().  It should assemble input into a data frame
# and write the frame into a table in database.
#

dbWriteTable.default <- function(conn, ...) stop("Invalid connection 
object")


T.

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chyihung.hsu@pharma.Novartis.com  Mon Mar 19 21:52:04 2001
From: chyihung.hsu@pharma.Novartis.com (chyihung.hsu@pharma.Novartis.com)
Date: Mon, 19 Mar 2001 22:52:04 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103192152.WAA19583@pubhealth.ku.dk>

Dear R Development Team,

I have encountered the following difficulty in using the function polyroot
under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
provided example, the non-zero root of c(0,0,0,1) depends on the results of
the previous call of polyroot.

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
>

Thank you for your attention.

Best regards,

Chyi-Hung Hsu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 19 22:12:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 19 Mar 2001 17:12:30 -0500
Subject: [Rd] A limitation for polyroot ? (PR#880)
References: <200103192152.WAA19583@pubhealth.ku.dk>
Message-ID: <3AB6844E.41ECE58E@bank-banque-canada.ca>

>Dear R Development Team,

I think most of the core team is at a conference,  but I seem to recall that this
problem was fixed in 1.2.2. You should probably upgrade. Below is what I get.

Paul Gilbert
_____

R : Copyright 2001, The R Development Core Team
Version 1.2.2  (2001-02-26)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> polyroot(c(6,-5,1))
[1] 2+1.615587e-27i 3-1.615587e-27i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
> polyroot(c(4,-4,1))
[1] 2+1.110223e-16i 2-1.110223e-16i
> polyroot(c(0,0,0,1))
[1] 0+0i 0+0i 0+0i
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 11:52:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Mar 2001 12:52:26 +0100 (MET)
Subject: [Rd] A limitation for polyroot ? (PR#880)
Message-ID: <200103201152.MAA25198@pubhealth.ku.dk>

On Mon, 19 Mar 2001 chyihung.hsu@pharma.Novartis.com wrote:

> Dear R Development Team,
>
> I have encountered the following difficulty in using the function polyroot
> under either NT4.0  (R version 1.2.1) or linux (R version 0.90.1).  In the
> provided example, the non-zero root of c(0,0,0,1) depends on the results of
> the previous call of polyroot.

This is AFAIK already solved in 1.2.2.  Please upgrade, at least that
Linux version ....

>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > polyroot(c(6,-5,1))
> [1] 2+1.615587e-27i 3-1.615587e-27i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 3-1.615587e-27i
> > polyroot(c(4,-4,1))
> [1] 2+1.110223e-16i 2-1.110223e-16i
> > polyroot(c(0,0,0,1))
> [1] 0+0.000000e+00i 0+0.000000e+00i 2-1.110223e-16i
> >
>
> Thank you for your attention.
>
> Best regards,
>
> Chyi-Hung Hsu
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 20 12:42:01 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 20 Mar 2001 12:42:01 +0000 (GMT)
Subject: [Rd] Possible improvement of "read.fwf"
In-Reply-To: <Pine.SOL.4.30.0103192113360.3840-100000@ulrik.uio.no>
Message-ID: <Pine.GSO.4.31.0103201241250.3467-100000@toucan.stats>

This has been far down my TODO list with connections, so many thanks,
and I will take a look for 1.3.0.

Brian


On Mon, 19 Mar 2001, Harald Fekjaer wrote:

> Dear R developers
>
> I have little improvement to "R base", that I hope you will include in the official version.
>
> Using the new connection possibilities, and important option is to read a limited amount of data each time. In the "scan"-function, this can be done with the "n" and "nmax" options, but I have found no such possibilities in "read.fwf". This is a limitation in reading large fixed formatted data files, and at:
> http://www.uio.no/~hfe/midl/R/readfwf-source.html
>
> You will find my suggestion to improve the "read.fwf".
> (New code is marked with red colour. Pure code is avilble at:
> http://www.uio.no/~hfe/midl/R/readfwf.R)
>
> And you will find the new documentation on:
> http://www.uio.no/~hfe/midl/R/readfwf.html
>
> Hope you will appreciate this small improvement.
>
> Yours sincerely
> Harald Fekjr, <harald.fekjar@basalmed.uio.no>
> ---
> University of Oslo, Norway & Norwegian cancer registry
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From marketers@toyi.zzn.com  Tue Mar 20 22:14:58 2001
From: marketers@toyi.zzn.com (marketers@toyi.zzn.com)
Date: Tue, 20 Mar 2001 23:14:58 +0100 (MET)
Subject: [Rd] How  to  Have  More  Customer ?
Message-ID: <200103202214.XAA20557@stat.math.ethz.ch>


  Dear r-devel,

  we know you from below url:
  http://www.ukc.ac.uk/php/mff/netres/statlist.html
  If you don't want to receive any message again,
  please email to remove@toyi.zzn.com to
  remove your email: r-devel@stat.math.ethz.ch
   

  **************       How to         ***************

  Have More Customer and Competition?

  **************    In Internet Time  ***************
 
  Answer is:             

       Email Spider Easy 
       ----Targeted Email Address Extract Software.
           http://www.emailspidereasy.com

      
        Key Features: 
        1 Search and Spider from a starting url such 
            as web url, search engine, message 
            board,  newsgroup to  extract bulk email 
            addresses and Url Addresses in pair. 

        2 Integrate with 18 top search engines
           such as Yahoo, Google, Altavista, AOL, 
           MSN, Lycos,Hotbot, Go.

        3 Search speed is very fast. 
           Allow up to 500 threads to search and 
           extract emails  simultaneously.
 
        4 Both Web and Url are extracted.

           For more info and free test ,
           please access url: 
           http://www.emailspidereasy.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Mar 21 06:15:04 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Mar 2001 07:15:04 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200103210615.HAA12158@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information

Directory:  Analyses

* PR# 861 *
Subject: histogram of frequencies
From: bernd.winkler@genedata.com
Date: Mon, 5 Mar 2001 15:01:49 +0100 (MET)

Directory:  Documentation

* PR# 856 *
Subject: "}  {" problem in Rd files
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 26 Feb 2001 11:10:01 -0500

Directory:  Graphics

* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 830 *
Subject: Disappearing x axis in plot.factor
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:27:13 -0500
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500

Directory:  In-Out

none

Directory:  Installation

none

Directory:  Language

* PR# 879 *
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Sun, 18 Mar 2001 07:45:13 -0500 (EST)
--precedence of %% appears to be not as documented
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 869 *
Subject:  inconsistent results when calling functions with other func
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 8 Mar 2001 18:26:35 +1100 
* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

* PR# 875 *
Subject: Re: [R] Bug in qchisq?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 10 Mar 2001 02:26:11 +0100

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

* PR# 880 *
Subject: A limitation for polyroot ?
From: chyihung.hsu@pharma.Novartis.com
Date: Mon, 19 Mar 2001 16:45:59 -0500
* PR# 877 *
Subject: segmentation fault of unknown cause
From: Martin Schlather <Martin.Schlather@uni-bayreuth.de>
Date: Wed, 14 Mar 2001 17:45:25 +0100
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Mar 21 11:16:10 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 21 Mar 2001 11:16:10 +0000 (GMT)
Subject: [Rd] Suggest new outer for R-1.3
Message-ID: <Pine.GSO.4.20.0103211044220.12440-100000@laplace>

Hi everyone,

Can I suggest the following modification of outer for R-1.3, in the
interests of speed and size of calculation:

*******************************************************************

"outer" <-
function (X, Y, FUN = "*", ...) 
{
    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
    dX <- dim(X)
    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
    dY <- dim(Y)
    if (is.character(FUN) && FUN=="*") {
      robj <- as.vector(X) %*% t(as.vector(Y))
      dim(robj) <- c(dX, dY)
    } else {
      FUN <- match.fun(FUN)
      Y <- rep(Y, rep(length(X), length(Y)))
      X <- rep(X, length.out = length(Y))
      robj <- array(FUN(X, Y, ...), c(dX, dY))
    }
    ## no dimnames if both don't have ..
    if (no.nx) 
        nx <- vector("list", length(dX))
    else if (no.ny) 
        ny <- vector("list", length(dY))
    if (!(no.nx && no.ny)) 
        dimnames(robj) <- c(nx, ny)
    robj
}

"%o%" <- .Alias(outer)

*******************************************************************

In other words, branch in the default case to a simple matrix outer
product.  For R-1.1 --vanilla on sparc-sun-solaris2.7 I have

> system.time(outer(1:1000, 1:300, "*"))
Error: heap memory (6144 Kb) exhausted [needed 1171 Kb more]
       See "help(Memory)" on how to increase the heap size.
Timing stopped at: 0.49 0 0.49 0 0 
> system.time(new.outer(1:1000, 1:300, "*"))
[1] 0.38 0.00 0.38 0.00 0.00
> system.time(outer(1:500, 1:300, "*"))
[1] 0.47 0.00 0.47 0.00 0.00
> system.time(new.outer(1:500, 1:300, "*"))
[1] 0.25 0.00 0.25 0.00 0.00

i.e. a saving of about 50% in time.  There will be a similar speed-up in
"kronecker".

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 21 17:21:55 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 21 Mar 2001 18:21:55 +0100 (MET)
Subject: [Rd] Incorrect values in non-central chisq values on Linux (PR#881)
Message-ID: <200103211721.SAA10812@pubhealth.ku.dk>

On the system below

dchisq(7.2, df=2,ncp=20)
[1] 0.00804528

Solaris 2.7 gives

[1] 0.01175302

which is correct, as can be seen from

x<-seq(0,50,.1)
y<-x
for(i in 1:length(x)){
   y[i]<-dchisq(x[i],df=2,ncp=20)}

plot(x,y,typ="l")

The problem is that q in dnchisq.c can be 1, and then errorbound
should be Inf. It is on Solaris, but -105822722841527.296875 on Linux
(so it has been evaluated q to greater than one).

I am about to commit a patch for 1.2.3.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 02:26:16 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Mar 2001 18:26:16 -0800
Subject: [Rd] MacOS X (Darwin) version of R-1.2.2
Message-ID: <200103220226.SAA57875@pine.frazmtn.com>

a version of R-1.2.2 for MacOS X (more precisely, for Darwin 1.3 with
X11R6) is at

http://www.stat.ucla.edu/~deleeuw/R-1.2.2-MacOSX.tar.gz

the file should be 5161540 bytes

-- su root
-- unpack in /

and everything gets put in /usr/local/bin and /usr/local/lib

this has the standard packages, including tcltk, and it has
X11R6 support

it uses tcl/tk 8.0 from the GRASS distribution

i also have a version with gnome support, but it still needs
some work -- and it's probably nonsense anyway

of course you need to install an X server and an X browser

i have not tried this in the Public Beta, so some of you may have
to wait a couple of days

there were no big problems in porting, but of course you need
Darwin versions of X11R6, of tcl/tk, and a shim for dlopen (that
maps the usual calls to Mach-O dyld calls). because of dyld
you have to replace "-shared" when linking foo.so to
"-bundle -undefined suppress".
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 22 16:23:28 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 22 Mar 2001 11:23:28 -0500
Subject: [Rd] lazy evaluation and DUP=F
Message-ID: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>

I am having some difficulty understanding the implication of lazy evaluation mixed
with DUP=F in a .Fortran call.  In qr.qty from base DUP is not used as an argument so
defaults to T. I am calling qr.qty with a very large array and would like to set
DUP=F in the .Fortran call so that qr.qty would be defined as copied below. Is there
some risk that a variable used as the argument in the original calling environment
would be modified, or is there some other reason that this should not be done?

Also, I still find it surprising that I get very slightly different results in some
calculations depending on whether I have DUP=T or DUP=F in a call to some of my own
fortran. I don't think that I am reusing the arguments in anyway that would require
duplicating them, and if I were I would expect a much bigger difference in the
result? Can anyone think of an explanation?

Thanks,
Paul Gilbert
_____

qr.qty <- function (qr, y)
{
    if (!is.qr(qr))
        stop("argument is not a QR decomposition")
    n <- as.integer(nrow(qr$qr))
    p <- as.integer(ncol(qr$qr))
    k <- as.integer(qr$rank)
    ny <- as.integer(NCOL(y))
    storage.mode(y) <- "double"
    if (NROW(y) != n)
        stop("qr and y must have the same number of rows")
    qty <- if (is.matrix(y))
        matrix(double(n * ny), n, ny)
    else double(n)
    .Fortran("dqrqty", as.double(qr$qr), n, k, as.double(qr$qraux),
        y, ny, qty = qty, PACKAGE = "base", DUP=F)$qty
}


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Mar 22 17:36:58 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 22 Mar 2001 09:36:58 -0800
Subject: [Rd] dlcompat code for Darwin
Message-ID: <200103221737.JAA67187@pine.frazmtn.com>


--Apple-Mail-663745359-3
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

There were some requests for this.

<Attachment missing>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-663745359-3
Content-Type: multipart/mixed;
	boundary=Apple-Mail-1921440476-4


--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed

There were some requests for this.


--Apple-Mail-1921440476-4
Content-Disposition: attachment;
	filename=dlcompat.tar.gz
Content-Type: application/x-gzip;
	name=dlcompat.tar.gz;
	x-unix-mode=0644
Content-Transfer-Encoding: base64

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
Wl2ra3WtrtX1Bdf/AcxOOfAAyAAA

--Apple-Mail-1921440476-4
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed


===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
    http://www.stat.ucla.edu/~deleeuw and http://home1.gte.net/datamine/
========================================================
          No matter where you go, there you are. --- Buckaroo Banzai
                   http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-1921440476-4--

--Apple-Mail-663745359-3--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 23 11:56:58 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 23 Mar 2001 03:56:58 -0800 (PST)
Subject: [Rd] lazy evaluation and DUP=F
In-Reply-To: <3ABA26FF.B7BECF5F@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103230351590.16764-100000@homer34.u.washington.edu>

On Thu, 22 Mar 2001, Paul Gilbert wrote:

> I am having some difficulty understanding the implication of lazy
> evaluation mixed with DUP=F in a .Fortran call.  In qr.qty from base
> DUP is not used as an argument so defaults to T. I am calling qr.qty
> with a very large array and would like to set DUP=F in the .Fortran
> call so that qr.qty would be defined as copied below. Is there some
> risk that a variable used as the argument in the original calling
> environment would be modified, or is there some other reason that this
> should not be done?

I am not sure that DUP=FALSE can't change objects in the original calling
environment (this is why help(.Fortran) says that there is a risk). It's
not precisely lazy evaluation that causes the problem: if the lazy
evaluation really worked under the hood the way it appears to work there
would be no problem. The problem is that R actually calls by
reference until an object is modified. It should be fairly easy to tell by
experiment whether this can happen

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 23 15:34:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Mar 2001 16:34:11 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231534.QAA06745@pubhealth.ku.dk>

>From one of my students' simulations:

m <- matrix(1, 0, 0)  # 1 to force numeric not logical
eigen(m)

and segfault in TRED2 in src/appl/eigen.f

Easy to fix, but I wonder what else might have been overlooked?
(svd is protected).

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 23 16:43:00 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 23 Mar 2001 17:43:00 +0100 (MET)
Subject: [Rd] eigen segfaults on 0-diml matrices (PR#882)
Message-ID: <200103231643.RAA07187@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> From one of my students' simulations:
    BDR> m <- matrix(1, 0, 0) # 1 to force numeric not logical eigen(m)

    BDR> and segfault in TRED2 in src/appl/eigen.f

    BDR> Easy to fix, but I wonder what else might have been overlooked?
    BDR> (svd is protected).

nothing else seems overlooked.
I've added the above matrix (as `m0') to the list of things that the
no-segfault test throughs at every function,
and there's no further segfault {after you have fixed eigen()}.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 23 16:47:23 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 23 Mar 2001 11:47:23 -0500
Subject: [Rd] bug.report and wait
Message-ID: <3ABB7E1B.A1585970@bank-banque-canada.ca>

I have being looking at bug.report in an attempt to separate out a Sys.mail function.
The unix version of bug.report does not have a "wait" parameter but the Windows
version does.  I find that in Unix with my editor set to nedit I really do need a
wait parameter. This is because nedit forks a separate process and returns, so
currently unix bug.report sends the unedited stub file.

Does anyone object to bug.report having a wait parameter? Should the default be FALSE
which would replicate current behavior in Unix or TRUE which would be safer and
correspond to the Windows version?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Mar 23 19:34:56 2001
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 23 Mar 2001 20:34:56 +0100 (MET)
Subject: [Rd] cor(x,y) when is.null(y) (PR#883)
Message-ID: <200103231934.UAA07843@pubhealth.ku.dk>


Problem:
> names(my.dat)
[1] "x" "y"
> cor(my.dat$x,my.dat$y)     # desired result
[1] 0.8660254
> cor(my.dat$x,my.dat$y.NOT) # typo
[1] 1
> 

I'd prefer a warning() or stop() in that case.

Solution (??) :

*** 1,5 ****
--- 1,7 ----
  cor <- function (x, y=NULL, use="all.obs")
  {
+     if (is.null(y) && !is.null( match.call()$y ) )
+         stop("y evaluated as NULL")
      na.method <- pmatch(use, c("all.obs", "complete.obs",
"pairwise.complete.obs"))
      if(is.data.frame(x)) x <- as.matrix(x)
      if(is.data.frame(y)) y <- as.matrix(y)

then:

> cor(my.dat$x,my.dat$y.NOT)
Error in cor(my.dat$x, my.dat$y.NOT) : y evaluated as NULL
>
> cor(my.dat$x,NULL) # intended NULL still passes
[1] 1
> 
> cor(my.dat$x)      # default: arg y = NULL
[1] 1
> 

Likewise for var() and cov()


Chuck Berry

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 2.2
 year = 2001
 month = 02
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From krcabrer@epm.net.co  Mon Mar 26 08:34:07 2001
From: krcabrer@epm.net.co (Kenneth Cabrera)
Date: Mon, 26 Mar 2001 02:34:07 -0500
Subject: [Rd] Need some help for building R!
Message-ID: <3ABEF0EF.619E072F@epm.net.co>

Hello Dear R Developers and Users:

I'm trying to compile R with all the tools of the CRAN page.
I compile the R-1.2.2 version without problem.

But when I try to compile the development version 1.3.0 it
doesn't work  when I write the command:

make BUILD=MINGW32

First it shows me something like this (I think without problems):
As I make when I compile succesfuly the R-1.2.2 version:

----------------------------------------------------------------------------------------------------------------------------

mkdir -p ../../bin
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./fixed
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/fixed'
zip -q bins bin/BATCH bin/INSTALL bin/REMOVE bin/Rd2dvi.sh bin/Rd2txt
bin/SHLIB bin/helpPRINT.bat
unzip -oaq bins -d  ../../..
rm -f bins.zip
echo done > fixbin
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/fixed'
cp -pr unzip ../..
rm -f ../../unzip/*.h
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../appl  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/appl'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/appl'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../main  OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/main'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/main'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../nmath OPTFLAGS='-O2 -Wall -pedantic' -f
Makefile.win
MAKE.EXE[1]: Entering directory `F:/R-devel/src/nmath'
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/nmath'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./graphapp
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/graphapp'
MAKE.EXE[1]: `../ga.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/graphapp'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./getline
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/getline'
MAKE.EXE[1]: `../gl.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/getline'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ../extra/xdr
MAKE.EXE[1]: Entering directory `F:/R-devel/src/extra/xdr'
MAKE.EXE[1]: `../../gnuwin32/xdr.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/extra/xdr'
F:/GCC-29~1.2/BIN/MAKE.EXE -C ./math
MAKE.EXE[1]: Entering directory `F:/R-devel/src/gnuwin32/math'
MAKE.EXE[1]: `../em.a' is up to date.
MAKE.EXE[1]: Leaving directory `F:/R-devel/src/gnuwin32/math'
------- Building R.dll from R.a malloc.o libmain.a libappl.a libmath.a
ga.a gl.a xdr.a em.a dllversion.o --------
echo LIBRARY R > R.def
echo EXPORTS >> R.def
nm R.a malloc.o libmain.a libappl.a libmath.a ga.a gl.a xdr.a em.a
dllversion.o > Defs
sed -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> R.def
rm -f Defs
gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
-lwsock32 -lcomctl32 -lversion
-----------------------------------------------------------------------------------------------------------------------------------------

Then it stops with this error:

------------------------------------------------------------------------------------------------------------------------------------------

gcc: unrecognized option '-shared'
ld:R.def: file format not recognized; treating as linker script
ld:R.def:1: parse error
F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
-------------------------------------------------------------------------------------------------------------------------------------------

What is my mistake? (Remember that the process work with the previous
version 1.2.2)

Thank you very much for you help

Kenneth Cabrera



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 26 08:58:02 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Mar 2001 09:58:02 +0200
Subject: [Rd] Need some help for building R!
In-Reply-To: Kenneth Cabrera's message of "Mon, 26 Mar 2001 02:34:07 -0500"
References: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <x2zoe97yid.fsf@blueberry.kubism.ku.dk>

Kenneth Cabrera <krcabrer@epm.net.co> writes:

> gcc  --shared -s -mwindows -o R.dll  R.def R.a malloc.o libmain.a
> libappl.a libmath.a ga.a gl.a xdr.a em.a dllversion.o -L. -lg2c
> -lwsock32 -lcomctl32 -lversion
> -----------------------------------------------------------------------------------------------------------------------------------------
> 
> Then it stops with this error:
> 
> ------------------------------------------------------------------------------------------------------------------------------------------
> 
> gcc: unrecognized option '-shared'

Hmm. Some stuff in MkRules has been changed:

--- src/gnuwin32/MkRules        2001/02/03 20:11:37     1.26.2.1
+++ src/gnuwin32/MkRules        2001/02/08 07:25:59     1.29
@@ -3,8 +3,6 @@
 
 # Alternatives CYGWIN (-mno-cygwin), MINGW32 (mingw32 gcc), CROSS (Linux)
 BUILD=MINGW32
-# Set this to YES if you use MINGW32 and gcc-2.95.2.1 or later, or cygwin-1.1.
-HAVE_SHARED=YES
 
 # Where does 'HTML Help Workshop' live? (unused if compiled HTML help is
 # not requested. Spaces allowed.)
@@ -88,16 +86,7 @@
        $(NM) $^ > Defs
        $(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $*.def
        $(RM) Defs
-ifeq ($(strip $(HAVE_SHARED)),YES)
        $(DLL) --shared $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $*.def $^ $($*-DLLLIBS) $(DLLLIBS)
-else
-       $(DLL) -mdll -Wl,--base-file,$*.b $(DLLFLAGS) $($*-DLLFLAGS) -o $@  $^ $
...

> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
         ^^^^^^

Are you sure you are using the appropriate compiler? Looks like
support for compilers before gcc-2.95.2.1 has gone away. (The flag
looks a bit dodgy though. Isn't it normally "-shared" with a single
hyphen?) 

Anyway, Brian will know...

> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 09:02:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 26 Mar 2001 09:02:05 +0100 (BST)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABEF0EF.619E072F@epm.net.co>
Message-ID: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>

On Mon, 26 Mar 2001, Kenneth Cabrera wrote:

> Hello Dear R Developers and Users:
>
> I'm trying to compile R with all the tools of the CRAN page.
> I compile the R-1.2.2 version without problem.
>
> But when I try to compile the development version 1.3.0 it
> doesn't work  when I write the command:
>
> make BUILD=MINGW32
>
> First it shows me something like this (I think without problems):
> As I make when I compile succesfuly the R-1.2.2 version:

[...]

> Then it stops with this error:
>
> ------------------------------------------------------------------------------------------------------------------------------------------
>
> gcc: unrecognized option '-shared'
> ld:R.def: file format not recognized; treating as linker script
> ld:R.def:1: parse error
> F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> -------------------------------------------------------------------------------------------------------------------------------------------
>
> What is my mistake? (Remember that the process work with the previous
> version 1.2.2)

Not reading the documentation!   The file CHANGES says:

rw1030
======

No Windows-specific changes (nor are any planned).

Support for earlier compilers has been dropped: you must use a
compiler system that supports --shared and an in-memory dlltool.


So, please get the compiler system as recommended in the INSTALL file.
(Yours must be over a year old.)  There's a good reason for this: I am not
prepared to keep testing under obselete compilers like yours.

If you want to play with development versions of R you do really need to
read the documentation, and to be aware that it is an unstable version:
there is no guarantee that it will compile anywhere, let alone under
Windows (which you didn't mention: please do so).  It is very likely that
R-devel will be broken under Windows for several periods between now and
the release of 1.3.0 as new features are added.

And please do not post to both R-help and R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Mon Mar 26 14:32:30 2001
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Mon, 26 Mar 2001 15:32:30 +0200 (MET DST)
Subject: [Rd] Problems with R CMD COMPILE within Makefile (PR#885)
Message-ID: <200103261332.PAA25104@pubhealth.ku.dk>

Dear R-developpers

This concerns a problem I posted about half a year ago on the R-help list
and to which I got some answer by Duncan Temple Lang (see below), but the
basic problem still continues. Even though I managed a workaround which is
sufficient for me Martin Maechler asked me to send a toy example of the
problem to R-bugs. So that's what I try here.

The following Makefile will not work:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	R CMD COMPILE tst.c
----------------------------------------

It results in:
----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[2]: *** No rule to make target `w'.  Stop.
make[2]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make[1]: *** [tst.o] Error 2
make[1]: Leaving directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
make: *** [tst.o] Error 2

Compilation exited abnormally with code 2 at Mon Mar 26 15:10:07
----------------------------------------

The following alternative ends in an infinite loop:
----------------------------------------
.PHONY: tst.o

tst.o: tst.c
	MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
----------------------------------------

----------------------------------------
cd /u/holzer/CurrentWork/algen/C/temp/
make 
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[1]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[2]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[3]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
MAKEFLAGS="CFLAGS=" R CMD COMPILE tst.c
make[4]: Entering directory `/users/u1/staff/holzer/CurrentWork/algen/C/temp'
...
----------------------------------------


(My workaround consists in using R SHLIB instead of R COMPILE (which works
perfectly) and removing the files that disturb or that I don't need.)

I work under Linux. tst.c consists just of one line:

int  x() {return(1);}

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.2              
year     2001             
month    02               
day      26               
language R                


Here is Duncan's answer:

>>  I took a quick look at the R COMPILE problem and it seems that there
>> are in fact two problems.  One is the problem with the attempt to
>> build a target `w'. And the other is that if that error didn't arise,
>> you would have an infinite loop.
>> 
>> Here is quick fix to your problem. Add the line
>> 
>>   include $(R_HOME)/etc/Makeconf
>> 
>> to your Makefile. Then, make will compile imageio.o with the correct flags.
>> 
>> eyore[RCompile-174]>make
>> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 
>> 
>> 
>> That should be enough to get things working.  The more detailed
>> explanation is as follows.
>> 
>> a) The rule
>> imageio.o: imageio.c
>>  	R COMPILE imageio.c
>> 
>> is executed by the first call to make.
>> The COMPILE script expands this to call
>> 
>>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o
>> 
>> At this point, this second make process sees the same rule, and does
>> the same thing. Hence, you have infinite recursion.
>> 
>> 
>> 
>> b) The problem about the target `w' is a problem resulting from the R
>> COMPILE script being called recursively from a make process.  The
>> second make process getting called via the COMPILE script is getting
>> the value of the make variable MAKEFLAG from the top-level make you
>> executed manually.  This is implicitly set to w (meaning to print
>> directory information before and after the makefile is "executed")
>> and not -w. At this point, I am not certain whether this is an
>> R oversight or a GNU make bug.


Peter

____________________________________________________________

Peter Holzer                      phone: + 41 1 632 46 34
Seminar fuer Statistik, LEO C14   fax:   + 41 1 632 12 28
(Leonhardstr. 27)                  <holzer@stat.math.ethz.ch>
ETH (Federal Inst. Technology)
8092 Zurich                       http://stat.ethz.ch/~holzer/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bwheeler@echip.com  Mon Mar 26 16:09:45 2001
From: bwheeler@echip.com (Bob Wheeler)
Date: Mon, 26 Mar 2001 10:09:45 -0500
Subject: [Rd] Need some help for building R!
References: <Pine.GSO.4.31.0103260849090.28198-100000@toucan.stats>
Message-ID: <3ABF5BB9.47ACA831@echip.com>

The problem traces to
http://www.stats.ox.ac.uk/pub/Rtools/, where the
1999 version (gcc-2.95.2) of the compiler is
recommended in the first paragraph under
Compilers. The second paragraph provides zip files
for gcc-2.95.2.1 which support --shared.

Perhaps the old reference could be deleted.


Prof Brian Ripley wrote:
> 
<snip>
> > Then it stops with this error:
> >
> > ------------------------------------------------------------------------------------------------------------------------------------------
> >
> > gcc: unrecognized option '-shared'
> > ld:R.def: file format not recognized; treating as linker script
> > ld:R.def:1: parse error
> > F:\GCC-29~1.2\BIN\MAKE.EXE: *** [R.dll] Error 1
> > -------------------------------------------------------------------------------------------------------------------------------------------
> >
> > What is my mistake? (Remember that the process work with the previous
> > version 1.2.2)
> 
> Not reading the documentation!   The file CHANGES says:
> 
> rw1030
> ======
> 
> No Windows-specific changes (nor are any planned).
> 
> Support for earlier compilers has been dropped: you must use a
> compiler system that supports --shared and an in-memory dlltool.
> 
> So, please get the compiler system as recommended in the INSTALL file.
> (Yours must be over a year old.)  There's a good reason for this: I am not
> prepared to keep testing under obselete compilers like yours.
> 
> If you want to play with development versions of R you do really need to
> read the documentation, and to be aware that it is an unstable version:
> there is no guarantee that it will compile anywhere, let alone under
> Windows (which you didn't mention: please do so).  It is very likely that
> R-devel will be broken under Windows for several periods between now and
> the release of 1.3.0 as new features are added.
> 
> And please do not post to both R-help and R-devel.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Bob Wheeler --- (Reply to: bwheeler@echip.com)
        ECHIP, Inc.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 26 16:37:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 26 Mar 2001 16:37:41 +0100 (GMT Daylight Time)
Subject: [Rd] Need some help for building R!
In-Reply-To: <3ABF5BB9.47ACA831@echip.com>
Message-ID: <Pine.WNT.4.31.0103261634530.256-100000@gannet>

On Mon, 26 Mar 2001, Bob Wheeler wrote:

> The problem traces to
> http://www.stats.ox.ac.uk/pub/Rtools/, where the
> 1999 version (gcc-2.95.2) of the compiler is
> recommended in the first paragraph under
> Compilers. The second paragraph provides zip files
> for gcc-2.95.2.1 which support --shared.
>
> Perhaps the old reference could be deleted.


Kenneth Cabrera is using an unreleased version of R: the information
on the web site is not designed for future versions of R.  If you want
to use *that*, read *its* documentation.

The information on that site is currently correct!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 22:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 13:05:16 -0800 (PST)
Subject: [Rd] DUP=FALSE
Message-ID: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>


Last week Paul Gilbert asked about DUP=FALSE and whether parent
environments can be affected.  I have experimented and they can.
Consider the R functions
> f
function(x){ .C("badidea",x,DUP=FALSE)}
> g
function(y) f(y)
> h
function(z){
        z<-as.integer(z)
        g(z)
        z
}

and the C function
	void badidea(int *x){
	    *x=7;
	}

This gives
> h(4)
[1] 7

so the modification of x in f() reaches up past g() to modify z in h().
The conclusion is that one should not pass a formal parameter of a
function using DUP=FALSE if it might be modified.  Assigning the parameter
seems to be sufficient to prevent the problem: replacing g by

 g<-function(y) {
	w<-y
	f(w)
 }
gives
> h(4)
[1] 4
as expected.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Mar 26 23:36:03 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 17:36:03 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261251200.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFC453.BBC38B69@bank-banque-canada.ca>

Thomas

Thanks for verifying that this actually does work the way you thought it
did. In the example I asked about  (qr.qty ) I am fairly sure that it
does not modify the y argument. Unfortunately this seems relatively
difficult to trace for certain, and experimenting works but may not hit
all cases.

Another thing I find I do not understand is how many copies of an
argument are made. For example, in a call to a function like

f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }

there is the original x and the duplicated x in the argument to .C, but
is there a third in the list returned by .C, or is that somehow the same
one as in the argument to .C.  My problem is that my x is very big.

Thanks,
Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Mar 26 23:58:10 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Mar 2001 14:58:10 -0800 (PST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFC453.BBC38B69@bank-banque-canada.ca>
Message-ID: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> Thanks for verifying that this actually does work the way you thought it
> did. In the example I asked about  (qr.qty ) I am fairly sure that it
> does not modify the y argument. Unfortunately this seems relatively
> difficult to trace for certain, and experimenting works but may not hit
> all cases.
>
> Another thing I find I do not understand is how many copies of an
> argument are made. For example, in a call to a function like
>
> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>
> there is the original x and the duplicated x in the argument to .C, but
> is there a third in the list returned by .C, or is that somehow the same
> one as in the argument to .C.  My problem is that my x is very big.

There's a third one. In dotcode.c the following happens

a) x is copied to a C array at the top of the R heap
b) the C function is called
c) the C array is copied into a newly created R object
d) this new R object is returned.

You only have three copies for a very short time, since the C array is
freed as soon as the new R object is returned.

A more selective version of DUP would be nice, but the only real way to do
it at the moment is to write a wrapper using .Call or .External and do any
necessary copying yourself.

I don't know why you are getting slightly different results with
DUP=FALSE. I can't think of any good explanation.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 03:00:47 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 26 Mar 2001 21:00:47 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.A41.4.33.0103261449180.14166-100000@homer16.u.washington.edu>
Message-ID: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>

Thomas

>> Another thing I find I do not understand is how many copies of an
>> argument are made. For example, in a call to a function like
>>
>> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
>>
>> there is the original x and the duplicated x in the argument to .C,
but
>> is there a third in the list returned by .C, or is that somehow the
same
>> one as in the argument to .C.  My problem is that my x is very big.

>There's a third one. In dotcode.c the following happens

>a) x is copied to a C array at the top of the R heap
>b) the C function is called
>c) the C array is copied into a newly created R object
>d) this new R object is returned.

It seems like there is an unnecessary extra copy here, unless of course
the array in the R object cannot be the C array (but your example of
messing up things in the parent environment suggests it can be). If
DUP=TRUE then there should be no harm in the result being just a pointer
to the copy which is the argument, and if DUP=FALSE then the result is
already in the copy as illustrated in the example circulated by Martin
Schlather on Martin Maechler suggestion a few days ago, so again there
is no harm. I won't pretend to understand the internals of R but I know
I am getting clobbered by a big array in an argument.

>I don't know why you are getting slightly different results with
>DUP=FALSE. I can't think of any good explanation.

I'll try to track this down sometime. If you think of anything please
let me know.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 06:37:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 06:37:09 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3ABFF44E.98D7BFAC@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>

On Mon, 26 Mar 2001, Paul Gilbert wrote:

> Thomas
>
> >> Another thing I find I do not understand is how many copies of an
> >> argument are made. For example, in a call to a function like
> >>
> >> f <- function(x){ .C("goodidea", y=double(1),  x, DUP=TRUE)[[y]] }
> >>
> >> there is the original x and the duplicated x in the argument to .C,
> but
> >> is there a third in the list returned by .C, or is that somehow the
> same
> >> one as in the argument to .C.  My problem is that my x is very big.
>
> >There's a third one. In dotcode.c the following happens
>
> >a) x is copied to a C array at the top of the R heap
> >b) the C function is called
> >c) the C array is copied into a newly created R object
> >d) this new R object is returned.
>
> It seems like there is an unnecessary extra copy here, unless of course
> the array in the R object cannot be the C array (but your example of
> messing up things in the parent environment suggests it can be). If

Well, in current R internals there is no simple way to create an R array
out of data held in a C array.  (It can be done, but is messy AFAIK.)
Also, with DUP=TRUE, you need protection.  The C routine might have cached
that address and use it next time it was called, thereby working with part
of the `newly created R object'.

> DUP=TRUE then there should be no harm in the result being just a pointer
> to the copy which is the argument, and if DUP=FALSE then the result is
> already in the copy as illustrated in the example circulated by Martin
> Schlather on Martin Maechler suggestion a few days ago, so again there
> is no harm. I won't pretend to understand the internals of R but I know
> I am getting clobbered by a big array in an argument.

Why are you using .C not .Call anyway?  These things are much easier to
control with .Call.

> >I don't know why you are getting slightly different results with
> >DUP=FALSE. I can't think of any good explanation.
>
> I'll try to track this down sometime. If you think of anything please
> let me know.

Linux? If so I think this is probably due to forced stores or not.  gcc on
Linux is getting notorious with me for not doing IEEE-compatible
arithmetic, and so getting inconsistent results. Compiling with
-fforce-store seems to solve this (at some performance expense).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Mar 27 17:05:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 27 Mar 2001 18:05:51 +0200
Subject: [Rd] sort(list(..)) ?
Message-ID: <15040.47711.87247.785763@gargle.gargle.HOWL>

Looking at the source code of  sort()
-- for some speedup considerations --
I found that we currently use isVector() for testing the validity of x in
sort(x) whereas I think we should use isVectorAtomic(),
actually for S-plus compatibility additionally allowing NULL.
Hence I'd propose to replace
the test

    if (!isVector(CAR(args)))
	errorcall(call, "only vectors can be sorted");

by

    if(CAR(args) == R_NilValue) return R_NilValue;
    if(!isVectorAtomic(CAR(args)))
	errorcall(call, "only atomic vectors can be sorted");

in do_sort(.) in src/main/sort.c .
This doesn't quite pass "make check" currently because

  is.factor(factor(list()))

now would give an error.

I still think we should not silently allow list()s {or expression()s} as
argument to sort() as we do now; BTW, we just return them unchanged.

We could produce a warning instead of an error 
which would be more back-compatible, but I'd prefer the error.

Opinions?
{no feedback will be interpreted as:  
    "agreed, go ahead and change for R 1.3.0"}

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 27 17:21:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2001 18:21:25 +0200
Subject: [Rd] sort(list(..)) ?
In-Reply-To: Martin Maechler's message of "Tue, 27 Mar 2001 18:05:51 +0200"
References: <15040.47711.87247.785763@gargle.gargle.HOWL>
Message-ID: <x2g0fz9o8q.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> in do_sort(.) in src/main/sort.c .
> This doesn't quite pass "make check" currently because
> 
>   is.factor(factor(list()))
> 
> now would give an error.

...which is no big loss, because already now

> factor(list(1,2,3))
Error in unique(x) : unique() applies only to vectors
> factor(list(1:3))
Error in unique(x) : unique() applies only to vectors

> I still think we should not silently allow list()s {or expression()s} as
> argument to sort() as we do now; BTW, we just return them unchanged.

Agreed. Unless someone feels a great need to generalize sort() to sort
complex structures that can only be stored in a list....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 27 18:04:04 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 27 Mar 2001 12:04:04 -0500
Subject: [Rd] DUP=FALSE
References: <Pine.GSO.4.31.0103270625140.8701-100000@auk.stats>
Message-ID: <3AC0C803.F296CECE@bank-banque-canada.ca>

>> It seems like there is an unnecessary extra copy here, unless of course
>> the array in the R object cannot be the C array (but your example of
>> messing up things in the parent environment suggests it can be). If

>Well, in current R internals there is no simple way to create an R array
>out of data held in a C array.  (It can be done, but is messy AFAIK.)
>Also, with DUP=TRUE, you need protection.  The C routine might have cached
>that address and use it next time it was called, thereby working with part
>of the `newly created R object'.

ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
call which distinguished items to return and only built an R object of those rather
than the complete list of arguments in the call  (for me with .Fortran especially).

>Why are you using .C not .Call anyway?  These things are much easier to
>control with .Call.

Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
the documentation to mean that .Call and .External are only alternatives to .C and
not to .Fortran. If I'm wrong on that please let me know.

>> >I don't know why you are getting slightly different results with
>> >DUP=FALSE. I can't think of any good explanation.

>> I'll try to track this down sometime. If you think of anything please
>> let me know.

>Linux? If so I think this is probably due to forced stores or not.  gcc on
>Linux is getting notorious with me for not doing IEEE-compatible
>arithmetic, and so getting inconsistent results. Compiling with
>-fforce-store seems to solve this (at some performance expense).

Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
my man pages may be older.

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 27 18:27:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 27 Mar 2001 18:27:21 +0100 (BST)
Subject: [Rd] DUP=FALSE
In-Reply-To: <3AC0C803.F296CECE@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0103271824250.10215-100000@auk.stats>

On Tue, 27 Mar 2001, Paul Gilbert wrote:

> >> It seems like there is an unnecessary extra copy here, unless of course
> >> the array in the R object cannot be the C array (but your example of
> >> messing up things in the parent environment suggests it can be). If
>
> >Well, in current R internals there is no simple way to create an R array
> >out of data held in a C array.  (It can be done, but is messy AFAIK.)
> >Also, with DUP=TRUE, you need protection.  The C routine might have cached
> >that address and use it next time it was called, thereby working with part
> >of the `newly created R object'.
>
> ok, I think I'll avoid this for now. On the wish list:  it would be nice to have a
> call which distinguished items to return and only built an R object of those rather
> than the complete list of arguments in the call  (for me with .Fortran especially).
>
> >Why are you using .C not .Call anyway?  These things are much easier to
> >control with .Call.
>
> Actually, I am using .Fortran, I just happened to grab Thomas example. I understand
> the documentation to mean that .Call and .External are only alternatives to .C and
> not to .Fortran. If I'm wrong on that please let me know.

You can write a C wrapper and .Call that, of course.

> >> >I don't know why you are getting slightly different results with
> >> >DUP=FALSE. I can't think of any good explanation.
>
> >> I'll try to track this down sometime. If you think of anything please
> >> let me know.
>
> >Linux? If so I think this is probably due to forced stores or not.  gcc on
> >Linux is getting notorious with me for not doing IEEE-compatible
> >arithmetic, and so getting inconsistent results. Compiling with
> >-fforce-store seems to solve this (at some performance expense).
>
> Solaris.  fforce-store does not seem to be an option in my version of gcc (2.8.1) but
> my man pages may be older.

It's not a Solaris issue, but 2.8.1 is rather old: I use 2.95.2 on Solaris.
There may be order-of-evaluation issue though.  Does the difference persist
with optimization turned off?

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From k.j.mcconway@open.ac.uk  Wed Mar 28 15:46:50 2001
From: k.j.mcconway@open.ac.uk (k.j.mcconway@open.ac.uk)
Date: Wed, 28 Mar 2001 16:46:50 +0200 (MET DST)
Subject: [Rd] Error (?) in documentation of 'swiss' data in R base package (PR#886)
Message-ID: <200103281446.QAA22300@pubhealth.ku.dk>

Full_Name: Kevin McConway
Version: 1.2.2
OS: WinNT
Submission from: (NULL) (137.108.11.58)


Hardly crucial, but I've come upon a potential error in the documentation of the
'swiss' datafram in the R base package. The description accurately matches what
is said in the Mosteller and Tukey source quoted, but according to the data
archived at Princeton (links from
http://opr.princeton.edu/archive/eufert/switz.html), the variable that Mosteller
and Tukey report as infant mortality is actually the proportion of 'draftees'
with education beyond primary school. Infant mortality is on the archived file,
but the values are quite a lot different. Of course, it's possible that
Mosteller and Tukey were right and the people who did the archiving at
Princenton, later, got it wrong.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Wed Mar 28 19:51:06 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Wed, 28 Mar 2001 20:51:06 +0200 (MET DST)
Subject: [Rd] axis(adj=anything) has no effect (PR#887)
Message-ID: <200103281851.UAA23275@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: SunOS5.6
Submission from: (NULL) (132.200.32.33)


Giving an adj argument to axis() seems to have no effect.  In Splus, adj = 0 
left-justifies the labels under the ticks, adj = 1 right justifies them, and 
numbers in between can also be used.  I like to use adj = 0.9 to get something
that looks like this:

-----------+-----------+-----------+------------+---------
        1980        1981        1982         1983

as an axis for a plot of monthly time series data.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 29 14:38:57 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 29 Mar 2001 14:38:57 +0100 (BST)
Subject: [Rd] Detaching "ctest"
Message-ID: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>

Hi Everyone,

We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
ctest is now loaded automatically.  The mechanism for this is to create a
.First function in base:

.First <- function() {
    require("ctest", quietly=TRUE)
}

Now I don't want ctest, but I find that simply putting

if (length(grep("ctest", search())))
  detach(package:ctest)

into my ".Rprofile" does not work, for the simple reason that .First is
invoked after .Rprofile.  I thought that one possible solution is to
remove .First from base, but when I tried this I got

> find(".First")
[1] "package:base"
> search()
[1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
[5] "package:base"   
> remove(".First", pos=5)
Warning message: 
remove: variable ".First" was not found 
> remove(".First", inherits=TRUE)
Warning message: 
remove: variable ".First" was not found 

Is it not possible to remove things from "base"?  The alternative is to
mask the .First with a blank one in my .Rprofile, but this seems rather
inelegant.

So my questions are:

(1) Why has ctest been included among the start-up options, and why has
this mechanism of using the .First been used, rather than relying on
people putting the command require("ctest", quietly=TRUE) into the
.Rprofile?

(2) Is there an elegant way of me stopping ctest from being loaded, other
then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

Many thanks, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 11:03:02 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 12:03:02 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
Message-ID: <15044.22998.24033.91361@mithrandir.hornik.net>

>>>>> Jonathan Rougier writes:

> Hi Everyone,
> We have just upgraded to R-1.2.1, and I note, in contrast to R-1.1.1, that
> ctest is now loaded automatically.  The mechanism for this is to create a
> .First function in base:

> .First <- function() {
>     require("ctest", quietly=TRUE)
> }

> Now I don't want ctest, but I find that simply putting

> if (length(grep("ctest", search())))
>   detach(package:ctest)

> into my ".Rprofile" does not work, for the simple reason that .First is
> invoked after .Rprofile.  I thought that one possible solution is to
> remove .First from base, but when I tried this I got

>> find(".First")
> [1] "package:base"
>> search()
> [1] ".GlobalEnv"      "package:ctest"   "package:patches" "Autoloads"      
> [5] "package:base"   
>> remove(".First", pos=5)
> Warning message: 
> remove: variable ".First" was not found 
>> remove(".First", inherits=TRUE)
> Warning message: 
> remove: variable ".First" was not found

Which looks rather strange to me ... 

> Is it not possible to remove things from "base"?  The alternative is
> to mask the .First with a blank one in my .Rprofile, but this seems
> rather inelegant.

> So my questions are:

> (1) Why has ctest been included among the start-up options, and why has
> this mechanism of using the .First been used, rather than relying on
> people putting the command require("ctest", quietly=TRUE) into the
> .Rprofile?

> (2) Is there an elegant way of me stopping ctest from being loaded, other
> then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?

There was a great amount of discussion on r-core whether or not ctest
should be preloaded.  We all agree that base is way too large, and that
it eventually should basically be a core S language interpreter, with
everything else available ``on demand''.  Re add-on packages, there are
two obvious possibilities:

* only provide base by default, and let users or site admins customize
  the list of packages they want by default.

* provide packages like ctest (and maybe ts) by default, and have site
  admins or users overrule the default settings.

In a Unix-centric world the former would be the obvious choice.
However, there was great concern about the situation on Windows, where
the intermediate ``site admin'' level typically would not be available,
and we do not want to have first time R windows users start complaining
about R as a stats package that cannot even do a t test.  Hence, we went
for the latter.

The ``elegant'' way we recommend is that either you as site admin
provide a site version of .First in $R_HOME/etc/Rprofile, or you as user
provide your private version of .First in $HOME/.Rprofile.

Hope this helps.

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 14:02:13 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 2001 15:02:13 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: Kurt Hornik's message of "Fri, 30 Mar 2001 12:03:02 +0200"
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace> <15044.22998.24033.91361@mithrandir.hornik.net>
Message-ID: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> >>>>> Jonathan Rougier writes:

> >> remove(".First", pos=5)
> > Warning message: 
> > remove: variable ".First" was not found 
> >> remove(".First", inherits=TRUE)
> > Warning message: 
> > remove: variable ".First" was not found
> 
> Which looks rather strange to me ... 

One of the anomalies with the base frame is that you cannot remove
variables from it (this has to do with the fact that base has its
values bound directly to symbols, whereas other frames are essentially
hashed lists). The error message is a bit weird, though. 

> > Is it not possible to remove things from "base"?  The alternative is
> > to mask the .First with a blank one in my .Rprofile, but this seems
> > rather inelegant.

You can't. However, you wouldn't really gain anything by it since the
base frame is not saved as part of your workspace. The intended way is
as Kurt said: Override .First in your own .Rprofile.

> > So my questions are:
> 
> > (1) Why has ctest been included among the start-up options, and why has
> > this mechanism of using the .First been used, rather than relying on
> > people putting the command require("ctest", quietly=TRUE) into the
> > .Rprofile?
> 
> > (2) Is there an elegant way of me stopping ctest from being loaded, other
> > then editing the Rprofile in R-1.2.1/lib/R/library/base/R/?
> 
> There was a great amount of discussion on r-core whether or not ctest
> should be preloaded.  We all agree that base is way too large, and that
> it eventually should basically be a core S language interpreter, with
> everything else available ``on demand''.  Re add-on packages, there are
> two obvious possibilities:
> 
> * only provide base by default, and let users or site admins customize
>   the list of packages they want by default.
> 
> * provide packages like ctest (and maybe ts) by default, and have site
>   admins or users overrule the default settings.
> 
> In a Unix-centric world the former would be the obvious choice.
> However, there was great concern about the situation on Windows, where
> the intermediate ``site admin'' level typically would not be available,
> and we do not want to have first time R windows users start complaining
> about R as a stats package that cannot even do a t test.  Hence, we went
> for the latter.

Not too sure whether the former is really all that obvious even on
Unix. We'll be getting casual users there too who'd expect that
standard procedures like t.test are available by default and site
admins who wouldn't know anything about the packages they install (and
on Linux, the situation is quite often a single-user one anyway).
However, I do like the idea of having a small core, in particular with
a view to e.g. calling R in shell scripts.

I think the current situation is mainly a stopgap, which got inserted
when we realised that moving t.test into ctest and autoloading ctest
when t.test was requested led to a situation that was really difficult
to explain to users ("cor.test only works after t.test?"). Longer
term, I think we need something more elegant than .Rprofile/.First to
let the users edit their default configuration easily. I'm not quite
sure what I want, but say for the sake of argument that the user
interface was

> configure("packages")

which could do different things depending on whether you were using a
GUI, terminal interface, ESS, or maybe even batch mode. In simple
modes it might simply be based on edit()ing the output of

  data.frame(package=.packages(all=T),
             load=!is.na(match(.packages(all=T),.packages())))

- although you might want to distinguish between the usual profile-ish
things (site-level/user-level/directory-level/workspace-specific) too.
With a GUI, you'd likely want something with checkboxes instead.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Mar 30 16:20:05 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 30 Mar 2001 10:20:05 -0500 (EST)
Subject: [Rd] Re: [Omega-bugs] RSMethods pkg causes data.frame misbehavior in R
References: <200103292310.SAA06361@falmouth.bwh.harvard.edu>
Message-ID: <200103301520.KAA20458@jessie.research.bell-labs.com>

Right.  The methods such as as.data.frame.numeric don't get
dispatched, basically because RSMethods tries to interpret class(x) in
the S4 sense (so, e.g. a numeric vector has class "numeric").

Problems can then come from different semantics for S3-style and
S4-style methods.  The older methods don't dispatch on the mode of
vectors (or equivalently, on the value of data.class(x)), but only on
an explicit "class" attribute.

In order to have separate methods for as.data.frame.numeric, etc.,
the S3-style generic function explicitly assigns a class (attribute).

In the newer class model, every object has a class so no explicit
attribute is needed.

The long-term solution depends on how we want to approach the two
kinds of methods:  Do we want them to live side-by-side or do we want
a single method dispatch model?

Meanwhile, a work-around is to find places, like as.data.frame, where
the class attribute is set, and make this explicit.

This specific bug goes away if the RSMethods package overrides
as.data.frame with the following definition.  (I'll add it to the next
version of RSMethods if it proves OK.)

as.data.frame <-
function (x, row.names = NULL, optional = FALSE) 
{
    if (is.null(x)) 
        return(as.data.frame(list()))
    if (is.null(attr(x, "class"))) 
        attr(x, "class") <- data.class(x)
    UseMethod("as.data.frame", x, row.names, optional)
}
  
Like most of these problems, I suspect, all that's needed is to
replace "class(x)" with "attr(x, 'class')".

Thanks, Vince.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

> From: "Vincent J. Carey, Jr." <stvjc@channing.harvard.edu>
> Sender: omega-bugs-admin@omegahat.org
> Errors-To: omega-bugs-admin@omegahat.org
> Precedence: bulk
> List-Help: <mailto:omega-bugs-request@omegahat.org?subject=help>
> List-Post: <mailto:omega-bugs@omegahat.org>
> List-Subscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=subscribe>
> List-Id: Bug reports and related mail for Omegahat software. <omega-bugs.omegahat.org>
> List-Unsubscribe: <http://www.omegahat.org/mailman/listinfo/omega-bugs>,
> 	<mailto:omega-bugs-request@omegahat.org?subject=unsubscribe>
> List-Archive: <http://www.omegahat.org/pipermail/omega-bugs/>
> Date: Thu, 29 Mar 2001 18:10:49 -0500 (EST)
> 
> 
> I've run into a problem with data.frame printing/attachment
> in R1.3 (also detected in 1.2) when RSMethods is attached as a library.
> Here are the versions I'm using, they are the latest ones pointed to
> on omega.stat.wisc.edu:
> 
> -rw-r--r--   1 stvjc    st         16920 Mar  5 13:38 SLanguage_0.1-0.tar.gz
> -rw-r--r--   1 stvjc    st         38139 Mar  5 13:37 RSMethods_0.1-2.tar.gz
> 
> A transcript displaying the problem and a traceback is given
> below.  When RSMethods is detached the problem goes away.
> I haven't been able to understand why as.data.frame.default
> kicks in erroneously.
> 
> I'm still able to make progress with the S4 classes in R
> with the RSMethods library, so I don't consider this too 
> urgent.
> 
> vc
> 
> # normal operations prior to library attachment
> 
> > data(stackloss)
> > stackloss[1:3,]
>   Air.Flow Water.Temp Acid.Conc. stack.loss
> 1       80         27         89         42
> 2       80         27         88         37
> 3       75         25         90         37
> 
> # attach
> 
> > library(RSMethods)
> 
> Attaching Package "package:RSMethods":
> 
> 
> 	The following object(s) are masked from package:base :
> 
> 	 all.names all.vars assign exists find get objects remove substring substring<- warning 
> 
> # problem
> 
> > stackloss[1:3,]
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
> 	can't coerce character into a data.frame
> Execution halted
> 
> > traceback()
> 11: stop(paste("can't coerce", data.class(x), "into a data.frame"))
> 10: as.data.frame.default(x[[i]], optional = TRUE)
> 9: as.data.frame(x[[i]], optional = TRUE)
> 8: data.frame(Air.Flow = c("80", "80", "75"), Water.Temp = c("27", 
>    "27", "25"), Acid.Conc. = c("89", "88", "90"), stack.loss = c("42", 
>    "37", "37"), check.names = FALSE, row.names = c("1", "2", "3"
>    ))
> 7: do.call("data.frame", rval)
> 6: format.data.frame(x)
> 5: format(x)
> 4: as.matrix(x)
> 3: print.matrix(format(x), ..., quote = quote, right = right)
> 2: print.data.frame(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 1: print(structure(list(Air.Flow = c(80, 80, 75), Water.Temp = c(27, 
>    27, 25), Acid.Conc. = c(89, 88, 90), stack.loss = c(42, 37, 37
>    )), .Names = c("Air.Flow", "Water.Temp", "Acid.Conc.", "stack.loss"
>    ), row.names = c("1", "2", "3"), class = "data.frame"))
> 
> --
> 
> # also occurs when just running data()
> 
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:RSMethods"
> [4] "package:ctest"     "Autoloads"         "package:base"     
> > data(stackloss)
> Error in as.data.frame.default(x[[i]], optional = TRUE) : 
>         can't coerce numeric into a data.frame
> > detach(3)
> > data(stackloss)
> # no error now
> > search()
> [1] ".GlobalEnv"        "package:SLanguage" "package:ctest"    
> [4] "Autoloads"         "package:base"     
> 
> 
> > 
> > version
>          _                           
> platform sparc-sun-solaris2.6        
> arch     sparc                       
> os       solaris2.6                  
> system   sparc, solaris2.6           
> status   Under development (unstable)
> major    1                           
> minor    3.0                         
> year     2001                        
> month    03                          
> day      04                          
> language R                           
> 
> i've had the same behavior under R1.3 on RH linux 6.1
> and in R1.2b on that OS
> -- 
> stvjc@gauss.bwh.harvard.edu
> _______________________________________________
> Omega-bugs mailing list  -  Omega-bugs@omegahat.org
> http://www.omegahat.org/mailman/listinfo/omega-bugs
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Mar 30 17:26:52 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 30 Mar 2001 18:26:52 +0200
Subject: [Rd] Detaching "ctest"
In-Reply-To: <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.20.0103291408500.13680-100000@laplace>
 <15044.22998.24033.91361@mithrandir.hornik.net>
 <x2hf0bz9yi.fsf@blueberry.kubism.ku.dk>
Message-ID: <15044.46028.686427.367469@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> ...

>> configure("packages")

> which could do different things depending on whether you were using a
> GUI, terminal interface, ESS, or maybe even batch mode. In simple
> modes it might simply be based on edit()ing the output of

>   data.frame(package=.packages(all=T),
>              load=!is.na(match(.packages(all=T),.packages())))

> - although you might want to distinguish between the usual profile-ish
> things (site-level/user-level/directory-level/workspace-specific) too.
> With a GUI, you'd likely want something with checkboxes instead.

Nice idea!  Two remarks.

* We might want similar ways of setting `preferences' such as options.
  [E.g., via something like Emacs M-x customize, or in a GUI style.]

* In any case, as far as I am concerned the real problem is not having a
  convenient interface but on agreeing on what the choices should be,
  and how well-educated users or site admins need to be to make the
  right choices.  E.g., when it comes to setting a default profile for
  packages, how does the user find out which packages he wants?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jhallman@frb.gov  Fri Mar 30 22:03:10 2001
From: jhallman@frb.gov (jhallman@frb.gov)
Date: Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
Message-ID: <200103302103.XAA17985@pubhealth.ku.dk>

Full_Name: Jeff Hallman
Version: 1.2.2
OS: Solaris
Submission from: (NULL) (132.200.32.33)


"boink<-" <- function(x, a = 1, b = 2, value){
    print(match.call())
    x
}

> z <- 1
> boink(z, b = 4) <- 22
boink<-(x = *tmp*, a = 4, value = 22)
>
     
Shouldn't it have matched the 4 to b, not a?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 30 23:46:29 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Mar 2001 00:46:29 +0200
Subject: [Rd] User defined assignment function ignores argument names (PR#888)
In-Reply-To: jhallman@frb.gov's message of "Fri, 30 Mar 2001 23:03:10 +0200 (MET DST)"
References: <200103302103.XAA17985@pubhealth.ku.dk>
Message-ID: <x2d7aykh8a.fsf@blueberry.kubism.ku.dk>

jhallman@frb.gov writes:

> "boink<-" <- function(x, a = 1, b = 2, value){
>     print(match.call())
>     x
> }
> 
> > z <- 1
> > boink(z, b = 4) <- 22
> boink<-(x = *tmp*, a = 4, value = 22)
> >
>      
> Shouldn't it have matched the 4 to b, not a?

Yes. Fixed for 1.2.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sat Mar 31 21:38:44 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sat, 31 Mar 2001 22:38:44 +0200
Subject: [Rd] Comments on R-1.2.1 builds (PR#851)
In-Reply-To: <14990.35273.167526.4092@mithrandir.hornik.net>
References: <200102170044.BAA19310@pubhealth.ku.dk>
 <14990.35273.167526.4092@mithrandir.hornik.net>
Message-ID: <15046.16468.885425.640832@mithrandir.hornik.net>

>>>>> Kurt Hornik writes:

>>>>> beebe  writes:
>> The R-1.2.1 builds have gone fairly smoothly on most of my UNIX
>> architectures, but there were many warnings reported by the picky SGI
>> compiler that could be eliminated in future releases.

>> Generally, I have found the SGI compilers very helpful in ferreting
>> out portability problems, unused and/or obsolete variables, unexpected
>> datatype coercions, etc., and they compile faster than any other
>> compilers too.

>> First, I configured like this:

>> env CC='c89 -mips3 -O3' ./configure && make all

>> This reports:

>> R is now configured for mips-sgi-irix6.5

>> Source directory:          .
>> Installation directory:    /usr/local
>> C compiler:                c89 -mips3 -O3  -OPT:IEEE_NaN_inf=ON -g
>> C++ compiler:              c++  -g -O2
>> FORTRAN compiler:          g77  -OPT:IEEE_NaN_inf=ON -g -O2

>> X11 support:               yes
>> Gnome support:             no
>> Tcl/Tk support:            yes

>> R profiling support:       yes
>> R as a shared library:     no

>> The build proceeds until this failure:

>> g77 -OPT:IEEE_NaN_inf=ON  -g -O2 -c ch2inv.f -o ch2inv.o
>> f771: Invalid option `-OPT:IEEE_NaN_inf=ON'
>> make[3]: *** [ch2inv.o] Error 1

>> Evidently, it was not prepared for the GNU Fortran compiler.

> Yep, that is a bug.  I need some feedback for fixing this, though.  The
> current logic is to run the autoconf R_C_OPTIEEE test if the platform is
> IRIX.  The test itself tries to compile and run

> #include <math.h>
> #include <ieeefp.h>
> int main () {
>   double x = 0;
>   fpsetmask(0); x = x / x; return (x != x);
> }

> and if that works adds -OPT:IEEE_NaN_inf=ON to both R_XTRA_CFLAGS and
> R_XTRA_FFLAGS.

> This obviously does not make sense for FORTRAN, and should be made more
> defensive for C.

> * For C, one should additionally test whether the compiler accepts this
>   flag.  I assume gcc would not, so should we do

> 	if_not_using_gcc  check_arg("-OPT:IEEE_NaN_inf=ON")

> * For FORTRAN, I am not sure whether the result of the above test has
>   any relevance.  Question is, do we have a FORTRAN test program similar
>   to the above to determine whether the flag is needed?  Again, we
>   should also check whether the compiler accepts the flag ...

> * Or should we simply unconditionally add the flag for ``native'', i.e.,
>   non-GNU compilers?

> (Sorry but I do not have access to SGIs ...)

I would like to fix this for 1.2.3, so it would be great if anyone with
access to IRIX could comment ... Personally, I'd prefer the last idea if
this is feasible.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

