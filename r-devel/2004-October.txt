From ramasamy at cancer.org.uk  Fri Oct  1 12:48:53 2004
From: ramasamy at cancer.org.uk (Adaikalavan Ramasamy)
Date: Fri Oct  1 12:47:51 2004
Subject: [Rd] same test statistic for t-test with and without equal variance
	assumption
Message-ID: <1096627733.3352.10.camel@ndmpc126.ihs.ox.ac.uk>

Could some kindly tell me if I am supposed to be getting the same test
statistic value with var.equal=TRUE and var.equal=FALSE in t.test ?

set.seed(1066)
x1 <- rnorm(50)
x2 <- rnorm(50)

t.test(x1, x2, var.equal=FALSE)$statistic # 0.5989774
t.test(x1, x2, var.equal=TRUE)$statistic  # 0.5989774 ???


Here are my own calculations that shows that perhaps the result when
var.equal=TRUE is wrong.

n1 <- length(x1); n2 <- length(x2)
m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
v1 <- var(x1)   ; v2 <- var(x2)

# t-test with UNequal variance
denom1 <- sqrt( v1/n1 + v2/n2 )
num / denom1   # gives 0.5989774

# t-test with equal variance 
sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
denom2 <- sp * sqrt( 1/n1 + 1/n2 )
num / denom2   # gives 0.5913777


I tested this using R-1.9.1 (21/06/2004) on Redhat Fedora Core 2 and
Windows 2000 Professional with the same results.

Any suggestions would be kindly appreciated.

Regards,
-- 
Adaikalavan Ramasamy                    ramasamy@cancer.org.uk
Centre for Statistics in Medicine       http://www.ihs.ox.ac.uk/csm/
Cancer Research UK                      Tel : 01865 226 677
Old Road Campus, Headington, Oxford     Fax : 01865 226 962

From p.dalgaard at biostat.ku.dk  Fri Oct  1 13:15:06 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct  1 13:17:08 2004
Subject: [Rd] same test statistic for t-test with and without equal
	variance assumption
In-Reply-To: <1096627733.3352.10.camel@ndmpc126.ihs.ox.ac.uk>
References: <1096627733.3352.10.camel@ndmpc126.ihs.ox.ac.uk>
Message-ID: <x2brfm666d.fsf@biostat.ku.dk>

Adaikalavan Ramasamy <ramasamy@cancer.org.uk> writes:

> Could some kindly tell me if I am supposed to be getting the same test
> statistic value with var.equal=TRUE and var.equal=FALSE in t.test ?
> 
> set.seed(1066)
> x1 <- rnorm(50)
> x2 <- rnorm(50)
> 
> t.test(x1, x2, var.equal=FALSE)$statistic # 0.5989774
> t.test(x1, x2, var.equal=TRUE)$statistic  # 0.5989774 ???
> 
> 
> Here are my own calculations that shows that perhaps the result when
> var.equal=TRUE is wrong.
> 
> n1 <- length(x1); n2 <- length(x2)
> m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
> v1 <- var(x1)   ; v2 <- var(x2)
> 
> # t-test with UNequal variance
> denom1 <- sqrt( v1/n1 + v2/n2 )
> num / denom1   # gives 0.5989774
> 
> # t-test with equal variance 
> sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> num / denom2   # gives 0.5913777
> 
> 
> I tested this using R-1.9.1 (21/06/2004) on Redhat Fedora Core 2 and
> Windows 2000 Professional with the same results.
> 
> Any suggestions would be kindly appreciated.

Your calculation is wrong. Try increasing the variance of x1 and x2...

> set.seed(1066)
> x1 <- rnorm(50,,100)
> x2 <- rnorm(50,,100)
> m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
>  v1 <- var(x1)   ; v2 <- var(x2)
> denom1 <- sqrt( v1/n1 + v2/n2 )
> num / denom1   # gives 0.5989774
[1] 0.5989774
>  sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> num / denom2   # gives 0.5913777
[1] 0.005913777


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From hoffman+R at ebi.ac.uk  Fri Oct  1 14:42:58 2004
From: hoffman+R at ebi.ac.uk (hoffman+R@ebi.ac.uk)
Date: Fri Oct  1 14:43:02 2004
Subject: [Rd] bzip2 directory won't build on OSF1 due to C99 code and -std1
	option (PR#7257)
Message-ID: <20041001124258.62148EDED@slim.kubism.ku.dk>

Full_Name: Michael Hoffman
Version: 2.0.0-beta-20041001
OS: OSF1 V5.1
Submission from: (NULL) (193.62.199.8)


Hello. Building R 2.0.0-beta-20041001 on OSF1 V5.1 failed because the default
configure sets R_XTRA_CFLAGS to "-std1 -ieee_with_inexact." The bzip2 directory
includes C99 code that requires -std1 to not be set in order to compile. This
halts the overall build process.

From ramasamy at cancer.org.uk  Fri Oct  1 14:56:52 2004
From: ramasamy at cancer.org.uk (Adaikalavan Ramasamy)
Date: Fri Oct  1 14:55:52 2004
Subject: [Rd] same test statistic for t-test with and without equal
	variance assumption
In-Reply-To: <x2brfm666d.fsf@biostat.ku.dk>
References: <1096627733.3352.10.camel@ndmpc126.ihs.ox.ac.uk>
	<x2brfm666d.fsf@biostat.ku.dk>
Message-ID: <1096635412.3412.10.camel@ndmpc126.ihs.ox.ac.uk>

Peter, thank you! I forgot the to square root in calculating sp.

sp <- sqrt( ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2) )

For several simulation runs, the test statistics from both tests are
remarkably similar (difference is less than 10e-16). I naively assumed
that the statistics value should be slightly but visibly different too. 

It appear that the effects of equal and unequal variance assumptions are
only felt through the degrees of freedom calculation. 

Regards, Adai


On Fri, 2004-10-01 at 12:15, Peter Dalgaard wrote:
> Adaikalavan Ramasamy <ramasamy@cancer.org.uk> writes:
> 
> > Could some kindly tell me if I am supposed to be getting the same test
> > statistic value with var.equal=TRUE and var.equal=FALSE in t.test ?
> > 
> > set.seed(1066)
> > x1 <- rnorm(50)
> > x2 <- rnorm(50)
> > 
> > t.test(x1, x2, var.equal=FALSE)$statistic # 0.5989774
> > t.test(x1, x2, var.equal=TRUE)$statistic  # 0.5989774 ???
> > 
> > 
> > Here are my own calculations that shows that perhaps the result when
> > var.equal=TRUE is wrong.
> > 
> > n1 <- length(x1); n2 <- length(x2)
> > m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
> > v1 <- var(x1)   ; v2 <- var(x2)
> > 
> > # t-test with UNequal variance
> > denom1 <- sqrt( v1/n1 + v2/n2 )
> > num / denom1   # gives 0.5989774
> > 
> > # t-test with equal variance 
> > sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> > denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> > num / denom2   # gives 0.5913777
> > 
> > 
> > I tested this using R-1.9.1 (21/06/2004) on Redhat Fedora Core 2 and
> > Windows 2000 Professional with the same results.
> > 
> > Any suggestions would be kindly appreciated.
> 
> Your calculation is wrong. Try increasing the variance of x1 and x2...
> 
> > set.seed(1066)
> > x1 <- rnorm(50,,100)
> > x2 <- rnorm(50,,100)
> > m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
> >  v1 <- var(x1)   ; v2 <- var(x2)
> > denom1 <- sqrt( v1/n1 + v2/n2 )
> > num / denom1   # gives 0.5989774
> [1] 0.5989774
> >  sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> > denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> > num / denom2   # gives 0.5913777
> [1] 0.005913777
>

From ripley at stats.ox.ac.uk  Fri Oct  1 14:58:30 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  1 14:58:35 2004
Subject: (PR#7257) Re: [Rd] bzip2 directory won't build on OSF1 due to C99
	code and -std1 option
In-Reply-To: <20041001124258.62148EDED@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410011346020.15997-100000@gannet.stats>

What `C99 code' is that?  It passes conformance tests on a very strict C89
compiler.  Please don't expect us to guess what you have in mind, for we 
haven't a clue.

Please read the section on BUGS in the FAQ, and tell us the symptoms, not 
your guess as to the diagnosis.

AFAIK, R's configure does not know about OSF1 v5.x, so it is quite likely 
that the assumptions (which are inside

case "${host_cpu}" in
  alpha*)

) are wrong for that untested platform.  The code in the bzip2 directory
has not been changed for a very long time, except for possibly allowing
inlining (and for which there is a configure test).

Note that feedback 3 days before release is too late for configuration 
changes to be made.

On Fri, 1 Oct 2004 hoffman+R@ebi.ac.uk wrote:

> Full_Name: Michael Hoffman
> Version: 2.0.0-beta-20041001
> OS: OSF1 V5.1
> Submission from: (NULL) (193.62.199.8)
> 
> 
> Hello. Building R 2.0.0-beta-20041001 on OSF1 V5.1 failed because the default
> configure sets R_XTRA_CFLAGS to "-std1 -ieee_with_inexact." The bzip2 directory
> includes C99 code that requires -std1 to not be set in order to compile. This
> halts the overall build process.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ramasamy at cancer.org.uk  Fri Oct  1 15:17:25 2004
From: ramasamy at cancer.org.uk (Adaikalavan Ramasamy)
Date: Fri Oct  1 15:16:23 2004
Subject: [Rd] same test statistic for t-test with and without equal
	variance assumption
In-Reply-To: <1096635412.3412.10.camel@ndmpc126.ihs.ox.ac.uk>
References: <1096627733.3352.10.camel@ndmpc126.ihs.ox.ac.uk>
	<x2brfm666d.fsf@biostat.ku.dk>
	<1096635412.3412.10.camel@ndmpc126.ihs.ox.ac.uk>
Message-ID: <1096636645.3441.1.camel@ndmpc126.ihs.ox.ac.uk>

Apologies, I made an incorrect statement. The statistics from t-test
with difference variance assumptions are the same if both groups have
the same length. Sorry for troubling everyone again.


On Fri, 2004-10-01 at 13:56, Adaikalavan Ramasamy wrote:
> Peter, thank you! I forgot the to square root in calculating sp.
> 
> sp <- sqrt( ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2) )
> 
> For several simulation runs, the test statistics from both tests are
> remarkably similar (difference is less than 10e-16). I naively assumed
> that the statistics value should be slightly but visibly different too. 
> 
> It appear that the effects of equal and unequal variance assumptions are
> only felt through the degrees of freedom calculation. 
> 
> Regards, Adai
> 
> 
> On Fri, 2004-10-01 at 12:15, Peter Dalgaard wrote:
> > Adaikalavan Ramasamy <ramasamy@cancer.org.uk> writes:
> > 
> > > Could some kindly tell me if I am supposed to be getting the same test
> > > statistic value with var.equal=TRUE and var.equal=FALSE in t.test ?
> > > 
> > > set.seed(1066)
> > > x1 <- rnorm(50)
> > > x2 <- rnorm(50)
> > > 
> > > t.test(x1, x2, var.equal=FALSE)$statistic # 0.5989774
> > > t.test(x1, x2, var.equal=TRUE)$statistic  # 0.5989774 ???
> > > 
> > > 
> > > Here are my own calculations that shows that perhaps the result when
> > > var.equal=TRUE is wrong.
> > > 
> > > n1 <- length(x1); n2 <- length(x2)
> > > m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
> > > v1 <- var(x1)   ; v2 <- var(x2)
> > > 
> > > # t-test with UNequal variance
> > > denom1 <- sqrt( v1/n1 + v2/n2 )
> > > num / denom1   # gives 0.5989774
> > > 
> > > # t-test with equal variance 
> > > sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> > > denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> > > num / denom2   # gives 0.5913777
> > > 
> > > 
> > > I tested this using R-1.9.1 (21/06/2004) on Redhat Fedora Core 2 and
> > > Windows 2000 Professional with the same results.
> > > 
> > > Any suggestions would be kindly appreciated.
> > 
> > Your calculation is wrong. Try increasing the variance of x1 and x2...
> > 
> > > set.seed(1066)
> > > x1 <- rnorm(50,,100)
> > > x2 <- rnorm(50,,100)
> > > m1 <- mean(x1)  ; m2 <- mean(x2)  ; num   <- (m1 - m2)
> > >  v1 <- var(x1)   ; v2 <- var(x2)
> > > denom1 <- sqrt( v1/n1 + v2/n2 )
> > > num / denom1   # gives 0.5989774
> > [1] 0.5989774
> > >  sp <- ( (n1-1)*v1 + (n2-1)*v2 )/(n1 + n2 - 2)
> > > denom2 <- sp * sqrt( 1/n1 + 1/n2 )
> > > num / denom2   # gives 0.5913777
> > [1] 0.005913777
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From hoffman+R at ebi.ac.uk  Fri Oct  1 15:24:09 2004
From: hoffman+R at ebi.ac.uk (Michael Hoffman)
Date: Fri Oct  1 15:24:18 2004
Subject: (PR#7257) Re: [Rd] bzip2 directory won't build on OSF1 due to
	C99 code and -std1 option
In-Reply-To: <Pine.LNX.4.44.0410011346020.15997-100000@gannet.stats>
References: <Pine.LNX.4.44.0410011346020.15997-100000@gannet.stats>
Message-ID: <Pine.LNX.4.61.0410011400240.31942@qnzvnan.rov.np.hx>

On Fri, 1 Oct 2004, Prof Brian Ripley wrote:

> What `C99 code' is that?

Specifically it uses the inline keyword. I do not believe that is
supported by a strict C89 compiler.

> Please don't expect us to guess what you have in mind, for we
> haven't a clue.

Please accept my apologies for an inadequate bug report. This might
make things easier to understand:

mh5@ecs4d /ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2
$ make
making blocksort.d from blocksort.c
making bzlib.d from bzlib.c
making compress.d from compress.c
making crctable.d from crctable.c
making decompress.d from decompress.c
making huffman.d from huffman.c
making randtable.d from randtable.c
gmake[1]: Entering directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
gmake[1]: `Makedeps' is up to date.
gmake[1]: Leaving directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
gmake[1]: Entering directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
cc -I. -I. -I../../../src/include -I../../../src/include -I/usr/local/include -DHAVE_CONFIG_H -std1 -ieee_with_inexact  -fast -arch ev6 -c blocksort.c -o blocksort.o
cc: Error: blocksort.c, line 79: Missing ";". (nosemi)
void fallbackSimpleSort ( UInt32* fmap,
^
cc: Info: blocksort.c, line 78: "inline" is a keyword in the C99 revision of the C standard.  Using it as an identifier will prevent your program from conforming to that standard. (futurekeywd2)
R_INLINE
^
cc: Error: blocksort.c, line 395: Missing ";". (nosemi)
Bool BZmainGtU ( UInt32  i1,
^
cc: Error: blocksort.c, line 631: Missing ";". (nosemi)
UChar mmed3 ( UChar a, UChar b, UChar c )
^
gmake[1]: *** [blocksort.o] Error 1
gmake[1]: Leaving directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
gmake: *** [R] Error 2

Configure output at the end of the message.

> AFAIK, R's configure does not know about OSF1 v5.x, so it is quite likely
> that the assumptions (which are inside
>
> case "${host_cpu}" in
>  alpha*)
>
> ) are wrong for that untested platform.  The code in the bzip2 directory
> has not been changed for a very long time, except for possibly allowing
> inlining (and for which there is a configure test).

Well I'm not going to posit any hypotheses or note that inlining won't
work on this platform if the -std1 option is uesd. ;-)

> Note that feedback 3 days before release is too late for
> configuration changes to be made.

I'll just have to live with that :-)
-- 
Michael Hoffman <hoffman@ebi.ac.uk>
European Bioinformatics Institute

====
Output of configure --prefix=$HOME/arch/$ARCH/opt/R > configure.out 2>&1

checking for a BSD-compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets $(MAKE)... yes
checking for working aclocal-1.4... missing
checking for working autoconf... found
checking for working automake-1.4... missing
checking for working autoheader... found
checking for working makeinfo... missing
checking build system type... alphaev68-dec-osf5.1b
checking host system type... alphaev68-dec-osf5.1b
loading site script './config.site'
loading build specific script './config.site'
checking for pwd... /usr/bin/pwd
checking whether builddir is srcdir... yes
checking for gawk... nawk
checking for egrep... grep -E
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... bison -y
checking for ar... ar
checking for javac... /nfs/acari/mh5/bin/javac
checking for sed... /usr/bin/sed
checking for less... /usr/local/bin/less
checking for perl... /usr/local/ensembl/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... no
checking for tex... no
checking for latex... no
configure: WARNING: you cannot build DVI versions of the R manuals
checking for makeindex... no
checking for pdftex... no
checking for pdflatex... no
configure: WARNING: you cannot build PDF versions of the R manuals
checking for /ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/tools/missing... no
checking for makeinfo... no
checking for makeinfo... no
checking for unzip... /usr/local/bin/unzip
checking for zip... /usr/local/bin/zip
checking for gzip... /usr/bin/gzip
checking for netscape... /usr/local/bin/netscape
using default browser ... /usr/local/bin/netscape
checking for acroread... /usr/local/bin/acroread
checking for gcc... cc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ANSI C... none needed
checking how to run the C preprocessor... cc -E
checking how to run the C preprocessor... cc -E
defining F77 to be f77
checking whether we are using the GNU Fortran 77 compiler... no
checking whether f77 accepts -g... yes
checking whether we are using the GNU C++ compiler... no
checking whether cxx accepts -g... yes
checking how to run the C++ preprocessor... cxx -E
checking for a sed that does not truncate output... /usr/bin/sed
checking for non-GNU ld... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... no
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/local/bin/nm -B
checking how to recognise dependent libraries... pass_all
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... no
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking the maximum length of command line arguments... 16384
checking command to parse /usr/local/bin/nm -B output from cc object... ok
checking for objdir... .libs
checking for ranlib... (cached) ranlib
checking for strip... strip
checking if cc static flag  works... yes
checking for cc option to produce PIC... 
checking if cc supports -c -o file.o... yes
checking whether the cc linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... osf5.1b ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating libtool
appending configuration tag "CXX" to libtool
checking whether the cxx linker (/usr/bin/ld) supports shared libraries... yes
checking for cxx option to produce PIC... 
checking if cxx supports -c -o file.o... yes
checking whether the cxx linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... osf5.1b ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for f77 option to produce PIC... 
checking if f77 supports -c -o file.o... yes
checking whether the f77 linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... osf5.1b ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
configure: WARNING: you cannot build info versions of the R manuals
checking for cos in -lm... yes
checking for sin in -lm... yes
checking for main in -lncurses... yes
checking for dlopen in -ldl... no
checking for rl_callback_read_char in -lreadline... yes
checking for ANSI C header files... (cached) yes
checking whether time.h and sys/time.h may both be included... yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for sys/wait.h that is POSIX.1 compatible... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking dl.h usability... no
checking dl.h presence... no
checking for dl.h... no
checking for dlfcn.h... (cached) yes
checking elf.h usability... no
checking elf.h presence... no
checking for elf.h... no
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking floatingpoint.h usability... no
checking floatingpoint.h presence... no
checking for floatingpoint.h... no
checking fpu_control.h usability... no
checking fpu_control.h presence... no
checking for fpu_control.h... no
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking ieee754.h usability... no
checking ieee754.h presence... no
checking for ieee754.h... no
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking readline/history.h usability... yes
checking readline/history.h presence... yes
checking for readline/history.h... yes
checking readline/readline.h usability... yes
checking readline/readline.h presence... yes
checking for readline/readline.h... yes
checking for strings.h... (cached) yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking for sys/stat.h... (cached) yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking for unistd.h... (cached) yes
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking for string.h... (cached) yes
checking whether setjmp.h is POSIX.1 compatible... yes
checking for GNU C library with version >= 2... no
checking return type of signal handlers... void
checking for pid_t... yes
checking for size_t... yes
checking whether SIZE_MAX is declared... no
checking for blkcnt_t... no
checking for type of socket length... size_t *
checking whether byte ordering is bigendian... no
checking for an ANSI C-conforming const... yes
checking for inline... inline
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 8
checking for long long... yes
checking size of long long... 8
checking for long double... yes
checking size of long double... 16
checking whether we can compute C Make dependencies... yes, using cpp -M
checking whether cc supports -c -o FILE.lo... yes
checking how to get verbose linking output from f77... -v
checking for Fortran libraries of f77...  -L/usr/local/lib -lUfor -lfor -lFutil -lm -lots -lm_c32 -lmld -lexc
checking for dummy main to link with Fortran libraries... none
checking for Fortran name-mangling scheme... lower case, underscore, no extra underscore
checking whether f77 appends underscores to external names... yes
checking whether mixed C/Fortran code can be run... yes
checking whether f77 and cc agree on int and double... yes
checking whether f77 and cc agree on double complex... yes
checking whether f77 supports -c -o FILE.lo... yes
checking whether cxx accepts -M for generating dependencies... yes
checking whether cxx supports -c -o FILE.lo... yes
checking whether cc accepts -std1... yes
checking whether cc accepts -ieee_with_inexact... yes
checking whether f77 accepts -fpe3... yes
checking whether cxx accepts -ieee... yes
checking for xmkmf... /usr/bin/X11/xmkmf
configure: WARNING: I could not determine SHLIB_CXXLDFLAGS
checking for off_t... yes
checking for working alloca.h... yes
checking for alloca... yes
checking for access... yes
checking for chdir... yes
checking for expm1... yes
checking for fcntl... yes
checking for finite... yes
checking for fseeko... yes
checking for ftello... yes
checking for ftruncate... yes
checking for getcwd... yes
checking for getgrgid... yes
checking for getpwuid... yes
checking for getuid... yes
checking for hypot... yes
checking for isascii... yes
checking for log1p... yes
checking for matherr... no
checking for mkfifo... yes
checking for popen... yes
checking for putenv... yes
checking for rint... yes
checking for setenv... yes
checking for strcoll... yes
checking for stat... yes
checking for strptime... yes
checking for symlink... yes
checking for system... yes
checking for times... yes
checking for unsetenv... yes
checking whether isfinite is declared... no
checking whether isnan is declared... yes
checking for finite... (cached) yes
checking for isnan... yes
checking whether isfinite is declared... (cached) no
checking whether isnan is declared... (cached) yes
checking whether you have IEEE 754 floating-point arithmetic... yes
checking for nl_langinfo and CODESET... yes
checking for KeySym... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for snprintf... yes
checking for strdup... yes
checking for strncasecmp... yes
checking for vsnprintf... yes
checking whether acosh is declared... yes
checking whether asinh is declared... yes
checking whether atanh is declared... yes
checking whether snprintf is declared... yes
checking whether strdup is declared... yes
checking whether strncasecmp is declared... yes
checking whether vsnprintf is declared... yes
checking for library containing connect... none required
checking for library containing gethostbyname... none required
checking for library containing xdr_string... none required
checking for __setfpucw... no
checking for working calloc... no
checking for working finite... no
checking for working log... no
checking for working log1p... yes
checking for working strptime... yes
checking whether ftell works correctly on files opened for append... yes
checking for sgemm_... no
checking for ATL_xerbla in -latlas... no
checking for sgemm_ in -lblas... no
checking for sgemm_ in -lsunperf... no
checking for sgemm_ in -lblas... (cached) no
checking for sgemm_ in -lblas... (cached) no
checking for X... libraries , headers 
checking for gethostbyname... yes
checking for connect... yes
checking for remove... yes
checking for shmat... yes
checking for IceConnectionNumber in -lICE... yes
checking for tclConfig.sh... no
checking for tclConfig.sh in library (sub)directories... /usr/local/lib/tclConfig.sh
checking for tkConfig.sh... no
checking for tkConfig.sh in library (sub)directories... no
checking /usr/local/include/tcl8.4/generic/tcl.h usability... no
checking /usr/local/include/tcl8.4/generic/tcl.h presence... no
checking for /usr/local/include/tcl8.4/generic/tcl.h... no
checking /usr/local/include/tcl8.4/tcl.h usability... no
checking /usr/local/include/tcl8.4/tcl.h presence... no
checking for /usr/local/include/tcl8.4/tcl.h... no
checking /usr/local/include/tcl.h usability... yes
checking /usr/local/include/tcl.h presence... yes
checking for /usr/local/include/tcl.h... yes
checking for tk.h... yes
checking for BSD networking... yes
checking if jpeglib version >= 6b... yes
checking for jpeg_destroy_compress in -ljpeg... yes
checking for main in -lz... yes
checking if libpng version >= 1.0.5... yes
checking for png_create_write_struct in -lpng... yes
checking rpc/types.h usability... yes
checking rpc/types.h presence... yes
checking for rpc/types.h... yes
checking for rpc/xdr.h... yes
checking for XDR support... yes
checking whether zlib support needs to be compiled... yes
checking mmap support for zlib... yes
checking whether bzip2 support needs to be compiled... yes
checking whether PCRE support needs to be compiled... yes
checking whether leap seconds are treated according to POSIX... yes
checking for setitimer... yes
checking for lpr... lpr
checking for paperconf... false
checking for recommended packages... yes
configure: creating ./config.status
config.status: creating Makeconf
config.status: creating Makefile
config.status: creating afm/Makefile
config.status: creating doc/Makefile
config.status: creating doc/html/Makefile
config.status: creating doc/html/search/Makefile
config.status: creating doc/manual/Makefile
config.status: creating etc/Makefile
config.status: creating etc/Makeconf
config.status: creating etc/Renviron
config.status: creating m4/Makefile
config.status: creating share/Makefile
config.status: creating src/Makefile
config.status: creating src/appl/Makefile
config.status: creating src/extra/Makefile
config.status: creating src/extra/bzip2/Makefile
config.status: creating src/extra/pcre/Makefile
config.status: creating src/extra/xdr/Makefile
config.status: creating src/extra/zlib/Makefile
config.status: creating src/include/Makefile
config.status: creating src/include/Rmath.h0
config.status: creating src/include/R_ext/Makefile
config.status: creating src/library/Recommended/Makefile
config.status: creating src/library/Makefile
config.status: creating src/library/base/DESCRIPTION
config.status: creating src/library/base/Makefile
config.status: creating src/library/datasets/DESCRIPTION
config.status: creating src/library/datasets/Makefile
config.status: creating src/library/graphics/DESCRIPTION
config.status: creating src/library/graphics/Makefile
config.status: creating src/library/grDevices/DESCRIPTION
config.status: creating src/library/grDevices/Makefile
config.status: creating src/library/grid/DESCRIPTION
config.status: creating src/library/grid/Makefile
config.status: creating src/library/grid/src/Makefile
config.status: creating src/library/methods/DESCRIPTION
config.status: creating src/library/methods/Makefile
config.status: creating src/library/methods/src/Makefile
config.status: creating src/library/profile/Makefile
config.status: creating src/library/stats/DESCRIPTION
config.status: creating src/library/stats/Makefile
config.status: creating src/library/stats/src/Makefile
config.status: creating src/library/stats4/DESCRIPTION
config.status: creating src/library/stats4/Makefile
config.status: creating src/library/splines/DESCRIPTION
config.status: creating src/library/splines/Makefile
config.status: creating src/library/splines/src/Makefile
config.status: creating src/library/tcltk/DESCRIPTION
config.status: creating src/library/tcltk/Makefile
config.status: creating src/library/tcltk/src/Makefile
config.status: creating src/library/tools/DESCRIPTION
config.status: creating src/library/tools/Makefile
config.status: creating src/library/tools/src/Makefile
config.status: creating src/library/utils/DESCRIPTION
config.status: creating src/library/utils/Makefile
config.status: creating src/main/Makefile
config.status: creating src/modules/Makefile
config.status: creating src/modules/X11/Makefile
config.status: creating src/modules/aqua/Makefile
config.status: creating src/modules/aqua/Info.plist
config.status: creating src/modules/aqua/Contents/Info.plist
config.status: creating src/modules/gnome/Makefile
config.status: creating src/modules/internet/Makefile
config.status: creating src/modules/lapack/Makefile
config.status: creating src/modules/vfonts/Makefile
config.status: creating src/nmath/Makefile
config.status: creating src/nmath/standalone/Makefile
config.status: creating src/scripts/Makefile
config.status: creating src/scripts/COMPILE
config.status: creating src/scripts/INSTALL
config.status: creating src/scripts/REMOVE
config.status: creating src/scripts/R.sh
config.status: creating src/scripts/Rdconv
config.status: creating src/scripts/Rprof
config.status: creating src/scripts/SHLIB
config.status: creating src/scripts/Sd2Rd
config.status: creating src/scripts/build
config.status: creating src/scripts/check
config.status: creating src/scripts/f77
config.status: creating src/unix/Makefile
config.status: creating tests/Makefile
config.status: creating tests/Embedding/Makefile
config.status: creating tests/Examples/Makefile
config.status: creating tests/Native/Makefile
config.status: creating tools/Makefile
config.status: creating src/include/config.h
config.status: src/include/config.h is unchanged
config.status: executing stamp-h commands

R is now configured for alphaev68-dec-osf5.1b

   Source directory:          .
   Installation directory:    /nfs/acari/mh5/arch/OSF1/opt/R

   C compiler:                cc -std1 -ieee_with_inexact -fast -arch ev6
   C++ compiler:              cxx -ieee -g
   Fortran compiler:          f77 -fpe3 -g

   Interfaces supported:      X11
   External libraries:        readline
   Additional capabilities:   PNG, JPEG
   Options enabled:           R profiling

   Recommended packages:      yes

configure: WARNING: I could not determine SHLIB_CXXLDFLAGS
configure: WARNING: you cannot build DVI versions of the R manuals
configure: WARNING: you cannot build info versions of the R manuals
configure: WARNING: you cannot build PDF versions of the R manuals

From ripley at stats.ox.ac.uk  Fri Oct  1 15:32:08 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  1 15:32:13 2004
Subject: (PR#7257) Re: [Rd] bzip2 directory won't build on OSF1 due to
	C99 code and -std1 option
In-Reply-To: <Pine.LNX.4.61.0410011400240.31942@qnzvnan.rov.np.hx>
Message-ID: <Pine.LNX.4.44.0410011426410.24383-100000@gannet.stats>

I believe this occurs because the configure test for `inline' is not using
the R_XTRA_CFLAGS, which is a pervasive design problem (we have noted it
occurs with PIC flags as well).  If you set -std1 in CFLAGS then it should 
be used in the configure test which should conclude `inline' is not 
allowed.

[I use CFLAGS for making my test compilers as picky as possible.]

On Fri, 1 Oct 2004, Michael Hoffman wrote:

> On Fri, 1 Oct 2004, Prof Brian Ripley wrote:
> 
> > What `C99 code' is that?
> 
> Specifically it uses the inline keyword. I do not believe that is
> supported by a strict C89 compiler.
> 
> > Please don't expect us to guess what you have in mind, for we
> > haven't a clue.
> 
> Please accept my apologies for an inadequate bug report. This might
> make things easier to understand:
> 
> mh5@ecs4d /ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2
> $ make
> making blocksort.d from blocksort.c
> making bzlib.d from bzlib.c
> making compress.d from compress.c
> making crctable.d from crctable.c
> making decompress.d from decompress.c
> making huffman.d from huffman.c
> making randtable.d from randtable.c
> gmake[1]: Entering directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
> gmake[1]: `Makedeps' is up to date.
> gmake[1]: Leaving directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
> gmake[1]: Entering directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
> cc -I. -I. -I../../../src/include -I../../../src/include -I/usr/local/include -DHAVE_CONFIG_H -std1 -ieee_with_inexact  -fast -arch ev6 -c blocksort.c -o blocksort.o
> cc: Error: blocksort.c, line 79: Missing ";". (nosemi)
> void fallbackSimpleSort ( UInt32* fmap,
> ^
> cc: Info: blocksort.c, line 78: "inline" is a keyword in the C99 revision of the C standard.  Using it as an identifier will prevent your program from conforming to that standard. (futurekeywd2)
> R_INLINE
> ^
> cc: Error: blocksort.c, line 395: Missing ";". (nosemi)
> Bool BZmainGtU ( UInt32  i1,
> ^
> cc: Error: blocksort.c, line 631: Missing ";". (nosemi)
> UChar mmed3 ( UChar a, UChar b, UChar c )
> ^
> gmake[1]: *** [blocksort.o] Error 1
> gmake[1]: Leaving directory `/ecs4/scratch2/ensembl/mh5/sandbox/R-2.0.0/src/extra/bzip2'
> gmake: *** [R] Error 2
> 
> Configure output at the end of the message.
> 
> > AFAIK, R's configure does not know about OSF1 v5.x, so it is quite likely
> > that the assumptions (which are inside
> >
> > case "${host_cpu}" in
> >  alpha*)
> >
> > ) are wrong for that untested platform.  The code in the bzip2 directory
> > has not been changed for a very long time, except for possibly allowing
> > inlining (and for which there is a configure test).
> 
> Well I'm not going to posit any hypotheses or note that inlining won't
> work on this platform if the -std1 option is uesd. ;-)
> 
> > Note that feedback 3 days before release is too late for
> > configuration changes to be made.
> 
> I'll just have to live with that :-)
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hoffman+R at ebi.ac.uk  Fri Oct  1 15:49:29 2004
From: hoffman+R at ebi.ac.uk (Michael Hoffman)
Date: Fri Oct  1 15:49:36 2004
Subject: (PR#7257) Re: [Rd] bzip2 directory won't build on OSF1 due to
	C99 code and -std1 option
In-Reply-To: <Pine.LNX.4.44.0410011426410.24383-100000@gannet.stats>
References: <Pine.LNX.4.44.0410011426410.24383-100000@gannet.stats>
Message-ID: <Pine.LNX.4.61.0410011446020.31942@qnzvnan.rov.np.hx>

> If you set -std1 in CFLAGS then it should be used in the configure
> test which should conclude `inline' is not allowed.

OK, I will do as you suggest. I should note that cc (version info
below) does support inline although not with -std1 so I'd prefer to
have any performance benefits of inline, if possible.
-- 
Michael Hoffman <hoffman@ebi.ac.uk>
European Bioinformatics Institute

Compaq C V6.5-011 on Compaq Tru64 UNIX V5.1B (Rev. 2650)
Compiler Driver V6.5-003 (sys) cc Driver

From ripley at stats.ox.ac.uk  Fri Oct  1 15:55:57 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  1 15:56:13 2004
Subject: [Rd] (PR#7254)Documentation: Reference Index (.pdf) -- setOldClass
In-Reply-To: <18D602BD42B7E24EB810D6454A58DB900A29BB7D@ibfftce505.de.ad.drkw.net>
Message-ID: <Pine.LNX.4.44.0410011453320.1964-100000@gannet.stats>

Have you looked at the 2.0.0 beta version?

It is hard for us to know what you are looking at, but I believe this was 
fixed a while ago (but post 1.9.1).  Better PDF cross-refs is one of the 
changes in 2.0.0-to-be.

On Thu, 30 Sep 2004, Pfaff, Bernhard wrote:

> Apologies for cross postings or manual work caused by resending; the
> intially sent bug report through the web-interface bounced, however.
> 
> 
> Full_Name: Bernhard Pfaff
> Version: 1.9.1
> OS: Windows NT
> Submission from: (NULL) (193.194.7.77)
> 
> 
> Dear core team members / maintainers,
> 
> in the pdf version of the reference index I observed two entries of
> "setOldClass" in the bookmark section of Adobe Acrobat Reader. Furthermore,
> the
> second bookmark entry points to **4.1 setOldClass** which is type setted out
> of
> the context.
> This ill-typesetting does however not occur in the html-versions; I have
> checked
> my locally one installed version (i.e. help.start()), as well as the R-devel
> version at: 
> http://stat.ethz.ch/R-manual/R-devel/library/methods/html/00Index.html
> 
> I have also checked the submitted bug reports in the documentation section
> and
> it seemed that this one has not been detected by now.
> 
> Best,
> Bernhard
> 
> 
> 
> --------------------------------------------------------------------------------
> The information contained herein is confidential and is inte...{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From murdoch at stats.uwo.ca  Fri Oct  1 16:35:46 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri Oct  1 16:35:51 2004
Subject: [Rd] Re: [R] R-2.0: roadmap? release statements? plans?
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF84A2@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF84A2@usrymx25.merck.com>
Message-ID: <n7qql0tr74b3q7r9thm6a0jgn0bsjltth8@4ax.com>

(Moved from r-help to r-devel)

On Fri, 1 Oct 2004 10:00:05 -0400, "Liaw, Andy" <andy_liaw@merck.com>
wrote :

>Just to keep Valery from thinking that that web page can not be easily
>found:  Go to www.r-project.org and click on `Developer Page' under the
>heading `R Project'.  
>
>A suggestion (for CRAN masters?):  On CRAN there is a link to the NEWS file
>for the released version.  Maybe it's a good idea to provide one for
>alpha/beta version (when available) as well?  The Windows-specific NEWS is
>provided for the alpha/beta.

Both the general NEWS file and the windows-specific CHANGES file are
online at <http://cran.r-project.org/bin/windows/base/rdevel.html>.
The main problem with that file is that it is the version that was
current at the time of the Windows binary build, not necessarily the
same as the current source file.

To get the very most current one, you want to go to the Subversion
archive,

https://svn.r-project.org/R/trunk/NEWS  (For major release changes,
e.g. 2.0.0 for now, 2.1.0 after Monday, etc.)

https://svn.r-project.org/R/branches/R-1-9-patches/NEWS (For the
current patches; change to "-2-0-" on Monday.)

I think the reason these links aren't given on the developer page is
that the Subversion archive is relatively new, and we weren't sure
that it could handle the load of being a public resource.  Could that
change now?

Duncan Murdoch

From Bernhard.Pfaff at drkw.com  Fri Oct  1 17:00:52 2004
From: Bernhard.Pfaff at drkw.com (Pfaff, Bernhard)
Date: Fri Oct  1 17:00:57 2004
Subject: [Rd] (PR#7254)Documentation: Reference Index (.pdf) -- setOld
	Class
Message-ID: <18D602BD42B7E24EB810D6454A58DB900A29BB84@ibfftce505.de.ad.drkw.net>

Dear Prof. Ripley,

thks for your response and no, I have not looked at 2.0.0 beta version;
blame on me, but I could not spare time by now for doing so; instead I
looked at:

http://cran.r-project.org/doc/manuals/fullrefman.pdf

as well as on my local one in: 'rw1091/doc/manual/refman.pdf'.
Hopefully this clarified things; thks for taking your time and patience. 

Best,
Bernhard 

> 
> 
> Have you looked at the 2.0.0 beta version?
> 
> It is hard for us to know what you are looking at, but I 
> believe this was 
> fixed a while ago (but post 1.9.1).  Better PDF cross-refs is 
> one of the 
> changes in 2.0.0-to-be.
> 
> On Thu, 30 Sep 2004, Pfaff, Bernhard wrote:
> 
> > Apologies for cross postings or manual work caused by resending; the
> > intially sent bug report through the web-interface bounced, however.
> > 
> > 
> > Full_Name: Bernhard Pfaff
> > Version: 1.9.1
> > OS: Windows NT
> > Submission from: (NULL) (193.194.7.77)
> > 
> > 
> > Dear core team members / maintainers,
> > 
> > in the pdf version of the reference index I observed two entries of
> > "setOldClass" in the bookmark section of Adobe Acrobat 
> Reader. Furthermore,
> > the
> > second bookmark entry points to **4.1 setOldClass** which 
> is type setted out
> > of
> > the context.
> > This ill-typesetting does however not occur in the 
> html-versions; I have
> > checked
> > my locally one installed version (i.e. help.start()), as 
> well as the R-devel
> > version at: 
> > 
> http://stat.ethz.ch/R-manual/R-devel/library/methods/html/00Index.html
> > 
> > I have also checked the submitted bug reports in the 
> documentation section
> > and
> > it seemed that this one has not been detected by now.
> > 
> > Best,
> > Bernhard
> > 
> > 
> > 
> > 
> --------------------------------------------------------------
> ------------------
> > The information contained herein is confidential and is 
> inte...{{dropped}}
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


--------------------------------------------------------------------------------
The information contained herein is confidential and is inte...{{dropped}}

From jmc at research.bell-labs.com  Fri Oct  1 22:29:51 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Fri Oct  1 22:30:15 2004
Subject: [Rd] Problem with _new_ if class "lm" in object representatio n.
References: <18D602BD42B7E24EB810D6454A58DB900A29BB79@ibfftce505.de.ad.drkw.net>
	<415BFD9F.2080101@molgen.mpg.de>
	<6.0.1.1.2.20040930145247.01faaec0@stat4ux.stat.ucl.ac.be>
Message-ID: <415DBE3F.D3DA3FB7@research.bell-labs.com>

Eric Lecoutre wrote:
> 
> Hi,
> 
> For your lm problem, you could begin to create a virtual class that accepts
> either NULL or a lm object:
> 
>  > setClassUnion("mylm", c("NULL","lm"))
>  > setClass("foo", representation(x="numeric", y="mylm"))
>  > new("foo",x=1,y=NULL)
> 
> Then, you have to check the content of slot y in any function that will
> manipulate objects of class "foo":
> 
>          setMethod("show","foo",function(object)
>          {
>          cat("\n object of class foo")
>          if (!is.null(object@y)) cat(" does have a lm object in slot y!")
>          })

This is OK, but it illustrates why it would _not_ be a good idea to
allow NULL values automatically for an arbitrary class.  The
implementation here says that the "y" slot can be either a NULL or an
"lm" object.  That is a different statement from saying that "y" must be
an "lm" object.

Either approach could make sense.  But what one really wants (in any
definiton of a new class) is to match the actual definition to the
intended meaning.

With your suggestion, the designer of class "foo" is basically passing
on to the implenters of methods the responsibility to check for a NULL
"y" slot.  If it makes sense for legitimate "foo" objects to exist that
have a NULL "y" slot, then that extra work is part of the design of the
"foo" class.  Your definition of the class essentially says that the
"lm" model is an optional part of the object.

But if in fact it _only_ makes sense for the object to have a true
model, then one should not define a class that conflicts with the
intended meaning.   There was no indication in the initial question that
NULL made sense.  If we're just introducing the NULL possibility as a
programming hack, that's not really a good idea.

The other approach is to insist that the computations creating a "foo"
object generate a valid "lm" object, if the user didn't supply one. 
Then methods for "foo" objects are not required to check.  One way to
make the stricter approach work would be to have a method for
initialize() for class "foo" that generated a model from the other slots
in the object.

For example, the class might represent "x" and "y" data, and a model
that by default was the linear model for y~x.  Something like the
following would implement that idea:

setClass("withLm", representation(x="numeric", y="numeric", model =
"lm"))

setMethod("initialize", "withLm",
          function(.Object, x = numeric(), y = numeric(), model = NULL)
{
              if(is.null(model))
                  model <- lm(y ~ x)
              callNextMethod(.Object, x=x, y=y, model=model)
          }
          )



(unfortunately, lm() does not allow fitting vectors of length 0, so if
this were a real example there are a few boundary cases to consider ;-)


> 
> Eric
> 
> At 14:35 30/09/2004, Witold Eryk Wolski wrote:
> >Hi,
> >
> >But "any" rises some other problems well known from S3. One has "any" for
> >"free" in S3. You don't need S4. . But I know how "if" polluted
> >functions  look like in S3. They are hard to understand and  to maintain.
> >Hence I am quite happy to use S4.
> >Type-checking is usefull if you program with data. Also if you are on the
> >"C side" of the object. A further problem which I have with "any" is, that
> >lm="any" in setClass tells you exactly ANYthing (and you are back in S3).
> >And thats not what I like.*
> >Hence, I do not want to use any in this case.
> >
> >I think that allowing to assing NULL to a slot will solve some problems
> >which I have with S4 so far.
> >
> >a) How to express that an a slot content was not assigned so far? J.C.
> >suggest to use character(0), lm(1~1) etc. The problem I have with
> >insterting lm(1~1) in slot mod in my class Ctest are that I have 100000
> >instances of object Ctest. At initialization everyone contains an object
> >lm(1~1). But please  note the following.
> >
> > > x<-lm(1~1)
> > > object.size(x)
> >[1] 6388
> > > object.size(NULL)
> >[1] 0
> >
> >Unfortunately S4 do not have references. Hence, I can not store a
> >reference to a single instance of lm(1~1) .
> >
> >Exactly the same problems I have if I want to "delete" an object. For
> >example you like to have a slot  which stores some data which is important
> >if the object is in one state. But if the state of the object changes you
> >do not need that data anymore. Hence, you would like to delete it to get
> >storage.  You can only do it if you have like you suggest "any", but the
> >consequence is "if" polluted code, or using slot(obj,"mod",check=FALSE)<- NULL.
> >
> >But the documentation for slot states.
> >check: " You should never set this to 'FALSE' in normal
> >          use, since the result can create invalid objects. "
> >
> >
> >b) The Problem which I have writing intitialization functions like
> >suggested by J.C  is:  Imagine you have an object with twenty slots. You
> >have to write and initialize function with approximately 20 "if"'s. One of
> >the contribution of S4, as mentioned above, is to help you to avoid
> >writing such "if" polluted functions. But as I sometimes forget any role
> >has it's exceptions. So I can live with one function looking ugly in S4
> >instead of having all functions "if" polluted like in case of S3.  The
> >only consequence so far is that I try to avoid to write initialize
> >functions. I do it only in some rare very special cases.
> >
> >The NULL exception in slot assignement will allow me object initialization
> >using just "new" without providing a "if" polluted function initialize.
> >
> > > setClass("bar")
> >[1] "bar"
> > > setClass("foo", representation(x="numeric", y="bar"))
> >[1] "foo"
> > > new("foo", x=1)
> >Error in validObject(.Object) : Invalid "foo" object: Invalid object for
> >slot "y" in class "foo": got class "NULL", should be or extend class "bar"
> > >
> >
> >
> >Are there S4 inherent solutions to this questions?
> >
> >
> >Yours.
> >/E
> >
> >*(I would rather compare "any" to the Object class then to null in java.
> >It has a different function.)
> >
> >Pfaff, Bernhard wrote:
> >
> >>>Hi,
> >>>
> >>>Thanks a lot for pointing me to setOldClass().
> >>>
> >>>What is exactly the point against it, to allow NULL to be a special case
> >>>which can be assigned to any slot? I think in java one can assing null
> >>>to any slot (I do not like java but not because of that).
> >>>I am asking because for some objects it may be hard to define something
> >>>equivalent to numeric(0). And even lm(1~1) is not that what I am looking
> >>>for. I would like to have the case
> >>>of an unassigned slot (Just think about storage?) even to the expense
> >>>checking every time if the slot is not null.
> >>>
> >>
> >>
> >>Hello Eryk,
> >>
> >>how about "ANY" and checking where suitable/needed if the passed object for
> >>"mod" is of class "lm" at a later stage in your code, like in:
> >>
> >>setClass("Ctest"
> >>         ,representation(
> >>                 test="character"
> >>                 ,bla="character"
> >>                 ,mod="ANY"              )
> >>         )
> >>
> >>test1 <- new("Ctest",mod=lm(1~1))
> >>is(test1@mod, "lm")
> >>
> >>test2 <- new("Ctest",test="bla")
> >>is(test2@mod, "lm")
> >>
> >>test3 <- new("Ctest",bla="brum")
> >>is(test3@mod, "lm")
> >>
> >>test4 <- new("Ctest",test="bla",bla="brum")
> >>is(test4@mod, "lm")
> >>
> >> From there on you could use stop() or warning() or whatever you want to
> >>return to the user as information which class mod should belong to.
> >>
> >>HTH,
> >>Bernhard
> >>
> >
> >______________________________________________
> >R-devel@stat.math.ethz.ch mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> Eric Lecoutre
> UCL /  Institut de Statistique
> Voie du Roman Pays, 20
> 1348 Louvain-la-Neuve
> Belgium
> 
> tel: (+32)(0)10473050
> lecoutre@stat.ucl.ac.be
> http://www.stat.ucl.ac.be/ISpersonnel/lecoutre
> 
> If the statistics are boring, then you've got the wrong numbers. -Edward
> Tufte
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From garvin at rice.edu  Sat Oct  2 03:08:21 2004
From: garvin at rice.edu (John Garvin)
Date: Sat Oct  2 03:08:26 2004
Subject: [Rd] RCC compatibility patch
Message-ID: <Pine.LNX.4.44.0410012003580.14043-100000@hpc3.cs.rice.edu>

Would you consider the following patch to eval.c to allow compatibility 
with RCC? (It's in the applyClosure function.)

@@ -432,6 +432,14 @@
      SEXP f, a, tmp;
      RCNTXT cntxt;

+#ifdef RCC
+    SEXP comp;
+    PROTECT(comp = getAttrib(op, install("RCC_CompiledSymbol")));
+    if (comp != R_NilValue)  /* compiled version exists */
+      op = comp;
+    UNPROTECT(1);
+#endif /* RCC */
+
      /* formals = list of formal parameters */
      /* actuals = values to be bound to formals */
      /* arglist = the tagged list of arguments */

RCC (http://hipersoft.cs.rice.edu/rcc/) is a static compiler for R we're
working on at Rice. It compiles R scripts into dynamic libraries that can
be loaded from within R using the dyn.load function.

This change enables compiled R code to be executed while retaining full
correctness; i.e., inspection and modification of closures generated by
RCC will work exactly as in interpreted R. This patch does not change
the existing implementation in the default build; when enabled, it should
not affect the evaluation of any R code except code compiled with RCC.

John

From ajms at mail.nih.gov  Sat Oct  2 18:08:24 2004
From: ajms at mail.nih.gov (Alexa Sorant)
Date: Sat Oct  2 18:11:52 2004
Subject: [Rd] Re: [R] installing on alpha (tru64)
In-Reply-To: <16727.46512.242252.90181@gargle.gargle.HOWL>
References: <6.0.2.0.2.20040920133126.028d6680@ces12.nih.gov>
	<16719.57615.794789.619756@gargle.gargle.HOWL>
	<6.0.2.0.2.20040921174236.02856f08@ces12.nih.gov>
	<16727.46512.242252.90181@gargle.gargle.HOWL>
Message-ID: <6.0.2.0.2.20040927141919.028a2958@ces12.nih.gov>

Dear Martin Maechler and/or R-devel,


>I'm reverting to R-devel.  Please *never* direct such topics to
>individuals unless they invite you particularly to it.

My original email was to a group list.  I later "replied" to email 
received.  I'm sorry if that was the wrong thing to do.


>I don't know for sure, but I doubt that it would be difficult to
>get a working GNU make on Tru64 .. though that may not be the
>important thing at the moment.

I have obtained and built the GNU make.  This gets me much farther along in 
the installation process.
That is, I no longer get the error message:
         Make:  cannot open /share/make/vars.mk.  Stop.

But now I get errors from "make check" and "make check FORCE=FORCE" with 
R-1.9.1 and earlier (from "make") with R-2.0.0 (today's version).

>We may need more details (e.g., output of 'configure' ; exact error message).

Attached are archives with output from the latest two trials, both using 
GNU make.

>Have you followed my advice below and installed into a different
>*build* directory ?
>Please reply to R-devel.

I tried, but that made no difference to my problem.  The attached R-1.9.1 
results are not from that trial, but the R-2.0.0 results were obtained this 
way.

I would appreciate any help you can provide.

Alexa

Alexa J. M. Sorant
NIH/NHGRI
333 Cassell Drive Suite 2000
Baltimore, MD 21224

ajms@mail.nih.gov

(410) 550-7512 voice
(410) 550-7513 fax  
From znmeb at aracnet.com  Sat Oct  2 18:44:19 2004
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Sat Oct  2 18:44:42 2004
Subject: [Rd] Re: [R] installing on alpha (tru64)
In-Reply-To: <6.0.2.0.2.20040927141919.028a2958@ces12.nih.gov>
References: <6.0.2.0.2.20040920133126.028d6680@ces12.nih.gov>
	<16719.57615.794789.619756@gargle.gargle.HOWL>
	<6.0.2.0.2.20040921174236.02856f08@ces12.nih.gov>
	<16727.46512.242252.90181@gargle.gargle.HOWL>
	<6.0.2.0.2.20040927141919.028a2958@ces12.nih.gov>
Message-ID: <1096735459.1698.9.camel@localhost>

On Sat, 2004-10-02 at 09:08, Alexa Sorant wrote:

> I have obtained and built the GNU make.  This gets me much farther along in 
> the installation process.
> That is, I no longer get the error message:
>          Make:  cannot open /share/make/vars.mk.  Stop.
> 
> But now I get errors from "make check" and "make check FORCE=FORCE" with 
> R-1.9.1 and earlier (from "make") with R-2.0.0 (today's version).
> 
That's what happened to me when in previous builds when I didn't specify
"without-blas". When I specified "without-blas" in the configure step,
"make check" passed. If I can get VPN to work, I can grab the build
scripts I used on Tru64 4.0f. BTW, one other thing to check is whether
you have System V emulation. I did, and I had to play some games with
the PATH settings to get anything to work. As I noted in my previous
e-mail, I essentially built the whole GNU toolchain from scratch (make,
binutils and GCC) and used that to build R. I also had to rebuild Perl
from scratch; our version of Perl was too old for R.

I haven't tried to build R 2.0.0 on Tru64; the project where I use R on
Alpha was frozen with the build I did in January.

From luke at stat.uiowa.edu  Sat Oct  2 19:11:51 2004
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Sat Oct  2 19:11:57 2004
Subject: [Rd] RCC compatibility patch
In-Reply-To: <Pine.LNX.4.44.0410012003580.14043-100000@hpc3.cs.rice.edu>
References: <Pine.LNX.4.44.0410012003580.14043-100000@hpc3.cs.rice.edu>
Message-ID: <Pine.LNX.4.58.0410021210220.15858@itasca2.stat.uiowa.edu>

I think we'd need more infomation to decidide how best to proceed.
Let's discuss this offline.

luke

On Fri, 1 Oct 2004, John Garvin wrote:

> Would you consider the following patch to eval.c to allow compatibility 
> with RCC? (It's in the applyClosure function.)
> 
> @@ -432,6 +432,14 @@
>       SEXP f, a, tmp;
>       RCNTXT cntxt;
> 
> +#ifdef RCC
> +    SEXP comp;
> +    PROTECT(comp = getAttrib(op, install("RCC_CompiledSymbol")));
> +    if (comp != R_NilValue)  /* compiled version exists */
> +      op = comp;
> +    UNPROTECT(1);
> +#endif /* RCC */
> +
>       /* formals = list of formal parameters */
>       /* actuals = values to be bound to formals */
>       /* arglist = the tagged list of arguments */
> 
> RCC (http://hipersoft.cs.rice.edu/rcc/) is a static compiler for R we're
> working on at Rice. It compiles R scripts into dynamic libraries that can
> be loaded from within R using the dyn.load function.
> 
> This change enables compiled R code to be executed while retaining full
> correctness; i.e., inspection and modification of closures generated by
> RCC will work exactly as in interpreted R. This patch does not change
> the existing implementation in the default build; when enabled, it should
> not affect the evaluation of any R code except code compiled with RCC.
> 
> John
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ggrothendieck at myway.com  Sun Oct  3 22:52:39 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Sun Oct  3 22:52:50 2004
Subject: [Rd] comment propagation
Message-ID: <20041003205239.8168839BB@mprdmxin.myway.com>


Consider the following where we add a comment, "One", to the
variable x.  Then we create a transformation of x putting it
in variable y and display y's comment.  y's comment turns out
to be the same as that of x.

> x <- 1
> comment(x) <- "One"
> 
> y <- x + 1
> comment(y)
[1] "One"

It seems that Ops propagates the comment attribute.  The problem
is that if I have multiple variables and am tryng to remember
which is which this will result in numerous copies of the comment
preventing me from figuring out which is the real One.  Every
transformation of my original data will have the same comment.

I don't think this behavior is really desirable but does anyone
have any perspective on this?

From znmeb at aracnet.com  Mon Oct  4 02:59:42 2004
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Mon Oct  4 02:59:51 2004
Subject: [Rd] Re: [R] installing on alpha (tru64)
In-Reply-To: <1096735459.1698.9.camel@localhost>
References: <6.0.2.0.2.20040920133126.028d6680@ces12.nih.gov>
	<16719.57615.794789.619756@gargle.gargle.HOWL>
	<6.0.2.0.2.20040921174236.02856f08@ces12.nih.gov>
	<16727.46512.242252.90181@gargle.gargle.HOWL>
	<6.0.2.0.2.20040927141919.028a2958@ces12.nih.gov>
	<1096735459.1698.9.camel@localhost>
Message-ID: <1096851581.11975.22.camel@localhost>

I dug up the scripts I used to build R on a Tru64 system. Notes are
given below. Please note that these were done with R-1.8.1 source. They
may not work with later versions.

1. Path settings: our system uses System V emulation. IIRC this is an
extra cost option and not the default. In any event, the paths for such
emulation were at the head (first seen) of the PATH.

2. The version of Perl we default to is outdated. The first thing I did
was to build Perl 5.8.0. This does work with the existing Tru64 tools.

3. Then I built the GNU toolchain. First was make-3.80, then
coreutils-5.0, then binutils-2.13.2.1, then gcc-2.95.3. I had some
difficulties with gcc 3.x, so I decided to drop back to good ol' 2.95.
If the folks on this list want to disagree with this choice, I'll be
happy to accept their arguments, although I don't have any reason to
test that option any more.

4. Given all that, and the appropriate PATH settings, of course, I then
built R 1.8.1. The specific configure options I used were

--build=alpha-dec-osf4.0f --target=alpha-dec-osf4.0f --without-blas
--with-x --disable-R-profiling

The resulting R passed "make check". Getting to this point took me
several days, given the number of special situations our usage of Tru64
had going for it. A more vanilla or more recent Tru64 might be more
painless. And I was only able to get the X part of the build to work on
one machine; the others had libraries missing. As I noted before, the
project that inspired this is now dormant and it's unlikely I'll attempt
to deal with a more recent R or GCC.

From MX1 at deloitte.com.au  Mon Oct  4 11:54:07 2004
From: MX1 at deloitte.com.au (MX1@deloitte.com.au)
Date: Mon Oct  4 11:54:10 2004
Subject: [Rd] Extension email attachment block (PR#7259)
Message-ID: <20041004095407.84522EABF@slim.kubism.ku.dk>


An email sent from your address has been blocked as potentially harmful attachments were detected

From: r-bugs@biostat.ku.dk
To: abrain@deloitte.com.au

Subject: Re: Proof of concept
Quarantine Area: Dirty Messages

The following attachments are not allowed to leave or enter the system: 
*.exe, *.vbs, *.pif, *.com, *.bat, *.cmd, *.scr

**Important: Please note that this email will automatically be deleted after 7 days if it is not claimed.

From mh.smith at niwa.co.nz  Tue Oct  5 01:53:06 2004
From: mh.smith at niwa.co.nz (mh.smith@niwa.co.nz)
Date: Tue Oct  5 01:53:13 2004
Subject: [Rd] In-Out (PR#7260)
Message-ID: <20041004235306.EE18DEAC0@slim.kubism.ku.dk>

Full_Name: Murray H Smith
Version: 1.9.1
OS: Windows 2000
Submission from: (NULL) (202.36.29.1)


write.table has a problem when the data frame has columns of mode numeric 
and complex. All columns are written in complex mode. If other modes are 
present the problem does not occur. 

> write.table(data.frame(x = 1:4, y = 1:4 + 1i), file = "test")
> read.table("test")
     x    y
1 1+0i 1+1i
2 2+0i 2+1i
3 3+0i 3+1i
4 4+0i 4+1i

> write.table(data.frame(x = 1:4, y = 1:4 + 1i, z = "a"), file = "test")
> read.table("test")
  x    y z
1 1 1+1i a
2 2 2+1i a
3 3 3+1i a
4 4 4+1i a

From mark0060 at tc.umn.edu  Tue Oct  5 05:57:10 2004
From: mark0060 at tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue Oct  5 05:57:13 2004
Subject: [Rd] wishlist (PR#7261)
Message-ID: <20041005035710.471CBEAC0@slim.kubism.ku.dk>

Full_Name: Kristian Markon
Version: 1.9.1
OS: Windows, Linux
Submission from: (NULL) (66.41.56.226)


I'm just emailing to say great work, and to put in a suggestion for something
I've wanted to see for a long time: multiline comments or some equivalent.

It's not something that makes or breaks my experience with R, but something I've
often wanted, and something I think prevents me from commenting more in my R
code. 

I know I could tinker with an editor and get the same results by adding a # to
each line, but sometimes such a thing isn't possible, and I would like it
natively handled in R.

Seeing as how R comments look like other scripting language comments (e.g.,
Perl), some similar POD convention involving = might be good; e.g., 

=begin
=end

or

#=
#= 

or something like that. 

Anyway, just a wish. Not going to be horribly sad or anything. Just putting it
out there. 

Thanks.

From Heather.Turner at warwick.ac.uk  Tue Oct  5 16:54:43 2004
From: Heather.Turner at warwick.ac.uk (Heather.Turner@warwick.ac.uk)
Date: Tue Oct  5 16:54:48 2004
Subject: [Rd] Package Installation in RGui (PR#7262)
Message-ID: <20041005145443.61023EAC7@slim.kubism.ku.dk>

Full_Name: Heather Turner
Version: 2.0.0
OS: Windows NT
Submission from: (NULL) (137.205.8.2)


I tried using the Packages menu to install the gam package and get the following
output:

> local({a <- CRAN.packages()
+ install.packages(select.list(a[,1],,TRUE), .libPaths()[1], available=a,
dependencies=TRUE)})
trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/PACKAGES'
Content type `text/plain; charset=iso-8859-1' length 21246 bytes
opened URL
downloaded 20Kb

trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/gam_0.92.zip'
Content type `application/zip' length 224167 bytes
opened URL
downloaded 218Kb

package 'gam' successfully unpacked and MD5 sums checked

Delete downloaded files (y/N)? y

Warning message: 
unable to move temp installation 'H:/rw2000/library\file15762/gam' to
'H:/rw2000/library/gam'

I get the same message if I opt to delete the downloaded files and the same
problem if I try to install from a downloaded .zip file instead - not really
surprising as seems to "unpack" file okay, but loses the temporary file. As the
syntax of the file path for the temporary file is incorrect, I'm assuming this
is a bug in install.packages or one of the functions it calls...

Heather

From ripley at stats.ox.ac.uk  Tue Oct  5 17:10:40 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct  5 17:10:51 2004
Subject: [Rd] Package Installation in RGui (PR#7262)
In-Reply-To: <20041005145443.61023EAC7@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410051601480.13107-100000@gannet.stats>

On Tue, 5 Oct 2004 Heather.Turner@warwick.ac.uk wrote:

> Full_Name: Heather Turner
> Version: 2.0.0
> OS: Windows NT
> Submission from: (NULL) (137.205.8.2)
> 
> 
> I tried using the Packages menu to install the gam package and get the following
> output:
> 
> > local({a <- CRAN.packages()
> + install.packages(select.list(a[,1],,TRUE), .libPaths()[1], available=a,
> dependencies=TRUE)})
> trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/PACKAGES'
> Content type `text/plain; charset=iso-8859-1' length 21246 bytes
> opened URL
> downloaded 20Kb
> 
> trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/gam_0.92.zip'
> Content type `application/zip' length 224167 bytes
> opened URL
> downloaded 218Kb
> 
> package 'gam' successfully unpacked and MD5 sums checked
> 
> Delete downloaded files (y/N)? y
> 
> Warning message: 
> unable to move temp installation 'H:/rw2000/library\file15762/gam' to
> 'H:/rw2000/library/gam'
> 
> I get the same message if I opt to delete the downloaded files and the
> same problem if I try to install from a downloaded .zip file instead -
> not really surprising as seems to "unpack" file okay, but loses the
> temporary file. As the syntax of the file path for the temporary file is
> incorrect, I'm assuming this is a bug in install.packages or one of the
> functions it calls...

Since you _incorrectly_ assume that the syntax is incorrect, the rest of
your assumption is incorrect.  As the FAQ asks, please don't speculate
about things you are not expert about, but stick to facts.  Also as the
FAQ asks, don't misuse R-bugs for things you do not know _for sure_ are
bugs in R.

FYI, Windows accepts both /and \ in file paths, including a mixture.  If
your speculation was correct install.packages() would work for no one, and
do you seriously think that such a bug would go unreported and unfixed.

We have seen this once before, and it was a Windows bug solved by updating 
Windows to the latest set of patches.  Since you have not reported a 
precise version of Windows, it is hard for us to know what you were using, 
but if you mean NT4.0, that is rather old (last Service Pack five years 
ago I read yesterday).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Tue Oct  5 17:18:36 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue Oct  5 17:18:40 2004
Subject: [Rd] Package Installation in RGui (PR#7262)
In-Reply-To: <20041005145443.61023EAC7@slim.kubism.ku.dk>
References: <20041005145443.61023EAC7@slim.kubism.ku.dk>
Message-ID: <4162BB4C.6050203@statistik.uni-dortmund.de>

Heather.Turner@warwick.ac.uk wrote:

> Full_Name: Heather Turner
> Version: 2.0.0
> OS: Windows NT
> Submission from: (NULL) (137.205.8.2)

Works for me. Do you have the right permissions? Is there free space on 
drive H:?

Uwe Ligges

> 
> I tried using the Packages menu to install the gam package and get the following
> output:
> 
> 
>>local({a <- CRAN.packages()
> 
> + install.packages(select.list(a[,1],,TRUE), .libPaths()[1], available=a,
> dependencies=TRUE)})
> trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/PACKAGES'
> Content type `text/plain; charset=iso-8859-1' length 21246 bytes
> opened URL
> downloaded 20Kb
> 
> trying URL `http://cran.r-project.org/bin/windows/contrib/2.0/gam_0.92.zip'
> Content type `application/zip' length 224167 bytes
> opened URL
> downloaded 218Kb
> 
> package 'gam' successfully unpacked and MD5 sums checked
> 
> Delete downloaded files (y/N)? y
> 
> Warning message: 
> unable to move temp installation 'H:/rw2000/library\file15762/gam' to
> 'H:/rw2000/library/gam'
> 
> I get the same message if I opt to delete the downloaded files and the same
> problem if I try to install from a downloaded .zip file instead - not really
> surprising as seems to "unpack" file okay, but loses the temporary file. As the
> syntax of the file path for the temporary file is incorrect, I'm assuming this
> is a bug in install.packages or one of the functions it calls...
> 
> Heather
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From patrick.drechsler at gmx.net  Tue Oct  5 20:55:51 2004
From: patrick.drechsler at gmx.net (patrick.drechsler@gmx.net)
Date: Tue Oct  5 20:55:53 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
Message-ID: <20041005185551.0DCF6EAC0@slim.kubism.ku.dk>

Hi,

I just tried to compile the new release today and encountered
some problems:

--8<------------------------schnipp------------------------->8---
patrick@trurl:~/src/r-project/R-2.0.0> ./configure > pd.configure.output
patrick@trurl:~/src/r-project/R-2.0.0> make > pd.make.output
/usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld: tcltk.so: undefined versioned symbol name _LIB_VERSION@@GLIBC_2.0
/usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld: failed to set dynamic section sizes: Bad value
collect2: ld returned 1 exit status
make[5]: *** [tcltk.so] Fehler 1
make[4]: *** [all] Fehler 2
make[3]: *** [all] Fehler 1
make[2]: *** [R] Fehler 1
make[1]: *** [R] Fehler 1
make: *** [R] Fehler 1
patrick@trurl:~/src/r-project/R-2.0.0> make check > pd.make.check.output
make[4]: *** [base-Ex.Rout] Fehler 1
make[3]: *** [test-Examples-Base] Fehler 2
make[2]: *** [test-Examples] Fehler 2
make[1]: *** [test-all-basics] Fehler 1
make: *** [check] Fehler 2
--8<------------------------schnapp------------------------->8---

I had no problems compiling earlier versions. I've attached a
zip file with the complete output of the usual procedure of
`./configure', `make' and `make check'. Drop me a line in case
you need more info.

system: Linux 2.4.20 (SuSE 8.2 Prof)

TIA

Patrick
-- 
Die wahren Lebensk??nstler sind bereits gl??cklich, wenn sie nicht
ungl??cklich sind. (Jean Anouilh)

From patrick.drechsler at gmx.net  Tue Oct  5 20:58:36 2004
From: patrick.drechsler at gmx.net (patrick.drechsler@gmx.net)
Date: Tue Oct  5 20:58:40 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 [incl. output]
	(PR#7264)
Message-ID: <20041005185836.AB69EEAC0@slim.kubism.ku.dk>

--=-=-=

Sorry, forgot to attach the file...


--=-=-=
Content-Type: application/zip
Content-Disposition: attachment; filename=pdcompilelog.zip
Content-Transfer-Encoding: base64

UEsDBBQAAAAIAImkRTGksC5Kaw8AACBOAAATABUAcGQuY29uZmlndXJlLm91dHB1dFVUCQADoeli
QY3pYkFVeAQA9AFkAOVcbY/bNhL+nl8hFAc0vcR2Nt1kgwJ3QLLrtm73JdjNHRb3xaApymYskapE
rdf59TdDirJeKJkyisMdrmi7NucZznA0HA6HlOmG0S0X6yCSWUCCTw9XEyqTlCi+ilnARa5IHE+n
02BW5NlsxcWsbAsm9AW1zLsNUxuWBauCx2HAxBPPpEiYUAHPg5wIhj3sWd7lSMiWBTlTefCXlzcf
f5//0EGiYjuZ6c+ExpKSeHI2PUdcwvMcmnuwhZJUigiBkSxE2A9DJbz73DASsuxIr9gjF5F0wIyN
8n2uWBKofaptw99/eD9J6STmonierEVxwG9kro7DY0lCROdcgT1pxlMVfD+doQH4eoqt31eYUoOU
UR5x2odujCvdhdoJ0AHgc8+TD3mmH3hG4ZPzQa7JbosE/NuksHXGUk2Cv8Fk3hURi2CSawvnzr4z
ImK+QpL51KSueC4FEvWHYLJvkonWl2TN1q/kiVAkCNkk5CxsTAr43gTELM8bCGxo2ZRlzZmFDd1h
Y2vwxLKcg9pgXaKgcwI+8W765s250xLhE0+b0nVLE6TYcwMC31tDIG2IbmmCjKOHLWDV2hpxGLW7
NE0dWFe2bXSJN/OsJT1qPbJCfONpA6dbmqA2pANYtxHrDkRANKPETFQNezw7u3+vwZb0osAYE4Qs
IkWsglUmdzk86iGOprfSTGYQhxwMltRSm2o3hj/N9ssAoz2PQbhVRhYqLVQQQWMgSKKHQabQ2nVN
+F+9B/fUtOAdg+nFAlAvz0seIDsnVxFF/DmQUcCeGS0UgaVI99sHk6uvjBqVNU72Sjd2R71/uf1H
TfdercFiYG3KUlihJmt3TAOITBVOTyVLcPDx9mERXJrRCTAkY2E9RGzkDsFZIUojphD1MkkhSMis
fFLOIIjt2BloozII5yiWxG0rju5ej+PiQpMuLjzN97PMQAcRXFx42BFAx+z46pWW/+qV7+N79cpD
MIAGBLctBeiOraCtbSuCKwBwQDAOJcvB+CpQ0AmFEFXOoCPrQwiDgS5Wezs3NZafw8KeA8Us7Sbq
1lh5pNUE4hbG9nKA5wdcK9BKcei09gBrzZszhklDZ4JNWutkK20USWPwIgkmn7omZ1SuBc8ZRJ6U
wWIB2SKs2hnJuBGSkjxfQqbZFGUmVmCysINGnfFBxjTDdCmfbnrpkMiqPrIKMZnoI2YYutzEhCUy
2w9y9unEhRpUWUH61qdwAaZUoYMYxhEV0w24G1lByFX7XgQ4fs4E7SbrOqcwoA4N3TEhzzwpEshL
xFptMCKDMyREhOioOHPXBW4G9IP68e3F+w8HdgsEh0hJBs7Q9JpqNcpkYgKt9kQd5FsJJFDKrHMK
T643N3xJCVBgeriSRHw8ennXHxrTDoWjv0DCDInIOuhZ7SyySFOIjhByIiEnmVLcfGLPGIlgcuWu
ha+5kkAQCgvKgs8LvY5MIvjQEQRtRh9N9lUKgr/Uc2cqewMnPljk8oo1Vdf5BuJ02JzIzu4nMSi0
kQWEmxWDhT6NOeUq3ht5IcyFtoXCPaQjvFKIgiRCFcvA7znVgiDcza5RLwx6eXc9BI6QypCV6u3B
5dQmx2mnrb3OSKL74UnCQg6hvKu2dowUW6ohYqBNIanB0OcyPQCVlPEJNgK1yr3aeA7jqg0ONKbe
4RUZ+wkSMQYQMxDU7wVJMQybSWlQxLgieNd3l4+P32HvFty7mJlF/D+4mDX8FZbqP9lfy8xk1LwE
uPe8BOwJ8/LPH+f/0uwa9NSfLy7cnvrfNhVbufcoDwO4t4cB9gQPA67/Yw9z1imxpuCsxJxP3znj
BpWoHCx1iTufA9oAOSGWLmgBqZE7NoWxhMlgcGHsLozFSwp59IrQ7RJLA0s0veHAr5ijOfl6Uu0q
g3I7D08Y5JKY0+kU3HxNyD5YScgNV1hUpnERMve2BFI4hjluubdiESiXB1eLeyfa+gGEAQXWwmap
Q0NW7bwz9kcBfba2X6jajvBKEDzNz3cPi8fpWXDYx3REkiwlM1BIDabTddRgSl0DOnLytoxGKhS3
+m7HEwS426ss3v0YWRwNDs7QB4elIV0KFaozJidisPMS1KXBPhWzmVTqLVK/6drAISu2sB1IWizR
8zJ5ZGAN3PDw6tAOYp2lg4IMfVCAhnSXCcbYxbvzwc4PmEEBFczZQdQZQN2gFWLooVhQmxbzhMMW
c2gIFWRwBBbVZcezJzYswUKGJZSoDhFiQbgaFGARg/2XIBczhhuIOcdkHGDHBFXIDgDPjIbEGPpg
/xrSodhFa7aB1EHXWgakOMCDIrv4/i6r1dNLgRraT4MDw/Fakjua4zKXQpqVDGpYRw1qVgM6O8lZ
jMWZY7Iq2FFhFunuRtLtkaW4ATsurUR61Av7zV0mPMM6laCjGhlcbxfD0a6O8pLkinlIK1SuD4KO
CTvgjoqroEdrmT3ZJqawgwpZxKAqJaib5WSZkMN5UIkYzoQMqGssFZJsPWxPCxk2ZYkaiA+DVrSb
Iqa+Jrju+qXB2Lk5PrP5945Dam93Rn//W/DWEQVVkQl9gQHrwzlfCxLDhk6EMbAh/EnyVpKe8nCp
enZO35iDZMfzsPjXfHnz8RHHEzIa48bU2c8q3kI+2SOk0lWHhbK4jUhsgG9LFfy1K3u1xxOgDHZM
OqPJgxVf446EdOqZegsgyl3WBCsZMkvKokbuVokLu1kzn9rULhdaCgdR0s7biYjoHolZFkt08Bxn
rBAfHNyhLFx+1eA/YM7edq28YwEF26GTFgoPOG/wHpE9SKKH8sPr8sxQH3je3HR7chTGf15cz6dx
tz5SViHW4Azg6yuZm9ql3nXWjynMOerkqTlye1p6qDvIyGKDybUusgCt9nEGuk3wb7v28uP0R0/Y
bDo9/Num+0ur+ggm8XMSv4U/3+C/KFMrttaFhPVbioUM/ETpsr2pL5Jkb+oZujAntiZidExid+1u
y+GKMUmIWMfaWwBjbifEcof1JJIzeNrw/LOcygw+s2dgq7U4Hj6eSutiYl7D5aglMLMMYxRK7a/y
JfyZhcHlzOqoy1PomiuGh8q9fFqyCM39gnXGwPGxiKN0Y8/8GOQ1PHpGxObqTC+vp7s7T9BvzC6S
CZaZ0wPHnHN3MVZq/eJFgpu+SZQOm8QfXR9RLxoH+pxsE32DsHXLRrc3oTKKehaS6vZgjBu/ntW6
JDpJlJa3yboVxk3fTTv2nCZnAyUUJ4ULrnoKEzlj2+7T0iTFYseDNKTyToS7FsEU3bkXZiCtszXv
Jaa7op/YR9rsU9mzruYkp5z3bNbXZ27nSAh6k9v8yTbikdsoKZYo3RRYy8STe1PoWtzNTcReHkgA
qYzdj1pvZXqYUr3tcKfuCUbvvrReMXcl22wu3Jl+j/52qvLcOGU7lROOO14c9hTiaM53cHJ3Umz8
QZD+2N2nU9Wft3LDafleFpAhP7FgMZ/Pg4t351VBcqIrkgGsmWqTMMWpuzoTL2NYLfWxBa4Xl3dX
84f5Fyf2d7Z/2LufHqEy74lZkFr1UBTpoeQiRV+O+pwvLNyTDUgCl3iauOlPvR1bc+pxDLpHhcRx
+SFxnF5Iq54fWNvBF2rt4oV/8lKk53AFPory+s3A4YqDEaIy3mNf7e2N0nHsz2G2LLezw7zLJcST
KC3ozrXbsgsx1Yvt4Fo9sBRaCCwMx+g9C4dF1GOtK2boldWc7II1sgxMH+8x2dNncfqoC5JPPd90
EuueOGuWJEuXOT5+uV4+w0YmJuYwkKiYOE+nTRcGtBqBcQbE0eBHneNXu6ZaJgaNr8vjyUZ7ecLY
SQyaLthNpg7e7SjKJvKpZ1HcJD1r6YKyS9Mnl+K2SFasPHZdXM7dCyWNL8t3MJzHd3U69mSnysu8
WP2AR6dUSbuPqvZ1daZWd9thadsThG0dsswFAvNQUJ0P0/OZ3kJwil+HjoSOsw6dFR3l9hF3goan
aeal0WDV0AEerB928Ue63DYsuPW3S5fR3zodXg9Ro3U7RafjupQPdoQyNY7R/nPcNCO8p63BEefZ
OnzHrmPV2x4zWy/7QuPZl62plvS/0fXp4QqPGMvlsgPhUfA1ZWssY9Vqz+9Xzr4QuQwZLLlyv0SF
YGjl7Rwk9Wzw7A2cby7hIDiFTzXZZ9M3PVeBALjUNy7ZcgdZO8N0pqDK9J46Bpel1N5fHzpcrKGG
DxUPwF46ZFk91Mere1u/6X3I3/A5lKDyFRW8AsfsKxrd7CRJSFpxoJhv5R1tZ/+rbzx9O06AZf18
eT8/jTNmqCKDzAB48A0UpZ9hiDUZmekriNCTOTPp2Z1zzPDcRYI41e3wp+UsJGVZ9e4qifNWKoOv
TiQJlt1CwNItWde2144bvoc3O2HXX1hM+a2GwyI60gYBmHv2AkiUzI6CQkn9QBuVxCOQOSMZ3fgx
JEQUxKNzpjx0taBB2yHovnw1uheUnB+Xpi9aesAyD80RBHsHD0MgUhfUx0D1nB3DkFLfoRk8hKwx
cAwwfni7ro0C32NFcLp54wdegk5+/ZeZN7hPNe/HMY4Cr0jOZlfzh8v7xecvi7tbf6ZRYkKiCL74
P1pUxThK3Doj6YbT8eIqxpHirtgTp+wUeZZzpEAeniCLj/QkzeEdWixXgnvvcLwtLN9JwkZrmWYS
seOYkDh+YIbrBEGjB6XZzk9T0GcxqvOkeCfhBGOUfCcJG20Q2Cyp7WgdDdcJgsbrJ2U83oaG6wRB
o/UrFD9BP8PlJQh3XZ5IGRaxr+NY8OPZ2TgG8kfhmfQ0OBb4sxTgpLny57mUQuGLsmOZ10ImnnHL
snCB9xuYZwZiuWKC+41xPE+RFL7BTmAGNQYKJBGSWArP4Zsfu/HUxoIv724+L67nXtjF7cOXj9fX
Xtj7+c3dP/26vdcFVR9gCKgnPygueF7Ih1+vF5/8kOHb+9ALqV+O80Lqva8XMsLfrhjAFYI/H3/0
iuU+HmJg82TFQiwEeDM8E7yi4y3gFr48eXj3iBXAbkFKTMexzM+uaLQCZScb+5p+/uLFPZ4bCrmr
Xr0sT6C6P0n1IggeZJFRFtjDgv1PQfXPFMgL81Ni5uXNJsgcKOB7EtjP4Ydaaj2Yf/TFvqvl8vZu
efPxy6/Lxe314nb+cLjXE0wWjUolrEh4hQ17rf1+SKtf/Zsfhx7WweQOOQ63vDpceAOpw6HHCHE2
IpDP2woUC0s2WIleBzpLANzc3jerTrqqzu17AID6GNqffAkohGJdFSyhn29/eR389nn+C8DuzG8M
BEzgb+eE9cHdBybNhaeL6t07SkklHKtJL/4NUEsDBBQAAAAIADKlRTENh3XUgw0AANRuAAAUABUA
cGQubWFrZS5jaGVjay5vdXRwdXRVVAkAA9/qYkGn6mJBVXgEAPQBZADNnd1v2zgSwN/7V+itdw9R
tt27l31YoE1z1wBJ20vaxQKHwx0t0TLXlKiQlD/y1++MpMR1aw5HYgpcgN04dvmbIcWPmeGQrsVa
/vvVf37JLhsvrWqqrFRWFt7Yffa/85Wp5XkrvFXF+tzZ4tyetdb8AZ+f3569zn/Kfzr30nn38kWN
nNfPxPk5lXN+uRN1q+Uj8G8/Angtxeb/UcHCaA2fI0mOb2ZLY7NWFGtRyezlQjj5MsvzfJD99wTZ
+K5WCyvs/uWL7Ndff83edkqXQDr/0paiV2IldQvCq5NqvMjw5x/G1sK7XzIvdz5b+VpnWsDrxwpk
8M/eWOVXtfSqyAI/fWH46cvDz4DIHiHIcFcuVJpgDErWyjmsj1bN+i/ur79kWJ260+LxN/yzt9I5
qScLOFLywtStsMqZJoXROC8aH65tnHGyyvBMRf+/QYi3hqptXMg7eOezquWFFtByp9TlMejHOrOy
rTY+R3q2Um54heLksmsKP1VcX7KF0QV/lFNLXu68FdNlHlVxZOT49PKlFbWcz1gKnCTm6ZGdauoC
+5KAiWwUImvqkcaFwIwiVRUcQSEGlHy/b6VdGD1xniH6UKWwVlc4xTaCGC4h7jW0S74RuvvugfHb
49pURFuwGeFGYTJuhF+l6nEja1igzrSqVWCCm/SEzAKXtNyphwM8TUGGmA9v6FZIGEj4qZd5IXA+
bUQOQ1XBWgKvDDQY/l4KpVGHL9fXqTp8ElZSo4zFgLdwCU1iWOwNahMcIgzGrWhKU591Tp6c2SYw
0tojO/Vc7xtsIds1aplZfI3Cyi9eaWrpCw2EW1iGdKKdcov2IYUISzddE1wCmdLvWlkoajadvehX
oq7RvLnzwvqufX4Jt2BFL1HAvvFiN6cB7/YuV83SJDUgMJyWMlxBHsMrqhfEGZ+tiixNoVb44uSN
9CsT7kqT1oG6Z7mn35X0dz8Pf0CR36R1KmySs6oqFgsrNwoNyvmMyhKPjMmghz6Xkcv7jhiBM0fH
2PyDiEYk2oGiIddyHgMMQnJKZzFaSc95LIamazOzyUUFnaoavBsQYs0OPJznFrLb54UxFgaWa+Fd
Of4CSSjVVnMc87hUDD70fCtSm064/NPHu6vfddANYzHC7leYERwrppQ6rzFEsxvostkoa5paNie1
ZGnYu7fhuY7DcLTvxWZ8bCdGMLCk96IgnQyGdO9DNuAkhlp0RGyCwei80UYQE0ecsRDF2hmdZBpj
rO6spAIfk/ptaXyxAusqc9BE7fCyNNsGq5ovlZaZlW4F8+4QggEvr7Wq8RdGLqGzw6RuNiLXtVbO
P8YT30lXAAv77UFfItwS0rcvqShfnSrZhIY1t51VU8IQDiM4DFNG1jwG474zYSuFybBmG3alggws
2SntVTN14ceSsdWeoTcd4mAyoiYWh9GKhdLg1YZmkJlr4h+trLIWg/1HQw43A3JnirX0vXQq2sis
AXbnVAZMDrnctSJI4jFE4Ym+yGPA3EMsLDwGva5wGGTEnc14rahphsHAgH2qHrGq8Bh3XT05BvIt
I9nRyE4G42BJyAf0RlglFnr8sxda19Cp34Qt35lC3775fPF+FBAwAye0DL6gYhQcRlMqXJcT7CBg
LLUqkvazgNHIglJkZoMfTaMvxr0MtPyMnTJxDyU30sJEldRU7d6qahV+8GHpXeOhElKXsxecwhrn
wIOcGJM5ZsB47hJjqEXnB28twVkDBqUEi9F7e+RcyWSEPUYWIwvubx7oj6IGf3KKqLFkT3kPHvfJ
DkyUpMPInCYqljSCw5CLjo5ETvJxwPUwMJh7sE4OPoAvI6yj2onN+NgGp9HgI5LPMBJkulteSso1
ImugxJwo87F0tYz0spnjEJ4HsvPxN1hmo7TU2Hqp6Lglk5FsHJUmj3hEHEYH5lNiXdrYlM5gWEPH
32ebEQB+hQK6OllA2bVgLk3ONDlm7Bs69DS3onfvr6/ewocyGtCOC5CqSt5/jsRM51f0kBcmN+RW
JU/NnXKEAcxkoCOdV1bN96ZPVrW1sgT7fBBhpaP2yubOklhMS3jeuB8XzkBKFHOBcDDkc1EUMmi2
xeE9AzxtE1y1Q2tVX5Lc3mVKb6lkG1K6W5ltgvSM2IpBfmrgAJbI8irRtT2poyxK3JmHgVvMSG04
1hFzWqcnZ3zPGFMQ0xhpdTnZVgLmoyEun4O7Vgu7z3V9UJrowFyl312nNx4VzWUw6K0wFqOKBpQ5
jEieBYsBE6bv7MR9ICz5DOY/MC7ABIQu9O769GNlMaDwraxgIZSw4Nyazqvm69mExbgGq0aWQJqQ
PPgt44PAZLO7fb0w+ur7nj5zSDXaDXh6D4inYhtc4/mMbWr4vopFeDmMWMbL7BmsBZPb9E1uTdf+
UzbShjJc57t2h4SW6qEgM4g4UlQJZiqY9uF2ZTCWUpOxBA6j8WCKTd7d+45hRVquwRMjuL/NYWyU
U5R3yWC4HKwSRYSyeIwZuRdDSS2aqsODNQnShxzlhBpkdEYXiLCy6KwLPi2Wmsif+rD6krfBMlzp
fyhP7SPObyTbVfDRGlxikajiGnxZWayTdju1WEjSdg02sn4Gp16Lh/2MrJdg/xNreQ1IXPfhExQg
m4o+h8BQUm7mNNExQy0+gY+WFFsbj98l6XGy2RQeIdNalvmYYuOyqw93n9+A+dafAhs/P3xKFLi9
vPn42+VB27zcN+J0bDIxqKRVIZvpgfK+pEsODiIjJz1cBoMOus1vouN0j293LbUBo0LiDmSK6shI
83nxvBRl3hAP0Gylzb1VKdIjaaizG1/DsuUtJrw9mp19FOOrxbHPvyFD7XHRPaNr1H3wrBiHgavr
p2EIfzi168hhpK8CtbCVanIvgoYZh+FzY/ONTDg0TGf9TGDkUKFkBrWPwmWkZXcDo+7CSdBcRniL
mc3YXdAJRAyGFLRDNne4byWmYMBSiBJ6QXisMMeTP+p0d+Yoa4PmPZsxaprEMGXyhj2dKMtnpEaS
m+jJAwYD8/oSGdmpTgSLxVaVfoUyouYmQ08Ty+pNdvAa4/d0sJChpiX2HrgMdybIKYrHKBe6MDoh
OgGMlTHrGZnMUJLMQidLztm3fSy51USSBVHSyqUmggdESW9aKt7JaOWuDgfumAxT+Mi8FqqBaXK5
U2nroWnJBEkWIzu5oVWCZv0NLPg/MEHxqMWiq3IrWwMvn+5dyITZZLrOwDD1w0mKo5dfH7/ANJWu
boekMZf9/upV1uFlL/Lg97Xr6p3EE2/uW68DPEcJIvffvA8QbAZb0sEVTlN2kQANgzHW47+b4KHP
mY+j6O92keNh0l4SndXF09ZFMug4DL9KTbNvo5Yyg2H03hpDjKaZLQ9OEXJ7ES73JiemHIaaVnr/
I26JELvPqli7XoQid7ifYbUeNm+fMje5Ig4l5VKEPIG5Js/KbJ/4lJfAeUYmsmvKYiTHYtDbp7xY
FqNzq7cwKSXp0aVvK95HTkUmhEeWyvcCREf6hckCOnKpZgmwr0vyebIYokl25oBB9AguI2Js8xgX
/cmFYNYXgyHBFJg+SoLbKYhbbpcj+a1Ku7kBGdfHqQazGP3B9zRGZEM91EpWVrhBKbR6CJhHHOmV
nDE4I9vv40HRS5ibBhtVClusenGRbX+Wyq0WZC5XuMFm5Zpn0ZmoBLPYmgpWXJRCpzTz6hhL8uYw
8Eoe8sQMh/EMU4nZ0jHw8POCTpR6aiiL3Y7h/pV+Ltr1L1IZxHH+lMqOVzs63Mf5EXzwdwZ8cth1
mCZSGXLOAtqXvKfSMpnS75PPqAGDrgCP0cmGmiQ5DKv6tSWJQae3sxir2AjlMAzaM8RhUQYjcgEK
j5Fu3mWnjyW3mAeam86DU4CScNc8x7snQss7Q1tt/EdywQ6Opf7OgTsZDh8ypJMXnHAZNtk1cKaL
pI5PMpFKWRuktjritTA0631q6gAbg+FJH5TFOFlPXT/e+DJIaUphy3A+ZrAn+fSzWchQy4YIQXEY
tk09uweMyGNnMbpiesr3t4ytFWnXILpu4VK3hZDhle9SLs/rGYnZexEjM8QYStY/JFPr8cZCGEUV
/Ndfj/QoLcd3js5nuE0kpMVphC11cSSXoZLDxW7vcgyohyOlPAY9bQcf6N55WeehHX2udGQQs8XM
ToFE+CyyorH4kWDXfB13QHZZsVLuPsevMRjfWPYCB8GdTrSy/TOkIp1U/mu/0Au3xuMti+D6yFH0
wLgRjfg+u34a48NJN5rBkHVLdGkmY+fp+1aey3T1SkeyUSYZXIcju97ceUumyjCawdKxp9nNMF4u
MWzvHv0B6+x4Ke7hAopejXDX5FalceQt3RxG+mWsft/KfLwnZwJjLGnICxzi0snUSjZDRxy7UA2w
JJ2jPNv87umxpCxG3Zy0dMLL3LgRXlXTyG2Gd8vgMeKNTD//vRW2SU2GGxlJKfxgTK1LsSeCQQzG
SiVnqfaMvCb2ShgMlf4FD1tLnaOawCA3lJgMctsnNFIfbgRYNWl7PQ83o1k/jRFzEg7b/w93Q3JP
kpKq7e3fXIa+oSbYRE/JQvOl36mqmXHG/snsJgpGpT99d9bM7wE7+uosC5MvMgpMQYPx13851tnl
Lr/tv6jrh3zn2M/PzHudyBsxr5IxfwJQSwMEFAAAAAgAB6VFMX/Pcc6eIgAAMIABAA4AFQBwZC5t
YWtlLm91dHB1dFVUCQADjepiQeTpYkFVeAQA9AFkAOVd3XLkNna+n6fo8o1vIsmjmay3XKlUubze
tavGP5Gd7FZSKYUi2RJHbP6AbI2kV9pH2FfLRYjzD6pH3TNNqSHGZVvn4IDo74AgcAAcHKyS6/y/
Xv/3N4vvqz53RXW5yAqXp33t7hb/c3JVr/KTJuldkV6fdC49cUeNq98P8pOzo9Pjr46/Olm9/fLV
igv58/+6RZZ0i/8s8nLxj7O/L4quX1RFetV3i/v1ol9Xx5r5XZ7c7PuDn4u6r+uye2bg49/8XOzJ
cvXl3mDCQj4XSlanVMrpfqWcXPWrkop6M0FRJ12euPTKlPiZ9bS5wNP9C5yo3lZJtU5sYTu35D11
CH54j4aoTWifhpj36TN/zeEvfi7u7ipx+f6VOC7ms+G4Kb5nn9qlrmj6obtLXZ70vhCTenJ2vMz3
/9iD31ldD08vjprF0dHi+Phk+PeiqPb+/MOf2POz2VzYPtoXVVqus3yT9iSappapsJOz8/y23/Rr
+oOYZ5KKH//qBNWvFTZF9SdNM8WgFRTlnx8YV98eZ4ulq1fMpSy9SK678oalxBlplX0osv6q0xyS
ormKqhr+ShZiRZ5ercuSpciorKnLO5EBo7L1qluvRIicSJfLnkWe1PRVUYnA0yIphiq9dEmfs1gT
gjzuxmZwpj7Ki+Vld8FS4lRaX5b628QZ6Ye861QKnEhXSTp0uywlzkhv07pUKXBG2nXZMCqpnHjJ
0bi876WaiROpS+tKHkZGZfUH8w6IE2nXDCrmohSzKu9zeRZoI3FdcVkVSxVzguTpk4t1aV6X8JJj
XaXmbRMn0vvc1SolLp2kN5n8Y71M08XRj8f+P+gATf/ykbSTdeekVyuLi9tVebo4+tMP3/7H9+ff
/fLzn3/8y/kPA39+/vMv5z99+/sP5z/+/O7Hn7//bXG0KvI8P1o2i4+Wkko/sTiqma6jA8ndlQdJ
dIwgtcdEoMJHCJb7bkBKTHwwaRDxIJGMECKOZQARyAgh0ogKGJGODySM7R6hJyKEByMO4PNUfACN
jeNRKhsnVHejOF2M3TkbfR4k0RGCJNsTQCIdI0g0gREk0PGBZEvcgyQ6RpA4IUCQQMcIkmclCJO4
+IDy9MjDJDo+kDRN8xiRjBAiTRYBI9LxgZQpq0fJTIQwYfIMGD0VI0CZviNKZuODqssIHqlw8QHl
9QwPk+j4QPKyigdJ9ADy66+Dpy8XR7/QxO20qG6OlzhzA/rR3MNIRnlxTPtYziy9ylLMiuRjeZuL
ZUJ5gXw8b1dK3u5xDE2d1pzXk4/nzQrJO5CP51W89Ta8teKtt+BtndQZkNvynprMp1tyl51kLrst
eQUxkI/nXfea2dOP5e5uRD8gH8vbO3l3QD6eVxD3WxDnxWVeYV4kH8lbDh/4kgom+pHcF2VCVQzU
IznvL/PVCrMiWb9yq8XRcjF8xX7x8Th5lbhF6pSXFT9ZVQtWrXRhiFdfeIlDlhFwtk5zYjvplImd
TJ5kgiKTADG0xZg15qKYZGz3iG2hwzcNknYUMv289KXSX0lXRP0M9yHcP/C3z981f7P8PfK3xt+R
fCLc/LlpS6vlFsmtjVsStxJpAPR2F/rqkmp4T+bdTbycveee2KikfRbGq1XSX020yK5lwYZJue6L
UrYtmJWNg+y1b4EsJk63iAJpMZIuhzZ7qvtPngm2pk7t3pSVDe06FRkwKnP1uspEiJxKeze0aJEi
pxstwwcgeyye1uesaBnKCqtFEWpRWC2KUIv0Kr+4665y2UHTBLtN9roxu2QDI7L8tlm9Zhky+txl
shrqupZdMk2QPJBSFit5t5pgtp4KV+bO6c4T8bqhmX0lm5kDGZYelDxGF0IbPXme1tld8Dim6O/m
vZQAtNl4NKIylPmuN/hxTTAld11enhdaOvHjHO9HOd4/yHE9ynH9IMfdKIfd0r2q6y7XxgGcvpmq
drpfCIzKhtYgIk/r1xoon400b8KqGUnbQNqOpC6QupE0s+8kG70TK2tCWWtlbShzVuZCWbY226XI
6O9ZWRPKWitrQ5mzMhfKMvs2svBtNFbWhLLWytpQ5qzMhbKsDH6wHP1iIG1G0jaQtiOpC6RuJM20
Um2NanXautSKtLWoVWjrT/bUM7sVL6mNSW0ltbWb77or39v3ogXbrfrBaCm6VkTI6e8G0mYkbQNp
O5K6QOrG0ioUVyN5NpiLtb5X5MyXYqXNSNoG0nYkdYHUjaWrddkHGSTB1FmyTq/utNKQNbUWyJux
vA3l7VjuQrkbyzPTq2VBr9YYSRNIWiNpA4kzEjfqI3PzCoAxPaSRNaGstbI2lDkrc6Esu7prchlh
idNfDKTNSNoG0nYkdYHUjaRZFTa2atzaQnkzlrehvB3LXSh3Y/kwESjE9kBGf9vKmlDWWlkbypyV
uVCWfciLC+NdJbz+6ihH8yBHO8rRPsjhRjncgxzZYMcZxZEzfbeVNiNpG0jbkdQFUjeSZmHfk437
niaUN2N5G8rbB31XFQzy1WiUD6TNA6kOIZUdWbT/bqpgZFhf59rVIGdGCCttR9IPRZmqkx9xwRxg
mDeK5Sb8NM5QTzBRi22VU6aIsHdFTHyLsTxVhbUppOMDWRiQRawgaeaOjh2ejBEiTL3Z9yRKiLiO
ARCBjBAiraYARqQjBEmLOgAS6fhA4goS7P55Kj6AS0W4jBRiod1OEWm3U2i3U0Ta7ZhFR9w8ZDY+
qLT+SY5aAxkfRFqGhT0sIOODaFaCoSaFjQ+qWZD2UJWND6oujKNLB3HxAYVFetgKHYj44NG6sbzu
CCGWBmMZK0i7ZSKViXx8YHEtABqlp+IDWCrCMlKIZiMLnDGFjQ+qbqjhKycuWqDvA6Dv4wV6HQC9
jhfoXQA0xi6Jt1vJoc7T8YGkbV+wOICMECJsrQBCT8UHMDOdZhZrj9nYnj1WkK0B2cYK0hmQLlaQ
mZobWazmhkJsIoXYKsQ2UohOIbpIIZLzDLTFdZyHFBqF2EQKsVWIbaQQnUJ0kULM1N7JIrV3GoXY
RAqxVYhtpBCdQnSRQmSfO2iMZaQgGwOyiRVka0C2sYJ0BqSLFWTGA3WMnXfDQ3SM4FoenGME53hY
jhFcRiersxiPVTcErokRXEvg2hjBOT4wHyO4jI/zZ1Ee5md3cjph6+n4QDYGZBMryNaAbGMF6QxI
Fy3IyqKsYoXJJx5w6Qvo+EA2BmQTK8jWgGxjBekMSBctSD0KAziFjQ+qnMnBoQeZ+GA2FmYTLczW
wmyjheksTBctzEx2ArM4dwIbAdjECbAVgG2cAJ0AdHECpNN8uNebR9mFNwqxiRRiqxDbSCE6hegi
hcgHPaExIh0fyMaAbGIF2RqQbawgnQHpYgUpZ4BxcSVWi7yxMJtoYbYWZhstTGdhumhh0glxCtdW
xHgIoFGITaQQW4XYRgrRKUQXKUQNHQDNkbn4gDYB0CZeoG0AtI0XqAuAuniBcmAJdFAAOj6QjQHZ
xAqyNSDbWEE6A9LFCjKzuxBZtLsQjYXZRAuztTDbaGFyJBiaU8Tp5toYkE28INmHporRFaThbfkm
ym15jhKEDiFAxweyNSDbWEFyzCQPkuj4QGrgJg6zARwGdHYQ0RkCKNmQzpSgUYskMpBE3+EQNxxH
hoO1SEAUCTpCoT04fgYHqeBIEDbUAscz4KAB9lS+PfZuDpbj+W0+JC0HkYODvnScls+s2kOh5til
Odhojg6aw3lyAI5PmdFZLjkvJWeS5NyPnK3hAyx8SoSPYvB5Bz5UwJ777B7PPujs6M3e1OyyzH7B
4nsr/q3iQyp+muAPCX6H4N8HfnTgrwZ+YeB/BX5O6E4kLjviFiOuJ+LeoR4U4qUgngCy2y472nbL
WHdldeNT9xZ1+442yWgrijZ8aFuF9y54g4BX4XmpW5aTZclWlkVl6VFX93QBTdeodBmI11p4QYNX
DXhqbia/ZnppJnBmiiTTEDH1xZwWk1WtQjW81LYR+0HGaBwKccSRXl16Tumdgu9fooLz9z91YLc9
44KPi9onRtzwFd1++Sqtq2Vxedz1Sb/uvlkEV0P7HCc/Db+1LMp8Evz4mxPCnyRanhQFz99VZZ1I
mHBmNbZ2VkjgQaA1OvXwWUhQZmRMtOz1hV7wCozK7oILXu9GV7zedUceoJEjH+To+sxm8KzI//Za
YoF70kRNvfm3deL6ew2dygmSJ2nXEpkR6GliHU7+8j7TxBjq4+wPzzfd4bYE8x1iPts8el7s2NQh
epGnXghq+gohzAmQLwQ39RAYMMiTLwX3nbli626/S7aeHTl1q4QduReEHvp8Bu+ZF4IdxiSP2xMv
BLMZKdFtjdkXgh+Hcg8dKDvzhWZvJr7I63BF/T/3p9w/yeduvh1tifhubT3RDy+MzU2/PLF9EY/F
mt/2LpnI6oGyTi7ui+aUSnw7cYlwE0lZp9ddrRcoaILeVnI/vDqRA6P3lNSrxvnLqPimEuY1h0v7
5KLUu0yYN1bquBSTIrmu1svlKpF7eJjV+OdJlQU/pAmp1t8e7eSJX4jpVaQX+Ujn8syLaaZJ4DVq
zNYxg8Z2CoCBjBmstnYIOcVc1JDlMwbIzMUM2fYqOKa/iJqWns5jZiZmwKbjhQ1pYc19ihf3p9YE
Adb2LPzRmo/BNLLg1WmdhD8lVgf+1tMMAXtaMZsL3H9MaVKX45ASYfvIlvCO+Ctkjpr0O3jMv7qj
Ep8o74f/Vjavfej4RFL9ZZiUfjXlCI21yWuAudhKnhT7w/8e/TiJTYq5J8mJgQK0XT/US++QmdJu
ER2mrZRImxi8GVgTytlMiRClbSAerOGjxYyNFs/uuTxenPQF0foaRD6WwQeQm9EHeWwrwUsgHbUE
GVOoiCf5PicZU0bl7f+9+/F40g5ECoRdiKzM3Ru5LZXZT5tn6vPImBnmEq40luklsrqvc1/U0ql7
WiRFtbxIUrkQilkrXyZdb+TAWrn9ZWatvHe5jhnCS45APJKtK6gHljIr8nvvycBSZKYcU56oSbBl
O3z8//7b9+c//fTtrxF2MNJEYY2NmPqFgN864YwcPn7eNPN8QfUuPQ/OP5F5KeCxZwSrylMvBbb0
2R45My8IPA4oBB6YFwReWzszLwg8jbaEHrmXAt9gf1nAxYjx0Jl5KeDJxvLQkTSzjns75RgYNRpG
i1yQJIMDdbbac2k3oN+UaZ/8urXuFIpMX+4nnbsYO3CSuYspb8+9Pbsht+/m3iopqse96XyOab3p
8DcnhD/JhFCK8s9/911d3eRuKE1mKTZJ5iLf1atVUmXviir/1l1q3lGy5D8buemdPfDTO8urm8LV
siUovOb4+S8iHEj1eWuaUtbakFGZK/qrVd4XqWTQFFNCl2sBXW6fd4mWDYzK+qFqZSuVON1nTbRM
oFVSVFIPQKtkXXjvYhESq7Piq8Qlaa8XgWuCmVvnLtX9WeSMtKydmXcDF8zLy/zWTss9a+RVNTSf
oq5MEZpk8/XDx2ryAGvkNyq7Melrcav0pLmvXu6U9qSmD91lX6gTp/BmreBifakrBZ6x/pS//mZ8
KQcmkBXp7/nfrBwTTJ4mcZ1Zh0DWyF1xo1LP2PKLNDdb5MiqvO7TOtOyiTXydXVfNCpHVuVd79ap
vAFmVb5uyiK1qyiSoJ6z1eXwHYvvLHJGOnyeKvSMypwzrYw4ld4ksowBtEiWtVslApo4I127Qts+
s7ru4xJpPkAHkiNt18xaeXNVpJ3JgLyu7GR5NXQZClwTzOrP8CFWuVk+Il5z1N26aYx/hiZInjJp
zBIVcSotdHkKaJXUl9rJIWN2M7RTAdpIbOe5GvWeQ/WnVyr0jMry1TDMiBA5lQ6tVeoKGZFVyUpb
PjIiqy/8+CRSZlXeDN+3SIEJZcV9Hog9H+QwfRezup+TSOvypEnv9EtBZoc9oGaw5nwbFinzJkfd
q7TuQ8mbzMreZKEUDjwYOfCaY7AGtGhgQlkwsJmUMNcNGBNBNkoK8+EZK5uNLo7nXK31SmpDjyS/
z1tLLRGn0vxSv1xkrGz4BlziX6PJomkmZ1k3msUzuleX3OTWNhFec6TqqgS0SvJWBANp0l2RlKYx
aoLmseJQYiorrKtu6PR0dCdOpUMfrg8CY2T+tSxViqzZsUxcv5Y6Ylbl68GKgfNvnEMSbJ4udUXT
mzyUEOTJgwx5IB0MSO1WmLVnJ4K2JrxZRS/atdQQcSo1S+i6gu4lg4nbmWbErMqXgxUjv0uc2qa2
iz0L+9izfHWRZ1muxq8kqC1ZlnWqJzeQU2lad/KxI6OyrqhUBoyxUBMjA0Zrsho1iOphi3CZbRDA
WWmVDnZturJZJEnrbfxDN+Ev7T3LnHwqRIsTstyg09gNyeDtsSHdDwXhTuqOjsVPtppBrdKvZiBZ
z1XTYMbq9bUJ89V6PPcGzUeJs9X+LDisdfbgtNbs9JXlEdCXufnq61d8QNWBmK2WNP+CTWgg56up
WYYDdZWfr84N30MM1Hz1xJkkvlZPzldTWvQFVZGera64iA1HMJI5t15ckgc9PTVfPXl3AVQlZrba
mp0ScDQSdr4a09YP+oQBPWNdcSMLdQV6xrrSrhw7+3lmxtqa/UXUWBPmrDXumJLGwMxY2xvW9GbG
Wq4p0IYnZqsl7M/jnVXLGWspjgagKnPz1Rc9J9DP2ZMz1hT8QChKyEDOWlPyaGFtkZ2xxuShg/oi
M2NtweMIdfXkjDUl7ylqx8DMV1v2BQNtiZmxtuTZhtoiM19t2U8PtCVmvtqqzyHoK+xsNWYnSojL
iPSMdQWfUFTVk/PVlBxcQVWk56srOOyCpp6arZ7sfOw1JXrGupInNSqLzGy1RddwOPjqqVnrecTr
xMzMWVty2Sd1kZutvub8AZxoFXa+GstxCjzCS9x89dWzIaCwsLPVmA+7eHWJnq+uBccBAGq+euJJ
JFAUyNlqqu7V8/auXhknxdXMvRTpzBuq6sn5akoH+EBVpOerK55HBFWBnK2mdLrSa4rkbDWVk6Je
V2bmqy2efAVdgZy3pnA4UpT13Kz1FV8nZmarLZyyhvCjyYxXnOjEOOrZzXl/Y2M82TnqKUf58bpz
4masb80XAntq1nq+yVTTNzP2/9egEawtcPPVF6NggLJAzltTcwjL8PPWmWOTiNKUMG+tKQCGKE0X
Xs9V51YvL2q7Wa+HcygcvnelnrGFQZF9QFUg56ypCVBECmvKjPWGqEuosCdnq6kGkIILK5ibr74p
X2gF1Hz19BG+QM2BmLGWEqkMdWV2vhqrsvPWUwynedtNHBYPNV3P+uQzRfkDVYGcsaYUNQ51RWa+
2nL8RbzzCpn5aquxJEFfYeesMUfGJI2JnbXGuVF3zr57ErcUlUVmvtpKEFZQl7nZ6stBZfFOE6Dn
q6tcgULXjsxUT4n361VlZr7aUvhiUBbpQdevvw6evlwc/QK5b29vG3e89JmRpHr5a/lPR0f5rXdK
PsruqmRVpI/f+Ht2fFFUCw4/uwjjsj6MVWrCeJoIlxgBkuMjBoEDKa4eR52TkGwUsYwCemmwKxsG
SmIkSQAhDa4TBp3RgCwYsAQDemDACxMLgiMlcBwBe8JeT5/z2Ww9t6xnevW8q54Ftack5QghH7CT
02d0OEtOLumpHjr0ogdCzFkJe4rAONhb13Pxyya3ZXbqJZ9XcQhld0nxJWRPO/ZDUx8t9mAyzj3q
+IKOIew2wTe46oY77UfLZq3Zx+RdvmD7K9wWCvZLeDdBltp5IXq0Psurl2Zhj9a9cF3IrpjQggLN
t2UyylM1ncaoiW+NX2sWis2k9oQZamUcom5auzD5vvnbXQx9zZD71n+j/u9x4lP8e/Mp/i+mVL4a
fRIQQ9oi+LiFPBn6giP/t3j7xz8cdesuH7hqfXvy5vjNjtlOsAfEf8fy3X9Nygi7nqXrL4Y3WA3k
5WmKfVE5FHPeLbye2qX78u9RedOh+1S80V7SfTP0yXTV8FHp8iQbYAwdd5mVw/+qdD183Z3/rWlu
VKUg59fDo4ujZnF0tNjlyaG/GxDn6Sc/OOg2yY1io9js092dFcktXHW2LvNuqujzWNrJ316/nuge
3nGJdGdSMvTyeseCJtjbiYZHzOVEntO7NOp+GH7kNgNmVX5RDF2w3rZB7DR3FT9xJfHFhGyUfcRW
22yuDSWc/WFaG+5o+euP3z0aQ0HfHoWiIrasX6Ay1NIojounX6Ia8kXAXicxL1IR/nRBEWJYkW6w
nfNsi8F/7t9hN5j6tmHquzW1Y8ofIJW//TT878fvvufyUX38lYH2Wd43+TBFKZvqEn5yl2H4nyft
UD9xUKWHFcnk3eCkBe47YG8scIrK55nJxP1/UCzc29PVehEbMp9w11uVVPWyl1GQ2UB+1YcZgDd3
PenPh7/uOT8ltVLgpx1jn7yi9+oQn7jvoxcOvRiQ+3bgT4z3I8fjI0ctnwUeUUPmBWDGL5VBAxc5
am3OL6E1a4/GiIH7FNtDPgFvfvAnbD8M097sW+T6sb+6mNZ8GHWsE9kCG7rr6UudyCrYUOoUFYur
kxOPV6ZQX9K74ILWd+aC1snq/EnVgGV++v5oiX+5LOukP+qGgnOYh5XJKsUFfyTL8e7AqAB4xBf/
lTyF3M4Pvg4efL37g6fBg6e7P/gmePDNDg+mq6a8xaeQ3PGRizLpzGPA7tyTYYiQizNaeO/0ldha
thVn68KqJ6AXAY75Leu+oG8x4iH4nYnGQ/T29u4u8/wG2zqSOzzS3ckjQH7KIK9fhWKUX5byfBOX
msSC6HuaX+N/zmUQbsY7bimchP1Y0S3WVXqVVJd5Nqkh9OCTnbrMiYygB2VO8U5wu2/i/soU6ku6
PE/K5OL8KperwU1KqrnSqndlsbzTXJJicvmyswvNQ7zJMRR7flneNVeaSZOmNb2etPpi7u7tG4QQ
ispHPle0rQqRCx89cm7riJu46FGbjw+Ba8KnDN7kmeAH76C1hW/Q1svop551zT/oGSYaqR70NlOX
OdFIFZS57/57sGm+7xb80LJc4u7C3Rgx9LxomuGVCjsZZMuizL985Z3IMliMv+v6fMUOPAvKsAGP
Qjrx/mgnZ5O8ogfAJlXXAzW6enslucwXX2L6dh2zfFXvkG2VVJNWBsGbsib6ui67TVVBgkeVhDz+
hW/PJFWxr/ERFjukiPkGzotkSeE1c7qtVZgtrcJIzlbZP8temKdFYgSSvn+vuxk9lvuPnwYqy5vu
78Mcol9c5C4v+m6RXPfrpCy6Inf98STd9GMgJlbOOhrTnJEG9Y+P6o87/24bxvWCwQ23Cz4PBGxi
uFj/4Oja80DAtgy7fJ46BARBYADsYj5B6/HWEzkjYx2SHljYYvhnc6fzoN8ZuGlcEz720exp3nys
2IlGDO7FpxwywDd305BBgkdHA8izbcjATL99GPTfYnFgzqnHWVZkylq7dH9CV/hNNWeEj6or+bbV
oGacum4s1GnrB/31N1cPy7Yojdm2Vw7l227GSdbpq1FUmrIWB3O931iFJHhUWcizrfIw0/aaw3yT
m31YrDX7Pm7cJVWXuIJlxIk0vSq6titWLBde/YVPb09vZUuUOJEu89sklV8mTqTXeZUlZcliZlXe
iajTVD/j53Sg1TdqVde9LBQSJ9LGXdUsA1qf+1CU6m4FjMEQFHo9LrWs865LBQ9yalR3tcsvpeaR
E+lvbl2t1JuaWZH/Hsp/H8uzizLNxROMOJUOBnJSpVJXwkuOq8Ee6fojPEdCuYI09VjTDJVN/6Eu
+7/Chr7IbZLk+/XXbi2NCBltga5YJdIAgRHZxdpJ7QGtLRNP9XC7pJB30u6KstcVauJ02mKLXYXl
ru4+iGQgtfUk6VJaj6dF0srvtOY3/JqAqkXcxBOk8Ds/0ARpE4iJlft/OTvhrtiDIPoQMLTHBycG
5g4BhQcXcN1A+hAweBSDG9OQPgQMGS09DmYOAoQOE1+Pj/0/z8+Xcqtm+fBOzeeBwDYB+CsifQgY
aNRgLNCBOkhNoPEEFQHkYRqkeR/XB3whbA3iDUhAH2SpjcxOGM6QPgQMMW89DmYOAeR3C+T3AwJh
ix0GNKQPAkMmBgCEuUNACWcfHk6QcghIFSOpDgQgmFB5IDbhEIBo/uahIHkQ8xgnimAdA3kIEDh1
9BiAOoh9boK9p5sCvT+TUUxTbDCKkT7Ifoq+kdXBXgmsGwCEgTiIIQjrE3jnTDoOlPg8EFpqC+1h
2gGvt3AERewfRkGOxt7IF11T3mTojkz0Dg/dJOU6p4eQ3vGhzjy0KQbT+CGwIJf4ENHbH2o4elOD
sZu2ZG+7i8T1+ATRB3l98Mv49hjEFuQdBDcC4B1f7r3tkWG+6Bp6BukdHurKm6FfwYeQ3uGh/vYD
nR5BcvsjaPfgM0Rvf+h6VVGrAmr7A/na5dcJPkL0LtqUrIusOOyyaQ0reuD9jbvVvKplVpVkXUdW
VnRpAxYYaJIv02ya6vJsU6d7MuGSKY/OOdToF7PbmL0jkxPtvtDoYruHTQ8a/mUAliGQRyEcCqg7
hk5RuiXpaqT7kC5BPnP8euWLXMhfiujFrVdaJDczaTrUIOQl47ub3wmI7S4PuK48ucvDeBl8IpeH
cbET7azyTueU26o+zEeXb95ZVdmj+6Gcbdv+quTzxI5Zp96cNipNWYurvL+qs42VKKJHFaZc26qQ
s02++cwF2+3nrD73Iez6ol/3+TkWLtuSm2S6HYelnfuQg4OwayC2IG/QbRTqFpyPD8gbcHCLnWwe
lknXnXNkQ95DDBIlb593vWxuIjPxNt64xg60kbcZxuQKHmB9a2MLg7WuTZKDTBk3t2S8kXuT6CBW
udwE2T28CfKZVjvCbxQWPYKkQ4CiTgHdaTu9e3oXm5jeLpzt3tgYP/b+6R2M1WcEO3l/8nc5uTH0
sCuZyBzaXPCk4262XjXg9b7wkXiHucqGAfg3VATi2Q7SIdfKZzgeDNVXfnIDMWBloBkmOhm9xkWW
LyFDXXWLqv7gH8nqKn/1LxTjeJVX/Tda8Df0k//66imqcVqb8mGh07g8Ftlmd0efvsUvsci2uzkO
ebI63SHX5JYSlGrNpEsf8ZiPucL92CIZsorE0yJ576d3JAFaPdOSu3otMuLUsPIwb8WSQk7jeELY
Y/WgEt76N/W5cW/qjV/Z2ngbrgNvQ4hQzBIIL8+SmyL/YK0x4Sc2toJKP5CltQHDtKo9/xh4Kde5
Xz68z/2ZIMB3ARA8dQgI+AF6CO9pwe75fQ7oO8cIGUAfxKClDgVsHKQPAUP7Lb1s80BbU9RH8kLo
YfbX1+LXuD6UX+Ojt4o8DwQdW+AoOnOfYLZDD9NxZ0cdDn308tlJwzcNj9891b+E7BcMOxnu0NNP
brWPhqWJbM1RqZMdDQHzb9JjIY3fW9h8MIRFj5/mwFxbD4dQtumPfVDB1qSkNDHUiJ3aEX30y4dy
Rd8IY3IFDzB28Gvjux498yk7b/RIZ57eqaNhvaffLnnwqqbaMHlQ8FRbJtIHTH4W7e1HD6O93eU0
2tudjqO9faJzZm8fXTLhLO/qJMOJZbsufHulHN8s5Kzk4tV3Lk96OBK0qPIPi8u8GiCmi+W6gvuX
/JVGiy/SOl9+4X/jCyz7ix2fo6tzPudRiq/xWY+Wdf85z6V1tSyqz3q0rC/fFdef8+RNWt98znPr
xl99NXpy+m3Qt0+wB/p24u+5T8v+emOoEBQ8HgXE59kaKgQybT9bivkeXAH0kXzThx6BYnc7gwp5
ZYsNmKlDiQRoDhVKZAOIiZX7uGkSGhcfYXe8aOTZztbFA5paJezxAPkpwTrgAfV7ogIW4VND6h+P
347Srk3S+BoUCHrmL0Hpr3wgtIHy6pA3zGqxeNK2O1VEj1GxU0X0oM52gpBlpQQZ84W93quwL1/9
H1BLAQIXAxQAAAAIAImkRTGksC5Kaw8AACBOAAATAA0AAAAAAAEAAACkgQAAAABwZC5jb25maWd1
cmUub3V0cHV0VVQFAAOh6WJBVXgAAFBLAQIXAxQAAAAIADKlRTENh3XUgw0AANRuAAAUAA0AAAAA
AAEAAACkgbEPAABwZC5tYWtlLmNoZWNrLm91dHB1dFVUBQAD3+piQVV4AABQSwECFwMUAAAACAAH
pUUxf89xzp4iAAAwgAEADgANAAAAAAABAAAApIF7HQAAcGQubWFrZS5vdXRwdXRVVAUAA43qYkFV
eAAAUEsFBgAAAAADAAMA5gAAAFpAAAAAAA==
--=-=-=



-- 
Photons have mass!!??
I didn't even know they were Catholic...


--=-=-=--

From ripley at stats.ox.ac.uk  Tue Oct  5 21:03:12 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct  5 21:03:16 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
In-Reply-To: <20041005185551.0DCF6EAC0@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410051959550.13396-100000@gannet.stats>

Why do you think this is a bug in R?  Have you read what the FAQ says
about BUGS?

R 2.0.0 has been under alpha/beta test for a month and has been tested on
scores of Linux boxes.  It looks like a problem with your Linux
installation to me, specifically with your tcltk installation in the first
instance.

On Tue, 5 Oct 2004 patrick.drechsler@gmx.net wrote:

> Hi,
> 
> I just tried to compile the new release today and encountered
> some problems:
> 
> --8<------------------------schnipp------------------------->8---
> patrick@trurl:~/src/r-project/R-2.0.0> ./configure > pd.configure.output
> patrick@trurl:~/src/r-project/R-2.0.0> make > pd.make.output
> /usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld:
> tcltk.so: undefined versioned symbol name _LIB_VERSION@@GLIBC_2.0
> /usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld:
> failed to set dynamic section sizes: Bad value collect2: ld returned 1
> exit status make[5]: *** [tcltk.so] Fehler 1 make[4]: *** [all] Fehler 2
> make[3]: *** [all] Fehler 1 make[2]: *** [R] Fehler 1 make[1]: *** [R]
> Fehler 1 make: *** [R] Fehler 1 patrick@trurl:~/src/r-project/R-2.0.0>
> make check > pd.make.check.output make[4]: *** [base-Ex.Rout] Fehler 1
> make[3]: *** [test-Examples-Base] Fehler 2 make[2]: *** [test-Examples]
> Fehler 2 make[1]: *** [test-all-basics] Fehler 1 make: *** [check]
> Fehler 2
> --8<------------------------schnapp------------------------->8---
> 
> I had no problems compiling earlier versions. I've attached a
> zip file with the complete output of the usual procedure of
> `./configure', `make' and `make check'. Drop me a line in case
> you need more info.
> 
> system: Linux 2.4.20 (SuSE 8.2 Prof)
> 
> TIA
> 
> Patrick
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From matthias.burger at epigenomics.com  Tue Oct  5 21:17:30 2004
From: matthias.burger at epigenomics.com (Matthias Burger)
Date: Tue Oct  5 21:17:39 2004
Subject: [Rd] R 2.0.0: problem: installing --with-package-versions
Message-ID: <4162F34A.9070202@epigenomics.com>


Hello R developers,

installing R 2.0.0 from source on a Linux Debian system (gcc 3.2.2)
  - which worked just fine - I encountered the following problem when trying to
update/install packages with the option --with-package-versions:

example: RUnit 0.4.0 (also on CRAN)

R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions 
RUnit_0.4.0.tar.gz

or after untaring
R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions RUnit

I get
* Installing *source* package 'RUnit' as 'RUnit_0.4.0' ...
** R
** inst
** save image
Error in loadNamespace(package, lib.loc, keep.source, TRUE, TRUE) :
         package 'RUnit' does not have a name space
Execution halted
ERROR: execution of package source for 'RUnit' failed

This happens only with the --with-package-versions option.
I scanned the manual and ?INSTALL but did not find mention of this behaviour.

Any suggestion what I have overlooked or how to cure the failure?


Regards,

   Matthias


 >version
          _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    2
minor    0.0
year     2004
month    10
day      04
language R

-- 
Matthias Burger                     Project Manager/ Biostatistician
Epigenomics AG    Kleine Praesidentenstr. 1    10178 Berlin, Germany
phone:+49-30-24345-371                          fax:+49-30-24345-555
http://www.epigenomics.com           matthias.burger@epigenomics.com

From patrick.drechsler at gmx.net  Tue Oct  5 21:25:01 2004
From: patrick.drechsler at gmx.net (Patrick Drechsler)
Date: Tue Oct  5 21:28:01 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
In-Reply-To: <Pine.LNX.4.44.0410051959550.13396-100000@gannet.stats> (Brian
	Ripley's message of "Tue, 5 Oct 2004 20:03:12 +0100 (BST)")
References: <Pine.LNX.4.44.0410051959550.13396-100000@gannet.stats>
Message-ID: <m3k6u53r3m.fsf@pdrechsler.fqdn.th-h.de>

Thanks fofr the quick reply!

Brian Ripley wrote on 05 Oct 2004 20:03:12 MET:

> Why do you think this is a bug in R?

Sorry, it was not my intention to imply this was a bug. I just
figured that people reading the bug list might be able to help
me. I didn't figure this would be a problem for the general r
list so I posted here. Developers of other programming
environments prefer that these kind of problems be sent in as
"bugs" even if they are not bugs in the correct usage of the
word.

> Have you read what the FAQ says about BUGS?

Yes. Otherwise I wouldn't have found the address in the first
place ;-)

> R 2.0.0 has been under alpha/beta test for a month and has been
> tested on scores of Linux boxes.  It looks like a problem with
> your Linux installation to me, specifically with your tcltk
> installation in the first instance.

Could you advice a correct mailing list/newsgroup/link for my
specific problem?

I don't have any experience in tcltk. Other than it doing its job
up to now...

TIA

Patrick
-- 
For animals, the entire universe has been neatly divided into things
to (a) mate with, (b) eat, (c) run away from, and (d) rocks.
        -- (Terry Pratchett, Equal Rites)

From ripley at stats.ox.ac.uk  Tue Oct  5 21:33:49 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct  5 21:34:00 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
In-Reply-To: <m3k6u53r3m.fsf@pdrechsler.fqdn.th-h.de>
Message-ID: <Pine.LNX.4.44.0410052031160.13559-100000@gannet.stats>

On Tue, 5 Oct 2004, Patrick Drechsler wrote:

> Thanks fofr the quick reply!
> 
> Brian Ripley wrote on 05 Oct 2004 20:03:12 MET:
> 
> > Why do you think this is a bug in R?
> 
> Sorry, it was not my intention to imply this was a bug. I just
> figured that people reading the bug list might be able to help
> me. I didn't figure this would be a problem for the general r
> list so I posted here. Developers of other programming

You could use the R-devel list.  By posting to R-bugs you _did_ imply it
was a bug. The posting guide does make the point.

Bug reports get copied to the R-devel list, so someone there may have 
relevant experience.  But this does look very like a mismatch between some 
components on your installation.

> environments prefer that these kind of problems be sent in as
> "bugs" even if they are not bugs in the correct usage of the
> word.
> 
> > Have you read what the FAQ says about BUGS?
> 
> Yes. Otherwise I wouldn't have found the address in the first
> place ;-)
> 
> > R 2.0.0 has been under alpha/beta test for a month and has been
> > tested on scores of Linux boxes.  It looks like a problem with
> > your Linux installation to me, specifically with your tcltk
> > installation in the first instance.
> 
> Could you advice a correct mailing list/newsgroup/link for my
> specific problem?
> 
> I don't have any experience in tcltk. Other than it doing its job
> up to now...
> 
> TIA
> 
> Patrick
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Oct  5 22:16:04 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct  5 22:16:10 2004
Subject: [Rd] R 2.0.0: problem: installing --with-package-versions
In-Reply-To: <4162F34A.9070202@epigenomics.com>
Message-ID: <Pine.LNX.4.44.0410052047180.13559-100000@gannet.stats>

It seems that if you first install this without --with-package-versions
then with and then remove the first version, it works.

Here is a patch, shortly to appear in R-patched/R-devel:

--- INSTALL.in  (revision 31298)
+++ INSTALL.in  (working copy)
@@ -601,10 +601,10 @@
     ## is no namespace).  Argh.
     ## </NOTE>
     save_image_defaults="list(compress=TRUE, safe=FALSE)"
-    code_file="${R_PACKAGE_DIR}/R/${R_PACKAGE_NAME}"
+    code_file="${R_PACKAGE_DIR}/R/${pkg_name}"
     rda_file="${R_PACKAGE_DIR}/R/all.rda"
     if test -f NAMESPACE; then
-      code_cmd="echo invisible(.libPaths(c(\"${lib}\", .libPaths()))); 
.getRequiredPackages(); saveNamespaceImage(\"${pkg_name}\", 
\"${rda_file}\", \"${lib}\")"
+      code_cmd="echo invisible(.libPaths(c(\"${lib}\", .libPaths()))); 
.getRequiredPackages(); saveNamespaceImage(\"${R_PACKAGE_NAME}\", 
\"${rda_file}\", \"${lib}\")"
       loader_file=nsrdaload.R
       R_save_args="--vanilla --slave"
     else


On Tue, 5 Oct 2004, Matthias Burger wrote:

> 
> Hello R developers,
> 
> installing R 2.0.0 from source on a Linux Debian system (gcc 3.2.2)
>   - which worked just fine - I encountered the following problem when trying to
> update/install packages with the option --with-package-versions:
> 
> example: RUnit 0.4.0 (also on CRAN)
> 
> R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions 
> RUnit_0.4.0.tar.gz
> 
> or after untaring
> R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions RUnit
> 
> I get
> * Installing *source* package 'RUnit' as 'RUnit_0.4.0' ...
> ** R
> ** inst
> ** save image
> Error in loadNamespace(package, lib.loc, keep.source, TRUE, TRUE) :
>          package 'RUnit' does not have a name space
> Execution halted
> ERROR: execution of package source for 'RUnit' failed
> 
> This happens only with the --with-package-versions option.
> I scanned the manual and ?INSTALL but did not find mention of this behaviour.
> 
> Any suggestion what I have overlooked or how to cure the failure?
> 
> 
> Regards,
> 
>    Matthias
> 
> 
>  >version
>           _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    2
> minor    0.0
> year     2004
> month    10
> day      04
> language R
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Wed Oct  6 00:40:36 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Oct  6 00:42:56 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 [incl. output]
	(PR#7264)
In-Reply-To: <20041005185836.AB69EEAC0@slim.kubism.ku.dk>
References: <20041005185836.AB69EEAC0@slim.kubism.ku.dk>
Message-ID: <x2is9ou6u3.fsf@biostat.ku.dk>

patrick.drechsler@gmx.net writes:

> --=-=-=
> 
> Sorry, forgot to attach the file...
> 
> 
> --=-=-=
> Content-Type: application/zip
> Content-Disposition: attachment; filename=pdcompilelog.zip
> Content-Transfer-Encoding: base64
> 
> UEsDBBQAAAAIAImkRTGksC5Kaw8AACBOAAATABUAcGQuY29uZmlndXJlLm91dHB1dFVUCQADoeli
> QY3pYkFVeAQA9AFkAOVcbY/bNhL+nl8hFAc0vcR2Nt1kgwJ3QLLrtm73JdjNHRb3xaApymYskapE
> rdf59TdDirJeKJkyisMdrmi7NucZznA0HA6HlOmG0S0X6yCSWUCCTw9XEyqTlCi+ilnARa5IHE+n

Unfortunately, zipped attachements tend to come through as above, if
at all. There are ways around it, but you're not exactly motivating
people to chip in. (Remember that you want *them* to do *you* a favour.)

You might be better off extracting a little more context around the
place where it goes wrong. Or, push coming to shove, give us the log
in plain text.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From michele.alzetta at gmail.com  Wed Oct  6 01:27:44 2004
From: michele.alzetta at gmail.com (Michele Alzetta)
Date: Wed Oct  6 01:27:47 2004
Subject: [Rd] possible help.start() bug
Message-ID: <8079280b041005162739019404@mail.gmail.com>

I have compiled R 2.0.0 for my gentoo desktop and have found this problem:

help.start() will work correcly if mozilla is already started, will
fail if mozilla is not.

Error message:

> help.start()
Making links in per-session dir ...
If /usr/bin/mozilla is already running, it is *not* restarted, and you
    must switch to its window.
Otherwise, be patient ...
> No running windows found
Error: No running window found.

Is this reproducible on other systems ?

-- 
Michele Alzetta

From cberry at tajo.ucsd.edu  Wed Oct  6 01:43:45 2004
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Wed Oct  6 01:43:49 2004
Subject: [Rd] possible help.start() bug
In-Reply-To: <8079280b041005162739019404@mail.gmail.com>
References: <8079280b041005162739019404@mail.gmail.com>
Message-ID: <Pine.LNX.4.60.0410052334540.17354@tajo.ucsd.edu>

On Wed, 6 Oct 2004, Michele Alzetta wrote:

> I have compiled R 2.0.0 for my gentoo desktop and have found this problem:
>
> help.start() will work correcly if mozilla is already started, will
> fail if mozilla is not.
>
> Error message:
>
>> help.start()
> Making links in per-session dir ...
> If /usr/bin/mozilla is already running, it is *not* restarted, and you
>    must switch to its window.
> Otherwise, be patient ...
>> No running windows found
> Error: No running window found.
>
> Is this reproducible on other systems ?

On my gentoo sparc:

platform sparc64-unknown-linux-gnu
arch     sparc64
os       linux-gnu
system   sparc64, linux-gnu
status
major    2
minor    0.0
year     2004
month    10
day      04
language R

behavior is the same UNLESS mozilla is already running in which case

 	file:///tmp/Rtmpzu1Um5/.R/doc/html/index.html

is displayed.


help.start() works just fine from my x86 linux box:
          _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    2
minor    0.0
year     2004
month    10
day      04
language R


Chuck

Charles C. Berry                        (858) 534-2098
                                          Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0717

From znmeb at aracnet.com  Wed Oct  6 04:22:46 2004
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Wed Oct  6 04:23:06 2004
Subject: [Rd] possible help.start() bug
In-Reply-To: <8079280b041005162739019404@mail.gmail.com>
References: <8079280b041005162739019404@mail.gmail.com>
Message-ID: <1097029365.5183.8.camel@localhost>

On Tue, 2004-10-05 at 16:27, Michele Alzetta wrote:
> I have compiled R 2.0.0 for my gentoo desktop and have found this problem:
> 
> help.start() will work correcly if mozilla is already started, will
> fail if mozilla is not.
> 
> Error message:
> 
> > help.start()
> Making links in per-session dir ...
> If /usr/bin/mozilla is already running, it is *not* restarted, and you
>     must switch to its window.
> Otherwise, be patient ...
> > No running windows found
> Error: No running window found.
> 
> Is this reproducible on other systems ?

I have Gentoo on an x86 and it does the same thing. Moreover, it's been
that way for 1.9.1 as well. It may be some permissions issue; when you
install the Gentoo R ebuild, you do so as "root", and for that matter,
you install packages to the library as "root" too. 

I haven't tried this on any other versions of Linux recently. My dim
memory from Dirk Eddelbuettel's Debian-based Quantian is that it works
fine there. Dirk, any comments? 

I'll take a look at the 1.9.1 install on my Gentoo systems and see if I
can figure out what's happening. I use Firefox rather than Mozilla as my
browser, and 

help.start(browser="firefox") 

exhibits the same behavior ... if it's running, it works, if it isn't,
it doesn't start.

From znmeb at aracnet.com  Wed Oct  6 04:56:10 2004
From: znmeb at aracnet.com (M. Edward Borasky)
Date: Wed Oct  6 04:56:18 2004
Subject: [Rd] possible help.start() bug
In-Reply-To: <8079280b041005162739019404@mail.gmail.com>
References: <8079280b041005162739019404@mail.gmail.com>
Message-ID: <1097031370.5183.19.camel@localhost>

On Tue, 2004-10-05 at 16:27, Michele Alzetta wrote:
> I have compiled R 2.0.0 for my gentoo desktop and have found this problem:
> 
> help.start() will work correcly if mozilla is already started, will
> fail if mozilla is not.
> 
> Error message:
> 
> > help.start()
> Making links in per-session dir ...
> If /usr/bin/mozilla is already running, it is *not* restarted, and you
>     must switch to its window.
> Otherwise, be patient ...
> > No running windows found
> Error: No running window found.
> 
> Is this reproducible on other systems ?

Good news ... it isn't an R problem, it's a Gentoo problem! I reproduced
it with both Firefox and Mozilla on my Gentoo x86 system with both R
1.9.1 and R 2.0.0. I'll go ahead and file the problem as a Gentoo bug,
since I have an account there and I'm their resident R exponent.

Briefly, what is happening is that Gentoo replaces "/usr/bin/mozilla"
and "/usr/bin/firefox" with a symbolic link to their "mozilla-launcher".
The launcher is a shell script which interprets the command line and is
supposed to fire up the right binary. It doesn't when called by
"help.start", and I didn't spend the time to figure out why. 

Meanwhile, if you know where Gentoo has hidden the Mozilla binary, or if
you're willing to settle for another browser, just use the actual binary
name in your "help.start(browser=<binary>)" and it will work. On my
system, running Firefox 1.0 pre-release, the following command worked:

> help.start(browser="/usr/lib/MozillaFirefox/firefox-bin")

From gcorral at ifc.unam.mx  Wed Oct  6 08:08:42 2004
From: gcorral at ifc.unam.mx (Gustavo Corral)
Date: Wed Oct  6 08:12:41 2004
Subject: [Rd] Favor
Message-ID: <1097042922.41638beacf475@webmail.ifc.unam.mx>


Hello:

I want to write my thesis about the design and implementation of R, but I have
not  enough information and that's why I'm looking for the article "Lexical
Scope and Statistical Computing" from Gentleman, but I don't want for the
moment
subscribe me to the American Statistical Association to download the article.
Could anyone of you send me that article??

Thanks
Gustavo Corral

From ligges at statistik.uni-dortmund.de  Wed Oct  6 08:22:11 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Oct  6 08:22:23 2004
Subject: [Rd] Favor
In-Reply-To: <1097042922.41638beacf475@webmail.ifc.unam.mx>
References: <1097042922.41638beacf475@webmail.ifc.unam.mx>
Message-ID: <41638F13.6060601@statistik.uni-dortmund.de>

Gustavo Corral wrote:

> Hello:
> 
> I want to write my thesis about the design and implementation of R,

Great! What kind of contributions to R's implementation can we expect?

If you are not yet certain, there are many proposals on the page 
http://developer.r-project.org/ , some of those untackled yet...

Uwe Ligges


 > but I have
> not  enough information and that's why I'm looking for the article "Lexical
> Scope and Statistical Computing" from Gentleman, but I don't want for the
> moment
> subscribe me to the American Statistical Association to download the article.
> Could anyone of you send me that article??
> 
> Thanks
> Gustavo Corral
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From patrick.drechsler at gmx.net  Wed Oct  6 09:21:03 2004
From: patrick.drechsler at gmx.net (Patrick Drechsler)
Date: Wed Oct  6 09:30:53 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
References: <20041005185551.0DCF6EAC0@slim.kubism.ku.dk>
	<Pine.LNX.4.44.0410051959550.13396-100000@gannet.stats>
Message-ID: <m3vfdouxb4.fsf@pdrechsler.fqdn.th-h.de>


Brian Ripley wrote on 05 Oct 2004 20:03:12 MET:

> On Tue, 5 Oct 2004 patrick.drechsler@gmx.net wrote:
>
>> I just tried to compile the new release today and encountered
>> some problems:
>> 
>> --8<------------------------schnipp------------------------->8---
>> patrick@trurl:~/src/r-project/R-2.0.0> make > pd.make.output
>> /usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld:
>> tcltk.so: undefined versioned symbol name _LIB_VERSION@@GLIBC_2.0
[snip]
>> --8<------------------------schnapp------------------------->8---

> It looks like a problem with your Linux installation to me,
> specifically with your tcltk installation in the first
> instance.

Following your advice and compiling R with the configure option
`--without-tcltk' seems to have solved my problem.

Thanks

Patrick
-- 
When I got my first television set, I stopped caring
so much about having close relationships.  
                  --Andy Warhol

From p.dalgaard at biostat.ku.dk  Wed Oct  6 11:58:23 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Oct  6 12:00:47 2004
Subject: [Rd] compilation problem R2.0.0 Linux SuSE8.2 (PR#7263)
In-Reply-To: <m3vfdouxb4.fsf@pdrechsler.fqdn.th-h.de>
References: <20041005185551.0DCF6EAC0@slim.kubism.ku.dk>
	<Pine.LNX.4.44.0410051959550.13396-100000@gannet.stats>
	<m3vfdouxb4.fsf@pdrechsler.fqdn.th-h.de>
Message-ID: <x2r7oc88xs.fsf@biostat.ku.dk>

Patrick Drechsler <patrick.drechsler@gmx.net> writes:

> Brian Ripley wrote on 05 Oct 2004 20:03:12 MET:
> 
> > On Tue, 5 Oct 2004 patrick.drechsler@gmx.net wrote:
> >
> >> I just tried to compile the new release today and encountered
> >> some problems:
> >> 
> >> --8<------------------------schnipp------------------------->8---
> >> patrick@trurl:~/src/r-project/R-2.0.0> make > pd.make.output
> >> /usr/lib/gcc-lib/i486-suse-linux/3.3/../../../../i486-suse-linux/bin/ld:
> >> tcltk.so: undefined versioned symbol name _LIB_VERSION@@GLIBC_2.0
> [snip]
> >> --8<------------------------schnapp------------------------->8---
> 
> > It looks like a problem with your Linux installation to me,
> > specifically with your tcltk installation in the first
> > instance.
> 
> Following your advice and compiling R with the configure option
> `--without-tcltk' seems to have solved my problem.


...except that you now have a version without Tcl/Tk support of
course. Would have been nicer to get to the bottom of things.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From andy_liaw at merck.com  Wed Oct  6 13:22:36 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Oct  6 13:24:20 2004
Subject: [Rd] Favor
Message-ID: <3A822319EB35174CA3714066D590DCD504AF84D7@usrymx25.merck.com>

> From: Gustavo Corral
> 
> Hello:
> 
> I want to write my thesis about the design and implementation 
> of R, but I have
> not  enough information and that's why I'm looking for the 
> article "Lexical
> Scope and Statistical Computing" from Gentleman, but I don't 
> want for the
> moment
> subscribe me to the American Statistical Association to 
> download the article.
> Could anyone of you send me that article??

Whatever you want to do is your choice, but please don't publicly ask others
to violate copyright laws.

Andy

 
> Thanks
> Gustavo Corral
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>

From wolfram at fischer-zim.ch  Wed Oct  6 14:26:35 2004
From: wolfram at fischer-zim.ch (wolfram@fischer-zim.ch)
Date: Wed Oct  6 14:26:40 2004
Subject: [Rd] [R] dataset "swiss": new url (PR#7265)
Message-ID: <20041006122635.84109F536@slim.kubism.ku.dk>

The URL cited in help("swiss")
	http://opr.princeton.edu/archive/eufert/switz.html

seems to have changed to:
	http://opr.princeton.edu/archive/pefp/switz.asp

Wolfram

From ripley at stats.ox.ac.uk  Wed Oct  6 15:09:09 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct  6 15:09:19 2004
Subject: [Rd] [R] dataset "swiss": new url (PR#7265)
In-Reply-To: <20041006122635.84109F536@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410061406240.24845-100000@gannet.stats>

I disagree.  It is a valid URL which responds, it just seems currently
broken.  Have you reported the breakage to them?

On Wed, 6 Oct 2004 wolfram@fischer-zim.ch wrote:

> The URL cited in help("swiss")
> 	http://opr.princeton.edu/archive/eufert/switz.html
> 
> seems to have changed to:
> 	http://opr.princeton.edu/archive/pefp/switz.asp


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kjetil at acelerate.com  Wed Oct  6 16:14:15 2004
From: kjetil at acelerate.com (Kjetil Brinchmann Halvorsen)
Date: Wed Oct  6 16:14:17 2004
Subject: [Rd] problems with bitmap images in windows XP
Message-ID: <4163FDB7.8030003@acelerate.com>

This is rw2000 on windowsXP

 jpeg("test.jpeg", bg="orangered")
 plot(1:10, 1:10, col="green")
 dev.off()

------

jpeg("test.jpeg", bg="blue")
 plot(1:10, 1:10, col="red")
 dev.off()

-------

 jpeg("test.jpeg", bg="green")
 plot(1:10, 1:10, col="red")
 dev.off()

---

jpeg("test.jpeg", bg="white")
 plot(1:10, 1:10, col="red")
 dev.off()

Now, all of this gives a bluish background when wieved with Windows 
Picture and Fax wiever or with the GIMP-2.0
The bg= argument does not seem to have any effect.

Now repeating in rw191:

jpeg("test.jpeg", bg="orangered")
 plot(1:10, 1:10, col="blue")
 dev.off()

and the background is blue (not the same "bluish" as above)

jpeg("test.jpeg", bg="blue")
 plot(1:10, 1:10, col="red")
 dev.off()

and the background color is red.

Similar symptoms with the other bitmap devices.

The only mention about bitmap devices in the NEWS file for R2.0.0 is

 o    The png() and jpeg() devices (and the bmp() device under Windows)
    now allow a nominal resolution to be recorded in the file.

So what has happened?

Kjetil




-- 

Kjetil Halvorsen.

Peace is the most effective weapon of mass construction.
               --  Mahdi Elmandjra

From matthias.burger at epigenomics.com  Wed Oct  6 16:55:56 2004
From: matthias.burger at epigenomics.com (Matthias Burger)
Date: Wed Oct  6 16:56:00 2004
Subject: [Rd] R 2.0.0: problem: installing --with-package-versions
In-Reply-To: <Pine.LNX.4.44.0410052047180.13559-100000@gannet.stats>
References: <Pine.LNX.4.44.0410052047180.13559-100000@gannet.stats>
Message-ID: <4164077C.3030009@epigenomics.com>


following the given advice by Brian Ripley I first tried the variant
i) install once without --with-package-versions
    repeat with --with-package-versions
    remove the package folder without the version info

which did not work for me (see details below).


ii) patch $R_HOM/lib/R/bin/INSTALL as suggested (well I did not reinstall from 
INSTALL.in as was implied)
and install with --with-package-versions set in the first attempt
works and the package loads fine into the R session.


Thank you very much for the prompt and very helpful feedback!

Regards,

   Matthias



Details for i)
in the second installation R issues a warning
* Installing *source* package 'RUnit' as 'RUnit_0.4.0' ...
** R
** inst
** save image

rm: cannot remove 
`/mnt/nfs/local.hm/R/R-2.0.x-libs-EpiR/RUnit_0.4.0/R/RUnit_0.4.0': No such file 
or directory
** preparing package for lazy loading

  RUnit loaded.

** help
  >>> Building/Updating help pages for package 'RUnit'
      Formats: text html latex example
   RUnit-internal                    text    html    latex
   RUnit-intro                       text    html    latex
   checkFuncs                        text    html    latex   example
[...]

In R
this results in (fresh R 2.0.0 session)
 > library("RUnit_0.4.0")
Error in gzfile(file, "rb") : unable to open connection
In addition: Warning message:
cannot open compressed file `/mnt/local/R/R-2.0.x-libs-EpiR/RUnit_0.4.0/R/RUnit.rdx'
Error: Unable to load R code in package 'RUnit_0.4.0'
Error in library("RUnit_0.4.0") : package/namespace load failed for 'RUnit'

or with lib.loc provided additional (also .libPaths() knows of this location)
 > library("RUnit_0.4.0", lib.loc="/mnt/local/R/R-2.0.x-libs-EpiR")
Error in gzfile(file, "rb") : unable to open connection
In addition: Warning message:
cannot open compressed file `/mnt/local/R/R-2.0.x-libs-EpiR/RUnit_0.4.0/R/RUnit.rdx'
Error: Unable to load R code in package 'RUnit_0.4.0'
Error in library("RUnit_0.4.0", lib.loc = "/mnt/local/R/R-2.0.x-libs-EpiR") :
         package/namespace load failed for 'RUnit'





Prof Brian Ripley wrote:
> It seems that if you first install this without --with-package-versions
> then with and then remove the first version, it works.
> 
> Here is a patch, shortly to appear in R-patched/R-devel:
> 
> --- INSTALL.in  (revision 31298)
> +++ INSTALL.in  (working copy)
> @@ -601,10 +601,10 @@
>      ## is no namespace).  Argh.
>      ## </NOTE>
>      save_image_defaults="list(compress=TRUE, safe=FALSE)"
> -    code_file="${R_PACKAGE_DIR}/R/${R_PACKAGE_NAME}"
> +    code_file="${R_PACKAGE_DIR}/R/${pkg_name}"
>      rda_file="${R_PACKAGE_DIR}/R/all.rda"
>      if test -f NAMESPACE; then
> -      code_cmd="echo invisible(.libPaths(c(\"${lib}\", .libPaths()))); 
> .getRequiredPackages(); saveNamespaceImage(\"${pkg_name}\", 
> \"${rda_file}\", \"${lib}\")"
> +      code_cmd="echo invisible(.libPaths(c(\"${lib}\", .libPaths()))); 
> .getRequiredPackages(); saveNamespaceImage(\"${R_PACKAGE_NAME}\", 
> \"${rda_file}\", \"${lib}\")"
>        loader_file=nsrdaload.R
>        R_save_args="--vanilla --slave"
>      else
> 
> 
> On Tue, 5 Oct 2004, Matthias Burger wrote:
> 
> 
>>Hello R developers,
>>
>>installing R 2.0.0 from source on a Linux Debian system (gcc 3.2.2)
>>  - which worked just fine - I encountered the following problem when trying to
>>update/install packages with the option --with-package-versions:
>>
>>example: RUnit 0.4.0 (also on CRAN)
>>
>>R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions 
>>RUnit_0.4.0.tar.gz
>>
>>or after untaring
>>R20 CMD INSTALL -l /mnt/local/R/R-2.0.x-libs-EpiR --with-package-versions RUnit
>>
>>I get
>>* Installing *source* package 'RUnit' as 'RUnit_0.4.0' ...
>>** R
>>** inst
>>** save image
>>Error in loadNamespace(package, lib.loc, keep.source, TRUE, TRUE) :
>>         package 'RUnit' does not have a name space
>>Execution halted
>>ERROR: execution of package source for 'RUnit' failed
>>
>>This happens only with the --with-package-versions option.
>>I scanned the manual and ?INSTALL but did not find mention of this behaviour.
>>
>>Any suggestion what I have overlooked or how to cure the failure?
>>
>>
>>Regards,
>>
>>   Matthias
>>
>>
>> >version
>>          _
>>platform i686-pc-linux-gnu
>>arch     i686
>>os       linux-gnu
>>system   i686, linux-gnu
>>status
>>major    2
>>minor    0.0
>>year     2004
>>month    10
>>day      04
>>language R
>>
>>
> 
> 

-- 
Matthias Burger                     Project Manager/ Biostatistician
Epigenomics AG    Kleine Praesidentenstr. 1    10178 Berlin, Germany
phone:+49-30-24345-371                          fax:+49-30-24345-555
http://www.epigenomics.com           matthias.burger@epigenomics.com

From matthias.burger at epigenomics.com  Wed Oct  6 18:00:44 2004
From: matthias.burger at epigenomics.com (Matthias Burger)
Date: Wed Oct  6 18:00:58 2004
Subject: [Rd] R 2.0.0: namespaces,
 S4 classes & versioned package installation:
 failure to resolve correct pkg version
Message-ID: <416416AC.3020109@epigenomics.com>


Hi,

further down from the problem I asked about yesterday I encounter the following 
problem (please appologize for the lengthy mail - I have not found a brief example
making the issue clear):

  - using R packages making use of namespaces &
  - S4 classes
    when using
    --with-package-versions in the install call:

Pkgs install ok and the first pkg 'base' can be loaded in R (2.0.0) ok but
loading a second pkg 'algo' that defines classes derived from 'base'
fails as 'algo' searches for 'base' in the search path without the version 
extension. The problem does not occur if installed wo --with-package-versions 
option.

The traceback of the actual call is given below, but there is no simple 
reproducible example I have come up with yet.

An reproducible case that might be of some help and give some further insights:
I installed stats4 from the R-source-tree/src/library
with --with-package-versions

In R
 >library("stats4_2.0.0")
 >search()
[1] ".GlobalEnv"           "package:stats4_2.0.0" "package:stats"
[4] "package:graphics"     "package:grDevices"    "package:RUnit_0.4.0"
[7] "package:methods"      "Autoloads"            "package:base"

carrel>obj <- new("mle")
Loading required package: stats4

Attaching package 'stats4':


         The following object(s) are masked from package:stats4_2.0.0 :

          mle
 >class(obj)
[1] "mle"
attr(,"package")
[1] "stats4"


as far as i could understand the problem lies in the 'package' attribute not 
being set to package + version string.

In the call sequence
new -> getClass -> getClassDef: here .requirePackage(package)
is called where package is retrieved from package = packageSlot(Class)

Is this speculation correct or did I make a mistake somewhere else?
Is there any way to teach methods to look for the classes in the versioned 
package in the search path?
Or is this just asking more than can be achieved with the current methods 
implementation?

Any help or suggestion is greatly appreciated.


Regards,

   Matthhias


Motivation:
For ensuring long term reproducible results we so far have used the versioned 
package maintenance concept and certaily would like to continue doing so.


traceback:
library("EpiR.algo_1.4.0")
Loading required package: EpiR.base
Error in as.environment(pkg) : no item called "package:EpiR.base" in the search list
In addition: Warning message:
replacing previous import: filter in: namespaceImportFrom(self, asNamespace(ns))

Call Stack:
1 :  library("EpiR.algo_1.4.0")
2 :  try({
3 :  loadNamespace(package, c(which.lib.loc, lib.loc))
4 :  sys.source(codeFile, env, keep.source = keep.source)
5 :  eval(i, envir)
6 :  eval(expr, envir, enclos)
7 :  .defineRankingClass(where = .where)
8 :  setClass("Ranking", representation("VIRTUAL", rowGroup = "Grouping", 
colGroup = "Grouping"), prototype(rowGroup = newGrouping(), colGroup = 
newGrouping()), vali
9 :  makeClassRepresentation(Class, properties, superClasses, prototype, 
package, validity, access, version, sealed, where = where)
10 :  prototype(rowGroup = newGrouping(), colGroup = newGrouping())
11 :  .prototype(...)
12 :  newGrouping()
13 :  new("Grouping")
14 :  initialize(value, ...)
15 :  initialize(value, ...)
16 :  "@<-"(`*tmp*`, valid, value = TRUE)
17 :  "slot<-"(object, name, TRUE, value)
18 :  checkSlotAssignment(object, name, value)
19 :  getClass(class(obj))
20 :  .requirePackage(package)
21 :  .asEnvironmentPackage(package)
Error in library("EpiR.algo_1.4.0") : package/namespace load failed


info: class Grouping is defined in EpiR.base and used for slot rowGroup,
newGrouping is a simple wrapper to new("Grouping") providing some meaningful 
defaults.

-- 
Matthias Burger                     Project Manager/ Biostatistician
Epigenomics AG    Kleine Praesidentenstr. 1    10178 Berlin, Germany
phone:+49-30-24345-371                          fax:+49-30-24345-555
http://www.epigenomics.com           matthias.burger@epigenomics.com

From svensmail at spray.se  Wed Oct  6 18:04:56 2004
From: svensmail at spray.se (svensmail@spray.se)
Date: Wed Oct  6 18:04:58 2004
Subject: [Rd] R2.0.0 bug in function vcov in library survival (PR#7266)
Message-ID: <20041006160456.19459EABC@slim.kubism.ku.dk>

Full_Name: Sven Sandin
Version: 2.0.0
OS: SuSE Linux 9.0
Submission from: (NULL) (81.227.17.135)


Have just compiled and installed R-2.0.0.tar.gz running SuSE9.0.

The function vcov do not accept "coxph" object as input any longer.

The same R-program running R1.9.1 do work. R-program attached below.

Exporting the coxph object from R2.0.0 to R1.9.1 I get vcov ouput in R1.9.1.
Exporting the coxph object from R1.9.1 to R2.0.0 I get errors in R2.0.0

=========== Copy of the R-program =======================
R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> rm(list=ls())
> load("~/R/wlh0301/data/breast.RData")
> library(survival)
Loading required package: splines
> u2<-coxph(Surv(time,event) ~ age + cbmi + smoker + drink , data=breast.1)
> tmp <- vcov(u2)
Error in vcov(u2) : no applicable method for "vcov"
>
> class(u2)
[1] "coxph"

From ripley at stats.ox.ac.uk  Wed Oct  6 18:29:13 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct  6 18:29:19 2004
Subject: [Rd] R2.0.0 bug in function vcov in library survival (PR#7266)
In-Reply-To: <20041006160456.19459EABC@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410061725330.564-100000@gannet.stats>

Those vcov methods were removed from stats at

2004-08-28 20:40:13 +0100 survival now has vcov.{coxph,survreg}

Looks like they have been removed from survival since: that is where they 
should be.  They are very simple --

vcov.coxph <- vcov.survreg <- function (object, ...) object$var

On Wed, 6 Oct 2004 svensmail@spray.se wrote:

> Full_Name: Sven Sandin
> Version: 2.0.0
> OS: SuSE Linux 9.0
> Submission from: (NULL) (81.227.17.135)
> 
> 
> Have just compiled and installed R-2.0.0.tar.gz running SuSE9.0.
> 
> The function vcov do not accept "coxph" object as input any longer.
> 
> The same R-program running R1.9.1 do work. R-program attached below.
> 
> Exporting the coxph object from R2.0.0 to R1.9.1 I get vcov ouput in R1.9.1.
> Exporting the coxph object from R1.9.1 to R2.0.0 I get errors in R2.0.0
> 
> =========== Copy of the R-program =======================
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
> 
> [Previously saved workspace restored]
> 
> > rm(list=ls())
> > load("~/R/wlh0301/data/breast.RData")
> > library(survival)
> Loading required package: splines
> > u2<-coxph(Surv(time,event) ~ age + cbmi + smoker + drink , data=breast.1)
> > tmp <- vcov(u2)
> Error in vcov(u2) : no applicable method for "vcov"
> >
> > class(u2)
> [1] "coxph"
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Torsten.Hothorn at rzmail.uni-erlangen.de  Wed Oct  6 19:22:46 2004
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed Oct  6 19:23:14 2004
Subject: [Rd] R2.0.0 bug in function vcov in library survival (PR#7266)
In-Reply-To: <20041006160456.19459EABC@slim.kubism.ku.dk>
References: <20041006160456.19459EABC@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.51.0410061921300.24779@artemis.imbe.med.uni-erlangen.de>

>
> Have just compiled and installed R-2.0.0.tar.gz running SuSE9.0.
>
> The function vcov do not accept "coxph" object as input any longer.
>
> The same R-program running R1.9.1 do work. R-program attached below.
>
> Exporting the coxph object from R2.0.0 to R1.9.1 I get vcov ouput in R1.9.1.
> Exporting the coxph object from R1.9.1 to R2.0.0 I get errors in R2.0.0
>
> =========== Copy of the R-program =======================
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
>
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
>
> [Previously saved workspace restored]
>
> > rm(list=ls())
> > load("~/R/wlh0301/data/breast.RData")
> > library(survival)
> Loading required package: splines
> > u2<-coxph(Surv(time,event) ~ age + cbmi + smoker + drink , data=breast.1)
> > tmp <- vcov(u2)
> Error in vcov(u2) : no applicable method for "vcov"
> >
> > class(u2)
> [1] "coxph"
>

S3method(vcov, coxph)

is missing from the NAMESPACE file of package `survival', I think. For the
meantime you may use

R> survival:::vcov.coxph
function (object, ...)
{
    rval <- object$var
    dimnames(rval) <- list(names(coef(object)), names(coef(object)))
    rval
}
<environment: namespace:survival>

Torsten


> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

From tlumley at u.washington.edu  Wed Oct  6 20:06:06 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Oct  6 20:06:22 2004
Subject: [Rd] R2.0.0 bug in function vcov in library survival (PR#7266)
In-Reply-To: <Pine.LNX.4.44.0410061725330.564-100000@gannet.stats>
References: <Pine.LNX.4.44.0410061725330.564-100000@gannet.stats>
Message-ID: <Pine.A41.4.61.0410061103540.346816@homer06.u.washington.edu>

On Wed, 6 Oct 2004, Prof Brian Ripley wrote:

> Those vcov methods were removed from stats at
>
> 2004-08-28 20:40:13 +0100 survival now has vcov.{coxph,survreg}
>
> Looks like they have been removed from survival since: that is where they
> should be.  They are very simple --
>
> vcov.coxph <- vcov.survreg <- function (object, ...) object$var
>

No, they haven't been updated to cope with lazy loading (they are defined 
in a top-level if statement to prevent conflicts in older versions of R).

vcov.coxph is actually
     vcov.coxph<-function (object, ...) {
         rval<-object$var
         dimnames(rval)<-list(names(coef(object)),names(coef(object)))
         rval
     }
since object$var doesn't have dimnames.


 	-thomas

From tlumley at u.washington.edu  Wed Oct  6 20:06:27 2004
From: tlumley at u.washington.edu (tlumley@u.washington.edu)
Date: Wed Oct  6 20:06:29 2004
Subject: [Rd] R2.0.0 bug in function vcov in library survival (PR#7266)
Message-ID: <20041006180627.46D2BF6DA@slim.kubism.ku.dk>

On Wed, 6 Oct 2004, Prof Brian Ripley wrote:

> Those vcov methods were removed from stats at
>
> 2004-08-28 20:40:13 +0100 survival now has vcov.{coxph,survreg}
>
> Looks like they have been removed from survival since: that is where they
> should be.  They are very simple --
>
> vcov.coxph <- vcov.survreg <- function (object, ...) object$var
>

No, they haven't been updated to cope with lazy loading (they are defined 
in a top-level if statement to prevent conflicts in older versions of R).

vcov.coxph is actually
     vcov.coxph<-function (object, ...) {
         rval<-object$var
         dimnames(rval)<-list(names(coef(object)),names(coef(object)))
         rval
     }
since object$var doesn't have dimnames.


 	-thomas

From ripley at stats.ox.ac.uk  Wed Oct  6 20:11:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct  6 20:11:59 2004
Subject: [Rd] Re: R2.0.0 bug in function vcov in library survival (PR#7266)
In-Reply-To: <Pine.A41.4.61.0410061103540.346816@homer06.u.washington.edu>
Message-ID: <Pine.LNX.4.44.0410061908380.4432-100000@gannet.stats>

On Wed, 6 Oct 2004, Thomas Lumley wrote:

> On Wed, 6 Oct 2004, Prof Brian Ripley wrote:
> 
> > Those vcov methods were removed from stats at
> >
> > 2004-08-28 20:40:13 +0100 survival now has vcov.{coxph,survreg}
> >
> > Looks like they have been removed from survival since: that is where they
> > should be.  They are very simple --
> >
> > vcov.coxph <- vcov.survreg <- function (object, ...) object$var
> >
> 
> No, they haven't been updated to cope with lazy loading (they are defined 
> in a top-level if statement to prevent conflicts in older versions of R).
> 
> vcov.coxph is actually
>      vcov.coxph<-function (object, ...) {
>          rval<-object$var
>          dimnames(rval)<-list(names(coef(object)),names(coef(object)))
>          rval
>      }
> since object$var doesn't have dimnames.

As Torsten has suggested, it looks like they were neither registered nor
exported from the survival namespace, but the objects are in the
namespace.  (Nothing to do with lazy-loading, then.)

> library(survival)
Loading required package: splines
> ls(asNamespace("survival"), patt="^vcov")
[1] "vcov.coxph"   "vcov.survreg"

Please register them in the next update.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Oct  6 20:12:06 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Oct  6 20:12:14 2004
Subject: [Rd] Re: R2.0.0 bug in function vcov in library survival (PR#7266)
Message-ID: <20041006181206.7F54FF6DA@slim.kubism.ku.dk>

On Wed, 6 Oct 2004, Thomas Lumley wrote:

> On Wed, 6 Oct 2004, Prof Brian Ripley wrote:
> 
> > Those vcov methods were removed from stats at
> >
> > 2004-08-28 20:40:13 +0100 survival now has vcov.{coxph,survreg}
> >
> > Looks like they have been removed from survival since: that is where they
> > should be.  They are very simple --
> >
> > vcov.coxph <- vcov.survreg <- function (object, ...) object$var
> >
> 
> No, they haven't been updated to cope with lazy loading (they are defined 
> in a top-level if statement to prevent conflicts in older versions of R).
> 
> vcov.coxph is actually
>      vcov.coxph<-function (object, ...) {
>          rval<-object$var
>          dimnames(rval)<-list(names(coef(object)),names(coef(object)))
>          rval
>      }
> since object$var doesn't have dimnames.

As Torsten has suggested, it looks like they were neither registered nor
exported from the survival namespace, but the objects are in the
namespace.  (Nothing to do with lazy-loading, then.)

> library(survival)
Loading required package: splines
> ls(asNamespace("survival"), patt="^vcov")
[1] "vcov.coxph"   "vcov.survreg"

Please register them in the next update.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From tlumley at u.washington.edu  Wed Oct  6 20:17:05 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Oct  6 20:17:25 2004
Subject: [Rd] Re: R2.0.0 bug in function vcov in library survival (PR#7266)
In-Reply-To: <Pine.LNX.4.44.0410061908380.4432-100000@gannet.stats>
References: <Pine.LNX.4.44.0410061908380.4432-100000@gannet.stats>
Message-ID: <Pine.A41.4.61.0410061113260.346816@homer06.u.washington.edu>

On Wed, 6 Oct 2004, Prof Brian Ripley wrote:

> On Wed, 6 Oct 2004, Thomas Lumley wrote:
>
>> No, they haven't been updated to cope with lazy loading (they are defined
>> in a top-level if statement to prevent conflicts in older versions of R).
>>
>> vcov.coxph is actually
>>      vcov.coxph<-function (object, ...) {
>>          rval<-object$var
>>          dimnames(rval)<-list(names(coef(object)),names(coef(object)))
>>          rval
>>      }
>> since object$var doesn't have dimnames.
>
> As Torsten has suggested, it looks like they were neither registered nor
> exported from the survival namespace, but the objects are in the
> namespace.  (Nothing to do with lazy-loading, then.)

True. I misconstrued the advice against top-level code in packages.

 	-thomas

From gb at stat.umu.se  Thu Oct  7 09:00:01 2004
From: gb at stat.umu.se (Gran Brostrm)
Date: Thu Oct  7 09:00:07 2004
Subject: [Rd] sample suggestion
Message-ID: <20041007070001.GA2946@stat.umu.se>

I have been bitten by what is clearly described on the help page for
'sample', namely sampling from a population of size one. I agree that it is
convenient to have an exception if 'length(x) == 1', but my suggestion is
to enforce the exception only if 'x' is numeric. In any case, if x is not
numeric and of length 1, all you get is an error message.

I would like 'sample("tre", 1)' to return "tre", and 'sample(3, 1)' to
return a natural number less than 4. It seems easy to achieve that by
changing the line

if (length(x) == 1 && x >= 1) {

to

if (length(x) == 1 && is.numeric(x) && x >= 1) {

in 'sample'.

Isn't that a good idea? An alternative suggestion would be to implement
'resample' (from the examples) in 'base'.

G?ran

PS. Congratulations to the Core Team for reaching an excellent 2.0.0!   
-- 
 G?ran Brostr?m                    tel: +46 90 786 5223
 Department of Statistics          fax: +46 90 786 6614
 Ume? University                   http://www.stat.umu.se/egna/gb/
 SE-90187 Ume?, Sweden             e-mail: gb@stat.umu.se

From murdoch at stats.uwo.ca  Thu Oct  7 12:45:43 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu Oct  7 12:45:34 2004
Subject: [Rd] sample suggestion
In-Reply-To: <20041007070001.GA2946@stat.umu.se>
References: <20041007070001.GA2946@stat.umu.se>
Message-ID: <d17am010dk3tafv6gtsjbgpu0ste3tne5k@4ax.com>

On Thu, 7 Oct 2004 09:00:01 +0200, gb@stat.umu.se (G?ran Brostr?m)
wrote:

>I have been bitten by what is clearly described on the help page for
>'sample', namely sampling from a population of size one. I agree that it is
>convenient to have an exception if 'length(x) == 1', but my suggestion is
>to enforce the exception only if 'x' is numeric. In any case, if x is not
>numeric and of length 1, all you get is an error message.
>
>I would like 'sample("tre", 1)' to return "tre", and 'sample(3, 1)' to
>return a natural number less than 4. It seems easy to achieve that by
>changing the line
>
>if (length(x) == 1 && x >= 1) {
>
>to
>
>if (length(x) == 1 && is.numeric(x) && x >= 1) {
>
>in 'sample'.
>
>Isn't that a good idea? An alternative suggestion would be to implement
>'resample' (from the examples) in 'base'.

I agree that's a good suggestion; I think it would be even better to
add an extra argument to sample to say how to handle a length 1
population vector, e.g.

sample(x, size, replace = FALSE, prob = NULL, expand = is.numeric(x))

 ...

if (length(x) == 1 && expand && x >= 1) {

so that the resample() example would be simply

sample(x[x > 9], expand = FALSE)


The case of zero-length x would still need to be handled separately,
or generate an error.

Duncan Murdoch

From berwin at maths.uwa.edu.au  Thu Oct  7 15:55:41 2004
From: berwin at maths.uwa.edu.au (Berwin A Turlach)
Date: Thu Oct  7 15:57:33 2004
Subject: [Rd] "R CMD check" with R 2.0.0
Message-ID: <16741.19165.662840.277870@bossiaea.maths.uwa.edu.au>

G'day all,

I am not sure whether I should file this as a bug report, but I
thought that I should make the developers of R aware of the following
feature:

I have just installed R 2.0.0 and when I run "R CMD check" on the
source of some packages, I noticed that the XXX-examples.ps file
contains one page with two graphics overlaid.  This seems to happen
when the first graphic is produced that uses the lattice() package.
I.e. as long as the examples use non-lattice graphics command, each
graphic is on its own page; the first graphic produced by a lattice
command (well, xyplot each time in the packages tested) is put on the
same page as the last graphic, after this, each graphic is again on a
page off its own regardless of whether it was produced by a lattice
graphics command or a non-lattice graphics command.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 2
 minor = 0.0
 year = 2004
 month = 10
 day = 04
 language = R

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics,
 package:grDevices, package:utils, package:datasets, Autoloads,
 package:base

From Roger.Bivand at nhh.no  Thu Oct  7 16:12:13 2004
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Oct  7 16:12:27 2004
Subject: [Rd] "R CMD check" with R 2.0.0
In-Reply-To: <16741.19165.662840.277870@bossiaea.maths.uwa.edu.au>
Message-ID: <Pine.LNX.4.44.0410071609560.32102-100000@reclus.nhh.no>

This is something Edzer Pebesma and I saw working on gstat and sp:

Edzer Pebesma to CRAN 1 October:

"WRT 2.0.0, I noted with gstat, and also with another package under
development (sp for spatial classes) that when mixing
traditional plots and lattice plots in the example sections,
the lattice plot overplots the last traditional plot -- a newpage
misses, so to speak. See gstat.Rcheck/gstat-Examples.ps"

Roger

On Thu, 7 Oct 2004, Berwin A Turlach wrote:

> G'day all,
> 
> I am not sure whether I should file this as a bug report, but I
> thought that I should make the developers of R aware of the following
> feature:
> 
> I have just installed R 2.0.0 and when I run "R CMD check" on the
> source of some packages, I noticed that the XXX-examples.ps file
> contains one page with two graphics overlaid.  This seems to happen
> when the first graphic is produced that uses the lattice() package.
> I.e. as long as the examples use non-lattice graphics command, each
> graphic is on its own page; the first graphic produced by a lattice
> command (well, xyplot each time in the packages tested) is put on the
> same page as the last graphic, after this, each graphic is again on a
> page off its own regardless of whether it was produced by a lattice
> graphics command or a non-lattice graphics command.
> 
> Cheers,
> 
>         Berwin
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = 
>  major = 2
>  minor = 0.0
>  year = 2004
>  month = 10
>  day = 04
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:methods, package:stats, package:graphics,
>  package:grDevices, package:utils, package:datasets, Autoloads,
>  package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no

From deepayan at stat.wisc.edu  Thu Oct  7 16:32:09 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Thu Oct  7 16:31:40 2004
Subject: [Rd] "R CMD check" with R 2.0.0
In-Reply-To: <16741.19165.662840.277870@bossiaea.maths.uwa.edu.au>
References: <16741.19165.662840.277870@bossiaea.maths.uwa.edu.au>
Message-ID: <200410070932.09702.deepayan@stat.wisc.edu>

On Thursday 07 October 2004 08:55, Berwin A Turlach wrote:
> G'day all,
>
> I am not sure whether I should file this as a bug report, but I
> thought that I should make the developers of R aware of the following
> feature:
>
> I have just installed R 2.0.0 and when I run "R CMD check" on the
> source of some packages, I noticed that the XXX-examples.ps file
> contains one page with two graphics overlaid.  This seems to happen
> when the first graphic is produced that uses the lattice() package.
> I.e. as long as the examples use non-lattice graphics command, each
> graphic is on its own page; the first graphic produced by a lattice
> command (well, xyplot each time in the packages tested) is put on the
> same page as the last graphic, after this, each graphic is again on a
> page off its own regardless of whether it was produced by a lattice
> graphics command or a non-lattice graphics command.

I can confirm this, e.g. with 

> postscript()
> plot(1)
> xyplot(2 ~ 2)
> dev.off()

(not that obvious on screen because the dark background overwrites the 
first plot). The underlying reason seems to be grid not knowing whether 
to start a new page the first time:

> x11()
> plot(1)
> grid.newpage()
> grid.points(x = runif(10), y = runif(10), vp = viewport())

Paul, any ideas?

Deepayan

From ligges at statistik.uni-dortmund.de  Thu Oct  7 19:33:00 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Oct  7 19:33:03 2004
Subject: [Rd] two help problems in R-2.0.0 for Windows (PR#7269)
Message-ID: <20041007173300.EB8C7EAC6@slim.kubism.ku.dk>

R-2.0.0, WinNT / WinXP:

  options(chmhelp=TRUE)
  ?dnorm  # does not work!
  ?Normal # works!

Looks like calling compiled html help does not work for aliases, but 
only for the title of help pages...

And a quick fix without changing the design is to change lines
136-137 in .../src/library/utils/R/help.R as follows:

-    err <- .C("Rchtml", hlpfile, topic,
-        err = integer(1), PACKAGE = "")$err

+    err <- .C("Rchtml", hlpfile, rev(strsplit(file, "/")[[1]])[1],
+        err = integer(1), PACKAGE = "")$err

but I think it is a problem by design and the name of the help pages 
should be returned by help() as well (not only implicitly).





Well, for htmlhelp, there is another error. The browser (e.g. Mozilla 
1.7.3) tries to open "T:\R\library\stats\html/Normal.html" and has 
problems with different kinds of slashes (/ vs. \).

  options(chmhelp=FALSE, htmlhelp=TRUE)
  ?dnorm  # does not work!


This can be fixed by changing line 4 in
.../src/library/utils/R/windows/help.R
as follows:

-    browseURL(file)
+    browseURL(chartr("/", "\\", file))




AArrrrrgh, I've never used non-text help pages in the developer releases 
... and obviously nobody else ...

Uwe Ligges

From ripley at stats.ox.ac.uk  Thu Oct  7 20:24:14 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct  7 20:24:18 2004
Subject: [Rd] two help problems in R-2.0.0 for Windows (PR#7269)
In-Reply-To: <20041007173300.EB8C7EAC6@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410071906530.25459-100000@gannet.stats>

On Thu, 7 Oct 2004 ligges@statistik.uni-dortmund.de wrote:

> Well, for htmlhelp, there is another error. The browser (e.g. Mozilla 
> 1.7.3) tries to open "T:\R\library\stats\html/Normal.html" and has 
> problems with different kinds of slashes (/ vs. \).

I can't reproduce that.  I get forward slashes only. Can you track down 
where the \ are coming from?

>   options(chmhelp=FALSE, htmlhelp=TRUE)
>   ?dnorm  # does not work!
> 
> 
> This can be fixed by changing line 4 in
> .../src/library/utils/R/windows/help.R
> as follows:
> 
> -    browseURL(file)
> +    browseURL(chartr("/", "\\", file))
> 
> 
> 
> 
> AArrrrrgh, I've never used non-text help pages in the developer releases 
> ... and obviously nobody else ...

Well, I have and Firefox works properly, for example.  I've not used
Mozilla recently as Firefox seems rather better.  I also checked, and IE6
works too.  Do you have a browser set (options(browser=)), or are you
relying on file associations?

Since this is to be a file:// URL, I believe forward slashes are correct, 
but we are at the mercy of Windows browser providers.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From e.pebesma at geog.uu.nl  Thu Oct  7 20:57:04 2004
From: e.pebesma at geog.uu.nl (Edzer J. Pebesma)
Date: Thu Oct  7 20:58:27 2004
Subject: [Rd] "R CMD check" with R 2.0.0
Message-ID: <41659180.80409@geog.uu.nl>

Deepayan, and others:

Paul already fixed this; he sent me this in an email on 10/04/04:

Kurt Hornik passed on to me your email about mixing traditional and 
lattice graphics.
 
The problem is in the grid package and should be fixed for 2.0.1, but 
for 2.0.0 the only solution is to make an extra call to grid.newpage() 
before the first lattice call (if there has been previous traditional 
graphics output).

Paul also noted that it will probably mostly come up there (in testing 
output).

Regards,
--
Edzer

From p.murrell at auckland.ac.nz  Thu Oct  7 21:27:37 2004
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Thu Oct  7 21:27:44 2004
Subject: [Rd] "R CMD check" with R 2.0.0
References: <16741.19165.662840.277870@bossiaea.maths.uwa.edu.au>
	<200410070932.09702.deepayan@stat.wisc.edu>
Message-ID: <416598A9.3050007@stat.auckland.ac.nz>

Hi


Deepayan Sarkar wrote:
> On Thursday 07 October 2004 08:55, Berwin A Turlach wrote:
> 
>>G'day all,
>>
>>I am not sure whether I should file this as a bug report, but I
>>thought that I should make the developers of R aware of the following
>>feature:
>>
>>I have just installed R 2.0.0 and when I run "R CMD check" on the
>>source of some packages, I noticed that the XXX-examples.ps file
>>contains one page with two graphics overlaid.  This seems to happen
>>when the first graphic is produced that uses the lattice() package.
>>I.e. as long as the examples use non-lattice graphics command, each
>>graphic is on its own page; the first graphic produced by a lattice
>>command (well, xyplot each time in the packages tested) is put on the
>>same page as the last graphic, after this, each graphic is again on a
>>page off its own regardless of whether it was produced by a lattice
>>graphics command or a non-lattice graphics command.
> 
> 
> I can confirm this, e.g. with 
> 
> 
>>postscript()
>>plot(1)
>>xyplot(2 ~ 2)
>>dev.off()
> 
> 
> (not that obvious on screen because the dark background overwrites the 
> first plot). The underlying reason seems to be grid not knowing whether 
> to start a new page the first time:
> 
> 
>>x11()
>>plot(1)
>>grid.newpage()
>>grid.points(x = runif(10), y = runif(10), vp = viewport())
> 
> 
> Paul, any ideas?


Yep, it's grid causing the problem.  The very first grid.newpage() on a 
device will not start a new page IF a traditional plot had previously 
been drawn on the device.  This will be fixed for 2.0.1.

In the meantime, there is a simple workaround for users.  On a screen 
device, the effect will probably not be noticed (as one of Deepayan's 
examples demonstrates).  On a file device like PostScript, it may mean 
people have to rerun code and insert a grid.newpage() before the first 
lattice call.

Apologies for the botch-up.

Paul
-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul@stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/

From wolski at molgen.mpg.de  Fri Oct  8 10:24:07 2004
From: wolski at molgen.mpg.de (Witold Eryk Wolski)
Date: Fri Oct  8 10:24:17 2004
Subject: [Rd] Function _coerce_ in _setIs_ never entered (S4).
Message-ID: <41664EA7.60007@molgen.mpg.de>

Hi,

Please consider the following trivial example.
In the sample code I first define a class MVCa using composition. This 
class contains a slot  of type list.
Next I define an inheritance relation using the function setIs -> MVCa 
"is a" list.
Then I define a function printlength which prints the list-length which 
is defined for the type "list".
If I call this function assigning to their argument an object of class 
MVCa I would expect that the function _coerce_  defined in setIs will be 
called.
It seems that this never happens using:
R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0 Patched (2004-10-04), ISBN 3-900051-07-0



setClass(
         "MVCa"
         ,representation(list="list"
                         ,content="character")
         ,prototype(content="numeric")
         )
    
setIs("MVCa","list",coerce=function(obj){obj@list},replace=function(obj,value){obj@list<-value})

setGeneric("printlength",function(object,...) 
standardGeneric("printlength"))
setMethod("printlength"
          ,signature(object="list")
          ,def=function(object)
          {
            print(length(object))
          }
          )


xx<-as.list(1:4)
names(xx)<-letters[1:4]
mvca<-new("MVCa")
mvca@list<-xx

printlength(mvca)


Any suggestions?

/E

-- 
Dipl. bio-chem. Witold Eryk Wolski         
MPI-Moleculare Genetic
Ihnestrasse 63-73 14195 Berlin                 _
tel: 0049-30-83875219                 __("<   'v'
http://www.molgen.mpg.de/~wolski      \__/   /   \
mail: witek96@users.sourceforge.net    ^^     w w
      wolski@molgen.mpg.de

From matjaz.kukar at fri.uni-lj.si  Fri Oct  8 13:21:53 2004
From: matjaz.kukar at fri.uni-lj.si (Matjaz Kukar)
Date: Fri Oct  8 13:21:59 2004
Subject: [Rd] R-2.0.0  findVar and findFun question
Message-ID: <41667851.7020806@fri.uni-lj.si>

Dear all,

when working on a project with embedded R, I found out that R-2.0.0 causes
a problem where older versions worked OK.

Rf_findVar(...) causes the following error when used to find a generic function
(such as print):

fun = Rf_findVar(...);
R_tryEval(fun, ...);

Error in function (object, ...)  : Invalid generic function in usemethod

Alternatively, using Rf_findFun(...) seems OK in this context, but crashes if you
call it with an unexisting function name. Rf_findVar does not crash in this case,
but returns an unbound value.

My workaround for now is as follows:

    fun = Rf_findVar(Rf_install(ident), R_GlobalEnv);
    if (fun != R_UnboundValue) {
        fun = Rf_findFun(Rf_install(ident), R_GlobalEnv);
        R_tryEval(fun, ...);
    }

I did some checking on the R object pointers and indeed for generic functions
Rf_findFun and Rf_findVar return different pointers (and therefore different
function objects).

What has changed with these functions? Can you comment on my workaround
and suggest a better (proper?) way of doing this?

Platform: Windows XP, R-2.0.0, MS VSC++ 7.0

Matjaz.

-- 
dr. Matjaz Kukar
Univerza v Ljubljani
Fakulteta za racunalnistvo in informatiko
Trzaska 25, 1001 Ljubljana

From p.dalgaard at biostat.ku.dk  Fri Oct  8 15:10:41 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct  8 15:13:16 2004
Subject: [Rd] R-2.0.0  findVar and findFun question
In-Reply-To: <41667851.7020806@fri.uni-lj.si>
References: <41667851.7020806@fri.uni-lj.si>
Message-ID: <x2655ljqy6.fsf@biostat.ku.dk>

Matjaz Kukar <matjaz.kukar@fri.uni-lj.si> writes:


> My workaround for now is as follows:
> 
>     fun = Rf_findVar(Rf_install(ident), R_GlobalEnv);
>     if (fun != R_UnboundValue) {
>         fun = Rf_findFun(Rf_install(ident), R_GlobalEnv);
>         R_tryEval(fun, ...);
>     }
> 
> I did some checking on the R object pointers and indeed for generic functions
> Rf_findFun and Rf_findVar return different pointers (and therefore different
> function objects).
> 
> What has changed with these functions? Can you comment on my workaround
> and suggest a better (proper?) way of doing this?

Can't see anything relevant changed recently...

I can see that findFun gives an error if the function is not found,
which I presume is what you call a "crash". However, your workaround
wouldn't catch the situation where a variable exists, but none of the
versions in the search path are functions.

I think you want to use findVar1() instead.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From wolski at molgen.mpg.de  Fri Oct  8 15:18:45 2004
From: wolski at molgen.mpg.de (Witold Eryk Wolski)
Date: Fri Oct  8 15:18:51 2004
Subject: [Rd] user interface and documentation of setIs and setAs,
 some suggestions (S4).
Message-ID: <416693B5.8080506@molgen.mpg.de>

By reading the documentation for _setIs_ I noted that for the same 
object three different names are used.

1) the name of the first argument in the functions coerce and replace in 
setIs must be _obj_ (see example section or)
setIs("MVCa","list",coerce=function(obj){obj@list},replace=function(obj,value){obj@list<-value}) 


2) At the same time in the usage section:
setIs(class1, class2, test=NULL, coerce=NULL, replace=NULL,
           by = character(), where = topenv(parent.frame()), classDef =,
           extensionObject = NULL, doComplete = TRUE)
3) and finally in the argument section:
    the object to 'class2', and to alter the object so that
          'is(object, class2)' is identical to 'value'.

I much more like how setAs is implemented, we cast _from_  _to_  and so 
the arguments in all this functions are named. Its much more consistent.

I would also suggest to replace the keyword _def_ in the setAs function 
by _coerce_ as it is in the setIs function.
I thinke it will be nicer if bot methods will have a unified user 
interface if possible. Of corse it may be that this is not possible for 
reasons not known to me. In this case sorry.

/E

-- 
Dipl. bio-chem. Witold Eryk Wolski         
MPI-Moleculare Genetic
Ihnestrasse 63-73 14195 Berlin                 _
tel: 0049-30-83875219                 __("<   'v'
http://www.molgen.mpg.de/~wolski      \__/   /   \
mail: witek96@users.sourceforge.net    ^^     w w
      wolski@molgen.mpg.de

From pgilbert at bank-banque-canada.ca  Fri Oct  8 15:50:39 2004
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Oct  8 15:52:33 2004
Subject: [Rd] LazyLoad & Depends
Message-ID: <41669B2F.2090909@bank-banque-canada.ca>

I have added LazyLoad and LazyData to the DESCRIPTION files for my 
packages.  This does not seem to cause problems with R-1.9.1 (although, 
if  I understand correctly, it does not do anything). Should I be 
specifying   Depends: R (>= 1.9.1) or Depends: R (>= 2.0.0)? What about 
older versions?

Paul Gilbert

From ligges at statistik.uni-dortmund.de  Fri Oct  8 16:23:46 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Oct  8 16:23:52 2004
Subject: [Rd] LazyLoad & Depends
In-Reply-To: <41669B2F.2090909@bank-banque-canada.ca>
References: <41669B2F.2090909@bank-banque-canada.ca>
Message-ID: <4166A2F2.2010403@statistik.uni-dortmund.de>

Paul Gilbert wrote:

> I have added LazyLoad and LazyData to the DESCRIPTION files for my 
> packages.  This does not seem to cause problems with R-1.9.1 (although, 
> if  I understand correctly, it does not do anything). Should I be 
> specifying   Depends: R (>= 1.9.1) or Depends: R (>= 2.0.0)? What about 
> older versions?

If your package still works for older versions of R (and you do know 
it), why do you want to exclude them?

Uwe


> Paul Gilbert
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Fri Oct  8 16:27:21 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  8 16:27:32 2004
Subject: [Rd] LazyLoad & Depends
In-Reply-To: <41669B2F.2090909@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.44.0410081526150.1290-100000@gannet.stats>

On Fri, 8 Oct 2004, Paul Gilbert wrote:

> I have added LazyLoad and LazyData to the DESCRIPTION files for my 
> packages.  This does not seem to cause problems with R-1.9.1 (although, 
> if  I understand correctly, it does not do anything). Should I be 

Correctly.

> specifying   Depends: R (>= 1.9.1) or Depends: R (>= 2.0.0)? What about 
> older versions?

If your documentation/examples depend on having the objects in the 
package, R (>= 2.0.0).  Otherwise, no need to bump the dependence.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Oct  8 16:53:25 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  8 16:53:33 2004
Subject: [Rd] R-2.0.0  findVar and findFun question
In-Reply-To: <41667851.7020806@fri.uni-lj.si>
Message-ID: <Pine.LNX.4.44.0410081237020.1140-100000@gannet.stats>

On Fri, 8 Oct 2004, Matjaz Kukar wrote:

> Dear all,
> 
> when working on a project with embedded R, I found out that R-2.0.0 causes
> a problem where older versions worked OK.
> 
> Rf_findVar(...) causes the following error when used to find a generic function
> (such as print):
> 
> fun = Rf_findVar(...);
> R_tryEval(fun, ...);

I think without knowing what you are putting in '...' this is impossible
to understand.  R_tryEval() does not seem to be part of the public API and
I had to grep the sources to find it.  However, it seems to be intended to
evaluate an expression not a function, as in (tests/Embedding/tryEval.c)

    PROTECT(e = allocVector(LANGSXP, 2));
    SETCAR(e, Rf_install("sqrt"));
    SETCAR(CDR(e), NEW_CHARACTER(1));
    val = R_tryEval(e, NULL, &errorOccurred);

and it is possible that 2.0.0 is detecting an incorrect usage that 1.9.1
did not detect.

Incidentally, your code need not be littered with Rf_*; that indicates 
you are not including the right header files.

> Error in function (object, ...)  : Invalid generic function in usemethod
> 
> Alternatively, using Rf_findFun(...) seems OK in this context, but crashes if you
> call it with an unexisting function name. Rf_findVar does not crash in this case,
> but returns an unbound value.
> 
> My workaround for now is as follows:
> 
>     fun = Rf_findVar(Rf_install(ident), R_GlobalEnv);
>     if (fun != R_UnboundValue) {
>         fun = Rf_findFun(Rf_install(ident), R_GlobalEnv);
>         R_tryEval(fun, ...);
>     }
> 
> I did some checking on the R object pointers and indeed for generic functions
> Rf_findFun and Rf_findVar return different pointers (and therefore different
> function objects).
> 
> What has changed with these functions? Can you comment on my workaround
> and suggest a better (proper?) way of doing this?
> 
> Platform: Windows XP, R-2.0.0, MS VSC++ 7.0
> 
> Matjaz.
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From MSchwartz at MedAnalytics.com  Fri Oct  8 18:29:18 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Fri Oct  8 18:29:23 2004
Subject: [Rd] Dumb question time - R patched vs. R devel
Message-ID: <1097252958.17307.72.camel@localhost.localdomain>

Hi all,

Perhaps my memory from 1.9.0 is gone and I need to be taking more
Ginko/Ginseng....

The current R patched tarballs and diff file
(ftp://ftp.stat.math.ethz.ch/Software/R/R-release.diff.gz) appear to be
for 1.9.1 as opposed to 2.0.0 if my read of the files is correct.

The current devel tarballs are labelled with a version of 2.1.0. Makes
sense.

If the R patched tarballs and diff file are for 1.9.1, are patches
actually being applied to 1.9.1 or are these files simply being
auto-made as the result of a daily script against the 1.9.1 subversion
repository?

Is there indeed any tarball/diff file for the 2.0.0 patched version?

I have been trying to avoid using subversion (given past discussions)
and downloading tarballs when I need to update my working version.

Thanks and feel free to smack some sense into me...

Marc

From ripley at stats.ox.ac.uk  Fri Oct  8 18:53:16 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct  8 18:53:20 2004
Subject: [Rd] Dumb question time - R patched vs. R devel
In-Reply-To: <1097252958.17307.72.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.44.0410081749460.11219-100000@gannet.stats>

On Fri, 8 Oct 2004, Marc Schwartz wrote:

> Hi all,
> 
> Perhaps my memory from 1.9.0 is gone and I need to be taking more
> Ginko/Ginseng....
> 
> The current R patched tarballs and diff file
> (ftp://ftp.stat.math.ethz.ch/Software/R/R-release.diff.gz) appear to be
> for 1.9.1 as opposed to 2.0.0 if my read of the files is correct.

Correct.

> The current devel tarballs are labelled with a version of 2.1.0. Makes
> sense.
> 
> If the R patched tarballs and diff file are for 1.9.1, are patches
> actually being applied to 1.9.1 or are these files simply being
> auto-made as the result of a daily script against the 1.9.1 subversion
> repository?

The latter. They should be ignored until Martin Maechler is able to create 
the correct ones.

> Is there indeed any tarball/diff file for the 2.0.0 patched version?

No.

> I have been trying to avoid using subversion (given past discussions)
> and downloading tarballs when I need to update my working version.

The only way to get R-patched from the R-2-0-patches branch is by
svn co https://svn.r-project/R/branches/R-2-0-patches.  But be prepared to 
be patient, as it had not completed for me in 2 hours this morning.
Also, as the date-stamp is not being updated, it will report the wrong 
date.

I suggest ignoring R-patched for now.  All the patches are in R-devel, and 
only a very small number of other things.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From MSchwartz at MedAnalytics.com  Fri Oct  8 19:01:02 2004
From: MSchwartz at MedAnalytics.com (Marc Schwartz)
Date: Fri Oct  8 19:01:09 2004
Subject: [Rd] Dumb question time - R patched vs. R devel
In-Reply-To: <Pine.LNX.4.44.0410081749460.11219-100000@gannet.stats>
References: <Pine.LNX.4.44.0410081749460.11219-100000@gannet.stats>
Message-ID: <1097254862.17307.75.camel@localhost.localdomain>

On Fri, 2004-10-08 at 11:53, Prof Brian Ripley wrote:
> On Fri, 8 Oct 2004, Marc Schwartz wrote:
> 
> > Hi all,
> > 
> > Perhaps my memory from 1.9.0 is gone and I need to be taking more
> > Ginko/Ginseng....
> > 
> > The current R patched tarballs and diff file
> > (ftp://ftp.stat.math.ethz.ch/Software/R/R-release.diff.gz) appear to be
> > for 1.9.1 as opposed to 2.0.0 if my read of the files is correct.
> 
> Correct.
> 
> > The current devel tarballs are labelled with a version of 2.1.0. Makes
> > sense.
> > 
> > If the R patched tarballs and diff file are for 1.9.1, are patches
> > actually being applied to 1.9.1 or are these files simply being
> > auto-made as the result of a daily script against the 1.9.1 subversion
> > repository?
> 
> The latter. They should be ignored until Martin Maechler is able to create 
> the correct ones.
> 
> > Is there indeed any tarball/diff file for the 2.0.0 patched version?
> 
> No.
> 
> > I have been trying to avoid using subversion (given past discussions)
> > and downloading tarballs when I need to update my working version.
> 
> The only way to get R-patched from the R-2-0-patches branch is by
> svn co https://svn.r-project/R/branches/R-2-0-patches.  But be prepared to 
> be patient, as it had not completed for me in 2 hours this morning.
> Also, as the date-stamp is not being updated, it will report the wrong 
> date.
> 
> I suggest ignoring R-patched for now.  All the patches are in R-devel, and 
> only a very small number of other things.


Prof. Ripley,

Thanks for the clarifications!

Best regards,

Marc

From murdoch at stats.uwo.ca  Fri Oct  8 19:17:21 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri Oct  8 19:17:21 2004
Subject: [Rd] Dumb question time - R patched vs. R devel
In-Reply-To: <1097252958.17307.72.camel@localhost.localdomain>
References: <1097252958.17307.72.camel@localhost.localdomain>
Message-ID: <rnidm0t1o7g1vkterskmsjea3mg1h1ag20@4ax.com>

On Fri, 08 Oct 2004 11:29:18 -0500, Marc Schwartz
<MSchwartz@MedAnalytics.com> wrote :

>Hi all,
>
>Perhaps my memory from 1.9.0 is gone and I need to be taking more
>Ginko/Ginseng....
>
>The current R patched tarballs and diff file
>(ftp://ftp.stat.math.ethz.ch/Software/R/R-release.diff.gz) appear to be
>for 1.9.1 as opposed to 2.0.0 if my read of the files is correct.
>
>The current devel tarballs are labelled with a version of 2.1.0. Makes
>sense.
>
>If the R patched tarballs and diff file are for 1.9.1, are patches
>actually being applied to 1.9.1 or are these files simply being
>auto-made as the result of a daily script against the 1.9.1 subversion
>repository?
>
>Is there indeed any tarball/diff file for the 2.0.0 patched version?

As Brian Ripley pointed out, the answer is no.  However, others might
want to know that I have been building Windows binaries from the
repository, and those will be available every few days on CRAN (see
http://cran.r-project.org/bin/windows/base/rpatched.html).

Duncan Murdoch

From ligges at statistik.uni-dortmund.de  Fri Oct  8 19:50:06 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri Oct  8 19:50:08 2004
Subject: [Rd] two help problems in R-2.0.0 for Windows (PR#7269)
Message-ID: <20041008175006.07D35FC0A@slim.kubism.ku.dk>

Prof Brian Ripley wrote:

> On Thu, 7 Oct 2004 ligges@statistik.uni-dortmund.de wrote:
> 
> 
>>Well, for htmlhelp, there is another error. The browser (e.g. Mozilla 
>>1.7.3) tries to open "T:\R\library\stats\html/Normal.html" and has 
>>problems with different kinds of slashes (/ vs. \).
> 
> 
> I can't reproduce that.  I get forward slashes only. Can you track down 
> where the \ are coming from?


Brian,

you are right, in the object "file", there are only forward slashes.
Looks like Mozilla (1.7.3) cannot interpret 
"T:/R/library/stats/html/Normal.html" and it changes the string in its 
navigation bar to: "T:\R\library\stats\html/Normal.html"

Specifying "file:///T:/R/library/stats/html/Normal.html" works, but the 
"file:///" part seems to be required if using forward slashes.

Note that the fix to use
chartr("/", "\\", file)
is also used in help.start(). I guess there was a reason to include it.


>>  options(chmhelp=FALSE, htmlhelp=TRUE)
>>  ?dnorm  # does not work!
>>
>>
>>This can be fixed by changing line 4 in
>>.../src/library/utils/R/windows/help.R
>>as follows:
>>
>>-    browseURL(file)
>>+    browseURL(chartr("/", "\\", file))
>>
>>
>>
>>
>>AArrrrrgh, I've never used non-text help pages in the developer releases 
>>... and obviously nobody else ...
> 
> 
> Well, I have and Firefox works properly, for example.  I've not used
> Mozilla recently as Firefox seems rather better.  I also checked, and IE6
> works too.  Do you have a browser set (options(browser=)), or are you
> relying on file associations?

The latter.

> Since this is to be a file:// URL, I believe forward slashes are correct, 
> but we are at the mercy of Windows browser providers.

See above. The line
     browseURL(paste("file://", file, sep="/"))
works for me.

Uwe


> Brian
>

From murdoch at stats.uwo.ca  Fri Oct  8 20:35:50 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri Oct  8 20:35:59 2004
Subject: [Rd] problems with bitmap images in windows XP
In-Reply-To: <4163FDB7.8030003@acelerate.com>
References: <4163FDB7.8030003@acelerate.com>
Message-ID: <cbndm0dabc624oi9rgjsfjqsl50pivsimk@4ax.com>

On Wed, 06 Oct 2004 10:14:15 -0400, Kjetil Brinchmann Halvorsen
<kjetil@acelerate.com> wrote :

>This is rw2000 on windowsXP
>
> jpeg("test.jpeg", bg="orangered")
> plot(1:10, 1:10, col="green")
> dev.off()
...
>Now, all of this gives a bluish background when wieved with Windows 
>Picture and Fax wiever or with the GIMP-2.0
>The bg= argument does not seem to have any effect.

....

>So what has happened?

There was a Windows-specific bug, for which I've just committed a fix.
Windows builds of r-patched or r-devel available tomorrow or later
should have it fixed.

Duncan Murdoch

From mcintosh at research.telcordia.com  Fri Oct  8 21:45:09 2004
From: mcintosh at research.telcordia.com (mcintosh@research.telcordia.com)
Date: Fri Oct  8 21:45:13 2004
Subject: [Rd] Bug with png() and plot(type="n") (PR#7270)
Message-ID: <20041008194509.08B3FFC0A@slim.kubism.ku.dk>

Full_Name: Allen McIntosh
Version: 2.0.0
OS: Linux
Submission from: (NULL) (67.80.175.118)


Observed the bug with the following combinations: (RedHat 7.3, R 1.6.0) (RedHat
7.3, R 1.9.1) (Redhat 9, R2.0.0).

In the second plot (.png file) produced by the following sequence:

png(file="x%d.png")
plot(1:10,1:10,main="ooo",type="n")
segments(1:9,1:9,2:10,1:9)
plot(1:10,10:1,main="XXXX",type="n")

the axis labels, the tick marks and the title from the first plot have not been
erased.  The call to segments() seems to be necessary, as does type="n".  The
example I extracted this from also called abline(), which was sufficient to
trigger the bug.  Inserting a call to frame() after the call to segments()
results in an extra file that ought to be blank, but instead contains the
offending text and tick marks.

Workarounds short of multiple calls to png() appreciated.

From matjaz.kukar at fri.uni-lj.si  Fri Oct  8 22:21:32 2004
From: matjaz.kukar at fri.uni-lj.si (Matjaz Kukar)
Date: Fri Oct  8 22:49:20 2004
Subject: [Rd] R-2.0.0  findVar and findFun question
In-Reply-To: <x2655ljqy6.fsf@biostat.ku.dk>
References: <41667851.7020806@fri.uni-lj.si> <x2655ljqy6.fsf@biostat.ku.dk>
Message-ID: <4166F6CC.4040400@fri.uni-lj.si>

Peter Dalgaard wrote:

  >
> Can't see anything relevant changed recently...
> 

Well, the visible change for me was that findVar now for generic functions
does not return the correct object, and so findFun should be used. Although
this is probably a consequence of some deeper change.

> I can see that findFun gives an error if the function is not found,
> which I presume is what you call a "crash". 

Not really. On WinXP this crash was access violation in some system code.

> However, your workaround
> wouldn't catch the situation where a variable exists, but none of the
> versions in the search path are functions.
> I think you want to use findVar1() instead.
> 

Indeed. Thank you for this tip. Although so far I didn't run into such
a situation, I changed the code to the following:

// First we try to find a function with a given name
   obj = findVar1(Rf_install(ident), R_GlobalEnv, FUNSXP, TRUE);
// If there is no function, anything else will do
   if (obj == R_UnboundValue)
       obj = findVar1(Rf_install(ident), R_GlobalEnv, ANYSXP, TRUE);

The resulting object is stored and later used to construct a SEXP
used in R_tryEval(...). Only here an application should (and now,
thanks to your advice, does) complain if there is something wrong.

I suppose, FUNSXP means functions (Rinternals says "Closure or Builtin"),
and ANYSXP means anything. Should inherits (last) parameter be used as TRUE?

Could you point me to some relevant documentation concerning R API? The
"standard" documentation is often not detailed enough.


All the best,

Matjaz.

-- 
dr. Matjaz Kukar
Univerza v Ljubljani
Fakulteta za racunalnistvo in informatiko
Trzaska 25, 1001 Ljubljana

From p.dalgaard at biostat.ku.dk  Fri Oct  8 22:46:53 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct  8 22:49:47 2004
Subject: [Rd] Bug with png() and plot(type="n") (PR#7270)
In-Reply-To: <20041008194509.08B3FFC0A@slim.kubism.ku.dk>
References: <20041008194509.08B3FFC0A@slim.kubism.ku.dk>
Message-ID: <x28yah7xaa.fsf@biostat.ku.dk>

mcintosh@research.telcordia.com writes:

> Full_Name: Allen McIntosh
> Version: 2.0.0
> OS: Linux
> Submission from: (NULL) (67.80.175.118)
> 
> 
> Observed the bug with the following combinations: (RedHat 7.3, R 1.6.0) (RedHat
> 7.3, R 1.9.1) (Redhat 9, R2.0.0).
> 
> In the second plot (.png file) produced by the following sequence:
> 
> png(file="x%d.png")
> plot(1:10,1:10,main="ooo",type="n")
> segments(1:9,1:9,2:10,1:9)
> plot(1:10,10:1,main="XXXX",type="n")
> 
> the axis labels, the tick marks and the title from the first plot have not been
> erased.  The call to segments() seems to be necessary, as does type="n".  The
> example I extracted this from also called abline(), which was sufficient to
> trigger the bug.  Inserting a call to frame() after the call to segments()
> results in an extra file that ought to be blank, but instead contains the
> offending text and tick marks.
> 
> Workarounds short of multiple calls to png() appreciated.

Apparently, the clipping of segments is still active when the drawing
surface is erased.

Inserting a call to box() before the 2nd plot seems to help. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From matjaz.kukar at fri.uni-lj.si  Fri Oct  8 22:53:07 2004
From: matjaz.kukar at fri.uni-lj.si (Matjaz Kukar)
Date: Fri Oct  8 22:53:18 2004
Subject: [Rd] R-2.0.0  findVar and findFun question
In-Reply-To: <Pine.LNX.4.44.0410081237020.1140-100000@gannet.stats>
References: <Pine.LNX.4.44.0410081237020.1140-100000@gannet.stats>
Message-ID: <4166FE33.2010105@fri.uni-lj.si>

Prof Brian Ripley wrote:

> On Fri, 8 Oct 2004, Matjaz Kukar wrote:
> 
> 
>>Dear all,
>>
>>when working on a project with embedded R, I found out that R-2.0.0 causes
>>a problem where older versions worked OK.
>>
>>Rf_findVar(...) causes the following error when used to find a generic function
>>(such as print):
>>
>>fun = Rf_findVar(...);
>>R_tryEval(fun, ...);
> 
> 
> I think without knowing what you are putting in '...' this is impossible
> to understand.  R_tryEval() does not seem to be part of the public API and

Where can one find out what is a public R API and what isn't?

> I had to grep the sources to find it.  However, it seems to be intended to
> evaluate an expression not a function, as in (tests/Embedding/tryEval.c)
> 
>     PROTECT(e = allocVector(LANGSXP, 2));
>     SETCAR(e, Rf_install("sqrt"));
>     SETCAR(CDR(e), NEW_CHARACTER(1));
>     val = R_tryEval(e, NULL, &errorOccurred);
> 
> and it is possible that 2.0.0 is detecting an incorrect usage that 1.9.1
> did not detect.
> 

Silly me. I compressed my code a bit too much (hence the '...' you have noticed before).
Actually, the expression gets constructed as above, with the only difference that it
does not start with  SETCAR(e, install("function_name")) but with SETCAR(e, obj) where
obj = findVar(install("function_name"), R_GlobalEnv). This worked in previous versions
(1.6.2 - 1.9.1) just fine. In 2.0.0 the problem, as described before, is that findVar
returns a function object, but (in case of generic functions) the evaluation fails with
the "Error in function (object, ...)  : Invalid generic function in usemethod" error
message.

I resorted to findFun function, however Peter Dalgaard here on the list suggested using
findVar1 (which seems to be an even more obscure function than R_tryEval). I even
had to write the header file by myself, although the function works just perfectly.


> Incidentally, your code need not be littered with Rf_*; that indicates 
> you are not including the right header files.

Well, both Rf_findVar function and findVar macro are declared and defined,
respectively, in the same (Rinternals.h) file. So I'm pretty sure I'm including
the right header file :-).

It seems to me more and more that my problems don't have much to do with
findVar ... functions, but are probably a result of deeper changes, maybe
in generic function handling.

Matjaz.

-- 
dr. Matjaz Kukar
Univerza v Ljubljani
Fakulteta za racunalnistvo in informatiko
Trzaska 25, 1001 Ljubljana

From morzarialuna at wisc.edu  Fri Oct  8 23:57:45 2004
From: morzarialuna at wisc.edu (morzarialuna@wisc.edu)
Date: Fri Oct  8 23:57:48 2004
Subject: [Rd] Bug in R graphics device (PR#7271)
Message-ID: <20041008215745.B5D56FC0A@slim.kubism.ku.dk>

Full_Name: Hem Nalini Morzaria Luna
Version: 2.00.00
OS: Windows XP
Submission from: (NULL) (128.104.98.229)


When using the plot(), when no previous graphics devices are open, the text in
the GUI disappears. Even if I close the graphics device I can't see the cursor.
But it is still there, because I can type another plot() command. I had to close
R and open it again for the GUI to return to normal. I also noticed that the
changes I saved in the GUI were not loaded once I closed R and opened it again.

I did modify the appearance of the GUI, I changed the font type, size, and font
and background colors.

From murdoch at stats.uwo.ca  Sat Oct  9 02:09:21 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Sat Oct  9 02:09:23 2004
Subject: [Rd] Bug in R graphics device (PR#7271)
Message-ID: <20041009000921.278DAEDE9@slim.kubism.ku.dk>

On Fri,  8 Oct 2004 23:57:45 +0200 (CEST), morzarialuna@wisc.edu
wrote:

>Full_Name: Hem Nalini Morzaria Luna
>Version: 2.00.00
>OS: Windows XP
>Submission from: (NULL) (128.104.98.229)
>
>
>When using the plot(), when no previous graphics devices are open, the text in
>the GUI disappears. Even if I close the graphics device I can't see the cursor.
>But it is still there, because I can type another plot() command. I had to close
>R and open it again for the GUI to return to normal. I also noticed that the
>changes I saved in the GUI were not loaded once I closed R and opened it again.
>
>I did modify the appearance of the GUI, I changed the font type, size, and font
>and background colors.

Please give exact details of how to reproduce this error. 

Duncan Murdoch

From ripley at stats.ox.ac.uk  Sat Oct  9 10:13:52 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Oct  9 10:13:56 2004
Subject: [Rd] two help problems in R-2.0.0 for Windows (PR#7269)
In-Reply-To: <20041008175006.07D35FC0A@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410090850440.4692-100000@gannet.stats>

On Fri, 8 Oct 2004 ligges@statistik.uni-dortmund.de wrote:

> Prof Brian Ripley wrote:
> 
> > On Thu, 7 Oct 2004 ligges@statistik.uni-dortmund.de wrote:
> > 
> > 
> >>Well, for htmlhelp, there is another error. The browser (e.g. Mozilla 
> >>1.7.3) tries to open "T:\R\library\stats\html/Normal.html" and has 
> >>problems with different kinds of slashes (/ vs. \).
> > 
> > 
> > I can't reproduce that.  I get forward slashes only. Can you track down 
> > where the \ are coming from?
> 
> 
> Brian,
> 
> you are right, in the object "file", there are only forward slashes.
> Looks like Mozilla (1.7.3) cannot interpret 
> "T:/R/library/stats/html/Normal.html" and it changes the string in its 
> navigation bar to: "T:\R\library\stats\html/Normal.html"
> 
> Specifying "file:///T:/R/library/stats/html/Normal.html" works, but the 
> "file:///" part seems to be required if using forward slashes.
> 
> Note that the fix to use
> chartr("/", "\\", file)
> is also used in help.start(). I guess there was a reason to include it.

One reason was not to confuse human readers, who get a message containing 
the file path.

It seemed strange that Mozilla 1.7.3 fails whereas Firefox succeeds (and 
even IE6 succeeds).  So I installed Mozilla to find out, and it does work 
for me (Windows XP SP2).  So it's something to do with your system vs 
mine, not different browsers.

I think I need to do some more extensive tests to decide if the right fix 
is to use a filespec with \ or a file:// URL.  One problem about the 
latter is that some browser used to require : replaced by | -- I think it 
was Netscape4 but I don't know if it is relevant.


> >>  options(chmhelp=FALSE, htmlhelp=TRUE)
> >>  ?dnorm  # does not work!
> >>
> >>
> >>This can be fixed by changing line 4 in
> >>.../src/library/utils/R/windows/help.R
> >>as follows:
> >>
> >>-    browseURL(file)
> >>+    browseURL(chartr("/", "\\", file))
> >>
> >>
> >>
> >>
> >>AArrrrrgh, I've never used non-text help pages in the developer releases 
> >>... and obviously nobody else ...
> > 
> > 
> > Well, I have and Firefox works properly, for example.  I've not used
> > Mozilla recently as Firefox seems rather better.  I also checked, and IE6
> > works too.  Do you have a browser set (options(browser=)), or are you
> > relying on file associations?
> 
> The latter.
> 
> > Since this is to be a file:// URL, I believe forward slashes are correct, 
> > but we are at the mercy of Windows browser providers.
> 
> See above. The line
>      browseURL(paste("file://", file, sep="/"))
> works for me.
> 
> Uwe
> 
> 
> > Brian
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bwheeler at echip.com  Sat Oct  9 17:15:20 2004
From: bwheeler at echip.com (Bob Wheeler)
Date: Sat Oct  9 17:16:26 2004
Subject: [Rd] inst directory
Message-ID: <41680088.1010909@echip.com>

R CMD check on a Windows system, halts with the following;

   installing inst files
FIND: Parameter format not correct
make[2]: *** [C:/AlgDesign/AlgDesign.Rcheck/AlgDesign/inst]Error 2
make[1] *** [all] Error 2
make: *** [pkg-AlgDesign] Error2
*** Installation of AlgDesign failed ****

The inst directory contains the sub directory doc with a pdf and dvi 
file. Any sub directory in inst seems to cause this problem. The check 
was OK prior to 1.9.0.

What has changed? If it is in the R documentation, I have missed it.


-- 
Bob Wheeler --- http://www.bobwheeler.com/
         ECHIP, Inc. ---
Randomness comes in bunches.

From ligges at statistik.uni-dortmund.de  Sat Oct  9 17:35:59 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Oct  9 17:36:06 2004
Subject: [Rd] inst directory
In-Reply-To: <41680088.1010909@echip.com>
References: <41680088.1010909@echip.com>
Message-ID: <4168055F.5090306@statistik.uni-dortmund.de>

Bob Wheeler wrote:

> R CMD check on a Windows system, halts with the following;
> 
>   installing inst files
> FIND: Parameter format not correct

Ahh! You have to add the tools set in the path before the Windows system 
directory, because this way Windows' find was found rather than the one 
from the tools set.

Uwe Ligges

> make[2]: *** [C:/AlgDesign/AlgDesign.Rcheck/AlgDesign/inst]Error 2
> make[1] *** [all] Error 2
> make: *** [pkg-AlgDesign] Error2
> *** Installation of AlgDesign failed ****
> 
> The inst directory contains the sub directory doc with a pdf and dvi 
> file. Any sub directory in inst seems to cause this problem. The check 
> was OK prior to 1.9.0.
> 
> What has changed? If it is in the R documentation, I have missed it.
> 
>

From ripley at stats.ox.ac.uk  Sat Oct  9 17:40:08 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Oct  9 17:40:12 2004
Subject: [Rd] You do need to follow the instructions! (was inst directory)
In-Reply-To: <41680088.1010909@echip.com>
Message-ID: <Pine.LNX.4.44.0410091623410.9615-100000@gannet.stats>

On Sat, 9 Oct 2004, Bob Wheeler wrote:

> R CMD check on a Windows system, halts with the following;
> 
>    installing inst files
> FIND: Parameter format not correct
> make[2]: *** [C:/AlgDesign/AlgDesign.Rcheck/AlgDesign/inst]Error 2
> make[1] *** [all] Error 2
> make: *** [pkg-AlgDesign] Error2
> *** Installation of AlgDesign failed ****

Note that this is actually coming from R CMD INSTALL

> The inst directory contains the sub directory doc with a pdf and dvi 
> file. Any sub directory in inst seems to cause this problem. The check 
> was OK prior to 1.9.0.
> 
> What has changed? If it is in the R documentation, I have missed it.

Please do not ignore warnings:

> FIND: Parameter format not correct

is almost certainly telling you that *you* have not followed the 
instructions.

You still have not told us your OS nor version of R, but seeing FIND up
there suggests this is Windows and that you have not followed the
instructions in README.packages correctly.  Please do read and follow the
injunction at the top of that file.  It looks like you have ignored

  To avoid frustration, please use our tool set, and make sure it is at 
  the front of your path (including before the Windows system 
  directories).

since you want find.exe from Rtools, not FIND.EXE from the Windows system 
directories.

I think you have leapt to incorrect conclusions about the source of this 
error.  As confirmation, it is a matter of public record that AlgDesign on 
CRAN does pass R CMD check on both Linux and Windows.

It would have been much better to have asked

`Why do I get the message "FIND: Parameter format not correct" when I try
to install a package (such as AlgDesign) with inst and inst/doc
directories.'

Please see both the posting guide and the section in the FAQ on BUGS.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bwheeler at echip.com  Sat Oct  9 18:06:35 2004
From: bwheeler at echip.com (Bob Wheeler)
Date: Sat Oct  9 18:07:40 2004
Subject: [Rd] inst directory
In-Reply-To: <4168055F.5090306@statistik.uni-dortmund.de>
References: <41680088.1010909@echip.com>
	<4168055F.5090306@statistik.uni-dortmund.de>
Message-ID: <41680C8B.9070905@echip.com>

My thanks to all who replied. That fixed it.

Uwe Ligges wrote:
> Bob Wheeler wrote:
> 
>> R CMD check on a Windows system, halts with the following;
>>
>>   installing inst files
>> FIND: Parameter format not correct
> 
> 
> Ahh! You have to add the tools set in the path before the Windows system 
> directory, because this way Windows' find was found rather than the one 
> from the tools set.
> 
> Uwe Ligges
> 
>> make[2]: *** [C:/AlgDesign/AlgDesign.Rcheck/AlgDesign/inst]Error 2
>> make[1] *** [all] Error 2
>> make: *** [pkg-AlgDesign] Error2
>> *** Installation of AlgDesign failed ****
>>
>> The inst directory contains the sub directory doc with a pdf and dvi 
>> file. Any sub directory in inst seems to cause this problem. The check 
>> was OK prior to 1.9.0.
>>
>> What has changed? If it is in the R documentation, I have missed it.
>>
>>
> 
> 


-- 
Bob Wheeler --- http://www.bobwheeler.com/
         ECHIP, Inc. ---
Randomness comes in bunches.

From Matthias.Kohl at uni-bayreuth.de  Sun Oct 10 10:34:09 2004
From: Matthias.Kohl at uni-bayreuth.de (Matthias.Kohl@uni-bayreuth.de)
Date: Sun Oct 10 10:34:12 2004
Subject: [Rd] promptMethods
Message-ID: <1276.132.180.246.36.1097397249.squirrel@mail.uni-bayreuth.de>

Hello,

is there a reason why 'promptMethods' in contrast to 'prompt' and
'promptClass' prints no message?

Like:
"A shell of documentation for the methods of a generic
 function has been written to the file ..."

I'm working with R 2.0.0 Patched (2004-10-06) on Windows 2000.

Matthias

From xiao.gang.fan at libertysurf.fr  Sun Oct 10 12:40:50 2004
From: xiao.gang.fan at libertysurf.fr (xiao.gang.fan@libertysurf.fr)
Date: Sun Oct 10 12:40:54 2004
Subject: [Rd] R 2.0.0 (PR#7272)
Message-ID: <20041010104050.D6BBFEDE1@slim.kubism.ku.dk>

Full_Name: Xiao Gang FAN
Version: 2.0.0
OS: Windows
Submission from: (NULL) (82.226.247.142)


After installing the new version 2.0.0 (downloaded binary), 
I've got 2 unexpected behavious vs 1.9.1:

1. When installing some packages from source, the making process 
stoped with the following message:

---------- Making package toto ------------
  adding build stamp to DESCRIPTION
  making DLL ...
  ... DLL made
  installing DLL
  installing R files
  installing data files
  no man files in this package
  installing indices
Error in read.table(zfile, header = TRUE) :
        more columns than column names
Execution halted
make[2]: *** [indices] Error 1
make[1]: *** [all] Error 2
make: *** [pkg-toto] Error 2
*** Installation of toto failed ***

2. CHM Help showing blank page, for example: ?read.delim 

Thanks
--
Fan

From xiao.gang.fan1 at libertysurf.fr  Sun Oct 10 12:41:02 2004
From: xiao.gang.fan1 at libertysurf.fr (xiao.gang.fan1@libertysurf.fr)
Date: Sun Oct 10 12:41:04 2004
Subject: [Rd] R 2.0.0 (PR#7273)
Message-ID: <20041010104102.6B6AEEAC7@slim.kubism.ku.dk>

Full_Name: Xiao Gang FAN
Version: 2.0.0
OS: Windows
Submission from: (NULL) (82.226.247.142)


After installing the new version 2.0.0 (downloaded binary), 
I've got 2 unexpected behavious vs 1.9.1:

1. When installing some packages from source, the making process 
stoped with the following message:

---------- Making package toto ------------
  adding build stamp to DESCRIPTION
  making DLL ...
  ... DLL made
  installing DLL
  installing R files
  installing data files
  no man files in this package
  installing indices
Error in read.table(zfile, header = TRUE) :
        more columns than column names
Execution halted
make[2]: *** [indices] Error 1
make[1]: *** [all] Error 2
make: *** [pkg-toto] Error 2
*** Installation of toto failed ***

2. CHM Help showing blank page, for example: ?read.delim 

Thanks
--
Fan

From ripley at stats.ox.ac.uk  Sun Oct 10 12:59:24 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 10 12:59:28 2004
Subject: [Rd] R 2.0.0 (PR#7272)
In-Reply-To: <20041010104050.D6BBFEDE1@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410101149540.28553-100000@gannet.stats>

On Sun, 10 Oct 2004 xiao.gang.fan@libertysurf.fr wrote:

> Full_Name: Xiao Gang FAN
> Version: 2.0.0
> OS: Windows
> Submission from: (NULL) (82.226.247.142)
> 
> 
> After installing the new version 2.0.0 (downloaded binary), 
> I've got 2 unexpected behavious vs 1.9.1:
> 
> 1. When installing some packages from source, the making process 
> stoped with the following message:
> 
> ---------- Making package toto ------------
>   adding build stamp to DESCRIPTION
>   making DLL ...
>   ... DLL made
>   installing DLL
>   installing R files
>   installing data files
>   no man files in this package
>   installing indices
> Error in read.table(zfile, header = TRUE) :
>         more columns than column names
> Execution halted
> make[2]: *** [indices] Error 1
> make[1]: *** [all] Error 2
> make: *** [pkg-toto] Error 2
> *** Installation of toto failed ***

What is package toto?  How are we supposed to reproduce this?

Why do you think this is a bug in R and not in the package?
Several hundred packages have been installed successfully, and we do test 
those which are on public repositories.  People with private packages were 
asked to test R during the alpha/beta test period.

It looks to me like an error in one of the data files in the package,
something which was not checked in 1.9.1 (and several packages it seems 
never used one or more of their data files).  That is in the NEWS file.

> 2. CHM Help showing blank page, for example: ?read.delim 

Already reported (PR#7269) and fixed.  (More accurately, it shows a
`page cannot be displayed' message for us.)

Why did you send this twice?  Please don't waste our time clearing up 
after duplicate reports.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From xiao.gang.fan1 at libertysurf.fr  Sun Oct 10 14:21:02 2004
From: xiao.gang.fan1 at libertysurf.fr (xiao.gang.fan1@libertysurf.fr)
Date: Sun Oct 10 14:21:05 2004
Subject: [Rd] R 2.0.0 - lazy loading mandadory ? (PR#7274)
Message-ID: <20041010122102.0A751EAC7@slim.kubism.ku.dk>

Full_Name: Xiao Gang FAN
Version: R 2.0.0
OS: Windows
Submission from: (NULL) (82.226.247.142)


When a package preload another necessary package, say Hmisc, 
seems that this last one must be precompiled, this is rather
boring - we must rebuild all dependant packages ? 
Here's an error when compiling such a package:

---------- Making package toto ------------                                   
  adding build stamp to DESCRIPTION                                             

  making DLL ...                                                                

  ... DLL made                                                                  

  installing DLL                                                                

  installing R files                                                            

  installing data files                                                         

  no man files in this package                                                  

  installing indices                                                            

  not zipping data                                                              

  installing help                                                               

  preparing package toto for lazy loading                                     
Error in library(pkg, character.only = TRUE, logical = TRUE, lib.loc = lib.loc)
:
        'Hmisc' is not a valid package -- installed < 2.0.0?                    

Execution halted                                                                

make: *** [lazyload] Error 1                                                    

*** Installation of toto failed ***

From ligges at statistik.uni-dortmund.de  Sun Oct 10 15:18:38 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sun Oct 10 15:18:41 2004
Subject: [Rd] R 2.0.0 - lazy loading mandadory ? (PR#7274)
Message-ID: <20041010131838.F4136EABB@slim.kubism.ku.dk>

xiao.gang.fan1@libertysurf.fr wrote:

> Full_Name: Xiao Gang FAN
> Version: R 2.0.0
> OS: Windows
> Submission from: (NULL) (82.226.247.142)
> 
> 
> When a package preload another necessary package, say Hmisc, 
> seems that this last one must be precompiled, this is rather
> boring - we must rebuild all dependant packages ? 

a) This is a question. Questions are ought to be send to R-help BUT NOT 
TO R-BUGS!
b) THIS QUESTION IS EVEN NOT APPROPRIATE FOR R-HELP, because the answer 
is in the News file.

The news file tells us that re*installing* packages is required for 
R-2.0.0 (rebuilding is not required per se). Yes, ALL packages you are 
going to use!
And for your convenience, there are precompiled versions available on CRAN.

Uwe Ligges


> Here's an error when compiling such a package:
> 
> ---------- Making package toto ------------                                   
>   adding build stamp to DESCRIPTION                                             
> 
>   making DLL ...                                                                
> 
>   ... DLL made                                                                  
> 
>   installing DLL                                                                
> 
>   installing R files                                                            
> 
>   installing data files                                                         
> 
>   no man files in this package                                                  
> 
>   installing indices                                                            
> 
>   not zipping data                                                              
> 
>   installing help                                                               
> 
>   preparing package toto for lazy loading                                     
> Error in library(pkg, character.only = TRUE, logical = TRUE, lib.loc = lib.loc)
> :
>         'Hmisc' is not a valid package -- installed < 2.0.0?                    
> 
> Execution halted                                                                
> 
> make: *** [lazyload] Error 1                                                    
> 
> *** Installation of toto failed ***
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From xiao.gang.fan1 at libertysurf.fr  Sun Oct 10 17:53:06 2004
From: xiao.gang.fan1 at libertysurf.fr (xiao.gang.fan1@libertysurf.fr)
Date: Sun Oct 10 17:53:08 2004
Subject: [Rd] strange behaviour in R 2.0.0 (PR#7275)
Message-ID: <20041010155306.73761EDE3@slim.kubism.ku.dk>

Full_Name: Xiao Gang FAN
Version: R 2.0.0
OS: Windows
Submission from: (NULL) (82.226.247.142)


The following codes worked for R 1.9.1

> a = data.frame(x=1:2)
> a$y = strptime(c("20010101","20020101"),"%Y%m%d")

this no longer works for R 2.0.0:

Error in "$<-.data.frame"(`*tmp*`, "y", value = list(sec = c(0, 0), min = c(0, 
: 
        replacement has 9 rows, data has 2

From ggrothendieck at myway.com  Sun Oct 10 18:15:09 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Sun Oct 10 18:15:16 2004
Subject: [Rd] strange behaviour in R 2.0.0 (PR#7275)
References: <20041010155306.73761EDE3@slim.kubism.ku.dk>
Message-ID: <loom.20041010T180709-445@post.gmane.org>

 <xiao.gang.fan1 <at> libertysurf.fr> writes:

> 
> Full_Name: Xiao Gang FAN
> Version: R 2.0.0
> OS: Windows
> Submission from: (NULL) (82.226.247.142)
> 
> The following codes worked for R 1.9.1
> 
> > a = data.frame(x=1:2)
> > a$y = strptime(c("20010101","20020101"),"%Y%m%d")
> 
> this no longer works for R 2.0.0:
> 
> Error in "$<-.data.frame"(`*tmp*`, "y", value = list(sec = c(0, 0), min = c
(0, 
> : 
>         replacement has 9 rows, data has 2

Normally if one wants to store a POSIXt object in a data frame, one uses
POSIXct, not POSIXlt:

a <- data.frame(x = 1:2)
a$y <- as.POSIXct(strptime(c("20010101","20020101"),"%Y%m%d"))

Actually in this instance you are not using times at all so you
might be better off using the simpler Date class:

a <- data.frame(x = 1:2)
a$y <- as.Date(c("20010101","20020101"),"%Y%m%d")

From ripley at stats.ox.ac.uk  Sun Oct 10 18:20:59 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 10 18:21:06 2004
Subject: [Rd] strange behaviour in R 2.0.0 (PR#7275)
In-Reply-To: <20041010155306.73761EDE3@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410101701320.29146-100000@gannet.stats>

This is the fourth bug report today from Xiao Gang FAN, and we have had no
response to replies to the first three.  Please do not send bug reports 
unless you are prepared to take responsibility for them and answer 
requests for further information.

Please read the posting guide and the FAQ and use a meaningful subject 
line.

Now, where is the requested code to reproduce PR#7272?


On Sun, 10 Oct 2004 xiao.gang.fan1@libertysurf.fr wrote:

> Full_Name: Xiao Gang FAN
> Version: R 2.0.0
> OS: Windows
> Submission from: (NULL) (82.226.247.142)
> 
> 
> The following codes worked for R 1.9.1
> 
> > a = data.frame(x=1:2)
> > a$y = strptime(c("20010101","20020101"),"%Y%m%d")
> 
> this no longer works for R 2.0.0:
> 
> Error in "$<-.data.frame"(`*tmp*`, "y", value = list(sec = c(0, 0), min = c(0, 
> : 
>         replacement has 9 rows, data has 2

That code is indeed incorrect, and did fail in 1.9.1:

R : Copyright 2004, The R Foundation for Statistical Computing
Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3

> a = data.frame(x=1:2)
> a$y = strptime(c("20010101","20020101"),"%Y%m%d")
Error in "$<-.data.frame"(`*tmp*`, "y", value = strptime(c("20010101",  :
        replacement has 9 rows, data has 2

It even failed in 1.8.0.  It `worked' in 1.7.0, but did not do what you
most likely wanted it to do (see the NEWS for 1.8.0).  You cannot sensibly
add "POSIXlt" objects to a data frame: you can add "POSIXct" objects.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From xiao.gang.fan1 at libertysurf.fr  Sun Oct 10 19:45:40 2004
From: xiao.gang.fan1 at libertysurf.fr (Fan)
Date: Sun Oct 10 19:45:52 2004
Subject: [Rd] strange behaviour in R 2.0.0 (PR#7275)
References: <Pine.LNX.4.44.0410101701320.29146-100000@gannet.stats>
Message-ID: <41697544.3000404@libertysurf.fr>

Dear Prof Ripley,

After looking at my original C code, which is different in 2.0.0
should be (sorry, not tested as I've desinstalled 2.0.0,
tired of the time wasted):
 > a=list(x=1:2)
 > a$y = strptime(c("20010101","20020101"),"%Y%m%d")
 > a = data.frame(a)
 > rbind(a,a)

For the point 1 in PR#7269 (failure in installing packages from source),
I've encountered that for several packages (so "toto" means nothing).
I guess that should come from changes somewhere related to the "index"
check in the perl script for making process. I agree with you it'd be
difficult to claim that a bug, but anyway, it's not expected as
I've checkec the different files (man, INDEX, DESCRIPTION) and can't
figure out what's wrong, and it WORKS with 1.9.1.

ps: sorry for having posted 2 times (PR#7269, PR#7272), I've used
the Web interface of R-Bugs to send the report, and after posting
the first one, I've figured out that there was an error in the email
address (xiao.gang.fan@libertysurf.fr instead of xiao...1@libertysurf.fr).
--
Fan

Prof Brian Ripley wrote:
> This is the fourth bug report today from Xiao Gang FAN, and we have had no
> response to replies to the first three.  Please do not send bug reports 
> unless you are prepared to take responsibility for them and answer 
> requests for further information.
> 
> Please read the posting guide and the FAQ and use a meaningful subject 
> line.
> 
> Now, where is the requested code to reproduce PR#7272?
> 
> 
> On Sun, 10 Oct 2004 xiao.gang.fan1@libertysurf.fr wrote:
> 
> 
>>Full_Name: Xiao Gang FAN
>>Version: R 2.0.0
>>OS: Windows
>>Submission from: (NULL) (82.226.247.142)
>>
>>
>>The following codes worked for R 1.9.1
>>
>>
>>>a = data.frame(x=1:2)
>>>a$y = strptime(c("20010101","20020101"),"%Y%m%d")
>>
>>this no longer works for R 2.0.0:
>>
>>Error in "$<-.data.frame"(`*tmp*`, "y", value = list(sec = c(0, 0), min = c(0, 
>>: 
>>        replacement has 9 rows, data has 2
> 
> 
> That code is indeed incorrect, and did fail in 1.9.1:
> 
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 1.9.1  (2004-06-21), ISBN 3-900051-00-3
> 
> 
>>a = data.frame(x=1:2)
>>a$y = strptime(c("20010101","20020101"),"%Y%m%d")
> 
> Error in "$<-.data.frame"(`*tmp*`, "y", value = strptime(c("20010101",  :
>         replacement has 9 rows, data has 2
> 
> It even failed in 1.8.0.  It `worked' in 1.7.0, but did not do what you
> most likely wanted it to do (see the NEWS for 1.8.0).  You cannot sensibly
> add "POSIXlt" objects to a data frame: you can add "POSIXct" objects.
>

From michele.alzetta at gmail.com  Sun Oct 10 21:29:42 2004
From: michele.alzetta at gmail.com (Michele Alzetta)
Date: Sun Oct 10 21:30:02 2004
Subject: [Rd] An introduction to R - language is R or S ?
Message-ID: <8079280b041010122944f8c506@mail.gmail.com>

I have done a diff between R 2.0 and R 1.9 versions of 'An
introduction to R'. I notice that line 196 of R-intro.texi now calls
the language used in R  'S', and not 'R' any longer. I imagine there
must be a reason for this, it is not a simple mistake is it ?

-- 
Michele Alzetta

From ripley at stats.ox.ac.uk  Sun Oct 10 22:00:39 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 10 22:01:29 2004
Subject: [Rd] An introduction to R - language is R or S ?
In-Reply-To: <8079280b041010122944f8c506@mail.gmail.com>
Message-ID: <Pine.LNX.4.44.0410102049240.29561-100000@gannet.stats>

On Sun, 10 Oct 2004, Michele Alzetta wrote:

> I have done a diff between R 2.0 and R 1.9 versions of 'An
> introduction to R'. I notice that line 196 of R-intro.texi now calls
> the language used in R  'S', and not 'R' any longer. I imagine there
> must be a reason for this, it is not a simple mistake is it ?

Which, the original or the change?

R-intro has been out of step with the FAQ (see e.g. Q3.1 and Q3.3) for a
long time, so I would say the previous usage was `a simple mistake'. (In
fact it seems to have been a global editing job on Bill Venables' words
which were written about the S language.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From edd at debian.org  Mon Oct 11 02:49:59 2004
From: edd at debian.org (edd@debian.org)
Date: Mon Oct 11 02:50:03 2004
Subject: [Rd] Re: Bug#275791: r-gnome: gnome library can not be read
	(PR#7276)
Message-ID: <20041011004959.938B9EDDF@slim.kubism.ku.dk>

Dear R bug fixers,

This came in early this morning. The R/Gnome configuration, and selection of
libraries hat not changed one bit since I last built 1.9.1 -- but maybe
something change in the Gmome/Glib/Gtk, or even x11, libraries? Would anyone
know where RestoreAction is defined?

The list of Debian packages on which r-gnome depends is below; as this is
computed from ldd output I won't add that direct ldd output, but would be
glad to supply it as well as other information if it could aid in fixing this.

Thanks, Dirk


On Sun, Oct 10, 2004 at 11:41:41AM +0200, Wouter Leonard de Vries wrote:
> Package: r-gnome
> Version: 2.0.0-1
> Severity: grave
> Justification: renders package unusable
> 
> 
> when trying to start r-gnome I get the following message:
> 
> Fatal error: The GNOME shared library could not be loaded.
>   The error was /usr/lib/R/modules/R_gnome.so: undefined symbol:
>   RestoreAction
> 
> 
> -- System Information:
> Debian Release: 3.1
>   APT prefers unstable
>   APT policy: (500, 'unstable'), (1, 'experimental')
> Architecture: i386 (i686)
> Kernel: Linux 2.6.8.1
> Locale: LANG=nl_NL, LC_CTYPE=nl_NL
> 
> Versions of packages r-gnome depends on:
> ii  gdk-imlib1                1.9.14-16      imaging library for use with gtk (
> ii  libart2                   1.4.2-19       The GNOME canvas widget - runtime 
> ii  libaudiofile0             0.2.6-4        Open-source version of SGI's audio
> ii  libbz2-1.0                1.0.2-1        A high-quality block-sorting file 
> ii  libc6                     2.3.2.ds1-17   GNU C Library: Shared libraries an
> ii  libdb3                    3.2.9-20       Berkeley v3 Database Libraries [ru
> ii  libesd0                   0.2.34-1       Enlightened Sound Daemon - Shared 
> ii  libglade-gnome0           1:0.17-3       Library to load .glade files at ru
> ii  libglade0                 1:0.17-3       Library to load .glade files at ru
> ii  libglib1.2                1.2.10-9       The GLib library of C routines
> ii  libgnome32                1.4.2-19       The GNOME libraries
> ii  libgnomesupport0          1.4.2-19       The GNOME libraries (Support libra
> ii  libgnomeui32              1.4.2-19       The GNOME libraries (User Interfac
> ii  libgtk1.2                 1.2.10-17      The GIMP Toolkit set of widgets fo
> ii  libice6                   4.3.0.dfsg.1-8 Inter-Client Exchange library
> ii  libncurses5               5.4-4          Shared libraries for terminal hand
> ii  libpcre3                  4.5-1.1        Perl 5 Compatible Regular Expressi
> ii  libreadline4              4.3-13         GNU readline and history libraries
> ii  libsm6                    4.3.0.dfsg.1-8 X Window System Session Management
> ii  libx11-6                  4.3.0.dfsg.1-8 X Window System protocol client li
> ii  libxext6                  4.3.0.dfsg.1-8 X Window System miscellaneous exte
> ii  libxi6                    4.3.0.dfsg.1-8 X Window System Input extension li
> ii  libxml1                   1:1.8.17-8     GNOME XML library
> ii  r-base-core               2.0.0-1        GNU R core of statistical computin
> ii  xlibs                     4.3.0.dfsg.1-8 X Window System client libraries m
> ii  zlib1g                    1:1.2.2-1      compression library - runtime
> 
> -- no debconf information

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From duncan.mackay at flinders.edu.au  Mon Oct 11 03:42:23 2004
From: duncan.mackay at flinders.edu.au (duncan.mackay@flinders.edu.au)
Date: Mon Oct 11 03:42:28 2004
Subject: [Rd] strange windows behaviour after changing "lines" GUI setting
	(PR#7277)
Message-ID: <20041011014223.7A2DFEDDF@slim.kubism.ku.dk>

Full_Name: Duncan Mackay
Version: 2.0.0
OS: WinXP
Submission from: (NULL) (129.96.120.254)


> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    2              
minor    0.0            
year     2004           
month    10             
day      04             
language R       

I am running the above version of R under WinXP Service Pack 2.

I have encountered some strange behaviour after changing the "lines" setting in
the GUI preferences, as follows:-

"Select Edit/GUI preferences..."
Change the "lines" setting from 8000 to 16000
Click "Apply" then "OK"
Back at the R console, type ?merge

The "R Help on 'merge'" window appears but is blank???????

Click back in the R Console window. Now it goes blank ???????????

From murdoch at stats.uwo.ca  Mon Oct 11 06:42:52 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon Oct 11 06:42:54 2004
Subject: [Rd] Bug in R graphics device (PR#7271)
Message-ID: <20041011044252.1ED0FEDDF@slim.kubism.ku.dk>

There are a couple of things here.  One bug that has been fixed in
R-patched, one user error.

On Sun, 10 Oct 2004 11:32:00 -0500, Hem Nalini <morzarialuna@wisc.edu>
wrote:

>I did the following:
>
>
>In a newly opened R session:
>
>
>1) Changed GUI preferences (-staring at white hurts my eyes, hence the
>pastels):
>
>Font: Lucida Console Type 12, Bold
>Background: Steel Blue 4
>Output text: LightGoldenRod 1
>User input: PalevioletRed
>Titles in page: Coral
>
>2) Saved GUI preferences:
>
>Press "Save": Instead of showing me the R working directory "My
>documents" pops up and I have to search for the directory

This is the user error:  if you want the preferences to appear when
you start R, you should save them in your "My documents" (Windows
home) directory.  (There are other possibilities; see the "Invoking R"
section of the Introduction to R manual.)

>3) Called data from base
>data(BOD)
>attach(BOD)
>BOD
>
>4) Create plot
>plot(Time~demand)
>
>5) Input in the R console is now invisible.
>

I think this bug has been fixed in R-patched.  Could you please try it
to confirm?

>6) If I close and open R again the GUI preferences I saved are not loaded.

Because they weren't where it was looking when you started it.

Duncan Murdoch
>
>Thank you
>
>-Hem Nalini Morzaria
>
>
>Duncan Murdoch wrote:
>> On Fri,  8 Oct 2004 23:57:45 +0200 (CEST), morzarialuna@wisc.edu
>> wrote:
>> 
>> 
>>>Full_Name: Hem Nalini Morzaria Luna
>>>Version: 2.00.00
>>>OS: Windows XP
>>>Submission from: (NULL) (128.104.98.229)
>>>
>>>
>>>When using the plot(), when no previous graphics devices are open, the text in
>>>the GUI disappears. Even if I close the graphics device I can't see the cursor.
>>>But it is still there, because I can type another plot() command. I had to close
>>>R and open it again for the GUI to return to normal. I also noticed that the
>>>changes I saved in the GUI were not loaded once I closed R and opened it again.
>>>
>>>I did modify the appearance of the GUI, I changed the font type, size, and font
>>>and background colors.
>> 
>> 
>> Please give exact details of how to reproduce this error. 
>> 
>> Duncan Murdoch
>>

From ripley at stats.ox.ac.uk  Mon Oct 11 08:34:24 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 11 08:34:33 2004
Subject: (PR#7277) Re: [Rd] strange windows behaviour after changing "lines"
	GUI setting (PR#7277)
In-Reply-To: <20041011014223.7A2DFEDDF@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410110721270.30371-100000@gannet.stats>

Doesn't happen for me (on two rather different machines under Windows XP
SP2).  This looks like a Windows GDI refresh problem.  Does editing the
Rconsole file work?  If so, that is a usable workaround. Does minimizing
and restoring the windows show the correct contents?

On Mon, 11 Oct 2004 duncan.mackay@flinders.edu.au wrote:

> Full_Name: Duncan Mackay
> Version: 2.0.0
> OS: WinXP
> Submission from: (NULL) (129.96.120.254)
> 
> 
> > version
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    2              
> minor    0.0            
> year     2004           
> month    10             
> day      04             
> language R       
> 
> I am running the above version of R under WinXP Service Pack 2.
> 
> I have encountered some strange behaviour after changing the "lines" setting in
> the GUI preferences, as follows:-
> 
> "Select Edit/GUI preferences..."
> Change the "lines" setting from 8000 to 16000
> Click "Apply" then "OK"
> Back at the R console, type ?merge
> 
> The "R Help on 'merge'" window appears but is blank???????
> 
> Click back in the R Console window. Now it goes blank ???????????
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Oct 11 09:15:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 11 09:15:53 2004
Subject: [Rd] (PR#7276) Re: Bug#275791: r-gnome: gnome library can not
	be read
In-Reply-To: <20041011004959.938B9EDDF@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410110804550.30644-100000@gannet.stats>

On Mon, 11 Oct 2004 edd@debian.org wrote:

> Dear R bug fixers,
> 
> This came in early this morning. The R/Gnome configuration, and selection of
> libraries hat not changed one bit since I last built 1.9.1 -- but maybe
> something change in the Gmome/Glib/Gtk, or even x11, libraries? Would anyone
> know where RestoreAction is defined?

It was in bin/R.bin in 1.9.1, and is not in bin/exec/R in 2.0.0

gannet% nm -pg bin/R.bin | grep RestoreAction
0826da30 D RestoreAction

Grepping the sources shows it is defined in 

src/main/startup.c:static SA_TYPE       RestoreAction = SA_RESTORE;
src/modules/gnome/system.c:extern SA_TYPE RestoreAction;

and removing the `static' solves this for me.  I guess no alpha/beta 
tester used the GNOME interface ....

Fixed in R-patched and R-devel now.


> 
> The list of Debian packages on which r-gnome depends is below; as this is
> computed from ldd output I won't add that direct ldd output, but would be
> glad to supply it as well as other information if it could aid in fixing this.
> 
> Thanks, Dirk
> 
> 
> On Sun, Oct 10, 2004 at 11:41:41AM +0200, Wouter Leonard de Vries wrote:
> > Package: r-gnome
> > Version: 2.0.0-1
> > Severity: grave
> > Justification: renders package unusable
> > 
> > 
> > when trying to start r-gnome I get the following message:
> > 
> > Fatal error: The GNOME shared library could not be loaded.
> >   The error was /usr/lib/R/modules/R_gnome.so: undefined symbol:
> >   RestoreAction
> > 
> > 
> > -- System Information:
> > Debian Release: 3.1
> >   APT prefers unstable
> >   APT policy: (500, 'unstable'), (1, 'experimental')
> > Architecture: i386 (i686)
> > Kernel: Linux 2.6.8.1
> > Locale: LANG=nl_NL, LC_CTYPE=nl_NL
> > 
> > Versions of packages r-gnome depends on:
> > ii  gdk-imlib1                1.9.14-16      imaging library for use with gtk (
> > ii  libart2                   1.4.2-19       The GNOME canvas widget - runtime 
> > ii  libaudiofile0             0.2.6-4        Open-source version of SGI's audio
> > ii  libbz2-1.0                1.0.2-1        A high-quality block-sorting file 
> > ii  libc6                     2.3.2.ds1-17   GNU C Library: Shared libraries an
> > ii  libdb3                    3.2.9-20       Berkeley v3 Database Libraries [ru
> > ii  libesd0                   0.2.34-1       Enlightened Sound Daemon - Shared 
> > ii  libglade-gnome0           1:0.17-3       Library to load .glade files at ru
> > ii  libglade0                 1:0.17-3       Library to load .glade files at ru
> > ii  libglib1.2                1.2.10-9       The GLib library of C routines
> > ii  libgnome32                1.4.2-19       The GNOME libraries
> > ii  libgnomesupport0          1.4.2-19       The GNOME libraries (Support libra
> > ii  libgnomeui32              1.4.2-19       The GNOME libraries (User Interfac
> > ii  libgtk1.2                 1.2.10-17      The GIMP Toolkit set of widgets fo
> > ii  libice6                   4.3.0.dfsg.1-8 Inter-Client Exchange library
> > ii  libncurses5               5.4-4          Shared libraries for terminal hand
> > ii  libpcre3                  4.5-1.1        Perl 5 Compatible Regular Expressi
> > ii  libreadline4              4.3-13         GNU readline and history libraries
> > ii  libsm6                    4.3.0.dfsg.1-8 X Window System Session Management
> > ii  libx11-6                  4.3.0.dfsg.1-8 X Window System protocol client li
> > ii  libxext6                  4.3.0.dfsg.1-8 X Window System miscellaneous exte
> > ii  libxi6                    4.3.0.dfsg.1-8 X Window System Input extension li
> > ii  libxml1                   1:1.8.17-8     GNOME XML library
> > ii  r-base-core               2.0.0-1        GNU R core of statistical computin
> > ii  xlibs                     4.3.0.dfsg.1-8 X Window System client libraries m
> > ii  zlib1g                    1:1.2.2-1      compression library - runtime
> > 
> > -- no debconf information
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Oct 11 10:34:02 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 11 10:34:31 2004
Subject: (PR#7277) Re: [Rd] strange windows behaviour after changing
	"lines" GUI setting (PR#7277)
In-Reply-To: <Pine.LNX.4.44.0410110721270.30371-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0410110933210.1248-100000@gannet.stats>

On Mon, 11 Oct 2004, Prof Brian Ripley wrote:

> Doesn't happen for me (on two rather different machines under Windows XP
> SP2).  This looks like a Windows GDI refresh problem.  Does editing the
> Rconsole file work?  If so, that is a usable workaround. Does minimizing
> and restoring the windows show the correct contents?

One more thing: was this the MDI or SDI interface?  I only tested SDI.

> On Mon, 11 Oct 2004 duncan.mackay@flinders.edu.au wrote:
> 
> > Full_Name: Duncan Mackay
> > Version: 2.0.0
> > OS: WinXP
> > Submission from: (NULL) (129.96.120.254)
> > 
> > 
> > > version
> >          _              
> > platform i386-pc-mingw32
> > arch     i386           
> > os       mingw32        
> > system   i386, mingw32  
> > status                  
> > major    2              
> > minor    0.0            
> > year     2004           
> > month    10             
> > day      04             
> > language R       
> > 
> > I am running the above version of R under WinXP Service Pack 2.
> > 
> > I have encountered some strange behaviour after changing the "lines" setting in
> > the GUI preferences, as follows:-
> > 
> > "Select Edit/GUI preferences..."
> > Change the "lines" setting from 8000 to 16000
> > Click "Apply" then "OK"
> > Back at the R console, type ?merge
> > 
> > The "R Help on 'merge'" window appears but is blank???????
> > 
> > Click back in the R Console window. Now it goes blank ???????????
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From wolski at molgen.mpg.de  Mon Oct 11 10:36:25 2004
From: wolski at molgen.mpg.de (Witold Eryk Wolski)
Date: Mon Oct 11 10:36:46 2004
Subject: [Rd] Problem with _new_ if class "lm" in object representatio n.
In-Reply-To: <415DBE3F.D3DA3FB7@research.bell-labs.com>
References: <18D602BD42B7E24EB810D6454A58DB900A29BB79@ibfftce505.de.ad.drkw.net>		<415BFD9F.2080101@molgen.mpg.de>
	<6.0.1.1.2.20040930145247.01faaec0@stat4ux.stat.ucl.ac.be>
	<415DBE3F.D3DA3FB7@research.bell-labs.com>
Message-ID: <416A4609.5080602@molgen.mpg.de>

Hi,

Thanks to all of you for helpfull sugestions.


This weekend I found a manuscript by R. Gentlemen which discussed 
similar topics:
http://www.stat.auckland.ac.nz/S-Workshop/Gentleman/container.pdf


Yours,





John Chambers wrote:

>Eric Lecoutre wrote:
>  
>
>>Hi,
>>
>>For your lm problem, you could begin to create a virtual class that accepts
>>either NULL or a lm object:
>>
>> > setClassUnion("mylm", c("NULL","lm"))
>> > setClass("foo", representation(x="numeric", y="mylm"))
>> > new("foo",x=1,y=NULL)
>>
>>Then, you have to check the content of slot y in any function that will
>>manipulate objects of class "foo":
>>
>>         setMethod("show","foo",function(object)
>>         {
>>         cat("\n object of class foo")
>>         if (!is.null(object@y)) cat(" does have a lm object in slot y!")
>>         })
>>    
>>
>
>This is OK, but it illustrates why it would _not_ be a good idea to
>allow NULL values automatically for an arbitrary class.  The
>implementation here says that the "y" slot can be either a NULL or an
>"lm" object.  That is a different statement from saying that "y" must be
>an "lm" object.
>
>Either approach could make sense.  But what one really wants (in any
>definiton of a new class) is to match the actual definition to the
>intended meaning.
>
>With your suggestion, the designer of class "foo" is basically passing
>on to the implenters of methods the responsibility to check for a NULL
>"y" slot.  If it makes sense for legitimate "foo" objects to exist that
>have a NULL "y" slot, then that extra work is part of the design of the
>"foo" class.  Your definition of the class essentially says that the
>"lm" model is an optional part of the object.
>
>But if in fact it _only_ makes sense for the object to have a true
>model, then one should not define a class that conflicts with the
>intended meaning.   There was no indication in the initial question that
>NULL made sense.  If we're just introducing the NULL possibility as a
>programming hack, that's not really a good idea.
>
>The other approach is to insist that the computations creating a "foo"
>object generate a valid "lm" object, if the user didn't supply one. 
>Then methods for "foo" objects are not required to check.  One way to
>make the stricter approach work would be to have a method for
>initialize() for class "foo" that generated a model from the other slots
>in the object.
>
>For example, the class might represent "x" and "y" data, and a model
>that by default was the linear model for y~x.  Something like the
>following would implement that idea:
>
>setClass("withLm", representation(x="numeric", y="numeric", model =
>"lm"))
>
>setMethod("initialize", "withLm",
>          function(.Object, x = numeric(), y = numeric(), model = NULL)
>{
>              if(is.null(model))
>                  model <- lm(y ~ x)
>              callNextMethod(.Object, x=x, y=y, model=model)
>          }
>          )
>
>
>
>(unfortunately, lm() does not allow fitting vectors of length 0, so if
>this were a real example there are a few boundary cases to consider ;-)
>
>
>  
>
>>Eric
>>
>>At 14:35 30/09/2004, Witold Eryk Wolski wrote:
>>    
>>
>>>Hi,
>>>
>>>But "any" rises some other problems well known from S3. One has "any" for
>>>"free" in S3. You don't need S4. . But I know how "if" polluted
>>>functions  look like in S3. They are hard to understand and  to maintain.
>>>Hence I am quite happy to use S4.
>>>Type-checking is usefull if you program with data. Also if you are on the
>>>"C side" of the object. A further problem which I have with "any" is, that
>>>lm="any" in setClass tells you exactly ANYthing (and you are back in S3).
>>>And thats not what I like.*
>>>Hence, I do not want to use any in this case.
>>>
>>>I think that allowing to assing NULL to a slot will solve some problems
>>>which I have with S4 so far.
>>>
>>>a) How to express that an a slot content was not assigned so far? J.C.
>>>suggest to use character(0), lm(1~1) etc. The problem I have with
>>>insterting lm(1~1) in slot mod in my class Ctest are that I have 100000
>>>instances of object Ctest. At initialization everyone contains an object
>>>lm(1~1). But please  note the following.
>>>
>>>      
>>>
>>>>x<-lm(1~1)
>>>>object.size(x)
>>>>        
>>>>
>>>[1] 6388
>>>      
>>>
>>>>object.size(NULL)
>>>>        
>>>>
>>>[1] 0
>>>
>>>Unfortunately S4 do not have references. Hence, I can not store a
>>>reference to a single instance of lm(1~1) .
>>>
>>>Exactly the same problems I have if I want to "delete" an object. For
>>>example you like to have a slot  which stores some data which is important
>>>if the object is in one state. But if the state of the object changes you
>>>do not need that data anymore. Hence, you would like to delete it to get
>>>storage.  You can only do it if you have like you suggest "any", but the
>>>consequence is "if" polluted code, or using slot(obj,"mod",check=FALSE)<- NULL.
>>>
>>>But the documentation for slot states.
>>>check: " You should never set this to 'FALSE' in normal
>>>         use, since the result can create invalid objects. "
>>>
>>>
>>>b) The Problem which I have writing intitialization functions like
>>>suggested by J.C  is:  Imagine you have an object with twenty slots. You
>>>have to write and initialize function with approximately 20 "if"'s. One of
>>>the contribution of S4, as mentioned above, is to help you to avoid
>>>writing such "if" polluted functions. But as I sometimes forget any role
>>>has it's exceptions. So I can live with one function looking ugly in S4
>>>instead of having all functions "if" polluted like in case of S3.  The
>>>only consequence so far is that I try to avoid to write initialize
>>>functions. I do it only in some rare very special cases.
>>>
>>>The NULL exception in slot assignement will allow me object initialization
>>>using just "new" without providing a "if" polluted function initialize.
>>>
>>>      
>>>
>>>>setClass("bar")
>>>>        
>>>>
>>>[1] "bar"
>>>      
>>>
>>>>setClass("foo", representation(x="numeric", y="bar"))
>>>>        
>>>>
>>>[1] "foo"
>>>      
>>>
>>>>new("foo", x=1)
>>>>        
>>>>
>>>Error in validObject(.Object) : Invalid "foo" object: Invalid object for
>>>slot "y" in class "foo": got class "NULL", should be or extend class "bar"
>>>      
>>>
>>>Are there S4 inherent solutions to this questions?
>>>
>>>
>>>Yours.
>>>/E
>>>
>>>*(I would rather compare "any" to the Object class then to null in java.
>>>It has a different function.)
>>>
>>>Pfaff, Bernhard wrote:
>>>
>>>      
>>>
>>>>>Hi,
>>>>>
>>>>>Thanks a lot for pointing me to setOldClass().
>>>>>
>>>>>What is exactly the point against it, to allow NULL to be a special case
>>>>>which can be assigned to any slot? I think in java one can assing null
>>>>>to any slot (I do not like java but not because of that).
>>>>>I am asking because for some objects it may be hard to define something
>>>>>equivalent to numeric(0). And even lm(1~1) is not that what I am looking
>>>>>for. I would like to have the case
>>>>>of an unassigned slot (Just think about storage?) even to the expense
>>>>>checking every time if the slot is not null.
>>>>>
>>>>>          
>>>>>
>>>>Hello Eryk,
>>>>
>>>>how about "ANY" and checking where suitable/needed if the passed object for
>>>>"mod" is of class "lm" at a later stage in your code, like in:
>>>>
>>>>setClass("Ctest"
>>>>        ,representation(
>>>>                test="character"
>>>>                ,bla="character"
>>>>                ,mod="ANY"              )
>>>>        )
>>>>
>>>>test1 <- new("Ctest",mod=lm(1~1))
>>>>is(test1@mod, "lm")
>>>>
>>>>test2 <- new("Ctest",test="bla")
>>>>is(test2@mod, "lm")
>>>>
>>>>test3 <- new("Ctest",bla="brum")
>>>>is(test3@mod, "lm")
>>>>
>>>>test4 <- new("Ctest",test="bla",bla="brum")
>>>>is(test4@mod, "lm")
>>>>
>>>>From there on you could use stop() or warning() or whatever you want to
>>>>return to the user as information which class mod should belong to.
>>>>
>>>>HTH,
>>>>Bernhard
>>>>
>>>>        
>>>>
>>>______________________________________________
>>>R-devel@stat.math.ethz.ch mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>      
>>>
>>Eric Lecoutre
>>UCL /  Institut de Statistique
>>Voie du Roman Pays, 20
>>1348 Louvain-la-Neuve
>>Belgium
>>
>>tel: (+32)(0)10473050
>>lecoutre@stat.ucl.ac.be
>>http://www.stat.ucl.ac.be/ISpersonnel/lecoutre
>>
>>If the statistics are boring, then you've got the wrong numbers. -Edward
>>Tufte
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>    
>>
>
>  
>


-- 
Dipl. bio-chem. Witold Eryk Wolski         
MPI-Moleculare Genetic
Ihnestrasse 63-73 14195 Berlin                 _
tel: 0049-30-83875219                 __("<   'v'
http://www.molgen.mpg.de/~wolski      \__/   /   \
mail: witek96@users.sourceforge.net    ^^     w w
      wolski@molgen.mpg.de

From m.pacey at lancaster.ac.uk  Mon Oct 11 14:20:57 2004
From: m.pacey at lancaster.ac.uk (m.pacey@lancaster.ac.uk)
Date: Mon Oct 11 14:21:08 2004
Subject: [Rd] Sun Forte 9 / configure compatability problem with 2.0/1.9.x
	(PR#7278)
Message-ID: <20041011122057.6E0A91041F@slim.kubism.ku.dk>

Full_Name: Mike Pacey
Version: 2.0, 1.9.x
OS: Solaris 8
Submission from: (NULL) (194.80.32.8)



Symptoms:
--------------

It seems the latest version of the Sun Compiler Suite (Forte 9) has
compatability issues with R's configure script. Starting with a fairly vanilla
configure (I'm using 1.9.1 here, but I've replicated the problem on 1.9.0 and
2.0.0):

% export CC=cc
% export F77=f95
% export CXX=CC
% ./configure
[snip]
checking for dummy main to link with Fortran libraries... unknown
configure: error: linking to Fortran libraries from C fails

config.log shows the following error:

Undefined                       first referenced
 symbol                             in file
omp_set_nested                     
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfsu
.so
__mt_get_thread_num_               
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfai
2.so
__mt_MasterFunction_               
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfai
.so
omp_set_num_threads                
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfsu
.so
__omp_in_parallel_                 
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfai
2.so
omp_set_dynamic                    
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfsu
.so
__omp_get_num_threads_             
/usr/local/packages/SUNWspro-9/SUNWspro/lib/v8plus/libfai
2.so
ld: fatal: Symbol referencing errors. No output written to conftest
configure:25232: $? = 1


Cause:
---------

The sections of the configure script before the linker failure seem to be
compiling a dummy fortran program in verbose mode in order to ream off the
relevant fortran libs and object files so that cc can replicate them during
linking.

The fortran compiler in Forte 9 now includes the directive "-lompstubs", which
for some reason is placed out of order for the linker. The forte compiler works
around this by flanking the lib call with -zallextract and -zdefaultextract,
effectively forcing the linker to extract all symbols in the ompstubs library so
that they're available for later libraries. The configure script is ignoring the
-z extraction directives, resulting in an out-of-order sequence of libs, and a
subsequent failure to resolve the symbols listed above.

Solution:
------------

As a temporary workaround, adding "-xopenmp=stubs" to LDFLAGS seems to work.

For a more permanent solution, I think the -z extraction directives need to be
preserved.

From ripley at stats.ox.ac.uk  Mon Oct 11 16:00:33 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 11 16:00:55 2004
Subject: [Rd] Bug with png() and plot(type="n") (PR#7270)
In-Reply-To: <x28yah7xaa.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0410111459570.2137-100000@gannet.stats>

On 8 Oct 2004, Peter Dalgaard wrote:

> mcintosh@research.telcordia.com writes:
> 
> > Full_Name: Allen McIntosh
> > Version: 2.0.0
> > OS: Linux
> > Submission from: (NULL) (67.80.175.118)
> > 
> > 
> > Observed the bug with the following combinations: (RedHat 7.3, R 1.6.0) (RedHat
> > 7.3, R 1.9.1) (Redhat 9, R2.0.0).
> > 
> > In the second plot (.png file) produced by the following sequence:
> > 
> > png(file="x%d.png")
> > plot(1:10,1:10,main="ooo",type="n")
> > segments(1:9,1:9,2:10,1:9)
> > plot(1:10,10:1,main="XXXX",type="n")
> > 
> > the axis labels, the tick marks and the title from the first plot have not been
> > erased.  The call to segments() seems to be necessary, as does type="n".  The
> > example I extracted this from also called abline(), which was sufficient to
> > trigger the bug.  Inserting a call to frame() after the call to segments()
> > results in an extra file that ought to be blank, but instead contains the
> > offending text and tick marks.
> > 
> > Workarounds short of multiple calls to png() appreciated.
> 
> Apparently, the clipping of segments is still active when the drawing
> surface is erased.

Yes, and a fix has now been committed to R-patched/R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Oct 11 16:00:50 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon Oct 11 16:00:59 2004
Subject: [Rd] Bug with png() and plot(type="n") (PR#7270)
Message-ID: <20041011140050.AE0671042C@slim.kubism.ku.dk>

On 8 Oct 2004, Peter Dalgaard wrote:

> mcintosh@research.telcordia.com writes:
> 
> > Full_Name: Allen McIntosh
> > Version: 2.0.0
> > OS: Linux
> > Submission from: (NULL) (67.80.175.118)
> > 
> > 
> > Observed the bug with the following combinations: (RedHat 7.3, R 1.6.0) (RedHat
> > 7.3, R 1.9.1) (Redhat 9, R2.0.0).
> > 
> > In the second plot (.png file) produced by the following sequence:
> > 
> > png(file="x%d.png")
> > plot(1:10,1:10,main="ooo",type="n")
> > segments(1:9,1:9,2:10,1:9)
> > plot(1:10,10:1,main="XXXX",type="n")
> > 
> > the axis labels, the tick marks and the title from the first plot have not been
> > erased.  The call to segments() seems to be necessary, as does type="n".  The
> > example I extracted this from also called abline(), which was sufficient to
> > trigger the bug.  Inserting a call to frame() after the call to segments()
> > results in an extra file that ought to be blank, but instead contains the
> > offending text and tick marks.
> > 
> > Workarounds short of multiple calls to png() appreciated.
> 
> Apparently, the clipping of segments is still active when the drawing
> surface is erased.

Yes, and a fix has now been committed to R-patched/R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jmc at research.bell-labs.com  Mon Oct 11 17:51:32 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Mon Oct 11 17:51:58 2004
Subject: [Rd] Function _coerce_ in _setIs_ never entered (S4).
References: <41664EA7.60007@molgen.mpg.de>
Message-ID: <416AAC04.B7E4099F@research.bell-labs.com>

The source of the problem is that, because "list" is a basic class,
there is a pre-defined method for as(x, "list") (roughly, use
as.list(x)).  (Technically, this is found as a method for the coerce()
function.)

Normally, setIs() doesn't explicitly set the method for coerce(),
delaying that until the first time as() is called for the corresponding
combination of classes.  Here, that doesn't work, because as() finds the
existing method and never looks for the new one.

The likely fix is to have setIs() check for an existing method or else
just always set the method, but the relevant code is sufficiently basic
that the fix needs to be checked fairly carefully before committing it.

Meanwhile, depending on what it is that you're really trying to do, a
workaround would be to use a special class instead of "list", a class
that had a list as a slot.

Also, notice that the problem is in trying for an _automatic_ coerce of
MVCa to "list".  As a design issue, it's fairly often the case that you
don't want that anyway.  As per the green book, using setIs() means that
your new class acts like a list in all respects, and often that's not
the case.  Using setAs() instead of setIs() would then be the better
choice.

Witold Eryk Wolski wrote:
> 
> Hi,
> 
> Please consider the following trivial example.
> In the sample code I first define a class MVCa using composition. This
> class contains a slot  of type list.
> Next I define an inheritance relation using the function setIs -> MVCa
> "is a" list.
> Then I define a function printlength which prints the list-length which
> is defined for the type "list".
> If I call this function assigning to their argument an object of class
> MVCa I would expect that the function _coerce_  defined in setIs will be
> called.
> It seems that this never happens using:
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 2.0.0 Patched (2004-10-04), ISBN 3-900051-07-0
> 
> setClass(
>          "MVCa"
>          ,representation(list="list"
>                          ,content="character")
>          ,prototype(content="numeric")
>          )
> 
> setIs("MVCa","list",coerce=function(obj){obj@list},replace=function(obj,value){obj@list<-value})
> 
> setGeneric("printlength",function(object,...)
> standardGeneric("printlength"))
> setMethod("printlength"
>           ,signature(object="list")
>           ,def=function(object)
>           {
>             print(length(object))
>           }
>           )
> 
> xx<-as.list(1:4)
> names(xx)<-letters[1:4]
> mvca<-new("MVCa")
> mvca@list<-xx
> 
> printlength(mvca)
> 
> Any suggestions?
> 
> /E
> 
> --
> Dipl. bio-chem. Witold Eryk Wolski
> MPI-Moleculare Genetic
> Ihnestrasse 63-73 14195 Berlin                 _
> tel: 0049-30-83875219                 __("<   'v'
> http://www.molgen.mpg.de/~wolski      \__/   /   \
> mail: witek96@users.sourceforge.net    ^^     w w
>       wolski@molgen.mpg.de
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From edd at debian.org  Mon Oct 11 18:02:37 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon Oct 11 18:03:10 2004
Subject: [Rd] (PR#7276) Re: Bug#275791: r-gnome: gnome library can not be
	read
In-Reply-To: <Pine.LNX.4.44.0410110804550.30644-100000@gannet.stats>
References: <20041011004959.938B9EDDF@slim.kubism.ku.dk>
	<Pine.LNX.4.44.0410110804550.30644-100000@gannet.stats>
Message-ID: <20041011160237.GA15976@sonny.eddelbuettel.com>

On Mon, Oct 11, 2004 at 08:15:43AM +0100, Prof Brian Ripley wrote:
> On Mon, 11 Oct 2004 edd@debian.org wrote:
> 
> > Dear R bug fixers,
> > 
> > This came in early this morning. The R/Gnome configuration, and selection of
> > libraries hat not changed one bit since I last built 1.9.1 -- but maybe
> > something change in the Gmome/Glib/Gtk, or even x11, libraries? Would anyone
> > know where RestoreAction is defined?
> 
> It was in bin/R.bin in 1.9.1, and is not in bin/exec/R in 2.0.0
> 
> gannet% nm -pg bin/R.bin | grep RestoreAction
> 0826da30 D RestoreAction
> 
> Grepping the sources shows it is defined in 
> 
> src/main/startup.c:static SA_TYPE       RestoreAction = SA_RESTORE;
> src/modules/gnome/system.c:extern SA_TYPE RestoreAction;
> 
> and removing the `static' solves this for me.  I guess no alpha/beta 

Thanks you very much -- that minimal change also solves it for me. 

> tester used the GNOME interface ....

Yup.

> Fixed in R-patched and R-devel now.

And fixed Debian packages are being uploaded now.

Thanks again,  Dirk

> 
> 
> > 
> > The list of Debian packages on which r-gnome depends is below; as this is
> > computed from ldd output I won't add that direct ldd output, but would be
> > glad to supply it as well as other information if it could aid in fixing this.
> > 
> > Thanks, Dirk
> > 
> > 
> > On Sun, Oct 10, 2004 at 11:41:41AM +0200, Wouter Leonard de Vries wrote:
> > > Package: r-gnome
> > > Version: 2.0.0-1
> > > Severity: grave
> > > Justification: renders package unusable
> > > 
> > > 
> > > when trying to start r-gnome I get the following message:
> > > 
> > > Fatal error: The GNOME shared library could not be loaded.
> > >   The error was /usr/lib/R/modules/R_gnome.so: undefined symbol:
> > >   RestoreAction
> > > 
> > > 
> > > -- System Information:
> > > Debian Release: 3.1
> > >   APT prefers unstable
> > >   APT policy: (500, 'unstable'), (1, 'experimental')
> > > Architecture: i386 (i686)
> > > Kernel: Linux 2.6.8.1
> > > Locale: LANG=nl_NL, LC_CTYPE=nl_NL
> > > 
> > > Versions of packages r-gnome depends on:
> > > ii  gdk-imlib1                1.9.14-16      imaging library for use with gtk (
> > > ii  libart2                   1.4.2-19       The GNOME canvas widget - runtime 
> > > ii  libaudiofile0             0.2.6-4        Open-source version of SGI's audio
> > > ii  libbz2-1.0                1.0.2-1        A high-quality block-sorting file 
> > > ii  libc6                     2.3.2.ds1-17   GNU C Library: Shared libraries an
> > > ii  libdb3                    3.2.9-20       Berkeley v3 Database Libraries [ru
> > > ii  libesd0                   0.2.34-1       Enlightened Sound Daemon - Shared 
> > > ii  libglade-gnome0           1:0.17-3       Library to load .glade files at ru
> > > ii  libglade0                 1:0.17-3       Library to load .glade files at ru
> > > ii  libglib1.2                1.2.10-9       The GLib library of C routines
> > > ii  libgnome32                1.4.2-19       The GNOME libraries
> > > ii  libgnomesupport0          1.4.2-19       The GNOME libraries (Support libra
> > > ii  libgnomeui32              1.4.2-19       The GNOME libraries (User Interfac
> > > ii  libgtk1.2                 1.2.10-17      The GIMP Toolkit set of widgets fo
> > > ii  libice6                   4.3.0.dfsg.1-8 Inter-Client Exchange library
> > > ii  libncurses5               5.4-4          Shared libraries for terminal hand
> > > ii  libpcre3                  4.5-1.1        Perl 5 Compatible Regular Expressi
> > > ii  libreadline4              4.3-13         GNU readline and history libraries
> > > ii  libsm6                    4.3.0.dfsg.1-8 X Window System Session Management
> > > ii  libx11-6                  4.3.0.dfsg.1-8 X Window System protocol client li
> > > ii  libxext6                  4.3.0.dfsg.1-8 X Window System miscellaneous exte
> > > ii  libxi6                    4.3.0.dfsg.1-8 X Window System Input extension li
> > > ii  libxml1                   1:1.8.17-8     GNOME XML library
> > > ii  r-base-core               2.0.0-1        GNU R core of statistical computin
> > > ii  xlibs                     4.3.0.dfsg.1-8 X Window System client libraries m
> > > ii  zlib1g                    1:1.2.2-1      compression library - runtime
> > > 
> > > -- no debconf information
> > 
> > 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From ripley at stats.ox.ac.uk  Tue Oct 12 09:55:55 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Oct 12 09:56:01 2004
Subject: (PR#7277) Re: [Rd] strange windows behaviour after changing
Message-ID: <20041012075555.A1021EDE3@slim.kubism.ku.dk>

I can reproduce this in MDI.  Another clue is that as the pager for 
?merge is opened, the font in the console changes.

The console is still working: commands you type in it are accepted.
So the issue appears to be that the font in use has been changed
incorrectly (and it seems that the C code thinks it has been changed in 
the preferences dialog).


On Tue, 12 Oct 2004, Duncan Mackay wrote:

> Hello,
> Thanks for your reply. Yes, editing Rconsole worked (problem didn't appear
> under MDI with lines=16000) after start-up.
> Simply shrinking and restoring the windows didn't restore functionality - my
> R console window remained blank and unresponsive (even to Esc's) so I had to
> shut down R. I was using the MDI interface and my computer is a Toshiba
> Satellite A10 laptop. 
> I've just tried editing the Rconsole to switch to SDI, and the problems
> didn't appear under SDI. 
> Thanks, Duncan
> 
> 
> 
> 
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
> Sent: Monday, 11 October 2004 6:04 PM
> To: duncan.mackay@flinders.edu.au
> Cc: R-bugs@biostat.ku.dk; r-devel@stat.math.ethz.ch
> Subject: Re: (PR#7277) Re: [Rd] strange windows behaviour after changing
> "lines" GUI setting (PR#7277)
> 
> 
> On Mon, 11 Oct 2004, Prof Brian Ripley wrote:
> 
> > Doesn't happen for me (on two rather different machines under Windows
> > XP SP2).  This looks like a Windows GDI refresh problem.  Does editing 
> > the Rconsole file work?  If so, that is a usable workaround. Does 
> > minimizing and restoring the windows show the correct contents?
> 
> One more thing: was this the MDI or SDI interface?  I only tested SDI.
> 
> > On Mon, 11 Oct 2004 duncan.mackay@flinders.edu.au wrote:
> > 
> > > Full_Name: Duncan Mackay
> > > Version: 2.0.0
> > > OS: WinXP
> > > Submission from: (NULL) (129.96.120.254)
> > > 
> > > 
> > > > version
> > >          _              
> > > platform i386-pc-mingw32
> > > arch     i386           
> > > os       mingw32        
> > > system   i386, mingw32  
> > > status                  
> > > major    2              
> > > minor    0.0            
> > > year     2004           
> > > month    10             
> > > day      04             
> > > language R       
> > > 
> > > I am running the above version of R under WinXP Service Pack 2.
> > > 
> > > I have encountered some strange behaviour after changing the "lines"
> > > setting in the GUI preferences, as follows:-
> > > 
> > > "Select Edit/GUI preferences..."
> > > Change the "lines" setting from 8000 to 16000
> > > Click "Apply" then "OK"
> > > Back at the R console, type ?merge
> > > 
> > > The "R Help on 'merge'" window appears but is blank???????
> > > 
> > > Click back in the R Console window. Now it goes blank ???????????
> > > 
> > > ______________________________________________
> > > R-devel@stat.math.ethz.ch mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > > 
> > > 
> > 
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From murdoch at stats.uwo.ca  Tue Oct 12 12:56:50 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue Oct 12 12:56:41 2004
Subject: (PR#7277) Re: [Rd] strange windows behaviour after changing
In-Reply-To: <20041012075555.A1021EDE3@slim.kubism.ku.dk>
References: <20041012075555.A1021EDE3@slim.kubism.ku.dk>
Message-ID: <tsdnm09p1ffokmr94pvmvplrb17bkalqc8@4ax.com>

I still don't see it.  This is strange -- I'm also using XP SP2.

Duncan Murdoch

On Tue, 12 Oct 2004 09:55:55 +0200 (CEST), ripley@stats.ox.ac.uk
wrote:

>I can reproduce this in MDI.  Another clue is that as the pager for 
>?merge is opened, the font in the console changes.
>
>The console is still working: commands you type in it are accepted.
>So the issue appears to be that the font in use has been changed
>incorrectly (and it seems that the C code thinks it has been changed in 
>the preferences dialog).
>
>
>On Tue, 12 Oct 2004, Duncan Mackay wrote:
>
>> Hello,
>> Thanks for your reply. Yes, editing Rconsole worked (problem didn't appear
>> under MDI with lines=16000) after start-up.
>> Simply shrinking and restoring the windows didn't restore functionality - my
>> R console window remained blank and unresponsive (even to Esc's) so I had to
>> shut down R. I was using the MDI interface and my computer is a Toshiba
>> Satellite A10 laptop. 
>> I've just tried editing the Rconsole to switch to SDI, and the problems
>> didn't appear under SDI. 
>> Thanks, Duncan
>> 
>> 
>> 
>> 
>> -----Original Message-----
>> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
>> Sent: Monday, 11 October 2004 6:04 PM
>> To: duncan.mackay@flinders.edu.au
>> Cc: R-bugs@biostat.ku.dk; r-devel@stat.math.ethz.ch
>> Subject: Re: (PR#7277) Re: [Rd] strange windows behaviour after changing
>> "lines" GUI setting (PR#7277)
>> 
>> 
>> On Mon, 11 Oct 2004, Prof Brian Ripley wrote:
>> 
>> > Doesn't happen for me (on two rather different machines under Windows
>> > XP SP2).  This looks like a Windows GDI refresh problem.  Does editing 
>> > the Rconsole file work?  If so, that is a usable workaround. Does 
>> > minimizing and restoring the windows show the correct contents?
>> 
>> One more thing: was this the MDI or SDI interface?  I only tested SDI.
>> 
>> > On Mon, 11 Oct 2004 duncan.mackay@flinders.edu.au wrote:
>> > 
>> > > Full_Name: Duncan Mackay
>> > > Version: 2.0.0
>> > > OS: WinXP
>> > > Submission from: (NULL) (129.96.120.254)
>> > > 
>> > > 
>> > > > version
>> > >          _              
>> > > platform i386-pc-mingw32
>> > > arch     i386           
>> > > os       mingw32        
>> > > system   i386, mingw32  
>> > > status                  
>> > > major    2              
>> > > minor    0.0            
>> > > year     2004           
>> > > month    10             
>> > > day      04             
>> > > language R       
>> > > 
>> > > I am running the above version of R under WinXP Service Pack 2.
>> > > 
>> > > I have encountered some strange behaviour after changing the "lines"
>> > > setting in the GUI preferences, as follows:-
>> > > 
>> > > "Select Edit/GUI preferences..."
>> > > Change the "lines" setting from 8000 to 16000
>> > > Click "Apply" then "OK"
>> > > Back at the R console, type ?merge
>> > > 
>> > > The "R Help on 'merge'" window appears but is blank???????
>> > > 
>> > > Click back in the R Console window. Now it goes blank ???????????
>> > > 
>> > > ______________________________________________
>> > > R-devel@stat.math.ethz.ch mailing list
>> > > https://stat.ethz.ch/mailman/listinfo/r-devel
>> > > 
>> > > 
>> > 
>> > 
>> 
>>

From ripley at stats.ox.ac.uk  Tue Oct 12 14:41:48 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 12 14:41:52 2004
Subject: (PR#7277) Re: [Rd] strange windows behaviour after changing
In-Reply-To: <tsdnm09p1ffokmr94pvmvplrb17bkalqc8@4ax.com>
Message-ID: <Pine.LNX.4.44.0410121333580.1139-100000@gannet.stats>

I've got a lot further.

1) The problem is due to changing the console font, which the preference 
dialog always did (even if it changed it to a new copy of the same font).

2) It is associated with MDI toolbars, and never happens if they are not
selected.  I found one inconsistency: you (I think) have added pager
toolbar buttons and not added setdata() statements, but that does not fix
it.  I can also trigger it by opening a graphics windows or a script 
window, but I did not succeed with a dataentry window.

It looks like something is wrong with the toolbar code, which Guido wrote
as a GraphApp extension and I have not much understanding of.


On Tue, 12 Oct 2004, Duncan Murdoch wrote:

> I still don't see it.  This is strange -- I'm also using XP SP2.
> 
> Duncan Murdoch
> 
> On Tue, 12 Oct 2004 09:55:55 +0200 (CEST), ripley@stats.ox.ac.uk
> wrote:
> 
> >I can reproduce this in MDI.  Another clue is that as the pager for 
> >?merge is opened, the font in the console changes.

That happens as the toolbar is changed to that for a pager.

> >The console is still working: commands you type in it are accepted.
> >So the issue appears to be that the font in use has been changed
> >incorrectly (and it seems that the C code thinks it has been changed in 
> >the preferences dialog).
> >
> >
> >On Tue, 12 Oct 2004, Duncan Mackay wrote:
> >
> >> Hello,
> >> Thanks for your reply. Yes, editing Rconsole worked (problem didn't appear
> >> under MDI with lines=16000) after start-up.
> >> Simply shrinking and restoring the windows didn't restore functionality - my
> >> R console window remained blank and unresponsive (even to Esc's) so I had to
> >> shut down R. I was using the MDI interface and my computer is a Toshiba
> >> Satellite A10 laptop. 
> >> I've just tried editing the Rconsole to switch to SDI, and the problems
> >> didn't appear under SDI. 
> >> Thanks, Duncan
> >> 
> >> 
> >> 
> >> 
> >> -----Original Message-----
> >> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
> >> Sent: Monday, 11 October 2004 6:04 PM
> >> To: duncan.mackay@flinders.edu.au
> >> Cc: R-bugs@biostat.ku.dk; r-devel@stat.math.ethz.ch
> >> Subject: Re: (PR#7277) Re: [Rd] strange windows behaviour after changing
> >> "lines" GUI setting (PR#7277)
> >> 
> >> 
> >> On Mon, 11 Oct 2004, Prof Brian Ripley wrote:
> >> 
> >> > Doesn't happen for me (on two rather different machines under Windows
> >> > XP SP2).  This looks like a Windows GDI refresh problem.  Does editing 
> >> > the Rconsole file work?  If so, that is a usable workaround. Does 
> >> > minimizing and restoring the windows show the correct contents?
> >> 
> >> One more thing: was this the MDI or SDI interface?  I only tested SDI.
> >> 
> >> > On Mon, 11 Oct 2004 duncan.mackay@flinders.edu.au wrote:
> >> > 
> >> > > Full_Name: Duncan Mackay
> >> > > Version: 2.0.0
> >> > > OS: WinXP
> >> > > Submission from: (NULL) (129.96.120.254)
> >> > > 
> >> > > 
> >> > > > version
> >> > >          _              
> >> > > platform i386-pc-mingw32
> >> > > arch     i386           
> >> > > os       mingw32        
> >> > > system   i386, mingw32  
> >> > > status                  
> >> > > major    2              
> >> > > minor    0.0            
> >> > > year     2004           
> >> > > month    10             
> >> > > day      04             
> >> > > language R       
> >> > > 
> >> > > I am running the above version of R under WinXP Service Pack 2.
> >> > > 
> >> > > I have encountered some strange behaviour after changing the "lines"
> >> > > setting in the GUI preferences, as follows:-
> >> > > 
> >> > > "Select Edit/GUI preferences..."
> >> > > Change the "lines" setting from 8000 to 16000
> >> > > Click "Apply" then "OK"
> >> > > Back at the R console, type ?merge
> >> > > 
> >> > > The "R Help on 'merge'" window appears but is blank???????
> >> > > 
> >> > > Click back in the R Console window. Now it goes blank ???????????
> >> > > 
> >> > > ______________________________________________
> >> > > R-devel@stat.math.ethz.ch mailing list
> >> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> >> > > 
> >> > > 
> >> > 
> >> > 
> >> 
> >> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Oct 12 16:34:48 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Oct 12 16:34:52 2004
Subject: [Rd] Re: (PR#7280) Documentation
Message-ID: <20041012143448.C4CC41042B@slim.kubism.ku.dk>

The message below seems not to have been circulated to R-devel: PR#7279 is 
from the same person and unreadable in the repository.  Presumably both 
were eliminated by spam filters.

R-bugs is not an appropriate place to ask questions (see the FAQ), but 
html documentation *is* supported and requires makeinfo 4.5, as the NEWS 
file says.

This is the expected result from a missing or ancient version of makeinfo, 
and there will have a message earlier in that case.  Please read through 
all the configuration information for a message like

	"you cannot build info versions of the R manuals"

Solution: install GNU texinfo 4.7 (or 4.6 or 4.5).

Yet another non-bug report ....

-------------------------- message pasted from R-bugs -------------------

From: cchriste@aspenresearch.com
To: R-bugs@biostat.ku.dk
Subject: documentation
Date: Mon, 11 Oct 2004 18:03:31 +0200 (CEST)

Full_Name: Chris Christensen
Version: 2.0.0
OS: linux Mandrake 9.0
Submission from: (NULL) (158.107.48.254)


Building from source creates the following zero length html files:

-rw-r--r--    1 cchrist3 cchrist3        0 Oct 11 10:35 R-data.html
-rw-r--r--    1 cchrist3 cchrist3        0 Oct 11 10:35 R-exts.html
-rw-r--r--    1 cchrist3 cchrist3        0 Oct 11 10:35 R-FAQ.html
-rw-r--r--    1 cchrist3 cchrist3        0 Oct 11 10:35 R-intro.html
-rw-r--r--    1 cchrist3 cchrist3        0 Oct 11 10:35 R-lang.html

Is html documentation no longer supported?

Source from http://www.ibiblio.org/pub/languages/R/CRAN/



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kwright at eskimo.com  Tue Oct 12 19:39:14 2004
From: kwright at eskimo.com (kwright@eskimo.com)
Date: Tue Oct 12 19:39:19 2004
Subject: [Rd] promptData still creates 'data(...)' in R 2.0.0
Message-ID: <52354.170.54.59.167.1097602754.squirrel@170.54.59.167>


Not necessarily a bug report, but might be nice to change.

I'm using R 2.0.0 on Windows 2000.

The promptData function creates a .Rd file in which the 'usage' section is:

\usage{data(<dataset>)}

I've looked at several of the help files for various data sets.  It looks
like the use of 'data' is being reduced and so it might be more
appropriate for promptData to create this:

\useage{<dataset>}



Kevin Wright

From ripley at stats.ox.ac.uk  Tue Oct 12 19:47:14 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 12 19:48:41 2004
Subject: [Rd] promptData still creates 'data(...)' in R 2.0.0
In-Reply-To: <52354.170.54.59.167.1097602754.squirrel@170.54.59.167>
Message-ID: <Pine.LNX.4.44.0410121842070.2375-100000@gannet.stats>

This is deliberate.

Datasets can only be used directly for packages to be installed with
`LazyData: Yes', and that is not known when prompt() is called.

Allowing direct use of datasets is a convenience that the avantgarde 
packages have adopted, but there can be good reasons not to go in the 
direction for individual packages (name clashes being one).

Some people have kept data(foo) in their documentation to allow their 
package to be still used with R 1.9.x (or even earlier).


On Tue, 12 Oct 2004 kwright@eskimo.com wrote:

> Not necessarily a bug report, but might be nice to change.
> 
> I'm using R 2.0.0 on Windows 2000.
> 
> The promptData function creates a .Rd file in which the 'usage' section is:
> 
> \usage{data(<dataset>)}
> 
> I've looked at several of the help files for various data sets.  It looks
> like the use of 'data' is being reduced and so it might be more
> appropriate for promptData to create this:
> 
> \useage{<dataset>}


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hdeshmuk at gmu.edu  Tue Oct 12 20:47:53 2004
From: hdeshmuk at gmu.edu (hdeshmuk@gmu.edu)
Date: Tue Oct 12 20:47:56 2004
Subject: [Rd] R/BioConductor error (PR#7282)
Message-ID: <20041012184753.96E071042B@slim.kubism.ku.dk>

Full_Name: H Deshmukh
Version: 2.0
OS: 2000
Submission from: (NULL) (129.174.206.239)


Can somebody tell me what is it that i am doing wrong,i was not sure whether to
post BioConductor error here or not.

Thanks

>source("http://www.bioconductor.org/getBioC.R") 
> getBioC(libName = "all") 
Running getBioC version 1.2.65....
If you encounter problems, first make sure that
you are running the latest version of getBioC()
which can be found at: www.bioconductor.org/getBioC.R

Please direct any concerns or questions to bioconductor@stat.math.ethz.ch.


You are downloading all of the Bioconductor packages and any dependencies.
Depending on your system this will be about 90-95 packages and be roughly 200MB
in size.

Are you sure that you want to do this? [y/n] y
Loading required package: reposTools 
Error in library(package, character.only = TRUE, logical = TRUE, warn.conflicts
= warn.conflicts,  : 
        'reposTools' is not a valid package -- installed < 2.0.0?

From ripley at stats.ox.ac.uk  Tue Oct 12 21:18:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 12 21:19:01 2004
Subject: [Rd] R/BioConductor error (PR#7282)
In-Reply-To: <20041012184753.96E071042B@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410122003140.2640-100000@gannet.stats>

1) See the R FAQ.  R-bugs is not for questions.  PLEASE don't abuse our 
system like this.

2) R-bugs is not for reports on Bioconductor.

3) The error message you got is mentioned in the top section of the NEWS 
file for R 2.0.0, namely

    o	Packages must have been re-installed for this version, and
	library() will enforce this.

4) www.bioconductor.org says that the version (1.5) for R 2.0.0 will be 
available on October 25th.  It could be more explicit about this!
Meanwhile its standard source repository is unavailable, but it looks like 
they need to do some work for users of `OS2000'.

If you want BioC now, read its FAQ and install the version of R it tells 
you to (rw1090, for some reason, but I believe rw1091 would be a better 
choice).


On Tue, 12 Oct 2004 hdeshmuk@gmu.edu wrote:

> Full_Name: H Deshmukh
> Version: 2.0
No such version!  There is 2.0.0.
> OS: 2000
No such OS!  There is Windows 2000.
> Submission from: (NULL) (129.174.206.239)
> 
> 
> Can somebody tell me what is it that i am doing wrong,i was not sure whether to
> post BioConductor error here or not.
> 
> Thanks
> 
> >source("http://www.bioconductor.org/getBioC.R") 
> > getBioC(libName = "all") 
> Running getBioC version 1.2.65....
> If you encounter problems, first make sure that
> you are running the latest version of getBioC()
> which can be found at: www.bioconductor.org/getBioC.R
> 
> Please direct any concerns or questions to bioconductor@stat.math.ethz.ch.
> 
> 
> You are downloading all of the Bioconductor packages and any dependencies.
> Depending on your system this will be about 90-95 packages and be roughly 200MB
> in size.
> 
> Are you sure that you want to do this? [y/n] y
> Loading required package: reposTools 
> Error in library(package, character.only = TRUE, logical = TRUE, warn.conflicts
> = warn.conflicts,  : 
>         'reposTools' is not a valid package -- installed < 2.0.0?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From patrick at burns-stat.com  Tue Oct 12 23:18:23 2004
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue Oct 12 23:18:35 2004
Subject: [Rd] suggested minor clarification in fix help file
Message-ID: <416C4A1F.3040101@burns-stat.com>

In the help file for "fix" in the Details section:

I suggest that "when" be replaced by "in which case"
so that the sentence reads:

The name supplied as 'x' need not exist as an R object, in which case a
function with no arguments and an empty body is supplied for editing.

I'm looking at:

platform i386-pc-mingw32
arch     i386          
os       mingw32       
system   i386, mingw32 
status                 
major    2             
minor    0.0           
year     2004          
month    10            
day      04            
language R    


Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

From rcook at wyrms.net  Wed Oct 13 01:14:01 2004
From: rcook at wyrms.net (rcook@wyrms.net)
Date: Wed Oct 13 01:14:04 2004
Subject: [Rd] error when running configure (PR#7283)
Message-ID: <20041012231401.F34BEEDE1@slim.kubism.ku.dk>

Full_Name: Robin Cook
Version: 2.0.0
OS: Linux (2.6.8.1)
Submission from: (NULL) (66.140.245.97)


Compling with gcc 3.4.2 and glibc 2.3.3 with nptl enabled and getting the below
error  when running ./configure

checking for Fortran libraries of g77...  -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2
-L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2/../../../../i686-pc-linux-gnu/lib
-L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2/../../.. -lfrtbegin -lg2c -lm -lgcc_s
checking for dummy main to link with Fortran libraries... none
checking for Fortran name-mangling scheme... lower case, underscore, extra
underscore
checking whether g77 appends underscores to external names... yes
checking whether mixed C/Fortran code can be run... yes
checking whether g77 and gcc agree on int and double... yes
checking whether g77 and gcc agree on double complex... yes
checking whether g77 supports -c -o FILE.lo... yes
checking whether g++ accepts -M for generating dependencies... yes
checking whether g++ supports -c -o FILE.lo... yes
checking whether gcc accepts -mieee-fp... yes
checking whether g77 accepts -mieee-fp... yes
checking whether g++ accepts -mieee-fp... yes
checking for xmkmf... /usr/bin/X11/xmkmf
configure: WARNING: I could not determine FPICFLAGS.
configure: error: See the file INSTALL for more information.

From murdoch at stats.uwo.ca  Wed Oct 13 06:06:53 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed Oct 13 06:06:43 2004
Subject: [Rd] suggested minor clarification in fix help file
In-Reply-To: <416C4A1F.3040101@burns-stat.com>
References: <416C4A1F.3040101@burns-stat.com>
Message-ID: <feapm09ojf2padqog0p3iqp08tf9uqfqjg@4ax.com>

On Tue, 12 Oct 2004 22:18:23 +0100, Patrick Burns
<patrick@burns-stat.com> wrote:

>In the help file for "fix" in the Details section:
>
>I suggest that "when" be replaced by "in which case"
>so that the sentence reads:
>
>The name supplied as 'x' need not exist as an R object, in which case a
>function with no arguments and an empty body is supplied for editing.

Done.

Duncan Murdoch

From ripley at stats.ox.ac.uk  Wed Oct 13 08:35:26 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 13 08:35:34 2004
Subject: [Rd] error when running configure (PR#7283)
In-Reply-To: <20041012231401.F34BEEDE1@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410130723550.3778-100000@gannet.stats>

Why have you submitted this as a bug in R?  Have you read the R FAQ on 
BUGS?  Giving a clear error message about your system is not a bug.

R has been configured *many* times on systems with gcc 3.4.2 and glibc 
2.3.x (mainly i686 systems, which you did not mention).  Something is 
unusual, possibly broken, about your system but we have insufficient 
information to know what.

There is a clear error message, to see the file INSTALL, and that tells
you to read R-admin.html for more information.  You need to set FPICFLAGS,
and the setting is -fPIC for g77 on i686-pc-linux-gnu (as man g77 would 
have told you).  The reference tells you how and where to set it.

On Wed, 13 Oct 2004 rcook@wyrms.net wrote:

> Full_Name: Robin Cook
> Version: 2.0.0
> OS: Linux (2.6.8.1)
> Submission from: (NULL) (66.140.245.97)
> 
> 
> Compling with gcc 3.4.2 and glibc 2.3.3 with nptl enabled and getting the below
> error  when running ./configure
> 
> checking for Fortran libraries of g77...  -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2
> -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2/../../../../i686-pc-linux-gnu/lib
> -L/usr/lib/gcc/i686-pc-linux-gnu/3.4.2/../../.. -lfrtbegin -lg2c -lm -lgcc_s
> checking for dummy main to link with Fortran libraries... none
> checking for Fortran name-mangling scheme... lower case, underscore, extra
> underscore
> checking whether g77 appends underscores to external names... yes
> checking whether mixed C/Fortran code can be run... yes
> checking whether g77 and gcc agree on int and double... yes
> checking whether g77 and gcc agree on double complex... yes
> checking whether g77 supports -c -o FILE.lo... yes
> checking whether g++ accepts -M for generating dependencies... yes
> checking whether g++ supports -c -o FILE.lo... yes
> checking whether gcc accepts -mieee-fp... yes
> checking whether g77 accepts -mieee-fp... yes
> checking whether g++ accepts -mieee-fp... yes
> checking for xmkmf... /usr/bin/X11/xmkmf
> configure: WARNING: I could not determine FPICFLAGS.
> configure: error: See the file INSTALL for more information.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From andy_liaw at merck.com  Wed Oct 13 12:22:08 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Oct 13 12:22:28 2004
Subject: [Rd] RE: [R] debugging non-visible functions
Message-ID: <3A822319EB35174CA3714066D590DCD504AF852A@usrymx25.merck.com>

[I'm diverting this to R-devel, as I believe my questions are more
appropriate for that.]

> From: Prof Brian Ripley
[snip]
> Luke Tierney recommends removing the NAMESPACE file during 
> development of 
> a package if you need frequent access to debug/change its functions.

But isn't that a bit troublesome if there is a shared object to be loaded in
the NAMESPACE file?  If I rename the NAMESPACE file to something else, I
would need to put back library.dynam() in .First.lib(), right?  I thought it
might work to write some code in .First.lib that checks for existence of
NAMESPACE, and call libaray.dynam() conditionally.  Does this sound about
right?

On a slightly different topic:  In R-2.0.0, packages with NAMESPACE no
longer need to use the package= argument in .C/.Fortran.  Does that mean if
I remove those arguments, I should put R version >= 2.0.0 in the Depend
field of the DESCRIPTION?

Best,
Andy

 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html
> 
>

From ripley at stats.ox.ac.uk  Wed Oct 13 12:38:00 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 13 12:38:03 2004
Subject: [Rd] RE: [R] debugging non-visible functions
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF852A@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0410131124080.4310-100000@gannet.stats>

On Wed, 13 Oct 2004, Liaw, Andy wrote:

> [I'm diverting this to R-devel, as I believe my questions are more
> appropriate for that.]

Certainly.  Probably the original question was, too.

> > From: Prof Brian Ripley
> [snip]
> > Luke Tierney recommends removing the NAMESPACE file during 
> > development of 
> > a package if you need frequent access to debug/change its functions.
> 
> But isn't that a bit troublesome if there is a shared object to be loaded in
> the NAMESPACE file?  If I rename the NAMESPACE file to something else, I
> would need to put back library.dynam() in .First.lib(), right?  I thought it
> might work to write some code in .First.lib that checks for existence of
> NAMESPACE, and call libaray.dynam() conditionally.  Does this sound about
> right?

.First.lib is only used if there is no NAMESPACE, so the conditioning is 
automatic, but otherwise yes.

And BTW, you can't just remove the installed NAMESPACE file any more: you 
need to remove Meta/nsInfo.rds at least -- I was implying removing the 
source file and re-installing (I tend to use a test library for 
namespace-less versions).

> On a slightly different topic:  In R-2.0.0, packages with NAMESPACE no
> longer need to use the package= argument in .C/.Fortran.  Does that mean if
> I remove those arguments, I should put R version >= 2.0.0 in the Depend
> field of the DESCRIPTION?

I think you should not remove the PACKAGE= (sic) arguments.  There has
been little (none I have seen) discussion of that change, and Duncan TL
will be able to elucidate.  But the reason given in NEWS to omit them
relates to loading more than one versioned install of a package at once,
something we were told originally by Robert G was not intended to be
allowed (and that is assumed in quite a few places in the code -- there is
no way to have imports from a version of a namespace, for example -- and
indeed importing from versioned install of namespaces did not work in
2.0.0).  Duncan?

But if you do, yes you need (R >= 2.0.0) or R CMD check in earlier 
versions will scold you and users could get bitten.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From murdoch at stats.uwo.ca  Wed Oct 13 16:09:14 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed Oct 13 16:09:17 2004
Subject: [Rd] RE: [R] debugging non-visible functions
In-Reply-To: <Pine.LNX.4.44.0410131124080.4310-100000@gannet.stats>
References: <3A822319EB35174CA3714066D590DCD504AF852A@usrymx25.merck.com>
	<Pine.LNX.4.44.0410131124080.4310-100000@gannet.stats>
Message-ID: <u1dqm0tuq4l5j0ach9f27fg49bnaqlbe8u@4ax.com>

On Wed, 13 Oct 2004 11:38:00 +0100 (BST), Prof Brian Ripley
<ripley@stats.ox.ac.uk> wrote :

>> > From: Prof Brian Ripley
>> [snip]
>> > Luke Tierney recommends removing the NAMESPACE file during 
>> > development of 
>> > a package if you need frequent access to debug/change its functions.
>> 
>> But isn't that a bit troublesome if there is a shared object to be loaded in
>> the NAMESPACE file?  If I rename the NAMESPACE file to something else, I
>> would need to put back library.dynam() in .First.lib(), right?  I thought it
>> might work to write some code in .First.lib that checks for existence of
>> NAMESPACE, and call libaray.dynam() conditionally.  Does this sound about
>> right?

For 2.1.0, would it be reasonable to extend debug() the way ? was
extended?  E.g. allow

debug(plot(x))

and have the debugging flag be set on the appropriate function,
whatever and wherever it happens to be?  There's some ambiguity with
S3 methods (did you want to debug the generic or the method?), but I
think defaulting to debugging of the method would be reasonable.  (And
I think ? needs to be extended to handle S3 methods too, but that's a
different question.)

Duncan Murdoch

From andy_liaw at merck.com  Wed Oct 13 16:19:56 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Oct 13 16:20:23 2004
Subject: [Rd] RE: [R] debugging non-visible functions
Message-ID: <3A822319EB35174CA3714066D590DCD504AF852E@usrymx25.merck.com>

> From: Duncan Murdoch 
[snip]
> For 2.1.0, would it be reasonable to extend debug() the way ? was
> extended?  E.g. allow
> 
> debug(plot(x))
> 
> and have the debugging flag be set on the appropriate function,
> whatever and wherever it happens to be?  There's some ambiguity with
> S3 methods (did you want to debug the generic or the method?), but I
> think defaulting to debugging of the method would be reasonable.  (And
> I think ? needs to be extended to handle S3 methods too, but that's a
> different question.)
> 
> Duncan Murdoch

The ambiguity could be quite real.  I have a formula method that just does
preprocessing, then call the default method.  What do the debugger do then?
I've run into situations that I wanted to debug both of them, but not at the
same time.  I just do what Gabor had suggested: debug(namespace:::function).
Works for me.

Best,
Andy

From murdoch at stats.uwo.ca  Wed Oct 13 16:38:01 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed Oct 13 16:38:05 2004
Subject: [Rd] RE: [R] debugging non-visible functions
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF852E@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF852E@usrymx25.merck.com>
Message-ID: <0afqm0litkmj9jtqt6gjs3olt29tc86830@4ax.com>

On Wed, 13 Oct 2004 10:19:56 -0400, "Liaw, Andy" <andy_liaw@merck.com>
wrote :

>> From: Duncan Murdoch 
>[snip]
>> For 2.1.0, would it be reasonable to extend debug() the way ? was
>> extended?  E.g. allow
>> 
>> debug(plot(x))
>> 
>> and have the debugging flag be set on the appropriate function,
>> whatever and wherever it happens to be?  There's some ambiguity with
>> S3 methods (did you want to debug the generic or the method?), but I
>> think defaulting to debugging of the method would be reasonable.  (And
>> I think ? needs to be extended to handle S3 methods too, but that's a
>> different question.)
>> 
>> Duncan Murdoch
>
>The ambiguity could be quite real.  I have a formula method that just does
>preprocessing, then call the default method.  What do the debugger do then?
>I've run into situations that I wanted to debug both of them, but not at the
>same time.  I just do what Gabor had suggested: debug(namespace:::function).
>Works for me.

I think the solution to this problem is to adopt a different model of
the debugger, more like other source level debuggers:  allow
breakpoints to be set at particular locations (not just on function
entry points), allow single stepping that enters (or doesn't) the
evaluation of functions.

Duncan Murdoch

From ripley at stats.ox.ac.uk  Wed Oct 13 16:52:23 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 13 16:52:27 2004
Subject: [Rd] RE: [R] debugging non-visible functions
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF852E@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0410131541530.21081-100000@gannet.stats>

On Wed, 13 Oct 2004, Liaw, Andy wrote:

> > From: Duncan Murdoch 
> [snip]
> > For 2.1.0, would it be reasonable to extend debug() the way ? was
> > extended?  E.g. allow
> > 
> > debug(plot(x))
> > 
> > and have the debugging flag be set on the appropriate function,
> > whatever and wherever it happens to be?  There's some ambiguity with
> > S3 methods (did you want to debug the generic or the method?), but I
> > think defaulting to debugging of the method would be reasonable.  (And
> > I think ? needs to be extended to handle S3 methods too, but that's a
> > different question.)
> > 
> > Duncan Murdoch
> 
> The ambiguity could be quite real.  I have a formula method that just does
> preprocessing, then call the default method.  What do the debugger do then?
> I've run into situations that I wanted to debug both of them, but not at the
> same time.  I just do what Gabor had suggested: debug(namespace:::function).
> Works for me.

However that's not actually the function used for an S3 method.  

1) You can alter namespace:::function and leave the registered method
unchanged, and v.v., although we try not to make it easy for you.

2) In any case, the registered method for predict() of class "foo" need
not be namespace:::predict.foo, but might be predictFoo, say.  (And you 
cannot _easily_ find out.)

Trace is another problem child in namespaces: see PR#7091 on R-bugs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jfox at mcmaster.ca  Wed Oct 13 17:00:39 2004
From: jfox at mcmaster.ca (John Fox)
Date: Wed Oct 13 17:01:35 2004
Subject: [Rd] RE: [R] one more Rcmdr problem
In-Reply-To: <200410131829.i9DITvZ9024159@swork.sas.unibuc.ro>
Message-ID: <20041013150040.VYVM15612.tomts16-srv.bellnexxia.net@JohnDesktop8300>

Dear Adrian,

I've just been able to verify this problem. It occurs for me when I try to
copy via Ctrl-C, but not when I use the Rcmdr Edit -> Copy menu, nor when I
use the right-click context menu. As near as I can tell, the problem is
general to all Ctrl-key combinations. I don't have time at the moment to
investigate further, but I suspect a problem between tcltk and Rgui. I'm
copying this response to the r-devel list, since that might be a better
place to pursue the problem.

Sorry for the trouble.
 John

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario
Canada L8S 4M4
905-525-9140x23604
http://socserv.mcmaster.ca/jfox 
-------------------------------- 

> -----Original Message-----
> From: r-help-bounces@stat.math.ethz.ch 
> [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Adrian Dusa
> Sent: Wednesday, October 13, 2004 6:35 AM
> To: r-help@stat.math.ethz.ch
> Subject: [R] one more Rcmdr problem
> 
> Hello,
> 
> I'm using R 2.0.0 with the latest Rcmdr package installed 
> from CRAN, on Windows XP Professional.
> 
> When trying to copy some commands or results, either from the 
> upper or lower text window, this causes Rcmdr to crash:
> 
> "R for Windows GUI front-end has encountered a problem and 
> needs to close"
> 
> Did anyone have the same problem? I don't think it's my 
> system, as it happened to reinstall my Windows just a few 
> days ago, and the same problem occurred in the former one.
> 
> Regards,
> Adrian
> 
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Adrian Dusa
> Romanian Social Data Archive
> 1 Schitu Magureanu Bd.
> 050025 Bucharest sector 5
> Tel. +40 21 3126618\
>      +40 21 3153122/ int.101
> 
> 
> 
> --
> This message was scanned for spam and viruses by BitDefender 
> For more information please visit http://linux.bitdefender.com/
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html

From andy_liaw at merck.com  Wed Oct 13 17:12:32 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Oct 13 17:13:48 2004
Subject: [Rd] RE: [R] debugging non-visible functions
Message-ID: <3A822319EB35174CA3714066D590DCD504AF852F@usrymx25.merck.com>

> From: Duncan Temple Lang
> 
> Prof Brian Ripley wrote:
> > On Wed, 13 Oct 2004, Liaw, Andy wrote:
> > 
> > 
> > > On a slightly different topic:  In R-2.0.0, packages with 
> NAMESPACE no
> > > longer need to use the package= argument in .C/.Fortran.  
> Does that mean if
> > > I remove those arguments, I should put R version >= 2.0.0 
> in the Depend
> > > field of the DESCRIPTION?
> > 
> > I think you should not remove the PACKAGE= (sic) arguments. 
>  There has
> > been little (none I have seen) discussion of that change, 
> and Duncan TL
> > will be able to elucidate.  But the reason given in NEWS to 
> omit them
> > relates to loading more than one versioned install of a 
> package at once,
> > something we were told originally by Robert G was not intended to be
> > allowed (and that is assumed in quite a few places in the 
> code -- there is
> > no way to have imports from a version of a namespace, for 
> example -- and
> > indeed importing from versioned install of namespaces did 
> not work in
> > 2.0.0).  Duncan?
> 
> The reason in the NEWS file is exactly the motivation.
> It is for cases where one explicitly loads a package (A) via 
> the library() function,
> and a different version of that package is imported indirectly  
> when loading another package via a dependency on an explicit 
> version of A.   And this is also the case when two packages (B and C)
> require different versions of the original package. 
> A less pressing but useful use example is when one wants to compare
> results from different versions as one develops new releases.
> And similarly for reproducible research, we often need explicit
> versions of packages within a larger context of an existing R session.
> There are easy work around for some of these, but they are 
> cumbersome.
> 
> I don't recall the exact details of Robert's original 
> statements on this topic.  As with many features
> introduced in R, the initial work (e.g. on namespaces) is not 
> entirely functional
> for all advanced, less-used aspects of other features being 
> introduced.
> So we will have to allow a NAMESPACE to import from
> a particular version as things evolve. It is an issue,
> but I don't think we want to prohibit having
> different versions of a package loaded concurrently.
> Using a namespace provides a convenient way to find
> the associated DLL.  We can also explicitly identify
 
The original problem I described to Robert is that, when I loaded two
versions of randomForest into R, calling the first one is fine, but calling
the second leads to segfault.  This is probably just laziness on my part:  I
was trying to see differences between the versions, as Duncan mentioned
above.  This can be done in other ways, but it would be nice to do within
the same R session...  I have not tried the new feature yet.


> > But if you do, yes you need (R >= 2.0.0) or R CMD check in earlier 
> > versions will scold you and users could get bitten.
> 
> And, as Andy well knows since he discovered the problem,
> if one doesn't use the new mechanism (i.e. with a NAMESPACE
> file and without the PACKAGE argument),  users can get bitten
> too.  Damned if you do, ...
> Not allowing versions is definitely easiest, but 
> the feature is feasible and desirable.
> 
> And dropping the PACKAGE argument makes the code more 
> compatible with S-Plus and so easier to maintain common
> versions across both engines.

It may be icing on the cake, but I've pretty much given up on trying to
provide an S-PLUS version of RF, especially as I make more and more calls to
utility functions via the C API.

Thanks to y'all for the help!

Best,
Andy

 
>  D.
> 
> > 
> > Brian
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> -- 
> Duncan Temple Lang                        duncan@wald.ucdavis.edu
>  371, Kerr Hall
>  University of California at Davis
> 
> Phone: (530) 752-4782
> FAX:   (530) 752-7099
> 
> 
>

From ripley at stats.ox.ac.uk  Wed Oct 13 17:17:40 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 13 17:17:56 2004
Subject: [Rd] RE: [R] debugging non-visible functions
In-Reply-To: <20041013145313.GA12241@wald.ucdavis.edu>
Message-ID: <Pine.LNX.4.44.0410131557420.21081-100000@gannet.stats>

On Wed, 13 Oct 2004, Duncan Temple Lang wrote:

> Prof Brian Ripley wrote:
> > On Wed, 13 Oct 2004, Liaw, Andy wrote:
> > 
> > 
> > > On a slightly different topic:  In R-2.0.0, packages with NAMESPACE no
> > > longer need to use the package= argument in .C/.Fortran.  Does that mean if
> > > I remove those arguments, I should put R version >= 2.0.0 in the Depend
> > > field of the DESCRIPTION?
> > 
> > I think you should not remove the PACKAGE= (sic) arguments.  There has
> > been little (none I have seen) discussion of that change, and Duncan TL
> > will be able to elucidate.  But the reason given in NEWS to omit them
> > relates to loading more than one versioned install of a package at once,
> > something we were told originally by Robert G was not intended to be
> > allowed (and that is assumed in quite a few places in the code -- there is
> > no way to have imports from a version of a namespace, for example -- and
> > indeed importing from versioned install of namespaces did not work in
> > 2.0.0).  Duncan?
> 
> 
> The reason in the NEWS file is exactly the motivation.
> It is for cases where one explicilty loads a package (A) via the library() function,
> and a different version of that package is imported indirectly  
> when loading another package via a dependency on an explicit 
> version of A.   And this is also the case when two packages (B and C)
> require different versions of the original package. 
> A less pressing but useful use example is when one wants to compare
> results from different versions as one develops new releases.
> And similarly for reproducible research, we often need explicit
> versions of packages within a larger context of an existing R session.
> There are easy work arounds for some of these, but they are cumbersome.

The question is: does allowing simultaneous loading of versions actually
help solve these problems?

> I don't recall the exact details of Robert's original 
> statements on this topic.  As with many features
> introduced in R, the initial work (e.g. on namespaces) is not entirely functional
> for all advanced, less-used aspects of other features being introduced.
> So we will have to allow a NAMESPACE to import from
> a particular version as things evolve. It is an issue,
> but I don't think we want to prohibit having
> different versions of a package loaded concurrently.
> Using a namespace provides a convenient way to find
> the associated DLL.  We can also explicitly identify

Thanks for the clarification.  Some of us were not aware that this was a
design goal, and it will be good to bear it in mind.  

HOWEVER, I don't see we have any feasible solution without namespaces,
since whichever version is loaded last wins in the usual scoping rules.  
If B requires A version 1 and C requires A version 2 and they are loaded
in that order the search path will be

C A_2 B A_1 (using Depends) or A_2 C A_1 B (using require)

and code in B will find objects from A_2 if they are in there.  Without
versioned namespace imports I don't see how this helps: am I missing
something?  (In R<=2.0.0 if you have a namespace in A you can't import
from it, at least in any way compatible with non-versioned installs.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jfox at mcmaster.ca  Wed Oct 13 19:30:49 2004
From: jfox at mcmaster.ca (John Fox)
Date: Wed Oct 13 19:30:57 2004
Subject: problem with tcltk under Windows (was  [Rd] RE: [R] one more
	Rcmdr problem)
In-Reply-To: <20041013150040.VYVM15612.tomts16-srv.bellnexxia.net@JohnDesktop8300>
Message-ID: <web-68482305@cgpsrv2.cis.mcmaster.ca>

Dear Adrian,

As I suspected, this is not a problem specific to the Rcmdr but is
rather a more general tcltk/Windows problem. The following works fine
in R 1.9.1 (and before, I assume) but reliably crashes R 2.0.0
(including the latest Windows patched version on CRAN) under Windows XP
Prof:

library(tcltk)
top <- tktoplevel()
textwindow <- tktext(top, bg="white", height=10, width=40, wrap="none")
tkgrid(textwindow)

Then, with the cursor in the text windows, press any Ctrl-key
combination to crash Rgui.

I'm cc'ing R-windows@R-project.org.

Regards,
 John 

On Wed, 13 Oct 2004 11:00:39 -0400
 "John Fox" <jfox@mcmaster.ca> wrote:
> Dear Adrian,
> 
> I've just been able to verify this problem. It occurs for me when I
> try to
> copy via Ctrl-C, but not when I use the Rcmdr Edit -> Copy menu, nor
> when I
> use the right-click context menu. As near as I can tell, the problem
> is
> general to all Ctrl-key combinations. I don't have time at the moment
> to
> investigate further, but I suspect a problem between tcltk and Rgui.
> I'm
> copying this response to the r-devel list, since that might be a
> better
> place to pursue the problem.
> 
> Sorry for the trouble.
>  John
> 
> --------------------------------
> John Fox
> Department of Sociology
> McMaster University
> Hamilton, Ontario
> Canada L8S 4M4
> 905-525-9140x23604
> http://socserv.mcmaster.ca/jfox 
> -------------------------------- 
> 
> > -----Original Message-----
> > From: r-help-bounces@stat.math.ethz.ch 
> > [mailto:r-help-bounces@stat.math.ethz.ch] On Behalf Of Adrian Dusa
> > Sent: Wednesday, October 13, 2004 6:35 AM
> > To: r-help@stat.math.ethz.ch
> > Subject: [R] one more Rcmdr problem
> > 
> > Hello,
> > 
> > I'm using R 2.0.0 with the latest Rcmdr package installed 
> > from CRAN, on Windows XP Professional.
> > 
> > When trying to copy some commands or results, either from the 
> > upper or lower text window, this causes Rcmdr to crash:
> > 
> > "R for Windows GUI front-end has encountered a problem and 
> > needs to close"
> > 
> > Did anyone have the same problem? I don't think it's my 
> > system, as it happened to reinstall my Windows just a few 
> > days ago, and the same problem occurred in the former one.
> > 
> > Regards,
> > Adrian
> > 
> > ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> > Adrian Dusa
> > Romanian Social Data Archive
> > 1 Schitu Magureanu Bd.
> > 050025 Bucharest sector 5
> > Tel. +40 21 3126618\
> >      +40 21 3153122/ int.101
> > 
> > 
> > 
> > --
> > This message was scanned for spam and viruses by BitDefender 
> > For more information please visit http://linux.bitdefender.com/
> > 
> > ______________________________________________
> > R-help@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! 
> > http://www.R-project.org/posting-guide.html
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/

From murdoch at stats.uwo.ca  Wed Oct 13 20:19:42 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed Oct 13 20:20:15 2004
Subject: problem with tcltk under Windows (was [Rd] RE: [R] one more Rcmdr
	problem)
In-Reply-To: <web-68482305@cgpsrv2.cis.mcmaster.ca>
References: <20041013150040.VYVM15612.tomts16-srv.bellnexxia.net@JohnDesktop8300>
	<web-68482305@cgpsrv2.cis.mcmaster.ca>
Message-ID: <n9sqm0d4p0po7t0q59uk2suhg1357g3s9k@4ax.com>

On Wed, 13 Oct 2004 13:30:49 -0400, "John Fox" <jfox@mcmaster.ca>
wrote :

>Dear Adrian,
>
>As I suspected, this is not a problem specific to the Rcmdr but is
>rather a more general tcltk/Windows problem. The following works fine
>in R 1.9.1 (and before, I assume) but reliably crashes R 2.0.0
>(including the latest Windows patched version on CRAN) under Windows XP
>Prof:
>
>library(tcltk)
>top <- tktoplevel()
>textwindow <- tktext(top, bg="white", height=10, width=40, wrap="none")
>tkgrid(textwindow)
>
>Then, with the cursor in the text windows, press any Ctrl-key
>combination to crash Rgui.

I see this using the released 2.0.0, but not in today's r-patched.  I
don't think we've done anything that would fix this, so it may just be
that the error is masked on my system.

I'll see if I can spot what's going on.

Duncan Murdoch

From ligges at statistik.uni-dortmund.de  Thu Oct 14 12:06:20 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Oct 14 12:06:24 2004
Subject: [Rd] plotmath in underlined style;
	was: Re: [R] Underline in expression(). (PR#7286)
Message-ID: <20041014100620.A5280F128@slim.kubism.ku.dk>

This is a multi-part message in MIME format.
--------------060203010607060006000807
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

In order not to forget it (I have not got any answer so far) ...

Uwe Ligges

-------- Original Message --------
Subject: plotmath in underlined style; was: Re: [R] Underline in 
expression().
Date: Sun, 26 Sep 2004 18:50:02 +0200
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Organization: Fachbereich Statistik, Universitaet Dortmund
To: John Janmaat <jajanmaat@netscape.net>,  r-core@stat.math.ethz.ch
CC: sundar.dorai-raj@pdf.com
References: <41060ED9.5070907@netscape.net> <41067D20.70108@pdf.com> 
<410744D0.8080107@netscape.net>

Please find attach a patch to include the feature to draw underlined
mathematical annotation.

Here is an example according to the feature request given below:

    plot(0:1, 0:1, type="n")
    text(0.5, 0.5, expression(underline(widehat(x %*% y))))

Since I am too late for R-2.0.0, should I send this one to r-bugs so
that we do not forget?

Uwe




John Janmaat wrote:
> Sundar,
> 
> Thanks.  Unfortunately, I am looking for something that also works in 
> the margins of the plot.
> 
> John.
> 
> Sundar Dorai-Raj wrote:
> 
>>
>>
>> John Janmaat wrote:
>>
>>> Hello All,
>>>
>>> Is there an analogue to \underbar or the AMS math \underline in 
>>> graphical math expressions?
>>>
>>> Thanks,
>>>
>>> John.
>>
>>
>>
>> Uwe Ligges posted a solution a couple of years ago. I don't know if 
>> there is anything built in yet. ?plotmath does not seem to say 
>> anything about underlining.
>>
>> http://finzi.psych.upenn.edu/R/Rhelp01/archive/7191.html
>>
>> plot(0:1, 0:1, type="n")
>> underlined(0.5, 0.5, expression(widehat(x %*% y)))
>>
>> --sundar
>>
>> ______________________________________________
>> R-help@stat.math.ethz.ch mailing list
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
>> PLEASE do read the posting guide! 
>> http://www.R-project.org/posting-guide.html
>>
> 




--------------060203010607060006000807
Content-Type: text/plain;
 name="plotmath.Rd.diff"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="plotmath.Rd.diff"

--- y:\recent\R\src\library\grDevices\man\plotmath.Rd	2004-09-26 18:34:28.000000000 +0200
+++ plotmath.Rd	2004-09-26 18:25:22.000000000 +0200
@@ -91,6 +91,7 @@
     \code{textstyle(x)}  \tab draw x in normal size \cr
     \code{scriptstyle(x)} \tab draw x in small size \cr
     \code{scriptscriptstyle(x)} \tab draw x in very small size \cr
+    \code{underline(x)}   \tab draw x underlined\cr
     \code{x ~~ y}        \tab put extra space between x and y \cr
     \code{x + phantom(0) + y} \tab leave gap for "0", but don't draw it \cr
     \code{x + over(1, phantom(0))} \tab leave vertical gap for "0" (don't draw) \cr


--------------060203010607060006000807
Content-Type: text/plain;
 name="plotmath.c.diff"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="plotmath.c.diff"

--- y:\recent\R\src\main\plotmath.c	2004-09-26 18:31:11.000000000 +0200
+++ plotmath.c	2004-09-26 18:48:17.000000000 +0200
@@ -1806,6 +1806,46 @@
     return CombineAlignedBBoxes(numBBox, denomBBox);
 }
 
+static BBOX RenderUnderline(SEXP expr, int draw, mathContext *mc, R_GE_gcontext *gc, GEDevDesc *dd)
+{
+    SEXP body = CADR(expr);
+    BBOX BBox;
+    double width, adepth, depth, x[2], y[2];
+    double savedX = mc->CurrentX;
+    double savedY = mc->CurrentY;
+
+    BBox = RenderItalicCorr(RenderElement(body, 0, mc, gc, dd), 0, mc, gc, dd);
+    width = bboxWidth(BBox);
+
+    mc->CurrentX = savedX;
+    mc->CurrentY = savedY;
+    BBox = RenderElement(body, draw, mc, gc, dd);
+    adepth = 0.1 * XHeight(gc, dd);
+    depth = bboxDepth(BBox) + adepth;
+
+    if (draw) {
+        int savedlty = gc->lty;
+        double savedlwd = gc->lwd;
+        mc->CurrentX = savedX;
+        mc->CurrentY = savedY;
+        PMoveUp(-depth, mc);
+        x[0] = ConvertedX(mc, dd);
+        y[0] = ConvertedY(mc, dd);
+        PMoveAcross(width, mc);
+        x[1] = ConvertedX(mc, dd);
+        y[1] = ConvertedY(mc, dd);
+        gc->lty = LTY_SOLID;
+        gc->lwd = 1;
+        GEPolyline(2, x, y, gc, dd);
+        PMoveUp(depth, mc);
+        gc->lty = savedlty;
+        gc->lwd = savedlwd;
+        PMoveTo(savedX + width, savedY, mc);
+    }
+    return EnlargeBBox(BBox, 0.0, adepth, 0.0);
+}
+
+
 static int OverAtom(SEXP expr)
 {
     return NameAtom(expr) &&
@@ -1817,6 +1857,17 @@
     return RenderFraction(expr, 1, draw, mc, gc, dd);
 }
 
+static int UnderlAtom(SEXP expr)
+{
+    return NameAtom(expr) && NameMatch(expr, "underline");
+}
+
+static BBOX RenderUnderl(SEXP expr, int draw, mathContext *mc, R_GE_gcontext *gc, GEDevDesc *dd)
+{
+    return RenderUnderline(expr, draw, mc, gc, dd);
+}
+
+
 static int AtopAtom(SEXP expr)
 {
     return NameAtom(expr) && NameMatch(expr, "atop");
@@ -2809,6 +2860,8 @@
     return RenderAccent(expr, draw, mc, gc, dd);
     else if (OverAtom(head))
     return RenderOver(expr, draw, mc, gc, dd);
+    else if (UnderlAtom(head))
+    return RenderUnderl(expr, draw, mc, gc, dd);
     else if (AtopAtom(head))
     return RenderAtop(expr, draw, mc, gc, dd);
     else if (ParenAtom(head))


--------------060203010607060006000807--

From murdoch at stats.uwo.ca  Thu Oct 14 16:39:30 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu Oct 14 16:39:38 2004
Subject: [Rd] Rterm in a Cygwin shell (in Windows) (PR#7287)
Message-ID: <20041014143930.6D21A10433@slim.kubism.ku.dk>

This bug report is mostly a note to myself to track this down:

In the version of the Cygwin bash shell I'm currently using, Rterm
does not detect that it is being run interactively, so it switches
into batch mode, and lots of things stop working.

>$ bash --version
>GNU bash, version 2.05b.0(1)-release (i686-pc-cygwin)
>Copyright (C) 2002 Free Software Foundation, Inc.

Duncan Murdoch

From tplate at blackmesacapital.com  Thu Oct 14 17:12:37 2004
From: tplate at blackmesacapital.com (tplate@blackmesacapital.com)
Date: Thu Oct 14 17:12:40 2004
Subject: [Rd] Rterm in a Cygwin shell (in Windows) (PR#7287)
Message-ID: <20041014151237.69EE410450@slim.kubism.ku.dk>

Works fine for me with the latest version of R and the same version of 
cygwin bash.  The environment variable CYGWIN can affect this kind of thing.

$ env | grep CYG
CYGWIN=ntsec smbntsec binmode export

tplate@ACONCAGUA ~/depot/Spluslibs/strat1.live
$ bash --version
GNU bash, version 2.05b.0(1)-release (i686-pc-cygwin)
Copyright (C) 2002 Free Software Foundation, Inc.

tplate@ACONCAGUA ~/depot/Spluslibs/strat1.live
$ /cygdrive/c/R/rw2000/bin/Rterm --vanilla

R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

 > interactive()
[1] TRUE
 > q()



At Thursday 08:39 AM 10/14/2004, murdoch@stats.uwo.ca wrote:
>This bug report is mostly a note to myself to track this down:
>
>In the version of the Cygwin bash shell I'm currently using, Rterm
>does not detect that it is being run interactively, so it switches
>into batch mode, and lots of things stop working.
>
> >$ bash --version
> >GNU bash, version 2.05b.0(1)-release (i686-pc-cygwin)
> >Copyright (C) 2002 Free Software Foundation, Inc.
>
>Duncan Murdoch
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel

From j.j.goeman at lumc.nl  Thu Oct 14 18:25:43 2004
From: j.j.goeman at lumc.nl (j.j.goeman@lumc.nl)
Date: Thu Oct 14 18:25:46 2004
Subject: [Rd] is.vector() gives error (PR#7288)
Message-ID: <20041014162543.92EC710452@slim.kubism.ku.dk>

Full_Name: Jelle Goeman
Version: 2.0.0
OS: windows
Submission from: (NULL) (145.88.209.33)


I get a strange error:

> is.vector(1:10)
Error: recursive default argument reference

What's recursive about is.vector?

Kind regards,

Jelle Goeman

My R:

platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    2              
minor    0.0            
year     2004           
month    10             
day      04             
language R

From ligges at statistik.uni-dortmund.de  Thu Oct 14 18:38:56 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu Oct 14 18:39:00 2004
Subject: [Rd] is.vector() gives error (PR#7288)
In-Reply-To: <20041014162543.92EC710452@slim.kubism.ku.dk>
References: <20041014162543.92EC710452@slim.kubism.ku.dk>
Message-ID: <416EABA0.3070904@statistik.uni-dortmund.de>

j.j.goeman@lumc.nl wrote:

> Full_Name: Jelle Goeman
> Version: 2.0.0
> OS: windows
> Submission from: (NULL) (145.88.209.33)
> 
> 
> I get a strange error:
> 
> 
>>is.vector(1:10)
> 
> Error: recursive default argument reference


Works for me. Looks like your installation is broken, or do you have 
loaded some strange packages?

Uwe Ligges



> What's recursive about is.vector?
> 
> Kind regards,
> 
> Jelle Goeman
> 
> My R:
> 
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    2              
> minor    0.0            
> year     2004           
> month    10             
> day      04             
> language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From p.dalgaard at biostat.ku.dk  Thu Oct 14 18:51:41 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Thu Oct 14 18:54:47 2004
Subject: [Rd] is.vector() gives error (PR#7288)
In-Reply-To: <20041014162543.92EC710452@slim.kubism.ku.dk>
References: <20041014162543.92EC710452@slim.kubism.ku.dk>
Message-ID: <x21xg19raa.fsf@biostat.ku.dk>

j.j.goeman@lumc.nl writes:

> I get a strange error:
> 
> > is.vector(1:10)
> Error: recursive default argument reference

Hmm. I can't reproduce that on Linux...
 
> What's recursive about is.vector?

Nothing. You generally get that error if two arguments refer to
eachother, as in

> f <- function(x=y,y=x)x+y
> f(1)
[1] 2
> f(,1)
[1] 2
> f()
Error in f() : recursive default argument reference

but nothing of that sort is going on in is.vector. Unless it somehow
got redefined --- are you sure that you got the original is.vector
there? 

>  is.vector
function (x, mode = "any")
.Internal(is.vector(x, mode))
<environment: namespace:base>

The other possibility is that you're tickling a low-level, system
dependent bug in the evaluator. Can anyone reproduce this?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jmc at research.bell-labs.com  Thu Oct 14 23:06:45 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Thu Oct 14 23:07:18 2004
Subject: [Rd] Re: [R] setClassUnion
References: <1101.132.180.246.63.1097759989.squirrel@mail.uni-bayreuth.de>
Message-ID: <416EEA65.5FABB1E2@research.bell-labs.com>

Matthias.Kohl@uni-bayreuth.de wrote:
> 
> Hello,
> 
> I have a question concerning "setClassUnion".

It's not really about setClassUnion, but a bug in handling slots in
prototypes whose class extends a locally defined class (a class union is
an example, but others would fail the same way).

> I'm working with R 2.0.0 Patched (2004-10-06) on windows 2000.
> 
> I tried to use "setClassUnion" in a package I am currently working on. The
> situation is similar to the following example:
> 
> The DESCRIPTION file has entries:
>   Depends: R (>= 2.0.0), methods
>   Imports: methods
>   LazyLoad: yes
> 
> The NAMESPACE file has entries:
>   importClassesFrom("methods", "NULL", "numeric")
>   exportClass("OptionalNumeric", "class1", "class2")
> 
> The example R code is:
> .onLoad <- function(lib, pkg){
>     require("methods", character = TRUE, quietly = TRUE)
> }
> 
> setClassUnion("OptionalNumeric", c("numeric", "NULL"))
> 
> setClass("class1",
>   representation(test1 = "OptionalNumeric"),
>   prototype(test1 = numeric(1)))
> 
> # why does this not work?
> # The error I get is:
> # Error in makePrototypeFromClassDef(properties, ClassDef, immediate,
> # where) :In making the prototype for class "class1" elements of the
> # prototype failed to match the corresponding slot class: test1
> # (class "OptionalNumeric ")
> # Sourcing this into R gives no error for me
> 
> # but instead using
>   prototype(test1 = NULL)
> # works
> 
> # Moreover, using the second version (with test1 = NULL)
> # the following works, too
> setClass("class2",
>   representation(test2 = "class1"),
>   prototype(test2 = new("class1", test1 = numeric(1))))
> 
> What am I doing wrong?

Nothing in the example, although this mail was more appropriate for
r-devel than r-help (see the posting guide), so I've rerouted the reply.

The definition of OptionalNumeric is not generally visible during
installation, and the code that is testing the prototype is not finding
the definition when testing, in effect, is(numeric(1),
"OptionalNumeric").

We fixed a number of similar problems for 2.0, but this seems to be one
that got through.

(NULL values are allowed in the prototype, at least for now, which is
why changing test1 to NULL works; the test2 example works because the
prototype has exactly the expected class, so no definition is needed).

The fix is simple, though I may not get a chance to test & commit it for
a couple of days.


> Can someone please explain this to me?
> 
> Thanks for your help,
> Matthias
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From hkawakat at qub.ac.uk  Fri Oct 15 11:56:41 2004
From: hkawakat at qub.ac.uk (Hiroyuki Kawakatsu)
Date: Fri Oct 15 12:07:49 2004
Subject: [Rd] se.fit from predict.lm 
Message-ID: <Pine.CYG.4.58.0410151039340.1212@erdos>

hi,

i noticed that se.fit from predict.lm is the same whether interval="conf"
or interval="pred". it is not clear to me from ?predict.lm whether this is
intended or not. i suggest that se.fit should match the type of interval
requested, if interval is specified. suggested change in lm.R line 700
    if(se.fit || interval != "none") se <- sqrt(ip)
to
    if(se.fit || interval != "none") se <- switch(interval, none = ,
confidence = sqrt(ip), prediction = sqrt(ip+res.var) )


#---sample code to illustrate issue---

x <- rnorm(5);
y <- x + rnorm(5);
out <- lm(y~x);

xf <- data.frame(x=1);
# expected y
ye <- predict(out, xf, se.fit=TRUE, interval="conf");
print(ye$fit);
print( paste("se=", ye$se.fit) );
# actual y
ya <- predict(out, xf, se.fit=TRUE, interval="pred");
print(ya$fit);
print( paste("se=", ya$se.fit) );

#---end of sample code---

h.
p.s. suggestion for ?predict.lm. i don't know whether the
distinction between interval="confidence" and interval="prediction" is
standard terminology. it would be clear if the help page had something
like
  interval="confidence" accounts only for coefficient uncertainty,
  whereas interval="prediction" accounts for both coefficient and
  innovation uncertainty.


> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    2
minor    0.0
year     2004
month    10
day      04
language R

----------------------------------
Hiroyuki Kawakatsu
School of Management and Economics
25 University Square
Queen's University, Belfast
Belfast BT7 1NN
Northern Ireland
United Kingdom
Tel +44 (0)28 9097 3290
Fax +44 (0)28 9033 5156

From J.J.Goeman at lumc.nl  Fri Oct 15 12:13:35 2004
From: J.J.Goeman at lumc.nl (Goeman, J.J. (MSTAT))
Date: Fri Oct 15 12:13:42 2004
Subject: [Rd] is.vector() gives error (PR#7288)
Message-ID: <D291F33C586C8E48B95C26F8C805513A03287F0E@mail5.lumc.nl>

Hi,

I only loaded survival and Biobase yesterday. But I cannot reproduce the
error myself today... I'll report again when I find out more.

Best,

Jelle

http://www.math.leidenuniv.nl/~jgoeman  

> -----Original Message-----
> From: Peter Dalgaard [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Thursday, 14 October, 2004 6:52 PM
> To: Goeman, J.J. (MSTAT)
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: [Rd] is.vector() gives error (PR#7288)
> 
> 
> j.j.goeman@lumc.nl writes:
> 
> > I get a strange error:
> > 
> > > is.vector(1:10)
> > Error: recursive default argument reference
> 
> Hmm. I can't reproduce that on Linux...
>  
> > What's recursive about is.vector?
> 
> Nothing. You generally get that error if two arguments refer to
> eachother, as in
> 
> > f <- function(x=y,y=x)x+y
> > f(1)
> [1] 2
> > f(,1)
> [1] 2
> > f()
> Error in f() : recursive default argument reference
> 
> but nothing of that sort is going on in is.vector. Unless it somehow
> got redefined --- are you sure that you got the original is.vector
> there? 
> 
> >  is.vector
> function (x, mode = "any")
> .Internal(is.vector(x, mode))
> <environment: namespace:base>
> 
> The other possibility is that you're tickling a low-level, system
> dependent bug in the evaluator. Can anyone reproduce this?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
>

From ripley at stats.ox.ac.uk  Fri Oct 15 12:38:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 15 12:39:01 2004
Subject: [Rd] se.fit from predict.lm 
In-Reply-To: <Pine.CYG.4.58.0410151039340.1212@erdos>
Message-ID: <Pine.LNX.4.44.0410151133340.13608-100000@gannet.stats>

On Fri, 15 Oct 2004, Hiroyuki Kawakatsu wrote:

> i noticed that se.fit from predict.lm is the same whether interval="conf"
> or interval="pred". it is not clear to me from ?predict.lm whether this is
> intended or not. i suggest that se.fit should match the type of interval
> requested, if interval is specified. suggested change in lm.R line 700

It is intended.  It has been that way in S for many years, and lots of 
code relies on it.  Why would it be useful to have the standard error of a 
prediction interval called se.fit?
                              ^^^
   
>     if(se.fit || interval != "none") se <- sqrt(ip)
> to
>     if(se.fit || interval != "none") se <- switch(interval, none = ,
> confidence = sqrt(ip), prediction = sqrt(ip+res.var) )
> 
> 
> #---sample code to illustrate issue---
> 
> x <- rnorm(5);
> y <- x + rnorm(5);
> out <- lm(y~x);
> 
> xf <- data.frame(x=1);
> # expected y
> ye <- predict(out, xf, se.fit=TRUE, interval="conf");
> print(ye$fit);
> print( paste("se=", ye$se.fit) );
> # actual y
> ya <- predict(out, xf, se.fit=TRUE, interval="pred");
> print(ya$fit);
> print( paste("se=", ya$se.fit) );
> 
> #---end of sample code---
> 
> h.
> p.s. suggestion for ?predict.lm. i don't know whether the
> distinction between interval="confidence" and interval="prediction" is
> standard terminology. 

It is, just as capitalizing is standard usage and you seem not to know.

> it would be clear if the help page had something
> like
>   interval="confidence" accounts only for coefficient uncertainty,
>   whereas interval="prediction" accounts for both coefficient and
>   innovation uncertainty.

But `innovation' is not standard terminology, and it is not the
coefficients that uncertain, but their estimates.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hkawakat at qub.ac.uk  Fri Oct 15 14:33:32 2004
From: hkawakat at qub.ac.uk (Hiroyuki Kawakatsu)
Date: Fri Oct 15 14:33:39 2004
Subject: [Rd] se.fit from predict.lm  (fwd)
Message-ID: <Pine.CYG.4.58.0410151331110.3544@erdos>

On Fri, 15 Oct 2004, Prof Brian Ripley wrote:

> It is intended.  It has been that way in S for many years, and lots of
> code relies on it.  Why would it be useful to have the standard error of a
> prediction interval called se.fit?
>                               ^^^

because the "fit" could be for expected or actual y. the return value is
named "fit" whether interval="conf" or interval="pred" so i assumed se.fit
is the standard error of the returned fit.

> But `innovation' is not standard terminology, and it is not the
> coefficients that uncertain, but their estimates.

true. some (accurate) description of the difference between the interval
options would be useful to people like me who are not familiar with the
terminology.

h.
----------------------------------
Hiroyuki Kawakatsu
School of Management and Economics
25 University Square
Queen's University, Belfast
Belfast BT7 1NN
Northern Ireland
United Kingdom
Tel +44 (0)28 9097 3290
Fax +44 (0)28 9033 5156

From MailAdmin at hlf.de  Fri Oct 15 16:31:39 2004
From: MailAdmin at hlf.de (Mail Admin)
Date: Fri Oct 15 16:32:49 2004
Subject: [Rd] Block SCR-Files messages_Notify
Message-ID: <200410151432.i9FEWjK4024092@hypatia.math.ethz.ch>

************* eManager Notification **************

Block SCR-Files messages_Notify

Source mailbox: "r-devel@lists.r-project.org"
Destination mailbox(es): wolfgang-k-kurth@hlx.com
Action: Attachment Removal

******************* End of message *******************

-------------- next part --------------
Received: from 10.166.1.10 by vw-haj01.hlf.de (InterScan E-Mail VirusWall NT); Fri, 15 Oct 2004 16:31:36 +0200
From: r-devel@lists.r-project.org
To: wolfgang-k-kurth@hlx.com
Received: from ppp-82-84-93-209.cust-adsl.tiscali.it ([82.84.93.209]) by fw-haj05.hlf.de
          via smtpd (for [10.166.1.22]) with SMTP; 15 Oct 2004 14:34:38 UT
Subject: Mail Delivery (failure wolfgang-k-kurth@hlx.com)
Date: Fri, 15 Oct 2004 16:31:36 +0200
MIME-Version: 1.0
Content-Type: multipart/related;
	type="multipart/alternative";
	boundary="----=_NextPart_000_001B_01C0CA80.6B015D10"
X-Priority: 3
X-MSMail-Priority: Normal
From Wolfgang-K-Kurth at hlx.com  Fri Oct 15 16:31:19 2004
From: Wolfgang-K-Kurth at hlx.com (Wolfgang-K-Kurth)
Date: Fri Oct 15 16:32:52 2004
Subject: [Rd] Ihre Nachricht an Hapag-Lloyd Express - Your message to
	Hapag-Llo yd Express
Message-ID: <9EC041E32C5D81489B2F9B2FC3FC562501729A71@ms-haj03.Hlx.com>

Vielen Dank f?r Ihr Interesse an Hapag-Lloyd Express. Wir werden Ihre
Nachricht gerne so bald als m?glich beantworten. 

Bitte beachten Sie unsere ?ffnungszeiten montags-freitags 09.00 - 18.00 Uhr.

Gerne k?nnen Sie auch in unserem HLX-Servicecenter anrufen. Sollten Sie
R?ckfragen zu einer bestehenden Buchung haben, geben Sie bitte Ihre
Buchungsnummer an.

von/from Austria          0820 500 742 (0,145EUR/Minute)
von/from Belgium          070 700 016
von/from France           0825 026 071
von/from Germany          0180 509 3 509 (0,12EUR/Minute)
von/from Italy            199 192 692
von/from the Netherlands  0900 202 1447
von/from Spain 		  90 20 20 069
von/from UK 		  0870 606 0 519
von/from Ireland 		  0818 210018

Wir freuen uns sehr, dass Sie uns Ihr Vertrauen schenken.

Hapag-Lloyd Express

Hinweis: Diese Nachricht wurde automatisch erstellt.


We thank you for your interest in Hapag-Lloyd Express.
We will answer you as soon as possible. If you have questions regarding a
booking you have already made, please let us know the booking number.
We are at your disposal from Monday to Friday, from 9 a.m. to 6 p.m.
You can also contact our call center HLX.
Thank you for your patience.

Please note: This e-mail was created automatically.


La ringraziamo innanzitutto per l'interesse mostrato per Hapag-Lloyd
Express. Evaderemo la sua richiesta il pi? presto possibile.
Nel caso avesse delle domande circa una prenotazione gi? effettuata, la
preghiamo di volerci indicare il numero della stessa.
Siamo a sua disposizione dal luned? al venerd?, dalle ore 09.00 alle ore
18.00.
Pu? anche contattare il nostro servizio di assistenza HLX. 
La ringraziamo per la fiducia accordataci.

P.S. questa comunicazione viene inviata automaticamente.


Muchas gracias por su inter?s en Hapag Lloyd Express. Vamos a contestar su
correo electr?nico lo antes posible. Si tiene alguna duda sobre una reserva
ya efectuada, no olvide indicar su n?mero de reserva. Nuestro horario de
trabajo es de lunes a viernes de 9.00 a 18.00 horas. Tambi?n puede llamar a
nuestro Centro de Atenci?n Telef?nica: 
de/a Espa?a 90 20 20 069 

Nota: este mensaje ha sido generado autom?ticamente.

From kjetil at acelerate.com  Fri Oct 15 18:49:09 2004
From: kjetil at acelerate.com (kjetil@acelerate.com)
Date: Fri Oct 15 18:49:12 2004
Subject: [Rd] splinefun bug (PR#7290)
Message-ID: <20041015164909.E092410E94@slim.kubism.ku.dk>

The following reliably bombs R, or at least rw2000 (windows XP):

test <- splinefun(vector(length=0), vector(length=0))
test(1)

-- 

Kjetil Halvorsen.

Peace is the most effective weapon of mass construction.
               --  Mahdi Elmandjra

From maechler at stat.math.ethz.ch  Fri Oct 15 19:36:59 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Oct 15 19:37:04 2004
Subject: [Rd] splinefun bug (PR#7290)
Message-ID: <20041015173659.60BF110E96@slim.kubism.ku.dk>

>>>>> "kjetil" == kjetil halvorsen <kjetil@acelerate.com>
>>>>>     on Fri, 15 Oct 2004 18:49:09 +0200 (CEST) writes:

    kjetil> The following reliably bombs R, or at least rw2000 (windows XP):

    kjetil> test <- splinefun(vector(length=0), vector(length=0))
    kjetil> test(1)

yes, that's a reproducible bug, thank you.

The embarassing thing is that we've fixed this bug already for 
approxfun() -- and some of us know that  spline* and approx*
have originally been very much in parallel...

BTW: No need to give the function a name: S can nicely work with
     anonymous functions. Consequently, you can get the same effect from

    splinefun(vector(length=0), vector(length=0)) (1)

or, even a bit more compactly:

    splinefun(1[0], 1[0]) (1)

Martin Maechler

From h.wickham at gmail.com  Sat Oct 16 17:09:08 2004
From: h.wickham at gmail.com (hadley wickham)
Date: Sat Oct 16 17:09:12 2004
Subject: [Rd] R bug submit form
Message-ID: <f8e6ff05041016080933e1a193@mail.gmail.com>

Dear R-developers,

I've noticed over the past few weeks there have been a number of
spurious bug report which seem to cause a lot of extra work.  I
thought maybe a small redesign of the bug submit form might help
reduce these and save someone some time, so I've had a go and attached
a prototype.

Main changes:

* Removed everything extraneous to submitting bugs

* Highlighted important details and added some suggestions as to what
to put in the OS and R version fields

* Added some of the key points from the FAQ bug report guidelines

* Added checkboxes to force people to think if what they are doing is
appropriate

I hope it may be of some use.

Hadley
From ripley at stats.ox.ac.uk  Sat Oct 16 17:20:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Oct 16 17:20:52 2004
Subject: [Rd] R bug submit form
In-Reply-To: <f8e6ff05041016080933e1a193@mail.gmail.com>
Message-ID: <Pine.LNX.4.44.0410161612510.7988-100000@gannet.stats>

On Sat, 16 Oct 2004, hadley wickham wrote:

> Dear R-developers,
> 
> I've noticed over the past few weeks there have been a number of
> spurious bug report which seem to cause a lot of extra work.  I
> thought maybe a small redesign of the bug submit form might help
> reduce these and save someone some time, so I've had a go and attached
> a prototype.

Unfortunately something has removed it en route. (I think the posting
guide says what attachments are allowed.)  Please try again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pgilbert at bank-banque-canada.ca  Sat Oct 16 22:12:10 2004
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Sat Oct 16 22:11:05 2004
Subject: [Rd] R CMD config --version
Message-ID: <4171809A.8060209@bankofcanada.ca>

Am I missing something or is this a bug? I was expecting it to give the 
version of R, i.e. "R-2.0.0".

~:R CMD config --version
R configuration information retrieval script 1.3

Copyright (C) 2002 The R Core Development Team.
This is free software; see the GNU General Public Licence version 2
or later for copying conditions.  There is NO warranty.


Paul Gilbert

From edd at debian.org  Sat Oct 16 22:46:33 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat Oct 16 22:46:48 2004
Subject: [Rd] R CMD config --version
In-Reply-To: <4171809A.8060209@bankofcanada.ca>
References: <4171809A.8060209@bankofcanada.ca>
Message-ID: <20041016204633.GA14515@sonny.eddelbuettel.com>

On Sat, Oct 16, 2004 at 04:12:10PM -0400, Paul Gilbert wrote:
> Am I missing something or is this a bug? I was expecting it to give the 
> version of R, i.e. "R-2.0.0".
> 
> ~:R CMD config --version
> R configuration information retrieval script 1.3
> 
> Copyright (C) 2002 The R Core Development Team.
> This is free software; see the GNU General Public Licence version 2
> or later for copying conditions.  There is NO warranty.

How about something homegrown:

edd@homebud:~> R --version | head -1 | awk '{printf("%s-%s\n", $1, $2)}'
R-2.0.0

Hth, Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From libraryjobs at aucklandcity.govt.nz  Sun Oct 17 00:18:06 2004
From: libraryjobs at aucklandcity.govt.nz (libraryjobs)
Date: Sun Oct 17 00:21:11 2004
Subject: [Rd] RE: Document
Message-ID: <04Oct17.112041nzdt.336027@inetgate.akcity.govt.nz>

This is an automatic reply - please do not respond to this message.

Your application has been received.  We will keep you advised of further
developments as soon as possible after the application closing date.

Thank you for your interest in Auckland City Libraries.

Kind regards

Christine Mullan
Human Resources Administrator
www.aucklandcity.govt.nz/council/jobs
www.aucklandcitylibraries.com


This e-mail is confidential.  If it is not intended for you please do not read, distribute or copy it or any attachments.  Please notify the sender by return e-mail and delete the original message and any attachments.

Any views expressed in this e-mail may be those of the individual sender and may not necessarily reflect the views of Auckland City Council.

From ggrothendieck at myway.com  Sun Oct 17 03:51:47 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Sun Oct 17 03:51:53 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
Message-ID: <loom.20041017T034921-592@post.gmane.org>


The following, which was recently discussions on the rcom-l list,
is a situation where coercing x1mat to a vector using as.vector
results in an object that is.vector says is not a vector:

     R> x1mat<-matrix(list(1,1.1,1+1i,"a",NA,NaN), 3, 2)
     R> is.vector(as.vector(x1mat))
     [1] FALSE

From martin at gsc.riken.jp  Sun Oct 17 08:50:23 2004
From: martin at gsc.riken.jp (martin@gsc.riken.jp)
Date: Sun Oct 17 08:50:26 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
Message-ID: <20041017065023.E39131094C@slim.kubism.ku.dk>

Full_Name: Martin Frith
Version: R-2.0.0
OS: linux-gnu
Submission from: (NULL) (134.160.83.73)


I have large vectors containing 100,000 to 20,000,000 numbers. However, they
only contain a few hundred *distinct* numbers (e.g. positive integers < 200).
When I do ecdf(v), it either runs out of memory, or it succeeds, but when I plot
the ecdf with postscript, the output is unnecessarily bloated because the same
lines get redrawn many times. The complexity of ecdf should depend on how many
distinct numbers there are, not how many total numbers.

This is my first bug report, so forgive me if I've done something stupid!

From stefano.iacus at unimi.it  Sun Oct 17 09:06:26 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Sun Oct 17 09:06:28 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
In-Reply-To: <20041017065023.E39131094C@slim.kubism.ku.dk>
References: <20041017065023.E39131094C@slim.kubism.ku.dk>
Message-ID: <0FA37CF4-200B-11D9-B035-000A95C87F66@unimi.it>

I would add that some action has to be taken in presence of missing 
values, i.e.

 > x <- c(1,2,2,4,7, NA, 10,12, 15,20)
 > ecdf(x)
Error in xy.coords(x, y) : x and y lengths differ

stefano

On Oct 17, 2004, at 8:50 AM, martin@gsc.riken.jp wrote:

> Full_Name: Martin Frith
> Version: R-2.0.0
> OS: linux-gnu
> Submission from: (NULL) (134.160.83.73)
>
>
> I have large vectors containing 100,000 to 20,000,000 numbers. 
> However, they
> only contain a few hundred *distinct* numbers (e.g. positive integers 
> < 200).
> When I do ecdf(v), it either runs out of memory, or it succeeds, but 
> when I plot
> the ecdf with postscript, the output is unnecessarily bloated because 
> the same
> lines get redrawn many times. The complexity of ecdf should depend on 
> how many
> distinct numbers there are, not how many total numbers.
>
> This is my first bug report, so forgive me if I've done something 
> stupid!
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From ripley at stats.ox.ac.uk  Sun Oct 17 09:24:04 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 17 09:24:19 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
In-Reply-To: <20041017065023.E39131094C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410170759090.2031-100000@gannet.stats>

This seems a _very_ unusual use of ecdf -- what are you using it for that
a sample of size 10,000 would not do equally well?

If you have a need for a more efficient version of ecdf, please develop 
one and submit a patch.  I don't think it would be hard as ecdf does

    x <- sort(x)
    rval <- approxfun(x, (1:n)/n, method = "constant", yleft = 0,
                      yright = 1, f = 0, ties = "ordered")

_but_ it might be hard to recognize the situation you are in without much
computation.  Something along the lines of

    vals <- sort(unique(x))
    y <- tabulate(match(x, vals))
    rval <- approxfun(vals, cumsum(y)/n, method = "constant", yleft = 0,
                      yright = 1, f = 0, ties = "ordered")

should work better for you and may be little slower if there are no ties, 
but will use more memory.

A quick play suggests that the real problem is not with ecdf (at least not
for me with x <- sample(1:200, 2e7, replace=TRUE)), but with plotting the
result.  Please investigate what might be a reasonable compromise.

On Sun, 17 Oct 2004 martin@gsc.riken.jp wrote:

> Full_Name: Martin Frith
> Version: R-2.0.0
> OS: linux-gnu
> Submission from: (NULL) (134.160.83.73)
> 
> 
> I have large vectors containing 100,000 to 20,000,000 numbers. However,
> they only contain a few hundred *distinct* numbers (e.g. positive
> integers < 200). When I do ecdf(v), it either runs out of memory, or it
> succeeds, but when I plot the ecdf with postscript, the output is
> unnecessarily bloated because the same lines get redrawn many times. The
> complexity of ecdf should depend on how many distinct numbers there are,
> not how many total numbers.
> 
> This is my first bug report, so forgive me if I've done something stupid!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Matthias.Kohl at uni-bayreuth.de  Sun Oct 17 09:26:15 2004
From: Matthias.Kohl at uni-bayreuth.de (Matthias.Kohl@uni-bayreuth.de)
Date: Sun Oct 17 09:26:19 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
In-Reply-To: <loom.20041017T034921-592@post.gmane.org>
References: <loom.20041017T034921-592@post.gmane.org>
Message-ID: <1066.132.180.246.22.1097997975.squirrel@mail.uni-bayreuth.de>

maybe, the point is that is.vector "attempts to coerce its argument into a
vector", but here it fails

is.matrix(as.vector(x1mat))
[1] TRUE

Matthias

>
> The following, which was recently discussions on the rcom-l list,
> is a situation where coercing x1mat to a vector using as.vector
> results in an object that is.vector says is not a vector:
>
>      R> x1mat<-matrix(list(1,1.1,1+1i,"a",NA,NaN), 3, 2)
>      R> is.vector(as.vector(x1mat))
>      [1] FALSE
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Sun Oct 17 09:30:38 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 17 09:30:43 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
In-Reply-To: <0FA37CF4-200B-11D9-B035-000A95C87F66@unimi.it>
Message-ID: <Pine.LNX.4.44.0410170825410.2031-100000@gannet.stats>

This is easy: x <- sort(x) should be first (as that drops NAs).  Fixed in
R-patched.

On Sun, 17 Oct 2004, stefano iacus wrote:

> I would add that some action has to be taken in presence of missing 
> values, i.e.
> 
>  > x <- c(1,2,2,4,7, NA, 10,12, 15,20)
>  > ecdf(x)
> Error in xy.coords(x, y) : x and y lengths differ
> 
> stefano
> 
> On Oct 17, 2004, at 8:50 AM, martin@gsc.riken.jp wrote:
> 
> > Full_Name: Martin Frith
> > Version: R-2.0.0
> > OS: linux-gnu
> > Submission from: (NULL) (134.160.83.73)
> >
> >
> > I have large vectors containing 100,000 to 20,000,000 numbers. 
> > However, they
> > only contain a few hundred *distinct* numbers (e.g. positive integers 
> > < 200).
> > When I do ecdf(v), it either runs out of memory, or it succeeds, but 
> > when I plot
> > the ecdf with postscript, the output is unnecessarily bloated because 
> > the same
> > lines get redrawn many times. The complexity of ecdf should depend on 
> > how many
> > distinct numbers there are, not how many total numbers.
> >
> > This is my first bug report, so forgive me if I've done something 
> > stupid!
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Sun Oct 17 11:24:06 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Oct 17 11:27:18 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
In-Reply-To: <Pine.LNX.4.44.0410170759090.2031-100000@gannet.stats>
References: <Pine.LNX.4.44.0410170759090.2031-100000@gannet.stats>
Message-ID: <x27jpp8zpl.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     vals <- sort(unique(x))
>     y <- tabulate(match(x, vals))
>     rval <- approxfun(vals, cumsum(y)/n, method = "constant", yleft = 0,
>                       yright = 1, f = 0, ties = "ordered")
> 
> should work better for you and may be little slower if there are no ties, 
> but will use more memory.

...and if all you need is the plot, continue Brian's code with

  Fv <- c(0,cumsum(y))/sum(y)
  xx <- c(vals[1],vals)
  plot(xx, Fv, type="s")

which might well be close enough for your purposes. Or, of course,

  Fs <- stepfun(vals,c(0,cumsum(y)/sum(y)))
  plot(Fs,verticals=FALSE)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Sun Oct 17 11:27:24 2004
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sun Oct 17 11:27:26 2004
Subject: [Rd] ecdf with lots of ties is inefficient (PR#7292)
Message-ID: <20041017092724.1D3DE10459@slim.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

>     vals <- sort(unique(x))
>     y <- tabulate(match(x, vals))
>     rval <- approxfun(vals, cumsum(y)/n, method = "constant", yleft = 0,
>                       yright = 1, f = 0, ties = "ordered")
> 
> should work better for you and may be little slower if there are no ties, 
> but will use more memory.

...and if all you need is the plot, continue Brian's code with

  Fv <- c(0,cumsum(y))/sum(y)
  xx <- c(vals[1],vals)
  plot(xx, Fv, type="s")

which might well be close enough for your purposes. Or, of course,

  Fs <- stepfun(vals,c(0,cumsum(y)/sum(y)))
  plot(Fs,verticals=FALSE)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Sun Oct 17 13:53:15 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Oct 17 13:56:28 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
In-Reply-To: <AF293AF0A07C8A44A6098DA99D037130089270@pnlmse24.pnl.gov>
References: <AF293AF0A07C8A44A6098DA99D037130089270@pnlmse24.pnl.gov>
Message-ID: <x23c0d8st0.fsf@biostat.ku.dk>

"Prasad, Rajiv" <Rajiv.Prasad@pnl.gov> writes:

> Thanks for the reply, Peter.
> 
> The build is done in a clean directory, and --without-tcltk does not
> help.  I thought it is much better to track this down and fix it anyway.
> 
> Agreed there aren't too many Alphas out there anymore, but I plan to
> keep mine going for a while -- sweet machine. :-)
> 
> So, I looked into the DESCRIPTION file for package tcltk, and here it
> is:
> 
> [rajiv@localhost tcltk]$ more DESCRIPTION
> Package: tcltk
> Version: 2.0.0
> Priority: base
> Title: Tcl/Tk Interface
> Author: R Development Core Team
> Maintainer: R Core Team <R-core@r-project.org>
> Description: Interface and language bindings to Tcl/Tk GUI elements
> License: GPL Version 2 or later.
> Built: R 2.0.0; alphapca56-unknown-linux-gnu; 2004-10-15 17:25:37;
>         unix
...
> I'm going to manually edit the DESCRIPTION files and remove the newlines
> and continue with make from the point where it stopped previously.
> We'll see if that fixes it.  Will edit .split_description to include the
> print statements you mentioned.

This would seem to be a bug, somewhere... 

> db[,"Built"] <- "R 2.0.0; alphapca56-unknown-linux-gnu; 2004-10-15 17:25:37; unix"
> db
     Package Version Priority Title              Author
[1,] "tcltk" "2.0.0" "base"   "Tcl/Tk Interface" "R Development Core Team"
     Maintainer
[1,] "R Core Team <R-core@r-project.org>"
     Description
[1,] "Interface and language bindings to Tcl/Tk GUI elements"
     License
[1,] "GPL Version 2 or later."
     Built
[1,] "R 2.0.0; alphapca56-unknown-linux-gnu; 2004-10-15 17:25:37; unix"
> write.dcf(db,file="YYYY")
> read.dcf("YYYY")
     Package Version Priority Title              Author
[1,] "tcltk" "2.0.0" "base"   "Tcl/Tk Interface" "R Development Core Team"
     Maintainer
[1,] "R Core Team <R-core@r-project.org>"
     Description
[1,] "Interface and language bindings to Tcl/Tk GUI elements"
     License
[1,] "GPL Version 2 or later."
     Built
[1,] "R 2.0.0; alphapca56-unknown-linux-gnu; 2004-10-15 17:25:37;\nunix"

which jives really badly with the

    if (!is.na(Built <- db["Built"])) {
        Built <- as.list(strsplit(Built, "; ")[[1]])
        names(Built) <- c("R", "Platform", "Date", "OStype")
        Built[["R"]] <- package_version(sub("^R ([0-9.]+)", "\\1",
            Built[["R"]]))
    }

inside tools:::.split_description .  

This is not an architecture-specific bug at all, it just happens to be
tickled by the specific length of "alphapca56-unknown-linux-gnu"!

I'm unsure whether the problem is in read.dcf or whether
split_description could just use strsplit(Built, ";[ \n]") and begone
with it. The latter should be a workaround for you in either case.

[Moved from r-help to r-devel]

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Sun Oct 17 14:58:54 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 17 14:59:01 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
In-Reply-To: <x23c0d8st0.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0410171339150.13116-100000@gannet.stats>

On 17 Oct 2004, Peter Dalgaard wrote:

> This is not an architecture-specific bug at all, it just happens to be
> tickled by the specific length of "alphapca56-unknown-linux-gnu"!
> 
> I'm unsure whether the problem is in read.dcf or whether
> split_description could just use strsplit(Built, ";[ \n]") and begone
> with it. The latter should be a workaround for you in either case.

The problem is in .install_package_description: the Built: field must not 
be split across lines.  (The newline does not have to added after ;, so 
your fix is not 100% adequate.)

I've fixed .install_package_description.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ggrothendieck at myway.com  Sun Oct 17 17:43:45 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Sun Oct 17 17:43:51 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
References: <loom.20041017T034921-592@post.gmane.org>
	<1066.132.180.246.22.1097997975.squirrel@mail.uni-bayreuth.de>
Message-ID: <loom.20041017T173426-76@post.gmane.org>


I would have thought it would be an error to attempt and fail.
Actually, to make it a vector all that has to be done is to zap the dim 
attribute:

   dim(x1mat) <- NULL  # now its a vector

It seems to know how to do that in the case of an atomic 
matrix, just not a non-atomic one.  Here it is for an
atomic matrix where it does return TRUE:

   is.vector(as.vector(matrix(1:12,4)))  # TRUE

 <Matthias.Kohl <at> uni-bayreuth.de> writes:

: 
: maybe, the point is that is.vector "attempts to coerce its argument into a
: vector", but here it fails
: 
: is.matrix(as.vector(x1mat))
: [1] TRUE
: 
: Matthias
: 
: >
: > The following, which was recently discussions on the rcom-l list,
: > is a situation where coercing x1mat to a vector using as.vector
: > results in an object that is.vector says is not a vector:
: >
: >      R> x1mat<-matrix(list(1,1.1,1+1i,"a",NA,NaN), 3, 2)
: >      R> is.vector(as.vector(x1mat))
: >      [1] FALSE
: >
: > ______________________________________________
: > R-devel <at> stat.math.ethz.ch mailing list
: > https://stat.ethz.ch/mailman/listinfo/r-devel
: 
: ______________________________________________
: R-devel <at> stat.math.ethz.ch mailing list
: https://stat.ethz.ch/mailman/listinfo/r-devel
: 
:

From Rajiv.Prasad at pnl.gov  Sun Oct 17 18:26:44 2004
From: Rajiv.Prasad at pnl.gov (Prasad, Rajiv)
Date: Sun Oct 17 18:26:48 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
Message-ID: <AF293AF0A07C8A44A6098DA99D037130089272@pnlmse24.pnl.gov>

Thanks, Peter, and Prof. Ripley.

My efforts last night was mostly futile except that it told me about the
embedded newline in Built field.

Prof. Ripley: how do I get your fixes?  Can I just download
R-2.0.0-patched?

Rajiv
--------
Rajiv Prasad
Scientist, Hydrology Group
Pacific Northwest National Laboratory, P.O. Box 999, MSIN K9-33
Richland, WA 99352
Voice: (509) 375-2096  Fax: (509) 372-6089  Email: rajiv.prasad@pnl.gov



-----Original Message-----
From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
Sent: Sunday, October 17, 2004 5:59 AM
To: Peter Dalgaard
Cc: Prasad, Rajiv; r-devel@stat.math.ethz.ch
Subject: Re: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha


On 17 Oct 2004, Peter Dalgaard wrote:

> This is not an architecture-specific bug at all, it just happens to be

> tickled by the specific length of "alphapca56-unknown-linux-gnu"!
> 
> I'm unsure whether the problem is in read.dcf or whether 
> split_description could just use strsplit(Built, ";[ \n]") and begone 
> with it. The latter should be a workaround for you in either case.

The problem is in .install_package_description: the Built: field must
not 
be split across lines.  (The newline does not have to added after ;, so 
your fix is not 100% adequate.)

I've fixed .install_package_description.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phgrosjean at sciviews.org  Sun Oct 17 18:33:48 2004
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun Oct 17 18:34:15 2004
Subject: [Rd] Lazy loading - importance of NAMESPACE
Message-ID: <200410171633.i9HGXnaF003532@outmx015.isp.belgacom.be>

Hello all,

Following a question in r-help, where I was wondering why my large package
with lots of "Depends:" did load so slowly (almost 30 sec in lazy loading in
R 2.0.0 under Win XP, for 3.4 sec in R 1.9.1 on the same machine), I
discovered that a correct namespace changes everything: with the namespace
added, loading of my package drops to circa 1 sec, which is more that three
times faster than in R 1.9.1 without lazy loading,... and about 30 times
faster than without the namespace in R 2.0.0!

First of all, congratulation for implementing lazy loading!

Second, I look in the documentation, and in the Brian Ripley's article in R
News 2/2004, and I found nowhere a place where the importance of namespace
is stressed for lazy loading (although Brian Ripley explains in several
places differences in lazy loading with and without namespace). I think it
is something important and, unless I miss it in the documentation, it would
be useful to tell somewhere that a namespace is strongly recommended in
conjonction with lazy loading...

Finally, a question:
>From R News 2/2004 p. 30: "a 'Imports:' field for packages whose namespaces
are used but do not need to be attached." OK, functions in these namespaces
are available to me, without attaching the package. Now, if I need to attach
these packages at a later time because I will use some of their functions
from the command line, then, is this package referred twice (once in my
package environment, once attached to the search path)? If yes, what is the
drawback in term of ressources and speed ('Imports' versus 'Depends', both
in loading, and in use of such a package)?

Best,

Philippe Grosjean

..............................................<?}))><........
 ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
 ) ) ) ) )   Mons-Hainaut University, Pentagone
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
 ) ) ) ) )   6, av du Champ de Mars, 7000 Mons, Belgium  
( ( ( ( (       
 ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.33.12
( ( ( ( (    email: Philippe.Grosjean@umh.ac.be
 ) ) ) ) )      
( ( ( ( (    web:   http://www.umh.ac.be/~econum
 ) ) ) ) )
..............................................................

From ripley at stats.ox.ac.uk  Sun Oct 17 18:46:34 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 17 18:46:43 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
In-Reply-To: <AF293AF0A07C8A44A6098DA99D037130089272@pnlmse24.pnl.gov>
Message-ID: <Pine.LNX.4.44.0410171740450.17145-100000@gannet.stats>

On Sun, 17 Oct 2004, Prasad, Rajiv wrote:

> Thanks, Peter, and Prof. Ripley.
> 
> My efforts last night was mostly futile except that it told me about the
> embedded newline in Built field.
> 
> Prof. Ripley: how do I get your fixes?  Can I just download
> R-2.0.0-patched?

Yes, tomorrow's tarball unless you want to get it from the SVN archive.
The change is in src/library/tools/R/admin.R and looks like

    Built <-
        paste("R ",
              paste(R.version[c("major", "minor")],
                    collapse = "."),
              "; ",
              if(file_test("-d", file.path(dir, "src"))) OStype
              else "",
              "; ",
              ## Prefer date in ISO 8601 format.
              ## Could also use
              ##   format(Sys.time(), "%a %b %d %X %Y")
              Sys.time(),
              "; ",
              .OStype(),
              sep = "")

    ## we must not split the Built: field across lines
    writeLines(c(formatDL(names(db), db, style = "list"),
                 paste("Built", Built, sep=": ")),
               file.path(outDir, "DESCRIPTION"))
    db["Built"] <- Built

Obviously I have not tested on an Alphabc...tuvwxyz system but it should 
work there.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Sun Oct 17 18:52:32 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Oct 17 18:55:46 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
In-Reply-To: <AF293AF0A07C8A44A6098DA99D037130089272@pnlmse24.pnl.gov>
References: <AF293AF0A07C8A44A6098DA99D037130089272@pnlmse24.pnl.gov>
Message-ID: <x2pt3h70dr.fsf@biostat.ku.dk>

"Prasad, Rajiv" <Rajiv.Prasad@pnl.gov> writes:

> Thanks, Peter, and Prof. Ripley.
> 
> My efforts last night was mostly futile except that it told me about the
> embedded newline in Built field.
> 
> Prof. Ripley: how do I get your fixes?  Can I just download
> R-2.0.0-patched?

With a little patience, yes... (The R-2.0.0-patched tarballs are made
daily, and it's just a few hours since Brian committed his fix).

Or, in a pinch, just get the fixed file directly from the repository:

https://svn.r-project.org/R/branches/R-2-0-patches/src/library/tools/R/admin.R

(In principle, that gives you a version of R that claims to be 2.0.0
in spite of being altered, but for a tiny change like this I don't
think it matters.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Sun Oct 17 19:10:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 17 19:10:54 2004
Subject: [Rd] Lazy loading - importance of NAMESPACE
In-Reply-To: <200410171633.i9HGXnaF003532@outmx015.isp.belgacom.be>
Message-ID: <Pine.LNX.4.44.0410171752250.17145-100000@gannet.stats>

I think you are leaping to a conclusion from a single example.  Lots of 
things have changed in 2.0.0 and you are repeatedly attributing symptoms 
to lazy loading without any real evidence.

I have tested several hundred examples with and without lazy loading, and
I have seen no dramatic changes caused by lazy loading.  I have seen
dramatic changes caused by the way the DESCRIPTION file is interpreted,
and I did stress the importance of getting that right.

On Sun, 17 Oct 2004, Philippe Grosjean wrote:

> Hello all,
> 
> Following a question in r-help, where I was wondering why my large package
> with lots of "Depends:" did load so slowly (almost 30 sec in lazy loading in
> R 2.0.0 under Win XP, for 3.4 sec in R 1.9.1 on the same machine), I
> discovered that a correct namespace changes everything: with the namespace
> added, loading of my package drops to circa 1 sec, which is more that three
> times faster than in R 1.9.1 without lazy loading,... and about 30 times
> faster than without the namespace in R 2.0.0!

You are not comparing like with like, AFAICS.  In 1.9.1 you were not 
loading all the dependent packages. In 2.0.0 you were.  If you add a 
NAMESPACE, nothing changed.  If you replace Depends: by Imports: you don't 
need to initialize all the dependent packages, and that may well save you 
a lot of time (for example there is no search for and cacheing of S4 
methods).

But none of this has anything whatsoever to do with lazy loading!

> First of all, congratulation for implementing lazy loading!
> 
> Second, I look in the documentation, and in the Brian Ripley's article in R
> News 2/2004, and I found nowhere a place where the importance of namespace
> is stressed for lazy loading (although Brian Ripley explains in several
> places differences in lazy loading with and without namespace). I think it
> is something important and, unless I miss it in the documentation, it would
> be useful to tell somewhere that a namespace is strongly recommended in
> conjonction with lazy loading...
> 
> Finally, a question:
> >From R News 2/2004 p. 30: "a 'Imports:' field for packages whose namespaces
> are used but do not need to be attached." OK, functions in these namespaces
> are available to me, without attaching the package.

They are not.  They are available to functions in your package's 
namespace.

> Now, if I need to attach
> these packages at a later time because I will use some of their functions
> from the command line, then, is this package referred twice (once in my
> package environment, once attached to the search path)? If yes, what is the
> drawback in term of ressources and speed ('Imports' versus 'Depends', both
> in loading, and in use of such a package)?

That makes no sense to me.  A package should be named in either Imports 
or Depends and not both.  For you to access it, you need to call 
library().  That does not load another copy of the namespace, and the 
total amount of work is essentially the same as if you called library() on 
it before your own package (which is what Depends; will do).  Does that 
answer the question you mean to ask?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phgrosjean at sciviews.org  Sun Oct 17 19:32:10 2004
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun Oct 17 19:32:31 2004
Subject: [Rd] Lazy loading - importance of NAMESPACE
In-Reply-To: <Pine.LNX.4.44.0410171752250.17145-100000@gannet.stats>
Message-ID: <200410171732.i9HHWBJl022119@outmx008.isp.belgacom.be>

 

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Prof 
> Brian Ripley
> Sent: Sunday, October 17, 2004 7:11 PM
> To: Philippe Grosjean
> Cc: r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] Lazy loading - importance of NAMESPACE
> 
> I think you are leaping to a conclusion from a single 
> example.  Lots of things have changed in 2.0.0 and you are 
> repeatedly attributing symptoms to lazy loading without any 
> real evidence.
> 
> I have tested several hundred examples with and without lazy 
> loading, and I have seen no dramatic changes caused by lazy 
> loading.  I have seen dramatic changes caused by the way the 
> DESCRIPTION file is interpreted, and I did stress the 
> importance of getting that right.

This is because I changed nothing in DESCRIPTION between the two, in my
case. But you are right, I don't have your experience, and I barely
understand the new loading mechanism... thus the reason of several messages
I send to r-help, recently.

I attributed this to lazy loading because it is the major change from R
1.9.1 to R 2.0.0... But again, you are right that other changes were
introduced.

It remains that, without namespace, my package loaded about 30 times slower
than with it. It would be interesting to know why, don't you think so?

Best,

Philippe Grosjean

 
> On Sun, 17 Oct 2004, Philippe Grosjean wrote:
> 
> > Hello all,
> > 
> > Following a question in r-help, where I was wondering why my large 
> > package with lots of "Depends:" did load so slowly (almost 
> 30 sec in 
> > lazy loading in R 2.0.0 under Win XP, for 3.4 sec in R 1.9.1 on the 
> > same machine), I discovered that a correct namespace changes 
> > everything: with the namespace added, loading of my package 
> drops to 
> > circa 1 sec, which is more that three times faster than in R 1.9.1 
> > without lazy loading,... and about 30 times faster than 
> without the namespace in R 2.0.0!
> 
> You are not comparing like with like, AFAICS.  In 1.9.1 you 
> were not loading all the dependent packages. In 2.0.0 you 
> were.  If you add a NAMESPACE, nothing changed.  If you 
> replace Depends: by Imports: you don't need to initialize all 
> the dependent packages, and that may well save you a lot of 
> time (for example there is no search for and cacheing of S4 methods).
> 
> But none of this has anything whatsoever to do with lazy loading!
> 
> > First of all, congratulation for implementing lazy loading!
> > 
> > Second, I look in the documentation, and in the Brian 
> Ripley's article 
> > in R News 2/2004, and I found nowhere a place where the 
> importance of 
> > namespace is stressed for lazy loading (although Brian 
> Ripley explains 
> > in several places differences in lazy loading with and without 
> > namespace). I think it is something important and, unless I 
> miss it in 
> > the documentation, it would be useful to tell somewhere that a 
> > namespace is strongly recommended in conjonction with lazy 
> loading...
> > 
> > Finally, a question:
> > >From R News 2/2004 p. 30: "a 'Imports:' field for packages whose 
> > >namespaces
> > are used but do not need to be attached." OK, functions in these 
> > namespaces are available to me, without attaching the package.
> 
> They are not.  They are available to functions in your 
> package's namespace.
> 
> > Now, if I need to attach
> > these packages at a later time because I will use some of their 
> > functions from the command line, then, is this package 
> referred twice 
> > (once in my package environment, once attached to the 
> search path)? If 
> > yes, what is the drawback in term of ressources and speed 
> ('Imports' 
> > versus 'Depends', both in loading, and in use of such a package)?
> 
> That makes no sense to me.  A package should be named in 
> either Imports or Depends and not both.  For you to access 
> it, you need to call library().  That does not load another 
> copy of the namespace, and the total amount of work is 
> essentially the same as if you called library() on it before 
> your own package (which is what Depends; will do).  Does that 
> answer the question you mean to ask?
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>

From Rajiv.Prasad at pnl.gov  Mon Oct 18 00:53:04 2004
From: Rajiv.Prasad at pnl.gov (Prasad, Rajiv)
Date: Mon Oct 18 00:53:13 2004
Subject: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
Message-ID: <AF293AF0A07C8A44A6098DA99D037130089274@pnlmse24.pnl.gov>

Thanks, Prof. Ripley.  I downloaded the new admin.R and used that in
place of one in R-2.0.0 build directory.  The compile went fine.  So,
for the record, R-2.0.0 + Prof. Ripley's fixed admin.R compiles fine on
"alphapca56-unknown-linux-gnu".

----
[rajiv@localhost rajiv]$ R

R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> version
         _
platform alphapca56-unknown-linux-gnu
arch     alphapca56
os       linux-gnu
system   alphapca56, linux-gnu
status
major    2
minor    0.0
year     2004
month    10
day      04
language R
>

Rajiv


> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
> Sent: Sunday, October 17, 2004 9:47 AM
> To: Prasad, Rajiv
> Cc: Peter Dalgaard; r-devel@stat.math.ethz.ch
> Subject: RE: [Rd] Re: [R] Problem Compiling R-2.0.0 on Linux Alpha
> 
> 
> On Sun, 17 Oct 2004, Prasad, Rajiv wrote:
> 
> > Thanks, Peter, and Prof. Ripley.
> > 
> > My efforts last night was mostly futile except that it told 
> me about 
> > the embedded newline in Built field.
> > 
> > Prof. Ripley: how do I get your fixes?  Can I just download 
> > R-2.0.0-patched?
> 
> Yes, tomorrow's tarball unless you want to get it from the 
> SVN archive. The change is in src/library/tools/R/admin.R and 
> looks like
> 
>     Built <-
>         paste("R ",
>               paste(R.version[c("major", "minor")],
>                     collapse = "."),
>               "; ",
>               if(file_test("-d", file.path(dir, "src"))) OStype
>               else "",
>               "; ",
>               ## Prefer date in ISO 8601 format.
>               ## Could also use
>               ##   format(Sys.time(), "%a %b %d %X %Y")
>               Sys.time(),
>               "; ",
>               .OStype(),
>               sep = "")
> 
>     ## we must not split the Built: field across lines
>     writeLines(c(formatDL(names(db), db, style = "list"),
>                  paste("Built", Built, sep=": ")),
>                file.path(outDir, "DESCRIPTION"))
>     db["Built"] <- Built
> 
> Obviously I have not tested on an Alphabc...tuvwxyz system 
> but it should 
> work there.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>

From Achim.Zeileis at wu-wien.ac.at  Mon Oct 18 12:38:30 2004
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Mon Oct 18 12:37:49 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
In-Reply-To: <loom.20041017T034921-592@post.gmane.org>
References: <loom.20041017T034921-592@post.gmane.org>
Message-ID: <20041018123830.784a4608.Achim.Zeileis@wu-wien.ac.at>

On Sun, 17 Oct 2004 01:51:47 +0000 (UTC) Gabor Grothendieck wrote:

> 
> The following, which was recently discussions on the rcom-l list,
> is a situation where coercing x1mat to a vector using as.vector
> results in an object that is.vector says is not a vector:
> 
>      R> x1mat<-matrix(list(1,1.1,1+1i,"a",NA,NaN), 3, 2)
>      R> is.vector(as.vector(x1mat))
>      [1] FALSE

If you give it a particular mode, it produces a vector:

R> as.vector(x1mat, mode = "character")
[1] "1"    "1.1"  "1+1i" "a"    "NA"   "NaN" 
R> as.vector(x1mat, mode = "numeric")
[1] 1.0 1.1 1.0  NA  NA NaN
Warning messages: 
1: imaginary parts discarded in coercion 
2: out-of-range values treated as 0 in coercion to raw 

A somewhat similar and simpler example is:

R> x <- data.frame(a = 1:5, b = 6:10)
R> is.vector(as.vector(x))
[1] FALSE

because data.frames are also already vectors of mode "list". The man
page of as.vector provides a similar example with:

R> as.vector(x, mode = "numeric")
Error in as.vector(x, mode = "numeric") : (list) object cannot be
coerced to double

I had discussed this with Kurt (and maybe R-devel, but I cannot find it
in the archives) some time ago and the bottom line--if I recall
correctly--was that is.vector() and as.vector() do not behave in the
way that is.vector(as.vector(x)) always gives TRUE (or an error).

Z

From ligges at statistik.uni-dortmund.de  Mon Oct 18 13:01:03 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Oct 18 13:01:04 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
In-Reply-To: <20041018123830.784a4608.Achim.Zeileis@wu-wien.ac.at>
References: <loom.20041017T034921-592@post.gmane.org>
	<20041018123830.784a4608.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <4173A26F.7040806@statistik.uni-dortmund.de>

Achim,

you are right, in principle, but I think I'd rather expect that

   as.vector(x1mat, mode = "list")

also removes the dim attributes.


Uwe



Achim Zeileis wrote:

> On Sun, 17 Oct 2004 01:51:47 +0000 (UTC) Gabor Grothendieck wrote:
> 
> 
>>The following, which was recently discussions on the rcom-l list,
>>is a situation where coercing x1mat to a vector using as.vector
>>results in an object that is.vector says is not a vector:
>>
>>     R> x1mat<-matrix(list(1,1.1,1+1i,"a",NA,NaN), 3, 2)
>>     R> is.vector(as.vector(x1mat))
>>     [1] FALSE
> 
> 
> If you give it a particular mode, it produces a vector:
> 
> R> as.vector(x1mat, mode = "character")
> [1] "1"    "1.1"  "1+1i" "a"    "NA"   "NaN" 
> R> as.vector(x1mat, mode = "numeric")
> [1] 1.0 1.1 1.0  NA  NA NaN
> Warning messages: 
> 1: imaginary parts discarded in coercion 
> 2: out-of-range values treated as 0 in coercion to raw 
> 
> A somewhat similar and simpler example is:
> 
> R> x <- data.frame(a = 1:5, b = 6:10)
> R> is.vector(as.vector(x))
> [1] FALSE
> 
> because data.frames are also already vectors of mode "list". The man
> page of as.vector provides a similar example with:
> 
> R> as.vector(x, mode = "numeric")
> Error in as.vector(x, mode = "numeric") : (list) object cannot be
> coerced to double
> 
> I had discussed this with Kurt (and maybe R-devel, but I cannot find it
> in the archives) some time ago and the bottom line--if I recall
> correctly--was that is.vector() and as.vector() do not behave in the
> way that is.vector(as.vector(x)) always gives TRUE (or an error).
> 
> Z
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From p.dalgaard at biostat.ku.dk  Mon Oct 18 16:15:48 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Oct 18 16:19:04 2004
Subject: [Rd] is.vector(as.vector(x)) is FALSE
In-Reply-To: <4173A26F.7040806@statistik.uni-dortmund.de>
References: <loom.20041017T034921-592@post.gmane.org>
	<20041018123830.784a4608.Achim.Zeileis@wu-wien.ac.at>
	<4173A26F.7040806@statistik.uni-dortmund.de>
Message-ID: <x23c0cjenf.fsf@biostat.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> ... I think I'd rather expect that
> 
>    as.vector(x1mat, mode = "list")
> 
> also removes the dim attributes.

Just checked, Splus seems to satisfy is.vector(as.vector(x)) for list
matrices and data frames. The R docs have

     'as.vector', a generic, attempts to coerce its argument into a
     vector of mode 'mode' (the default is to coerce to whichever mode
     is most convenient).  The attributes of 'x' are removed.

so I think there is a case for deeming the current behaviour to be a bug...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pgilbert at bank-banque-canada.ca  Mon Oct 18 16:37:38 2004
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon Oct 18 16:36:25 2004
Subject: [Rd] convoluted namespace problem
Message-ID: <4173D532.4050705@bankofcanada.ca>

I have a work around for this, but either I don't understand something 
(again) or it is a bug ...
I have an S3 generic  function "periods" defined in package tframe and 
exported from its namespace, and a method "periods.TSdata" defined in 
package dse1 and set as an S3method in its namespace. It uses another 
generic function  "periodsOutput" defined in dse1 and exported from the 
dse1 namespace.  From package dse2, which does not yet have a namespace, 
I call periods with a TSdata object and this fails  "couldn't find 
periods.TSdata".  Is this user error or a bug? (Details below.)

Thanks,
Paul Gilbert
________

R : Copyright 2004, The R Foundation for Statistical Computing
Version 2.0.0  (2004-10-04), ISBN 3-900051-07-0
 ...
 

>> require("dse1")
>  
>
Loading required package: dse1
Loading required package: tframe
Loading required package: setRNG
[1] TRUE

>> periods(TSdata(output=matrix(1:20,10,2)))
>  
>
Error in periods.TSdata(TSdata(output = matrix(1:20, 10, 2))) :
        couldn't find function "periods.TSdata"

>> traceback()
>  
>
2: periods.TSdata(TSdata(output = matrix(1:20, 10, 2)))
1: periods(TSdata(output = matrix(1:20, 10, 2)))

>> periods
>  
>
function (x)
UseMethod("periods")
<environment: namespace:tframe>

>> dse1:::periods.TSdata
>  
>
function (x, ...)
UseMethod("periodsOutput")
<environment: namespace:dse1>

>> dse1:::periodsOutput
>  
>
function (x)
UseMethod("periodsOutput")
<environment: namespace:dse1>

>>
>  
>

From cpd at fundeg.br  Mon Oct 18 21:53:33 2004
From: cpd at fundeg.br (cpd@fundeg.br)
Date: Mon Oct 18 21:58:04 2004
Subject: [Rd] EMAIL BLOQUEADO
Message-ID: <20041018195333.D92B810EAA7@fundeg.br>

O e-mail abaixo indicado foi bloqueado por este servidor, pois cont?m 
um anexo execut?vel. Arquivos execut?veis s?o potencialmente perigosos
por constituir meio de propaga??o de v?rus e worms de e-mail. Se realmente
o envio do arquivo for necess?rio, reenvie em formato ZIP. 


Mail headers:
  Date       : Mon, 18 Oct 2004 18:50:03 -0200
  Subject    : :)
  From       : r-devel@r-project.org
  Return-Path: <r-devel@r-project.org>
  Received   : from fundeg.br (unknown [192.168.1.215])
  To (system): maira
  To (header): maira@fundeg.br
  Cc         : 
  Bcc        : 

  Executables: AIDS!.doc.pif

Mensagem autom?tica

Unifeg - Centro Universit?rio Funda??o Educacional Guaxup?
		    www.unifeg.edu.br

From kiermeier.andreas at saugov.sa.gov.au  Tue Oct 19 04:47:20 2004
From: kiermeier.andreas at saugov.sa.gov.au (kiermeier.andreas@saugov.sa.gov.au)
Date: Tue Oct 19 04:47:25 2004
Subject: [Rd] barchart fails when grouping variable has more than 7 levels
	(PR#7293)
Message-ID: <20041019024720.08B791041C@slim.kubism.ku.dk>

Full_Name: Andreas Kiermeier
Version: 2.0.0
OS: Windows XP
Submission from: (NULL) (203.26.122.12)


I've struck a problem drawing barcharts after installing R 2.0.0. Previously
I've used the following command

print(barchart(100*result ~ sample,
               groups=congener,
               data=dioxin.2003.fresh.ub.p, stack=TRUE, ylim=c(0,102)))

to draw a stacked barchart of the precentage contribution of each type of dioxin
congener. Now, however I get the following error.

Error in grid.Call.graphics("L_rect", x$x, x$y, x$width, x$height,
valid.just(x$just)) : 
	invalid line type

The graph that actually results on my trellis device has axes and for the first
sample it manages to 7 of the 17 stacked bars.

As a work-around I have used (I used reps of 50 as another graph has 46
congeners):

my.tpar <- trellis.par.get("superpose.fill")
my.tpar$alpha <- rep(1,50)
my.tpar$border <- rep("black", 50)
my.tpar$lty <- rep(1, 50)
my.tpar$lwd <- rep(1, 50)
trellis.par.set("superpose.fill", my.tpar)

The barchart conequently works.

From deepayan at stat.wisc.edu  Tue Oct 19 05:31:00 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Tue Oct 19 05:31:06 2004
Subject: [Rd] barchart fails when grouping variable has more than 7 levels
	(PR#7293)
Message-ID: <20041019033100.8E9221041D@slim.kubism.ku.dk>

On Monday 18 October 2004 21:47, kiermeier.andreas@saugov.sa.gov.au 
wrote:
> Full_Name: Andreas Kiermeier
> Version: 2.0.0
> OS: Windows XP
> Submission from: (NULL) (203.26.122.12)
>
>
> I've struck a problem drawing barcharts after installing R 2.0.0.
> Previously I've used the following command
>
> print(barchart(100*result ~ sample,
>                groups=congener,
>                data=dioxin.2003.fresh.ub.p, stack=TRUE,
> ylim=c(0,102)))
>
> to draw a stacked barchart of the precentage contribution of each
> type of dioxin congener. Now, however I get the following error.
>
> Error in grid.Call.graphics("L_rect", x$x, x$y, x$width, x$height,
> valid.just(x$just)) :
>  invalid line type
>
> The graph that actually results on my trellis device has axes and for
> the first sample it manages to 7 of the 17 stacked bars.

Right, I had the color replicated to be as long as necessary, but missed 
the other things. Should be fixed in the next release. Thanks,

Deepayan

From ripley at stats.ox.ac.uk  Tue Oct 19 10:10:29 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 19 10:10:40 2004
Subject: [Rd] Re: Question on Rprof(); was: Re: [R] sapply and loop
In-Reply-To: <4174C83F.9050108@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.44.0410190904550.3507-100000@gannet.stats>

Uwe: moved to R-devel.

Good point (and also happens on Unix).  But lack of write permission will
also give a fatal error, and the right place to fix this is in 
src/main/eval.c which has

        R_Suicide("can't open profile file");

and should I think throw a non-fatal error.

Brian

On Tue, 19 Oct 2004, Uwe Ligges wrote:

> Zhen Pang wrote:
> 
> > I am sorry for neglecting the acknowledgement for `Writing R 
> > Extensions', since I think I am just citing the code from the orignal 
> > R-help. I fail to get the results when I use my own code. So I refer to 
> > this code where Rprof() appears. Anyway, I am sorry for this.
> > 
> > In fact, I have tried to whether I specify boot.out. Neither one works.
> 
> Do you have read/write permissions? R-1.8.1 is pretty old. Please upgrade.
> 
> 
> 
> BTW: Rprof() to a non-existing directory
>     Rprof("c:/DoesNotExist/temp.out")
> under R-2.0.0, Windows, results in the GUI information message:
> "Fatal error: can't open profile file", and R is closed afterwards.
> 
> I think we should change this behaviour to a simple error message by 
> adding the lines
> 
>   if(!file.exists(dirname(filename)))
>       stop("Cannot open file ", filename)
> 
> just before
> 
>   invisible(.Internal(Rprof(filename, append, interval)))
> 
> 
> 
> Uwe Ligges
> 
> 
> 
> > Rprof("boot.out")
> >     storm.boot <- boot(rs, storm.bf, R = 4999) # pretty slow
> >      Rprof(NULL)
> > 
> > summaryRprof()
> > Error in summaryRprof() : no events were recorded
> > 
> > summaryRprof("boot.out")
> > Error in summaryRprof("boot.out") : no events were recorded
> > 
> >     Rprof()
> >     storm.boot <- boot(rs, storm.bf, R = 4999) # pretty slow
> >      Rprof(NULL)
> > 
> > summaryRprof()
> > Error in summaryRprof() : no events were recorded
> > 
> > 
> > Zhen
> > 
> > 
> >> From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> >> To: Zhen Pang <nusbj@hotmail.com>
> >> CC: tlumley@u.washington.edu, r-help@stat.math.ethz.ch
> >> Subject: Re: [R] sapply and loop
> >> Date: Tue, 19 Oct 2004 07:29:54 +0100 (BST)
> >>
> >> On Tue, 19 Oct 2004, Zhen Pang wrote:
> >>
> >> > I tried to use Rprof(). As an example, I consider the following code 
> >> (from
> >> > Venables & Ripley, 1999).
> >>
> >> I believe you parroted that from `Writing R Extensions', but failed to
> >> give proper credit!
> >>
> >> >      library(MASS); library(boot); library(nls)
> >> >      data(stormer)
> >> >      storm.fm <- nls(Time ~ b*Viscosity/(Wt - c), stormer,
> >> >                      start = c(b=29.401, c=2.2183))
> >> >      st <- cbind(stormer, fit=fitted(storm.fm))
> >> >      storm.bf <- function(rs, i) {
> >> >          st$Time <-  st$fit + rs[i]
> >> >          tmp <- nls(Time ~ (b * Viscosity)/(Wt - c), st,
> >> >                     start = coef(storm.fm))
> >> >          tmp$m$getAllPars()
> >> >      }
> >> >      rs <- scale(resid(storm.fm), scale = FALSE) # remove the mean
> >> >      Rprof("boot.out")
> >> >      storm.boot <- boot(rs, storm.bf, R = 4999) # pretty slow
> >> >      Rprof(NULL)
> >>
> >> At this point your unacknowledged copying went adrift.
> >>
> >> > summaryRprof()
> >> > Error in summaryRprof() : no events were recorded
> >> >
> >> > I am using R1.8.1 in windows. Why can't I get the results?
> >>
> >> Because you didn't do your homework, and didn't even follow your source.
> >> The 'file' arguments of Rprof and summaryProf have to agree: see their
> >> help pages (as the posting guide asks).
> >>
> >> -- 
> >> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> >> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> >> University of Oxford,             Tel:  +44 1865 272861 (self)
> >> 1 South Parks Road,                     +44 1865 272866 (PA)
> >> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >>
> >> ______________________________________________
> >> R-help@stat.math.ethz.ch mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-help
> >> PLEASE do read the posting guide! 
> >> http://www.R-project.org/posting-guide.html
> > 
> > 
> > ______________________________________________
> > R-help@stat.math.ethz.ch mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide! 
> > http://www.R-project.org/posting-guide.html
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From root at u-003-scfe01.uni-tuebingen.de  Tue Oct 19 12:12:47 2004
From: root at u-003-scfe01.uni-tuebingen.de (root@u-003-scfe01.uni-tuebingen.de)
Date: Tue Oct 19 12:12:52 2004
Subject: [Rd] lapack test failed (PR#7294)
Message-ID: <20041019101247.C2293EDE1@slim.kubism.ku.dk>


Hallo,
I've just installed R on our Opteron System (AMD Opteron 246). Running make check-all
results in a failure during the lapack test:

> ##  -------  tests of random real and complex matrices ------
>
> ##                           100  may cause failures here.
> eigenok <- function(A, E, Eps=1000*.Machine$double.eps)
+ {
+     V <- E$vect; lam <- E$values
+     stopifnot(abs(A %*% V - V %*% diag(lam)) < Eps,
+               abs(lam[length(lam)]/lam[1]) < Eps || # this one not for singular A :
+               abs(A - V %*% diag(lam) %*% t(V)) < Eps)
+ }
>
> Ceigenok <- function(A, E, Eps=1000*.Machine$double.eps)
+ {
+     V <- E$vect; lam <- E$values
+     stopifnot(Mod(A %*% V - V %*% diag(lam)) < Eps,
+               Mod(A - V %*% diag(lam) %*% Conj(t(V))) < Eps)
+ }
>
> ## failed for some 64bit-Lapack-gcc combinations:
> sm <- cbind(1, 3:1, 1:3)
> eigenok(sm, eigen(sm))
Error: abs(A %*% V - V %*% diag(lam)) < Eps is not TRUE
Execution halted

So this seems to be one of the combination of 64bit and gcc which leads to failures. Using
the configure option:
--with-lapack="-lacml"
results in the same error. I am not sure wether the build uses the acml (Version 1.5) or not.
Using pgf77 instead of g77 results in problems building R. (Missing function definitions or
invalid compiler options (fpic))
If there is a way to overcome this problem please let me know.
Thanks in advance
w.dilling
-------------------------------------------------------------------------------
W.Dilling                               Tel.: (49) 7071/29-70206
Universitaet Tuebingen                  Fax.: (49) 7071/29-5912
Zentrum fuer Datenverarbeitung          mail: dilling@zdv.uni-tuebingen.de
Waechterstrasse 76
72074 Tuebingen





--please do not edit the information below--

Version:
 platform = x86_64-unknown-linux-gnu
 arch = x86_64
 os = linux-gnu
 system = x86_64, linux-gnu
 status = Patched
 major = 2
 minor = 0.0
 year = 2004
 month = 10
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base

From imosqueira at suk.azti.es  Tue Oct 19 12:36:10 2004
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Tue Oct 19 12:34:03 2004
Subject: [Rd] Cross compiling in R-2.0.0
Message-ID: <B4096CABFB6A704CB79B7EEC19449FF705B861@SSRCorreo.azti.local>

Hello,
 
When compiling R-2.0.0 for cross-compiling, I get the following error
when calling 'make R'
 
---------- Making package base ------------
  adding build stamp to DESCRIPTION
/bin/sh: line 1: --vanilla: command not found
make[5]: *** [frontmatter] Erro 127
make[4]: *** [all] Erro 2
make[3]: *** [pkg-base] Erro 2
make[2]: *** [rpackage] Erro 2
make[1]: *** [all] Erro 2
make[1]: Sando do directorio `/home/iago/crossbuild/WinR/R-2.0.0/src/gnuwin32'
 
The error appears in the call to $(REXE), that was defined in
R-2.0.0/src/gnuwin32/MakePkg (Line 18) as:
 
REXE = $(R_EXE) --vanilla --slave
 
I tried substituting REXE with R --vanilla --slave and that did the trick, only
to later fail with a complain about $(R_HOME).
 
Is there any reason for this failure in the Makefile variables? Anything to do
with the change from 1.9.1 to 2.0.0?
 
Many thanks,

 
Iago Mosqueira

	[[alternative HTML version deleted]]

From ripley at stats.ox.ac.uk  Tue Oct 19 13:00:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 19 13:00:56 2004
Subject: [Rd] lapack test failed (PR#7294)
In-Reply-To: <20041019101247.C2293EDE1@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410191144000.10847-100000@gannet.stats>

This works for several other people on Opterons with for example Linux
Fedora Core 2.  Please give more details, such as your exact OS, your
compiler version and the BLAS you have in use.  (FC2, gcc-3.3.3 and Goto's 
BLAS work, for example.)

I really don't know why you sent a bug report.  This is a known problem in
some systems (see the comment) and not a bug in R: the test is there to
track down broken systems.

Questions should be sent to R-help or R-devel and not to R-bugs.


On Tue, 19 Oct 2004 root@u-003-scfe01.uni-tuebingen.de wrote:

> 
> Hallo,
> I've just installed R on our Opteron System (AMD Opteron 246). Running make check-all
> results in a failure during the lapack test:
> 
> > ##  -------  tests of random real and complex matrices ------
> >
> > ##                           100  may cause failures here.
> > eigenok <- function(A, E, Eps=1000*.Machine$double.eps)
> + {
> +     V <- E$vect; lam <- E$values
> +     stopifnot(abs(A %*% V - V %*% diag(lam)) < Eps,
> +               abs(lam[length(lam)]/lam[1]) < Eps || # this one not for singular A :
> +               abs(A - V %*% diag(lam) %*% t(V)) < Eps)
> + }
> >
> > Ceigenok <- function(A, E, Eps=1000*.Machine$double.eps)
> + {
> +     V <- E$vect; lam <- E$values
> +     stopifnot(Mod(A %*% V - V %*% diag(lam)) < Eps,
> +               Mod(A - V %*% diag(lam) %*% Conj(t(V))) < Eps)
> + }
> >
> > ## failed for some 64bit-Lapack-gcc combinations:
> > sm <- cbind(1, 3:1, 1:3)
> > eigenok(sm, eigen(sm))
> Error: abs(A %*% V - V %*% diag(lam)) < Eps is not TRUE
> Execution halted
> 
> So this seems to be one of the combination of 64bit and gcc which leads to failures. Using
> the configure option:
> --with-lapack="-lacml"
> results in the same error. I am not sure wether the build uses the acml (Version 1.5) or not.
> Using pgf77 instead of g77 results in problems building R. (Missing function definitions or
> invalid compiler options (fpic))
> If there is a way to overcome this problem please let me know.
> Thanks in advance
> w.dilling
> -------------------------------------------------------------------------------
> W.Dilling                               Tel.: (49) 7071/29-70206
> Universitaet Tuebingen                  Fax.: (49) 7071/29-5912
> Zentrum fuer Datenverarbeitung          mail: dilling@zdv.uni-tuebingen.de
> Waechterstrasse 76
> 72074 Tuebingen
> 
> 
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = x86_64-unknown-linux-gnu
>  arch = x86_64
>  os = linux-gnu
>  system = x86_64, linux-gnu
>  status = Patched
>  major = 2
>  minor = 0.0
>  year = 2004
>  month = 10
>  day = 18
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Oct 19 13:12:01 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Oct 19 13:12:09 2004
Subject: [Rd] Cross compiling in R-2.0.0
In-Reply-To: <B4096CABFB6A704CB79B7EEC19449FF705B861@SSRCorreo.azti.local>
Message-ID: <Pine.LNX.4.44.0410191205350.10847-100000@gannet.stats>

On Tue, 19 Oct 2004, Iago Mosqueira wrote:

> When compiling R-2.0.0 for cross-compiling, 

More likely you are cross-compiling R to run under Windows.

> I get the following error when calling 'make R'

Who said you should `make R'?  That is not in the instructions in 
src/gnuwin32/INSTALL.  If you do that you should get

gannet% make R
make: *** No rule to make target `R'.  Stop.


> ---------- Making package base ------------
>   adding build stamp to DESCRIPTION
> /bin/sh: line 1: --vanilla: command not found
> make[5]: *** [frontmatter] Erro 127
> make[4]: *** [all] Erro 2
> make[3]: *** [pkg-base] Erro 2
> make[2]: *** [rpackage] Erro 2
> make[1]: *** [all] Erro 2
> make[1]: Sa?ndo do directorio `/home/iago/crossbuild/WinR/R-2.0.0/src/gnuwin32'
>  
> The error appears in the call to $(REXE), that was defined in
> R-2.0.0/src/gnuwin32/MakePkg (Line 18) as:
>  
> REXE = $(R_EXE) --vanilla --slave
>  
> I tried substituting REXE with R --vanilla --slave and that did the trick, only
> to later fail with a complain about $(R_HOME).

So R_EXE is not defined.  Setting it is part of the instructions.

> Is there any reason for this failure in the Makefile variables? Anything to do
> with the change from 1.9.1 to 2.0.0?

User error!  If you follow the instructions it does work, at least in an 
English-speaking locale.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Kiermeier.Andreas at saugov.sa.gov.au  Wed Oct 20 08:15:11 2004
From: Kiermeier.Andreas at saugov.sa.gov.au (Kiermeier.Andreas@saugov.sa.gov.au)
Date: Wed Oct 20 08:15:17 2004
Subject: [Rd] Bug in 'rot=' of scales argument of barchart (PR#7296)
Message-ID: <20041020061511.9B76AF330@slim.kubism.ku.dk>

Full_Name: Andreas Kiermeier
Version: 2.0.0
OS: Windows XP
Submission from: (NULL) (203.26.136.133)


When "rot=-90" in the scales argument of barchart (and possibly other trellis
graphics) the axis label disappears behind the bars and only the last character
can be seen. For "rot=90" things work fine.

From ripley at stats.ox.ac.uk  Wed Oct 20 08:26:17 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 20 08:26:32 2004
Subject: [Rd] Bug in 'rot=' of scales argument of barchart (PR#7296)
In-Reply-To: <20041020061511.9B76AF330@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410200723110.10429-100000@gannet.stats>

barchart is part of the lattice contributed package.

Please do read the section on BUGS in the FAQ, which says

   Bug reports on contributed packages should be sent first to the package
   maintainer, and only submitted to the R-bugs repository by package
   maintainers, mentioning the package in the subject line.

I do not believe you are the maintainer, and he does not have write access 
to the bug repository.  So someone else has to clear up after your error.

On Wed, 20 Oct 2004 Kiermeier.Andreas@saugov.sa.gov.au wrote:

> Full_Name: Andreas Kiermeier
> Version: 2.0.0
> OS: Windows XP
> Submission from: (NULL) (203.26.136.133)
> 
> 
> When "rot=-90" in the scales argument of barchart (and possibly other trellis
> graphics) the axis label disappears behind the bars and only the last character
> can be seen. For "rot=90" things work fine.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From libraryjobs at aucklandcity.govt.nz  Wed Oct 20 10:01:46 2004
From: libraryjobs at aucklandcity.govt.nz (libraryjobs@aucklandcity.govt.nz)
Date: Wed Oct 20 10:01:51 2004
Subject: [Rd] RE: Hi (PR#7297)
Message-ID: <20041020080146.E871E10433@slim.kubism.ku.dk>

This is an automatic reply - please do not respond to this message.

Your application has been received.  We will keep you advised of further
developments as soon as possible after the application closing date.

Thank you for your interest in Auckland City Libraries.

Kind regards

Christine Mullan
Human Resources Administrator
www.aucklandcity.govt.nz/council/jobs
www.aucklandcitylibraries.com


This e-mail is confidential.  If it is not intended for you please do not read, distribute or copy it or any attachments.  Please notify the sender by return e-mail and delete the original message and any attachments.

Any views expressed in this e-mail may be those of the individual sender and may not necessarily reflect the views of Auckland City Council.

From info at motosgalicia.com  Wed Oct 20 10:03:20 2004
From: info at motosgalicia.com (info@motosgalicia.com)
Date: Wed Oct 20 10:03:30 2004
Subject: [Rd] Re: Important
In-Reply-To: <200410200803.i9K839e49281@mail.9netave.com>
References: <200410200803.i9K839e49281@mail.9netave.com>
Message-ID: <200410200803.i9K83Kr49537@mail.9netave.com>


Sentimos las molestias, pero hemos tenido que cerrar esta cuenta de correo por la cantidad de correo basura que recibiamos.  Para contactar con nosotros, llama al 91-314-0726, 686-420-027, atreves de nuestra formulario de contacto en nuestra pagina web, www.motosgalicia.com.  Gracias.

From ralph.stamper at btinternet.com  Wed Oct 20 12:38:31 2004
From: ralph.stamper at btinternet.com (ralphstamper)
Date: Wed Oct 20 12:36:33 2004
Subject: [Rd] New Coin Operated Mobile Phone Charger - Seeking Overseas
	Distributors
Message-ID: <41764027.000003.03692@OEMCOMPUTER>

Hi

Can you send more info please.

Regards
Ralph Stamper
	[[alternative HTML version deleted]]

From jmoreira at fe.up.pt  Wed Oct 20 15:14:00 2004
From: jmoreira at fe.up.pt (jmoreira@fe.up.pt)
Date: Wed Oct 20 15:14:03 2004
Subject: [Rd] ppr crash for optlevel=0
Message-ID: <1098278040.417664981096d@webmail.fe.up.pt>


Just ro report an error:
I am using R 1.9.1, OS: XP professional
I am testing ppr for different parameters. It is everything ok except when 
optlevel=0. That happen for the methods supsmu and gcvspline, the ones I have 
tested. For optlevel = 1:3 it works ok.

Jo?o Moreira

From andy_liaw at merck.com  Wed Oct 20 15:56:16 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed Oct 20 15:56:42 2004
Subject: [Rd] ppr crash for optlevel=0
Message-ID: <3A822319EB35174CA3714066D590DCD504AF8584@usrymx25.merck.com>

Please give a _reproducible_ example on the current version of R (2.0.0).
It works fine for me using the example in ?ppr:

>      rock.ppr <- ppr(log(perm) ~ area1 + peri1 + shape,
+                      data = rock, nterms = 2, max.terms = 5, optlevel=0)
> rock.ppr
>      rock.ppr <- ppr(log(perm) ~ area1 + peri1 + shape,
sm.method="gcvspline",
+                      data = rock, nterms = 2, max.terms = 5, optlevel=0)

Neither of the above crashes, nor gave any error.

WinXP Pro with R-2.0.0.

Andy

> From: jmoreira@fe.up.pt
> 
> Just ro report an error:
> I am using R 1.9.1, OS: XP professional
> I am testing ppr for different parameters. It is everything 
> ok except when 
> optlevel=0. That happen for the methods supsmu and gcvspline, 
> the ones I have 
> tested. For optlevel = 1:3 it works ok.
> 
> Jo?o Moreira
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>

From jmacdon at med.umich.edu  Wed Oct 20 22:13:52 2004
From: jmacdon at med.umich.edu (James MacDonald)
Date: Wed Oct 20 22:14:29 2004
Subject: [Rd] loading a particular package version
Message-ID: <s1768eda.027@med-gwia-02a.med.umich.edu>

Hi all,

This is either a feature request or a plea for help (depending on
whether or not I am missing something). I am trying to write a function
that will load a package of a particular version, but the package
installation was most likely not versioned e.g., --with-package-version

For instance, say there are two packages, foo_1.2.3 and foo_1.3.4, and
they are installed in two different libraries, /usr/local/R/library and
/home/me/library. .libPaths() returns the library paths in the opposite
order, so require(foo) loads the wrong package if I want to load
foo_1.3.4. Since they are not versioned installs, I cannot use
require(foo, version="1.3.4"). In addition, I cannot use require(foo,
lib.loc="/home/me/library") because require doesn't have a lib.loc
argument.

I can, however use library(foo, lib.loc="/home/me/library"), and this
works in an interactive use of the function. Unfortunately when I run R
CMD check, this bombs out on some vignette code as well as example code
that call the function. Anyway, AFAIK library() is really not designed
for use within functions.

So, long story short, is there a way around this problem that I just
don't see, or is it possible to get a lib.loc argument to require()?

TIA,

Jim



James W. MacDonald
Affymetrix and cDNA Microarray Core
University of Michigan Cancer Center
1500 E. Medical Center Drive
7410 CCGC
Ann Arbor MI 48109
734-647-5623


**********************************************************
Electronic Mail is not secure, may not be read every day, and should not be used for urgent or sensitive issues.

From dgrove at fhcrc.org  Thu Oct 21 01:39:11 2004
From: dgrove at fhcrc.org (dgrove@fhcrc.org)
Date: Thu Oct 21 01:39:13 2004
Subject: [Rd] documentation for rank() (PR#7298)
Message-ID: <20041020233911.325B9FB8F@slim.kubism.ku.dk>

Full_Name: Doug Grove
Version: R.1.9.1
OS: Linux
Submission from: (NULL) (140.107.156.61)


I just found that rank() has a 'decreasing' argument that is not documented in
its
help page.  I checked my version of 2.0.0 (original release hence unpatched)
and
it is not documented there.  For curiousity I also went back to version 1.8.1
and
checked the function (not the documentation)and at that point rank() had not
yet
acquired the 'decreasing' argument.

It's ironic as I was wishing that rank() had a decreasing option like
sort does, and then I found that it already does.

Thanks,
Doug

From p.dalgaard at biostat.ku.dk  Thu Oct 21 01:44:55 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Thu Oct 21 01:48:30 2004
Subject: [Rd] documentation for rank() (PR#7298)
In-Reply-To: <20041020233911.325B9FB8F@slim.kubism.ku.dk>
References: <20041020233911.325B9FB8F@slim.kubism.ku.dk>
Message-ID: <x28ya154zs.fsf@biostat.ku.dk>

dgrove@fhcrc.org writes:

> I just found that rank() has a 'decreasing' argument that is not documented in
> its
> help page.  I checked my version of 2.0.0 (original release hence unpatched)
> and
> it is not documented there.  For curiousity I also went back to version 1.8.1
> and
> checked the function (not the documentation)and at that point rank() had not
> yet
> acquired the 'decreasing' argument.
> 
> It's ironic as I was wishing that rank() had a decreasing option like
> sort does, and then I found that it already does.

Eh????

I have

> rank
function (x, na.last = TRUE, ties.method = c("average", "first",
    "random", "max", "min"))
{....

And we do have QC tools that work very hard to ensure that all
arguments are documented!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From dgrove at fhcrc.org  Thu Oct 21 07:30:34 2004
From: dgrove at fhcrc.org (Douglas Grove)
Date: Thu Oct 21 07:52:19 2004
Subject: [Rd] documentation for rank() (PR#7298)
In-Reply-To: <x28ya154zs.fsf@biostat.ku.dk>
References: <20041020233911.325B9FB8F@slim.kubism.ku.dk>
	<x28ya154zs.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.58.0410202217460.26924@bear.fhcrc.org>

Oh crap.  So sorry.  This is my fault (obviously).
Prior to the new ties methods being added in 2.0.0
I modified the source to do this myself.  So looks
like I forgot: (1) that my modified code was still
being accessed default (thought I'd removed it) and
(2) that I had added in the 'decreasing' argument.

It did seem very odd to me when I saw the undocumented
argument.

Sorry for the this faulty bug report.

BTW, would someone please add a 'decreasing' argument to rank.
It seems natural to have one, just like sort, and only
involves about two lines of code and a few lines of
editing to the help file. 

Thanks,
Doug



On Wed, 21 Oct 2004, Peter Dalgaard wrote:

> dgrove@fhcrc.org writes:
> 
> > I just found that rank() has a 'decreasing' argument that is not documented in
> > its
> > help page.  I checked my version of 2.0.0 (original release hence unpatched)
> > and
> > it is not documented there.  For curiousity I also went back to version 1.8.1
> > and
> > checked the function (not the documentation)and at that point rank() had not
> > yet
> > acquired the 'decreasing' argument.
> > 
> > It's ironic as I was wishing that rank() had a decreasing option like
> > sort does, and then I found that it already does.
> 
> Eh????
> 
> I have
> 
> > rank
> function (x, na.last = TRUE, ties.method = c("average", "first",
>     "random", "max", "min"))
> {....
> 
> And we do have QC tools that work very hard to ensure that all
> arguments are documented!
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

From ripley at stats.ox.ac.uk  Thu Oct 21 08:30:45 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 21 08:31:00 2004
Subject: [Rd] documentation for rank() (PR#7298)
In-Reply-To: <Pine.LNX.4.58.0410202217460.26924@bear.fhcrc.org>
Message-ID: <Pine.LNX.4.44.0410210724500.24759-100000@gannet.stats>

On Wed, 20 Oct 2004, Douglas Grove wrote:

> Oh crap.  So sorry.  This is my fault (obviously).
> Prior to the new ties methods being added in 2.0.0
> I modified the source to do this myself.  So looks
> like I forgot: (1) that my modified code was still
> being accessed default (thought I'd removed it) and
> (2) that I had added in the 'decreasing' argument.
> 
> It did seem very odd to me when I saw the undocumented
> argument.
> 
> Sorry for the this faulty bug report.
> 
> BTW, would someone please add a 'decreasing' argument to rank.
> It seems natural to have one, just like sort, and only
> involves about two lines of code and a few lines of
> editing to the help file. 

I don't think so.  At the very least, each tie method needs a change, as 
may the handling of NAs.  Also the writing a comprehensible help page will 
become very complex.

What is the need?  Rank works for numeric vectors, and why can't you just
call rank(-x) or n+1-rank(x)?  The reason that does not work for sort() is
that it deals with non-numeric vectors.

Incidentally, we might need a `last' value for ties.method.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Oct 21 08:30:54 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Oct 21 08:31:03 2004
Subject: [Rd] documentation for rank() (PR#7298)
Message-ID: <20041021063054.814CAFB8F@slim.kubism.ku.dk>

On Wed, 20 Oct 2004, Douglas Grove wrote:

> Oh crap.  So sorry.  This is my fault (obviously).
> Prior to the new ties methods being added in 2.0.0
> I modified the source to do this myself.  So looks
> like I forgot: (1) that my modified code was still
> being accessed default (thought I'd removed it) and
> (2) that I had added in the 'decreasing' argument.
> 
> It did seem very odd to me when I saw the undocumented
> argument.
> 
> Sorry for the this faulty bug report.
> 
> BTW, would someone please add a 'decreasing' argument to rank.
> It seems natural to have one, just like sort, and only
> involves about two lines of code and a few lines of
> editing to the help file. 

I don't think so.  At the very least, each tie method needs a change, as 
may the handling of NAs.  Also the writing a comprehensible help page will 
become very complex.

What is the need?  Rank works for numeric vectors, and why can't you just
call rank(-x) or n+1-rank(x)?  The reason that does not work for sort() is
that it deals with non-numeric vectors.

Incidentally, we might need a `last' value for ties.method.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dgrove at fhcrc.org  Thu Oct 21 09:30:02 2004
From: dgrove at fhcrc.org (Douglas Grove)
Date: Thu Oct 21 09:30:15 2004
Subject: [Rd] documentation for rank() (PR#7298)
In-Reply-To: <Pine.LNX.4.44.0410210724500.24759-100000@gannet.stats>
References: <Pine.LNX.4.44.0410210724500.24759-100000@gannet.stats>
Message-ID: <Pine.LNX.4.58.0410202354500.27407@bear.fhcrc.org>



On Thu, 21 Oct 2004, Prof Brian Ripley wrote:

> On Wed, 20 Oct 2004, Douglas Grove wrote:
> 
> > Oh crap.  So sorry.  This is my fault (obviously).
> > Prior to the new ties methods being added in 2.0.0
> > I modified the source to do this myself.  So looks
> > like I forgot: (1) that my modified code was still
> > being accessed default (thought I'd removed it) and
> > (2) that I had added in the 'decreasing' argument.
> > 
> > It did seem very odd to me when I saw the undocumented
> > argument.
> > 
> > Sorry for the this faulty bug report.
> > 
> > BTW, would someone please add a 'decreasing' argument to rank.
> > It seems natural to have one, just like sort, and only
> > involves about two lines of code and a few lines of
> > editing to the help file. 
> 
> I don't think so.  At the very least, each tie method needs a change, as 
> may the handling of NAs.  Also the writing a comprehensible help page will 
> become very complex.
>
> What is the need?  Rank works for numeric vectors, and why can't you just
> call rank(-x) or n+1-rank(x)?  The reason that does not work for sort() is
> that it deals with non-numeric vectors.

As you note there isn't a need, I just am used to thinking about
ranking and sorting as being either increasing (the default) or
decreasing, having an explicit 'decreasing' option makes the 
the code more transparent.  It's a minor thing but as I erroneously
supposed it to be easy, it seemed worthwhile. 

You're right that there would need to be a special case for at least
ties.method='first', but I think for the others just using
 if (decreasing) x <- -x 
should be all that is needed.  


> Incidentally, we might need a `last' value for ties.method.

I don't see that my suggestion necessitates that.  However one
could argue for a 'last' value in ties.method for completeness.
I personally have had no need for 'first' nor would I for 'last'.


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

From dgrove at fhcrc.org  Thu Oct 21 09:30:17 2004
From: dgrove at fhcrc.org (dgrove@fhcrc.org)
Date: Thu Oct 21 09:30:32 2004
Subject: [Rd] documentation for rank() (PR#7298)
Message-ID: <20041021073017.9C32DFB8F@slim.kubism.ku.dk>



On Thu, 21 Oct 2004, Prof Brian Ripley wrote:

> On Wed, 20 Oct 2004, Douglas Grove wrote:
> 
> > Oh crap.  So sorry.  This is my fault (obviously).
> > Prior to the new ties methods being added in 2.0.0
> > I modified the source to do this myself.  So looks
> > like I forgot: (1) that my modified code was still
> > being accessed default (thought I'd removed it) and
> > (2) that I had added in the 'decreasing' argument.
> > 
> > It did seem very odd to me when I saw the undocumented
> > argument.
> > 
> > Sorry for the this faulty bug report.
> > 
> > BTW, would someone please add a 'decreasing' argument to rank.
> > It seems natural to have one, just like sort, and only
> > involves about two lines of code and a few lines of
> > editing to the help file. 
> 
> I don't think so.  At the very least, each tie method needs a change, as 
> may the handling of NAs.  Also the writing a comprehensible help page will 
> become very complex.
>
> What is the need?  Rank works for numeric vectors, and why can't you just
> call rank(-x) or n+1-rank(x)?  The reason that does not work for sort() is
> that it deals with non-numeric vectors.

As you note there isn't a need, I just am used to thinking about
ranking and sorting as being either increasing (the default) or
decreasing, having an explicit 'decreasing' option makes the 
the code more transparent.  It's a minor thing but as I erroneously
supposed it to be easy, it seemed worthwhile. 

You're right that there would need to be a special case for at least
ties.method='first', but I think for the others just using
 if (decreasing) x <- -x 
should be all that is needed.  


> Incidentally, we might need a `last' value for ties.method.

I don't see that my suggestion necessitates that.  However one
could argue for a 'last' value in ties.method for completeness.
I personally have had no need for 'first' nor would I for 'last'.


> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>

From ripley at stats.ox.ac.uk  Thu Oct 21 09:34:06 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 21 09:34:37 2004
Subject: [Rd] documentation for rank() (PR#7298)
In-Reply-To: <Pine.LNX.4.58.0410202354500.27407@bear.fhcrc.org>
Message-ID: <Pine.LNX.4.44.0410210831220.28725-100000@gannet.stats>

On Thu, 21 Oct 2004, Douglas Grove wrote:

> 
> 
> On Thu, 21 Oct 2004, Prof Brian Ripley wrote:
> 
> > On Wed, 20 Oct 2004, Douglas Grove wrote:
> > 
> > > Oh crap.  So sorry.  This is my fault (obviously).
> > > Prior to the new ties methods being added in 2.0.0
> > > I modified the source to do this myself.  So looks
> > > like I forgot: (1) that my modified code was still
> > > being accessed default (thought I'd removed it) and
> > > (2) that I had added in the 'decreasing' argument.
> > > 
> > > It did seem very odd to me when I saw the undocumented
> > > argument.
> > > 
> > > Sorry for the this faulty bug report.
> > > 
> > > BTW, would someone please add a 'decreasing' argument to rank.
> > > It seems natural to have one, just like sort, and only
> > > involves about two lines of code and a few lines of
> > > editing to the help file. 
> > 
> > I don't think so.  At the very least, each tie method needs a change, as 
> > may the handling of NAs.  Also the writing a comprehensible help page will 
> > become very complex.
> >
> > What is the need?  Rank works for numeric vectors, and why can't you just
> > call rank(-x) or n+1-rank(x)?  The reason that does not work for sort() is
> > that it deals with non-numeric vectors.
> 
> As you note there isn't a need, I just am used to thinking about
> ranking and sorting as being either increasing (the default) or
> decreasing, having an explicit 'decreasing' option makes the 
> the code more transparent.  It's a minor thing but as I erroneously
> supposed it to be easy, it seemed worthwhile. 
> 
> You're right that there would need to be a special case for at least
> ties.method='first', but I think for the others just using
>  if (decreasing) x <- -x 
> should be all that is needed.  

Looks like rank() does actually work for non-numeric vectors (even though
it was not documented to do so), which complicates things further.

> > Incidentally, we might need a `last' value for ties.method.
> 
> I don't see that my suggestion necessitates that.  However one
> could argue for a 'last' value in ties.method for completeness.
> I personally have had no need for 'first' nor would I for 'last'.

If you allow decreasing values, then I suspect you want a stable sort 
variant, which would be `last' not `first'.  Certainly `first' makes no 
sense.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From scoelho at univ-tlse1.fr  Thu Oct 21 12:52:45 2004
From: scoelho at univ-tlse1.fr (Sandrine Coelho)
Date: Thu Oct 21 12:55:05 2004
Subject: [Rd] C++ dev 
Message-ID: <001a01c4b75c$1c802190$e63631c1@Cysteine>

Hello,
I wish to use R functions in a C++ programm.
I have installed D COM Server but with this application i think it isn't possible to acces mouse event..., is it true?
My second idea is to compile libraries which are used, but i haven't source code, and the libraries existing are compiled under unix, but i'd like have .lib and .dll
Thanks for your informations
Sandrine

From wolski at molgen.mpg.de  Thu Oct 21 13:41:29 2004
From: wolski at molgen.mpg.de (wolski@molgen.mpg.de)
Date: Thu Oct 21 13:41:41 2004
Subject: [Rd] error in plot.dendrogram (PR#7300)
Message-ID: <20041021114129.96D0310E92@slim.kubism.ku.dk>

Hi,

hres <- hclust(smatr,method="single")
hresd<-as.dendrogram(hres)
as.dendrogram(hres)
`dendrogram' with 2 branches and 380 members total, at height 2514.513 

plot(hresd,leaflab="none") #<-error here.

#the plotted dendrogram is incomplete. The x axis is not drawn.

#The interested reader can download the

save(hresd,file="hres.rda")

#from the following loacation
www.molgen.mpg.de/~wolski/hres.rda


Yours
/E




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = Patched
 major = 2
 minor = 0.0
 year = 2004
 month = 10
 day = 04
 language = R

Windows XP Professional (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base

From Roger.Bivand at nhh.no  Thu Oct 21 13:55:22 2004
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Oct 21 13:55:35 2004
Subject: [Rd] C++ dev 
In-Reply-To: <001a01c4b75c$1c802190$e63631c1@Cysteine>
Message-ID: <Pine.LNX.4.44.0410211350300.4411-100000@reclus.nhh.no>

On Thu, 21 Oct 2004, Sandrine Coelho wrote:

> Hello,
> I wish to use R functions in a C++ programm.

> I have installed D COM Server but with this application i think it isn't
> possible to acces mouse event..., is it true?

> My second idea is to compile libraries which are used, but i haven't
> source code, and the libraries existing are compiled under unix, but i'd
> like have .lib and .dll

I think the second choice is feasible for your needs, avoiding the 
overhead of writing your own application with a COM client. An example is 
the ongoing work on embedding R into Terralib:

http://www.est.ufpr.br/myR

which you may find interesting to look at - they say:

"There are three ways to have access the functions of the R. These options 
have advantages and disadvantages. The first form is to call it from 
batch, that is a system call, and has as disadvantage to call the R all 
time that it has a statistic operation to be executed. The second way is 
using the Rserve, that is a server TCP/IP, and is necessary a connection 
for the net. The third option is using the dynamic library libR. The only 
disadvantage of this option is the implementation of the access interface. 
Therefore our work focus on the development of this interface.

The functions implemented are: to initialize R, to declare and to liberate 
variables inside, and to execute R functions. myR has proved steady and 
robust as an interface with R. Further development consists of using myR 
in a real program, the TerraLib/TerraView, a GIS free and open source 
software."

The source code (sorry, for Linux) is there, but I believe the developers 
have Windows experience too.

You may find some of the functions they use useful if this is connected to 
GEOXP.

Best wishes,

Roger

> Thanks for your informations
> Sandrine
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Breiviksveien 40, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 93 93
e-mail: Roger.Bivand@nhh.no

From Bernhard.Pfaff at drkw.com  Thu Oct 21 15:55:38 2004
From: Bernhard.Pfaff at drkw.com (Pfaff, Bernhard)
Date: Thu Oct 21 15:55:52 2004
Subject: [Rd] methods package: hasArg -- typo in description?
Message-ID: <29E0BC0C716A584582941615CF9FFB0902585C63@ibfftce107.de.ad.drkw.net>

Dear list member / core group member,

although I am not a native English speaking person, but it seems that in the
description passage of hasArg it should read:

"Returns TRUE if name corresponds to"
instead of
"Returns TRUE is name corresponds to"  
as currently (R 2.0.0 non-patched)

Best Regards,
Bernhard


Dr. Bernhard Pfaff
Global Debt Research - Index and Quantitative Strategy
Dresdner Kleinwort Wasserstein
Phone:	+49 (0)69 713 12273 
Mobile: 	na 
Fax:	+49 (0)69 713 19816

<http://www.drkwresearch.com>
Bloomberg: DRKW<GO>



--------------------------------------------------------------------------------
The information contained herein is confidential and is inte...{{dropped}}

From maechler at stat.math.ethz.ch  Thu Oct 21 16:12:47 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu Oct 21 16:13:01 2004
Subject: [Rd] error in plot.dendrogram (PR#7300)
In-Reply-To: <20041021114129.96D0310E92@slim.kubism.ku.dk>
References: <20041021114129.96D0310E92@slim.kubism.ku.dk>
Message-ID: <16759.50143.134730.910605@gargle.gargle.HOWL>

>>>>> "Eryk" == Eryk Wolski <wolski@molgen.mpg.de>
>>>>>     on Thu, 21 Oct 2004 13:41:29 +0200 (CEST) writes:

    Eryk> Hi,

    Eryk> hres <- hclust(smatr,method="single")
    Eryk> hresd<-as.dendrogram(hres)
    Eryk> as.dendrogram(hres)
    Eryk> `dendrogram' with 2 branches and 380 members total, at height 2514.513 
    Eryk> plot(hresd,leaflab="none") #<-error here.

definitely no error here.. maybe your graphic window is too
small or otherwise unable to show all the leaf labels?

    Eryk> #the plotted dendrogram is incomplete. The x axis is not drawn.

ha! and why should this be a bug????
Have you RTFHP and looked at its example??
There's never an x-axis in such a plot!

[You really don't want an x-axis overlayed over all the labels]

    Eryk> #The interested reader can download the

    Eryk> save(hresd,file="hres.rda")

    Eryk> #from the following loacation
    Eryk> www.molgen.mpg.de/~wolski/hres.rda

If you send a bug report (and please rather don't..),
it should be reproducible, i.e., I've just wasted my time for 

dFile <- "/u/maechler/R/MM/Pkg-ex/stats/wolski-hres.rda"
if(!file.exists(dFile))
    download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile)
load(dFile)
hresd
plot(hresd)

----

If you look at this plot I hope you rather see that "single" has
been an extremly unuseful clustering method for this data / dissimilarities,
and you'd rather tried other methods than to which for an
x-axis.

If you really want one (just to see that it doesn't make sense),
you can always add
    axis(1, fg = "red")

Martin

From wolski at molgen.mpg.de  Thu Oct 21 16:52:26 2004
From: wolski at molgen.mpg.de (Witold Eryk Wolski)
Date: Thu Oct 21 16:52:40 2004
Subject: [Rd] error in plot.dendrogram (PR#7300)
In-Reply-To: <16759.50143.134730.910605@gargle.gargle.HOWL>
References: <20041021114129.96D0310E92@slim.kubism.ku.dk>
	<16759.50143.134730.910605@gargle.gargle.HOWL>
Message-ID: <4177CD2A.30300@molgen.mpg.de>

Hi,

First. If you should not do it like you write here. You will get an 
error loading the rda file. It is a binary format.

Error in load(dFile) : input has been corrupted, with LF replaced by CR


Hence, you should specify mode="wb" for downloading binary formats.

Try this code.


file.remove("hres.rda")

dFile <- paste(getwd(),"/hres.rda",sep="")
if(!file.exists(dFile))
    download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile,mode="wb")
load(dFile)

hresd
plot(hresd)

In one think you are right, the X axis. But there is an ERROR.

On my Machine (see previous mail) not the complete dendrogram is drawn. 
It just draws the first 100 leavs out of 380 when I run
Second.  Even if I increase the size of the window maximally the 
dendrogram is not plotted.
And I checked it just again on a linux box. And it does not work there 
either.

How the dendrogram should look like you can figure out looking at the 
following.

hclustObj <- paste(getwd(),"/hress.rda",sep="")
if(!file.exists(dFile))
    download.file(url ="http://www.molgen.mpg.de/~wolski/hress.rda", dest= hclustObj ,mode="wb")
load(dFile)

hress
plot(hress)

hressd<-as.dendrogram(hress)
plot(hressd)


Third. I have expected this comment about if it is meaningfull or not.
 First for what I need it is it meaningfull. Second it is a valid 
dendrogram generated by as.dendrogram from a vaild hclust object. I do 
not need a plot routine which teaches me what she thinks is meaningfull 
or not.


/E





Martin Maechler wrote:

>>>>>>"Eryk" == Eryk Wolski <wolski@molgen.mpg.de>
>>>>>>    on Thu, 21 Oct 2004 13:41:29 +0200 (CEST) writes:
>>>>>>            
>>>>>>
>
>    Eryk> Hi,
>
>    Eryk> hres <- hclust(smatr,method="single")
>    Eryk> hresd<-as.dendrogram(hres)
>    Eryk> as.dendrogram(hres)
>    Eryk> `dendrogram' with 2 branches and 380 members total, at height 2514.513 
>    Eryk> plot(hresd,leaflab="none") #<-error here.
>
>definitely no error here.. maybe your graphic window is too
>small or otherwise unable to show all the leaf labels?
>
>    Eryk> #the plotted dendrogram is incomplete. The x axis is not drawn.
>
>ha! and why should this be a bug????
>Have you RTFHP and looked at its example??
>There's never an x-axis in such a plot!
>
>[You really don't want an x-axis overlayed over all the labels]
>
>    Eryk> #The interested reader can download the
>
>    Eryk> save(hresd,file="hres.rda")
>
>    Eryk> #from the following loacation
>    Eryk> www.molgen.mpg.de/~wolski/hres.rda
>
>If you send a bug report (and please rather don't..),
>it should be reproducible, i.e., I've just wasted my time for 
>
>dFile <- "/u/maechler/R/MM/Pkg-ex/stats/wolski-hres.rda"
>if(!file.exists(dFile))
>    download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile)
>load(dFile)
>hresd
>plot(hresd)
>
>----
>
>If you look at this plot I hope you rather see that "single" has
>been an extremly unuseful clustering method for this data / dissimilarities,
>and you'd rather tried other methods than to which for an
>x-axis.
>
>If you really want one (just to see that it doesn't make sense),
>you can always add
>    axis(1, fg = "red")
>
>Martin
>
>  
>


-- 
Dipl. bio-chem. Witold Eryk Wolski
MPI-Moleculare Genetic
Ihnestrasse 63-73 14195 Berlin
tel: 0049-30-83875219                 __("<    _
http://www.molgen.mpg.de/~wolski      \__/    'v'
http://r4proteomics.sourceforge.net    ||    /   \
mail: witek96@users.sourceforge.net    ^^     m m
      wolski@molgen.mpg.de

From wolski at molgen.mpg.de  Thu Oct 21 16:52:41 2004
From: wolski at molgen.mpg.de (wolski@molgen.mpg.de)
Date: Thu Oct 21 16:52:56 2004
Subject: [Rd] error in plot.dendrogram (PR#7300)
Message-ID: <20041021145241.A73EC10E9C@slim.kubism.ku.dk>

Hi,

First. If you should not do it like you write here. You will get an 
error loading the rda file. It is a binary format.

Error in load(dFile) : input has been corrupted, with LF replaced by CR


Hence, you should specify mode="wb" for downloading binary formats.

Try this code.


file.remove("hres.rda")

dFile <- paste(getwd(),"/hres.rda",sep="")
if(!file.exists(dFile))
    download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile,mode="wb")
load(dFile)

hresd
plot(hresd)

In one think you are right, the X axis. But there is an ERROR.

On my Machine (see previous mail) not the complete dendrogram is drawn. 
It just draws the first 100 leavs out of 380 when I run
Second.  Even if I increase the size of the window maximally the 
dendrogram is not plotted.
And I checked it just again on a linux box. And it does not work there 
either.

How the dendrogram should look like you can figure out looking at the 
following.

hclustObj <- paste(getwd(),"/hress.rda",sep="")
if(!file.exists(dFile))
    download.file(url ="http://www.molgen.mpg.de/~wolski/hress.rda", dest= hclustObj ,mode="wb")
load(dFile)

hress
plot(hress)

hressd<-as.dendrogram(hress)
plot(hressd)


Third. I have expected this comment about if it is meaningfull or not.
 First for what I need it is it meaningfull. Second it is a valid 
dendrogram generated by as.dendrogram from a vaild hclust object. I do 
not need a plot routine which teaches me what she thinks is meaningfull 
or not.


/E





Martin Maechler wrote:

>>>>>>"Eryk" == Eryk Wolski <wolski@molgen.mpg.de>
>>>>>>    on Thu, 21 Oct 2004 13:41:29 +0200 (CEST) writes:
>>>>>>            
>>>>>>
>
>    Eryk> Hi,
>
>    Eryk> hres <- hclust(smatr,method="single")
>    Eryk> hresd<-as.dendrogram(hres)
>    Eryk> as.dendrogram(hres)
>    Eryk> `dendrogram' with 2 branches and 380 members total, at height 2514.513 
>    Eryk> plot(hresd,leaflab="none") #<-error here.
>
>definitely no error here.. maybe your graphic window is too
>small or otherwise unable to show all the leaf labels?
>
>    Eryk> #the plotted dendrogram is incomplete. The x axis is not drawn.
>
>ha! and why should this be a bug????
>Have you RTFHP and looked at its example??
>There's never an x-axis in such a plot!
>
>[You really don't want an x-axis overlayed over all the labels]
>
>    Eryk> #The interested reader can download the
>
>    Eryk> save(hresd,file="hres.rda")
>
>    Eryk> #from the following loacation
>    Eryk> www.molgen.mpg.de/~wolski/hres.rda
>
>If you send a bug report (and please rather don't..),
>it should be reproducible, i.e., I've just wasted my time for 
>
>dFile <- "/u/maechler/R/MM/Pkg-ex/stats/wolski-hres.rda"
>if(!file.exists(dFile))
>    download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile)
>load(dFile)
>hresd
>plot(hresd)
>
>----
>
>If you look at this plot I hope you rather see that "single" has
>been an extremly unuseful clustering method for this data / dissimilarities,
>and you'd rather tried other methods than to which for an
>x-axis.
>
>If you really want one (just to see that it doesn't make sense),
>you can always add
>    axis(1, fg = "red")
>
>Martin
>
>  
>


-- 
Dipl. bio-chem. Witold Eryk Wolski
MPI-Moleculare Genetic
Ihnestrasse 63-73 14195 Berlin
tel: 0049-30-83875219                 __("<    _
http://www.molgen.mpg.de/~wolski      \__/    'v'
http://r4proteomics.sourceforge.net    ||    /   \
mail: witek96@users.sourceforge.net    ^^     m m
      wolski@molgen.mpg.de

From maechler at stat.math.ethz.ch  Thu Oct 21 18:12:40 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Oct 21 18:13:07 2004
Subject: [Rd] untrace() failing {when "methods" are active} (PR#7301)
Message-ID: <20041021161240.5C0B810E94@slim.kubism.ku.dk>

This happens in R-2.0.0 (or R-patched or R-devel of this night):

> trace(axis)
> untrace(axis)
Error in .assignOverBinding(what, newFun, whereF, global) : 
	Object "newFun" not found

> traceback()
6: .assignOverBinding(what, newFun, whereF, global)
5: methods::.TraceWithMethods(axis, where = <environment>, untrace = TRUE)
4: eval(expr, envir, enclos)
3: eval(expr, p)
2: eval.parent(call)
1: untrace(axis)

---
I've quickly tried to run R without "methods" and there,
untrace() doesn't fail {inside untrace(), the other if()-branch
is used}.

Martin

From maechler at stat.math.ethz.ch  Thu Oct 21 19:01:09 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Oct 21 19:01:26 2004
Subject: [Rd] error in plot.dendrogram (PR#7300)
Message-ID: <20041021170109.718A010E94@slim.kubism.ku.dk>

>>>>> "Witold" == Witold Eryk Wolski <wolski@molgen.mpg.de>
>>>>>     on Thu, 21 Oct 2004 16:52:26 +0200 writes:

    Witold> Hi,
    Witold> First. If you should not do it like you write here. You will get an 
    Witold> error loading the rda file. It is a binary format.

    Witold> Error in load(dFile) : input has been corrupted, with LF replaced by CR

no. I don't get such an error. 

    Witold> Hence, you should specify mode="wb" for downloading binary formats.

ok, at least to be on the safe side.
{Though I *never* had the need till now, and it's not the first
 time I download.file( "........./*.rda" ) .}

    Witold> Try this code.

    Witold> file.remove("hres.rda")

    Witold> dFile <- paste(getwd(),"/hres.rda",sep="")
    Witold> if(!file.exists(dFile))
    Witold> download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile,mode="wb")
    Witold> load(dFile)

    Witold> hresd
    Witold> plot(hresd)

    Witold> In one think you are right, the X axis. But there is an ERROR.

    Witold> On my Machine (see previous mail) not the complete dendrogram is drawn. 
    Witold> It just draws the first 100 leavs out of 380 when I run
    Witold> Second.  Even if I increase the size of the window maximally the 
    Witold> dendrogram is not plotted.
    Witold> And I checked it just again on a linux box. And it does not work there 
    Witold> either.

well, it does work on mine...
(as I said, I quickly saw how unuseful single-linkage is for
 this data/dissimilarity ..)

ok, ok, -- now I see why:

I "just knew" that for largish dendrograms one had to do
something like

  options(expressions = 10000)

before anything reasonable can happen.. ;-)

So, yes, I finally see your problem.

The real R bug there is that no error message is *printed*,
for me at least, but the recursive function calls to plotNode()
just bail out.

If you do 
   str(hresd)
you at least get an error message that helps you find out about
options(expressions = ..)...


    Witold> How the dendrogram should look like you can figure out looking at the 
    Witold> following.

    Witold> hclustObj <- paste(getwd(),"/hress.rda",sep="")
    Witold> if(!file.exists(dFile))
    Witold> download.file(url ="http://www.molgen.mpg.de/~wolski/hress.rda", dest= hclustObj ,mode="wb")
    Witold> load(dFile)

(well, that doesn't work since you have replaced "dFile" by "hclustObj"
 in some places but not all.
 [[[ why on earth do you call a file name an object ?]]]
)

    Witold> hress
    Witold> plot(hress)

    Witold> hressd<-as.dendrogram(hress)
    Witold> plot(hressd)


    Witold> Third. I have expected this comment about if it is meaningfull or not.
    Witold> First for what I need it is it meaningfull. Second it is a valid 
    Witold> dendrogram generated by as.dendrogram from a vaild hclust object. I do 
    Witold> not need a plot routine which teaches me what she thinks is meaningfull 
    Witold> or not.

agreed on that.

Note that originally in your bug report,
you were telling about a missing x-axis and that set off the
whole track since, as we now agree, it's not about an x-axis at all...




    Witold> Martin Maechler wrote:

    >>>>>>> "Eryk" == Eryk Wolski <wolski@molgen.mpg.de>
    >>>>>>> on Thu, 21 Oct 2004 13:41:29 +0200 (CEST) writes:
    >>>>>>> 
    >>>>>>> 
    >> 
    Eryk> Hi,
    >> 
    Eryk> hres <- hclust(smatr,method="single")
    Eryk> hresd<-as.dendrogram(hres)
    Eryk> as.dendrogram(hres)
    Eryk> `dendrogram' with 2 branches and 380 members total, at height 2514.513 
    Eryk> plot(hresd,leaflab="none") #<-error here.
    >> 
    >> definitely no error here.. maybe your graphic window is too
    >> small or otherwise unable to show all the leaf labels?
    >> 
    Eryk> #the plotted dendrogram is incomplete. The x axis is not drawn.
    >> 
    >> ha! and why should this be a bug????
    >> Have you RTFHP and looked at its example??
    >> There's never an x-axis in such a plot!
    >> 
    >> [You really don't want an x-axis overlayed over all the labels]
    >> 
    Eryk> #The interested reader can download the
    >> 
    Eryk> save(hresd,file="hres.rda")
    >> 
    Eryk> #from the following loacation
    Eryk> www.molgen.mpg.de/~wolski/hres.rda
    >> 
    >> If you send a bug report (and please rather don't..),
    >> it should be reproducible, i.e., I've just wasted my time for 
    >> 
    >> dFile <- "/u/maechler/R/MM/Pkg-ex/stats/wolski-hres.rda"
    >> if(!file.exists(dFile))
    >> download.file(url ="http://www.molgen.mpg.de/~wolski/hres.rda", dest= dFile)
    >> load(dFile)
    >> hresd
    >> plot(hresd)
    >> 
    >> ----
    >> 
    >> If you look at this plot I hope you rather see that "single" has
    >> been an extremly unuseful clustering method for this data / dissimilarities,
    >> and you'd rather tried other methods than to which for an
    >> x-axis.
    >> 
    >> If you really want one (just to see that it doesn't make sense),
    >> you can always add
    >> axis(1, fg = "red")
    >> 
    >> Martin
    >>

From terra at gnome.org  Thu Oct 21 22:14:44 2004
From: terra at gnome.org (terra@gnome.org)
Date: Thu Oct 21 22:14:58 2004
Subject: [Rd] pnorm problem (PR#7302)
Message-ID: <20041021201444.D19C510E96@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: 2
OS: Solaris(sparc)
Submission from: (NULL) (65.213.85.208)


(gdb) p pnorm(-100000.1, 0.0, 1.0, 0, 1)
$42 = NaN(0xfffffffffffff)

Expected: -0

(gdb) p pnorm(-100000.0, 0.0, 1.0, 0, 1)
$43 = -0

Good.

(I know this is not a typical usage.)

From ligges at statistik.uni-dortmund.de  Thu Oct 21 22:58:51 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu Oct 21 22:53:43 2004
Subject: [Rd] pnorm problem (PR#7302)
In-Reply-To: <20041021201444.D19C510E96@slim.kubism.ku.dk>
References: <20041021201444.D19C510E96@slim.kubism.ku.dk>
Message-ID: <4178230B.3060909@statistik.uni-dortmund.de>

terra@gnome.org wrote:
> Full_Name: Morten Welinder
> Version: 2
> OS: Solaris(sparc)
> Submission from: (NULL) (65.213.85.208)
> 

Works for me with R-2.0.0, Solaris 5.7 (UltraSparc), gcc-3.2.3, 32-bit.
So you have to specify compiler version, OS version, R version etc. much 
more precisely.

Uwe Ligges


> (gdb) p pnorm(-100000.1, 0.0, 1.0, 0, 1)
> $42 = NaN(0xfffffffffffff)
> 
> Expected: -0
> 
> (gdb) p pnorm(-100000.0, 0.0, 1.0, 0, 1)
> $43 = -0
> 
> Good.
> 
> (I know this is not a typical usage.)
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Thu Oct 21 23:08:32 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 21 23:08:47 2004
Subject: [Rd] pnorm problem (PR#7302)
In-Reply-To: <4178230B.3060909@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.44.0410212206330.15266-100000@gannet.stats>

On Thu, 21 Oct 2004, Uwe Ligges wrote:

> terra@gnome.org wrote:
> > Full_Name: Morten Welinder
> > Version: 2
> > OS: Solaris(sparc)
> > Submission from: (NULL) (65.213.85.208)
> > 
> 
> Works for me with R-2.0.0, Solaris 5.7 (UltraSparc), gcc-3.2.3, 32-bit.
> So you have to specify compiler version, OS version, R version etc. much 
> more precisely.

And for me under Solaris 8, gcc-3.4.2 or Sun cc Forte 7, 32- or 64-bit, 
with options as recommended in R-admin.

I suspect this is caused by unsafe compiler options.

> > (gdb) p pnorm(-100000.1, 0.0, 1.0, 0, 1)
> > $42 = NaN(0xfffffffffffff)
> > 
> > Expected: -0
> > 
> > (gdb) p pnorm(-100000.0, 0.0, 1.0, 0, 1)
> > $43 = -0
> > 
> > Good.
> > 
> > (I know this is not a typical usage.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From terra at gnome.org  Thu Oct 21 23:31:26 2004
From: terra at gnome.org (Morten Welinder)
Date: Thu Oct 21 23:31:38 2004
Subject: [Rd] pnorm problem (PR#7302)
In-Reply-To: <Pine.LNX.4.44.0410212206330.15266-100000@gannet.stats> (message
	from Prof Brian Ripley on Thu, 21 Oct 2004 22:08:32 +0100 (BST))
References: <Pine.LNX.4.44.0410212206330.15266-100000@gannet.stats>
Message-ID: <20041021213126.E1DD11422D5E@darter.rentec.com>


Mea culpa.

Chalk this up to incorrect mucking with the trunc function on my
side, a very old bug here.  Apologies.

Morten

From Weicht at mpimp-golm.mpg.de  Fri Oct 22 12:45:47 2004
From: Weicht at mpimp-golm.mpg.de (Daniel Weicht)
Date: Fri Oct 22 12:46:07 2004
Subject: [Rd] 64 Bit
Message-ID: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>

Hello everybody!

 

We at the Max Planck Society of Molecular Plant Physiologie want to know, if there is R version available for a 64 bit computer. If yes for which processor an amd or for a 64 bit Mac

 

Thanks a lot

 

Daniel

 

____________________________________________________

 

Daniel Weicht

 

Max Planck Institute of Molecular Plant Physiology

 

 Am Mhlenberg 1

 

14476 Golm, Germany 

 

Phone +49 331 567 8277

 

e-mail weicht@mpimp-golm.mpg.de <mailto:weicht@mpimp-golm.mpg.de> 

 

__________________________________________________

 


	[[alternative HTML version deleted]]

From erich.neuwirth at univie.ac.at  Fri Oct 22 12:54:05 2004
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Fri Oct 22 12:50:28 2004
Subject: problem with tcltk under Windows (was [Rd] RE: [R] one more Rcmdr
	problem)
In-Reply-To: <n9sqm0d4p0po7t0q59uk2suhg1357g3s9k@4ax.com>
References: <20041013150040.VYVM15612.tomts16-srv.bellnexxia.net@JohnDesktop8300>	<web-68482305@cgpsrv2.cis.mcmaster.ca>
	<n9sqm0d4p0po7t0q59uk2suhg1357g3s9k@4ax.com>
Message-ID: <4178E6CD.3040106@univie.ac.at>

There still seems to be a problem with RCommander and or Tcl/Tk
on Windows in R 1.9.1.
Windows XP Pro, SP2
I compiled the latest version of R-patched 2.0.0
and
Rcmd_0.9-12

Starting R with --sdi, loading Rcmdr,
and then from Rcmdr's menu, doing
Data->Data in packages->Read data set from an attached package
and trying to select a package in the field
Select package:
will not work, nothing will happen.
After canceling this dialog
entering a simple command
e.g.
1+1
in the Rcmd input field and pressing the Submit button
will produce a dialog box showing error messages referring to
an error responsible for not being able to load the selected package.

With R 1.9.1, things work as they should.


-- 
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

From ripley at stats.ox.ac.uk  Fri Oct 22 13:24:56 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 22 13:25:04 2004
Subject: [Rd] 64 Bit
In-Reply-To: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>
Message-ID: <Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>

Please read the R FAQ, which does cover this.  You need to distinguish 
64-bit OSes from 64-bit hardware (`computers').

R builds on least for the `native' Unix on Alpha, Sparc, HPPA and MIPS
processors (for the last several years each), AIX on PowerPC, Linux on
ia64 (Itanium), x86_64 (aka AMD64 and EM64T etc) and most of these. In
most cases it runs under 32-bit and 64-bit versions of the OSes on those
64-bit hardware.

R does not run under (beta) 64-bit Windows on x86_64 and we have no plans
to port it there, but it does run under 32-bit Windows on that processor.  
I am sure it will run on several 64-bit operating systems on Apple
Macintosh's so-called G5 hardware -- I believe we have seen a report that
includes an in-progress version of MacOS 10.4 -- and also several 32-bit
ones.

If you want a prebuilt version you are out of luck except for Debian Linux 
on Alpha or ia64, from a quick glance.

Many of us, including several of the core team, use 64-bit Linux on x86_64
as our main computer-intensive resource.

Please using single spacing, not *quadruple* spacing and a reasonable line
length, and do not include HTML as the posting guide asks.

BDR

On Fri, 22 Oct 2004, Daniel Weicht wrote:

> Hello everybody!
> 
>  

[next para wrapped by BDR]

> We at the Max Planck Society of Molecular Plant Physiologie want to
> know, if there is R version available for a 64 bit computer. If yes for
> which processor an amd or for a 64 bit Mac
> 
>  
> 
> Thanks a lot
> 
>  
> 
> Daniel
> 
>  
> 
> ____________________________________________________
> 
>  
> 
> Daniel Weicht
> 
>  
> 
> Max Planck Institute of Molecular Plant Physiology
> 
>  
> 
>  Am M?hlenberg 1
> 
>  
> 
> 14476 Golm, Germany 
> 
>  
> 
> Phone +49 331 567 8277
> 
>  
> 
> e-mail weicht@mpimp-golm.mpg.de <mailto:weicht@mpimp-golm.mpg.de> 
> 
>  
> 
> __________________________________________________
> 
>  
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Fri Oct 22 15:00:41 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct 22 15:04:22 2004
Subject: [Rd] 64 Bit
In-Reply-To: <Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
References: <Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
Message-ID: <x2lldyewli.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> R does not run under (beta) 64-bit Windows on x86_64 and we have no plans
> to port it there, but it does run under 32-bit Windows on that processor.  
> I am sure it will run on several 64-bit operating systems on Apple
> Macintosh's so-called G5 hardware -- I believe we have seen a report that
> includes an in-progress version of MacOS 10.4 -- and also several 32-bit
> ones.

Re. Windows, the issue is that we're using the mingw32 toolkit. If
there is ever a mingw64, I'm sure we'd attempt a port almost
immediately. 
 
> If you want a prebuilt version you are out of luck except for Debian Linux 
> on Alpha or ia64, from a quick glance.

Actually, I've rolled up an x86_64 RPM for SuSE 9.1 which should be en
route to CRAN. Detlef Steuer is awaiting delivery of a 64bit machine
and plan to maintain the SuSE version in the longer run. It's sitting
in http://www.biostat.ku.dk/~pd/R-suse9.1-x86_64 for now.

In general, it seems to be quite trivial to take a SPEC or SRPM for
the 32 bit version of a distribution and rebuild an RPM for 64 bits.

However, you might prefer to install from the source tarball anyway if
you want to take advantage of high-performance libraries (some of
which can not be redistributed). 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Fri Oct 22 15:49:34 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 22 15:49:39 2004
Subject: [Rd] 64 Bit
In-Reply-To: <x2lldyewli.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0410221438360.6010-100000@gannet.stats>

On 22 Oct 2004, Peter Dalgaard wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > R does not run under (beta) 64-bit Windows on x86_64 and we have no plans
> > to port it there, but it does run under 32-bit Windows on that processor.  
> > I am sure it will run on several 64-bit operating systems on Apple
> > Macintosh's so-called G5 hardware -- I believe we have seen a report that
> > includes an in-progress version of MacOS 10.4 -- and also several 32-bit
> > ones.
> 
> Re. Windows, the issue is that we're using the mingw32 toolkit. If
> there is ever a mingw64, I'm sure we'd attempt a port almost
> immediately. 

Not that clear.  Under Win64, long is still 32bits so quite a bit of work
will required to take advantage of a 64-bit space (starting with surgery
on the memory manager).  So we would need

	Win64 (not released yet)
	mingw64 (not promised, AFAIK)
	Suitable hardware
	A volunteer with all of the above and 
	suitable C programming skills.

I was quite serious about `no plans': last time this was raised neither 
Duncan Murdoch nor I had any such plans.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jfox at mcmaster.ca  Fri Oct 22 15:54:19 2004
From: jfox at mcmaster.ca (John Fox)
Date: Fri Oct 22 15:54:53 2004
Subject: problem with tcltk under Windows (was [Rd] RE: [R] one more
	Rcmdrproblem)
In-Reply-To: <4178E6CD.3040106@univie.ac.at>
Message-ID: <20041022135418.PPQL1536.tomts25-srv.bellnexxia.net@JohnDesktop8300>

Dear Erich,

I'm afraid that this time I can't duplicate the problem on a Windows XP Pro
system. To verify that reading data from packages works, I downloaded (but
didn't compile myself) the latest R-patched 2.0.0 from CRAN, dated Oct. 21.
I downloaded from my web site the compiled Windows binary of Rcmdr 0.9-12
(i.e., the version in development). Everything appears to work fine. I
repeated this on another Win XP Pro machine and that worked fine too.

The error message pops up as a consequence of the manner in which the Rcmdr
intercepts errors. It might help to know what the content of that error
message was. (I'm not sure why the Rcmdr would have tried to *load* a
package; presumably it was looking for data sets in packages already loaded.
Perhaps this is a clue to a bug.)

Recall that the last time a problem occurred here, it reflected a more
general tcltk problem with R 2.0.0. That was fixed in R-patched, so you may
have uncovered an independent problem.

I'd like to get to the bottom of this since I want to submit version 0.9-12
of the Rcmdr package to CRAN (indeed, intended to do that today, since I've
finished my testing), but want first to make sure that it's working properly
with R 2.0.0.

Regards,
 John

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario
Canada L8S 4M4
905-525-9140x23604
http://socserv.mcmaster.ca/jfox 
-------------------------------- 

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Erich Neuwirth
> Sent: Friday, October 22, 2004 5:54 AM
> To: Duncan Murdoch; John Fox; r-devel@stat.math.ethz.ch
> Subject: Re: problem with tcltk under Windows (was [Rd] RE: 
> [R] one more Rcmdrproblem)
> 
> There still seems to be a problem with RCommander and or 
> Tcl/Tk on Windows in R 1.9.1.
> Windows XP Pro, SP2
> I compiled the latest version of R-patched 2.0.0 and
> Rcmd_0.9-12
> 
> Starting R with --sdi, loading Rcmdr,
> and then from Rcmdr's menu, doing
> Data->Data in packages->Read data set from an attached package
> and trying to select a package in the field Select package:
> will not work, nothing will happen.
> After canceling this dialog
> entering a simple command
> e.g.
> 1+1
> in the Rcmd input field and pressing the Submit button will 
> produce a dialog box showing error messages referring to an 
> error responsible for not being able to load the selected package.
> 
> With R 1.9.1, things work as they should.
> 
> 
> --
> Erich Neuwirth, Computer Supported Didactics Working Group 
> Visit our SunSITE at http://sunsite.univie.ac.at
> Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From p.dalgaard at biostat.ku.dk  Fri Oct 22 16:31:09 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct 22 16:34:43 2004
Subject: [Rd] 64 Bit
In-Reply-To: <Pine.LNX.4.44.0410221438360.6010-100000@gannet.stats>
References: <Pine.LNX.4.44.0410221438360.6010-100000@gannet.stats>
Message-ID: <x2hdomeseq.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 22 Oct 2004, Peter Dalgaard wrote:
> 
> > Re. Windows, the issue is that we're using the mingw32 toolkit. If
> > there is ever a mingw64, I'm sure we'd attempt a port almost
> > immediately. 
> 
> Not that clear.  Under Win64, long is still 32bits so quite a bit of work
> will required to take advantage of a 64-bit space (starting with surgery
> on the memory manager).  So we would need
> 
> 	Win64 (not released yet)
> 	mingw64 (not promised, AFAIK)
> 	Suitable hardware
> 	A volunteer with all of the above and 
> 	suitable C programming skills.
> 
> I was quite serious about `no plans': last time this was raised neither 
> Duncan Murdoch nor I had any such plans.

No real disagreement here. I was just underlining the fact that we
need some pretty crucial infrastructure in order to even comtemplate a
port. So if people want R for Win64, the first thing to do is to lobby
for someone to create the tools. 

Re. mingw64, the exact quote from the mingw FAQ is: "The project's
name changed from mingw32 to MinGW is to prevent the implication that
MinGW will only works on 32 bit systems (as 64 and higher bit machines
become more common, MinGW will evolve to work with them)", which I'd
say is sort of a promise. No code has ever materialised, though. 

My gut feeling is still that *if* the tools (and the OS) were there,
we'd consider a port, but tea leaves can be read in multiple ways...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From edd at debian.org  Fri Oct 22 16:45:05 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri Oct 22 16:45:12 2004
Subject: OT: Debian/Ubuntu on amd64 (Re: [Rd] 64 Bit)
In-Reply-To: <Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
References: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>
	<Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
Message-ID: <20041022144503.GA18418@sonny.eddelbuettel.com>

On Fri, Oct 22, 2004 at 12:24:56PM +0100, Prof Brian Ripley wrote:
> If you want a prebuilt version you are out of luck except for Debian Linux 
> on Alpha or ia64, from a quick glance.

amd64 as well. It is not "fully official" but almost, see
http://www.debian.org/ports/amd64/

I presume you could install using either a beta of the new Debian installer
or a (free) installer cdrom from the brand new Ubuntu Linux distribution
(see http://www.ubuntulinux.org), a fresh derivative backed by Mark
Shuttleworth . I heard good things about it -- cf yesterday's Linux Weekly
News, subscription required, where the following was posted as a reader
comment on (presumably both amd64 and i386):

   Ubuntu is fantastic.
  
   I've been running the AMD64 distribution for a while, and it's stable and
   instantly useful. I just installed it on my Thinkpad T-41 and:
   * the ipw2100 wireless card (GPL driver, binary hotplug loaded firmware)
     worked without any config, and even during the _install_ process.
   * it autoconfigured X wonderfully, GL worked, even to the point of noticing
     I have a synaptics touchpad and setting it up so that scrolling, tap-click,
     tap-drag, etc works.
   * sound just worked, etc.

   Not only that, but the base install is a _fully working_ desktop - every
   application you'll generally want to do work is there. It's very convincing.
   I'm a fan of Debian, but this is just so much less pain with all the
   advantages of a plain Debian system.

After the Ubuntu installation, it should be just a matter of pointing
/etc/apt/sources.list to one of the amd64 archives, and 

   $ apt-get update; apt-get install r-base r-recommended
   
should get you there.

Note that this whole post is made out of thin air as my personal computing
budget has not yet made an allowance for amd64 hardware. Donations are
always welcome (only sort-of kidding here ...)

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From ripley at stats.ox.ac.uk  Fri Oct 22 17:00:12 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri Oct 22 17:00:15 2004
Subject: [Rd] library.dynam() & .dynLibs() do not work as documented
	(PR#7304)
Message-ID: <20041022150012.EB93010EA2@slim.kubism.ku.dk>

nor in any sensible way we could document.

In R 2.0.0 (and current R-patched and R-devel):

> X11()
> library.dynam()
                                                Filename Dynamic.Lookup
base                                                base          FALSE
stats       /usr/local/lib/R/library/stats/libs/stats.so           TRUE
methods /usr/local/lib/R/library/methods/libs/methods.so           TRUE
R_X11                  /usr/local/lib/R/modules/R_X11.so           TRUE

whereas 1.9.1 gives

> library.dynam()
[1] "stats"   "methods"

and the documentation says

     If 'chname' is not specified, 'library.dynam' returns a character
     vector with the names of packages which have used it in the
     current R session to load shared libraries. This vector is
     returned as 'invisible', unless  the 'chname' argument is missing.

which is clearly no longer true.  I don't see why we want loaded modules 
in there that have nothing to do with packages, or even non-modules.

At that point .dynLibs() gave

$base
DLL name: base
Filename: base
Dynamic lookup: FALSE

$stats
DLL name: stats
Filename: /usr/local/lib/R/library/stats/libs/stats.so
Dynamic lookup: TRUE

[[3]]
[1] "methods"

which seems useless for

     '.dynLibs' is used for getting or setting the packages that have
     loaded shared libraries (using 'library.dynam').

One command later and we have

> library(MASS)
> .dynLibs()
$base
DLL name: base
Filename: base
Dynamic lookup: FALSE

$stats
DLL name: stats
Filename: /usr/local/lib/R/library/stats/libs/stats.so
Dynamic lookup: TRUE

$methods
DLL name: methods
Filename: /usr/local/lib/R/library/methods/libs/methods.so
Dynamic lookup: TRUE

$R_X11
DLL name: R_X11
Filename: /usr/local/lib/R/modules/R_X11.so
Dynamic lookup: TRUE

[[5]]
[1] "MASS"

!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From duncan at wald.ucdavis.edu  Fri Oct 22 18:18:08 2004
From: duncan at wald.ucdavis.edu (duncan@wald.ucdavis.edu)
Date: Fri Oct 22 18:18:11 2004
Subject: [Rd] Re: library.dynam() & .dynLibs() do not work as documented
	(PR#7305)
Message-ID: <20041022161808.C8BDA10E94@slim.kubism.ku.dk>


--d6Gm4EdcadzBjdND
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Prof Brian Ripley wrote:
> nor in any sensible way we could document.
>=20
> In R 2.0.0 (and current R-patched and R-devel):
>=20
> > X11()
> > library.dynam()
>                                                 Filename Dynamic.Lookup
> base                                                base          FALSE
> stats       /usr/local/lib/R/library/stats/libs/stats.so           TRUE
> methods /usr/local/lib/R/library/methods/libs/methods.so           TRUE
> R_X11                  /usr/local/lib/R/modules/R_X11.so           TRUE
>=20
> whereas 1.9.1 gives
>=20
> > library.dynam()
> [1] "stats"   "methods"
>=20
> and the documentation says
>=20
>      If 'chname' is not specified, 'library.dynam' returns a character
>      vector with the names of packages which have used it in the
>      current R session to load shared libraries. This vector is
>      returned as 'invisible', unless  the 'chname' argument is missing.
>=20
> which is clearly no longer true.  I don't see why we want loaded modules=
=20
> in there that have nothing to do with packages, or even non-modules.


Before we try to simply match documentation which was written for
a simpler semantic,  let's think about what we actually require
in the context of versioned packages and where library.dynam()
is currently being used and so what is broken.

Returning a character vector with the names of packages which have used it
does not permit version information to be included (unless they are in the
package name).=20

For quite some time, I have wanted to move to package objects=20
and to return such self-describing objects which contain all
their own details such as name, version, DLL, etc.  Using names,
just   as using numbers of graphics devices, is a global mechanism
that leads to clumsy code.=20

We can make the code match the documentation, but only if
we still want what the documentation states.
When we introduce multiple evaluators in the future,
lots of things will "challenge" the current semantics
and many of them will be desirable. One of these potential changes
is the use of multiple concurrent versions of a package.

Comments, before we fix things?=20

 D.=20

>=20
> At that point .dynLibs() gave
>=20
> $base
> DLL name: base
> Filename: base
> Dynamic lookup: FALSE
>=20
> $stats
> DLL name: stats
> Filename: /usr/local/lib/R/library/stats/libs/stats.so
> Dynamic lookup: TRUE
>=20
> [[3]]
> [1] "methods"
>=20
> which seems useless for
>=20
>      '.dynLibs' is used for getting or setting the packages that have
>      loaded shared libraries (using 'library.dynam').
>=20
> One command later and we have
>=20
> > library(MASS)
> > .dynLibs()
> $base
> DLL name: base
> Filename: base
> Dynamic lookup: FALSE
>=20
> $stats
> DLL name: stats
> Filename: /usr/local/lib/R/library/stats/libs/stats.so
> Dynamic lookup: TRUE
>=20
> $methods
> DLL name: methods
> Filename: /usr/local/lib/R/library/methods/libs/methods.so
> Dynamic lookup: TRUE
>=20
> $R_X11
> DLL name: R_X11
> Filename: /usr/local/lib/R/modules/R_X11.so
> Dynamic lookup: TRUE
>=20
> [[5]]
> [1] "MASS"
>=20
> !
>=20
> --=20
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--=20
Duncan Temple Lang                duncan@wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA




--d6Gm4EdcadzBjdND
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (OSF1)

iD8DBQFBeTK29p/Jzwa2QP4RAkQ6AJwO+/Rk6+yPx5GRXwn+aJuTJnY3DACfa0Ze
+x+pi8+sTc006byhX2jlY5o=
=B3bf
-----END PGP SIGNATURE-----

--d6Gm4EdcadzBjdND--

From ripley at stats.ox.ac.uk  Fri Oct 22 18:30:13 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 22 18:30:17 2004
Subject: [Rd] Re: library.dynam() & .dynLibs() do not work as documented
In-Reply-To: <20041022161758.GA19166@wald.ucdavis.edu>
Message-ID: <Pine.LNX.4.44.0410221720520.6592-100000@gannet.stats>

Duncan,

I don't know what we want, but it is not a simple matter of documenting
what .dynLibs currently does.  What I see as bugs are

1) the inconsistent names and types of the components returned by 
   .dynLibs().
2) the inconsistent inclusion or not of R_X11 in the list returned by 
   .dynLibs().
3) the inclusion of static info (base) by library.dynam().
4) including loadable modules such as R_X11.
5) the documentation needs updating.

Having .dynLibs() give a list of DLLinfo objects about DLLs loaded by 
packages, and summarizing those in library.dynam() is my current best 
suggestion.  That implies leaving out base and R_X11.

I intended

> > nor in any sensible way we could document.

to indicate that the current documentation was not a good option.

Brian

On Fri, 22 Oct 2004, Duncan Temple Lang wrote:

> Prof Brian Ripley wrote:
> > nor in any sensible way we could document.
> > 
> > In R 2.0.0 (and current R-patched and R-devel):
> > 
> > > X11()
> > > library.dynam()
> >                                                 Filename Dynamic.Lookup
> > base                                                base          FALSE
> > stats       /usr/local/lib/R/library/stats/libs/stats.so           TRUE
> > methods /usr/local/lib/R/library/methods/libs/methods.so           TRUE
> > R_X11                  /usr/local/lib/R/modules/R_X11.so           TRUE
> > 
> > whereas 1.9.1 gives
> > 
> > > library.dynam()
> > [1] "stats"   "methods"
> > 
> > and the documentation says
> > 
> >      If 'chname' is not specified, 'library.dynam' returns a character
> >      vector with the names of packages which have used it in the
> >      current R session to load shared libraries. This vector is
> >      returned as 'invisible', unless  the 'chname' argument is missing.
> > 
> > which is clearly no longer true.  I don't see why we want loaded modules 
> > in there that have nothing to do with packages, or even non-modules.
> 
> 
> Before we try to simply match documentation which was written for
> a simpler semantic,  let's think about what we actually require
> in the context of versioned packages and where library.dynam()
> is currently being used and so what is broken.
> 
> Returning a character vector with the names of packages which have used it
> does not permit version information to be included (unless they are in the
> package name). 
> 
> For quite some time, I have wanted to move to package objects 
> and to return such self-describing objects which contain all
> their own details such as name, version, DLL, etc.  Using names,
> just   as using numbers of graphics devices, is a global mechanism
> that leads to clumsy code. 
> 
> We can make the code match the documentation, but only if
> we still want what the documentation states.
> When we introduce multiple evaluators in the future,
> lots of things will "challenge" the current semantics
> and many of them will be desirable. One of these potential changes
> is the use of multiple concurrent versions of a package.
> 
> Comments, before we fix things? 
> 
>  D. 
> 
> > 
> > At that point .dynLibs() gave
> > 
> > $base
> > DLL name: base
> > Filename: base
> > Dynamic lookup: FALSE
> > 
> > $stats
> > DLL name: stats
> > Filename: /usr/local/lib/R/library/stats/libs/stats.so
> > Dynamic lookup: TRUE
> > 
> > [[3]]
> > [1] "methods"
> > 
> > which seems useless for
> > 
> >      '.dynLibs' is used for getting or setting the packages that have
> >      loaded shared libraries (using 'library.dynam').
> > 
> > One command later and we have
> > 
> > > library(MASS)
> > > .dynLibs()
> > $base
> > DLL name: base
> > Filename: base
> > Dynamic lookup: FALSE
> > 
> > $stats
> > DLL name: stats
> > Filename: /usr/local/lib/R/library/stats/libs/stats.so
> > Dynamic lookup: TRUE
> > 
> > $methods
> > DLL name: methods
> > Filename: /usr/local/lib/R/library/methods/libs/methods.so
> > Dynamic lookup: TRUE
> > 
> > $R_X11
> > DLL name: R_X11
> > Filename: /usr/local/lib/R/modules/R_X11.so
> > Dynamic lookup: TRUE
> > 
> > [[5]]
> > [1] "MASS"
> > 
> > !
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Fri Oct 22 18:37:56 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri Oct 22 18:38:03 2004
Subject: OT: Debian/Ubuntu on amd64 (Re: [Rd] 64 Bit)
In-Reply-To: <20041022144503.GA18418@sonny.eddelbuettel.com>
References: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>
	<Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
	<20041022144503.GA18418@sonny.eddelbuettel.com>
Message-ID: <16761.14180.196078.597462@gargle.gargle.HOWL>

>>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org>
>>>>>     on Fri, 22 Oct 2004 09:45:05 -0500 writes:

    Dirk> On Fri, Oct 22, 2004 at 12:24:56PM +0100, Prof Brian
    Dirk> Ripley wrote:
    >> If you want a prebuilt version you are out of luck except
    >> for Debian Linux on Alpha or ia64, from a quick glance.

    Dirk> amd64 as well. It is not "fully official" but almost,
    Dirk> see http://www.debian.org/ports/amd64/

yes, indeed.
We have one compute server (dual opteron) that runs a nice
64-bit Debian {"sid" aka "unstable" though} and for which I've used
'aptitude' (the "new" kid on the block replacement for 'apt-get')
to install r-base-recommended (and more) -- all prebuilt
[Of course I still mainly work with hand-compiled versions of R].

    Dirk> <......>
    Dirk> <......>

(that note about "Ubuntu" was very interesting to read;  thanks Dirk!)

Martin

From statho3 at web.de  Fri Oct 22 18:47:47 2004
From: statho3 at web.de (Thomas Stabla)
Date: Fri Oct 22 18:45:59 2004
Subject: [Rd] (no subject)
Message-ID: <Pine.LNX.4.58.0410221847350.12383@spock.vulcan>

From daniele.medri at libero.it  Fri Oct 22 18:50:22 2004
From: daniele.medri at libero.it (Daniele Medri)
Date: Fri Oct 22 18:50:30 2004
Subject: OT: Debian/Ubuntu on amd64 (Re: [Rd] 64 Bit)
In-Reply-To: <20041022144503.GA18418@sonny.eddelbuettel.com>
References: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>
	<Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
	<20041022144503.GA18418@sonny.eddelbuettel.com>
Message-ID: <200410221850.22355.daniele.medri@libero.it>

Alle 16:45, venerd? 22 ottobre 2004, Dirk Eddelbuettel ha scritto:
>    Ubuntu is fantastic.

yeah, really cool!

If everyone wanna try a linux distro (hey! a serious linux distro) need to 
test Ubuntu. Latest kernel with almost necessary features for 
laptop/desktop.. and R could be easy downloaded from the net with the Debian 
spirit of apt-get! 

-- 
Daniele Medri - http://www.medri.org

From edd at debian.org  Fri Oct 22 18:52:37 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri Oct 22 18:52:48 2004
Subject: OT: Debian/Ubuntu on amd64 (Re: [Rd] 64 Bit)
In-Reply-To: <16761.14180.196078.597462@gargle.gargle.HOWL>
References: <1F5B2A5E6712B94DA65EA9EBF0A1A3820B0EB8@EMAIL.mpimp-golm.mpg.de>
	<Pine.LNX.4.44.0410221205150.4795-100000@gannet.stats>
	<20041022144503.GA18418@sonny.eddelbuettel.com>
	<16761.14180.196078.597462@gargle.gargle.HOWL>
Message-ID: <20041022165237.GA19660@sonny.eddelbuettel.com>

On Fri, Oct 22, 2004 at 06:37:56PM +0200, Martin Maechler wrote:
> >>>>> "Dirk" == Dirk Eddelbuettel <edd@debian.org>
> >>>>>     on Fri, 22 Oct 2004 09:45:05 -0500 writes:
> 
>     Dirk> On Fri, Oct 22, 2004 at 12:24:56PM +0100, Prof Brian
>     Dirk> Ripley wrote:
>     >> If you want a prebuilt version you are out of luck except
>     >> for Debian Linux on Alpha or ia64, from a quick glance.
> 
>     Dirk> amd64 as well. It is not "fully official" but almost,
>     Dirk> see http://www.debian.org/ports/amd64/
> 
> yes, indeed.
> We have one compute server (dual opteron) that runs a nice
> 64-bit Debian {"sid" aka "unstable" though} and for which I've used
> 'aptitude' (the "new" kid on the block replacement for 'apt-get').

It is not a replacement, just simply one of number of different (G)UIs to
the apt/dpkg/dselect functionality and APIs. There are quite a few others
out there (synaptic, feta, wajig, gnome-apt, kpackages, ...)

> to install r-base-recommended (and more) -- all prebuilt
> [Of course I still mainly work with hand-compiled versions of R].

One day I hope to overhaul the packaging such that we can allow for
r-release and r-devel to be installed in parallel.  Combined with scripted
builds of r-devel, this would make for a better testing environment.
 
>     Dirk> <......>
>     Dirk> <......>
> 
> (that note about "Ubuntu" was very interesting to read;  thanks Dirk!)

Pleasure, I am intrigued myself. 

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From statho3 at web.de  Fri Oct 22 19:05:30 2004
From: statho3 at web.de (Thomas Stabla)
Date: Fri Oct 22 19:03:45 2004
Subject: [Rd] install.packages question / suggestion
Message-ID: <Pine.LNX.4.58.0410221848210.12388@spock.vulcan>

Hello,

when trying to write an R-file, which automatically installs and updates a 
given list of packages, I had two problems with install.packages()

1) install.packages("<package>") will install <package>, no matter if 
   <package> has already been installed.
2) the readline() at the end of install.packages, which asks the user, if 
   the downloaded files should be deleted, makes it difficult to 
   delete packages automatically after installation (I must admit, I'm not 
   quite familiar with R CMD BATCH)


Question/Request:
Is the behaviour in 1) intended?
2) I'd like to have another bool argument, which determines, if the 
downloaded files should be deleted.

Suggestion:
To change 1) I've made a small change to 

  R-2.0.0/src/library/utils/unix/install.packages.R

adding one line and moving another one. Here's the diff output


--- install.packages.R  2004-10-02 19:07:34.000000000 +0200
+++ install.packages.modified.R 2004-10-22 18:22:01.275986160 +0200
@@ -25,9 +25,9 @@
     }
     if(is.null(available))
         available <- CRAN.packages(contriburl = contriburl, method = 
method)
+    have <- .packages(all.available = TRUE)
     if(dependencies) { # check for dependencies, recursively
         p0 <- p1 <- unique(pkgs) # this is ok, as 1 lib only
-        have <- .packages(all.available = TRUE)
         repeat {
             if(any(miss <- ! p1 %in% row.names(available))) {
                 cat("dependencies ", paste(sQuote(p1[miss]), sep=", "),
@@ -54,6 +54,8 @@
         }
     }

+    pkgs <- pkgs[ ! pkgs %in% have ]
+
     foundpkgs <- download.packages(pkgs, destdir = tmpd, available = available,
                                    contriburl = contriburl, method = method)




Best Regards,
Thomas Stabla
-------------- next part --------------
--- install.packages.R	2004-10-02 19:07:34.000000000 +0200
+++ install.packages.modified.R	2004-10-22 18:22:01.275986160 +0200
@@ -25,9 +25,9 @@
     }
     if(is.null(available))
         available <- CRAN.packages(contriburl = contriburl, method = method)
+    have <- .packages(all.available = TRUE)
     if(dependencies) { # check for dependencies, recursively
         p0 <- p1 <- unique(pkgs) # this is ok, as 1 lib only
-        have <- .packages(all.available = TRUE)
         repeat {
             if(any(miss <- ! p1 %in% row.names(available))) {
                 cat("dependencies ", paste(sQuote(p1[miss]), sep=", "),
@@ -54,6 +54,8 @@
         }
     }
 
+    pkgs <- pkgs[ ! pkgs %in% have ]
+    
     foundpkgs <- download.packages(pkgs, destdir = tmpd, available = available,
                                    contriburl = contriburl, method = method)
 
From ripley at stats.ox.ac.uk  Fri Oct 22 19:19:04 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 22 19:19:07 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.58.0410221848210.12388@spock.vulcan>
Message-ID: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>

On Fri, 22 Oct 2004, Thomas Stabla wrote:

> when trying to write an R-file, which automatically installs and updates a 
> given list of packages, 

Many of us already have scripts of that sort.

> I had two problems with install.packages()
> 
> 1) install.packages("<package>") will install <package>, no matter if 
>    <package> has already been installed.
> 2) the readline() at the end of install.packages, which asks the user, if 
>    the downloaded files should be deleted, makes it difficult to 
>    delete packages automatically after installation (I must admit, I'm not 
>    quite familiar with R CMD BATCH)
> 
> 
> Question/Request:
> Is the behaviour in 1) intended?

Most definitely.  I might want to install it in another library, or to 
reinstall it under the current version of R.  It is very easy to tailor 
the input to meet your needs, as update.packages() does.

There is install.packages() to help you here.


> 2) I'd like to have another bool argument, which determines, if the 
> downloaded files should be deleted.

What do you think 'destdir' is there for?  If set, this check is skipped.
You can set it to tempdir() if you like, which is wiped at the end of the 
session.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Oct 22 19:22:30 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 22 19:22:33 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0410221822010.19140-100000@gannet.stats>

On Fri, 22 Oct 2004, Prof Brian Ripley wrote:

> On Fri, 22 Oct 2004, Thomas Stabla wrote:
> 
> > when trying to write an R-file, which automatically installs and updates a 
> > given list of packages, 
> 
> Many of us already have scripts of that sort.
> 
> > I had two problems with install.packages()
> > 
> > 1) install.packages("<package>") will install <package>, no matter if 
> >    <package> has already been installed.
> > 2) the readline() at the end of install.packages, which asks the user, if 
> >    the downloaded files should be deleted, makes it difficult to 
> >    delete packages automatically after installation (I must admit, I'm not 
> >    quite familiar with R CMD BATCH)
> > 
> > 
> > Question/Request:
> > Is the behaviour in 1) intended?
> 
> Most definitely.  I might want to install it in another library, or to 
> reinstall it under the current version of R.  It is very easy to tailor 
> the input to meet your needs, as update.packages() does.
> 
> There is install.packages() to help you here.

oops, installed.packages().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Fri Oct 22 19:27:35 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Oct 22 19:27:31 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.58.0410221848210.12388@spock.vulcan>
References: <Pine.LNX.4.58.0410221848210.12388@spock.vulcan>
Message-ID: <41794307.9010409@statistik.uni-dortmund.de>

Thomas Stabla wrote:

> Hello,
> 
> when trying to write an R-file, which automatically installs and updates a 
> given list of packages, I had two problems with install.packages()
> 
> 1) install.packages("<package>") will install <package>, no matter if 
>    <package> has already been installed.
> 2) the readline() at the end of install.packages, which asks the user, if 
>    the downloaded files should be deleted, makes it difficult to 
>    delete packages automatically after installation (I must admit, I'm not 
>    quite familiar with R CMD BATCH)
> 
> 
> Question/Request:
> Is the behaviour in 1) intended?

Yes, if a former installation is broken, we want to be able to 
reinstall, of course.
If you don't want, just check (e.g. via installed.packages()) whether 
you already got it - or use update.packages().


> 2) I'd like to have another bool argument, which determines, if the 
> downloaded files should be deleted.

This might be useful. Are you going to provide a patch?

Uwe Ligges



> Suggestion:
> To change 1) I've made a small change to 
> 
>   R-2.0.0/src/library/utils/unix/install.packages.R
> 
> adding one line and moving another one. Here's the diff output
> 
> 
> --- install.packages.R  2004-10-02 19:07:34.000000000 +0200
> +++ install.packages.modified.R 2004-10-22 18:22:01.275986160 +0200
> @@ -25,9 +25,9 @@
>      }
>      if(is.null(available))
>          available <- CRAN.packages(contriburl = contriburl, method = 
> method)
> +    have <- .packages(all.available = TRUE)
>      if(dependencies) { # check for dependencies, recursively
>          p0 <- p1 <- unique(pkgs) # this is ok, as 1 lib only
> -        have <- .packages(all.available = TRUE)
>          repeat {
>              if(any(miss <- ! p1 %in% row.names(available))) {
>                  cat("dependencies ", paste(sQuote(p1[miss]), sep=", "),
> @@ -54,6 +54,8 @@
>          }
>      }
> 
> +    pkgs <- pkgs[ ! pkgs %in% have ]
> +
>      foundpkgs <- download.packages(pkgs, destdir = tmpd, available = available,
>                                     contriburl = contriburl, method = method)
> 
> 
> 
> 
> Best Regards,
> Thomas Stabla
> 
> 
> ------------------------------------------------------------------------
> 
> --- install.packages.R	2004-10-02 19:07:34.000000000 +0200
> +++ install.packages.modified.R	2004-10-22 18:22:01.275986160 +0200
> @@ -25,9 +25,9 @@
>      }
>      if(is.null(available))
>          available <- CRAN.packages(contriburl = contriburl, method = method)
> +    have <- .packages(all.available = TRUE)
>      if(dependencies) { # check for dependencies, recursively
>          p0 <- p1 <- unique(pkgs) # this is ok, as 1 lib only
> -        have <- .packages(all.available = TRUE)
>          repeat {
>              if(any(miss <- ! p1 %in% row.names(available))) {
>                  cat("dependencies ", paste(sQuote(p1[miss]), sep=", "),
> @@ -54,6 +54,8 @@
>          }
>      }
>  
> +    pkgs <- pkgs[ ! pkgs %in% have ]
> +    
>      foundpkgs <- download.packages(pkgs, destdir = tmpd, available = available,
>                                     contriburl = contriburl, method = method)
>  
> 
> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

From ligges at statistik.uni-dortmund.de  Fri Oct 22 19:29:19 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Oct 22 19:29:13 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
References: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
Message-ID: <4179436F.7080008@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> On Fri, 22 Oct 2004, Thomas Stabla wrote:
> 
> 
>>when trying to write an R-file, which automatically installs and updates a 
>>given list of packages, 
> 
> 
> Many of us already have scripts of that sort.
> 
> 
>>I had two problems with install.packages()
>>
>>1) install.packages("<package>") will install <package>, no matter if 
>>   <package> has already been installed.
>>2) the readline() at the end of install.packages, which asks the user, if 
>>   the downloaded files should be deleted, makes it difficult to 
>>   delete packages automatically after installation (I must admit, I'm not 
>>   quite familiar with R CMD BATCH)
>>
>>
>>Question/Request:
>>Is the behaviour in 1) intended?
> 
> 
> Most definitely.  I might want to install it in another library, or to 
> reinstall it under the current version of R.  It is very easy to tailor 
> the input to meet your needs, as update.packages() does.
> 
> There is install.packages() to help you here.
> 
> 
> 
>>2) I'd like to have another bool argument, which determines, if the 
>>downloaded files should be deleted.
> 
> 
> What do you think 'destdir' is there for?  If set, this check is skipped.
> You can set it to tempdir() if you like, which is wiped at the end of the 
> session.

Arrgh, ignore my former message. Brian is right, of course.

Uwe

From p.dalgaard at biostat.ku.dk  Fri Oct 22 20:06:46 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct 22 20:10:21 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
References: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
Message-ID: <x2k6tihbk9.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On Fri, 22 Oct 2004, Thomas Stabla wrote:
....
> > 1) install.packages("<package>") will install <package>, no matter if 
> >    <package> has already been installed.
> > 2) the readline() at the end of install.packages, which asks the user, if 
> >    the downloaded files should be deleted, makes it difficult to 
> >    delete packages automatically after installation (I must admit, I'm not 
> >    quite familiar with R CMD BATCH)
> > 
> > 
> > Question/Request:
> > Is the behaviour in 1) intended?
> 
> Most definitely.  I might want to install it in another library, or to 
> reinstall it under the current version of R.  

Or, as happened to me about an hour ago: You install a package with a
dozen dependencies, then realize that you want to rerun with
dependencies=TRUE.

> > 2) I'd like to have another bool argument, which determines, if the 
> > downloaded files should be deleted.
> 
> What do you think 'destdir' is there for?  If set, this check is skipped.
> You can set it to tempdir() if you like, which is wiped at the end of the 
> session.

Hmm, a bit indirect, isn't it? Adding a 'delete' argument wouldn't
harm, I suppose. Or use 'ask', which could sensibly be passed down
from update.packages().

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From terra at gnome.org  Fri Oct 22 20:47:44 2004
From: terra at gnome.org (terra@gnome.org)
Date: Fri Oct 22 20:47:46 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
Message-ID: <20041022184744.457E61094C@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: 2
OS: Solaris/space/gcc2.95.2
Submission from: (NULL) (65.213.85.217)


I changed src/nmath/standalone/test.c to read:

---------------------------------------------------------------------------------
#define MATHLIB_STANDALONE 1
#include <Rmath.h>
#include <stdio.h>
int
main()
{
  double x;
  for (x = 99990; x <= 100009; x++)
    printf ("%.14g --> %.14g\n", x, pgamma (1000000.0,  x, 1.0, 0, 1));
  return 0;
}
---------------------------------------------------------------------------------

and have no further local changes.

I get...
src/nmath/standalone> LD_LIBRARY_PATH=. ./test 
99990 --> -669773.38974057
99991 --> -669771.08705436
99992 --> -669768.78437815
99993 --> -669766.48171194
99994 --> -669764.17905574
99995 --> -669761.87640953
99996 --> -669759.57377332
99997 --> -669757.27114712
99998 --> -669754.96853091
99999 --> -669752.66592471
100000 --> -669750.36332851
100001 --> -599731.36192347       <--- Look at me jump!
100002 --> -599729.89768519
100003 --> -599728.43344358
100004 --> -599726.96919865
100005 --> -599725.50495039
100006 --> -599724.0406988
100007 --> -599722.57644388
100008 --> -599721.11218564
100009 --> -599719.64792408

i.e., the result changes 70000 orders of magnitude right here.  Ugh.
This is affecting some erlang calculations of mine pretty badly.

Judging from comments in pgamma someone else might have gotten hit by this
around R1.8.1.

From statho3 at web.de  Fri Oct 22 20:57:19 2004
From: statho3 at web.de (Thomas Stabla)
Date: Fri Oct 22 20:55:31 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <x2k6tihbk9.fsf@biostat.ku.dk>
References: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
	<x2k6tihbk9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.58.0410222045280.13684@spock.vulcan>

On Fri, 22 Oct 2004, Peter Dalgaard wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > On Fri, 22 Oct 2004, Thomas Stabla wrote:
> ....
> > > 1) install.packages("<package>") will install <package>, no matter if 
> > >    <package> has already been installed.
> > > 2) the readline() at the end of install.packages, which asks the user, if 
> > >    the downloaded files should be deleted, makes it difficult to 
> > >    delete packages automatically after installation (I must admit, I'm not 
> > >    quite familiar with R CMD BATCH)
> > > 
> > > 
> > > Question/Request:
> > > Is the behaviour in 1) intended?
> > 
> > Most definitely.  I might want to install it in another library, or to 
> > reinstall it under the current version of R.  
> 
> Or, as happened to me about an hour ago: You install a package with a
> dozen dependencies, then realize that you want to rerun with
> dependencies=TRUE.

Similar thing happended to me, I simply forgot to set dep=TRUE, and 
afterwards, was annoyed, when I had to reinstall the packages that were 
already installed. 
Therefore the changes I made wouldn't prevent a rerun with  
dependencies=TRUE, because the packages which are already installed are 
not excluded from "pkgs" until the dependencies have been checked.

Thomas Stabla

From statho3 at web.de  Fri Oct 22 21:07:27 2004
From: statho3 at web.de (Thomas Stabla)
Date: Fri Oct 22 21:05:43 2004
Subject: [Rd] install.packages question / suggestion
In-Reply-To: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
References: <Pine.LNX.4.44.0410221811270.19140-100000@gannet.stats>
Message-ID: <Pine.LNX.4.58.0410222104090.13684@spock.vulcan>

On Fri, 22 Oct 2004, Prof Brian Ripley wrote:

> On Fri, 22 Oct 2004, Thomas Stabla wrote:
> 
> > when trying to write an R-file, which automatically installs and updates a 
> > given list of packages, 
> 
> Many of us already have scripts of that sort.
> 
> > I had two problems with install.packages()
> > 
> > 1) install.packages("<package>") will install <package>, no matter if 
> >    <package> has already been installed.
> > 2) the readline() at the end of install.packages, which asks the user, if 
> >    the downloaded files should be deleted, makes it difficult to 
> >    delete packages automatically after installation (I must admit, I'm not 
> >    quite familiar with R CMD BATCH)
> > 
> > 
> > Question/Request:
> > Is the behaviour in 1) intended?
> 
> Most definitely.  I might want to install it in another library, or to 
> reinstall it under the current version of R.  

This could be realised by using a (not existing) "force = TRUE" argument 
to install.packages().

Thomas Stabla

From p.dalgaard at biostat.ku.dk  Fri Oct 22 23:41:55 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct 22 23:45:38 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
In-Reply-To: <20041022184744.457E61094C@slim.kubism.ku.dk>
References: <20041022184744.457E61094C@slim.kubism.ku.dk>
Message-ID: <x2fz46h1lo.fsf@biostat.ku.dk>

terra@gnome.org writes:

>   for (x = 99990; x <= 100009; x++)
>     printf ("%.14g --> %.14g\n", x, pgamma (1000000.0,  x, 1.0, 0, 1));
....
> and have no further local changes.
> 
> I get...
> src/nmath/standalone> LD_LIBRARY_PATH=. ./test 
...
> 99999 --> -669752.66592471
> 100000 --> -669750.36332851
> 100001 --> -599731.36192347       <--- Look at me jump!
> 100002 --> -599729.89768519


> i.e., the result changes 70000 orders of magnitude right here.  Ugh.
> This is affecting some erlang calculations of mine pretty badly.

Make that 30400 orders of magnitude (natural logs y'know)... On
something thats about 300000 orders of magnitude below 1, mind you!
What the devil are you calculating? The probability that a random
configuration of atoms would make up the known universe?
 
> Judging from comments in pgamma someone else might have gotten hit by this
> around R1.8.1.

Beginning to look like a method bug. Recipe is to read the original
paper, check for transcription errors from the Fortran algorithm, then
check for errors going from theory to Fortran, then check the theory...

PS: It happens on the R command line too:

>  pgamma(1000000,100000.001,1.0,,0,1) - pgamma(1000000,100000,1.0,,0,1)
[1] 70017.54


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From terra at gnome.org  Sat Oct 23 05:51:28 2004
From: terra at gnome.org (Morten Welinder)
Date: Sat Oct 23 05:51:45 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
In-Reply-To: <x2fz46h1lo.fsf@biostat.ku.dk> (message from Peter Dalgaard on 22
	Oct 2004 23:41:55 +0200)
References: <20041022184744.457E61094C@slim.kubism.ku.dk>
	<x2fz46h1lo.fsf@biostat.ku.dk>
Message-ID: <200410230351.i9N3pS415817@troll.rentec.com>


> Make that 30400 orders of magnitude (natural logs y'know)...

Right.  (/me raises hands showing 2.7 fingers.)

> What the devil are you calculating? The probability that a random
> configuration of atoms would make up the known universe?

Not quite.  Where you see a cdf for the gamma distribution I see the
incomplete gamma function.  Same function, different hat.  I am using
it to compute the Erlang B function ("Grade Of Service"), see

    http://www.dcss.mcmaster.ca/~qiao/publications/erlang/newerlang.html

And here is my code for the log version of this.  (Link's c==circuit;
link's rho==traffic; link's p is a typo for rho.)

-----------------------------------------------------------------------------
static gnm_float
calculate_loggos (gnm_float traffic, gnm_float circuits)
{
	double f;

	if (traffic < 0 || circuits < 1)
		return gnm_nan;
	if (traffic == 0)
		return gnm_ninf;

#ifdef CANCELLATION
	/* Calculated this way we get cancellation.  */
	f = circuits * loggnum (traffic) - lgamma1p (circuits) - traffic;
#else
	f = (circuits - traffic) +
		(1 - loggnum (sqrtgnum (2 * M_PIgnum))) -
		loggnum (circuits + 1) / 2.0 -
		logfbit (circuits) +
		circuits * (loggnum (traffic / (circuits + 1)));
#endif

	return f - pgamma (traffic, circuits + 1, 1, FALSE, TRUE);
}
-----------------------------------------------------------------------------

The two #ifdef branches calculate the same thing, but the bottom
version suffers a lot less from cancellation.  I might still need
to consider cancellation in the final subtraction.  (Read "double"
where the above says "gnm_float" and forget the "gnum" suffixes.)

In the traffic=1e6,circuits=1e5 case I quoted I could use the
second formula from the link above instead, but that won't work
when the two are close to each other.  Sadly I need it there too.

Googling suggests that the canonical reference for this problem is

    Temme N M (1987) On the computation of the incomplete gamma
    functions for large values of the parameters Algorithms for
    Approximation J C Mason and M G Cox (ed) Oxford University Press.

(This reference from nag's manual.)

Morten

From d.firth at warwick.ac.uk  Sat Oct 23 16:58:04 2004
From: d.firth at warwick.ac.uk (d.firth@warwick.ac.uk)
Date: Sat Oct 23 16:58:07 2004
Subject: [Rd] R_LIBS and R Cocoa GUI for Mac OS X (PR#7308)
Message-ID: <20041023145804.93DE010426@slim.kubism.ku.dk>

Full_Name: David Firth
Version: 2.0.0
OS: Mac OS 10.3.5
Submission from: (NULL) (81.178.234.156)


When running R in R Cocoa GUI 1.0 (v2004-10-14), I have

> Sys.getenv()[["R_LIBS"]]
[1] "/Users/david/Library/R"
> .libPaths()
[1] "/Users/david/Library/R/library"                   
[2] "/Library/Frameworks/R.framework/Resources/library"

The pasting of "/library" after "/Users/david/Library/R" is unexpected: I did
not find it documented, and it does not happen when I run the same R version by
other means, for example through Terminal.app.

Version info below.

Best regards,
David

> version
         _                      
platform powerpc-apple-darwin6.8
arch     powerpc                
os       darwin6.8              
system   powerpc, darwin6.8     
status                          
major    2                      
minor    0.0                    
year     2004                   
month    10                     
day      04                     
language R

From ripley at stats.ox.ac.uk  Sat Oct 23 17:31:12 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Oct 23 17:31:21 2004
Subject: [Rd] R_LIBS and R Cocoa GUI for Mac OS X (PR#7308)
Message-ID: <20041023153112.C673C10434@slim.kubism.ku.dk>

It stems from the following code in src/library/profile/Rprofile.unix

if(.Platform$GUI == "AQUA") {
...
    if( !file.exists("~/Library/R") )
        dir.create(path.expand("~/Library/R"))
    if( !file.exists("~/Library/R/library") )
        dir.create(path.expand("~/Library/R/library"))
    .libPaths(path.expand("~/Library/R/library"))
}## end "Aqua"

which looks quite intentional, and looks like it was done for 1.9.0.

I suggest this section is conditionalized on

if(!length(Sys.getenv("R_LIBS")) {  # note the simpler form!
}

since presumbably the intention is to have a local library tree for 
install.binaries() to use, and it is wrong to override the standard system 
setting via R_LIBS (which has in fact been ignored).

David: edit library/base/R/Rprofile if you want a quick fix on a binary 
installation.


On Sat, 23 Oct 2004 d.firth@warwick.ac.uk wrote:

> Full_Name: David Firth
> Version: 2.0.0
> OS: Mac OS 10.3.5
> Submission from: (NULL) (81.178.234.156)
> 
> 
> When running R in R Cocoa GUI 1.0 (v2004-10-14), I have
> 
> > Sys.getenv()[["R_LIBS"]]
> [1] "/Users/david/Library/R"
> > .libPaths()
> [1] "/Users/david/Library/R/library"                   
> [2] "/Library/Frameworks/R.framework/Resources/library"
> 
> The pasting of "/library" after "/Users/david/Library/R" is unexpected: I did
> not find it documented, and it does not happen when I run the same R version by
> other means, for example through Terminal.app.
> 
> Version info below.
> 
> Best regards,
> David
> 
> > version
>          _                      
> platform powerpc-apple-darwin6.8
> arch     powerpc                
> os       darwin6.8              
> system   powerpc, darwin6.8     
> status                          
> major    2                      
> minor    0.0                    
> year     2004                   
> month    10                     
> day      04                     
> language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From stefano.iacus at unimi.it  Sat Oct 23 17:53:26 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Sat Oct 23 17:53:30 2004
Subject: [Rd] R_LIBS and R Cocoa GUI for Mac OS X (PR#7308)
In-Reply-To: <20041023153112.C673C10434@slim.kubism.ku.dk>
References: <20041023153112.C673C10434@slim.kubism.ku.dk>
Message-ID: <AD2542E0-250B-11D9-BAE7-000A95C87F66@unimi.it>

yes that was intentional and present in 1.9.0 as well and also 
explained in the FAQ (see section: Where are the packages I've 
installed?)

The idea behind "was": instead of using ~/.R to put anything 
R-specific, se use ~/Library (~/Application Support would have also 
been acceptable).

But we are working on that these days to allow more flexible library 
tree specification from the GUI directly.

stefano

On Oct 23, 2004, at 5:31 PM, ripley@stats.ox.ac.uk wrote:

> It stems from the following code in src/library/profile/Rprofile.unix
>
> if(.Platform$GUI == "AQUA") {
> ...
>     if( !file.exists("~/Library/R") )
>         dir.create(path.expand("~/Library/R"))
>     if( !file.exists("~/Library/R/library") )
>         dir.create(path.expand("~/Library/R/library"))
>     .libPaths(path.expand("~/Library/R/library"))
> }## end "Aqua"
>
> which looks quite intentional, and looks like it was done for 1.9.0.
>
> I suggest this section is conditionalized on
>
> if(!length(Sys.getenv("R_LIBS")) {  # note the simpler form!
> }
>
> since presumbably the intention is to have a local library tree for
> install.binaries() to use, and it is wrong to override the standard 
> system
> setting via R_LIBS (which has in fact been ignored).
>
> David: edit library/base/R/Rprofile if you want a quick fix on a binary
> installation.
>
>
> On Sat, 23 Oct 2004 d.firth@warwick.ac.uk wrote:
>
>> Full_Name: David Firth
>> Version: 2.0.0
>> OS: Mac OS 10.3.5
>> Submission from: (NULL) (81.178.234.156)
>>
>>
>> When running R in R Cocoa GUI 1.0 (v2004-10-14), I have
>>
>>> Sys.getenv()[["R_LIBS"]]
>> [1] "/Users/david/Library/R"
>>> .libPaths()
>> [1] "/Users/david/Library/R/library"
>> [2] "/Library/Frameworks/R.framework/Resources/library"
>>
>> The pasting of "/library" after "/Users/david/Library/R" is 
>> unexpected: I did
>> not find it documented, and it does not happen when I run the same R 
>> version by
>> other means, for example through Terminal.app.
>>
>> Version info below.
>>
>> Best regards,
>> David
>>
>>> version
>>          _
>> platform powerpc-apple-darwin6.8
>> arch     powerpc
>> os       darwin6.8
>> system   powerpc, darwin6.8
>> status
>> major    2
>> minor    0.0
>> year     2004
>> month    10
>> day      04
>> language R
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From stefano.iacus at unimi.it  Sat Oct 23 17:53:44 2004
From: stefano.iacus at unimi.it (stefano.iacus@unimi.it)
Date: Sat Oct 23 17:53:46 2004
Subject: [Rd] R_LIBS and R Cocoa GUI for Mac OS X (PR#7308)
Message-ID: <20041023155344.0E3FE10426@slim.kubism.ku.dk>

yes that was intentional and present in 1.9.0 as well and also 
explained in the FAQ (see section: Where are the packages I've 
installed?)

The idea behind "was": instead of using ~/.R to put anything 
R-specific, se use ~/Library (~/Application Support would have also 
been acceptable).

But we are working on that these days to allow more flexible library 
tree specification from the GUI directly.

stefano

On Oct 23, 2004, at 5:31 PM, ripley@stats.ox.ac.uk wrote:

> It stems from the following code in src/library/profile/Rprofile.unix
>
> if(.Platform$GUI == "AQUA") {
> ...
>     if( !file.exists("~/Library/R") )
>         dir.create(path.expand("~/Library/R"))
>     if( !file.exists("~/Library/R/library") )
>         dir.create(path.expand("~/Library/R/library"))
>     .libPaths(path.expand("~/Library/R/library"))
> }## end "Aqua"
>
> which looks quite intentional, and looks like it was done for 1.9.0.
>
> I suggest this section is conditionalized on
>
> if(!length(Sys.getenv("R_LIBS")) {  # note the simpler form!
> }
>
> since presumbably the intention is to have a local library tree for
> install.binaries() to use, and it is wrong to override the standard 
> system
> setting via R_LIBS (which has in fact been ignored).
>
> David: edit library/base/R/Rprofile if you want a quick fix on a binary
> installation.
>
>
> On Sat, 23 Oct 2004 d.firth@warwick.ac.uk wrote:
>
>> Full_Name: David Firth
>> Version: 2.0.0
>> OS: Mac OS 10.3.5
>> Submission from: (NULL) (81.178.234.156)
>>
>>
>> When running R in R Cocoa GUI 1.0 (v2004-10-14), I have
>>
>>> Sys.getenv()[["R_LIBS"]]
>> [1] "/Users/david/Library/R"
>>> .libPaths()
>> [1] "/Users/david/Library/R/library"
>> [2] "/Library/Frameworks/R.framework/Resources/library"
>>
>> The pasting of "/library" after "/Users/david/Library/R" is 
>> unexpected: I did
>> not find it documented, and it does not happen when I run the same R 
>> version by
>> other means, for example through Terminal.app.
>>
>> Version info below.
>>
>> Best regards,
>> David
>>
>>> version
>>          _
>> platform powerpc-apple-darwin6.8
>> arch     powerpc
>> os       darwin6.8
>> system   powerpc, darwin6.8
>> status
>> major    2
>> minor    0.0
>> year     2004
>> month    10
>> day      04
>> language R
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From rafaminos at yahoo.fr  Sat Oct 23 18:14:06 2004
From: rafaminos at yahoo.fr (rafaminos@yahoo.fr)
Date: Sat Oct 23 18:14:08 2004
Subject: [Rd] inappropriate definition of kurtosis in e1071 package (PR#7309)
Message-ID: <20041023161406.1D33810433@slim.kubism.ku.dk>

Full_Name: Raphal C?sari
Version: 1.9.1
OS: Windows XP family edition
Submission from: (NULL) (213.100.40.112)


Hello,

I am a student at the Departments of Economics at Stockholm University.I am a
beginner in Econometrics and was very confused when using the built in command
"kurtosis()" of the e1071 package.When I computed the test,I was thinking of
getting the kurtosis of my distribution which has to be greater or equal to
zero,and I got a value under zero.The formula of kurtosis is :

     If N = length(x), then the kurtosis of x is defined as

            N^(-1) sd(x)^(-4) sum_i (x_i - mean(x))^4 


and the function computes what i think is called the excess kurtosis which is
just the same formula minus 3.This is why it is possible to get a computed value
under zero!Now it is trivial to me,because I know the function but t would be
good in the details of the function to explain that the computed value is the
excess kurtosis which i think is more appropriate.

Best regards,

Rapha?l C?sari

From ripley at stats.ox.ac.uk  Sat Oct 23 18:35:33 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Oct 23 18:35:36 2004
Subject: [Rd] (PR#7309) misuse of R-bugs (was inappropriate definition
Message-ID: <20041023163533.B08B410433@slim.kubism.ku.dk>

>From the R FAQ

   Bug reports on contributed packages should be sent first to the package
   maintainer, and only submitted to the R-bugs repository by package
   maintainers, mentioning the package in the subject line.

and you are NOT the listed maintainer.

Do learn to read FAQs before causing unnecessary work for other people
(as the R posting guide asks).

Please do as the FAQ asks.

On Sat, 23 Oct 2004 rafaminos@yahoo.fr wrote:

> Full_Name: Raphal C?sari
> Version: 1.9.1

Not current, and that's mentioned in the FAQ and the posting guide.

> OS: Windows XP family edition
> Submission from: (NULL) (213.100.40.112)
> 
> 
> Hello,
> 
> I am a student at the Departments of Economics at Stockholm University.I am a
> beginner in Econometrics and was very confused when using the built in command
> "kurtosis()" of the e1071 package.When I computed the test,I was thinking of
> getting the kurtosis of my distribution which has to be greater or equal to
> zero,and I got a value under zero.The formula of kurtosis is :
> 
>      If N = length(x), then the kurtosis of x is defined as
> 
>             N^(-1) sd(x)^(-4) sum_i (x_i - mean(x))^4 
> 
> 
> and the function computes what i think is called the excess kurtosis which is
> just the same formula minus 3.This is why it is possible to get a computed value
> under zero!Now it is trivial to me,because I know the function but t would be
> good in the details of the function to explain that the computed value is the
> excess kurtosis which i think is more appropriate.
> 
> Best regards,
> 
> Rapha?l C?sari
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Oct 23 18:43:52 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat Oct 23 18:43:55 2004
Subject: [Rd] Re: (PR#7304) library.dynam() & .dynLibs() do not work as
Message-ID: <20041023164352.D463B10434@slim.kubism.ku.dk>

Filing on R-bugs (DTL's reply started a new PR).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Fri, 22 Oct 2004 17:30:13 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
To: Duncan Temple Lang <duncan@wald.ucdavis.edu>
Cc: R-devel@r-project.org
Subject: [Rd] Re: library.dynam() & .dynLibs() do not work as documented

Duncan,

I don't know what we want, but it is not a simple matter of documenting
what .dynLibs currently does.  What I see as bugs are

1) the inconsistent names and types of the components returned by 
   .dynLibs().
2) the inconsistent inclusion or not of R_X11 in the list returned by 
   .dynLibs().
3) the inclusion of static info (base) by library.dynam().
4) including loadable modules such as R_X11.
5) the documentation needs updating.

Having .dynLibs() give a list of DLLinfo objects about DLLs loaded by 
packages, and summarizing those in library.dynam() is my current best 
suggestion.  That implies leaving out base and R_X11.

I intended

> > nor in any sensible way we could document.

to indicate that the current documentation was not a good option.

Brian

On Fri, 22 Oct 2004, Duncan Temple Lang wrote:

> Prof Brian Ripley wrote:
> > nor in any sensible way we could document.
> > 
> > In R 2.0.0 (and current R-patched and R-devel):
> > 
> > > X11()
> > > library.dynam()
> >                                                 Filename Dynamic.Lookup
> > base                                                base          FALSE
> > stats       /usr/local/lib/R/library/stats/libs/stats.so           TRUE
> > methods /usr/local/lib/R/library/methods/libs/methods.so           TRUE
> > R_X11                  /usr/local/lib/R/modules/R_X11.so           TRUE
> > 
> > whereas 1.9.1 gives
> > 
> > > library.dynam()
> > [1] "stats"   "methods"
> > 
> > and the documentation says
> > 
> >      If 'chname' is not specified, 'library.dynam' returns a character
> >      vector with the names of packages which have used it in the
> >      current R session to load shared libraries. This vector is
> >      returned as 'invisible', unless  the 'chname' argument is missing.
> > 
> > which is clearly no longer true.  I don't see why we want loaded modules 
> > in there that have nothing to do with packages, or even non-modules.
> 
> 
> Before we try to simply match documentation which was written for
> a simpler semantic,  let's think about what we actually require
> in the context of versioned packages and where library.dynam()
> is currently being used and so what is broken.
> 
> Returning a character vector with the names of packages which have used it
> does not permit version information to be included (unless they are in the
> package name). 
> 
> For quite some time, I have wanted to move to package objects 
> and to return such self-describing objects which contain all
> their own details such as name, version, DLL, etc.  Using names,
> just   as using numbers of graphics devices, is a global mechanism
> that leads to clumsy code. 
> 
> We can make the code match the documentation, but only if
> we still want what the documentation states.
> When we introduce multiple evaluators in the future,
> lots of things will "challenge" the current semantics
> and many of them will be desirable. One of these potential changes
> is the use of multiple concurrent versions of a package.
> 
> Comments, before we fix things? 
> 
>  D. 
> 
> > 
> > At that point .dynLibs() gave
> > 
> > $base
> > DLL name: base
> > Filename: base
> > Dynamic lookup: FALSE
> > 
> > $stats
> > DLL name: stats
> > Filename: /usr/local/lib/R/library/stats/libs/stats.so
> > Dynamic lookup: TRUE
> > 
> > [[3]]
> > [1] "methods"
> > 
> > which seems useless for
> > 
> >      '.dynLibs' is used for getting or setting the packages that have
> >      loaded shared libraries (using 'library.dynam').
> > 
> > One command later and we have
> > 
> > > library(MASS)
> > > .dynLibs()
> > $base
> > DLL name: base
> > Filename: base
> > Dynamic lookup: FALSE
> > 
> > $stats
> > DLL name: stats
> > Filename: /usr/local/lib/R/library/stats/libs/stats.so
> > Dynamic lookup: TRUE
> > 
> > $methods
> > DLL name: methods
> > Filename: /usr/local/lib/R/library/methods/libs/methods.so
> > Dynamic lookup: TRUE
> > 
> > $R_X11
> > DLL name: R_X11
> > Filename: /usr/local/lib/R/modules/R_X11.so
> > Dynamic lookup: TRUE
> > 
> > [[5]]
> > [1] "MASS"
> > 
> > !
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

______________________________________________
R-devel@stat.math.ethz.ch mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

From Cypher at sbti.com  Sat Oct 23 19:05:15 2004
From: Cypher at sbti.com (Cypher@sbti.com)
Date: Sat Oct 23 19:05:25 2004
Subject: [Rd] Policy Violation (PR#7310)
Message-ID: <20041023170515.7112610426@slim.kubism.ku.dk>

The following message sent by this account has violated system policy:

From: r-bugs@r-project.org
To: john.thomas@sbti.com
Date: Sat, 23 Oct 2004 12:05:45 -0500
Subject: Mail Delivery (failure john.thomas@sbti.com)


The following violations were detected:

--- Scan information follows ---

Virus Name: W32.Netsky.P@mm!enc
File Attachment: M2004102312054506398.mes
Attachment Status: infected

Virus Name: W32.Netsky.P@mm
File Attachment: message.scr
Attachment Status: deleted

--- File name Block information follows ---

File Attachment: M2004102312054506398.mes/message.scr
Matching file name: *.scr

From ripley at stats.ox.ac.uk  Sun Oct 24 07:47:38 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 24 07:47:43 2004
Subject: [Rd] R 2.0.0: namespaces, S4 classes & versioned package
	installation: failure to resolve correct pkg version
In-Reply-To: <416416AC.3020109@epigenomics.com>
Message-ID: <Pine.LNX.4.44.0410240627300.29149-100000@gannet.stats>

The first issue here is that

library("stats4_2.0.0")

is incorrect: the package name is "stats4".  You meant, I hope,

library("stats4", version="2.0.0")

and the methods package is correctly using "stats4" as the package name.
The idea of versioned installs is that only the package name is changed, 
so that binary versions of packages can be installed as is or under the 
version name.

Those who implemented this have not envisaged situations such as you
describe.  For example, require("stats4") requires an unversioned load if
possible, even though there may already be a versioned install loaded, and
as.environment("package:stats4") fails since search() is reporting
package:stats4_2.0.0.  Because this has not been thought through, some
functions require decorated package names and some do not.

Because versioning of namespaces is not implemented, using versioned 
installs and import/export with namespaces is broken in 2.0.0 (but will 
work up to a point in 2.0.1).

> For ensuring long term reproducible results we so far have used the
> versioned package maintenance concept and certaily would like to
> continue doing so.

I really don't understand that.  R packages are _always_ versioned.
You only need versioned installs if you want to install two versions into 
the same library (or load into the same session, but the latter is not 
supported and was said originally not to be a goal).  Some of us have for 
many years just used separate libraries, which does work.


On Wed, 6 Oct 2004, Matthias Burger wrote:

> 
> Hi,
> 
> further down from the problem I asked about yesterday I encounter the following 
> problem (please appologize for the lengthy mail - I have not found a brief example
> making the issue clear):
> 
>   - using R packages making use of namespaces &
>   - S4 classes
>     when using
>     --with-package-versions in the install call:
> 
> Pkgs install ok and the first pkg 'base' can be loaded in R (2.0.0) ok but
> loading a second pkg 'algo' that defines classes derived from 'base'
> fails as 'algo' searches for 'base' in the search path without the version 
> extension. The problem does not occur if installed wo --with-package-versions 
> option.
> 
> The traceback of the actual call is given below, but there is no simple 
> reproducible example I have come up with yet.
> 
> An reproducible case that might be of some help and give some further insights:
> I installed stats4 from the R-source-tree/src/library
> with --with-package-versions
> 
> In R
>  >library("stats4_2.0.0")
>  >search()
> [1] ".GlobalEnv"           "package:stats4_2.0.0" "package:stats"
> [4] "package:graphics"     "package:grDevices"    "package:RUnit_0.4.0"
> [7] "package:methods"      "Autoloads"            "package:base"
> 
> carrel>obj <- new("mle")
> Loading required package: stats4
> 
> Attaching package 'stats4':
> 
> 
>          The following object(s) are masked from package:stats4_2.0.0 :
> 
>           mle
>  >class(obj)
> [1] "mle"
> attr(,"package")
> [1] "stats4"
> 
> 
> as far as i could understand the problem lies in the 'package' attribute not 
> being set to package + version string.
> 
> In the call sequence
> new -> getClass -> getClassDef: here .requirePackage(package)
> is called where package is retrieved from package = packageSlot(Class)
> 
> Is this speculation correct or did I make a mistake somewhere else?
> Is there any way to teach methods to look for the classes in the versioned 
> package in the search path?
> Or is this just asking more than can be achieved with the current methods 
> implementation?
> 
> Any help or suggestion is greatly appreciated.
> 
> 
> Regards,
> 
>    Matthhias
> 
> 
> Motivation:
> For ensuring long term reproducible results we so far have used the versioned 
> package maintenance concept and certaily would like to continue doing so.
> 
> 
> traceback:
> library("EpiR.algo_1.4.0")
> Loading required package: EpiR.base
> Error in as.environment(pkg) : no item called "package:EpiR.base" in the search list
> In addition: Warning message:
> replacing previous import: filter in: namespaceImportFrom(self, asNamespace(ns))
> 
> Call Stack:
> 1 :  library("EpiR.algo_1.4.0")
> 2 :  try({
> 3 :  loadNamespace(package, c(which.lib.loc, lib.loc))
> 4 :  sys.source(codeFile, env, keep.source = keep.source)
> 5 :  eval(i, envir)
> 6 :  eval(expr, envir, enclos)
> 7 :  .defineRankingClass(where = .where)
> 8 :  setClass("Ranking", representation("VIRTUAL", rowGroup = "Grouping", 
> colGroup = "Grouping"), prototype(rowGroup = newGrouping(), colGroup = 
> newGrouping()), vali
> 9 :  makeClassRepresentation(Class, properties, superClasses, prototype, 
> package, validity, access, version, sealed, where = where)
> 10 :  prototype(rowGroup = newGrouping(), colGroup = newGrouping())
> 11 :  .prototype(...)
> 12 :  newGrouping()
> 13 :  new("Grouping")
> 14 :  initialize(value, ...)
> 15 :  initialize(value, ...)
> 16 :  "@<-"(`*tmp*`, valid, value = TRUE)
> 17 :  "slot<-"(object, name, TRUE, value)
> 18 :  checkSlotAssignment(object, name, value)
> 19 :  getClass(class(obj))
> 20 :  .requirePackage(package)
> 21 :  .asEnvironmentPackage(package)
> Error in library("EpiR.algo_1.4.0") : package/namespace load failed
> 
> 
> info: class Grouping is defined in EpiR.base and used for slot rowGroup,
> newGrouping is a simple wrapper to new("Grouping") providing some meaningful 
> defaults.
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kaminari at oyaji.biglobe.ne.jp  Sun Oct 24 17:28:28 2004
From: kaminari at oyaji.biglobe.ne.jp (kaminari@oyaji.biglobe.ne.jp)
Date: Sun Oct 24 17:28:36 2004
Subject: [Rd] refused message
Message-ID: <20041025002828.AB27467.80cfb91d@biglobe.ne.jp>

Your mail was rejected.
From andy_liaw at merck.com  Sun Oct 24 21:58:35 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sun Oct 24 21:59:08 2004
Subject: [Rd] strange link problems in html version of R FAQ
Message-ID: <3A822319EB35174CA3714066D590DCD50994E215@usrymx25.merck.com>

In the 2.0.0 version of the R FAQ (html format), the links at the end of
most sections look wrong in many places (but not all), starting with Section
1.1:


[...]
You can also obtain it by writing to the Free Software Foundation, Inc., 59
Temple Place - Suite 330, Boston, MA 02111-1307, USA. 
----------------------------------------------------------------------------
----
Next: Citing this document, Previous: Legalese, Up: Introduction 

1.2 Obtaining this document
[...]

Note the `next' link is to Section 1.3, not 1.2.

Best,
Andy

From hb at maths.lth.se  Sun Oct 24 22:46:35 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Sun Oct 24 22:46:53 2004
Subject: [Rd] strange link problems in html version of R FAQ
In-Reply-To: <3A822319EB35174CA3714066D590DCD50994E215@usrymx25.merck.com>
Message-ID: <001b01c4ba0a$926ef100$170040d5@hblaptop>

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of Liaw, Andy
> Sent: Sunday, October 24, 2004 9:59 PM
> To: R-devel@r-project.org
> Subject: [Rd] strange link problems in html version of R FAQ
> 
> 
> In the 2.0.0 version of the R FAQ (html format), the links at 
> the end of most sections look wrong in many places (but not 
> all), starting with Section
> 1.1:
> 
> 
> [...]
> You can also obtain it by writing to the Free Software 
> Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 
> 02111-1307, USA. 
> --------------------------------------------------------------
> --------------
> ----
> Next: Citing this document, Previous: Legalese, Up: Introduction 
> 
> 1.2 Obtaining this document
> [...]
> 
> Note the `next' link is to Section 1.3, not 1.2.

Isn't this intended? A better example is if your at the top of the long
section "5.1.2 Add-on packages from CRAN" and want to skip to the "next"
section, that is Section 5.1.3, by click on "Next: Add-on packages from
Omegahat, ...".

I interpret the "Next: ..., Previous: ..., Up: ..." lines to be at the *top*
of each section and not at the bottom. See for instance the first and the
last occurances. A section start with a horizontal ruler.

The links seems to be ok, at least for R v2.0.0 Patched (2004-10-13) for
Windows, if that is what you mean.

Best wishes

Henrik Bengtsson
 
> Best,
> Andy
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>

From ripley at stats.ox.ac.uk  Sun Oct 24 22:51:37 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 24 22:51:42 2004
Subject: [Rd] strange link problems in html version of R FAQ
In-Reply-To: <3A822319EB35174CA3714066D590DCD50994E215@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0410242149040.13720-100000@gannet.stats>

On Sun, 24 Oct 2004, Liaw, Andy wrote:

> In the 2.0.0 version of the R FAQ (html format), the links at the end of
> most sections look wrong in many places (but not all), starting with Section
> 1.1:
> 
> 
> [...]
> You can also obtain it by writing to the Free Software Foundation, Inc., 59
> Temple Place - Suite 330, Boston, MA 02111-1307, USA. 
> ----------------------------------------------------------------------------
> ----
> Next: Citing this document, Previous: Legalese, Up: Introduction 
> 
> 1.2 Obtaining this document
> [...]
> 
> Note the `next' link is to Section 1.3, not 1.2.

Well, that is the next section ... you are between the horizontal rules 
delimiting the `page' for 1.2.  Those links are just like info (as this is 
an html version of info).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From andy_liaw at merck.com  Sun Oct 24 23:32:34 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sun Oct 24 23:33:06 2004
Subject: [Rd] strange link problems in html version of R FAQ
Message-ID: <3A822319EB35174CA3714066D590DCD50994E216@usrymx25.merck.com>

> From: Prof Brian Ripley
> 
> On Sun, 24 Oct 2004, Liaw, Andy wrote:
> 
> > In the 2.0.0 version of the R FAQ (html format), the links 
> at the end of
> > most sections look wrong in many places (but not all), 
> starting with Section
> > 1.1:
> > 
> > 
> > [...]
> > You can also obtain it by writing to the Free Software 
> Foundation, Inc., 59
> > Temple Place - Suite 330, Boston, MA 02111-1307, USA. 
> > 
> --------------------------------------------------------------
> --------------
> > ----
> > Next: Citing this document, Previous: Legalese, Up: Introduction 
> > 
> > 1.2 Obtaining this document
> > [...]
> > 
> > Note the `next' link is to Section 1.3, not 1.2.
> 
> Well, that is the next section ... you are between the 
> horizontal rules 
> delimiting the `page' for 1.2.  Those links are just like 
> info (as this is 
> an html version of info).

Ahh!  Apologies for the confusion.  I was wondering how the links could all
be off by one section.  Now I see that it's my perception that's off...

Best,
Andy
 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> 
>

From gavin at printeasy.com.au  Mon Oct 25 08:07:55 2004
From: gavin at printeasy.com.au (Gavin Hayes)
Date: Mon Oct 25 08:11:24 2004
Subject: [Rd] New Coin Operated Mobile Phone Charger -  Seeking
	Overseas Distributors
Message-ID: <BDA2D55B.B1C%gavin@printeasy.com.au>

Please put me on your mailing list for any other business opportunities.


cheers
----------- 

Gavin Hayes
Operations Director

PrintEasy Pty Ltd
25 Carl Court,
Hallam, Victoria, 3803

Telephone: 9702 4333
Facsimile: 9702 4533
Mobile: 0414 624 326
gavin@printeasy.com.au
www.printeasy.com.au

From a.buness at dkfz.de  Mon Oct 25 10:36:48 2004
From: a.buness at dkfz.de (a.buness@dkfz.de)
Date: Mon Oct 25 10:36:53 2004
Subject: [Rd] write.table in R 2.0.0 (PR#7312)
Message-ID: <20041025083648.A033E1043E@slim.kubism.ku.dk>

Full_Name: Andreas
Version: R 2.0.0
OS: Linux
Submission from: (NULL) (193.174.58.148)


R 2.0.0

> x <- data.frame(x=c(1,2), x=c(1,2))
> write.table(x, col.names=NA, sep="\t")
""      "x"     "x.1"
"1"     1       1
"2"     2       2


R 1.9.1

> write.table(x, col.names=NA, sep="\t")
""      "x"     "x"
"1"     1       1
"2"     2       2

From ripley at stats.ox.ac.uk  Mon Oct 25 10:55:59 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 25 11:03:34 2004
Subject: [Rd] incorrect report (was write.table in R 2.0.0) (PR#7312)
In-Reply-To: <20041025083648.A033E1043E@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410250946420.24377-100000@gannet.stats>

Note this is nothing to do with write.table, as

> data.frame(x=c(1,2), x=c(1,2))
  x x.1
1 1   1
2 2   2

which write.table faithfully reports.

This change *is* in the NEWS file

    o	data.frame(check.names = TRUE) (the default) enforces unique
	names, as S does.

However, there are several bugs I wish to report in a.buness@dkfz.de, who
has wasted our time with this report by

0) Not reading the help pages for write.table and data.frame
1) Not reading the section BUGS in the FAQ
2) Not reading the posting guide
3) Not reading the NEWS file
4) Using an incorrect subject line
5) Not actually saying what the bug is supposed to be.

On Mon, 25 Oct 2004 a.buness@dkfz.de wrote:

> Full_Name: Andreas

6) Not giving his full name.

> Version: R 2.0.0
> OS: Linux
> Submission from: (NULL) (193.174.58.148)
> 
> 
> R 2.0.0
> 
> > x <- data.frame(x=c(1,2), x=c(1,2))
> > write.table(x, col.names=NA, sep="\t")
> ""      "x"     "x.1"
> "1"     1       1
> "2"     2       2
> 
> 
> R 1.9.1
> 
> > write.table(x, col.names=NA, sep="\t")
> ""      "x"     "x"
> "1"     1       1
> "2"     2       2
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From murdoch at stats.uwo.ca  Mon Oct 25 13:20:32 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon Oct 25 13:20:36 2004
Subject: [Rd] write.table in R 2.0.0 (PR#7312)
Message-ID: <20041025112032.9E511EFCB@slim.kubism.ku.dk>

This has nothing to do with write.table.  The column names in x are
"x" and "x.1".

This is documented in the NEWS file:

    o	data.frame(check.names = TRUE) (the default) enforces unique
	names, as S does.

Duncan Murdoch


On Mon, 25 Oct 2004 10:36:48 +0200 (CEST), a.buness@dkfz.de wrote:

>Full_Name: Andreas
>Version: R 2.0.0
>OS: Linux
>Submission from: (NULL) (193.174.58.148)
>
>
>R 2.0.0
>
>> x <- data.frame(x=c(1,2), x=c(1,2))
>> write.table(x, col.names=NA, sep="\t")
>""      "x"     "x.1"
>"1"     1       1
>"2"     2       2
>
>
>R 1.9.1
>
>> write.table(x, col.names=NA, sep="\t")
>""      "x"     "x"
>"1"     1       1
>"2"     2       2
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel

From imosqueira at suk.azti.es  Mon Oct 25 14:41:05 2004
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Mon Oct 25 13:38:47 2004
Subject: [Rd] Cross compiling in R-2.0.0
In-Reply-To: <Pine.LNX.4.44.0410191205350.10847-100000@gannet.stats>
References: <Pine.LNX.4.44.0410191205350.10847-100000@gannet.stats>
Message-ID: <1098708064.21526.60.camel@xurelo>

On Tue, 2004-10-19 at 12:12, Prof Brian Ripley wrote:

> More likely you are cross-compiling R to run under Windows.
Yes, but only with the intention of using the installation to compile
packages for windows.

> Who said you should `make R'?  That is not in the instructions in 
> src/gnuwin32/INSTALL.  If you do that you should get
I am using the cross-compiling instructions and Makefile that appeared
in some issue of R-News. The last step is indeed make R.

> So R_EXE is not defined.  Setting it is part of the instructions.
OK, it is now set.

> User error!  If you follow the instructions it does work, at least in an 
> English-speaking locale.

It is now failing when trying to compile the tcltk package.

Has anybody tried using the Yan and Rossini's Makefile in 2.0.0?

Thanks,


Iago

From bvaillant at simon-kucher.com  Mon Oct 25 14:24:42 2004
From: bvaillant at simon-kucher.com (bvaillant@simon-kucher.com)
Date: Mon Oct 25 14:24:46 2004
Subject: [Rd] <<- (PR#7313)
Message-ID: <20041025122442.4194C10434@slim.kubism.ku.dk>

Full_Name: Boris Vaillant
Version: 2.0
OS: Win 2000
Submission from: (NULL) (195.227.11.98)


##Maybe I have not fully understood the changements
##in R 2.0.
## Why is it that 

a <- 1:3
names(a) <- 1:3
# works fine, but

b <<- 1:3
names(b) <<- 1:3

## used to work in R 1.9
## and gives
> Error: Object "b" not found
## in R 2.0 ?

Boris Vaillant

From latoyiacremeryjay at mail.bulgaria.com  Mon Oct 25 15:52:26 2004
From: latoyiacremeryjay at mail.bulgaria.com (gay lane)
Date: Mon Oct 25 16:15:11 2004
Subject: [Rd] Stimulate others
Message-ID: <1C016563.6594113@mail.bulgaria.com>

The exceptional Discovery of Human Phero mones

Our perfume has real human sexual attractant in it.

Direct from the laboratory to you!

After I saw that story on Dateline NBC about your perfume I ordered some 
and I am "extremely" satisfied. Women are now coming up and talking to ME! 
I don't even have to use pick-up lines anymore. 
Thank you.   - Robert Y. in Tuscon, AZ.

To Whom It May Concern: 
Thank you for your prompt service and remarkable product. My Wife 
and I haven't been so 'frisky' in years. It's just like our honeymoon 
again. Please find my payment enclosed for another bottle of 
your perfume. 
Thanks again.      - Leslie A. in Macon, GA.


http://www.productitemsuperstore.com/4/
Detailed information or to stop receiving or to see our address.




There's the thing that's responsible for most of my troubles, said he,
bitterly. What right has one person to fly through the air while all his
fellow-creatures crawl over the earth's surface? And why should I be cut off
from all the rest of the world because you have given me this confounded
traveling machine? I didn't ask for it, and I won't keep it a moment longer
Give it to some one you hate more than you do me! The Demon stared aghast
and turned his glittering eyes wonderingly from Rob to the traveling machine
and back again, as if to be sure he had heard and seen aright

From tlumley at u.washington.edu  Mon Oct 25 17:43:03 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon Oct 25 17:43:18 2004
Subject: [Rd] <<- (PR#7313)
In-Reply-To: <20041025122442.4194C10434@slim.kubism.ku.dk>
References: <20041025122442.4194C10434@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.61b.0410250838360.243928@homer10.u.washington.edu>

On Mon, 25 Oct 2004 bvaillant@simon-kucher.com wrote:

> Full_Name: Boris Vaillant
> Version: 2.0
> OS: Win 2000
> Submission from: (NULL) (195.227.11.98)
>
>
> ##Maybe I have not fully understood the changements
> ##in R 2.0.
> ## Why is it that
>
> a <- 1:3
> names(a) <- 1:3
> # works fine, but
>
> b <<- 1:3
> names(b) <<- 1:3
>
> ## used to work in R 1.9
> ## and gives
>> Error: Object "b" not found
> ## in R 2.0 ?
>

It was a bug in R 1.9.1 that this worked when typed at the top level. <<- 
is for use inside functions, eg:
> f<-function(x){
    b <<- x
    names(b) <<- x
  }
> f(1:3)
> b
1 2 3
1 2 3



 	-thomas

From terra at gnome.org  Mon Oct 25 18:04:08 2004
From: terra at gnome.org (Morten Welinder)
Date: Mon Oct 25 18:04:31 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
In-Reply-To: <x2fz46h1lo.fsf@biostat.ku.dk> (message from Peter Dalgaard on 22
	Oct 2004 23:41:55 +0200)
References: <20041022184744.457E61094C@slim.kubism.ku.dk>
	<x2fz46h1lo.fsf@biostat.ku.dk>
Message-ID: <20041025160408.BDF7B1422D5E@darter.rentec.com>


A little code study, formula study and experimentation reveals that the
situation is mostly fixable:

1. Get rid of the explicit alpha limit.  (A form of it is implicit in
   (2) and (3) below.)

2. Use the series formula when

       (x < alph + 10 && x < 0.99 * (alph + 1000))

   This guarantees that the sum converges reasonably fast.  (For extremely
   large x and alpha that will take about -53/log2(0.99) iterations for
   53 significant bits, i.e., about 3700 iterations.)

3. Use the continued fraction formula when

       (alph < x && alph - 100 < 0.99 * x)

   Aka, you don't want to use the formula either near the critical point
   where alpha/x ~ 1 unless the numbers are small.

4a. Go to a library and figure out how Temme does it for alpha near x,
    both large.  In this case the 0.99 from above could probably be
    lowered a lot for faster convergence.

or

4b. Use the pnorm approximation.  It seems to do a whole lot better for
    alpha near x than it did for the 10:1 case I quoted.

Comments, please.

Morten

From Whit.Armstrong at tudor.com  Mon Oct 25 18:16:21 2004
From: Whit.Armstrong at tudor.com (Whit Armstrong)
Date: Mon Oct 25 18:16:41 2004
Subject: [Rd] copyright issues when package maintainer changes
Message-ID: <7669F018DC9DD711AEC500065B3D5ABF042B3796@tudor.com>

I will be taking over as maintainer of the its package from Giles Heywood.
The code was originally written while he was working at Commerzbank.  I have
added the header below to the top of the R source file to indicate the
changes in the copyrights for the code.  The package was originally released
under GPL2.  I have no experience with copyright issues, and would
appreciate it if someone who does would kindly indicate whether the header
below is correct and conforms with normal practice.

Thanks in advance,
Whit Armstrong


<header in R source file itspkg.r>
#    itspkg.r: a time series library in R
#    Copyright (C) 2003 to June 2004 Commerzbank Securities
#    Copyright (C) June 2004 to present Whit Armstrong
#
#    This program is free software; you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation; either version 2 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program; if not, write to the Free Software
#    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
USA
</header in R source file itspkg.r>


	[[alternative HTML version deleted]]

From maechler at stat.math.ethz.ch  Mon Oct 25 20:19:18 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Oct 25 20:19:25 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
Message-ID: <20041025181918.65F86FB94@slim.kubism.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@gnome.org>
>>>>>     on Mon, 25 Oct 2004 12:04:08 -0400 (EDT) writes:

    Morten> A little code study, formula study and experimentation reveals that the
    Morten> situation is mostly fixable:

    Morten> 1. Get rid of the explicit alpha limit.  (A form of
    Morten> it is implicit in (2) and (3) below.)

    Morten> 2. Use the series formula when

    Morten> (x < alph + 10 && x < 0.99 * (alph + 1000))

    Morten> This guarantees that the sum converges reasonably
    Morten> fast.  (For extremely large x and alpha that will
    Morten> take about -53/log2(0.99) iterations for 53
    Morten> significant bits, i.e., about 3700 iterations.)

    Morten> 3. Use the continued fraction formula when

    Morten> (alph < x && alph - 100 < 0.99 * x)

    Morten> Aka, you don't want to use the formula either near
    Morten> the critical point where alpha/x ~ 1 unless the
    Morten> numbers are small.

    Morten> 4a. Go to a library and figure out how Temme does it
    Morten> for alpha near x, both large.  In this case the 0.99
    Morten> from above could probably be lowered a lot for
    Morten> faster convergence.

    Morten> or

    Morten> 4b. Use the pnorm approximation.  It seems to do a
    Morten> whole lot better for alpha near x than it did for
    Morten> the 10:1 case I quoted.

    Morten> Comments, please.

Hi Morten,
thanks a lot for your investigation.

I have spent quite a few working days exploring pgamma() and
also some alternatives.  The discontinuity is "well know".  I
vaguely remember my conclusions were a bit different - at least
over all problems (not only the one mentioned), it needed more
fixing. I think I had included Temme's paper (and others) in my study.

But really, I'm just talking from the top of my head; I will
take the time to look into my old testing scripts and
alternative C code; but just not this week (release of
bioconductor upcoming; other urgencies).

I'll be glad to also communicate with you offline on this topic
{and about pbeta() !}.  But "just not now".

Martin Maechler, ETH Zurich

From ripley at stats.ox.ac.uk  Mon Oct 25 20:59:16 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Oct 25 20:59:22 2004
Subject: [Rd] copyright issues when package maintainer changes
In-Reply-To: <7669F018DC9DD711AEC500065B3D5ABF042B3796@tudor.com>
Message-ID: <Pine.LNX.4.44.0410251952250.13084-100000@gannet.stats>

On Mon, 25 Oct 2004, Whit Armstrong wrote:

> I will be taking over as maintainer of the its package from Giles Heywood.
> The code was originally written while he was working at Commerzbank.  I have
> added the header below to the top of the R source file to indicate the
> changes in the copyrights for the code.  The package was originally released
> under GPL2.  I have no experience with copyright issues, and would
> appreciate it if someone who does would kindly indicate whether the header
> below is correct and conforms with normal practice.

Well, GPL2 is a licence, not a copyright.  I don't know what country you 
are in, whereas Giles was in the UK -- copyright issues are somewhat 
country-specific.

However, two recommendations:

1) only give the year of the changes.  They can overlap.
2) only add your copyright statement to files you actually change
(and not just change by adding a copyright statement but adding something 
with intellectual content).

This is all untested waters and let's hope it remains that way!

> Thanks in advance,
> Whit Armstrong
> 
> 
> <header in R source file itspkg.r>
> #    itspkg.r: a time series library in R
> #    Copyright (C) 2003 to June 2004 Commerzbank Securities
> #    Copyright (C) June 2004 to present Whit Armstrong
> #
> #    This program is free software; you can redistribute it and/or modify
> #    it under the terms of the GNU General Public License as published by
> #    the Free Software Foundation; either version 2 of the License, or
> #    (at your option) any later version.
> #
> #    This program is distributed in the hope that it will be useful,
> #    but WITHOUT ANY WARRANTY; without even the implied warranty of
> #    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> #    GNU General Public License for more details.
> #
> #    You should have received a copy of the GNU General Public License
> #    along with this program; if not, write to the Free Software
> #    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
> USA
> </header in R source file itspkg.r>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From andy_liaw at merck.com  Tue Oct 26 04:26:35 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue Oct 26 04:27:04 2004
Subject: [Rd] need help debugging on Windows
Message-ID: <3A822319EB35174CA3714066D590DCD50994E223@usrymx25.merck.com>

Dear R-devel,

Apologies for bothering y'all with this seemingly perennial question.  A
user reported problem with my most recent version of randomForest (4.4-1),
and I was able to reproduce it with his data with R-2.0.0 patched
(2004-10-24) on WinXP Pro.  The problem is that it crashes R on Windows.
However, it does not happen on Linux (tried SUSE ES8 on our Opterons and
Quantian on my laptop).  On Linux, the memory usage for the R process goes
up to about 130MB and stays there.  On Windows, the memory usage would
increase as the number of trees are grown (which already seem strange, as no
more memory allocation is being done as the trees are grown), reaches about
130MB, then starts to decline, and eventually crashes the Rgui (or Rterm)
process.  

My biggest problem is that I have not been able to get gdb to work under
WinXPPro, thus I've been relying on Linux for debugging.  This time I'm
really baffled, as the problem does not appear on Linux.  Can anyone provide
any hint/pointer?  I (and my hair) will be very, very grateful!

Best,
Andy

Andy Liaw, PhD
Biometrics Research      PO Box 2000, RY33-300     
Merck Research Labs           Rahway, NJ 07065
mailto:andy_liaw@merck.com        732-594-0820

From oehl_list at gmx.de  Tue Oct 26 13:38:21 2004
From: oehl_list at gmx.de (oehl_list@gmx.de)
Date: Tue Oct 26 13:38:29 2004
Subject: [Rd] rhyper has too high variance (PR#7314)
Message-ID: <20041026113821.9CBACEDE1@slim.kubism.ku.dk>


Dear all,

it looks like rhyper() gives wrong results compared to theory and compared
to sample() and rghyper(SuppDists).

Best regards


Jens



K <- 100
J <- 60
N <- K+J
p <- K/N
n <- 50

nn <- 100000

urn <- rep(0:1, c(J,K))
x <- sapply(1:nn, function(i){
	sum(sample(urn, n))
})
y <- rhyper(nn, K,J, n)

require(SuppDists)
z <- rghyper(nn, a=K, k=n, N=N)  


# hypergeometric mean and variance
p*n
p*(1-p)*n*(N-n)/(N-1)

# check we have parametrized ghyper correctly
sghyper(a=K, k=n, N=N)[c("Mean", "Variance")]

var(x)
var(y)  # wrong
var(z)

version



> K <- 100
> J <- 60
> N <- K+J
> p <- K/N
> n <- 50
> 
> nn <- 100000
> 
> urn <- rep(0:1, c(J,K))
> x <- sapply(1:nn, function(i){
+ sum(sample(urn, n))
+ })
> y <- rhyper(nn, K,J, n)
> 
> require(SuppDists)
[1] TRUE
> z <- rghyper(nn, a=K, k=n, N=N)  
> 
> 
> # hypergeometric mean and variance
> p*n
[1] 31.25
> p*(1-p)*n*(N-n)/(N-1)
[1] 8.107311
> 
> # check we have parametrized ghyper correctly
> sghyper(a=K, k=n, N=N)[c("Mean", "Variance")]
$Mean
[1] 31.25

$Variance
[1] 8.107311

> 
> var(x)
[1] 8.060095
> var(y)  # wrong
[1] 8.61289
> var(z)
[1] 8.150472
> 
> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    2              
minor    0.0            
year     2004           
month    10             
day      04             
language R






--

From pbourcier at cdcixis-cm.com  Tue Oct 26 13:59:01 2004
From: pbourcier at cdcixis-cm.com (Bourcier, Pascal)
Date: Tue Oct 26 13:59:21 2004
Subject: [Rd] R and objet database
Message-ID: <3E44E5AEE949DF4FA8E736AF13A8B31D05950453@mspereire.cm.net>

Does anyone has already tried to use R with an object database such as
O2 or objectore, or versant ?

Does anyone knows an api to store R object in such a database and to
load R object from such a database ? 
 


--------------------------------------------------------

Ce message et toutes les pieces jointes peuvent etre confidentiels, et, de plus, peuvent etre couverts par un privilege ou une protection legale. Il est etabli a l'intention exclusive de ses destinataires. Toute utilisation de ce message non conforme a sa destination, toute diffusion ou toute publication, totale ou partielle, est interdite, sauf autorisation expresse prealable. Toutes opinions exprimees dans ce message, sont personnelles a leur auteur et ne sauraient necessairement refleter celle de CDC IXIS / CDC IXIS Capital Markets, de ses filiales ou de sa maison mere. Elles sont aussi susceptibles de modification sans notification prealable. Tous droits reserves. Si vous recevez ce message par erreur, merci de le detruire et d'en avertir immediatement l'expediteur. Toute communication avec CDC IXIS / CDC IXIS Capital Markets peut etre controlee, enregistree et conservee. CDC IXIS / CDC IXIS Capital Markets decline toute responsabilite au titre de ce message s'il a ete altere, deforme ou falsifie. Les communications sur Internet n'etant pas securisees, CDC IXIS / CDC IXIS Capital Markets informe qu'il ne peut accepter aucune responsabilite quant au contenu de ce message.
 


This email and any attachment may be confidential and may also be legally privileged or otherwise protected from disclosure. It is intended only for the stated addressee(s) and access to it by any other person(s) is unauthorised. Any use, dissemination or disclosure not in accordance with its purpose, either in whole or in part, is prohibited without our prior formal approval. Any opinion expressed in this message may be personal to the author and may not necessarily reflect the opinion of CDC IXIS / CDC IXIS Capital Markets , its affiliates or of CDC. It may also be subject to change without prior notice. Copyright reserved. If you are not an addressee, you must not disclose, copy, circulate or in any other way use or rely on the information contained in this email. If you have received it in error, please inform us immediately and delete all copies. Any communication made with CDC IXIS / CDC IXIS Capital Markets (whether personal or business) may be monitored and a record kept. Neither CDC IXIS nor CDC IXIS Capital Markets shall be liable for the message if altered, changed or falsified. As communication on the Internet is not secure, CDC IXIS / CDC IXIS Capital Markets does not accept responsibility for the content of this message.
--------------------------------------------------------

	[[alternative HTML version deleted]]

From murdoch at stats.uwo.ca  Tue Oct 26 14:10:08 2004
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue Oct 26 14:10:12 2004
Subject: [Rd] need help debugging on Windows
In-Reply-To: <3A822319EB35174CA3714066D590DCD50994E223@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD50994E223@usrymx25.merck.com>
Message-ID: <h7fsn0lujpc3sssli0je0v3fenlmmte3f9@4ax.com>

On Mon, 25 Oct 2004 22:26:35 -0400, "Liaw, Andy" <andy_liaw@merck.com>
wrote :

>Dear R-devel,
>
>Apologies for bothering y'all with this seemingly perennial question.  A
>user reported problem with my most recent version of randomForest (4.4-1),
>and I was able to reproduce it with his data with R-2.0.0 patched
>(2004-10-24) on WinXP Pro.  The problem is that it crashes R on Windows.
>However, it does not happen on Linux (tried SUSE ES8 on our Opterons and
>Quantian on my laptop).  On Linux, the memory usage for the R process goes
>up to about 130MB and stays there.  On Windows, the memory usage would
>increase as the number of trees are grown (which already seem strange, as no
>more memory allocation is being done as the trees are grown), reaches about
>130MB, then starts to decline, and eventually crashes the Rgui (or Rterm)
>process.  
>
>My biggest problem is that I have not been able to get gdb to work under
>WinXPPro, thus I've been relying on Linux for debugging.  This time I'm
>really baffled, as the problem does not appear on Linux.  Can anyone provide
>any hint/pointer?  I (and my hair) will be very, very grateful!

No idea what's going wrong in randomForest, but I've got some hints
for debugging on

 http://www.stats.uwo.ca/faculty/murdoch/software/debuggingR

I've found both the MinGW and Cygwin versions of gdb work, and use it
under insight.  It's rather painful compared to other Windows
debuggers, but it does the job.  I've never been able to get ddd
going.

Duncan Murdoch

From murdoch at stats.uwo.ca  Tue Oct 26 14:28:06 2004
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Tue Oct 26 14:28:15 2004
Subject: [Rd] rhyper has too high variance (PR#7314)
Message-ID: <20041026122806.E3BABEAC0@slim.kubism.ku.dk>

On Tue, 26 Oct 2004 13:38:21 +0200 (CEST), oehl_list@gmx.de wrote :

>
>Dear all,
>
>it looks like rhyper() gives wrong results compared to theory and compared
>to sample() and rghyper(SuppDists).

I agree, these results look wrong.  The mean also seems high:

> set.seed(1)
> K <- 100
> J <- 60
> N <- K+J
> p <- K/N
> n <- 50
> x <- rhyper(1000000,K,J,n)
> mean(x)
[1] 31.47323
> sd(x)/1000
[1] 0.002925523
> p*n
[1] 31.25
> (mean(x) - p*n)/(sd(x)/1000)
[1] 76.30568

Duncan Murdoch

From bwheeler at echip.com  Tue Oct 26 14:38:33 2004
From: bwheeler at echip.com (Bob Wheeler)
Date: Tue Oct 26 14:38:42 2004
Subject: [Rd] rhyper has too high variance (PR#7314)
In-Reply-To: <20041026113821.9CBACEDE1@slim.kubism.ku.dk>
References: <20041026113821.9CBACEDE1@slim.kubism.ku.dk>
Message-ID: <417E4549.9030206@echip.com>

If one has phyper(x,m,n,k) then pghyper(x,k,m,m+n).

oehl_list@gmx.de wrote:

> Dear all,
> 
> it looks like rhyper() gives wrong results compared to theory and compared
> to sample() and rghyper(SuppDists).
> 
> Best regards
> 
> 
> Jens
> 
> 
> 
> K <- 100
> J <- 60
> N <- K+J
> p <- K/N
> n <- 50
> 
> nn <- 100000
> 
> urn <- rep(0:1, c(J,K))
> x <- sapply(1:nn, function(i){
> 	sum(sample(urn, n))
> })
> y <- rhyper(nn, K,J, n)
> 
> require(SuppDists)
> z <- rghyper(nn, a=K, k=n, N=N)  
> 
> 
> # hypergeometric mean and variance
> p*n
> p*(1-p)*n*(N-n)/(N-1)
> 
> # check we have parametrized ghyper correctly
> sghyper(a=K, k=n, N=N)[c("Mean", "Variance")]
> 
> var(x)
> var(y)  # wrong
> var(z)
> 
> version
> 
> 
> 
> 
>>K <- 100
>>J <- 60
>>N <- K+J
>>p <- K/N
>>n <- 50
>>
>>nn <- 100000
>>
>>urn <- rep(0:1, c(J,K))
>>x <- sapply(1:nn, function(i){
> 
> + sum(sample(urn, n))
> + })
> 
>>y <- rhyper(nn, K,J, n)
>>
>>require(SuppDists)
> 
> [1] TRUE
> 
>>z <- rghyper(nn, a=K, k=n, N=N)  
>>
>>
>># hypergeometric mean and variance
>>p*n
> 
> [1] 31.25
> 
>>p*(1-p)*n*(N-n)/(N-1)
> 
> [1] 8.107311
> 
>># check we have parametrized ghyper correctly
>>sghyper(a=K, k=n, N=N)[c("Mean", "Variance")]
> 
> $Mean
> [1] 31.25
> 
> $Variance
> [1] 8.107311
> 
> 
>>var(x)
> 
> [1] 8.060095
> 
>>var(y)  # wrong
> 
> [1] 8.61289
> 
>>var(z)
> 
> [1] 8.150472
> 
>>version
> 
>          _              
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    2              
> minor    0.0            
> year     2004           
> month    10             
> day      04             
> language R
> 
> 
> 
> 
> 
> 
> --
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 


-- 
Bob Wheeler --- http://www.bobwheeler.com/
         ECHIP, Inc. ---
Randomness comes in bunches.

From John.Marsland at CommerzbankIB.com  Tue Oct 26 18:54:28 2004
From: John.Marsland at CommerzbankIB.com (Marsland, John)
Date: Tue Oct 26 18:54:44 2004
Subject: [Rd] Problem with make recommended
Message-ID: <E65C272ECD3BD51196E500508B6658FE09A80ABB@xmx6lonib.lonib.commerzbank.com>

I have been having problems making the recommended packages under windows NT
when WINHELP is set to NO. It seems to go ahead and create the chm files and
then fall over with an error. The base packages work fine.

Clearly I can fix this myself messily, but I thought it might be useful
feedback.

Regards,

John Marsland

         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    2
minor    0.0
year     2004
month    10
day      04
language R


********************************************************************** 
This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}

From kjetil at acelerate.com  Wed Oct 27 00:59:46 2004
From: kjetil at acelerate.com (Kjetil Brinchmann Halvorsen)
Date: Wed Oct 27 04:31:17 2004
Subject: [Rd] Problem with make recommended
In-Reply-To: <E65C272ECD3BD51196E500508B6658FE09A80ABB@xmx6lonib.lonib.commerzbank.com>
References: <E65C272ECD3BD51196E500508B6658FE09A80ABB@xmx6lonib.lonib.commerzbank.com>
Message-ID: <417ED6E2.8010907@acelerate.com>

Marsland, John wrote:

>I have been having problems making the recommended packages under windows NT
>when WINHELP is set to NO. It seems to go ahead and create the chm files and
>then fall over with an error. The base packages work fine.
>
>  
>
I was bothered by this too, so just installed the HTML help workshop. 
It's a small download, so no problem.
Install also easy.

Kjetil


>Clearly I can fix this myself messily, but I thought it might be useful
>feedback.
>
>Regards,
>
>John Marsland
>
>         _
>platform i386-pc-mingw32
>arch     i386
>os       mingw32
>system   i386, mingw32
>status
>major    2
>minor    0.0
>year     2004
>month    10
>day      04
>language R
>
>
>********************************************************************** 
>This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>  
>


-- 

Kjetil Halvorsen.

Peace is the most effective weapon of mass construction.
               --  Mahdi Elmandjra

From ggrothendieck at myway.com  Wed Oct 27 06:39:51 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Wed Oct 27 06:40:06 2004
Subject: [Rd] NextMethod ignoring changed argument
Message-ID: <20041027043951.7E9B23982@mprdmxin.myway.com>



Is this a bug?  We define the [ operator for class test.
All it does is force drop to be FALSE and then calls
the NextMethod.  If we specify drop= in the call then 
it works as expected (### 2 and ### 3) but if we do not
specify drop (### 1) then it acts as if drop=TRUE
even though we have set it to FALSE within [.test .

> "[.test" <- function(x, i, j, drop = TRUE) { 
+ drop <- FALSE
+ NextMethod("[") 
+ }
> x <- structure(matrix(1:12, 4, 3), class = "test")

> x[1,]  ### 1 - why does it ignore drop=FALSE in [.test ????
[1] 1 5 9

> x[1,,drop = TRUE]  ### 2 - ok
     [,1] [,2] [,3]
[1,]    1    5    9
> x[1,,drop = FALSE]  ### 3 - ok
     [,1] [,2] [,3]
[1,]    1    5    9
> R.version.string # windows XP
[1] "R version 2.0.0, 2004-10-04"

From terra at gnome.org  Wed Oct 27 08:15:38 2004
From: terra at gnome.org (terra@gnome.org)
Date: Wed Oct 27 08:15:43 2004
Subject: [Rd] pgamma discontinuity (PR#7307)
Message-ID: <20041027061538.3C49E11020@slim.kubism.ku.dk>


For the record, this is what I am going to use in Gnumeric for now.

Morten



/*
 * Problems fixed.
 *
 * 1. x = -inf, scale = +inf: result now 0, was nan.
 *
 * 2. No discontinuity for very small alph.
 *      Old pgamma(1,1e-8,1,FALSE,TRUE) --> -19.9376 [ok]
 *      Old pgamma(1,0.9999999999e-8,1,FALSE,TRUE) --> -5556027.755 [bad]
 *    That's more than <dr_evil>two million</dr_evil> orders of magnitude caused
 *    by the pnorm approximation being used in an area it was not intended for.
 *
 * 3. No discontinuity at alph=100000.
 *      Old pgamma(1e6,100000,1,FALSE,TRUE) --> -669750.36332851 [ok]
 *      Old pgamma(1e6,100001,1,FALSE,TRUE) --> -599731.36192347 [bad]
 *
 * 4. Improved precision in calculating log of series sum using log1p.
 *
 * 5. Avoid using series and continued fraction too close to the critical
 *    line.
 *
 * 6. Improved precision of argument in pnorm approximation.
 *
 * 7. Use a power of 2 for rescaling in continued fraction so rescaling does
 *    not introduce any rounding errors.
 */





/*
 * Abramowitz and Stegun 6.5.29
 */
static double
pgamma_series_sum (double x, double alph)
{
     double sum = 0, c = 1, a = alph;

     do {
	  a += 1.;
	  c *= x / a;
	  sum += c;
     } while (c > DBL_EPSILON * sum);

     return sum;
}

/*
 * Abramowitz and Stegun 6.5.31
 */
static double
pgamma_cont_frac (double x, double alph)
{
     double a, b, n, an, pn1, pn2, pn3, pn4, pn5, pn6, sum, osum;
     double xlarge = pow (2, 128);

     a = 1. - alph;
     b = a + x + 1.;
     pn1 = 1.;
     pn2 = x;
     pn3 = x + 1.;
     pn4 = x * b;
     sum = pn3 / pn4;
     for (n = 1; ; n++) {
	  a += 1.;/* =   n+1 -alph */
	  b += 2.;/* = 2(n+1)-alph+x */
	  an = a * n;
	  pn5 = b * pn3 - an * pn1;
	  pn6 = b * pn4 - an * pn2;
	  if (fabs(pn6) > 0.) {
	       osum = sum;
	       sum = pn5 / pn6;
	       if (fabs(osum - sum) <= DBL_EPSILON * fmin2(1., sum))
		    break;
	  }
	  pn1 = pn3;
	  pn2 = pn4;
	  pn3 = pn5;
	  pn4 = pn6;
	  if (fabs(pn5) >= xlarge) {
	       /* re-scale the terms in continued fraction if they are large */
#ifdef DEBUG_p
	       REprintf(" [r] ");
#endif
	       pn1 /= xlarge;
	       pn2 /= xlarge;
	       pn3 /= xlarge;
	       pn4 /= xlarge;
	  }
     }

     return sum;
}


double pgamma(double x, double alph, double scale, int lower_tail, int log_p)
{
     double arg;

#ifdef IEEE_754
     if (ISNAN(x) || ISNAN(alph) || ISNAN(scale))
	  return x + alph + scale;
#endif
     if(alph <= 0. || scale <= 0.)
	  ML_ERR_return_NAN;
     if (x <= 0.)
	  return R_DT_0;
     x /= scale;
#ifdef IEEE_754
     if (ISNAN(x)) /* eg. original x = scale = +Inf */
	  return x;
#endif

     if (x < 0.99 * (alph + 1000) && x < 10 + alph && x < 10 * alph) {
	  /*
	   * The first condition makes sure that terms in the sum get at
	   * least 1% smaller, no later than after 1000 terms.
	   *
	   * The second condition makes sure that the terms start getting
	   * smaller (even if just a tiny bit) after no more than 10 terms.
	   *
	   * The third condition makes sure that the terms don't get huge
	   * before they start getting smaller.
	   */
	  double C1mls2p = /* 1 - log (sqrt (2 * M_PI)) */
	       0.081061466795327258219670263594382360138602526362216587182846;
	  double logsum = log1p (pgamma_series_sum (x, alph));
	  /*
	   * The first two terms here would cause cancellation for extremely
	   * large and near-equal x and alph.  The first condition above
	   * prevents that.
	   */
	  arg = (alph - x) + alph * log (x / (alph + 1)) + C1mls2p -
	       log1p (alph) / 2 - stirlerr (alph + 1) + logsum; 
     } else if (alph < x && alph - 100 < 0.99 * x) {
	  /*
	   * The first condition guarantees that we will start making
	   * a tiny bit of progress right now.
	   *
	   * The second condition guarantees that we will make decent
	   * progress after no more than 100 loops.
	   */
	  double lfrac = log (pgamma_cont_frac (x, alph));
	  arg = lfrac + alph * log(x) - x - lgammafn(alph);
	  lower_tail = !lower_tail;
     } else {
	  /*
	   * Approximation using pnorm.  We only get here for fairly large
	   * x and alph that are within 1% of each other.
	   */
	  double r3m1 = expm1 (log (x / alph) / 3);
	  return pnorm (sqrt (alph) * 3 * (r3m1 + 1 / (9 * alph)),
			0, 1, lower_tail, log_p);
     }

     if (lower_tail)
	  return log_p ? arg : exp(arg);
     else
	  return log_p ? R_Log1_Exp(arg) : -expm1(arg);
}

From ripley at stats.ox.ac.uk  Wed Oct 27 08:21:59 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Oct 27 08:22:07 2004
Subject: [Rd] Problem with make recommended
In-Reply-To: <417ED6E2.8010907@acelerate.com>
Message-ID: <Pine.LNX.4.44.0410270718080.18007-100000@gannet.stats>

It should be fixed now, and appear in the next R-patched/R-devel snapshot.

The ability not to build CHM was there for really old systems (those with 
IE < 4.0) and may get removed in due course (it is one more thing to test 
and maintain).

On Tue, 26 Oct 2004, Kjetil Brinchmann Halvorsen wrote:

> Marsland, John wrote:
> 
> >I have been having problems making the recommended packages under windows NT
> >when WINHELP is set to NO. It seems to go ahead and create the chm files and
> >then fall over with an error. The base packages work fine.
> >
> >  
> >
> I was bothered by this too, so just installed the HTML help workshop. 
> It's a small download, so no problem.
> Install also easy.
> 
> Kjetil
> 
> 
> >Clearly I can fix this myself messily, but I thought it might be useful
> >feedback.
> >
> >Regards,
> >
> >John Marsland
> >
> >         _
> >platform i386-pc-mingw32
> >arch     i386
> >os       mingw32
> >system   i386, mingw32
> >status
> >major    2
> >minor    0.0
> >year     2004
> >month    10
> >day      04
> >language R
> >
> >
> >********************************************************************** 
> >This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}
> >
> >______________________________________________
> >R-devel@stat.math.ethz.ch mailing list
> >https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >
> >  
> >
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ligges at statistik.uni-dortmund.de  Wed Oct 27 08:56:46 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Oct 27 08:56:37 2004
Subject: [Rd] NextMethod ignoring changed argument
In-Reply-To: <20041027043951.7E9B23982@mprdmxin.myway.com>
References: <20041027043951.7E9B23982@mprdmxin.myway.com>
Message-ID: <417F46AE.4080906@statistik.uni-dortmund.de>

Gabor Grothendieck wrote:

> 
> Is this a bug?  We define the [ operator for class test.
> All it does is force drop to be FALSE and then calls
> the NextMethod.  If we specify drop= in the call then 
> it works as expected (### 2 and ### 3) but if we do not
> specify drop (### 1) then it acts as if drop=TRUE
> even though we have set it to FALSE within [.test .
> 
> 
>>"[.test" <- function(x, i, j, drop = TRUE) { 
> 
> + drop <- FALSE
> + NextMethod("[") 
> + }
> 
>>x <- structure(matrix(1:12, 4, 3), class = "test")
> 
> 
>>x[1,]  ### 1 - why does it ignore drop=FALSE in [.test ????
> 
> [1] 1 5 9
> 
> 
>>x[1,,drop = TRUE]  ### 2 - ok
> 
>      [,1] [,2] [,3]
> [1,]    1    5    9
> 
>>x[1,,drop = FALSE]  ### 3 - ok
> 
>      [,1] [,2] [,3]
> [1,]    1    5    9
> 
>>R.version.string # windows XP
> 
> [1] "R version 2.0.0, 2004-10-04"
> 


Well, the *arguments* of the encolsing function are taken, but not the 
objects defined therein. What you can do is:

"[.test" <- function(x, i, j, drop = TRUE) {
     NextMethod("[", drop = FALSE)
}

Uwe Ligges

From ligges at statistik.uni-dortmund.de  Wed Oct 27 11:00:28 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed Oct 27 11:00:24 2004
Subject: [Rd] Re: [R] persp(), scatterplot3d(), "..." argument
In-Reply-To: <1098866288.16776.45.camel@biol102145.oulu.fi>
References: <a0600200ebda3cb456654@[139.166.242.29]>	<417F488C.7000405@statistik.uni-dortmund.de>	<1098862790.16776.29.camel@biol102145.oulu.fi>	<417F5844.4040206@statistik.uni-dortmund.de>
	<1098866288.16776.45.camel@biol102145.oulu.fi>
Message-ID: <417F63AC.7090309@statistik.uni-dortmund.de>

Jari Oksanen wrote:

> On Wed, 2004-10-27 at 11:11, Uwe Ligges wrote:
> 
>>Jari Oksanen wrote:
>>
>>
>>>On Wed, 2004-10-27 at 10:04, Uwe Ligges wrote:
>>>
>>>
>>>This is a larger problem if 
>>>1. one of the underlying functions does not have "..."
>>>2. you want to relay arguments to two or more underlying functions, and
>>>3. you don't want to list all possible arguments in your function
>>>definition, since it is long enough already.
>>>
>>>The solution is still there, but it is (black) magic. For instance,
>>>'arrows' does not have "...", so you must add them with this magical
>>>mystery string:
>>>
>>>formals(arrows) <- c(formals(arrows), alist(... = ))
>>
>>
>>You don't need it for simple things like:
>>
>>   foo <- function(...){
>>       plot(1:10)
>>       arrows(1,1,7,7,...)
>>   }
>>
>>foo(lwd=5) # works!
>>
> 
> That's why I had point 2 above: it really would work with simpler
> things. However, the following may fail:
> 
> 
>>parrow <- 
> 
> function (x, y, ...)
> {
>     plot(x, y, ...)
>     arrows(0, 0, x, y, ...)
>     invisible()
> }
> 
>>parrow(runif(10), runif(10), col="red") # works
>>parrow(runif(10), runif(10), col="red", pch=16)
> 
> Error in arrows(0, 0, x, y, ...) : unused argument(s) (pch ...)
> 
> Adding formals would help.
> 
>>As always, useful patches are welcome.
>>
> 
> 
> I don't know if this counts as a "useful patch", but it is patch anyway:
> 
> diff -u2r old/arrows.R new/arrows.R
> --- old/arrows.R        2004-10-27 11:32:25.000000000 +0300
> +++ new/arrows.R        2004-10-27 11:32:53.000000000 +0300
> @@ -1,5 +1,5 @@
>  "arrows" <-
>  function (x0, y0, x1, y1, length = 0.25, angle = 30, code = 2,
> -    col = par("fg"), lty = NULL, lwd = par("lwd"), xpd = NULL)
> +    col = par("fg"), lty = NULL, lwd = par("lwd"), xpd = NULL, ...)
>  {
>      .Internal(arrows(x0, y0, x1, y1, length = length, angle = angle,
> 

[moved to r-devel!]

At least a patch for the docs is missing (pointing out that passing args 
through "..." won't have any effect) - and depending on what R-core 
thinks about this issue.

Uwe Ligges



> cheers, jari oksanen

From p.dalgaard at biostat.ku.dk  Wed Oct 27 12:12:16 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Oct 27 12:12:26 2004
Subject: [Rd] rhyper has too high variance (PR#7314)
In-Reply-To: <20041026122806.E3BABEAC0@slim.kubism.ku.dk>
References: <20041026122806.E3BABEAC0@slim.kubism.ku.dk>
Message-ID: <x2lldsqxkv.fsf@biostat.ku.dk>

murdoch@stats.uwo.ca writes:

> On Tue, 26 Oct 2004 13:38:21 +0200 (CEST), oehl_list@gmx.de wrote :
> 
> >
> >Dear all,
> >
> >it looks like rhyper() gives wrong results compared to theory and compared
> >to sample() and rghyper(SuppDists).
> 
> I agree, these results look wrong.  The mean also seems high:

Yup, and inconsistent with phyper and dhyper (which is a good thing I
suppose)

> mean(rhyper(1e5,100,60,50))
[1] 31.47707
> sum(phyper(0:50,100,60,50,lower=F))
[1] 31.25
> sum(0:50*dhyper(0:50,100,60,50))
[1] 31.25

Looks like the effect is not due to the choice of random number
generator:

> RNGkind("Super-Duper")
> mean(rhyper(1e5,100,60,50))
[1] 31.45755



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ggrothendieck at myway.com  Wed Oct 27 15:21:39 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Wed Oct 27 15:21:52 2004
Subject: [Rd] NextMethod ignoring changed argument
References: <20041027043951.7E9B23982@mprdmxin.myway.com>
	<417F46AE.4080906@statistik.uni-dortmund.de>
Message-ID: <loom.20041027T151836-418@post.gmane.org>

Uwe Ligges <ligges@statistik.uni-dortmund.de> wrote:
:  
: Gabor Grothendieck wrote:
: 
: > 
: > Is this a bug? We define the [ operator for class test.
: > All it does is force drop to be FALSE and then calls
: > the NextMethod. If we specify drop= in the call then 
: > it works as expected (### 2 and ### 3) but if we do not
: > specify drop (### 1) then it acts as if drop=TRUE
: > even though we have set it to FALSE within [.test .
: > 
: > 
: >>"[.test" <- function(x, i, j, drop = TRUE) { 
: > 
: > + drop <- FALSE
: > + NextMethod("[") 
: > + }
: > 
: >>x <- structure(matrix(1:12, 4, 3), class = "test")
: > 
: > 
: >>x[1,] ### 1 - why does it ignore drop=FALSE in [.test ????
: > 
: > [1] 1 5 9
: > 
: > 
: >>x[1,,drop = TRUE] ### 2 - ok
: > 
: > [,1] [,2] [,3]
: > [1,] 1 5 9
: > 
: >>x[1,,drop = FALSE] ### 3 - ok
: > 
: > [,1] [,2] [,3]
: > [1,] 1 5 9
: > 
: >>R.version.string # windows XP
: > 
: > [1] "R version 2.0.0, 2004-10-04"
: > 
: 
: 
: Well, the *arguments* of the encolsing function are taken, but not the 
: objects defined therein. What you can do is:
: 
: "[.test" <- function(x, i, j, drop = TRUE) {
: NextMethod("[", drop = FALSE)
: }
: 
: Uwe Ligges

Thanks.  That worked.  Is that a workaround or is it a bug?
Note that if I set both i and drop within the [.test method then
the modified i gets passed but the modified drop does not:

R> "[.test" <- function(x, i, j, drop = TRUE) {
+      i <- 2; drop <- FALSE
+      NextMethod("[")
+ }
R> x <- structure(matrix(1:12, 4, 3), class = "test")
R> x[1,]
[1]  2  6 10

From rbaer at atsu.edu  Wed Oct 27 16:25:34 2004
From: rbaer at atsu.edu (rbaer@atsu.edu)
Date: Wed Oct 27 16:25:39 2004
Subject: [Rd] wish - cor.test output order change (PR#7315)
Message-ID: <20041027142534.711BB11363@slim.kubism.ku.dk>

Full_Name: Rob Baer
Version: 2.0.0
OS: Windows
Submission from: (NULL) (198.209.172.106)


Request/wish summary: state the alternative hypothesis before the t-test and
p-value

A typical cor.test output looks like the following:
> x=runif(30)*10
> y=runif(30)*10
> cor.test(x,y)

        Pearson's product-moment correlation

data:  x and y 
t = 0.6161, df = 28, p-value = 0.5428
alternative hypothesis: true correlation is not equal to 0 
95 percent confidence interval:
 -0.2552588  0.4568795 
sample estimates:
      cor 
0.1156454 
--------------------------------------------------------------
Rationale
I have the recurring problem of students misinterpreting the alternative
hypothesis statement as an interpretation of the t-test p-value not as a "tail
decision".  The "quick students" think R has made a mistake.  The "slow
students" (please save me) accept the alternative hypothesis with huge p-values
"because the program told them to".  All students seem confused. If this had
affected a single group of students, I'd let it go, but this is a recurring
theme with each new crop.

Proposed fix.  Generaly, we decide on an alternative hypothesis (or should) as
an a priori statement. I think that there would be MUCH LESS confusing if the
printed hypothesis statement came BEFORE the t-test and p-value output.  This
should put it in conceptual sequence; it would not be so easily confused with an
interpretation.  

This same problem happens in some other test output as well.  For these, a
similar order change could greatly reduce confusion about what is being stated. 
If the output code is shared, the fix would only have to be done once.

Thanks for considering it.

From clayton.springer at pharma.novartis.com  Wed Oct 27 22:12:45 2004
From: clayton.springer at pharma.novartis.com (clayton.springer@pharma.novartis.com)
Date: Wed Oct 27 22:15:52 2004
Subject: [Rd] errors compiling R-2.0.0
Message-ID: <OF3C384766.2D205EC9-ON85256F3A.006DACC2-85256F3A.006F4B69@EU.novartis.net>

Dear R-devel,

I have been trying to compile R-2.0.0 on under linux, with the usual

./configure
make

I get the errors

Warning message:
package seems to be using lazy loading already in: 
makeLazyLoading("tools")
Error in get(x, envir, mode, inherits) : variable 
".install_package_description" was not found
Execution halted

This same configuration of linux successfully installed and runs R-1.9.1.

Any suggestions for where to look for problems? I noticed that someone 
experienced similar problem under Windows.

thanks,

Clayton
	[[alternative HTML version deleted]]

From hb at maths.lth.se  Wed Oct 27 23:31:47 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Wed Oct 27 23:32:00 2004
Subject: [Rd] errors compiling R-2.0.0
In-Reply-To: <OF3C384766.2D205EC9-ON85256F3A.006DACC2-85256F3A.006F4B69@EU.novartis.net>
Message-ID: <003801c4bc6c$5eefa4f0$320040d5@hblaptop>

Hi. I get exactly the same error when installing R v2.0.0 on Sun Solaris 9
(also as root). R has been installing perfectly fine since at least R v1.4.1
on the same machine. Unfortunately, I haven't got around to troubleshoot
much, but now I at least know that it's not just our Sun Solaris system that
is the problem.

Regards,

Henrik Bengtsson

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of 
> clayton.springer@pharma.novartis.com
> Sent: Wednesday, October 27, 2004 10:13 PM
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] errors compiling R-2.0.0
> 
> 
> Dear R-devel,
> 
> I have been trying to compile R-2.0.0 on under linux, with the usual
> 
> ./configure
> make
> 
> I get the errors
> 
> Warning message:
> package seems to be using lazy loading already in: 
> makeLazyLoading("tools")
> Error in get(x, envir, mode, inherits) : variable 
> ".install_package_description" was not found
> Execution halted
> 
> This same configuration of linux successfully installed and 
> runs R-1.9.1.
> 
> Any suggestions for where to look for problems? I noticed 
> that someone 
> experienced similar problem under Windows.
> 
> thanks,
> 
> Clayton
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-devel

From ggrothendieck at myway.com  Thu Oct 28 01:38:55 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Thu Oct 28 01:39:02 2004
Subject: [Rd] Another problem with next method
Message-ID: <loom.20041028T013716-745@post.gmane.org>


I have another problem with NextMethod.  Not sure if its related
to the last problem.

In this example, we have a generic called ff with methods
for AsIs and test classes.  We call the generic with an
object of AsIs class.  The corresponding method adds 1 to it
and then changes the class to test followed by issuing a
NextMethod.  However, that results in this error (using R
2.0.0, 2004-10-04 Windows XP):

	Error in NextMethod("ff") : No method to invoke

Why can't NextMethod find ff.test ?

I also tried a number of variations of this including adding x = x
to the NExtMethod argument list but none of these variations worked.

---

ff <- function(x, ...) UseMethod("ff")
ff.AsIs <- function(x, ...) {
	x <- x + 1
	class(x) <- "test"
	NextMethod("ff")
}
ff.test <- function(x, ...) cat(x, class(x), ..., "\n")
ff(I(3))

From ggrothendieck at myway.com  Thu Oct 28 03:02:04 2004
From: ggrothendieck at myway.com (Gabor Grothendieck)
Date: Thu Oct 28 03:02:10 2004
Subject: [Rd] Another problem with next method
References: <loom.20041028T013716-745@post.gmane.org>
Message-ID: <loom.20041028T030023-254@post.gmane.org>

Gabor Grothendieck <ggrothendieck <at> myway.com> writes:

: 
: I have another problem with NextMethod.  Not sure if its related
: to the last problem.
: 
: In this example, we have a generic called ff with methods
: for AsIs and test classes.  We call the generic with an
: object of AsIs class.  The corresponding method adds 1 to it
: and then changes the class to test followed by issuing a
: NextMethod.  However, that results in this error (using R
: 2.0.0, 2004-10-04 Windows XP):
: 
: 	Error in NextMethod("ff") : No method to invoke
: 
: Why can't NextMethod find ff.test ?
: 
: I also tried a number of variations of this including adding x = x
: to the NExtMethod argument list but none of these variations worked.
: 
: ---
: 
: ff <- function(x, ...) UseMethod("ff")
: ff.AsIs <- function(x, ...) {
: 	x <- x + 1
: 	class(x) <- "test"
: 	NextMethod("ff")
: }
: ff.test <- function(x, ...) cat(x, class(x), ..., "\n")
: ff(I(3))


Just in case there is some doubt the following example is almost
identical to the one on page 74 of the Writing Extensions manual
and gives the same error message cited above:

ff <- function(x) UseMethod("ff")
ff.data.frame <- function(x)
{
	x <- as.matrix(x)
	NextMethod("ff")
}
ff.matrix <- function(x) dim(x)
data(iris)
ff(iris)

From mcintosh at research.telcordia.com  Thu Oct 28 05:09:42 2004
From: mcintosh at research.telcordia.com (mcintosh@research.telcordia.com)
Date: Thu Oct 28 05:09:47 2004
Subject: [Rd] POSIX time anomaly (PR#7317)
Message-ID: <20041028030942.DC5D411350@slim.kubism.ku.dk>

Full_Name: Allen McIntosh
Version: 2.0.0
OS: RedHat 9.0
Submission from: (NULL) (67.80.175.118)


The POSIX time printing routine gives strange results when asked to print a time
that is exactly midnight:

TZ=CST6CDT R -q --no-save
> strptime("10/5/2004 00:00:01 CDT", "%m/%d/%Y %H:%M:%S %Z")
[1] "2004-10-05 00:00:01"
> strptime("10/5/2004 00:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z")
[1] "2004-10-05"
> strptime("10/4/2004 24:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z")
[1] NA 

The first time is OK.  The second is missing the HH:MM:SS.
I'm OK with the last one being NA, just did it to see if that was the way that
the code wanted midnight.

Get the underlying # seconds:

> zz <- as.POSIXct(strptime("10/5/2004 00:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z"))
> attr(zz,"class") <- NULL
> zz
[1] 1096952400
attr(,"tzone")
[1] ""
> 

and (just to see if the problem is glibc or something):
$ cat ct.c
#include <time.h>
#include <stdio.h>
main() {
        time_t z = 1096952400;
        printf("%s\n", ctime(&z));
        return 0;
}
$ gcc -o ct ct.c
$ TZ=CST6CDT ./ct
Tue Oct  5 00:00:00 2004

This problem also observed with R 1.6.0 and R 1.8.1 (RedHat 7.3)
The timezone doesn't seem to matter - this is just the first date that tripped
over this problem.

From ripley at stats.ox.ac.uk  Thu Oct 28 08:24:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 28 08:24:46 2004
Subject: [Rd] POSIX time anomaly (PR#7317)
In-Reply-To: <20041028030942.DC5D411350@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410280713490.30877-100000@gannet.stats>

This is intentional: why did you send a bug report?  Please read the 
section on BUGS in the FAQ and tell us how this contradicts the 
documentation.

If you want a particular output format, you need to specify it:

x <- strptime("10/5/2004 00:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z")
format(x, "%Y-%m-%d %H:%M:%S")
[1] "2004-10-05 00:00:00"

but print() is allowed to suppress 0's.  Did you bother to read the code:

> format.POSIXlt
function (x, format = "", usetz = FALSE, ...)
{
    if (!inherits(x, "POSIXlt"))
        stop("wrong class")
    if (format == "") {
        times <- unlist(unclass(x)[1:3])
        format <- if (all(times[!is.na(times)] == 0))
            "%Y-%m-%d"
        else "%Y-%m-%d %H:%M:%S"
    }
    .Internal(format.POSIXlt(x, format, usetz))
}

?

On Thu, 28 Oct 2004 mcintosh@research.telcordia.com wrote:

> Full_Name: Allen McIntosh
> Version: 2.0.0
> OS: RedHat 9.0
> Submission from: (NULL) (67.80.175.118)
> 
> 
> The POSIX time printing routine gives strange results when asked to print a time
> that is exactly midnight:
> 
> TZ=CST6CDT R -q --no-save
> > strptime("10/5/2004 00:00:01 CDT", "%m/%d/%Y %H:%M:%S %Z")
> [1] "2004-10-05 00:00:01"
> > strptime("10/5/2004 00:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z")
> [1] "2004-10-05"
> > strptime("10/4/2004 24:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z")
> [1] NA 
> 
> The first time is OK.  The second is missing the HH:MM:SS.
> I'm OK with the last one being NA, 

We don't need your permission: this is as documented.

> just did it to see if that was the way that
> the code wanted midnight.
> 
> Get the underlying # seconds:
> 
> > zz <- as.POSIXct(strptime("10/5/2004 00:00:00 CDT", "%m/%d/%Y %H:%M:%S %Z"))
> > attr(zz,"class") <- NULL
> > zz
> [1] 1096952400
> attr(,"tzone")
> [1] ""
> > 
> 
> and (just to see if the problem is glibc or something):
> $ cat ct.c
> #include <time.h>
> #include <stdio.h>
> main() {
>         time_t z = 1096952400;
>         printf("%s\n", ctime(&z));
>         return 0;
> }
> $ gcc -o ct ct.c
> $ TZ=CST6CDT ./ct
> Tue Oct  5 00:00:00 2004

What has ctime() to do with this?

> This problem also observed with R 1.6.0 and R 1.8.1 (RedHat 7.3)
> The timezone doesn't seem to matter - this is just the first date that tripped
> over this problem.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jhallman at frb.gov  Thu Oct 28 17:01:31 2004
From: jhallman at frb.gov (jhallman@frb.gov)
Date: Thu Oct 28 17:01:34 2004
Subject: [Rd] Internal function isUME() in findGeneric() is wrong (PR#7320)
Message-ID: <20041028150131.073BE11350@slim.kubism.ku.dk>

Full_Name: Jeff Hallman
Version: 2.0
OS: Linux
Submission from: (NULL) (132.200.32.34)


The function findGeneric() in the utils namespace contains this internal
function:

  isUME <- function(e) {
        if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
            switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
                "{" = isUMEbrace(e), "if" = isUMEif(e), "")
        }
        else ""
    }

This fails if the generic called UseMethod() without an argument, which is
perfectly legal.  Changing it to this seems to work:

  isUME <- function(e) {
    if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
      switch(as.character(e[[1]]), 
             UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
             "{" = isUMEbrace(e),
             "if" = isUMEif(e),
             "")
    }
    else ""
  }


Jeff

From kwythers at umn.edu  Thu Oct 28 19:34:26 2004
From: kwythers at umn.edu (Kirk R. Wythers)
Date: Thu Oct 28 19:34:36 2004
Subject: [Rd] akima error
Message-ID: <9D674DF8-2907-11D9-9804-000A95C4BF06@umn.edu>

I am trying to load the GRASS library and am getting the following 
error:

 > library(GRASS)
Loading required package: akima
Error: package 'akima' could not be loaded
In addition: Warning message:
There is no package called 'akima' in: library(pkg, character.only = 
TRUE, logical = TRUE, lib.loc = lib.loc)

This is on R 2.0.0, library(GRASS) is installed, and update.packages() 
has been run.

Thanks

Kirk R. Wythers	
Dept. of Forest Resources
University of Minnesota
email: kwythers@umn.edu
tel: 612.625.2261
fax: 612.625.5212

From ripley at stats.ox.ac.uk  Thu Oct 28 19:55:58 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 28 19:56:02 2004
Subject: [Rd] akima error
In-Reply-To: <9D674DF8-2907-11D9-9804-000A95C4BF06@umn.edu>
Message-ID: <Pine.LNX.4.44.0410281854440.21778-100000@gannet.stats>

On Thu, 28 Oct 2004, Kirk R. Wythers wrote:

> I am trying to load the GRASS library and am getting the following 
> error:
> 
>  > library(GRASS)
> Loading required package: akima
> Error: package 'akima' could not be loaded
> In addition: Warning message:
> There is no package called 'akima' in: library(pkg, character.only = 
> TRUE, logical = TRUE, lib.loc = lib.loc)
> 
> This is on R 2.0.0, library(GRASS) is installed, and update.packages() 
> has been run.

But has install.packages("akima") been run?
OR install.packages("GRASS", dependencies = TRUE) ?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kwythers at umn.edu  Thu Oct 28 21:23:30 2004
From: kwythers at umn.edu (Kirk R. Wythers)
Date: Thu Oct 28 21:23:48 2004
Subject: [Rd] akima error
In-Reply-To: <Pine.LNX.4.44.0410281854440.21778-100000@gannet.stats>
References: <Pine.LNX.4.44.0410281854440.21778-100000@gannet.stats>
Message-ID: <D9ECB39D-2916-11D9-BF43-000A95C4BF06@umn.edu>


On Oct 28, 2004, at 12:55 PM, Prof Brian Ripley wrote:

>> Loading required package: akima
>> Error: package 'akima' could not be loaded
>> In addition: Warning message:
>> There is no package called 'akima' in: library(pkg, character.only =
>> TRUE, logical = TRUE, lib.loc = lib.loc)
>>
>> This is on R 2.0.0, library(GRASS) is installed, and update.packages()
>> has been run.
>
> But has install.packages("akima") been run?
> OR install.packages("GRASS", dependencies = TRUE) ?
>

Thank you.

install.packages("GRASS", dependencies=TRUE)

worked splendidly.

Kirk


Kirk R. Wythers	
Dept. of Forest Resources
University of Minnesota
email: kwythers@umn.edu
tel: 612.625.2261
fax: 612.625.5212

From ripley at stats.ox.ac.uk  Thu Oct 28 23:48:48 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Oct 28 23:48:55 2004
Subject: [Rd] (PR#7320) Internal function isUME() in findGeneric() is wrong
In-Reply-To: <20041028150131.073BE11350@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410282233360.13955-100000@gannet.stats>

The issue is the use of UseMethod(), which you claim to be valid.  As it
is inconsistent with the prime documentation, the help page, I would
question if it is `perfectly legal'.  I expect the author of isUME
implemented the behaviour described on the help page.

It is documented in S-PLUS as *strongly discouraged*, and although it is
documented in R-lang, I believe the right thing to do is to make the code
agree with the prime documentation.

I see no uses of UseMethod() in the R sources, and on CRAN only
one in a comment (and none in BioC).

On Thu, 28 Oct 2004 jhallman@frb.gov wrote:

> Full_Name: Jeff Hallman
> Version: 2.0
> OS: Linux
> Submission from: (NULL) (132.200.32.34)
> 
> 
> The function findGeneric() in the utils namespace contains this internal
> function:
> 
>   isUME <- function(e) {
>         if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
>             switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
>                 "{" = isUMEbrace(e), "if" = isUMEif(e), "")
>         }
>         else ""
>     }
> 
> This fails if the generic called UseMethod() without an argument, which is
> perfectly legal.  Changing it to this seems to work:
> 
>   isUME <- function(e) {
>     if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
>       switch(as.character(e[[1]]), 
>              UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
>              "{" = isUMEbrace(e),
>              "if" = isUMEif(e),
>              "")
>     }
>     else ""
>   }
> 
> 
> Jeff
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From S.J.Eglen at damtp.cam.ac.uk  Fri Oct 29 12:47:46 2004
From: S.J.Eglen at damtp.cam.ac.uk (S.J.Eglen@damtp.cam.ac.uk)
Date: Fri Oct 29 12:47:50 2004
Subject: [Rd] R-exts.texi: suggestion for small change to Vignette section
	(PR#7323)
Message-ID: <20041029104746.3E41711345@slim.kubism.ku.dk>

I recently wrote a vignette, with the following at the top of the .Rnw
file:

%%\VignetteIndexEntry{How to use look up tables for h() functions}
%%\VignetteDepends{sjedmin, spatstat}

Using vExplorer() on this function, I got an error from this part of
getVigInfo():

    lines <- grep("^%[[:space:]]*\\\\Vignette", file)
    if (length(lines) == 0) 
        stop("File ", vig, " does not appear to be a vignette file, ", 
            "no vignette metadata available.")

The error occurs here because the grep expects only one % at the start
of the line, whereas I had %%.  (I often use two at the start of a
line as I'm used to the ESS/Emacs coding habits of putting ## at the
start of a line.)  Changing %% to % solved the problem okay.  

So, my minor suggestion to R-exts.texi, at line 1011:

@code{\VignetteIndexEntry} statement is best placed in La@TeX{} comment,

is that maybe it should say either:

"in a La@TeX{} comment"

or 

"in a La@TeX{} comment with a single %"

although admittedly that sounds a bit clunky!

Thanks, Stephen

From Kurt.Hornik at wu-wien.ac.at  Fri Oct 29 13:04:43 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Fri Oct 29 13:03:00 2004
Subject: [Rd] R-exts.texi: suggestion for small change to Vignette section
	(PR#7323)
In-Reply-To: <20041029104746.3E41711345@slim.kubism.ku.dk>
References: <20041029104746.3E41711345@slim.kubism.ku.dk>
Message-ID: <16770.9163.426132.367153@mithrandir.hornik.net>

>>>>> S J Eglen writes:

> I recently wrote a vignette, with the following at the top of the .Rnw
> file:

> %%\VignetteIndexEntry{How to use look up tables for h() functions}
> %%\VignetteDepends{sjedmin, spatstat}

> Using vExplorer() on this function, I got an error from this part of
> getVigInfo():

>     lines <- grep("^%[[:space:]]*\\\\Vignette", file)
>     if (length(lines) == 0) 
>         stop("File ", vig, " does not appear to be a vignette file, ", 
>             "no vignette metadata available.")

> The error occurs here because the grep expects only one % at the start
> of the line, whereas I had %%.  (I often use two at the start of a
> line as I'm used to the ESS/Emacs coding habits of putting ## at the
> start of a line.)  Changing %% to % solved the problem okay.  

> So, my minor suggestion to R-exts.texi, at line 1011:

> @code{\VignetteIndexEntry} statement is best placed in La@TeX{} comment,

> is that maybe it should say either:

> "in a La@TeX{} comment"

> or 

> "in a La@TeX{} comment with a single %"

> although admittedly that sounds a bit clunky!

Hmm, why not change the Sweave code to support multiple comment chars?

The code for index computations on vignettes is based on

vignetteMetaRE <- function(tag)
    paste("[[:space:]]*%+[[:space:]]*\\\\Vignette", tag,
          "\{([^}]*)\}", sep = "")

-k

From ripley at stats.ox.ac.uk  Fri Oct 29 13:04:17 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 29 13:04:25 2004
Subject: [Rd] (PR#7323)R-exts.texi: suggestion for small change to Vignette
	section
In-Reply-To: <20041029104746.3E41711345@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0410291158370.22986-100000@gannet.stats>

Is this not a bug in `vExplorer' (unexplained, but I believe in a BioC 
package -- by no means all R users have any experience of BioC)?

Why change the docs to a limitation of some application not part of 
core R?  

I do wonder why you sent this to R-bugs and not to the maintainer of
vExplorer.  Or was this a very minor comment on English grammar padded by 
something not relevant?

On Fri, 29 Oct 2004 S.J.Eglen@damtp.cam.ac.uk wrote:

> I recently wrote a vignette, with the following at the top of the .Rnw
> file:
> 
> %%\VignetteIndexEntry{How to use look up tables for h() functions}
> %%\VignetteDepends{sjedmin, spatstat}
> 
> Using vExplorer() on this function, I got an error from this part of
> getVigInfo():
> 
>     lines <- grep("^%[[:space:]]*\\\\Vignette", file)
>     if (length(lines) == 0) 
>         stop("File ", vig, " does not appear to be a vignette file, ", 
>             "no vignette metadata available.")
> 
> The error occurs here because the grep expects only one % at the start
> of the line, whereas I had %%.  (I often use two at the start of a
> line as I'm used to the ESS/Emacs coding habits of putting ## at the
> start of a line.)  Changing %% to % solved the problem okay.  
> 
> So, my minor suggestion to R-exts.texi, at line 1011:
> 
> @code{\VignetteIndexEntry} statement is best placed in La@TeX{} comment,
> 
> is that maybe it should say either:
> 
> "in a La@TeX{} comment"
> 
> or 
> 
> "in a La@TeX{} comment with a single %"
> 
> although admittedly that sounds a bit clunky!
> 
> Thanks, Stephen
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From martin.koechy at gmx.net  Fri Oct 29 13:07:47 2004
From: martin.koechy at gmx.net (martin.koechy@gmx.net)
Date: Fri Oct 29 13:07:50 2004
Subject: [Rd] wide spacing in plotmath() (PR#7324)
Message-ID: <20041029110747.1EA8511349@slim.kubism.ku.dk>

Full_Name: Martin K?chy
Version: 2.0.0
OS: Mac OS X 10.3.5
Submission from: (NULL) (141.89.60.147)


Using plotmath produces text whose spacing is very wide. I used the provided
example
x <- seq(-4, 4, len = 101)
y <- cbind(sin(x), cos(x))
matplot(x, y, type = "l", xaxt = "n",
        main = expression(paste(plain(sin) * phi, "  and  ",
                                plain(cos) * phi)),
        ylab = expression("sin" * phi, "cos" * phi), # only 1st is taken
        xlab = expression(paste("Phase Angle ", phi)),
        col.main = "blue")
axis(1, at = c(-pi, -pi/2, 0, pi/2, pi),
     lab = expression(-pi, -pi/2, 0, pi/2, pi))

which produces
      s  i  n   phi   a  n  d              c  o  s    phi
at the top of the graph in the quartz device, the remainder is similarly oddly
spaced. The odd spacing also occurs in demo(plotmath).

I tried the same with R2.0.0 under Windows 2000 where the graphical output was
OK.

From Friedrich.Leisch at tuwien.ac.at  Fri Oct 29 13:16:17 2004
From: Friedrich.Leisch at tuwien.ac.at (Friedrich.Leisch@tuwien.ac.at)
Date: Fri Oct 29 13:16:19 2004
Subject: [Rd] R-exts.texi: suggestion for small change to Vignette section
	(PR#7325)
Message-ID: <20041029111617.9331511358@slim.kubism.ku.dk>

>>>>> On Fri, 29 Oct 2004 12:47:46 +0200 (CEST),
>>>>> S J Eglen (SJE) wrote:

  > I recently wrote a vignette, with the following at the top of the .Rnw
  > file:

  > %%\VignetteIndexEntry{How to use look up tables for h() functions}
  > %%\VignetteDepends{sjedmin, spatstat}

  > Using vExplorer() on this function, I got an error from this part of
  > getVigInfo():

  >     lines <- grep("^%[[:space:]]*\\\\Vignette", file)
  >     if (length(lines) == 0) 
  >         stop("File ", vig, " does not appear to be a vignette file, ", 
  >             "no vignette metadata available.")

  > The error occurs here because the grep expects only one % at the start
  > of the line, whereas I had %%.  (I often use two at the start of a
  > line as I'm used to the ESS/Emacs coding habits of putting ## at the
  > start of a line.)  Changing %% to % solved the problem okay.  

  > So, my minor suggestion to R-exts.texi, at line 1011:

  > @code{\VignetteIndexEntry} statement is best placed in La@TeX{} comment,

  > is that maybe it should say either:

  > "in a La@TeX{} comment"

  > or 

  > "in a La@TeX{} comment with a single %"

  > although admittedly that sounds a bit clunky!


That's a bug in getVigInfo(), not a bug in the R documentation (I also
use %% for the same reason).

Jeff: the regexp should certainly be ^%+[[:space:]]*\\\\Vignette", but
there is now also code in package tools which can be used to extract
the info directly.

Best,
Fritz

From Friedrich.Leisch at tuwien.ac.at  Fri Oct 29 13:16:05 2004
From: Friedrich.Leisch at tuwien.ac.at (Friedrich.Leisch@tuwien.ac.at)
Date: Fri Oct 29 13:17:02 2004
Subject: [Rd] R-exts.texi: suggestion for small change to Vignette section
	(PR#7323)
In-Reply-To: <20041029104746.3E41711345@slim.kubism.ku.dk>
References: <20041029104746.3E41711345@slim.kubism.ku.dk>
Message-ID: <16770.9845.663096.869757@celebrian.ci.tuwien.ac.at>

>>>>> On Fri, 29 Oct 2004 12:47:46 +0200 (CEST),
>>>>> S J Eglen (SJE) wrote:

  > I recently wrote a vignette, with the following at the top of the .Rnw
  > file:

  > %%\VignetteIndexEntry{How to use look up tables for h() functions}
  > %%\VignetteDepends{sjedmin, spatstat}

  > Using vExplorer() on this function, I got an error from this part of
  > getVigInfo():

  >     lines <- grep("^%[[:space:]]*\\\\Vignette", file)
  >     if (length(lines) == 0) 
  >         stop("File ", vig, " does not appear to be a vignette file, ", 
  >             "no vignette metadata available.")

  > The error occurs here because the grep expects only one % at the start
  > of the line, whereas I had %%.  (I often use two at the start of a
  > line as I'm used to the ESS/Emacs coding habits of putting ## at the
  > start of a line.)  Changing %% to % solved the problem okay.  

  > So, my minor suggestion to R-exts.texi, at line 1011:

  > @code{\VignetteIndexEntry} statement is best placed in La@TeX{} comment,

  > is that maybe it should say either:

  > "in a La@TeX{} comment"

  > or 

  > "in a La@TeX{} comment with a single %"

  > although admittedly that sounds a bit clunky!


That's a bug in getVigInfo(), not a bug in the R documentation (I also
use %% for the same reason).

Jeff: the regexp should certainly be ^%+[[:space:]]*\\\\Vignette", but
there is now also code in package tools which can be used to extract
the info directly.

Best,
Fritz

From benson200310 at yahoo.com.tw  Fri Oct 29 13:45:55 2004
From: benson200310 at yahoo.com.tw (benson200310@yahoo.com.tw)
Date: Fri Oct 29 13:46:03 2004
Subject: [Rd] =?iso-8859-1?q?Yahoo!=A9=5F=BC=AF=A6=DB=B0=CA=A6=5E=A8=E7?=
Message-ID: <200410291146.i9TBjxt7017361@hypatia.math.ethz.ch>

A non-text attachment was scrubbed...
Name: not available
Type: text
Size: 969 bytes
Desc: not available
Url : https://stat.ethz.ch/pipermail/r-devel/attachments/20041029/a1ad68d3/attachment.ksh
From stefano.iacus at unimi.it  Fri Oct 29 14:25:40 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Fri Oct 29 14:48:53 2004
Subject: [Rd] wide spacing in plotmath() (PR#7324)
In-Reply-To: <20041029110747.1EA8511349@slim.kubism.ku.dk>
References: <20041029110747.1EA8511349@slim.kubism.ku.dk>
Message-ID: <A5AA9992-29A5-11D9-8C74-000A95C87F66@unimi.it>

This bug has been fixed. It is not a bug specific to the R internals 
but to the R.app version of the quartz device (R.app, i.e. the GUI, 
embeds the R.framework, i.e. R 2.0.0 in your case).

You should look at http://www.economia.unimi.it/R to get the latest 
build of R.app or to get instructions on how to build (just) R.app from 
the latest sources.

stefano

On Oct 29, 2004, at 1:07 PM, martin.koechy@gmx.net wrote:

> Full_Name: Martin K?chy
> Version: 2.0.0
> OS: Mac OS X 10.3.5
> Submission from: (NULL) (141.89.60.147)
>
>
> Using plotmath produces text whose spacing is very wide. I used the 
> provided
> example
> x <- seq(-4, 4, len = 101)
> y <- cbind(sin(x), cos(x))
> matplot(x, y, type = "l", xaxt = "n",
>         main = expression(paste(plain(sin) * phi, "  and  ",
>                                 plain(cos) * phi)),
>         ylab = expression("sin" * phi, "cos" * phi), # only 1st is 
> taken
>         xlab = expression(paste("Phase Angle ", phi)),
>         col.main = "blue")
> axis(1, at = c(-pi, -pi/2, 0, pi/2, pi),
>      lab = expression(-pi, -pi/2, 0, pi/2, pi))
>
> which produces
>       s  i  n   phi   a  n  d              c  o  s    phi
> at the top of the graph in the quartz device, the remainder is 
> similarly oddly
> spaced. The odd spacing also occurs in demo(plotmath).
>
> I tried the same with R2.0.0 under Windows 2000 where the graphical 
> output was
> OK.
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

From m1jjh00 at frb.gov  Fri Oct 29 20:37:21 2004
From: m1jjh00 at frb.gov (Jeffrey J. Hallman)
Date: Fri Oct 29 20:38:17 2004
Subject: [Rd] (PR#7320) Internal function isUME() in findGeneric() is
	wrong 
In-Reply-To: Message from Prof Brian Ripley <ripley@stats.ox.ac.uk> of "Thu,
	28 Oct 2004 22:48:48 BST."
	<Pine.LNX.4.44.0410282233360.13955-100000@gannet.stats> 
Message-ID: <20041029183721.2955CAEA05@mail.rsma.frb.gov>

OK, I looked at the documentation and you're right about that.  However,
I'm curious about why the first argument to UseMethod is ever necessary.
Is there ever a good reason for it to be something other than the name
of the calling function?  (Wouldn't that lead to confusing code?)  If
not, why bother with it at all?

I've become spoiled by programming a lot recently in Smalltalk, which is
the cleanest language I've used yet.

Jeff


Prof Brian Ripley <ripley@stats.ox.ac.uk> wrote:

  br> The issue is the use of UseMethod(), which you claim to be valid.  As it
  br> is inconsistent with the prime documentation, the help page, I would
  br> question if it is `perfectly legal'.  I expect the author of isUME
  br> implemented the behaviour described on the help page.

  br> It is documented in S-PLUS as *strongly discouraged*, and although it is
  br> documented in R-lang, I believe the right thing to do is to make the code
  br> agree with the prime documentation.

  br> I see no uses of UseMethod() in the R sources, and on CRAN only
  br> one in a comment (and none in BioC).

  br> On Thu, 28 Oct 2004 jhallman@frb.gov wrote:

  >> Full_Name: Jeff Hallman
  >> Version: 2.0
  >> OS: Linux
  >> Submission from: (NULL) (132.200.32.34)
  >> 
  >> 
  >> The function findGeneric() in the utils namespace contains this internal
  >> function:
  >> 
  >> isUME <- function(e) {
  >> if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
  >> switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
  >> "{" = isUMEbrace(e), "if" = isUMEif(e), "")
  >> }
  >> else ""
  >> }
  >> 
  >> This fails if the generic called UseMethod() without an argument, which is
  >> perfectly legal.  Changing it to this seems to work:
  >> 
  >> isUME <- function(e) {
  >> if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
  >> switch(as.character(e[[1]]), 
  >> UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
  >> "{" = isUMEbrace(e),
  >> "if" = isUMEif(e),
  >> "")
  >> }
  >> else ""
  >> }
  >> 
  >> 
  >> Jeff
  >> 
  >> ______________________________________________
  >> R-devel@stat.math.ethz.ch mailing list
  >> https://stat.ethz.ch/mailman/listinfo/r-devel
  >> 
  >> 

  br> -- 
  br> Brian D. Ripley,                  ripley@stats.ox.ac.uk
  br> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
  br> University of Oxford,             Tel:  +44 1865 272861 (self)
  br> 1 South Parks Road,                     +44 1865 272866 (PA)
  br> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Oct 29 20:43:01 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Oct 29 20:43:08 2004
Subject: [Rd] (PR#7320) Internal function isUME() in findGeneric() is
	wrong 
In-Reply-To: <20041029183721.2955CAEA05@mail.rsma.frb.gov>
Message-ID: <Pine.LNX.4.44.0410291940490.1758-100000@gannet.stats>

On Fri, 29 Oct 2004, Jeffrey J. Hallman wrote:

> OK, I looked at the documentation and you're right about that.  However,
> I'm curious about why the first argument to UseMethod is ever necessary.
> Is there ever a good reason for it to be something other than the name
> of the calling function?  (Wouldn't that lead to confusing code?)  If
> not, why bother with it at all?

Yes. See coefficients(), fitted.values(). Also, you can have anonymous 
functions in R, operator functions ....

> 
> I've become spoiled by programming a lot recently in Smalltalk, which is
> the cleanest language I've used yet.
> 
> Jeff
> 
> 
> Prof Brian Ripley <ripley@stats.ox.ac.uk> wrote:
> 
>   br> The issue is the use of UseMethod(), which you claim to be valid.  As it
>   br> is inconsistent with the prime documentation, the help page, I would
>   br> question if it is `perfectly legal'.  I expect the author of isUME
>   br> implemented the behaviour described on the help page.
> 
>   br> It is documented in S-PLUS as *strongly discouraged*, and although it is
>   br> documented in R-lang, I believe the right thing to do is to make the code
>   br> agree with the prime documentation.
> 
>   br> I see no uses of UseMethod() in the R sources, and on CRAN only
>   br> one in a comment (and none in BioC).
> 
>   br> On Thu, 28 Oct 2004 jhallman@frb.gov wrote:
> 
>   >> Full_Name: Jeff Hallman
>   >> Version: 2.0
>   >> OS: Linux
>   >> Submission from: (NULL) (132.200.32.34)
>   >> 
>   >> 
>   >> The function findGeneric() in the utils namespace contains this internal
>   >> function:
>   >> 
>   >> isUME <- function(e) {
>   >> if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
>   >> switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
>   >> "{" = isUMEbrace(e), "if" = isUMEif(e), "")
>   >> }
>   >> else ""
>   >> }
>   >> 
>   >> This fails if the generic called UseMethod() without an argument, which is
>   >> perfectly legal.  Changing it to this seems to work:
>   >> 
>   >> isUME <- function(e) {
>   >> if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
>   >> switch(as.character(e[[1]]), 
>   >> UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
>   >> "{" = isUMEbrace(e),
>   >> "if" = isUMEif(e),
>   >> "")
>   >> }
>   >> else ""
>   >> }
>   >> 
>   >> 
>   >> Jeff
>   >> 
>   >> ______________________________________________
>   >> R-devel@stat.math.ethz.ch mailing list
>   >> https://stat.ethz.ch/mailman/listinfo/r-devel
>   >> 
>   >> 
> 
>   br> -- 
>   br> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>   br> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>   br> University of Oxford,             Tel:  +44 1865 272861 (self)
>   br> 1 South Parks Road,                     +44 1865 272866 (PA)
>   br> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jmc at r-project.org  Fri Oct 29 22:25:34 2004
From: jmc at r-project.org (John Chambers)
Date: Fri Oct 29 22:25:43 2004
Subject: [Rd] (PR#7320) Internal function isUME() in findGeneric() is wrong
In-Reply-To: <20041029183721.2955CAEA05@mail.rsma.frb.gov>
References: <20041029183721.2955CAEA05@mail.rsma.frb.gov>
Message-ID: <4182A73E.9080604@R-project.org>

Jeffrey J. Hallman wrote:

>OK, I looked at the documentation and you're right about that.  However,
>I'm curious about why the first argument to UseMethod is ever necessary.
>Is there ever a good reason for it to be something other than the name
>of the calling function?  (Wouldn't that lead to confusing code?)  If
>not, why bother with it at all?
>
>I've become spoiled by programming a lot recently in Smalltalk, which is
>the cleanest language I've used yet.
>  
>

It's not simply a matter of cleanliness.  Different languages have 
different computing models, which allow different programming 
techniques.  The model underlying R uses ideas from functional 
programming, and in particular the idea that the meaning of a function 
should be as clear as possible from the function itself.  UseMethod() 
clearly tells  you less than UseMethod("coef").

More practically, it's not always clear what "the name of the calling 
function" is, or that such a name has anything to do with the 
computation.  It's the function _as an object_ that should determine 
what happens.  There's nothing in the language that says you shouldn't 
make a vector of function objects, (f[1] <- coef; f[2] <- resid, etc. ) 
and then call (f[i])(myModel).

In S3 methods, the generic function is just a plain "function" object, 
so any convention for hiding "the name" in the object must be somewhat 
of a hack.  In S4, the generic function class could (and does)  have a 
slot in the object to identify the generic, so the issue is less 
obvious.  But one could still argue for using an explicit name when 
dispatching, on the grounds of clarity. 

>Jeff
>
>
>Prof Brian Ripley <ripley@stats.ox.ac.uk> wrote:
>
>  br> The issue is the use of UseMethod(), which you claim to be valid.  As it
>  br> is inconsistent with the prime documentation, the help page, I would
>  br> question if it is `perfectly legal'.  I expect the author of isUME
>  br> implemented the behaviour described on the help page.
>
>  br> It is documented in S-PLUS as *strongly discouraged*, and although it is
>  br> documented in R-lang, I believe the right thing to do is to make the code
>  br> agree with the prime documentation.
>
>  br> I see no uses of UseMethod() in the R sources, and on CRAN only
>  br> one in a comment (and none in BioC).
>
>  br> On Thu, 28 Oct 2004 jhallman@frb.gov wrote:
>
>  >> Full_Name: Jeff Hallman
>  >> Version: 2.0
>  >> OS: Linux
>  >> Submission from: (NULL) (132.200.32.34)
>  >> 
>  >> 
>  >> The function findGeneric() in the utils namespace contains this internal
>  >> function:
>  >> 
>  >> isUME <- function(e) {
>  >> if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
>  >> switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
>  >> "{" = isUMEbrace(e), "if" = isUMEif(e), "")
>  >> }
>  >> else ""
>  >> }
>  >> 
>  >> This fails if the generic called UseMethod() without an argument, which is
>  >> perfectly legal.  Changing it to this seems to work:
>  >> 
>  >> isUME <- function(e) {
>  >> if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
>  >> switch(as.character(e[[1]]), 
>  >> UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
>  >> "{" = isUMEbrace(e),
>  >> "if" = isUMEif(e),
>  >> "")
>  >> }
>  >> else ""
>  >> }
>  >> 
>  >> 
>  >> Jeff
>  >> 
>  >> ______________________________________________
>  >> R-devel@stat.math.ethz.ch mailing list
>  >> https://stat.ethz.ch/mailman/listinfo/r-devel
>  >> 
>  >> 
>
>  br> -- 
>  br> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>  br> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>  br> University of Oxford,             Tel:  +44 1865 272861 (self)
>  br> 1 South Parks Road,                     +44 1865 272866 (PA)
>  br> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>  
>

From jmc at R-project.org  Fri Oct 29 22:25:45 2004
From: jmc at R-project.org (jmc@R-project.org)
Date: Fri Oct 29 22:25:50 2004
Subject: [Rd] (PR#7320) Internal function isUME() in findGeneric() is
Message-ID: <20041029202545.AA7C11135C@slim.kubism.ku.dk>

Jeffrey J. Hallman wrote:

>OK, I looked at the documentation and you're right about that.  However,
>I'm curious about why the first argument to UseMethod is ever necessary.
>Is there ever a good reason for it to be something other than the name
>of the calling function?  (Wouldn't that lead to confusing code?)  If
>not, why bother with it at all?
>
>I've become spoiled by programming a lot recently in Smalltalk, which is
>the cleanest language I've used yet.
>  
>

It's not simply a matter of cleanliness.  Different languages have 
different computing models, which allow different programming 
techniques.  The model underlying R uses ideas from functional 
programming, and in particular the idea that the meaning of a function 
should be as clear as possible from the function itself.  UseMethod() 
clearly tells  you less than UseMethod("coef").

More practically, it's not always clear what "the name of the calling 
function" is, or that such a name has anything to do with the 
computation.  It's the function _as an object_ that should determine 
what happens.  There's nothing in the language that says you shouldn't 
make a vector of function objects, (f[1] <- coef; f[2] <- resid, etc. ) 
and then call (f[i])(myModel).

In S3 methods, the generic function is just a plain "function" object, 
so any convention for hiding "the name" in the object must be somewhat 
of a hack.  In S4, the generic function class could (and does)  have a 
slot in the object to identify the generic, so the issue is less 
obvious.  But one could still argue for using an explicit name when 
dispatching, on the grounds of clarity. 

>Jeff
>
>
>Prof Brian Ripley <ripley@stats.ox.ac.uk> wrote:
>
>  br> The issue is the use of UseMethod(), which you claim to be valid.  As it
>  br> is inconsistent with the prime documentation, the help page, I would
>  br> question if it is `perfectly legal'.  I expect the author of isUME
>  br> implemented the behaviour described on the help page.
>
>  br> It is documented in S-PLUS as *strongly discouraged*, and although it is
>  br> documented in R-lang, I believe the right thing to do is to make the code
>  br> agree with the prime documentation.
>
>  br> I see no uses of UseMethod() in the R sources, and on CRAN only
>  br> one in a comment (and none in BioC).
>
>  br> On Thu, 28 Oct 2004 jhallman@frb.gov wrote:
>
>  >> Full_Name: Jeff Hallman
>  >> Version: 2.0
>  >> OS: Linux
>  >> Submission from: (NULL) (132.200.32.34)
>  >> 
>  >> 
>  >> The function findGeneric() in the utils namespace contains this internal
>  >> function:
>  >> 
>  >> isUME <- function(e) {
>  >> if (is.call(e) && (is.name(e[[1]]) || is.character(e[[1]]))) {
>  >> switch(as.character(e[[1]]), UseMethod = as.character(e[[2]]), 
>  >> "{" = isUMEbrace(e), "if" = isUMEif(e), "")
>  >> }
>  >> else ""
>  >> }
>  >> 
>  >> This fails if the generic called UseMethod() without an argument, which is
>  >> perfectly legal.  Changing it to this seems to work:
>  >> 
>  >> isUME <- function(e) {
>  >> if(is.call(e) &&(is.name(e[[1]]) || is.character(e[[1]]))) {
>  >> switch(as.character(e[[1]]), 
>  >> UseMethod = ifelse(length(e) == 1, fname, as.character(e[[2]])), 
>  >> "{" = isUMEbrace(e),
>  >> "if" = isUMEif(e),
>  >> "")
>  >> }
>  >> else ""
>  >> }
>  >> 
>  >> 
>  >> Jeff
>  >> 
>  >> ______________________________________________
>  >> R-devel@stat.math.ethz.ch mailing list
>  >> https://stat.ethz.ch/mailman/listinfo/r-devel
>  >> 
>  >> 
>
>  br> -- 
>  br> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>  br> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>  br> University of Oxford,             Tel:  +44 1865 272861 (self)
>  br> 1 South Parks Road,                     +44 1865 272866 (PA)
>  br> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>  
>

From deepayan at stat.wisc.edu  Fri Oct 29 23:33:51 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Fri Oct 29 23:33:54 2004
Subject: [Rd] (inappropriate) manipulation of expression objects causes
	segfault (PR#7326)
Message-ID: <20041029213351.DAF0C1134D@slim.kubism.ku.dk>


> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    2
minor    1.0
year     2004
month    10
day      25
language R
>
> foo <- expression(alpha, beta, gamma)
> foo[2]
expression(beta)
> foo[2] <- NA
> foo ## or str(foo)
Segmentation fault

(Same behaviour in R 1.9.1)

'foo[[2]] <- NA' works fine, though.

Deepayan

From p.dalgaard at biostat.ku.dk  Fri Oct 29 23:53:34 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Oct 29 23:53:51 2004
Subject: [Rd] (inappropriate) manipulation of expression objects causes
	segfault (PR#7326)
In-Reply-To: <20041029213351.DAF0C1134D@slim.kubism.ku.dk>
References: <20041029213351.DAF0C1134D@slim.kubism.ku.dk>
Message-ID: <x24qkdi42p.fsf@biostat.ku.dk>

deepayan@stat.wisc.edu writes:

> > foo <- expression(alpha, beta, gamma)
> > foo[2]
> expression(beta)
> > foo[2] <- NA
> > foo ## or str(foo)
> Segmentation fault
> 
> (Same behaviour in R 1.9.1)
> 
> 'foo[[2]] <- NA' works fine, though.

Right. The NA is not important; foo[2] <- 1 crashes R just as
effectively. We should likely either give an error or demote [ to [[.
The latter is what happens with lists, and expressions are basically
just list of call objects (or names or constants). To wit:

> x <- list(1,2,3)
> x[2] <- 1
> x
[[1]]
[1] 1

[[2]]
[1] 1

[[3]]
[1] 3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From simon.urbanek at math.uni-augsburg.de  Sat Oct 30 05:28:54 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Sat Oct 30 05:28:55 2004
Subject: [Rd] Destructive str(...)?
Message-ID: <D3643DB9-2A23-11D9-ABE2-0003938AF008@math.uni-augsburg.de>

I have encountered a strange behavior of the str function - it seems to 
modify the object that is displayed. Probably I'm using something 
unsupported (objects consisting just of an external reference), but 
still I'm curious as of why this happens. I create (in C code) 
EXTPTRSXP and associate a class to it via SET_CLASS. Such objects works 
fine until it's passed to str as the following output demonstrates:

 > c<-.MCall("RController","getRController")
 > c
[1] "<RController: 0x3be5d0>"
 > str(c)
Class 'ObjCid' length 1 <pointer: 0x3be5d0>
 > c
<pointer: 0x3be5d0>
 > str(c)
length 1 <pointer: 0x3be5d0>

The .MCall basically produces an external reference and assigns a class 
(ObjCid) to it. There's a corresponding print method and it works fine. 
However, when str is called, it strips the class information from the 
object as a repeated call to str also shows:

  > str(c); str(c)
Class 'ObjCid' length 1 <pointer: 0x3be5d0>
length 1 <pointer: 0x3be5d0>

Is this behavior intentional, undocumented or simply wrong?

Cheers,
Simon

[Tested with R 2.0.0 release (2004-10-04) on Mac OS X 10.3.5 - I have 
currently no other machine to test it on, but I very much suspect that 
this is platform-independent.]

the C code used to generate the object:

SEXP class, sref = R_MakeExternalPtr((void*) obj, R_NilValue, 
R_NilValue);
PROTECT(class = allocVector(STRSXP, 1));
SET_STRING_ELT(class, 0, mkChar("ObjCid"));
SET_CLASS(sref, class);
UNPROTECT(1);

From ripley at stats.ox.ac.uk  Sat Oct 30 10:18:41 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Oct 30 10:19:02 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <D3643DB9-2A23-11D9-ABE2-0003938AF008@math.uni-augsburg.de>
Message-ID: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>

On Fri, 29 Oct 2004, Simon Urbanek wrote:

> I have encountered a strange behavior of the str function - it seems to 
> modify the object that is displayed. Probably I'm using something 
> unsupported (objects consisting just of an external reference), but 

Yes, and I think it is documented somewhere, but I can't lay my hands on 
it right now.

> still I'm curious as of why this happens. I create (in C code) 
> EXTPTRSXP and associate a class to it via SET_CLASS. Such objects works 
> fine until it's passed to str as the following output demonstrates:
> 
>  > c<-.MCall("RController","getRController")
>  > c
> [1] "<RController: 0x3be5d0>"
>  > str(c)
> Class 'ObjCid' length 1 <pointer: 0x3be5d0>
>  > c
> <pointer: 0x3be5d0>
>  > str(c)
> length 1 <pointer: 0x3be5d0>
> 
> The .MCall basically produces an external reference and assigns a class 
> (ObjCid) to it. There's a corresponding print method and it works fine. 
> However, when str is called, it strips the class information from the 
> object as a repeated call to str also shows:
> 
>   > str(c); str(c)
> Class 'ObjCid' length 1 <pointer: 0x3be5d0>
> length 1 <pointer: 0x3be5d0>
> 
> Is this behavior intentional, undocumented or simply wrong?

The issue is almost certainly that something has forgotten/decided not to
either set or respect SET_NAMED on the object, so when str does

	object <- unclass(object)

or some such, the original object gets changed.  Now the `something' has 
to be C code: possibly yours but probably something in R itself.

I think this is intentional.  External references do not get copied, and
the advice I recall is to wrap them in a list for use at R level (and
before setting a class on them).  In RODBC I took another tack, and attach
the reference as an attribute to a `documentation' object.

str() probably ought to be more cautious when it encounters at external 
reference or similar exotic object, since it will look at list elements 
and attributes.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From luke at stat.uiowa.edu  Sat Oct 30 18:16:33 2004
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Sat Oct 30 18:16:40 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>
References: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>
Message-ID: <Pine.LNX.4.61.0410301104170.5261@itasca2.stat.uiowa.edu>

On Sat, 30 Oct 2004, Prof Brian Ripley wrote:

> On Fri, 29 Oct 2004, Simon Urbanek wrote:
>
>> I have encountered a strange behavior of the str function - it seems to
>> modify the object that is displayed. Probably I'm using something
>> unsupported (objects consisting just of an external reference), but
>
> Yes, and I think it is documented somewhere, but I can't lay my hands on
> it right now.
>
>> still I'm curious as of why this happens. I create (in C code)
>> EXTPTRSXP and associate a class to it via SET_CLASS. Such objects works
>> fine until it's passed to str as the following output demonstrates:
>>
>> > c<-.MCall("RController","getRController")
>> > c
>> [1] "<RController: 0x3be5d0>"
>> > str(c)
>> Class 'ObjCid' length 1 <pointer: 0x3be5d0>
>> > c
>> <pointer: 0x3be5d0>
>> > str(c)
>> length 1 <pointer: 0x3be5d0>
>>
>> The .MCall basically produces an external reference and assigns a class
>> (ObjCid) to it. There's a corresponding print method and it works fine.
>> However, when str is called, it strips the class information from the
>> object as a repeated call to str also shows:
>>
>>  > str(c); str(c)
>> Class 'ObjCid' length 1 <pointer: 0x3be5d0>
>> length 1 <pointer: 0x3be5d0>
>>
>> Is this behavior intentional, undocumented or simply wrong?
>
> The issue is almost certainly that something has forgotten/decided not to
> either set or respect SET_NAMED on the object, so when str does
>
> 	object <- unclass(object)
>
> or some such, the original object gets changed.  Now the `something' has
> to be C code: possibly yours but probably something in R itself.
>
> I think this is intentional.  External references do not get copied, and
> the advice I recall is to wrap them in a list for use at R level (and
> before setting a class on them).  In RODBC I took another tack, and attach
> the reference as an attribute to a `documentation' object.
>
> str() probably ought to be more cautious when it encounters at external
> reference or similar exotic object, since it will look at list elements
> and attributes.

It's probably just unclass itself, not an issue with NAMED. External
references are one of a handful of objects that are handled as
references to mutable objects rather than as immutable values (the
main other one being environments).  unclass is destructive when
applied to a reference object.  At some point it might make sense to
make unclass signal an error when used on a reference object, and
clean up the things this breaks, including str and a number of other
print methods.  On the other hand, the same issue exists with all
attributes on referece objects, so the safest approach is to use a
wrapper as Brian suggests.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From mcintosh at research.telcordia.com  Sat Oct 30 19:03:54 2004
From: mcintosh at research.telcordia.com (Allen Mcintosh)
Date: Sat Oct 30 19:04:28 2004
Subject: [Rd] POSIX time anomaly (PR#7317)
In-Reply-To: <Pine.LNX.4.44.0410280713490.30877-100000@gannet.stats> from
	"Prof Brian Ripley" at Oct 28, 2004 07:24:35 AM
Message-ID: <200410301703.NAA11741@hazy.research.telcordia.com>

A simple statement such as "The difference between the behavior of R and
ctime() is deliberate and documented" would have sufficed.

From p.dalgaard at biostat.ku.dk  Sat Oct 30 23:55:46 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat Oct 30 23:56:11 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <Pine.LNX.4.61.0410301104170.5261@itasca2.stat.uiowa.edu>
References: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>
	<Pine.LNX.4.61.0410301104170.5261@itasca2.stat.uiowa.edu>
Message-ID: <x2brejna59.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:
> > str() probably ought to be more cautious when it encounters at external
> > reference or similar exotic object, since it will look at list elements
> > and attributes.
> 
> It's probably just unclass itself, not an issue with NAMED. External
> references are one of a handful of objects that are handled as
> references to mutable objects rather than as immutable values (the
> main other one being environments).  unclass is destructive when
> applied to a reference object.  At some point it might make sense to
> make unclass signal an error when used on a reference object, and
> clean up the things this breaks, including str and a number of other
> print methods.  On the other hand, the same issue exists with all
> attributes on referece objects, so the safest approach is to use a
> wrapper as Brian suggests.

Argh. I think this means that there is a bug in the tcltk code since
tclObj class objects are exactly external references with a class
attribute. It doesn't seem to have bitten anyone yet, though. Or were
you saying that we should fix str() instead?

Anyways, Tcl objects do provide a rather nice illustration of why
reference objects are non-duplicatable (which is the reason behind
unclass being destructive). They have a finalizer that decrements the
Tcl reference count when the R object is destroyed. To avoid bad
things resulting from decreasing the refcount multiple times,
duplication would require an increment of the reference count, and R
just isn't geared to do that: we'd need to introduce something like an
R_RegisterCDuplicator function.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From simon.urbanek at math.uni-augsburg.de  Sun Oct 31 05:00:23 2004
From: simon.urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Sun Oct 31 05:00:23 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <x2brejna59.fsf@biostat.ku.dk>
References: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>
	<Pine.LNX.4.61.0410301104170.5261@itasca2.stat.uiowa.edu>
	<x2brejna59.fsf@biostat.ku.dk>
Message-ID: <6401039C-2AF1-11D9-B02D-0003938AF008@math.uni-augsburg.de>

Thank you all for your replies. I wrapped the reference in a LISTSXP 
and everyone's happy (I know that the docs say one ought to do so right 
away, but I was curious what breaks ;)).

On Oct 30, 2004, at 5:55 PM, Peter Dalgaard wrote:

> Anyways, Tcl objects do provide a rather nice illustration of why
> reference objects are non-duplicatable (which is the reason behind
> unclass being destructive). They have a finalizer that decrements the
> Tcl reference count when the R object is destroyed. To avoid bad
> things resulting from decreasing the refcount multiple times,

Now, hold on a second - I thought the main point of EXTPTR is that the 
finalizer is called only once, that is when the last instance of the 
reference is disposed of by the gc (no matter how many copies existed 
meanwhile). Am I wrong and/or did I miss something? I did some tests 
which support my view, but one never knows ...

Cheers,
Simon

From laifang1 at yahoo.com  Sun Oct 31 08:17:58 2004
From: laifang1 at yahoo.com (fang lai)
Date: Sun Oct 31 08:18:06 2004
Subject: [Rd] (no subject)
Message-ID: <20041031071758.20288.qmail@web50405.mail.yahoo.com>

Dear all,
 I have several questions regarding fisher.test() in
R, and I'd highly appreciate any help with it.
 I have a group of observations, each having people's
income, and an indicator of whether selected in or out
a program. I want to test the difference between
income of people who are in and out.
 Because the distribution is far from normal, I decide
to use the fisher's exact test, using either mean or
rank as statistics.
 Question 0 is: Can I do this test using fisher.test()
in R?
If so,
 My first question is: Does fisher.test() offer an
option to choose the statistics? Actually it is not
clear from the help to me what statistics it uses.
Does it just compare the mean of people in and out of
the program?
 My second question is: when the group is large, I
always receive a warning message such as "Fisher exact
result might not be right"  when I set "hybrid=T".
When I set "hybrid=F", it does return a result of
p-value without warning message. I wonder if this
p-value is reliable or not. And, how does it get the
approximation of p-value when "hybrid=F"? Ideally, it
should randomly draw, say 1000 times, from the full
sets of permutation of assignment, and get an
approximate p-value--is this the way it works in
fisher.test( ) in R? If not, does it use another test,
or some other measure of approximation?
 My last question is: when the group is small enough,
will it calculates the exact probabilities even if
hybrid=F?
Many thanks,

Fang 

=====
Lai, Fang

PhD candidate
University of California, Berkeley
Department of Agricultural and Resource Economics
314 Giannini Hall, Berkeley, CA 94720-3310
tel: (510) 643 - 5421(O)
     (510) 847 - 9811(Cell)
fax: (510) 643 - 8911
email: lai@are.berkeley.edu
http://www.are.berkeley.edu/jobmarket/fang.html

From laifang1 at yahoo.com  Sun Oct 31 08:49:45 2004
From: laifang1 at yahoo.com (fang lai)
Date: Sun Oct 31 08:49:53 2004
Subject: [Rd] another question about fisher.test
Message-ID: <20041031074945.27751.qmail@web50405.mail.yahoo.com>

Dear all,
 I have another question about fisher.test:
Is there any way to save the resulting p-value in a
matrix or file after a loop as below?
 for (i in 1:42) {
# testing difference in income(pinc) between people in
# (with in1=1) and out (with in1=0) of the program for
# group i
fisher.test(m$pinc[m$group==i], m$in1[m$group==i],
workspace=40000000, hybrid=F)}

 When I run this loop, there is no results shown on
the terminal. I wonder if there is a way to store the
result for each i in a file or matrix.
Many thanks,

Fang

 

=====
Lai, Fang

PhD candidate
University of California, Berkeley
Department of Agricultural and Resource Economics
314 Giannini Hall, Berkeley, CA 94720-3310
tel: (510) 643 - 5421(O)
     (510) 847 - 9811(Cell)
fax: (510) 643 - 8911
email: lai@are.berkeley.edu
http://www.are.berkeley.edu/jobmarket/fang.html

From p.dalgaard at biostat.ku.dk  Sun Oct 31 11:01:30 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Oct 31 11:01:52 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <6401039C-2AF1-11D9-B02D-0003938AF008@math.uni-augsburg.de>
References: <Pine.LNX.4.44.0410300859130.4649-100000@gannet.stats>
	<Pine.LNX.4.61.0410301104170.5261@itasca2.stat.uiowa.edu>
	<x2brejna59.fsf@biostat.ku.dk>
	<6401039C-2AF1-11D9-B02D-0003938AF008@math.uni-augsburg.de>
Message-ID: <x2r7nfkxz9.fsf@biostat.ku.dk>

Simon Urbanek <simon.urbanek@math.uni-augsburg.de> writes:

> Now, hold on a second - I thought the main point of EXTPTR is that the
> finalizer is called only once, that is when the last instance of the
> reference is disposed of by the gc (no matter how many copies existed
> meanwhile). Am I wrong and/or did I miss something? I did some tests
> which support my view, but one never knows ...

How do you ensure that the finalizer is called once? By *not* copying
the reference object! You can have as many references to it as you
like (i.e. assign it to multiple variables), and the object itself is
not removed until the last reference is gone, but if you modify the
object (most likely by setting attributes, but you might also change
the C pointer payload in a C routine), all "copies" are changed:

> x <- as.tclObj(pi)
> x
<Tcl> 3.14159265359
> y <- x
> y
<Tcl> 3.14159265359
> mode(x)
[1] "externalptr"
> attr(x, "Simon") <- "Urbanek"
> attributes(y)
$class
[1] "tclObj"

$Simon
[1] "Urbanek"



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Sun Oct 31 11:20:45 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Oct 31 11:20:59 2004
Subject: [Rd] Destructive str(...)?
In-Reply-To: <x2r7nfkxz9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0410311003570.11787-100000@gannet.stats>

Just to be 100% clear, the finalizer is called *at most* once if (as in
tcltk) R_RegisterCFinalizer is called.  If you want it to be called
exactly once, you need to use R_RegisterCFinalizerEx.

The issue is that there may not be a final gc().

BTW, str(x) is destructive here too, so we do need to improve str().
I have code written, but access to svn.r-project.org is down (yet again).

> x <- as.tclObj(pi)
> str(x)
Class 'tclObj' length 1 <pointer: 0x860c3f8>
> str(x)
length 1 <pointer: 0x860c3f8>


On 31 Oct 2004, Peter Dalgaard wrote:

> Simon Urbanek <simon.urbanek@math.uni-augsburg.de> writes:
> 
> > Now, hold on a second - I thought the main point of EXTPTR is that the
> > finalizer is called only once, that is when the last instance of the
> > reference is disposed of by the gc (no matter how many copies existed
> > meanwhile). Am I wrong and/or did I miss something? I did some tests
> > which support my view, but one never knows ...
> 
> How do you ensure that the finalizer is called once? By *not* copying
> the reference object! You can have as many references to it as you
> like (i.e. assign it to multiple variables), and the object itself is
> not removed until the last reference is gone, but if you modify the
> object (most likely by setting attributes, but you might also change
> the C pointer payload in a C routine), all "copies" are changed:
> 
> > x <- as.tclObj(pi)
> > x
> <Tcl> 3.14159265359
> > y <- x
> > y
> <Tcl> 3.14159265359
> > mode(x)
> [1] "externalptr"
> > attr(x, "Simon") <- "Urbanek"
> > attributes(y)
> $class
> [1] "tclObj"
> 
> $Simon
> [1] "Urbanek"

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

