From yzhou@arcturusag.com  Thu Aug  1 18:02:01 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 19:02:01 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208011702.TAA28218@pubhealth.ku.dk>

Full_Name: Yi-Xiong Zhou
Version: 1.5.1
OS: win2000pro
Submission from: (NULL) (64.169.249.42)


Update() can not find objects when it is used in a function, which is in turn
being called by another function. Here is a R script to show the problem:

######## begin of the test script ##########
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   y <- rnorm(20)
   oo <- lm(y~x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun1()
########### end of the test script #############

Here is the result of running this script:

[1] "step 1"
[1] "first update success."
Error in eval(expr, envir, enclos) : Object "y" not found

Ideally, update should first search the objects in its environment first, then
its parent's, and grand parent's environments ... Right now, it only searchs its
own environment and the global environment, skipping its parents'. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  1 18:26:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Aug 2002 19:26:34 +0200
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
References: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <x2ptx232yd.fsf@biostat.ku.dk>

yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 18:53:31 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 10:53:31 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>

Thanks Peter. This does work for formula. However, it failed to a function
call. Here is another test script:

################# begin test ###############
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   oo <- fun3(x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun3 <- function(aa) {
   oo <- list(x=aa, call=match.call())
   oo
}

fun1()
############### end test ############

The error message is 

[1] "step 1"
[1] "first update success."
Error in fun3(aa = x) : Object "x" not found

Yi-Xiong


-----Original Message-----
From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
Sent: Thursday, August 01, 2002 10:27 AM
To: Yi-Xiong Zhou
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: update() can not find objects (PR#1861)


yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in
turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first,
then
> its parent's, and grand parent's environments ... Right now, it only
searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Aug  1 19:28:23 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 1 Aug 2002 14:28:23 -0400
Subject: CVS Repository for Packages?
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149CE27@groexmb02.pfizer.com>


Hi All,

Would other non-core package developers like to have a common CVS
repository?      I think that this would be useful, and it would encourage
shared development of non-core packages.

Would it be possible/desirable/manageable to host this on an r-project
server?   

As an alternative, I could set up and administer a project on sourceforge.
(I have a couple of projects hosted there already).

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 20:36:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 12:36:51 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208011232100.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002 yzhou@arcturusag.com wrote:
<snip>
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'.
>

No, ideally it should search the objects in the environment where the
model was defined.  There's no guarantee that this is a grandparent, and
grandparents shouldn't be searched otherwise.  It might be tricky to get
this to work.

What isn't clear to me is whether the current environment should be
searched before the environment where the model was defined or afterwards.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkoulis@math.uwaterloo.ca  Thu Aug  1 21:15:21 2002
From: tkoulis@math.uwaterloo.ca (tkoulis@math.uwaterloo.ca)
Date: Thu, 1 Aug 2002 22:15:21 +0200 (MET DST)
Subject: glm crashes with "Illegal instruction" (PR#1863)
Message-ID: <200208012015.WAA28782@pubhealth.ku.dk>

Full_Name: Theodoro Koulis
Version: 1.5.1
OS: Macintosh
Submission from: (NULL) (129.97.97.31)


I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
version):

>x1_runif(10);
>y1_x1-3;
>glm(y1~x1);

The program exits with the following message:
Illegal instruction

Perhaps I am missing something. 

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug  1 21:46:49 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 1 Aug 2002 13:46:49 -0700
Subject: glm crashes with "Illegal instruction" (PR#1863)
In-Reply-To: <200208012015.WAA28782@pubhealth.ku.dk>
Message-ID: <CD5AC7A2-A58F-11D6-8FDE-003065A21C86@stat.ucla.edu>

R-1.5.1 (not from fink, but from  R-1.5.1.dmg.tar.gz, July 1 version, OS 
X 10.1.5, also
on Jaguar)

 > x1<-runif(10)
 > y1<-x1-3
 > glm(y1~x1)

Call:  glm(formula = y1 ~ x1)

Coefficients:
(Intercept)           x1
          -3            1

Degrees of Freedom: 9 Total (i.e. Null);  8 Residual
Null Deviance:      0.9233
Residual Deviance: 5.916e-31    AIC: -684.7


On Thursday, August 1, 2002, at 01:15 PM, tkoulis@math.uwaterloo.ca 
wrote:

> Full_Name: Theodoro Koulis
> Version: 1.5.1
> OS: Macintosh
> Submission from: (NULL) (129.97.97.31)
>
>
> I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
> version):
>
>> x1_runif(10);
>> y1_x1-3;
>> glm(y1~x1);
>
> The program exits with the following message:
> Illegal instruction
>
> Perhaps I am missing something.
>
> Thanks.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
==========================================================================
==
          Remember, wherever you go, there you are. --- Buckaroo Banzai
==========================================================================
==

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:14:52 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 1 Aug 2002 23:14:52 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012114.XAA28978@pubhealth.ku.dk>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:20:13 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 14:20:13 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234C@GENOME>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:25:37 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 23:25:37 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012125.XAA29038@pubhealth.ku.dk>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:13:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 14:13:59 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>
Message-ID: <Pine.A41.4.44.0208011405170.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 11:25:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 11:25:29 +0100 (BST)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x27kj8i80l.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  3 12:29:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2002 13:29:15 +0200
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
Message-ID: <x23ctwi3jo.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 3 Aug 2002, Peter Dalgaard BSA wrote:
> 
> > Another example that has come back to haunt us several times is
> > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > found inside "d" if present, but call-by-value semantics imply that it
> > is an object in the caller's scope. You really ought to pass the name
> > "foo" (or maybe better: quote(foo), or a formula ~foo).
> 
> Should we not just deprecate the offset argument in lm and glm?  Using the
> offset() function in the formula works as one would expect (at least if
> one remembers the R rules which start at the formula's environment).

That's a definite possibility, but what about subset (the argument,
not the function) and weights? 

Not to mention pch and col in plot.formula et al. where vectorization
led to some unexpected awkwardness.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sat Aug  3 12:43:11 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sat, 3 Aug 2002 07:43:11 -0400
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>; from p.dalgaard@biostat.ku.dk on Sat, Aug 03, 2002 at 01:29:15PM +0200
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats> <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <20020803074311.X5720@jimmy.harvard.edu>

On Sat, Aug 03, 2002 at 01:29:15PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> > 
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> > 
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
> 
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights? 
> 
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

 My intention was to include some discussion of just these issues in
 the 8 am session on the 17th.
 I hope that we can use some of these comments at that time as well.



> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stanleywood@hknetmail.com  Sat Aug  3 13:59:59 2002
From: stanleywood@hknetmail.com (stanleywood)
Date: Sat, 3 Aug 2002 20:59:59 +0800
Subject: please respond
Message-ID: <200208031259.g73Cxcdi008945@HKNetMail.COM>

Dear Sir,

I am Stanley Woodwork, the secetary of Africa White farmers
co-operation (AWFC) OF Zimbabwe. After the last general elections in my 
country where the incumbent president Mr. Robert Mugabe won the 
presidential election, the
government has adopted a very aggressive land reforms programme. This 
programme is solely aimed at taking the land owned by white African 
farmers for redistribution to black africans. This programme has attracted 
worldwide
condemnation from world leaders including British prime minister,mr 
Tony Blair and also forced several white farmers to flee the country for 
fear of
victimization and physical abuse.
   Two weeks ago, our headquartes in Harare was attacked and
looted by black protesters and in the process burnt down the whole 
building. Fortunately,they did not get access to the huge funds kept in the 
strong room which
belong to the co-operation. This cash was kept at the secretariat 
rather than in the bank for fear of seizure by the government.
   Now I have the funds in my possession and would need to get it 
invested in a viable business venture in europe. T
   Once I can get your commitment and sincerity of investing
this funds on our behalf then I would proceed to get the funds 
freighted to Europe, where you would be required to pick it up for investment 
for us.
   You do not have anything to worry about as I would undertake all 
charges involved in freighting the funds to europe, and the business 
proposal is 100% legal and risk free.
   You would be adequately compensated for all your effort once we have 
gotten the funds to europe.
Please get back to me if you can be of assistance and I would want our 
correspondence to be via email as most phone lines of white farmers are 
bugged by the government.
   I expect 100% confidentiality and your prompt response to
this mail so as to proceed.you may also reach me on 
stanleywoodwork@hotvoice.com


Kind regards,

Stanley Woodwork.

---------------------------------------------------
Get Your Free Email at http://www.hknetmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 19:04:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 19:04:21 +0100 (BST)
Subject: Problems with gcc-3.1 -O2 on Solaris
Message-ID: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>

I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
systems (not the one I usually use).  We have seen a report of
this before (Chuck Berry, 17 July 2002).

The symptom is that make check fails with var(1) being NaN not NA.  The
underlying cause is that as.double(NA) is NaN.

It can be solved by compiling arithmetic.c without -O2.

Another installation with a single-processor UltraSparc 1 works correctly.
My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Sun Aug  4 03:42:02 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Sun, 4 Aug 2002 12:42:02 +1000
Subject: offset arg (was Re: [R] variable scope)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>

I certainly think we should deprecate it and Peter has (probably
unintentionally) offered yet another cogent argument as to why (although
that could be fixed by including "offset" among the arguments to be handled
by model.frame, like subset, weights, &c, and yes, I do know this would
break existing code...)

For me the main argument against it, though, is that it de-links the offset
from the linear predictor, where naturally it belongs.  It is hard to find a
truly natural and effective syntax for saying "this is part of the linear
predictor but it has a known coefficient of unity, not to be estimated", but
the ... + offset(gunk) device that we now allow, (along with the commercial
R clone, of course), is not all that bad.

Bill.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Saturday, August 03, 2002 8:25 PM
To: Peter Dalgaard BSA
Cc: r-devel@stat.math.ethz.ch
Subject: offset arg (was Re: [R] variable scope)


On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:36:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:36:28 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.44.0208050835300.101274-100000@homer11.u.washington.edu>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> >
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> >
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
>
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights?
>
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

Though at least for the graphical parameters I think with() gives a good
solution.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:42:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:42:46 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.A41.4.44.0208050840090.101274-100000@homer11.u.washington.edu>

On Sun, 4 Aug 2002 Bill.Venables@cmis.csiro.au wrote:

> I certainly think we should deprecate it and Peter has (probably
> unintentionally) offered yet another cogent argument as to why (although
> that could be fixed by including "offset" among the arguments to be handled
> by model.frame, like subset, weights, &c, and yes, I do know this would
> break existing code...)

It wouldn't, because it already is handled that way.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  5 16:48:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Aug 2002 17:48:19 +0200
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.34407.366778.231195@gargle.gargle.HOWL>
References: <20020718193100.23524.qmail@uadvg137.cms.usa.net>
 <15694.34407.366778.231195@gargle.gargle.HOWL>
Message-ID: <15694.40515.428879.709115@gargle.gargle.HOWL>

This is not really important, 
but since it was brought up on R-help, we might as well 
clean it up now :

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
    ChinShCh> ....

    ChinShCh> A related question -- are NAs and NaNs supposed to
    ChinShCh> be the same in R?  If they are not, wouldn't it be
    ChinShCh> more appropriate for var(1) to return NaN 
    ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
    ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
    ChinShCh> denote a missing value, and var(1) is not
    ChinShCh> missing.)

    MM> yes, I think you are right 
    MM> (and it would be the same as S-plus 6.0 does
    MM>  so there, the difference between NaN and NA
    MM>  is less visible since "NaN" are printed as "NA").

We currently say explicitly (in the help file)
that  var(), cor() and cov() return NA when there's only one
observation.

But given the above, I don't see why we should be more exact and
return "NaN" instead.  This is not back-compatible in the strict
sense, but   is.na(var(1))  of course will still be true and I
cannot imagine why the difference between NA and NaN should
matter some user's code.  
If it did, his/her code would work differently in R and S-plus.

If I don't hear arguments against, I will change these to return
NaN as suggested and S-plus compatibly.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  5 17:00:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 5 Aug 2002 17:00:34 +0100 (BST)
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.40515.428879.709115@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0208051651560.27498-100000@gannet.stats>

For numeric vectors, `NA' is more precise than `NaN', although
is.na/is.nan obfuscate this.

On IEC60559 (aka, incorrectly, IEE754) machines here is a large class of
values which are NaN.  A small subclass of these are NA and are printed
specially.

On other systems, there is a single representation for NA and NaN.

So your proposed change will give different results on different
platforms, a really bad idea and I hope enough to scupper it.

In any case, statistically var(1) is a missing value, whatever the
conventional formula gives in IEC60559 arithmetic.

[The original problem is a faulty compiler: see my post to R-devel
yesterday.]

Brian

On Mon, 5 Aug 2002, Martin Maechler wrote:

> This is not really important,
> but since it was brought up on R-help, we might as well
> clean it up now :
>
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> >>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
>     ChinShCh> ....
>
>     ChinShCh> A related question -- are NAs and NaNs supposed to
>     ChinShCh> be the same in R?  If they are not, wouldn't it be
>     ChinShCh> more appropriate for var(1) to return NaN
>     ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
>     ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
>     ChinShCh> denote a missing value, and var(1) is not
>     ChinShCh> missing.)
>
>     MM> yes, I think you are right
>     MM> (and it would be the same as S-plus 6.0 does
>     MM>  so there, the difference between NaN and NA
>     MM>  is less visible since "NaN" are printed as "NA").
>
> We currently say explicitly (in the help file)
> that  var(), cor() and cov() return NA when there's only one
> observation.
>
> But given the above, I don't see why we should be more exact and
> return "NaN" instead.  This is not back-compatible in the strict
> sense, but   is.na(var(1))  of course will still be true and I
> cannot imagine why the difference between NA and NaN should
> matter some user's code.
> If it did, his/her code would work differently in R and S-plus.
>
> If I don't hear arguments against, I will change these to return
> NaN as suggested and S-plus compatibly.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Aug  5 17:42:49 2002
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 5 Aug 2002 09:42:49 -0700 (PDT)
Subject: Problems with gcc-3.1 -O2 on Solaris
In-Reply-To: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>
Message-ID: <Pine.GSO.4.05.10208050930580.6582-100000@tajo.ucsd.edu>

On Sat, 3 Aug 2002 ripley@stats.ox.ac.uk wrote:

> I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
> systems (not the one I usually use).  We have seen a report of
> this before (Chuck Berry, 17 July 2002).
> 
> The symptom is that make check fails with var(1) being NaN not NA.  The
> underlying cause is that as.double(NA) is NaN.
> 
> It can be solved by compiling arithmetic.c without -O2.
> 
> Another installation with a single-processor UltraSparc 1 works correctly.
> My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

FWIW, the specific problem seems to be with 

static const int hw = 0;
static const int  lw = 1;

and their use in array style indexing like this:

	y.word[lw] == 1954
	y.word[lw] != 1954

R passes 'make check' on my Solaris 8 Blade 100 with -O2 when *either*
'const' is dropped or ' *(y.word + lw) == 1954 ' style indexing is used.

Chuck

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Mon Aug  5 21:35:04 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Mon, 5 Aug 2002 22:35:04 +0200 (MET DST)
Subject: close.screen (PR#1878)
Message-ID: <200208052035.WAA18783@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.5.1
OS: Linux
Submission from: (NULL) (132.180.72.150)


Hi,

As a user it is not obvious to me why
"close.screen" should return a warning message in 

split.screen(figs=c(1,2))
i <- 2  
screen(i)
close.screen(i)

whereas no warning message appears for i <- 1.


In fact, the warning message appears since the condition
   .split.valid.screens >  temp
in close.screen is not satisfied by any element of .split.valid.screens

Replacing 

   if (temp %in% n) 
       temp <- min(.split.valid.screens[.split.valid.screens > 
           temp])
   if (temp > max(.split.valid.screens)) 
       temp <- min(.split.valid.screens)

by

   if (temp > max(.split.valid.screens)) 
      temp <- min(.split.valid.screens)
   else
      if (temp %in% n) 
         temp <- min(.split.valid.screens[.split.valid.screens > 
             temp])

should avoid the warning message without any other changings in the
functionality of close.screen.

Cheers,
Martin




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gordong@epa.nsw.gov.au  Tue Aug  6 00:39:14 2002
From: gordong@epa.nsw.gov.au (gordong@epa.nsw.gov.au)
Date: Tue, 6 Aug 2002 01:39:14 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208052339.BAA19235@pubhealth.ku.dk>

		[this message needed manual improvement by the mailing list
		 administrator since it was `HTMLified' .. ``please do not'']


Apologies for bothering you about a fairly trivial matter. I have been
getting some inconsistencies with the display digits in R V1.5.  I have been
using the hypergeometric distribution function, and have found that when
printing out the results from this function the display does not seem to
correspond to the number of digits requested in the options settings. Maybe
this indicates that the vector hasn't been generated in the proper way, or
something, but I thought I'd report it all the same.

[Previously saved workspace restored]

> sqrt(2)
[1] 1.414214
> options(digits=4)
> sqrt(2)
[1] 1.414
> options(digits=3)
> for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> sqrt(2)
[1] 1.41
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> options(digits=4)
> temp
 [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
[10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
[19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
[28] 1.00000 1.00000 1.00000
> sqrt(2)
[1] 1.414
> x<-sqrt(2)
> x
[1] 1.414

While I'm writing, I'd like to thank all of you who are working on this R
project. I think it is very valuable work. I have a friend who after working
as a computer consultant for many years had to retire after having a stroke
which left him unaffected mentally but without the use of his left hand. He
now lives on an invalid pension, and has gone back to doing scientific work
in his retirement. There is no way he could afford commercial software. R
has given him the tools to do good quality graphics as required by journal
editors without which he would not have got his papers published. There must
be many people who have something to contribute but who work outside
institutions and don't have the means to purchase commercial licences. And
Third World countries should benefit greatly.

						Regards,

							Geoff Gordon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 07:33:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 07:33:44 +0100 (BST)
Subject: options(digits) (PR#1879)
In-Reply-To: <200208052339.BAA19235@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208060726530.29814-100000@gannet.stats>

On Tue, 6 Aug 2002 gordong@epa.nsw.gov.au wrote:

> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.

Could you point out where it does not give the number of digits requested?
When you print out a vector R uses the same number of decimal places for
all entries, so one entry will have the number of significant digits
requested, but others may have more.

BTW, your example does not create temp, and you haven't told us the
platorm (as created by bug.report).

>
> [Previously saved workspace restored]
>
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug  6 07:58:54 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Aug 2002 08:58:54 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208060658.IAA20295@pubhealth.ku.dk>

gordong@epa.nsw.gov.au wrote:
> 
>                 [this message needed manual improvement by the mailing list
>                  administrator since it was `HTMLified' .. ``please do not'']
> 
> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.
> 
> [Previously saved workspace restored]
> 
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

That's not a bug. R prints the number of significant digits, as
expected.
For the second element in your vector temp, there are four sifnificant
digits printed:
the "3448" within 0.03448.

Just try some examples:

 0.123456789   # [1] 0.1234568, seven significant digits
 options(digits=4) 
 0.123456789   # [1] 0.1235, as expected
 0.001234567   # [1] 0.001235, still 4 significant digits

So, I cannot see any bug.

Uwe Ligges


> While I'm writing, I'd like to thank all of you who are working on this R
> project. I think it is very valuable work. I have a friend who after working
> as a computer consultant for many years had to retire after having a stroke
> which left him unaffected mentally but without the use of his left hand. He
> now lives on an invalid pension, and has gone back to doing scientific work
> in his retirement. There is no way he could afford commercial software. R
> has given him the tools to do good quality graphics as required by journal
> editors without which he would not have got his papers published. There must
> be many people who have something to contribute but who work outside
> institutions and don't have the means to purchase commercial licences. And
> Third World countries should benefit greatly.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Aug  6 09:58:40 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 6 Aug 2002 10:58:40 +0200 (MET DST)
Subject: You requested this report (PR#1880)
Message-ID: <200208060858.KAA21847@pubhealth.ku.dk>

Hi guys,

I am planning to let my students do some simulations regarding the
bias of the sample standard deviation.  The following function is
pretty standard (so I hope :) ):

> sim <- function(nrng, replic, true.s, random, ...){
+   res <- NULL
+   for(n in nrng){
+     data <- matrix(random(n*replic,...), ncol=replic)
+     val <- sqrt(apply(data, 2, var))
+     res <- rbind(res,
+                  cbind(bias=val-true.s, n=n))
+   }
+   res
+ }

It takes a vector of sample sizes, a number (the number of
replications we want to simulate), the true value of the standard
deviation and a function that generates the random number (which may
depend on additional paramters).  So let's try this:

> nrng <- c(2,4,8,16,32,64)
> replic <- 500
> true.s <- 2
> tmp <- sim(nrng, replic, true.s, rnorm, sd = 2)

Yes, seems to work.  Now I thought of perhaps creating a list of
several scenarios (random numbers) and loop over it.  So I tried:

> dist <- list(list(rnorm, true.s = 2, sd=2),
+              list(rexp, true.s = 1)
+              )

Followed by

> res <- sim(nrng, replic, dist[[1]][2], dist[[1]][1], dist[[1]][-c(1,2)])
Error in as.vector(data) : couldn't find function "random"

O.k., this doesn't work.  So let us try:

> res <- sim(nrng, replic, dist[[1]][2], as.function(dist[[1]][1]), dist[[1]][-c(1,2)])
Error in as.function.default(dist[[1]][1]) : 
        invalid body argument for "function"
Should NEVER happen; please bug.report() [mkCLOSXP]

No idea why you consider this a bug. :)  I would have been willing to
put it down to my misuse of R.  But since you requested a bug report,
here it is.

Cheers,

        Berwin

BTW:  How can I actually do what I want to do?  I realise that I am
probably on a completely wrong track regarding the passing of the
... parameters.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug  6 17:16:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 6 Aug 2002 18:16:22 +0200 (MET DST)
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
Message-ID: <200208061616.SAA26682@pubhealth.ku.dk>

# polygon ignores requests to have its border transparent, look at
par(bg="transparent")
plot(c(0, 3), 0:1)
polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)

# a quick fix for erase.screen() is the following
erase.screen <-
function (n = .split.cur.screen)
{
    if (!exists(".split.screens", envir = .GlobalEnv))
        return(FALSE)
    if (!(n %in% .split.valid.screens) && n != 0)
        stop("Invalid screen number\n")
    old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
        0)
        .split.screens[[n]]$fig
    else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
    on.exit(par(old))
    par(new = TRUE)
    plot.new()
    # bug in polygon, ignores border="transparent"
    # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)  
    rect(0, 0, 1, 1, col=0, border=0)
    par(new = TRUE)
    invisible()
}

as borders are overlapping between subscreens, erasing one subscreen will
set parts of borders of neighbor subscreens to background color. I guess this
is better than not beeing able to erase the borders at all. However, if border
shall not be erased have 
  rect(0, 0, 1, 1, col=0, border="tranparent")
instead. Alternatively we could introduce a new parameter border= to
erase.screen(), screen() and split.screen()

Best regards


Jens Oehlschlgel



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 18:47:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 18:47:56 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <200208061616.SAA26682@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>

Strangely, it works without the first line, which is the default on a
windows() device.

There's a bug in GA_Polyline (not Polygon) stemming from the changes to
graphics device internals at 1.4.0, it seems.  It is transparent polylines
one cannot draw, and only on the windows() device.

You don't give an example for erase.screen: does this need a separate fix?

On Tue, 6 Aug 2002 oehl_list@gmx.de wrote:

> # polygon ignores requests to have its border transparent, look at
> par(bg="transparent")
> plot(c(0, 3), 0:1)
> polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
> polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
> polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)
>
> # a quick fix for erase.screen() is the following
> erase.screen <-
> function (n = .split.cur.screen)
> {
>     if (!exists(".split.screens", envir = .GlobalEnv))
>         return(FALSE)
>     if (!(n %in% .split.valid.screens) && n != 0)
>         stop("Invalid screen number\n")
>     old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
>         0)
>         .split.screens[[n]]$fig
>     else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
>     on.exit(par(old))
>     par(new = TRUE)
>     plot.new()
>     # bug in polygon, ignores border="transparent"
>     # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
>     rect(0, 0, 1, 1, col=0, border=0)
>     par(new = TRUE)
>     invisible()
> }
>
> as borders are overlapping between subscreens, erasing one subscreen will
> set parts of borders of neighbor subscreens to background color. I guess this
> is better than not beeing able to erase the borders at all. However, if border
> shall not be erased have
>   rect(0, 0, 1, 1, col=0, border="tranparent")
> instead. Alternatively we could introduce a new parameter border= to
> erase.screen(), screen() and split.screen()
>
> Best regards
>
>
> Jens Oehlschlgel
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug  7 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Aug 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208070515.g775F5r22107@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1840 *
Subject: predict() still not yet "safe"..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 26 Jul 2002 20:11:26 +0200
* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1717 *
Subject: Problem in optim(method="L-BFGS-B")
From: polzehl@wias-berlin.de
Date: Fri, 28 Jun 2002 11:53:13 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1863 *
Subject: glm crashes with "Illegal instruction"
From: tkoulis@math.uwaterloo.ca
Date: Thu, 1 Aug 2002 22:15:19 +0200 (MET DST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1879 *
Subject: options(digits)
From: Gordon Geoff <gordong@epa.nsw.gov.au>
Date: Tue, 6 Aug 2002 09:36:57 +1000 
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
* PR# 1881 *
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border
From: oehl_list@gmx.de
Date: Tue, 6 Aug 2002 18:15:09 +0200 (MEST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Wed Aug  7 16:49:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Wed, 7 Aug 2002 17:49:22 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>
Message-ID: <13936.1028735362@www33.gmx.net>


Dear Brian,

thank you for your answer.

> There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> graphics device internals at 1.4.0, it seems.  It is transparent polylines
> one cannot draw, and only on the windows() device.
> 
> You don't give an example for erase.screen: does this need a separate fix?

The original call to polygon in erase.screen() did use border=NA. I did not
find documentation saying what an NA color means !? Testing a bit, I find
rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
erase.screen() rather should also erase the borders in background color AS
THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
is no need to use rect() instead of polygon().

Best


Jens


oldpar <- par(no.readonly=TRUE)
par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# now switching to right screen ERASES border of right screen in Prototype
(S+2000)
# thus the right border of the left box gets deleted
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 17:14:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 17:14:22 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <13936.1028735362@www33.gmx.net>
Message-ID: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>

On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:

>
> Dear Brian,
>
> thank you for your answer.
>
> > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > one cannot draw, and only on the windows() device.
> >
> > You don't give an example for erase.screen: does this need a separate fix?
>
> The original call to polygon in erase.screen() did use border=NA. I did not
> find documentation saying what an NA color means !? Testing a bit, I find
> rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> erase.screen() rather should also erase the borders in background color AS
> THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> is no need to use rect() instead of polygon().

NA is a colour that is the same as "transparent".  Unfortunately, border=0
for polygon() is documented to mean `do not draw', but that is not what
happens.  Looks like this needs sorting out.

Thanks for drawing it to our attention.

>
> Best
>
>
> Jens
>
>
> oldpar <- par(no.readonly=TRUE)
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # now switching to right screen ERASES border of right screen in Prototype
> (S+2000)
> # thus the right border of the left box gets deleted
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 18:15:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 18:15:51 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>

Follow up.  The reason your example does not work is that par("bg") is
transparent (as the help page warns).  It does work if par(bg="white") is
set.  Plotting a polygon first fills the whole area, then overplots the
border (if both cases, for opaque colours).

On Wed, 7 Aug 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:
>
> >
> > Dear Brian,
> >
> > thank you for your answer.
> >
> > > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > > one cannot draw, and only on the windows() device.
> > >
> > > You don't give an example for erase.screen: does this need a separate fix?
> >
> > The original call to polygon in erase.screen() did use border=NA. I did not
> > find documentation saying what an NA color means !? Testing a bit, I find
> > rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> > erase.screen() rather should also erase the borders in background color AS
> > THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> > changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> > is no need to use rect() instead of polygon().
>
> NA is a colour that is the same as "transparent".  Unfortunately, border=0
> for polygon() is documented to mean `do not draw', but that is not what
> happens.  Looks like this needs sorting out.
>
> Thanks for drawing it to our attention.
>
> >
> > Best
> >
> >
> > Jens
> >
> >
> > oldpar <- par(no.readonly=TRUE)
> > par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> > figs <- rbind(
> > c( 0.0, 0.5, 0.0, 1.0)  # left
> > , c( 0.5, 1.0, 0.0, 1.0)  # right
> > )
> > dimnames(figs) <- list(
> > c("left","right" )
> > , c("xlow","xhigh","ylow","yhigh")
> > )
> > screens <- split.screen(figs)
> >
> > par(usr=c(0, 1, 0, 1))
> >
> > #plot a box on border of left screen in some color
> > box(col=5)
> >
> > # now switching to right screen ERASES border of right screen in Prototype
> > (S+2000)
> > # thus the right border of the left box gets deleted
> > screen(2)
> >
> > close.screen(all.screens=TRUE)
> > par(oldpar)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Aug  7 19:31:30 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Wed, 7 Aug 2002 20:31:30 +0200 (MET DST)
Subject: dput to full filesystem is silent (PR#1884)
Message-ID: <200208071831.UAA05981@pubhealth.ku.dk>

Full_Name: vince carey
Version: 1.5.1
OS: solaris 2.8
Submission from: (NULL) (134.174.249.59)


as noted.  dput wrote a length 0 file.  had there been
a warning i could have taken steps to create space before
trying to save.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Russell-Lenth@uiowa.edu  Wed Aug  7 20:17:41 2002
From: Russell-Lenth@uiowa.edu (Russell-Lenth@uiowa.edu)
Date: Wed, 7 Aug 2002 21:17:41 +0200 (MET DST)
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <200208071917.VAA06122@pubhealth.ku.dk>

Full_Name: Russ Lenth
Version: 1.5.0
OS: Windows
Submission from: (NULL) (128.255.25.236)


If you use read.table with a connection to stdin(), the first
5 lines of input seem not to be accepted.  See examples below.
Did NOT have the same problem with scan().

> version
        _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R  

> read.table(stdin(),head=T) -> junk
1: a b c
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
2: 16 17 18
3: 19 20 21
4: 22 23 24
5: 
> junk
   a  b  c
1 13 14 15
2 16 17 18
3 19 20 21
4 22 23 24

> read.table(stdin()) -> junk
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
1: 16 17 18
2: 19 20 21
3: 22 23 24
4: 
> junk
  V1 V2 V3
1 16 17 18
2 19 20 21
3 22 23 24

> junk <- scan()
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items

> junk <- scan(stdin())
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Aug  7 20:58:35 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 7 Aug 2002 15:58:35 -0400
Subject: ESS assigns .Last.value to the wrong place in R
Message-ID: <15697.31723.719742.514063@gargle.gargle.HOWL>

I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
still not fixed in ESS 5.1.23, and I think some resolution is needed.

When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
which is *not* where R normally stores it (R stores it in package:base).
When this copy becomes stale it leads to wrong answers.  The bug is in
essd-r.el, lines 63-64:

    (ess-retr-lastvalue-command
     . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

which should be changed (as I have done on my machine) to:

    (ess-retr-lastvalue-command
     . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

Here's an example of how things can go wrong:
R> find(".Last.value")
   [1] "package:base"
R> 0+1
   [1] 1
R> .Last.value
   [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
   [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
   [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
   [1] ".GlobalEnv"   "package:base"


Whenever I bring this up, a debate begins over who should change (ESS or R).
In particular, my solution will not work if package:base is "sealed".  Here's
the tail end of our last discussion:

Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
> ... The effect of sealing package:base from the user means that R will have
> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>
> Net result, ESS does not change behavior, R has already promised to
> change behavior.

and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
> Not at all.  Sealing base does not mean that .Last.value needs to be
> stored in the user's workspace.  The standard approach would be to use
> dynamic variables which are in fact functions with internal state
> (typically maintained in their environments).  E.g., .libPaths() in R
> 1.4 or better illustrates the idea.  There might be a .Last.value()
> along these lines.  The most prominent example is options() which is
> used for manipulating .Options (see also the R FAQ): this is currently
> visible to the user but it really should not.
> 
> Let me discuss our strategy re .Last.value with some r-core members.

Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
> I may be in way over my head here.  But, I think there is a 4th solution.
> Have ESS save .Last.value as some other variable in .GlobalEnv like
> .Last.value.saved.  That way .Last.value would not be hidden, and it could
> still be retreived if someone had done a help() or whatever.

Any more thoughts?
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 21:25:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 21:25:50 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <200208071917.VAA06122@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208072124130.24674-100000@gannet.stats>

stdin() from a terminal is not a file, nor is it a standard connection.
So this is not really a bug.

In particular, as used by you it does to have pushback.

On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:

> Full_Name: Russ Lenth
> Version: 1.5.0
> OS: Windows
> Submission from: (NULL) (128.255.25.236)
>
>
> If you use read.table with a connection to stdin(), the first
> 5 lines of input seem not to be accepted.  See examples below.
> Did NOT have the same problem with scan().
>
> > version
>         _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > read.table(stdin(),head=T) -> junk
> 1: a b c
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 2: 16 17 18
> 3: 19 20 21
> 4: 22 23 24
> 5:
> > junk
>    a  b  c
> 1 13 14 15
> 2 16 17 18
> 3 19 20 21
> 4 22 23 24
>
> > read.table(stdin()) -> junk
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 1: 16 17 18
> 2: 19 20 21
> 3: 22 23 24
> 4:
> > junk
>   V1 V2 V3
> 1 16 17 18
> 2 19 20 21
> 3 22 23 24
>
> > junk <- scan()
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
> > junk <- scan(stdin())
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From larsendr@missouri.edu  Wed Aug  7 21:50:34 2002
From: larsendr@missouri.edu (larsendr@missouri.edu)
Date: Wed, 7 Aug 2002 22:50:34 +0200 (MET DST)
Subject: Change in NA_REAL behavior (PR#1886)
Message-ID: <200208072050.WAA06388@pubhealth.ku.dk>

Full_Name: David Larsen
Version: 1.5.1
OS: Redhat 7.2, w98, w2000
Submission from: (NULL) (128.206.66.65)


I have c code that produces vector sequences for plotting.  I use NA_REAL to
create an NA that will pass back to R to break the line.  This code worked fine
upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
cygwin and gcc to compile the code which I updated in July along with R-1.5.1 
The code includes R.h, Rinternals.h, and Rmath.h 

Using this same configuration this has worked for the last year.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Bartz@FMR.COM  Wed Aug  7 22:33:55 2002
From: Kevin.Bartz@FMR.COM (Bartz, Kevin)
Date: Wed, 7 Aug 2002 17:33:55 -0400
Subject: FW: [R] [ and setMethod conflict?
Message-ID: <763C275E6A1C2248AFD475237AD6135BE7CFA7@MSGBOS576NTS.fmr.com>

John Chambers suggested that I forward this thread (first posted to r-help)
along to r-devel...

Thanks,

Kevin

-----Original Message-----
From: John Chambers [mailto:jmc@research.bell-labs.com] 
Sent: Tuesday, August 06, 2002 6:31 PM
To: Bartz, Kevin
Cc: r-help@stat.math.ethz.ch
Subject: Re: [R] [ and setMethod conflict?


Definitely something funny going on, but perhaps a little less sweeping
than your comments suggest.

No explanation at the moment, but a couple of clues.

1.  The problem doesn't seem to arise unless the data frame is large
enough.  I parametrized the 5000 rows in your example and couldn't get
the bizarre behavior until the number of rows was larger than 1000.

2.  There is some reason to think that nested "[" expressions are
related.  After rewriting your testFunc as follows, the random errors
seemed to go away.

testFunc <- function(cur) {
    ii <- order(cur[,1])
  sorted <- cur[ii,]
    ll <- !is.na(sorted[,1])
   sorted[ll,]
 }
(the change is just to pull out the subset expressions that were
arguments to other "[" expressions.)

I'm not an expert on R internals, but the combination of these might
suggest garbage collection taking place in nested calls to the dispatch
code for "[".

John Chambers

PS:  this thread might be more suited to r-devel than r-help.


"Bartz, Kevin" wrote:
> 
> I noticed this oddity about [ and setMethod.
> 
> First, I define testFunc, which sorts a data frame by the first column and
> returns the entries that aren't NAs, and testIt, which runs testFunc
> repeatedly on a random large data frame, each time saving the return into
a
> dummy placeholder (for demonstration's sake).
> 
> > require(methods)
> Loading required package: methods
> [1] TRUE
> > testFunc <- function(cur) {
> +   sorted <- cur[order(cur[,1]),]
> +   sorted[!is.na(sorted[,1]),]
> + }
> > testIt <- function(num)
> +   for (i in 1:num) {
> +     cat("iteration", i, "...\n")
> +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> +   }
> 
> Let's test out testIt.
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> iteration 3 ...
> iteration 4 ...
> iteration 5 ...
> iteration 6 ...
> iteration 7 ...
> iteration 8 ...
> iteration 9 ...
> iteration 10 ...
> 
> So far, no problems. Next, I define myClass.
> 
> > setClass("myClass", representation(mySlot = "numeric"))
> [1] "myClass"
> > setMethod("[", signature(x = "myClass"),
> +           function(x, i, j, drop) "[ for myClass")
> [1] "["
> 
> Again, everything is fine. I've expanded [ to handle objects of class
> myClass. But when we attempt to use testIt now, problems emerge:
> 
> > testIt(10)
> iteration 1 ...
> Error in "[.data.frame"(cur, order(cur[, 1]), ) :
>         unused argument(s) (.Method ...)
> 
> Maybe that was just a fluke. Trying again, we get:
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> Error in sorted[, 1] : incorrect number of dimensions
> 
> A different message every time, and the error seems no bug of mine (a
> .Method argument? What is that?). In fact, testIt produces a seemingly
> random response from R on each subsequent attempt--everything from
> successful execution to similarly ambiguous errors to a process-killing
"Bus
> Error."
> 
> All in all, it seems that once I've defined a new method for [ I can no
> longer count on it to operate properly in any context.
> 
> Is this the intended behavior? And if so, is there any way I can have one
> class present that overloads [ and still use [ to reliably subset data
> frames?
> 
> Thanks,
> 
> Kevin
> 
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Kiermeier@adelaide.edu.au  Thu Aug  8 04:51:24 2002
From: Andreas.Kiermeier@adelaide.edu.au (Andreas.Kiermeier@adelaide.edu.au)
Date: Thu, 8 Aug 2002 05:51:24 +0200 (MET DST)
Subject: Backslash in character string (PR#1887)
Message-ID: <200208080351.FAA07464@pubhealth.ku.dk>

Full_Name: Andreas Kiermeier
Version: 1.5.1
OS: NT4.0
Submission from: (NULL) (129.127.41.28)


R appears not to be able to print a single backslash in a string, see example
session below.  The same happens on Solaris 2.6 using R 1.5.1.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> "\"
Error: syntax error
> "\\"
[1] "\\"
> "\lambda"
[1] "lambda"
> "\\lambda"
[1] "\\lambda"
> "\134lambda"
[1] "\\lambda"


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:30:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:30:21 +0100 (BST)
Subject: Backslash in character string (PR#1887)
In-Reply-To: <200208080351.FAA07464@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080728270.25351-100000@gannet.stats>

This is not an error, but intentional.
Use cat to print unescaped output.

Please use R-help to ask questions about how to do things in R, and
consult the FAQ about what a bug is.

On Thu, 8 Aug 2002 Andreas.Kiermeier@adelaide.edu.au wrote:

> Full_Name: Andreas Kiermeier
> Version: 1.5.1
> OS: NT4.0
> Submission from: (NULL) (129.127.41.28)
>
>
> R appears not to be able to print a single backslash in a string, see example
> session below.  The same happens on Solaris 2.6 using R 1.5.1.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > "\"
> Error: syntax error
> > "\\"
> [1] "\\"
> > "\lambda"
> [1] "lambda"
> > "\\lambda"
> [1] "\\lambda"
> > "\134lambda"
> [1] "\\lambda"
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:40:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:40:37 +0100 (BST)
Subject: Change in NA_REAL behavior (PR#1886)
In-Reply-To: <200208072050.WAA06388@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080733440.25351-100000@gannet.stats>

There is nothing here to reproduce the claimed bug.

NA_REAL is a reference to a constant in the R.dll, and is unchanged for
a long time.

Since R still works, the problem is not occurring for those who compile R
and its packages under the recommended compiler and tools.

I note you use `cygwin and gcc'.  The documentation has said for a long
time that compilation with Cygwin is not supported.

On Wed, 7 Aug 2002 larsendr@missouri.edu wrote:

> Full_Name: David Larsen
> Version: 1.5.1
> OS: Redhat 7.2, w98, w2000
> Submission from: (NULL) (128.206.66.65)
>
>
> I have c code that produces vector sequences for plotting.  I use NA_REAL to
> create an NA that will pass back to R to break the line.  This code worked fine
> upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
> windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
> cygwin and gcc to compile the code which I updated in July along with R-1.5.1
> The code includes R.h, Rinternals.h, and Rmath.h
>
> Using this same configuration this has worked for the last year.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Thu Aug  8 08:38:30 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Thu, 8 Aug 2002 09:38:30 +0200 (MET DST)
Subject: Ops.data.frame fails with second arg a list (PR#1889)
Message-ID: <200208080738.JAA08451@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: linux-gnu 
Submission from: (NULL) (130.95.16.114)


Comparison of a data frame with a list fails with an error that 
looks to be due to a typo in Ops.data.frame:

> d <- data.frame(1:10)
> d > list(5)
Error in Ops.data.frame(d, list(5)) : Object "scalar" not found

Code has:
        rscalar <- length(e2) <= 1
        if (isList(e2)) {
            if (scalar) 

 and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Baz




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 09:37:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 10:37:12 +0200
Subject: Ops.data.frame fails with second arg a list (PR#1889)
In-Reply-To: <200208080738.JAA08451@pubhealth.ku.dk>
References: <200208080738.JAA08451@pubhealth.ku.dk>
Message-ID: <x2y9bhlpaf.fsf@biostat.ku.dk>

b.rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.5.0
> OS: linux-gnu 
> Submission from: (NULL) (130.95.16.114)
> 
> 
> Comparison of a data frame with a list fails with an error that 
> looks to be due to a typo in Ops.data.frame:
> 
> > d <- data.frame(1:10)
> > d > list(5)
> Error in Ops.data.frame(d, list(5)) : Object "scalar" not found
> 
> Code has:
>         rscalar <- length(e2) <= 1
>         if (isList(e2)) {
>             if (scalar) 
> 
>  and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Yep. Thanks. (Still there in 1.5.1, and in r-devel).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 10:25:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 10:25:11 +0100 (BST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
In-Reply-To: <200206280953.LAA09404@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208081022120.27895-100000@gannet.stats>

I can't reproduce this.  I get (on Windows R 1.5.1)

iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 26.807136
iter   12 value 26.525653
iter   13 value 25.553618
iter   14 value 25.424473
iter   15 value 25.312266
iter   16 value 25.310750
iter   17 value 25.309939
iter   18 value 25.307804
iter   19 value 25.307030
iter   20 value 25.302144
iter   21 value 25.294243
iter   22 value 25.283499
iter   23 value 25.276034
iter   24 value 25.274281
iter   25 value 25.273023
iter   26 value 25.272970
iter   27 value 25.272845
iter   28 value 25.272737
iter   29 value 25.272729
iter   30 value 25.272662
iter   31 value 25.272652
iter   32 value 25.272652
iter   33 value 25.272652
final  value 25.272652
converged


However, Linux gives similar problems.  The underlying cause is that you
are using finite-difference approximations and not scaling your variables
as described on the help page.


On Fri, 28 Jun 2002 polzehl@wias-berlin.de wrote:

> Full_Name: Jrg Polzehl
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (193.175.148.198)
>
>
> When calculating MLE's in a variance component model using constrained
> optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
> behaviour in cases where
> the likelihood function was evalueted at the constraint. Parameters and value of
> the
> function at the constraint seem to be returned in this case.
> I've tried to reproduce the effect in a very simple example:
>
> ###############################################################################
> fn <- function(par,x,y){
> ind <- 1:(length(x)/2)
> alpha <- par[1]
> beta <- par[2]
> sigmaq1 <- par[3]
> sigmaq2 <- par[4]
> sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
> }
>
> set.seed(3)
> n <- 5
> x1 <- runif(n)
> x2 <- runif(n)
> y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
> x <- c(x1,x2)
> par <- c(0,0,1,1)
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
> ####################################################################################
>
> Note that the effect vanishes in case of other constraints for par[3:4].
>
> here is what happens with trace=1 :
>
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
> iter    0 value 121.713156
> iter    1 value 98.361657
> iter    2 value 66.561121
> iter    3 value 57.491023
> iter    4 value 48.193824
> iter    5 value 42.298821
> iter    6 value 37.554272
> iter    7 value 33.741241
> iter    8 value 31.592504
> iter    9 value 28.856846
> iter   10 value 27.450574
> iter   11 value 4118799.069149
> final  value 4118799.069149
> converged
> ----------------------------------------------------------------------------------
> and the essential part with trace = 6 :
>
> 4  variables are free at GCP on iteration 11
> LINE SEARCH 1 times; norm of step = 1.19245
> X = -3.34057 6.34639 1.18546 15.2136
> G = -1.08654 -1.14056 1.42527 -0.307525
> Iteration    11
>
> ---------------- CAUCHY entered-------------------
>
> There are 1  breakpoints
>
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the next break point =  8.3175e-001
> Distance to the stationary point =  1.4763e-001
>
> GCP found in this segment
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the stationary point =  1.4763e-001
> Cauchy X =  -3.18017 6.51477 0.97505 15.259
>
> ---------------- exit CAUCHY----------------------
>
> 4  variables are free at GCP on iteration 12                #
> !!!!!!!!!!!!!!!!!!!!!!
> LINE SEARCH 0 times; norm of step = 2.30637
> X = -3.90499 7.26709 1e-006 16.8712
> G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468
>
> iterations 12
> function evaluations 15
> segments explored during Cauchy searches 12
> BFGS updates skipped 0
> active bounds at final generalized Cauchy point 0
> norm of the final projected gradient 4.1147e+009
> final function value 4.1188e+006
>
> X = -3.90499 7.26709 1e-006 16.8712
> F = 4.1188e+006
> final  value 4118799.069149
> converged
>
>
> See especially the line marked with !!!!!!!!!!
>
> Regards,
>
> Jrg Polzehl
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Aug  8 13:02:44 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 08 Aug 2002 08:02:44 -0400
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>

Prof. Ripley,

In that case, is it possible to check for such things and give an error in
read.table?  (Or perhaps warn against such misuse in the help file...)

Regards,
Andy

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, August 07, 2002 4:26 PM
> To: Russell-Lenth@uiowa.edu
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: read.table ignores first 5 lines (PR#1885)
> 
> 
> stdin() from a terminal is not a file, nor is it a standard 
> connection.
> So this is not really a bug.
> 
> In particular, as used by you it does to have pushback.
> 
> On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:
> 
> > Full_Name: Russ Lenth
> > Version: 1.5.0
> > OS: Windows
> > Submission from: (NULL) (128.255.25.236)
> >
> >
> > If you use read.table with a connection to stdin(), the first
> > 5 lines of input seem not to be accepted.  See examples below.
> > Did NOT have the same problem with scan().
> >
> > > version
> >         _
> > platform i386-pc-mingw32
> > arch     i386
> > os       mingw32
> > system   i386, mingw32
> > status
> > major    1
> > minor    5.0
> > year     2002
> > month    04
> > day      29
> > language R
> >
> > > read.table(stdin(),head=T) -> junk
> > 1: a b c
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 2: 16 17 18
> > 3: 19 20 21
> > 4: 22 23 24
> > 5:
> > > junk
> >    a  b  c
> > 1 13 14 15
> > 2 16 17 18
> > 3 19 20 21
> > 4 22 23 24
> >
> > > read.table(stdin()) -> junk
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 1: 16 17 18
> > 2: 19 20 21
> > 3: 22 23 24
> > 4:
> > > junk
> >   V1 V2 V3
> > 1 16 17 18
> > 2 19 20 21
> > 3 22 23 24
> >
> > > junk <- scan()
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> > > junk <- scan(stdin())
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 13:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 13:33:30 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>

On Thu, 8 Aug 2002, Liaw, Andy wrote:

> Prof. Ripley,
>
> In that case, is it possible to check for such things and give an error in
> read.table?  (Or perhaps warn against such misuse in the help file...)

It is now warned about in the help file.

It's impossible to give a warning, as it is scan behaving differently
in one particular case, not going through the connections machinery so it
can give prompts.  On the other hand, at R level we don't know what
stdin() is.

The only way I see to fix this is inside scan().  That might be possible,
On the other hand, there really are easy workarounds if all the input is
available: just use readLines to a character vector and call read.table on
the result.

> read.table(textConnection(readLines()), header=T)
>  a b c
> 1 2 3
> 4 5 6
> 7 8 9
> 10 11 12
> 13 14 15
> 16 17 18
> 19 20 21
> 22 23 24
>
>    a  b  c
1  1  2  3
2  4  5  6
3  7  8  9
4 10 11 12
5 13 14 15
6 16 17 18
7 19 20 21
8 22 23 24

where I pasted in the first block (with the > prompts).  Rgui won't work
with this, though, another way in which stdin() is special.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug  8 14:19:07 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Aug 2002 15:19:07 +0200
Subject: ... / namespacing
In-Reply-To: <3067.1028802351@www57.gmx.net>
References: <3067.1028802351@www57.gmx.net>
Message-ID: <15698.28619.195039.816746@gargle.gargle.HOWL>

(redirected to R-devel)

>>>>> "oehl" == oehl list <oehl_list@gmx.de>
>>>>>     on Thu, 8 Aug 2002 12:25:51 +0200 (MEST) writes:

	  <....>

    oehl> Furthermore I heard rumors about newnamespacing
    oehl> features. Is there already information on that?

- The  'R developers' website http://developer.r-project.org/
  has links to Luke Tierney's writeups (search "name space")

- Read the NEWS file of R-devel,
  conveniently off the  http://stat.ethz.ch/R-manual/  page.

- Install R-devel and read its source :-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mike.Prager@noaa.gov  Thu Aug  8 16:21:10 2002
From: Mike.Prager@noaa.gov (Mike.Prager@noaa.gov)
Date: Thu, 8 Aug 2002 17:21:10 +0200 (MET DST)
Subject: PR #1833 Clarification (PR#1890)
Message-ID: <200208081521.RAA13974@pubhealth.ku.dk>

This is (correctly) filed under "non-reproducible."

The corresponding notes say "solved by re-installing Windows (private 
comm)."  I would like to clarify that this was solved by re-installing the 
patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
itself.  Perhaps my original message was not clear.

I point this out because installing the patch takes only 5 minutes, and 
this might help future users who experience similar problems.

Thank you.


-- 
Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
NOAA Center for Coastal Fisheries and Habitat Research
Beaufort, North Carolina  28516
http://shrimp.ccfhrb.noaa.gov/~mprager/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Thu Aug  8 16:35:37 2002
From: russell-lenth@uiowa.edu (Russ Lenth)
Date: Thu, 08 Aug 2002 10:35:37 -0500
Subject: read.table ignores first 5 lines (PR#1885)
References: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>
Message-ID: <3D528FC9.7D3F829C@stat.uiowa.edu>

Gentlemen,

This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
a command like:

	read.table (textConnection(readLines()), head=T)

ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
(or paste) the data, then press Ctrl-D, and I've got what I want.  Under
Windows, however, I could not find a way to signal the end of the file (I tried
Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

I also confirmed that it's possible to have a statement like

	if (file == stdin()) ...

so, if it's possible to resolve the end-of-file issue, there is a way to make
read.table do what I want (if only in my own custom version of read.table).

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science      
The University of Iowa -- Iowa City, IA 52242  USA 
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/



ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 8 Aug 2002, Liaw, Andy wrote:
> 
> > Prof. Ripley,
> >
> > In that case, is it possible to check for such things and give an error in
> > read.table?  (Or perhaps warn against such misuse in the help file...)
> 
> It is now warned about in the help file.
> 
> It's impossible to give a warning, as it is scan behaving differently
> in one particular case, not going through the connections machinery so it
> can give prompts.  On the other hand, at R level we don't know what
> stdin() is.
> 
> The only way I see to fix this is inside scan().  That might be possible,
> On the other hand, there really are easy workarounds if all the input is
> available: just use readLines to a character vector and call read.table on
> the result.
> 
> > read.table(textConnection(readLines()), header=T)
> >  a b c
> > 1 2 3
> > 4 5 6
> > 7 8 9
> > 10 11 12
> > 13 14 15
> > 16 17 18
> > 19 20 21
> > 22 23 24
> >
> >    a  b  c
> 1  1  2  3
> 2  4  5  6
> 3  7  8  9
> 4 10 11 12
> 5 13 14 15
> 6 16 17 18
> 7 19 20 21
> 8 22 23 24
> 
> where I pasted in the first block (with the > prompts).  Rgui won't work
> with this, though, another way in which stdin() is special.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 16:35:56 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 17:35:56 +0200
Subject: Clarification (PR#1833)
In-Reply-To: <200208081521.RAA13974@pubhealth.ku.dk>
References: <200208081521.RAA13974@pubhealth.ku.dk>
Message-ID: <x2vg6ljrc2.fsf@biostat.ku.dk>

Mike.Prager@noaa.gov writes:

> This is (correctly) filed under "non-reproducible."

Unfortunately, your follow-up got filed as a new report because of the
space between PR and #. This one should end up in the right spot,
hopefully. 

> The corresponding notes say "solved by re-installing Windows (private 
> comm)."  I would like to clarify that this was solved by re-installing the 
> patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
> itself.  Perhaps my original message was not clear.
> 
> I point this out because installing the patch takes only 5 minutes, and 
> this might help future users who experience similar problems.
> 
> Thank you.
> 
> 
> -- 
> Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
> NOAA Center for Coastal Fisheries and Habitat Research
> Beaufort, North Carolina  28516
> http://shrimp.ccfhrb.noaa.gov/~mprager/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 16:46:58 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 16:46:58 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <3D528FC9.7D3F829C@stat.uiowa.edu>
Message-ID: <Pine.LNX.4.31.0208081644410.28652-100000@gannet.stats>

On Thu, 8 Aug 2002, Russ Lenth wrote:

> This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
> a command like:
>
> 	read.table (textConnection(readLines()), head=T)
>
> ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
> (or paste) the data, then press Ctrl-D, and I've got what I want.  Under
> Windows, however, I could not find a way to signal the end of the file (I tried
> Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
> argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

So was I.  I'm currently working on that, so it will in the next release.

I have some hope of fixing scan, but it is very complicated (I've already
spent a couple of hours on it).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Thu Aug  8 18:11:05 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Thu, 8 Aug 2002 19:11:05 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>
Message-ID: <3815.1028826665@www10.gmx.net>


> Follow up.  The reason your example does not work is that par("bg") is
> transparent (as the help page warns).  It does work if par(bg="white") is
> set.  Plotting a polygon first fills the whole area, then overplots the
> border (if both cases, for opaque colours).

I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
"transparent".
BUT I just discovered that my replication code does not show what I wanted
to show if R is started newly. 

# THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
par(bg="transparent")
# without SETTING background color to transparent THE FOLLOWING CODE
# DOES NOT REPLICATE THE BUG
# HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
THE SAME

oldpar <- par(no.readonly=TRUE)

par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# IN R I GET AN UNDESIRED BLACK BORDER HERE
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


Do you see my problem?
Best 


Jens



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R






-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 18:22:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 18:22:06 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <3815.1028826665@www10.gmx.net>
Message-ID: <Pine.LNX.4.31.0208081818350.28824-100000@gannet.stats>

That's the bug in GA_Polyline I have already fixed, so I no longer see it.

On Thu, 8 Aug 2002 oehl_list@gmx.de wrote:

>
> > Follow up.  The reason your example does not work is that par("bg") is
> > transparent (as the help page warns).  It does work if par(bg="white") is
> > set.  Plotting a polygon first fills the whole area, then overplots the
> > border (if both cases, for opaque colours).
>
> I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
> "transparent".
> BUT I just discovered that my replication code does not show what I wanted
> to show if R is started newly.
>
> # THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
> par(bg="transparent")
> # without SETTING background color to transparent THE FOLLOWING CODE
> # DOES NOT REPLICATE THE BUG
> # HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
> THE SAME
>
> oldpar <- par(no.readonly=TRUE)
>
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # IN R I GET AN UNDESIRED BLACK BORDER HERE
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> Do you see my problem?
> Best
>
>
> Jens
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
>
>
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From friendly@yorku.ca  Thu Aug  8 19:43:08 2002
From: friendly@yorku.ca (friendly@yorku.ca)
Date: 8 Aug 2002 18:43:08 -0000
Subject: Lisp-stat  and R?  [was: Re: Status?]
Message-ID: <20020808184308.146.qmail@hotspur.psych.yorku.ca>

John Fox (see below) raises important questions for
the Lisp-stat community (and perhaps the R community) to consider.
This message thread was not cross-posted to r-devel@lists.r-project.org,
so I do so now.

I have never been an active or particularly adept Lisp-stat programmer. But I  
have worked on or used several projects for which Lisp-stat seemed the ideal  
environment-- for implementing relatively portable, state-of-the-art  
applications, using dynamically-linked graphic windows to provide
and demonstrate leading-edge examples of highly-interctive environments
for the whole range from testing new ideas to delivering course content,
as has been done with Arc and ViSta.

My work with Forrest Young and Pedro Valero on ViSta implementations
of mosaic displays and other methods for categorical data has been
particularly gratifying, in that we've (well, largely Pedro) been able
to implement the kinds of interactive graphical analysis for contingency
tables that I always dreamed of.  This hinged on the built-in facilities
for object-oriented interactive graphic methods, abilities to link
graphic windows dynamically, and so forth, and Forrest's spreadplot
architecture for ViSta, which combines these facilities with a general
graph/window layout mechanism, so that all graph and text windows can
be made to work coherently.

But, as John points out, a number of people, formerly active in Lisp-stat
development have switched to R, for the reasons he outlines in his first
paragraph. I might add that for static graphs, and saving graphic
images, R now rivals, and, in some cases exceeds, what I have been
able to accomplish in SAS  -- but this (complete control of all graphic
parameters, text & math labels, etc.) is something that has always
been difficult and limited in Lisp-stat

On the other hand, R has very limited built-in facilities for
interactive graphics, and none that can be called 'dynamic'; nor does
it have any native GUI-building facilities, such as are used, with
great effect, in Arc and ViSta.  There is, however, a built-in mechanism
for R to interact with other software.  The Omega Project  
(http://www.omegahat.org) details some of these, and there are also
other similar efforts (e.g., R-ggobi)

So, from the core of folks in the union (or intersection) of 

Lisp-stat and R developers: is there anyone to respond to John's
challenge -- ``to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R''  I'll add a challenge of my own -- to incorportate
R modelling, static graphics and data manipulations into Lisp-stat.

-Michael


On Tue, 06 Aug 2002 14:37:15 -0400, John Fox said:

I've spoken over the past couple of months to several individuals who, like 

myself, have more or less left Lisp-stat for R. There are several obvious 

reasons for doing so: Lisp-stat seems moribund, while R is alive and well; 

there is a very wide and growing range of statistical applications 

available for R; R has standards for data sets, models, documentation, 

etc.; and (perhaps more controversially) the S programming language is 

easier to use than Lisp.

Nevertheless, everyone to whom I've talked regrets losing some of the 

functionality of Lisp-stat, including the ability to draw dynamic, linked 

graphs, and the built-in facilities for constructing graphical interfaces.

Although I don't have the technical expertise either to answer the 

following question or, certainly, to implement a solution, I wonder whether 

it would be possible to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R, ideally in the form of an add-on package that would 

work in all three supported environments -- Windows, Mac, and Linux/Unix. I 

know that there would be some obstacles -- and probably the components from 

Lisp-stat would have to run as a separate process -- but don't know whether 

these obstacles can be overcome.

If anyone has any ideas along these lines, I'd be interested in hearing 

them, and possibly in helping to organize a project to implement them.

Regards,
  John

At 12:44 AM 8/6/2002 +0200, Frederic Udina wrote:

>Bill,
>
>(just to be sure that somebody answers your question)
>
>Xlisp-stat, still being the only choice for some statistical applications,
>is not as active as it was some time ago.
>
>Some of the gurus have moved to R, some other are quite inactive. Some of
>us are still working with it but we obviously miss some lifting on the
>software... But apparently the efforts to undertake it have not been
>succesful.
>
>I have not looked to the official site for a while, it would be good to
>have it at least pointing to the existing resources.
>
>Somebody singin'  "We shall overcome..." out there?
>
>
>
>On Mon, 5 Aug 2002, Bill Harris wrote:
>
>~~~I just used XLISP-STAT again today after a bit of an absence, and I
>~~~thought I'd check to see what was new on the Web.  While I don't need to
>~~~see ongoing developments to find a tool useful, I was curious in that
>~~~http://www.xlispstat.org/ and the UCLA site that Google returned both
>~~~seemed offline.  What is up with XLISP-STAT these days?
>~~~
>~~~Bill
>~~~--
>~~~Bill Harris                                  3217 102nd Place SE
>~~~Facilitated Systems                          Everett, WA 98208 USA
>~~~http://facilitatedsystems.com/               phone: +1 425 337-5541
>~~~
>
>
>  Frederic Udina
>   ____________________________________________________________________
>   <udina@upf.es> Dept. D'Economia i Empresa   Universitat Pompeu Fabra
>                   Ramon Trias Fargas, 25-27      08005 Barcelona SPAIN
>   tel. 34- 935421756/1763 fax: 34- 935421746     http://libiya.upf.es/
>   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>   There are many here among us who feel that life is but a joke  B.Dy.

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Aug  8 21:33:50 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 8 Aug 2002 22:33:50 +0200
Subject: ESS assigns .Last.value to the wrong place in R
In-Reply-To: <15697.31723.719742.514063@gargle.gargle.HOWL>
References: <15697.31723.719742.514063@gargle.gargle.HOWL>
Message-ID: <15698.54702.56299.675830@mithrandir.hornik.net>

>>>>> David Brahm writes:

> I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
> still not fixed in ESS 5.1.23, and I think some resolution is needed.

> When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
> which is *not* where R normally stores it (R stores it in package:base).
> When this copy becomes stale it leads to wrong answers.  The bug is in
> essd-r.el, lines 63-64:

>     (ess-retr-lastvalue-command
>      . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

> which should be changed (as I have done on my machine) to:

>     (ess-retr-lastvalue-command
>      . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

> Here's an example of how things can go wrong:
R> find(".Last.value")
>    [1] "package:base"
R> 0+1
>    [1] 1
R> .Last.value
>    [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
>    [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
>    [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
>    [1] ".GlobalEnv"   "package:base"


> Whenever I bring this up, a debate begins over who should change (ESS
> or R).  In particular, my solution will not work if package:base is
> "sealed".  Here's the tail end of our last discussion:

> Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
>> ... The effect of sealing package:base from the user means that R will have
>> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
>> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>> 
>> Net result, ESS does not change behavior, R has already promised to
>> change behavior.

> and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
>> Not at all.  Sealing base does not mean that .Last.value needs to be
>> stored in the user's workspace.  The standard approach would be to use
>> dynamic variables which are in fact functions with internal state
>> (typically maintained in their environments).  E.g., .libPaths() in R
>> 1.4 or better illustrates the idea.  There might be a .Last.value()
>> along these lines.  The most prominent example is options() which is
>> used for manipulating .Options (see also the R FAQ): this is currently
>> visible to the user but it really should not.
>> 
>> Let me discuss our strategy re .Last.value with some r-core members.

> Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
>> I may be in way over my head here.  But, I think there is a 4th solution.
>> Have ESS save .Last.value as some other variable in .GlobalEnv like
>> .Last.value.saved.  That way .Last.value would not be hidden, and it could
>> still be retreived if someone had done a help() or whatever.

> Any more thoughts?

I had raised this issue with a couple of r-core people, but without
coming to a final conclusion.  I think the underlying issue is rather
subtle: what is attempted by playing with .Last.value is somehow to
restore the 'state' of the system before ESS started 'invisibly'
interacting with it.  I have no idea if this makes sense conceptually in
a multithreaded setting.  (And the same applies to .Last.value, up to
some extent.)

I would actually prefer that we stop playing with .Last.value, and
document this.  If not, David's suggestion about assigning in envir =
NULL (i.e., the base package) is certainly preferable to what ESS
currently has, but will need to reviewed once name spaces are fully in
place.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Fri Aug  9 09:35:45 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Fri, 9 Aug 2002 10:35:45 +0200 (MET DST)
Subject: summary.data.frame with compound elements problem (PR#1891)
Message-ID: <200208090835.KAA17461@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: x86 linux
Submission from: (NULL) (130.95.16.114)


Elements of a dataframe may be a matrix or another dataframe. In
this case the summary() method can do bad things:

> x <- data.frame(1:10)
> x$z <- data.frame(x=1:10,y=1:10)
> summary(x)
     X1.10          z                  
 Min.   : 1.00   NULL:Min.   : 1.00    
 1st Qu.: 3.25   NULL:1st Qu.: 3.25    
 Median : 5.50   NULL:Median : 5.50    
 Mean   : 5.50   NULL:Mean   : 5.50    
 3rd Qu.: 7.75   NULL:3rd Qu.: 7.75    
 Max.   :10.00   NULL:Max.   :10.00    
                 NULL:Min.   : 1.00    
                 NULL:1st Qu.: 3.25    
                 NULL:Median : 5.50    
                 NULL:Mean   : 5.50    
                 NULL:3rd Qu.: 7.75    
                 NULL:Max.   :10.00    

 - this comes from summary(x) calling summary(x$z) and
not handling the fact that summary(x$z) has an element for
each column.

 I think this may be a can of worms. There is a difference
between:

 x <- data.frame(1:10,z=data.frame(1:10,1:10))
and
 x <- data.frame(1:10) ; x$z<-data.frame(1:10,1:10)

 In the first case data.frame() will take columns of the z= argument
and add them to x so that x ends up with 3 elements. In the second
case x ends up with two elements (although it prints as three columns
with identical names for $z).

 Should data frames (and matrices) be allowed as elements of data frames
(assuming they have the right number of rows)? If _not_, then "$<-.data.frame"
should either behave like data.frame(z=...) above or disallow it, and if _so_
then 
summary.data.frame needs tweaking to cope.

 [Splus has similar behaviour, except only for data.frames in data.frames, but
that's because in Splus summary(a matrix) is summary of the whole matrix and 
so only has one element. In R the summary() of a matrix is an element for each
column. Now where's the Splus jitterbug?]

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 13 08:37:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Aug 2002 09:37:08 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208130737.JAA06371@pubhealth.ku.dk>

Here is an example:

 The legends (mainly the factor level names) are cut off on the
 right.  Somehow the internal calculation which computes
 horizontal space for the legend is not flexible enough.

## Call a new graphics window {with default par()s !}:
get(getOption("device"))()
par(mfrow = c(2,2))

## part of  example(interaction.plot)  _improved_ using with() :
data(OrchardSprays)
with(OrchardSprays, {
    interaction.plot(treatment, rowpos, decrease)
    interaction.plot(rowpos, treatment, decrease)
})

data(esoph)
with(esoph, {
    interaction.plot(agegp, alcgp, ncases/ncontrols)
    interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
                     fixed=TRUE)
})

-------------------------------

Something that should be easy to fix, but needs some care (and
time). 
Volunteers?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Aug 13 09:57:33 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 13 Aug 2002 10:57:33 +0200 (MET DST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
Message-ID: <200208130857.KAA07497@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.5.1
OS: WinMe
Submission from: (NULL) (217.210.0.243)


In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
too many files in @Rfiles the source code line generated will be too long and
weird things will happen, e.g. strange bytes/characters will be inserted.

SUGGESTION/SOLUTION:
Add a new line character after each "join";

 $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";

instead of

 $Rcmd .= join("\", \"", @Rfiles) . "\")\n";


SUGGESTION II:
I ran into similar problems in other situations where I autogenerated too long
source lines. The errors where hard to reproduce and took time to find. It would
be nice if the [R] parser, or some previous engine that reads the source file,
could given an explicit error saying that the "line was too long".

EXAMPLE:
In my case I got in perl '@Rfiles' was:
"R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"

but in [R] 'Rfiles' became:
 [1] "R/LogBook.R"                   "R/LogEntry.R"                 
 [3] "R/GenePixData.R"               "R/Layout.R"                   
 [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"      
 [7] "R/QualityData.R"               "R/MicroarrayData.R"           
 [9] "R/MAData.R"                    "R/MAData.NORM.R"              
[11] "R/zzz.R"                       "R/Replicates.R"               
[13] "R/SMA.R"                       "R/FieldFilter.R"              
[15] "R/Filter.R"                    "R/QuantArrayData.R"           
[17] "R/RGData.R"                    "R/RawData.R"                  
[19] "R/000.R"                       "R/MicroarrayData.IO.R"        
[21] "R/LayoutGroups.R"              "R/BFilter.R"                  
[23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"          
[25] "R/Copy of SSMatrix.R"          "R/private.utils.R"            
[27] "R/WangetalData.R"              "R/KHessFilter.R"              
[29] "R/DfFilter.R"                  "R/SpotData.R"                 
[31] "R/ScanAlyzeData.R"             "R/BMAData.R"                  
[33] "R/AFilter.R"                   "R/MFilter.R"                  
[35] "R/Layout.obsolete.R"           "R/AndFilter.R"                
[37] "R/OrFilter.R"                  "R/SEFilter.R"                 
[39] "R/TFilter.R"                   "R/AcceptFilter.R"             
[41] "R/SpotPosition.R"              "R/SerialFilter.R"             
[43] "R/GSRArray.R"                  "R/MultiwayArray.R"            
[45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"         
[47] "R/GeneData.R"                  "R/GeneRejectFilter.R"         
[49] "R/TMAData.R"                   "R/NotFilter.R"                
[51] "R/ParallelFilter.R"            "R/RejectFilter.R"             
[53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"                 
[55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
[57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"   

Look at the 56 element. Trying to add or remove files, I found that this was
always happening at the same column in the Rfiles row and inferred that this is
due to the maximum line length in [R] source files. Correct?

Best wishes

Henrik Bengtsson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 10:43:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 10:43:03 +0100 (BST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <200208130857.KAA07497@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131022320.25584-100000@gannet.stats>

On Tue, 13 Aug 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.5.1
> OS: WinMe
> Submission from: (NULL) (217.210.0.243)
>
>
> In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
> code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
> too many files in @Rfiles the source code line generated will be too long and
> weird things will happen, e.g. strange bytes/characters will be inserted.

> SUGGESTION/SOLUTION:
> Add a new line character after each "join";
>
>  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
>
> instead of
>
>  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
>
>
> SUGGESTION II:
> I ran into similar problems in other situations where I autogenerated too long
> source lines. The errors where hard to reproduce and took time to find. It would
> be nice if the [R] parser, or some previous engine that reads the source file,
> could given an explicit error saying that the "line was too long".
>
> EXAMPLE:
> In my case I got in perl '@Rfiles' was:
> "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
> R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
> SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
> R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
>
> but in [R] 'Rfiles' became:
>  [1] "R/LogBook.R"                   "R/LogEntry.R"
>  [3] "R/GenePixData.R"               "R/Layout.R"
>  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
>  [7] "R/QualityData.R"               "R/MicroarrayData.R"
>  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> [11] "R/zzz.R"                       "R/Replicates.R"
> [13] "R/SMA.R"                       "R/FieldFilter.R"
> [15] "R/Filter.R"                    "R/QuantArrayData.R"
> [17] "R/RGData.R"                    "R/RawData.R"
> [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> [21] "R/LayoutGroups.R"              "R/BFilter.R"
> [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> [27] "R/WangetalData.R"              "R/KHessFilter.R"
> [29] "R/DfFilter.R"                  "R/SpotData.R"
> [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> [33] "R/AFilter.R"                   "R/MFilter.R"
> [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> [37] "R/OrFilter.R"                  "R/SEFilter.R"
> [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> [49] "R/TMAData.R"                   "R/NotFilter.R"
> [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
>
> Look at the 56 element. Trying to add or remove files, I found that this was
> always happening at the same column in the Rfiles row and inferred that this is
> due to the maximum line length in [R] source files. Correct?

There is no such line limit.  If I take your file list, convert it via the
orginal join and read it into R, I don't get a problem, under Linux or
Windows XP. I think you are hitting the limitations of your `operating
system', not R.  But without a reproducible example it is hard to tell.

Package survival has 92 files with file names at least as long as yours,
and that works perfectly happily on Windows XP.

Can you make available a sample package which exhibits the problem?

Nevertheless, joining with "\n" should be a palliative measure.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer+science@uni-bochum.de  Tue Aug 13 13:12:18 2002
From: stefan.boehringer+science@uni-bochum.de (stefan.boehringer+science@uni-bochum.de)
Date: Tue, 13 Aug 2002 14:12:18 +0200 (MET DST)
Subject: svm seg faults (PR#1901)
Message-ID: <200208131212.OAA10671@pubhealth.ku.dk>

Full_Name: Stefan Bhringer
Version: 1.5.1
OS: Linux RH 7.3
Submission from: (NULL) (132.252.142.137)


using the svm function from the e1071 library. R crashes with the very example
from the help page or any other input.
In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 13:43:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 13:43:29 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <200208131212.OAA10671@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>

Which compiler is this?

I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
versions of gcc. I think this is particularly critical when C/C++ mixtures
are used (as in svm).

PR#1178 is another non-reproducible segfault in svm on Linux.

On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:

> Full_Name: Stefan Bhringer
> Version: 1.5.1
> OS: Linux RH 7.3
> Submission from: (NULL) (132.252.142.137)
>
>
> using the svm function from the e1071 library. R crashes with the very example
> from the help page or any other input.
> In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Tue Aug 13 13:23:07 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 13 Aug 2002 14:23:07 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029241389.6475.9.camel@hgX>

I've used the stock 2.96 gcc. Also I have 3.1 installed as gcc3 but
couldn't get around to make R compile with gcc3.

Thanks

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From johannes.huesing@uni-essen.de  Tue Aug 13 14:41:15 2002
From: johannes.huesing@uni-essen.de (=?iso-8859-1?Q?Johannes_H=FCsing?=)
Date: Tue, 13 Aug 2002 15:41:15 +0200
Subject: Lisp-stat  and R?  [was: Re: Status?]
In-Reply-To: <20020808184308.146.qmail@hotspur.psych.yorku.ca>; from friendly@hotspur.psych.yorku.ca on Thu, Aug 08, 2002 at 06:43:08PM -0000
References: <20020808184308.146.qmail@hotspur.psych.yorku.ca>
Message-ID: <20020813154115.51612@spi.power.uni-essen.de>

On Thu 2002-08-08 (18:43), friendly@hotspur.psych.yorku.ca wrote:
>   I'll add a challenge of my own -- to incorportate
> R modelling, static graphics and data manipulations into Lisp-stat.
> 

I don't see anyone finding much interest in re-programming
all modelling aspects which are available and being extended in 
R from scratch in XLispStat. 

Rather I would like to see each language to continue to excel in
what it is already good at. XLispStat can survive when it builds 
on its dynamic graphic facilities, which have been exceptional in 
1990, and still worth a look at in 2002.
For ideas about what else 
dynamic
graphics can do, see for example http://www.theusrus.de/Mondrian/index.html.

One thing that comes to mind that might be worthwhile is a
color model. There's some remarkable work by Steve Majewski but I 
don't know how widely used it is.

This way, one would have a flexible and powerful graphics engine. It
can be extended in large projects. If it keeps an edge over, say, R
in the area of graphics, it will be a tool always to consider, rather
than a duplicate effort in an area other languages already shine.

For working in what other languages are good at, there's Omegahat
(http://www.omegahat.org).

Just another two cents.

Greetings


Johannes
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 20:56:41 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 21:56:41 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208131956.VAA13672@pubhealth.ku.dk>

An NA in the rownames of a matrix (or dataframe) causes misalignment when the
matrix is printed:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> rownames(x)[2] <- NA
R> x
     A B C  D
a    1 4 7 10
<NA>   2 5 8 11
c    3 6 9 12

The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
between lines 242 ("int len;") and 243 ("len = 0;"):

    if (s == CHAR(NA_STRING))
      return quote ? R_print.na_width : R_print.na_width_noquote;

which solves the problem:

R-patched> x
     A B C  D
a    1 4 7 10
<NA> 2 5 8 11
c    3 6 9 12

-----------------------------------------------------------------------------

An NA in the colnames has similar misalignment problems:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> colnames(x)[2] <- NA
R> x
  A <NA> C  D
a 1  4 7 10
b 2  5 8 11
c 3  6 9 12

But this time it's because lines 72, 139, 213, 299, and 375 of
src/main/printarray.c use "strlen", which doesn't know about NA's:

  clabw = strlen(CHAR(STRING_ELT(cl, j)));

My patch is to replace "strlen" with "Rstrlen" in each case:

  clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);

and again this solves the problem:

R-patched> x
  A <NA> C  D
a 1    4 7 10
b 2    5 8 11
c 3    6 9 12

-----------------------------------------------------------------------------

References:

Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
  http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
but this was fixed in R-1.5.1.

Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6367.html

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 21:35:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 21:35:13 +0100 (BST)
Subject: Misalignment of <NA> in rownames (PR#1905)
In-Reply-To: <200208131956.VAA13672@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208132127350.9301-100000@gannet.stats>

Have you looked at R-devel?  Neither of these are currently incorrect.

Rstrlen is an exported entry point, and I don't think we want to mess with
it.  It is used for other than printing.

On Tue, 13 Aug 2002 brahm@alum.mit.edu wrote:

> An NA in the rownames of a matrix (or dataframe) causes misalignment when the
> matrix is printed:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> rownames(x)[2] <- NA
> R> x
>      A B C  D
> a    1 4 7 10
> <NA>   2 5 8 11
> c    3 6 9 12
>
> The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
> MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
> label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
> between lines 242 ("int len;") and 243 ("len = 0;"):
>
>     if (s == CHAR(NA_STRING))
>       return quote ? R_print.na_width : R_print.na_width_noquote;
>
> which solves the problem:
>
> R-patched> x
>      A B C  D
> a    1 4 7 10
> <NA> 2 5 8 11
> c    3 6 9 12
>
> -----------------------------------------------------------------------------
>
> An NA in the colnames has similar misalignment problems:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> colnames(x)[2] <- NA
> R> x
>   A <NA> C  D
> a 1  4 7 10
> b 2  5 8 11
> c 3  6 9 12
>
> But this time it's because lines 72, 139, 213, 299, and 375 of
> src/main/printarray.c use "strlen", which doesn't know about NA's:
>
>   clabw = strlen(CHAR(STRING_ELT(cl, j)));
>
> My patch is to replace "strlen" with "Rstrlen" in each case:
>
>   clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);
>
> and again this solves the problem:
>
> R-patched> x
>   A <NA> C  D
> a 1    4 7 10
> b 2    5 8 11
> c 3    6 9 12
>
> -----------------------------------------------------------------------------
>
> References:
>
> Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
>   http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
> but this was fixed in R-1.5.1.
>
> Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
> and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6367.html
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug 13 21:43:42 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 13 Aug 2002 22:43:42 +0200 (MET DST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
Message-ID: <200208132043.WAA13848@pubhealth.ku.dk>


Please find replication code below
Best

Jens Oehlschlgel


> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
[1] 2 3 4 1
> order(x, na.last=TRUE, decreasing=TRUE)
[1] 4 3 2 1
> order(x, na.last=FALSE, decreasing=FALSE)
[1] 1 2 3 4
> order(x, na.last=FALSE, decreasing=TRUE)
[1] 1 4 3 2
> order(x, na.last=NA, decreasing=FALSE)
[1] 2 3 4
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
[1] 2 3 4
> 

x <- c(NA, 1, 2, 3)
order(x, na.last=TRUE, decreasing=FALSE)
order(x, na.last=TRUE, decreasing=TRUE)
order(x, na.last=FALSE, decreasing=FALSE)
order(x, na.last=FALSE, decreasing=TRUE)
order(x, na.last=NA, decreasing=FALSE)
# THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
order(x, na.last=NA, decreasing=TRUE)



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 22:07:37 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 23:07:37 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208132107.XAA13950@pubhealth.ku.dk>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> Have you looked at R-devel?  Neither of these are currently incorrect.

I see you fixed these very issues on Aug 1 by modifying MatrixRowLabel and
friends.  Sorry for not checking there first!  I will let Derek know.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:01:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:01:34 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.LNX.4.31.0208140659560.11641-100000@gannet.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Sorry, but it was indeed the redirection of the standard output in
> Cygwin/bash that cause the first problem, not R (I should stop doing
> troubleshooting at 1:00 AM). So please forget about the problems reported in
> R_CMD_check.out. However, it would still be nice if you still update R CMD
> check to do join with "\n".

Yes, on ME.  That was my prime suspect.

The change has already been made.

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

Will take a look.

> Sorry about that, I hope none of you spent time on the first problem.

Not me: I could not reproduce it on XP.

> Henrik
>
> -----Original Message-----
> From: Henrik Bengtsson [mailto:hb@maths.lth.se]
> Sent: Wednesday, August 14, 2002 12:50 AM
> To: ripley@stats.ox.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> I did some error tracking myself. I verified that the Perl generated
> temporary [R] file was correct. I narrowed down the problem to be with the
> redirecting of the standard input, i.e. <, into [R] and I also found that I
> could not get the same problem if I source()'d the same file. Then I thought
> it might be my shell (Cygwin/bash), but not! Doing
>
>  % cat < R_CMD_check.out
>
> is just fine, but when doing
>
>   R --vanilla --quiet < R_CMD_check.out
>
> I run into problems. It looks like every line that is long enough will get
> some garbage bytes inserted at column 1023. I have attached the
> R_CMD_check.out file with comments for you. As you see, it is not what R CMD
> check have generated, but as the problem is not with R CMD check itself
> anymore I removed the non-interesting parts.
>
> Maybe related to this is another problem that makes source() crash if I have
> a too long string (>2128 characters) inside a function definition. The
> attached R script TooLongLines.R is supposed to illustrate this. It also
> contains Dr. Mingw's report.
>
> FYI: I'll be out of the office from Wednesday noon-Sunday.
>
> Henrik Bengtsson
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, August 13, 2002 11:43 AM
> > To: hb@maths.lth.se
> > Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> > Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
> >
> >
> > On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.5.1
> > > OS: WinMe
> > > Submission from: (NULL) (217.210.0.243)
> > >
> > >
> > > In the Perl script $R_HOME/bin/check there is a bug under the
> > section "Check R
> > > code for syntax errors" where the 'Rfiles <- c(...)' is build
> > up. If there are
> > > too many files in @Rfiles the source code line generated will
> > be too long and
> > > weird things will happen, e.g. strange bytes/characters will be
> > inserted.
> >
> > > SUGGESTION/SOLUTION:
> > > Add a new line character after each "join";
> > >
> > >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> > >
> > > instead of
> > >
> > >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> > >
> > >
> > > SUGGESTION II:
> > > I ran into similar problems in other situations where I
> > autogenerated too long
> > > source lines. The errors where hard to reproduce and took time
> > to find. It would
> > > be nice if the [R] parser, or some previous engine that reads
> > the source file,
> > > could given an explicit error saying that the "line was too long".
> > >
> > > EXAMPLE:
> > > In my case I got in perl '@Rfiles' was:
> > > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> > R/Filter.R
> > > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> > TFilter.R R/Copy of
> > > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> > R/DfFilter.R
> > > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> > >
> > > but in [R] 'Rfiles' became:
> > >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> > >  [3] "R/GenePixData.R"               "R/Layout.R"
> > >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> > >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> > >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > > [11] "R/zzz.R"                       "R/Replicates.R"
> > > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > > [17] "R/RGData.R"                    "R/RawData.R"
> > > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > > [33] "R/AFilter.R"                   "R/MFilter.R"
> > > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> > >
> > > Look at the 56 element. Trying to add or remove files, I found
> > that this was
> > > always happening at the same column in the Rfiles row and
> > inferred that this is
> > > due to the maximum line length in [R] source files. Correct?
> >
> > There is no such line limit.  If I take your file list, convert it via the
> > orginal join and read it into R, I don't get a problem, under Linux or
> > Windows XP. I think you are hitting the limitations of your `operating
> > system', not R.  But without a reproducible example it is hard to tell.
> >
> > Package survival has 92 files with file names at least as long as yours,
> > and that works perfectly happily on Windows XP.
> >
> > Can you make available a sample package which exhibits the problem?
> >
> > Nevertheless, joining with "\n" should be a palliative measure.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> >
> >
> >
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:02:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:02:33 +0100 (BST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
In-Reply-To: <200208132043.WAA13848@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208140701460.11641-100000@gannet.stats>

Fixed now.  If you need the fix, the do.call line should be

        ans <- do.call("order", c(z, decreasing=decreasing))

Thanks!

On Tue, 13 Aug 2002 oehl_list@gmx.de wrote:

>
> Please find replication code below
> Best
>
> Jens Oehlschlgel
>
>
> > x <- c(NA, 1, 2, 3)
> > order(x, na.last=TRUE, decreasing=FALSE)
> [1] 2 3 4 1
> > order(x, na.last=TRUE, decreasing=TRUE)
> [1] 4 3 2 1
> > order(x, na.last=FALSE, decreasing=FALSE)
> [1] 1 2 3 4
> > order(x, na.last=FALSE, decreasing=TRUE)
> [1] 1 4 3 2
> > order(x, na.last=NA, decreasing=FALSE)
> [1] 2 3 4
> > # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> > order(x, na.last=NA, decreasing=TRUE)
> [1] 2 3 4
> >
>
> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
> order(x, na.last=TRUE, decreasing=TRUE)
> order(x, na.last=FALSE, decreasing=FALSE)
> order(x, na.last=FALSE, decreasing=TRUE)
> order(x, na.last=NA, decreasing=FALSE)
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 10:26:31 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Aug 2002 10:26:31 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0208141024430.16141-100000@auk.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

I've tried to re-file that as new bug.
It's due to keeping the source which has a limit of 1024, so use
options(keep.source=FALSE) to work around this.

I've removed the limit for R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Aug 14 17:53:54 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 14 Aug 2002 18:53:54 +0200 (MEST)
Subject: strwidth
Message-ID: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>


Dear plotting experts, 

I need to determine the width of a string before plotting it to the
current device because I want to adjust `mai' to have
the necessary space available. It seems to me that this is an "hen and
egg" problem: 

R> a <- "test"
R> strwidth(a)  
Error in strwidth(a) : plot.new has not been called yet

# ok, I need an open device

R> plot(1:2, type="n")
R> strwidth(a)
[1] 0.04760034

fine. But I can't continue to plot to the current device because I need to
reset `mai', so I need a second one ...

This is not really a problem if plotting to the screen but plotting to a
file leads to at least one page of non sense. Or am I just disoriented?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 17:59:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 17:59:03 +0100 (BST)
Subject: strwidth
In-Reply-To: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>
Message-ID: <Pine.LNX.4.31.0208141756030.18789-100000@gannet.stats>

On Wed, 14 Aug 2002, Torsten Hothorn wrote:

> I need to determine the width of a string before plotting it to the
> current device because I want to adjust `mai' to have
> the necessary space available. It seems to me that this is an "hen and
> egg" problem:

`chicken and egg' is idiomatic.

> R> a <- "test"
> R> strwidth(a)
> Error in strwidth(a) : plot.new has not been called yet
>
> # ok, I need an open device
>
> R> plot(1:2, type="n")
> R> strwidth(a)
> [1] 0.04760034
>
> fine. But I can't continue to plot to the current device because I need to
> reset `mai', so I need a second one ...

Ah, but you don't need a coordinate system:

> a <- "test"
> plot.new()
> par(mai=rep(30*strwidth(a), 4))
> plot(1:2)

works.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Thu Aug 15 12:26:06 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 15 Aug 2002 13:26:06 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029410767.1964.15.camel@hgX>

Thank you for the hint.
I rebuild gcc and R from scratch and now it works. Here's how on RH7.3,
which might help others:

configured gcc with: --enable-languages=c,c++,objc,f77
--program-suffix=3 --prefix=/usr

in config.site for R the following variables are then set:
CC=gcc3
F77=f773
CXX=g++3
LDFLAGS=-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.1
-L/usr/lib/gcc-lib/i686-pc-linux-gnu

Thank you very much again.

Best wishes,

	Stefan

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 09:30:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 10:30:49 +0200 (MET DST)
Subject: source() crashes on long lines (PR#1900)
Message-ID: <200208140830.KAA16483@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: 8BIT
Content-ID: <Pine.GSO.4.44.0208140920312.15226@auk.stats>

This is a separate bug, reproducible on Solaris, so I am re-filing it as a
new report.

There may well need to be a linewidth limit, but this should be caught.

R --vanilla < TooLongLines.R does work.

R-bugs mangles attachments, but my mailer does not like very long lines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Wed, 14 Aug 2002 00:49:43 +0200
From: Henrik Bengtsson <hb@maths.lth.se>
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)

I did some error tracking myself. I verified that the Perl generated
temporary [R] file was correct. I narrowed down the problem to be with the
redirecting of the standard input, i.e. <, into [R] and I also found that I
could not get the same problem if I source()'d the same file. Then I thought
it might be my shell (Cygwin/bash), but not! Doing

 % cat < R_CMD_check.out

is just fine, but when doing

  R --vanilla --quiet < R_CMD_check.out

I run into problems. It looks like every line that is long enough will get
some garbage bytes inserted at column 1023. I have attached the
R_CMD_check.out file with comments for you. As you see, it is not what R CMD
check have generated, but as the problem is not with R CMD check itself
anymore I removed the non-interesting parts.

Maybe related to this is another problem that makes source() crash if I have
a too long string (>2128 characters) inside a function definition. The
attached R script TooLongLines.R is supposed to illustrate this. It also
contains Dr. Mingw's report.

FYI: I'll be out of the office from Wednesday noon-Sunday.

Henrik Bengtsson

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Tuesday, August 13, 2002 11:43 AM
> To: hb@maths.lth.se
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.5.1
> > OS: WinMe
> > Submission from: (NULL) (217.210.0.243)
> >
> >
> > In the Perl script $R_HOME/bin/check there is a bug under the
> section "Check R
> > code for syntax errors" where the 'Rfiles <- c(...)' is build
> up. If there are
> > too many files in @Rfiles the source code line generated will
> be too long and
> > weird things will happen, e.g. strange bytes/characters will be
> inserted.
>
> > SUGGESTION/SOLUTION:
> > Add a new line character after each "join";
> >
> >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> >
> > instead of
> >
> >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> >
> >
> > SUGGESTION II:
> > I ran into similar problems in other situations where I
> autogenerated too long
> > source lines. The errors where hard to reproduce and took time
> to find. It would
> > be nice if the [R] parser, or some previous engine that reads
> the source file,
> > could given an explicit error saying that the "line was too long".
> >
> > EXAMPLE:
> > In my case I got in perl '@Rfiles' was:
> > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> R/Filter.R
> > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> TFilter.R R/Copy of
> > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> R/DfFilter.R
> > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> >
> > but in [R] 'Rfiles' became:
> >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> >  [3] "R/GenePixData.R"               "R/Layout.R"
> >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > [11] "R/zzz.R"                       "R/Replicates.R"
> > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > [17] "R/RGData.R"                    "R/RawData.R"
> > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > [33] "R/AFilter.R"                   "R/MFilter.R"
> > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> >
> > Look at the 56 element. Trying to add or remove files, I found
> that this was
> > always happening at the same column in the Rfiles row and
> inferred that this is
> > due to the maximum line length in [R] source files. Correct?
>
> There is no such line limit.  If I take your file list, convert it via the
> orginal join and read it into R, I don't get a problem, under Linux or
> Windows XP. I think you are hitting the limitations of your `operating
> system', not R.  But without a reproducible example it is hard to tell.
>
> Package survival has 92 files with file names at least as long as yours,
> and that works perfectly happily on Windows XP.
>
> Can you make available a sample package which exhibits the problem?
>
> Nevertheless, joining with "\n" should be a palliative measure.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>
>

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: APPLICATION/OCTET-STREAM; NAME="TooLongLines.R"
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.GSO.4.44.0208140920320.15226@auk.stats>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="TooLongLines.R"

# Doing source("TooLongLines.R") on this file and on [R] v1.5.1 on WinMe =
will
# make [R] crash. The "reason" is that there is a too long source line =
*inside*
# a function defintion. However, declaring a character variable with a =
very
# very long string works. See more comments below.


myFcn <- function() {
# I have inserted roman letter (L =3D 50, C =3D 100, D =3D 500, M =3D =
1000) in the string below to easier get the position of each character.
# Comments or something else, e.g.
x <- 2
# does not matter, the problem is the next very long line (>=3D2128 =
characters) inside a function() defintion:
"234567890123456789012345678901234567890123456789L12345678901234567890123=
45678901234567890123456789C1234567890123456789012345678901234567890123456=
789L1234567890123456789012345678901234567890123456789C1234567890123456789=
012345678901234567890123456789L123456789012345678901234567890123456789012=
3456789C1234567890123456789012345678901234567890123456789L123456789012345=
6789012345678901234567890123456789C12345678901234567890123456789012345678=
90123456789L1234567890123456789012345678901234567890123456789D12345678901=
23456789012345678901234567890123456789L1234567890123456789012345678901234=
567890123456789C1234567890123456789012345678901234567890123456789L1234567=
890123456789012345678901234567890123456789C123456789012345678901234567890=
1234567890123456789L1234567890123456789012345678901234567890123456789C123=
4567890123456789012345678901234567890123456789L12345678901234567890123456=
78901234567890123456789C1234567890123456789012345678901234567890123456789=
L1234567890123456789012345678901234567890123456789M1234567890123456789012=
345678901234567890123456789L123456789012345678901234567890123456789012345=
6789C1234567890123456789012345678901234567890123456789L123456789012345678=
9012345678901234567890123456789C12345678901234567890123456789012345678901=
23456789L1234567890123456789012345678901234567890123456789C12345678901234=
56789012345678901234567890123456789L1234567890123456789012345678901234567=
890123456789C1234567890123456789012345678901234567890123456789L1234567890=
123456789012345678901234567890123456789D123456789012345678901234567890123=
4567890123456789L1234567890123456789012345678901234567890123456789C123456=
7890123456789012345678901234567890123456789L12345678901234567890123456789=
01234567890123456789C1234567890123456789012345678901234567890123456789L12=
34567890123456789012345678901234567890123456789C1234567890123456789012345=
678901234567890123456789L123456789012345678901234567890123456789012345678=
9C1234567890123456789012345678901234567890123456789L123456789012345678901=
2345678901234567890123456789M12345678901234567890123456789012345678901234=
56789L1234567890123456789012345678901234567890123456789C12345678901234567=
8901234567"
# Comments or something else, e.g.
x <- 2
# does not matter. Any line shorter than 2128 works fine, i.e. removing
# the last '7' from the string above and source("TooLongLines.R") will
# be just fine.
} # myFcn()


# 'Rterm --vanilla' and 'RGUI.exe' ([R] v1.5.1 (2002-06-17) on WinMe) =
both
# give 'Signal 127' and Dr. Mingw reports:
#
#  RTERM.EXE caused an Access Violation at location 00486a03 in module =
R.DLL Writing to location 00486a95.
# =20
#  Registers:
#  eax=3D00486a95 ebx=3D0091e990 ecx=3D0091ecb0 edx=3D00484028 =
esi=3D00000000 edi=3D0000007b
#  eip=3D00486a03 esp=3D0091e8f4 ebp=3D0091e900 iopl=3D0         nv up =
ei pl nz na po cy
#  cs=3D018f  ss=3D0197  ds=3D0197  es=3D0197  fs=3D271f  gs=3D0000      =
       efl=3D00010207
# =20
#  Call stack:
#  00486A03  R.DLL:00486A03  R_Parse
#  004873D1  R.DLL:004873D1  Rf_yyerror
#  00487933  R.DLL:00487933  Rf_isValidName
#  00487ECC  R.DLL:00487ECC  Rf_yylex
#  00484D71  R.DLL:00484D71  Rf_yyparse
#  004866DF  R.DLL:004866DF  Rf_yyparse
#  004869E1  R.DLL:004869E1  R_Parse
#  00486B66  R.DLL:00486B66  R_ParseConn
#  004F6AC3  R.DLL:004F6AC3  do_parse
#  004AA5A7  R.DLL:004AA5A7  do_internal
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  004812D9  R.DLL:004812D9  Rf_evalList
#  0047F5E2  R.DLL:0047F5E2  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  0049D325  R.DLL:0049D325  R_PromptString
#  0049DC74  R.DLL:0049DC74  run_Rmainloop
#  0049DC8C  R.DLL:0049DC8C  Rf_mainloop
#  0040153D  RTERM.EXE:0040153D
#  0040139C  RTERM.EXE:0040139C
#  0040166D  RTERM.EXE:0040166D
#  004010F4  RTERM.EXE:004010F4
#  004011EF  RTERM.EXE:004011EF
#  BFF7B9E4  KERNEL32.DLL:BFF7B9E4  IsDBCSLeadByte
#  BFF7B896  KERNEL32.DLL:BFF7B896  IsDBCSLeadByte
#  BFF7A24F  KERNEL32.DLL:BFF7A24F  MakeCriticalSectionGlobal







------=_NextPart_000_0006_01C2432C.7ACD6BA0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Aug 15 21:28:01 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 15 Aug 2002 22:28:01 +0200 (MET DST)
Subject: order(1, na.last=NA) fails (PR#1913)
Message-ID: <200208152028.WAA00080@pubhealth.ku.dk>


R> order(1, na.last=NA)
Error in apply(sapply(z, is.na), 1, any) : 
	dim(X) must have a positive length

This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
It comes from the line inside order():

   ok <- !apply(sapply(z, is.na), 1, any)

where z=list(1) in my example.  sapply() returns a single-element vector, not a
matrix, making apply() unhappy.  This might work better:

   nas <- sapply(z, is.na)
   ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Fri Aug 16 03:49:34 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Fri, 16 Aug 2002 04:49:34 +0200 (MET DST)
Subject: print("") crashes Rgui (PR#1914)
Message-ID: <200208160249.EAA00980@pubhealth.ku.dk>

Full_Name: Ronnen Levinson
Version: 1.5.1
OS: Win98SE
Submission from: (NULL) (128.3.13.116)


Hi.

It appears that any attempt to display the Greek letter mu () crashes Rgui.
The letter  was part of a string read from a text file (entered as ALT-0181).
My problem is that R crashes when I try to print the line from the file that
contains
this character.

Try, for example, print("").

Yours truly,

Ronnen.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:25:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:25:39 +0100 (BST)
Subject: =?X-UNKNOWN?Q?Re=3A_print=28=22=B5=22=29_crashes_Rgui_=28PR#1914?=
 =?X-UNKNOWN?Q?=29?=
In-Reply-To: <200208160249.EAA00980@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160717510.25058-100000@gannet.stats>

See the rw-FAQ, question 2.14.  Your example is fine on my XP machine.
This is a sign of a corrupt version of Windows, not an R problem.

If you must persist in filing reports on known problems, at least supply
new evidence.  The rw-FAQ shows you have to produce a useful post-mortem
dump.

On Fri, 16 Aug 2002 RML27@cornell.edu wrote:

> Full_Name: Ronnen Levinson
> Version: 1.5.1
> OS: Win98SE
> Submission from: (NULL) (128.3.13.116)
>
>
> Hi.
>
> It appears that any attempt to display the Greek letter mu () crashes Rgui.
> The letter  was part of a string read from a text file (entered as ALT-0181).
> My problem is that R crashes when I try to print the line from the file that
> contains
> this character.
>
> Try, for example, print("").

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:34:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:34:47 +0100 (BST)
Subject: order(1, na.last=NA) fails (PR#1913)
In-Reply-To: <200208152028.WAA00080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160733080.25058-100000@gannet.stats>

True, but you should really be using sort.list on a single vector.
Fixed now.

On Thu, 15 Aug 2002 brahm@alum.mit.edu wrote:

>
> R> order(1, na.last=NA)
> Error in apply(sapply(z, is.na), 1, any) :
> 	dim(X) must have a positive length
>
> This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
> It comes from the line inside order():
>
>    ok <- !apply(sapply(z, is.na), 1, any)
>
> where z=list(1) in my example.  sapply() returns a single-element vector, not a
> matrix, making apply() unhappy.  This might work better:
>
>    nas <- sapply(z, is.na)
>    ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Aug 17 17:49:26 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 17 Aug 2002 18:49:26 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208171649.SAA09874@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> Here is an example:
> 
>  The legends (mainly the factor level names) are cut off on the
>  right.  Somehow the internal calculation which computes
>  horizontal space for the legend is not flexible enough.
> 
> ## Call a new graphics window {with default par()s !}:
> get(getOption("device"))()
> par(mfrow = c(2,2))
> 
> ## part of  example(interaction.plot)  _improved_ using with() :
> data(OrchardSprays)
> with(OrchardSprays, {
>     interaction.plot(treatment, rowpos, decrease)
>     interaction.plot(rowpos, treatment, decrease)
> })
> 
> data(esoph)
> with(esoph, {
>     interaction.plot(agegp, alcgp, ncases/ncontrols)
>     interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
>                      fixed=TRUE)
> })
> 
> -------------------------------
> 
> Something that should be easy to fix, but needs some care (and
> time).
> Volunteers?

Martin, 

not right now (may be easy, but obviously not very easy ;-)). 
I'd like to comment that I filed this already as bug report #1305,
including a suggestion for a fix for a second bug related to axis
annotation.

Best,
Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From uluru@email.unc.edu  Sun Aug 18 22:28:10 2002
From: uluru@email.unc.edu (uluru@email.unc.edu)
Date: Sun, 18 Aug 2002 17:28:10 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
Message-ID: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>

I have been taking a break for the last month or so, and am only just
now catching up on my email.  Otherwise, I would have joined this
discussion earlier.  And... I apologize for the length of this, but I
don't think it is overly long.

>From the amount of activity in the LispStat news group (none), it seems
that LispStat is dead. We all know that Luke is working on R and not on
LispStat, and that Jan has switched UCLA over from LispStat to R. And we
have not heard from users of LispStat for some time.  So, it seems no
one is using LispStat.

For me, at least, this is not the case. As the developer of ViSta, I
have and still am using LispStat a great deal. In fact, I cannot
conceive of doing what I do with any other system.  

Of course, since I use it so much, I am very aware of LispStat's
strengths and weaknesses, and want to add my views to the discussion.
However, I spend all my time using only LispStat, so I can't make any
comparisons to R or to any other systems.

To me, the strengths of LispStat are:
1) The dynamic, highly interactive graphics
2) The object system
3) Lisp language and byte compiler

These strengths make LispStat an ideal system for implementing
statistical systems. It is less suited for doing statistical analysis.
As a result, the most significant uses of LispStat have been statistical
systems such as Arc and ViSta.

In the work I've done with LispStat,  ViSta's spreadplot architecture is
the best example of LispStat being used to implement a statistical
(sub)system (described in a forthcoming JCGS paper by myself, Pedro
Valero, Richard Faldowski and Carla Bann). 

The weaknesses of LispStat are:
1) No high-level analysis modules
2) No standards for data sets, models, etc.
3) No user-oriented data manipulation language
4) Totally inadequate documentation
5) Poor or non-existant printing 
6) No static graphic manipulation facilities
7) The underlying operating system interfaces are old.

ViSta attempts to take care of these weaknesses, with varying degrees of
success. Specifically:
1) ViSta has high-level analysis plugins. The method for writing these
plugins is documented. I believe this very well solves the first weakness. 
2) ViSta's statistical object architecture -- a hierarchy of objects
that include datasets, datasheets, data editors, transformations,
analysis methods, models and plugins --- solves the lack of standards
for such things. The implementation is slow for data objects and needs
to be re-architected. The implementation for the others is more than
adequate.
3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
awkward lisp equivalent:
(setf a (^ (* 2 (+ b c)) 2)) 
(I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
combinations, are working on the documentation problem.
5) Printing, while better than LispStat, is still not adequate.
6) Static graphics manipulation, as in SAS (and, apparently R), is
totally lacking.
7) Nothing has been done about this.

(Note that the newest version of ViSta use a modified version of
LispStat that only works under Windows, so that Mac/Unix users don't
have all the new features. This problem can be fixed by someone familiar
with LispStat and Unix.)

I am very interested in an effort to combine the strengths of LispStat
and R, but have no clue how it would be done.  From my viewpoint,
though, it would need to add the three strengths of LispStat (Lisp,
Objects and Dynamic Graphics) to the existing R environment, and it
would need to work in all three supported environments -- Windows, Mac,
and Linux/Unix

Anyone know how to do that?

Forrest
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 05:09:22 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 18 Aug 2002 21:09:22 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <3D603F4D.9090707@stat.ucla.edu>
Message-ID: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>


On Sunday, August 18, 2002, at 05:43 PM, Forrest wrote:

> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
>

Since R has its own object system, and its own array language (with
many of the mapping functions etc from Lisp), I think we would go a long
way towards this goal by just adding dynamic graphics to R (which
people are working on, it seems). In fact, the tcltk interface (which  
now
exists natively on MSW, X11, and Aqua) already has some mouse
interaction -- see demo(tkcanvas), and quite a bit can be done by
using nonstandard packages such as RGtk (on MSW and X11).

I really hated to give up Lisp (and many lines of existing code), and I  
agree
that extensions such as Vista and Arc are major arguments in favor of
XLS, but it seems that XLS is best as an environment to develop
GUI statistics tools (hiding the lisp) and not as an environment to  
actually
do statistics. Vista and Arc are great for teaching, but raw XLS is not.
In that sense XLS is more like a specialized version of  one of the  
scripting
languages such as Ruby or Python or VB or Tcl/Tk.

So basically, it would be great if the capability to write GUI  
statistics
packages on top of raw R would be part of R -- this includes dynamic
graphics, but it also includes a library of widgets. My feeling is that
the current possibilities (tcltk and RGtk) are too far removed from the
core of R.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 19 14:23:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 19 Aug 2002 14:23:35 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <x2adnjf0f9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208191423130.13749-100000@gannet.stats>

On 19 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > Which compiler is this?
> >
> > I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> > gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> > versions of gcc. I think this is particularly critical when C/C++ mixtures
> > are used (as in svm).
> >
> > PR#1178 is another non-reproducible segfault in svm on Linux.
>
> It *is* reproducible on another stock RH7.3, though. I might try
> digging a little deeper when I recover from the NY/Boston meetings.

I still think it is the compiler.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 19 14:22:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 2002 15:22:34 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <x2adnjf0f9.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.

It *is* reproducible on another stock RH7.3, though. I might try
digging a little deeper when I recover from the NY/Boston meetings. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:02:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:02:01 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15712.43650.992922.150193@gargle.gargle.HOWL>
Message-ID: <FF330AF9-B38C-11D6-A6D6-000393860F3C@stat.ucla.edu>

I have compiled Darwin R using the AquaTk frameworks. This works
(except for a small glitch). I am sure Stefano could hook these into
Carbon R, but Jose/Stefano probably should connect them with
the Cocoa interfaces. You can get the frameworks (8.4a5, I
think) from ftp://ftp.ucsd.edu/pub/alpha/tcl/alphatk/ -- they are
in the alphatk.dmg. Of course the X11 version of tcltk does NOT
work with Carbon R.

On Monday, August 19, 2002, at 01:21 AM, Martin Maechler wrote:

> Dear Jan
>
>>>>>> "Jan" == Jan de Leeuw <deleeuw@stat.ucla.edu>
>>>>>>     on Sun, 18 Aug 2002 21:09:22 -0700 writes:
>
>       ....
>
>     Jan>  ....... In fact, the tcltk interface
>     Jan> (which now exists natively on MSW, X11, and Aqua)
>
> Can you explain ? {maybe on R-devel}
> I'm not a Mac expert at all, not even a regular user.  But I've
> talked with Stefano Iacus two days ago and he said that R's
> tcltk package was not working with "Carbon R".
>
> Do you think this would be fixable easily enough?
> We {most of R core} would be very glad to be able to say
> "tcltk runs on all platforms that R runs" and hance can be
> easily made available on all platforms.
>
>
>     Jan> already has some mouse interaction -- see
>     Jan> demo(tkcanvas), and quite a bit can be done by using
>     Jan> nonstandard packages such as RGtk (on MSW and X11).
>
>
>     Jan> I really hated to give up Lisp (and many lines of
>     Jan> existing code), and I agree that extensions such as
>     Jan> Vista and Arc are major arguments in favor of XLS, but
>     Jan> it seems that XLS is best as an environment to develop
>     Jan> GUI statistics tools (hiding the lisp) and not as an
>     Jan> environment to actually do statistics. Vista and Arc
>     Jan> are great for teaching, but raw XLS is not.  In that
>     Jan> sense XLS is more like a specialized version of one of
>     Jan> the scripting languages such as Ruby or Python or VB or
>     Jan> Tcl/Tk.
>
>     Jan> So basically, it would be great if the capability to
>     Jan> write GUI statistics packages on top of raw R would be
>     Jan> part of R -- this includes dynamic graphics, but it
>     Jan> also includes a library of widgets. My feeling is that
>     Jan> the current possibilities (tcltk and RGtk) are too far
>     Jan> removed from the core of R.
>
> You are right.  Fortunately things are changing.
> Also, as far as I understand Duncan Temple Lang, Rggobi
> (partly together with RGtk) makes up for a very nice
> programmably interface for dynamic graphics.
>
> Regards
>
> --  
> Martin Maechler  
> <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:13:51 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:13:51 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <6BCD49A9-B342-11D6-942F-000393937AC2@hsph.harvard.edu>
Message-ID: <A664E33E-B38E-11D6-A6D6-000393860F3C@stat.ucla.edu>

Byron

I meant there is no native (Aqua) version of GTK yet (there is  
wxWindows and Qt and Tk, so
possibly GTK will follow). The X11 version of RGtk works for me too. I  
agree with your
diagnosis of the GUI problem.

Best -- Jan

On Monday, August 19, 2002, at 12:08 AM, Byron Ellis wrote:

>
> On Monday, August 19, 2002, at 12:09 AM, Jan de Leeuw wrote:
>>
>
> I accidentally snipped the section, but RGtk also works on Mac OS X  
> with minor changes (which I *will* write down some day Duncan. Honest  
> I will :-) They're mostly changes to linkage and one cpp assumption  
> that doesn't hold under gcc--I don't have/want MPW). This includes the  
> GtkHTML widget (if you install GNOME from Fink).
>
>> I really hated to give up Lisp (and many lines of existing code), and  
>> I  agree
>> that extensions such as Vista and Arc are major arguments in favor of
>> XLS, but it seems that XLS is best as an environment to develop
>> GUI statistics tools (hiding the lisp) and not as an environment to   
>> actually
>> do statistics. Vista and Arc are great for teaching, but raw XLS is  
>> not.
>> In that sense XLS is more like a specialized version of  one of the   
>> scripting
>> languages such as Ruby or Python or VB or Tcl/Tk.
>>
>> So basically, it would be great if the capability to write GUI   
>> statistics
>> packages on top of raw R would be part of R -- this includes dynamic
>> graphics, but it also includes a library of widgets. My feeling is  
>> that
>> the current possibilities (tcltk and RGtk) are too far removed from  
>> the
>> core of R.
>
> My personal feeling is that there are presently two (related)  
> problems: The GUI interfaces are too low level and (because of this)  
> building GUIs is neither easy enough for most nor portable enough in  
> the sense that you develop for a particular underlying GUI rather than  
> developing a GUI which is implemented using an underlying GUI---though  
> it occurs to me that this is maybe the same as being too far removed  
> from the core in that a specification of a GUI should perhaps exist  
> (though a particular implementation probably shouldn't---in the same  
> way, I suppose, that Java's AWT was a specification rather than a  
> particular implementation--that being up to the VM vendors of a  
> particular platform)
>
>>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-
>> .-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
>> FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._
>> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pc_olsen@yahoo.com  Mon Aug 19 17:41:52 2002
From: pc_olsen@yahoo.com (Peter Olsen)
Date: Mon, 19 Aug 2002 12:41:52 -0400
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
Message-ID: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>

Has anyone else looked at the Python module that allows Python to call
R and vice versa?  

I think that might have promise.  Python offers an excellent
object-oriented development environment in which to embed the use of
R's statistical and graphics routines.

Peter Olsen, P.E., Ae.E.

"Engineering is the art of using a professional knowledge of
mathematics and the physical sciences to improve the quality of life."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 17:55:35 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 09:55:35 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
 <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
Message-ID: <87znvi3i0o.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Olsen <pc_olsen@yahoo.com> writes:

    peter> Has anyone else looked at the Python module that allows Python to call
    peter> R and vice versa?  

    peter> I think that might have promise.  Python offers an excellent
    peter> object-oriented development environment in which to embed the use of
    peter> R's statistical and graphics routines.

There are two such modules, RPy and RSPython.  

I would agree, Python is an excellent language; my favorite, by far,
after Lisp and R.  Platform independence and "plays well with other
langauges" are quite robust.  HOWEVER, I'm getting less and less
convinced that the OOP aspects that Python excels at are suitable for
interactive data analysis (maybe for scripted analysis, but not for a
line-at-a-time approach, which R can encourage).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Aug 19 20:02:22 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 19 Aug 2002 15:02:22 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>

Dear R-devel,

Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
two linux boxes.  It only took me a couple of hours of screwing around to
get it working (sooner if I had RTFM).  

Our setup is: 2 dual PIII-866 Xeons, one with 2GB RDRAM, the other with
1.28GB RDRAM.  The first machine is acting as the NIS/NFS server.  both /usr
and /home are exported to the second machine, so both are seeing the same
copy of R.

I managed to get the following, using the same example that Prof. Tierney
used:

> system.time(nuke.boot <-
+             boot(nuke.data, nuke.fun, R=999, m=1,
+                  fit.pred=new.fit, x.pred=new.data))
[1] 29.38  0.52 30.68  0.00  0.00
> system.time(cl.nuke.boot <-
+             clusterCall(cl,boot,nuke.data, nuke.fun, R=500, m=1,
+                         fit.pred=new.fit, x.pred=new.data))
[1]  0.03  0.00 15.44  0.00  0.00

So I'm getting almost twice the performance, which is great.

Now the questions:

1.  Since each of these boxes has two CPUs, how do I spawn more than one
slave process on them?

2.  I was hoping I can see similar gain with randomForest, but that doesn't
seem to be the case:

> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
[1] 8.52 1.00 9.61 0.00 0.00
> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
+                                       iris[,5], ntree=5000))
[1]  1.38  0.14 15.50  0.00  0.00

What am I missing here?  Is there anything I can do to see similar gain as
the boot() example?

Thanks very much in advance for any pointers, and big thanks to the
developers of these great stuff!!

Regards,
Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 20:27:26 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 12:27:26 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <87bs7y1wf5.fsf@jeeves.blindglobe.net>

>>>>> "andy" == Andy Liaw <Liaw> writes:

    andy> Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
    andy> two linux boxes.  It only took me a couple of hours of screwing around to
    andy> get it working (sooner if I had RTFM).  

Which is why we wrote TFM.... :-).  It's the annoying part of
clustering (true for nearly every clustering system currently
available).

    andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
    andy> slave process on them?

Create a cluster of more virtual machines.  There isn't necessarily a
1-1 map from virtual machines to real machines (i.e. you can run 3
virtual machines on 1 host, but don't expect ANY gain...).

    andy> 2.  I was hoping I can see similar gain with randomForest, but that doesn't
    andy> seem to be the case:

    >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
    andy> [1] 8.52 1.00 9.61 0.00 0.00
    >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
    andy> +                                       iris[,5], ntree=5000))
    andy> [1]  1.38  0.14 15.50  0.00  0.00

    andy> What am I missing here?  Is there anything I can do to see similar gain as
    andy> the boot() example?

Monitor the processes with XPVM, as Michael showed.  If you were at
the session, you would've noted Antony's comment on visualization and
how nice it would've been if it was real time -- it was false, xpvm
does real-time monitoring.  

You also might write Michael for the augmentations he's done for
SNOW.  lina@u.washington.edu

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Mon Aug 19 23:21:31 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Tue, 20 Aug 2002 00:21:31 +0200 (MET DST)
Subject: PR#1914
Message-ID: <200208192221.AAA21461@pubhealth.ku.dk>

(1) With MSVCRT.DLL (version 4.20.6164) from
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe installed in
rw1051\bin directory, as per RWinFAQ 2.14:

RGUI caused an invalid page fault in
module MSVCRT.DLL at 017f:78014b90.
Registers:
EAX=0093007a CS=017f EIP=78014b90 EFLGS=00010246
EBX=017a2360 SS=0187 ESP=0091eee4 EBP=0091ef10
ECX=ffffffb5 DS=0187 ESI=00000000 FS=5bbf
EDX=81d7d520 ES=0187 EDI=00000022 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 47 c6 fe ff 8b
Stack dump:
004dd734 ffffffb5 0091ef0c 027f0e7f 00000001 00000000 00000022 00000000
004dddb7 004ddd7d 00000000 0091ef40 00482a81 017a2360 00000022 00f2da40

> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R

(2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
dump. I also see no link in the R-Bugs page to the either of these FAQs,
nor a list of bugs that should not be reported. If you wish users to
follow a specific protocol for reporting bugs (and the RFaq section 9
does not request port-mortem dumps, or list bugs nots to report),
specifying this protocol on the R-Bugs page will expedite matters.

-- Ronnen --

--
Ronnen Levinson, Ph.D.            \/      RML27@cornell.edu
scientist                         ||      http://ronnen.com
Lawrence Berkeley National Lab    /\      fax 425.955.1992

======================================
Arthur Dent hoped and prayed there wasn't an afterlife. Then, realizing
the contradiction,
he merely hoped there wasn't an afterlife.

-- Douglas Adams
======================================



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 14:00:28 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 15:00:28 +0200
Subject: PR#1914
In-Reply-To: <200208192221.AAA21461@pubhealth.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
Message-ID: <x2wuql1y8j.fsf@biostat.ku.dk>

RML27@cornell.edu writes:

> (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> dump. I also see no link in the R-Bugs page to the either of these FAQs,
> nor a list of bugs that should not be reported. If you wish users to
> follow a specific protocol for reporting bugs (and the RFaq section 9
> does not request port-mortem dumps, or list bugs nots to report),
> specifying this protocol on the R-Bugs page will expedite matters.

I think that was a typo: Brian meant "..shows you how to..", not
"..have to..". We wouldn't require that in general. However, I can't
find any description in there of how to use dr.Watson et al. either. (??)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 20 14:49:53 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 20 Aug 2002 14:49:53 +0100
Subject: NA and help page for "&" and "|"
Message-ID: <3D624901.C2D83100@durham.ac.uk>

Hi everyone,

Can I suggest an addition to the help page for logical AND and OR,
indicating the behaviour of NA (which is currently not mentioned at
all).  I think something simple like an extra paragraph in Details, eg

\code{NA} is a valid logical object.  Where a component of \code{x} or
\code{y} is \code{NA}, the result will be \code{NA} if the outcome is
ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
\code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

And so it might also be a good idea to add a truth-table to the
examples, eg

# construct truth table for logical &

x <- c(NA, FALSE, TRUE)
names(x) <- as.character(x)
outer(x, x, "&")

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 20 16:29:42 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Aug 2002 17:29:42 +0200
Subject: NA and help page for "&" and "|"
In-Reply-To: <3D624901.C2D83100@durham.ac.uk>
References: <3D624901.C2D83100@durham.ac.uk>
Message-ID: <15714.24678.198267.571629@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>>>>>     on Tue, 20 Aug 2002 14:49:53 +0100 writes:

    JonR> Hi everyone,
    JonR> Can I suggest an addition to the help page for logical AND and OR,
    JonR> indicating the behaviour of NA (which is currently not mentioned at
    JonR> all).  I think something simple like an extra paragraph in Details, eg

    JonR> \code{NA} is a valid logical object.  Where a component of \code{x} or
    JonR> \code{y} is \code{NA}, the result will be \code{NA} if the outcome is
    JonR> ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
    JonR> \code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

    JonR> And so it might also be a good idea to add a truth-table to the
    JonR> examples, eg

    JonR> # construct truth table for logical &

    JonR> x <- c(NA, FALSE, TRUE)
    JonR> names(x) <- as.character(x)
    JonR> outer(x, x, "&")

Thanks a lot, Jonathan, for the helpful suggestions.
I'm adding these to R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Tue Aug 20 20:30:22 2002
From: lina@u.washington.edu (Michael Na Li)
Date: Tue, 20 Aug 2002 12:30:22 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com> ("Liaw,
 Andy"'s message of "Mon, 19 Aug 2002 15:02:22 -0400")
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>

>>>>> On Mon, 19 Aug 2002 15:02:22 -0400, "Liaw, Andy" <andy_liaw@merck.com> said:


Andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
Andy> slave process on them?

Note unlike MPI, PVM has no access to hardware information like the number of
CPUs on each node.  So there is no restriction on how many tasks one can spawn
on the cluster.  More tasks may be desirable when some of them are less CPU
intensive jobs.  For instances, tasks that monitor the activity of the
network, report host or task failure and spawn new task or add new hosts, etc.

Andy> 2.  I was hoping I can see similar gain with randomForest, but that
Andy> doesn't seem to be the case:

>> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
Andy> [1] 8.52 1.00 9.61 0.00 0.00
>> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
Andy> +                                       iris[,5], ntree=5000))
Andy> [1]  1.38  0.14 15.50  0.00  0.00

Andy> What am I missing here?  Is there anything I can do to see similar gain
Andy> as the boot() example?

I tried this example and found that most of the extra time is overhead, the
packing and unpacking of the messages.  When saving the object iris.rf, its
size is over 12M.  So it might be desirable to process the returned result in
each slave first and only return information needed.  

I got similar timing with our cluster.  Saving and loading the object to/from
a file require about 1.5 seconds each, which I assume is the cost of the
serialization (plus file reading and writing).  Then it seems the packing (as
bytes), transferring, and unpacking the object take 7-8 seconds??

I wonder how much the serialization itself hurts the performance.  Would
sending raw numbers with pvm routines improve the performance?

Michael

(BTW, is there a convenient function in R to examine the size of an object?)

-- 
---------------------------------------------------
Michael Na Li
Email: lina@u.washington.edu
Department of Biostatistics, Box 357232
University of Washington, Seattle, WA 98195  
---------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 20 20:36:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Aug 2002 20:36:14 +0100 (BST)
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <Pine.LNX.4.31.0208202035210.17166-100000@gannet.stats>

On Tue, 20 Aug 2002, Michael Na Li wrote:

> (BTW, is there a convenient function in R to examine the size of an object?)

object.size, but see the caveats on its help page.  Because of sharing,
it's none too well defined.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Aug 20 20:53:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Aug 2002 12:53:09 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
 <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <87y9b1b93u.fsf@jeeves.blindglobe.net>

>>>>> "michael" == Michael Na Li <lina@u.washington.edu> writes:

    michael> I got similar timing with our cluster.  Saving and loading the object to/from
    michael> a file require about 1.5 seconds each, which I assume is the cost of the
    michael> serialization (plus file reading and writing).  Then it seems the packing (as
    michael> bytes), transferring, and unpacking the object take 7-8 seconds??

    michael> I wonder how much the serialization itself hurts the performance.  Would
    michael> sending raw numbers with pvm routines improve the performance?

It might.  It is "well-known" that PVM (and MPI, and other
message-passing systems) have a marshalling overhead that can be
easily beat by RPC or direct socket programming.  This suggests that
the lower/rawer the data at the message passing stage, the faster it
might be.  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Aug 20 22:39:53 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 20 Aug 2002 14:39:53 -0700
Subject: various uploads
Message-ID: <5C880122-B485-11D6-990C-003065A21C86@stat.ucla.edu>


--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	delsp=yes;
	charset=US-ASCII;
	format=flowed

ftp://gifi.stat.ucla.edu/pub

1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from
Savannah CVS.

2. gcc-3.3.tar.gz is the latest version from Darwin CVS of gcc, g77, and
gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is
experimental and may not always work properly.

3. But it does compile and build R. See R-devel-gcc33.tar.gz, which
is an alternative to R-devel-f2c.tar.gz.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/enriched;
	charset=US-ASCII

ftp://gifi.stat.ucla.edu/pub


1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from

Savannah CVS.


2. <fontfamily><param>Lucida Grande</param>gcc-3.3.tar.gz is the
latest version from Darwin CVS of gcc, g77, and

gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is

experimental and may not always work properly.


3. But it does compile and build R. See R-devel-gcc33.tar.gz, which

is an alternative to R-devel-f2c.tar.gz.</fontfamily>

===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics

US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA
90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu  

                 www: http://www.stat.ucla.edu/~deleeuw

============================================================================

         Remember, wherever you go, there you are. --- Buckaroo Banzai

============================================================================


--Apple-Mail-2-32785479--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 22:41:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 23:41:32 +0200
Subject: PR#1914
In-Reply-To: <x2wuql1y8j.fsf@biostat.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
 <x2wuql1y8j.fsf@biostat.ku.dk>
Message-ID: <x2znvhcinn.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> RML27@cornell.edu writes:
> 
> > (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> > dump. I also see no link in the R-Bugs page to the either of these FAQs,
> > nor a list of bugs that should not be reported. If you wish users to
> > follow a specific protocol for reporting bugs (and the RFaq section 9
> > does not request port-mortem dumps, or list bugs nots to report),
> > specifying this protocol on the R-Bugs page will expedite matters.
> 
> I think that was a typo: Brian meant "..shows you how to..", not
> "..have to..". We wouldn't require that in general. However, I can't
> find any description in there of how to use dr.Watson et al. either. (??)

It's "Dr.Mingw" and it's in sec.7.4 (thanks and sorry, Brian). It's
not for the faint-hearted, but it is about the only way to really get
to the bottom of this sort of problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lingyun.Shi@fimat.com  Tue Aug 20 22:53:52 2002
From: Lingyun.Shi@fimat.com (Lingyun Shi)
Date: Tue, 20 Aug 2002 16:53:52 -0500
Subject: Failed on building libR.so
Message-ID: <OF2C767AA9.C5930284-ON86256C1B.00772254@fimat.com>


Hi,

I Failed to create libR.so. here's what I did and what's the error msg:

Under the R source installation directory : do:
1. make distclean
2. ./configure --enable-R-shlib
3. make

The error is :

gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H  -fPIC  -g -O2 -c connections.c -o connections.lo
connections.c:775: zlib.h: No such file or directory
*** Error code 1
make: Fatal error: Command failed for target `connections.lo'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'


I checked the directory, zlib.h is under /src/macintosh/zlib directory. How
should I fix this problem? Could someone help?

Thanks

Kate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chris@everyrecruiter.com  Tue Aug 20 20:12:28 2002
From: chris@everyrecruiter.com (Chris)
Date: Tue, 20 Aug 2002 19:12:28
Subject: New Position
Message-ID: PM20007:12:28 PM

This is an HTML email message.  If you see this, your mail client does not support HTML messages.

------=_NextPart_PWHGVBDQBM
Content-Type: text/html;charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<HTML>
<HEAD>
<TITLE>New Position</TITLE>

<BODY VLINK="#009999">

<HR>

<BASEFONT SIZE="3">

<P><FONT FACE="Arial"><FONT COLOR="#003399"><b>If you are going to find the job you want,</b> it will be here at <A HREF="http://www.everyrecruiter.com">http://www.everyrecruiter.com.</A></p>

<P><FONT FACE="Arial"><b>Why?</b> Because it is the only way you can connect with <B>employers</B>...</b>lots of employers.</FONT></P> 

<P><FONT FACE="Arial">Most jobseekers have come to realize that the old methods of looking for a job no longer work, but they don't know what else to do.</FONT></P> 

<P><FONT FACE="Arial"><b>A completely different approach is required.</b></FONT></p> 

<p><FONT FACE="Arial">Fewer and fewer employers are willing to deal with the avalanche of resumes they receive when they advertise an open position.That is why there is a decreasing number jobs advertised in the paper.</FONT></p>

<p><FONT FACE="Arial"> Instead, most employers prefer to search for employees at their convenience. And the place where most employers go to search is <A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com.</A></FONT></p>

<p><FONT FACE="Arial"><b>Will the employers who look today be able to find you?</b></FONT></p>

<p><FONT FACE="Arial"><b> Get connected -- Get the job!</p>
<p><A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com</A></b></FONT></p>
<HR></Body></Head></html>
------=_NextPart_PWHGVBDQBM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Aug 2002 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208210515.g7L5F4D05179@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Aug 21 14:33:58 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 21 Aug 2002 09:33:58 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5C6@usrymx10.merck.com>

> From: Michael Na Li [mailto:lina@u.washington.edu]
> Andy> 2.  I was hoping I can see similar gain with 
> randomForest, but that
> Andy> doesn't seem to be the case:
> 
> >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], 
> ntree=10000))
> Andy> [1] 8.52 1.00 9.61 0.00 0.00
> >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
> Andy> +                                       iris[,5], ntree=5000))
> Andy> [1]  1.38  0.14 15.50  0.00  0.00
> 
> Andy> What am I missing here?  Is there anything I can do to 
> see similar gain
> Andy> as the boot() example?
> 
> I tried this example and found that most of the extra time is 
> overhead, the
> packing and unpacking of the messages.  When saving the 
> object iris.rf, its
> size is over 12M.  So it might be desirable to process the 
> returned result in
> each slave first and only return information needed.  
> 
> I got similar timing with our cluster.  Saving and loading 
> the object to/from
> a file require about 1.5 seconds each, which I assume is the 
> cost of the
> serialization (plus file reading and writing).  Then it seems 
> the packing (as
> bytes), transferring, and unpacking the object take 7-8 seconds??

I tried the following, and it seems about right.  (I used a socket cluster
with 3 nodes.  PVM cluster gave similar result.)

system.time(iris.rf <- randomForest(iris[,1:4], iris[,5],
ntree=30000)$votes)
[1] 24.57  3.33 27.98  0.00  0.00

system.time(clusterEvalQ(cl, {data(iris); randomForest(iris[, 1:4],
                                      iris[, 5], ntree=10000)$votes}))
[1]  0.01  0.00 12.70  0.00  0.00

I was planning to add an alternative random forest interface that does not
return the entire forest (to save memory).  Seems like that item just got
promoted on my to-do list...

Thanks very much for the help!!

Andy

> I wonder how much the serialization itself hurts the 
> performance.  Would
> sending raw numbers with pvm routines improve the performance?
> 
> Michael
> 
> (BTW, is there a convenient function in R to examine the size 
> of an object?)
> 
> -- 
> ---------------------------------------------------
> Michael Na Li
> Email: lina@u.washington.edu
> Department of Biostatistics, Box 357232
> University of Washington, Seattle, WA 98195  
> ---------------------------------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmoffet@nwrc.ars.usda.gov  Wed Aug 21 15:10:49 2002
From: cmoffet@nwrc.ars.usda.gov (cmoffet@nwrc.ars.usda.gov)
Date: Wed, 21 Aug 2002 16:10:49 +0200 (MET DST)
Subject: error in plot.formula(..., ask = FALSE) (PR#1923)
Message-ID: <200208211410.QAA07088@pubhealth.ku.dk>

Full_Name: Corey A. Moffet
Version: 1.5.1
OS: windows 2000
Submission from: (NULL) (199.133.140.156)


Passing ask = FALSE in plot.formula returns an error.

For example:
-------------------

dat <- data.frame(y  =            c(1,1,1,2,2,2,3,3,3,4,4,4), 
                  x1 = as.ordered(c(1,1,1,1,1,1,2,2,2,2,2,2)),
                  x2 = as.ordered(c(1,1,1,2,2,2,1,1,1,2,2,2)))

plot(y ~ x1 + x2, data = dat) # Works fine "interactively" asking:
# "Hit <Return> to see next plot:"
#  But this causes problems when it is run in a batch file.

plot(y ~ x1 + x2, data = dat, ask = FALSE) # gives error:
# "Error in model.frame(formula, rownames, variables, varnames, extras,
# extranames,  :   variable lengths differ"

-------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 21 20:06:21 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 21 Aug 2002 15:06:21 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
In-Reply-To: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>; from uluru@email.unc.edu on Sun, Aug 18, 2002 at 05:28:10PM -0400
References: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>
Message-ID: <20020821150621.F659@jessie.research.bell-labs.com>


Hi Forrest.

  It is definitely preferable to avoid giving up existing XLisp-Stat
code, especially when the facilities you probably want are not
currently part of R. Working from the RGtk or tcltk packages to create
dynamic graphics involves a lot of work, both design and programming
given that the R graphics are based on a static model.
  
  I wonder if ggobi and the programmatic access via Rggobi and RGtk
would give you similar facilities to what currently exists in XLisp.

 As you mention, it would be easiest to combine R and XLisp-Stat so
that you could use existing XLisp code and make use of R's statistical
functionality, etc. This is a perfect example for the use of embedding
one system inside the other; something we have done as part of the
Omegahat project for numerous languages.  

So with some vital help from Luke, I have created an R package that
provides a very experimental interface between R and XLisp by allowing
XLisp to be embedded in R. The package contains and requires some
minor modifications to XLisp which allow it to be used as a shared
library and currently this only works on Unix.  It allows one to call
arbitray XLisp functions, however there is an issue with the graphics
that I haven't sorted out yet.  It did take less than a day
to put together so far, so I am reasonable confident that I and others
can iron out the details and make it reasonably complete and robust.

The package is available from
  http://www.omegahat.org/RXLisp

Given that I only spent a day on it, don't expect too much
in the way of documentation, etc. Just e-mail me if you
have problems. I'd be very happy to hear from interested
people and we can

 Duncan.


uluru@email.unc.edu wrote:
> I have been taking a break for the last month or so, and am only just
> now catching up on my email.  Otherwise, I would have joined this
> discussion earlier.  And... I apologize for the length of this, but I
> don't think it is overly long.
> 
> >From the amount of activity in the LispStat news group (none), it seems
> that LispStat is dead. We all know that Luke is working on R and not on
> LispStat, and that Jan has switched UCLA over from LispStat to R. And we
> have not heard from users of LispStat for some time.  So, it seems no
> one is using LispStat.
> 
> For me, at least, this is not the case. As the developer of ViSta, I
> have and still am using LispStat a great deal. In fact, I cannot
> conceive of doing what I do with any other system.  
> 
> Of course, since I use it so much, I am very aware of LispStat's
> strengths and weaknesses, and want to add my views to the discussion.
> However, I spend all my time using only LispStat, so I can't make any
> comparisons to R or to any other systems.
> 
> To me, the strengths of LispStat are:
> 1) The dynamic, highly interactive graphics
> 2) The object system
> 3) Lisp language and byte compiler
> 
> These strengths make LispStat an ideal system for implementing
> statistical systems. It is less suited for doing statistical analysis.
> As a result, the most significant uses of LispStat have been statistical
> systems such as Arc and ViSta.
> 
> In the work I've done with LispStat,  ViSta's spreadplot architecture is
> the best example of LispStat being used to implement a statistical
> (sub)system (described in a forthcoming JCGS paper by myself, Pedro
> Valero, Richard Faldowski and Carla Bann). 
> 
> The weaknesses of LispStat are:
> 1) No high-level analysis modules
> 2) No standards for data sets, models, etc.
> 3) No user-oriented data manipulation language
> 4) Totally inadequate documentation
> 5) Poor or non-existant printing 
> 6) No static graphic manipulation facilities
> 7) The underlying operating system interfaces are old.
> 
> ViSta attempts to take care of these weaknesses, with varying degrees of
> success. Specifically:
> 1) ViSta has high-level analysis plugins. The method for writing these
> plugins is documented. I believe this very well solves the first weakness. 
> 2) ViSta's statistical object architecture -- a hierarchy of objects
> that include datasets, datasheets, data editors, transformations,
> analysis methods, models and plugins --- solves the lack of standards
> for such things. The implementation is slow for data objects and needs
> to be re-architected. The implementation for the others is more than
> adequate.
> 3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
> C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
> awkward lisp equivalent:
> (setf a (^ (* 2 (+ b c)) 2)) 
> (I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
> 4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
> combinations, are working on the documentation problem.
> 5) Printing, while better than LispStat, is still not adequate.
> 6) Static graphics manipulation, as in SAS (and, apparently R), is
> totally lacking.
> 7) Nothing has been done about this.
> 
> (Note that the newest version of ViSta use a modified version of
> LispStat that only works under Windows, so that Mac/Unix users don't
> have all the new features. This problem can be fixed by someone familiar
> with LispStat and Unix.)
> 
> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
> 
> Anyone know how to do that?
> 
> Forrest
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ld-temp-qt3i@pobox.com  Thu Aug 22 03:59:01 2002
From: ld-temp-qt3i@pobox.com (ld-temp-qt3i@pobox.com)
Date: Thu, 22 Aug 2002 04:59:01 +0200 (MET DST)
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
Message-ID: <200208220259.EAA09000@pubhealth.ku.dk>

I can't get it to run. On launch I get this:

dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
/sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
/sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

Thanks.

Linc Davis


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Aug 22 04:24:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 21 Aug 2002 20:24:14 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <200208220259.EAA09000@pubhealth.ku.dk>
References: <200208220259.EAA09000@pubhealth.ku.dk>
Message-ID: <87elcrk23l.fsf@jeeves.blindglobe.net>

>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:

    ld-temp-qt3i> I can't get it to run. On launch I get this:
    ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
    ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
    ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

    ld-temp-qt3i> Thanks.

    ld-temp-qt3i> Linc Davis


Really weird -- looks like you are running a non-fink R with a fink
setup existing.

I think you want one or the other, but not both.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 04:56:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 20:56:24 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <87elcrk23l.fsf@jeeves.blindglobe.net>
Message-ID: <20D1BB2D-B583-11D6-9066-000393860F3C@stat.ucla.edu>

R-1.5.1.dmg.tar.gz installs both the R stuff in /usr/local and the  
necessary
fink stuff (all dylibs) in /sw. So you need both. But Linc has more  
than (s)he
needs: two definitions of _PC. Is this the CRAN version or the  
gifi.stat.ucla.edu
version ?

On Wednesday, August 21, 2002, at 08:24 PM, A.J. Rossini wrote:

>>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:
>
>     ld-temp-qt3i> I can't get it to run. On launch I get this:
>     ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple  
> definitions of symbol _PC
>     ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so)  
> definition of _PC
>     ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition  
> of _PC
>
>     ld-temp-qt3i> Thanks.
>
>     ld-temp-qt3i> Linc Davis
>
>
> Really weird -- looks like you are running a non-fink R with a fink
> setup existing.
>
> I think you want one or the other, but not both.
>
> best,
> -tony
>
> --  
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:00:54 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:00:54 -0700
Subject: RXLisp
Message-ID: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>

I was obviously fascinated by Duncan's earlier message on RXLisp.

I managed to build a working version of RXLisp for OS X, by some
unabashed and rather uninformed hacking. I compiled XLISP-STAT using
the gcc flags -fno-common  and --no-cpp-precomp (not sure if they
are necessary or not, they are part of an older hack). I "make
libxlisp.so", using Duncan's replacement for the three XLS files
(I am not sure if these are necessary with my build strategy, probably
not).  I do not really make libxlisp.so, because there is no -shared  
flag for
the static linker in OS X. I just leave the XLS directory with a broken  
link
and a lot of foo.o files.

Then I do , in the appropriate place,

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

but the final link of this  is

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
          -L/Users/deleeuw/MyStuff/Developer/xlispstat-3-52-18 -lxlisp

This breaks, of course, there is no libxlisp. I then move to RXLisp/src  
and do

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
	$XLISP_SRC_DIR/*.o -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl

i.e. I link all the foo.o files Duncan puts in libxlisp.so. Then once  
more

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

which puts everything in the R hierarchy. Now I can do

[cabledoc68:~/Desktop] deleeuw% R

R : Copyright 2002, The R Development Core Team
Version 1.5.1 Patched (2002-08-04)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > library(RXLisp)
 > .XLispInit()
XLISP-PLUS version 3.04
Portions Copyright (c) 1988, by David Betz.
Modified by Thomas Almy and others.
XLISP-STAT Release 3.52.18 (Beta).
Copyright (c) 1989-1999, by Luke Tierney.

NULL
 > .XLisp("+",1,2,3)
[1] 6
 > .XLisp("max",1,2)
[1] 2
 > .XLisp("tan",.25)
[1] 0.2553419
 > .XLisp("sum",1:10)
[1] 55
 > .XLisp("gcd",as.integer(4),as.integer(16),as.integer(20))
[1] 4
 > .XLisp("list",1,2,3,4,5,6)
[1] 1 2 3 4 5 6
 > q()

RXLisp can of course only do subr's (i.e. functions defined
in compiled C code in XLS), and it does not know about
XLS objects, graphics, arrays, vectors, etc. I am not sure
if my version, which does not use the libxlisp.so shared
lib at all, can do all that Duncan's version can. I will put
RXLisp as a binary package on http://gifi.stat.ucla.edu/pub
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zed.shaw@ubc.ca  Thu Aug 22 07:28:25 2002
From: zed.shaw@ubc.ca (Zed A. Shaw)
Date: Wed, 21 Aug 2002 23:28:25 -0700
Subject: R_Interactive decision to halt execution during errors
Message-ID: <B989D299.317A%zed.shaw@ubc.ca>

Hi,

I'm currently trying to use R as a back-end from an interface (you may have
seen me on the help list), and I'm running into something that is rather
confusing.  The following lines in main/errors.c of R 1.5.1:


439:    if ( !R_Interactive && !haveHandler && inError ) {
440:        REprintf("Execution halted\n");
441:        R_CleanUp(SA_NOSAVE, 1, 0); /* quit, no save, no .Last, status=1
*/
442:    }


Which seems to not make any sense at all.  I've scoured the code and can't
figure out what the rationale is for halting execution simply because the
input is not interactive.  I'm assuming the rationale was that, if input is
not interactive, then R is running as a script interpreter, but this isn't
the case since the stdio can be redirected in different ways (and actually
this is encouraged in the documentation).

R_Interactive is determined by a call to isatty(0) in unix/system.c which is
used in various places to control how R interacts with the user.  The
problem I see with this is that, there is no mode for "not interactive, but
don't quit" or "proxy mode".  I assumed --slave would do this (as, that
seems to be what the docs imply), but it doesn't.

So, is a patch in order, or is there another way around it?  I'm thinking,
the above if statement should have one additional and case for !slaveMode,
so that it can be run as a back-end even though the terminal is not
interactive.  Either that, or I can somehow install an error handler and
this code will be avoided.

I can do the patch for this, unless someone has a better way to fix it.  Let
me know what you think.

Finally, having read through most of this code, I feel that it is a bit
confused as to whether R is an interactive console or a script interpreter.
The above code assumes that, if R is not interactive, then it is a script
interpreter.  Yet, there's no real way to tell R to simply run a script file
other than sending it through stdio.  Effectively, the stdio channel becomes
confused with the dual purpose of being an interface or a file stream with
no way for R to differentiate.  I would prefer to see R act like most other
scripting languages:  stdio is reserved for interaction with the user and
does not abort on failure like above.  Meanwhile, a --script option is used
to run a given script like perl or python does, and would be expected to
halt on errors.  Does that make sense?

Anyway, let me know the best course of action.

-- 
Zed A. Shaw



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:59:03 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:59:03 -0700
Subject: More XLisp in R
In-Reply-To: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>
Message-ID: <A48CB4E9-B59C-11D6-9066-000393860F3C@stat.ucla.edu>

Clearly the beauty of Lisp sort of gets lost. Also RXLisp
cannot return logicals, strings, lists, characters (no convertors
yet). Still, none of that is essential, and all of this is exciting.

 > .XLisp("mean",.XLisp("list",1,2))
[1] 1.5
 > .XLisp("iseq",as.integer(10))
  [1] 0 1 2 3 4 5 6 7 8 9
 > x<-1:10
 > .XLisp("elt",x,as.integer(1))
[1] 2
 > .XLisp("sample",1:20,as.integer(10),T)
  [1]  9 18  7  4 13 19  9  7  9  3
 > .XLisp("repeat",1:10,as.integer(2))
  [1]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10
 > .XLisp("uniform-rand",as.integer(10))
  [1] 0.33747593 0.69355427 0.97968865 0.39687786 0.81754441 0.59710673
  [7] 0.02034651 0.48217749 0.29217949 0.05538188
 > .XLisp("princ",3)
3.0[1] 3
 > .XLisp("order",c(1,3,2,5,4))
[1] 0 2 1 4 3
 > .XLisp("sort-data",c(1,3,2,5,4))
[1] 1 2 3 4 5
 > .XLisp("bivnorm-cdf",.3,.2,.6)
[1] 0.4551159
 > y<-"abcd"
 > .XLisp("length",y)
[1] 4
 > sapply(-9:9/10,function(x) .XLisp("bivnorm-cdf",0,0,x))
  [1] 0.07178343 0.10241662 0.12659185 0.14758378 0.16666680 0.18450516
  [7] 0.20150674 0.21795294 0.23405789 0.25000000 0.26594211 0.28204706
[13] 0.29849326 0.31549484 0.33333320 0.35241622 0.37340815 0.39758338
[19] 0.42821657
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 22 10:47:22 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 22 Aug 2002 11:47:22 +0200 (MET DST)
Subject: as.list() coerces logical to integer (PR#1926)
Message-ID: <200208220947.LAA12226@pubhealth.ku.dk>

A symptom was seen by Ole Christensen when using sapply(*, is.numeric).

It can be simplified  to
``lapply coerces logical to integer'' :

  > lapply(TRUE, typeof)
  [[1]]
  [1] "integer"

But the bug is not in lapply's C code, but rather before that, 
namely in as.list() :

> typeof(as.list(TRUE)[[1]])
[1] "integer"

I'm looking into fixing this (for R-devel aka "1.6.0 unstable")
right away.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lylek@utk.edu  Thu Aug 22 13:45:47 2002
From: lylek@utk.edu (lylek@utk.edu)
Date: Thu, 22 Aug 2002 14:45:47 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208221245.OAA14923@pubhealth.ku.dk>

Full_Name: Lyle W. Konigsberg
Version: 1.5.1
OS: Windows
Submission from: (NULL) (160.36.64.99)


I apparently found an error in how "deriv" puts a derivative to the screen
(though the internal representation is correct).  Here's what I was doing for a
class example:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
-15 * (1/p^2) + 11 * (1/(1 - p)^2)
> eval(D(D(lnlk,"p"),"p"))
[1] -106.5212
> -15 * (1/p^2) + 11 * (1/(1 - p)^2)
[1] 16.38788

>From S+ I have the following:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
 - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
[1] -106.5212

R seems to be dropping the outer parentheses.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From nerone4@hotmail.com  Fri Aug 23 02:00:26 2002
From: nerone4@hotmail.com (nerone4@hotmail.com)
Date: Thu, 22 Aug 2002 09:00:26 -1600
Subject: PROTECT YOUR COMPUTER,YOU NEED SYSTEMWORKS2002!                23027
Message-ID: <00007e2e151b$0000565e$000034ae@kppublish.ru>

<html>

<head>
<meta http-equiv=3D"Content-Language" content=3D"en-us">
<meta name=3D"GENERATOR" content=3D"Microsoft FrontPage 4.0">
<meta name=3D"ProgId" content=3D"FrontPage.Editor.Document">
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dwindows-=
1252">
<title>Norton AD</title>
</head>

<body>

<table border=3D"3" cellspacing=3D"3" width=3D"469" cellpadding=3D"3" bgco=
lor=3D"#000080"  bordercolor=3D"#FFFFFF" style=3D"border-collapse: collaps=
e" bordercolordark=3D"#FFFFFF">
  <tr>
    <td width=3D"447">&nbsp;
      <table border=3D"1" width=3D"100%" bgcolor=3D"#FFFFFF" bordercolor=3D=
"#000080">
        <tr>
          <td width=3D"100%" align=3D"center"><font face=3D"Impact" size=3D=
"4" color=3D"#CC0000">ATTENTION:
            This is a MUST for <u>ALL</u> Computer Users!!!</font></td>
        </tr>
      </table>
      <p align=3D"center"><font size=3D"3" face=3D"Verdana"><b>&nbsp;<font=
 color=3D"#FFFFFF">*NEW
      - Special Package Deal!*</font></b></font></p>
      <table border=3D"8" width=3D"100%" height=3D"86" bgcolor=3D"#FFFFFF"=
 bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"80" align=3D"center"><font face=3D"=
Verdana, Arial, Helvetica, sans-serif" color=3D"#000099" size=3D"5"><b>Nor=
ton
            SystemWorks 2002 Software Suite<br>
            -<i>Professional Edition</i>-</b></font></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"62">
        <tr>
          <td width=3D"100%" height=3D"56" align=3D"center"><b><font face=3D=
"Tahoma" color=3D"#FFFFFF" size=3D"4">Includes
            Six - </font><i><font face=3D"Tahoma" size=3D"4" color=3D"#FFF=
F00">Yes 6!</font></i><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4"> =
- Feature-Packed Utilities<br>ALL
            for </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF00">=
1</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Special </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF=
00">LOW</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Price!</font></b></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"115" bgcolor=3D"#000080=
" bordercolor=3D"#FFFFFF">
        <tr>
          <td width=3D"100%" height=3D"109"><b><font face=3D"Tahoma" size=3D=
"2" color=3D"#FFFF00">This Software Will:</font><font face=3D"Tahoma" size=
=3D"2" color=3D"#FFFFFF"><br>- Protect your
            computer from unwanted and <i> hazardous</i> viruses<br>- Help=
 secure your
            private &amp; valuable information<br>- Allow you to transfer =
files
            and send e-mails <u> safely</u><br>- Backup your ALL your data=
 quick and
            easily<br>- Improve your PC's performance w/<i>superior</i>
            integral diagnostics!<br></font></b></td>
        </tr>
      </table>&nbsp;
      <table border=3D"4" width=3D"100%" height=3D"4" bgcolor=3D"#FFFFFF" =
bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"1">
            <p align=3D"center"><b><font face=3D"Verdana" size=3D"5"><font=
 color=3D"#000000"><font color=3D"#ff0000">6</font>
            </font><font color=3D"#000080">Feature-Packed Utilities<br></f=
ont><font color=3D"#000000">
            </font><u><font color=3D"#ff0000">1</font></u><u><font color=3D=
"#000000"> 
            </font><font color=3D"#000080"> Great
            Price</font></u><font color=3D"#000000"> <br>
            </font><font color=3D"#000080">
            A</font><font color=3D"#000000"> <font color=3D"#ff0000">$300+=
</font>  </font><font color=3D"#000080"> Combined Retail Value
            <i>YOURS</i> for Only</font><font color=3D"#000000"> <font col=
or=3D"#ff0000">$29.99!</font><br>
            </font></font><font face=3D"Verdana" size=3D"4"><font color=3D=
"#000080">&lt;Includes
            </font><font color=3D"#FF0000">FREE</font><font color=3D"#0000=
80"> Shipping!&gt;</font></font></b></td>
        </tr>
      </table>
    <p align=3D"Center"><b> <font face=3D"Arial, Helvetica, sans-serif"  c=
olor=3D"#ffffff">Don't fall prey to destructive viruses
    or hackers!<br>Protect&nbsp; your computer and your valuable  informat=
ion
    and</font></b></p>
      <table border=3D"1" width=3D"100%" height=3D"44" bordercolor=3D"#FFF=
FFF">
        <tr>
          <td width=3D"100%" height=3D"38" bgcolor=3D"#0000FF" align=3D"ce=
nter"><b><font face=3D"Verdana" size=3D"4" color=3D"#FFFFFF"><a href=3D"ht=
tp://www.fastbizonline.com/systemworksed.htm" style=3D"color: #FFFFFF; fon=
t-family: Verdana; font-size: 14pt; font-weight: bold">-&gt;
            CLICK HERE to Order Yours NOW! &lt;-</a></font></b></td>
        </tr>
      </table>
      <p align=3D"Center"><b><font face=3D"Arial" size=3D"5"><a style=3D"t=
ext-decoration: none; background-color: rgb(255,255,0); color: #0000FF" hr=
ef=3D"http://www.fastbizonline.com/systemworksed.htm">Click
      here for more information</a></font></b></p>
      <p align=3D"Center"><font face=3D"Tahoma" size=3D"1" color=3D"#fffff=
f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </font><p align=3D"Center"><font color=3D"#ffffff" size=3D"1" face=3D=
"Tahoma">Your
      email address was obtained from an opt-in list. Opt-in MRSA List<br>
      &nbsp;Purchase Code # 312-1-010.&nbsp;&nbsp;If you wish to be unsubs=
cribed
      from this list, please <a style=3D"COLOR: #ffffcc" href=3D"http://ww=
w.fastbizonline.com/removeme.html">Click
      here</a> and press send to be removed. If you have previously unsubs=
cribed
      and are still receiving this message, you may email our <a style=3D"=
COLOR: #ffffcc" href=3D"mailto:sortofridiculous@bigfoot.com?Subject=3DAbus=
e Report">Spam
      Abuse Control Center</a>. We do not condone spam in any shape or for=
m.
      Thank You kindly for your cooperation.</font></td>
  </tr>
</table>

</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 22 16:39:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 22 Aug 2002 08:39:59 -0700 (PDT)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208220836271.93374-100000@homer16.u.washington.edu>

On Thu, 22 Aug 2002 lylek@utk.edu wrote:

> Full_Name: Lyle W. Konigsberg
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (160.36.64.99)
>
>
> I apparently found an error in how "deriv" puts a derivative to the screen
> (though the internal representation is correct).  Here's what I was doing for a
> class example:

Yes, it's the same as bugs 1119, 1797 and 1637 and probably some others.
The deparse doesn't always put parentheses in correctly.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 22 16:45:19 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2002 17:45:19 +0200
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
References: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <x2n0re3njk.fsf@biostat.ku.dk>

lylek@utk.edu writes:

> > lnlk<-expression(15*log(p)+11*log(1-p))
> > p<-15/26
> > D(D(lnlk,"p"),"p")
>  - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> > - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> [1] -106.5212
> 
> R seems to be dropping the outer parentheses.

Yes. Duncan Murdoch has been working on that recently.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From iwhite@staffmail.ed.ac.uk  Thu Aug 22 20:46:00 2002
From: iwhite@staffmail.ed.ac.uk (iwhite@staffmail.ed.ac.uk)
Date: Thu, 22 Aug 2002 21:46:00 +0200 (MET DST)
Subject: aov bug? (PR#1930)
Message-ID: <200208221946.VAA17276@pubhealth.ku.dk>


R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> invisible(options(echo = TRUE))
> R.version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    4.0
year     2001
month    12
day      19
language R
> r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> trt <- factor(rep(1:4,c(5,6,5,5)))
> Y <- r/n
> z <- aov(Y ~ trt,weights=n)
> summary(z)
            Df  Sum Sq Mean Sq F value    Pr(>F)
trt          3 16.0626  5.3542  12.330 0.0001577 ***
Residuals   17  7.3820  0.4342
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> z
Call:
   aov(formula = Y ~ trt, weights = n)

Terms:
                      trt Residuals
Sum of Squares  16.062629  0.395016
Deg. of Freedom         3        17

Residual standard error: 0.1524343
Estimated effects may be unbalanced
>
> # BUG? summary(z) correctly reports the weighted residual sum of squares,
> # but the output from z gives an unweighted residual sum of squares.
> # At the least the discrepancy between the two forms of output is
> # confusing.
> proc.time()
[1] 1.60 0.08 1.65 0.00 0.00
>

======================================
I.White
ICAPB, University of Edinburgh
Ashworth Laboratories, West Mains Road
Edinburgh EH9 3JT
Fax: 0131 667 3210  Tel: 0131 650 5490
E-mail: iwhite@staffmail.ed.ac.uk
======================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 06:54:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 06:54:41 +0100 (BST)
Subject: aov bug? (PR#1930)
In-Reply-To: <200208221946.VAA17276@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230647250.19835-100000@gannet.stats>

Maybe, but this is exactly what S does, and `weights' is not a documented
argument to aov().

I will alter print.aov to use the weighted form.

On Thu, 22 Aug 2002 iwhite@staffmail.ed.ac.uk wrote:

>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > invisible(options(echo = TRUE))
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    4.0
> year     2001
> month    12
> day      19
> language R
> > r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> > n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> > trt <- factor(rep(1:4,c(5,6,5,5)))
> > Y <- r/n
> > z <- aov(Y ~ trt,weights=n)
> > summary(z)
>             Df  Sum Sq Mean Sq F value    Pr(>F)
> trt          3 16.0626  5.3542  12.330 0.0001577 ***
> Residuals   17  7.3820  0.4342
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> > z
> Call:
>    aov(formula = Y ~ trt, weights = n)
>
> Terms:
>                       trt Residuals
> Sum of Squares  16.062629  0.395016
> Deg. of Freedom         3        17
>
> Residual standard error: 0.1524343
> Estimated effects may be unbalanced
> >
> > # BUG? summary(z) correctly reports the weighted residual sum of squares,
> > # but the output from z gives an unweighted residual sum of squares.
> > # At the least the discrepancy between the two forms of output is
> > # confusing.
> > proc.time()
> [1] 1.60 0.08 1.65 0.00 0.00
> >
>
> ======================================
> I.White
> ICAPB, University of Edinburgh
> Ashworth Laboratories, West Mains Road
> Edinburgh EH9 3JT
> Fax: 0131 667 3210  Tel: 0131 650 5490
> E-mail: iwhite@staffmail.ed.ac.uk
> ======================================
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alex_dacosta@yahoo.fr  Fri Aug 23 08:09:55 2002
From: alex_dacosta@yahoo.fr (alex_dacosta@yahoo.fr)
Date: Fri, 23 Aug 2002 09:09:55 +0200 (MET DST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
Message-ID: <200208230709.JAA19081@pubhealth.ku.dk>

Full_Name: Alexandre Da Costa
Version: 1.5.1
OS: Windows NT 4 on Virtual PC 4
Submission from: (NULL) (193.253.191.74)


I am using Virtual PC 4.0.2 for every day work.
I wanted to try connections of R 1.5.1 to Oracle DataBases.
But R is running but is not working at all !
The simple commands end with "no finite arguments" error.
See following session:
-----------------------------------------------------------
R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> max(1,2)
[1] Inf
Warning message: 
no finite arguments to max; returning -Inf 
> library()
Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
        missing value where logical needed
In addition: Warning messages: 
1: no finite arguments to max; returning -Inf 
2: NAs introduced by coercion 
> ls()
[1] "last.warning"
> dir()
 [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
 [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
[11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
[16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> 
Any Idea ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 08:28:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 08:28:33 +0100 (BST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230824090.2168-100000@gannet.stats>

1) What is `Virtual PC 4'?

2) Why did you send this as a bug report to R-bugs?
R does run on Windows NT, and does not claim to run under `Virtual PC 4'.
So this cannot be considered to be a bug in R.

I would have thought you would be sending the bug report to the vendors
of `Virtual PC 4'.  A request on R-help might have been appropriate.


On Fri, 23 Aug 2002 alex_dacosta@yahoo.fr wrote:

> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
>
>
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > max(1,2)
> [1] Inf
> Warning message:
> no finite arguments to max; returning -Inf
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  :
>         missing value where logical needed
> In addition: Warning messages:
> 1: no finite arguments to max; returning -Inf
> 2: NAs introduced by coercion
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"
> >
> Any Idea ?
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Aug 23 12:27:01 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 23 Aug 2002 06:27:01 -0500
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>; from alex_dacosta@yahoo.fr on Fri, Aug 23, 2002 at 09:09:55AM +0200
References: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <20020823062701.A2733@nokomis.stat.umn.edu>

This is a bug in Virtual PC [Virtual PC is a PC emulator for Mac OS].
It seems to have been introduced in 4.0 and is still there in 5.0.  It
isn't there in 3.0. I reported it to Connectix and the upshot was that
they don't care.  I gave them a simple program that reproduces it,

----------------------------------(itest.c)------------------------------------
#include <stdio.h>

double R_Zero_Hack = 0.0;

double R_PosInf, R_NegInf;

main()
{
    R_PosInf = 1.0/R_Zero_Hack;
    R_NegInf = -1.0/R_Zero_Hack;
    printf("%g %g\n", R_PosInf, R_NegInf);
}
-------------------------------------------------------------------------------

This should produce

1.#INF -1.#INF

and does on an intel machine and on VPC 3.03.  But on VPC 4.02 and 5.0
it produces

1.#INF 1.#INF

If a few more people complain to connectix maybe something will
happen.  Virtual PC is nice in many ways; in fact I can build the
windows version of R on it with no problems.  But to run the R tests
or do anything useful with R I have to switch to 3.03, which I keep
around for that reason.  It's pretty annoing.

luke

On Fri, Aug 23, 2002 at 09:09:55AM +0200, alex_dacosta@yahoo.fr wrote:
> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
> 
> 
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > max(1,2)
> [1] Inf
> Warning message: 
> no finite arguments to max; returning -Inf 
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
>         missing value where logical needed
> In addition: Warning messages: 
> 1: no finite arguments to max; returning -Inf 
> 2: NAs introduced by coercion 
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> > 
> Any Idea ?
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timur.Elzhov@jinr.ru  Fri Aug 23 14:15:28 2002
From: Timur.Elzhov@jinr.ru (Timur.Elzhov@jinr.ru)
Date: Fri, 23 Aug 2002 15:15:28 +0200 (MET DST)
Subject: dev2eps() prints ticks with wrong length! (PR#1933)
Message-ID: <200208231315.PAA23916@pubhealth.ku.dk>

Hello R experts!

I've tried to make single plot, but with changed ticks length,
and then copy them to file by dev.copy2eps(). Here is the code:

   x11 ( , 5, 5)
   par (tcl = +5) 
   plot (0)        # that's ugly plot with great ticks
                   # on the graph viewport.  cool :)
   dev.copy2eps (file = "out.eps")

Hm.. I had a look at "out.ps" and wondered that ticks
look like as they would being set to there *default* value,
"tcl" = -0.5!  =-O

Ok, I tried then to make same thing by slightly different way:

    postscript (file = "out1.eps", onefile = FALSE)
    par (tcl = +5)
    plot (0)
    dev.off ()

Beautiful -- all the ticks have an appropriate length, tcl == +5!

Why?


-------------- == --------------
    R> version
    _
    platform i386-pc-linux-gnu
    arch     i386
    os       linux-gnu
    system   i386, linux-gnu
    status
    major    1
    minor    5.1

-------------- == --------------


With best regards,
Timur V. Elzhov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 23 16:56:50 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 23 Aug 2002 11:56:50 -0400
Subject: [R] [ and setMethod conflict?
References: <763C275E6A1C2248AFD475237AD6135BE7CFA6@MSGBOS576NTS.fmr.com> <3D504E0E.84B79745@research.bell-labs.com>
Message-ID: <3D665B42.CA8F2E48@research.bell-labs.com>

The problem was in fact not protecting the argument list in certain
circumstances.  Should be fixed in the currently checked-in version.

John Chambers


John Chambers wrote:
> 
> Definitely something funny going on, but perhaps a little less sweeping
> than your comments suggest.
> 
> No explanation at the moment, but a couple of clues.
> 
> 1.  The problem doesn't seem to arise unless the data frame is large
> enough.  I parametrized the 5000 rows in your example and couldn't get
> the bizarre behavior until the number of rows was larger than 1000.
> 
> 2.  There is some reason to think that nested "[" expressions are
> related.  After rewriting your testFunc as follows, the random errors
> seemed to go away.
> 
> testFunc <- function(cur) {
>     ii <- order(cur[,1])
>   sorted <- cur[ii,]
>     ll <- !is.na(sorted[,1])
>    sorted[ll,]
>  }
> (the change is just to pull out the subset expressions that were
> arguments to other "[" expressions.)
> 
> I'm not an expert on R internals, but the combination of these might
> suggest garbage collection taking place in nested calls to the dispatch
> code for "[".
> 
> John Chambers
> 
> 
> "Bartz, Kevin" wrote:
> >
> > I noticed this oddity about [ and setMethod.
> >
> > First, I define testFunc, which sorts a data frame by the first column and
> > returns the entries that aren't NAs, and testIt, which runs testFunc
> > repeatedly on a random large data frame, each time saving the return into a
> > dummy placeholder (for demonstration's sake).
> >
> > > require(methods)
> > Loading required package: methods
> > [1] TRUE
> > > testFunc <- function(cur) {
> > +   sorted <- cur[order(cur[,1]),]
> > +   sorted[!is.na(sorted[,1]),]
> > + }
> > > testIt <- function(num)
> > +   for (i in 1:num) {
> > +     cat("iteration", i, "...\n")
> > +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> > +   }
> >
> > Let's test out testIt.
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > iteration 3 ...
> > iteration 4 ...
> > iteration 5 ...
> > iteration 6 ...
> > iteration 7 ...
> > iteration 8 ...
> > iteration 9 ...
> > iteration 10 ...
> >
> > So far, no problems. Next, I define myClass.
> >
> > > setClass("myClass", representation(mySlot = "numeric"))
> > [1] "myClass"
> > > setMethod("[", signature(x = "myClass"),
> > +           function(x, i, j, drop) "[ for myClass")
> > [1] "["
> >
> > Again, everything is fine. I've expanded [ to handle objects of class
> > myClass. But when we attempt to use testIt now, problems emerge:
> >
> > > testIt(10)
> > iteration 1 ...
> > Error in "[.data.frame"(cur, order(cur[, 1]), ) :
> >         unused argument(s) (.Method ...)
> >
> > Maybe that was just a fluke. Trying again, we get:
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > Error in sorted[, 1] : incorrect number of dimensions
> >
> > A different message every time, and the error seems no bug of mine (a
> > .Method argument? What is that?). In fact, testIt produces a seemingly
> > random response from R on each subsequent attempt--everything from
> > successful execution to similarly ambiguous errors to a process-killing "Bus
> > Error."
> >
> > All in all, it seems that once I've defined a new method for [ I can no
> > longer count on it to operate properly in any context.
> >
> > Is this the intended behavior? And if so, is there any way I can have one
> > class present that overloads [ and still use [ to reliably subset data
> > frames?
> >
> > Thanks,
> >
> > Kevin
> >
> > > R.version
> >          _
> > platform sparc-sun-solaris2.6
> > arch     sparc
> > os       solaris2.6
> > system   sparc, solaris2.6
> > status
> > major    1
> > minor    5.1
> > year     2002
> > month    06
> > day      17
> > language R
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jyan@stat.wisc.edu  Fri Aug 23 17:40:01 2002
From: jyan@stat.wisc.edu (jyan@stat.wisc.edu)
Date: Fri, 23 Aug 2002 18:40:01 +0200 (MET DST)
Subject: try-error in batch and interactive mode (PR#1934)
Message-ID: <200208231640.SAA25105@pubhealth.ku.dk>

I have a tiny R script performing two tasks, the first one of which may
contain error.

mammon(12)% cat z.R
version
options(show.error.messages = FALSE)
try(b <- log("foo"))  ## task 1
1 + 2                 ## task 2

Running in batch mode from a solaries machine, the second task never got
started; see below:

mammon(13)% R BATCH --vanilla -q z.R
mammon(14)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 

The second task does start if run on a linux machine.

ludwig(22)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 1 + 2
[1] 3
> proc.time()
[1] 0.87 0.07 0.90 0.00 0.00
> 

The same code works well if pasted into an interactive R window on both
system, of course.

Jun Yan

Department of Statistics          Office: CSSC 4252
university of Wisconsin-Madison   Tel: (608)262-7478 
1210 W. Dayton St.                Email: jyan@stat.wisc.edu
Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sat Aug 24 11:42:06 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Sat, 24 Aug 2002 12:42:06 +0200 (MET DST)
Subject: Inconsistent use of Perl? (PR#1937)
Message-ID: <200208241042.MAA26903@pubhealth.ku.dk>

Dear all

yesterday I got around to install R-1.5.1 on my machine at home which,
admittedly, is running a very old version of RedHat Linux.  I noticed
two things:

1) My pdflatex version is too old to produce the pdf version of the
   manuals.  `./configure' checks whether a recent version of makeinfo
is installed and tells you whether you can produce the info version or
not.  (I was told I couldn't, another reason to upgrate the machine.)
But during configuration there don't seem to be any check whether the
pdflatex is recent enough.  You might want to consider to add such a
check.

2) `./configure' checks whether Perl 5.004 (or later) is installed.
   On my machine Perl 5.00405 is installed and the installation went
ahead without problems.  However, when I then tried to install
R-1.5.1-recommended by issuing the command
        R CMD INSTALL *.tar.gz
in the appropriate directory, I received complaints about my Perl
version.  Essentially, R wanted all of a sudden Perl 5.005 (or
later).  An edited version of what I saw on my terminal is included
below.  I got the same kind of error message when I used from within R
`update.packages' and `install.packages' to update/install some
packages that are not in R-1.5.1-recommended.
As far as I can tell, the installation of the packages went ahead fine
except that the `TITLE' file for each of these packages is empty.
Hence, I guess the error message is produced when R tries to generate
and install the `TITLE' file.  However, the `TITLE' files for the
packages in the base distribution are fine.  This leaves me wondering
why during the base installation Perl 5.004 (or later) is good enough
for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
later) is required.   

Cheers,

        Berwin


----- Edited output from attempt to install R-1.5.1-recommended -----
absentia:/opt/R/R-1.5.1-recommended$ R CMD INSTALL *.tar.gz
Contains: MASS class nnet spatial
* Installing *source* package 'KernSmooth' ...
** libs
[...]
gcc -shared  -o KernSmooth.so blkest.o cp.o dgedi.o dgefa.o dgesl.o linbin.o linbin2D.o locpoly.o rlbin.o sdiag.o sstdiag.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `KernSmooth'
     Formats: text html latex example 
* DONE (KernSmooth)

* Installing *source* package 'MASS' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c MASS.c -o MASS.o
gcc -shared  -o MASS.so MASS.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `MASS'
     Formats: text html latex example 
  write.matrix                                              example
* DONE (MASS)

* Installing *source* package 'class' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c class.c -o class.o
gcc -shared  -o class.so class.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `class'
     Formats: text html latex example 
* DONE (class)

* Installing *source* package 'nnet' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c nnet.c -o nnet.o
gcc -shared  -o nnet.so nnet.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `nnet'
     Formats: text html latex example 
* DONE (nnet)

* Installing *source* package 'spatial' ...
** libs
[...]
gcc -shared  -o spatial.so init.o krc.o pps.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `spatial'
     Formats: text html latex example 
* DONE (spatial)

* Installing *source* package 'boot' ...
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]
* DONE (boot)

* Installing *source* package 'cluster' ...
** libs
[...]
gcc -shared  -o cluster.so clara.o daisy.o fanny.o meet.o mona.o pam.o spannel.o twins.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


* Installing *source* package 'foreign' ...
[...]
** libs
[...]
gcc -shared  -o foreign.so SASxport.o avl.o file-handle.o format.o minitab.o pfm-read.o sfm-read.o spss.o stataread.o    
** R
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 24 21:43:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 24 Aug 2002 21:43:21 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <200208241042.MAA26903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>

On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:

> Dear all
>
> yesterday I got around to install R-1.5.1 on my machine at home which,
> admittedly, is running a very old version of RedHat Linux.  I noticed
> two things:
>
> 1) My pdflatex version is too old to produce the pdf version of the
>    manuals.  `./configure' checks whether a recent version of makeinfo
> is installed and tells you whether you can produce the info version or
> not.  (I was told I couldn't, another reason to upgrate the machine.)
> But during configuration there don't seem to be any check whether the
> pdflatex is recent enough.  You might want to consider to add such a
> check.

Well, we would need to know which version failed.  What is yours?

doc/manuals/README mentions pdftex-0.14d.  *ANY* version older than 1.00
is unreleased and experimental, but versions as old as -0.13d have worked.

> 2) `./configure' checks whether Perl 5.004 (or later) is installed.
>    On my machine Perl 5.00405 is installed and the installation went
> ahead without problems.  However, when I then tried to install
> R-1.5.1-recommended by issuing the command
>         R CMD INSTALL *.tar.gz
> in the appropriate directory, I received complaints about my Perl
> version.  Essentially, R wanted all of a sudden Perl 5.005 (or
> later).  An edited version of what I saw on my terminal is included
> below.  I got the same kind of error message when I used from within R
> `update.packages' and `install.packages' to update/install some
> packages that are not in R-1.5.1-recommended.
> As far as I can tell, the installation of the packages went ahead fine
> except that the `TITLE' file for each of these packages is empty.
> Hence, I guess the error message is produced when R tries to generate
> and install the `TITLE' file.  However, the `TITLE' files for the
> packages in the base distribution are fine.  This leaves me wondering
> why during the base installation Perl 5.004 (or later) is good enough
> for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
> later) is required.

That is correct.  Most things require 5.004, a few require 5.005.
Why is that a bug?

The issue is the use of the Text::Wrap module in share/perl/R/Utils.pm,
where 5.004_05 was broken (we discovered).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Sun Aug 25 09:33:57 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Sun, 25 Aug 2002 10:33:57 +0200 (MET DST)
Subject: title(list) shows strange chars (PR#1939)
Message-ID: <200208250833.KAA28402@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1, 1.5.0
OS: linux (RH7.1, RH6.2)
Submission from: (NULL) (192.38.43.138)


try
plot(1:2, main=list("title"))
You see the strange chars in title instead of "title" or error message...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:20:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 25 Aug 2002 10:20:39 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208251007420.16988-100000@gannet.stats>

Note that

R --restore --save --no-readline --gui=none -q < z.R > z.Rout

works for me (in tcsh or sh).  That should give you a workaround.

On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:49:01 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 10:49:01 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208251044560.16589-100000@auk.stats>

This is caused by the call to

fflush(stdin)

in Rstd_FlushConsole() in src/unix/sys-std.c.  I've commented on that
before: fflush on an input stream is not defined on the Solaris help page,
and it appears to flush piped input.

I've removed the call.  If anyone knows what it was intended to accomplish,
please find another way to do it.


On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sun Aug 25 12:12:46 2002
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Sun, 25 Aug 2002 19:12:46 +0800 (WST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
References: <200208241042.MAA26903@pubhealth.ku.dk>
 <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
Message-ID: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
  >> [...]  But during configuration there don't seem to be any check
  >> whether the pdflatex is recent enough.  You might want to
  >> consider to add such a check.

  BDR> Well, we would need to know which version failed.  What is
  BDR> yours?
0.12h it seems.  (See below).  The hyperref package coming with that
installation is also too old, it seems....

  >> [...]  This leaves me wondering why during the base installation
  >> Perl 5.004 (or later) is good enough for producing the `TITLE'
  >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.

  BDR> That is correct.  Most things require 5.004, a few require
  BDR> 5.005.  Why is that a bug?
Did I claim it was a bug? :) Anyway, from the FAQ:

    If a command you are familiar with causes an R error message in a
    case where its usual definition ought to be reasonable, it is
    probably a bug.

After installing R and knowing that `./configure' checks which Perl
version I have, I expect to have a system that works fine and doesn't
all of a sudden tell me that my Perl version is too old and cannot
perform a `complete' install of addtional packages.  If part of R
needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can
argue that it wasn't an error message but just a warning, or that I am
not familiar with the command (fair enough too :-) ), but the FAQ
continues:

   If you aren't familiar with the command, or don't know for certain
   how the command is supposed to work, then it might actually be
   working right. Rather than jumping to conclusions, show the problem
   to someone who knows for certain.

And I did exactly the latter, labeling my report `inconsistent use of
Perl'.  Rest assured, if I think something is a bug, then I will say
so in the subject line. :)

Cheers,

        Berwin

----- Attempt of "make pdf" -----
absentia:/opt/R/R-1.5.1$ make pdf
make[1]: Entering directory `/opt/R/R-1.5.1/doc'
make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
PDF/LaTeX documentation: reference index ...
This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
(pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
LaTeX2e <1998/06/01>
Babel <v3.6j> and hyphenation patterns for american, french, german,
italian, n
ohyphenation, loaded.

(refman.tex (/usr/share/texmf/tex/latex/base/book.cls
Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
(/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
(/usr/share/texmf/tex/latex/base/ifthen.sty)
(/usr/share/texmf/tex/latex/tools/longtable.sty)
(/usr/share/texmf/tex/latex/tools/bm.sty)
(/usr/share/texmf/tex/latex/base/alltt.sty)
(/usr/share/texmf/tex/latex/tools/verbatim.sty)
(/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
(/usr/share/texmf/tex/latex/graphics/color.sty
(/usr/share/texmf/tex/latex/config/color.cfg)
(/usr/share/texmf/tex/latex/graphics/pdftex.def))
(/usr/share/texmf/tex/latex/hyperref/hyperref.sty
(/usr/share/texmf/tex/latex/graphics/keyval.sty)
(/usr/share/texmf/tex/latex/hyperref/nameref.sty)
(../../share/texmf/hyperref.cfg

! Package keyval Error: linktocpage undefined.

See the keyval package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.12 }
      
) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
(/usr/share/texmf/tex/latex/hyperref/hpdftex.def
(/usr/share/texmf/tex/latex/psnfss/pifont.sty
(/usr/share/texmf/tex/latex/psnfss/upzd.fd)
(/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
(/usr/share/texmf/tex/latex/base/makeidx.sty)
Writing index file refman.idx
No file refman.aux.
(/usr/share/texmf/tex/context/base/supp-pdf.tex
(/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
loading : Context Support Macros / Missing
)
loading : Context Support Macros / PDF
) (refman.out) (refman.out)
Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
[]\OT1/cmr/m/n/10 null null null
        
                                                                               
                                                                               
                                                                               
                                                                     
[1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
Warning (ext1): destination with the same identifier already exists!
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1]
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] (base-pkg.tex
Chapter 1.

Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
[17]
[18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
[32]
[33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
[47]
[48] [49] [50] [51]
Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
[]\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
([][]\OT1/cmtt/m/n/10 par[]
[][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
plot.window[][][](
)[][]\OT1/cmr/m/n/10 ,
[52] [53] [54] [55] [56] [57] [58]
Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
[]\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
Ac-cu-rate
 Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
[59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
 []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
horizontal = 
FALSE, add = FALSE,[] 
[71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
[85]
[86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
[100]
[101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
Underfull \vbox (badness 10000) has occurred while \output is active
[111]
[112]
Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
[]\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
be drawn, 
see
[113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
[119]
[120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
[131]
[132] [133]
Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
[][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
[][]\OT1/cmt
t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
Math.data.f
rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
\OT1/cmr/m/n/1
0 meth-ods for
[134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
[145]
[146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
[157]
Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
[]\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
\OT1/cmr/m/n/10 i
s to pro-duce and print a postscript copy, if
[158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
[169]
[170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
[181]
[182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
[]\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
giv-ing \OT1/cm
tt/m/n/10 where \OT1/cmr/m/n/10 as
[192] [193] [194] [195]
! TeX capacity exceeded, sorry [input stack size=300].
\@inmathwarn ...latex@warning {Command \protect #1
                                                   invalid in math
mode}\fi 
l.10696 \alias{\$}{Extract}
                           
!  ==> Fatal error occurred, the output PDF file not finished!
Transcript written on refman.log.
make[2]: *** [refman.pdf] Error 1
make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
make[1]: *** [pdf] Error 2
make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
make: [pdf] Error 2 (ignored)
absentia:/opt/R/R-1.5.1$ 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 12:41:30 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 12:41:30 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>
Message-ID: <Pine.GSO.4.44.0208251239290.16718-100000@auk.stats>

On Sun, 25 Aug 2002, Berwin Turlach wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
>
>   BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
>   >> [...]  But during configuration there don't seem to be any check
>   >> whether the pdflatex is recent enough.  You might want to
>   >> consider to add such a check.
>
>   BDR> Well, we would need to know which version failed.  What is
>   BDR> yours?
> 0.12h it seems.  (See below).  The hyperref package coming with that
> installation is also too old, it seems....
>
>   >> [...]  This leaves me wondering why during the base installation
>   >> Perl 5.004 (or later) is good enough for producing the `TITLE'
>   >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.
>
>   BDR> That is correct.  Most things require 5.004, a few require
>   BDR> 5.005.  Why is that a bug?
> Did I claim it was a bug? :) Anyway, from the FAQ:
>
>     If a command you are familiar with causes an R error message in a
>     case where its usual definition ought to be reasonable, it is
>     probably a bug.
>
> After installing R and knowing that `./configure' checks which Perl
> version I have, I expect to have a system that works fine and doesn't
> all of a sudden tell me that my Perl version is too old and cannot
> perform a `complete' install of addtional packages.  If part of R
> needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can

Because a few vociferous users only have 5.004.  I think we do now intend
to require 5.005 in configure.

> argue that it wasn't an error message but just a warning, or that I am
> not familiar with the command (fair enough too :-) ), but the FAQ
> continues:
>
>    If you aren't familiar with the command, or don't know for certain
>    how the command is supposed to work, then it might actually be
>    working right. Rather than jumping to conclusions, show the problem
>    to someone who knows for certain.
>
> And I did exactly the latter, labeling my report `inconsistent use of
> Perl'.  Rest assured, if I think something is a bug, then I will say
> so in the subject line. :)

Please send to R-devel not R-bugs, though.  If you submit to R-bugs, it
goes on the BUGS list and is claimed as a bug.

> Cheers,
>
>         Berwin
>
> ----- Attempt of "make pdf" -----
> absentia:/opt/R/R-1.5.1$ make pdf
> make[1]: Entering directory `/opt/R/R-1.5.1/doc'
> make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
> PDF/LaTeX documentation: reference index ...
> This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
> (pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
> ><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
> LaTeX2e <1998/06/01>
> Babel <v3.6j> and hyphenation patterns for american, french, german,
> italian, n
> ohyphenation, loaded.
>
> (refman.tex (/usr/share/texmf/tex/latex/base/book.cls
> Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
> (/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
> (/usr/share/texmf/tex/latex/base/ifthen.sty)
> (/usr/share/texmf/tex/latex/tools/longtable.sty)
> (/usr/share/texmf/tex/latex/tools/bm.sty)
> (/usr/share/texmf/tex/latex/base/alltt.sty)
> (/usr/share/texmf/tex/latex/tools/verbatim.sty)
> (/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
> (/usr/share/texmf/tex/latex/graphics/color.sty
> (/usr/share/texmf/tex/latex/config/color.cfg)
> (/usr/share/texmf/tex/latex/graphics/pdftex.def))
> (/usr/share/texmf/tex/latex/hyperref/hyperref.sty
> (/usr/share/texmf/tex/latex/graphics/keyval.sty)
> (/usr/share/texmf/tex/latex/hyperref/nameref.sty)
> (../../share/texmf/hyperref.cfg
>
> ! Package keyval Error: linktocpage undefined.
>
> See the keyval package documentation for explanation.
> Type  H <return>  for immediate help.
>  ...
>
> l.12 }
>
> ) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
> (/usr/share/texmf/tex/latex/hyperref/hpdftex.def
> (/usr/share/texmf/tex/latex/psnfss/pifont.sty
> (/usr/share/texmf/tex/latex/psnfss/upzd.fd)
> (/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
> (/usr/share/texmf/tex/latex/base/makeidx.sty)
> Writing index file refman.idx
> No file refman.aux.
> (/usr/share/texmf/tex/context/base/supp-pdf.tex
> (/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
> loading : Context Support Macros / Missing
> )
> loading : Context Support Macros / PDF
> ) (refman.out) (refman.out)
> Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
> []\OT1/cmr/m/n/10 null null null
>
>
>
>
>
> [1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
> Warning (ext1): destination with the same identifier already exists!
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1]
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] (base-pkg.tex
> Chapter 1.
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
> [17]
> [18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
> [32]
> [33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
> [47]
> [48] [49] [50] [51]
> Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
> []\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
> ([][]\OT1/cmtt/m/n/10 par[]
> [][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
> plot.window[][][](
> )[][]\OT1/cmr/m/n/10 ,
> [52] [53] [54] [55] [56] [57] [58]
> Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
> []\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
> Ac-cu-rate
>  Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
> [59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
> Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
>  []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
> horizontal =
> FALSE, add = FALSE,[]
> [71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
> [85]
> [86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
> [100]
> [101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
> Underfull \vbox (badness 10000) has occurred while \output is active
> [111]
> [112]
> Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
> []\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
> be drawn,
> see
> [113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
> [119]
> [120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
> [131]
> [132] [133]
> Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
> [][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
> [][]\OT1/cmt
> t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
> Math.data.f
> rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
> \OT1/cmr/m/n/1
> 0 meth-ods for
> [134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
> [145]
> [146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
> [157]
> Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
> []\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
> \OT1/cmr/m/n/10 i
> s to pro-duce and print a postscript copy, if
> [158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
> [169]
> [170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
> [181]
> [182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
> Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
> []\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
> giv-ing \OT1/cm
> tt/m/n/10 where \OT1/cmr/m/n/10 as
> [192] [193] [194] [195]
> ! TeX capacity exceeded, sorry [input stack size=300].
> \@inmathwarn ...latex@warning {Command \protect #1
>                                                    invalid in math
> mode}\fi
> l.10696 \alias{\$}{Extract}
>
> !  ==> Fatal error occurred, the output PDF file not finished!
> Transcript written on refman.log.
> make[2]: *** [refman.pdf] Error 1
> make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
> make[1]: *** [pdf] Error 2
> make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
> make: [pdf] Error 2 (ignored)
> absentia:/opt/R/R-1.5.1$
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Sun Aug 25 13:50:41 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Sun, 25 Aug 2002 14:50:41 +0200 (MET DST)
Subject: library(file) segfaults on solaris (PR#1942)
Message-ID: <200208251250.OAA28836@pubhealth.ku.dk>


luke's demonstration of external references, at

www.stat.umn.edu/~luke/file_0.0-0.tar.gz

(accessible through the developer page) causes
a segfault on solaris 2.8 as soon as library(file)
is attempted.  it runs fine on RH 7.2.  the segfault
on solaris occured for R 1.5.1 and 1.6 (8-25 image)

a quick poke at gdb (which i can only get running
for R 1.6, though this bug report is for 1.5.1) 
shows the failure to be at eval.c:351
SET_NAMED(tmp, 2)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = Patched
 major = 1
 minor = 5.1
 year = 2002
 month = 08
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sun Aug 25 16:26:42 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sun, 25 Aug 2002 10:26:42 -0500
Subject: library(file) segfaults on solaris (PR#1942)
In-Reply-To: <200208251250.OAA28836@pubhealth.ku.dk>; from stvjc@channing.harvard.edu on Sun, Aug 25, 2002 at 02:50:41PM +0200
References: <200208251250.OAA28836@pubhealth.ku.dk>
Message-ID: <20020825102642.A8348@nokomis.stat.umn.edu>

It's a bug in my init routine -- uses .Call but the C code did not
return a value.  Fixed in file_0.0-1.tar.gz.

luke

On Sun, Aug 25, 2002 at 02:50:41PM +0200, stvjc@channing.harvard.edu wrote:
> 
> luke's demonstration of external references, at
> 
> www.stat.umn.edu/~luke/file_0.0-0.tar.gz
> 
> (accessible through the developer page) causes
> a segfault on solaris 2.8 as soon as library(file)
> is attempted.  it runs fine on RH 7.2.  the segfault
> on solaris occured for R 1.5.1 and 1.6 (8-25 image)
> 
> a quick poke at gdb (which i can only get running
> for R 1.6, though this bug report is for 1.5.1) 
> shows the failure to be at eval.c:351
> SET_NAMED(tmp, 2)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.8
>  arch = sparc
>  os = solaris2.8
>  system = sparc, solaris2.8
>  status = Patched
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 08
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a311876@fmr.com  Mon Aug 26 16:30:21 2002
From: a311876@fmr.com (a311876@fmr.com)
Date: Mon, 26 Aug 2002 17:30:21 +0200 (MET DST)
Subject: Rprof and setMethod conflict (PR#1949)
Message-ID: <200208261530.RAA07795@pubhealth.ku.dk>

Full_Name: Kevin C. Bartz
Version: 1.5.1
OS: Solaris 2.6
Submission from: (NULL) (192.223.226.5)


A while ago, I noticed this oddity about R profiling and setMethod.

First, I "test out" Rprof.

> require(methods)
Loading required package: methods 
[1] TRUE
> 
> Rprof("test.out")
> data.frame("a")
  X.a.
1    a
> Rprof(NULL)

So far, so good. Next, I define myClass.

> setClass("myClass", representation(mySlot = "numeric"))
[1] "myClass"
> setMethod("as.data.frame", signature(x = "myClass"),
+           function(x, row.names, optional) { "as.data.frame for myClass" })
Creating a new generic function for "as.data.frame" on 
element 1 of the search path 
[1] "as.data.frame"

Again, everything is fine. I've expanded as.data.frame to accept objects of
class myClass. Now, let's try the standard data.frame("a") again:

> data.frame("a")
  X.a.
1    a

Still, no problems. But after I start R profiling, problems arise:

> Rprof("test2.out")
> data.frame("a")
Error in standardGeneric("as.data.frame") : 
	UseMethod used in an inappropriate fashion

It seems that I can no longer use the standard method for as.data.frame in an R
profiling sequence once I've defined a new method for it. However, I CAN use the
standard as.data.frame method when I'm NOT R profiling.

I know I've brought this up before, but I thought it was appropriate also to log
this bug in a more formal manner.

Thanks,

Kevin

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 26 22:16:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 14:16:26 -0700 (PDT)
Subject: Rprof and setMethod conflict (PR#1949)
In-Reply-To: <200208261530.RAA07795@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208261415570.65552-100000@homer01.u.washington.edu>

On Mon, 26 Aug 2002 a311876@fmr.com wrote:

> Full_Name: Kevin C. Bartz
> Version: 1.5.1
> OS: Solaris 2.6
> Submission from: (NULL) (192.223.226.5)
>
>
> A while ago, I noticed this oddity about R profiling and setMethod.
>

Appears to be fixed in r-devel

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rsingle@zoo.uvm.edu  Tue Aug 27 01:21:29 2002
From: rsingle@zoo.uvm.edu (rsingle@zoo.uvm.edu)
Date: Tue, 27 Aug 2002 02:21:29 +0200 (MET DST)
Subject: strange result from x[x!="NA"] (PR#1952)
Message-ID: <200208270021.CAA09251@pubhealth.ku.dk>

Full_Name: Richard Single
Version: 1.5.1
OS: Windows
Submission from: (NULL) (132.198.176.82)


In the latest Windows version the following syntax behaves
differently than it did in version 1.4.0: x[x!="NA"] 
The results under R 1.4.0 agree with S.

--Rich

R 1.4.0 
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]  TRUE FALSE FALSE  TRUE
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


R 1.5.1
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]    NA FALSE FALSE    NA
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 27 05:02:56 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 21:02:56 -0700 (PDT)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208262057200.11546-100000@homer20.u.washington.edu>

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.

Yes.  It's a deliberate change in 1.5.0, documented in both the NEWS file
and the guide to updating to 1.5.  The string "NA" is not special any
more, you need as.character(NA) to make a missing string, and you need to
use is.na() to test for NAs, as was always recommended.


	-thomas


> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
- NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 27 07:51:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 27 Aug 2002 07:51:56 +0100 (BST)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208270749550.31357-100000@gannet.stats>

This is correct: see the NEWS file.

Working as documented is not a bug.

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.
>
> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Aug 27 13:20:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Tue, 27 Aug 2002 14:20:55 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208271220.OAA15599@pubhealth.ku.dk>

On Thu, 22 Aug 2002 14:45:47 +0200 (MET DST), you wrote:

>I apparently found an error in how "deriv" puts a derivative to the screen
>(though the internal representation is correct).  Here's what I was doing for a
>class example:
>
>> lnlk<-expression(15*log(p)+11*log(1-p))
>> p<-15/26
>> D(D(lnlk,"p"),"p")
>-15 * (1/p^2) + 11 * (1/(1 - p)^2)

This is now fixed in r-devel (to become 1.6.0):

> D(D(lnlk,"p"),"p")
-(15 * (1/p^2) + 11 * (1/(1 - p)^2))

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Aug 27 22:23:10 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 28 Aug 2002 09:23:10 +1200
Subject: graphics changes
Message-ID: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>

Hi

I have committed some changes to R's graphics code which means that the
current version of the grid package on CRAN (0.6-1) will NOT
install/run on the development version of R.

I have submitted to CRAN a new version of grid which does install/run,
but this may not be available immediately.  In the meantime, the new
grid version is available at
http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:24:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:24:02 +0200
Subject: Rnews 2002/3
Message-ID: <15724.31378.384122.787920@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/3 issue of the R
Newsletter.  For more information see

      http://CRAN.R-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in 'Writing Articles for R News'
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 Oct 15, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:29:27 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:29:27 +0200
Subject: graphics changes
In-Reply-To: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
References: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
Message-ID: <15724.31703.400417.261503@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> I have committed some changes to R's graphics code which means that the
> current version of the grid package on CRAN (0.6-1) will NOT
> install/run on the development version of R.

> I have submitted to CRAN a new version of grid which does install/run,
> but this may not be available immediately.  In the meantime, the new
> grid version is available at
> http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

In CRAN's 1.6.0/Recommended now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 12:59:54 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 13:59:54 +0200 (MET DST)
Subject: ENQUIRY (PR#1955)
Message-ID: <200208281159.NAA25641@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:01:39 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:01:39 +0200 (MET DST)
Subject: ENQUIRY (PR#1956)
Message-ID: <200208281201.OAA25697@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:16:37 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:16:37 +0200 (MET DST)
Subject: ENQUIRY (PR#1957)
Message-ID: <200208281216.OAA25951@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:19:11 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:19:11 +0200 (MET DST)
Subject: ENQUIRY (PR#1958)
Message-ID: <200208281219.OAA25995@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Wed Aug 28 13:57:03 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Wed, 28 Aug 2002 14:57:03 +0200 (MET DST)
Subject: dev.print + impossible filename -> break (PR#1959)
Message-ID: <200208281257.OAA26697@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1
OS: Linux (RH 7.1)
Submission from: (NULL) (192.38.43.138)


Hi,

Try to give an impossible file name (command to pipe through) for dev.print:

> plot(1:4)
> dev.print(file="|llllll")

I got the response

sh: llllll: command not found

Process R broken pipe at Wed Aug 28 14:42:27 2002

After which R was killed (or at least vanished from the process list).

Best,

Ott

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:08:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 28 Aug 2002 14:08:37 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <200208281257.OAA26697@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>

Here's the nub.

> postscript(file="|llllll")
> sh: llllll: command not found

> dev.off()
Broken pipe

and it's related to how popen/pclose are implemented.  The help page
does say errors are hard to detect, but we can do a bit better than this.

On Wed, 28 Aug 2002 otoomet@econ.dk wrote:

> Full_Name: Ott Toomet
> Version: 1.5.1
> OS: Linux (RH 7.1)
> Submission from: (NULL) (192.38.43.138)
>
>
> Hi,
>
> Try to give an impossible file name (command to pipe through) for dev.print:
>
> > plot(1:4)
> > dev.print(file="|llllll")
>
> I got the response
>
> sh: llllll: command not found
>
> Process R broken pipe at Wed Aug 28 14:42:27 2002
>
> After which R was killed (or at least vanished from the process list).
>
> Best,
>
> Ott
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Aug 28 14:25:23 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 28 Aug 2002 09:25:23 -0400
Subject: Fixes/additions to methods package
Message-ID: <3D6CCF43.8D93DCD@research.bell-labs.com>

Some changes committed today to the r-devel (1.6.0) version of the
methods package:

1. The function setOldClass has been added as per the green book, p.
450.  The point in this case is not conversion as in the green book so
much as allowing old-style classes to be included in signatures given to
setMethod.

This worked before (with a warning), but old-style inheritance couldn't
be picked up.  Using
  setOldClass(c("chron", "times"))
should let "times" be included in signatures with the method selected
for an object of class "chron".

2. Some heuristics have been added to warn about what appear to be
mistakes in writing generic functions (e.g., wrong name, no call to
standardGeneric).  The consequences of such errrors can be obscure.

As with all heuristics, possibily warnings will occur when not
appropriate.  Let me know.

3. The function promptMethods() has been revised to generate aliases for
individual methods, according to a proposed convention:
  setMethod("f", c("character", "numeric"), .....)
would correspond to an entry in the documentation file of
  \alias{f,character,numeric-method}
(The help function doesn't yet know about this specifically.)

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:53:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 28 Aug 2002 14:53:55 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0208281440590.12187-100000@auk.stats>

On Wed, 28 Aug 2002 ripley@stats.ox.ac.uk wrote:

> Here's the nub.
>
> > postscript(file="|llllll")
> > sh: llllll: command not found
>
> > dev.off()
> Broken pipe
>
> and it's related to how popen/pclose are implemented.  The help page
> does say errors are hard to detect, but we can do a bit better than this.

What I tested was checking errno, which the man page says gets set.
But on Linux I find:

popen succeeds, returns a valid file handle and does not set errno.
pclose on that file handle terminates the process.

The last can be avoided by setting a signal handler for SIGPIPE,
although that's not portable across OSes.


Anyone know a portable way to do this?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chr.schulz@email.de  Thu Aug 29 05:54:26 2002
From: chr.schulz@email.de (chr.schulz@email.de)
Date: Thu, 29 Aug 2002 06:54:26 +0200 (MET DST)
Subject: Rodbc (PR#1961)
Message-ID: <200208290454.GAA01017@pubhealth.ku.dk>

Full_Name: Christian Schulz
Version: 1.5.1
OS: Win2000
Submission from: (NULL) (145.254.65.158)


Hi,

First:

i get a error-message donwload Rodbc  via
{a <- CRAN.packages()
+       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
available=a)}

Second:

channel  <- odbcConnect("chris_db","","")
sqlSave(channel,autocount)
Error in if (any(sqlTables(channel)[3] == tablename)) { : 
        missing value where logical needed

...i get this error-messages from code, which work in past !?

Thanks
regards,Christian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:14:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:14:42 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <200208290454.GAA01017@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>

1) RODBC is no longer in the main part of CRAN, but in Devel, because

2) It has not been updated for 1.5.x, and indeed seems unmaintained.

Why did you think these were bugs?


On Thu, 29 Aug 2002 chr.schulz@email.de wrote:

> Full_Name: Christian Schulz
> Version: 1.5.1
> OS: Win2000
> Submission from: (NULL) (145.254.65.158)
>
>
> Hi,
>
> First:
>
> i get a error-message donwload Rodbc  via
> {a <- CRAN.packages()
> +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> available=a)}
>
> Second:
>
> channel  <- odbcConnect("chris_db","","")
> sqlSave(channel,autocount)
> Error in if (any(sqlTables(channel)[3] == tablename)) { :
>         missing value where logical needed
>
> ...i get this error-messages from code, which work in past !?
>
> Thanks
> regards,Christian
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:21:10 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:21:10 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208290718120.9856-100000@gannet.stats>

Just to add: RODBC is not on the list I get from CRAN.packages().
You may be getting an old copy from a cache.
But it's hard to tell when you say

`i get a error-message'

without telling us what the message is.

It is RODBC not Rodbc, and that might be part of your problem.

On Thu, 29 Aug 2002 ripley@stats.ox.ac.uk wrote:

> 1) RODBC is no longer in the main part of CRAN, but in Devel, because
>
> 2) It has not been updated for 1.5.x, and indeed seems unmaintained.
>
> Why did you think these were bugs?
>
>
> On Thu, 29 Aug 2002 chr.schulz@email.de wrote:
>
> > Full_Name: Christian Schulz
> > Version: 1.5.1
> > OS: Win2000
> > Submission from: (NULL) (145.254.65.158)
> >
> >
> > Hi,
> >
> > First:
> >
> > i get a error-message donwload Rodbc  via
> > {a <- CRAN.packages()
> > +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> > available=a)}
> >
> > Second:
> >
> > channel  <- odbcConnect("chris_db","","")
> > sqlSave(channel,autocount)
> > Error in if (any(sqlTables(channel)[3] == tablename)) { :
> >         missing value where logical needed
> >
> > ...i get this error-messages from code, which work in past !?
> >
> > Thanks
> > regards,Christian
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:10:41 2002
From: stakb@nus.edu.sg (stakb@nus.edu.sg)
Date: Fri, 30 Aug 2002 10:10:41 +0200 (MET DST)
Subject: The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <200208300810.KAA12987@pubhealth.ku.dk>

Full_Name: Kaushik Bhattacharyya
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (137.132.3.10)


Main R-function used:

pp1

function(X)

{

x_as.matrix(X)

trial_function(a)

{

clusproj(x,a)

}

test.nlm_nlm(trial,rep(1,ncol(X)))

theta_test.nlm$estimate

theta_theta/sqrt(sum(theta^2))

cluster.index_round(1/test.nlm$min,6)

# print the results

###############

cat(paste("Projection direction = (",paste(round(theta,6),

    collapse=","),")",sep=""),"\n")

cat("Projection index =",cluster.index,"\n")

##################

w <- clusterproj(x,theta)

# define first cluster break

n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]

n.ord <- order(x%*%theta)

A.ndx <- n.ord[seq(n.break)]

B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]

print(sort(A.ndx))

print(sort(B.ndx))

}

 

Functions in the main function:

 

clusterproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length(XS)

    w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    w

}

 

clusproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length (XS)

    w <- (seq(n

-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    1/max(w)

}

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:26:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:26:48 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <200208300810.KAA12987@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208300924520.7778-100000@gannet.stats>

Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:34:46 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 16:34:46 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>

The division part of the following code is not executing -

(seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

Note: Prof Yatracos: Would you please send them one example ?

Thanks,

Kaushik



-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:27 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- 
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:41:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:41:13 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208300937170.7797-100000@gannet.stats>

And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 10:29:00 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 17:29:00 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>

Yes. It passed the "make check". The problem is coming in Tru64 Unix also.

Here is the error message.

For example:

> clusproj(newiris,rep(1,4))
Error in X %*% a : requires numeric matrix/vector arguments

Here newiris is the iris dataset.

Thanks,

Kaushik

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 10:30:40 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 17:30:40 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F80AC585@MBXSRV06.stf.nus.edu.sg>


    Dear Professor Ripley,

thanks much for your prompt action.

Best regards,
Yannis Yatracos

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 10:54:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 10:54:08 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208301050110.8070-100000@gannet.stats>

1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 11:21:58 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 18:21:58 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F8114731@MBXSRV06.stf.nus.edu.sg>


     Dear Professor Ripley:

I hope you can allow me to interfere between you and Kaushik.
I think I hav misled him.

1) The function cluproj is used in the function pp1.
2) I called "newiris" just the numerical data from "iris".
3) Writing: clus.proj(as.matrix(newiris),rep(1,4))
gave the following:
Error in (seq(n - 1) * mean(XS) - cumsum(XS[seq(n - 1)])) * diff(XS)/((n -  :
        non-conformable arrays
4) A colleague made clusproj work by writing as.vector in front of the numerator
and denominator:
 as.vector((seq(n -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS))/
as.vector(((n-1)*var(XS)))
5) Here is the result: 
> clusproj(as.matrix(newiris),rep(1,4))
[1] 12.43743 

6) Note that the denominator is a scalar.

I hope things are more clear now.

Best regards,
Yannis Yatracos


-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 5:54 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Sat Aug 31 19:59:27 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Sat, 31 Aug 2002 11:59:27 -0700 (PDT)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
Message-ID: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>

Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
ran the configure with gcc 3.1.1 I got the following error:

[...]
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from g77... -v
checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
-lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore,
extra underscore
checking whether g77 and gcc agree on int and double... configure:
WARNING: g77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?


Should I have set some configuration option?  Or is this more likely a
problem with my gcc installation/build?

I'm trying to build r-devel (8/30/02) source.


--------------------

marla:> gcc -v
Reading specs from
/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
Thread model: single
gcc version 3.1.1


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 31 21:01:28 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 31 Aug 2002 21:01:28 +0100 (BST)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
In-Reply-To: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0208312049390.30059-100000@gannet.stats>

I suspect your LD_LIBRARY_PATH does not include wherever you installed the
gcc libs (/home/rpeng/install/gcc/lib?) and g77 >= 3.1 uses a shared
libg2c.  (It also uses a shared libgcc_s.)

In that case running anything built with g77 will not work, and configure
does not actually check that.

You can also get around this by specifying LDFLAGS: to get 64-bit Solaris
builds to work with gcc 3.2 I had to use

LDFLAGS="-L/usr/local/lib/sparcv9 -L/usr/local/lib"

which is how I know about this (and I really expected gcc to sort that out
for me: the Sun compilers do).

On Sat, 31 Aug 2002, Roger Peng wrote:

> Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
> compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
> ran the configure with gcc 3.1.1 I got the following error:
>
> [...]
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking how to get verbose linking output from g77... -v
> checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
> -lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
> checking for dummy main to link with Fortran 77 libraries... none
> checking for Fortran 77 name-mangling scheme... lower case, underscore,
> extra underscore
> checking whether g77 and gcc agree on int and double... configure:
> WARNING: g77 and gcc disagree on int and double
> configure: error: Maybe change CFLAGS or FFLAGS?
>
>
> Should I have set some configuration option?  Or is this more likely a
> problem with my gcc installation/build?
>
> I'm trying to build r-devel (8/30/02) source.
>
>
> --------------------
>
> marla:> gcc -v
> Reading specs from
> /home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
> Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
> Thread model: single
> gcc version 3.1.1
>
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joshi@engr.orst.edu  Sat Aug 31 22:40:53 2002
From: joshi@engr.orst.edu (joshi@engr.orst.edu)
Date: Sat, 31 Aug 2002 23:40:53 +0200 (MET DST)
Subject: bug in garbage collector function gc() documentation (PR#1970)
Message-ID: <200208312140.XAA23253@pubhealth.ku.dk>

Full_Name: Saket Joshi
Version: 1.5.0
OS: Solaris 5.8
Submission from: (NULL) (128.193.38.91)


According to the documentation obtained by entering: help.search("gc"), the
command gc() forces garbage collection and gives the memory usage statistics
along with the trigger values in bytes also interpretted in megabytes. However
when I ran gc(), the result was a list giving the memory usage in bytes and
interpretted in Megabits and not mega bytes.

e.g.

> gc()

	   used  (Mb) gc trigger  (Mb)
Ncells   288733   7.8     818163  21.9
Vcells 30158416 230.1   48892294 373.1

As can be seen, 230.1 is the interpretation of 30158416 bytes as megabits. But
the documentation says megabytes.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Aug 30 18:13:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 30 Aug 2002 12:13:05 -0500
Subject: Thoughts about Cygwin ?
Message-ID: <E17kpKT-0001Lp-00@sonny.eddelbuettel.com>


Let me preface this email by saying that I am very grateful for the
existing Windows version of R. It does an excellent job by providing
a pain- and flawless installation, and a look-and-fell most Windows
users feel comfortable with.  For me,  Windows in its different 
flavours is not something I know, or care, a lot about -- but like
others am forced to work with. The old need-bread-on-the-table thing.

Which brings us to Cygwin. It has also come a fairly long way, and
does now contain an almost complete Unix "user layer" (if you install
the whole bit, not just the default). By "user layer" I mean the tools, 
the networking (I can ssh or telnet in), and even a complete (?) X11
layer -- in fact I can ssh from one NT machine to another and export 
X11 apps back as if I was working between Unix terminals -- not bad.
Even tetex works out of the box to the extend that it support Sweave.

But I tend to spend most of my Windows time in Cygwin.  With R inside 
Xemacs/ESS, my work is fairly OS-agnostic. Every now and then, however,
I feel that it would be nice to have R behave under Cygwin just like it
does under Unix/Linux.  Anybody else here who feels the same?  I don't
think I have the stamina, or for that matter windows/cygwin knowledge, 
to spawn a port, but I would be happy to collaborare as I can with test,
configure.in hacks etc pp

If there is no demand, just tell me to crawl back under my stone. No
hurt feelings. I should be using Debian here anyway... 

Dirk

-- 
According to the latest figures, 43% of all signatures are totally
worthless.   

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 18:02:01 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 19:02:01 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208011702.TAA28218@pubhealth.ku.dk>

Full_Name: Yi-Xiong Zhou
Version: 1.5.1
OS: win2000pro
Submission from: (NULL) (64.169.249.42)


Update() can not find objects when it is used in a function, which is in turn
being called by another function. Here is a R script to show the problem:

######## begin of the test script ##########
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   y <- rnorm(20)
   oo <- lm(y~x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun1()
########### end of the test script #############

Here is the result of running this script:

[1] "step 1"
[1] "first update success."
Error in eval(expr, envir, enclos) : Object "y" not found

Ideally, update should first search the objects in its environment first, then
its parent's, and grand parent's environments ... Right now, it only searchs its
own environment and the global environment, skipping its parents'. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  1 18:26:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Aug 2002 19:26:34 +0200
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
References: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <x2ptx232yd.fsf@biostat.ku.dk>

yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 18:53:31 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 10:53:31 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>

Thanks Peter. This does work for formula. However, it failed to a function
call. Here is another test script:

################# begin test ###############
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   oo <- fun3(x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun3 <- function(aa) {
   oo <- list(x=aa, call=match.call())
   oo
}

fun1()
############### end test ############

The error message is 

[1] "step 1"
[1] "first update success."
Error in fun3(aa = x) : Object "x" not found

Yi-Xiong


-----Original Message-----
From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
Sent: Thursday, August 01, 2002 10:27 AM
To: Yi-Xiong Zhou
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: update() can not find objects (PR#1861)


yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in
turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first,
then
> its parent's, and grand parent's environments ... Right now, it only
searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Aug  1 19:28:23 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 1 Aug 2002 14:28:23 -0400
Subject: CVS Repository for Packages?
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149CE27@groexmb02.pfizer.com>


Hi All,

Would other non-core package developers like to have a common CVS
repository?      I think that this would be useful, and it would encourage
shared development of non-core packages.

Would it be possible/desirable/manageable to host this on an r-project
server?   

As an alternative, I could set up and administer a project on sourceforge.
(I have a couple of projects hosted there already).

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 20:36:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 12:36:51 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208011232100.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002 yzhou@arcturusag.com wrote:
<snip>
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'.
>

No, ideally it should search the objects in the environment where the
model was defined.  There's no guarantee that this is a grandparent, and
grandparents shouldn't be searched otherwise.  It might be tricky to get
this to work.

What isn't clear to me is whether the current environment should be
searched before the environment where the model was defined or afterwards.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkoulis@math.uwaterloo.ca  Thu Aug  1 21:15:21 2002
From: tkoulis@math.uwaterloo.ca (tkoulis@math.uwaterloo.ca)
Date: Thu, 1 Aug 2002 22:15:21 +0200 (MET DST)
Subject: glm crashes with "Illegal instruction" (PR#1863)
Message-ID: <200208012015.WAA28782@pubhealth.ku.dk>

Full_Name: Theodoro Koulis
Version: 1.5.1
OS: Macintosh
Submission from: (NULL) (129.97.97.31)


I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
version):

>x1_runif(10);
>y1_x1-3;
>glm(y1~x1);

The program exits with the following message:
Illegal instruction

Perhaps I am missing something. 

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug  1 21:46:49 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 1 Aug 2002 13:46:49 -0700
Subject: glm crashes with "Illegal instruction" (PR#1863)
In-Reply-To: <200208012015.WAA28782@pubhealth.ku.dk>
Message-ID: <CD5AC7A2-A58F-11D6-8FDE-003065A21C86@stat.ucla.edu>

R-1.5.1 (not from fink, but from  R-1.5.1.dmg.tar.gz, July 1 version, OS 
X 10.1.5, also
on Jaguar)

 > x1<-runif(10)
 > y1<-x1-3
 > glm(y1~x1)

Call:  glm(formula = y1 ~ x1)

Coefficients:
(Intercept)           x1
          -3            1

Degrees of Freedom: 9 Total (i.e. Null);  8 Residual
Null Deviance:      0.9233
Residual Deviance: 5.916e-31    AIC: -684.7


On Thursday, August 1, 2002, at 01:15 PM, tkoulis@math.uwaterloo.ca 
wrote:

> Full_Name: Theodoro Koulis
> Version: 1.5.1
> OS: Macintosh
> Submission from: (NULL) (129.97.97.31)
>
>
> I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
> version):
>
>> x1_runif(10);
>> y1_x1-3;
>> glm(y1~x1);
>
> The program exits with the following message:
> Illegal instruction
>
> Perhaps I am missing something.
>
> Thanks.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
==========================================================================
==
          Remember, wherever you go, there you are. --- Buckaroo Banzai
==========================================================================
==

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:14:52 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 1 Aug 2002 23:14:52 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012114.XAA28978@pubhealth.ku.dk>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:20:13 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 14:20:13 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234C@GENOME>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:25:37 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 23:25:37 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012125.XAA29038@pubhealth.ku.dk>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:13:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 14:13:59 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>
Message-ID: <Pine.A41.4.44.0208011405170.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 11:25:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 11:25:29 +0100 (BST)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x27kj8i80l.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  3 12:29:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2002 13:29:15 +0200
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
Message-ID: <x23ctwi3jo.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 3 Aug 2002, Peter Dalgaard BSA wrote:
> 
> > Another example that has come back to haunt us several times is
> > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > found inside "d" if present, but call-by-value semantics imply that it
> > is an object in the caller's scope. You really ought to pass the name
> > "foo" (or maybe better: quote(foo), or a formula ~foo).
> 
> Should we not just deprecate the offset argument in lm and glm?  Using the
> offset() function in the formula works as one would expect (at least if
> one remembers the R rules which start at the formula's environment).

That's a definite possibility, but what about subset (the argument,
not the function) and weights? 

Not to mention pch and col in plot.formula et al. where vectorization
led to some unexpected awkwardness.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sat Aug  3 12:43:11 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sat, 3 Aug 2002 07:43:11 -0400
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>; from p.dalgaard@biostat.ku.dk on Sat, Aug 03, 2002 at 01:29:15PM +0200
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats> <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <20020803074311.X5720@jimmy.harvard.edu>

On Sat, Aug 03, 2002 at 01:29:15PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> > 
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> > 
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
> 
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights? 
> 
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

 My intention was to include some discussion of just these issues in
 the 8 am session on the 17th.
 I hope that we can use some of these comments at that time as well.



> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stanleywood@hknetmail.com  Sat Aug  3 13:59:59 2002
From: stanleywood@hknetmail.com (stanleywood)
Date: Sat, 3 Aug 2002 20:59:59 +0800
Subject: please respond
Message-ID: <200208031259.g73Cxcdi008945@HKNetMail.COM>

Dear Sir,

I am Stanley Woodwork, the secetary of Africa White farmers
co-operation (AWFC) OF Zimbabwe. After the last general elections in my 
country where the incumbent president Mr. Robert Mugabe won the 
presidential election, the
government has adopted a very aggressive land reforms programme. This 
programme is solely aimed at taking the land owned by white African 
farmers for redistribution to black africans. This programme has attracted 
worldwide
condemnation from world leaders including British prime minister,mr 
Tony Blair and also forced several white farmers to flee the country for 
fear of
victimization and physical abuse.
   Two weeks ago, our headquartes in Harare was attacked and
looted by black protesters and in the process burnt down the whole 
building. Fortunately,they did not get access to the huge funds kept in the 
strong room which
belong to the co-operation. This cash was kept at the secretariat 
rather than in the bank for fear of seizure by the government.
   Now I have the funds in my possession and would need to get it 
invested in a viable business venture in europe. T
   Once I can get your commitment and sincerity of investing
this funds on our behalf then I would proceed to get the funds 
freighted to Europe, where you would be required to pick it up for investment 
for us.
   You do not have anything to worry about as I would undertake all 
charges involved in freighting the funds to europe, and the business 
proposal is 100% legal and risk free.
   You would be adequately compensated for all your effort once we have 
gotten the funds to europe.
Please get back to me if you can be of assistance and I would want our 
correspondence to be via email as most phone lines of white farmers are 
bugged by the government.
   I expect 100% confidentiality and your prompt response to
this mail so as to proceed.you may also reach me on 
stanleywoodwork@hotvoice.com


Kind regards,

Stanley Woodwork.

---------------------------------------------------
Get Your Free Email at http://www.hknetmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 19:04:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 19:04:21 +0100 (BST)
Subject: Problems with gcc-3.1 -O2 on Solaris
Message-ID: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>

I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
systems (not the one I usually use).  We have seen a report of
this before (Chuck Berry, 17 July 2002).

The symptom is that make check fails with var(1) being NaN not NA.  The
underlying cause is that as.double(NA) is NaN.

It can be solved by compiling arithmetic.c without -O2.

Another installation with a single-processor UltraSparc 1 works correctly.
My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Sun Aug  4 03:42:02 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Sun, 4 Aug 2002 12:42:02 +1000
Subject: offset arg (was Re: [R] variable scope)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>

I certainly think we should deprecate it and Peter has (probably
unintentionally) offered yet another cogent argument as to why (although
that could be fixed by including "offset" among the arguments to be handled
by model.frame, like subset, weights, &c, and yes, I do know this would
break existing code...)

For me the main argument against it, though, is that it de-links the offset
from the linear predictor, where naturally it belongs.  It is hard to find a
truly natural and effective syntax for saying "this is part of the linear
predictor but it has a known coefficient of unity, not to be estimated", but
the ... + offset(gunk) device that we now allow, (along with the commercial
R clone, of course), is not all that bad.

Bill.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Saturday, August 03, 2002 8:25 PM
To: Peter Dalgaard BSA
Cc: r-devel@stat.math.ethz.ch
Subject: offset arg (was Re: [R] variable scope)


On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:36:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:36:28 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.44.0208050835300.101274-100000@homer11.u.washington.edu>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> >
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> >
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
>
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights?
>
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

Though at least for the graphical parameters I think with() gives a good
solution.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:42:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:42:46 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.A41.4.44.0208050840090.101274-100000@homer11.u.washington.edu>

On Sun, 4 Aug 2002 Bill.Venables@cmis.csiro.au wrote:

> I certainly think we should deprecate it and Peter has (probably
> unintentionally) offered yet another cogent argument as to why (although
> that could be fixed by including "offset" among the arguments to be handled
> by model.frame, like subset, weights, &c, and yes, I do know this would
> break existing code...)

It wouldn't, because it already is handled that way.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  5 16:48:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Aug 2002 17:48:19 +0200
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.34407.366778.231195@gargle.gargle.HOWL>
References: <20020718193100.23524.qmail@uadvg137.cms.usa.net>
 <15694.34407.366778.231195@gargle.gargle.HOWL>
Message-ID: <15694.40515.428879.709115@gargle.gargle.HOWL>

This is not really important, 
but since it was brought up on R-help, we might as well 
clean it up now :

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
    ChinShCh> ....

    ChinShCh> A related question -- are NAs and NaNs supposed to
    ChinShCh> be the same in R?  If they are not, wouldn't it be
    ChinShCh> more appropriate for var(1) to return NaN 
    ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
    ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
    ChinShCh> denote a missing value, and var(1) is not
    ChinShCh> missing.)

    MM> yes, I think you are right 
    MM> (and it would be the same as S-plus 6.0 does
    MM>  so there, the difference between NaN and NA
    MM>  is less visible since "NaN" are printed as "NA").

We currently say explicitly (in the help file)
that  var(), cor() and cov() return NA when there's only one
observation.

But given the above, I don't see why we should be more exact and
return "NaN" instead.  This is not back-compatible in the strict
sense, but   is.na(var(1))  of course will still be true and I
cannot imagine why the difference between NA and NaN should
matter some user's code.  
If it did, his/her code would work differently in R and S-plus.

If I don't hear arguments against, I will change these to return
NaN as suggested and S-plus compatibly.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  5 17:00:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 5 Aug 2002 17:00:34 +0100 (BST)
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.40515.428879.709115@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0208051651560.27498-100000@gannet.stats>

For numeric vectors, `NA' is more precise than `NaN', although
is.na/is.nan obfuscate this.

On IEC60559 (aka, incorrectly, IEE754) machines here is a large class of
values which are NaN.  A small subclass of these are NA and are printed
specially.

On other systems, there is a single representation for NA and NaN.

So your proposed change will give different results on different
platforms, a really bad idea and I hope enough to scupper it.

In any case, statistically var(1) is a missing value, whatever the
conventional formula gives in IEC60559 arithmetic.

[The original problem is a faulty compiler: see my post to R-devel
yesterday.]

Brian

On Mon, 5 Aug 2002, Martin Maechler wrote:

> This is not really important,
> but since it was brought up on R-help, we might as well
> clean it up now :
>
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> >>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
>     ChinShCh> ....
>
>     ChinShCh> A related question -- are NAs and NaNs supposed to
>     ChinShCh> be the same in R?  If they are not, wouldn't it be
>     ChinShCh> more appropriate for var(1) to return NaN
>     ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
>     ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
>     ChinShCh> denote a missing value, and var(1) is not
>     ChinShCh> missing.)
>
>     MM> yes, I think you are right
>     MM> (and it would be the same as S-plus 6.0 does
>     MM>  so there, the difference between NaN and NA
>     MM>  is less visible since "NaN" are printed as "NA").
>
> We currently say explicitly (in the help file)
> that  var(), cor() and cov() return NA when there's only one
> observation.
>
> But given the above, I don't see why we should be more exact and
> return "NaN" instead.  This is not back-compatible in the strict
> sense, but   is.na(var(1))  of course will still be true and I
> cannot imagine why the difference between NA and NaN should
> matter some user's code.
> If it did, his/her code would work differently in R and S-plus.
>
> If I don't hear arguments against, I will change these to return
> NaN as suggested and S-plus compatibly.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Aug  5 17:42:49 2002
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 5 Aug 2002 09:42:49 -0700 (PDT)
Subject: Problems with gcc-3.1 -O2 on Solaris
In-Reply-To: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>
Message-ID: <Pine.GSO.4.05.10208050930580.6582-100000@tajo.ucsd.edu>

On Sat, 3 Aug 2002 ripley@stats.ox.ac.uk wrote:

> I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
> systems (not the one I usually use).  We have seen a report of
> this before (Chuck Berry, 17 July 2002).
> 
> The symptom is that make check fails with var(1) being NaN not NA.  The
> underlying cause is that as.double(NA) is NaN.
> 
> It can be solved by compiling arithmetic.c without -O2.
> 
> Another installation with a single-processor UltraSparc 1 works correctly.
> My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

FWIW, the specific problem seems to be with 

static const int hw = 0;
static const int  lw = 1;

and their use in array style indexing like this:

	y.word[lw] == 1954
	y.word[lw] != 1954

R passes 'make check' on my Solaris 8 Blade 100 with -O2 when *either*
'const' is dropped or ' *(y.word + lw) == 1954 ' style indexing is used.

Chuck

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Mon Aug  5 21:35:04 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Mon, 5 Aug 2002 22:35:04 +0200 (MET DST)
Subject: close.screen (PR#1878)
Message-ID: <200208052035.WAA18783@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.5.1
OS: Linux
Submission from: (NULL) (132.180.72.150)


Hi,

As a user it is not obvious to me why
"close.screen" should return a warning message in 

split.screen(figs=c(1,2))
i <- 2  
screen(i)
close.screen(i)

whereas no warning message appears for i <- 1.


In fact, the warning message appears since the condition
   .split.valid.screens >  temp
in close.screen is not satisfied by any element of .split.valid.screens

Replacing 

   if (temp %in% n) 
       temp <- min(.split.valid.screens[.split.valid.screens > 
           temp])
   if (temp > max(.split.valid.screens)) 
       temp <- min(.split.valid.screens)

by

   if (temp > max(.split.valid.screens)) 
      temp <- min(.split.valid.screens)
   else
      if (temp %in% n) 
         temp <- min(.split.valid.screens[.split.valid.screens > 
             temp])

should avoid the warning message without any other changings in the
functionality of close.screen.

Cheers,
Martin




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gordong@epa.nsw.gov.au  Tue Aug  6 00:39:14 2002
From: gordong@epa.nsw.gov.au (gordong@epa.nsw.gov.au)
Date: Tue, 6 Aug 2002 01:39:14 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208052339.BAA19235@pubhealth.ku.dk>

		[this message needed manual improvement by the mailing list
		 administrator since it was `HTMLified' .. ``please do not'']


Apologies for bothering you about a fairly trivial matter. I have been
getting some inconsistencies with the display digits in R V1.5.  I have been
using the hypergeometric distribution function, and have found that when
printing out the results from this function the display does not seem to
correspond to the number of digits requested in the options settings. Maybe
this indicates that the vector hasn't been generated in the proper way, or
something, but I thought I'd report it all the same.

[Previously saved workspace restored]

> sqrt(2)
[1] 1.414214
> options(digits=4)
> sqrt(2)
[1] 1.414
> options(digits=3)
> for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> sqrt(2)
[1] 1.41
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> options(digits=4)
> temp
 [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
[10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
[19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
[28] 1.00000 1.00000 1.00000
> sqrt(2)
[1] 1.414
> x<-sqrt(2)
> x
[1] 1.414

While I'm writing, I'd like to thank all of you who are working on this R
project. I think it is very valuable work. I have a friend who after working
as a computer consultant for many years had to retire after having a stroke
which left him unaffected mentally but without the use of his left hand. He
now lives on an invalid pension, and has gone back to doing scientific work
in his retirement. There is no way he could afford commercial software. R
has given him the tools to do good quality graphics as required by journal
editors without which he would not have got his papers published. There must
be many people who have something to contribute but who work outside
institutions and don't have the means to purchase commercial licences. And
Third World countries should benefit greatly.

						Regards,

							Geoff Gordon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 07:33:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 07:33:44 +0100 (BST)
Subject: options(digits) (PR#1879)
In-Reply-To: <200208052339.BAA19235@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208060726530.29814-100000@gannet.stats>

On Tue, 6 Aug 2002 gordong@epa.nsw.gov.au wrote:

> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.

Could you point out where it does not give the number of digits requested?
When you print out a vector R uses the same number of decimal places for
all entries, so one entry will have the number of significant digits
requested, but others may have more.

BTW, your example does not create temp, and you haven't told us the
platorm (as created by bug.report).

>
> [Previously saved workspace restored]
>
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug  6 07:58:54 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Aug 2002 08:58:54 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208060658.IAA20295@pubhealth.ku.dk>

gordong@epa.nsw.gov.au wrote:
> 
>                 [this message needed manual improvement by the mailing list
>                  administrator since it was `HTMLified' .. ``please do not'']
> 
> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.
> 
> [Previously saved workspace restored]
> 
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

That's not a bug. R prints the number of significant digits, as
expected.
For the second element in your vector temp, there are four sifnificant
digits printed:
the "3448" within 0.03448.

Just try some examples:

 0.123456789   # [1] 0.1234568, seven significant digits
 options(digits=4) 
 0.123456789   # [1] 0.1235, as expected
 0.001234567   # [1] 0.001235, still 4 significant digits

So, I cannot see any bug.

Uwe Ligges


> While I'm writing, I'd like to thank all of you who are working on this R
> project. I think it is very valuable work. I have a friend who after working
> as a computer consultant for many years had to retire after having a stroke
> which left him unaffected mentally but without the use of his left hand. He
> now lives on an invalid pension, and has gone back to doing scientific work
> in his retirement. There is no way he could afford commercial software. R
> has given him the tools to do good quality graphics as required by journal
> editors without which he would not have got his papers published. There must
> be many people who have something to contribute but who work outside
> institutions and don't have the means to purchase commercial licences. And
> Third World countries should benefit greatly.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Aug  6 09:58:40 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 6 Aug 2002 10:58:40 +0200 (MET DST)
Subject: You requested this report (PR#1880)
Message-ID: <200208060858.KAA21847@pubhealth.ku.dk>

Hi guys,

I am planning to let my students do some simulations regarding the
bias of the sample standard deviation.  The following function is
pretty standard (so I hope :) ):

> sim <- function(nrng, replic, true.s, random, ...){
+   res <- NULL
+   for(n in nrng){
+     data <- matrix(random(n*replic,...), ncol=replic)
+     val <- sqrt(apply(data, 2, var))
+     res <- rbind(res,
+                  cbind(bias=val-true.s, n=n))
+   }
+   res
+ }

It takes a vector of sample sizes, a number (the number of
replications we want to simulate), the true value of the standard
deviation and a function that generates the random number (which may
depend on additional paramters).  So let's try this:

> nrng <- c(2,4,8,16,32,64)
> replic <- 500
> true.s <- 2
> tmp <- sim(nrng, replic, true.s, rnorm, sd = 2)

Yes, seems to work.  Now I thought of perhaps creating a list of
several scenarios (random numbers) and loop over it.  So I tried:

> dist <- list(list(rnorm, true.s = 2, sd=2),
+              list(rexp, true.s = 1)
+              )

Followed by

> res <- sim(nrng, replic, dist[[1]][2], dist[[1]][1], dist[[1]][-c(1,2)])
Error in as.vector(data) : couldn't find function "random"

O.k., this doesn't work.  So let us try:

> res <- sim(nrng, replic, dist[[1]][2], as.function(dist[[1]][1]), dist[[1]][-c(1,2)])
Error in as.function.default(dist[[1]][1]) : 
        invalid body argument for "function"
Should NEVER happen; please bug.report() [mkCLOSXP]

No idea why you consider this a bug. :)  I would have been willing to
put it down to my misuse of R.  But since you requested a bug report,
here it is.

Cheers,

        Berwin

BTW:  How can I actually do what I want to do?  I realise that I am
probably on a completely wrong track regarding the passing of the
... parameters.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug  6 17:16:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 6 Aug 2002 18:16:22 +0200 (MET DST)
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
Message-ID: <200208061616.SAA26682@pubhealth.ku.dk>

# polygon ignores requests to have its border transparent, look at
par(bg="transparent")
plot(c(0, 3), 0:1)
polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)

# a quick fix for erase.screen() is the following
erase.screen <-
function (n = .split.cur.screen)
{
    if (!exists(".split.screens", envir = .GlobalEnv))
        return(FALSE)
    if (!(n %in% .split.valid.screens) && n != 0)
        stop("Invalid screen number\n")
    old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
        0)
        .split.screens[[n]]$fig
    else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
    on.exit(par(old))
    par(new = TRUE)
    plot.new()
    # bug in polygon, ignores border="transparent"
    # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)  
    rect(0, 0, 1, 1, col=0, border=0)
    par(new = TRUE)
    invisible()
}

as borders are overlapping between subscreens, erasing one subscreen will
set parts of borders of neighbor subscreens to background color. I guess this
is better than not beeing able to erase the borders at all. However, if border
shall not be erased have 
  rect(0, 0, 1, 1, col=0, border="tranparent")
instead. Alternatively we could introduce a new parameter border= to
erase.screen(), screen() and split.screen()

Best regards


Jens Oehlschlgel



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 18:47:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 18:47:56 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <200208061616.SAA26682@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>

Strangely, it works without the first line, which is the default on a
windows() device.

There's a bug in GA_Polyline (not Polygon) stemming from the changes to
graphics device internals at 1.4.0, it seems.  It is transparent polylines
one cannot draw, and only on the windows() device.

You don't give an example for erase.screen: does this need a separate fix?

On Tue, 6 Aug 2002 oehl_list@gmx.de wrote:

> # polygon ignores requests to have its border transparent, look at
> par(bg="transparent")
> plot(c(0, 3), 0:1)
> polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
> polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
> polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)
>
> # a quick fix for erase.screen() is the following
> erase.screen <-
> function (n = .split.cur.screen)
> {
>     if (!exists(".split.screens", envir = .GlobalEnv))
>         return(FALSE)
>     if (!(n %in% .split.valid.screens) && n != 0)
>         stop("Invalid screen number\n")
>     old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
>         0)
>         .split.screens[[n]]$fig
>     else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
>     on.exit(par(old))
>     par(new = TRUE)
>     plot.new()
>     # bug in polygon, ignores border="transparent"
>     # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
>     rect(0, 0, 1, 1, col=0, border=0)
>     par(new = TRUE)
>     invisible()
> }
>
> as borders are overlapping between subscreens, erasing one subscreen will
> set parts of borders of neighbor subscreens to background color. I guess this
> is better than not beeing able to erase the borders at all. However, if border
> shall not be erased have
>   rect(0, 0, 1, 1, col=0, border="tranparent")
> instead. Alternatively we could introduce a new parameter border= to
> erase.screen(), screen() and split.screen()
>
> Best regards
>
>
> Jens Oehlschlgel
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug  7 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Aug 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208070515.g775F5r22107@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1840 *
Subject: predict() still not yet "safe"..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 26 Jul 2002 20:11:26 +0200
* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1717 *
Subject: Problem in optim(method="L-BFGS-B")
From: polzehl@wias-berlin.de
Date: Fri, 28 Jun 2002 11:53:13 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1863 *
Subject: glm crashes with "Illegal instruction"
From: tkoulis@math.uwaterloo.ca
Date: Thu, 1 Aug 2002 22:15:19 +0200 (MET DST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1879 *
Subject: options(digits)
From: Gordon Geoff <gordong@epa.nsw.gov.au>
Date: Tue, 6 Aug 2002 09:36:57 +1000 
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
* PR# 1881 *
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border
From: oehl_list@gmx.de
Date: Tue, 6 Aug 2002 18:15:09 +0200 (MEST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Wed Aug  7 16:49:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Wed, 7 Aug 2002 17:49:22 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>
Message-ID: <13936.1028735362@www33.gmx.net>


Dear Brian,

thank you for your answer.

> There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> graphics device internals at 1.4.0, it seems.  It is transparent polylines
> one cannot draw, and only on the windows() device.
> 
> You don't give an example for erase.screen: does this need a separate fix?

The original call to polygon in erase.screen() did use border=NA. I did not
find documentation saying what an NA color means !? Testing a bit, I find
rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
erase.screen() rather should also erase the borders in background color AS
THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
is no need to use rect() instead of polygon().

Best


Jens


oldpar <- par(no.readonly=TRUE)
par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# now switching to right screen ERASES border of right screen in Prototype
(S+2000)
# thus the right border of the left box gets deleted
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 17:14:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 17:14:22 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <13936.1028735362@www33.gmx.net>
Message-ID: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>

On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:

>
> Dear Brian,
>
> thank you for your answer.
>
> > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > one cannot draw, and only on the windows() device.
> >
> > You don't give an example for erase.screen: does this need a separate fix?
>
> The original call to polygon in erase.screen() did use border=NA. I did not
> find documentation saying what an NA color means !? Testing a bit, I find
> rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> erase.screen() rather should also erase the borders in background color AS
> THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> is no need to use rect() instead of polygon().

NA is a colour that is the same as "transparent".  Unfortunately, border=0
for polygon() is documented to mean `do not draw', but that is not what
happens.  Looks like this needs sorting out.

Thanks for drawing it to our attention.

>
> Best
>
>
> Jens
>
>
> oldpar <- par(no.readonly=TRUE)
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # now switching to right screen ERASES border of right screen in Prototype
> (S+2000)
> # thus the right border of the left box gets deleted
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 18:15:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 18:15:51 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>

Follow up.  The reason your example does not work is that par("bg") is
transparent (as the help page warns).  It does work if par(bg="white") is
set.  Plotting a polygon first fills the whole area, then overplots the
border (if both cases, for opaque colours).

On Wed, 7 Aug 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:
>
> >
> > Dear Brian,
> >
> > thank you for your answer.
> >
> > > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > > one cannot draw, and only on the windows() device.
> > >
> > > You don't give an example for erase.screen: does this need a separate fix?
> >
> > The original call to polygon in erase.screen() did use border=NA. I did not
> > find documentation saying what an NA color means !? Testing a bit, I find
> > rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> > erase.screen() rather should also erase the borders in background color AS
> > THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> > changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> > is no need to use rect() instead of polygon().
>
> NA is a colour that is the same as "transparent".  Unfortunately, border=0
> for polygon() is documented to mean `do not draw', but that is not what
> happens.  Looks like this needs sorting out.
>
> Thanks for drawing it to our attention.
>
> >
> > Best
> >
> >
> > Jens
> >
> >
> > oldpar <- par(no.readonly=TRUE)
> > par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> > figs <- rbind(
> > c( 0.0, 0.5, 0.0, 1.0)  # left
> > , c( 0.5, 1.0, 0.0, 1.0)  # right
> > )
> > dimnames(figs) <- list(
> > c("left","right" )
> > , c("xlow","xhigh","ylow","yhigh")
> > )
> > screens <- split.screen(figs)
> >
> > par(usr=c(0, 1, 0, 1))
> >
> > #plot a box on border of left screen in some color
> > box(col=5)
> >
> > # now switching to right screen ERASES border of right screen in Prototype
> > (S+2000)
> > # thus the right border of the left box gets deleted
> > screen(2)
> >
> > close.screen(all.screens=TRUE)
> > par(oldpar)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Aug  7 19:31:30 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Wed, 7 Aug 2002 20:31:30 +0200 (MET DST)
Subject: dput to full filesystem is silent (PR#1884)
Message-ID: <200208071831.UAA05981@pubhealth.ku.dk>

Full_Name: vince carey
Version: 1.5.1
OS: solaris 2.8
Submission from: (NULL) (134.174.249.59)


as noted.  dput wrote a length 0 file.  had there been
a warning i could have taken steps to create space before
trying to save.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Russell-Lenth@uiowa.edu  Wed Aug  7 20:17:41 2002
From: Russell-Lenth@uiowa.edu (Russell-Lenth@uiowa.edu)
Date: Wed, 7 Aug 2002 21:17:41 +0200 (MET DST)
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <200208071917.VAA06122@pubhealth.ku.dk>

Full_Name: Russ Lenth
Version: 1.5.0
OS: Windows
Submission from: (NULL) (128.255.25.236)


If you use read.table with a connection to stdin(), the first
5 lines of input seem not to be accepted.  See examples below.
Did NOT have the same problem with scan().

> version
        _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R  

> read.table(stdin(),head=T) -> junk
1: a b c
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
2: 16 17 18
3: 19 20 21
4: 22 23 24
5: 
> junk
   a  b  c
1 13 14 15
2 16 17 18
3 19 20 21
4 22 23 24

> read.table(stdin()) -> junk
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
1: 16 17 18
2: 19 20 21
3: 22 23 24
4: 
> junk
  V1 V2 V3
1 16 17 18
2 19 20 21
3 22 23 24

> junk <- scan()
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items

> junk <- scan(stdin())
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Aug  7 20:58:35 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 7 Aug 2002 15:58:35 -0400
Subject: ESS assigns .Last.value to the wrong place in R
Message-ID: <15697.31723.719742.514063@gargle.gargle.HOWL>

I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
still not fixed in ESS 5.1.23, and I think some resolution is needed.

When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
which is *not* where R normally stores it (R stores it in package:base).
When this copy becomes stale it leads to wrong answers.  The bug is in
essd-r.el, lines 63-64:

    (ess-retr-lastvalue-command
     . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

which should be changed (as I have done on my machine) to:

    (ess-retr-lastvalue-command
     . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

Here's an example of how things can go wrong:
R> find(".Last.value")
   [1] "package:base"
R> 0+1
   [1] 1
R> .Last.value
   [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
   [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
   [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
   [1] ".GlobalEnv"   "package:base"


Whenever I bring this up, a debate begins over who should change (ESS or R).
In particular, my solution will not work if package:base is "sealed".  Here's
the tail end of our last discussion:

Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
> ... The effect of sealing package:base from the user means that R will have
> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>
> Net result, ESS does not change behavior, R has already promised to
> change behavior.

and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
> Not at all.  Sealing base does not mean that .Last.value needs to be
> stored in the user's workspace.  The standard approach would be to use
> dynamic variables which are in fact functions with internal state
> (typically maintained in their environments).  E.g., .libPaths() in R
> 1.4 or better illustrates the idea.  There might be a .Last.value()
> along these lines.  The most prominent example is options() which is
> used for manipulating .Options (see also the R FAQ): this is currently
> visible to the user but it really should not.
> 
> Let me discuss our strategy re .Last.value with some r-core members.

Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
> I may be in way over my head here.  But, I think there is a 4th solution.
> Have ESS save .Last.value as some other variable in .GlobalEnv like
> .Last.value.saved.  That way .Last.value would not be hidden, and it could
> still be retreived if someone had done a help() or whatever.

Any more thoughts?
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 21:25:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 21:25:50 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <200208071917.VAA06122@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208072124130.24674-100000@gannet.stats>

stdin() from a terminal is not a file, nor is it a standard connection.
So this is not really a bug.

In particular, as used by you it does to have pushback.

On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:

> Full_Name: Russ Lenth
> Version: 1.5.0
> OS: Windows
> Submission from: (NULL) (128.255.25.236)
>
>
> If you use read.table with a connection to stdin(), the first
> 5 lines of input seem not to be accepted.  See examples below.
> Did NOT have the same problem with scan().
>
> > version
>         _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > read.table(stdin(),head=T) -> junk
> 1: a b c
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 2: 16 17 18
> 3: 19 20 21
> 4: 22 23 24
> 5:
> > junk
>    a  b  c
> 1 13 14 15
> 2 16 17 18
> 3 19 20 21
> 4 22 23 24
>
> > read.table(stdin()) -> junk
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 1: 16 17 18
> 2: 19 20 21
> 3: 22 23 24
> 4:
> > junk
>   V1 V2 V3
> 1 16 17 18
> 2 19 20 21
> 3 22 23 24
>
> > junk <- scan()
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
> > junk <- scan(stdin())
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From larsendr@missouri.edu  Wed Aug  7 21:50:34 2002
From: larsendr@missouri.edu (larsendr@missouri.edu)
Date: Wed, 7 Aug 2002 22:50:34 +0200 (MET DST)
Subject: Change in NA_REAL behavior (PR#1886)
Message-ID: <200208072050.WAA06388@pubhealth.ku.dk>

Full_Name: David Larsen
Version: 1.5.1
OS: Redhat 7.2, w98, w2000
Submission from: (NULL) (128.206.66.65)


I have c code that produces vector sequences for plotting.  I use NA_REAL to
create an NA that will pass back to R to break the line.  This code worked fine
upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
cygwin and gcc to compile the code which I updated in July along with R-1.5.1 
The code includes R.h, Rinternals.h, and Rmath.h 

Using this same configuration this has worked for the last year.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Bartz@FMR.COM  Wed Aug  7 22:33:55 2002
From: Kevin.Bartz@FMR.COM (Bartz, Kevin)
Date: Wed, 7 Aug 2002 17:33:55 -0400
Subject: FW: [R] [ and setMethod conflict?
Message-ID: <763C275E6A1C2248AFD475237AD6135BE7CFA7@MSGBOS576NTS.fmr.com>

John Chambers suggested that I forward this thread (first posted to r-help)
along to r-devel...

Thanks,

Kevin

-----Original Message-----
From: John Chambers [mailto:jmc@research.bell-labs.com] 
Sent: Tuesday, August 06, 2002 6:31 PM
To: Bartz, Kevin
Cc: r-help@stat.math.ethz.ch
Subject: Re: [R] [ and setMethod conflict?


Definitely something funny going on, but perhaps a little less sweeping
than your comments suggest.

No explanation at the moment, but a couple of clues.

1.  The problem doesn't seem to arise unless the data frame is large
enough.  I parametrized the 5000 rows in your example and couldn't get
the bizarre behavior until the number of rows was larger than 1000.

2.  There is some reason to think that nested "[" expressions are
related.  After rewriting your testFunc as follows, the random errors
seemed to go away.

testFunc <- function(cur) {
    ii <- order(cur[,1])
  sorted <- cur[ii,]
    ll <- !is.na(sorted[,1])
   sorted[ll,]
 }
(the change is just to pull out the subset expressions that were
arguments to other "[" expressions.)

I'm not an expert on R internals, but the combination of these might
suggest garbage collection taking place in nested calls to the dispatch
code for "[".

John Chambers

PS:  this thread might be more suited to r-devel than r-help.


"Bartz, Kevin" wrote:
> 
> I noticed this oddity about [ and setMethod.
> 
> First, I define testFunc, which sorts a data frame by the first column and
> returns the entries that aren't NAs, and testIt, which runs testFunc
> repeatedly on a random large data frame, each time saving the return into
a
> dummy placeholder (for demonstration's sake).
> 
> > require(methods)
> Loading required package: methods
> [1] TRUE
> > testFunc <- function(cur) {
> +   sorted <- cur[order(cur[,1]),]
> +   sorted[!is.na(sorted[,1]),]
> + }
> > testIt <- function(num)
> +   for (i in 1:num) {
> +     cat("iteration", i, "...\n")
> +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> +   }
> 
> Let's test out testIt.
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> iteration 3 ...
> iteration 4 ...
> iteration 5 ...
> iteration 6 ...
> iteration 7 ...
> iteration 8 ...
> iteration 9 ...
> iteration 10 ...
> 
> So far, no problems. Next, I define myClass.
> 
> > setClass("myClass", representation(mySlot = "numeric"))
> [1] "myClass"
> > setMethod("[", signature(x = "myClass"),
> +           function(x, i, j, drop) "[ for myClass")
> [1] "["
> 
> Again, everything is fine. I've expanded [ to handle objects of class
> myClass. But when we attempt to use testIt now, problems emerge:
> 
> > testIt(10)
> iteration 1 ...
> Error in "[.data.frame"(cur, order(cur[, 1]), ) :
>         unused argument(s) (.Method ...)
> 
> Maybe that was just a fluke. Trying again, we get:
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> Error in sorted[, 1] : incorrect number of dimensions
> 
> A different message every time, and the error seems no bug of mine (a
> .Method argument? What is that?). In fact, testIt produces a seemingly
> random response from R on each subsequent attempt--everything from
> successful execution to similarly ambiguous errors to a process-killing
"Bus
> Error."
> 
> All in all, it seems that once I've defined a new method for [ I can no
> longer count on it to operate properly in any context.
> 
> Is this the intended behavior? And if so, is there any way I can have one
> class present that overloads [ and still use [ to reliably subset data
> frames?
> 
> Thanks,
> 
> Kevin
> 
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Kiermeier@adelaide.edu.au  Thu Aug  8 04:51:24 2002
From: Andreas.Kiermeier@adelaide.edu.au (Andreas.Kiermeier@adelaide.edu.au)
Date: Thu, 8 Aug 2002 05:51:24 +0200 (MET DST)
Subject: Backslash in character string (PR#1887)
Message-ID: <200208080351.FAA07464@pubhealth.ku.dk>

Full_Name: Andreas Kiermeier
Version: 1.5.1
OS: NT4.0
Submission from: (NULL) (129.127.41.28)


R appears not to be able to print a single backslash in a string, see example
session below.  The same happens on Solaris 2.6 using R 1.5.1.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> "\"
Error: syntax error
> "\\"
[1] "\\"
> "\lambda"
[1] "lambda"
> "\\lambda"
[1] "\\lambda"
> "\134lambda"
[1] "\\lambda"


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:30:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:30:21 +0100 (BST)
Subject: Backslash in character string (PR#1887)
In-Reply-To: <200208080351.FAA07464@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080728270.25351-100000@gannet.stats>

This is not an error, but intentional.
Use cat to print unescaped output.

Please use R-help to ask questions about how to do things in R, and
consult the FAQ about what a bug is.

On Thu, 8 Aug 2002 Andreas.Kiermeier@adelaide.edu.au wrote:

> Full_Name: Andreas Kiermeier
> Version: 1.5.1
> OS: NT4.0
> Submission from: (NULL) (129.127.41.28)
>
>
> R appears not to be able to print a single backslash in a string, see example
> session below.  The same happens on Solaris 2.6 using R 1.5.1.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > "\"
> Error: syntax error
> > "\\"
> [1] "\\"
> > "\lambda"
> [1] "lambda"
> > "\\lambda"
> [1] "\\lambda"
> > "\134lambda"
> [1] "\\lambda"
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:40:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:40:37 +0100 (BST)
Subject: Change in NA_REAL behavior (PR#1886)
In-Reply-To: <200208072050.WAA06388@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080733440.25351-100000@gannet.stats>

There is nothing here to reproduce the claimed bug.

NA_REAL is a reference to a constant in the R.dll, and is unchanged for
a long time.

Since R still works, the problem is not occurring for those who compile R
and its packages under the recommended compiler and tools.

I note you use `cygwin and gcc'.  The documentation has said for a long
time that compilation with Cygwin is not supported.

On Wed, 7 Aug 2002 larsendr@missouri.edu wrote:

> Full_Name: David Larsen
> Version: 1.5.1
> OS: Redhat 7.2, w98, w2000
> Submission from: (NULL) (128.206.66.65)
>
>
> I have c code that produces vector sequences for plotting.  I use NA_REAL to
> create an NA that will pass back to R to break the line.  This code worked fine
> upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
> windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
> cygwin and gcc to compile the code which I updated in July along with R-1.5.1
> The code includes R.h, Rinternals.h, and Rmath.h
>
> Using this same configuration this has worked for the last year.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Thu Aug  8 08:38:30 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Thu, 8 Aug 2002 09:38:30 +0200 (MET DST)
Subject: Ops.data.frame fails with second arg a list (PR#1889)
Message-ID: <200208080738.JAA08451@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: linux-gnu 
Submission from: (NULL) (130.95.16.114)


Comparison of a data frame with a list fails with an error that 
looks to be due to a typo in Ops.data.frame:

> d <- data.frame(1:10)
> d > list(5)
Error in Ops.data.frame(d, list(5)) : Object "scalar" not found

Code has:
        rscalar <- length(e2) <= 1
        if (isList(e2)) {
            if (scalar) 

 and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Baz




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 09:37:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 10:37:12 +0200
Subject: Ops.data.frame fails with second arg a list (PR#1889)
In-Reply-To: <200208080738.JAA08451@pubhealth.ku.dk>
References: <200208080738.JAA08451@pubhealth.ku.dk>
Message-ID: <x2y9bhlpaf.fsf@biostat.ku.dk>

b.rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.5.0
> OS: linux-gnu 
> Submission from: (NULL) (130.95.16.114)
> 
> 
> Comparison of a data frame with a list fails with an error that 
> looks to be due to a typo in Ops.data.frame:
> 
> > d <- data.frame(1:10)
> > d > list(5)
> Error in Ops.data.frame(d, list(5)) : Object "scalar" not found
> 
> Code has:
>         rscalar <- length(e2) <= 1
>         if (isList(e2)) {
>             if (scalar) 
> 
>  and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Yep. Thanks. (Still there in 1.5.1, and in r-devel).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 10:25:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 10:25:11 +0100 (BST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
In-Reply-To: <200206280953.LAA09404@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208081022120.27895-100000@gannet.stats>

I can't reproduce this.  I get (on Windows R 1.5.1)

iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 26.807136
iter   12 value 26.525653
iter   13 value 25.553618
iter   14 value 25.424473
iter   15 value 25.312266
iter   16 value 25.310750
iter   17 value 25.309939
iter   18 value 25.307804
iter   19 value 25.307030
iter   20 value 25.302144
iter   21 value 25.294243
iter   22 value 25.283499
iter   23 value 25.276034
iter   24 value 25.274281
iter   25 value 25.273023
iter   26 value 25.272970
iter   27 value 25.272845
iter   28 value 25.272737
iter   29 value 25.272729
iter   30 value 25.272662
iter   31 value 25.272652
iter   32 value 25.272652
iter   33 value 25.272652
final  value 25.272652
converged


However, Linux gives similar problems.  The underlying cause is that you
are using finite-difference approximations and not scaling your variables
as described on the help page.


On Fri, 28 Jun 2002 polzehl@wias-berlin.de wrote:

> Full_Name: Jrg Polzehl
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (193.175.148.198)
>
>
> When calculating MLE's in a variance component model using constrained
> optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
> behaviour in cases where
> the likelihood function was evalueted at the constraint. Parameters and value of
> the
> function at the constraint seem to be returned in this case.
> I've tried to reproduce the effect in a very simple example:
>
> ###############################################################################
> fn <- function(par,x,y){
> ind <- 1:(length(x)/2)
> alpha <- par[1]
> beta <- par[2]
> sigmaq1 <- par[3]
> sigmaq2 <- par[4]
> sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
> }
>
> set.seed(3)
> n <- 5
> x1 <- runif(n)
> x2 <- runif(n)
> y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
> x <- c(x1,x2)
> par <- c(0,0,1,1)
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
> ####################################################################################
>
> Note that the effect vanishes in case of other constraints for par[3:4].
>
> here is what happens with trace=1 :
>
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
> iter    0 value 121.713156
> iter    1 value 98.361657
> iter    2 value 66.561121
> iter    3 value 57.491023
> iter    4 value 48.193824
> iter    5 value 42.298821
> iter    6 value 37.554272
> iter    7 value 33.741241
> iter    8 value 31.592504
> iter    9 value 28.856846
> iter   10 value 27.450574
> iter   11 value 4118799.069149
> final  value 4118799.069149
> converged
> ----------------------------------------------------------------------------------
> and the essential part with trace = 6 :
>
> 4  variables are free at GCP on iteration 11
> LINE SEARCH 1 times; norm of step = 1.19245
> X = -3.34057 6.34639 1.18546 15.2136
> G = -1.08654 -1.14056 1.42527 -0.307525
> Iteration    11
>
> ---------------- CAUCHY entered-------------------
>
> There are 1  breakpoints
>
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the next break point =  8.3175e-001
> Distance to the stationary point =  1.4763e-001
>
> GCP found in this segment
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the stationary point =  1.4763e-001
> Cauchy X =  -3.18017 6.51477 0.97505 15.259
>
> ---------------- exit CAUCHY----------------------
>
> 4  variables are free at GCP on iteration 12                #
> !!!!!!!!!!!!!!!!!!!!!!
> LINE SEARCH 0 times; norm of step = 2.30637
> X = -3.90499 7.26709 1e-006 16.8712
> G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468
>
> iterations 12
> function evaluations 15
> segments explored during Cauchy searches 12
> BFGS updates skipped 0
> active bounds at final generalized Cauchy point 0
> norm of the final projected gradient 4.1147e+009
> final function value 4.1188e+006
>
> X = -3.90499 7.26709 1e-006 16.8712
> F = 4.1188e+006
> final  value 4118799.069149
> converged
>
>
> See especially the line marked with !!!!!!!!!!
>
> Regards,
>
> Jrg Polzehl
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Aug  8 13:02:44 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 08 Aug 2002 08:02:44 -0400
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>

Prof. Ripley,

In that case, is it possible to check for such things and give an error in
read.table?  (Or perhaps warn against such misuse in the help file...)

Regards,
Andy

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, August 07, 2002 4:26 PM
> To: Russell-Lenth@uiowa.edu
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: read.table ignores first 5 lines (PR#1885)
> 
> 
> stdin() from a terminal is not a file, nor is it a standard 
> connection.
> So this is not really a bug.
> 
> In particular, as used by you it does to have pushback.
> 
> On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:
> 
> > Full_Name: Russ Lenth
> > Version: 1.5.0
> > OS: Windows
> > Submission from: (NULL) (128.255.25.236)
> >
> >
> > If you use read.table with a connection to stdin(), the first
> > 5 lines of input seem not to be accepted.  See examples below.
> > Did NOT have the same problem with scan().
> >
> > > version
> >         _
> > platform i386-pc-mingw32
> > arch     i386
> > os       mingw32
> > system   i386, mingw32
> > status
> > major    1
> > minor    5.0
> > year     2002
> > month    04
> > day      29
> > language R
> >
> > > read.table(stdin(),head=T) -> junk
> > 1: a b c
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 2: 16 17 18
> > 3: 19 20 21
> > 4: 22 23 24
> > 5:
> > > junk
> >    a  b  c
> > 1 13 14 15
> > 2 16 17 18
> > 3 19 20 21
> > 4 22 23 24
> >
> > > read.table(stdin()) -> junk
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 1: 16 17 18
> > 2: 19 20 21
> > 3: 22 23 24
> > 4:
> > > junk
> >   V1 V2 V3
> > 1 16 17 18
> > 2 19 20 21
> > 3 22 23 24
> >
> > > junk <- scan()
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> > > junk <- scan(stdin())
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 13:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 13:33:30 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>

On Thu, 8 Aug 2002, Liaw, Andy wrote:

> Prof. Ripley,
>
> In that case, is it possible to check for such things and give an error in
> read.table?  (Or perhaps warn against such misuse in the help file...)

It is now warned about in the help file.

It's impossible to give a warning, as it is scan behaving differently
in one particular case, not going through the connections machinery so it
can give prompts.  On the other hand, at R level we don't know what
stdin() is.

The only way I see to fix this is inside scan().  That might be possible,
On the other hand, there really are easy workarounds if all the input is
available: just use readLines to a character vector and call read.table on
the result.

> read.table(textConnection(readLines()), header=T)
>  a b c
> 1 2 3
> 4 5 6
> 7 8 9
> 10 11 12
> 13 14 15
> 16 17 18
> 19 20 21
> 22 23 24
>
>    a  b  c
1  1  2  3
2  4  5  6
3  7  8  9
4 10 11 12
5 13 14 15
6 16 17 18
7 19 20 21
8 22 23 24

where I pasted in the first block (with the > prompts).  Rgui won't work
with this, though, another way in which stdin() is special.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug  8 14:19:07 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Aug 2002 15:19:07 +0200
Subject: ... / namespacing
In-Reply-To: <3067.1028802351@www57.gmx.net>
References: <3067.1028802351@www57.gmx.net>
Message-ID: <15698.28619.195039.816746@gargle.gargle.HOWL>

(redirected to R-devel)

>>>>> "oehl" == oehl list <oehl_list@gmx.de>
>>>>>     on Thu, 8 Aug 2002 12:25:51 +0200 (MEST) writes:

	  <....>

    oehl> Furthermore I heard rumors about newnamespacing
    oehl> features. Is there already information on that?

- The  'R developers' website http://developer.r-project.org/
  has links to Luke Tierney's writeups (search "name space")

- Read the NEWS file of R-devel,
  conveniently off the  http://stat.ethz.ch/R-manual/  page.

- Install R-devel and read its source :-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mike.Prager@noaa.gov  Thu Aug  8 16:21:10 2002
From: Mike.Prager@noaa.gov (Mike.Prager@noaa.gov)
Date: Thu, 8 Aug 2002 17:21:10 +0200 (MET DST)
Subject: PR #1833 Clarification (PR#1890)
Message-ID: <200208081521.RAA13974@pubhealth.ku.dk>

This is (correctly) filed under "non-reproducible."

The corresponding notes say "solved by re-installing Windows (private 
comm)."  I would like to clarify that this was solved by re-installing the 
patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
itself.  Perhaps my original message was not clear.

I point this out because installing the patch takes only 5 minutes, and 
this might help future users who experience similar problems.

Thank you.


-- 
Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
NOAA Center for Coastal Fisheries and Habitat Research
Beaufort, North Carolina  28516
http://shrimp.ccfhrb.noaa.gov/~mprager/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Thu Aug  8 16:35:37 2002
From: russell-lenth@uiowa.edu (Russ Lenth)
Date: Thu, 08 Aug 2002 10:35:37 -0500
Subject: read.table ignores first 5 lines (PR#1885)
References: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>
Message-ID: <3D528FC9.7D3F829C@stat.uiowa.edu>

Gentlemen,

This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
a command like:

	read.table (textConnection(readLines()), head=T)

ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
(or paste) the data, then press Ctrl-D, and I've got what I want.  Under
Windows, however, I could not find a way to signal the end of the file (I tried
Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

I also confirmed that it's possible to have a statement like

	if (file == stdin()) ...

so, if it's possible to resolve the end-of-file issue, there is a way to make
read.table do what I want (if only in my own custom version of read.table).

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science      
The University of Iowa -- Iowa City, IA 52242  USA 
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/



ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 8 Aug 2002, Liaw, Andy wrote:
> 
> > Prof. Ripley,
> >
> > In that case, is it possible to check for such things and give an error in
> > read.table?  (Or perhaps warn against such misuse in the help file...)
> 
> It is now warned about in the help file.
> 
> It's impossible to give a warning, as it is scan behaving differently
> in one particular case, not going through the connections machinery so it
> can give prompts.  On the other hand, at R level we don't know what
> stdin() is.
> 
> The only way I see to fix this is inside scan().  That might be possible,
> On the other hand, there really are easy workarounds if all the input is
> available: just use readLines to a character vector and call read.table on
> the result.
> 
> > read.table(textConnection(readLines()), header=T)
> >  a b c
> > 1 2 3
> > 4 5 6
> > 7 8 9
> > 10 11 12
> > 13 14 15
> > 16 17 18
> > 19 20 21
> > 22 23 24
> >
> >    a  b  c
> 1  1  2  3
> 2  4  5  6
> 3  7  8  9
> 4 10 11 12
> 5 13 14 15
> 6 16 17 18
> 7 19 20 21
> 8 22 23 24
> 
> where I pasted in the first block (with the > prompts).  Rgui won't work
> with this, though, another way in which stdin() is special.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 16:35:56 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 17:35:56 +0200
Subject: Clarification (PR#1833)
In-Reply-To: <200208081521.RAA13974@pubhealth.ku.dk>
References: <200208081521.RAA13974@pubhealth.ku.dk>
Message-ID: <x2vg6ljrc2.fsf@biostat.ku.dk>

Mike.Prager@noaa.gov writes:

> This is (correctly) filed under "non-reproducible."

Unfortunately, your follow-up got filed as a new report because of the
space between PR and #. This one should end up in the right spot,
hopefully. 

> The corresponding notes say "solved by re-installing Windows (private 
> comm)."  I would like to clarify that this was solved by re-installing the 
> patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
> itself.  Perhaps my original message was not clear.
> 
> I point this out because installing the patch takes only 5 minutes, and 
> this might help future users who experience similar problems.
> 
> Thank you.
> 
> 
> -- 
> Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
> NOAA Center for Coastal Fisheries and Habitat Research
> Beaufort, North Carolina  28516
> http://shrimp.ccfhrb.noaa.gov/~mprager/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 16:46:58 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 16:46:58 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <3D528FC9.7D3F829C@stat.uiowa.edu>
Message-ID: <Pine.LNX.4.31.0208081644410.28652-100000@gannet.stats>

On Thu, 8 Aug 2002, Russ Lenth wrote:

> This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
> a command like:
>
> 	read.table (textConnection(readLines()), head=T)
>
> ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
> (or paste) the data, then press Ctrl-D, and I've got what I want.  Under
> Windows, however, I could not find a way to signal the end of the file (I tried
> Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
> argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

So was I.  I'm currently working on that, so it will in the next release.

I have some hope of fixing scan, but it is very complicated (I've already
spent a couple of hours on it).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Thu Aug  8 18:11:05 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Thu, 8 Aug 2002 19:11:05 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>
Message-ID: <3815.1028826665@www10.gmx.net>


> Follow up.  The reason your example does not work is that par("bg") is
> transparent (as the help page warns).  It does work if par(bg="white") is
> set.  Plotting a polygon first fills the whole area, then overplots the
> border (if both cases, for opaque colours).

I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
"transparent".
BUT I just discovered that my replication code does not show what I wanted
to show if R is started newly. 

# THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
par(bg="transparent")
# without SETTING background color to transparent THE FOLLOWING CODE
# DOES NOT REPLICATE THE BUG
# HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
THE SAME

oldpar <- par(no.readonly=TRUE)

par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# IN R I GET AN UNDESIRED BLACK BORDER HERE
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


Do you see my problem?
Best 


Jens



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R






-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 18:22:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 18:22:06 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <3815.1028826665@www10.gmx.net>
Message-ID: <Pine.LNX.4.31.0208081818350.28824-100000@gannet.stats>

That's the bug in GA_Polyline I have already fixed, so I no longer see it.

On Thu, 8 Aug 2002 oehl_list@gmx.de wrote:

>
> > Follow up.  The reason your example does not work is that par("bg") is
> > transparent (as the help page warns).  It does work if par(bg="white") is
> > set.  Plotting a polygon first fills the whole area, then overplots the
> > border (if both cases, for opaque colours).
>
> I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
> "transparent".
> BUT I just discovered that my replication code does not show what I wanted
> to show if R is started newly.
>
> # THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
> par(bg="transparent")
> # without SETTING background color to transparent THE FOLLOWING CODE
> # DOES NOT REPLICATE THE BUG
> # HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
> THE SAME
>
> oldpar <- par(no.readonly=TRUE)
>
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # IN R I GET AN UNDESIRED BLACK BORDER HERE
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> Do you see my problem?
> Best
>
>
> Jens
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
>
>
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From friendly@yorku.ca  Thu Aug  8 19:43:08 2002
From: friendly@yorku.ca (friendly@yorku.ca)
Date: 8 Aug 2002 18:43:08 -0000
Subject: Lisp-stat  and R?  [was: Re: Status?]
Message-ID: <20020808184308.146.qmail@hotspur.psych.yorku.ca>

John Fox (see below) raises important questions for
the Lisp-stat community (and perhaps the R community) to consider.
This message thread was not cross-posted to r-devel@lists.r-project.org,
so I do so now.

I have never been an active or particularly adept Lisp-stat programmer. But I  
have worked on or used several projects for which Lisp-stat seemed the ideal  
environment-- for implementing relatively portable, state-of-the-art  
applications, using dynamically-linked graphic windows to provide
and demonstrate leading-edge examples of highly-interctive environments
for the whole range from testing new ideas to delivering course content,
as has been done with Arc and ViSta.

My work with Forrest Young and Pedro Valero on ViSta implementations
of mosaic displays and other methods for categorical data has been
particularly gratifying, in that we've (well, largely Pedro) been able
to implement the kinds of interactive graphical analysis for contingency
tables that I always dreamed of.  This hinged on the built-in facilities
for object-oriented interactive graphic methods, abilities to link
graphic windows dynamically, and so forth, and Forrest's spreadplot
architecture for ViSta, which combines these facilities with a general
graph/window layout mechanism, so that all graph and text windows can
be made to work coherently.

But, as John points out, a number of people, formerly active in Lisp-stat
development have switched to R, for the reasons he outlines in his first
paragraph. I might add that for static graphs, and saving graphic
images, R now rivals, and, in some cases exceeds, what I have been
able to accomplish in SAS  -- but this (complete control of all graphic
parameters, text & math labels, etc.) is something that has always
been difficult and limited in Lisp-stat

On the other hand, R has very limited built-in facilities for
interactive graphics, and none that can be called 'dynamic'; nor does
it have any native GUI-building facilities, such as are used, with
great effect, in Arc and ViSta.  There is, however, a built-in mechanism
for R to interact with other software.  The Omega Project  
(http://www.omegahat.org) details some of these, and there are also
other similar efforts (e.g., R-ggobi)

So, from the core of folks in the union (or intersection) of 

Lisp-stat and R developers: is there anyone to respond to John's
challenge -- ``to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R''  I'll add a challenge of my own -- to incorportate
R modelling, static graphics and data manipulations into Lisp-stat.

-Michael


On Tue, 06 Aug 2002 14:37:15 -0400, John Fox said:

I've spoken over the past couple of months to several individuals who, like 

myself, have more or less left Lisp-stat for R. There are several obvious 

reasons for doing so: Lisp-stat seems moribund, while R is alive and well; 

there is a very wide and growing range of statistical applications 

available for R; R has standards for data sets, models, documentation, 

etc.; and (perhaps more controversially) the S programming language is 

easier to use than Lisp.

Nevertheless, everyone to whom I've talked regrets losing some of the 

functionality of Lisp-stat, including the ability to draw dynamic, linked 

graphs, and the built-in facilities for constructing graphical interfaces.

Although I don't have the technical expertise either to answer the 

following question or, certainly, to implement a solution, I wonder whether 

it would be possible to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R, ideally in the form of an add-on package that would 

work in all three supported environments -- Windows, Mac, and Linux/Unix. I 

know that there would be some obstacles -- and probably the components from 

Lisp-stat would have to run as a separate process -- but don't know whether 

these obstacles can be overcome.

If anyone has any ideas along these lines, I'd be interested in hearing 

them, and possibly in helping to organize a project to implement them.

Regards,
  John

At 12:44 AM 8/6/2002 +0200, Frederic Udina wrote:

>Bill,
>
>(just to be sure that somebody answers your question)
>
>Xlisp-stat, still being the only choice for some statistical applications,
>is not as active as it was some time ago.
>
>Some of the gurus have moved to R, some other are quite inactive. Some of
>us are still working with it but we obviously miss some lifting on the
>software... But apparently the efforts to undertake it have not been
>succesful.
>
>I have not looked to the official site for a while, it would be good to
>have it at least pointing to the existing resources.
>
>Somebody singin'  "We shall overcome..." out there?
>
>
>
>On Mon, 5 Aug 2002, Bill Harris wrote:
>
>~~~I just used XLISP-STAT again today after a bit of an absence, and I
>~~~thought I'd check to see what was new on the Web.  While I don't need to
>~~~see ongoing developments to find a tool useful, I was curious in that
>~~~http://www.xlispstat.org/ and the UCLA site that Google returned both
>~~~seemed offline.  What is up with XLISP-STAT these days?
>~~~
>~~~Bill
>~~~--
>~~~Bill Harris                                  3217 102nd Place SE
>~~~Facilitated Systems                          Everett, WA 98208 USA
>~~~http://facilitatedsystems.com/               phone: +1 425 337-5541
>~~~
>
>
>  Frederic Udina
>   ____________________________________________________________________
>   <udina@upf.es> Dept. D'Economia i Empresa   Universitat Pompeu Fabra
>                   Ramon Trias Fargas, 25-27      08005 Barcelona SPAIN
>   tel. 34- 935421756/1763 fax: 34- 935421746     http://libiya.upf.es/
>   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>   There are many here among us who feel that life is but a joke  B.Dy.

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Aug  8 21:33:50 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 8 Aug 2002 22:33:50 +0200
Subject: ESS assigns .Last.value to the wrong place in R
In-Reply-To: <15697.31723.719742.514063@gargle.gargle.HOWL>
References: <15697.31723.719742.514063@gargle.gargle.HOWL>
Message-ID: <15698.54702.56299.675830@mithrandir.hornik.net>

>>>>> David Brahm writes:

> I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
> still not fixed in ESS 5.1.23, and I think some resolution is needed.

> When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
> which is *not* where R normally stores it (R stores it in package:base).
> When this copy becomes stale it leads to wrong answers.  The bug is in
> essd-r.el, lines 63-64:

>     (ess-retr-lastvalue-command
>      . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

> which should be changed (as I have done on my machine) to:

>     (ess-retr-lastvalue-command
>      . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

> Here's an example of how things can go wrong:
R> find(".Last.value")
>    [1] "package:base"
R> 0+1
>    [1] 1
R> .Last.value
>    [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
>    [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
>    [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
>    [1] ".GlobalEnv"   "package:base"


> Whenever I bring this up, a debate begins over who should change (ESS
> or R).  In particular, my solution will not work if package:base is
> "sealed".  Here's the tail end of our last discussion:

> Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
>> ... The effect of sealing package:base from the user means that R will have
>> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
>> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>> 
>> Net result, ESS does not change behavior, R has already promised to
>> change behavior.

> and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
>> Not at all.  Sealing base does not mean that .Last.value needs to be
>> stored in the user's workspace.  The standard approach would be to use
>> dynamic variables which are in fact functions with internal state
>> (typically maintained in their environments).  E.g., .libPaths() in R
>> 1.4 or better illustrates the idea.  There might be a .Last.value()
>> along these lines.  The most prominent example is options() which is
>> used for manipulating .Options (see also the R FAQ): this is currently
>> visible to the user but it really should not.
>> 
>> Let me discuss our strategy re .Last.value with some r-core members.

> Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
>> I may be in way over my head here.  But, I think there is a 4th solution.
>> Have ESS save .Last.value as some other variable in .GlobalEnv like
>> .Last.value.saved.  That way .Last.value would not be hidden, and it could
>> still be retreived if someone had done a help() or whatever.

> Any more thoughts?

I had raised this issue with a couple of r-core people, but without
coming to a final conclusion.  I think the underlying issue is rather
subtle: what is attempted by playing with .Last.value is somehow to
restore the 'state' of the system before ESS started 'invisibly'
interacting with it.  I have no idea if this makes sense conceptually in
a multithreaded setting.  (And the same applies to .Last.value, up to
some extent.)

I would actually prefer that we stop playing with .Last.value, and
document this.  If not, David's suggestion about assigning in envir =
NULL (i.e., the base package) is certainly preferable to what ESS
currently has, but will need to reviewed once name spaces are fully in
place.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Fri Aug  9 09:35:45 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Fri, 9 Aug 2002 10:35:45 +0200 (MET DST)
Subject: summary.data.frame with compound elements problem (PR#1891)
Message-ID: <200208090835.KAA17461@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: x86 linux
Submission from: (NULL) (130.95.16.114)


Elements of a dataframe may be a matrix or another dataframe. In
this case the summary() method can do bad things:

> x <- data.frame(1:10)
> x$z <- data.frame(x=1:10,y=1:10)
> summary(x)
     X1.10          z                  
 Min.   : 1.00   NULL:Min.   : 1.00    
 1st Qu.: 3.25   NULL:1st Qu.: 3.25    
 Median : 5.50   NULL:Median : 5.50    
 Mean   : 5.50   NULL:Mean   : 5.50    
 3rd Qu.: 7.75   NULL:3rd Qu.: 7.75    
 Max.   :10.00   NULL:Max.   :10.00    
                 NULL:Min.   : 1.00    
                 NULL:1st Qu.: 3.25    
                 NULL:Median : 5.50    
                 NULL:Mean   : 5.50    
                 NULL:3rd Qu.: 7.75    
                 NULL:Max.   :10.00    

 - this comes from summary(x) calling summary(x$z) and
not handling the fact that summary(x$z) has an element for
each column.

 I think this may be a can of worms. There is a difference
between:

 x <- data.frame(1:10,z=data.frame(1:10,1:10))
and
 x <- data.frame(1:10) ; x$z<-data.frame(1:10,1:10)

 In the first case data.frame() will take columns of the z= argument
and add them to x so that x ends up with 3 elements. In the second
case x ends up with two elements (although it prints as three columns
with identical names for $z).

 Should data frames (and matrices) be allowed as elements of data frames
(assuming they have the right number of rows)? If _not_, then "$<-.data.frame"
should either behave like data.frame(z=...) above or disallow it, and if _so_
then 
summary.data.frame needs tweaking to cope.

 [Splus has similar behaviour, except only for data.frames in data.frames, but
that's because in Splus summary(a matrix) is summary of the whole matrix and 
so only has one element. In R the summary() of a matrix is an element for each
column. Now where's the Splus jitterbug?]

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 13 08:37:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Aug 2002 09:37:08 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208130737.JAA06371@pubhealth.ku.dk>

Here is an example:

 The legends (mainly the factor level names) are cut off on the
 right.  Somehow the internal calculation which computes
 horizontal space for the legend is not flexible enough.

## Call a new graphics window {with default par()s !}:
get(getOption("device"))()
par(mfrow = c(2,2))

## part of  example(interaction.plot)  _improved_ using with() :
data(OrchardSprays)
with(OrchardSprays, {
    interaction.plot(treatment, rowpos, decrease)
    interaction.plot(rowpos, treatment, decrease)
})

data(esoph)
with(esoph, {
    interaction.plot(agegp, alcgp, ncases/ncontrols)
    interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
                     fixed=TRUE)
})

-------------------------------

Something that should be easy to fix, but needs some care (and
time). 
Volunteers?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Aug 13 09:57:33 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 13 Aug 2002 10:57:33 +0200 (MET DST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
Message-ID: <200208130857.KAA07497@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.5.1
OS: WinMe
Submission from: (NULL) (217.210.0.243)


In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
too many files in @Rfiles the source code line generated will be too long and
weird things will happen, e.g. strange bytes/characters will be inserted.

SUGGESTION/SOLUTION:
Add a new line character after each "join";

 $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";

instead of

 $Rcmd .= join("\", \"", @Rfiles) . "\")\n";


SUGGESTION II:
I ran into similar problems in other situations where I autogenerated too long
source lines. The errors where hard to reproduce and took time to find. It would
be nice if the [R] parser, or some previous engine that reads the source file,
could given an explicit error saying that the "line was too long".

EXAMPLE:
In my case I got in perl '@Rfiles' was:
"R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"

but in [R] 'Rfiles' became:
 [1] "R/LogBook.R"                   "R/LogEntry.R"                 
 [3] "R/GenePixData.R"               "R/Layout.R"                   
 [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"      
 [7] "R/QualityData.R"               "R/MicroarrayData.R"           
 [9] "R/MAData.R"                    "R/MAData.NORM.R"              
[11] "R/zzz.R"                       "R/Replicates.R"               
[13] "R/SMA.R"                       "R/FieldFilter.R"              
[15] "R/Filter.R"                    "R/QuantArrayData.R"           
[17] "R/RGData.R"                    "R/RawData.R"                  
[19] "R/000.R"                       "R/MicroarrayData.IO.R"        
[21] "R/LayoutGroups.R"              "R/BFilter.R"                  
[23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"          
[25] "R/Copy of SSMatrix.R"          "R/private.utils.R"            
[27] "R/WangetalData.R"              "R/KHessFilter.R"              
[29] "R/DfFilter.R"                  "R/SpotData.R"                 
[31] "R/ScanAlyzeData.R"             "R/BMAData.R"                  
[33] "R/AFilter.R"                   "R/MFilter.R"                  
[35] "R/Layout.obsolete.R"           "R/AndFilter.R"                
[37] "R/OrFilter.R"                  "R/SEFilter.R"                 
[39] "R/TFilter.R"                   "R/AcceptFilter.R"             
[41] "R/SpotPosition.R"              "R/SerialFilter.R"             
[43] "R/GSRArray.R"                  "R/MultiwayArray.R"            
[45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"         
[47] "R/GeneData.R"                  "R/GeneRejectFilter.R"         
[49] "R/TMAData.R"                   "R/NotFilter.R"                
[51] "R/ParallelFilter.R"            "R/RejectFilter.R"             
[53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"                 
[55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
[57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"   

Look at the 56 element. Trying to add or remove files, I found that this was
always happening at the same column in the Rfiles row and inferred that this is
due to the maximum line length in [R] source files. Correct?

Best wishes

Henrik Bengtsson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 10:43:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 10:43:03 +0100 (BST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <200208130857.KAA07497@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131022320.25584-100000@gannet.stats>

On Tue, 13 Aug 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.5.1
> OS: WinMe
> Submission from: (NULL) (217.210.0.243)
>
>
> In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
> code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
> too many files in @Rfiles the source code line generated will be too long and
> weird things will happen, e.g. strange bytes/characters will be inserted.

> SUGGESTION/SOLUTION:
> Add a new line character after each "join";
>
>  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
>
> instead of
>
>  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
>
>
> SUGGESTION II:
> I ran into similar problems in other situations where I autogenerated too long
> source lines. The errors where hard to reproduce and took time to find. It would
> be nice if the [R] parser, or some previous engine that reads the source file,
> could given an explicit error saying that the "line was too long".
>
> EXAMPLE:
> In my case I got in perl '@Rfiles' was:
> "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
> R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
> SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
> R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
>
> but in [R] 'Rfiles' became:
>  [1] "R/LogBook.R"                   "R/LogEntry.R"
>  [3] "R/GenePixData.R"               "R/Layout.R"
>  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
>  [7] "R/QualityData.R"               "R/MicroarrayData.R"
>  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> [11] "R/zzz.R"                       "R/Replicates.R"
> [13] "R/SMA.R"                       "R/FieldFilter.R"
> [15] "R/Filter.R"                    "R/QuantArrayData.R"
> [17] "R/RGData.R"                    "R/RawData.R"
> [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> [21] "R/LayoutGroups.R"              "R/BFilter.R"
> [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> [27] "R/WangetalData.R"              "R/KHessFilter.R"
> [29] "R/DfFilter.R"                  "R/SpotData.R"
> [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> [33] "R/AFilter.R"                   "R/MFilter.R"
> [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> [37] "R/OrFilter.R"                  "R/SEFilter.R"
> [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> [49] "R/TMAData.R"                   "R/NotFilter.R"
> [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
>
> Look at the 56 element. Trying to add or remove files, I found that this was
> always happening at the same column in the Rfiles row and inferred that this is
> due to the maximum line length in [R] source files. Correct?

There is no such line limit.  If I take your file list, convert it via the
orginal join and read it into R, I don't get a problem, under Linux or
Windows XP. I think you are hitting the limitations of your `operating
system', not R.  But without a reproducible example it is hard to tell.

Package survival has 92 files with file names at least as long as yours,
and that works perfectly happily on Windows XP.

Can you make available a sample package which exhibits the problem?

Nevertheless, joining with "\n" should be a palliative measure.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer+science@uni-bochum.de  Tue Aug 13 13:12:18 2002
From: stefan.boehringer+science@uni-bochum.de (stefan.boehringer+science@uni-bochum.de)
Date: Tue, 13 Aug 2002 14:12:18 +0200 (MET DST)
Subject: svm seg faults (PR#1901)
Message-ID: <200208131212.OAA10671@pubhealth.ku.dk>

Full_Name: Stefan Bhringer
Version: 1.5.1
OS: Linux RH 7.3
Submission from: (NULL) (132.252.142.137)


using the svm function from the e1071 library. R crashes with the very example
from the help page or any other input.
In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 13:43:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 13:43:29 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <200208131212.OAA10671@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>

Which compiler is this?

I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
versions of gcc. I think this is particularly critical when C/C++ mixtures
are used (as in svm).

PR#1178 is another non-reproducible segfault in svm on Linux.

On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:

> Full_Name: Stefan Bhringer
> Version: 1.5.1
> OS: Linux RH 7.3
> Submission from: (NULL) (132.252.142.137)
>
>
> using the svm function from the e1071 library. R crashes with the very example
> from the help page or any other input.
> In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Tue Aug 13 13:23:07 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 13 Aug 2002 14:23:07 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029241389.6475.9.camel@hgX>

I've used the stock 2.96 gcc. Also I have 3.1 installed as gcc3 but
couldn't get around to make R compile with gcc3.

Thanks

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From johannes.huesing@uni-essen.de  Tue Aug 13 14:41:15 2002
From: johannes.huesing@uni-essen.de (=?iso-8859-1?Q?Johannes_H=FCsing?=)
Date: Tue, 13 Aug 2002 15:41:15 +0200
Subject: Lisp-stat  and R?  [was: Re: Status?]
In-Reply-To: <20020808184308.146.qmail@hotspur.psych.yorku.ca>; from friendly@hotspur.psych.yorku.ca on Thu, Aug 08, 2002 at 06:43:08PM -0000
References: <20020808184308.146.qmail@hotspur.psych.yorku.ca>
Message-ID: <20020813154115.51612@spi.power.uni-essen.de>

On Thu 2002-08-08 (18:43), friendly@hotspur.psych.yorku.ca wrote:
>   I'll add a challenge of my own -- to incorportate
> R modelling, static graphics and data manipulations into Lisp-stat.
> 

I don't see anyone finding much interest in re-programming
all modelling aspects which are available and being extended in 
R from scratch in XLispStat. 

Rather I would like to see each language to continue to excel in
what it is already good at. XLispStat can survive when it builds 
on its dynamic graphic facilities, which have been exceptional in 
1990, and still worth a look at in 2002.
For ideas about what else 
dynamic
graphics can do, see for example http://www.theusrus.de/Mondrian/index.html.

One thing that comes to mind that might be worthwhile is a
color model. There's some remarkable work by Steve Majewski but I 
don't know how widely used it is.

This way, one would have a flexible and powerful graphics engine. It
can be extended in large projects. If it keeps an edge over, say, R
in the area of graphics, it will be a tool always to consider, rather
than a duplicate effort in an area other languages already shine.

For working in what other languages are good at, there's Omegahat
(http://www.omegahat.org).

Just another two cents.

Greetings


Johannes
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 20:56:41 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 21:56:41 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208131956.VAA13672@pubhealth.ku.dk>

An NA in the rownames of a matrix (or dataframe) causes misalignment when the
matrix is printed:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> rownames(x)[2] <- NA
R> x
     A B C  D
a    1 4 7 10
<NA>   2 5 8 11
c    3 6 9 12

The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
between lines 242 ("int len;") and 243 ("len = 0;"):

    if (s == CHAR(NA_STRING))
      return quote ? R_print.na_width : R_print.na_width_noquote;

which solves the problem:

R-patched> x
     A B C  D
a    1 4 7 10
<NA> 2 5 8 11
c    3 6 9 12

-----------------------------------------------------------------------------

An NA in the colnames has similar misalignment problems:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> colnames(x)[2] <- NA
R> x
  A <NA> C  D
a 1  4 7 10
b 2  5 8 11
c 3  6 9 12

But this time it's because lines 72, 139, 213, 299, and 375 of
src/main/printarray.c use "strlen", which doesn't know about NA's:

  clabw = strlen(CHAR(STRING_ELT(cl, j)));

My patch is to replace "strlen" with "Rstrlen" in each case:

  clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);

and again this solves the problem:

R-patched> x
  A <NA> C  D
a 1    4 7 10
b 2    5 8 11
c 3    6 9 12

-----------------------------------------------------------------------------

References:

Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
  http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
but this was fixed in R-1.5.1.

Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6367.html

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 21:35:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 21:35:13 +0100 (BST)
Subject: Misalignment of <NA> in rownames (PR#1905)
In-Reply-To: <200208131956.VAA13672@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208132127350.9301-100000@gannet.stats>

Have you looked at R-devel?  Neither of these are currently incorrect.

Rstrlen is an exported entry point, and I don't think we want to mess with
it.  It is used for other than printing.

On Tue, 13 Aug 2002 brahm@alum.mit.edu wrote:

> An NA in the rownames of a matrix (or dataframe) causes misalignment when the
> matrix is printed:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> rownames(x)[2] <- NA
> R> x
>      A B C  D
> a    1 4 7 10
> <NA>   2 5 8 11
> c    3 6 9 12
>
> The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
> MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
> label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
> between lines 242 ("int len;") and 243 ("len = 0;"):
>
>     if (s == CHAR(NA_STRING))
>       return quote ? R_print.na_width : R_print.na_width_noquote;
>
> which solves the problem:
>
> R-patched> x
>      A B C  D
> a    1 4 7 10
> <NA> 2 5 8 11
> c    3 6 9 12
>
> -----------------------------------------------------------------------------
>
> An NA in the colnames has similar misalignment problems:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> colnames(x)[2] <- NA
> R> x
>   A <NA> C  D
> a 1  4 7 10
> b 2  5 8 11
> c 3  6 9 12
>
> But this time it's because lines 72, 139, 213, 299, and 375 of
> src/main/printarray.c use "strlen", which doesn't know about NA's:
>
>   clabw = strlen(CHAR(STRING_ELT(cl, j)));
>
> My patch is to replace "strlen" with "Rstrlen" in each case:
>
>   clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);
>
> and again this solves the problem:
>
> R-patched> x
>   A <NA> C  D
> a 1    4 7 10
> b 2    5 8 11
> c 3    6 9 12
>
> -----------------------------------------------------------------------------
>
> References:
>
> Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
>   http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
> but this was fixed in R-1.5.1.
>
> Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
> and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6367.html
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug 13 21:43:42 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 13 Aug 2002 22:43:42 +0200 (MET DST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
Message-ID: <200208132043.WAA13848@pubhealth.ku.dk>


Please find replication code below
Best

Jens Oehlschlgel


> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
[1] 2 3 4 1
> order(x, na.last=TRUE, decreasing=TRUE)
[1] 4 3 2 1
> order(x, na.last=FALSE, decreasing=FALSE)
[1] 1 2 3 4
> order(x, na.last=FALSE, decreasing=TRUE)
[1] 1 4 3 2
> order(x, na.last=NA, decreasing=FALSE)
[1] 2 3 4
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
[1] 2 3 4
> 

x <- c(NA, 1, 2, 3)
order(x, na.last=TRUE, decreasing=FALSE)
order(x, na.last=TRUE, decreasing=TRUE)
order(x, na.last=FALSE, decreasing=FALSE)
order(x, na.last=FALSE, decreasing=TRUE)
order(x, na.last=NA, decreasing=FALSE)
# THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
order(x, na.last=NA, decreasing=TRUE)



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 22:07:37 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 23:07:37 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208132107.XAA13950@pubhealth.ku.dk>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> Have you looked at R-devel?  Neither of these are currently incorrect.

I see you fixed these very issues on Aug 1 by modifying MatrixRowLabel and
friends.  Sorry for not checking there first!  I will let Derek know.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:01:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:01:34 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.LNX.4.31.0208140659560.11641-100000@gannet.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Sorry, but it was indeed the redirection of the standard output in
> Cygwin/bash that cause the first problem, not R (I should stop doing
> troubleshooting at 1:00 AM). So please forget about the problems reported in
> R_CMD_check.out. However, it would still be nice if you still update R CMD
> check to do join with "\n".

Yes, on ME.  That was my prime suspect.

The change has already been made.

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

Will take a look.

> Sorry about that, I hope none of you spent time on the first problem.

Not me: I could not reproduce it on XP.

> Henrik
>
> -----Original Message-----
> From: Henrik Bengtsson [mailto:hb@maths.lth.se]
> Sent: Wednesday, August 14, 2002 12:50 AM
> To: ripley@stats.ox.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> I did some error tracking myself. I verified that the Perl generated
> temporary [R] file was correct. I narrowed down the problem to be with the
> redirecting of the standard input, i.e. <, into [R] and I also found that I
> could not get the same problem if I source()'d the same file. Then I thought
> it might be my shell (Cygwin/bash), but not! Doing
>
>  % cat < R_CMD_check.out
>
> is just fine, but when doing
>
>   R --vanilla --quiet < R_CMD_check.out
>
> I run into problems. It looks like every line that is long enough will get
> some garbage bytes inserted at column 1023. I have attached the
> R_CMD_check.out file with comments for you. As you see, it is not what R CMD
> check have generated, but as the problem is not with R CMD check itself
> anymore I removed the non-interesting parts.
>
> Maybe related to this is another problem that makes source() crash if I have
> a too long string (>2128 characters) inside a function definition. The
> attached R script TooLongLines.R is supposed to illustrate this. It also
> contains Dr. Mingw's report.
>
> FYI: I'll be out of the office from Wednesday noon-Sunday.
>
> Henrik Bengtsson
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, August 13, 2002 11:43 AM
> > To: hb@maths.lth.se
> > Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> > Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
> >
> >
> > On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.5.1
> > > OS: WinMe
> > > Submission from: (NULL) (217.210.0.243)
> > >
> > >
> > > In the Perl script $R_HOME/bin/check there is a bug under the
> > section "Check R
> > > code for syntax errors" where the 'Rfiles <- c(...)' is build
> > up. If there are
> > > too many files in @Rfiles the source code line generated will
> > be too long and
> > > weird things will happen, e.g. strange bytes/characters will be
> > inserted.
> >
> > > SUGGESTION/SOLUTION:
> > > Add a new line character after each "join";
> > >
> > >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> > >
> > > instead of
> > >
> > >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> > >
> > >
> > > SUGGESTION II:
> > > I ran into similar problems in other situations where I
> > autogenerated too long
> > > source lines. The errors where hard to reproduce and took time
> > to find. It would
> > > be nice if the [R] parser, or some previous engine that reads
> > the source file,
> > > could given an explicit error saying that the "line was too long".
> > >
> > > EXAMPLE:
> > > In my case I got in perl '@Rfiles' was:
> > > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> > R/Filter.R
> > > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> > TFilter.R R/Copy of
> > > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> > R/DfFilter.R
> > > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> > >
> > > but in [R] 'Rfiles' became:
> > >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> > >  [3] "R/GenePixData.R"               "R/Layout.R"
> > >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> > >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> > >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > > [11] "R/zzz.R"                       "R/Replicates.R"
> > > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > > [17] "R/RGData.R"                    "R/RawData.R"
> > > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > > [33] "R/AFilter.R"                   "R/MFilter.R"
> > > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> > >
> > > Look at the 56 element. Trying to add or remove files, I found
> > that this was
> > > always happening at the same column in the Rfiles row and
> > inferred that this is
> > > due to the maximum line length in [R] source files. Correct?
> >
> > There is no such line limit.  If I take your file list, convert it via the
> > orginal join and read it into R, I don't get a problem, under Linux or
> > Windows XP. I think you are hitting the limitations of your `operating
> > system', not R.  But without a reproducible example it is hard to tell.
> >
> > Package survival has 92 files with file names at least as long as yours,
> > and that works perfectly happily on Windows XP.
> >
> > Can you make available a sample package which exhibits the problem?
> >
> > Nevertheless, joining with "\n" should be a palliative measure.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> >
> >
> >
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:02:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:02:33 +0100 (BST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
In-Reply-To: <200208132043.WAA13848@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208140701460.11641-100000@gannet.stats>

Fixed now.  If you need the fix, the do.call line should be

        ans <- do.call("order", c(z, decreasing=decreasing))

Thanks!

On Tue, 13 Aug 2002 oehl_list@gmx.de wrote:

>
> Please find replication code below
> Best
>
> Jens Oehlschlgel
>
>
> > x <- c(NA, 1, 2, 3)
> > order(x, na.last=TRUE, decreasing=FALSE)
> [1] 2 3 4 1
> > order(x, na.last=TRUE, decreasing=TRUE)
> [1] 4 3 2 1
> > order(x, na.last=FALSE, decreasing=FALSE)
> [1] 1 2 3 4
> > order(x, na.last=FALSE, decreasing=TRUE)
> [1] 1 4 3 2
> > order(x, na.last=NA, decreasing=FALSE)
> [1] 2 3 4
> > # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> > order(x, na.last=NA, decreasing=TRUE)
> [1] 2 3 4
> >
>
> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
> order(x, na.last=TRUE, decreasing=TRUE)
> order(x, na.last=FALSE, decreasing=FALSE)
> order(x, na.last=FALSE, decreasing=TRUE)
> order(x, na.last=NA, decreasing=FALSE)
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 10:26:31 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Aug 2002 10:26:31 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0208141024430.16141-100000@auk.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

I've tried to re-file that as new bug.
It's due to keeping the source which has a limit of 1024, so use
options(keep.source=FALSE) to work around this.

I've removed the limit for R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Aug 14 17:53:54 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 14 Aug 2002 18:53:54 +0200 (MEST)
Subject: strwidth
Message-ID: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>


Dear plotting experts, 

I need to determine the width of a string before plotting it to the
current device because I want to adjust `mai' to have
the necessary space available. It seems to me that this is an "hen and
egg" problem: 

R> a <- "test"
R> strwidth(a)  
Error in strwidth(a) : plot.new has not been called yet

# ok, I need an open device

R> plot(1:2, type="n")
R> strwidth(a)
[1] 0.04760034

fine. But I can't continue to plot to the current device because I need to
reset `mai', so I need a second one ...

This is not really a problem if plotting to the screen but plotting to a
file leads to at least one page of non sense. Or am I just disoriented?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 17:59:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 17:59:03 +0100 (BST)
Subject: strwidth
In-Reply-To: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>
Message-ID: <Pine.LNX.4.31.0208141756030.18789-100000@gannet.stats>

On Wed, 14 Aug 2002, Torsten Hothorn wrote:

> I need to determine the width of a string before plotting it to the
> current device because I want to adjust `mai' to have
> the necessary space available. It seems to me that this is an "hen and
> egg" problem:

`chicken and egg' is idiomatic.

> R> a <- "test"
> R> strwidth(a)
> Error in strwidth(a) : plot.new has not been called yet
>
> # ok, I need an open device
>
> R> plot(1:2, type="n")
> R> strwidth(a)
> [1] 0.04760034
>
> fine. But I can't continue to plot to the current device because I need to
> reset `mai', so I need a second one ...

Ah, but you don't need a coordinate system:

> a <- "test"
> plot.new()
> par(mai=rep(30*strwidth(a), 4))
> plot(1:2)

works.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Thu Aug 15 12:26:06 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 15 Aug 2002 13:26:06 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029410767.1964.15.camel@hgX>

Thank you for the hint.
I rebuild gcc and R from scratch and now it works. Here's how on RH7.3,
which might help others:

configured gcc with: --enable-languages=c,c++,objc,f77
--program-suffix=3 --prefix=/usr

in config.site for R the following variables are then set:
CC=gcc3
F77=f773
CXX=g++3
LDFLAGS=-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.1
-L/usr/lib/gcc-lib/i686-pc-linux-gnu

Thank you very much again.

Best wishes,

	Stefan

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 09:30:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 10:30:49 +0200 (MET DST)
Subject: source() crashes on long lines (PR#1900)
Message-ID: <200208140830.KAA16483@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: 8BIT
Content-ID: <Pine.GSO.4.44.0208140920312.15226@auk.stats>

This is a separate bug, reproducible on Solaris, so I am re-filing it as a
new report.

There may well need to be a linewidth limit, but this should be caught.

R --vanilla < TooLongLines.R does work.

R-bugs mangles attachments, but my mailer does not like very long lines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Wed, 14 Aug 2002 00:49:43 +0200
From: Henrik Bengtsson <hb@maths.lth.se>
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)

I did some error tracking myself. I verified that the Perl generated
temporary [R] file was correct. I narrowed down the problem to be with the
redirecting of the standard input, i.e. <, into [R] and I also found that I
could not get the same problem if I source()'d the same file. Then I thought
it might be my shell (Cygwin/bash), but not! Doing

 % cat < R_CMD_check.out

is just fine, but when doing

  R --vanilla --quiet < R_CMD_check.out

I run into problems. It looks like every line that is long enough will get
some garbage bytes inserted at column 1023. I have attached the
R_CMD_check.out file with comments for you. As you see, it is not what R CMD
check have generated, but as the problem is not with R CMD check itself
anymore I removed the non-interesting parts.

Maybe related to this is another problem that makes source() crash if I have
a too long string (>2128 characters) inside a function definition. The
attached R script TooLongLines.R is supposed to illustrate this. It also
contains Dr. Mingw's report.

FYI: I'll be out of the office from Wednesday noon-Sunday.

Henrik Bengtsson

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Tuesday, August 13, 2002 11:43 AM
> To: hb@maths.lth.se
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.5.1
> > OS: WinMe
> > Submission from: (NULL) (217.210.0.243)
> >
> >
> > In the Perl script $R_HOME/bin/check there is a bug under the
> section "Check R
> > code for syntax errors" where the 'Rfiles <- c(...)' is build
> up. If there are
> > too many files in @Rfiles the source code line generated will
> be too long and
> > weird things will happen, e.g. strange bytes/characters will be
> inserted.
>
> > SUGGESTION/SOLUTION:
> > Add a new line character after each "join";
> >
> >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> >
> > instead of
> >
> >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> >
> >
> > SUGGESTION II:
> > I ran into similar problems in other situations where I
> autogenerated too long
> > source lines. The errors where hard to reproduce and took time
> to find. It would
> > be nice if the [R] parser, or some previous engine that reads
> the source file,
> > could given an explicit error saying that the "line was too long".
> >
> > EXAMPLE:
> > In my case I got in perl '@Rfiles' was:
> > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> R/Filter.R
> > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> TFilter.R R/Copy of
> > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> R/DfFilter.R
> > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> >
> > but in [R] 'Rfiles' became:
> >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> >  [3] "R/GenePixData.R"               "R/Layout.R"
> >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > [11] "R/zzz.R"                       "R/Replicates.R"
> > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > [17] "R/RGData.R"                    "R/RawData.R"
> > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > [33] "R/AFilter.R"                   "R/MFilter.R"
> > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> >
> > Look at the 56 element. Trying to add or remove files, I found
> that this was
> > always happening at the same column in the Rfiles row and
> inferred that this is
> > due to the maximum line length in [R] source files. Correct?
>
> There is no such line limit.  If I take your file list, convert it via the
> orginal join and read it into R, I don't get a problem, under Linux or
> Windows XP. I think you are hitting the limitations of your `operating
> system', not R.  But without a reproducible example it is hard to tell.
>
> Package survival has 92 files with file names at least as long as yours,
> and that works perfectly happily on Windows XP.
>
> Can you make available a sample package which exhibits the problem?
>
> Nevertheless, joining with "\n" should be a palliative measure.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>
>

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: APPLICATION/OCTET-STREAM; NAME="TooLongLines.R"
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.GSO.4.44.0208140920320.15226@auk.stats>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="TooLongLines.R"

# Doing source("TooLongLines.R") on this file and on [R] v1.5.1 on WinMe =
will
# make [R] crash. The "reason" is that there is a too long source line =
*inside*
# a function defintion. However, declaring a character variable with a =
very
# very long string works. See more comments below.


myFcn <- function() {
# I have inserted roman letter (L =3D 50, C =3D 100, D =3D 500, M =3D =
1000) in the string below to easier get the position of each character.
# Comments or something else, e.g.
x <- 2
# does not matter, the problem is the next very long line (>=3D2128 =
characters) inside a function() defintion:
"234567890123456789012345678901234567890123456789L12345678901234567890123=
45678901234567890123456789C1234567890123456789012345678901234567890123456=
789L1234567890123456789012345678901234567890123456789C1234567890123456789=
012345678901234567890123456789L123456789012345678901234567890123456789012=
3456789C1234567890123456789012345678901234567890123456789L123456789012345=
6789012345678901234567890123456789C12345678901234567890123456789012345678=
90123456789L1234567890123456789012345678901234567890123456789D12345678901=
23456789012345678901234567890123456789L1234567890123456789012345678901234=
567890123456789C1234567890123456789012345678901234567890123456789L1234567=
890123456789012345678901234567890123456789C123456789012345678901234567890=
1234567890123456789L1234567890123456789012345678901234567890123456789C123=
4567890123456789012345678901234567890123456789L12345678901234567890123456=
78901234567890123456789C1234567890123456789012345678901234567890123456789=
L1234567890123456789012345678901234567890123456789M1234567890123456789012=
345678901234567890123456789L123456789012345678901234567890123456789012345=
6789C1234567890123456789012345678901234567890123456789L123456789012345678=
9012345678901234567890123456789C12345678901234567890123456789012345678901=
23456789L1234567890123456789012345678901234567890123456789C12345678901234=
56789012345678901234567890123456789L1234567890123456789012345678901234567=
890123456789C1234567890123456789012345678901234567890123456789L1234567890=
123456789012345678901234567890123456789D123456789012345678901234567890123=
4567890123456789L1234567890123456789012345678901234567890123456789C123456=
7890123456789012345678901234567890123456789L12345678901234567890123456789=
01234567890123456789C1234567890123456789012345678901234567890123456789L12=
34567890123456789012345678901234567890123456789C1234567890123456789012345=
678901234567890123456789L123456789012345678901234567890123456789012345678=
9C1234567890123456789012345678901234567890123456789L123456789012345678901=
2345678901234567890123456789M12345678901234567890123456789012345678901234=
56789L1234567890123456789012345678901234567890123456789C12345678901234567=
8901234567"
# Comments or something else, e.g.
x <- 2
# does not matter. Any line shorter than 2128 works fine, i.e. removing
# the last '7' from the string above and source("TooLongLines.R") will
# be just fine.
} # myFcn()


# 'Rterm --vanilla' and 'RGUI.exe' ([R] v1.5.1 (2002-06-17) on WinMe) =
both
# give 'Signal 127' and Dr. Mingw reports:
#
#  RTERM.EXE caused an Access Violation at location 00486a03 in module =
R.DLL Writing to location 00486a95.
# =20
#  Registers:
#  eax=3D00486a95 ebx=3D0091e990 ecx=3D0091ecb0 edx=3D00484028 =
esi=3D00000000 edi=3D0000007b
#  eip=3D00486a03 esp=3D0091e8f4 ebp=3D0091e900 iopl=3D0         nv up =
ei pl nz na po cy
#  cs=3D018f  ss=3D0197  ds=3D0197  es=3D0197  fs=3D271f  gs=3D0000      =
       efl=3D00010207
# =20
#  Call stack:
#  00486A03  R.DLL:00486A03  R_Parse
#  004873D1  R.DLL:004873D1  Rf_yyerror
#  00487933  R.DLL:00487933  Rf_isValidName
#  00487ECC  R.DLL:00487ECC  Rf_yylex
#  00484D71  R.DLL:00484D71  Rf_yyparse
#  004866DF  R.DLL:004866DF  Rf_yyparse
#  004869E1  R.DLL:004869E1  R_Parse
#  00486B66  R.DLL:00486B66  R_ParseConn
#  004F6AC3  R.DLL:004F6AC3  do_parse
#  004AA5A7  R.DLL:004AA5A7  do_internal
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  004812D9  R.DLL:004812D9  Rf_evalList
#  0047F5E2  R.DLL:0047F5E2  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  0049D325  R.DLL:0049D325  R_PromptString
#  0049DC74  R.DLL:0049DC74  run_Rmainloop
#  0049DC8C  R.DLL:0049DC8C  Rf_mainloop
#  0040153D  RTERM.EXE:0040153D
#  0040139C  RTERM.EXE:0040139C
#  0040166D  RTERM.EXE:0040166D
#  004010F4  RTERM.EXE:004010F4
#  004011EF  RTERM.EXE:004011EF
#  BFF7B9E4  KERNEL32.DLL:BFF7B9E4  IsDBCSLeadByte
#  BFF7B896  KERNEL32.DLL:BFF7B896  IsDBCSLeadByte
#  BFF7A24F  KERNEL32.DLL:BFF7A24F  MakeCriticalSectionGlobal







------=_NextPart_000_0006_01C2432C.7ACD6BA0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Aug 15 21:28:01 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 15 Aug 2002 22:28:01 +0200 (MET DST)
Subject: order(1, na.last=NA) fails (PR#1913)
Message-ID: <200208152028.WAA00080@pubhealth.ku.dk>


R> order(1, na.last=NA)
Error in apply(sapply(z, is.na), 1, any) : 
	dim(X) must have a positive length

This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
It comes from the line inside order():

   ok <- !apply(sapply(z, is.na), 1, any)

where z=list(1) in my example.  sapply() returns a single-element vector, not a
matrix, making apply() unhappy.  This might work better:

   nas <- sapply(z, is.na)
   ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Fri Aug 16 03:49:34 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Fri, 16 Aug 2002 04:49:34 +0200 (MET DST)
Subject: print("") crashes Rgui (PR#1914)
Message-ID: <200208160249.EAA00980@pubhealth.ku.dk>

Full_Name: Ronnen Levinson
Version: 1.5.1
OS: Win98SE
Submission from: (NULL) (128.3.13.116)


Hi.

It appears that any attempt to display the Greek letter mu () crashes Rgui.
The letter  was part of a string read from a text file (entered as ALT-0181).
My problem is that R crashes when I try to print the line from the file that
contains
this character.

Try, for example, print("").

Yours truly,

Ronnen.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:25:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:25:39 +0100 (BST)
Subject: =?X-UNKNOWN?Q?Re=3A_print=28=22=B5=22=29_crashes_Rgui_=28PR#1914?=
 =?X-UNKNOWN?Q?=29?=
In-Reply-To: <200208160249.EAA00980@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160717510.25058-100000@gannet.stats>

See the rw-FAQ, question 2.14.  Your example is fine on my XP machine.
This is a sign of a corrupt version of Windows, not an R problem.

If you must persist in filing reports on known problems, at least supply
new evidence.  The rw-FAQ shows you have to produce a useful post-mortem
dump.

On Fri, 16 Aug 2002 RML27@cornell.edu wrote:

> Full_Name: Ronnen Levinson
> Version: 1.5.1
> OS: Win98SE
> Submission from: (NULL) (128.3.13.116)
>
>
> Hi.
>
> It appears that any attempt to display the Greek letter mu () crashes Rgui.
> The letter  was part of a string read from a text file (entered as ALT-0181).
> My problem is that R crashes when I try to print the line from the file that
> contains
> this character.
>
> Try, for example, print("").

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:34:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:34:47 +0100 (BST)
Subject: order(1, na.last=NA) fails (PR#1913)
In-Reply-To: <200208152028.WAA00080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160733080.25058-100000@gannet.stats>

True, but you should really be using sort.list on a single vector.
Fixed now.

On Thu, 15 Aug 2002 brahm@alum.mit.edu wrote:

>
> R> order(1, na.last=NA)
> Error in apply(sapply(z, is.na), 1, any) :
> 	dim(X) must have a positive length
>
> This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
> It comes from the line inside order():
>
>    ok <- !apply(sapply(z, is.na), 1, any)
>
> where z=list(1) in my example.  sapply() returns a single-element vector, not a
> matrix, making apply() unhappy.  This might work better:
>
>    nas <- sapply(z, is.na)
>    ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Aug 17 17:49:26 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 17 Aug 2002 18:49:26 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208171649.SAA09874@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> Here is an example:
> 
>  The legends (mainly the factor level names) are cut off on the
>  right.  Somehow the internal calculation which computes
>  horizontal space for the legend is not flexible enough.
> 
> ## Call a new graphics window {with default par()s !}:
> get(getOption("device"))()
> par(mfrow = c(2,2))
> 
> ## part of  example(interaction.plot)  _improved_ using with() :
> data(OrchardSprays)
> with(OrchardSprays, {
>     interaction.plot(treatment, rowpos, decrease)
>     interaction.plot(rowpos, treatment, decrease)
> })
> 
> data(esoph)
> with(esoph, {
>     interaction.plot(agegp, alcgp, ncases/ncontrols)
>     interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
>                      fixed=TRUE)
> })
> 
> -------------------------------
> 
> Something that should be easy to fix, but needs some care (and
> time).
> Volunteers?

Martin, 

not right now (may be easy, but obviously not very easy ;-)). 
I'd like to comment that I filed this already as bug report #1305,
including a suggestion for a fix for a second bug related to axis
annotation.

Best,
Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From uluru@email.unc.edu  Sun Aug 18 22:28:10 2002
From: uluru@email.unc.edu (uluru@email.unc.edu)
Date: Sun, 18 Aug 2002 17:28:10 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
Message-ID: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>

I have been taking a break for the last month or so, and am only just
now catching up on my email.  Otherwise, I would have joined this
discussion earlier.  And... I apologize for the length of this, but I
don't think it is overly long.

>From the amount of activity in the LispStat news group (none), it seems
that LispStat is dead. We all know that Luke is working on R and not on
LispStat, and that Jan has switched UCLA over from LispStat to R. And we
have not heard from users of LispStat for some time.  So, it seems no
one is using LispStat.

For me, at least, this is not the case. As the developer of ViSta, I
have and still am using LispStat a great deal. In fact, I cannot
conceive of doing what I do with any other system.  

Of course, since I use it so much, I am very aware of LispStat's
strengths and weaknesses, and want to add my views to the discussion.
However, I spend all my time using only LispStat, so I can't make any
comparisons to R or to any other systems.

To me, the strengths of LispStat are:
1) The dynamic, highly interactive graphics
2) The object system
3) Lisp language and byte compiler

These strengths make LispStat an ideal system for implementing
statistical systems. It is less suited for doing statistical analysis.
As a result, the most significant uses of LispStat have been statistical
systems such as Arc and ViSta.

In the work I've done with LispStat,  ViSta's spreadplot architecture is
the best example of LispStat being used to implement a statistical
(sub)system (described in a forthcoming JCGS paper by myself, Pedro
Valero, Richard Faldowski and Carla Bann). 

The weaknesses of LispStat are:
1) No high-level analysis modules
2) No standards for data sets, models, etc.
3) No user-oriented data manipulation language
4) Totally inadequate documentation
5) Poor or non-existant printing 
6) No static graphic manipulation facilities
7) The underlying operating system interfaces are old.

ViSta attempts to take care of these weaknesses, with varying degrees of
success. Specifically:
1) ViSta has high-level analysis plugins. The method for writing these
plugins is documented. I believe this very well solves the first weakness. 
2) ViSta's statistical object architecture -- a hierarchy of objects
that include datasets, datasheets, data editors, transformations,
analysis methods, models and plugins --- solves the lack of standards
for such things. The implementation is slow for data objects and needs
to be re-architected. The implementation for the others is more than
adequate.
3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
awkward lisp equivalent:
(setf a (^ (* 2 (+ b c)) 2)) 
(I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
combinations, are working on the documentation problem.
5) Printing, while better than LispStat, is still not adequate.
6) Static graphics manipulation, as in SAS (and, apparently R), is
totally lacking.
7) Nothing has been done about this.

(Note that the newest version of ViSta use a modified version of
LispStat that only works under Windows, so that Mac/Unix users don't
have all the new features. This problem can be fixed by someone familiar
with LispStat and Unix.)

I am very interested in an effort to combine the strengths of LispStat
and R, but have no clue how it would be done.  From my viewpoint,
though, it would need to add the three strengths of LispStat (Lisp,
Objects and Dynamic Graphics) to the existing R environment, and it
would need to work in all three supported environments -- Windows, Mac,
and Linux/Unix

Anyone know how to do that?

Forrest
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 05:09:22 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 18 Aug 2002 21:09:22 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <3D603F4D.9090707@stat.ucla.edu>
Message-ID: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>


On Sunday, August 18, 2002, at 05:43 PM, Forrest wrote:

> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
>

Since R has its own object system, and its own array language (with
many of the mapping functions etc from Lisp), I think we would go a long
way towards this goal by just adding dynamic graphics to R (which
people are working on, it seems). In fact, the tcltk interface (which  
now
exists natively on MSW, X11, and Aqua) already has some mouse
interaction -- see demo(tkcanvas), and quite a bit can be done by
using nonstandard packages such as RGtk (on MSW and X11).

I really hated to give up Lisp (and many lines of existing code), and I  
agree
that extensions such as Vista and Arc are major arguments in favor of
XLS, but it seems that XLS is best as an environment to develop
GUI statistics tools (hiding the lisp) and not as an environment to  
actually
do statistics. Vista and Arc are great for teaching, but raw XLS is not.
In that sense XLS is more like a specialized version of  one of the  
scripting
languages such as Ruby or Python or VB or Tcl/Tk.

So basically, it would be great if the capability to write GUI  
statistics
packages on top of raw R would be part of R -- this includes dynamic
graphics, but it also includes a library of widgets. My feeling is that
the current possibilities (tcltk and RGtk) are too far removed from the
core of R.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 19 14:23:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 19 Aug 2002 14:23:35 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <x2adnjf0f9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208191423130.13749-100000@gannet.stats>

On 19 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > Which compiler is this?
> >
> > I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> > gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> > versions of gcc. I think this is particularly critical when C/C++ mixtures
> > are used (as in svm).
> >
> > PR#1178 is another non-reproducible segfault in svm on Linux.
>
> It *is* reproducible on another stock RH7.3, though. I might try
> digging a little deeper when I recover from the NY/Boston meetings.

I still think it is the compiler.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 19 14:22:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 2002 15:22:34 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <x2adnjf0f9.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.

It *is* reproducible on another stock RH7.3, though. I might try
digging a little deeper when I recover from the NY/Boston meetings. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:02:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:02:01 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15712.43650.992922.150193@gargle.gargle.HOWL>
Message-ID: <FF330AF9-B38C-11D6-A6D6-000393860F3C@stat.ucla.edu>

I have compiled Darwin R using the AquaTk frameworks. This works
(except for a small glitch). I am sure Stefano could hook these into
Carbon R, but Jose/Stefano probably should connect them with
the Cocoa interfaces. You can get the frameworks (8.4a5, I
think) from ftp://ftp.ucsd.edu/pub/alpha/tcl/alphatk/ -- they are
in the alphatk.dmg. Of course the X11 version of tcltk does NOT
work with Carbon R.

On Monday, August 19, 2002, at 01:21 AM, Martin Maechler wrote:

> Dear Jan
>
>>>>>> "Jan" == Jan de Leeuw <deleeuw@stat.ucla.edu>
>>>>>>     on Sun, 18 Aug 2002 21:09:22 -0700 writes:
>
>       ....
>
>     Jan>  ....... In fact, the tcltk interface
>     Jan> (which now exists natively on MSW, X11, and Aqua)
>
> Can you explain ? {maybe on R-devel}
> I'm not a Mac expert at all, not even a regular user.  But I've
> talked with Stefano Iacus two days ago and he said that R's
> tcltk package was not working with "Carbon R".
>
> Do you think this would be fixable easily enough?
> We {most of R core} would be very glad to be able to say
> "tcltk runs on all platforms that R runs" and hance can be
> easily made available on all platforms.
>
>
>     Jan> already has some mouse interaction -- see
>     Jan> demo(tkcanvas), and quite a bit can be done by using
>     Jan> nonstandard packages such as RGtk (on MSW and X11).
>
>
>     Jan> I really hated to give up Lisp (and many lines of
>     Jan> existing code), and I agree that extensions such as
>     Jan> Vista and Arc are major arguments in favor of XLS, but
>     Jan> it seems that XLS is best as an environment to develop
>     Jan> GUI statistics tools (hiding the lisp) and not as an
>     Jan> environment to actually do statistics. Vista and Arc
>     Jan> are great for teaching, but raw XLS is not.  In that
>     Jan> sense XLS is more like a specialized version of one of
>     Jan> the scripting languages such as Ruby or Python or VB or
>     Jan> Tcl/Tk.
>
>     Jan> So basically, it would be great if the capability to
>     Jan> write GUI statistics packages on top of raw R would be
>     Jan> part of R -- this includes dynamic graphics, but it
>     Jan> also includes a library of widgets. My feeling is that
>     Jan> the current possibilities (tcltk and RGtk) are too far
>     Jan> removed from the core of R.
>
> You are right.  Fortunately things are changing.
> Also, as far as I understand Duncan Temple Lang, Rggobi
> (partly together with RGtk) makes up for a very nice
> programmably interface for dynamic graphics.
>
> Regards
>
> --  
> Martin Maechler  
> <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:13:51 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:13:51 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <6BCD49A9-B342-11D6-942F-000393937AC2@hsph.harvard.edu>
Message-ID: <A664E33E-B38E-11D6-A6D6-000393860F3C@stat.ucla.edu>

Byron

I meant there is no native (Aqua) version of GTK yet (there is  
wxWindows and Qt and Tk, so
possibly GTK will follow). The X11 version of RGtk works for me too. I  
agree with your
diagnosis of the GUI problem.

Best -- Jan

On Monday, August 19, 2002, at 12:08 AM, Byron Ellis wrote:

>
> On Monday, August 19, 2002, at 12:09 AM, Jan de Leeuw wrote:
>>
>
> I accidentally snipped the section, but RGtk also works on Mac OS X  
> with minor changes (which I *will* write down some day Duncan. Honest  
> I will :-) They're mostly changes to linkage and one cpp assumption  
> that doesn't hold under gcc--I don't have/want MPW). This includes the  
> GtkHTML widget (if you install GNOME from Fink).
>
>> I really hated to give up Lisp (and many lines of existing code), and  
>> I  agree
>> that extensions such as Vista and Arc are major arguments in favor of
>> XLS, but it seems that XLS is best as an environment to develop
>> GUI statistics tools (hiding the lisp) and not as an environment to   
>> actually
>> do statistics. Vista and Arc are great for teaching, but raw XLS is  
>> not.
>> In that sense XLS is more like a specialized version of  one of the   
>> scripting
>> languages such as Ruby or Python or VB or Tcl/Tk.
>>
>> So basically, it would be great if the capability to write GUI   
>> statistics
>> packages on top of raw R would be part of R -- this includes dynamic
>> graphics, but it also includes a library of widgets. My feeling is  
>> that
>> the current possibilities (tcltk and RGtk) are too far removed from  
>> the
>> core of R.
>
> My personal feeling is that there are presently two (related)  
> problems: The GUI interfaces are too low level and (because of this)  
> building GUIs is neither easy enough for most nor portable enough in  
> the sense that you develop for a particular underlying GUI rather than  
> developing a GUI which is implemented using an underlying GUI---though  
> it occurs to me that this is maybe the same as being too far removed  
> from the core in that a specification of a GUI should perhaps exist  
> (though a particular implementation probably shouldn't---in the same  
> way, I suppose, that Java's AWT was a specification rather than a  
> particular implementation--that being up to the VM vendors of a  
> particular platform)
>
>>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-
>> .-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
>> FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._
>> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pc_olsen@yahoo.com  Mon Aug 19 17:41:52 2002
From: pc_olsen@yahoo.com (Peter Olsen)
Date: Mon, 19 Aug 2002 12:41:52 -0400
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
Message-ID: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>

Has anyone else looked at the Python module that allows Python to call
R and vice versa?  

I think that might have promise.  Python offers an excellent
object-oriented development environment in which to embed the use of
R's statistical and graphics routines.

Peter Olsen, P.E., Ae.E.

"Engineering is the art of using a professional knowledge of
mathematics and the physical sciences to improve the quality of life."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 17:55:35 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 09:55:35 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
 <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
Message-ID: <87znvi3i0o.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Olsen <pc_olsen@yahoo.com> writes:

    peter> Has anyone else looked at the Python module that allows Python to call
    peter> R and vice versa?  

    peter> I think that might have promise.  Python offers an excellent
    peter> object-oriented development environment in which to embed the use of
    peter> R's statistical and graphics routines.

There are two such modules, RPy and RSPython.  

I would agree, Python is an excellent language; my favorite, by far,
after Lisp and R.  Platform independence and "plays well with other
langauges" are quite robust.  HOWEVER, I'm getting less and less
convinced that the OOP aspects that Python excels at are suitable for
interactive data analysis (maybe for scripted analysis, but not for a
line-at-a-time approach, which R can encourage).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Aug 19 20:02:22 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 19 Aug 2002 15:02:22 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>

Dear R-devel,

Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
two linux boxes.  It only took me a couple of hours of screwing around to
get it working (sooner if I had RTFM).  

Our setup is: 2 dual PIII-866 Xeons, one with 2GB RDRAM, the other with
1.28GB RDRAM.  The first machine is acting as the NIS/NFS server.  both /usr
and /home are exported to the second machine, so both are seeing the same
copy of R.

I managed to get the following, using the same example that Prof. Tierney
used:

> system.time(nuke.boot <-
+             boot(nuke.data, nuke.fun, R=999, m=1,
+                  fit.pred=new.fit, x.pred=new.data))
[1] 29.38  0.52 30.68  0.00  0.00
> system.time(cl.nuke.boot <-
+             clusterCall(cl,boot,nuke.data, nuke.fun, R=500, m=1,
+                         fit.pred=new.fit, x.pred=new.data))
[1]  0.03  0.00 15.44  0.00  0.00

So I'm getting almost twice the performance, which is great.

Now the questions:

1.  Since each of these boxes has two CPUs, how do I spawn more than one
slave process on them?

2.  I was hoping I can see similar gain with randomForest, but that doesn't
seem to be the case:

> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
[1] 8.52 1.00 9.61 0.00 0.00
> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
+                                       iris[,5], ntree=5000))
[1]  1.38  0.14 15.50  0.00  0.00

What am I missing here?  Is there anything I can do to see similar gain as
the boot() example?

Thanks very much in advance for any pointers, and big thanks to the
developers of these great stuff!!

Regards,
Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 20:27:26 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 12:27:26 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <87bs7y1wf5.fsf@jeeves.blindglobe.net>

>>>>> "andy" == Andy Liaw <Liaw> writes:

    andy> Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
    andy> two linux boxes.  It only took me a couple of hours of screwing around to
    andy> get it working (sooner if I had RTFM).  

Which is why we wrote TFM.... :-).  It's the annoying part of
clustering (true for nearly every clustering system currently
available).

    andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
    andy> slave process on them?

Create a cluster of more virtual machines.  There isn't necessarily a
1-1 map from virtual machines to real machines (i.e. you can run 3
virtual machines on 1 host, but don't expect ANY gain...).

    andy> 2.  I was hoping I can see similar gain with randomForest, but that doesn't
    andy> seem to be the case:

    >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
    andy> [1] 8.52 1.00 9.61 0.00 0.00
    >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
    andy> +                                       iris[,5], ntree=5000))
    andy> [1]  1.38  0.14 15.50  0.00  0.00

    andy> What am I missing here?  Is there anything I can do to see similar gain as
    andy> the boot() example?

Monitor the processes with XPVM, as Michael showed.  If you were at
the session, you would've noted Antony's comment on visualization and
how nice it would've been if it was real time -- it was false, xpvm
does real-time monitoring.  

You also might write Michael for the augmentations he's done for
SNOW.  lina@u.washington.edu

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Mon Aug 19 23:21:31 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Tue, 20 Aug 2002 00:21:31 +0200 (MET DST)
Subject: PR#1914
Message-ID: <200208192221.AAA21461@pubhealth.ku.dk>

(1) With MSVCRT.DLL (version 4.20.6164) from
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe installed in
rw1051\bin directory, as per RWinFAQ 2.14:

RGUI caused an invalid page fault in
module MSVCRT.DLL at 017f:78014b90.
Registers:
EAX=0093007a CS=017f EIP=78014b90 EFLGS=00010246
EBX=017a2360 SS=0187 ESP=0091eee4 EBP=0091ef10
ECX=ffffffb5 DS=0187 ESI=00000000 FS=5bbf
EDX=81d7d520 ES=0187 EDI=00000022 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 47 c6 fe ff 8b
Stack dump:
004dd734 ffffffb5 0091ef0c 027f0e7f 00000001 00000000 00000022 00000000
004dddb7 004ddd7d 00000000 0091ef40 00482a81 017a2360 00000022 00f2da40

> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R

(2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
dump. I also see no link in the R-Bugs page to the either of these FAQs,
nor a list of bugs that should not be reported. If you wish users to
follow a specific protocol for reporting bugs (and the RFaq section 9
does not request port-mortem dumps, or list bugs nots to report),
specifying this protocol on the R-Bugs page will expedite matters.

-- Ronnen --

--
Ronnen Levinson, Ph.D.            \/      RML27@cornell.edu
scientist                         ||      http://ronnen.com
Lawrence Berkeley National Lab    /\      fax 425.955.1992

======================================
Arthur Dent hoped and prayed there wasn't an afterlife. Then, realizing
the contradiction,
he merely hoped there wasn't an afterlife.

-- Douglas Adams
======================================



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 14:00:28 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 15:00:28 +0200
Subject: PR#1914
In-Reply-To: <200208192221.AAA21461@pubhealth.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
Message-ID: <x2wuql1y8j.fsf@biostat.ku.dk>

RML27@cornell.edu writes:

> (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> dump. I also see no link in the R-Bugs page to the either of these FAQs,
> nor a list of bugs that should not be reported. If you wish users to
> follow a specific protocol for reporting bugs (and the RFaq section 9
> does not request port-mortem dumps, or list bugs nots to report),
> specifying this protocol on the R-Bugs page will expedite matters.

I think that was a typo: Brian meant "..shows you how to..", not
"..have to..". We wouldn't require that in general. However, I can't
find any description in there of how to use dr.Watson et al. either. (??)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 20 14:49:53 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 20 Aug 2002 14:49:53 +0100
Subject: NA and help page for "&" and "|"
Message-ID: <3D624901.C2D83100@durham.ac.uk>

Hi everyone,

Can I suggest an addition to the help page for logical AND and OR,
indicating the behaviour of NA (which is currently not mentioned at
all).  I think something simple like an extra paragraph in Details, eg

\code{NA} is a valid logical object.  Where a component of \code{x} or
\code{y} is \code{NA}, the result will be \code{NA} if the outcome is
ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
\code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

And so it might also be a good idea to add a truth-table to the
examples, eg

# construct truth table for logical &

x <- c(NA, FALSE, TRUE)
names(x) <- as.character(x)
outer(x, x, "&")

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 20 16:29:42 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Aug 2002 17:29:42 +0200
Subject: NA and help page for "&" and "|"
In-Reply-To: <3D624901.C2D83100@durham.ac.uk>
References: <3D624901.C2D83100@durham.ac.uk>
Message-ID: <15714.24678.198267.571629@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>>>>>     on Tue, 20 Aug 2002 14:49:53 +0100 writes:

    JonR> Hi everyone,
    JonR> Can I suggest an addition to the help page for logical AND and OR,
    JonR> indicating the behaviour of NA (which is currently not mentioned at
    JonR> all).  I think something simple like an extra paragraph in Details, eg

    JonR> \code{NA} is a valid logical object.  Where a component of \code{x} or
    JonR> \code{y} is \code{NA}, the result will be \code{NA} if the outcome is
    JonR> ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
    JonR> \code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

    JonR> And so it might also be a good idea to add a truth-table to the
    JonR> examples, eg

    JonR> # construct truth table for logical &

    JonR> x <- c(NA, FALSE, TRUE)
    JonR> names(x) <- as.character(x)
    JonR> outer(x, x, "&")

Thanks a lot, Jonathan, for the helpful suggestions.
I'm adding these to R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Tue Aug 20 20:30:22 2002
From: lina@u.washington.edu (Michael Na Li)
Date: Tue, 20 Aug 2002 12:30:22 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com> ("Liaw,
 Andy"'s message of "Mon, 19 Aug 2002 15:02:22 -0400")
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>

>>>>> On Mon, 19 Aug 2002 15:02:22 -0400, "Liaw, Andy" <andy_liaw@merck.com> said:


Andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
Andy> slave process on them?

Note unlike MPI, PVM has no access to hardware information like the number of
CPUs on each node.  So there is no restriction on how many tasks one can spawn
on the cluster.  More tasks may be desirable when some of them are less CPU
intensive jobs.  For instances, tasks that monitor the activity of the
network, report host or task failure and spawn new task or add new hosts, etc.

Andy> 2.  I was hoping I can see similar gain with randomForest, but that
Andy> doesn't seem to be the case:

>> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
Andy> [1] 8.52 1.00 9.61 0.00 0.00
>> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
Andy> +                                       iris[,5], ntree=5000))
Andy> [1]  1.38  0.14 15.50  0.00  0.00

Andy> What am I missing here?  Is there anything I can do to see similar gain
Andy> as the boot() example?

I tried this example and found that most of the extra time is overhead, the
packing and unpacking of the messages.  When saving the object iris.rf, its
size is over 12M.  So it might be desirable to process the returned result in
each slave first and only return information needed.  

I got similar timing with our cluster.  Saving and loading the object to/from
a file require about 1.5 seconds each, which I assume is the cost of the
serialization (plus file reading and writing).  Then it seems the packing (as
bytes), transferring, and unpacking the object take 7-8 seconds??

I wonder how much the serialization itself hurts the performance.  Would
sending raw numbers with pvm routines improve the performance?

Michael

(BTW, is there a convenient function in R to examine the size of an object?)

-- 
---------------------------------------------------
Michael Na Li
Email: lina@u.washington.edu
Department of Biostatistics, Box 357232
University of Washington, Seattle, WA 98195  
---------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 20 20:36:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Aug 2002 20:36:14 +0100 (BST)
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <Pine.LNX.4.31.0208202035210.17166-100000@gannet.stats>

On Tue, 20 Aug 2002, Michael Na Li wrote:

> (BTW, is there a convenient function in R to examine the size of an object?)

object.size, but see the caveats on its help page.  Because of sharing,
it's none too well defined.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Aug 20 20:53:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Aug 2002 12:53:09 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
 <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <87y9b1b93u.fsf@jeeves.blindglobe.net>

>>>>> "michael" == Michael Na Li <lina@u.washington.edu> writes:

    michael> I got similar timing with our cluster.  Saving and loading the object to/from
    michael> a file require about 1.5 seconds each, which I assume is the cost of the
    michael> serialization (plus file reading and writing).  Then it seems the packing (as
    michael> bytes), transferring, and unpacking the object take 7-8 seconds??

    michael> I wonder how much the serialization itself hurts the performance.  Would
    michael> sending raw numbers with pvm routines improve the performance?

It might.  It is "well-known" that PVM (and MPI, and other
message-passing systems) have a marshalling overhead that can be
easily beat by RPC or direct socket programming.  This suggests that
the lower/rawer the data at the message passing stage, the faster it
might be.  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Aug 20 22:39:53 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 20 Aug 2002 14:39:53 -0700
Subject: various uploads
Message-ID: <5C880122-B485-11D6-990C-003065A21C86@stat.ucla.edu>


--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	delsp=yes;
	charset=US-ASCII;
	format=flowed

ftp://gifi.stat.ucla.edu/pub

1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from
Savannah CVS.

2. gcc-3.3.tar.gz is the latest version from Darwin CVS of gcc, g77, and
gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is
experimental and may not always work properly.

3. But it does compile and build R. See R-devel-gcc33.tar.gz, which
is an alternative to R-devel-f2c.tar.gz.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/enriched;
	charset=US-ASCII

ftp://gifi.stat.ucla.edu/pub


1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from

Savannah CVS.


2. <fontfamily><param>Lucida Grande</param>gcc-3.3.tar.gz is the
latest version from Darwin CVS of gcc, g77, and

gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is

experimental and may not always work properly.


3. But it does compile and build R. See R-devel-gcc33.tar.gz, which

is an alternative to R-devel-f2c.tar.gz.</fontfamily>

===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics

US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA
90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu  

                 www: http://www.stat.ucla.edu/~deleeuw

============================================================================

         Remember, wherever you go, there you are. --- Buckaroo Banzai

============================================================================


--Apple-Mail-2-32785479--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 22:41:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 23:41:32 +0200
Subject: PR#1914
In-Reply-To: <x2wuql1y8j.fsf@biostat.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
 <x2wuql1y8j.fsf@biostat.ku.dk>
Message-ID: <x2znvhcinn.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> RML27@cornell.edu writes:
> 
> > (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> > dump. I also see no link in the R-Bugs page to the either of these FAQs,
> > nor a list of bugs that should not be reported. If you wish users to
> > follow a specific protocol for reporting bugs (and the RFaq section 9
> > does not request port-mortem dumps, or list bugs nots to report),
> > specifying this protocol on the R-Bugs page will expedite matters.
> 
> I think that was a typo: Brian meant "..shows you how to..", not
> "..have to..". We wouldn't require that in general. However, I can't
> find any description in there of how to use dr.Watson et al. either. (??)

It's "Dr.Mingw" and it's in sec.7.4 (thanks and sorry, Brian). It's
not for the faint-hearted, but it is about the only way to really get
to the bottom of this sort of problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lingyun.Shi@fimat.com  Tue Aug 20 22:53:52 2002
From: Lingyun.Shi@fimat.com (Lingyun Shi)
Date: Tue, 20 Aug 2002 16:53:52 -0500
Subject: Failed on building libR.so
Message-ID: <OF2C767AA9.C5930284-ON86256C1B.00772254@fimat.com>


Hi,

I Failed to create libR.so. here's what I did and what's the error msg:

Under the R source installation directory : do:
1. make distclean
2. ./configure --enable-R-shlib
3. make

The error is :

gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H  -fPIC  -g -O2 -c connections.c -o connections.lo
connections.c:775: zlib.h: No such file or directory
*** Error code 1
make: Fatal error: Command failed for target `connections.lo'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'


I checked the directory, zlib.h is under /src/macintosh/zlib directory. How
should I fix this problem? Could someone help?

Thanks

Kate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chris@everyrecruiter.com  Tue Aug 20 20:12:28 2002
From: chris@everyrecruiter.com (Chris)
Date: Tue, 20 Aug 2002 19:12:28
Subject: New Position
Message-ID: PM20007:12:28 PM

This is an HTML email message.  If you see this, your mail client does not support HTML messages.

------=_NextPart_PWHGVBDQBM
Content-Type: text/html;charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<HTML>
<HEAD>
<TITLE>New Position</TITLE>

<BODY VLINK="#009999">

<HR>

<BASEFONT SIZE="3">

<P><FONT FACE="Arial"><FONT COLOR="#003399"><b>If you are going to find the job you want,</b> it will be here at <A HREF="http://www.everyrecruiter.com">http://www.everyrecruiter.com.</A></p>

<P><FONT FACE="Arial"><b>Why?</b> Because it is the only way you can connect with <B>employers</B>...</b>lots of employers.</FONT></P> 

<P><FONT FACE="Arial">Most jobseekers have come to realize that the old methods of looking for a job no longer work, but they don't know what else to do.</FONT></P> 

<P><FONT FACE="Arial"><b>A completely different approach is required.</b></FONT></p> 

<p><FONT FACE="Arial">Fewer and fewer employers are willing to deal with the avalanche of resumes they receive when they advertise an open position.That is why there is a decreasing number jobs advertised in the paper.</FONT></p>

<p><FONT FACE="Arial"> Instead, most employers prefer to search for employees at their convenience. And the place where most employers go to search is <A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com.</A></FONT></p>

<p><FONT FACE="Arial"><b>Will the employers who look today be able to find you?</b></FONT></p>

<p><FONT FACE="Arial"><b> Get connected -- Get the job!</p>
<p><A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com</A></b></FONT></p>
<HR></Body></Head></html>
------=_NextPart_PWHGVBDQBM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Aug 2002 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208210515.g7L5F4D05179@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Aug 21 14:33:58 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 21 Aug 2002 09:33:58 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5C6@usrymx10.merck.com>

> From: Michael Na Li [mailto:lina@u.washington.edu]
> Andy> 2.  I was hoping I can see similar gain with 
> randomForest, but that
> Andy> doesn't seem to be the case:
> 
> >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], 
> ntree=10000))
> Andy> [1] 8.52 1.00 9.61 0.00 0.00
> >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
> Andy> +                                       iris[,5], ntree=5000))
> Andy> [1]  1.38  0.14 15.50  0.00  0.00
> 
> Andy> What am I missing here?  Is there anything I can do to 
> see similar gain
> Andy> as the boot() example?
> 
> I tried this example and found that most of the extra time is 
> overhead, the
> packing and unpacking of the messages.  When saving the 
> object iris.rf, its
> size is over 12M.  So it might be desirable to process the 
> returned result in
> each slave first and only return information needed.  
> 
> I got similar timing with our cluster.  Saving and loading 
> the object to/from
> a file require about 1.5 seconds each, which I assume is the 
> cost of the
> serialization (plus file reading and writing).  Then it seems 
> the packing (as
> bytes), transferring, and unpacking the object take 7-8 seconds??

I tried the following, and it seems about right.  (I used a socket cluster
with 3 nodes.  PVM cluster gave similar result.)

system.time(iris.rf <- randomForest(iris[,1:4], iris[,5],
ntree=30000)$votes)
[1] 24.57  3.33 27.98  0.00  0.00

system.time(clusterEvalQ(cl, {data(iris); randomForest(iris[, 1:4],
                                      iris[, 5], ntree=10000)$votes}))
[1]  0.01  0.00 12.70  0.00  0.00

I was planning to add an alternative random forest interface that does not
return the entire forest (to save memory).  Seems like that item just got
promoted on my to-do list...

Thanks very much for the help!!

Andy

> I wonder how much the serialization itself hurts the 
> performance.  Would
> sending raw numbers with pvm routines improve the performance?
> 
> Michael
> 
> (BTW, is there a convenient function in R to examine the size 
> of an object?)
> 
> -- 
> ---------------------------------------------------
> Michael Na Li
> Email: lina@u.washington.edu
> Department of Biostatistics, Box 357232
> University of Washington, Seattle, WA 98195  
> ---------------------------------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmoffet@nwrc.ars.usda.gov  Wed Aug 21 15:10:49 2002
From: cmoffet@nwrc.ars.usda.gov (cmoffet@nwrc.ars.usda.gov)
Date: Wed, 21 Aug 2002 16:10:49 +0200 (MET DST)
Subject: error in plot.formula(..., ask = FALSE) (PR#1923)
Message-ID: <200208211410.QAA07088@pubhealth.ku.dk>

Full_Name: Corey A. Moffet
Version: 1.5.1
OS: windows 2000
Submission from: (NULL) (199.133.140.156)


Passing ask = FALSE in plot.formula returns an error.

For example:
-------------------

dat <- data.frame(y  =            c(1,1,1,2,2,2,3,3,3,4,4,4), 
                  x1 = as.ordered(c(1,1,1,1,1,1,2,2,2,2,2,2)),
                  x2 = as.ordered(c(1,1,1,2,2,2,1,1,1,2,2,2)))

plot(y ~ x1 + x2, data = dat) # Works fine "interactively" asking:
# "Hit <Return> to see next plot:"
#  But this causes problems when it is run in a batch file.

plot(y ~ x1 + x2, data = dat, ask = FALSE) # gives error:
# "Error in model.frame(formula, rownames, variables, varnames, extras,
# extranames,  :   variable lengths differ"

-------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 21 20:06:21 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 21 Aug 2002 15:06:21 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
In-Reply-To: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>; from uluru@email.unc.edu on Sun, Aug 18, 2002 at 05:28:10PM -0400
References: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>
Message-ID: <20020821150621.F659@jessie.research.bell-labs.com>


Hi Forrest.

  It is definitely preferable to avoid giving up existing XLisp-Stat
code, especially when the facilities you probably want are not
currently part of R. Working from the RGtk or tcltk packages to create
dynamic graphics involves a lot of work, both design and programming
given that the R graphics are based on a static model.
  
  I wonder if ggobi and the programmatic access via Rggobi and RGtk
would give you similar facilities to what currently exists in XLisp.

 As you mention, it would be easiest to combine R and XLisp-Stat so
that you could use existing XLisp code and make use of R's statistical
functionality, etc. This is a perfect example for the use of embedding
one system inside the other; something we have done as part of the
Omegahat project for numerous languages.  

So with some vital help from Luke, I have created an R package that
provides a very experimental interface between R and XLisp by allowing
XLisp to be embedded in R. The package contains and requires some
minor modifications to XLisp which allow it to be used as a shared
library and currently this only works on Unix.  It allows one to call
arbitray XLisp functions, however there is an issue with the graphics
that I haven't sorted out yet.  It did take less than a day
to put together so far, so I am reasonable confident that I and others
can iron out the details and make it reasonably complete and robust.

The package is available from
  http://www.omegahat.org/RXLisp

Given that I only spent a day on it, don't expect too much
in the way of documentation, etc. Just e-mail me if you
have problems. I'd be very happy to hear from interested
people and we can

 Duncan.


uluru@email.unc.edu wrote:
> I have been taking a break for the last month or so, and am only just
> now catching up on my email.  Otherwise, I would have joined this
> discussion earlier.  And... I apologize for the length of this, but I
> don't think it is overly long.
> 
> >From the amount of activity in the LispStat news group (none), it seems
> that LispStat is dead. We all know that Luke is working on R and not on
> LispStat, and that Jan has switched UCLA over from LispStat to R. And we
> have not heard from users of LispStat for some time.  So, it seems no
> one is using LispStat.
> 
> For me, at least, this is not the case. As the developer of ViSta, I
> have and still am using LispStat a great deal. In fact, I cannot
> conceive of doing what I do with any other system.  
> 
> Of course, since I use it so much, I am very aware of LispStat's
> strengths and weaknesses, and want to add my views to the discussion.
> However, I spend all my time using only LispStat, so I can't make any
> comparisons to R or to any other systems.
> 
> To me, the strengths of LispStat are:
> 1) The dynamic, highly interactive graphics
> 2) The object system
> 3) Lisp language and byte compiler
> 
> These strengths make LispStat an ideal system for implementing
> statistical systems. It is less suited for doing statistical analysis.
> As a result, the most significant uses of LispStat have been statistical
> systems such as Arc and ViSta.
> 
> In the work I've done with LispStat,  ViSta's spreadplot architecture is
> the best example of LispStat being used to implement a statistical
> (sub)system (described in a forthcoming JCGS paper by myself, Pedro
> Valero, Richard Faldowski and Carla Bann). 
> 
> The weaknesses of LispStat are:
> 1) No high-level analysis modules
> 2) No standards for data sets, models, etc.
> 3) No user-oriented data manipulation language
> 4) Totally inadequate documentation
> 5) Poor or non-existant printing 
> 6) No static graphic manipulation facilities
> 7) The underlying operating system interfaces are old.
> 
> ViSta attempts to take care of these weaknesses, with varying degrees of
> success. Specifically:
> 1) ViSta has high-level analysis plugins. The method for writing these
> plugins is documented. I believe this very well solves the first weakness. 
> 2) ViSta's statistical object architecture -- a hierarchy of objects
> that include datasets, datasheets, data editors, transformations,
> analysis methods, models and plugins --- solves the lack of standards
> for such things. The implementation is slow for data objects and needs
> to be re-architected. The implementation for the others is more than
> adequate.
> 3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
> C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
> awkward lisp equivalent:
> (setf a (^ (* 2 (+ b c)) 2)) 
> (I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
> 4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
> combinations, are working on the documentation problem.
> 5) Printing, while better than LispStat, is still not adequate.
> 6) Static graphics manipulation, as in SAS (and, apparently R), is
> totally lacking.
> 7) Nothing has been done about this.
> 
> (Note that the newest version of ViSta use a modified version of
> LispStat that only works under Windows, so that Mac/Unix users don't
> have all the new features. This problem can be fixed by someone familiar
> with LispStat and Unix.)
> 
> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
> 
> Anyone know how to do that?
> 
> Forrest
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ld-temp-qt3i@pobox.com  Thu Aug 22 03:59:01 2002
From: ld-temp-qt3i@pobox.com (ld-temp-qt3i@pobox.com)
Date: Thu, 22 Aug 2002 04:59:01 +0200 (MET DST)
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
Message-ID: <200208220259.EAA09000@pubhealth.ku.dk>

I can't get it to run. On launch I get this:

dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
/sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
/sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

Thanks.

Linc Davis


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Aug 22 04:24:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 21 Aug 2002 20:24:14 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <200208220259.EAA09000@pubhealth.ku.dk>
References: <200208220259.EAA09000@pubhealth.ku.dk>
Message-ID: <87elcrk23l.fsf@jeeves.blindglobe.net>

>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:

    ld-temp-qt3i> I can't get it to run. On launch I get this:
    ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
    ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
    ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

    ld-temp-qt3i> Thanks.

    ld-temp-qt3i> Linc Davis


Really weird -- looks like you are running a non-fink R with a fink
setup existing.

I think you want one or the other, but not both.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 04:56:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 20:56:24 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <87elcrk23l.fsf@jeeves.blindglobe.net>
Message-ID: <20D1BB2D-B583-11D6-9066-000393860F3C@stat.ucla.edu>

R-1.5.1.dmg.tar.gz installs both the R stuff in /usr/local and the  
necessary
fink stuff (all dylibs) in /sw. So you need both. But Linc has more  
than (s)he
needs: two definitions of _PC. Is this the CRAN version or the  
gifi.stat.ucla.edu
version ?

On Wednesday, August 21, 2002, at 08:24 PM, A.J. Rossini wrote:

>>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:
>
>     ld-temp-qt3i> I can't get it to run. On launch I get this:
>     ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple  
> definitions of symbol _PC
>     ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so)  
> definition of _PC
>     ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition  
> of _PC
>
>     ld-temp-qt3i> Thanks.
>
>     ld-temp-qt3i> Linc Davis
>
>
> Really weird -- looks like you are running a non-fink R with a fink
> setup existing.
>
> I think you want one or the other, but not both.
>
> best,
> -tony
>
> --  
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:00:54 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:00:54 -0700
Subject: RXLisp
Message-ID: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>

I was obviously fascinated by Duncan's earlier message on RXLisp.

I managed to build a working version of RXLisp for OS X, by some
unabashed and rather uninformed hacking. I compiled XLISP-STAT using
the gcc flags -fno-common  and --no-cpp-precomp (not sure if they
are necessary or not, they are part of an older hack). I "make
libxlisp.so", using Duncan's replacement for the three XLS files
(I am not sure if these are necessary with my build strategy, probably
not).  I do not really make libxlisp.so, because there is no -shared  
flag for
the static linker in OS X. I just leave the XLS directory with a broken  
link
and a lot of foo.o files.

Then I do , in the appropriate place,

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

but the final link of this  is

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
          -L/Users/deleeuw/MyStuff/Developer/xlispstat-3-52-18 -lxlisp

This breaks, of course, there is no libxlisp. I then move to RXLisp/src  
and do

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
	$XLISP_SRC_DIR/*.o -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl

i.e. I link all the foo.o files Duncan puts in libxlisp.so. Then once  
more

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

which puts everything in the R hierarchy. Now I can do

[cabledoc68:~/Desktop] deleeuw% R

R : Copyright 2002, The R Development Core Team
Version 1.5.1 Patched (2002-08-04)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > library(RXLisp)
 > .XLispInit()
XLISP-PLUS version 3.04
Portions Copyright (c) 1988, by David Betz.
Modified by Thomas Almy and others.
XLISP-STAT Release 3.52.18 (Beta).
Copyright (c) 1989-1999, by Luke Tierney.

NULL
 > .XLisp("+",1,2,3)
[1] 6
 > .XLisp("max",1,2)
[1] 2
 > .XLisp("tan",.25)
[1] 0.2553419
 > .XLisp("sum",1:10)
[1] 55
 > .XLisp("gcd",as.integer(4),as.integer(16),as.integer(20))
[1] 4
 > .XLisp("list",1,2,3,4,5,6)
[1] 1 2 3 4 5 6
 > q()

RXLisp can of course only do subr's (i.e. functions defined
in compiled C code in XLS), and it does not know about
XLS objects, graphics, arrays, vectors, etc. I am not sure
if my version, which does not use the libxlisp.so shared
lib at all, can do all that Duncan's version can. I will put
RXLisp as a binary package on http://gifi.stat.ucla.edu/pub
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zed.shaw@ubc.ca  Thu Aug 22 07:28:25 2002
From: zed.shaw@ubc.ca (Zed A. Shaw)
Date: Wed, 21 Aug 2002 23:28:25 -0700
Subject: R_Interactive decision to halt execution during errors
Message-ID: <B989D299.317A%zed.shaw@ubc.ca>

Hi,

I'm currently trying to use R as a back-end from an interface (you may have
seen me on the help list), and I'm running into something that is rather
confusing.  The following lines in main/errors.c of R 1.5.1:


439:    if ( !R_Interactive && !haveHandler && inError ) {
440:        REprintf("Execution halted\n");
441:        R_CleanUp(SA_NOSAVE, 1, 0); /* quit, no save, no .Last, status=1
*/
442:    }


Which seems to not make any sense at all.  I've scoured the code and can't
figure out what the rationale is for halting execution simply because the
input is not interactive.  I'm assuming the rationale was that, if input is
not interactive, then R is running as a script interpreter, but this isn't
the case since the stdio can be redirected in different ways (and actually
this is encouraged in the documentation).

R_Interactive is determined by a call to isatty(0) in unix/system.c which is
used in various places to control how R interacts with the user.  The
problem I see with this is that, there is no mode for "not interactive, but
don't quit" or "proxy mode".  I assumed --slave would do this (as, that
seems to be what the docs imply), but it doesn't.

So, is a patch in order, or is there another way around it?  I'm thinking,
the above if statement should have one additional and case for !slaveMode,
so that it can be run as a back-end even though the terminal is not
interactive.  Either that, or I can somehow install an error handler and
this code will be avoided.

I can do the patch for this, unless someone has a better way to fix it.  Let
me know what you think.

Finally, having read through most of this code, I feel that it is a bit
confused as to whether R is an interactive console or a script interpreter.
The above code assumes that, if R is not interactive, then it is a script
interpreter.  Yet, there's no real way to tell R to simply run a script file
other than sending it through stdio.  Effectively, the stdio channel becomes
confused with the dual purpose of being an interface or a file stream with
no way for R to differentiate.  I would prefer to see R act like most other
scripting languages:  stdio is reserved for interaction with the user and
does not abort on failure like above.  Meanwhile, a --script option is used
to run a given script like perl or python does, and would be expected to
halt on errors.  Does that make sense?

Anyway, let me know the best course of action.

-- 
Zed A. Shaw



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:59:03 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:59:03 -0700
Subject: More XLisp in R
In-Reply-To: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>
Message-ID: <A48CB4E9-B59C-11D6-9066-000393860F3C@stat.ucla.edu>

Clearly the beauty of Lisp sort of gets lost. Also RXLisp
cannot return logicals, strings, lists, characters (no convertors
yet). Still, none of that is essential, and all of this is exciting.

 > .XLisp("mean",.XLisp("list",1,2))
[1] 1.5
 > .XLisp("iseq",as.integer(10))
  [1] 0 1 2 3 4 5 6 7 8 9
 > x<-1:10
 > .XLisp("elt",x,as.integer(1))
[1] 2
 > .XLisp("sample",1:20,as.integer(10),T)
  [1]  9 18  7  4 13 19  9  7  9  3
 > .XLisp("repeat",1:10,as.integer(2))
  [1]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10
 > .XLisp("uniform-rand",as.integer(10))
  [1] 0.33747593 0.69355427 0.97968865 0.39687786 0.81754441 0.59710673
  [7] 0.02034651 0.48217749 0.29217949 0.05538188
 > .XLisp("princ",3)
3.0[1] 3
 > .XLisp("order",c(1,3,2,5,4))
[1] 0 2 1 4 3
 > .XLisp("sort-data",c(1,3,2,5,4))
[1] 1 2 3 4 5
 > .XLisp("bivnorm-cdf",.3,.2,.6)
[1] 0.4551159
 > y<-"abcd"
 > .XLisp("length",y)
[1] 4
 > sapply(-9:9/10,function(x) .XLisp("bivnorm-cdf",0,0,x))
  [1] 0.07178343 0.10241662 0.12659185 0.14758378 0.16666680 0.18450516
  [7] 0.20150674 0.21795294 0.23405789 0.25000000 0.26594211 0.28204706
[13] 0.29849326 0.31549484 0.33333320 0.35241622 0.37340815 0.39758338
[19] 0.42821657
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 22 10:47:22 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 22 Aug 2002 11:47:22 +0200 (MET DST)
Subject: as.list() coerces logical to integer (PR#1926)
Message-ID: <200208220947.LAA12226@pubhealth.ku.dk>

A symptom was seen by Ole Christensen when using sapply(*, is.numeric).

It can be simplified  to
``lapply coerces logical to integer'' :

  > lapply(TRUE, typeof)
  [[1]]
  [1] "integer"

But the bug is not in lapply's C code, but rather before that, 
namely in as.list() :

> typeof(as.list(TRUE)[[1]])
[1] "integer"

I'm looking into fixing this (for R-devel aka "1.6.0 unstable")
right away.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lylek@utk.edu  Thu Aug 22 13:45:47 2002
From: lylek@utk.edu (lylek@utk.edu)
Date: Thu, 22 Aug 2002 14:45:47 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208221245.OAA14923@pubhealth.ku.dk>

Full_Name: Lyle W. Konigsberg
Version: 1.5.1
OS: Windows
Submission from: (NULL) (160.36.64.99)


I apparently found an error in how "deriv" puts a derivative to the screen
(though the internal representation is correct).  Here's what I was doing for a
class example:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
-15 * (1/p^2) + 11 * (1/(1 - p)^2)
> eval(D(D(lnlk,"p"),"p"))
[1] -106.5212
> -15 * (1/p^2) + 11 * (1/(1 - p)^2)
[1] 16.38788

>From S+ I have the following:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
 - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
[1] -106.5212

R seems to be dropping the outer parentheses.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From nerone4@hotmail.com  Fri Aug 23 02:00:26 2002
From: nerone4@hotmail.com (nerone4@hotmail.com)
Date: Thu, 22 Aug 2002 09:00:26 -1600
Subject: PROTECT YOUR COMPUTER,YOU NEED SYSTEMWORKS2002!                23027
Message-ID: <00007e2e151b$0000565e$000034ae@kppublish.ru>

<html>

<head>
<meta http-equiv=3D"Content-Language" content=3D"en-us">
<meta name=3D"GENERATOR" content=3D"Microsoft FrontPage 4.0">
<meta name=3D"ProgId" content=3D"FrontPage.Editor.Document">
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dwindows-=
1252">
<title>Norton AD</title>
</head>

<body>

<table border=3D"3" cellspacing=3D"3" width=3D"469" cellpadding=3D"3" bgco=
lor=3D"#000080"  bordercolor=3D"#FFFFFF" style=3D"border-collapse: collaps=
e" bordercolordark=3D"#FFFFFF">
  <tr>
    <td width=3D"447">&nbsp;
      <table border=3D"1" width=3D"100%" bgcolor=3D"#FFFFFF" bordercolor=3D=
"#000080">
        <tr>
          <td width=3D"100%" align=3D"center"><font face=3D"Impact" size=3D=
"4" color=3D"#CC0000">ATTENTION:
            This is a MUST for <u>ALL</u> Computer Users!!!</font></td>
        </tr>
      </table>
      <p align=3D"center"><font size=3D"3" face=3D"Verdana"><b>&nbsp;<font=
 color=3D"#FFFFFF">*NEW
      - Special Package Deal!*</font></b></font></p>
      <table border=3D"8" width=3D"100%" height=3D"86" bgcolor=3D"#FFFFFF"=
 bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"80" align=3D"center"><font face=3D"=
Verdana, Arial, Helvetica, sans-serif" color=3D"#000099" size=3D"5"><b>Nor=
ton
            SystemWorks 2002 Software Suite<br>
            -<i>Professional Edition</i>-</b></font></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"62">
        <tr>
          <td width=3D"100%" height=3D"56" align=3D"center"><b><font face=3D=
"Tahoma" color=3D"#FFFFFF" size=3D"4">Includes
            Six - </font><i><font face=3D"Tahoma" size=3D"4" color=3D"#FFF=
F00">Yes 6!</font></i><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4"> =
- Feature-Packed Utilities<br>ALL
            for </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF00">=
1</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Special </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF=
00">LOW</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Price!</font></b></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"115" bgcolor=3D"#000080=
" bordercolor=3D"#FFFFFF">
        <tr>
          <td width=3D"100%" height=3D"109"><b><font face=3D"Tahoma" size=3D=
"2" color=3D"#FFFF00">This Software Will:</font><font face=3D"Tahoma" size=
=3D"2" color=3D"#FFFFFF"><br>- Protect your
            computer from unwanted and <i> hazardous</i> viruses<br>- Help=
 secure your
            private &amp; valuable information<br>- Allow you to transfer =
files
            and send e-mails <u> safely</u><br>- Backup your ALL your data=
 quick and
            easily<br>- Improve your PC's performance w/<i>superior</i>
            integral diagnostics!<br></font></b></td>
        </tr>
      </table>&nbsp;
      <table border=3D"4" width=3D"100%" height=3D"4" bgcolor=3D"#FFFFFF" =
bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"1">
            <p align=3D"center"><b><font face=3D"Verdana" size=3D"5"><font=
 color=3D"#000000"><font color=3D"#ff0000">6</font>
            </font><font color=3D"#000080">Feature-Packed Utilities<br></f=
ont><font color=3D"#000000">
            </font><u><font color=3D"#ff0000">1</font></u><u><font color=3D=
"#000000"> 
            </font><font color=3D"#000080"> Great
            Price</font></u><font color=3D"#000000"> <br>
            </font><font color=3D"#000080">
            A</font><font color=3D"#000000"> <font color=3D"#ff0000">$300+=
</font>  </font><font color=3D"#000080"> Combined Retail Value
            <i>YOURS</i> for Only</font><font color=3D"#000000"> <font col=
or=3D"#ff0000">$29.99!</font><br>
            </font></font><font face=3D"Verdana" size=3D"4"><font color=3D=
"#000080">&lt;Includes
            </font><font color=3D"#FF0000">FREE</font><font color=3D"#0000=
80"> Shipping!&gt;</font></font></b></td>
        </tr>
      </table>
    <p align=3D"Center"><b> <font face=3D"Arial, Helvetica, sans-serif"  c=
olor=3D"#ffffff">Don't fall prey to destructive viruses
    or hackers!<br>Protect&nbsp; your computer and your valuable  informat=
ion
    and</font></b></p>
      <table border=3D"1" width=3D"100%" height=3D"44" bordercolor=3D"#FFF=
FFF">
        <tr>
          <td width=3D"100%" height=3D"38" bgcolor=3D"#0000FF" align=3D"ce=
nter"><b><font face=3D"Verdana" size=3D"4" color=3D"#FFFFFF"><a href=3D"ht=
tp://www.fastbizonline.com/systemworksed.htm" style=3D"color: #FFFFFF; fon=
t-family: Verdana; font-size: 14pt; font-weight: bold">-&gt;
            CLICK HERE to Order Yours NOW! &lt;-</a></font></b></td>
        </tr>
      </table>
      <p align=3D"Center"><b><font face=3D"Arial" size=3D"5"><a style=3D"t=
ext-decoration: none; background-color: rgb(255,255,0); color: #0000FF" hr=
ef=3D"http://www.fastbizonline.com/systemworksed.htm">Click
      here for more information</a></font></b></p>
      <p align=3D"Center"><font face=3D"Tahoma" size=3D"1" color=3D"#fffff=
f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </font><p align=3D"Center"><font color=3D"#ffffff" size=3D"1" face=3D=
"Tahoma">Your
      email address was obtained from an opt-in list. Opt-in MRSA List<br>
      &nbsp;Purchase Code # 312-1-010.&nbsp;&nbsp;If you wish to be unsubs=
cribed
      from this list, please <a style=3D"COLOR: #ffffcc" href=3D"http://ww=
w.fastbizonline.com/removeme.html">Click
      here</a> and press send to be removed. If you have previously unsubs=
cribed
      and are still receiving this message, you may email our <a style=3D"=
COLOR: #ffffcc" href=3D"mailto:sortofridiculous@bigfoot.com?Subject=3DAbus=
e Report">Spam
      Abuse Control Center</a>. We do not condone spam in any shape or for=
m.
      Thank You kindly for your cooperation.</font></td>
  </tr>
</table>

</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 22 16:39:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 22 Aug 2002 08:39:59 -0700 (PDT)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208220836271.93374-100000@homer16.u.washington.edu>

On Thu, 22 Aug 2002 lylek@utk.edu wrote:

> Full_Name: Lyle W. Konigsberg
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (160.36.64.99)
>
>
> I apparently found an error in how "deriv" puts a derivative to the screen
> (though the internal representation is correct).  Here's what I was doing for a
> class example:

Yes, it's the same as bugs 1119, 1797 and 1637 and probably some others.
The deparse doesn't always put parentheses in correctly.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 22 16:45:19 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2002 17:45:19 +0200
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
References: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <x2n0re3njk.fsf@biostat.ku.dk>

lylek@utk.edu writes:

> > lnlk<-expression(15*log(p)+11*log(1-p))
> > p<-15/26
> > D(D(lnlk,"p"),"p")
>  - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> > - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> [1] -106.5212
> 
> R seems to be dropping the outer parentheses.

Yes. Duncan Murdoch has been working on that recently.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From iwhite@staffmail.ed.ac.uk  Thu Aug 22 20:46:00 2002
From: iwhite@staffmail.ed.ac.uk (iwhite@staffmail.ed.ac.uk)
Date: Thu, 22 Aug 2002 21:46:00 +0200 (MET DST)
Subject: aov bug? (PR#1930)
Message-ID: <200208221946.VAA17276@pubhealth.ku.dk>


R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> invisible(options(echo = TRUE))
> R.version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    4.0
year     2001
month    12
day      19
language R
> r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> trt <- factor(rep(1:4,c(5,6,5,5)))
> Y <- r/n
> z <- aov(Y ~ trt,weights=n)
> summary(z)
            Df  Sum Sq Mean Sq F value    Pr(>F)
trt          3 16.0626  5.3542  12.330 0.0001577 ***
Residuals   17  7.3820  0.4342
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> z
Call:
   aov(formula = Y ~ trt, weights = n)

Terms:
                      trt Residuals
Sum of Squares  16.062629  0.395016
Deg. of Freedom         3        17

Residual standard error: 0.1524343
Estimated effects may be unbalanced
>
> # BUG? summary(z) correctly reports the weighted residual sum of squares,
> # but the output from z gives an unweighted residual sum of squares.
> # At the least the discrepancy between the two forms of output is
> # confusing.
> proc.time()
[1] 1.60 0.08 1.65 0.00 0.00
>

======================================
I.White
ICAPB, University of Edinburgh
Ashworth Laboratories, West Mains Road
Edinburgh EH9 3JT
Fax: 0131 667 3210  Tel: 0131 650 5490
E-mail: iwhite@staffmail.ed.ac.uk
======================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 06:54:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 06:54:41 +0100 (BST)
Subject: aov bug? (PR#1930)
In-Reply-To: <200208221946.VAA17276@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230647250.19835-100000@gannet.stats>

Maybe, but this is exactly what S does, and `weights' is not a documented
argument to aov().

I will alter print.aov to use the weighted form.

On Thu, 22 Aug 2002 iwhite@staffmail.ed.ac.uk wrote:

>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > invisible(options(echo = TRUE))
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    4.0
> year     2001
> month    12
> day      19
> language R
> > r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> > n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> > trt <- factor(rep(1:4,c(5,6,5,5)))
> > Y <- r/n
> > z <- aov(Y ~ trt,weights=n)
> > summary(z)
>             Df  Sum Sq Mean Sq F value    Pr(>F)
> trt          3 16.0626  5.3542  12.330 0.0001577 ***
> Residuals   17  7.3820  0.4342
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> > z
> Call:
>    aov(formula = Y ~ trt, weights = n)
>
> Terms:
>                       trt Residuals
> Sum of Squares  16.062629  0.395016
> Deg. of Freedom         3        17
>
> Residual standard error: 0.1524343
> Estimated effects may be unbalanced
> >
> > # BUG? summary(z) correctly reports the weighted residual sum of squares,
> > # but the output from z gives an unweighted residual sum of squares.
> > # At the least the discrepancy between the two forms of output is
> > # confusing.
> > proc.time()
> [1] 1.60 0.08 1.65 0.00 0.00
> >
>
> ======================================
> I.White
> ICAPB, University of Edinburgh
> Ashworth Laboratories, West Mains Road
> Edinburgh EH9 3JT
> Fax: 0131 667 3210  Tel: 0131 650 5490
> E-mail: iwhite@staffmail.ed.ac.uk
> ======================================
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alex_dacosta@yahoo.fr  Fri Aug 23 08:09:55 2002
From: alex_dacosta@yahoo.fr (alex_dacosta@yahoo.fr)
Date: Fri, 23 Aug 2002 09:09:55 +0200 (MET DST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
Message-ID: <200208230709.JAA19081@pubhealth.ku.dk>

Full_Name: Alexandre Da Costa
Version: 1.5.1
OS: Windows NT 4 on Virtual PC 4
Submission from: (NULL) (193.253.191.74)


I am using Virtual PC 4.0.2 for every day work.
I wanted to try connections of R 1.5.1 to Oracle DataBases.
But R is running but is not working at all !
The simple commands end with "no finite arguments" error.
See following session:
-----------------------------------------------------------
R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> max(1,2)
[1] Inf
Warning message: 
no finite arguments to max; returning -Inf 
> library()
Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
        missing value where logical needed
In addition: Warning messages: 
1: no finite arguments to max; returning -Inf 
2: NAs introduced by coercion 
> ls()
[1] "last.warning"
> dir()
 [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
 [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
[11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
[16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> 
Any Idea ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 08:28:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 08:28:33 +0100 (BST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230824090.2168-100000@gannet.stats>

1) What is `Virtual PC 4'?

2) Why did you send this as a bug report to R-bugs?
R does run on Windows NT, and does not claim to run under `Virtual PC 4'.
So this cannot be considered to be a bug in R.

I would have thought you would be sending the bug report to the vendors
of `Virtual PC 4'.  A request on R-help might have been appropriate.


On Fri, 23 Aug 2002 alex_dacosta@yahoo.fr wrote:

> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
>
>
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > max(1,2)
> [1] Inf
> Warning message:
> no finite arguments to max; returning -Inf
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  :
>         missing value where logical needed
> In addition: Warning messages:
> 1: no finite arguments to max; returning -Inf
> 2: NAs introduced by coercion
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"
> >
> Any Idea ?
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Aug 23 12:27:01 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 23 Aug 2002 06:27:01 -0500
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>; from alex_dacosta@yahoo.fr on Fri, Aug 23, 2002 at 09:09:55AM +0200
References: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <20020823062701.A2733@nokomis.stat.umn.edu>

This is a bug in Virtual PC [Virtual PC is a PC emulator for Mac OS].
It seems to have been introduced in 4.0 and is still there in 5.0.  It
isn't there in 3.0. I reported it to Connectix and the upshot was that
they don't care.  I gave them a simple program that reproduces it,

----------------------------------(itest.c)------------------------------------
#include <stdio.h>

double R_Zero_Hack = 0.0;

double R_PosInf, R_NegInf;

main()
{
    R_PosInf = 1.0/R_Zero_Hack;
    R_NegInf = -1.0/R_Zero_Hack;
    printf("%g %g\n", R_PosInf, R_NegInf);
}
-------------------------------------------------------------------------------

This should produce

1.#INF -1.#INF

and does on an intel machine and on VPC 3.03.  But on VPC 4.02 and 5.0
it produces

1.#INF 1.#INF

If a few more people complain to connectix maybe something will
happen.  Virtual PC is nice in many ways; in fact I can build the
windows version of R on it with no problems.  But to run the R tests
or do anything useful with R I have to switch to 3.03, which I keep
around for that reason.  It's pretty annoing.

luke

On Fri, Aug 23, 2002 at 09:09:55AM +0200, alex_dacosta@yahoo.fr wrote:
> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
> 
> 
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > max(1,2)
> [1] Inf
> Warning message: 
> no finite arguments to max; returning -Inf 
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
>         missing value where logical needed
> In addition: Warning messages: 
> 1: no finite arguments to max; returning -Inf 
> 2: NAs introduced by coercion 
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> > 
> Any Idea ?
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timur.Elzhov@jinr.ru  Fri Aug 23 14:15:28 2002
From: Timur.Elzhov@jinr.ru (Timur.Elzhov@jinr.ru)
Date: Fri, 23 Aug 2002 15:15:28 +0200 (MET DST)
Subject: dev2eps() prints ticks with wrong length! (PR#1933)
Message-ID: <200208231315.PAA23916@pubhealth.ku.dk>

Hello R experts!

I've tried to make single plot, but with changed ticks length,
and then copy them to file by dev.copy2eps(). Here is the code:

   x11 ( , 5, 5)
   par (tcl = +5) 
   plot (0)        # that's ugly plot with great ticks
                   # on the graph viewport.  cool :)
   dev.copy2eps (file = "out.eps")

Hm.. I had a look at "out.ps" and wondered that ticks
look like as they would being set to there *default* value,
"tcl" = -0.5!  =-O

Ok, I tried then to make same thing by slightly different way:

    postscript (file = "out1.eps", onefile = FALSE)
    par (tcl = +5)
    plot (0)
    dev.off ()

Beautiful -- all the ticks have an appropriate length, tcl == +5!

Why?


-------------- == --------------
    R> version
    _
    platform i386-pc-linux-gnu
    arch     i386
    os       linux-gnu
    system   i386, linux-gnu
    status
    major    1
    minor    5.1

-------------- == --------------


With best regards,
Timur V. Elzhov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 23 16:56:50 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 23 Aug 2002 11:56:50 -0400
Subject: [R] [ and setMethod conflict?
References: <763C275E6A1C2248AFD475237AD6135BE7CFA6@MSGBOS576NTS.fmr.com> <3D504E0E.84B79745@research.bell-labs.com>
Message-ID: <3D665B42.CA8F2E48@research.bell-labs.com>

The problem was in fact not protecting the argument list in certain
circumstances.  Should be fixed in the currently checked-in version.

John Chambers


John Chambers wrote:
> 
> Definitely something funny going on, but perhaps a little less sweeping
> than your comments suggest.
> 
> No explanation at the moment, but a couple of clues.
> 
> 1.  The problem doesn't seem to arise unless the data frame is large
> enough.  I parametrized the 5000 rows in your example and couldn't get
> the bizarre behavior until the number of rows was larger than 1000.
> 
> 2.  There is some reason to think that nested "[" expressions are
> related.  After rewriting your testFunc as follows, the random errors
> seemed to go away.
> 
> testFunc <- function(cur) {
>     ii <- order(cur[,1])
>   sorted <- cur[ii,]
>     ll <- !is.na(sorted[,1])
>    sorted[ll,]
>  }
> (the change is just to pull out the subset expressions that were
> arguments to other "[" expressions.)
> 
> I'm not an expert on R internals, but the combination of these might
> suggest garbage collection taking place in nested calls to the dispatch
> code for "[".
> 
> John Chambers
> 
> 
> "Bartz, Kevin" wrote:
> >
> > I noticed this oddity about [ and setMethod.
> >
> > First, I define testFunc, which sorts a data frame by the first column and
> > returns the entries that aren't NAs, and testIt, which runs testFunc
> > repeatedly on a random large data frame, each time saving the return into a
> > dummy placeholder (for demonstration's sake).
> >
> > > require(methods)
> > Loading required package: methods
> > [1] TRUE
> > > testFunc <- function(cur) {
> > +   sorted <- cur[order(cur[,1]),]
> > +   sorted[!is.na(sorted[,1]),]
> > + }
> > > testIt <- function(num)
> > +   for (i in 1:num) {
> > +     cat("iteration", i, "...\n")
> > +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> > +   }
> >
> > Let's test out testIt.
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > iteration 3 ...
> > iteration 4 ...
> > iteration 5 ...
> > iteration 6 ...
> > iteration 7 ...
> > iteration 8 ...
> > iteration 9 ...
> > iteration 10 ...
> >
> > So far, no problems. Next, I define myClass.
> >
> > > setClass("myClass", representation(mySlot = "numeric"))
> > [1] "myClass"
> > > setMethod("[", signature(x = "myClass"),
> > +           function(x, i, j, drop) "[ for myClass")
> > [1] "["
> >
> > Again, everything is fine. I've expanded [ to handle objects of class
> > myClass. But when we attempt to use testIt now, problems emerge:
> >
> > > testIt(10)
> > iteration 1 ...
> > Error in "[.data.frame"(cur, order(cur[, 1]), ) :
> >         unused argument(s) (.Method ...)
> >
> > Maybe that was just a fluke. Trying again, we get:
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > Error in sorted[, 1] : incorrect number of dimensions
> >
> > A different message every time, and the error seems no bug of mine (a
> > .Method argument? What is that?). In fact, testIt produces a seemingly
> > random response from R on each subsequent attempt--everything from
> > successful execution to similarly ambiguous errors to a process-killing "Bus
> > Error."
> >
> > All in all, it seems that once I've defined a new method for [ I can no
> > longer count on it to operate properly in any context.
> >
> > Is this the intended behavior? And if so, is there any way I can have one
> > class present that overloads [ and still use [ to reliably subset data
> > frames?
> >
> > Thanks,
> >
> > Kevin
> >
> > > R.version
> >          _
> > platform sparc-sun-solaris2.6
> > arch     sparc
> > os       solaris2.6
> > system   sparc, solaris2.6
> > status
> > major    1
> > minor    5.1
> > year     2002
> > month    06
> > day      17
> > language R
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jyan@stat.wisc.edu  Fri Aug 23 17:40:01 2002
From: jyan@stat.wisc.edu (jyan@stat.wisc.edu)
Date: Fri, 23 Aug 2002 18:40:01 +0200 (MET DST)
Subject: try-error in batch and interactive mode (PR#1934)
Message-ID: <200208231640.SAA25105@pubhealth.ku.dk>

I have a tiny R script performing two tasks, the first one of which may
contain error.

mammon(12)% cat z.R
version
options(show.error.messages = FALSE)
try(b <- log("foo"))  ## task 1
1 + 2                 ## task 2

Running in batch mode from a solaries machine, the second task never got
started; see below:

mammon(13)% R BATCH --vanilla -q z.R
mammon(14)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 

The second task does start if run on a linux machine.

ludwig(22)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 1 + 2
[1] 3
> proc.time()
[1] 0.87 0.07 0.90 0.00 0.00
> 

The same code works well if pasted into an interactive R window on both
system, of course.

Jun Yan

Department of Statistics          Office: CSSC 4252
university of Wisconsin-Madison   Tel: (608)262-7478 
1210 W. Dayton St.                Email: jyan@stat.wisc.edu
Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sat Aug 24 11:42:06 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Sat, 24 Aug 2002 12:42:06 +0200 (MET DST)
Subject: Inconsistent use of Perl? (PR#1937)
Message-ID: <200208241042.MAA26903@pubhealth.ku.dk>

Dear all

yesterday I got around to install R-1.5.1 on my machine at home which,
admittedly, is running a very old version of RedHat Linux.  I noticed
two things:

1) My pdflatex version is too old to produce the pdf version of the
   manuals.  `./configure' checks whether a recent version of makeinfo
is installed and tells you whether you can produce the info version or
not.  (I was told I couldn't, another reason to upgrate the machine.)
But during configuration there don't seem to be any check whether the
pdflatex is recent enough.  You might want to consider to add such a
check.

2) `./configure' checks whether Perl 5.004 (or later) is installed.
   On my machine Perl 5.00405 is installed and the installation went
ahead without problems.  However, when I then tried to install
R-1.5.1-recommended by issuing the command
        R CMD INSTALL *.tar.gz
in the appropriate directory, I received complaints about my Perl
version.  Essentially, R wanted all of a sudden Perl 5.005 (or
later).  An edited version of what I saw on my terminal is included
below.  I got the same kind of error message when I used from within R
`update.packages' and `install.packages' to update/install some
packages that are not in R-1.5.1-recommended.
As far as I can tell, the installation of the packages went ahead fine
except that the `TITLE' file for each of these packages is empty.
Hence, I guess the error message is produced when R tries to generate
and install the `TITLE' file.  However, the `TITLE' files for the
packages in the base distribution are fine.  This leaves me wondering
why during the base installation Perl 5.004 (or later) is good enough
for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
later) is required.   

Cheers,

        Berwin


----- Edited output from attempt to install R-1.5.1-recommended -----
absentia:/opt/R/R-1.5.1-recommended$ R CMD INSTALL *.tar.gz
Contains: MASS class nnet spatial
* Installing *source* package 'KernSmooth' ...
** libs
[...]
gcc -shared  -o KernSmooth.so blkest.o cp.o dgedi.o dgefa.o dgesl.o linbin.o linbin2D.o locpoly.o rlbin.o sdiag.o sstdiag.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `KernSmooth'
     Formats: text html latex example 
* DONE (KernSmooth)

* Installing *source* package 'MASS' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c MASS.c -o MASS.o
gcc -shared  -o MASS.so MASS.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `MASS'
     Formats: text html latex example 
  write.matrix                                              example
* DONE (MASS)

* Installing *source* package 'class' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c class.c -o class.o
gcc -shared  -o class.so class.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `class'
     Formats: text html latex example 
* DONE (class)

* Installing *source* package 'nnet' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c nnet.c -o nnet.o
gcc -shared  -o nnet.so nnet.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `nnet'
     Formats: text html latex example 
* DONE (nnet)

* Installing *source* package 'spatial' ...
** libs
[...]
gcc -shared  -o spatial.so init.o krc.o pps.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `spatial'
     Formats: text html latex example 
* DONE (spatial)

* Installing *source* package 'boot' ...
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]
* DONE (boot)

* Installing *source* package 'cluster' ...
** libs
[...]
gcc -shared  -o cluster.so clara.o daisy.o fanny.o meet.o mona.o pam.o spannel.o twins.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


* Installing *source* package 'foreign' ...
[...]
** libs
[...]
gcc -shared  -o foreign.so SASxport.o avl.o file-handle.o format.o minitab.o pfm-read.o sfm-read.o spss.o stataread.o    
** R
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 24 21:43:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 24 Aug 2002 21:43:21 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <200208241042.MAA26903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>

On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:

> Dear all
>
> yesterday I got around to install R-1.5.1 on my machine at home which,
> admittedly, is running a very old version of RedHat Linux.  I noticed
> two things:
>
> 1) My pdflatex version is too old to produce the pdf version of the
>    manuals.  `./configure' checks whether a recent version of makeinfo
> is installed and tells you whether you can produce the info version or
> not.  (I was told I couldn't, another reason to upgrate the machine.)
> But during configuration there don't seem to be any check whether the
> pdflatex is recent enough.  You might want to consider to add such a
> check.

Well, we would need to know which version failed.  What is yours?

doc/manuals/README mentions pdftex-0.14d.  *ANY* version older than 1.00
is unreleased and experimental, but versions as old as -0.13d have worked.

> 2) `./configure' checks whether Perl 5.004 (or later) is installed.
>    On my machine Perl 5.00405 is installed and the installation went
> ahead without problems.  However, when I then tried to install
> R-1.5.1-recommended by issuing the command
>         R CMD INSTALL *.tar.gz
> in the appropriate directory, I received complaints about my Perl
> version.  Essentially, R wanted all of a sudden Perl 5.005 (or
> later).  An edited version of what I saw on my terminal is included
> below.  I got the same kind of error message when I used from within R
> `update.packages' and `install.packages' to update/install some
> packages that are not in R-1.5.1-recommended.
> As far as I can tell, the installation of the packages went ahead fine
> except that the `TITLE' file for each of these packages is empty.
> Hence, I guess the error message is produced when R tries to generate
> and install the `TITLE' file.  However, the `TITLE' files for the
> packages in the base distribution are fine.  This leaves me wondering
> why during the base installation Perl 5.004 (or later) is good enough
> for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
> later) is required.

That is correct.  Most things require 5.004, a few require 5.005.
Why is that a bug?

The issue is the use of the Text::Wrap module in share/perl/R/Utils.pm,
where 5.004_05 was broken (we discovered).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Sun Aug 25 09:33:57 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Sun, 25 Aug 2002 10:33:57 +0200 (MET DST)
Subject: title(list) shows strange chars (PR#1939)
Message-ID: <200208250833.KAA28402@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1, 1.5.0
OS: linux (RH7.1, RH6.2)
Submission from: (NULL) (192.38.43.138)


try
plot(1:2, main=list("title"))
You see the strange chars in title instead of "title" or error message...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:20:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 25 Aug 2002 10:20:39 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208251007420.16988-100000@gannet.stats>

Note that

R --restore --save --no-readline --gui=none -q < z.R > z.Rout

works for me (in tcsh or sh).  That should give you a workaround.

On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:49:01 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 10:49:01 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208251044560.16589-100000@auk.stats>

This is caused by the call to

fflush(stdin)

in Rstd_FlushConsole() in src/unix/sys-std.c.  I've commented on that
before: fflush on an input stream is not defined on the Solaris help page,
and it appears to flush piped input.

I've removed the call.  If anyone knows what it was intended to accomplish,
please find another way to do it.


On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sun Aug 25 12:12:46 2002
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Sun, 25 Aug 2002 19:12:46 +0800 (WST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
References: <200208241042.MAA26903@pubhealth.ku.dk>
 <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
Message-ID: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
  >> [...]  But during configuration there don't seem to be any check
  >> whether the pdflatex is recent enough.  You might want to
  >> consider to add such a check.

  BDR> Well, we would need to know which version failed.  What is
  BDR> yours?
0.12h it seems.  (See below).  The hyperref package coming with that
installation is also too old, it seems....

  >> [...]  This leaves me wondering why during the base installation
  >> Perl 5.004 (or later) is good enough for producing the `TITLE'
  >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.

  BDR> That is correct.  Most things require 5.004, a few require
  BDR> 5.005.  Why is that a bug?
Did I claim it was a bug? :) Anyway, from the FAQ:

    If a command you are familiar with causes an R error message in a
    case where its usual definition ought to be reasonable, it is
    probably a bug.

After installing R and knowing that `./configure' checks which Perl
version I have, I expect to have a system that works fine and doesn't
all of a sudden tell me that my Perl version is too old and cannot
perform a `complete' install of addtional packages.  If part of R
needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can
argue that it wasn't an error message but just a warning, or that I am
not familiar with the command (fair enough too :-) ), but the FAQ
continues:

   If you aren't familiar with the command, or don't know for certain
   how the command is supposed to work, then it might actually be
   working right. Rather than jumping to conclusions, show the problem
   to someone who knows for certain.

And I did exactly the latter, labeling my report `inconsistent use of
Perl'.  Rest assured, if I think something is a bug, then I will say
so in the subject line. :)

Cheers,

        Berwin

----- Attempt of "make pdf" -----
absentia:/opt/R/R-1.5.1$ make pdf
make[1]: Entering directory `/opt/R/R-1.5.1/doc'
make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
PDF/LaTeX documentation: reference index ...
This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
(pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
LaTeX2e <1998/06/01>
Babel <v3.6j> and hyphenation patterns for american, french, german,
italian, n
ohyphenation, loaded.

(refman.tex (/usr/share/texmf/tex/latex/base/book.cls
Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
(/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
(/usr/share/texmf/tex/latex/base/ifthen.sty)
(/usr/share/texmf/tex/latex/tools/longtable.sty)
(/usr/share/texmf/tex/latex/tools/bm.sty)
(/usr/share/texmf/tex/latex/base/alltt.sty)
(/usr/share/texmf/tex/latex/tools/verbatim.sty)
(/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
(/usr/share/texmf/tex/latex/graphics/color.sty
(/usr/share/texmf/tex/latex/config/color.cfg)
(/usr/share/texmf/tex/latex/graphics/pdftex.def))
(/usr/share/texmf/tex/latex/hyperref/hyperref.sty
(/usr/share/texmf/tex/latex/graphics/keyval.sty)
(/usr/share/texmf/tex/latex/hyperref/nameref.sty)
(../../share/texmf/hyperref.cfg

! Package keyval Error: linktocpage undefined.

See the keyval package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.12 }
      
) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
(/usr/share/texmf/tex/latex/hyperref/hpdftex.def
(/usr/share/texmf/tex/latex/psnfss/pifont.sty
(/usr/share/texmf/tex/latex/psnfss/upzd.fd)
(/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
(/usr/share/texmf/tex/latex/base/makeidx.sty)
Writing index file refman.idx
No file refman.aux.
(/usr/share/texmf/tex/context/base/supp-pdf.tex
(/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
loading : Context Support Macros / Missing
)
loading : Context Support Macros / PDF
) (refman.out) (refman.out)
Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
[]\OT1/cmr/m/n/10 null null null
        
                                                                               
                                                                               
                                                                               
                                                                     
[1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
Warning (ext1): destination with the same identifier already exists!
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1]
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] (base-pkg.tex
Chapter 1.

Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
[17]
[18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
[32]
[33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
[47]
[48] [49] [50] [51]
Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
[]\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
([][]\OT1/cmtt/m/n/10 par[]
[][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
plot.window[][][](
)[][]\OT1/cmr/m/n/10 ,
[52] [53] [54] [55] [56] [57] [58]
Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
[]\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
Ac-cu-rate
 Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
[59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
 []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
horizontal = 
FALSE, add = FALSE,[] 
[71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
[85]
[86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
[100]
[101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
Underfull \vbox (badness 10000) has occurred while \output is active
[111]
[112]
Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
[]\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
be drawn, 
see
[113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
[119]
[120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
[131]
[132] [133]
Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
[][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
[][]\OT1/cmt
t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
Math.data.f
rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
\OT1/cmr/m/n/1
0 meth-ods for
[134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
[145]
[146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
[157]
Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
[]\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
\OT1/cmr/m/n/10 i
s to pro-duce and print a postscript copy, if
[158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
[169]
[170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
[181]
[182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
[]\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
giv-ing \OT1/cm
tt/m/n/10 where \OT1/cmr/m/n/10 as
[192] [193] [194] [195]
! TeX capacity exceeded, sorry [input stack size=300].
\@inmathwarn ...latex@warning {Command \protect #1
                                                   invalid in math
mode}\fi 
l.10696 \alias{\$}{Extract}
                           
!  ==> Fatal error occurred, the output PDF file not finished!
Transcript written on refman.log.
make[2]: *** [refman.pdf] Error 1
make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
make[1]: *** [pdf] Error 2
make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
make: [pdf] Error 2 (ignored)
absentia:/opt/R/R-1.5.1$ 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 12:41:30 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 12:41:30 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>
Message-ID: <Pine.GSO.4.44.0208251239290.16718-100000@auk.stats>

On Sun, 25 Aug 2002, Berwin Turlach wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
>
>   BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
>   >> [...]  But during configuration there don't seem to be any check
>   >> whether the pdflatex is recent enough.  You might want to
>   >> consider to add such a check.
>
>   BDR> Well, we would need to know which version failed.  What is
>   BDR> yours?
> 0.12h it seems.  (See below).  The hyperref package coming with that
> installation is also too old, it seems....
>
>   >> [...]  This leaves me wondering why during the base installation
>   >> Perl 5.004 (or later) is good enough for producing the `TITLE'
>   >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.
>
>   BDR> That is correct.  Most things require 5.004, a few require
>   BDR> 5.005.  Why is that a bug?
> Did I claim it was a bug? :) Anyway, from the FAQ:
>
>     If a command you are familiar with causes an R error message in a
>     case where its usual definition ought to be reasonable, it is
>     probably a bug.
>
> After installing R and knowing that `./configure' checks which Perl
> version I have, I expect to have a system that works fine and doesn't
> all of a sudden tell me that my Perl version is too old and cannot
> perform a `complete' install of addtional packages.  If part of R
> needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can

Because a few vociferous users only have 5.004.  I think we do now intend
to require 5.005 in configure.

> argue that it wasn't an error message but just a warning, or that I am
> not familiar with the command (fair enough too :-) ), but the FAQ
> continues:
>
>    If you aren't familiar with the command, or don't know for certain
>    how the command is supposed to work, then it might actually be
>    working right. Rather than jumping to conclusions, show the problem
>    to someone who knows for certain.
>
> And I did exactly the latter, labeling my report `inconsistent use of
> Perl'.  Rest assured, if I think something is a bug, then I will say
> so in the subject line. :)

Please send to R-devel not R-bugs, though.  If you submit to R-bugs, it
goes on the BUGS list and is claimed as a bug.

> Cheers,
>
>         Berwin
>
> ----- Attempt of "make pdf" -----
> absentia:/opt/R/R-1.5.1$ make pdf
> make[1]: Entering directory `/opt/R/R-1.5.1/doc'
> make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
> PDF/LaTeX documentation: reference index ...
> This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
> (pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
> ><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
> LaTeX2e <1998/06/01>
> Babel <v3.6j> and hyphenation patterns for american, french, german,
> italian, n
> ohyphenation, loaded.
>
> (refman.tex (/usr/share/texmf/tex/latex/base/book.cls
> Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
> (/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
> (/usr/share/texmf/tex/latex/base/ifthen.sty)
> (/usr/share/texmf/tex/latex/tools/longtable.sty)
> (/usr/share/texmf/tex/latex/tools/bm.sty)
> (/usr/share/texmf/tex/latex/base/alltt.sty)
> (/usr/share/texmf/tex/latex/tools/verbatim.sty)
> (/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
> (/usr/share/texmf/tex/latex/graphics/color.sty
> (/usr/share/texmf/tex/latex/config/color.cfg)
> (/usr/share/texmf/tex/latex/graphics/pdftex.def))
> (/usr/share/texmf/tex/latex/hyperref/hyperref.sty
> (/usr/share/texmf/tex/latex/graphics/keyval.sty)
> (/usr/share/texmf/tex/latex/hyperref/nameref.sty)
> (../../share/texmf/hyperref.cfg
>
> ! Package keyval Error: linktocpage undefined.
>
> See the keyval package documentation for explanation.
> Type  H <return>  for immediate help.
>  ...
>
> l.12 }
>
> ) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
> (/usr/share/texmf/tex/latex/hyperref/hpdftex.def
> (/usr/share/texmf/tex/latex/psnfss/pifont.sty
> (/usr/share/texmf/tex/latex/psnfss/upzd.fd)
> (/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
> (/usr/share/texmf/tex/latex/base/makeidx.sty)
> Writing index file refman.idx
> No file refman.aux.
> (/usr/share/texmf/tex/context/base/supp-pdf.tex
> (/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
> loading : Context Support Macros / Missing
> )
> loading : Context Support Macros / PDF
> ) (refman.out) (refman.out)
> Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
> []\OT1/cmr/m/n/10 null null null
>
>
>
>
>
> [1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
> Warning (ext1): destination with the same identifier already exists!
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1]
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] (base-pkg.tex
> Chapter 1.
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
> [17]
> [18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
> [32]
> [33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
> [47]
> [48] [49] [50] [51]
> Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
> []\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
> ([][]\OT1/cmtt/m/n/10 par[]
> [][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
> plot.window[][][](
> )[][]\OT1/cmr/m/n/10 ,
> [52] [53] [54] [55] [56] [57] [58]
> Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
> []\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
> Ac-cu-rate
>  Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
> [59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
> Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
>  []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
> horizontal =
> FALSE, add = FALSE,[]
> [71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
> [85]
> [86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
> [100]
> [101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
> Underfull \vbox (badness 10000) has occurred while \output is active
> [111]
> [112]
> Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
> []\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
> be drawn,
> see
> [113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
> [119]
> [120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
> [131]
> [132] [133]
> Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
> [][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
> [][]\OT1/cmt
> t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
> Math.data.f
> rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
> \OT1/cmr/m/n/1
> 0 meth-ods for
> [134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
> [145]
> [146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
> [157]
> Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
> []\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
> \OT1/cmr/m/n/10 i
> s to pro-duce and print a postscript copy, if
> [158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
> [169]
> [170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
> [181]
> [182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
> Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
> []\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
> giv-ing \OT1/cm
> tt/m/n/10 where \OT1/cmr/m/n/10 as
> [192] [193] [194] [195]
> ! TeX capacity exceeded, sorry [input stack size=300].
> \@inmathwarn ...latex@warning {Command \protect #1
>                                                    invalid in math
> mode}\fi
> l.10696 \alias{\$}{Extract}
>
> !  ==> Fatal error occurred, the output PDF file not finished!
> Transcript written on refman.log.
> make[2]: *** [refman.pdf] Error 1
> make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
> make[1]: *** [pdf] Error 2
> make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
> make: [pdf] Error 2 (ignored)
> absentia:/opt/R/R-1.5.1$
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Sun Aug 25 13:50:41 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Sun, 25 Aug 2002 14:50:41 +0200 (MET DST)
Subject: library(file) segfaults on solaris (PR#1942)
Message-ID: <200208251250.OAA28836@pubhealth.ku.dk>


luke's demonstration of external references, at

www.stat.umn.edu/~luke/file_0.0-0.tar.gz

(accessible through the developer page) causes
a segfault on solaris 2.8 as soon as library(file)
is attempted.  it runs fine on RH 7.2.  the segfault
on solaris occured for R 1.5.1 and 1.6 (8-25 image)

a quick poke at gdb (which i can only get running
for R 1.6, though this bug report is for 1.5.1) 
shows the failure to be at eval.c:351
SET_NAMED(tmp, 2)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = Patched
 major = 1
 minor = 5.1
 year = 2002
 month = 08
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sun Aug 25 16:26:42 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sun, 25 Aug 2002 10:26:42 -0500
Subject: library(file) segfaults on solaris (PR#1942)
In-Reply-To: <200208251250.OAA28836@pubhealth.ku.dk>; from stvjc@channing.harvard.edu on Sun, Aug 25, 2002 at 02:50:41PM +0200
References: <200208251250.OAA28836@pubhealth.ku.dk>
Message-ID: <20020825102642.A8348@nokomis.stat.umn.edu>

It's a bug in my init routine -- uses .Call but the C code did not
return a value.  Fixed in file_0.0-1.tar.gz.

luke

On Sun, Aug 25, 2002 at 02:50:41PM +0200, stvjc@channing.harvard.edu wrote:
> 
> luke's demonstration of external references, at
> 
> www.stat.umn.edu/~luke/file_0.0-0.tar.gz
> 
> (accessible through the developer page) causes
> a segfault on solaris 2.8 as soon as library(file)
> is attempted.  it runs fine on RH 7.2.  the segfault
> on solaris occured for R 1.5.1 and 1.6 (8-25 image)
> 
> a quick poke at gdb (which i can only get running
> for R 1.6, though this bug report is for 1.5.1) 
> shows the failure to be at eval.c:351
> SET_NAMED(tmp, 2)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.8
>  arch = sparc
>  os = solaris2.8
>  system = sparc, solaris2.8
>  status = Patched
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 08
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a311876@fmr.com  Mon Aug 26 16:30:21 2002
From: a311876@fmr.com (a311876@fmr.com)
Date: Mon, 26 Aug 2002 17:30:21 +0200 (MET DST)
Subject: Rprof and setMethod conflict (PR#1949)
Message-ID: <200208261530.RAA07795@pubhealth.ku.dk>

Full_Name: Kevin C. Bartz
Version: 1.5.1
OS: Solaris 2.6
Submission from: (NULL) (192.223.226.5)


A while ago, I noticed this oddity about R profiling and setMethod.

First, I "test out" Rprof.

> require(methods)
Loading required package: methods 
[1] TRUE
> 
> Rprof("test.out")
> data.frame("a")
  X.a.
1    a
> Rprof(NULL)

So far, so good. Next, I define myClass.

> setClass("myClass", representation(mySlot = "numeric"))
[1] "myClass"
> setMethod("as.data.frame", signature(x = "myClass"),
+           function(x, row.names, optional) { "as.data.frame for myClass" })
Creating a new generic function for "as.data.frame" on 
element 1 of the search path 
[1] "as.data.frame"

Again, everything is fine. I've expanded as.data.frame to accept objects of
class myClass. Now, let's try the standard data.frame("a") again:

> data.frame("a")
  X.a.
1    a

Still, no problems. But after I start R profiling, problems arise:

> Rprof("test2.out")
> data.frame("a")
Error in standardGeneric("as.data.frame") : 
	UseMethod used in an inappropriate fashion

It seems that I can no longer use the standard method for as.data.frame in an R
profiling sequence once I've defined a new method for it. However, I CAN use the
standard as.data.frame method when I'm NOT R profiling.

I know I've brought this up before, but I thought it was appropriate also to log
this bug in a more formal manner.

Thanks,

Kevin

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 26 22:16:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 14:16:26 -0700 (PDT)
Subject: Rprof and setMethod conflict (PR#1949)
In-Reply-To: <200208261530.RAA07795@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208261415570.65552-100000@homer01.u.washington.edu>

On Mon, 26 Aug 2002 a311876@fmr.com wrote:

> Full_Name: Kevin C. Bartz
> Version: 1.5.1
> OS: Solaris 2.6
> Submission from: (NULL) (192.223.226.5)
>
>
> A while ago, I noticed this oddity about R profiling and setMethod.
>

Appears to be fixed in r-devel

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rsingle@zoo.uvm.edu  Tue Aug 27 01:21:29 2002
From: rsingle@zoo.uvm.edu (rsingle@zoo.uvm.edu)
Date: Tue, 27 Aug 2002 02:21:29 +0200 (MET DST)
Subject: strange result from x[x!="NA"] (PR#1952)
Message-ID: <200208270021.CAA09251@pubhealth.ku.dk>

Full_Name: Richard Single
Version: 1.5.1
OS: Windows
Submission from: (NULL) (132.198.176.82)


In the latest Windows version the following syntax behaves
differently than it did in version 1.4.0: x[x!="NA"] 
The results under R 1.4.0 agree with S.

--Rich

R 1.4.0 
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]  TRUE FALSE FALSE  TRUE
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


R 1.5.1
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]    NA FALSE FALSE    NA
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 27 05:02:56 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 21:02:56 -0700 (PDT)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208262057200.11546-100000@homer20.u.washington.edu>

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.

Yes.  It's a deliberate change in 1.5.0, documented in both the NEWS file
and the guide to updating to 1.5.  The string "NA" is not special any
more, you need as.character(NA) to make a missing string, and you need to
use is.na() to test for NAs, as was always recommended.


	-thomas


> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
- NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 27 07:51:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 27 Aug 2002 07:51:56 +0100 (BST)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208270749550.31357-100000@gannet.stats>

This is correct: see the NEWS file.

Working as documented is not a bug.

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.
>
> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Aug 27 13:20:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Tue, 27 Aug 2002 14:20:55 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208271220.OAA15599@pubhealth.ku.dk>

On Thu, 22 Aug 2002 14:45:47 +0200 (MET DST), you wrote:

>I apparently found an error in how "deriv" puts a derivative to the screen
>(though the internal representation is correct).  Here's what I was doing for a
>class example:
>
>> lnlk<-expression(15*log(p)+11*log(1-p))
>> p<-15/26
>> D(D(lnlk,"p"),"p")
>-15 * (1/p^2) + 11 * (1/(1 - p)^2)

This is now fixed in r-devel (to become 1.6.0):

> D(D(lnlk,"p"),"p")
-(15 * (1/p^2) + 11 * (1/(1 - p)^2))

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Aug 27 22:23:10 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 28 Aug 2002 09:23:10 +1200
Subject: graphics changes
Message-ID: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>

Hi

I have committed some changes to R's graphics code which means that the
current version of the grid package on CRAN (0.6-1) will NOT
install/run on the development version of R.

I have submitted to CRAN a new version of grid which does install/run,
but this may not be available immediately.  In the meantime, the new
grid version is available at
http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:24:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:24:02 +0200
Subject: Rnews 2002/3
Message-ID: <15724.31378.384122.787920@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/3 issue of the R
Newsletter.  For more information see

      http://CRAN.R-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in 'Writing Articles for R News'
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 Oct 15, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:29:27 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:29:27 +0200
Subject: graphics changes
In-Reply-To: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
References: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
Message-ID: <15724.31703.400417.261503@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> I have committed some changes to R's graphics code which means that the
> current version of the grid package on CRAN (0.6-1) will NOT
> install/run on the development version of R.

> I have submitted to CRAN a new version of grid which does install/run,
> but this may not be available immediately.  In the meantime, the new
> grid version is available at
> http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

In CRAN's 1.6.0/Recommended now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 12:59:54 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 13:59:54 +0200 (MET DST)
Subject: ENQUIRY (PR#1955)
Message-ID: <200208281159.NAA25641@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:01:39 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:01:39 +0200 (MET DST)
Subject: ENQUIRY (PR#1956)
Message-ID: <200208281201.OAA25697@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:16:37 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:16:37 +0200 (MET DST)
Subject: ENQUIRY (PR#1957)
Message-ID: <200208281216.OAA25951@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:19:11 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:19:11 +0200 (MET DST)
Subject: ENQUIRY (PR#1958)
Message-ID: <200208281219.OAA25995@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Wed Aug 28 13:57:03 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Wed, 28 Aug 2002 14:57:03 +0200 (MET DST)
Subject: dev.print + impossible filename -> break (PR#1959)
Message-ID: <200208281257.OAA26697@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1
OS: Linux (RH 7.1)
Submission from: (NULL) (192.38.43.138)


Hi,

Try to give an impossible file name (command to pipe through) for dev.print:

> plot(1:4)
> dev.print(file="|llllll")

I got the response

sh: llllll: command not found

Process R broken pipe at Wed Aug 28 14:42:27 2002

After which R was killed (or at least vanished from the process list).

Best,

Ott

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:08:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 28 Aug 2002 14:08:37 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <200208281257.OAA26697@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>

Here's the nub.

> postscript(file="|llllll")
> sh: llllll: command not found

> dev.off()
Broken pipe

and it's related to how popen/pclose are implemented.  The help page
does say errors are hard to detect, but we can do a bit better than this.

On Wed, 28 Aug 2002 otoomet@econ.dk wrote:

> Full_Name: Ott Toomet
> Version: 1.5.1
> OS: Linux (RH 7.1)
> Submission from: (NULL) (192.38.43.138)
>
>
> Hi,
>
> Try to give an impossible file name (command to pipe through) for dev.print:
>
> > plot(1:4)
> > dev.print(file="|llllll")
>
> I got the response
>
> sh: llllll: command not found
>
> Process R broken pipe at Wed Aug 28 14:42:27 2002
>
> After which R was killed (or at least vanished from the process list).
>
> Best,
>
> Ott
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Aug 28 14:25:23 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 28 Aug 2002 09:25:23 -0400
Subject: Fixes/additions to methods package
Message-ID: <3D6CCF43.8D93DCD@research.bell-labs.com>

Some changes committed today to the r-devel (1.6.0) version of the
methods package:

1. The function setOldClass has been added as per the green book, p.
450.  The point in this case is not conversion as in the green book so
much as allowing old-style classes to be included in signatures given to
setMethod.

This worked before (with a warning), but old-style inheritance couldn't
be picked up.  Using
  setOldClass(c("chron", "times"))
should let "times" be included in signatures with the method selected
for an object of class "chron".

2. Some heuristics have been added to warn about what appear to be
mistakes in writing generic functions (e.g., wrong name, no call to
standardGeneric).  The consequences of such errrors can be obscure.

As with all heuristics, possibily warnings will occur when not
appropriate.  Let me know.

3. The function promptMethods() has been revised to generate aliases for
individual methods, according to a proposed convention:
  setMethod("f", c("character", "numeric"), .....)
would correspond to an entry in the documentation file of
  \alias{f,character,numeric-method}
(The help function doesn't yet know about this specifically.)

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:53:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 28 Aug 2002 14:53:55 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0208281440590.12187-100000@auk.stats>

On Wed, 28 Aug 2002 ripley@stats.ox.ac.uk wrote:

> Here's the nub.
>
> > postscript(file="|llllll")
> > sh: llllll: command not found
>
> > dev.off()
> Broken pipe
>
> and it's related to how popen/pclose are implemented.  The help page
> does say errors are hard to detect, but we can do a bit better than this.

What I tested was checking errno, which the man page says gets set.
But on Linux I find:

popen succeeds, returns a valid file handle and does not set errno.
pclose on that file handle terminates the process.

The last can be avoided by setting a signal handler for SIGPIPE,
although that's not portable across OSes.


Anyone know a portable way to do this?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chr.schulz@email.de  Thu Aug 29 05:54:26 2002
From: chr.schulz@email.de (chr.schulz@email.de)
Date: Thu, 29 Aug 2002 06:54:26 +0200 (MET DST)
Subject: Rodbc (PR#1961)
Message-ID: <200208290454.GAA01017@pubhealth.ku.dk>

Full_Name: Christian Schulz
Version: 1.5.1
OS: Win2000
Submission from: (NULL) (145.254.65.158)


Hi,

First:

i get a error-message donwload Rodbc  via
{a <- CRAN.packages()
+       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
available=a)}

Second:

channel  <- odbcConnect("chris_db","","")
sqlSave(channel,autocount)
Error in if (any(sqlTables(channel)[3] == tablename)) { : 
        missing value where logical needed

...i get this error-messages from code, which work in past !?

Thanks
regards,Christian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:14:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:14:42 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <200208290454.GAA01017@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>

1) RODBC is no longer in the main part of CRAN, but in Devel, because

2) It has not been updated for 1.5.x, and indeed seems unmaintained.

Why did you think these were bugs?


On Thu, 29 Aug 2002 chr.schulz@email.de wrote:

> Full_Name: Christian Schulz
> Version: 1.5.1
> OS: Win2000
> Submission from: (NULL) (145.254.65.158)
>
>
> Hi,
>
> First:
>
> i get a error-message donwload Rodbc  via
> {a <- CRAN.packages()
> +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> available=a)}
>
> Second:
>
> channel  <- odbcConnect("chris_db","","")
> sqlSave(channel,autocount)
> Error in if (any(sqlTables(channel)[3] == tablename)) { :
>         missing value where logical needed
>
> ...i get this error-messages from code, which work in past !?
>
> Thanks
> regards,Christian
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:21:10 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:21:10 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208290718120.9856-100000@gannet.stats>

Just to add: RODBC is not on the list I get from CRAN.packages().
You may be getting an old copy from a cache.
But it's hard to tell when you say

`i get a error-message'

without telling us what the message is.

It is RODBC not Rodbc, and that might be part of your problem.

On Thu, 29 Aug 2002 ripley@stats.ox.ac.uk wrote:

> 1) RODBC is no longer in the main part of CRAN, but in Devel, because
>
> 2) It has not been updated for 1.5.x, and indeed seems unmaintained.
>
> Why did you think these were bugs?
>
>
> On Thu, 29 Aug 2002 chr.schulz@email.de wrote:
>
> > Full_Name: Christian Schulz
> > Version: 1.5.1
> > OS: Win2000
> > Submission from: (NULL) (145.254.65.158)
> >
> >
> > Hi,
> >
> > First:
> >
> > i get a error-message donwload Rodbc  via
> > {a <- CRAN.packages()
> > +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> > available=a)}
> >
> > Second:
> >
> > channel  <- odbcConnect("chris_db","","")
> > sqlSave(channel,autocount)
> > Error in if (any(sqlTables(channel)[3] == tablename)) { :
> >         missing value where logical needed
> >
> > ...i get this error-messages from code, which work in past !?
> >
> > Thanks
> > regards,Christian
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:10:41 2002
From: stakb@nus.edu.sg (stakb@nus.edu.sg)
Date: Fri, 30 Aug 2002 10:10:41 +0200 (MET DST)
Subject: The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <200208300810.KAA12987@pubhealth.ku.dk>

Full_Name: Kaushik Bhattacharyya
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (137.132.3.10)


Main R-function used:

pp1

function(X)

{

x_as.matrix(X)

trial_function(a)

{

clusproj(x,a)

}

test.nlm_nlm(trial,rep(1,ncol(X)))

theta_test.nlm$estimate

theta_theta/sqrt(sum(theta^2))

cluster.index_round(1/test.nlm$min,6)

# print the results

###############

cat(paste("Projection direction = (",paste(round(theta,6),

    collapse=","),")",sep=""),"\n")

cat("Projection index =",cluster.index,"\n")

##################

w <- clusterproj(x,theta)

# define first cluster break

n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]

n.ord <- order(x%*%theta)

A.ndx <- n.ord[seq(n.break)]

B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]

print(sort(A.ndx))

print(sort(B.ndx))

}

 

Functions in the main function:

 

clusterproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length(XS)

    w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    w

}

 

clusproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length (XS)

    w <- (seq(n

-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    1/max(w)

}

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:26:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:26:48 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <200208300810.KAA12987@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208300924520.7778-100000@gannet.stats>

Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:34:46 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 16:34:46 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>

The division part of the following code is not executing -

(seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

Note: Prof Yatracos: Would you please send them one example ?

Thanks,

Kaushik



-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:27 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- 
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:41:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:41:13 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208300937170.7797-100000@gannet.stats>

And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 10:29:00 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 17:29:00 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>

Yes. It passed the "make check". The problem is coming in Tru64 Unix also.

Here is the error message.

For example:

> clusproj(newiris,rep(1,4))
Error in X %*% a : requires numeric matrix/vector arguments

Here newiris is the iris dataset.

Thanks,

Kaushik

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 10:30:40 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 17:30:40 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F80AC585@MBXSRV06.stf.nus.edu.sg>


    Dear Professor Ripley,

thanks much for your prompt action.

Best regards,
Yannis Yatracos

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 10:54:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 10:54:08 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208301050110.8070-100000@gannet.stats>

1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 11:21:58 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 18:21:58 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F8114731@MBXSRV06.stf.nus.edu.sg>


     Dear Professor Ripley:

I hope you can allow me to interfere between you and Kaushik.
I think I hav misled him.

1) The function cluproj is used in the function pp1.
2) I called "newiris" just the numerical data from "iris".
3) Writing: clus.proj(as.matrix(newiris),rep(1,4))
gave the following:
Error in (seq(n - 1) * mean(XS) - cumsum(XS[seq(n - 1)])) * diff(XS)/((n -  :
        non-conformable arrays
4) A colleague made clusproj work by writing as.vector in front of the numerator
and denominator:
 as.vector((seq(n -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS))/
as.vector(((n-1)*var(XS)))
5) Here is the result: 
> clusproj(as.matrix(newiris),rep(1,4))
[1] 12.43743 

6) Note that the denominator is a scalar.

I hope things are more clear now.

Best regards,
Yannis Yatracos


-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 5:54 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Sat Aug 31 19:59:27 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Sat, 31 Aug 2002 11:59:27 -0700 (PDT)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
Message-ID: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>

Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
ran the configure with gcc 3.1.1 I got the following error:

[...]
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from g77... -v
checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
-lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore,
extra underscore
checking whether g77 and gcc agree on int and double... configure:
WARNING: g77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?


Should I have set some configuration option?  Or is this more likely a
problem with my gcc installation/build?

I'm trying to build r-devel (8/30/02) source.


--------------------

marla:> gcc -v
Reading specs from
/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
Thread model: single
gcc version 3.1.1


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 31 21:01:28 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 31 Aug 2002 21:01:28 +0100 (BST)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
In-Reply-To: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0208312049390.30059-100000@gannet.stats>

I suspect your LD_LIBRARY_PATH does not include wherever you installed the
gcc libs (/home/rpeng/install/gcc/lib?) and g77 >= 3.1 uses a shared
libg2c.  (It also uses a shared libgcc_s.)

In that case running anything built with g77 will not work, and configure
does not actually check that.

You can also get around this by specifying LDFLAGS: to get 64-bit Solaris
builds to work with gcc 3.2 I had to use

LDFLAGS="-L/usr/local/lib/sparcv9 -L/usr/local/lib"

which is how I know about this (and I really expected gcc to sort that out
for me: the Sun compilers do).

On Sat, 31 Aug 2002, Roger Peng wrote:

> Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
> compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
> ran the configure with gcc 3.1.1 I got the following error:
>
> [...]
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking how to get verbose linking output from g77... -v
> checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
> -lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
> checking for dummy main to link with Fortran 77 libraries... none
> checking for Fortran 77 name-mangling scheme... lower case, underscore,
> extra underscore
> checking whether g77 and gcc agree on int and double... configure:
> WARNING: g77 and gcc disagree on int and double
> configure: error: Maybe change CFLAGS or FFLAGS?
>
>
> Should I have set some configuration option?  Or is this more likely a
> problem with my gcc installation/build?
>
> I'm trying to build r-devel (8/30/02) source.
>
>
> --------------------
>
> marla:> gcc -v
> Reading specs from
> /home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
> Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
> Thread model: single
> gcc version 3.1.1
>
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joshi@engr.orst.edu  Sat Aug 31 22:40:53 2002
From: joshi@engr.orst.edu (joshi@engr.orst.edu)
Date: Sat, 31 Aug 2002 23:40:53 +0200 (MET DST)
Subject: bug in garbage collector function gc() documentation (PR#1970)
Message-ID: <200208312140.XAA23253@pubhealth.ku.dk>

Full_Name: Saket Joshi
Version: 1.5.0
OS: Solaris 5.8
Submission from: (NULL) (128.193.38.91)


According to the documentation obtained by entering: help.search("gc"), the
command gc() forces garbage collection and gives the memory usage statistics
along with the trigger values in bytes also interpretted in megabytes. However
when I ran gc(), the result was a list giving the memory usage in bytes and
interpretted in Megabits and not mega bytes.

e.g.

> gc()

	   used  (Mb) gc trigger  (Mb)
Ncells   288733   7.8     818163  21.9
Vcells 30158416 230.1   48892294 373.1

As can be seen, 230.1 is the interpretation of 30158416 bytes as megabits. But
the documentation says megabytes.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Aug 30 18:13:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 30 Aug 2002 12:13:05 -0500
Subject: Thoughts about Cygwin ?
Message-ID: <E17kpKT-0001Lp-00@sonny.eddelbuettel.com>


Let me preface this email by saying that I am very grateful for the
existing Windows version of R. It does an excellent job by providing
a pain- and flawless installation, and a look-and-fell most Windows
users feel comfortable with.  For me,  Windows in its different 
flavours is not something I know, or care, a lot about -- but like
others am forced to work with. The old need-bread-on-the-table thing.

Which brings us to Cygwin. It has also come a fairly long way, and
does now contain an almost complete Unix "user layer" (if you install
the whole bit, not just the default). By "user layer" I mean the tools, 
the networking (I can ssh or telnet in), and even a complete (?) X11
layer -- in fact I can ssh from one NT machine to another and export 
X11 apps back as if I was working between Unix terminals -- not bad.
Even tetex works out of the box to the extend that it support Sweave.

But I tend to spend most of my Windows time in Cygwin.  With R inside 
Xemacs/ESS, my work is fairly OS-agnostic. Every now and then, however,
I feel that it would be nice to have R behave under Cygwin just like it
does under Unix/Linux.  Anybody else here who feels the same?  I don't
think I have the stamina, or for that matter windows/cygwin knowledge, 
to spawn a port, but I would be happy to collaborare as I can with test,
configure.in hacks etc pp

If there is no demand, just tell me to crawl back under my stone. No
hurt feelings. I should be using Debian here anyway... 

Dirk

-- 
According to the latest figures, 43% of all signatures are totally
worthless.   

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 18:02:01 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 19:02:01 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208011702.TAA28218@pubhealth.ku.dk>

Full_Name: Yi-Xiong Zhou
Version: 1.5.1
OS: win2000pro
Submission from: (NULL) (64.169.249.42)


Update() can not find objects when it is used in a function, which is in turn
being called by another function. Here is a R script to show the problem:

######## begin of the test script ##########
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   y <- rnorm(20)
   oo <- lm(y~x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun1()
########### end of the test script #############

Here is the result of running this script:

[1] "step 1"
[1] "first update success."
Error in eval(expr, envir, enclos) : Object "y" not found

Ideally, update should first search the objects in its environment first, then
its parent's, and grand parent's environments ... Right now, it only searchs its
own environment and the global environment, skipping its parents'. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  1 18:26:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Aug 2002 19:26:34 +0200
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
References: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <x2ptx232yd.fsf@biostat.ku.dk>

yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 18:53:31 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 10:53:31 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>

Thanks Peter. This does work for formula. However, it failed to a function
call. Here is another test script:

################# begin test ###############
fun1 <- function() {
   x <- matrix(rnorm(500), 20,25)
   oo <- fun3(x)
   print("step 1")
   update(oo)
   print("first update success.")
   fun2(oo)
}

fun2 <- function(gg) {
   update(gg)
   print("second update success.")
}

fun3 <- function(aa) {
   oo <- list(x=aa, call=match.call())
   oo
}

fun1()
############### end test ############

The error message is 

[1] "step 1"
[1] "first update success."
Error in fun3(aa = x) : Object "x" not found

Yi-Xiong


-----Original Message-----
From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
Sent: Thursday, August 01, 2002 10:27 AM
To: Yi-Xiong Zhou
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: update() can not find objects (PR#1861)


yzhou@arcturusag.com writes:

> Full_Name: Yi-Xiong Zhou
> Version: 1.5.1
> OS: win2000pro
> Submission from: (NULL) (64.169.249.42)
> 
> 
> Update() can not find objects when it is used in a function, which is in
turn
> being called by another function. Here is a R script to show the problem:
> 
> ######## begin of the test script ##########
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    y <- rnorm(20)
>    oo <- lm(y~x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
> 
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
> 
> fun1()
> ########### end of the test script #############
> 
> Here is the result of running this script:
> 
> [1] "step 1"
> [1] "first update success."
> Error in eval(expr, envir, enclos) : Object "y" not found
> 
> Ideally, update should first search the objects in its environment first,
then
> its parent's, and grand parent's environments ... Right now, it only
searchs its
> own environment and the global environment, skipping its parents'. 

No, that's not what you should expect in a language with lexical scoping. 


However, there might still be a bug, since update with a non-missing
formula argument would extract the formula environment from the
formula stored in the lm object, but that doesn't happen if it is
missing. Modifying fun2 to

function(gg) {
   update(gg,formula(gg))
   print("second update success.")
}

or even

function(gg) {
   update(gg,y~x)
   print("second update success.")
}

does allow your example to run, which is somewhat unexpected...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Aug  1 19:28:23 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 1 Aug 2002 14:28:23 -0400
Subject: CVS Repository for Packages?
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149CE27@groexmb02.pfizer.com>


Hi All,

Would other non-core package developers like to have a common CVS
repository?      I think that this would be useful, and it would encourage
shared development of non-core packages.

Would it be possible/desirable/manageable to host this on an r-project
server?   

As an alternative, I could set up and administer a project on sourceforge.
(I have a couple of projects hosted there already).

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 20:36:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 12:36:51 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <200208011702.TAA28218@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208011232100.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002 yzhou@arcturusag.com wrote:
<snip>
> Ideally, update should first search the objects in its environment first, then
> its parent's, and grand parent's environments ... Right now, it only searchs its
> own environment and the global environment, skipping its parents'.
>

No, ideally it should search the objects in the environment where the
model was defined.  There's no guarantee that this is a grandparent, and
grandparents shouldn't be searched otherwise.  It might be tricky to get
this to work.

What isn't clear to me is whether the current environment should be
searched before the environment where the model was defined or afterwards.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkoulis@math.uwaterloo.ca  Thu Aug  1 21:15:21 2002
From: tkoulis@math.uwaterloo.ca (tkoulis@math.uwaterloo.ca)
Date: Thu, 1 Aug 2002 22:15:21 +0200 (MET DST)
Subject: glm crashes with "Illegal instruction" (PR#1863)
Message-ID: <200208012015.WAA28782@pubhealth.ku.dk>

Full_Name: Theodoro Koulis
Version: 1.5.1
OS: Macintosh
Submission from: (NULL) (129.97.97.31)


I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
version):

>x1_runif(10);
>y1_x1-3;
>glm(y1~x1);

The program exits with the following message:
Illegal instruction

Perhaps I am missing something. 

Thanks.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug  1 21:46:49 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 1 Aug 2002 13:46:49 -0700
Subject: glm crashes with "Illegal instruction" (PR#1863)
In-Reply-To: <200208012015.WAA28782@pubhealth.ku.dk>
Message-ID: <CD5AC7A2-A58F-11D6-8FDE-003065A21C86@stat.ucla.edu>

R-1.5.1 (not from fink, but from  R-1.5.1.dmg.tar.gz, July 1 version, OS 
X 10.1.5, also
on Jaguar)

 > x1<-runif(10)
 > y1<-x1-3
 > glm(y1~x1)

Call:  glm(formula = y1 ~ x1)

Coefficients:
(Intercept)           x1
          -3            1

Degrees of Freedom: 9 Total (i.e. Null);  8 Residual
Null Deviance:      0.9233
Residual Deviance: 5.916e-31    AIC: -684.7


On Thursday, August 1, 2002, at 01:15 PM, tkoulis@math.uwaterloo.ca 
wrote:

> Full_Name: Theodoro Koulis
> Version: 1.5.1
> OS: Macintosh
> Submission from: (NULL) (129.97.97.31)
>
>
> I try this simple example in R (1.5.1 not from fink) for OS X (XDarwin
> version):
>
>> x1_runif(10);
>> y1_x1-3;
>> glm(y1~x1);
>
> The program exits with the following message:
> Illegal instruction
>
> Perhaps I am missing something.
>
> Thanks.
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
==========================================================================
==
          Remember, wherever you go, there you are. --- Buckaroo Banzai
==========================================================================
==

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:14:52 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Thu, 1 Aug 2002 23:14:52 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012114.XAA28978@pubhealth.ku.dk>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:20:13 2002
From: yzhou@arcturusag.com (Yi-Xiong Zhou)
Date: Thu, 1 Aug 2002 14:20:13 -0700
Subject: update() can not find objects (PR#1861)
Message-ID: <BBAF0DEC119BD41193C100B0D0788DFE1D234C@GENOME>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From yzhou@arcturusag.com  Thu Aug  1 22:25:37 2002
From: yzhou@arcturusag.com (yzhou@arcturusag.com)
Date: Thu, 1 Aug 2002 23:25:37 +0200 (MET DST)
Subject: update() can not find objects (PR#1861)
Message-ID: <200208012125.XAA29038@pubhealth.ku.dk>

Could an object carry the information about where it was created? Could that
be on the wish list? 

Yi-Xiong

-----Original Message-----
From: Thomas Lumley [mailto:tlumley@u.washington.edu]
Sent: Thursday, August 01, 2002 2:14 PM
To: Yi-Xiong Zhou
Cc: 'Peter Dalgaard BSA'; r-devel@stat.math.ethz.ch;
R-bugs@biostat.ku.dk
Subject: RE: update() can not find objects (PR#1861)


On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug  1 22:13:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 1 Aug 2002 14:13:59 -0700 (PDT)
Subject: update() can not find objects (PR#1861)
In-Reply-To: <BBAF0DEC119BD41193C100B0D0788DFE1D234B@GENOME>
Message-ID: <Pine.A41.4.44.0208011405170.18384-100000@homer26.u.washington.edu>

On Thu, 1 Aug 2002, Yi-Xiong Zhou wrote:

> Thanks Peter. This does work for formula. However, it failed to a function
> call. Here is another test script:
>
> ################# begin test ###############
> fun1 <- function() {
>    x <- matrix(rnorm(500), 20,25)
>    oo <- fun3(x)
>    print("step 1")
>    update(oo)
>    print("first update success.")
>    fun2(oo)
> }
>
> fun2 <- function(gg) {
>    update(gg)
>    print("second update success.")
> }
>
> fun3 <- function(aa) {
>    oo <- list(x=aa, call=match.call())
>    oo
> }
>
> fun1()
> ############### end test ############
>
> The error message is
>
> [1] "step 1"
> [1] "first update success."
> Error in fun3(aa = x) : Object "x" not found

Yes, but this isn't supposed to work, and can't.

In the first place update() is supposed to work on models, not on
arbitrary objects.

In the second place, the object you are returning contains no information
about where it was created, so it's not possible for update to work out
the correct environment.  In this case the correct environment happens to
be parent.frame(2), but there's no reason why this should be true in
general.


When the object is a model with a formula it does carry information about
where it was defined, so update() can look there.  Your first example
should have worked, and the fact that it didn't is a bug (though arguably
just a wishlist bug).  This new example shouldn't work.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 11:25:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 11:25:29 +0100 (BST)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x27kj8i80l.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  3 12:29:15 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 Aug 2002 13:29:15 +0200
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats>
Message-ID: <x23ctwi3jo.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> On 3 Aug 2002, Peter Dalgaard BSA wrote:
> 
> > Another example that has come back to haunt us several times is
> > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > found inside "d" if present, but call-by-value semantics imply that it
> > is an object in the caller's scope. You really ought to pass the name
> > "foo" (or maybe better: quote(foo), or a formula ~foo).
> 
> Should we not just deprecate the offset argument in lm and glm?  Using the
> offset() function in the formula works as one would expect (at least if
> one remembers the R rules which start at the formula's environment).

That's a definite possibility, but what about subset (the argument,
not the function) and weights? 

Not to mention pch and col in plot.formula et al. where vectorization
led to some unexpected awkwardness.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Sat Aug  3 12:43:11 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Sat, 3 Aug 2002 07:43:11 -0400
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>; from p.dalgaard@biostat.ku.dk on Sat, Aug 03, 2002 at 01:29:15PM +0200
References: <Pine.LNX.4.31.0208031115300.7467-100000@gannet.stats> <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <20020803074311.X5720@jimmy.harvard.edu>

On Sat, Aug 03, 2002 at 01:29:15PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> > 
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> > 
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
> 
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights? 
> 
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

 My intention was to include some discussion of just these issues in
 the 8 am session on the 17th.
 I hope that we can use some of these comments at that time as well.



> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stanleywood@hknetmail.com  Sat Aug  3 13:59:59 2002
From: stanleywood@hknetmail.com (stanleywood)
Date: Sat, 3 Aug 2002 20:59:59 +0800
Subject: please respond
Message-ID: <200208031259.g73Cxcdi008945@HKNetMail.COM>

Dear Sir,

I am Stanley Woodwork, the secetary of Africa White farmers
co-operation (AWFC) OF Zimbabwe. After the last general elections in my 
country where the incumbent president Mr. Robert Mugabe won the 
presidential election, the
government has adopted a very aggressive land reforms programme. This 
programme is solely aimed at taking the land owned by white African 
farmers for redistribution to black africans. This programme has attracted 
worldwide
condemnation from world leaders including British prime minister,mr 
Tony Blair and also forced several white farmers to flee the country for 
fear of
victimization and physical abuse.
   Two weeks ago, our headquartes in Harare was attacked and
looted by black protesters and in the process burnt down the whole 
building. Fortunately,they did not get access to the huge funds kept in the 
strong room which
belong to the co-operation. This cash was kept at the secretariat 
rather than in the bank for fear of seizure by the government.
   Now I have the funds in my possession and would need to get it 
invested in a viable business venture in europe. T
   Once I can get your commitment and sincerity of investing
this funds on our behalf then I would proceed to get the funds 
freighted to Europe, where you would be required to pick it up for investment 
for us.
   You do not have anything to worry about as I would undertake all 
charges involved in freighting the funds to europe, and the business 
proposal is 100% legal and risk free.
   You would be adequately compensated for all your effort once we have 
gotten the funds to europe.
Please get back to me if you can be of assistance and I would want our 
correspondence to be via email as most phone lines of white farmers are 
bugged by the government.
   I expect 100% confidentiality and your prompt response to
this mail so as to proceed.you may also reach me on 
stanleywoodwork@hotvoice.com


Kind regards,

Stanley Woodwork.

---------------------------------------------------
Get Your Free Email at http://www.hknetmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug  3 19:04:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 3 Aug 2002 19:04:21 +0100 (BST)
Subject: Problems with gcc-3.1 -O2 on Solaris
Message-ID: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>

I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
systems (not the one I usually use).  We have seen a report of
this before (Chuck Berry, 17 July 2002).

The symptom is that make check fails with var(1) being NaN not NA.  The
underlying cause is that as.double(NA) is NaN.

It can be solved by compiling arithmetic.c without -O2.

Another installation with a single-processor UltraSparc 1 works correctly.
My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Sun Aug  4 03:42:02 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Sun, 4 Aug 2002 12:42:02 +1000
Subject: offset arg (was Re: [R] variable scope)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>

I certainly think we should deprecate it and Peter has (probably
unintentionally) offered yet another cogent argument as to why (although
that could be fixed by including "offset" among the arguments to be handled
by model.frame, like subset, weights, &c, and yes, I do know this would
break existing code...)

For me the main argument against it, though, is that it de-links the offset
from the linear predictor, where naturally it belongs.  It is hard to find a
truly natural and effective syntax for saying "this is part of the linear
predictor but it has a known coefficient of unity, not to be estimated", but
the ... + offset(gunk) device that we now allow, (along with the commercial
R clone, of course), is not all that bad.

Bill.

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Saturday, August 03, 2002 8:25 PM
To: Peter Dalgaard BSA
Cc: r-devel@stat.math.ethz.ch
Subject: offset arg (was Re: [R] variable scope)


On 3 Aug 2002, Peter Dalgaard BSA wrote:

> Another example that has come back to haunt us several times is
> lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> found inside "d" if present, but call-by-value semantics imply that it
> is an object in the caller's scope. You really ought to pass the name
> "foo" (or maybe better: quote(foo), or a formula ~foo).

Should we not just deprecate the offset argument in lm and glm?  Using the
offset() function in the formula works as one would expect (at least if
one remembers the R rules which start at the formula's environment).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:36:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:36:28 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <x23ctwi3jo.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.44.0208050835300.101274-100000@homer11.u.washington.edu>

On 3 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On 3 Aug 2002, Peter Dalgaard BSA wrote:
> >
> > > Another example that has come back to haunt us several times is
> > > lm(...,data=d,offset=foo). The problem is that we want "foo" to be
> > > found inside "d" if present, but call-by-value semantics imply that it
> > > is an object in the caller's scope. You really ought to pass the name
> > > "foo" (or maybe better: quote(foo), or a formula ~foo).
> >
> > Should we not just deprecate the offset argument in lm and glm?  Using the
> > offset() function in the formula works as one would expect (at least if
> > one remembers the R rules which start at the formula's environment).
>
> That's a definite possibility, but what about subset (the argument,
> not the function) and weights?
>
> Not to mention pch and col in plot.formula et al. where vectorization
> led to some unexpected awkwardness.

Though at least for the graphical parameters I think with() gives a good
solution.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug  5 16:42:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 5 Aug 2002 08:42:46 -0700 (PDT)
Subject: offset arg (was Re: [R] variable scope)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A916531F@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.A41.4.44.0208050840090.101274-100000@homer11.u.washington.edu>

On Sun, 4 Aug 2002 Bill.Venables@cmis.csiro.au wrote:

> I certainly think we should deprecate it and Peter has (probably
> unintentionally) offered yet another cogent argument as to why (although
> that could be fixed by including "offset" among the arguments to be handled
> by model.frame, like subset, weights, &c, and yes, I do know this would
> break existing code...)

It wouldn't, because it already is handled that way.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug  5 16:48:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 5 Aug 2002 17:48:19 +0200
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.34407.366778.231195@gargle.gargle.HOWL>
References: <20020718193100.23524.qmail@uadvg137.cms.usa.net>
 <15694.34407.366778.231195@gargle.gargle.HOWL>
Message-ID: <15694.40515.428879.709115@gargle.gargle.HOWL>

This is not really important, 
but since it was brought up on R-help, we might as well 
clean it up now :

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
    ChinShCh> ....

    ChinShCh> A related question -- are NAs and NaNs supposed to
    ChinShCh> be the same in R?  If they are not, wouldn't it be
    ChinShCh> more appropriate for var(1) to return NaN 
    ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
    ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
    ChinShCh> denote a missing value, and var(1) is not
    ChinShCh> missing.)

    MM> yes, I think you are right 
    MM> (and it would be the same as S-plus 6.0 does
    MM>  so there, the difference between NaN and NA
    MM>  is less visible since "NaN" are printed as "NA").

We currently say explicitly (in the help file)
that  var(), cor() and cov() return NA when there's only one
observation.

But given the above, I don't see why we should be more exact and
return "NaN" instead.  This is not back-compatible in the strict
sense, but   is.na(var(1))  of course will still be true and I
cannot imagine why the difference between NA and NaN should
matter some user's code.  
If it did, his/her code would work differently in R and S-plus.

If I don't hear arguments against, I will change these to return
NaN as suggested and S-plus compatibly.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  5 17:00:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 5 Aug 2002 17:00:34 +0100 (BST)
Subject: var(1) -> NaN instead of NA ..
In-Reply-To: <15694.40515.428879.709115@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0208051651560.27498-100000@gannet.stats>

For numeric vectors, `NA' is more precise than `NaN', although
is.na/is.nan obfuscate this.

On IEC60559 (aka, incorrectly, IEE754) machines here is a large class of
values which are NaN.  A small subclass of these are NA and are printed
specially.

On other systems, there is a single representation for NA and NaN.

So your proposed change will give different results on different
platforms, a really bad idea and I hope enough to scupper it.

In any case, statistically var(1) is a missing value, whatever the
conventional formula gives in IEC60559 arithmetic.

[The original problem is a faulty compiler: see my post to R-devel
yesterday.]

Brian

On Mon, 5 Aug 2002, Martin Maechler wrote:

> This is not really important,
> but since it was brought up on R-help, we might as well
> clean it up now :
>
> >>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>
> >>>>> "ChinShCh" == Chin-Shan Chuang <chinshan.chuang@stanfordalumni.org> writes:
>     ChinShCh> ....
>
>     ChinShCh> A related question -- are NAs and NaNs supposed to
>     ChinShCh> be the same in R?  If they are not, wouldn't it be
>     ChinShCh> more appropriate for var(1) to return NaN
>     ChinShCh> and to take out the test "stopifnot( is.na(var(1)),
>     ChinShCh> !is.nan(var(1)) )"?  (Presumably NA is used to
>     ChinShCh> denote a missing value, and var(1) is not
>     ChinShCh> missing.)
>
>     MM> yes, I think you are right
>     MM> (and it would be the same as S-plus 6.0 does
>     MM>  so there, the difference between NaN and NA
>     MM>  is less visible since "NaN" are printed as "NA").
>
> We currently say explicitly (in the help file)
> that  var(), cor() and cov() return NA when there's only one
> observation.
>
> But given the above, I don't see why we should be more exact and
> return "NaN" instead.  This is not back-compatible in the strict
> sense, but   is.na(var(1))  of course will still be true and I
> cannot imagine why the difference between NA and NaN should
> matter some user's code.
> If it did, his/her code would work differently in R and S-plus.
>
> If I don't hear arguments against, I will change these to return
> NaN as suggested and S-plus compatibly.
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Mon Aug  5 17:42:49 2002
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Mon, 5 Aug 2002 09:42:49 -0700 (PDT)
Subject: Problems with gcc-3.1 -O2 on Solaris
In-Reply-To: <Pine.LNX.4.31.0208031850490.2948-100000@gannet.stats>
Message-ID: <Pine.GSO.4.05.10208050930580.6582-100000@tajo.ucsd.edu>

On Sat, 3 Aug 2002 ripley@stats.ox.ac.uk wrote:

> I've been having problems with gcc-3.1 and R-devel on one of our Solaris 7
> systems (not the one I usually use).  We have seen a report of
> this before (Chuck Berry, 17 July 2002).
> 
> The symptom is that make check fails with var(1) being NaN not NA.  The
> underlying cause is that as.double(NA) is NaN.
> 
> It can be solved by compiling arithmetic.c without -O2.
> 
> Another installation with a single-processor UltraSparc 1 works correctly.
> My guess is that gcc-3.1 and multiprocessor/Sparc IIIs are not mixing.

FWIW, the specific problem seems to be with 

static const int hw = 0;
static const int  lw = 1;

and their use in array style indexing like this:

	y.word[lw] == 1954
	y.word[lw] != 1954

R passes 'make check' on my Solaris 8 Blade 100 with -O2 when *either*
'const' is dropped or ' *(y.word + lw) == 1954 ' style indexing is used.

Chuck

Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Mon Aug  5 21:35:04 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Mon, 5 Aug 2002 22:35:04 +0200 (MET DST)
Subject: close.screen (PR#1878)
Message-ID: <200208052035.WAA18783@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.5.1
OS: Linux
Submission from: (NULL) (132.180.72.150)


Hi,

As a user it is not obvious to me why
"close.screen" should return a warning message in 

split.screen(figs=c(1,2))
i <- 2  
screen(i)
close.screen(i)

whereas no warning message appears for i <- 1.


In fact, the warning message appears since the condition
   .split.valid.screens >  temp
in close.screen is not satisfied by any element of .split.valid.screens

Replacing 

   if (temp %in% n) 
       temp <- min(.split.valid.screens[.split.valid.screens > 
           temp])
   if (temp > max(.split.valid.screens)) 
       temp <- min(.split.valid.screens)

by

   if (temp > max(.split.valid.screens)) 
      temp <- min(.split.valid.screens)
   else
      if (temp %in% n) 
         temp <- min(.split.valid.screens[.split.valid.screens > 
             temp])

should avoid the warning message without any other changings in the
functionality of close.screen.

Cheers,
Martin




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gordong@epa.nsw.gov.au  Tue Aug  6 00:39:14 2002
From: gordong@epa.nsw.gov.au (gordong@epa.nsw.gov.au)
Date: Tue, 6 Aug 2002 01:39:14 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208052339.BAA19235@pubhealth.ku.dk>

		[this message needed manual improvement by the mailing list
		 administrator since it was `HTMLified' .. ``please do not'']


Apologies for bothering you about a fairly trivial matter. I have been
getting some inconsistencies with the display digits in R V1.5.  I have been
using the hypergeometric distribution function, and have found that when
printing out the results from this function the display does not seem to
correspond to the number of digits requested in the options settings. Maybe
this indicates that the vector hasn't been generated in the proper way, or
something, but I thought I'd report it all the same.

[Previously saved workspace restored]

> sqrt(2)
[1] 1.414214
> options(digits=4)
> sqrt(2)
[1] 1.414
> options(digits=3)
> for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> sqrt(2)
[1] 1.41
> temp
 [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
[11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
[21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> options(digits=4)
> temp
 [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
[10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
[19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
[28] 1.00000 1.00000 1.00000
> sqrt(2)
[1] 1.414
> x<-sqrt(2)
> x
[1] 1.414

While I'm writing, I'd like to thank all of you who are working on this R
project. I think it is very valuable work. I have a friend who after working
as a computer consultant for many years had to retire after having a stroke
which left him unaffected mentally but without the use of his left hand. He
now lives on an invalid pension, and has gone back to doing scientific work
in his retirement. There is no way he could afford commercial software. R
has given him the tools to do good quality graphics as required by journal
editors without which he would not have got his papers published. There must
be many people who have something to contribute but who work outside
institutions and don't have the means to purchase commercial licences. And
Third World countries should benefit greatly.

						Regards,

							Geoff Gordon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 07:33:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 07:33:44 +0100 (BST)
Subject: options(digits) (PR#1879)
In-Reply-To: <200208052339.BAA19235@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208060726530.29814-100000@gannet.stats>

On Tue, 6 Aug 2002 gordong@epa.nsw.gov.au wrote:

> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.

Could you point out where it does not give the number of digits requested?
When you print out a vector R uses the same number of decimal places for
all entries, so one entry will have the number of significant digits
requested, but others may have more.

BTW, your example does not create temp, and you haven't told us the
platorm (as created by bug.report).

>
> [Previously saved workspace restored]
>
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Aug  6 07:58:54 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 6 Aug 2002 08:58:54 +0200 (MET DST)
Subject: options(digits) (PR#1879)
Message-ID: <200208060658.IAA20295@pubhealth.ku.dk>

gordong@epa.nsw.gov.au wrote:
> 
>                 [this message needed manual improvement by the mailing list
>                  administrator since it was `HTMLified' .. ``please do not'']
> 
> Apologies for bothering you about a fairly trivial matter. I have been
> getting some inconsistencies with the display digits in R V1.5.  I have been
> using the hypergeometric distribution function, and have found that when
> printing out the results from this function the display does not seem to
> correspond to the number of digits requested in the options settings. Maybe
> this indicates that the vector hasn't been generated in the proper way, or
> something, but I thought I'd report it all the same.
> 
> [Previously saved workspace restored]
> 
> > sqrt(2)
> [1] 1.414214
> > options(digits=4)
> > sqrt(2)
> [1] 1.414
> > options(digits=3)
> > for(j in 1:30){temp[j]<-sum(dhyper(0:6, j, 30 - j, 6)[3:7])}
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > sqrt(2)
> [1] 1.41
> > temp
>  [1] 0.0000 0.0345 0.0936 0.1691 0.2543 0.3438 0.4333 0.5195 0.6002 0.6736
> [11] 0.7389 0.7956 0.8437 0.8835 0.9157 0.9410 0.9603 0.9744 0.9844 0.9912
> [21] 0.9954 0.9979 0.9992 0.9998 1.0000 1.0000 1.0000 1.0000 1.0000 1.0000
> > options(digits=4)
> > temp
>  [1] 0.00000 0.03448 0.09360 0.16913 0.25435 0.34383 0.43330 0.51954 0.60018
> [10] 0.67361 0.73889 0.79558 0.84368 0.88352 0.91571 0.94100 0.96026 0.97443
> [19] 0.98444 0.99116 0.99540 0.99788 0.99917 0.99976 0.99996 1.00000 1.00000
> [28] 1.00000 1.00000 1.00000
> > sqrt(2)
> [1] 1.414
> > x<-sqrt(2)
> > x
> [1] 1.414

That's not a bug. R prints the number of significant digits, as
expected.
For the second element in your vector temp, there are four sifnificant
digits printed:
the "3448" within 0.03448.

Just try some examples:

 0.123456789   # [1] 0.1234568, seven significant digits
 options(digits=4) 
 0.123456789   # [1] 0.1235, as expected
 0.001234567   # [1] 0.001235, still 4 significant digits

So, I cannot see any bug.

Uwe Ligges


> While I'm writing, I'd like to thank all of you who are working on this R
> project. I think it is very valuable work. I have a friend who after working
> as a computer consultant for many years had to retire after having a stroke
> which left him unaffected mentally but without the use of his left hand. He
> now lives on an invalid pension, and has gone back to doing scientific work
> in his retirement. There is no way he could afford commercial software. R
> has given him the tools to do good quality graphics as required by journal
> editors without which he would not have got his papers published. There must
> be many people who have something to contribute but who work outside
> institutions and don't have the means to purchase commercial licences. And
> Third World countries should benefit greatly.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Tue Aug  6 09:58:40 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Tue, 6 Aug 2002 10:58:40 +0200 (MET DST)
Subject: You requested this report (PR#1880)
Message-ID: <200208060858.KAA21847@pubhealth.ku.dk>

Hi guys,

I am planning to let my students do some simulations regarding the
bias of the sample standard deviation.  The following function is
pretty standard (so I hope :) ):

> sim <- function(nrng, replic, true.s, random, ...){
+   res <- NULL
+   for(n in nrng){
+     data <- matrix(random(n*replic,...), ncol=replic)
+     val <- sqrt(apply(data, 2, var))
+     res <- rbind(res,
+                  cbind(bias=val-true.s, n=n))
+   }
+   res
+ }

It takes a vector of sample sizes, a number (the number of
replications we want to simulate), the true value of the standard
deviation and a function that generates the random number (which may
depend on additional paramters).  So let's try this:

> nrng <- c(2,4,8,16,32,64)
> replic <- 500
> true.s <- 2
> tmp <- sim(nrng, replic, true.s, rnorm, sd = 2)

Yes, seems to work.  Now I thought of perhaps creating a list of
several scenarios (random numbers) and loop over it.  So I tried:

> dist <- list(list(rnorm, true.s = 2, sd=2),
+              list(rexp, true.s = 1)
+              )

Followed by

> res <- sim(nrng, replic, dist[[1]][2], dist[[1]][1], dist[[1]][-c(1,2)])
Error in as.vector(data) : couldn't find function "random"

O.k., this doesn't work.  So let us try:

> res <- sim(nrng, replic, dist[[1]][2], as.function(dist[[1]][1]), dist[[1]][-c(1,2)])
Error in as.function.default(dist[[1]][1]) : 
        invalid body argument for "function"
Should NEVER happen; please bug.report() [mkCLOSXP]

No idea why you consider this a bug. :)  I would have been willing to
put it down to my misuse of R.  But since you requested a bug report,
here it is.

Cheers,

        Berwin

BTW:  How can I actually do what I want to do?  I realise that I am
probably on a completely wrong track regarding the passing of the
... parameters.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug  6 17:16:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 6 Aug 2002 18:16:22 +0200 (MET DST)
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
Message-ID: <200208061616.SAA26682@pubhealth.ku.dk>

# polygon ignores requests to have its border transparent, look at
par(bg="transparent")
plot(c(0, 3), 0:1)
polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)

# a quick fix for erase.screen() is the following
erase.screen <-
function (n = .split.cur.screen)
{
    if (!exists(".split.screens", envir = .GlobalEnv))
        return(FALSE)
    if (!(n %in% .split.valid.screens) && n != 0)
        stop("Invalid screen number\n")
    old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
        0)
        .split.screens[[n]]$fig
    else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
    on.exit(par(old))
    par(new = TRUE)
    plot.new()
    # bug in polygon, ignores border="transparent"
    # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)  
    rect(0, 0, 1, 1, col=0, border=0)
    par(new = TRUE)
    invisible()
}

as borders are overlapping between subscreens, erasing one subscreen will
set parts of borders of neighbor subscreens to background color. I guess this
is better than not beeing able to erase the borders at all. However, if border
shall not be erased have 
  rect(0, 0, 1, 1, col=0, border="tranparent")
instead. Alternatively we could introduce a new parameter border= to
erase.screen(), screen() and split.screen()

Best regards


Jens Oehlschlgel



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  6 18:47:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 6 Aug 2002 18:47:56 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <200208061616.SAA26682@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>

Strangely, it works without the first line, which is the default on a
windows() device.

There's a bug in GA_Polyline (not Polygon) stemming from the changes to
graphics device internals at 1.4.0, it seems.  It is transparent polylines
one cannot draw, and only on the windows() device.

You don't give an example for erase.screen: does this need a separate fix?

On Tue, 6 Aug 2002 oehl_list@gmx.de wrote:

> # polygon ignores requests to have its border transparent, look at
> par(bg="transparent")
> plot(c(0, 3), 0:1)
> polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
> polygon(c(1, 2, 2, 1), c(0, 0, 1, 1), border="transparent", col = 0)
> polygon(c(2, 3, 3, 2), c(0, 0, 1, 1), border=0, col = 0)
>
> # a quick fix for erase.screen() is the following
> erase.screen <-
> function (n = .split.cur.screen)
> {
>     if (!exists(".split.screens", envir = .GlobalEnv))
>         return(FALSE)
>     if (!(n %in% .split.valid.screens) && n != 0)
>         stop("Invalid screen number\n")
>     old <- par(usr = c(0, 1, 0, 1), mar = c(0, 0, 0, 0), fig = if (n >
>         0)
>         .split.screens[[n]]$fig
>     else c(0, 1, 0, 1), xaxs = "i", yaxs = "i")
>     on.exit(par(old))
>     par(new = TRUE)
>     plot.new()
>     # bug in polygon, ignores border="transparent"
>     # was: polygon(c(0, 1, 1, 0), c(0, 0, 1, 1), border=NA, col = 0)
>     rect(0, 0, 1, 1, col=0, border=0)
>     par(new = TRUE)
>     invisible()
> }
>
> as borders are overlapping between subscreens, erasing one subscreen will
> set parts of borders of neighbor subscreens to background color. I guess this
> is better than not beeing able to erase the borders at all. However, if border
> shall not be erased have
>   rect(0, 0, 1, 1, col=0, border="tranparent")
> instead. Alternatively we could introduce a new parameter border= to
> erase.screen(), screen() and split.screen()
>
> Best regards
>
>
> Jens Oehlschlgel
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug  7 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 7 Aug 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208070515.g775F5r22107@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1840 *
Subject: predict() still not yet "safe"..
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 26 Jul 2002 20:11:26 +0200
* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1717 *
Subject: Problem in optim(method="L-BFGS-B")
From: polzehl@wias-berlin.de
Date: Fri, 28 Jun 2002 11:53:13 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1863 *
Subject: glm crashes with "Illegal instruction"
From: tkoulis@math.uwaterloo.ca
Date: Thu, 1 Aug 2002 22:15:19 +0200 (MET DST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1879 *
Subject: options(digits)
From: Gordon Geoff <gordong@epa.nsw.gov.au>
Date: Tue, 6 Aug 2002 09:36:57 +1000 
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
* PR# 1881 *
Subject: polygon() draws non-transparent border, erase.screen draws non-transparent border
From: oehl_list@gmx.de
Date: Tue, 6 Aug 2002 18:15:09 +0200 (MEST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Wed Aug  7 16:49:22 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Wed, 7 Aug 2002 17:49:22 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208061842070.3062-100000@gannet.stats>
Message-ID: <13936.1028735362@www33.gmx.net>


Dear Brian,

thank you for your answer.

> There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> graphics device internals at 1.4.0, it seems.  It is transparent polylines
> one cannot draw, and only on the windows() device.
> 
> You don't give an example for erase.screen: does this need a separate fix?

The original call to polygon in erase.screen() did use border=NA. I did not
find documentation saying what an NA color means !? Testing a bit, I find
rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
erase.screen() rather should also erase the borders in background color AS
THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
is no need to use rect() instead of polygon().

Best


Jens


oldpar <- par(no.readonly=TRUE)
par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# now switching to right screen ERASES border of right screen in Prototype
(S+2000)
# thus the right border of the left box gets deleted
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 17:14:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 17:14:22 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <13936.1028735362@www33.gmx.net>
Message-ID: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>

On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:

>
> Dear Brian,
>
> thank you for your answer.
>
> > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > one cannot draw, and only on the windows() device.
> >
> > You don't give an example for erase.screen: does this need a separate fix?
>
> The original call to polygon in erase.screen() did use border=NA. I did not
> find documentation saying what an NA color means !? Testing a bit, I find
> rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> erase.screen() rather should also erase the borders in background color AS
> THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> is no need to use rect() instead of polygon().

NA is a colour that is the same as "transparent".  Unfortunately, border=0
for polygon() is documented to mean `do not draw', but that is not what
happens.  Looks like this needs sorting out.

Thanks for drawing it to our attention.

>
> Best
>
>
> Jens
>
>
> oldpar <- par(no.readonly=TRUE)
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # now switching to right screen ERASES border of right screen in Prototype
> (S+2000)
> # thus the right border of the left box gets deleted
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 18:15:51 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 18:15:51 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <Pine.LNX.4.31.0208071710530.22725-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>

Follow up.  The reason your example does not work is that par("bg") is
transparent (as the help page warns).  It does work if par(bg="white") is
set.  Plotting a polygon first fills the whole area, then overplots the
border (if both cases, for opaque colours).

On Wed, 7 Aug 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 7 Aug 2002 oehl_list@gmx.de wrote:
>
> >
> > Dear Brian,
> >
> > thank you for your answer.
> >
> > > There's a bug in GA_Polyline (not Polygon) stemming from the changes to
> > > graphics device internals at 1.4.0, it seems.  It is transparent polylines
> > > one cannot draw, and only on the windows() device.
> > >
> > > You don't give an example for erase.screen: does this need a separate fix?
> >
> > The original call to polygon in erase.screen() did use border=NA. I did not
> > find documentation saying what an NA color means !? Testing a bit, I find
> > rect(border=NA) to interpret it as "tranparent" resp. lty=0. To my understanding
> > erase.screen() rather should also erase the borders in background color AS
> > THE PROTOTYPE DOES (WinS+2000), look at example code below. Thus I vote for
> > changing erase.screen() to use border=0 (zero). If polygon() get's fixed, there
> > is no need to use rect() instead of polygon().
>
> NA is a colour that is the same as "transparent".  Unfortunately, border=0
> for polygon() is documented to mean `do not draw', but that is not what
> happens.  Looks like this needs sorting out.
>
> Thanks for drawing it to our attention.
>
> >
> > Best
> >
> >
> > Jens
> >
> >
> > oldpar <- par(no.readonly=TRUE)
> > par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> > figs <- rbind(
> > c( 0.0, 0.5, 0.0, 1.0)  # left
> > , c( 0.5, 1.0, 0.0, 1.0)  # right
> > )
> > dimnames(figs) <- list(
> > c("left","right" )
> > , c("xlow","xhigh","ylow","yhigh")
> > )
> > screens <- split.screen(figs)
> >
> > par(usr=c(0, 1, 0, 1))
> >
> > #plot a box on border of left screen in some color
> > box(col=5)
> >
> > # now switching to right screen ERASES border of right screen in Prototype
> > (S+2000)
> > # thus the right border of the left box gets deleted
> > screen(2)
> >
> > close.screen(all.screens=TRUE)
> > par(oldpar)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Aug  7 19:31:30 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Wed, 7 Aug 2002 20:31:30 +0200 (MET DST)
Subject: dput to full filesystem is silent (PR#1884)
Message-ID: <200208071831.UAA05981@pubhealth.ku.dk>

Full_Name: vince carey
Version: 1.5.1
OS: solaris 2.8
Submission from: (NULL) (134.174.249.59)


as noted.  dput wrote a length 0 file.  had there been
a warning i could have taken steps to create space before
trying to save.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Russell-Lenth@uiowa.edu  Wed Aug  7 20:17:41 2002
From: Russell-Lenth@uiowa.edu (Russell-Lenth@uiowa.edu)
Date: Wed, 7 Aug 2002 21:17:41 +0200 (MET DST)
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <200208071917.VAA06122@pubhealth.ku.dk>

Full_Name: Russ Lenth
Version: 1.5.0
OS: Windows
Submission from: (NULL) (128.255.25.236)


If you use read.table with a connection to stdin(), the first
5 lines of input seem not to be accepted.  See examples below.
Did NOT have the same problem with scan().

> version
        _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.0            
year     2002           
month    04             
day      29             
language R  

> read.table(stdin(),head=T) -> junk
1: a b c
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
2: 16 17 18
3: 19 20 21
4: 22 23 24
5: 
> junk
   a  b  c
1 13 14 15
2 16 17 18
3 19 20 21
4 22 23 24

> read.table(stdin()) -> junk
1: 1 2 3
1: 4 5 6
1: 7 8 9
1: 10 11 12
1: 13 14 15
1: 16 17 18
2: 19 20 21
3: 22 23 24
4: 
> junk
  V1 V2 V3
1 16 17 18
2 19 20 21
3 22 23 24

> junk <- scan()
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items

> junk <- scan(stdin())
1: 4
2: 5
3: 6
4: 7
5: 8
6: 9
7: 
Read 6 items


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Aug  7 20:58:35 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 7 Aug 2002 15:58:35 -0400
Subject: ESS assigns .Last.value to the wrong place in R
Message-ID: <15697.31723.719742.514063@gargle.gargle.HOWL>

I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
still not fixed in ESS 5.1.23, and I think some resolution is needed.

When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
which is *not* where R normally stores it (R stores it in package:base).
When this copy becomes stale it leads to wrong answers.  The bug is in
essd-r.el, lines 63-64:

    (ess-retr-lastvalue-command
     . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

which should be changed (as I have done on my machine) to:

    (ess-retr-lastvalue-command
     . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

Here's an example of how things can go wrong:
R> find(".Last.value")
   [1] "package:base"
R> 0+1
   [1] 1
R> .Last.value
   [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
   [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
   [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
   [1] ".GlobalEnv"   "package:base"


Whenever I bring this up, a debate begins over who should change (ESS or R).
In particular, my solution will not work if package:base is "sealed".  Here's
the tail end of our last discussion:

Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
> ... The effect of sealing package:base from the user means that R will have
> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>
> Net result, ESS does not change behavior, R has already promised to
> change behavior.

and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
> Not at all.  Sealing base does not mean that .Last.value needs to be
> stored in the user's workspace.  The standard approach would be to use
> dynamic variables which are in fact functions with internal state
> (typically maintained in their environments).  E.g., .libPaths() in R
> 1.4 or better illustrates the idea.  There might be a .Last.value()
> along these lines.  The most prominent example is options() which is
> used for manipulating .Options (see also the R FAQ): this is currently
> visible to the user but it really should not.
> 
> Let me discuss our strategy re .Last.value with some r-core members.

Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
> I may be in way over my head here.  But, I think there is a 4th solution.
> Have ESS save .Last.value as some other variable in .GlobalEnv like
> .Last.value.saved.  That way .Last.value would not be hidden, and it could
> still be retreived if someone had done a help() or whatever.

Any more thoughts?
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  7 21:25:50 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 7 Aug 2002 21:25:50 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <200208071917.VAA06122@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208072124130.24674-100000@gannet.stats>

stdin() from a terminal is not a file, nor is it a standard connection.
So this is not really a bug.

In particular, as used by you it does to have pushback.

On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:

> Full_Name: Russ Lenth
> Version: 1.5.0
> OS: Windows
> Submission from: (NULL) (128.255.25.236)
>
>
> If you use read.table with a connection to stdin(), the first
> 5 lines of input seem not to be accepted.  See examples below.
> Did NOT have the same problem with scan().
>
> > version
>         _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.0
> year     2002
> month    04
> day      29
> language R
>
> > read.table(stdin(),head=T) -> junk
> 1: a b c
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 2: 16 17 18
> 3: 19 20 21
> 4: 22 23 24
> 5:
> > junk
>    a  b  c
> 1 13 14 15
> 2 16 17 18
> 3 19 20 21
> 4 22 23 24
>
> > read.table(stdin()) -> junk
> 1: 1 2 3
> 1: 4 5 6
> 1: 7 8 9
> 1: 10 11 12
> 1: 13 14 15
> 1: 16 17 18
> 2: 19 20 21
> 3: 22 23 24
> 4:
> > junk
>   V1 V2 V3
> 1 16 17 18
> 2 19 20 21
> 3 22 23 24
>
> > junk <- scan()
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
> > junk <- scan(stdin())
> 1: 4
> 2: 5
> 3: 6
> 4: 7
> 5: 8
> 6: 9
> 7:
> Read 6 items
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From larsendr@missouri.edu  Wed Aug  7 21:50:34 2002
From: larsendr@missouri.edu (larsendr@missouri.edu)
Date: Wed, 7 Aug 2002 22:50:34 +0200 (MET DST)
Subject: Change in NA_REAL behavior (PR#1886)
Message-ID: <200208072050.WAA06388@pubhealth.ku.dk>

Full_Name: David Larsen
Version: 1.5.1
OS: Redhat 7.2, w98, w2000
Submission from: (NULL) (128.206.66.65)


I have c code that produces vector sequences for plotting.  I use NA_REAL to
create an NA that will pass back to R to break the line.  This code worked fine
upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
cygwin and gcc to compile the code which I updated in July along with R-1.5.1 
The code includes R.h, Rinternals.h, and Rmath.h 

Using this same configuration this has worked for the last year.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Bartz@FMR.COM  Wed Aug  7 22:33:55 2002
From: Kevin.Bartz@FMR.COM (Bartz, Kevin)
Date: Wed, 7 Aug 2002 17:33:55 -0400
Subject: FW: [R] [ and setMethod conflict?
Message-ID: <763C275E6A1C2248AFD475237AD6135BE7CFA7@MSGBOS576NTS.fmr.com>

John Chambers suggested that I forward this thread (first posted to r-help)
along to r-devel...

Thanks,

Kevin

-----Original Message-----
From: John Chambers [mailto:jmc@research.bell-labs.com] 
Sent: Tuesday, August 06, 2002 6:31 PM
To: Bartz, Kevin
Cc: r-help@stat.math.ethz.ch
Subject: Re: [R] [ and setMethod conflict?


Definitely something funny going on, but perhaps a little less sweeping
than your comments suggest.

No explanation at the moment, but a couple of clues.

1.  The problem doesn't seem to arise unless the data frame is large
enough.  I parametrized the 5000 rows in your example and couldn't get
the bizarre behavior until the number of rows was larger than 1000.

2.  There is some reason to think that nested "[" expressions are
related.  After rewriting your testFunc as follows, the random errors
seemed to go away.

testFunc <- function(cur) {
    ii <- order(cur[,1])
  sorted <- cur[ii,]
    ll <- !is.na(sorted[,1])
   sorted[ll,]
 }
(the change is just to pull out the subset expressions that were
arguments to other "[" expressions.)

I'm not an expert on R internals, but the combination of these might
suggest garbage collection taking place in nested calls to the dispatch
code for "[".

John Chambers

PS:  this thread might be more suited to r-devel than r-help.


"Bartz, Kevin" wrote:
> 
> I noticed this oddity about [ and setMethod.
> 
> First, I define testFunc, which sorts a data frame by the first column and
> returns the entries that aren't NAs, and testIt, which runs testFunc
> repeatedly on a random large data frame, each time saving the return into
a
> dummy placeholder (for demonstration's sake).
> 
> > require(methods)
> Loading required package: methods
> [1] TRUE
> > testFunc <- function(cur) {
> +   sorted <- cur[order(cur[,1]),]
> +   sorted[!is.na(sorted[,1]),]
> + }
> > testIt <- function(num)
> +   for (i in 1:num) {
> +     cat("iteration", i, "...\n")
> +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> +   }
> 
> Let's test out testIt.
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> iteration 3 ...
> iteration 4 ...
> iteration 5 ...
> iteration 6 ...
> iteration 7 ...
> iteration 8 ...
> iteration 9 ...
> iteration 10 ...
> 
> So far, no problems. Next, I define myClass.
> 
> > setClass("myClass", representation(mySlot = "numeric"))
> [1] "myClass"
> > setMethod("[", signature(x = "myClass"),
> +           function(x, i, j, drop) "[ for myClass")
> [1] "["
> 
> Again, everything is fine. I've expanded [ to handle objects of class
> myClass. But when we attempt to use testIt now, problems emerge:
> 
> > testIt(10)
> iteration 1 ...
> Error in "[.data.frame"(cur, order(cur[, 1]), ) :
>         unused argument(s) (.Method ...)
> 
> Maybe that was just a fluke. Trying again, we get:
> 
> > testIt(10)
> iteration 1 ...
> iteration 2 ...
> Error in sorted[, 1] : incorrect number of dimensions
> 
> A different message every time, and the error seems no bug of mine (a
> .Method argument? What is that?). In fact, testIt produces a seemingly
> random response from R on each subsequent attempt--everything from
> successful execution to similarly ambiguous errors to a process-killing
"Bus
> Error."
> 
> All in all, it seems that once I've defined a new method for [ I can no
> longer count on it to operate properly in any context.
> 
> Is this the intended behavior? And if so, is there any way I can have one
> class present that overloads [ and still use [ to reliably subset data
> frames?
> 
> Thanks,
> 
> Kevin
> 
> > R.version
>          _
> platform sparc-sun-solaris2.6
> arch     sparc
> os       solaris2.6
> system   sparc, solaris2.6
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Kiermeier@adelaide.edu.au  Thu Aug  8 04:51:24 2002
From: Andreas.Kiermeier@adelaide.edu.au (Andreas.Kiermeier@adelaide.edu.au)
Date: Thu, 8 Aug 2002 05:51:24 +0200 (MET DST)
Subject: Backslash in character string (PR#1887)
Message-ID: <200208080351.FAA07464@pubhealth.ku.dk>

Full_Name: Andreas Kiermeier
Version: 1.5.1
OS: NT4.0
Submission from: (NULL) (129.127.41.28)


R appears not to be able to print a single backslash in a string, see example
session below.  The same happens on Solaris 2.6 using R 1.5.1.

> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> "\"
Error: syntax error
> "\\"
[1] "\\"
> "\lambda"
[1] "lambda"
> "\\lambda"
[1] "\\lambda"
> "\134lambda"
[1] "\\lambda"


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:30:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:30:21 +0100 (BST)
Subject: Backslash in character string (PR#1887)
In-Reply-To: <200208080351.FAA07464@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080728270.25351-100000@gannet.stats>

This is not an error, but intentional.
Use cat to print unescaped output.

Please use R-help to ask questions about how to do things in R, and
consult the FAQ about what a bug is.

On Thu, 8 Aug 2002 Andreas.Kiermeier@adelaide.edu.au wrote:

> Full_Name: Andreas Kiermeier
> Version: 1.5.1
> OS: NT4.0
> Submission from: (NULL) (129.127.41.28)
>
>
> R appears not to be able to print a single backslash in a string, see example
> session below.  The same happens on Solaris 2.6 using R 1.5.1.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > "\"
> Error: syntax error
> > "\\"
> [1] "\\"
> > "\lambda"
> [1] "lambda"
> > "\\lambda"
> [1] "\\lambda"
> > "\134lambda"
> [1] "\\lambda"
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 07:40:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 07:40:37 +0100 (BST)
Subject: Change in NA_REAL behavior (PR#1886)
In-Reply-To: <200208072050.WAA06388@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208080733440.25351-100000@gannet.stats>

There is nothing here to reproduce the claimed bug.

NA_REAL is a reference to a constant in the R.dll, and is unchanged for
a long time.

Since R still works, the problem is not occurring for those who compile R
and its packages under the recommended compiler and tools.

I note you use `cygwin and gcc'.  The documentation has said for a long
time that compilation with Cygwin is not supported.

On Wed, 7 Aug 2002 larsendr@missouri.edu wrote:

> Full_Name: David Larsen
> Version: 1.5.1
> OS: Redhat 7.2, w98, w2000
> Submission from: (NULL) (128.206.66.65)
>
>
> I have c code that produces vector sequences for plotting.  I use NA_REAL to
> create an NA that will pass back to R to break the line.  This code worked fine
> upto R-1.5.0 It continues to work on Redhat7.2 Linux but on both windows98 and
> windows2000 the NA_REAL returns -6.623485e-229 on both windows systems.  I use
> cygwin and gcc to compile the code which I updated in July along with R-1.5.1
> The code includes R.h, Rinternals.h, and Rmath.h
>
> Using this same configuration this has worked for the last year.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Thu Aug  8 08:38:30 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Thu, 8 Aug 2002 09:38:30 +0200 (MET DST)
Subject: Ops.data.frame fails with second arg a list (PR#1889)
Message-ID: <200208080738.JAA08451@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: linux-gnu 
Submission from: (NULL) (130.95.16.114)


Comparison of a data frame with a list fails with an error that 
looks to be due to a typo in Ops.data.frame:

> d <- data.frame(1:10)
> d > list(5)
Error in Ops.data.frame(d, list(5)) : Object "scalar" not found

Code has:
        rscalar <- length(e2) <= 1
        if (isList(e2)) {
            if (scalar) 

 and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Baz




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 09:37:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 10:37:12 +0200
Subject: Ops.data.frame fails with second arg a list (PR#1889)
In-Reply-To: <200208080738.JAA08451@pubhealth.ku.dk>
References: <200208080738.JAA08451@pubhealth.ku.dk>
Message-ID: <x2y9bhlpaf.fsf@biostat.ku.dk>

b.rowlingson@lancaster.ac.uk writes:

> Full_Name: Barry Rowlingson
> Version: 1.5.0
> OS: linux-gnu 
> Submission from: (NULL) (130.95.16.114)
> 
> 
> Comparison of a data frame with a list fails with an error that 
> looks to be due to a typo in Ops.data.frame:
> 
> > d <- data.frame(1:10)
> > d > list(5)
> Error in Ops.data.frame(d, list(5)) : Object "scalar" not found
> 
> Code has:
>         rscalar <- length(e2) <= 1
>         if (isList(e2)) {
>             if (scalar) 
> 
>  and hence 'Object "scalar" not found'. Should it be 'rscalar'?

Yep. Thanks. (Still there in 1.5.1, and in r-devel).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 10:25:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 10:25:11 +0100 (BST)
Subject: Problem in optim(method="L-BFGS-B") (PR#1717)
In-Reply-To: <200206280953.LAA09404@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208081022120.27895-100000@gannet.stats>

I can't reproduce this.  I get (on Windows R 1.5.1)

iter    0 value 121.713156
iter    1 value 98.361657
iter    2 value 66.561121
iter    3 value 57.491023
iter    4 value 48.193824
iter    5 value 42.298821
iter    6 value 37.554272
iter    7 value 33.741241
iter    8 value 31.592504
iter    9 value 28.856846
iter   10 value 27.450574
iter   11 value 26.807136
iter   12 value 26.525653
iter   13 value 25.553618
iter   14 value 25.424473
iter   15 value 25.312266
iter   16 value 25.310750
iter   17 value 25.309939
iter   18 value 25.307804
iter   19 value 25.307030
iter   20 value 25.302144
iter   21 value 25.294243
iter   22 value 25.283499
iter   23 value 25.276034
iter   24 value 25.274281
iter   25 value 25.273023
iter   26 value 25.272970
iter   27 value 25.272845
iter   28 value 25.272737
iter   29 value 25.272729
iter   30 value 25.272662
iter   31 value 25.272652
iter   32 value 25.272652
iter   33 value 25.272652
final  value 25.272652
converged


However, Linux gives similar problems.  The underlying cause is that you
are using finite-difference approximations and not scaling your variables
as described on the help page.


On Fri, 28 Jun 2002 polzehl@wias-berlin.de wrote:

> Full_Name: Jrg Polzehl
> Version: 1.5.1
> OS: Windows 2000
> Submission from: (NULL) (193.175.148.198)
>
>
> When calculating MLE's in a variance component model using constrained
> optimization, i.e. optim(...,method="L-BFGS-B",...) I observed an inproper
> behaviour in cases where
> the likelihood function was evalueted at the constraint. Parameters and value of
> the
> function at the constraint seem to be returned in this case.
> I've tried to reproduce the effect in a very simple example:
>
> ###############################################################################
> fn <- function(par,x,y){
> ind <- 1:(length(x)/2)
> alpha <- par[1]
> beta <- par[2]
> sigmaq1 <- par[3]
> sigmaq2 <- par[4]
> sum((y[ind]-alpha-beta*x[ind])^2/sigmaq1+log(sigmaq1)+(y[-ind]-alpha-beta*x[-ind])^2/sigmaq2+log(sigmaq2))
> }
>
> set.seed(3)
> n <- 5
> x1 <- runif(n)
> x2 <- runif(n)
> y <- c(rnorm(x1,1+x1,1),rnorm(x2,1+x2,5))
> x <- c(x1,x2)
> par <- c(0,0,1,1)
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=6,REPORT=1))
> ####################################################################################
>
> Note that the effect vanishes in case of other constraints for par[3:4].
>
> here is what happens with trace=1 :
>
> z <- optim(par,fn,method="L-BFGS-B",lower=c(-Inf,-Inf,1e-6,1e-6),x=x,y=y,control=list(trace=1,REPORT=1))
> iter    0 value 121.713156
> iter    1 value 98.361657
> iter    2 value 66.561121
> iter    3 value 57.491023
> iter    4 value 48.193824
> iter    5 value 42.298821
> iter    6 value 37.554272
> iter    7 value 33.741241
> iter    8 value 31.592504
> iter    9 value 28.856846
> iter   10 value 27.450574
> iter   11 value 4118799.069149
> final  value 4118799.069149
> converged
> ----------------------------------------------------------------------------------
> and the essential part with trace = 6 :
>
> 4  variables are free at GCP on iteration 11
> LINE SEARCH 1 times; norm of step = 1.19245
> X = -3.34057 6.34639 1.18546 15.2136
> G = -1.08654 -1.14056 1.42527 -0.307525
> Iteration    11
>
> ---------------- CAUCHY entered-------------------
>
> There are 1  breakpoints
>
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the next break point =  8.3175e-001
> Distance to the stationary point =  1.4763e-001
>
> GCP found in this segment
> Piece      1 f1, f2 at start point -4.6074e+000 3.1209e+001
> Distance to the stationary point =  1.4763e-001
> Cauchy X =  -3.18017 6.51477 0.97505 15.259
>
> ---------------- exit CAUCHY----------------------
>
> 4  variables are free at GCP on iteration 12                #
> !!!!!!!!!!!!!!!!!!!!!!
> LINE SEARCH 0 times; norm of step = 2.30637
> X = -3.90499 7.26709 1e-006 16.8712
> G = 2.86794e+006 2.02055e+006 -4.1147e+009 -0.191468
>
> iterations 12
> function evaluations 15
> segments explored during Cauchy searches 12
> BFGS updates skipped 0
> active bounds at final generalized Cauchy point 0
> norm of the final projected gradient 4.1147e+009
> final function value 4.1188e+006
>
> X = -3.90499 7.26709 1e-006 16.8712
> F = 4.1188e+006
> final  value 4118799.069149
> converged
>
>
> See especially the line marked with !!!!!!!!!!
>
> Regards,
>
> Jrg Polzehl
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Thu Aug  8 13:02:44 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Thu, 08 Aug 2002 08:02:44 -0400
Subject: read.table ignores first 5 lines (PR#1885)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>

Prof. Ripley,

In that case, is it possible to check for such things and give an error in
read.table?  (Or perhaps warn against such misuse in the help file...)

Regards,
Andy

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Wednesday, August 07, 2002 4:26 PM
> To: Russell-Lenth@uiowa.edu
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: read.table ignores first 5 lines (PR#1885)
> 
> 
> stdin() from a terminal is not a file, nor is it a standard 
> connection.
> So this is not really a bug.
> 
> In particular, as used by you it does to have pushback.
> 
> On Wed, 7 Aug 2002 Russell-Lenth@uiowa.edu wrote:
> 
> > Full_Name: Russ Lenth
> > Version: 1.5.0
> > OS: Windows
> > Submission from: (NULL) (128.255.25.236)
> >
> >
> > If you use read.table with a connection to stdin(), the first
> > 5 lines of input seem not to be accepted.  See examples below.
> > Did NOT have the same problem with scan().
> >
> > > version
> >         _
> > platform i386-pc-mingw32
> > arch     i386
> > os       mingw32
> > system   i386, mingw32
> > status
> > major    1
> > minor    5.0
> > year     2002
> > month    04
> > day      29
> > language R
> >
> > > read.table(stdin(),head=T) -> junk
> > 1: a b c
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 2: 16 17 18
> > 3: 19 20 21
> > 4: 22 23 24
> > 5:
> > > junk
> >    a  b  c
> > 1 13 14 15
> > 2 16 17 18
> > 3 19 20 21
> > 4 22 23 24
> >
> > > read.table(stdin()) -> junk
> > 1: 1 2 3
> > 1: 4 5 6
> > 1: 7 8 9
> > 1: 10 11 12
> > 1: 13 14 15
> > 1: 16 17 18
> > 2: 19 20 21
> > 3: 22 23 24
> > 4:
> > > junk
> >   V1 V2 V3
> > 1 16 17 18
> > 2 19 20 21
> > 3 22 23 24
> >
> > > junk <- scan()
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> > > junk <- scan(stdin())
> > 1: 4
> > 2: 5
> > 3: 6
> > 4: 7
> > 5: 8
> > 6: 9
> > 7:
> > Read 6 items
> >
> >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 13:33:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 13:33:30 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC55F@usrymx10.merck.com>
Message-ID: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>

On Thu, 8 Aug 2002, Liaw, Andy wrote:

> Prof. Ripley,
>
> In that case, is it possible to check for such things and give an error in
> read.table?  (Or perhaps warn against such misuse in the help file...)

It is now warned about in the help file.

It's impossible to give a warning, as it is scan behaving differently
in one particular case, not going through the connections machinery so it
can give prompts.  On the other hand, at R level we don't know what
stdin() is.

The only way I see to fix this is inside scan().  That might be possible,
On the other hand, there really are easy workarounds if all the input is
available: just use readLines to a character vector and call read.table on
the result.

> read.table(textConnection(readLines()), header=T)
>  a b c
> 1 2 3
> 4 5 6
> 7 8 9
> 10 11 12
> 13 14 15
> 16 17 18
> 19 20 21
> 22 23 24
>
>    a  b  c
1  1  2  3
2  4  5  6
3  7  8  9
4 10 11 12
5 13 14 15
6 16 17 18
7 19 20 21
8 22 23 24

where I pasted in the first block (with the > prompts).  Rgui won't work
with this, though, another way in which stdin() is special.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug  8 14:19:07 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 8 Aug 2002 15:19:07 +0200
Subject: ... / namespacing
In-Reply-To: <3067.1028802351@www57.gmx.net>
References: <3067.1028802351@www57.gmx.net>
Message-ID: <15698.28619.195039.816746@gargle.gargle.HOWL>

(redirected to R-devel)

>>>>> "oehl" == oehl list <oehl_list@gmx.de>
>>>>>     on Thu, 8 Aug 2002 12:25:51 +0200 (MEST) writes:

	  <....>

    oehl> Furthermore I heard rumors about newnamespacing
    oehl> features. Is there already information on that?

- The  'R developers' website http://developer.r-project.org/
  has links to Luke Tierney's writeups (search "name space")

- Read the NEWS file of R-devel,
  conveniently off the  http://stat.ethz.ch/R-manual/  page.

- Install R-devel and read its source :-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mike.Prager@noaa.gov  Thu Aug  8 16:21:10 2002
From: Mike.Prager@noaa.gov (Mike.Prager@noaa.gov)
Date: Thu, 8 Aug 2002 17:21:10 +0200 (MET DST)
Subject: PR #1833 Clarification (PR#1890)
Message-ID: <200208081521.RAA13974@pubhealth.ku.dk>

This is (correctly) filed under "non-reproducible."

The corresponding notes say "solved by re-installing Windows (private 
comm)."  I would like to clarify that this was solved by re-installing the 
patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
itself.  Perhaps my original message was not clear.

I point this out because installing the patch takes only 5 minutes, and 
this might help future users who experience similar problems.

Thank you.


-- 
Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
NOAA Center for Coastal Fisheries and Habitat Research
Beaufort, North Carolina  28516
http://shrimp.ccfhrb.noaa.gov/~mprager/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Thu Aug  8 16:35:37 2002
From: russell-lenth@uiowa.edu (Russ Lenth)
Date: Thu, 08 Aug 2002 10:35:37 -0500
Subject: read.table ignores first 5 lines (PR#1885)
References: <Pine.LNX.4.31.0208081316200.28285-100000@gannet.stats>
Message-ID: <3D528FC9.7D3F829C@stat.uiowa.edu>

Gentlemen,

This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
a command like:

	read.table (textConnection(readLines()), head=T)

ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
(or paste) the data, then press Ctrl-D, and I've got what I want.  Under
Windows, however, I could not find a way to signal the end of the file (I tried
Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

I also confirmed that it's possible to have a statement like

	if (file == stdin()) ...

so, if it's possible to resolve the end-of-file issue, there is a way to make
read.table do what I want (if only in my own custom version of read.table).

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science      
The University of Iowa -- Iowa City, IA 52242  USA 
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/



ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 8 Aug 2002, Liaw, Andy wrote:
> 
> > Prof. Ripley,
> >
> > In that case, is it possible to check for such things and give an error in
> > read.table?  (Or perhaps warn against such misuse in the help file...)
> 
> It is now warned about in the help file.
> 
> It's impossible to give a warning, as it is scan behaving differently
> in one particular case, not going through the connections machinery so it
> can give prompts.  On the other hand, at R level we don't know what
> stdin() is.
> 
> The only way I see to fix this is inside scan().  That might be possible,
> On the other hand, there really are easy workarounds if all the input is
> available: just use readLines to a character vector and call read.table on
> the result.
> 
> > read.table(textConnection(readLines()), header=T)
> >  a b c
> > 1 2 3
> > 4 5 6
> > 7 8 9
> > 10 11 12
> > 13 14 15
> > 16 17 18
> > 19 20 21
> > 22 23 24
> >
> >    a  b  c
> 1  1  2  3
> 2  4  5  6
> 3  7  8  9
> 4 10 11 12
> 5 13 14 15
> 6 16 17 18
> 7 19 20 21
> 8 22 23 24
> 
> where I pasted in the first block (with the > prompts).  Rgui won't work
> with this, though, another way in which stdin() is special.
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  8 16:35:56 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Aug 2002 17:35:56 +0200
Subject: Clarification (PR#1833)
In-Reply-To: <200208081521.RAA13974@pubhealth.ku.dk>
References: <200208081521.RAA13974@pubhealth.ku.dk>
Message-ID: <x2vg6ljrc2.fsf@biostat.ku.dk>

Mike.Prager@noaa.gov writes:

> This is (correctly) filed under "non-reproducible."

Unfortunately, your follow-up got filed as a new report because of the
space between PR and #. This one should end up in the right spot,
hopefully. 

> The corresponding notes say "solved by re-installing Windows (private 
> comm)."  I would like to clarify that this was solved by re-installing the 
> patch known as "Windows 2000 Service Pack 2," not by reinstalling Windows 
> itself.  Perhaps my original message was not clear.
> 
> I point this out because installing the patch takes only 5 minutes, and 
> this might help future users who experience similar problems.
> 
> Thank you.
> 
> 
> -- 
> Michael Prager, Ph.D.                <Mike.Prager@noaa.gov>
> NOAA Center for Coastal Fisheries and Habitat Research
> Beaufort, North Carolina  28516
> http://shrimp.ccfhrb.noaa.gov/~mprager/
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 16:46:58 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 16:46:58 +0100 (BST)
Subject: read.table ignores first 5 lines (PR#1885)
In-Reply-To: <3D528FC9.7D3F829C@stat.uiowa.edu>
Message-ID: <Pine.LNX.4.31.0208081644410.28652-100000@gannet.stats>

On Thu, 8 Aug 2002, Russ Lenth wrote:

> This is informative; thanks.  Following Prof. Ripley's comment, I confirmed that
> a command like:
>
> 	read.table (textConnection(readLines()), head=T)
>
> ALMOST works for my purposes.  On our HP-UX installation of R 1.5, I can enter
> (or paste) the data, then press Ctrl-D, and I've got what I want.  Under
> Windows, however, I could not find a way to signal the end of the file (I tried
> Ctrl-Z, Ctrl-D, Ctrl-C); so in that case it only works if I provide the "n"
> argument for readLines.  I'm surprised that Ctrl-Z doesn't work.

So was I.  I'm currently working on that, so it will in the next release.

I have some hope of fixing scan, but it is very complicated (I've already
spent a couple of hours on it).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Thu Aug  8 18:11:05 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Thu, 8 Aug 2002 19:11:05 +0200 (MEST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen draws non-transparent border (PR#1881)
References: <Pine.LNX.4.31.0208071812050.22947-100000@gannet.stats>
Message-ID: <3815.1028826665@www10.gmx.net>


> Follow up.  The reason your example does not work is that par("bg") is
> transparent (as the help page warns).  It does work if par(bg="white") is
> set.  Plotting a polygon first fills the whole area, then overplots the
> border (if both cases, for opaque colours).

I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
"transparent".
BUT I just discovered that my replication code does not show what I wanted
to show if R is started newly. 

# THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
par(bg="transparent")
# without SETTING background color to transparent THE FOLLOWING CODE
# DOES NOT REPLICATE THE BUG
# HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
THE SAME

oldpar <- par(no.readonly=TRUE)

par(mar=c(0,0,0,0), oma=c(0,0,0,0))
figs <- rbind(
c( 0.0, 0.5, 0.0, 1.0)  # left
, c( 0.5, 1.0, 0.0, 1.0)  # right
)
dimnames(figs) <- list(
c("left","right" )
, c("xlow","xhigh","ylow","yhigh")
)
screens <- split.screen(figs)

par(usr=c(0, 1, 0, 1))

#plot a box on border of left screen in some color
box(col=5)

# IN R I GET AN UNDESIRED BLACK BORDER HERE
screen(2)

close.screen(all.screens=TRUE)
par(oldpar)


Do you see my problem?
Best 


Jens



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R






-- 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  8 18:22:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 8 Aug 2002 18:22:06 +0100 (BST)
Subject: (PR#1881) polygon() draws non-transparent border, erase.screen
 draws non-transparent border (PR#1881)
In-Reply-To: <3815.1028826665@www10.gmx.net>
Message-ID: <Pine.LNX.4.31.0208081818350.28824-100000@gannet.stats>

That's the bug in GA_Polyline I have already fixed, so I no longer see it.

On Thu, 8 Aug 2002 oehl_list@gmx.de wrote:

>
> > Follow up.  The reason your example does not work is that par("bg") is
> > transparent (as the help page warns).  It does work if par(bg="white") is
> > set.  Plotting a polygon first fills the whole area, then overplots the
> > border (if both cases, for opaque colours).
>
> I GET AN UNDESIRED BLACK BORDER IN ERASE.SCREEN IF par("bg") ==
> "transparent".
> BUT I just discovered that my replication code does not show what I wanted
> to show if R is started newly.
>
> # THIS IS ADDITIONALLY NEEDED TO SHOW THE PROBLEM
> par(bg="transparent")
> # without SETTING background color to transparent THE FOLLOWING CODE
> # DOES NOT REPLICATE THE BUG
> # HAVING par("bg")=="transparent" and SETTING par(bg="transparent") IS NOT
> THE SAME
>
> oldpar <- par(no.readonly=TRUE)
>
> par(mar=c(0,0,0,0), oma=c(0,0,0,0))
> figs <- rbind(
> c( 0.0, 0.5, 0.0, 1.0)  # left
> , c( 0.5, 1.0, 0.0, 1.0)  # right
> )
> dimnames(figs) <- list(
> c("left","right" )
> , c("xlow","xhigh","ylow","yhigh")
> )
> screens <- split.screen(figs)
>
> par(usr=c(0, 1, 0, 1))
>
> #plot a box on border of left screen in some color
> box(col=5)
>
> # IN R I GET AN UNDESIRED BLACK BORDER HERE
> screen(2)
>
> close.screen(all.screens=TRUE)
> par(oldpar)
>
>
> Do you see my problem?
> Best
>
>
> Jens
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
>
>
>
>
> --
> GMX - Die Kommunikationsplattform im Internet.
> http://www.gmx.net
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From friendly@yorku.ca  Thu Aug  8 19:43:08 2002
From: friendly@yorku.ca (friendly@yorku.ca)
Date: 8 Aug 2002 18:43:08 -0000
Subject: Lisp-stat  and R?  [was: Re: Status?]
Message-ID: <20020808184308.146.qmail@hotspur.psych.yorku.ca>

John Fox (see below) raises important questions for
the Lisp-stat community (and perhaps the R community) to consider.
This message thread was not cross-posted to r-devel@lists.r-project.org,
so I do so now.

I have never been an active or particularly adept Lisp-stat programmer. But I  
have worked on or used several projects for which Lisp-stat seemed the ideal  
environment-- for implementing relatively portable, state-of-the-art  
applications, using dynamically-linked graphic windows to provide
and demonstrate leading-edge examples of highly-interctive environments
for the whole range from testing new ideas to delivering course content,
as has been done with Arc and ViSta.

My work with Forrest Young and Pedro Valero on ViSta implementations
of mosaic displays and other methods for categorical data has been
particularly gratifying, in that we've (well, largely Pedro) been able
to implement the kinds of interactive graphical analysis for contingency
tables that I always dreamed of.  This hinged on the built-in facilities
for object-oriented interactive graphic methods, abilities to link
graphic windows dynamically, and so forth, and Forrest's spreadplot
architecture for ViSta, which combines these facilities with a general
graph/window layout mechanism, so that all graph and text windows can
be made to work coherently.

But, as John points out, a number of people, formerly active in Lisp-stat
development have switched to R, for the reasons he outlines in his first
paragraph. I might add that for static graphs, and saving graphic
images, R now rivals, and, in some cases exceeds, what I have been
able to accomplish in SAS  -- but this (complete control of all graphic
parameters, text & math labels, etc.) is something that has always
been difficult and limited in Lisp-stat

On the other hand, R has very limited built-in facilities for
interactive graphics, and none that can be called 'dynamic'; nor does
it have any native GUI-building facilities, such as are used, with
great effect, in Arc and ViSta.  There is, however, a built-in mechanism
for R to interact with other software.  The Omega Project  
(http://www.omegahat.org) details some of these, and there are also
other similar efforts (e.g., R-ggobi)

So, from the core of folks in the union (or intersection) of 

Lisp-stat and R developers: is there anyone to respond to John's
challenge -- ``to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R''  I'll add a challenge of my own -- to incorportate
R modelling, static graphics and data manipulations into Lisp-stat.

-Michael


On Tue, 06 Aug 2002 14:37:15 -0400, John Fox said:

I've spoken over the past couple of months to several individuals who, like 

myself, have more or less left Lisp-stat for R. There are several obvious 

reasons for doing so: Lisp-stat seems moribund, while R is alive and well; 

there is a very wide and growing range of statistical applications 

available for R; R has standards for data sets, models, documentation, 

etc.; and (perhaps more controversially) the S programming language is 

easier to use than Lisp.

Nevertheless, everyone to whom I've talked regrets losing some of the 

functionality of Lisp-stat, including the ability to draw dynamic, linked 

graphs, and the built-in facilities for constructing graphical interfaces.

Although I don't have the technical expertise either to answer the 

following question or, certainly, to implement a solution, I wonder whether 

it would be possible to incorporate the Lisp-stat graphics and GUI-building 

capabilities into R, ideally in the form of an add-on package that would 

work in all three supported environments -- Windows, Mac, and Linux/Unix. I 

know that there would be some obstacles -- and probably the components from 

Lisp-stat would have to run as a separate process -- but don't know whether 

these obstacles can be overcome.

If anyone has any ideas along these lines, I'd be interested in hearing 

them, and possibly in helping to organize a project to implement them.

Regards,
  John

At 12:44 AM 8/6/2002 +0200, Frederic Udina wrote:

>Bill,
>
>(just to be sure that somebody answers your question)
>
>Xlisp-stat, still being the only choice for some statistical applications,
>is not as active as it was some time ago.
>
>Some of the gurus have moved to R, some other are quite inactive. Some of
>us are still working with it but we obviously miss some lifting on the
>software... But apparently the efforts to undertake it have not been
>succesful.
>
>I have not looked to the official site for a while, it would be good to
>have it at least pointing to the existing resources.
>
>Somebody singin'  "We shall overcome..." out there?
>
>
>
>On Mon, 5 Aug 2002, Bill Harris wrote:
>
>~~~I just used XLISP-STAT again today after a bit of an absence, and I
>~~~thought I'd check to see what was new on the Web.  While I don't need to
>~~~see ongoing developments to find a tool useful, I was curious in that
>~~~http://www.xlispstat.org/ and the UCLA site that Google returned both
>~~~seemed offline.  What is up with XLISP-STAT these days?
>~~~
>~~~Bill
>~~~--
>~~~Bill Harris                                  3217 102nd Place SE
>~~~Facilitated Systems                          Everett, WA 98208 USA
>~~~http://facilitatedsystems.com/               phone: +1 425 337-5541
>~~~
>
>
>  Frederic Udina
>   ____________________________________________________________________
>   <udina@upf.es> Dept. D'Economia i Empresa   Universitat Pompeu Fabra
>                   Ramon Trias Fargas, 25-27      08005 Barcelona SPAIN
>   tel. 34- 935421756/1763 fax: 34- 935421746     http://libiya.upf.es/
>   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>   There are many here among us who feel that life is but a joke  B.Dy.

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Aug  8 21:33:50 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 8 Aug 2002 22:33:50 +0200
Subject: ESS assigns .Last.value to the wrong place in R
In-Reply-To: <15697.31723.719742.514063@gargle.gargle.HOWL>
References: <15697.31723.719742.514063@gargle.gargle.HOWL>
Message-ID: <15698.54702.56299.675830@mithrandir.hornik.net>

>>>>> David Brahm writes:

> I repeat my emails of 11/15/01 and 2/26/02, since it looks like this ESS bug is
> still not fixed in ESS 5.1.23, and I think some resolution is needed.

> When help() is invoked, ESS makes a copy of .Last.value in the .GlobalEnv,
> which is *not* where R normally stores it (R stores it in package:base).
> When this copy becomes stale it leads to wrong answers.  The bug is in
> essd-r.el, lines 63-64:

>     (ess-retr-lastvalue-command
>      . ".Last.value <- get(\".ess.lvsave\",inherits=TRUE)\n") ; envir=1

> which should be changed (as I have done on my machine) to:

>     (ess-retr-lastvalue-command
>      . "assign(\".Last.value\", .ess.lvsave, envir=NULL)\n") ; package:base

> Here's an example of how things can go wrong:
R> find(".Last.value")
>    [1] "package:base"
R> 0+1
>    [1] 1
R> .Last.value
>    [1] 1
R> ?seq       # At this point a stale copy of .Last.value is written to pos=1
R> 0+2
>    [1] 2
R> .Last.value                                        # WHOOPS!  WRONG VALUE!
>    [1] 1
R> find(".Last.value")          # The right value is masked by the stale copy
>    [1] ".GlobalEnv"   "package:base"


> Whenever I bring this up, a debate begins over who should change (ESS
> or R).  In particular, my solution will not work if package:base is
> "sealed".  Here's the tail end of our last discussion:

> Rich Heiberger <rmh@surfer.sbm.temple.edu> wrote:
>> ... The effect of sealing package:base from the user means that R will have
>> to store .Last.value in .GlobalEnv, which is the place ESS is using.  This
>> in effect is your solution 2) Change R to store .Last.value in .GlobalEnv
>> 
>> Net result, ESS does not change behavior, R has already promised to
>> change behavior.

> and Kurt Hornik <hornik@mithrandir.hornik.net> replied:
>> Not at all.  Sealing base does not mean that .Last.value needs to be
>> stored in the user's workspace.  The standard approach would be to use
>> dynamic variables which are in fact functions with internal state
>> (typically maintained in their environments).  E.g., .libPaths() in R
>> 1.4 or better illustrates the idea.  There might be a .Last.value()
>> along these lines.  The most prominent example is options() which is
>> used for manipulating .Options (see also the R FAQ): this is currently
>> visible to the user but it really should not.
>> 
>> Let me discuss our strategy re .Last.value with some r-core members.

> Also, Rodney Sparapani <rsparapa@post.its.mcw.edu> suggested:
>> I may be in way over my head here.  But, I think there is a 4th solution.
>> Have ESS save .Last.value as some other variable in .GlobalEnv like
>> .Last.value.saved.  That way .Last.value would not be hidden, and it could
>> still be retreived if someone had done a help() or whatever.

> Any more thoughts?

I had raised this issue with a couple of r-core people, but without
coming to a final conclusion.  I think the underlying issue is rather
subtle: what is attempted by playing with .Last.value is somehow to
restore the 'state' of the system before ESS started 'invisibly'
interacting with it.  I have no idea if this makes sense conceptually in
a multithreaded setting.  (And the same applies to .Last.value, up to
some extent.)

I would actually prefer that we stop playing with .Last.value, and
document this.  If not, David's suggestion about assigning in envir =
NULL (i.e., the base package) is certainly preferable to what ESS
currently has, but will need to reviewed once name spaces are fully in
place.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From b.rowlingson@lancaster.ac.uk  Fri Aug  9 09:35:45 2002
From: b.rowlingson@lancaster.ac.uk (b.rowlingson@lancaster.ac.uk)
Date: Fri, 9 Aug 2002 10:35:45 +0200 (MET DST)
Subject: summary.data.frame with compound elements problem (PR#1891)
Message-ID: <200208090835.KAA17461@pubhealth.ku.dk>

Full_Name: Barry Rowlingson
Version: 1.5.0
OS: x86 linux
Submission from: (NULL) (130.95.16.114)


Elements of a dataframe may be a matrix or another dataframe. In
this case the summary() method can do bad things:

> x <- data.frame(1:10)
> x$z <- data.frame(x=1:10,y=1:10)
> summary(x)
     X1.10          z                  
 Min.   : 1.00   NULL:Min.   : 1.00    
 1st Qu.: 3.25   NULL:1st Qu.: 3.25    
 Median : 5.50   NULL:Median : 5.50    
 Mean   : 5.50   NULL:Mean   : 5.50    
 3rd Qu.: 7.75   NULL:3rd Qu.: 7.75    
 Max.   :10.00   NULL:Max.   :10.00    
                 NULL:Min.   : 1.00    
                 NULL:1st Qu.: 3.25    
                 NULL:Median : 5.50    
                 NULL:Mean   : 5.50    
                 NULL:3rd Qu.: 7.75    
                 NULL:Max.   :10.00    

 - this comes from summary(x) calling summary(x$z) and
not handling the fact that summary(x$z) has an element for
each column.

 I think this may be a can of worms. There is a difference
between:

 x <- data.frame(1:10,z=data.frame(1:10,1:10))
and
 x <- data.frame(1:10) ; x$z<-data.frame(1:10,1:10)

 In the first case data.frame() will take columns of the z= argument
and add them to x so that x ends up with 3 elements. In the second
case x ends up with two elements (although it prints as three columns
with identical names for $z).

 Should data frames (and matrices) be allowed as elements of data frames
(assuming they have the right number of rows)? If _not_, then "$<-.data.frame"
should either behave like data.frame(z=...) above or disallow it, and if _so_
then 
summary.data.frame needs tweaking to cope.

 [Splus has similar behaviour, except only for data.frames in data.frames, but
that's because in Splus summary(a matrix) is summary of the whole matrix and 
so only has one element. In R the summary() of a matrix is an element for each
column. Now where's the Splus jitterbug?]

Baz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Aug 13 08:37:08 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 13 Aug 2002 09:37:08 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208130737.JAA06371@pubhealth.ku.dk>

Here is an example:

 The legends (mainly the factor level names) are cut off on the
 right.  Somehow the internal calculation which computes
 horizontal space for the legend is not flexible enough.

## Call a new graphics window {with default par()s !}:
get(getOption("device"))()
par(mfrow = c(2,2))

## part of  example(interaction.plot)  _improved_ using with() :
data(OrchardSprays)
with(OrchardSprays, {
    interaction.plot(treatment, rowpos, decrease)
    interaction.plot(rowpos, treatment, decrease)
})

data(esoph)
with(esoph, {
    interaction.plot(agegp, alcgp, ncases/ncontrols)
    interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
                     fixed=TRUE)
})

-------------------------------

Something that should be easy to fix, but needs some care (and
time). 
Volunteers?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Tue Aug 13 09:57:33 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Tue, 13 Aug 2002 10:57:33 +0200 (MET DST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
Message-ID: <200208130857.KAA07497@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.5.1
OS: WinMe
Submission from: (NULL) (217.210.0.243)


In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
too many files in @Rfiles the source code line generated will be too long and
weird things will happen, e.g. strange bytes/characters will be inserted.

SUGGESTION/SOLUTION:
Add a new line character after each "join";

 $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";

instead of

 $Rcmd .= join("\", \"", @Rfiles) . "\")\n";


SUGGESTION II:
I ran into similar problems in other situations where I autogenerated too long
source lines. The errors where hard to reproduce and took time to find. It would
be nice if the [R] parser, or some previous engine that reads the source file,
could given an explicit error saying that the "line was too long".

EXAMPLE:
In my case I got in perl '@Rfiles' was:
"R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"

but in [R] 'Rfiles' became:
 [1] "R/LogBook.R"                   "R/LogEntry.R"                 
 [3] "R/GenePixData.R"               "R/Layout.R"                   
 [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"      
 [7] "R/QualityData.R"               "R/MicroarrayData.R"           
 [9] "R/MAData.R"                    "R/MAData.NORM.R"              
[11] "R/zzz.R"                       "R/Replicates.R"               
[13] "R/SMA.R"                       "R/FieldFilter.R"              
[15] "R/Filter.R"                    "R/QuantArrayData.R"           
[17] "R/RGData.R"                    "R/RawData.R"                  
[19] "R/000.R"                       "R/MicroarrayData.IO.R"        
[21] "R/LayoutGroups.R"              "R/BFilter.R"                  
[23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"          
[25] "R/Copy of SSMatrix.R"          "R/private.utils.R"            
[27] "R/WangetalData.R"              "R/KHessFilter.R"              
[29] "R/DfFilter.R"                  "R/SpotData.R"                 
[31] "R/ScanAlyzeData.R"             "R/BMAData.R"                  
[33] "R/AFilter.R"                   "R/MFilter.R"                  
[35] "R/Layout.obsolete.R"           "R/AndFilter.R"                
[37] "R/OrFilter.R"                  "R/SEFilter.R"                 
[39] "R/TFilter.R"                   "R/AcceptFilter.R"             
[41] "R/SpotPosition.R"              "R/SerialFilter.R"             
[43] "R/GSRArray.R"                  "R/MultiwayArray.R"            
[45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"         
[47] "R/GeneData.R"                  "R/GeneRejectFilter.R"         
[49] "R/TMAData.R"                   "R/NotFilter.R"                
[51] "R/ParallelFilter.R"            "R/RejectFilter.R"             
[53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"                 
[55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
[57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"   

Look at the 56 element. Trying to add or remove files, I found that this was
always happening at the same column in the Rfiles row and inferred that this is
due to the maximum line length in [R] source files. Correct?

Best wishes

Henrik Bengtsson


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 10:43:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 10:43:03 +0100 (BST)
Subject: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <200208130857.KAA07497@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131022320.25584-100000@gannet.stats>

On Tue, 13 Aug 2002 hb@maths.lth.se wrote:

> Full_Name: Henrik Bengtsson
> Version: 1.5.1
> OS: WinMe
> Submission from: (NULL) (217.210.0.243)
>
>
> In the Perl script $R_HOME/bin/check there is a bug under the section "Check R
> code for syntax errors" where the 'Rfiles <- c(...)' is build up. If there are
> too many files in @Rfiles the source code line generated will be too long and
> weird things will happen, e.g. strange bytes/characters will be inserted.

> SUGGESTION/SOLUTION:
> Add a new line character after each "join";
>
>  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
>
> instead of
>
>  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
>
>
> SUGGESTION II:
> I ran into similar problems in other situations where I autogenerated too long
> source lines. The errors where hard to reproduce and took time to find. It would
> be nice if the [R] parser, or some previous engine that reads the source file,
> could given an explicit error saying that the "line was too long".
>
> EXAMPLE:
> In my case I got in perl '@Rfiles' was:
> "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R R/Filter.R
> R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of TFilter.R R/Copy of
> SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R R/DfFilter.R
> R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
>
> but in [R] 'Rfiles' became:
>  [1] "R/LogBook.R"                   "R/LogEntry.R"
>  [3] "R/GenePixData.R"               "R/Layout.R"
>  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
>  [7] "R/QualityData.R"               "R/MicroarrayData.R"
>  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> [11] "R/zzz.R"                       "R/Replicates.R"
> [13] "R/SMA.R"                       "R/FieldFilter.R"
> [15] "R/Filter.R"                    "R/QuantArrayData.R"
> [17] "R/RGData.R"                    "R/RawData.R"
> [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> [21] "R/LayoutGroups.R"              "R/BFilter.R"
> [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> [27] "R/WangetalData.R"              "R/KHessFilter.R"
> [29] "R/DfFilter.R"                  "R/SpotData.R"
> [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> [33] "R/AFilter.R"                   "R/MFilter.R"
> [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> [37] "R/OrFilter.R"                  "R/SEFilter.R"
> [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> [49] "R/TMAData.R"                   "R/NotFilter.R"
> [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
>
> Look at the 56 element. Trying to add or remove files, I found that this was
> always happening at the same column in the Rfiles row and inferred that this is
> due to the maximum line length in [R] source files. Correct?

There is no such line limit.  If I take your file list, convert it via the
orginal join and read it into R, I don't get a problem, under Linux or
Windows XP. I think you are hitting the limitations of your `operating
system', not R.  But without a reproducible example it is hard to tell.

Package survival has 92 files with file names at least as long as yours,
and that works perfectly happily on Windows XP.

Can you make available a sample package which exhibits the problem?

Nevertheless, joining with "\n" should be a palliative measure.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer+science@uni-bochum.de  Tue Aug 13 13:12:18 2002
From: stefan.boehringer+science@uni-bochum.de (stefan.boehringer+science@uni-bochum.de)
Date: Tue, 13 Aug 2002 14:12:18 +0200 (MET DST)
Subject: svm seg faults (PR#1901)
Message-ID: <200208131212.OAA10671@pubhealth.ku.dk>

Full_Name: Stefan Bhringer
Version: 1.5.1
OS: Linux RH 7.3
Submission from: (NULL) (132.252.142.137)


using the svm function from the e1071 library. R crashes with the very example
from the help page or any other input.
In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 13:43:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 13:43:29 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <200208131212.OAA10671@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>

Which compiler is this?

I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
versions of gcc. I think this is particularly critical when C/C++ mixtures
are used (as in svm).

PR#1178 is another non-reproducible segfault in svm on Linux.

On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:

> Full_Name: Stefan Bhringer
> Version: 1.5.1
> OS: Linux RH 7.3
> Submission from: (NULL) (132.252.142.137)
>
>
> using the svm function from the e1071 library. R crashes with the very example
> from the help page or any other input.
> In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Tue Aug 13 13:23:07 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 13 Aug 2002 14:23:07 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029241389.6475.9.camel@hgX>

I've used the stock 2.96 gcc. Also I have 3.1 installed as gcc3 but
couldn't get around to make R compile with gcc3.

Thanks

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From johannes.huesing@uni-essen.de  Tue Aug 13 14:41:15 2002
From: johannes.huesing@uni-essen.de (=?iso-8859-1?Q?Johannes_H=FCsing?=)
Date: Tue, 13 Aug 2002 15:41:15 +0200
Subject: Lisp-stat  and R?  [was: Re: Status?]
In-Reply-To: <20020808184308.146.qmail@hotspur.psych.yorku.ca>; from friendly@hotspur.psych.yorku.ca on Thu, Aug 08, 2002 at 06:43:08PM -0000
References: <20020808184308.146.qmail@hotspur.psych.yorku.ca>
Message-ID: <20020813154115.51612@spi.power.uni-essen.de>

On Thu 2002-08-08 (18:43), friendly@hotspur.psych.yorku.ca wrote:
>   I'll add a challenge of my own -- to incorportate
> R modelling, static graphics and data manipulations into Lisp-stat.
> 

I don't see anyone finding much interest in re-programming
all modelling aspects which are available and being extended in 
R from scratch in XLispStat. 

Rather I would like to see each language to continue to excel in
what it is already good at. XLispStat can survive when it builds 
on its dynamic graphic facilities, which have been exceptional in 
1990, and still worth a look at in 2002.
For ideas about what else 
dynamic
graphics can do, see for example http://www.theusrus.de/Mondrian/index.html.

One thing that comes to mind that might be worthwhile is a
color model. There's some remarkable work by Steve Majewski but I 
don't know how widely used it is.

This way, one would have a flexible and powerful graphics engine. It
can be extended in large projects. If it keeps an edge over, say, R
in the area of graphics, it will be a tool always to consider, rather
than a duplicate effort in an area other languages already shine.

For working in what other languages are good at, there's Omegahat
(http://www.omegahat.org).

Just another two cents.

Greetings


Johannes
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 20:56:41 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 21:56:41 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208131956.VAA13672@pubhealth.ku.dk>

An NA in the rownames of a matrix (or dataframe) causes misalignment when the
matrix is printed:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> rownames(x)[2] <- NA
R> x
     A B C  D
a    1 4 7 10
<NA>   2 5 8 11
c    3 6 9 12

The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
between lines 242 ("int len;") and 243 ("len = 0;"):

    if (s == CHAR(NA_STRING))
      return quote ? R_print.na_width : R_print.na_width_noquote;

which solves the problem:

R-patched> x
     A B C  D
a    1 4 7 10
<NA> 2 5 8 11
c    3 6 9 12

-----------------------------------------------------------------------------

An NA in the colnames has similar misalignment problems:

R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
R> colnames(x)[2] <- NA
R> x
  A <NA> C  D
a 1  4 7 10
b 2  5 8 11
c 3  6 9 12

But this time it's because lines 72, 139, 213, 299, and 375 of
src/main/printarray.c use "strlen", which doesn't know about NA's:

  clabw = strlen(CHAR(STRING_ELT(cl, j)));

My patch is to replace "strlen" with "Rstrlen" in each case:

  clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);

and again this solves the problem:

R-patched> x
  A <NA> C  D
a 1    4 7 10
b 2    5 8 11
c 3    6 9 12

-----------------------------------------------------------------------------

References:

Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
  http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
but this was fixed in R-1.5.1.

Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
  http://www.r-project.org/nocvs/mail/r-help/2002/6367.html

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 13 21:35:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 13 Aug 2002 21:35:13 +0100 (BST)
Subject: Misalignment of <NA> in rownames (PR#1905)
In-Reply-To: <200208131956.VAA13672@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208132127350.9301-100000@gannet.stats>

Have you looked at R-devel?  Neither of these are currently incorrect.

Rstrlen is an exported entry point, and I don't think we want to mess with
it.  It is used for other than printing.

On Tue, 13 Aug 2002 brahm@alum.mit.edu wrote:

> An NA in the rownames of a matrix (or dataframe) causes misalignment when the
> matrix is printed:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> rownames(x)[2] <- NA
> R> x
>      A B C  D
> a    1 4 7 10
> <NA>   2 5 8 11
> c    3 6 9 12
>
> The bug is in function Rstrlen, in src/main/printutils.c.  MatrixRowLabel and
> MatrixColumnLabel (same file) rely on Rstrlen to count the characters in each
> label, but Rstrlen doesn't understand NA's.  Here's a patch, to be applied
> between lines 242 ("int len;") and 243 ("len = 0;"):
>
>     if (s == CHAR(NA_STRING))
>       return quote ? R_print.na_width : R_print.na_width_noquote;
>
> which solves the problem:
>
> R-patched> x
>      A B C  D
> a    1 4 7 10
> <NA> 2 5 8 11
> c    3 6 9 12
>
> -----------------------------------------------------------------------------
>
> An NA in the colnames has similar misalignment problems:
>
> R> x <- matrix(1:12, 3,4, dimnames=list(letters[1:3], LETTERS[1:4]))
> R> colnames(x)[2] <- NA
> R> x
>   A <NA> C  D
> a 1  4 7 10
> b 2  5 8 11
> c 3  6 9 12
>
> But this time it's because lines 72, 139, 213, 299, and 375 of
> src/main/printarray.c use "strlen", which doesn't know about NA's:
>
>   clabw = strlen(CHAR(STRING_ELT(cl, j)));
>
> My patch is to replace "strlen" with "Rstrlen" in each case:
>
>   clabw = Rstrlen(CHAR(STRING_ELT(cl, j)), 0);
>
> and again this solves the problem:
>
> R-patched> x
>   A <NA> C  D
> a 1    4 7 10
> b 2    5 8 11
> c 3    6 9 12
>
> -----------------------------------------------------------------------------
>
> References:
>
> Don MacQueen reported a similar problem in the body of the matrix on 5/1/02:
>   http://www.r-project.org/nocvs/mail/r-help/2002/3455.html
> but this was fixed in R-1.5.1.
>
> Derek Yi <Derek.Yi@fmr.com> first noted the rownames problem on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6366.html
> and Brian D. Ripley <ripley@stats.ox.ac.uk> replied on 8/1/02 in
>   http://www.r-project.org/nocvs/mail/r-help/2002/6367.html
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oehl_list@gmx.de  Tue Aug 13 21:43:42 2002
From: oehl_list@gmx.de (oehl_list@gmx.de)
Date: Tue, 13 Aug 2002 22:43:42 +0200 (MET DST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
Message-ID: <200208132043.WAA13848@pubhealth.ku.dk>


Please find replication code below
Best

Jens Oehlschlgel


> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
[1] 2 3 4 1
> order(x, na.last=TRUE, decreasing=TRUE)
[1] 4 3 2 1
> order(x, na.last=FALSE, decreasing=FALSE)
[1] 1 2 3 4
> order(x, na.last=FALSE, decreasing=TRUE)
[1] 1 4 3 2
> order(x, na.last=NA, decreasing=FALSE)
[1] 2 3 4
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
[1] 2 3 4
> 

x <- c(NA, 1, 2, 3)
order(x, na.last=TRUE, decreasing=FALSE)
order(x, na.last=TRUE, decreasing=TRUE)
order(x, na.last=FALSE, decreasing=FALSE)
order(x, na.last=FALSE, decreasing=TRUE)
order(x, na.last=NA, decreasing=FALSE)
# THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
order(x, na.last=NA, decreasing=TRUE)



> version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R 


-- 




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Aug 13 22:07:37 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Tue, 13 Aug 2002 23:07:37 +0200 (MET DST)
Subject: Misalignment of <NA> in rownames (PR#1905)
Message-ID: <200208132107.XAA13950@pubhealth.ku.dk>

Brian D. Ripley <ripley@stats.ox.ac.uk> wrote:
> Have you looked at R-devel?  Neither of these are currently incorrect.

I see you fixed these very issues on Aug 1 by modifying MatrixRowLabel and
friends.  Sorry for not checking there first!  I will let Derek know.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:01:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:01:34 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.LNX.4.31.0208140659560.11641-100000@gannet.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Sorry, but it was indeed the redirection of the standard output in
> Cygwin/bash that cause the first problem, not R (I should stop doing
> troubleshooting at 1:00 AM). So please forget about the problems reported in
> R_CMD_check.out. However, it would still be nice if you still update R CMD
> check to do join with "\n".

Yes, on ME.  That was my prime suspect.

The change has already been made.

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

Will take a look.

> Sorry about that, I hope none of you spent time on the first problem.

Not me: I could not reproduce it on XP.

> Henrik
>
> -----Original Message-----
> From: Henrik Bengtsson [mailto:hb@maths.lth.se]
> Sent: Wednesday, August 14, 2002 12:50 AM
> To: ripley@stats.ox.ac.uk
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> I did some error tracking myself. I verified that the Perl generated
> temporary [R] file was correct. I narrowed down the problem to be with the
> redirecting of the standard input, i.e. <, into [R] and I also found that I
> could not get the same problem if I source()'d the same file. Then I thought
> it might be my shell (Cygwin/bash), but not! Doing
>
>  % cat < R_CMD_check.out
>
> is just fine, but when doing
>
>   R --vanilla --quiet < R_CMD_check.out
>
> I run into problems. It looks like every line that is long enough will get
> some garbage bytes inserted at column 1023. I have attached the
> R_CMD_check.out file with comments for you. As you see, it is not what R CMD
> check have generated, but as the problem is not with R CMD check itself
> anymore I removed the non-interesting parts.
>
> Maybe related to this is another problem that makes source() crash if I have
> a too long string (>2128 characters) inside a function definition. The
> attached R script TooLongLines.R is supposed to illustrate this. It also
> contains Dr. Mingw's report.
>
> FYI: I'll be out of the office from Wednesday noon-Sunday.
>
> Henrik Bengtsson
>
> > -----Original Message-----
> > From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> > Sent: Tuesday, August 13, 2002 11:43 AM
> > To: hb@maths.lth.se
> > Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> > Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
> >
> >
> > On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
> >
> > > Full_Name: Henrik Bengtsson
> > > Version: 1.5.1
> > > OS: WinMe
> > > Submission from: (NULL) (217.210.0.243)
> > >
> > >
> > > In the Perl script $R_HOME/bin/check there is a bug under the
> > section "Check R
> > > code for syntax errors" where the 'Rfiles <- c(...)' is build
> > up. If there are
> > > too many files in @Rfiles the source code line generated will
> > be too long and
> > > weird things will happen, e.g. strange bytes/characters will be
> > inserted.
> >
> > > SUGGESTION/SOLUTION:
> > > Add a new line character after each "join";
> > >
> > >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> > >
> > > instead of
> > >
> > >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> > >
> > >
> > > SUGGESTION II:
> > > I ran into similar problems in other situations where I
> > autogenerated too long
> > > source lines. The errors where hard to reproduce and took time
> > to find. It would
> > > be nice if the [R] parser, or some previous engine that reads
> > the source file,
> > > could given an explicit error saying that the "line was too long".
> > >
> > > EXAMPLE:
> > > In my case I got in perl '@Rfiles' was:
> > > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> > R/Filter.R
> > > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> > TFilter.R R/Copy of
> > > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> > R/DfFilter.R
> > > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> > >
> > > but in [R] 'Rfiles' became:
> > >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> > >  [3] "R/GenePixData.R"               "R/Layout.R"
> > >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> > >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> > >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > > [11] "R/zzz.R"                       "R/Replicates.R"
> > > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > > [17] "R/RGData.R"                    "R/RawData.R"
> > > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > > [33] "R/AFilter.R"                   "R/MFilter.R"
> > > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> > >
> > > Look at the 56 element. Trying to add or remove files, I found
> > that this was
> > > always happening at the same column in the Rfiles row and
> > inferred that this is
> > > due to the maximum line length in [R] source files. Correct?
> >
> > There is no such line limit.  If I take your file list, convert it via the
> > orginal join and read it into R, I don't get a problem, under Linux or
> > Windows XP. I think you are hitting the limitations of your `operating
> > system', not R.  But without a reproducible example it is hard to tell.
> >
> > Package survival has 92 files with file names at least as long as yours,
> > and that works perfectly happily on Windows XP.
> >
> > Can you make available a sample package which exhibits the problem?
> >
> > Nevertheless, joining with "\n" should be a palliative measure.
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> >
> >
> >
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 07:02:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 07:02:33 +0100 (BST)
Subject: order() with na.last=NA ignores decreasing=TRUE (PR#1906)
In-Reply-To: <200208132043.WAA13848@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208140701460.11641-100000@gannet.stats>

Fixed now.  If you need the fix, the do.call line should be

        ans <- do.call("order", c(z, decreasing=decreasing))

Thanks!

On Tue, 13 Aug 2002 oehl_list@gmx.de wrote:

>
> Please find replication code below
> Best
>
> Jens Oehlschlgel
>
>
> > x <- c(NA, 1, 2, 3)
> > order(x, na.last=TRUE, decreasing=FALSE)
> [1] 2 3 4 1
> > order(x, na.last=TRUE, decreasing=TRUE)
> [1] 4 3 2 1
> > order(x, na.last=FALSE, decreasing=FALSE)
> [1] 1 2 3 4
> > order(x, na.last=FALSE, decreasing=TRUE)
> [1] 1 4 3 2
> > order(x, na.last=NA, decreasing=FALSE)
> [1] 2 3 4
> > # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> > order(x, na.last=NA, decreasing=TRUE)
> [1] 2 3 4
> >
>
> x <- c(NA, 1, 2, 3)
> order(x, na.last=TRUE, decreasing=FALSE)
> order(x, na.last=TRUE, decreasing=TRUE)
> order(x, na.last=FALSE, decreasing=FALSE)
> order(x, na.last=FALSE, decreasing=TRUE)
> order(x, na.last=NA, decreasing=FALSE)
> # THIS ONE IS FALSE: order() with na.last=NA ignores decreasing=TRUE
> order(x, na.last=NA, decreasing=TRUE)
>
>
>
> > version
>          _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
>
>
> --
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 10:26:31 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 14 Aug 2002 10:26:31 +0100 (BST)
Subject: FW: R CMD check: Too long [R] code line generated (PR#1900)
In-Reply-To: <KKEGJOGBELBHDIKPINBMOEOECOAA.hb@maths.lth.se>
Message-ID: <Pine.GSO.4.44.0208141024430.16141-100000@auk.stats>

On Wed, 14 Aug 2002, Henrik Bengtsson wrote:

> Also, the problem with TooLongLines.R still remains since it crashes [R]
> also when sourced from within Rgui.exe.

I've tried to re-file that as new bug.
It's due to keeping the source which has a limit of 1024, so use
options(keep.source=FALSE) to work around this.

I've removed the limit for R-devel.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Wed Aug 14 17:53:54 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed, 14 Aug 2002 18:53:54 +0200 (MEST)
Subject: strwidth
Message-ID: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>


Dear plotting experts, 

I need to determine the width of a string before plotting it to the
current device because I want to adjust `mai' to have
the necessary space available. It seems to me that this is an "hen and
egg" problem: 

R> a <- "test"
R> strwidth(a)  
Error in strwidth(a) : plot.new has not been called yet

# ok, I need an open device

R> plot(1:2, type="n")
R> strwidth(a)
[1] 0.04760034

fine. But I can't continue to plot to the current device because I need to
reset `mai', so I need a second one ...

This is not really a problem if plotting to the screen but plotting to a
file leads to at least one page of non sense. Or am I just disoriented?

Torsten

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 17:59:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 17:59:03 +0100 (BST)
Subject: strwidth
In-Reply-To: <Pine.LNX.4.21.0208141845490.9596-100000@artemis>
Message-ID: <Pine.LNX.4.31.0208141756030.18789-100000@gannet.stats>

On Wed, 14 Aug 2002, Torsten Hothorn wrote:

> I need to determine the width of a string before plotting it to the
> current device because I want to adjust `mai' to have
> the necessary space available. It seems to me that this is an "hen and
> egg" problem:

`chicken and egg' is idiomatic.

> R> a <- "test"
> R> strwidth(a)
> Error in strwidth(a) : plot.new has not been called yet
>
> # ok, I need an open device
>
> R> plot(1:2, type="n")
> R> strwidth(a)
> [1] 0.04760034
>
> fine. But I can't continue to plot to the current device because I need to
> reset `mai', so I need a second one ...

Ah, but you don't need a coordinate system:

> a <- "test"
> plot.new()
> par(mai=rep(30*strwidth(a), 4))
> plot(1:2)

works.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stefan.boehringer@ruhr-uni-bochum.de  Thu Aug 15 12:26:06 2002
From: stefan.boehringer@ruhr-uni-bochum.de (Stefan =?ISO-8859-1?Q?B=F6hringer?=)
Date: 15 Aug 2002 13:26:06 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <1029410767.1964.15.camel@hgX>

Thank you for the hint.
I rebuild gcc and R from scratch and now it works. Here's how on RH7.3,
which might help others:

configured gcc with: --enable-languages=c,c++,objc,f77
--program-suffix=3 --prefix=/usr

in config.site for R the following variables are then set:
CC=gcc3
F77=f773
CXX=g++3
LDFLAGS=-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.1
-L/usr/lib/gcc-lib/i686-pc-linux-gnu

Thank you very much again.

Best wishes,

	Stefan

On Tue, 2002-08-13 at 14:43, ripley@stats.ox.ac.uk wrote:
> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.
> 
> On Tue, 13 Aug 2002 stefan.boehringer+science@uni-bochum.de wrote:
> 
> > Full_Name: Stefan Bhringer
> > Version: 1.5.1
> > OS: Linux RH 7.3
> > Submission from: (NULL) (132.252.142.137)
> >
> >
> > using the svm function from the e1071 library. R crashes with the very example
> > from the help page or any other input.
> > In gdb the crash appears to occur in Cache::lru_delete at smv.cpp:93
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
-- 
Stefan Bhringer                                Tel. +49 201 723 4681
University Clinics Essen                        Fax. +49 201 723 5900
Hufelandstr. 55                        stefan.boehringer@uni-essen.de
45122 Essen, Germany  http://homepage.uni-bochum.de/stefan.boehringer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 14 09:30:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 14 Aug 2002 10:30:49 +0200 (MET DST)
Subject: source() crashes on long lines (PR#1900)
Message-ID: <200208140830.KAA16483@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: 8BIT
Content-ID: <Pine.GSO.4.44.0208140920312.15226@auk.stats>

This is a separate bug, reproducible on Solaris, so I am re-filing it as a
new report.

There may well need to be a linewidth limit, but this should be caught.

R --vanilla < TooLongLines.R does work.

R-bugs mangles attachments, but my mailer does not like very long lines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Wed, 14 Aug 2002 00:49:43 +0200
From: Henrik Bengtsson <hb@maths.lth.se>
To: ripley@stats.ox.ac.uk
Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
Subject: RE: R CMD check: Too long [R] code line generated (PR#1900)

I did some error tracking myself. I verified that the Perl generated
temporary [R] file was correct. I narrowed down the problem to be with the
redirecting of the standard input, i.e. <, into [R] and I also found that I
could not get the same problem if I source()'d the same file. Then I thought
it might be my shell (Cygwin/bash), but not! Doing

 % cat < R_CMD_check.out

is just fine, but when doing

  R --vanilla --quiet < R_CMD_check.out

I run into problems. It looks like every line that is long enough will get
some garbage bytes inserted at column 1023. I have attached the
R_CMD_check.out file with comments for you. As you see, it is not what R CMD
check have generated, but as the problem is not with R CMD check itself
anymore I removed the non-interesting parts.

Maybe related to this is another problem that makes source() crash if I have
a too long string (>2128 characters) inside a function definition. The
attached R script TooLongLines.R is supposed to illustrate this. It also
contains Dr. Mingw's report.

FYI: I'll be out of the office from Wednesday noon-Sunday.

Henrik Bengtsson

> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Tuesday, August 13, 2002 11:43 AM
> To: hb@maths.lth.se
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> Subject: Re: R CMD check: Too long [R] code line generated (PR#1900)
>
>
> On Tue, 13 Aug 2002 hb@maths.lth.se wrote:
>
> > Full_Name: Henrik Bengtsson
> > Version: 1.5.1
> > OS: WinMe
> > Submission from: (NULL) (217.210.0.243)
> >
> >
> > In the Perl script $R_HOME/bin/check there is a bug under the
> section "Check R
> > code for syntax errors" where the 'Rfiles <- c(...)' is build
> up. If there are
> > too many files in @Rfiles the source code line generated will
> be too long and
> > weird things will happen, e.g. strange bytes/characters will be
> inserted.
>
> > SUGGESTION/SOLUTION:
> > Add a new line character after each "join";
> >
> >  $Rcmd .= join("\",\n \"", @Rfiles) . "\")\n";
> >
> > instead of
> >
> >  $Rcmd .= join("\", \"", @Rfiles) . "\")\n";
> >
> >
> > SUGGESTION II:
> > I ran into similar problems in other situations where I
> autogenerated too long
> > source lines. The errors where hard to reproduce and took time
> to find. It would
> > be nice if the [R] parser, or some previous engine that reads
> the source file,
> > could given an explicit error saying that the "line was too long".
> >
> > EXAMPLE:
> > In my case I got in perl '@Rfiles' was:
> > "R/LogBook.R R/LogEntry.R R/GenePixData.R R/Layout.R R/ImaGeneData.R
> > R/MicroarrayData.PLOT.R R/QualityData.R R/MicroarrayData.R R/MAData.R
> > R/MAData.NORM.R R/zzz.R R/Replicates.R R/SMA.R R/FieldFilter.R
> R/Filter.R
> > R/QuantArrayData.R R/RGData.R R/RawData.R R/000.R R/MicroarrayData.IO.R
> > R/LayoutGroups.R R/BFilter.R R/com.braju.sma.R R/Copy of
> TFilter.R R/Copy of
> > SSMatrix.R R/private.utils.R R/WangetalData.R R/KHessFilter.R
> R/DfFilter.R
> > R/SpotData.R R/ScanAlyzeData.R R/BMAData.R R/AFilter.R R/MFilter.R
> > R/Layout.obsolete.R R/AndFilter.R R/OrFilter.R R/SEFilter.R R/TFilter.R
> > R/AcceptFilter.R R/SpotPosition.R R/SerialFilter.R R/GSRArray.R
> > R/MultiwayArray.R R/KHessData.R R/GeneAcceptFilter.R R/GeneData.R
> > R/GeneRejectFilter.R R/TMAData.R R/NotFilter.R R/ParallelFilter.R
> > R/RejectFilter.R R/ReplicateOutlierFilter.R R/WorkData.R R/Matrix.R
> > R/MicroarrayData.LOG.R R/MicroarrayData.NORM.R R/SSMatrix.R"
> >
> > but in [R] 'Rfiles' became:
> >  [1] "R/LogBook.R"                   "R/LogEntry.R"
> >  [3] "R/GenePixData.R"               "R/Layout.R"
> >  [5] "R/ImaGeneData.R"               "R/MicroarrayData.PLOT.R"
> >  [7] "R/QualityData.R"               "R/MicroarrayData.R"
> >  [9] "R/MAData.R"                    "R/MAData.NORM.R"
> > [11] "R/zzz.R"                       "R/Replicates.R"
> > [13] "R/SMA.R"                       "R/FieldFilter.R"
> > [15] "R/Filter.R"                    "R/QuantArrayData.R"
> > [17] "R/RGData.R"                    "R/RawData.R"
> > [19] "R/000.R"                       "R/MicroarrayData.IO.R"
> > [21] "R/LayoutGroups.R"              "R/BFilter.R"
> > [23] "R/com.braju.sma.R"             "R/Copy of TFilter.R"
> > [25] "R/Copy of SSMatrix.R"          "R/private.utils.R"
> > [27] "R/WangetalData.R"              "R/KHessFilter.R"
> > [29] "R/DfFilter.R"                  "R/SpotData.R"
> > [31] "R/ScanAlyzeData.R"             "R/BMAData.R"
> > [33] "R/AFilter.R"                   "R/MFilter.R"
> > [35] "R/Layout.obsolete.R"           "R/AndFilter.R"
> > [37] "R/OrFilter.R"                  "R/SEFilter.R"
> > [39] "R/TFilter.R"                   "R/AcceptFilter.R"
> > [41] "R/SpotPosition.R"              "R/SerialFilter.R"
> > [43] "R/GSRArray.R"                  "R/MultiwayArray.R"
> > [45] "R/KHessData.R"                 "R/GeneAcceptFilter.R"
> > [47] "R/GeneData.R"                  "R/GeneRejectFilter.R"
> > [49] "R/TMAData.R"                   "R/NotFilter.R"
> > [51] "R/ParallelFilter.R"            "R/RejectFilter.R"
> > [53] "R/ReplicateOutlierFilter.R"    "R/WorkData.R"
> > [55] "R/Matrix.R"                    "R/Micr\b_IoarrayData.LOG.R"
> > [57] "R/MicroarrayData.NORM.R"       "R/SSMatrix.R"
> >
> > Look at the 56 element. Trying to add or remove files, I found
> that this was
> > always happening at the same column in the Rfiles row and
> inferred that this is
> > due to the maximum line length in [R] source files. Correct?
>
> There is no such line limit.  If I take your file list, convert it via the
> orginal join and read it into R, I don't get a problem, under Linux or
> Windows XP. I think you are hitting the limitations of your `operating
> system', not R.  But without a reproducible example it is hard to tell.
>
> Package survival has 92 files with file names at least as long as yours,
> and that works perfectly happily on Windows XP.
>
> Can you make available a sample package which exhibits the problem?
>
> Nevertheless, joining with "\n" should be a palliative measure.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>
>

------=_NextPart_000_0006_01C2432C.7ACD6BA0
Content-Type: APPLICATION/OCTET-STREAM; NAME="TooLongLines.R"
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.GSO.4.44.0208140920320.15226@auk.stats>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="TooLongLines.R"

# Doing source("TooLongLines.R") on this file and on [R] v1.5.1 on WinMe =
will
# make [R] crash. The "reason" is that there is a too long source line =
*inside*
# a function defintion. However, declaring a character variable with a =
very
# very long string works. See more comments below.


myFcn <- function() {
# I have inserted roman letter (L =3D 50, C =3D 100, D =3D 500, M =3D =
1000) in the string below to easier get the position of each character.
# Comments or something else, e.g.
x <- 2
# does not matter, the problem is the next very long line (>=3D2128 =
characters) inside a function() defintion:
"234567890123456789012345678901234567890123456789L12345678901234567890123=
45678901234567890123456789C1234567890123456789012345678901234567890123456=
789L1234567890123456789012345678901234567890123456789C1234567890123456789=
012345678901234567890123456789L123456789012345678901234567890123456789012=
3456789C1234567890123456789012345678901234567890123456789L123456789012345=
6789012345678901234567890123456789C12345678901234567890123456789012345678=
90123456789L1234567890123456789012345678901234567890123456789D12345678901=
23456789012345678901234567890123456789L1234567890123456789012345678901234=
567890123456789C1234567890123456789012345678901234567890123456789L1234567=
890123456789012345678901234567890123456789C123456789012345678901234567890=
1234567890123456789L1234567890123456789012345678901234567890123456789C123=
4567890123456789012345678901234567890123456789L12345678901234567890123456=
78901234567890123456789C1234567890123456789012345678901234567890123456789=
L1234567890123456789012345678901234567890123456789M1234567890123456789012=
345678901234567890123456789L123456789012345678901234567890123456789012345=
6789C1234567890123456789012345678901234567890123456789L123456789012345678=
9012345678901234567890123456789C12345678901234567890123456789012345678901=
23456789L1234567890123456789012345678901234567890123456789C12345678901234=
56789012345678901234567890123456789L1234567890123456789012345678901234567=
890123456789C1234567890123456789012345678901234567890123456789L1234567890=
123456789012345678901234567890123456789D123456789012345678901234567890123=
4567890123456789L1234567890123456789012345678901234567890123456789C123456=
7890123456789012345678901234567890123456789L12345678901234567890123456789=
01234567890123456789C1234567890123456789012345678901234567890123456789L12=
34567890123456789012345678901234567890123456789C1234567890123456789012345=
678901234567890123456789L123456789012345678901234567890123456789012345678=
9C1234567890123456789012345678901234567890123456789L123456789012345678901=
2345678901234567890123456789M12345678901234567890123456789012345678901234=
56789L1234567890123456789012345678901234567890123456789C12345678901234567=
8901234567"
# Comments or something else, e.g.
x <- 2
# does not matter. Any line shorter than 2128 works fine, i.e. removing
# the last '7' from the string above and source("TooLongLines.R") will
# be just fine.
} # myFcn()


# 'Rterm --vanilla' and 'RGUI.exe' ([R] v1.5.1 (2002-06-17) on WinMe) =
both
# give 'Signal 127' and Dr. Mingw reports:
#
#  RTERM.EXE caused an Access Violation at location 00486a03 in module =
R.DLL Writing to location 00486a95.
# =20
#  Registers:
#  eax=3D00486a95 ebx=3D0091e990 ecx=3D0091ecb0 edx=3D00484028 =
esi=3D00000000 edi=3D0000007b
#  eip=3D00486a03 esp=3D0091e8f4 ebp=3D0091e900 iopl=3D0         nv up =
ei pl nz na po cy
#  cs=3D018f  ss=3D0197  ds=3D0197  es=3D0197  fs=3D271f  gs=3D0000      =
       efl=3D00010207
# =20
#  Call stack:
#  00486A03  R.DLL:00486A03  R_Parse
#  004873D1  R.DLL:004873D1  Rf_yyerror
#  00487933  R.DLL:00487933  Rf_isValidName
#  00487ECC  R.DLL:00487ECC  Rf_yylex
#  00484D71  R.DLL:00484D71  Rf_yyparse
#  004866DF  R.DLL:004866DF  Rf_yyparse
#  004869E1  R.DLL:004869E1  R_Parse
#  00486B66  R.DLL:00486B66  R_ParseConn
#  004F6AC3  R.DLL:004F6AC3  do_parse
#  004AA5A7  R.DLL:004AA5A7  do_internal
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  004812D9  R.DLL:004812D9  Rf_evalList
#  0047F5E2  R.DLL:0047F5E2  Rf_eval
#  00481065  R.DLL:00481065  do_set
#  0047F494  R.DLL:0047F494  Rf_eval
#  00480808  R.DLL:00480808  do_begin
#  0047F494  R.DLL:0047F494  Rf_eval
#  0047FAA6  R.DLL:0047FAA6  Rf_applyClosure
#  0047F6DD  R.DLL:0047F6DD  Rf_eval
#  0049D325  R.DLL:0049D325  R_PromptString
#  0049DC74  R.DLL:0049DC74  run_Rmainloop
#  0049DC8C  R.DLL:0049DC8C  Rf_mainloop
#  0040153D  RTERM.EXE:0040153D
#  0040139C  RTERM.EXE:0040139C
#  0040166D  RTERM.EXE:0040166D
#  004010F4  RTERM.EXE:004010F4
#  004011EF  RTERM.EXE:004011EF
#  BFF7B9E4  KERNEL32.DLL:BFF7B9E4  IsDBCSLeadByte
#  BFF7B896  KERNEL32.DLL:BFF7B896  IsDBCSLeadByte
#  BFF7A24F  KERNEL32.DLL:BFF7A24F  MakeCriticalSectionGlobal







------=_NextPart_000_0006_01C2432C.7ACD6BA0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Aug 15 21:28:01 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 15 Aug 2002 22:28:01 +0200 (MET DST)
Subject: order(1, na.last=NA) fails (PR#1913)
Message-ID: <200208152028.WAA00080@pubhealth.ku.dk>


R> order(1, na.last=NA)
Error in apply(sapply(z, is.na), 1, any) : 
	dim(X) must have a positive length

This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
It comes from the line inside order():

   ok <- !apply(sapply(z, is.na), 1, any)

where z=list(1) in my example.  sapply() returns a single-element vector, not a
matrix, making apply() unhappy.  This might work better:

   nas <- sapply(z, is.na)
   ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)

-----------------------------------------------------------------------------

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Fri Aug 16 03:49:34 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Fri, 16 Aug 2002 04:49:34 +0200 (MET DST)
Subject: print("") crashes Rgui (PR#1914)
Message-ID: <200208160249.EAA00980@pubhealth.ku.dk>

Full_Name: Ronnen Levinson
Version: 1.5.1
OS: Win98SE
Submission from: (NULL) (128.3.13.116)


Hi.

It appears that any attempt to display the Greek letter mu () crashes Rgui.
The letter  was part of a string read from a text file (entered as ALT-0181).
My problem is that R crashes when I try to print the line from the file that
contains
this character.

Try, for example, print("").

Yours truly,

Ronnen.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:25:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:25:39 +0100 (BST)
Subject: =?X-UNKNOWN?Q?Re=3A_print=28=22=B5=22=29_crashes_Rgui_=28PR#1914?=
 =?X-UNKNOWN?Q?=29?=
In-Reply-To: <200208160249.EAA00980@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160717510.25058-100000@gannet.stats>

See the rw-FAQ, question 2.14.  Your example is fine on my XP machine.
This is a sign of a corrupt version of Windows, not an R problem.

If you must persist in filing reports on known problems, at least supply
new evidence.  The rw-FAQ shows you have to produce a useful post-mortem
dump.

On Fri, 16 Aug 2002 RML27@cornell.edu wrote:

> Full_Name: Ronnen Levinson
> Version: 1.5.1
> OS: Win98SE
> Submission from: (NULL) (128.3.13.116)
>
>
> Hi.
>
> It appears that any attempt to display the Greek letter mu () crashes Rgui.
> The letter  was part of a string read from a text file (entered as ALT-0181).
> My problem is that R crashes when I try to print the line from the file that
> contains
> this character.
>
> Try, for example, print("").

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 16 07:34:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 16 Aug 2002 07:34:47 +0100 (BST)
Subject: order(1, na.last=NA) fails (PR#1913)
In-Reply-To: <200208152028.WAA00080@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208160733080.25058-100000@gannet.stats>

True, but you should really be using sort.list on a single vector.
Fixed now.

On Thu, 15 Aug 2002 brahm@alum.mit.edu wrote:

>
> R> order(1, na.last=NA)
> Error in apply(sapply(z, is.na), 1, any) :
> 	dim(X) must have a positive length
>
> This bug appears unrelated to PR#1906, and so the fix of 8/15 doesn't help.
> It comes from the line inside order():
>
>    ok <- !apply(sapply(z, is.na), 1, any)
>
> where z=list(1) in my example.  sapply() returns a single-element vector, not a
> matrix, making apply() unhappy.  This might work better:
>
>    nas <- sapply(z, is.na)
>    ok <- if (is.matrix(nas)) !apply(nas, 1, any) else !any(nas)
>
> -----------------------------------------------------------------------------
>
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status =
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 06
>  day = 17
>  language = R
>
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
>
> --
>                               -- David Brahm (brahm@alum.mit.edu)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Aug 17 17:49:26 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 17 Aug 2002 18:49:26 +0200 (MET DST)
Subject: interaction.plot() legend too narrow when mfcol > 2 (PR#1899)
Message-ID: <200208171649.SAA09874@pubhealth.ku.dk>

maechler@stat.math.ethz.ch wrote:
> 
> Here is an example:
> 
>  The legends (mainly the factor level names) are cut off on the
>  right.  Somehow the internal calculation which computes
>  horizontal space for the legend is not flexible enough.
> 
> ## Call a new graphics window {with default par()s !}:
> get(getOption("device"))()
> par(mfrow = c(2,2))
> 
> ## part of  example(interaction.plot)  _improved_ using with() :
> data(OrchardSprays)
> with(OrchardSprays, {
>     interaction.plot(treatment, rowpos, decrease)
>     interaction.plot(rowpos, treatment, decrease)
> })
> 
> data(esoph)
> with(esoph, {
>     interaction.plot(agegp, alcgp, ncases/ncontrols)
>     interaction.plot(agegp, tobgp, ncases/ncontrols, trace.label="tobacco",
>                      fixed=TRUE)
> })
> 
> -------------------------------
> 
> Something that should be easy to fix, but needs some care (and
> time).
> Volunteers?

Martin, 

not right now (may be easy, but obviously not very easy ;-)). 
I'd like to comment that I filed this already as bug report #1305,
including a suggestion for a fix for a second bug related to axis
annotation.

Best,
Uwe

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From uluru@email.unc.edu  Sun Aug 18 22:28:10 2002
From: uluru@email.unc.edu (uluru@email.unc.edu)
Date: Sun, 18 Aug 2002 17:28:10 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
Message-ID: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>

I have been taking a break for the last month or so, and am only just
now catching up on my email.  Otherwise, I would have joined this
discussion earlier.  And... I apologize for the length of this, but I
don't think it is overly long.

>From the amount of activity in the LispStat news group (none), it seems
that LispStat is dead. We all know that Luke is working on R and not on
LispStat, and that Jan has switched UCLA over from LispStat to R. And we
have not heard from users of LispStat for some time.  So, it seems no
one is using LispStat.

For me, at least, this is not the case. As the developer of ViSta, I
have and still am using LispStat a great deal. In fact, I cannot
conceive of doing what I do with any other system.  

Of course, since I use it so much, I am very aware of LispStat's
strengths and weaknesses, and want to add my views to the discussion.
However, I spend all my time using only LispStat, so I can't make any
comparisons to R or to any other systems.

To me, the strengths of LispStat are:
1) The dynamic, highly interactive graphics
2) The object system
3) Lisp language and byte compiler

These strengths make LispStat an ideal system for implementing
statistical systems. It is less suited for doing statistical analysis.
As a result, the most significant uses of LispStat have been statistical
systems such as Arc and ViSta.

In the work I've done with LispStat,  ViSta's spreadplot architecture is
the best example of LispStat being used to implement a statistical
(sub)system (described in a forthcoming JCGS paper by myself, Pedro
Valero, Richard Faldowski and Carla Bann). 

The weaknesses of LispStat are:
1) No high-level analysis modules
2) No standards for data sets, models, etc.
3) No user-oriented data manipulation language
4) Totally inadequate documentation
5) Poor or non-existant printing 
6) No static graphic manipulation facilities
7) The underlying operating system interfaces are old.

ViSta attempts to take care of these weaknesses, with varying degrees of
success. Specifically:
1) ViSta has high-level analysis plugins. The method for writing these
plugins is documented. I believe this very well solves the first weakness. 
2) ViSta's statistical object architecture -- a hierarchy of objects
that include datasets, datasheets, data editors, transformations,
analysis methods, models and plugins --- solves the lack of standards
for such things. The implementation is slow for data objects and needs
to be re-architected. The implementation for the others is more than
adequate.
3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
awkward lisp equivalent:
(setf a (^ (* 2 (+ b c)) 2)) 
(I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
combinations, are working on the documentation problem.
5) Printing, while better than LispStat, is still not adequate.
6) Static graphics manipulation, as in SAS (and, apparently R), is
totally lacking.
7) Nothing has been done about this.

(Note that the newest version of ViSta use a modified version of
LispStat that only works under Windows, so that Mac/Unix users don't
have all the new features. This problem can be fixed by someone familiar
with LispStat and Unix.)

I am very interested in an effort to combine the strengths of LispStat
and R, but have no clue how it would be done.  From my viewpoint,
though, it would need to add the three strengths of LispStat (Lisp,
Objects and Dynamic Graphics) to the existing R environment, and it
would need to work in all three supported environments -- Windows, Mac,
and Linux/Unix

Anyone know how to do that?

Forrest
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 05:09:22 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 18 Aug 2002 21:09:22 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <3D603F4D.9090707@stat.ucla.edu>
Message-ID: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>


On Sunday, August 18, 2002, at 05:43 PM, Forrest wrote:

> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
>

Since R has its own object system, and its own array language (with
many of the mapping functions etc from Lisp), I think we would go a long
way towards this goal by just adding dynamic graphics to R (which
people are working on, it seems). In fact, the tcltk interface (which  
now
exists natively on MSW, X11, and Aqua) already has some mouse
interaction -- see demo(tkcanvas), and quite a bit can be done by
using nonstandard packages such as RGtk (on MSW and X11).

I really hated to give up Lisp (and many lines of existing code), and I  
agree
that extensions such as Vista and Arc are major arguments in favor of
XLS, but it seems that XLS is best as an environment to develop
GUI statistics tools (hiding the lisp) and not as an environment to  
actually
do statistics. Vista and Arc are great for teaching, but raw XLS is not.
In that sense XLS is more like a specialized version of  one of the  
scripting
languages such as Ruby or Python or VB or Tcl/Tk.

So basically, it would be great if the capability to write GUI  
statistics
packages on top of raw R would be part of R -- this includes dynamic
graphics, but it also includes a library of widgets. My feeling is that
the current possibilities (tcltk and RGtk) are too far removed from the
core of R.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 19 14:23:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 19 Aug 2002 14:23:35 +0100 (BST)
Subject: svm seg faults (PR#1901)
In-Reply-To: <x2adnjf0f9.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.31.0208191423130.13749-100000@gannet.stats>

On 19 Aug 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > Which compiler is this?
> >
> > I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> > gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> > versions of gcc. I think this is particularly critical when C/C++ mixtures
> > are used (as in svm).
> >
> > PR#1178 is another non-reproducible segfault in svm on Linux.
>
> It *is* reproducible on another stock RH7.3, though. I might try
> digging a little deeper when I recover from the NY/Boston meetings.

I still think it is the compiler.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 19 14:22:34 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Aug 2002 15:22:34 +0200
Subject: svm seg faults (PR#1901)
In-Reply-To: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
References: <Pine.LNX.4.31.0208131336280.461-100000@gannet.stats>
Message-ID: <x2adnjf0f9.fsf@biostat.ku.dk>

ripley@stats.ox.ac.uk writes:

> Which compiler is this?
> 
> I have no problems with svm() on RH7.2 compiling with either gcc 3.1 or
> gcc 2.95.3: Red Hat make a habit of supplying unreleased (and buggy)
> versions of gcc. I think this is particularly critical when C/C++ mixtures
> are used (as in svm).
> 
> PR#1178 is another non-reproducible segfault in svm on Linux.

It *is* reproducible on another stock RH7.3, though. I might try
digging a little deeper when I recover from the NY/Boston meetings. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:02:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:02:01 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15712.43650.992922.150193@gargle.gargle.HOWL>
Message-ID: <FF330AF9-B38C-11D6-A6D6-000393860F3C@stat.ucla.edu>

I have compiled Darwin R using the AquaTk frameworks. This works
(except for a small glitch). I am sure Stefano could hook these into
Carbon R, but Jose/Stefano probably should connect them with
the Cocoa interfaces. You can get the frameworks (8.4a5, I
think) from ftp://ftp.ucsd.edu/pub/alpha/tcl/alphatk/ -- they are
in the alphatk.dmg. Of course the X11 version of tcltk does NOT
work with Carbon R.

On Monday, August 19, 2002, at 01:21 AM, Martin Maechler wrote:

> Dear Jan
>
>>>>>> "Jan" == Jan de Leeuw <deleeuw@stat.ucla.edu>
>>>>>>     on Sun, 18 Aug 2002 21:09:22 -0700 writes:
>
>       ....
>
>     Jan>  ....... In fact, the tcltk interface
>     Jan> (which now exists natively on MSW, X11, and Aqua)
>
> Can you explain ? {maybe on R-devel}
> I'm not a Mac expert at all, not even a regular user.  But I've
> talked with Stefano Iacus two days ago and he said that R's
> tcltk package was not working with "Carbon R".
>
> Do you think this would be fixable easily enough?
> We {most of R core} would be very glad to be able to say
> "tcltk runs on all platforms that R runs" and hance can be
> easily made available on all platforms.
>
>
>     Jan> already has some mouse interaction -- see
>     Jan> demo(tkcanvas), and quite a bit can be done by using
>     Jan> nonstandard packages such as RGtk (on MSW and X11).
>
>
>     Jan> I really hated to give up Lisp (and many lines of
>     Jan> existing code), and I agree that extensions such as
>     Jan> Vista and Arc are major arguments in favor of XLS, but
>     Jan> it seems that XLS is best as an environment to develop
>     Jan> GUI statistics tools (hiding the lisp) and not as an
>     Jan> environment to actually do statistics. Vista and Arc
>     Jan> are great for teaching, but raw XLS is not.  In that
>     Jan> sense XLS is more like a specialized version of one of
>     Jan> the scripting languages such as Ruby or Python or VB or
>     Jan> Tcl/Tk.
>
>     Jan> So basically, it would be great if the capability to
>     Jan> write GUI statistics packages on top of raw R would be
>     Jan> part of R -- this includes dynamic graphics, but it
>     Jan> also includes a library of widgets. My feeling is that
>     Jan> the current possibilities (tcltk and RGtk) are too far
>     Jan> removed from the core of R.
>
> You are right.  Fortunately things are changing.
> Also, as far as I understand Duncan Temple Lang, Rggobi
> (partly together with RGtk) makes up for a very nice
> programmably interface for dynamic graphics.
>
> Regards
>
> --  
> Martin Maechler  
> <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 19 17:13:51 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 19 Aug 2002 09:13:51 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <6BCD49A9-B342-11D6-942F-000393937AC2@hsph.harvard.edu>
Message-ID: <A664E33E-B38E-11D6-A6D6-000393860F3C@stat.ucla.edu>

Byron

I meant there is no native (Aqua) version of GTK yet (there is  
wxWindows and Qt and Tk, so
possibly GTK will follow). The X11 version of RGtk works for me too. I  
agree with your
diagnosis of the GUI problem.

Best -- Jan

On Monday, August 19, 2002, at 12:08 AM, Byron Ellis wrote:

>
> On Monday, August 19, 2002, at 12:09 AM, Jan de Leeuw wrote:
>>
>
> I accidentally snipped the section, but RGtk also works on Mac OS X  
> with minor changes (which I *will* write down some day Duncan. Honest  
> I will :-) They're mostly changes to linkage and one cpp assumption  
> that doesn't hold under gcc--I don't have/want MPW). This includes the  
> GtkHTML widget (if you install GNOME from Fink).
>
>> I really hated to give up Lisp (and many lines of existing code), and  
>> I  agree
>> that extensions such as Vista and Arc are major arguments in favor of
>> XLS, but it seems that XLS is best as an environment to develop
>> GUI statistics tools (hiding the lisp) and not as an environment to   
>> actually
>> do statistics. Vista and Arc are great for teaching, but raw XLS is  
>> not.
>> In that sense XLS is more like a specialized version of  one of the   
>> scripting
>> languages such as Ruby or Python or VB or Tcl/Tk.
>>
>> So basically, it would be great if the capability to write GUI   
>> statistics
>> packages on top of raw R would be part of R -- this includes dynamic
>> graphics, but it also includes a library of widgets. My feeling is  
>> that
>> the current possibilities (tcltk and RGtk) are too far removed from  
>> the
>> core of R.
>
> My personal feeling is that there are presently two (related)  
> problems: The GUI interfaces are too low level and (because of this)  
> building GUIs is neither easy enough for most nor portable enough in  
> the sense that you develop for a particular underlying GUI rather than  
> developing a GUI which is implemented using an underlying GUI---though  
> it occurs to me that this is maybe the same as being too far removed  
> from the core in that a specification of a GUI should perhaps exist  
> (though a particular implementation probably shouldn't---in the same  
> way, I suppose, that Java's AWT was a specification rather than a  
> particular implementation--that being up to the VM vendors of a  
> particular platform)
>
>>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>>    
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-
>> .-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
>> FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-
>> request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._
>> ._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pc_olsen@yahoo.com  Mon Aug 19 17:41:52 2002
From: pc_olsen@yahoo.com (Peter Olsen)
Date: Mon, 19 Aug 2002 12:41:52 -0400
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
Message-ID: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>

Has anyone else looked at the Python module that allows Python to call
R and vice versa?  

I think that might have promise.  Python offers an excellent
object-oriented development environment in which to embed the use of
R's statistical and graphics routines.

Peter Olsen, P.E., Ae.E.

"Engineering is the art of using a professional knowledge of
mathematics and the physical sciences to improve the quality of life."

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 17:55:35 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 09:55:35 -0700
Subject: [Fwd: LispStat, R and ViSta  [was: Re: Status?]]
In-Reply-To: <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
References: <3D603F4D.9090707@stat.ucla.edu>
 <70CFE2D3-B329-11D6-B8B7-000393860F3C@stat.ucla.edu>
 <15713.8144.647116.666397@pcp48744pcs.howard01.md.comcast.net>
Message-ID: <87znvi3i0o.fsf@jeeves.blindglobe.net>

>>>>> "peter" == Peter Olsen <pc_olsen@yahoo.com> writes:

    peter> Has anyone else looked at the Python module that allows Python to call
    peter> R and vice versa?  

    peter> I think that might have promise.  Python offers an excellent
    peter> object-oriented development environment in which to embed the use of
    peter> R's statistical and graphics routines.

There are two such modules, RPy and RSPython.  

I would agree, Python is an excellent language; my favorite, by far,
after Lisp and R.  Platform independence and "plays well with other
langauges" are quite robust.  HOWEVER, I'm getting less and less
convinced that the OOP aspects that Python excels at are suitable for
interactive data analysis (maybe for scripted analysis, but not for a
line-at-a-time approach, which R can encourage).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Aug 19 20:02:22 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 19 Aug 2002 15:02:22 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>

Dear R-devel,

Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
two linux boxes.  It only took me a couple of hours of screwing around to
get it working (sooner if I had RTFM).  

Our setup is: 2 dual PIII-866 Xeons, one with 2GB RDRAM, the other with
1.28GB RDRAM.  The first machine is acting as the NIS/NFS server.  both /usr
and /home are exported to the second machine, so both are seeing the same
copy of R.

I managed to get the following, using the same example that Prof. Tierney
used:

> system.time(nuke.boot <-
+             boot(nuke.data, nuke.fun, R=999, m=1,
+                  fit.pred=new.fit, x.pred=new.data))
[1] 29.38  0.52 30.68  0.00  0.00
> system.time(cl.nuke.boot <-
+             clusterCall(cl,boot,nuke.data, nuke.fun, R=500, m=1,
+                         fit.pred=new.fit, x.pred=new.data))
[1]  0.03  0.00 15.44  0.00  0.00

So I'm getting almost twice the performance, which is great.

Now the questions:

1.  Since each of these boxes has two CPUs, how do I spawn more than one
slave process on them?

2.  I was hoping I can see similar gain with randomForest, but that doesn't
seem to be the case:

> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
[1] 8.52 1.00 9.61 0.00 0.00
> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
+                                       iris[,5], ntree=5000))
[1]  1.38  0.14 15.50  0.00  0.00

What am I missing here?  Is there anything I can do to see similar gain as
the boot() example?

Thanks very much in advance for any pointers, and big thanks to the
developers of these great stuff!!

Regards,
Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Aug 19 20:27:26 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 19 Aug 2002 12:27:26 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <87bs7y1wf5.fsf@jeeves.blindglobe.net>

>>>>> "andy" == Andy Liaw <Liaw> writes:

    andy> Inspired by Michael Li's talk at JSM, I decided to try rpvm and snow on our
    andy> two linux boxes.  It only took me a couple of hours of screwing around to
    andy> get it working (sooner if I had RTFM).  

Which is why we wrote TFM.... :-).  It's the annoying part of
clustering (true for nearly every clustering system currently
available).

    andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
    andy> slave process on them?

Create a cluster of more virtual machines.  There isn't necessarily a
1-1 map from virtual machines to real machines (i.e. you can run 3
virtual machines on 1 host, but don't expect ANY gain...).

    andy> 2.  I was hoping I can see similar gain with randomForest, but that doesn't
    andy> seem to be the case:

    >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
    andy> [1] 8.52 1.00 9.61 0.00 0.00
    >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
    andy> +                                       iris[,5], ntree=5000))
    andy> [1]  1.38  0.14 15.50  0.00  0.00

    andy> What am I missing here?  Is there anything I can do to see similar gain as
    andy> the boot() example?

Monitor the processes with XPVM, as Michael showed.  If you were at
the session, you would've noted Antony's comment on visualization and
how nice it would've been if it was real time -- it was false, xpvm
does real-time monitoring.  

You also might write Michael for the augmentations he's done for
SNOW.  lina@u.washington.edu

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From RML27@cornell.edu  Mon Aug 19 23:21:31 2002
From: RML27@cornell.edu (RML27@cornell.edu)
Date: Tue, 20 Aug 2002 00:21:31 +0200 (MET DST)
Subject: PR#1914
Message-ID: <200208192221.AAA21461@pubhealth.ku.dk>

(1) With MSVCRT.DLL (version 4.20.6164) from
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe installed in
rw1051\bin directory, as per RWinFAQ 2.14:

RGUI caused an invalid page fault in
module MSVCRT.DLL at 017f:78014b90.
Registers:
EAX=0093007a CS=017f EIP=78014b90 EFLGS=00010246
EBX=017a2360 SS=0187 ESP=0091eee4 EBP=0091ef10
ECX=ffffffb5 DS=0187 ESI=00000000 FS=5bbf
EDX=81d7d520 ES=0187 EDI=00000022 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 47 c6 fe ff 8b
Stack dump:
004dd734 ffffffb5 0091ef0c 027f0e7f 00000001 00000000 00000022 00000000
004dddb7 004ddd7d 00000000 0091ef40 00482a81 017a2360 00000022 00f2da40

> version
         _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    5.1
year     2002
month    06
day      17
language R

(2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
dump. I also see no link in the R-Bugs page to the either of these FAQs,
nor a list of bugs that should not be reported. If you wish users to
follow a specific protocol for reporting bugs (and the RFaq section 9
does not request port-mortem dumps, or list bugs nots to report),
specifying this protocol on the R-Bugs page will expedite matters.

-- Ronnen --

--
Ronnen Levinson, Ph.D.            \/      RML27@cornell.edu
scientist                         ||      http://ronnen.com
Lawrence Berkeley National Lab    /\      fax 425.955.1992

======================================
Arthur Dent hoped and prayed there wasn't an afterlife. Then, realizing
the contradiction,
he merely hoped there wasn't an afterlife.

-- Douglas Adams
======================================



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 14:00:28 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 15:00:28 +0200
Subject: PR#1914
In-Reply-To: <200208192221.AAA21461@pubhealth.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
Message-ID: <x2wuql1y8j.fsf@biostat.ku.dk>

RML27@cornell.edu writes:

> (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> dump. I also see no link in the R-Bugs page to the either of these FAQs,
> nor a list of bugs that should not be reported. If you wish users to
> follow a specific protocol for reporting bugs (and the RFaq section 9
> does not request port-mortem dumps, or list bugs nots to report),
> specifying this protocol on the R-Bugs page will expedite matters.

I think that was a typo: Brian meant "..shows you how to..", not
"..have to..". We wouldn't require that in general. However, I can't
find any description in there of how to use dr.Watson et al. either. (??)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 20 14:49:53 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 20 Aug 2002 14:49:53 +0100
Subject: NA and help page for "&" and "|"
Message-ID: <3D624901.C2D83100@durham.ac.uk>

Hi everyone,

Can I suggest an addition to the help page for logical AND and OR,
indicating the behaviour of NA (which is currently not mentioned at
all).  I think something simple like an extra paragraph in Details, eg

\code{NA} is a valid logical object.  Where a component of \code{x} or
\code{y} is \code{NA}, the result will be \code{NA} if the outcome is
ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
\code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

And so it might also be a good idea to add a truth-table to the
examples, eg

# construct truth table for logical &

x <- c(NA, FALSE, TRUE)
names(x) <- as.character(x)
outer(x, x, "&")

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 20 16:29:42 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 20 Aug 2002 17:29:42 +0200
Subject: NA and help page for "&" and "|"
In-Reply-To: <3D624901.C2D83100@durham.ac.uk>
References: <3D624901.C2D83100@durham.ac.uk>
Message-ID: <15714.24678.198267.571629@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk>
>>>>>     on Tue, 20 Aug 2002 14:49:53 +0100 writes:

    JonR> Hi everyone,
    JonR> Can I suggest an addition to the help page for logical AND and OR,
    JonR> indicating the behaviour of NA (which is currently not mentioned at
    JonR> all).  I think something simple like an extra paragraph in Details, eg

    JonR> \code{NA} is a valid logical object.  Where a component of \code{x} or
    JonR> \code{y} is \code{NA}, the result will be \code{NA} if the outcome is
    JonR> ambiguous.  In other words \code{NA & TRUE} evaluates to \code{NA}, but
    JonR> \code{NA & FALSE} evaluates to \code{FALSE}.  See the examples below.

    JonR> And so it might also be a good idea to add a truth-table to the
    JonR> examples, eg

    JonR> # construct truth table for logical &

    JonR> x <- c(NA, FALSE, TRUE)
    JonR> names(x) <- as.character(x)
    JonR> outer(x, x, "&")

Thanks a lot, Jonathan, for the helpful suggestions.
I'm adding these to R-devel.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Tue Aug 20 20:30:22 2002
From: lina@u.washington.edu (Michael Na Li)
Date: Tue, 20 Aug 2002 12:30:22 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com> ("Liaw,
 Andy"'s message of "Mon, 19 Aug 2002 15:02:22 -0400")
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
Message-ID: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>

>>>>> On Mon, 19 Aug 2002 15:02:22 -0400, "Liaw, Andy" <andy_liaw@merck.com> said:


Andy> 1.  Since each of these boxes has two CPUs, how do I spawn more than one
Andy> slave process on them?

Note unlike MPI, PVM has no access to hardware information like the number of
CPUs on each node.  So there is no restriction on how many tasks one can spawn
on the cluster.  More tasks may be desirable when some of them are less CPU
intensive jobs.  For instances, tasks that monitor the activity of the
network, report host or task failure and spawn new task or add new hosts, etc.

Andy> 2.  I was hoping I can see similar gain with randomForest, but that
Andy> doesn't seem to be the case:

>> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], ntree=10000))
Andy> [1] 8.52 1.00 9.61 0.00 0.00
>> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
Andy> +                                       iris[,5], ntree=5000))
Andy> [1]  1.38  0.14 15.50  0.00  0.00

Andy> What am I missing here?  Is there anything I can do to see similar gain
Andy> as the boot() example?

I tried this example and found that most of the extra time is overhead, the
packing and unpacking of the messages.  When saving the object iris.rf, its
size is over 12M.  So it might be desirable to process the returned result in
each slave first and only return information needed.  

I got similar timing with our cluster.  Saving and loading the object to/from
a file require about 1.5 seconds each, which I assume is the cost of the
serialization (plus file reading and writing).  Then it seems the packing (as
bytes), transferring, and unpacking the object take 7-8 seconds??

I wonder how much the serialization itself hurts the performance.  Would
sending raw numbers with pvm routines improve the performance?

Michael

(BTW, is there a convenient function in R to examine the size of an object?)

-- 
---------------------------------------------------
Michael Na Li
Email: lina@u.washington.edu
Department of Biostatistics, Box 357232
University of Washington, Seattle, WA 98195  
---------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 20 20:36:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 20 Aug 2002 20:36:14 +0100 (BST)
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <Pine.LNX.4.31.0208202035210.17166-100000@gannet.stats>

On Tue, 20 Aug 2002, Michael Na Li wrote:

> (BTW, is there a convenient function in R to examine the size of an object?)

object.size, but see the caveats on its help page.  Because of sharing,
it's none too well defined.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Aug 20 20:53:09 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 20 Aug 2002 12:53:09 -0700
Subject: question about Rpvm, SNOW, etc.
In-Reply-To: <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
References: <51F9C42DA15CD311BD220008C707D81906FFC5AD@usrymx10.merck.com>
 <m2adnhnx9t.fsf@qiuranke.phony.washington.edu>
Message-ID: <87y9b1b93u.fsf@jeeves.blindglobe.net>

>>>>> "michael" == Michael Na Li <lina@u.washington.edu> writes:

    michael> I got similar timing with our cluster.  Saving and loading the object to/from
    michael> a file require about 1.5 seconds each, which I assume is the cost of the
    michael> serialization (plus file reading and writing).  Then it seems the packing (as
    michael> bytes), transferring, and unpacking the object take 7-8 seconds??

    michael> I wonder how much the serialization itself hurts the performance.  Would
    michael> sending raw numbers with pvm routines improve the performance?

It might.  It is "well-known" that PVM (and MPI, and other
message-passing systems) have a marshalling overhead that can be
easily beat by RPC or direct socket programming.  This suggests that
the lower/rawer the data at the message passing stage, the faster it
might be.  

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Aug 20 22:39:53 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 20 Aug 2002 14:39:53 -0700
Subject: various uploads
Message-ID: <5C880122-B485-11D6-990C-003065A21C86@stat.ucla.edu>


--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	delsp=yes;
	charset=US-ASCII;
	format=flowed

ftp://gifi.stat.ucla.edu/pub

1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from
Savannah CVS.

2. gcc-3.3.tar.gz is the latest version from Darwin CVS of gcc, g77, and
gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is
experimental and may not always work properly.

3. But it does compile and build R. See R-devel-gcc33.tar.gz, which
is an alternative to R-devel-f2c.tar.gz.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

--Apple-Mail-2-32785479
Content-Transfer-Encoding: 7bit
Content-Type: text/enriched;
	charset=US-ASCII

ftp://gifi.stat.ucla.edu/pub


1. emacs/EmacsInstaller.dmg.gz is the Carbon Emacs, latest version from

Savannah CVS.


2. <fontfamily><param>Lucida Grande</param>gcc-3.3.tar.gz is the
latest version from Darwin CVS of gcc, g77, and

gjc, versions 3.3. Unpack in /usr, installs in /usr/local. This is

experimental and may not always work properly.


3. But it does compile and build R. See R-devel-gcc33.tar.gz, which

is an alternative to R-devel-f2c.tar.gz.</fontfamily>

===

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics

US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA
90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu  

                 www: http://www.stat.ucla.edu/~deleeuw

============================================================================

         Remember, wherever you go, there you are. --- Buckaroo Banzai

============================================================================


--Apple-Mail-2-32785479--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 20 22:41:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Aug 2002 23:41:32 +0200
Subject: PR#1914
In-Reply-To: <x2wuql1y8j.fsf@biostat.ku.dk>
References: <200208192221.AAA21461@pubhealth.ku.dk>
 <x2wuql1y8j.fsf@biostat.ku.dk>
Message-ID: <x2znvhcinn.fsf@biostat.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> RML27@cornell.edu writes:
> 
> > (2) I see no request in either the RWinFAQ or the RFAQ for a post-mortem
> > dump. I also see no link in the R-Bugs page to the either of these FAQs,
> > nor a list of bugs that should not be reported. If you wish users to
> > follow a specific protocol for reporting bugs (and the RFaq section 9
> > does not request port-mortem dumps, or list bugs nots to report),
> > specifying this protocol on the R-Bugs page will expedite matters.
> 
> I think that was a typo: Brian meant "..shows you how to..", not
> "..have to..". We wouldn't require that in general. However, I can't
> find any description in there of how to use dr.Watson et al. either. (??)

It's "Dr.Mingw" and it's in sec.7.4 (thanks and sorry, Brian). It's
not for the faint-hearted, but it is about the only way to really get
to the bottom of this sort of problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Lingyun.Shi@fimat.com  Tue Aug 20 22:53:52 2002
From: Lingyun.Shi@fimat.com (Lingyun Shi)
Date: Tue, 20 Aug 2002 16:53:52 -0500
Subject: Failed on building libR.so
Message-ID: <OF2C767AA9.C5930284-ON86256C1B.00772254@fimat.com>


Hi,

I Failed to create libR.so. here's what I did and what's the error msg:

Under the R source installation directory : do:
1. make distclean
2. ./configure --enable-R-shlib
3. make

The error is :

gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
-DHAVE_CONFIG_H  -fPIC  -g -O2 -c connections.c -o connections.lo
connections.c:775: zlib.h: No such file or directory
*** Error code 1
make: Fatal error: Command failed for target `connections.lo'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src/main
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /DEVELOPEMENT/ffmwendy/r-project/R-1.5.1/src
*** Error code 1
make: Fatal error: Command failed for target `R'


I checked the directory, zlib.h is under /src/macintosh/zlib directory. How
should I fix this problem? Could someone help?

Thanks

Kate

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chris@everyrecruiter.com  Tue Aug 20 20:12:28 2002
From: chris@everyrecruiter.com (Chris)
Date: Tue, 20 Aug 2002 19:12:28
Subject: New Position
Message-ID: PM20007:12:28 PM

This is an HTML email message.  If you see this, your mail client does not support HTML messages.

------=_NextPart_PWHGVBDQBM
Content-Type: text/html;charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

<HTML>
<HEAD>
<TITLE>New Position</TITLE>

<BODY VLINK="#009999">

<HR>

<BASEFONT SIZE="3">

<P><FONT FACE="Arial"><FONT COLOR="#003399"><b>If you are going to find the job you want,</b> it will be here at <A HREF="http://www.everyrecruiter.com">http://www.everyrecruiter.com.</A></p>

<P><FONT FACE="Arial"><b>Why?</b> Because it is the only way you can connect with <B>employers</B>...</b>lots of employers.</FONT></P> 

<P><FONT FACE="Arial">Most jobseekers have come to realize that the old methods of looking for a job no longer work, but they don't know what else to do.</FONT></P> 

<P><FONT FACE="Arial"><b>A completely different approach is required.</b></FONT></p> 

<p><FONT FACE="Arial">Fewer and fewer employers are willing to deal with the avalanche of resumes they receive when they advertise an open position.That is why there is a decreasing number jobs advertised in the paper.</FONT></p>

<p><FONT FACE="Arial"> Instead, most employers prefer to search for employees at their convenience. And the place where most employers go to search is <A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com.</A></FONT></p>

<p><FONT FACE="Arial"><b>Will the employers who look today be able to find you?</b></FONT></p>

<p><FONT FACE="Arial"><b> Get connected -- Get the job!</p>
<p><A HREF="http://www.everyrecruiter.com">http://www.EveryRecruiter.com</A></b></FONT></p>
<HR></Body></Head></html>
------=_NextPart_PWHGVBDQBM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Wed Aug 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Wed, 21 Aug 2002 07:15:04 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200208210515.g7L5F4D05179@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
* PR# 1656 *
Subject: command line editing does not work
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 19:51:24 +0200
* PR# 1657 *
Subject: command line editing does not work (2)
From: Petr.Savicky@cuni.cz
Date: Tue, 11 Jun 2002 20:20:11 +0200
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1737 *
Subject: complex numbers in library function
From: alex.deckmyn@oma.be
Date: Wed, 3 Jul 2002 14:25:58 +0200 (MET DST)
--parse/deparse problem

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
--Still segfaults in 1.5.1 
* PR# 1697 *
Subject: Bug in printing symbolic derivative
From: Duncan Murdoch <murdoch@stats.uwo.ca>
Date: Thu, 20 Jun 2002 16:27:37 -0400
--Problem in parentheses in deparse/parse
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 1796 *
Subject: methods: representation gives "unused arguments" on failure
From: markus.jantti@iki.fi
Date: Tue, 16 Jul 2002 10:03:40 +0200 (MET DST)
--see also 1799 for follow-up
* PR# 1799 *
Subject: Re: methods: representation gives "unused arguments" on failure 
From: John Chambers <jmc@research.bell-labs.com>
Date: Tue, 16 Jul 2002 16:59:22 -0400
--follow up to 1796
--stop() allows multiple args as from 1.6.0
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Wed Aug 21 14:33:58 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Wed, 21 Aug 2002 09:33:58 -0400
Subject: question about Rpvm, SNOW, etc.
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC5C6@usrymx10.merck.com>

> From: Michael Na Li [mailto:lina@u.washington.edu]
> Andy> 2.  I was hoping I can see similar gain with 
> randomForest, but that
> Andy> doesn't seem to be the case:
> 
> >> system.time(iris.rf <- randomForest(iris[,1:4], iris[,5], 
> ntree=10000))
> Andy> [1] 8.52 1.00 9.61 0.00 0.00
> >> system.time(cl.iris.rf <- clusterCall(cl, randomForest, iris[,1:4],
> Andy> +                                       iris[,5], ntree=5000))
> Andy> [1]  1.38  0.14 15.50  0.00  0.00
> 
> Andy> What am I missing here?  Is there anything I can do to 
> see similar gain
> Andy> as the boot() example?
> 
> I tried this example and found that most of the extra time is 
> overhead, the
> packing and unpacking of the messages.  When saving the 
> object iris.rf, its
> size is over 12M.  So it might be desirable to process the 
> returned result in
> each slave first and only return information needed.  
> 
> I got similar timing with our cluster.  Saving and loading 
> the object to/from
> a file require about 1.5 seconds each, which I assume is the 
> cost of the
> serialization (plus file reading and writing).  Then it seems 
> the packing (as
> bytes), transferring, and unpacking the object take 7-8 seconds??

I tried the following, and it seems about right.  (I used a socket cluster
with 3 nodes.  PVM cluster gave similar result.)

system.time(iris.rf <- randomForest(iris[,1:4], iris[,5],
ntree=30000)$votes)
[1] 24.57  3.33 27.98  0.00  0.00

system.time(clusterEvalQ(cl, {data(iris); randomForest(iris[, 1:4],
                                      iris[, 5], ntree=10000)$votes}))
[1]  0.01  0.00 12.70  0.00  0.00

I was planning to add an alternative random forest interface that does not
return the entire forest (to save memory).  Seems like that item just got
promoted on my to-do list...

Thanks very much for the help!!

Andy

> I wonder how much the serialization itself hurts the 
> performance.  Would
> sending raw numbers with pvm routines improve the performance?
> 
> Michael
> 
> (BTW, is there a convenient function in R to examine the size 
> of an object?)
> 
> -- 
> ---------------------------------------------------
> Michael Na Li
> Email: lina@u.washington.edu
> Department of Biostatistics, Box 357232
> University of Washington, Seattle, WA 98195  
> ---------------------------------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cmoffet@nwrc.ars.usda.gov  Wed Aug 21 15:10:49 2002
From: cmoffet@nwrc.ars.usda.gov (cmoffet@nwrc.ars.usda.gov)
Date: Wed, 21 Aug 2002 16:10:49 +0200 (MET DST)
Subject: error in plot.formula(..., ask = FALSE) (PR#1923)
Message-ID: <200208211410.QAA07088@pubhealth.ku.dk>

Full_Name: Corey A. Moffet
Version: 1.5.1
OS: windows 2000
Submission from: (NULL) (199.133.140.156)


Passing ask = FALSE in plot.formula returns an error.

For example:
-------------------

dat <- data.frame(y  =            c(1,1,1,2,2,2,3,3,3,4,4,4), 
                  x1 = as.ordered(c(1,1,1,1,1,1,2,2,2,2,2,2)),
                  x2 = as.ordered(c(1,1,1,2,2,2,1,1,1,2,2,2)))

plot(y ~ x1 + x2, data = dat) # Works fine "interactively" asking:
# "Hit <Return> to see next plot:"
#  But this causes problems when it is run in a batch file.

plot(y ~ x1 + x2, data = dat, ask = FALSE) # gives error:
# "Error in model.frame(formula, rownames, variables, varnames, extras,
# extranames,  :   variable lengths differ"

-------------------



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Wed Aug 21 20:06:21 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Wed, 21 Aug 2002 15:06:21 -0400
Subject: LispStat, R and ViSta  [was: Re: Status?]
In-Reply-To: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>; from uluru@email.unc.edu on Sun, Aug 18, 2002 at 05:28:10PM -0400
References: <1029706090.3d60116a77a95@webmail8.isis.unc.edu>
Message-ID: <20020821150621.F659@jessie.research.bell-labs.com>


Hi Forrest.

  It is definitely preferable to avoid giving up existing XLisp-Stat
code, especially when the facilities you probably want are not
currently part of R. Working from the RGtk or tcltk packages to create
dynamic graphics involves a lot of work, both design and programming
given that the R graphics are based on a static model.
  
  I wonder if ggobi and the programmatic access via Rggobi and RGtk
would give you similar facilities to what currently exists in XLisp.

 As you mention, it would be easiest to combine R and XLisp-Stat so
that you could use existing XLisp code and make use of R's statistical
functionality, etc. This is a perfect example for the use of embedding
one system inside the other; something we have done as part of the
Omegahat project for numerous languages.  

So with some vital help from Luke, I have created an R package that
provides a very experimental interface between R and XLisp by allowing
XLisp to be embedded in R. The package contains and requires some
minor modifications to XLisp which allow it to be used as a shared
library and currently this only works on Unix.  It allows one to call
arbitray XLisp functions, however there is an issue with the graphics
that I haven't sorted out yet.  It did take less than a day
to put together so far, so I am reasonable confident that I and others
can iron out the details and make it reasonably complete and robust.

The package is available from
  http://www.omegahat.org/RXLisp

Given that I only spent a day on it, don't expect too much
in the way of documentation, etc. Just e-mail me if you
have problems. I'd be very happy to hear from interested
people and we can

 Duncan.


uluru@email.unc.edu wrote:
> I have been taking a break for the last month or so, and am only just
> now catching up on my email.  Otherwise, I would have joined this
> discussion earlier.  And... I apologize for the length of this, but I
> don't think it is overly long.
> 
> >From the amount of activity in the LispStat news group (none), it seems
> that LispStat is dead. We all know that Luke is working on R and not on
> LispStat, and that Jan has switched UCLA over from LispStat to R. And we
> have not heard from users of LispStat for some time.  So, it seems no
> one is using LispStat.
> 
> For me, at least, this is not the case. As the developer of ViSta, I
> have and still am using LispStat a great deal. In fact, I cannot
> conceive of doing what I do with any other system.  
> 
> Of course, since I use it so much, I am very aware of LispStat's
> strengths and weaknesses, and want to add my views to the discussion.
> However, I spend all my time using only LispStat, so I can't make any
> comparisons to R or to any other systems.
> 
> To me, the strengths of LispStat are:
> 1) The dynamic, highly interactive graphics
> 2) The object system
> 3) Lisp language and byte compiler
> 
> These strengths make LispStat an ideal system for implementing
> statistical systems. It is less suited for doing statistical analysis.
> As a result, the most significant uses of LispStat have been statistical
> systems such as Arc and ViSta.
> 
> In the work I've done with LispStat,  ViSta's spreadplot architecture is
> the best example of LispStat being used to implement a statistical
> (sub)system (described in a forthcoming JCGS paper by myself, Pedro
> Valero, Richard Faldowski and Carla Bann). 
> 
> The weaknesses of LispStat are:
> 1) No high-level analysis modules
> 2) No standards for data sets, models, etc.
> 3) No user-oriented data manipulation language
> 4) Totally inadequate documentation
> 5) Poor or non-existant printing 
> 6) No static graphic manipulation facilities
> 7) The underlying operating system interfaces are old.
> 
> ViSta attempts to take care of these weaknesses, with varying degrees of
> success. Specifically:
> 1) ViSta has high-level analysis plugins. The method for writing these
> plugins is documented. I believe this very well solves the first weakness. 
> 2) ViSta's statistical object architecture -- a hierarchy of objects
> that include datasets, datasheets, data editors, transformations,
> analysis methods, models and plugins --- solves the lack of standards
> for such things. The implementation is slow for data objects and needs
> to be re-architected. The implementation for the others is more than
> adequate.
> 3) At the suggestion of Sandy Weisberg, I have incorporated PARCIL, a
> C-to-Lisp Parser. This allows users to type a=2*(b+c)^2 rather than the
> awkward lisp equivalent:
> (setf a (^ (* 2 (+ b c)) 2)) 
> (I'm sorry I can't give a proper reference to PARCIL, I'm not at home).
> 4) Pedro Valero, Gabriel Molina, Michael Friendly and I, in various
> combinations, are working on the documentation problem.
> 5) Printing, while better than LispStat, is still not adequate.
> 6) Static graphics manipulation, as in SAS (and, apparently R), is
> totally lacking.
> 7) Nothing has been done about this.
> 
> (Note that the newest version of ViSta use a modified version of
> LispStat that only works under Windows, so that Mac/Unix users don't
> have all the new features. This problem can be fixed by someone familiar
> with LispStat and Unix.)
> 
> I am very interested in an effort to combine the strengths of LispStat
> and R, but have no clue how it would be done.  From my viewpoint,
> though, it would need to add the three strengths of LispStat (Lisp,
> Objects and Dynamic Graphics) to the existing R environment, and it
> would need to work in all three supported environments -- Windows, Mac,
> and Linux/Unix
> 
> Anyone know how to do that?
> 
> Forrest
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ld-temp-qt3i@pobox.com  Thu Aug 22 03:59:01 2002
From: ld-temp-qt3i@pobox.com (ld-temp-qt3i@pobox.com)
Date: Thu, 22 Aug 2002 04:59:01 +0200 (MET DST)
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
Message-ID: <200208220259.EAA09000@pubhealth.ku.dk>

I can't get it to run. On launch I get this:

dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
/sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
/sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

Thanks.

Linc Davis


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu Aug 22 04:24:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 21 Aug 2002 20:24:14 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <200208220259.EAA09000@pubhealth.ku.dk>
References: <200208220259.EAA09000@pubhealth.ku.dk>
Message-ID: <87elcrk23l.fsf@jeeves.blindglobe.net>

>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:

    ld-temp-qt3i> I can't get it to run. On launch I get this:
    ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple definitions of symbol _PC
    ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so) definition of _PC
    ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition of _PC

    ld-temp-qt3i> Thanks.

    ld-temp-qt3i> Linc Davis


Really weird -- looks like you are running a non-fink R with a fink
setup existing.

I think you want one or the other, but not both.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my tuesday/wednesday/friday locations are completely unpredictable.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 04:56:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 20:56:24 -0700
Subject: R-1.5.1 (X11/Darwin), Mac OS 10.1.5 (PR#1924)
In-Reply-To: <87elcrk23l.fsf@jeeves.blindglobe.net>
Message-ID: <20D1BB2D-B583-11D6-9066-000393860F3C@stat.ucla.edu>

R-1.5.1.dmg.tar.gz installs both the R stuff in /usr/local and the  
necessary
fink stuff (all dylibs) in /sw. So you need both. But Linc has more  
than (s)he
needs: two definitions of _PC. Is this the CRAN version or the  
gifi.stat.ucla.edu
version ?

On Wednesday, August 21, 2002, at 08:24 PM, A.J. Rossini wrote:

>>>>>> "ld-temp-qt3i" == ld-temp-qt3i  <ld-temp-qt3i@pobox.com> writes:
>
>     ld-temp-qt3i> I can't get it to run. On launch I get this:
>     ld-temp-qt3i> dyld: /usr/local/lib/R/bin/R.bin multiple  
> definitions of symbol _PC
>     ld-temp-qt3i> /sw/lib/libreadline.4.2.dylib(terminal.so)  
> definition of _PC
>     ld-temp-qt3i> /sw/lib/libncurses.dylib.5(lib_tputs.o) definition  
> of _PC
>
>     ld-temp-qt3i> Thanks.
>
>     ld-temp-qt3i> Linc Davis
>
>
> Really weird -- looks like you are running a non-fink R with a fink
> setup existing.
>
> I think you want one or the other, but not both.
>
> best,
> -tony
>
> --  
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my tuesday/wednesday/friday locations are completely unpredictable.)
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:00:54 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:00:54 -0700
Subject: RXLisp
Message-ID: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>

I was obviously fascinated by Duncan's earlier message on RXLisp.

I managed to build a working version of RXLisp for OS X, by some
unabashed and rather uninformed hacking. I compiled XLISP-STAT using
the gcc flags -fno-common  and --no-cpp-precomp (not sure if they
are necessary or not, they are part of an older hack). I "make
libxlisp.so", using Duncan's replacement for the three XLS files
(I am not sure if these are necessary with my build strategy, probably
not).  I do not really make libxlisp.so, because there is no -shared  
flag for
the static linker in OS X. I just leave the XLS directory with a broken  
link
and a lot of foo.o files.

Then I do , in the appropriate place,

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

but the final link of this  is

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
          -L/Users/deleeuw/MyStuff/Developer/xlispstat-3-52-18 -lxlisp

This breaks, of course, there is no libxlisp. I then move to RXLisp/src  
and do

gcc -bundle -bundle_loader /usr/local/lib/R/bin/R.bin  -o RXLisp.so \
	Converters.o RXLisp.o \
	$XLISP_SRC_DIR/*.o -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl

i.e. I link all the foo.o files Duncan puts in libxlisp.so. Then once  
more

R CMD INSTALL --configure-args='--with-build-dll' RXLisp

which puts everything in the R hierarchy. Now I can do

[cabledoc68:~/Desktop] deleeuw% R

R : Copyright 2002, The R Development Core Team
Version 1.5.1 Patched (2002-08-04)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

 > library(RXLisp)
 > .XLispInit()
XLISP-PLUS version 3.04
Portions Copyright (c) 1988, by David Betz.
Modified by Thomas Almy and others.
XLISP-STAT Release 3.52.18 (Beta).
Copyright (c) 1989-1999, by Luke Tierney.

NULL
 > .XLisp("+",1,2,3)
[1] 6
 > .XLisp("max",1,2)
[1] 2
 > .XLisp("tan",.25)
[1] 0.2553419
 > .XLisp("sum",1:10)
[1] 55
 > .XLisp("gcd",as.integer(4),as.integer(16),as.integer(20))
[1] 4
 > .XLisp("list",1,2,3,4,5,6)
[1] 1 2 3 4 5 6
 > q()

RXLisp can of course only do subr's (i.e. functions defined
in compiled C code in XLS), and it does not know about
XLS objects, graphics, arrays, vectors, etc. I am not sure
if my version, which does not use the libxlisp.so shared
lib at all, can do all that Duncan's version can. I will put
RXLisp as a binary package on http://gifi.stat.ucla.edu/pub
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zed.shaw@ubc.ca  Thu Aug 22 07:28:25 2002
From: zed.shaw@ubc.ca (Zed A. Shaw)
Date: Wed, 21 Aug 2002 23:28:25 -0700
Subject: R_Interactive decision to halt execution during errors
Message-ID: <B989D299.317A%zed.shaw@ubc.ca>

Hi,

I'm currently trying to use R as a back-end from an interface (you may have
seen me on the help list), and I'm running into something that is rather
confusing.  The following lines in main/errors.c of R 1.5.1:


439:    if ( !R_Interactive && !haveHandler && inError ) {
440:        REprintf("Execution halted\n");
441:        R_CleanUp(SA_NOSAVE, 1, 0); /* quit, no save, no .Last, status=1
*/
442:    }


Which seems to not make any sense at all.  I've scoured the code and can't
figure out what the rationale is for halting execution simply because the
input is not interactive.  I'm assuming the rationale was that, if input is
not interactive, then R is running as a script interpreter, but this isn't
the case since the stdio can be redirected in different ways (and actually
this is encouraged in the documentation).

R_Interactive is determined by a call to isatty(0) in unix/system.c which is
used in various places to control how R interacts with the user.  The
problem I see with this is that, there is no mode for "not interactive, but
don't quit" or "proxy mode".  I assumed --slave would do this (as, that
seems to be what the docs imply), but it doesn't.

So, is a patch in order, or is there another way around it?  I'm thinking,
the above if statement should have one additional and case for !slaveMode,
so that it can be run as a back-end even though the terminal is not
interactive.  Either that, or I can somehow install an error handler and
this code will be avoided.

I can do the patch for this, unless someone has a better way to fix it.  Let
me know what you think.

Finally, having read through most of this code, I feel that it is a bit
confused as to whether R is an interactive console or a script interpreter.
The above code assumes that, if R is not interactive, then it is a script
interpreter.  Yet, there's no real way to tell R to simply run a script file
other than sending it through stdio.  Effectively, the stdio channel becomes
confused with the dual purpose of being an interface or a file stream with
no way for R to differentiate.  I would prefer to see R act like most other
scripting languages:  stdio is reserved for interaction with the user and
does not abort on failure like above.  Meanwhile, a --script option is used
to run a given script like perl or python does, and would be expected to
halt on errors.  Does that make sense?

Anyway, let me know the best course of action.

-- 
Zed A. Shaw



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 22 07:59:03 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 21 Aug 2002 23:59:03 -0700
Subject: More XLisp in R
In-Reply-To: <84DDFE37-B594-11D6-9066-000393860F3C@stat.ucla.edu>
Message-ID: <A48CB4E9-B59C-11D6-9066-000393860F3C@stat.ucla.edu>

Clearly the beauty of Lisp sort of gets lost. Also RXLisp
cannot return logicals, strings, lists, characters (no convertors
yet). Still, none of that is essential, and all of this is exciting.

 > .XLisp("mean",.XLisp("list",1,2))
[1] 1.5
 > .XLisp("iseq",as.integer(10))
  [1] 0 1 2 3 4 5 6 7 8 9
 > x<-1:10
 > .XLisp("elt",x,as.integer(1))
[1] 2
 > .XLisp("sample",1:20,as.integer(10),T)
  [1]  9 18  7  4 13 19  9  7  9  3
 > .XLisp("repeat",1:10,as.integer(2))
  [1]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10
 > .XLisp("uniform-rand",as.integer(10))
  [1] 0.33747593 0.69355427 0.97968865 0.39687786 0.81754441 0.59710673
  [7] 0.02034651 0.48217749 0.29217949 0.05538188
 > .XLisp("princ",3)
3.0[1] 3
 > .XLisp("order",c(1,3,2,5,4))
[1] 0 2 1 4 3
 > .XLisp("sort-data",c(1,3,2,5,4))
[1] 1 2 3 4 5
 > .XLisp("bivnorm-cdf",.3,.2,.6)
[1] 0.4551159
 > y<-"abcd"
 > .XLisp("length",y)
[1] 4
 > sapply(-9:9/10,function(x) .XLisp("bivnorm-cdf",0,0,x))
  [1] 0.07178343 0.10241662 0.12659185 0.14758378 0.16666680 0.18450516
  [7] 0.20150674 0.21795294 0.23405789 0.25000000 0.26594211 0.28204706
[13] 0.29849326 0.31549484 0.33333320 0.35241622 0.37340815 0.39758338
[19] 0.42821657
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Aug 22 10:47:22 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 22 Aug 2002 11:47:22 +0200 (MET DST)
Subject: as.list() coerces logical to integer (PR#1926)
Message-ID: <200208220947.LAA12226@pubhealth.ku.dk>

A symptom was seen by Ole Christensen when using sapply(*, is.numeric).

It can be simplified  to
``lapply coerces logical to integer'' :

  > lapply(TRUE, typeof)
  [[1]]
  [1] "integer"

But the bug is not in lapply's C code, but rather before that, 
namely in as.list() :

> typeof(as.list(TRUE)[[1]])
[1] "integer"

I'm looking into fixing this (for R-devel aka "1.6.0 unstable")
right away.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lylek@utk.edu  Thu Aug 22 13:45:47 2002
From: lylek@utk.edu (lylek@utk.edu)
Date: Thu, 22 Aug 2002 14:45:47 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208221245.OAA14923@pubhealth.ku.dk>

Full_Name: Lyle W. Konigsberg
Version: 1.5.1
OS: Windows
Submission from: (NULL) (160.36.64.99)


I apparently found an error in how "deriv" puts a derivative to the screen
(though the internal representation is correct).  Here's what I was doing for a
class example:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
-15 * (1/p^2) + 11 * (1/(1 - p)^2)
> eval(D(D(lnlk,"p"),"p"))
[1] -106.5212
> -15 * (1/p^2) + 11 * (1/(1 - p)^2)
[1] 16.38788

>From S+ I have the following:

> lnlk<-expression(15*log(p)+11*log(1-p))
> p<-15/26
> D(D(lnlk,"p"),"p")
 - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
[1] -106.5212

R seems to be dropping the outer parentheses.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From nerone4@hotmail.com  Fri Aug 23 02:00:26 2002
From: nerone4@hotmail.com (nerone4@hotmail.com)
Date: Thu, 22 Aug 2002 09:00:26 -1600
Subject: PROTECT YOUR COMPUTER,YOU NEED SYSTEMWORKS2002!                23027
Message-ID: <00007e2e151b$0000565e$000034ae@kppublish.ru>

<html>

<head>
<meta http-equiv=3D"Content-Language" content=3D"en-us">
<meta name=3D"GENERATOR" content=3D"Microsoft FrontPage 4.0">
<meta name=3D"ProgId" content=3D"FrontPage.Editor.Document">
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dwindows-=
1252">
<title>Norton AD</title>
</head>

<body>

<table border=3D"3" cellspacing=3D"3" width=3D"469" cellpadding=3D"3" bgco=
lor=3D"#000080"  bordercolor=3D"#FFFFFF" style=3D"border-collapse: collaps=
e" bordercolordark=3D"#FFFFFF">
  <tr>
    <td width=3D"447">&nbsp;
      <table border=3D"1" width=3D"100%" bgcolor=3D"#FFFFFF" bordercolor=3D=
"#000080">
        <tr>
          <td width=3D"100%" align=3D"center"><font face=3D"Impact" size=3D=
"4" color=3D"#CC0000">ATTENTION:
            This is a MUST for <u>ALL</u> Computer Users!!!</font></td>
        </tr>
      </table>
      <p align=3D"center"><font size=3D"3" face=3D"Verdana"><b>&nbsp;<font=
 color=3D"#FFFFFF">*NEW
      - Special Package Deal!*</font></b></font></p>
      <table border=3D"8" width=3D"100%" height=3D"86" bgcolor=3D"#FFFFFF"=
 bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"80" align=3D"center"><font face=3D"=
Verdana, Arial, Helvetica, sans-serif" color=3D"#000099" size=3D"5"><b>Nor=
ton
            SystemWorks 2002 Software Suite<br>
            -<i>Professional Edition</i>-</b></font></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"62">
        <tr>
          <td width=3D"100%" height=3D"56" align=3D"center"><b><font face=3D=
"Tahoma" color=3D"#FFFFFF" size=3D"4">Includes
            Six - </font><i><font face=3D"Tahoma" size=3D"4" color=3D"#FFF=
F00">Yes 6!</font></i><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4"> =
- Feature-Packed Utilities<br>ALL
            for </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF00">=
1</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Special </font><font face=3D"Tahoma" size=3D"4" color=3D"#FFFF=
00">LOW</font><font face=3D"Tahoma" color=3D"#FFFFFF" size=3D"4">
            Price!</font></b></td>
        </tr>
      </table>
      <table border=3D"0" width=3D"100%" height=3D"115" bgcolor=3D"#000080=
" bordercolor=3D"#FFFFFF">
        <tr>
          <td width=3D"100%" height=3D"109"><b><font face=3D"Tahoma" size=3D=
"2" color=3D"#FFFF00">This Software Will:</font><font face=3D"Tahoma" size=
=3D"2" color=3D"#FFFFFF"><br>- Protect your
            computer from unwanted and <i> hazardous</i> viruses<br>- Help=
 secure your
            private &amp; valuable information<br>- Allow you to transfer =
files
            and send e-mails <u> safely</u><br>- Backup your ALL your data=
 quick and
            easily<br>- Improve your PC's performance w/<i>superior</i>
            integral diagnostics!<br></font></b></td>
        </tr>
      </table>&nbsp;
      <table border=3D"4" width=3D"100%" height=3D"4" bgcolor=3D"#FFFFFF" =
bordercolor=3D"#FFFF00">
        <tr>
          <td width=3D"100%" height=3D"1">
            <p align=3D"center"><b><font face=3D"Verdana" size=3D"5"><font=
 color=3D"#000000"><font color=3D"#ff0000">6</font>
            </font><font color=3D"#000080">Feature-Packed Utilities<br></f=
ont><font color=3D"#000000">
            </font><u><font color=3D"#ff0000">1</font></u><u><font color=3D=
"#000000"> 
            </font><font color=3D"#000080"> Great
            Price</font></u><font color=3D"#000000"> <br>
            </font><font color=3D"#000080">
            A</font><font color=3D"#000000"> <font color=3D"#ff0000">$300+=
</font>  </font><font color=3D"#000080"> Combined Retail Value
            <i>YOURS</i> for Only</font><font color=3D"#000000"> <font col=
or=3D"#ff0000">$29.99!</font><br>
            </font></font><font face=3D"Verdana" size=3D"4"><font color=3D=
"#000080">&lt;Includes
            </font><font color=3D"#FF0000">FREE</font><font color=3D"#0000=
80"> Shipping!&gt;</font></font></b></td>
        </tr>
      </table>
    <p align=3D"Center"><b> <font face=3D"Arial, Helvetica, sans-serif"  c=
olor=3D"#ffffff">Don't fall prey to destructive viruses
    or hackers!<br>Protect&nbsp; your computer and your valuable  informat=
ion
    and</font></b></p>
      <table border=3D"1" width=3D"100%" height=3D"44" bordercolor=3D"#FFF=
FFF">
        <tr>
          <td width=3D"100%" height=3D"38" bgcolor=3D"#0000FF" align=3D"ce=
nter"><b><font face=3D"Verdana" size=3D"4" color=3D"#FFFFFF"><a href=3D"ht=
tp://www.fastbizonline.com/systemworksed.htm" style=3D"color: #FFFFFF; fon=
t-family: Verdana; font-size: 14pt; font-weight: bold">-&gt;
            CLICK HERE to Order Yours NOW! &lt;-</a></font></b></td>
        </tr>
      </table>
      <p align=3D"Center"><b><font face=3D"Arial" size=3D"5"><a style=3D"t=
ext-decoration: none; background-color: rgb(255,255,0); color: #0000FF" hr=
ef=3D"http://www.fastbizonline.com/systemworksed.htm">Click
      here for more information</a></font></b></p>
      <p align=3D"Center"><font face=3D"Tahoma" size=3D"1" color=3D"#fffff=
f">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </font><p align=3D"Center"><font color=3D"#ffffff" size=3D"1" face=3D=
"Tahoma">Your
      email address was obtained from an opt-in list. Opt-in MRSA List<br>
      &nbsp;Purchase Code # 312-1-010.&nbsp;&nbsp;If you wish to be unsubs=
cribed
      from this list, please <a style=3D"COLOR: #ffffcc" href=3D"http://ww=
w.fastbizonline.com/removeme.html">Click
      here</a> and press send to be removed. If you have previously unsubs=
cribed
      and are still receiving this message, you may email our <a style=3D"=
COLOR: #ffffcc" href=3D"mailto:sortofridiculous@bigfoot.com?Subject=3DAbus=
e Report">Spam
      Abuse Control Center</a>. We do not condone spam in any shape or for=
m.
      Thank You kindly for your cooperation.</font></td>
  </tr>
</table>

</body>

</html>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 22 16:39:59 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 22 Aug 2002 08:39:59 -0700 (PDT)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208220836271.93374-100000@homer16.u.washington.edu>

On Thu, 22 Aug 2002 lylek@utk.edu wrote:

> Full_Name: Lyle W. Konigsberg
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (160.36.64.99)
>
>
> I apparently found an error in how "deriv" puts a derivative to the screen
> (though the internal representation is correct).  Here's what I was doing for a
> class example:

Yes, it's the same as bugs 1119, 1797 and 1637 and probably some others.
The deparse doesn't always put parentheses in correctly.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 22 16:45:19 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Aug 2002 17:45:19 +0200
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
In-Reply-To: <200208221245.OAA14923@pubhealth.ku.dk>
References: <200208221245.OAA14923@pubhealth.ku.dk>
Message-ID: <x2n0re3njk.fsf@biostat.ku.dk>

lylek@utk.edu writes:

> > lnlk<-expression(15*log(p)+11*log(1-p))
> > p<-15/26
> > D(D(lnlk,"p"),"p")
>  - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> > - (15 * 1/p^2 + 11 * 1/(1 - p)^2)
> [1] -106.5212
> 
> R seems to be dropping the outer parentheses.

Yes. Duncan Murdoch has been working on that recently.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From iwhite@staffmail.ed.ac.uk  Thu Aug 22 20:46:00 2002
From: iwhite@staffmail.ed.ac.uk (iwhite@staffmail.ed.ac.uk)
Date: Thu, 22 Aug 2002 21:46:00 +0200 (MET DST)
Subject: aov bug? (PR#1930)
Message-ID: <200208221946.VAA17276@pubhealth.ku.dk>


R : Copyright 2001, The R Development Core Team
Version 1.4.0  (2001-12-19)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> invisible(options(echo = TRUE))
> R.version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    4.0
year     2001
month    12
day      19
language R
> r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> trt <- factor(rep(1:4,c(5,6,5,5)))
> Y <- r/n
> z <- aov(Y ~ trt,weights=n)
> summary(z)
            Df  Sum Sq Mean Sq F value    Pr(>F)
trt          3 16.0626  5.3542  12.330 0.0001577 ***
Residuals   17  7.3820  0.4342
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> z
Call:
   aov(formula = Y ~ trt, weights = n)

Terms:
                      trt Residuals
Sum of Squares  16.062629  0.395016
Deg. of Freedom         3        17

Residual standard error: 0.1524343
Estimated effects may be unbalanced
>
> # BUG? summary(z) correctly reports the weighted residual sum of squares,
> # but the output from z gives an unweighted residual sum of squares.
> # At the least the discrepancy between the two forms of output is
> # confusing.
> proc.time()
[1] 1.60 0.08 1.65 0.00 0.00
>

======================================
I.White
ICAPB, University of Edinburgh
Ashworth Laboratories, West Mains Road
Edinburgh EH9 3JT
Fax: 0131 667 3210  Tel: 0131 650 5490
E-mail: iwhite@staffmail.ed.ac.uk
======================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 06:54:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 06:54:41 +0100 (BST)
Subject: aov bug? (PR#1930)
In-Reply-To: <200208221946.VAA17276@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230647250.19835-100000@gannet.stats>

Maybe, but this is exactly what S does, and `weights' is not a documented
argument to aov().

I will alter print.aov to use the weighted form.

On Thu, 22 Aug 2002 iwhite@staffmail.ed.ac.uk wrote:

>
> R : Copyright 2001, The R Development Core Team
> Version 1.4.0  (2001-12-19)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > invisible(options(echo = TRUE))
> > R.version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    4.0
> year     2001
> month    12
> day      19
> language R
> > r <- c(10,23,23,26,17,5,53,55,32,46,10,8,10,8,23,0,3,22,15,32,3)
> > n <- c(39,62,81,51,39,6,74,72,51,79,13,16,30,28,45,4,12,41,30,51,7)
> > trt <- factor(rep(1:4,c(5,6,5,5)))
> > Y <- r/n
> > z <- aov(Y ~ trt,weights=n)
> > summary(z)
>             Df  Sum Sq Mean Sq F value    Pr(>F)
> trt          3 16.0626  5.3542  12.330 0.0001577 ***
> Residuals   17  7.3820  0.4342
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> > z
> Call:
>    aov(formula = Y ~ trt, weights = n)
>
> Terms:
>                       trt Residuals
> Sum of Squares  16.062629  0.395016
> Deg. of Freedom         3        17
>
> Residual standard error: 0.1524343
> Estimated effects may be unbalanced
> >
> > # BUG? summary(z) correctly reports the weighted residual sum of squares,
> > # but the output from z gives an unweighted residual sum of squares.
> > # At the least the discrepancy between the two forms of output is
> > # confusing.
> > proc.time()
> [1] 1.60 0.08 1.65 0.00 0.00
> >
>
> ======================================
> I.White
> ICAPB, University of Edinburgh
> Ashworth Laboratories, West Mains Road
> Edinburgh EH9 3JT
> Fax: 0131 667 3210  Tel: 0131 650 5490
> E-mail: iwhite@staffmail.ed.ac.uk
> ======================================
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alex_dacosta@yahoo.fr  Fri Aug 23 08:09:55 2002
From: alex_dacosta@yahoo.fr (alex_dacosta@yahoo.fr)
Date: Fri, 23 Aug 2002 09:09:55 +0200 (MET DST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
Message-ID: <200208230709.JAA19081@pubhealth.ku.dk>

Full_Name: Alexandre Da Costa
Version: 1.5.1
OS: Windows NT 4 on Virtual PC 4
Submission from: (NULL) (193.253.191.74)


I am using Virtual PC 4.0.2 for every day work.
I wanted to try connections of R 1.5.1 to Oracle DataBases.
But R is running but is not working at all !
The simple commands end with "no finite arguments" error.
See following session:
-----------------------------------------------------------
R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> max(1,2)
[1] Inf
Warning message: 
no finite arguments to max; returning -Inf 
> library()
Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
        missing value where logical needed
In addition: Warning messages: 
1: no finite arguments to max; returning -Inf 
2: NAs introduced by coercion 
> ls()
[1] "last.warning"
> dir()
 [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
 [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
[11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
[16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> 
Any Idea ?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 23 08:28:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 23 Aug 2002 08:28:33 +0100 (BST)
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208230824090.2168-100000@gannet.stats>

1) What is `Virtual PC 4'?

2) Why did you send this as a bug report to R-bugs?
R does run on Windows NT, and does not claim to run under `Virtual PC 4'.
So this cannot be considered to be a bug in R.

I would have thought you would be sending the bug report to the vendors
of `Virtual PC 4'.  A request on R-help might have been appropriate.


On Fri, 23 Aug 2002 alex_dacosta@yahoo.fr wrote:

> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
>
>
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> > max(1,2)
> [1] Inf
> Warning message:
> no finite arguments to max; returning -Inf
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  :
>         missing value where logical needed
> In addition: Warning messages:
> 1: no finite arguments to max; returning -Inf
> 2: NAs introduced by coercion
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"
> >
> Any Idea ?
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Aug 23 12:27:01 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 23 Aug 2002 06:27:01 -0500
Subject: R 1.5.1 not working with Windows NT on Virtual PC 4 (PR#1932)
In-Reply-To: <200208230709.JAA19081@pubhealth.ku.dk>; from alex_dacosta@yahoo.fr on Fri, Aug 23, 2002 at 09:09:55AM +0200
References: <200208230709.JAA19081@pubhealth.ku.dk>
Message-ID: <20020823062701.A2733@nokomis.stat.umn.edu>

This is a bug in Virtual PC [Virtual PC is a PC emulator for Mac OS].
It seems to have been introduced in 4.0 and is still there in 5.0.  It
isn't there in 3.0. I reported it to Connectix and the upshot was that
they don't care.  I gave them a simple program that reproduces it,

----------------------------------(itest.c)------------------------------------
#include <stdio.h>

double R_Zero_Hack = 0.0;

double R_PosInf, R_NegInf;

main()
{
    R_PosInf = 1.0/R_Zero_Hack;
    R_NegInf = -1.0/R_Zero_Hack;
    printf("%g %g\n", R_PosInf, R_NegInf);
}
-------------------------------------------------------------------------------

This should produce

1.#INF -1.#INF

and does on an intel machine and on VPC 3.03.  But on VPC 4.02 and 5.0
it produces

1.#INF 1.#INF

If a few more people complain to connectix maybe something will
happen.  Virtual PC is nice in many ways; in fact I can build the
windows version of R on it with no problems.  But to run the R tests
or do anything useful with R I have to switch to 3.03, which I keep
around for that reason.  It's pretty annoing.

luke

On Fri, Aug 23, 2002 at 09:09:55AM +0200, alex_dacosta@yahoo.fr wrote:
> Full_Name: Alexandre Da Costa
> Version: 1.5.1
> OS: Windows NT 4 on Virtual PC 4
> Submission from: (NULL) (193.253.191.74)
> 
> 
> I am using Virtual PC 4.0.2 for every day work.
> I wanted to try connections of R 1.5.1 to Oracle DataBases.
> But R is running but is not working at all !
> The simple commands end with "no finite arguments" error.
> See following session:
> -----------------------------------------------------------
> R : Copyright 2002, The R Development Core Team
> Version 1.5.1  (2002-06-17)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > max(1,2)
> [1] Inf
> Warning message: 
> no finite arguments to max; returning -Inf 
> > library()
> Error in if (nc[currentIndex] == 0) upperBlockIndex <- c(upperBlockIndex,  : 
>         missing value where logical needed
> In addition: Warning messages: 
> 1: no finite arguments to max; returning -Inf 
> 2: NAs introduced by coercion 
> > ls()
> [1] "last.warning"
> > dir()
>  [1] "afm"          "AUTHORS"      "bin"          "CHANGES"      "COPYING"     
>  [6] "COPYRIGHTS"   "doc"          "etc"          "FAQ"          "library"     
> [11] "modules"      "NEWS"         "README"       "README.Rterm" "rw-FAQ"      
> [16] "THANKS"       "unins000.dat" "unins000.exe" "Y2K"         
> > 
> Any Idea ?
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timur.Elzhov@jinr.ru  Fri Aug 23 14:15:28 2002
From: Timur.Elzhov@jinr.ru (Timur.Elzhov@jinr.ru)
Date: Fri, 23 Aug 2002 15:15:28 +0200 (MET DST)
Subject: dev2eps() prints ticks with wrong length! (PR#1933)
Message-ID: <200208231315.PAA23916@pubhealth.ku.dk>

Hello R experts!

I've tried to make single plot, but with changed ticks length,
and then copy them to file by dev.copy2eps(). Here is the code:

   x11 ( , 5, 5)
   par (tcl = +5) 
   plot (0)        # that's ugly plot with great ticks
                   # on the graph viewport.  cool :)
   dev.copy2eps (file = "out.eps")

Hm.. I had a look at "out.ps" and wondered that ticks
look like as they would being set to there *default* value,
"tcl" = -0.5!  =-O

Ok, I tried then to make same thing by slightly different way:

    postscript (file = "out1.eps", onefile = FALSE)
    par (tcl = +5)
    plot (0)
    dev.off ()

Beautiful -- all the ticks have an appropriate length, tcl == +5!

Why?


-------------- == --------------
    R> version
    _
    platform i386-pc-linux-gnu
    arch     i386
    os       linux-gnu
    system   i386, linux-gnu
    status
    major    1
    minor    5.1

-------------- == --------------


With best regards,
Timur V. Elzhov



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 23 16:56:50 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 23 Aug 2002 11:56:50 -0400
Subject: [R] [ and setMethod conflict?
References: <763C275E6A1C2248AFD475237AD6135BE7CFA6@MSGBOS576NTS.fmr.com> <3D504E0E.84B79745@research.bell-labs.com>
Message-ID: <3D665B42.CA8F2E48@research.bell-labs.com>

The problem was in fact not protecting the argument list in certain
circumstances.  Should be fixed in the currently checked-in version.

John Chambers


John Chambers wrote:
> 
> Definitely something funny going on, but perhaps a little less sweeping
> than your comments suggest.
> 
> No explanation at the moment, but a couple of clues.
> 
> 1.  The problem doesn't seem to arise unless the data frame is large
> enough.  I parametrized the 5000 rows in your example and couldn't get
> the bizarre behavior until the number of rows was larger than 1000.
> 
> 2.  There is some reason to think that nested "[" expressions are
> related.  After rewriting your testFunc as follows, the random errors
> seemed to go away.
> 
> testFunc <- function(cur) {
>     ii <- order(cur[,1])
>   sorted <- cur[ii,]
>     ll <- !is.na(sorted[,1])
>    sorted[ll,]
>  }
> (the change is just to pull out the subset expressions that were
> arguments to other "[" expressions.)
> 
> I'm not an expert on R internals, but the combination of these might
> suggest garbage collection taking place in nested calls to the dispatch
> code for "[".
> 
> John Chambers
> 
> 
> "Bartz, Kevin" wrote:
> >
> > I noticed this oddity about [ and setMethod.
> >
> > First, I define testFunc, which sorts a data frame by the first column and
> > returns the entries that aren't NAs, and testIt, which runs testFunc
> > repeatedly on a random large data frame, each time saving the return into a
> > dummy placeholder (for demonstration's sake).
> >
> > > require(methods)
> > Loading required package: methods
> > [1] TRUE
> > > testFunc <- function(cur) {
> > +   sorted <- cur[order(cur[,1]),]
> > +   sorted[!is.na(sorted[,1]),]
> > + }
> > > testIt <- function(num)
> > +   for (i in 1:num) {
> > +     cat("iteration", i, "...\n")
> > +     dummy <- testFunc(as.data.frame(matrix(rnorm(5000 * 9),9)))
> > +   }
> >
> > Let's test out testIt.
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > iteration 3 ...
> > iteration 4 ...
> > iteration 5 ...
> > iteration 6 ...
> > iteration 7 ...
> > iteration 8 ...
> > iteration 9 ...
> > iteration 10 ...
> >
> > So far, no problems. Next, I define myClass.
> >
> > > setClass("myClass", representation(mySlot = "numeric"))
> > [1] "myClass"
> > > setMethod("[", signature(x = "myClass"),
> > +           function(x, i, j, drop) "[ for myClass")
> > [1] "["
> >
> > Again, everything is fine. I've expanded [ to handle objects of class
> > myClass. But when we attempt to use testIt now, problems emerge:
> >
> > > testIt(10)
> > iteration 1 ...
> > Error in "[.data.frame"(cur, order(cur[, 1]), ) :
> >         unused argument(s) (.Method ...)
> >
> > Maybe that was just a fluke. Trying again, we get:
> >
> > > testIt(10)
> > iteration 1 ...
> > iteration 2 ...
> > Error in sorted[, 1] : incorrect number of dimensions
> >
> > A different message every time, and the error seems no bug of mine (a
> > .Method argument? What is that?). In fact, testIt produces a seemingly
> > random response from R on each subsequent attempt--everything from
> > successful execution to similarly ambiguous errors to a process-killing "Bus
> > Error."
> >
> > All in all, it seems that once I've defined a new method for [ I can no
> > longer count on it to operate properly in any context.
> >
> > Is this the intended behavior? And if so, is there any way I can have one
> > class present that overloads [ and still use [ to reliably subset data
> > frames?
> >
> > Thanks,
> >
> > Kevin
> >
> > > R.version
> >          _
> > platform sparc-sun-solaris2.6
> > arch     sparc
> > os       solaris2.6
> > system   sparc, solaris2.6
> > status
> > major    1
> > minor    5.1
> > year     2002
> > month    06
> > day      17
> > language R
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jyan@stat.wisc.edu  Fri Aug 23 17:40:01 2002
From: jyan@stat.wisc.edu (jyan@stat.wisc.edu)
Date: Fri, 23 Aug 2002 18:40:01 +0200 (MET DST)
Subject: try-error in batch and interactive mode (PR#1934)
Message-ID: <200208231640.SAA25105@pubhealth.ku.dk>

I have a tiny R script performing two tasks, the first one of which may
contain error.

mammon(12)% cat z.R
version
options(show.error.messages = FALSE)
try(b <- log("foo"))  ## task 1
1 + 2                 ## task 2

Running in batch mode from a solaries machine, the second task never got
started; see below:

mammon(13)% R BATCH --vanilla -q z.R
mammon(14)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 

The second task does start if run on a linux machine.

ludwig(22)% cat z.Rout
> invisible(options(echo = TRUE))
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R                
> options(show.error.messages = FALSE)
> try(b <- log("foo"))
> 1 + 2
[1] 3
> proc.time()
[1] 0.87 0.07 0.90 0.00 0.00
> 

The same code works well if pasted into an interactive R window on both
system, of course.

Jun Yan

Department of Statistics          Office: CSSC 4252
university of Wisconsin-Madison   Tel: (608)262-7478 
1210 W. Dayton St.                Email: jyan@stat.wisc.edu
Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sat Aug 24 11:42:06 2002
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Sat, 24 Aug 2002 12:42:06 +0200 (MET DST)
Subject: Inconsistent use of Perl? (PR#1937)
Message-ID: <200208241042.MAA26903@pubhealth.ku.dk>

Dear all

yesterday I got around to install R-1.5.1 on my machine at home which,
admittedly, is running a very old version of RedHat Linux.  I noticed
two things:

1) My pdflatex version is too old to produce the pdf version of the
   manuals.  `./configure' checks whether a recent version of makeinfo
is installed and tells you whether you can produce the info version or
not.  (I was told I couldn't, another reason to upgrate the machine.)
But during configuration there don't seem to be any check whether the
pdflatex is recent enough.  You might want to consider to add such a
check.

2) `./configure' checks whether Perl 5.004 (or later) is installed.
   On my machine Perl 5.00405 is installed and the installation went
ahead without problems.  However, when I then tried to install
R-1.5.1-recommended by issuing the command
        R CMD INSTALL *.tar.gz
in the appropriate directory, I received complaints about my Perl
version.  Essentially, R wanted all of a sudden Perl 5.005 (or
later).  An edited version of what I saw on my terminal is included
below.  I got the same kind of error message when I used from within R
`update.packages' and `install.packages' to update/install some
packages that are not in R-1.5.1-recommended.
As far as I can tell, the installation of the packages went ahead fine
except that the `TITLE' file for each of these packages is empty.
Hence, I guess the error message is produced when R tries to generate
and install the `TITLE' file.  However, the `TITLE' files for the
packages in the base distribution are fine.  This leaves me wondering
why during the base installation Perl 5.004 (or later) is good enough
for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
later) is required.   

Cheers,

        Berwin


----- Edited output from attempt to install R-1.5.1-recommended -----
absentia:/opt/R/R-1.5.1-recommended$ R CMD INSTALL *.tar.gz
Contains: MASS class nnet spatial
* Installing *source* package 'KernSmooth' ...
** libs
[...]
gcc -shared  -o KernSmooth.so blkest.o cp.o dgedi.o dgefa.o dgesl.o linbin.o linbin2D.o locpoly.o rlbin.o sdiag.o sstdiag.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `KernSmooth'
     Formats: text html latex example 
* DONE (KernSmooth)

* Installing *source* package 'MASS' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c MASS.c -o MASS.o
gcc -shared  -o MASS.so MASS.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `MASS'
     Formats: text html latex example 
  write.matrix                                              example
* DONE (MASS)

* Installing *source* package 'class' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c class.c -o class.o
gcc -shared  -o class.so class.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `class'
     Formats: text html latex example 
* DONE (class)

* Installing *source* package 'nnet' ...
** libs
gcc -I/usr/local/lib/R/include  -I/usr/local/include -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c nnet.c -o nnet.o
gcc -shared  -o nnet.so nnet.o    
** R
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `nnet'
     Formats: text html latex example 
* DONE (nnet)

* Installing *source* package 'spatial' ...
** libs
[...]
gcc -shared  -o spatial.so init.o krc.o pps.o    
** R
** data
** inst
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
 >>> Building/Updating help pages for package `spatial'
     Formats: text html latex example 
* DONE (spatial)

* Installing *source* package 'boot' ...
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]
* DONE (boot)

* Installing *source* package 'cluster' ...
** libs
[...]
gcc -shared  -o cluster.so clara.o daisy.o fanny.o meet.o mona.o pam.o spannel.o twins.o   -L/usr/local/lib -L/usr/local/share/icon.9.3.1/ilib -L/usr/local/lib/gcc-lib/i686-pc-linux-gnu/2.95.2 -L/usr/local/i686-pc-linux-gnu/lib -lreadline -ldl -lncurses -lg2c -lm 
** R
** data
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


* Installing *source* package 'foreign' ...
[...]
** libs
[...]
gcc -shared  -o foreign.so SASxport.o avl.o file-handle.o format.o minitab.o pfm-read.o sfm-read.o spss.o stataread.o    
** R
Perl 5.005 required--this is only version 5.00405, stopped at /usr/local/lib/R/share/perl/maketitle.pl line 4.
** help
[...]


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 24 21:43:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 24 Aug 2002 21:43:21 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <200208241042.MAA26903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>

On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:

> Dear all
>
> yesterday I got around to install R-1.5.1 on my machine at home which,
> admittedly, is running a very old version of RedHat Linux.  I noticed
> two things:
>
> 1) My pdflatex version is too old to produce the pdf version of the
>    manuals.  `./configure' checks whether a recent version of makeinfo
> is installed and tells you whether you can produce the info version or
> not.  (I was told I couldn't, another reason to upgrate the machine.)
> But during configuration there don't seem to be any check whether the
> pdflatex is recent enough.  You might want to consider to add such a
> check.

Well, we would need to know which version failed.  What is yours?

doc/manuals/README mentions pdftex-0.14d.  *ANY* version older than 1.00
is unreleased and experimental, but versions as old as -0.13d have worked.

> 2) `./configure' checks whether Perl 5.004 (or later) is installed.
>    On my machine Perl 5.00405 is installed and the installation went
> ahead without problems.  However, when I then tried to install
> R-1.5.1-recommended by issuing the command
>         R CMD INSTALL *.tar.gz
> in the appropriate directory, I received complaints about my Perl
> version.  Essentially, R wanted all of a sudden Perl 5.005 (or
> later).  An edited version of what I saw on my terminal is included
> below.  I got the same kind of error message when I used from within R
> `update.packages' and `install.packages' to update/install some
> packages that are not in R-1.5.1-recommended.
> As far as I can tell, the installation of the packages went ahead fine
> except that the `TITLE' file for each of these packages is empty.
> Hence, I guess the error message is produced when R tries to generate
> and install the `TITLE' file.  However, the `TITLE' files for the
> packages in the base distribution are fine.  This leaves me wondering
> why during the base installation Perl 5.004 (or later) is good enough
> for producing the `TITLE' file but for `R CMD INSTALL' Perl 5.005 (or
> later) is required.

That is correct.  Most things require 5.004, a few require 5.005.
Why is that a bug?

The issue is the use of the Text::Wrap module in share/perl/R/Utils.pm,
where 5.004_05 was broken (we discovered).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Sun Aug 25 09:33:57 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Sun, 25 Aug 2002 10:33:57 +0200 (MET DST)
Subject: title(list) shows strange chars (PR#1939)
Message-ID: <200208250833.KAA28402@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1, 1.5.0
OS: linux (RH7.1, RH6.2)
Submission from: (NULL) (192.38.43.138)


try
plot(1:2, main=list("title"))
You see the strange chars in title instead of "title" or error message...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:20:39 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 25 Aug 2002 10:20:39 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208251007420.16988-100000@gannet.stats>

Note that

R --restore --save --no-readline --gui=none -q < z.R > z.Rout

works for me (in tcsh or sh).  That should give you a workaround.

On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 10:49:01 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 10:49:01 +0100 (BST)
Subject: try-error in batch and interactive mode (PR#1934)
In-Reply-To: <200208231640.SAA25105@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0208251044560.16589-100000@auk.stats>

This is caused by the call to

fflush(stdin)

in Rstd_FlushConsole() in src/unix/sys-std.c.  I've commented on that
before: fflush on an input stream is not defined on the Solaris help page,
and it appears to flush piped input.

I've removed the call.  If anyone knows what it was intended to accomplish,
please find another way to do it.


On Fri, 23 Aug 2002 jyan@stat.wisc.edu wrote:

> I have a tiny R script performing two tasks, the first one of which may
> contain error.
>
> mammon(12)% cat z.R
> version
> options(show.error.messages = FALSE)
> try(b <- log("foo"))  ## task 1
> 1 + 2                 ## task 2
>
> Running in batch mode from a solaries machine, the second task never got
> started; see below:
>
> mammon(13)% R BATCH --vanilla -q z.R
> mammon(14)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform sparc-sun-solaris2.8
> arch     sparc
> os       solaris2.8
> system   sparc, solaris2.8
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> >
>
> The second task does start if run on a linux machine.
>
> ludwig(22)% cat z.Rout
> > invisible(options(echo = TRUE))
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    5.1
> year     2002
> month    06
> day      17
> language R
> > options(show.error.messages = FALSE)
> > try(b <- log("foo"))
> > 1 + 2
> [1] 3
> > proc.time()
> [1] 0.87 0.07 0.90 0.00 0.00
> >
>
> The same code works well if pasted into an interactive R window on both
> system, of course.
>
> Jun Yan
>
> Department of Statistics          Office: CSSC 4252
> university of Wisconsin-Madison   Tel: (608)262-7478
> 1210 W. Dayton St.                Email: jyan@stat.wisc.edu
> Madison, WI 53706                 URL: http://www.stat.wisc.edu/~jyan
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Sun Aug 25 12:12:46 2002
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Sun, 25 Aug 2002 19:12:46 +0800 (WST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
References: <200208241042.MAA26903@pubhealth.ku.dk>
 <Pine.GSO.4.44.0208242134310.27087-100000@auk.stats>
Message-ID: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
  >> [...]  But during configuration there don't seem to be any check
  >> whether the pdflatex is recent enough.  You might want to
  >> consider to add such a check.

  BDR> Well, we would need to know which version failed.  What is
  BDR> yours?
0.12h it seems.  (See below).  The hyperref package coming with that
installation is also too old, it seems....

  >> [...]  This leaves me wondering why during the base installation
  >> Perl 5.004 (or later) is good enough for producing the `TITLE'
  >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.

  BDR> That is correct.  Most things require 5.004, a few require
  BDR> 5.005.  Why is that a bug?
Did I claim it was a bug? :) Anyway, from the FAQ:

    If a command you are familiar with causes an R error message in a
    case where its usual definition ought to be reasonable, it is
    probably a bug.

After installing R and knowing that `./configure' checks which Perl
version I have, I expect to have a system that works fine and doesn't
all of a sudden tell me that my Perl version is too old and cannot
perform a `complete' install of addtional packages.  If part of R
needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can
argue that it wasn't an error message but just a warning, or that I am
not familiar with the command (fair enough too :-) ), but the FAQ
continues:

   If you aren't familiar with the command, or don't know for certain
   how the command is supposed to work, then it might actually be
   working right. Rather than jumping to conclusions, show the problem
   to someone who knows for certain.

And I did exactly the latter, labeling my report `inconsistent use of
Perl'.  Rest assured, if I think something is a bug, then I will say
so in the subject line. :)

Cheers,

        Berwin

----- Attempt of "make pdf" -----
absentia:/opt/R/R-1.5.1$ make pdf
make[1]: Entering directory `/opt/R/R-1.5.1/doc'
make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
PDF/LaTeX documentation: reference index ...
This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
(pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
LaTeX2e <1998/06/01>
Babel <v3.6j> and hyphenation patterns for american, french, german,
italian, n
ohyphenation, loaded.

(refman.tex (/usr/share/texmf/tex/latex/base/book.cls
Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
(/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
(/usr/share/texmf/tex/latex/base/ifthen.sty)
(/usr/share/texmf/tex/latex/tools/longtable.sty)
(/usr/share/texmf/tex/latex/tools/bm.sty)
(/usr/share/texmf/tex/latex/base/alltt.sty)
(/usr/share/texmf/tex/latex/tools/verbatim.sty)
(/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
(/usr/share/texmf/tex/latex/graphics/color.sty
(/usr/share/texmf/tex/latex/config/color.cfg)
(/usr/share/texmf/tex/latex/graphics/pdftex.def))
(/usr/share/texmf/tex/latex/hyperref/hyperref.sty
(/usr/share/texmf/tex/latex/graphics/keyval.sty)
(/usr/share/texmf/tex/latex/hyperref/nameref.sty)
(../../share/texmf/hyperref.cfg

! Package keyval Error: linktocpage undefined.

See the keyval package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.12 }
      
) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
(/usr/share/texmf/tex/latex/hyperref/hpdftex.def
(/usr/share/texmf/tex/latex/psnfss/pifont.sty
(/usr/share/texmf/tex/latex/psnfss/upzd.fd)
(/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
(/usr/share/texmf/tex/latex/base/makeidx.sty)
Writing index file refman.idx
No file refman.aux.
(/usr/share/texmf/tex/context/base/supp-pdf.tex
(/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
loading : Context Support Macros / Missing
)
loading : Context Support Macros / PDF
) (refman.out) (refman.out)
Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
[]\OT1/cmr/m/n/10 null null null
        
                                                                               
                                                                               
                                                                               
                                                                     
[1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
Warning (ext1): destination with the same identifier already exists!
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1]
Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] (base-pkg.tex
Chapter 1.

Underfull \hbox (badness 10000) has occurred while \output is active
[]\OT1/cmr/m/n/10 null null null
[1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
[17]
[18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
[32]
[33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
[47]
[48] [49] [50] [51]
Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
[]\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
([][]\OT1/cmtt/m/n/10 par[]
[][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
plot.window[][][](
)[][]\OT1/cmr/m/n/10 ,
[52] [53] [54] [55] [56] [57] [58]
Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
[]\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
Ac-cu-rate
 Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
[59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
 []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
horizontal = 
FALSE, add = FALSE,[] 
[71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
[85]
[86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
[100]
[101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
Underfull \vbox (badness 10000) has occurred while \output is active
[111]
[112]
Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
[]\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
be drawn, 
see
[113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
[119]
[120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
[131]
[132] [133]
Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
[][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
[][]\OT1/cmt
t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
Math.data.f
rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
\OT1/cmr/m/n/1
0 meth-ods for
[134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
[145]
[146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
[157]
Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
[]\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
\OT1/cmr/m/n/10 i
s to pro-duce and print a postscript copy, if
[158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
[169]
[170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
[181]
[182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
[]\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
giv-ing \OT1/cm
tt/m/n/10 where \OT1/cmr/m/n/10 as
[192] [193] [194] [195]
! TeX capacity exceeded, sorry [input stack size=300].
\@inmathwarn ...latex@warning {Command \protect #1
                                                   invalid in math
mode}\fi 
l.10696 \alias{\$}{Extract}
                           
!  ==> Fatal error occurred, the output PDF file not finished!
Transcript written on refman.log.
make[2]: *** [refman.pdf] Error 1
make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
make[1]: *** [pdf] Error 2
make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
make: [pdf] Error 2 (ignored)
absentia:/opt/R/R-1.5.1$ 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug 25 12:41:30 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 25 Aug 2002 12:41:30 +0100 (BST)
Subject: Inconsistent use of Perl? (PR#1937)
In-Reply-To: <15720.48046.174752.611550@bossiaea.maths.uwa.edu.au>
Message-ID: <Pine.GSO.4.44.0208251239290.16718-100000@auk.stats>

On Sun, 25 Aug 2002, Berwin Turlach wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
>
>   BDR> On Sat, 24 Aug 2002 berwin@maths.uwa.edu.au wrote:
>   >> [...]  But during configuration there don't seem to be any check
>   >> whether the pdflatex is recent enough.  You might want to
>   >> consider to add such a check.
>
>   BDR> Well, we would need to know which version failed.  What is
>   BDR> yours?
> 0.12h it seems.  (See below).  The hyperref package coming with that
> installation is also too old, it seems....
>
>   >> [...]  This leaves me wondering why during the base installation
>   >> Perl 5.004 (or later) is good enough for producing the `TITLE'
>   >> file but for `R CMD INSTALL' Perl 5.005 (or later) is required.
>
>   BDR> That is correct.  Most things require 5.004, a few require
>   BDR> 5.005.  Why is that a bug?
> Did I claim it was a bug? :) Anyway, from the FAQ:
>
>     If a command you are familiar with causes an R error message in a
>     case where its usual definition ought to be reasonable, it is
>     probably a bug.
>
> After installing R and knowing that `./configure' checks which Perl
> version I have, I expect to have a system that works fine and doesn't
> all of a sudden tell me that my Perl version is too old and cannot
> perform a `complete' install of addtional packages.  If part of R
> needs Perl 5.005, why don't you check for Perl 5.005?  O.k., you can

Because a few vociferous users only have 5.004.  I think we do now intend
to require 5.005 in configure.

> argue that it wasn't an error message but just a warning, or that I am
> not familiar with the command (fair enough too :-) ), but the FAQ
> continues:
>
>    If you aren't familiar with the command, or don't know for certain
>    how the command is supposed to work, then it might actually be
>    working right. Rather than jumping to conclusions, show the problem
>    to someone who knows for certain.
>
> And I did exactly the latter, labeling my report `inconsistent use of
> Perl'.  Rest assured, if I think something is a bug, then I will say
> so in the subject line. :)

Please send to R-devel not R-bugs, though.  If you submit to R-bugs, it
goes on the BUGS list and is claimed as a bug.

> Cheers,
>
>         Berwin
>
> ----- Attempt of "make pdf" -----
> absentia:/opt/R/R-1.5.1$ make pdf
> make[1]: Entering directory `/opt/R/R-1.5.1/doc'
> make[2]: Entering directory `/opt/R/R-1.5.1/doc/manual'
> PDF/LaTeX documentation: reference index ...
> This is pdfTeX, Version 3.14159-0.12h (Web2C 7.2)
> (pdftex.cfg)<acrobat.map><lw35extra_urw.map><charter.map><omega.map><utopia.map
> ><xypic.map><hoekwater.map><bsr.map><bakomaextra.map>
> LaTeX2e <1998/06/01>
> Babel <v3.6j> and hyphenation patterns for american, french, german,
> italian, n
> ohyphenation, loaded.
>
> (refman.tex (/usr/share/texmf/tex/latex/base/book.cls
> Document Class: book 1998/05/05 v1.3y Standard LaTeX document class
> (/usr/share/texmf/tex/latex/base/bk10.clo)) (../../share/texmf/Rd.sty
> (/usr/share/texmf/tex/latex/base/ifthen.sty)
> (/usr/share/texmf/tex/latex/tools/longtable.sty)
> (/usr/share/texmf/tex/latex/tools/bm.sty)
> (/usr/share/texmf/tex/latex/base/alltt.sty)
> (/usr/share/texmf/tex/latex/tools/verbatim.sty)
> (/usr/share/texmf/tex/latex/misc/url.sty) NOT loading ae
> (/usr/share/texmf/tex/latex/graphics/color.sty
> (/usr/share/texmf/tex/latex/config/color.cfg)
> (/usr/share/texmf/tex/latex/graphics/pdftex.def))
> (/usr/share/texmf/tex/latex/hyperref/hyperref.sty
> (/usr/share/texmf/tex/latex/graphics/keyval.sty)
> (/usr/share/texmf/tex/latex/hyperref/nameref.sty)
> (../../share/texmf/hyperref.cfg
>
> ! Package keyval Error: linktocpage undefined.
>
> See the keyval package documentation for explanation.
> Type  H <return>  for immediate help.
>  ...
>
> l.12 }
>
> ) (/usr/share/texmf/tex/latex/hyperref/backref.sty))
> (/usr/share/texmf/tex/latex/hyperref/hpdftex.def
> (/usr/share/texmf/tex/latex/psnfss/pifont.sty
> (/usr/share/texmf/tex/latex/psnfss/upzd.fd)
> (/usr/share/texmf/tex/latex/psnfss/upsy.fd))))
> (/usr/share/texmf/tex/latex/base/makeidx.sty)
> Writing index file refman.idx
> No file refman.aux.
> (/usr/share/texmf/tex/context/base/supp-pdf.tex
> (/usr/share/texmf/tex/context/ppchtex/supp-mis.tex
> loading : Context Support Macros / Missing
> )
> loading : Context Support Macros / PDF
> ) (refman.out) (refman.out)
> Overfull \hbox (437.54385pt too wide) in paragraph at lines 9--11
> []\OT1/cmr/m/n/10 null null null
>
>
>
>
>
> [1] [2] (version.tex) (/usr/share/texmf/tex/latex/base/omscmr.fd)
> Warning (ext1): destination with the same identifier already exists!
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1]
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] (base-pkg.tex
> Chapter 1.
>
> Underfull \hbox (badness 10000) has occurred while \output is active
> []\OT1/cmr/m/n/10 null null null
> [1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16]
> [17]
> [18] [19] [20] [21] [22] [23] [24] [25] [26] [27] [28] [29] [30] [31]
> [32]
> [33] [34] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46]
> [47]
> [48] [49] [50] [51]
> Underfull \hbox (badness 1789) in paragraph at lines 2686--2689
> []\OT1/cmr/m/n/10 further graph-i-cal pa-ram-e-ters
> ([][]\OT1/cmtt/m/n/10 par[]
> [][][][]\OT1/cmr/m/n/10 ) are passed to [][]\OT1/cmtt/m/n/10
> plot.window[][][](
> )[][]\OT1/cmr/m/n/10 ,
> [52] [53] [54] [55] [56] [57] [58]
> Underfull \hbox (badness 1292) in paragraph at lines 3102--3104
> []\OT1/cmr/m/n/10 Catherine Loader (2000). \OT1/cmr/m/it/10 Fast and
> Ac-cu-rate
>  Com-pu-ta-tion of Bi-no-mial Prob-a-bil-i-
> [59] [60] [61] [62] [63] [64] [65] [66] [67] [68] [69] [70]
> Overfull \hbox (14.27731pt too wide) in paragraph at lines 3707--3707
>  []    \OT1/cmtt/m/n/10 log = "", pars = NULL, frame.plot = axes,
> horizontal =
> FALSE, add = FALSE,[]
> [71] [72] [73] [74] [75] [76] [77] [78] [79] [80] [81] [82] [83] [84]
> [85]
> [86] [87] [88] [89] [90] [91] [92] [93] [94] [95] [96] [97] [98] [99]
> [100]
> [101] [102] [103] [104] [105] [106] [107] [108] [109] [110]
> Underfull \vbox (badness 10000) has occurred while \output is active
> [111]
> [112]
> Underfull \hbox (badness 2326) in paragraph at lines 5982--5984
> []\OT1/cmr/m/n/10 logical in-di-cat-ing whether axes or a box should
> be drawn,
> see
> [113] [114] [115] [116] (../../share/texmf/omscmtt.fd) [117] [118]
> [119]
> [120] [121] [122] [123] [124] [125] [126] [127] [128] [129] [130]
> [131]
> [132] [133]
> Underfull \hbox (badness 1755) in paragraph at lines 7135--7139
> [][][]\OT1/cmtt/m/n/10 print.data.frame[][][][][]\OT1/cmr/m/n/10 ,
> [][]\OT1/cmt
> t/m/n/10 read.table[][][][][]\OT1/cmr/m/n/10 , [][]\OT1/cmtt/m/n/10
> Math.data.f
> rame[][][][][] \OT1/cmr/m/n/10 etc, about \OT1/cmr/m/it/10 Group
> \OT1/cmr/m/n/1
> 0 meth-ods for
> [134] [135] [136] [137] [138] [139] [140] [141] [142] [143] [144]
> [145]
> [146] [147] [148] [149] [150] [151] [152] [153] [154] [155] [156]
> [157]
> Underfull \hbox (badness 7116) in paragraph at lines 8575--8577
> []\OT1/cmr/m/n/10 The de-fault for \OT1/cmtt/m/n/10 dev.print
> \OT1/cmr/m/n/10 i
> s to pro-duce and print a postscript copy, if
> [158] [159] [160] [161] [162] [163] [164] [165] [166] [167] [168]
> [169]
> [170] [171] [172] [173] [174] [175] [176] [177] [178] [179] [180]
> [181]
> [182] [183] [184] [185] [186] [187] [188] [189] [190] [191]
> Underfull \hbox (badness 4254) in paragraph at lines 10463--10465
> []\OT1/cmr/m/n/10 a frame in the call-ing list. Equiv-a-lent to
> giv-ing \OT1/cm
> tt/m/n/10 where \OT1/cmr/m/n/10 as
> [192] [193] [194] [195]
> ! TeX capacity exceeded, sorry [input stack size=300].
> \@inmathwarn ...latex@warning {Command \protect #1
>                                                    invalid in math
> mode}\fi
> l.10696 \alias{\$}{Extract}
>
> !  ==> Fatal error occurred, the output PDF file not finished!
> Transcript written on refman.log.
> make[2]: *** [refman.pdf] Error 1
> make[2]: Leaving directory `/opt/R/R-1.5.1/doc/manual'
> make[1]: *** [pdf] Error 2
> make[1]: Leaving directory `/opt/R/R-1.5.1/doc'
> make: [pdf] Error 2 (ignored)
> absentia:/opt/R/R-1.5.1$
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Sun Aug 25 13:50:41 2002
From: stvjc@channing.harvard.edu (stvjc@channing.harvard.edu)
Date: Sun, 25 Aug 2002 14:50:41 +0200 (MET DST)
Subject: library(file) segfaults on solaris (PR#1942)
Message-ID: <200208251250.OAA28836@pubhealth.ku.dk>


luke's demonstration of external references, at

www.stat.umn.edu/~luke/file_0.0-0.tar.gz

(accessible through the developer page) causes
a segfault on solaris 2.8 as soon as library(file)
is attempted.  it runs fine on RH 7.2.  the segfault
on solaris occured for R 1.5.1 and 1.6 (8-25 image)

a quick poke at gdb (which i can only get running
for R 1.6, though this bug report is for 1.5.1) 
shows the failure to be at eval.c:351
SET_NAMED(tmp, 2)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = Patched
 major = 1
 minor = 5.1
 year = 2002
 month = 08
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sun Aug 25 16:26:42 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sun, 25 Aug 2002 10:26:42 -0500
Subject: library(file) segfaults on solaris (PR#1942)
In-Reply-To: <200208251250.OAA28836@pubhealth.ku.dk>; from stvjc@channing.harvard.edu on Sun, Aug 25, 2002 at 02:50:41PM +0200
References: <200208251250.OAA28836@pubhealth.ku.dk>
Message-ID: <20020825102642.A8348@nokomis.stat.umn.edu>

It's a bug in my init routine -- uses .Call but the C code did not
return a value.  Fixed in file_0.0-1.tar.gz.

luke

On Sun, Aug 25, 2002 at 02:50:41PM +0200, stvjc@channing.harvard.edu wrote:
> 
> luke's demonstration of external references, at
> 
> www.stat.umn.edu/~luke/file_0.0-0.tar.gz
> 
> (accessible through the developer page) causes
> a segfault on solaris 2.8 as soon as library(file)
> is attempted.  it runs fine on RH 7.2.  the segfault
> on solaris occured for R 1.5.1 and 1.6 (8-25 image)
> 
> a quick poke at gdb (which i can only get running
> for R 1.6, though this bug report is for 1.5.1) 
> shows the failure to be at eval.c:351
> SET_NAMED(tmp, 2)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = sparc-sun-solaris2.8
>  arch = sparc
>  os = solaris2.8
>  system = sparc, solaris2.8
>  status = Patched
>  major = 1
>  minor = 5.1
>  year = 2002
>  month = 08
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a311876@fmr.com  Mon Aug 26 16:30:21 2002
From: a311876@fmr.com (a311876@fmr.com)
Date: Mon, 26 Aug 2002 17:30:21 +0200 (MET DST)
Subject: Rprof and setMethod conflict (PR#1949)
Message-ID: <200208261530.RAA07795@pubhealth.ku.dk>

Full_Name: Kevin C. Bartz
Version: 1.5.1
OS: Solaris 2.6
Submission from: (NULL) (192.223.226.5)


A while ago, I noticed this oddity about R profiling and setMethod.

First, I "test out" Rprof.

> require(methods)
Loading required package: methods 
[1] TRUE
> 
> Rprof("test.out")
> data.frame("a")
  X.a.
1    a
> Rprof(NULL)

So far, so good. Next, I define myClass.

> setClass("myClass", representation(mySlot = "numeric"))
[1] "myClass"
> setMethod("as.data.frame", signature(x = "myClass"),
+           function(x, row.names, optional) { "as.data.frame for myClass" })
Creating a new generic function for "as.data.frame" on 
element 1 of the search path 
[1] "as.data.frame"

Again, everything is fine. I've expanded as.data.frame to accept objects of
class myClass. Now, let's try the standard data.frame("a") again:

> data.frame("a")
  X.a.
1    a

Still, no problems. But after I start R profiling, problems arise:

> Rprof("test2.out")
> data.frame("a")
Error in standardGeneric("as.data.frame") : 
	UseMethod used in an inappropriate fashion

It seems that I can no longer use the standard method for as.data.frame in an R
profiling sequence once I've defined a new method for it. However, I CAN use the
standard as.data.frame method when I'm NOT R profiling.

I know I've brought this up before, but I thought it was appropriate also to log
this bug in a more formal manner.

Thanks,

Kevin

> R.version
         _                   
platform sparc-sun-solaris2.6
arch     sparc               
os       solaris2.6          
system   sparc, solaris2.6   
status                       
major    1                   
minor    5.1                 
year     2002                
month    06                  
day      17                  
language R                   


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 26 22:16:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 14:16:26 -0700 (PDT)
Subject: Rprof and setMethod conflict (PR#1949)
In-Reply-To: <200208261530.RAA07795@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208261415570.65552-100000@homer01.u.washington.edu>

On Mon, 26 Aug 2002 a311876@fmr.com wrote:

> Full_Name: Kevin C. Bartz
> Version: 1.5.1
> OS: Solaris 2.6
> Submission from: (NULL) (192.223.226.5)
>
>
> A while ago, I noticed this oddity about R profiling and setMethod.
>

Appears to be fixed in r-devel

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rsingle@zoo.uvm.edu  Tue Aug 27 01:21:29 2002
From: rsingle@zoo.uvm.edu (rsingle@zoo.uvm.edu)
Date: Tue, 27 Aug 2002 02:21:29 +0200 (MET DST)
Subject: strange result from x[x!="NA"] (PR#1952)
Message-ID: <200208270021.CAA09251@pubhealth.ku.dk>

Full_Name: Richard Single
Version: 1.5.1
OS: Windows
Submission from: (NULL) (132.198.176.82)


In the latest Windows version the following syntax behaves
differently than it did in version 1.4.0: x[x!="NA"] 
The results under R 1.4.0 agree with S.

--Rich

R 1.4.0 
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]  TRUE FALSE FALSE  TRUE
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


R 1.5.1
> x <- c(NA, 2, 3, NA)
> x == "NA"
 [1]    NA FALSE FALSE    NA
> is.na(x)
 [1]  TRUE FALSE FALSE  TRUE


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 27 05:02:56 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 26 Aug 2002 21:02:56 -0700 (PDT)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0208262057200.11546-100000@homer20.u.washington.edu>

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.

Yes.  It's a deliberate change in 1.5.0, documented in both the NEWS file
and the guide to updating to 1.5.  The string "NA" is not special any
more, you need as.character(NA) to make a missing string, and you need to
use is.na() to test for NAs, as was always recommended.


	-thomas


> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
- NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 27 07:51:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 27 Aug 2002 07:51:56 +0100 (BST)
Subject: strange result from x[x!="NA"] (PR#1952)
In-Reply-To: <200208270021.CAA09251@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208270749550.31357-100000@gannet.stats>

This is correct: see the NEWS file.

Working as documented is not a bug.

On Tue, 27 Aug 2002 rsingle@zoo.uvm.edu wrote:

> Full_Name: Richard Single
> Version: 1.5.1
> OS: Windows
> Submission from: (NULL) (132.198.176.82)
>
>
> In the latest Windows version the following syntax behaves
> differently than it did in version 1.4.0: x[x!="NA"]
> The results under R 1.4.0 agree with S.
>
> --Rich
>
> R 1.4.0
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]  TRUE FALSE FALSE  TRUE
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> R 1.5.1
> > x <- c(NA, 2, 3, NA)
> > x == "NA"
>  [1]    NA FALSE FALSE    NA
> > is.na(x)
>  [1]  TRUE FALSE FALSE  TRUE
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Tue Aug 27 13:20:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Tue, 27 Aug 2002 14:20:55 +0200 (MET DST)
Subject: Symbolic differentiation ("D","deriv", etc.) (PR#1928)
Message-ID: <200208271220.OAA15599@pubhealth.ku.dk>

On Thu, 22 Aug 2002 14:45:47 +0200 (MET DST), you wrote:

>I apparently found an error in how "deriv" puts a derivative to the screen
>(though the internal representation is correct).  Here's what I was doing for a
>class example:
>
>> lnlk<-expression(15*log(p)+11*log(1-p))
>> p<-15/26
>> D(D(lnlk,"p"),"p")
>-15 * (1/p^2) + 11 * (1/(1 - p)^2)

This is now fixed in r-devel (to become 1.6.0):

> D(D(lnlk,"p"),"p")
-(15 * (1/p^2) + 11 * (1/(1 - p)^2))

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Tue Aug 27 22:23:10 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 28 Aug 2002 09:23:10 +1200
Subject: graphics changes
Message-ID: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>

Hi

I have committed some changes to R's graphics code which means that the
current version of the grid package on CRAN (0.6-1) will NOT
install/run on the development version of R.

I have submitted to CRAN a new version of grid which does install/run,
but this may not be available immediately.  In the meantime, the new
grid version is available at
http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:24:02 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:24:02 +0200
Subject: Rnews 2002/3
Message-ID: <15724.31378.384122.787920@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/3 issue of the R
Newsletter.  For more information see

      http://CRAN.R-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in 'Writing Articles for R News'
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 Oct 15, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Aug 28 08:29:27 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 28 Aug 2002 09:29:27 +0200
Subject: graphics changes
In-Reply-To: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
References: <3D6BEDBE.FDE675F1@stat.auckland.ac.nz>
Message-ID: <15724.31703.400417.261503@mithrandir.hornik.net>

>>>>> Paul Murrell writes:

> Hi
> I have committed some changes to R's graphics code which means that the
> current version of the grid package on CRAN (0.6-1) will NOT
> install/run on the development version of R.

> I have submitted to CRAN a new version of grid which does install/run,
> but this may not be available immediately.  In the meantime, the new
> grid version is available at
> http://www.stat.auckland.ac.nz/~paul/grid/grid_0.7.tar.gz

In CRAN's 1.6.0/Recommended now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 12:59:54 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 13:59:54 +0200 (MET DST)
Subject: ENQUIRY (PR#1955)
Message-ID: <200208281159.NAA25641@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:01:39 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:01:39 +0200 (MET DST)
Subject: ENQUIRY (PR#1956)
Message-ID: <200208281201.OAA25697@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:16:37 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:16:37 +0200 (MET DST)
Subject: ENQUIRY (PR#1957)
Message-ID: <200208281216.OAA25951@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From melvinjohnee@madrid.com  Wed Aug 28 13:19:11 2002
From: melvinjohnee@madrid.com (melvinjohnee@madrid.com)
Date: Wed, 28 Aug 2002 14:19:11 +0200 (MET DST)
Subject: ENQUIRY (PR#1958)
Message-ID: <200208281219.OAA25995@pubhealth.ku.dk>

I have interest of investing in your country as such I would like to make contact with you for assistance as soon as I am able to transfer my fund for this investment, which is already with a security company in Europe.

You will assist me in collecting the funds from the security company as I can not travel out of my country now. I retired as a chairman of my local council and do not want to recontest election. Please if you would assist me, do reply this mail.Enclosing your telephone/fax numbers.

Thanks,

Yours sincerely,

Melvin John



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From otoomet@econ.dk  Wed Aug 28 13:57:03 2002
From: otoomet@econ.dk (otoomet@econ.dk)
Date: Wed, 28 Aug 2002 14:57:03 +0200 (MET DST)
Subject: dev.print + impossible filename -> break (PR#1959)
Message-ID: <200208281257.OAA26697@pubhealth.ku.dk>

Full_Name: Ott Toomet
Version: 1.5.1
OS: Linux (RH 7.1)
Submission from: (NULL) (192.38.43.138)


Hi,

Try to give an impossible file name (command to pipe through) for dev.print:

> plot(1:4)
> dev.print(file="|llllll")

I got the response

sh: llllll: command not found

Process R broken pipe at Wed Aug 28 14:42:27 2002

After which R was killed (or at least vanished from the process list).

Best,

Ott

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:08:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 28 Aug 2002 14:08:37 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <200208281257.OAA26697@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>

Here's the nub.

> postscript(file="|llllll")
> sh: llllll: command not found

> dev.off()
Broken pipe

and it's related to how popen/pclose are implemented.  The help page
does say errors are hard to detect, but we can do a bit better than this.

On Wed, 28 Aug 2002 otoomet@econ.dk wrote:

> Full_Name: Ott Toomet
> Version: 1.5.1
> OS: Linux (RH 7.1)
> Submission from: (NULL) (192.38.43.138)
>
>
> Hi,
>
> Try to give an impossible file name (command to pipe through) for dev.print:
>
> > plot(1:4)
> > dev.print(file="|llllll")
>
> I got the response
>
> sh: llllll: command not found
>
> Process R broken pipe at Wed Aug 28 14:42:27 2002
>
> After which R was killed (or at least vanished from the process list).
>
> Best,
>
> Ott
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Aug 28 14:25:23 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 28 Aug 2002 09:25:23 -0400
Subject: Fixes/additions to methods package
Message-ID: <3D6CCF43.8D93DCD@research.bell-labs.com>

Some changes committed today to the r-devel (1.6.0) version of the
methods package:

1. The function setOldClass has been added as per the green book, p.
450.  The point in this case is not conversion as in the green book so
much as allowing old-style classes to be included in signatures given to
setMethod.

This worked before (with a warning), but old-style inheritance couldn't
be picked up.  Using
  setOldClass(c("chron", "times"))
should let "times" be included in signatures with the method selected
for an object of class "chron".

2. Some heuristics have been added to warn about what appear to be
mistakes in writing generic functions (e.g., wrong name, no call to
standardGeneric).  The consequences of such errrors can be obscure.

As with all heuristics, possibily warnings will occur when not
appropriate.  Let me know.

3. The function promptMethods() has been revised to generate aliases for
individual methods, according to a proposed convention:
  setMethod("f", c("character", "numeric"), .....)
would correspond to an entry in the documentation file of
  \alias{f,character,numeric-method}
(The help function doesn't yet know about this specifically.)

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 28 14:53:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 28 Aug 2002 14:53:55 +0100 (BST)
Subject: dev.print + impossible filename -> break (PR#1959)
In-Reply-To: <Pine.LNX.4.31.0208281403410.31052-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0208281440590.12187-100000@auk.stats>

On Wed, 28 Aug 2002 ripley@stats.ox.ac.uk wrote:

> Here's the nub.
>
> > postscript(file="|llllll")
> > sh: llllll: command not found
>
> > dev.off()
> Broken pipe
>
> and it's related to how popen/pclose are implemented.  The help page
> does say errors are hard to detect, but we can do a bit better than this.

What I tested was checking errno, which the man page says gets set.
But on Linux I find:

popen succeeds, returns a valid file handle and does not set errno.
pclose on that file handle terminates the process.

The last can be avoided by setting a signal handler for SIGPIPE,
although that's not portable across OSes.


Anyone know a portable way to do this?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From chr.schulz@email.de  Thu Aug 29 05:54:26 2002
From: chr.schulz@email.de (chr.schulz@email.de)
Date: Thu, 29 Aug 2002 06:54:26 +0200 (MET DST)
Subject: Rodbc (PR#1961)
Message-ID: <200208290454.GAA01017@pubhealth.ku.dk>

Full_Name: Christian Schulz
Version: 1.5.1
OS: Win2000
Submission from: (NULL) (145.254.65.158)


Hi,

First:

i get a error-message donwload Rodbc  via
{a <- CRAN.packages()
+       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
available=a)}

Second:

channel  <- odbcConnect("chris_db","","")
sqlSave(channel,autocount)
Error in if (any(sqlTables(channel)[3] == tablename)) { : 
        missing value where logical needed

...i get this error-messages from code, which work in past !?

Thanks
regards,Christian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:14:42 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:14:42 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <200208290454.GAA01017@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>

1) RODBC is no longer in the main part of CRAN, but in Devel, because

2) It has not been updated for 1.5.x, and indeed seems unmaintained.

Why did you think these were bugs?


On Thu, 29 Aug 2002 chr.schulz@email.de wrote:

> Full_Name: Christian Schulz
> Version: 1.5.1
> OS: Win2000
> Submission from: (NULL) (145.254.65.158)
>
>
> Hi,
>
> First:
>
> i get a error-message donwload Rodbc  via
> {a <- CRAN.packages()
> +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> available=a)}
>
> Second:
>
> channel  <- odbcConnect("chris_db","","")
> sqlSave(channel,autocount)
> Error in if (any(sqlTables(channel)[3] == tablename)) { :
>         missing value where logical needed
>
> ...i get this error-messages from code, which work in past !?
>
> Thanks
> regards,Christian
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 29 07:21:10 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 29 Aug 2002 07:21:10 +0100 (BST)
Subject: Rodbc (PR#1961)
In-Reply-To: <Pine.LNX.4.31.0208290712480.9856-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0208290718120.9856-100000@gannet.stats>

Just to add: RODBC is not on the list I get from CRAN.packages().
You may be getting an old copy from a cache.
But it's hard to tell when you say

`i get a error-message'

without telling us what the message is.

It is RODBC not Rodbc, and that might be part of your problem.

On Thu, 29 Aug 2002 ripley@stats.ox.ac.uk wrote:

> 1) RODBC is no longer in the main part of CRAN, but in Devel, because
>
> 2) It has not been updated for 1.5.x, and indeed seems unmaintained.
>
> Why did you think these were bugs?
>
>
> On Thu, 29 Aug 2002 chr.schulz@email.de wrote:
>
> > Full_Name: Christian Schulz
> > Version: 1.5.1
> > OS: Win2000
> > Submission from: (NULL) (145.254.65.158)
> >
> >
> > Hi,
> >
> > First:
> >
> > i get a error-message donwload Rodbc  via
> > {a <- CRAN.packages()
> > +       install.packages(select.list(a[,1],,TRUE), .libPaths()[1],
> > available=a)}
> >
> > Second:
> >
> > channel  <- odbcConnect("chris_db","","")
> > sqlSave(channel,autocount)
> > Error in if (any(sqlTables(channel)[3] == tablename)) { :
> >         missing value where logical needed
> >
> > ...i get this error-messages from code, which work in past !?
> >
> > Thanks
> > regards,Christian
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:10:41 2002
From: stakb@nus.edu.sg (stakb@nus.edu.sg)
Date: Fri, 30 Aug 2002 10:10:41 +0200 (MET DST)
Subject: The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <200208300810.KAA12987@pubhealth.ku.dk>

Full_Name: Kaushik Bhattacharyya
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (137.132.3.10)


Main R-function used:

pp1

function(X)

{

x_as.matrix(X)

trial_function(a)

{

clusproj(x,a)

}

test.nlm_nlm(trial,rep(1,ncol(X)))

theta_test.nlm$estimate

theta_theta/sqrt(sum(theta^2))

cluster.index_round(1/test.nlm$min,6)

# print the results

###############

cat(paste("Projection direction = (",paste(round(theta,6),

    collapse=","),")",sep=""),"\n")

cat("Projection index =",cluster.index,"\n")

##################

w <- clusterproj(x,theta)

# define first cluster break

n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]

n.ord <- order(x%*%theta)

A.ndx <- n.ord[seq(n.break)]

B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]

print(sort(A.ndx))

print(sort(B.ndx))

}

 

Functions in the main function:

 

clusterproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length(XS)

    w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    w

}

 

clusproj

function(X,a) {

    a <- a/sqrt(sum(a^2))

    XS <- sort(X%*%a)

    n <- length (XS)

    w <- (seq(n

-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

    1/max(w)

}

 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:26:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:26:48 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <200208300810.KAA12987@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0208300924520.7778-100000@gannet.stats>

Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 09:34:46 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 16:34:46 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>

The division part of the following code is not executing -

(seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))

Note: Prof Yatracos: Would you please send them one example ?

Thanks,

Kaushik



-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:27 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


Could you us a hint what the problems are?
And an example to reproduce them?

On Fri, 30 Aug 2002 stakb@nus.edu.sg wrote:

> Full_Name: Kaushik Bhattacharyya
> Version: 1.5.1
> OS: Solaris
> Submission from: (NULL) (137.132.3.10)
>
>
> Main R-function used:
>
> pp1
>
> function(X)
>
> {
>
> x_as.matrix(X)
>
> trial_function(a)
>
> {
>
> clusproj(x,a)
>
> }
>
> test.nlm_nlm(trial,rep(1,ncol(X)))
>
> theta_test.nlm$estimate
>
> theta_theta/sqrt(sum(theta^2))
>
> cluster.index_round(1/test.nlm$min,6)
>
> # print the results
>
> ###############
>
> cat(paste("Projection direction = (",paste(round(theta,6),
>
>     collapse=","),")",sep=""),"\n")
>
> cat("Projection index =",cluster.index,"\n")
>
> ##################
>
> w <- clusterproj(x,theta)
>
> # define first cluster break
>
> n.break <- seq(w)[round(w,6)>=round(cluster.index,6)]
>
> n.ord <- order(x%*%theta)
>
> A.ndx <- n.ord[seq(n.break)]
>
> B.ndx <- n.ord[seq(n.break+1,dim(x)[1])]
>
> print(sort(A.ndx))
>
> print(sort(B.ndx))
>
> }
>
>
>
> Functions in the main function:
>
>
>
> clusterproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length(XS)
>
>     w <- 
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     w
>
> }
>
>
>
> clusproj
>
> function(X,a) {
>
>     a <- a/sqrt(sum(a^2))
>
>     XS <- sort(X%*%a)
>
>     n <- length (XS)
>
>     w <- (seq(n
>
> -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>     1/max(w)
>
> }
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 09:41:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 09:41:13 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F878B5E5@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208300937170.7797-100000@gannet.stats>

And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stakb@nus.edu.sg  Fri Aug 30 10:29:00 2002
From: stakb@nus.edu.sg (Kaushik Bhattacharyya)
Date: Fri, 30 Aug 2002 17:29:00 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>

Yes. It passed the "make check". The problem is coming in Tru64 Unix also.

Here is the error message.

For example:

> clusproj(newiris,rep(1,4))
Error in X %*% a : requires numeric matrix/vector arguments

Here newiris is the iris dataset.

Thanks,

Kaushik

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk] 
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 10:30:40 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 17:30:40 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F80AC585@MBXSRV06.stf.nus.edu.sg>


    Dear Professor Ripley,

thanks much for your prompt action.

Best regards,
Yannis Yatracos

-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 4:41 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


And the error message is?

Since you mention this is Solaris, did the the installation pass
`make check'?  There is a known problem with current gcc compilers on
Solaris generating incorrect code.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> The division part of the following code is not executing -
>
> (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 30 10:54:08 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 30 Aug 2002 10:54:08 +0100 (BST)
Subject: (PR#1964) The attached function working fine with R 1.3.0 but
 giving problem with R 1.5.1 (PR#1964)
In-Reply-To: <50F57F2F8FF1AC4C95A5ECA1159793F821AD73@MBXSRV06.stf.nus.edu.sg>
Message-ID: <Pine.LNX.4.31.0208301050110.8070-100000@gannet.stats>

1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stayy@nus.edu.sg  Fri Aug 30 11:21:58 2002
From: stayy@nus.edu.sg (Yannis Yatracos)
Date: Fri, 30 Aug 2002 18:21:58 +0800
Subject: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
Message-ID: <50F57F2F8FF1AC4C95A5ECA1159793F8114731@MBXSRV06.stf.nus.edu.sg>


     Dear Professor Ripley:

I hope you can allow me to interfere between you and Kaushik.
I think I hav misled him.

1) The function cluproj is used in the function pp1.
2) I called "newiris" just the numerical data from "iris".
3) Writing: clus.proj(as.matrix(newiris),rep(1,4))
gave the following:
Error in (seq(n - 1) * mean(XS) - cumsum(XS[seq(n - 1)])) * diff(XS)/((n -  :
        non-conformable arrays
4) A colleague made clusproj work by writing as.vector in front of the numerator
and denominator:
 as.vector((seq(n -1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS))/
as.vector(((n-1)*var(XS)))
5) Here is the result: 
> clusproj(as.matrix(newiris),rep(1,4))
[1] 12.43743 

6) Note that the denominator is a scalar.

I hope things are more clear now.

Best regards,
Yannis Yatracos


-----Original Message-----
From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
Sent: Friday, August 30, 2002 5:54 PM
To: Kaushik Bhattacharyya
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
Subject: RE: (PR#1964) The attached function working fine with R 1.3.0
but giving problem with R 1.5.1 (PR#1964)


1) That is not where you said the error was.

2) iris is a data frame with five columns, one a factor, and that example
should not have worked in 1.3.0 (and I doubt it did).

Please do read the section on BUGS in the FAQ.

On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:

> Yes. It passed the "make check". The problem is coming in Tru64 Unix also.
>
> Here is the error message.
>
> For example:
>
> > clusproj(newiris,rep(1,4))
> Error in X %*% a : requires numeric matrix/vector arguments
>
> Here newiris is the iris dataset.
>
> Thanks,
>
> Kaushik
>
> -----Original Message-----
> From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> Sent: Friday, August 30, 2002 4:41 PM
> To: Kaushik Bhattacharyya
> Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk; Yannis Yatracos
> Subject: RE: (PR#1964) The attached function working fine with R 1.3.0 but giving problem with R 1.5.1 (PR#1964)
>
>
> And the error message is?
>
> Since you mention this is Solaris, did the the installation pass `make check'?  There is a known problem with current gcc compilers on Solaris generating incorrect code.
>
> On Fri, 30 Aug 2002, Kaushik Bhattacharyya wrote:
>
> > The division part of the following code is not executing -
> >
> > (seq(n-1)*mean(XS)-cumsum(XS[seq(n-1)]))*diff(XS)/((n-1)*var(XS))
>
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Sat Aug 31 19:59:27 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Sat, 31 Aug 2002 11:59:27 -0700 (PDT)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
Message-ID: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>

Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
ran the configure with gcc 3.1.1 I got the following error:

[...]
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking how to get verbose linking output from g77... -v
checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
-L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
-lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
checking for dummy main to link with Fortran 77 libraries... none
checking for Fortran 77 name-mangling scheme... lower case, underscore,
extra underscore
checking whether g77 and gcc agree on int and double... configure:
WARNING: g77 and gcc disagree on int and double
configure: error: Maybe change CFLAGS or FFLAGS?


Should I have set some configuration option?  Or is this more likely a
problem with my gcc installation/build?

I'm trying to build r-devel (8/30/02) source.


--------------------

marla:> gcc -v
Reading specs from
/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
Thread model: single
gcc version 3.1.1


-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Aug 31 21:01:28 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 31 Aug 2002 21:01:28 +0100 (BST)
Subject: building r-devel on RedHat 7.1 with gcc 3.1.1
In-Reply-To: <Pine.GSO.4.10.10208311155110.5461-100000@quetelet.stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0208312049390.30059-100000@gannet.stats>

I suspect your LD_LIBRARY_PATH does not include wherever you installed the
gcc libs (/home/rpeng/install/gcc/lib?) and g77 >= 3.1 uses a shared
libg2c.  (It also uses a shared libgcc_s.)

In that case running anything built with g77 will not work, and configure
does not actually check that.

You can also get around this by specifying LDFLAGS: to get 64-bit Solaris
builds to work with gcc 3.2 I had to use

LDFLAGS="-L/usr/local/lib/sparcv9 -L/usr/local/lib"

which is how I know about this (and I really expected gcc to sort that out
for me: the Sun compilers do).

On Sat, 31 Aug 2002, Roger Peng wrote:

> Has anyone tried to build r-devel on a RedHat 7.1 with the gcc 3.1.1
> compiler?  I didn't have problems with gcc 2.95.x or gcc 3.0.4, but when I
> ran the configure with gcc 3.1.1 I got the following error:
>
> [...]
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking how to get verbose linking output from g77... -v
> checking for Fortran 77 libraries...  -L/home/rpeng/install/atlas
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1
> -L/home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/../../..
> -lreadline -ldl -lncurses -lfrtbegin -lg2c -lm -lgcc_s
> checking for dummy main to link with Fortran 77 libraries... none
> checking for Fortran 77 name-mangling scheme... lower case, underscore,
> extra underscore
> checking whether g77 and gcc agree on int and double... configure:
> WARNING: g77 and gcc disagree on int and double
> configure: error: Maybe change CFLAGS or FFLAGS?
>
>
> Should I have set some configuration option?  Or is this more likely a
> problem with my gcc installation/build?
>
> I'm trying to build r-devel (8/30/02) source.
>
>
> --------------------
>
> marla:> gcc -v
> Reading specs from
> /home/rpeng/install/gcc/lib/gcc-lib/i686-pc-linux-gnu/3.1.1/specs
> Configured with: ../gcc-3.1.1/configure --prefix=/home/rpeng/install/gcc
> Thread model: single
> gcc version 3.1.1
>
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joshi@engr.orst.edu  Sat Aug 31 22:40:53 2002
From: joshi@engr.orst.edu (joshi@engr.orst.edu)
Date: Sat, 31 Aug 2002 23:40:53 +0200 (MET DST)
Subject: bug in garbage collector function gc() documentation (PR#1970)
Message-ID: <200208312140.XAA23253@pubhealth.ku.dk>

Full_Name: Saket Joshi
Version: 1.5.0
OS: Solaris 5.8
Submission from: (NULL) (128.193.38.91)


According to the documentation obtained by entering: help.search("gc"), the
command gc() forces garbage collection and gives the memory usage statistics
along with the trigger values in bytes also interpretted in megabytes. However
when I ran gc(), the result was a list giving the memory usage in bytes and
interpretted in Megabits and not mega bytes.

e.g.

> gc()

	   used  (Mb) gc trigger  (Mb)
Ncells   288733   7.8     818163  21.9
Vcells 30158416 230.1   48892294 373.1

As can be seen, 230.1 is the interpretation of 30158416 bytes as megabits. But
the documentation says megabytes.
 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Aug 30 18:13:05 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 30 Aug 2002 12:13:05 -0500
Subject: Thoughts about Cygwin ?
Message-ID: <E17kpKT-0001Lp-00@sonny.eddelbuettel.com>


Let me preface this email by saying that I am very grateful for the
existing Windows version of R. It does an excellent job by providing
a pain- and flawless installation, and a look-and-fell most Windows
users feel comfortable with.  For me,  Windows in its different 
flavours is not something I know, or care, a lot about -- but like
others am forced to work with. The old need-bread-on-the-table thing.

Which brings us to Cygwin. It has also come a fairly long way, and
does now contain an almost complete Unix "user layer" (if you install
the whole bit, not just the default). By "user layer" I mean the tools, 
the networking (I can ssh or telnet in), and even a complete (?) X11
layer -- in fact I can ssh from one NT machine to another and export 
X11 apps back as if I was working between Unix terminals -- not bad.
Even tetex works out of the box to the extend that it support Sweave.

But I tend to spend most of my Windows time in Cygwin.  With R inside 
Xemacs/ESS, my work is fairly OS-agnostic. Every now and then, however,
I feel that it would be nice to have R behave under Cygwin just like it
does under Unix/Linux.  Anybody else here who feels the same?  I don't
think I have the stamina, or for that matter windows/cygwin knowledge, 
to spawn a port, but I would be happy to collaborare as I can with test,
configure.in hacks etc pp

If there is no demand, just tell me to crawl back under my stone. No
hurt feelings. I should be using Debian here anyway... 

Dirk

-- 
According to the latest figures, 43% of all signatures are totally
worthless.   

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

