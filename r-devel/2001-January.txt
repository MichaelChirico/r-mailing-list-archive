From dmurdoch@pair.com  Mon Jan  1 01:48:14 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 01 Jan 2001 01:48:14 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
References: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
Message-ID: <3a4fdfc9.752081@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 22:16:39 +0000 (GMT), you wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>  I saw in the docs somewhere that the DESCRIPTION text
>> would show up in the Latex output in some later version; is anyone
>> working on this?  If not, I might give it a shot.
>
>I've not seen that.  The latex versions are separate files, so it seems
>only to make sense if running pkg2tex on a package.

It was in the extensions manual, in the "Processing Rd format" section
where "R CMD Rd2txt" and "R CMD Rd2dvi" were being discussed.

>Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
>special treatment.  

That would be a good solution.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan  1 16:17:40 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 1 Jan 2001 17:17:40 +0100
Subject: [Rd] Re: Package overview document?
Message-ID: <14928.44452.10425.946942@mithrandir.hornik.net>

The issue recently raised by Duncan and discussed in some detail by him
and Brian was also raised by Robert a few weeks ago (I think in an email
that only I received).  Here are some more comments and thoughts.

Unfortunately, much of the way the on-line documentation (help or HTML)
systems currently work is not the result of careful design decisions.  I
think we now understand the limitations of what we currently have, but I
am not sure we already know what we will do in the future.  (The XHTML
versus XML issue comes to mind.)  As Brian pointed out, as we shall move
away from Rd format eventually, we should be careful about adding more
bells and whistles to it.

The entry points for packages documentation are

	library(help = PKG)
or
	help(package = PKG)

where PKG should really be a character string naming the package.  Also,
only the former one seems to be documented explicitly, so this is the
one we should use.  I would recommend against using

	?PKG

for this purpose, as this has the obvious name space issues, and the
former two are meant for documenting packages only.

The next question is what these entry points should do.  Currently, they
simply show the package INDEX file, irrespective of whether help.start()
was given or not.  I think this is a bug.  On the other hand, the INDEX
only exists as flat file and is not necessarily what would be obtained
by running R CMD Rdindex on the package.  Hence, we cannot automatically
create a HTML version from the Rd sources.  (In fact, the HTML system
does have entry points for each package, but these simply contain HTML
versions of the flat-file help/AnIndex data base.)

I am also not sure about recommending to add plain text to file `INDEX'
(as e.g. happens for the base package).  I am quite hesitant to suggest
any changes to this file, because a redesigned documentation system will
need a real index system but then perhaps we'd not be using `INDEX' per
se anymore.

I think the best thing we can currently do is to follow up on Fritz's
idea of using some or all info from the `DESCRIPTION' data base (Robert
also suggested that) in addition to listing or documenting the topics a
package provides docs for.  In the simplest case, we could have

	library(help = PKG)

do a file.show() on the result of combining PKG's DESCRIPTION and INDEX
files.  That is something we can easily do for 1.2.1, and I would make
the change if no one protests.

For the HTML help system, we have two alternatives: do *exactly* the
same or combine DESCRIPTION with the HTML package index.  Not so fast:
we also need to decide whether library(help = PKG) should use the
browser after help.start().  In any case, I think we should have the
build-help script add a simple HTML version of the package DESCRIPTION
to the top of 00Index.html.

For the LaTeX package documentation, the idea was to add a beautified
version of the package DESCRIPTION to the top of the file, e.g. as some
kind of abstract.  We need to be careful about this, though, because
there may be plain text interpreted by LaTeX as special markup.
(E.g., relation operators in Depends can easily be caught; on the other
hand, they might also appear in other fields, such as Description ...).

I am not sure how easy it is to convert the contents of DESCRIPTION into
HTML or LaTeX.  But for the plain text help system, I think the best we
can currently do is to add the contents of DESCRIPTION to what is shown
following library(help = PKG).  In particular, I think the Description
field of the DESCRIPTION data base can be used as a package ``intro''.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Tue Jan  2 13:21:13 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Tue, 2 Jan 2001 14:21:13 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding some (PR#799)
Message-ID: <200101021321.OAA15088@pubhealth.ku.dk>

[These things don't seem to be of too great importance and may well not meet
the criteria of a "bug", but, for what it's worth,I thought I'd submit them
to r-bugs anyway:]

This is the R version:
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

This is what we noticed:

1) In RGui, when something is typed in a command line, pressing <ESC> in
R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
the text is not deleted and the user is prompted for new input in the same
line.
Of course, this is rather a "cosmetical" issue, but it might be worth
considering to change this behaviour back to what it used to be in R1.0.0?

2) It looks like if for some functions, their help pages cannot be accessed
directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
find the appropriate help page (I am using winhelp, to be specific).
This might be because e.g. "setwd" shares the same help file with "getwd",
and it looks like only "getwd" is part of the index of the help system.
Here, the same holds for R1.0.0.

Regards,
Heinrich Rinner.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 2 Jan 2001 16:35:14 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
Message-ID: <200101021535.QAA18035@pubhealth.ku.dk>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:24 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 2 Jan 2001 15:35:24 +0000 (GMT)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding
 some (PR#799)
In-Reply-To: <200101021321.OAA15088@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10101021525500.18558-100000@toucan.stats>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 16:14:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 17:14:24 +0100
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 2 Jan 2001 16:35:14 +0100 (MET)"
References: <200101021535.QAA18035@pubhealth.ku.dk>
Message-ID: <x2lmsuszhb.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

[Something we've seen before as a followup to PR#799]

Argh. Looks like Jitterbug is having trouble if the Subject line
becomes longer than 80 characters. Looks like I'll need to go fix
bugs in the bug tracking software again! Meanwhile, could you please
truncate the header on followups on PR#799?

This is getting tiring. Anyone have suggestions for an alternate
bugfiling device that is actually being maintained, is easy to handle,
integrates well with the mailing lists, and doesn't require weird
sysadminning tasks such as adding one new mail user per bug report?
Bugzilla maybe?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Tue Jan  2 20:14:32 2001
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Tue, 2 Jan 2001 21:14:32 +0100 (MET)
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
Message-ID: <200101022014.VAA19397@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


i'm assuming that these are shortfalls in the documentation, and not bugs
in the function themselves.

1) the help page for pos.to.env gives two examples:

   Examples:

     pos.to.env(1)
     pos.to.env(length(search()))

the second of these returns NULL which (to me) does not seem to fit
the description of the function.  an explanation of why this seems
to be a special case would be helpful.


2)  the help page for the sys.xxx functions says:

   Notice that even though the `sys.'xxx functions are interpreted,
   their contexts are not counted nor are they reported. There is no
   access to them.

sys.status() seems to violate this description:

> test <- function () sys.status()
> test()
$sys.calls
$sys.calls[[1]]
test()

$sys.calls[[2]]
sys.status()


$sys.parents
[1] 0 1

$sys.frames
$sys.frames[[1]]
<environment: 0x10bf7a94>

$sys.frames[[2]]
<environment: 0x10bf7a5c>


3) the sys.xxx help page says:

   The parent of a function evaluation is the environment in which
   the function was called. It is not necessarily one less than the
   frame number of the current evaluation, nor the environment from
   which it is called.

i think the first sentence ought to read "the environment in which the
function was declared".  unless there is some syntactic subtlety that
makes the environment "in which [it] was called" different from the one
"from which [it] is called".

- peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 20:56:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 21:56:25 +0100
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
In-Reply-To: pperkins@ucsd.edu's message of "Tue, 2 Jan 2001 21:14:32 +0100 (MET)"
References: <200101022014.VAA19397@pubhealth.ku.dk>
Message-ID: <x2r92lwu4m.fsf@blueberry.kubism.ku.dk>

pperkins@ucsd.edu writes:

> Full_Name: peter perkins
> Version: 1.2.0
> OS: linuxppc
> Submission from: (NULL) (24.4.89.36)
> 
> 
> i'm assuming that these are shortfalls in the documentation, and not bugs
> in the function themselves.
> 
> 1) the help page for pos.to.env gives two examples:
> 
>    Examples:
> 
>      pos.to.env(1)
>      pos.to.env(length(search()))
> 
> the second of these returns NULL which (to me) does not seem to fit
> the description of the function.  an explanation of why this seems
> to be a special case would be helpful.

This is correct. The NULL environment is at the end of the search list
(also known as "package:base"). It is a feature not very much loved by
me, but a feature nevertheless. In this environment, objects are bound
directly to symbols rather than stored in a hash structure.

> 3) the sys.xxx help page says:
> 
>    The parent of a function evaluation is the environment in which
>    the function was called. It is not necessarily one less than the
>    frame number of the current evaluation, nor the environment from
>    which it is called.
> 
> i think the first sentence ought to read "the environment in which the
> function was declared".  unless there is some syntactic subtlety that
> makes the environment "in which [it] was called" different from the one
> "from which [it] is called".

Close, but it's the *second* sentence that needs to be changed... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 15:35:51 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Jan 2001 15:35:51 +0000 (GMT)
Subject: [Rd] problems with glm (PR#771)
In-Reply-To: <200101031410.PAA28684@alpha.luc.ac.be>
Message-ID: <Pine.GSO.4.05.10101031529360.20231-100000@toucan.stats>

[Moved back to R-devel. That's where we discuss bug reports.]

On Wed, 3 Jan 2001, Jim Lindsey wrote:

> > > Additional comment: I recommend that the aic functions for poisson and
> > > binomial have the explicit calculation of the log density replaced by
> > > the corresponding d function with the log option. This will avoid the
> > > production of NAs in certain cases of zeroes in tables.
> > 
> > Good idea, but could you supply examples so we can put them in the
> > regression tests?
> 
> Here is a simple and unrealistic (as no one would ever fit the model
> to these data) example that illustrates what can happen in more
> complex tables:
> 
> y <- matrix(c(2,0,7,3,0,9), ncol=2)
> x <- gl(3,1)
> glm(y~x, family=binomial)

That's not one. That fails because wt/n = NaN, and produces NaN not NA.
Now, could you please supply an example of what you reported, so we can
put it in the regression tests?  The BUGS section in the FAQ does ask for
one, with good reasons.  I've done as you suggested, and *not* fixed the
actual bug in this example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Jan  3 16:02:33 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 3 Jan 2001 17:02:33 +0100
Subject: [Rd] memory trouble
Message-ID: <200101031602.RAA15155@mailgate3.cinetic.de>

I don't know whether this belongs to r-devel or rather r-help.

Under RW1.11 --nsize=8M --vsize=512M I could

n <- 500000
m <- 20
x <- matrix(rnorm(n*m), ncol=m, nrow=n)
gc()

> n <- 500000
> m <- 20
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
> gc()
           free    total (Mb)
Ncells  8190509  8388608  160
Vcells 57033698 67108864  512


# under RW1.20 --vanilla the same fails, some testing shows

n <- 500000
m <- 20

x <- matrix(ncol=m, nrow=n)
x <- matrix(NA, ncol=m, nrow=n)
x <- matrix(0, ncol=m, nrow=n)
x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rep(0, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
gc()
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rnorm(n*m), ncol=m, nrow=n)

> n <- 500000
> m <- 20
> 
> x <- matrix(ncol=m, nrow=n)
> x <- matrix(NA, ncol=m, nrow=n)
> x <- matrix(0, ncol=m, nrow=n)
> x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> x <- matrix(rep(0, n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> gc()
           used (Mb) gc trigger  (Mb)
Ncells   174208  4.7     350000   9.4
Vcells 11109574 84.8   24307903 185.5
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb


Experimenting with --min-nsize=8M --min-vsize=512M --max-nsize=8M --max-vsize=512M did not help. 

What am I doing wrong?


Regards


Jens Oehlschlägel
(Research Consultant)


PIII NT4.0 Service Pack 6, 1 GB RAM, Physical Memory available due to task manager: 934600 K

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R  
_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 20:58:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 Jan 2001 20:58:21 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101031602.RAA15155@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>

Read the documentation: CHANGES or ?Memory.

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

You probably want to read the rest of the descriptions, and reading
documentation is always a good idea, so please do read the rest of the
CHANGES file.

There is a good reason for the numbers: the new malloc likes a contiguous
memory space, and R only reserves 256Mb initially (out of the 2Gb space on
non-server versions).  You can re-compile it to reserve more.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Jan  4 00:54:52 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 04 Jan 2001 01:54:52 +0100
Subject: [Rd] R sings, this time REALLY
Message-ID: <3A53C9DC.CD791A2E@univie.ac.at>

i did some debugging,
and now R really sings in the sense that there are 2 new "instruments",
a synthesized tenor voice and a synthesized soprano voice singing.

http:/sunsite.univie.ac.at/~neuwirth/Rcsound/
has the latest version

my server is up and running again.



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  4 09:55:38 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jan 2001 10:55:38 +0100
Subject: [Rd] memory trouble
In-Reply-To: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
References: <200101031602.RAA15155@mailgate3.cinetic.de>
 <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
Message-ID: <200101040955.KAA03084@lynne.ethz.ch>

In spite of Brian's good points, 
I believe we should help the users more.

R-1.1.1 --vanilla     had

  rnorm(1e7)

  >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
  >>       See "help(Memory)" on how to increase the heap size.

which is much more helpful
than the

  >> Error: cannot allocate vector of size 39062 Kb

that R-1.2.0  reports  (much much more rarely though, 
		        I couldn't reproduce it in a few tries !)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan  4 10:28:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 4 Jan 2001 10:28:26 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101041025130.22275-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)

The error is different: it is coming from inside malloc.  Under those
circumstances you really can't do much, in particular nothing that needs
memory allocation.

This is not a question of the heap being exhausted: it is a question of
the process having fit its limits.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 11:06:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Jan 2001 11:06:47 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101051101160.8064-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)


What I have done is to add a *warning* if the memory allocation is hit.
The warning is something like

   Reached total allocation of 191.36Mb: see help(memory.size)

I can't safely raise an error, and there are literally hundreds of 
places it could make an error, both in R and in a package.
You may or may not see the warning, depending how bad the error is.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Jan  5 16:11:13 2001
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 5 Jan 2001 17:11:13 +0100 (MET)
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
Message-ID: <200101051611.RAA27177@pubhealth.ku.dk>

When reading a file with scan(), the following crashes R under Solaris and
WinNT 4.0 (versions below):

> ads <- scan("Bltiadu.dat", what=list(,,))

Would an error message be more logical? Note that the followings work (the
data file has 201 lines and 3 columns):

> ads <- scan("Bltiadu.dat", what=list(0,,))
Read 603 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,0))
Read 201 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,))
Read 302 lines
Warning message: 
line 1 did not have 2 elements


> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

> version
         _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    2.0
year     2000
month    12
day      15
language R


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Jan  5 16:45:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 05 Jan 2001 11:45:31 -0500
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: <200101051611.RAA27177@pubhealth.ku.dk>
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <3a58f95a.70953969@fisher.stats.uwo.ca>

On Fri, 5 Jan 2001 17:11:13 +0100 (MET), you wrote in message
<200101051611.RAA27177@pubhealth.ku.dk>:

>When reading a file with scan(), the following crashes R under Solaris and
>WinNT 4.0 (versions below):
>
>> ads <- scan("Bltiadu.dat", what=list(,,))

I crash Win98 with the same sort of line; it's because list(,,) is the
same as list(), and scan isn't checking for this boundary case, I
guess...

>
>Would an error message be more logical? Note that the followings work (the
>data file has 201 lines and 3 columns):
>
>> ads <- scan("Bltiadu.dat", what=list(0,,))
>Read 603 lines

While fixing this, wouldn't it be better to change this message to 

"Read 603 cases"

since in fact, only 201 lines were read, 3 cases per line?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  5 16:56:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 2001 17:56:53 +0100
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: paradis@isem.univ-montp2.fr's message of "Fri, 5 Jan 2001 17:11:13 +0100 (MET)"
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <x2elyidjjd.fsf@blueberry.kubism.ku.dk>

paradis@isem.univ-montp2.fr writes:

> When reading a file with scan(), the following crashes R under Solaris and
> WinNT 4.0 (versions below):
> 
> > ads <- scan("Bltiadu.dat", what=list(,,))

Happens on Linux too. And you don't need a big file to provoke it:

$ cat > /tmp/junk
1 2 3
3 4 5
2 3 4
^D

...

Starting program: /usr/local/src/misc/r-release/BUILD/bin/R.bin --quiet
> scan('/tmp/junk', what=list(,,))

Program received signal SIGSEGV, Segmentation fault.
0x80d5160 in scanFrame (what=0x89e8260, maxitems=0, maxlines=0, flush=0, 
    fill=0, stripwhite=0x878b0f0, blskip=1) at ../../../R/src/main/scan.c:491
491     bch = fillBuffer(buffer, TYPEOF(VECTOR_ELT(ans, ii)), strip);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Jan  5 20:23:05 2001
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 5 Jan 2001 21:23:05 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052023.VAA28098@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.2.0
OS: linux
Submission from: (NULL) (144.81.31.148)


pairs(NxK_Matrix,panel=qqplot)

produces a message

Error in pairs.default(NxK_Matrix,panel=qqplot) :
   The panel function made a new plot


best regards and a happy new year

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 21:30:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Jan 2001 22:30:43 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052130.WAA28307@pubhealth.ku.dk>

On Fri, 5 Jan 2001 mvondavier@ets.org wrote:

> Full_Name: Matthias von Davier
> Version: 1.2.0
> OS: linux
> Submission from: (NULL) (144.81.31.148)
>
>
> pairs(NxK_Matrix,panel=qqplot)
>
> produces a message
>
> Error in pairs.default(NxK_Matrix,panel=qqplot) :
>    The panel function made a new plot

And the bug is?  I am baffled!  Please read the section on BUGS in the FAQ.
Acting as documented is not a bug, nor is giving an error message when a
function is used incorrectly.

A panel function is documented as

   panel: `function(x,y,...)' which is used to plot the contents of
          each panel of the display.

Note *contents*.  I don't think qqplot qualifies, so you get a message
about your error.  You probably want (untested)

panel.qqplot <- function(x, y, ...)
{
   res <- qqplot(x, y, ..., plot.it = FALSE)
   points(res$x, res$y)
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Sat Jan  6 22:19:46 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Sat, 6 Jan 2001 17:19:46 -0500 (EST)
Subject: [Rd] R/S-Plus compatibility package
Message-ID: <200101062219.RAA24588@jessie.research.bell-labs.com>

We're starting work on an R package and corresponding S-Plus library
to help programmers write software that will work in both systems.

Some descriptions and downloadable software are available on the
Omegahat web site, at
	 http://www.omegahat.org/SLanguage/

The strategy, as described there, is to be as back-compatible within R
and within S-Plus as possible, but provide tools and guidelines to
smooth over inconsistencies between the two implementations of the S
language.

The tools will include both S language and C/C++ support.  It's
starting off with the functions that access objects (get, etc.), a
couple of tools for dealing with language objects, and a bit of
miscellany.  More to come shortly.

If you're experienced or interested in writing software targeted to
both R and S-Plus, please take a look at the package.  It's at a very
early stage, and comments, suggestions of what should be in there, or
(especially) contributions are very much needed.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan  7 06:15:06 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Jan 2001 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101070615.HAA21659@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

* PR# 801 *
Subject: pos.to.env and sys.xxx documentation
From: pperkins@ucsd.edu
Date: Tue, 2 Jan 2001 21:14:31 +0100 (MET)

Directory:  Graphics

* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 802 *
Subject: crash with scan(..., what=list(,,))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Fri, 05 Jan 2001 17:10:42 +0100
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--
--Final para is almost certainly user error in using 
--  bug.report(gnome-support problems)  without quotes
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 795 *
Subject: Re: [Rd] some (may be related) problems with windows(rescale=)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 28 Dec 2000 20:22:51 +0000 (GMT)
* PR# 794 *
Subject: some (may be related) problems with windows(rescale=)
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Thu, 28 Dec 2000 17:54:47 +0100

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai-wang@uiowa.edu  Mon Jan  8 03:29:17 2001
From: kai-wang@uiowa.edu (kai-wang@uiowa.edu)
Date: Mon, 8 Jan 2001 04:29:17 +0100 (MET)
Subject: [Rd] random seed (PR#804)
Message-ID: <200101080329.EAA04375@pubhealth.ku.dk>

Full_Name: Kai Wang
Version: 1.2.0 (2000-12-15)
OS: Red Hat Linux 7.0
Submission from: (NULL) (128.255.176.68)


In simulation analyses that use function rnorm(1), I encountered the following
error message from time to time:

.Random.seed[2] is not a valid integer

The chance of such error message is about 1/20000 replications.

I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
compiled R myself, the same problem exists. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 07:40:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 07:40:17 +0000 (GMT)
Subject: [Rd] random seed (PR#804)
In-Reply-To: <200101080329.EAA04375@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101080738530.25276-100000@auk.stats>

On Mon, 8 Jan 2001 kai-wang@uiowa.edu wrote:

> Full_Name: Kai Wang
> Version: 1.2.0 (2000-12-15)
> OS: Red Hat Linux 7.0
> Submission from: (NULL) (128.255.176.68)
>
>
> In simulation analyses that use function rnorm(1), I encountered the following
> error message from time to time:
>
> .Random.seed[2] is not a valid integer
>
> The chance of such error message is about 1/20000 replications.
>
> I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
> compiled R myself, the same problem exists.

Can you confirm which random number generator you are using?
The default one?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 11:57:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 11:57:27 +0000 (GMT)
Subject: [Rd] cleaning up the BUGS list
Message-ID: <Pine.GSO.4.31.0101081153450.25779-100000@auk.stats>

In looking over the bugs list, it seems to me that most of them are
things we can no longer do anything about, because they are on old
versions or broken systems or were features or ....

There are now so many they obscure the bugs needing attention.

I am about the remove the following.  If anyone thinks they are still
relevant, could you please send a follow-up to R-bugs with details under
1.2.0 or later.  (Please do put (PR#xxx) on the subject line.)

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied
--(and there is no 256 col limit)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 694 *
Subject:  syntax confusion with function/non-function objects
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--Final para is almost certainly user error in using
--  bug.report(gnome-support problems)  without quotes
* PR# 734 *
Subject:  Assigning into a dataframe
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  9 17:25:42 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 9 Jan 2001 18:25:42 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101091725.SAA00060@pubhealth.ku.dk>

I find this a bit puzzling ...

> solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
[1] NaN Inf
> solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3) 
     [,1]
[1,] -Inf
[2,]  Inf

I would expect the answer to be c(-Inf, Inf), so why has the -Inf
been replaced by NaN in solve?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  9 18:21:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Jan 2001 18:21:23 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101091725.SAA00060@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>

On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:

> I find this a bit puzzling ...
>
> > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> [1] NaN Inf
> > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
>      [,1]
> [1,] -Inf
> [2,]  Inf
>
> I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> been replaced by NaN in solve?

Why would you expect it?  Did you actually check it?
You have 5x + 3y = Inf,  2x + y = 3
if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.

Once you have infinities, the standard laws of arithmetic break.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.CSIRO.AU  Wed Jan 10 05:53:03 2001
From: Richard.Beare@cmis.CSIRO.AU (Richard.Beare@cmis.CSIRO.AU)
Date: Wed, 10 Jan 2001 06:53:03 +0100 (MET)
Subject: [Rd] configure error on alpha (PR#806)
Message-ID: <200101100553.GAA02533@pubhealth.ku.dk>


Hi, 

I've found that the default options of gcc and g77 on alpha produce an
executable that suffers from floating exceptions. There seems to be a
problem with the configure scripts that prevents the --with-f77 option
working correctly. The configure script tests that f77 is running by
attempting to compile and link a dummy program - the link step seems
broken on the alpha (it doesn't like the command 

f77 -o conftest conftest.f -L/usr/local/lib

The command works fine without the -L switch.

)

my workaround was to remove $LIBS from the line
ac_link='${F77-f77} -o conftest${ac_exeext} $FFLAGS $LDFLAGS
conftest.$ac_ext $L
IBS 1>&5'

but a better alternative may be to just use the fortran compiler to
produce an object file rather than an executable.

R configured using the following options passes "make test"

R is now configured for alphaev56-dec-osf4.0d

  Source directory:          .
  Installation directory:    /usr/local/R
  C compiler:                cc  -ieee_with_inexact -std1 -g
  C++ compiler:              c++  -g -O2
  FORTRAN compiler:          f77  -fpe3 -g

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no



--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0d
 arch = alphaev56
 os = osf4.0d
 system = alphaev56, osf4.0d
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Jan 10 07:59:25 2001
From: telford@progsoc.uts.edu.au (telford@progsoc.uts.edu.au)
Date: Wed, 10 Jan 2001 18:59:25 +1100
Subject: [Rd] configure error on alpha (PR#806)
In-Reply-To: <200101100553.GAA02533@pubhealth.ku.dk>; from Richard.Beare@cmis.CSIRO.AU on Wed, Jan 10, 2001 at 06:53:03AM +0100
References: <200101100553.GAA02533@pubhealth.ku.dk>
Message-ID: <20010110185925.D1483@progsoc.uts.edu.au>

On Wed, Jan 10, 2001 at 06:53:03AM +0100, Richard.Beare@cmis.CSIRO.AU wrote:
> I've found that the default options of gcc and g77 on alpha produce an
> executable that suffers from floating exceptions.

I've been running R on alpha for about a year and haven't seen this
problem... can you provide a method to reproduce it?

> There seems to be a
> problem with the configure scripts that prevents the --with-f77 option
> working correctly. The configure script tests that f77 is running by
> attempting to compile and link a dummy program - the link step seems
> broken on the alpha (it doesn't like the command 
> 
> f77 -o conftest conftest.f -L/usr/local/lib
> 
> The command works fine without the -L switch.
> 
> )

The argument over whether the system should recognise
/usr/local/lib as a legitimate location for libraries
rages back and forth but believe me that there are many
systems that ONLY work with the -L switch.

Do you have something strange and nasty lurking in
/usr/local/lib, maybe old versions of something ?

Do you actually HAVE a directory /usr/local/lib ?

> R is now configured for alphaev56-dec-osf4.0d

OK, I have been using debian linux so there are
no doubt some differences right there. Also,
my chip is only ev4 (possibly irrelevant).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 09:39:56 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 09:39:56 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>
Message-ID: <Pine.GSO.4.20.0101100932280.503-100000@laplace>

On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:

> On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> 
> > I find this a bit puzzling ...
> >
> > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > [1] NaN Inf
> > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> >      [,1]
> > [1,] -Inf
> > [2,]  Inf
> >
> > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > been replaced by NaN in solve?
> 
> Why would you expect it?  Did you actually check it?
> You have 5x + 3y = Inf,  2x + y = 3
> if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> 
> Once you have infinities, the standard laws of arithmetic break.

What was puzzling was that the answers were not the same.  The two results
will have different effects in further calculations as NaN and -Inf are
not treated identically (e.g. max or min).  My understanding, supported by
the documentation, is that the two results should be identical, excepting
numerical accuracy.

In S+ the first version generates an error while the second gives c(-Inf,
Inf) as expected.  I think this is safer.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 11:01:57 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 12:01:57 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101101101.MAA07190@pubhealth.ku.dk>

On Wed, 10 Jan 2001, Jonathan Rougier wrote:

> On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:
>
> > On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> >
> > > I find this a bit puzzling ...
> > >
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > > [1] NaN Inf
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> > >      [,1]
> > > [1,] -Inf
> > > [2,]  Inf
> > >
> > > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > > been replaced by NaN in solve?
> >
> > Why would you expect it?  Did you actually check it?
> > You have 5x + 3y = Inf,  2x + y = 3
> > if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> >
> > Once you have infinities, the standard laws of arithmetic break.
>
> What was puzzling was that the answers were not the same.  The two results
> will have different effects in further calculations as NaN and -Inf are
> not treated identically (e.g. max or min).  My understanding, supported by
> the documentation, is that the two results should be identical, excepting
> numerical accuracy.

Really?  Which documentation?  I don't think they are the same once
non-finite numbers are involved, and ?solve did not lead me to believe
otherwise.

> In S+ the first version generates an error while the second gives c(-Inf,
> Inf) as expected.  I think this is safer.

The different is intentional: whoever wrote qr.coef put NAOK=TRUE
in R put not in S.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 11:19:14 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 11:19:14 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101101101.MAA07190@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.20.0101101115130.503-100000@laplace>

On Wed, 10 Jan 2001 ripley@stats.ox.ac.uk wrote:

> On Wed, 10 Jan 2001, Jonathan Rougier wrote:
> >
> > What was puzzling was that the answers were not the same.  The two results
> > will have different effects in further calculations as NaN and -Inf are
> > not treated identically (e.g. max or min).  My understanding, supported by
> > the documentation, is that the two results should be identical, excepting
> > numerical accuracy.
> 
> Really?  Which documentation?  I don't think they are the same once
> non-finite numbers are involved, and ?solve did not lead me to believe
> otherwise.

I think it is by ommision.  There is nothing in the solve documentation
that suggests that solve(A) %*% b and solve(A, b) will give different
answers if b contains non-finite values.  Therefore it is reasonable to
expect the answers to be the same.  May I suggest that a note might be
added to the documentation to highlight this?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From morin@mat.ulaval.ca  Wed Jan 10 12:24:07 2001
From: morin@mat.ulaval.ca (morin@mat.ulaval.ca)
Date: Wed, 10 Jan 2001 13:24:07 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101224.NAA09038@pubhealth.ku.dk>

--============_-1232993047==_ma============
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

I am using R 1.2.0 on a iBook with system 9.04.

As soon as I open R, I get the following warning:


Warning message:
cannot set timezones on this system
--============_-1232993047==_ma============
Content-Type: text/html; charset="us-ascii"

<!doctype html public "-//W3C//DTD W3 HTML//EN">
<html><head><style type="text/css"><!--
blockquote, dl, ul, ol, li { margin-top: 0 ; margin-bottom: 0 }
 --></style><title>Time zone</title></head><body>
<div>I am using R 1.2.0 on a iBook with system 9.04.</div>
<div><br></div>
<div>As soon as I open R, I get the following warning:</div>
<div><br></div>
<div><br></div>
<div><tt><font size="-2" color="#000000">Warning message:<br>
cannot set timezones on this system</font></tt></div>
</body>
</html>
--============_-1232993047==_ma============--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David.Meyer@ci.tuwien.ac.at  Wed Jan 10 12:25:01 2001
From: David.Meyer@ci.tuwien.ac.at (David.Meyer@ci.tuwien.ac.at)
Date: Wed, 10 Jan 2001 13:25:01 +0100 (MET)
Subject: [Rd] changing dimnames of a matrix with rownames/colnames causes (PR#809)
Message-ID: <200101101225.NAA09080@pubhealth.ku.dk>

When I try to change the dimnames of a matrix x with named dimensions

   Y
X   1 2 3 4
  2 1 1 1 1
  3 1 1 1 1
  4 1 1 1 1


for example with:

rownames (x) <- c(...),

the dimension names (X and Y) are deleted, but when I use

dimnames(x)[[1]] <- c(...)

they are left unchanged.

Is this intentional ?

I'm using R 1.2.0 on debian linux.

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R             

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed Jan 10 13:04:06 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 10 Jan 2001 08:04:06 -0500
Subject: [Rd] nearest neighbors
Message-ID: <20010110080406.H19355@jimmy.harvard.edu>

Is there an implementation of a reasonable k-nearest neighbor finder
already in one of the packages?

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:20:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 14:20:27 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101320.OAA10558@pubhealth.ku.dk>

On Wed, 10 Jan 2001 morin@mat.ulaval.ca wrote:

> I am using R 1.2.0 on a iBook with system 9.04.
>
> As soon as I open R, I get the following warning:

> Warning message:
> cannot set timezones on this system

Well, it means what it says. If you don't want to use datetime classes
you can ignore it.  Getting a warning is not a bug, but it happens
because .leap.seconds will be wrong.

I presume you compiled this yourself?  Does `system 9.04' have
support for timezones?  If so you should really try to get this to
work: the code is src/main/datetime.c and relies on setting the
environmental variable TZ by putenv or setenv.  Lots of things will
fail if you don't have those so you do need to try to repair this.

Does example(Sys.putenv) do anything sensible?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:23:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Jan 2001 13:23:05 +0000 (GMT)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.31.0101101320500.8446-100000@toucan.stats>

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?

knn in VR/class: I'll leave you to pass judgement on `reasonable', but it
is widely used.  It may not be the problem you had in mind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Jan 10 13:32:32 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 10 Jan 2001 21:32:32 +0800 (GMT-8)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.21.0101102130220.9387-100000@sununx.comp.nus.edu.sg>

Hi,
I think splancs might have one. Otherwise I know Roger Bivand has a
preliminary port of ANN on his ftp site that i have compiled and run. ANN
is David Mounts approximate nearest neigbor package, really fat with
modified kd trees.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?
> 
> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: not yet                          |
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 10 17:11:19 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Jan 2001 18:11:19 +0100
Subject: [Rd] eval() bug in plot.formula() ?
Message-ID: <14940.38839.796429.22623@gargle.gargle.HOWL>

I don't have time now to investigate myself,
and I'm not feeling like deciding myself if the following is a bug:

  myplot <- function(dat, cex = 1.2, ...) {
      if(!is.data.frame(dat <- as.data.frame(dat)))
	  stop("`dat' must be a data.frame")
      if(any(is.na(match(c("x","y"), names(dat)))))
	  stop("`dat' must have a `x' and a `y' component")
      plot(y ~ x, data= dat, cex=cex, ...)
  }

  dd <- list(x= 1:12, y = sin((1:12)/10))
  myplot(dd)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

  myplot(dd, col = "red") ## Works fine

  myplot(dd, cex=1)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

------------
The above code works fine in R 0.90  but fails already in 1.0.0

I believe it *is* a bug

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 10 17:47:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jan 2001 18:47:40 +0100
Subject: [Rd] eval() bug in plot.formula() ?
In-Reply-To: Martin Maechler's message of "Wed, 10 Jan 2001 18:11:19 +0100"
References: <14940.38839.796429.22623@gargle.gargle.HOWL>
Message-ID: <x24rz72tab.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I don't have time now to investigate myself,
> and I'm not feeling like deciding myself if the following is a bug:
> 
>   myplot <- function(dat, cex = 1.2, ...) {
>       if(!is.data.frame(dat <- as.data.frame(dat)))
> 	  stop("`dat' must be a data.frame")
>       if(any(is.na(match(c("x","y"), names(dat)))))
> 	  stop("`dat' must have a `x' and a `y' component")
>       plot(y ~ x, data= dat, cex=cex, ...)
>   }
> 
>   dd <- list(x= 1:12, y = sin((1:12)/10))
>   myplot(dd)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
>   myplot(dd, col = "red") ## Works fine
> 
>   myplot(dd, cex=1)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
> ------------
> The above code works fine in R 0.90  but fails already in 1.0.0
> 
> I believe it *is* a bug

Hmm, it comes from fixing a much worse bug (the one where pch and
friends didn't get subsetted), so it's not advisable to revert the
change.

The problematic construction is this:

{
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, parent.frame()))) 
        m$data <- as.data.frame(data)
    dots <- m$"..."
    dots <- lapply(dots, eval, data, parent.frame())

and the problem is that dots has ... as a component in some cases.
This looks more like a bug in match.call than in plot.formula, I think

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 23:11:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 00:11:42 +0100 (MET)
Subject: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101102311.AAA16776@pubhealth.ku.dk>

Part 1) is basically that the initial rescaling is done if the window is
too large to fit on the screen.  That's true and obvious (no scrollbars)
and intentional and on the help page.  As ever, you need to report bugs on
what is documented, not what you would like.

This will be changed for 1.2.1, but was several hours' work.  I have also
cleaned up the scrollbar behaviour.

Part 2) I just can't reproduce.  When I follow the instructions, all the
settings revert to very close to the originals and the plot looks the same.

In summary, there is no reproducible evidence of a bug here, and never was.
A feature request will appear in 1.2.1.

BDR

On Fri, 29 Dec 2000 joehl@web.de wrote:

> Dear Prof. Brian Ripley,
>
> Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)
>
> > If these things bother you, could you please supply fixes?
>
> Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that.
>
> What I definitely can offer is testing and giving replicable bug reports.
>
> Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R.
>
> > [snipped]
> > Nothing on the help page suggested that the fine details of the R read-only
> > parameters will be as you expected after re-scaling the plot, and it never
> > occurred to me that anyone would expect so.
> > As they are reported by the R
> > graphics engine (which is used unchanged), I expect they are correct in one
> > of the multiple interpretations.
> > [snipped]
>
> Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).
>
> One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.
>
> > Possibly.  I don't think the device size is very interesting after
> > rescaling.  What are you using it for?
>
> Well, of course I try to avoid using it.
>
> Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.
>
> Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device.
>
> Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.
>
> Example
> Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size.
>
> ========================
> windows(rescale="fixed")
> does not do rescaling after device initializiation, it's basic idea is to not change the device size at all.
> However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails.
> In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
> Thus the current implementation does not make sense with devices bigger than the screen.
> ========================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fixed")
>
> # using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally).
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
>
>
>
> ======================
> by constrast
> windows(rescale="fit")
> works
> ======================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fit")
>
> # using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands WORKS
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
>
> However repeated resizing of the window does increase the shown font sizes, look at that:
>
> width <- 8
> height <- 6
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> cex <- 2.8
>
> info <- function(){
> 	user <- strwidth(jandltext, cex=cex, units="user")
> 	inches <- strwidth(jandltext, cex=cex, units="inches")
> 	pin <- par("pin")
> 	din <- par("din")
> 	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
> }
>
> windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
> windows(width=width, height=height, rescale="fit")
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,1,0,1))
> par(c("din","fin","pin"))
> par("usr")
> text(0.5,0.5,jandltext, cex=cex)
>
> # Initial measures
> print(static <- info())
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # we never touched horizontal window size but horiz din differs, strwidthInInches differs not
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # now everything differs
>
> > print(static <- rbind(static, info()))
>        din aspectratio pintodin   struser strinchtopin   strinch
> 1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
> 2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
> 3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing
>
>
>
> So here is my revised bug status:
>
> 1a) windows(rescale="fixed") does not keep original device size
> 1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)
>
> 2) wrong row distances with windows(rescale="fit")
>    This phenomenon also observed under different circumstances
>    see todays mail to r-help
>
> 3a) windows(rescale="fit") destroys aspect ratio
> 3b) repeated rescaling destroys proper font size as well
>
>
> Kind regards and best wishes for 2001
>
>
>
> Jens Oehlschlägel
>
> _______________________________________________________________________________
> Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
> Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen.eglen@ed.ac.uk  Thu Jan 11 11:23:30 2001
From: stephen.eglen@ed.ac.uk (stephen.eglen@ed.ac.uk)
Date: Thu, 11 Jan 2001 12:23:30 +0100 (MET)
Subject: [Rd] R introduction mentions system.date() (PR#810)
Message-ID: <200101111123.MAA22532@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.0
OS: OSF 1
Submission from: (NULL) (129.215.13.27)


In the document "An introduction to R", the info node "Customizing the
environment"
has the following code snippet:

     > .Last <- function() {
       graphics.off()                        # a small safety measure.
       cat(paste(system.date(),"\nAdios\n")) # Is it time for lunch?
     }

I think "system.date()" should now be replaced just by "date()".
(This can be found on line 3949 of R-intro.texi distributed with 
version 1.2.0).



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Jan 11 12:30:35 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Thu, 11 Jan 2001 13:30:35 +0100
Subject: [Rd] Re: Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101111230.NAA00597@mailgate3.cinetic.de>


Sorry for wasting bandwidth but I want to thank Prof. Brian Ripley for attacking the problems I had with windows() rescaling. I am sorry that it eat up lots of his time and appreciate very much that nevertheless he did it. I am looking forward to R 1.2.1. 

Thank you very much Brian!

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Thu Jan 11 21:22:49 2001
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Thu, 11 Jan 2001 22:22:49 +0100 (MET)
Subject: [Rd] problem with strptime example (and mention of bug.report) (PR#811)
Message-ID: <200101112122.WAA26408@pubhealth.ku.dk>

Hi,

The help file for strptime has the following code which doesn't work
for me:

     ## read in date info in format `ddmmmyyyy'
     x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
     z <- strptime(x, "%d%b%Y")
> z
[1] "NA" "NA" "NA" "NA"

Do these work for other people?

whereas it works fine if I use a separator (/) in the date@

> strptime("9/Feb/1960", "%d/%b/%Y")
[1] "1960-02-09"

> strptime("9Feb1960", "%d%b%Y")
[1] "NA"

Stephen

p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
does not recognise the -c switch for setting the carbon copy (CC)
field, causing an error.  One solution might be to remove the -c
argument from the cmdarg in bug.rerport(), or put a 
"~c joe@bloggs.com" directive at the end of the file to set the CC field.

--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0f
 arch = alphaev56
 os = osf4.0f
 system = alphaev56, osf4.0f
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:51 2001
From: zeileis@ci.tuwien.ac.at (zeileis@ci.tuwien.ac.at)
Date: Thu, 11 Jan 2001 22:49:51 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
Message-ID: <200101112149.WAA26997@pubhealth.ku.dk>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:59 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Thu, 11 Jan 2001 22:49:59 +0100
Subject: [Rd] segmentation fault in integrate
Message-ID: <3A5E2A87.6864792F@ci.tuwien.ac.at>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 11 21:54:38 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 22:54:38 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101112154.WAA27100@pubhealth.ku.dk>

On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:

> Hi,
>
> The help file for strptime has the following code which doesn't work
> for me:
>
>      ## read in date info in format `ddmmmyyyy'
>      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>      z <- strptime(x, "%d%b%Y")
> > z
> [1] "NA" "NA" "NA" "NA"
>
> Do these work for other people?

Yes, on several platforms.  It will be a problem with your OS's strptime
code.  It must be, I think, as the alternative we supply works.

> whereas it works fine if I use a separator (/) in the date@
>
> > strptime("9/Feb/1960", "%d/%b/%Y")
> [1] "1960-02-09"
>
> > strptime("9Feb1960", "%d%b%Y")
> [1] "NA"

We really do not put out new features without testing them!


>
> Stephen
>
> p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
> does not recognise the -c switch for setting the carbon copy (CC)
> field, causing an error.  One solution might be to remove the -c
> argument from the cmdarg in bug.rerport(), or put a
> "~c joe@bloggs.com" directive at the end of the file to set the CC field.
>
> --please do not edit the information below--
>
> Version:
>  platform = alphaev56-dec-osf4.0f
>  arch = alphaev56
>  os = osf4.0f
>  system = alphaev56, osf4.0f
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Fri Jan 12 07:25:11 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Fri, 12 Jan 2001 08:25:11 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <200101112149.WAA26997@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>


> I tried to integrate numerically a function wich is similar to the
> following:
> 
> > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > dummy(-100)
> [1] 0
> > dummy(-1000)
> [1] NaN
> > dummy(-10000)
> [1] NaN
> 
> If I choose the lower boundary to be too small integrate causes a
> segmentation fault:
> 
> > library(integrate)
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
> > integrate(dummy, -10000, 0)$value
> Segmentation fault

Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
on SuSE 6.4 gives:

> integrate(dummy, -1000000, 0)$value
[1] NaN
Warning message: 
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...) 

I has not able to reproduce the segfault ;-)

BTW: if one uses

> dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
a) }

this returns

> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0, maxpts=1000)$value
[1] 0.6935715

Torsten

> 
> I'm running R.1.2.0 on Debian Linux.
> 
> Regards
> Achim
> 
> 
> > version
>          _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    2.0              
> year     2000             
> month    12               
> day      15               
> language R   
> 
> 
> 
> -------------------------
> 
> Achim Zeileis
> Institut für Statistik
> Technische Universität Wien
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 08:22:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 Jan 2001 08:22:42 +0000 (GMT)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>

On Fri, 12 Jan 2001, Torsten Hothorn wrote:

>
> > I tried to integrate numerically a function wich is similar to the
> > following:
> >
> > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > dummy(-100)
> > [1] 0
> > > dummy(-1000)
> > [1] NaN
> > > dummy(-10000)
> > [1] NaN
> >
> > If I choose the lower boundary to be too small integrate causes a
> > segmentation fault:
> >
> > > library(integrate)
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> > > integrate(dummy, -10000, 0)$value
> > Segmentation fault
>
> Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> on SuSE 6.4 gives:
>
> > integrate(dummy, -1000000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
>
> I has not able to reproduce the segfault ;-)
>
> BTW: if one uses
>
> > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> a) }
>
> this returns
>
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0, maxpts=1000)$value
> [1] 0.6935715

Better, try

dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}

that is, do your calculations on log scale as far as possible.  This is
more accurate than cop-ing out at Inf*0.

Even better, you can adjust the normal mean to cancel the linear term
exactly: dnorm(x, mu) has linear term -mu*x. So use

dummy <- function(x) exp(0.5)*dnorm(x, -1)

You will still need to adjust maxpts or find a sensible lower end.

(BTW, I don't get a segfault either, and we need you to debug it
on your system, I am afraid.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:15:37 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 12 Jan 2001 11:15:37 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121015.LAA02860@pubhealth.ku.dk>


ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> 
> > Hi,
> >
> > The help file for strptime has the following code which doesn't work
> > for me:
> >
> >      ## read in date info in format `ddmmmyyyy'
> >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> >      z <- strptime(x, "%d%b%Y")
> > > z
> > [1] "NA" "NA" "NA" "NA"
> >
> > Do these work for other people?
> 
> Yes, on several platforms.  It will be a problem with your OS's strptime
> code.  It must be, I think, as the alternative we supply works.
> 
> > whereas it works fine if I use a separator (/) in the date@
> >
> > > strptime("9/Feb/1960", "%d/%b/%Y")
> > [1] "1960-02-09"
> >
> > > strptime("9Feb1960", "%d%b%Y")
> > [1] "NA"
> 
> We really do not put out new features without testing them!


Also very strange on WinNT4.0 (R-1.2.0): 


  x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
  z <- strptime(x, "%d%b%Y")
  z
[1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"                 
"1960-07-30 01:00:00"


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:41:11 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 Jan 2001 11:41:11 +0100
Subject: [Rd] segmentation fault in integrate (PR#812)
References: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>
Message-ID: <3A5EDF47.83D1A4AE@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Fri, 12 Jan 2001, Torsten Hothorn wrote:
> 
> >
> > > I tried to integrate numerically a function wich is similar to the
> > > following:
> > >
> > > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > > dummy(-100)
> > > [1] 0
> > > > dummy(-1000)
> > > [1] NaN
> > > > dummy(-10000)
> > > [1] NaN
> > >
> > > If I choose the lower boundary to be too small integrate causes a
> > > segmentation fault:
> > >
> > > > library(integrate)
> > > > integrate(dummy, -100, 0)$value
> > > [1] 1.387143
> > > > integrate(dummy, -1000, 0)$value
> > > [1] NaN
> > > Warning message:
> > > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > > lower, upper, minpts, maxpts, functn, eps, ...)
> > > > integrate(dummy, -10000, 0)$value
> > > Segmentation fault
> >
> > Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> > on SuSE 6.4 gives:
> >
> > > integrate(dummy, -1000000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> >
> > I has not able to reproduce the segfault ;-)
> >
> > BTW: if one uses
> >
> > > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> > a) }
> >
> > this returns
> >
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0, maxpts=1000)$value
> > [1] 0.6935715
> 
> Better, try
> 
> dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}
> 
> that is, do your calculations on log scale as far as possible.  This is
> more accurate than cop-ing out at Inf*0.
> 
> Even better, you can adjust the normal mean to cancel the linear term
> exactly: dnorm(x, mu) has linear term -mu*x. So use
> 
> dummy <- function(x) exp(0.5)*dnorm(x, -1)
> 
> You will still need to adjust maxpts or find a sensible lower end.
> 
> (BTW, I don't get a segfault either, and we need you to debug it
> on your system, I am afraid.)


But crashes also on:
- NT4.0, R-1.2.0
- sparc-sun-solaris2.7, R-1.2.0
- SuSE 7.0, R-1.2.0 Patched (2001-01-07), integrate Version  2.2-3

Strange: With the same version of R-1.2.0 Patched (2001-01-07) and
integrate (2.2-3), the crash happens on SuSE 7.0, but not on SuSE 6.4,
as Torsten told us.

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 10:56:13 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 12 Jan 2001 11:56:13 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121056.LAA03597@pubhealth.ku.dk>

On Fri, 12 Jan 2001, Uwe Ligges wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> >
> > > Hi,
> > >
> > > The help file for strptime has the following code which doesn't work
> > > for me:
> > >
> > >      ## read in date info in format `ddmmmyyyy'
> > >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> > >      z <- strptime(x, "%d%b%Y")
> > > > z
> > > [1] "NA" "NA" "NA" "NA"
> > >
> > > Do these work for other people?
> >
> > Yes, on several platforms.  It will be a problem with your OS's strptime
> > code.  It must be, I think, as the alternative we supply works.
> >
> > > whereas it works fine if I use a separator (/) in the date@
> > >
> > > > strptime("9/Feb/1960", "%d/%b/%Y")
> > > [1] "1960-02-09"
> > >
> > > > strptime("9Feb1960", "%d%b%Y")
> > > [1] "NA"
> >
> > We really do not put out new features without testing them!
>
>
> Also very strange on WinNT4.0 (R-1.2.0):
>
>
>   x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>   z <- strptime(x, "%d%b%Y")
>   z
> [1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"
> "1960-07-30 01:00:00"

I don't get the NA. The 1am is a Windows bug: this only happens in
times prior to 1970, which for Windows do not exist.  It seems to assume
that if isdst is non-zero, it is DST, rather than for isdst > 0.
I have a workaround, so for 1.2.1 (on my machines) this will behave as
expected.

The date-time functions do depend on OS functions being correct, and
although I have done a lot of workarounds, no doubt more errors will
emerge.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 12 16:46:06 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 12 Jan 2001 17:46:06 +0100 (MET)
Subject: [Rd] match.call problem (PR#813)
Message-ID: <200101121646.RAA09768@pubhealth.ku.dk>


Previously reported by Martin as a plot.formula issue, but I believe
it boils down to this:

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,y=2,...)f(x,y=y,...)
> g(1)
f(x = x, ... = list(y = y, ...))
> g(1,b=2) 
f(x = x, ... = list(y = y, b = 2))
> g(1,y=2)
f(x = x, ... = list(y = y, ...))

Notice that ... appears if all actual arguments to g are matched in
the call to f. This is the *name* "..." as in as.name("..."). I would
have expected just ... = list(y = y) in those cases.

Simpler

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,...)f(x,...)
> g(1)
f(x = x, ... = list(...))
> g(1,2)
f(x = x, ... = list(..1 = 2))
> g(1,a=2)
f(x = x, ... = list(a = 2))

or yet again simpler

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g(1)
f(... = list(..1 = 1))
> g()
f(... = list(...))
> f()
f()


For comparison, Splus 3.4 has this kind of stuff:

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g()
f(... = list())
> f()
f(... = list())
> g(1)
f(... = list(1))
> g(a=1)  
f(... = list(a = 1))

I don't see why we don't do the same (although given differences in
lazy evaluation, there might be a point to it), but just getting rid
of the ... in the lists would help quite a bit.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 09:57:52 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 10:57:52 +0100 (MET)
Subject: [Rd] Memory problem ? (PR#814)
Message-ID: <200101150957.KAA22994@pubhealth.ku.dk>



Dear R-developers,

I have the following problem with R: When I try to scan a big file R
is sometimes killed by the operation system (after spinning the hard
disk for 10 minutes or so) or sometimes my X Window collapses. This
problem occurs only if I have many applications (e.g. Emacs, 
gnumeric, two gv, netscape) open at the same
time. On the other hand, if I use read.table() R reads the file without
problems even if many applications also open. 

I do not know whether this is a bug or I do something wrong. Please
let me know what is the case.

The details are given below. Please do not hesitate to contact me if
you need more information.


Many thanks,


Zoltan Barta



The details:

> version
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R                
> source("../moult/R/O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Killed

The file O.dat.R:
O.dat <- function(nev){
  f.nev <- paste(nev,".dat",sep="");
  what.l <- list(year=numeric(),week=numeric(),bird=numeric(),
                 event=character(),moult=character(),action=character(),
                 res=numeric(),fea1=numeric(),ml1=numeric(),brood=numeric(),
                 exper=numeric(),loc=numeric(),uval=numeric());
  data.frame(scan(f.nev,what=what.l,skip=1));
}


The first ten rows of the file "food12.dat":
year	week	bird	event	moult	action	res	fea1	ml1	brood	exper	loc	uval
0	15	0	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	1	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	2	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	3	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	4	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	5	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	6	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	7	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	8	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214

the file contains lines of similar data and it is generated by a Monte Carlo
simulation. 

My system:
Debian GNU/Linux 2.2 (potato)
Kernel 2.2.15
libc6 2.2-4
Memory: 60 MB
Swap 72 MB







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 10:22:40 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151022.LAA24305@pubhealth.ku.dk>


Dear R-developer,

Just some more details on the problem I reported several minutes ago.
On an NT machine (4.0 SP6) I got the following for the same task:

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              
> setwd("d:/ftp")
NULL
> source("O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Error: cannot allocate vector of size 723 Kb
> 

I hope this help a bit more.

Best wishes, 


Zoltan Barta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 15 10:35:36 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 15 Jan 2001 11:35:36 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151035.LAA24529@pubhealth.ku.dk>

> From: Z.Barta@bristol.ac.uk
> Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Memory problem 2 (PR#815)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Dear R-developer,
> 
> Just some more details on the problem I reported several minutes ago.
> On an NT machine (4.0 SP6) I got the following for the same task:
> 
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R              
> > setwd("d:/ftp")
> NULL
> > source("O.dat.R")
> > F12 <- O.dat("food12")
> Read 92669 lines
> Error: cannot allocate vector of size 723 Kb
> > 
> 
> I hope this help a bit more.

It doesn't.  On Windows, we need to know what you set --max-mem-size
to, and if you did not, what memory.size(max=TRUE) says and what your
physical memory is.

All this tells us is that you ran out of allocatable memory.  That's
not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de  Mon Jan 15 12:58:00 2001
From: jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?=22Dr=2E_Jens_Oehlschl=E4gel=22?=)
Date: Mon, 15 Jan 2001 13:58:00 +0100
Subject: [Rd] AW: par(par()) corrupts devices (PR#807)
Message-ID: <01C07EFB.2C8CA600.jens.oehlschlaegel@bbdo-interone.de>



Dear Prof. Ripley,

I do not insist that features are bugs, so I stop sending this to r-bugs 
and cc r-devel instead

> I am replying to this from the archive: I did not actually receive a 
copy.

But it is right to sent bug reports ONLY to r-bugs, isn't it?
I'am actually using a old version of outlook, and some mails from r-help 
appear as attachments, may it's an outlook problem.

> This is a feature!
> You set par(pin=), and that takes precedence over
> par(pty=).  Same with par(plt=).
>
> To unjam it, you need e.g.  par(mai=old.par$mai)
>
> I think that par(pty=) should revert to a default plot spec, and will
> change this.  But, the problem with restoring lists like that is that
> it depends on exactly the order of the params as they interact.
> It is *not* a good idea.  And no.readonly=T does not help as
> plt and pin are not readonly.  If the user has resized the device before
> restoration, it's pretty chancy what it gets set to.

Thank you for explaining the way it happens. I must admit, that again I am 
baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

I admit, I expected par(par()) not to change anything (I remember vague 
that it worked with the prototype), but in this case it is not (only) a 
problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
CHANGE the device: subsequent par(pty="s") are ignored.

I am shure I am not the only one who expected the on.exit() stuff within 
the following function to leave the graphical parameters UNCHANGED, but it 
doesn't.

somefunc <- function(){
	oldpin <- par(pin=par("pin"))
	on.exit(par(oldpin))
	plot(1,1)
}

windows(5,3)

par(pty="s")
plot(1,1)
# square
par(pty="m")
plot(1,1)

# which settings do we have before
par1 <- par()

somefunc()

# which settings do we have now
par2 <- par()
# do they differ: yes on plt
all.equal(par1, par2)

# reset plt
par(plt=par1$plt)

# which settings do we have now
par2 <- par()
# do they differ: no
all.equal(par1, par2)

par(pty="s")
plot(1,1)
#still not square
#i.e we have hidden parameters
#because all par() are restored to values where par(pty="s") did work

> if the user has resized the device before restoration, it's pretty chancy 
what it gets set to.

I find it frightening to discover that we obvisously have hidden device 
parameters, and more frigthening that they may be modified by resizing.
Sorry that I can't provide code fix, but this is far to deep within the 
heart of R.

Best regards


Jens Oehlschlägel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jan 15 12:57:30 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 Jan 2001 12:57:30 +0000 (GMT)
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
Message-ID: <200101151257.MAA13403@toucan.stats.ox.ac.uk>


> From: "Dr. Jens Oehlschlägel" <jens.oehlschlaegel@bbdo-interone.de>
> Date: Mon, 15 Jan 2001 13:58:00 +0100
> 
> Dear Prof. Ripley,
> 
> I do not insist that features are bugs, so I stop sending this to r-bugs 
> and cc r-devel instead
> 
> > I am replying to this from the archive: I did not actually receive a 
> copy.
> 
> But it is right to sent bug reports ONLY to r-bugs, isn't it?
> I'am actually using a old version of outlook, and some mails from r-help 
> appear as attachments, may it's an outlook problem.

My guess is that it was an R-bugs mail distribution problem at KU.
Certainly not your end.

> > This is a feature!

(I was being somewhat ironic. It was a design error.)

> > You set par(pin=), and that takes precedence over
> > par(pty=).  Same with par(plt=).
> >
> > To unjam it, you need e.g.  par(mai=old.par$mai)
> >
> > I think that par(pty=) should revert to a default plot spec, and will
> > change this.  But, the problem with restoring lists like that is that
> > it depends on exactly the order of the params as they interact.
> > It is *not* a good idea.  And no.readonly=T does not help as
> > plt and pin are not readonly.  If the user has resized the device before
> > restoration, it's pretty chancy what it gets set to.
> 
> Thank you for explaining the way it happens. I must admit, that again I am 
> baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
> RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

Should work in 1.2.1 if the size is unchanged.

> I admit, I expected par(par()) not to change anything (I remember vague 
> that it worked with the prototype), but in this case it is not (only) a 
> problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
> CHANGE the device: subsequent par(pty="s") are ignored.

No longer in 1.2.1.

> I am shure I am not the only one who expected the on.exit() stuff within 
> the following function to leave the graphical parameters UNCHANGED, but it 
> doesn't.
> 
> somefunc <- function(){
> 	oldpin <- par(pin=par("pin"))
> 	on.exit(par(oldpin))
> 	plot(1,1)
> }
> 
> windows(5,3)
> 
> par(pty="s")
> plot(1,1)
> # square
> par(pty="m")
> plot(1,1)
> 
> # which settings do we have before
> par1 <- par()
> 
> somefunc()
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: yes on plt
> all.equal(par1, par2)
> 
> # reset plt
> par(plt=par1$plt)
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: no
> all.equal(par1, par2)
> 
> par(pty="s")
> plot(1,1)
> #still not square
> #i.e we have hidden parameters
> #because all par() are restored to values where par(pty="s") did work
> 
> > if the user has resized the device before restoration, it's pretty chancy 
> what it gets set to.
> 
> I find it frightening to discover that we obvisously have hidden device 
> parameters, and more frigthening that they may be modified by resizing.
> Sorry that I can't provide code fix, but this is far to deep within the 
> heart of R.

That's not quite right.  R has several pars doing the same thing.  They
will give different answers after re-sizing, and the last one used wins
out.  S does not have this problem because (essentially) it does not
resize.  Ideally there would be a way to save just one of the 
conflicting options.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 15 16:05:15 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 15 Jan 2001 11:05:15 -0500 (EST)
Subject: [Rd] legend() patch never seems to have made it in
Message-ID: <Pine.LNX.4.30.0101151101270.24324-100000@bolker.zoo.ufl.edu>


  Perhaps I should have submitted this as a bug so that it would be
officially tracked.  It's not a big deal, but here it is again (I can't
remember which version this patch is against, but I don't think legend()
has changed since then ...)

  Basically, the problem is that if you want to have "opaque" points that
overlay lines (rather than using type="b" and having the lines leave a
little bit of space around the points), you can use pch=21,bg=par("bg"),
but this is hard to replicate in legend().

  For example:

x <- 1:10
y <- runif(10)
plot(x,y,type="l",ylim=c(0,1.2))
points(x,y,pch=21,bg="white")
legend(6,1.2,"foo",pch=21,pt.bg="white",lty=1)

  Here's the patch, which reverses the order of line- and point-drawing
so that points come later and can overwrite the lines:


*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }

      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }

      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:41:40 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:41:40 +0100 (CET)
Subject: [Rd] Re: announce: survival5 bug fix
In-Reply-To: <Pine.GSO.4.21.0101151050480.18938-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.LNX.4.21.0101152335130.612-100000@kleigh.nl>

Thomas Lumley skriver...

> Anyone using the penalised partial likelihood routines in survival5 should
> update their version. 
> 
> A bug has been fixed in the S package: in coxph() models with penalised
> likelihood and strata it was possible in some circumstances to get an
> infinite loop or perhaps an incorrect answer. 
> 
> The new version (2.3) is on cran.r-project.org and will percolate through
> CRAN in the next few days.

I had trouble installing this package (and its previous
version) on HP-UX. There is a name conflict in files agsurv3.c
and coxfit5.c. I get an "Inconsistent type declaration" error 
for the variable 'time'. Changing the name of the variable
solved the problem.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jan 15 23:03:27 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 16 Jan 2001 12:03:27 +1300
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
References: <200101151257.MAA13403@toucan.stats.ox.ac.uk>
Message-ID: <016801c07f47$5e8cb860$175dd882@stat.auckland.ac.nz>

Hi


> > I find it frightening to discover that we obvisously have hidden device
> > parameters, and more frigthening that they may be modified by resizing.
> > Sorry that I can't provide code fix, but this is far to deep within the
> > heart of R.
>
> That's not quite right.  R has several pars doing the same thing.  They
> will give different answers after re-sizing, and the last one used wins
> out.  S does not have this problem because (essentially) it does not
> resize.  Ideally there would be a way to save just one of the
> conflicting options.


The aim of this design was so that, for example, a plot size specified in
inches would retain its physical dimensions when the window was resized
(which does not happen in S as Brian has pointed out).  As you have
discovered, the design has some problems when you try to save and restore a
large list of graphics parameter settings.  We are currently working on some
new graphics features which will avoid this problem.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:53:47 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:53:47 +0100 (CET)
Subject: [Rd] Error diagnostics in hpdlfcn.c
Message-ID: <Pine.LNX.4.21.0101152345370.612-100000@kleigh.nl>


A while back I had trouble running R on HP-UX. R couldn't load
shared libraries, and I had no idea what was wrong. The problem
was in the system libraries. I didn't discover this until
someone suggested to add a request for diagnostic messages in
the call to shl_load. 

The problem was solved. It might be a good idea to include this
request for diagnostic messages in the distribution of R, it
might help other people encountering similar problems.


This is for R version 1.2.1:


--- src/unix/hpdlfcn.c  Mon Jan 15 17:12:58 2001
+++ src/unix/hpdlfcn.c.new      Mon Jan 15 17:13:45 2001
@@ -133,7 +133,7 @@
   if (fname == NULL)
     handle = PROG_HANDLE;
   else {
-    handle = shl_load(fname, mode, 0L);
+    handle = shl_load(fname, mode | BIND_VERBOSE, 0L);
     if (handle != NULL) {
       if ((entry = find_lib_entry(handle)) == NULL) {
        if ((entry = new_lib_entry(handle)) == NULL) {
 

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Wed Jan 17 02:52:00 2001
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Wed, 17 Jan 2001 03:52:00 +0100 (MET)
Subject: [Rd] PR#751
Message-ID: <200101170252.DAA19529@pubhealth.ku.dk>

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 07:01:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 08:01:11 +0100
Subject: [Rd] PR#751
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
References: <200101170252.DAA19529@pubhealth.ku.dk>
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Wed Jan 17 16:21:10 2001
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Wed, 17 Jan 2001 10:21:10 -0600
Subject: [Rd] PR#751
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 17:00:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 18:00:38 +0100
Subject: [Rd] PR#751
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 19:47:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 20:47:27 +0100
Subject: [Rd] PR#751
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Thu Jan 18 15:57:18 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Thu, 18 Jan 2001 16:57:18 +0100 (MET)
Subject: [Rd] dotplot: character size of labels (PR#816)
Message-ID: <200101181557.QAA13637@pubhealth.ku.dk>

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jänner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fisk@bowdoin.edu  Fri Jan 19 13:55:11 2001
From: fisk@bowdoin.edu (fisk@bowdoin.edu)
Date: Fri, 19 Jan 2001 14:55:11 +0100 (MET)
Subject: [Rd] colors not cycled in type=h plot (PR#817)
Message-ID: <200101191355.OAA25447@pubhealth.ku.dk>

Full_Name: steve fisk
Version: 1.2.0
OS: linux (rh6.2)
Submission from: (NULL) (139.140.37.198)


In the command below I expected a red line and a blue line, but I get two red
lines. 
I get the same behavior with type="s" as well. It appears to only use the first
color,
and does not cycle them as I would expect.

> plot(c(1,2),c(1,1),type="h",col=c("red","blue"))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 15:53:01 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 16:53:01 +0100 (MET)
Subject: AW: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101191553.QAA26938@pubhealth.ku.dk>



Thanks to Prof. Brian Ripley and Guido Masarotto for fixing the initial rescaling of windows(rescale="fixed").

Now I can provide more detailed desciptions how to replicate the other problems I observed.

concerning 
2) wrong row distances with windows(rescale="fit") 
just use function testit() to see what I mean

# comparing the two devices appears normal
testit(width=8, height=6)

# compare the two devices for DIN A4
# with rescale="fit" lines are closer together
testit(width=16.53543, height=11.69291)

# exagerate effect
testit(width=32, height=24)

## the following function closes all devices
## creates two devices of the specified size
## with rescale="R" and rescale="fit"
## determines cex needed to fill the window (in x direction) and fills it

testit <- function(width, height){
	stroptim <- function(str, width=NULL, height=NULL, units="user", range.cex=c(0.01, 24)){
		units <- match.arg(units, c("user", "figure", "inches"))
		m <- max(length(str), length(width), length(height))
		str <- rep(str, length=m)
		wcex <- hcex <- rep(Inf, m)
		if (!is.null(width)){
			fn <- function(cex, str, width)strwidth(str, cex=cex, units=units)-width
			frange <- rbind(fn(range.cex[1], str, width), fn(range.cex[2], str, width))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], width=width[i])
				  wcex[i] <- u$root
				}else{
				  wcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		if (!is.null(height)){
			fn <- function(cex, str, height)strheight(str, cex=cex, units=units)-height
			frange <- rbind(fn(range.cex[1], str, height), fn(range.cex[2], str, height))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], height=height[i])
				  hcex[i] <- u$root
				}else{
				  hcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		pmin(wcex, hcex)
	}

	while (length(dev.list())) dev.off()

	jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"

	windows(width=width, height=height)
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))

	windows(width=width, height=height, rescale="fit")
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	stroptim(jandltext, width=diff(par("usr")[1:2]))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))
}

concerning
3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well 
Degeneration of aspect ratio only happens if in WindowsNT | DisplayProperties | Plus! | ShowWindowContentsWhileDragging is ACTIVATED and one intensely uses the mouse to do extreme rescaling.
Since this windows option is easy to deactivate, I have no further problems with that.


Best regards


Jens Oehlschlägel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:01:07 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:01:07 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191601.RAA27053@pubhealth.ku.dk>

windows()
plot(1,1)
windows()
plot(1:2,1:2)
dev.list() # we have devices 2 and 3

# device 3 is active and in front
bringToTop(2) # does not work
bringToTop(3) # does not work also

Regards


Jens Oehlschlaegel

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 19 16:21:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Jan 2001 17:21:11 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191621.RAA27187@pubhealth.ku.dk>

On Fri, 19 Jan 2001 joehl@web.de wrote:

> windows()
> plot(1,1)
> windows()
> plot(1:2,1:2)
> dev.list() # we have devices 2 and 3
>
> # device 3 is active and in front
> bringToTop(2) # does not work
> bringToTop(3) # does not work also

That works exactly as documented on my machine.  It may depend which mode
you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
window is the whole frame, not the sub-window.  I don't know how to bring
sub-windows to the front.

I should point out this is very unlikely to be fixed.  There will be no
further Windows-specific development by me unless patches are supplied.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:52:44 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:52:44 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191652.RAA27462@pubhealth.ku.dk>

> That works exactly as documented on my machine.  It may depend which mode
> you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
> window is the whole frame, not the sub-window.  I don't know how to bring
> sub-windows to the front.

Now trying SDI it works for me as well. May be the help page should mention that it needs GUI preferences SDI. Nothing of importance for me, I just came across that because I wanted to use bringToTop() to automatically show the two devices alternately in the testit() function of the other mail.

It's anyhow astonishing how much you do to support windows. 
I am shure many people appreciate that as much as I do.

Best regards


Jens Oehlschlaegel

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Jan 19 23:52:19 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 20 Jan 2001 00:52:19 +0100 (MET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified (PR#819)
Message-ID: <200101192352.AAA28876@pubhealth.ku.dk>


I noticed this bug before in R 1.2.0. Can't remember whether it
was there in earlier versions.

    > help.start()
    Making links in ~/.R ...
    If /home/peter/sbin/netscape  is already running,       it is *not* restarted,
     and you must switch to its window.
    Otherwise, be patient..
    > help("help", package = "base")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    > help("help")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    Warning message:
    Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help("help")
    >

As you can see, a linked version of the helpfile is used if I
specify a package. But if I don't specify a package, the linked
helpfile is not found. The code in file "base" for function
help() that seems to generate this error is:

        lnkfile <-
            file.path(Sys.getenv("HOME"), ".R",
                      "library", package, "html",
                      paste(topic, "html", sep="."))

Since the variable packages at this point contains a list, the
variable lnkfile becomes a list.

This patch seems to solve the problem:


--- base	Mon Jan 15 18:01:16 2001
+++ base.new	Sat Jan 20 00:43:48 2001
@@ -10161,11 +10161,12 @@
                         ## we need to use the version in ~/.R if we can.
                             lnkfile <-
                                 file.path(Sys.getenv("HOME"), ".R",
                                           "library", package, "html",
                                           paste(topic, "html", sep="."))
-                            if (file.exists(lnkfile)) file <- lnkfile
+                            lnkfile <- lnkfile[file.exists(lnkfile)]
+                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
                         }
                         if (file == ofile) {
                             warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
                         }
                         file <- paste("file:", file, sep="")



Another thing: is it absolutely necessary to print the same four
lines each time htmlhelp is used? Can't this be switches off
with an option like htmlquiet or something? Or don't print these
lines if verbose == FALSE.

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Jan 20 01:31:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 20 Jan 2001 02:31:36 +0100 (CET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified
 (PR#819)
In-Reply-To: <200101192352.AAA28876@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101200226160.4357-100000@kleigh.nl>

kleiweg@let.rug.nl skriver...

> This patch seems to solve the problem:
> 
> 
> --- base	Mon Jan 15 18:01:16 2001
> +++ base.new	Sat Jan 20 00:43:48 2001
> @@ -10161,11 +10161,12 @@
>                          ## we need to use the version in ~/.R if we can.
>                              lnkfile <-
>                                  file.path(Sys.getenv("HOME"), ".R",
>                                            "library", package, "html",
>                                            paste(topic, "html", sep="."))
> -                            if (file.exists(lnkfile)) file <- lnkfile
> +                            lnkfile <- lnkfile[file.exists(lnkfile)]
> +                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
>                          }
>                          if (file == ofile) {
>                              warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
>                          }
>                          file <- paste("file:", file, sep="")

It doesn't always. For example, doing ?sin I get the non-linked 
files again.

First:
     file <- index.search(topic, INDICES, "AnIndex", type)
sets variable file to "/usr/local/R/lib/R/library/base/html/Trig.html"

Then, variable lnkfile is first set to:
[1] "/home/peter/.R/library/ctest/html/sin.html"
[2] "/home/peter/.R/library/base/html/sin.html"
Neither of these files exist, so in the second step, lnkfile
becomes empty.

-- 
Wekte priegel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan 21 06:15:03 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Jan 2001 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101210615.HAA27625@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 817 *
Subject: colors not cycled in type=h plot
From: fisk@bowdoin.edu
Date: Fri, 19 Jan 2001 14:54:39 +0100 (MET)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)

Directory:  In-Out

* PR# 814 *
Subject: Memory problem ?
From: Zoltan Barta <Z.Barta@bristol.ac.uk>
Date: Mon, 15 Jan 2001 09:54:16 +0000 (GMT Standard Time)
--scan crashes R on Linux: a memory allocation problem, probably
--Uses n= or nlines= in scan will use less memory, and read.table does.

Directory:  Installation

* PR# 806 *
Subject: configure error on alpha
From: Richard Beare <Richard.Beare@cmis.CSIRO.AU>
Date: Wed, 10 Jan 2001 16:52:58 +1100

Directory:  Language

* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 808 *
Subject: Time zone
From: Herve Morin <morin@mat.ulaval.ca>
Date: Wed, 10 Jan 2001 07:24:07 -0500
--This appears to be a complaint about a warning on a beta Mac version
--(but Macs are never mentioned!).  That version is incomplete.

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jan 21 19:17:24 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Sun, 21 Jan 2001 14:17:24 -0500 (EST)
Subject: [Rd] RW1021 and wine
Message-ID: <Pine.LNX.4.30.0101211414080.997-100000@bolker.zoo.ufl.edu>


  Just thought people might be interested to know that the latest version
of R-win now runs under Wine, the windows emulator for Linux (ver.
20001202).  (I originally tried this a couple of releases back because a
student seemed to be having system-specific problems and I was attempting
to be lazy.)  The recent switch from crtdll to msvcrt seems to have
helped with Wine compatibility.

  I didn't test it extensively: looked at the graphics demos (there were
some missing-font problems) and a few other things.

  (So, if you *really* want a GUI front-end under Linux, this might be one
way to do it ...)

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Mon Jan 22 09:43:39 2001
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Mon, 22 Jan 2001 10:43:39 +0100 (MET)
Subject: [Rd] interaction.plot (PR#820)
Message-ID: <200101220943.KAA09053@pubhealth.ku.dk>

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jan 23 15:55:59 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 23 Jan 2001 10:55:59 -0500
Subject: [Rd] Guidelines for print methods?
Message-ID: <3a6da51e.932051494@fisher.stats.uwo.ca>

Are there guidelines for what print methods should do?  The reason I
ask is that I was recently confused by what Sys.time prints:

> Sys.time()
[1] "2001-01-23 10:38:17"

I thought from the look of this that Sys.time returned a string, not
an object with a class.  (The help is clear that it returns an object,
but I didn't get that far.) The problem is that print.POSIXct() calls
print() to print the result, rather than cat(), like many other print
methods.

I prefer the printing using cat(), because then it's clear that
there's a print method involved, it's not print.default just
displaying a vector.

Of course, I could have a vector of multiple POSIXct values, in which
case calling print() would probably be appropriate.  (But it might
still be a good idea to use "quote=FALSE" to let me know there's
something special there.)

Shouldn't a print method give some indication that what is being
printed isn't a simple vector?  I'm interested in others' opinions on
this.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 23 17:57:11 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jan 2001 12:57:11 -0500
Subject: [Rd] 1.2.1 segfault
Message-ID: <3A6DC5F6.65C8C7C6@bank-banque-canada.ca>

I've trapped this segfault with gdb, but I'm not sure what it means or what to do
next.

Paul
_____

$ R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa5/gilp/R-versions/R-1.2.1/bin/R.bin
Warning: cannot determine current directory

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) c
Continuing.
 require("dse2"); require("curve")
Loading required package: dse2
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
[1] TRUE
Loading required package: curve
[1] TRUE
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)  system.info()
Undefined command: "system".  Try "help".
(gdb) c
Continuing.
 system.info()
          _
platform  sparc-sun-solaris2.6
arch      sparc
os        solaris2.6
system    sparc, solaris2.6
status
major     1
minor     2.1
year      2001
month     01
day       15
language  R
OSversion SunOS5
OStype    Unix
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
fuzz.small <- 1e-12
fuzz.large <- 1e-6
fuzz.very.large <- 1e-2
digits <- 18
all.ok <- T
test.rng <- list(kind="Wichmann-Hill",seed=c(979,1479,1542),normal.kind="Box-Muller")

>
> > > > > >
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
  z  <-  ARMA(A=array(c(1,.5,.3),c(3,1,1)),
              B=array(1,c(1,1,1)),
              C=NULL, description="simplified guide example")

  VARmodel <-l(z,simulate(z, rng=test.rng))
  SSmodel  <- l(to.SS(VARmodel),  VARmodel$data)
+
+ > > > > >
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

> gctorture()
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

>   tst <- spanSS.f <- span(SSmodel)

Program received signal SIGSEGV, Segmentation fault.
0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
1027   FORWARD_CHILDREN(s);
(gdb)  bt
#0  0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
#1  0x731c8 in R_gc_internal (size_needed=2) at memory.c:1670
#2  0x72dbc in Rf_allocVector (type=13, length=4) at memory.c:1542
#3  0x48794 in CPtrToRObj (p=0xd9fb78, arg=0xd9f208, Fort=1) at dotcode.c:180
#4  0x511d0 in do_dotCode (call=0x8ad148, op=0xd9f668, args=0xda163c,
    env=0xd9da48) at dotcode.c:1778
#5  0x56c44 in Rf_eval (e=0x3a9fb8, rho=0xd9da48) at eval.c:340
#6  0x58f18 in Rf_DispatchOrEval (call=0x3a94d0, generic=0x1632e8 "[",
    args=0x3a94b4, rho=0xd9da48, ans=0xefffc1c4, dropmissing=0) at eval.c:1386
#7  0xbea40 in do_subset (call=0x3a94d0, op=0x1c3754, args=0x3a94b4,
    rho=0xd9da48) at subset.c:471
#8  0x56aa0 in Rf_eval (e=0x3a94d0, rho=0xd9da48) at eval.c:317
#9  0x582c0 in do_set (call=0x3a95cc, op=0x1c3834, args=0x3a95b0, rho=0xd9da48)
    at eval.c:1008
#10 0x56aa0 in Rf_eval (e=0x3a95cc, rho=0xd9da48) at eval.c:317
#11 0x57c8c in do_begin (call=0x3c0e84, op=0x1c37c4, args=0x3a96e4,
    rho=0xd9da48) at eval.c:803
#12 0x56aa0 in Rf_eval (e=0x3c0e84, rho=0xd9da48) at eval.c:317
#13 0x570bc in Rf_applyClosure (call=0xd9d7fc, op=0x319cf4, arglist=0xb750c0,
    rho=0xb75aac, suppliedenv=0xd9d770) at eval.c:501
#14 0x7a1fc in applyMethod (call=0xd9d7fc, op=0x319cf4, args=0xb750c0,
    rho=0xb75aac, newrho=0xd9d770) at objects.c:117
#15 0x7a660 in Rf_usemethod (generic=0xefffc9b0 "genD", obj=0xd9f398,
    call=0x3c1870, args=0x15d400, rho=0xb75aac, ans=0xefffc9ac)
    at objects.c:252
#16 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb75aac) at objects.c:325
#17 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb75aac) at eval.c:317
#18 0x570bc in Rf_applyClosure (call=0x3db454, op=0x31df48, arglist=0xb750c0,
    rho=0xb792e4, suppliedenv=0x1b2868) at eval.c:501
#19 0x56ccc in Rf_eval (e=0x3db454, rho=0xb792e4) at eval.c:352
#20 0x58530 in Rf_evalList (el=0x3db4e0, rho=0xb792e4) at eval.c:1087
#21 0x56bd0 in Rf_eval (e=0x3db550, rho=0xb792e4) at eval.c:338
---Type <return> to continue, or q <return> to quit---
#22 0x57c8c in do_begin (call=0x3db56c, op=0x1c37c4, args=0x3db588,
    rho=0xb792e4) at eval.c:803
#23 0x56aa0 in Rf_eval (e=0x3db56c, rho=0xb792e4) at eval.c:317
#24 0x570bc in Rf_applyClosure (call=0xb79300, op=0x31a280, arglist=0xb6fc70,
    rho=0xb759e8, suppliedenv=0xb792c8) at eval.c:501
#25 0x7a1fc in applyMethod (call=0xb79300, op=0x31a280, args=0xb6fc70,
    rho=0xb759e8, newrho=0xb792c8) at objects.c:117
#26 0x7a660 in Rf_usemethod (generic=0xefffd3f8 "genD", obj=0xda0fc0,
    call=0x3dcd2c, args=0x15d400, rho=0xb759e8, ans=0xefffd3f4)
    at objects.c:252
#27 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb759e8) at objects.c:325
#28 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb759e8) at eval.c:317
#29 0x570bc in Rf_applyClosure (call=0x3a7dd4, op=0x31df48, arglist=0xb6fc70,
    rho=0xb699f0, suppliedenv=0x1b2868) at eval.c:501
#30 0x56ccc in Rf_eval (e=0x3a7dd4, rho=0xb699f0) at eval.c:352
#31 0x58f18 in Rf_DispatchOrEval (call=0x3a7e44, generic=0x163380 "$",
    args=0x3a7e28, rho=0xb699f0, ans=0xefffd89c, dropmissing=0) at eval.c:1386
#32 0xbf38c in do_subset3 (call=0x3a7e44, op=0x1d08ec, args=0x3a7e28,
    env=0xb699f0) at subset.c:758
#33 0x56aa0 in Rf_eval (e=0x3a7e44, rho=0xb699f0) at eval.c:317
#34 0x58f18 in Rf_DispatchOrEval (call=0x3a7458, generic=0x1632e8 "[",
    args=0x3a743c, rho=0xb699f0, ans=0xefffdae4, dropmissing=0) at eval.c:1386
#35 0xbea40 in do_subset (call=0x3a7458, op=0x1c3754, args=0x3a743c,
    rho=0xb699f0) at subset.c:471
#36 0x56aa0 in Rf_eval (e=0x3a7458, rho=0xb699f0) at eval.c:317
#37 0x582c0 in do_set (call=0x3a7538, op=0x1c3834, args=0x3a74c8, rho=0xb699f0)
    at eval.c:1008
#38 0x56aa0 in Rf_eval (e=0x3a7538, rho=0xb699f0) at eval.c:317
#39 0x57c8c in do_begin (call=0x3a7554, op=0x1c37c4, args=0x3a7570,
    rho=0xb699f0) at eval.c:803
#40 0x56aa0 in Rf_eval (e=0x3a7554, rho=0xb699f0) at eval.c:317
#41 0x573b4 in do_if (call=0x3a5434, op=0x1b22d4, args=0x3a5418, rho=0xb699f0)
---Type <return> to continue, or q <return> to quit---
    at eval.c:591
#42 0x56aa0 in Rf_eval (e=0x3a5434, rho=0xb699f0) at eval.c:317
#43 0x57c8c in do_begin (call=0x3a5450, op=0x1c37c4, args=0x3a5530,
    rho=0xb699f0) at eval.c:803
#44 0x56aa0 in Rf_eval (e=0x3a5450, rho=0xb699f0) at eval.c:317
#45 0x570bc in Rf_applyClosure (call=0xb596e0, op=0x319298, arglist=0xb7d308,
    rho=0xb7c390, suppliedenv=0xb58364) at eval.c:501
#46 0x7a1fc in applyMethod (call=0xb596e0, op=0x319298, args=0xb7d308,
    rho=0xb7c390, newrho=0xb58364) at objects.c:117
#47 0x7a660 in Rf_usemethod (generic=0xefffe580 "span", obj=0xda0fc0,
    call=0x3a79e4, args=0x15d400, rho=0xb7c390, ans=0xefffe57c)
    at objects.c:252
#48 0x7a930 in do_usemethod (call=0x46e1dc, op=0x1d0c50, args=0x46e188,
    env=0xb7c390) at objects.c:325
#49 0x56aa0 in Rf_eval (e=0x46e1dc, rho=0xb7c390) at eval.c:317
#50 0x570bc in Rf_applyClosure (call=0xb7e4b0, op=0x3223e8, arglist=0xb7d308,
    rho=0x1d16dc, suppliedenv=0x1b2868) at eval.c:501
#51 0x56ccc in Rf_eval (e=0xb7e4b0, rho=0x1d16dc) at eval.c:352
#52 0x582c0 in do_set (call=0xb7e5e4, op=0x1c3834, args=0xb7e5c8, rho=0x1d16dc)
    at eval.c:1008
#53 0x56aa0 in Rf_eval (e=0xb7e5e4, rho=0x1d16dc) at eval.c:317
#54 0x582c0 in do_set (call=0xb7e6c4, op=0x1c3834, args=0xb7e6a8, rho=0x1d16dc)
    at eval.c:1008
#55 0x56aa0 in Rf_eval (e=0xb7e6c4, rho=0x1d16dc) at eval.c:317
#56 0x6e0e8 in R_ReplConsole (rho=0x1d16dc, savestack=0, browselevel=0)
    at main.c:187
#57 0x6e85c in run_Rmainloop () at main.c:491
#58 0x6e8a0 in Rf_mainloop () at main.c:505
#59 0xc5d74 in main (ac=0, av=0xeffff1b4) at system.c:88
(gdb)
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:45:15 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:45:15 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231845.TAA29799@pubhealth.ku.dk>


R dumps core if the first command I use is Sys.time():

    > Sys.time()
    Segmentation fault (core dumped) 

This works fine:

    > s <- Sys.time()
    > s
    [1] "2001-01-23 19:38:49 CET"

This works fine too:

    > 1+1
    [1] 2
    > Sys.time()
    [1] "2001-01-23 19:40:56 CET"

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:56:25 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:56:25 +0100 (MET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
Message-ID: <200101231856.TAA29862@pubhealth.ku.dk>

Peter Kleiweg skriver...

> R dumps core if the first command I use is Sys.time():
> 
>     > Sys.time()
>     Segmentation fault (core dumped) 

(peter) ~ R -d gdb

[snip]

GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
(gdb) run
Starting program: /usr/local/R/lib/R/bin/R.bin

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

[snip]

Type `q()' to quit R.

> Sys.time()

Program received signal SIGSEGV, Segmentation fault.
0x401029ce in strftime () at strftime.c:287
strftime.c:287: No such file or directory.
(gdb)        


-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:00:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Jan 2001 20:00:08 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231900.UAA29899@pubhealth.ku.dk>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

>
> R dumps core if the first command I use is Sys.time():
>
>     > Sys.time()
>     Segmentation fault (core dumped)
>
> This works fine:
>
>     > s <- Sys.time()
>     > s
>     [1] "2001-01-23 19:38:49 CET"
>
> This works fine too:
>
>     > 1+1
>     [1] 2
>     > Sys.time()
>     [1] "2001-01-23 19:40:56 CET"

It does not fail on my RH6.2 systems, so can you debug it please?

>
> --please do not edit the information below--
>
> Version:
>  platform = i586-pc-linux-gnu
>  arch = i586
>  os = linux-gnu
>  system = i586, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:05:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 Jan 2001 19:05:42 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <200101231856.TAA29862@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

> Peter Kleiweg skriver...
>
> > R dumps core if the first command I use is Sys.time():
> >
> >     > Sys.time()
> >     Segmentation fault (core dumped)
>
> (peter) ~ R -d gdb
>
> [snip]
>
> GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
> (gdb) run
> Starting program: /usr/local/R/lib/R/bin/R.bin
>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> [snip]
>
> Type `q()' to quit R.
>
> > Sys.time()
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x401029ce in strftime () at strftime.c:287
> strftime.c:287: No such file or directory.
> (gdb)

Is this the RH5.0 you mentioned earlier (that gdb is pretty ancient)?  Did
you set TZ as advised in ?DateTimeClasses to work around bugs in deficient
Linux distros?  RH6.2's strftime will crash on POSIXlt (and its man page)
correct inputs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 22:53:03 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 23 Jan 2001 23:53:03 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>
Message-ID: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>

Prof Brian D Ripley skriver...

> Is this the RH5.0 you mentioned earlier (that gdb is pretty
> ancient)?

Yes, it is. Using it quite a while now.

> Did you set TZ as advised in ?DateTimeClasses to work around
> bugs in deficient Linux distros? RH6.2's strftime will crash
> on POSIXlt (and its man page) correct inputs.

Setting TZ has no effect. R still dumps core. I don't see the
point of setting TZ, since it is unset in datetime.c

I now do remember I had inexplicable core dump with strftime (or
a similar function) in another program. It was a while back, I
can't recall the details, nor do I remember the program.

In another mail you ask me to debug the problem. I have no
experience debugging large programs, and if the problem is
caused by a faulty library function I don't see the point
trying.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 08:54:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 24 Jan 2001 08:54:09 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>

On Tue, 23 Jan 2001, Peter Kleiweg wrote:

> Prof Brian D Ripley skriver...
>
> > Is this the RH5.0 you mentioned earlier (that gdb is pretty
> > ancient)?
>
> Yes, it is. Using it quite a while now.
>
> > Did you set TZ as advised in ?DateTimeClasses to work around
> > bugs in deficient Linux distros? RH6.2's strftime will crash
> > on POSIXly (and its man page) correct inputs.
>
> Setting TZ has no effect. R still dumps core. I don't see the
> point of setting TZ, since it is unset in datetime.c

It is only unset (if possible) if it was initially unset. You do seem to
give the idea that you think the R developers do not know what they are
doing! Did you actually test your hypothesis?  If you did, and it is
correct, that is another bug of your system. On RH6.2

blackcap% setenv TZ GMT0DST
blackcap% R
> Sys.getenv("TZ")
       TZ
"GMT0DST"
> Sys.time()
[1] "2001-01-24 08:47:26 GMT"
> Sys.getenv("TZ")
       TZ
"GMT0DST"


> I now do remember I had inexplicable core dump with strftime (or
> a similar function) in another program. It was a while back, I
> can't recall the details, nor do I remember the program.
>
> In another mail you ask me to debug the problem. I have no
> experience debugging large programs, and if the problem is
> caused by a faulty library function I don't see the point
> trying.

But you did send a debug log to R-devel shortly after I asked
which told me the error was in strftime....  It would have been
helpful to have put that (and your Linux distro) in the original message.

Please do remember that there is not a technical support section receiving
these bug reports, but a group of volunteers,  those who in the main
provided you with the software in the first place.  Incomplete and
inaccurate reports make their task harder than necessary, and that's
unkind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Jan 24 09:30:31 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 24 Jan 2001 10:30:31 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0101241017370.670-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Tue, 23 Jan 2001, Peter Kleiweg wrote:
> 
> > Prof Brian D Ripley skriver...

> > > Did you set TZ as advised in ?DateTimeClasses to work around
> > > bugs in deficient Linux distros? RH6.2's strftime will crash
> > > on POSIXly (and its man page) correct inputs.
> >
> > Setting TZ has no effect. R still dumps core. I don't see the
> > point of setting TZ, since it is unset in datetime.c
> 
> It is only unset (if possible) if it was initially unset.

There might be some logic behind this, but don't expect every
outsider to understand this. I just noticed setting TZ has no
effect.

> You do seem to
> give the idea that you think the R developers do not know what they are
> doing! Did you actually test your hypothesis?  If you did, and it is
> correct, that is another bug of your system. On RH6.2

I read the code in datetime.c. In there TZ is unset. I have no
overview on how this code is used.
 
> > In another mail you ask me to debug the problem. I have no
> > experience debugging large programs, and if the problem is
> > caused by a faulty library function I don't see the point
> > trying.
> 
> But you did send a debug log to R-devel shortly after I asked
> which told me the error was in strftime....  It would have been
> helpful to have put that (and your Linux distro) in the original message.

I only copied something I saw being done in another mail I
received just after I sent my first message. As to debugging the
complete code, see how it got to this error, that is something
beyond me.
 
> Please do remember that there is not a technical support section receiving
> these bug reports, but a group of volunteers,  those who in the main
> provided you with the software in the first place.  Incomplete and
> inaccurate reports make their task harder than necessary, and that's
> unkind.

Well, I'm not a professional either. I don't file bug reports
demanding a solution. I thought bug reports might be useful to
the developers. Perhaps you should add a warning to the help on
bug.report, something like "don't bother submitting a bug report
if you haven't a clue".

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 24 11:21:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jan 2001 12:21:59 +0100
Subject: [Rd] DSC 2001: 2nd CFP
Message-ID: <14958.47831.121738.844217@mithrandir.hornik.net>

DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001/
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universität Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Doug Bates			University of Wisconsin, Madison
  Roger Bivand			University of Bergen 
  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  John Eaton			University of Wisconson, Madison
  Robert Gentleman		Harvard University
  Torsten Hothorn		Universität Erlangen
  Kurt Hornik			Technische Universität Wien  
  Stefano Iacus			Università degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Friedrich Leisch		Technische Universität Wien
  Uwe Ligges			Universität Dortmund
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mächler		ETH Zurich
  Duncan Murdoch		University of Western Ontario 
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universität Wien
  Martyn Plummer		International Agency for Research on Cancer
  Brian Ripley			University of Oxford
  Antony Rossini		University of Washington
  Günther Sawitzki		Universität Heidelberg
  David Smith			MathSoft
  Detlef Steuer			Universität der Bundeswehr, Hamburg
  Deborah Swayne		AT&T Labs
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota
  Antony Unwin			Universität Augsburg
  Gregory Warnes		Pfizer Global Research & Development
  Chen Xun			Merck Research Laboratories

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fujimori@grafin.fujimori.cache.waseda.ac.jp  Wed Jan 24 22:26:45 2001
From: fujimori@grafin.fujimori.cache.waseda.ac.jp (Yoriaki FUJIMORI)
Date: Wed, 24 Jan 2001 22:26:45 +0000
Subject: [Rd] Re: [R] RPM of R-1.2.1 for RH 7?
In-Reply-To: Your message of "Wed, 24 Jan 2001 11:01:32 +0100."
 <XFMail.010124110132.plummer@iarc.fr>
Message-ID: <200101241326.WAA00300@grafin.fujimori.cache.waseda.ac.jp>


As for R on Linux/Alpha, people had better think about compiling sources
with Compaq's ccc/cxx/fort.  These compilers create far better code
than GNU's gcc/g++/g77 for Alpha.  R compiled by GNU's compilers runs
slow.
I do not know if R-developers are running Linux/Alpha boxes at hand.
(Probably not.) 

Yoriaki Fujimori
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jan 24 19:12:49 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 24 Jan 2001 20:12:49 +0100 (MET)
Subject: [Rd] adjustment of expressions with mtext(..., las=2) (PR#823)
Message-ID: <200101241912.UAA12694@pubhealth.ku.dk>

[Subject renamed for bug report]


Don Wingate wrote:
[...]
> For example:
> 
>         math.names.text <- c("x1^2", "x2^2", "x2%*%x3) # in actual use,
> dynamically created.
>         math.expressions <- parse(text=math.names.text)
>         dotplot(1:3, labels=math.expressions)
[...] 
> By the way, I notice that when using math expressions as the labels in
> dotplot, the positioning of the labels is off to the right (and off the
> visible screen). Is this a bug in the way that the size of the math
> expressions are computed?


Yes, it looks like a bug. I try to simplify it:

When using mtext(..., las=2, adj=anything), the argument adj doesn't
seem to have any effect:

  plot(1:10)
  mtext("x^2 + x^3", side = 2, las=2, at=3, line=3, adj=0) # works fine
...

  # but here it is not left justified at line=3:
  mtext(expression(x^2 + x^3), side = 2, las=2, at=7, line=3, adj=0) 

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Wed Jan 24 23:00:41 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 00:00:41 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242300.AAA13617@pubhealth.ku.dk>

Having trouble with netCDF since I upgraded to 1.2.1 (did directly
from 1.1.1).  Package was recompiled after the upgrade.

Symptoms:
open.netCDF returns cleanly, but read.netCDF causes R to segfault
and dump core.  What else do you need me to write to help?

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:netCDF, package:RODBC, package:ts, package:local, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 23:09:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 00:09:18 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242309.AAA13649@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> Having trouble with netCDF since I upgraded to 1.2.1 (did directly
> from 1.1.1).  Package was recompiled after the upgrade.

You did use netCDF_1.1 for 1.2.1 did you.  I wonder?
netCDF_1.0-1 will not work.

> Symptoms:
> open.netCDF returns cleanly, but read.netCDF causes R to segfault
> and dump core.  What else do you need me to write to help?

The first item is to report that it had passed R CMD check netCDF?  That
uses read.netCDF.  If so the problem is data-specific, if not it
is with your installation.  So we either need the data or a lot
more about your installation of netCDF.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:49 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:49 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13932@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:38 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:38 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13918@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:43:48 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:43:48 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250043.BAA14088@pubhealth.ku.dk>

Another interesting point - read.netCDF does *not* cause
R to dump core if debug(read.netCDF) is on. To be clear:

> rm(list=ls(all=T))
> library(netCDF)

# --- works ---
> debug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")

--- lots of stuff deleted ---

> length(z)
[1] 143
--- what it should be

> close.netCDF(fd)
[1] TRUE   

#--- end works ---

That works fine.  Carrying on in the same session:

# --- doesn't work ---

> rm(z,fd)
> undebug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")
Segmentation fault (core dumped)   

# --- end doesn't work ---

Now more puzzled.

Jason Turner
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 25 07:14:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 08:14:02 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250714.IAA15026@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> NetCDF installation:  version 3.4, built from source.
> Other NetCDF utilities continue to work nicely, which
> is how I'm working around the issue.  Now, I'm taking
> existing netCDF files, converting them to csv files,
> and either reading them directly, or loading them
> to PostgreSQL, and using RPgSQL or RODBC.  Conversion
> to csv is done using home-brewed c programs which
> were dynamically linked against libnetcdf.so.  As
> such, I'm pretty sure the library is still working fine.
>
> I have a nice sample netCDF file, but I doubt it's appropriate
> for the bugs list (waste of bandwidth).  It's just under 2K.

I think the thing to do now is to contact the netCDF package
maintainer (Thomas Lumley) with that example.

As I am sure you appreciate we need to eliminate the simple causes first,
and they are common.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holst@math.ku.dk  Thu Jan 25 14:41:12 2001
From: holst@math.ku.dk (holst@math.ku.dk)
Date: Thu, 25 Jan 2001 15:41:12 +0100 (MET)
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
Message-ID: <200101251441.PAA24001@pubhealth.ku.dk>

Dear Sirs,

I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
The configure-script runs without any problems but during 'make' I receive
the following error-message:
[......]
g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
g77 -mieee  -g -O2 -c eigen.f -o eigen.o
g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
ranlib libappl.a
#make: No such file or directory
*** Exit 1
Stop.
*** Exit 1
Stop.
*** Exit 1
Stop.
fenchel:/net/prod/appl/R/R-1.2.1/>

The same problem appears when I try to compile v.1.2.0.

What is wrong?

Best regards
Klaus Holst



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 26 08:44:33 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 26 Jan 2001 09:44:33 +0100
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
In-Reply-To: <200101251441.PAA24001@pubhealth.ku.dk>
References: <200101251441.PAA24001@pubhealth.ku.dk>
Message-ID: <14961.14577.567763.570686@mithrandir.hornik.net>

>>>>> holst  writes:

> Dear Sirs,
> I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
> The configure-script runs without any problems but during 'make' I receive
> the following error-message:
> [......]
> g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
> g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
> g77 -mieee  -g -O2 -c eigen.f -o eigen.o
> g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
> ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
> cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
> lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
> splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
> chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
> dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
> ranlib libappl.a
> #make: No such file or directory
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> fenchel:/net/prod/appl/R/R-1.2.1/>

> The same problem appears when I try to compile v.1.2.0.

> What is wrong?

DEC make, I think :-)

But anyway, the problem should be fixed in the current r-patched
snapshot.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keith.briggs@bt.com  Fri Jan 26 11:48:02 2001
From: keith.briggs@bt.com (keith.briggs@bt.com)
Date: Fri, 26 Jan 2001 12:48:02 +0100 (MET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
Message-ID: <200101261148.MAA02460@pubhealth.ku.dk>

Dear Dr. Trapletti,

I am trying to use your tseries 0.7-0 package with R 1.2.1
(the latest version) under redhat linux 6.2, but the command
library(tseries)
causes R dump to core with a segmentation fault.

Do you have any suggestions how to fix this?

Thank you,
Keith

Dr. Keith M. Briggs, Complexity Research Group, BTexaCT.
Adastral Park admin2 pp5, Martlesham Heath, IP5 3RE, Suffolk,  UK
Tel: 01473 641 911  Fax: 01473 647 410.  Home tel:  01473 625 972
Personal homepage http://www.btexact.com/people/briggsk2/ 
NEW!  Exact Real software: http://www.btexact.com/people/briggsk2/XR.html



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 26 12:53:33 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jan 2001 13:53:33 +0100 (CET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
In-Reply-To: <200101261148.MAA02460@pubhealth.ku.dk>
Message-ID: <XFMail.010126135333.plummer@iarc.fr>

On 26-Jan-01 keith.briggs@bt.com wrote:
> Dear Dr. Trapletti,
> 
> I am trying to use your tseries 0.7-0 package with R 1.2.1
> (the latest version) under redhat linux 6.2, but the command
> library(tseries)
> causes R dump to core with a segmentation fault.

This is a system-specific problem.  The Fortran compiler that comes
with Red Hat 6.2 is known to cause problems when dynamically
loading shared objects. I'm using gcc 2.95.2 on Red Hat 6.2
which I  used to build both R and tseries. I do not have this problem.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Jan 26 14:56:45 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 26 Jan 2001 15:56:45 +0100
Subject: [Rd] Suggestion for an extension of the API
Message-ID: <3A71902D.87E0F755@olsen.ch>

Dear R Developers (I think in particular Brian)

Especially for larger optimization problems, it would be nice to have an
entry point for C/C++ code to the R optimizers (the ones which are called
when using optim()), where the client just has to provide the functions
fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
$RHOME/src/main/optim.c). Are there any plans for providing such an entry
point?

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 26 16:12:50 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2001 10:12:50 -0600
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: Adrian Trapletti's message of "Fri, 26 Jan 2001 15:56:45 +0100"
References: <3A71902D.87E0F755@olsen.ch>
Message-ID: <6rbssu9trx.fsf@franz.stat.wisc.edu>

Adrian Trapletti <adrian@olsen.ch> writes:

> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

There is such an entry point for the optimizer used by nlm.  It is
called optif9 and is declared in $RHOME/lib/R/include/R_ext/Applic.h

I can provide an example of its use if you wish.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 26 20:58:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Jan 2001 20:58:32 +0000 (GMT)
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: <3A71902D.87E0F755@olsen.ch>
Message-ID: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>

On Fri, 26 Jan 2001, Adrian Trapletti wrote:

> Dear R Developers (I think in particular Brian)
>
> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

No, but there can be.  There are at least some problems with error-handling
that need to be thought about.

Is what you want essentially to make vmmin (...) a public entry point,
avoiding having to deal with OptStruct's?  If that suffices, it would
be easy.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sat Jan 27 00:57:38 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sat, 27 Jan 2001 01:57:38 +0100 (MET)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
Message-ID: <200101270057.BAA07875@pubhealth.ku.dk>

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jan 27 01:09:03 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Jan 27 04:37:38 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 26 Jan 2001 22:37:38 -0600 (CST)
Subject: [Rd] Off-topic: Pretty-printing R (or S) code with GNU a2ps
Message-ID: <14962.20626.613619.35152@sonny.eddelbuettel.com>


--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


GNU a2ps is a fairly versatile text-to-anything processor.  It is useful for
typsetting source code from a wide variety of programming languages.  As R
(ie S) wasn't supported yet, I quickly cobbled a style sheet for the S
language together. Stylesheets are documented in the texinfo docs for a2ps,
and examples can be found in /usr/share/a2ps/sheets (on Debian at least,
others distros or unices probably have similar locations). IIRC a2ps exists
for NT but might require Cygwin. I typeset on Linux and only print on NT :)

Well, as I still don't really know what I'm doing with R, I would appreciate
comments / feedback / input from anyone could spend a moment or two on this.
To activate the stylesheet, simple patch
      /usr/share/a2ps/sheets/sheets.map
as per the short diff below which declares that the stylesheet s.ssh shall be
used for filenames matching /*.[RS]/.  The sheet itself is attached, just
place it in the same directory, ie /usr/share/a2ps/sheets/.

Usage then simply becomes
      a2ps -Pdisplay foo.R
or
      a2ps foo.R -o foo.ps; gv foo.ps
in case the "display" device isn't defined.

A few points / questions:

 * content:  a2ps uses tricks to use TeX symbols. It works well to typset
   <- with \leftarrow (uncomment that in s.ssh to see) but I couldn't tell
   it to parse
      a<-2
   it only finds <- with whitespace, eg
      a <- 2
   What could be done about <<- ?  Is there a matching TeX symbol?

 * more content: Is the list of keywords really that short? I couldn't find
   much else...  

 * scope:  Are other file extensions in use? Are there conventions for S or
   Splus files?  Any clever way to make a2ps understand the files in 
   $R_HOME/library/$PACKAGE/R  are also R?  Could file(1) be taught what 
   an R file is?

 * editorial: shall this be the s.ssh or r.ssh or rs.ssh? 

Thanks, Dirk


edd@sonny:/tmp/a2ps> cat sheets.map.diff
*** /usr/share/a2ps/sheets/sheets.map   Fri Jan 26 22:13:55 2001
--- sheets.map  Fri Jan 26 22:17:42 2001
***************
*** 373,378 ****
--- 373,381 ----
        <*python script*>
        /*.py/
 
+ # GNU R files, as well as S language files
+ s:    /*.[RS]/
+
  # REXX command files
  rexx: /*.cmd/i
                                                  


--oP8mQFO4PT
Content-Type: application/octet-stream
Content-Disposition: attachment;
	filename="s.ssh"
Content-Transfer-Encoding: base64

IyBTdHlsZSBzaGVldCBmb3IgdGhlIFMgbGFuZ3VhZ2UsIHBhcnRpY3VsYXJseSBpdHMgUiBk
aWFsZWN0CiMKIyBHTlUgUiBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBTLCBhIGxhbmd1YWdl
IChkZXZlbG9wZWQgYXQgQmVsbCAKIyBMYWJvcmF0b3JpZXMpIGZvciBzdGF0aXN0aWNhbCBj
b21wdXRpbmcgYW5kIGdyYXBoaWNzLiAKIwojIEEgc3VpdGFibGUgc2hlZXRzLm1hcCBlbnRy
eSB3b3VsZCBiZQojIEdOVSBSIGZpbGVzLCBhcyB3ZWxsIGFzIFMgbGFuZ3VhZ2UgZmlsZXMK
IyBzOgkvKi5bUlNdLwojCiMgQ29weXJpZ2h0IChjKSAyMDAxIERpcmsgRWRkZWxidWV0dGVs
CiMKCiMKIyBUaGlzIGZpbGUgaXMgcGFydCBvZiBhMnBzLgojCiMgVGhpcyBwcm9ncmFtIGlz
IGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkK
IyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNl
IGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIsIG9yIChhdCB5b3VyIG9wdGlvbikKIyBhbnkgbGF0ZXIgdmVyc2lvbi4K
IwojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdp
bGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVu
IHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1Mg
Rk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2
ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdp
dGggdGhpcyBwcm9ncmFtOyBzZWUgdGhlIGZpbGUgQ09QWUlORy4gIElmIG5vdCwgd3JpdGUg
dG8KIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCA1OSBUZW1wbGUgUGxhY2UgLSBT
dWl0ZSAzMzAsCiMgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuCiMKCnN0eWxlICJTIGxh
bmd1YWdlIiBpcwp3cml0dGVuIGJ5ICJEaXJrIEVkZGVsYnVldHRlbCA8ZWRkQGRlYmlhbi5v
cmc+Igp2ZXJzaW9uIGlzIDAuMQpyZXF1aXJlcyBhMnBzIDQuMTMKCmRvY3VtZW50YXRpb24g
aXMKICJhMnBzLVMgUHJldHR5IFByaW50ZXIgVmVyc2lvbiAwLjEgYXMgb2YgMjUtSmFuLTIw
MDEiCiAiVGhpcyBzdHlsZSBzaGVldCBpcyBwcmVsaW1pbmFyeS4iCmVuZCBkb2N1bWVudGF0
aW9uCgphbHBoYWJldHMgYXJlCiAgICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2Rl
ZmdoaWprbG1ub3BxcnN0dXZ3eHl6ISQqKy0uLzw9Pj9AXyIKY2FzZSBzZW5zaXRpdmUKCiNr
ZXl3b3JkcyBpbiBLZXl3b3JkX3N0cm9uZyBhcmUKIyAgIGZ1bmN0aW9uLDwtLDw8LQojZW5k
IGtleXdvcmRzCgprZXl3b3JkcyBpbiBLZXl3b3JkIGFyZQogICBlbHNlLCBmb3IsIGZ1bmN0
aW9uLCBpZiwgImluIiwgcmVwZWF0LCBzd2l0Y2gsIHdoaWxlCmVuZCBrZXl3b3JkcwoKI29w
dGlvbmFsIG9wZXJhdG9ycyBhcmUKb3BlcmF0b3JzIGFyZQogICA8PiBcbmVxLAogICAhPSBc
bmVxLAogICA8PSBcbGVxLAogICA+PSBcZ2VxLAogICA9ICBcZXF1aXYsCiMgICA8LSBcbGVm
dGFycm93LAogICA8LSwKICAgPDwtLAogICAtPiwKICAgXwplbmQgb3BlcmF0b3JzCgpzZXF1
ZW5jZXMgYXJlCiAgICAiIyIgQ29tbWVudCwKICAgIEMtc3RyaW5nLAogICAgQy1jaGFyCmVu
ZCBzZXF1ZW5jZXMKCmVuZCBzdHlsZQo=

--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: .signature
Content-Transfer-Encoding: 7bit



-- 
According to the latest figures, 43% of all statistics are totally worthless.

--oP8mQFO4PT--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From baron@cattell.psych.upenn.edu  Sun Jan 28 14:07:28 2001
From: baron@cattell.psych.upenn.edu (baron@cattell.psych.upenn.edu)
Date: Sun, 28 Jan 2001 15:07:28 +0100 (MET)
Subject: [Rd] variables in nls (PR#829)
Message-ID: <200101281407.PAA11919@pubhealth.ku.dk>

Full_Name: Jonathan Baron
Version: 1.2.1
OS: Linux
Submission from: (NULL) (151.197.202.231)


The following gives an error message:
> nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
Error in as.name(varName) : attempt to use zero-length variable name

The following runs fine:
> nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))

This happens even though doit.vm and doit[2,] are identical (and efft[])


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jan 28 15:01:27 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 28 Jan 2001 16:01:27 +0100 (CET)
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: <200101281407.PAA11919@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>



On Sun, 28 Jan 2001 baron@cattell.psych.upenn.edu wrote:

> Full_Name: Jonathan Baron
> Version: 1.2.1
> OS: Linux
> Submission from: (NULL) (151.197.202.231)
> 
> 
> The following gives an error message:
> > nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
> Error in as.name(varName) : attempt to use zero-length variable name
> 
> The following runs fine:
> > nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))
> 
> This happens even though doit.vm and doit[2,] are identical (and efft[])
> 

Looks like a problem (?) with all.vars():

 temp <- matrix(1:4, 2)
 all.vars(temp ~ 3) # OK
[1] "temp"

 all.vars(temp[1, ] ~ 3) # Here is the problem. 
[1] "temp" ""

 all.vars(temp[1, TRUE] ~ 3) # works again
[1] "temp"


If this is expected (?), because of an implicitly given empty variable
name ([1, ThisOne]) for example, nls() has to be fixed:


Just insert after the lines
 
  varNames <- varNames[is.na(match(varNames, names(start),
        nomatch = NA))]

the line 

  varNames <- varNames[varNames != ""]



Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 28 15:22:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 2001 16:22:17 +0100
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: Uwe Ligges's message of "Sun, 28 Jan 2001 16:01:27 +0100 (CET)"
References: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>
Message-ID: <x2zogbzopi.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Looks like a problem (?) with all.vars():
> 
>  temp <- matrix(1:4, 2)
>  all.vars(temp ~ 3) # OK
> [1] "temp"
> 
>  all.vars(temp[1, ] ~ 3) # Here is the problem. 
> [1] "temp" ""
> 
>  all.vars(temp[1, TRUE] ~ 3) # works again
> [1] "temp"
> 
> 
> If this is expected (?), because of an implicitly given empty variable
> name ([1, ThisOne]) for example, nls() has to be fixed:
> 
> 
> Just insert after the lines
>  
>   varNames <- varNames[is.na(match(varNames, names(start),
>         nomatch = NA))]
> 
> the line 
> 
>   varNames <- varNames[varNames != ""]

Thanks for the workaround, Uwe. In the longer run it is probably
better to make all.vars skip empty variable names.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Mon Jan 29 09:03:08 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Mon, 29 Jan 2001 10:03:08 +0100
Subject: [Rd] Suggestion for an extension of the API
References: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>
Message-ID: <3A7531CC.760EF67D@olsen.ch>

Prof Brian D Ripley wrote:

> On Fri, 26 Jan 2001, Adrian Trapletti wrote:
>
> > Dear R Developers (I think in particular Brian)
> >
> > Especially for larger optimization problems, it would be nice to have an
> > entry point for C/C++ code to the R optimizers (the ones which are called
> > when using optim()), where the client just has to provide the functions
> > fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> > $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> > point?
>
> No, but there can be.  There are at least some problems with error-handling
> that need to be thought about.
>
> Is what you want essentially to make vmmin (...) a public entry point,
> avoiding having to deal with OptStruct's?  If that suffices, it would
> be easy.

No, my intention was to have a standard entry point from C/C++ to all of these
functions and, hence, give the package developers more flexibility. E.g., in
tseries I currently use for the garch() some fortran optimizer which directly
calls C functions for calculating the gradient and likelihood. arma from
tseries uses the optim function from R and uses the call back mechanism to
calculate the SSE. In these case, I would like to have the same solution for
both the arma and garch classes, ideally using the optimizers from R, but for
performance reasons without the indirection of back-calling R to calculate the
likelihood etc. (I know, I could use optif9, but it would be nicer if all
available optimizers could be used that way.)

For example, having something like

void
vmmin(int n0, double *b, double *Fmin, int maxit, int trace, int *mask,
      double abstol, double reltol, int nREPORT, OptStruct OS,
      int *fncount, int *grcount, int *fail,
      int (*fminfn)(int, double *, OptStruct),
      void (*fmingr)(int, double *, double *, OptStruct))

and so on

in R_ext/Applic.h (as for optif9) would probably be enough. Or as Doug (Thanks
Doug! see below) explained me, additionally introducing a pointer to a state
variable which brings information into the likelihood or gradient evaluation,
like in optif9.

> Douglas Bates wrote:
...
>     optif9(ntheta, ntheta, theta, (fcn_p) mixed_fcn, (fcn_p)
>            mixed_grad, (d2fcn_p) 0, st, typsiz, 1.0 /*fscale*/,
>            1 /*method*/,1 /*iexp*/, &msg, -1 /*ndigit*/, 50 /*itnlim*/,
>            iagflg, 0 /*iahflg*/, -1. /*dlt*/, pow(epsm, 1.0/3.0)
>            /*gradtl*/, 0. /*stepmx*/, sqrt(epsm) /*steptl*/, newtheta,
>            logLik, grad, &itrmcd, a, work, &itncnt);
>
> This is not the most transparent code but one point to note is that
> you can pass a pointer to a structure like "state" to the call to
> optif9 and it will be passed unmodified when calling the function or
> gradient evaluation.  Often it is very difficult to get information
> into the function and gradient evaluations and one has to resort to
> global identifiers, which is risky.  Being able to pass that pointer
> through is very convenient.  (We modified the code to do that.)  For
> C++ you could pass through a pointer to an instance of a class then
> invoke a class method through that pointer.

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:27:11 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:27:11 +0100 (MET)
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
Message-ID: <200101300527.GAA28423@pubhealth.ku.dk>


Hi.

While there is an x-axis set up for:
> plot.factor(factor(1:3))

this axis is not present for
> plot.factor(factor(1:3), col="red")

which actually should just be the same as the first plot and call
barplot(table(.)), shouldn't it?  Where did the ticks and labels go?

Note that
> barplot (table(factor(1:3)), col="red")
has the x-axis.

Something funky is going on with axisnames or args in plot.factor that
I can't figure out.  The situation can be remedied with
> plot.factor(factor(1:3), col="red", axes=TRUE)

alas, why do you need "axes=TRUE"?

Regards,
  -tom



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
> 
> 
> > Now the (actually not so) funny thing is that the labels for the
> > x-axis disappear when I specify colors for the bars.  (R 1.2.1, Linux)
> > Ok, maybe the other thing I'll have to catch up on is the docu...
> 
> The logic around "axisnames" in plot.factor looks not quite right.
> Could you file a bug report on this so that we dont forget?
> 
> barplot(table(factor(1:3)),col="green")
> plot(factor(1:3),col="green",axes=T)
> 
> both work, although the latter is clearly silly.


--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:39:33 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:39:33 +0100 (MET)
Subject: [Rd] screen can't go back to (split) screen with log="y" plot (PR#831)
Message-ID: <200101300539.GAA28465@pubhealth.ku.dk>


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 07:40:51 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 08:40:51 +0100 (MET)
Subject: [Rd] screen can't go back to log="y" plot (PR#831)
Message-ID: <200101300740.IAA28911@pubhealth.ku.dk>

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dkwalker@online.no  Tue Jan 30 14:51:49 2001
From: dkwalker@online.no (David K Walker)
Date: Tue, 30 Jan 2001 14:51:49 +0000
Subject: [Rd] Is Omegahat in R a general language function bus ?
Message-ID: <3.0.6.32.20010130145149.00bd9810@online.no>

Hi !

Can we e.g. embed Perl in R and embed R in Java, start the program counter
in Java, call from Java to Perl via R, and then either (1) call back from
Perl to Java via R or (2) just plain return from Perl to Java via R ?
¨
My reason for asking this is general interest in extensible programming
languages.  My background is heavy in Forth, moderate in assembly language,
so far very light in Scheme, R, Java, Perl, XML, Python.  Later I hope to
implement new statistical software and port an existing large scale time
series database/editor/tablewriter as packages under Debian Gnu/Linux.

David Walker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Tue Jan 30 14:52:51 2001
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301452.PAA09308@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.1
OS: Windows NT4
Submission from: (NULL) (163.1.103.106)


Help file Rconsole.html as distributed with Windows binary distribution refers
at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
"R_USER".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 15:25:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 16:25:41 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301525.QAA09731@pubhealth.ku.dk>

Thanks.

A historical anomaly, now corrected.


> From: david.firth@nuffield.oxford.ac.uk
> Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Rconsole documentation (PR#832)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: David Firth
> Version: 1.2.1
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.106)
> 
> 
> Help file Rconsole.html as distributed with Windows binary distribution refers
> at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
> "R_USER".
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 15:32:30 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 16:32:30 +0100
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 30 Jan 2001 06:27:11 +0100 (MET)"
References: <200101300527.GAA28423@pubhealth.ku.dk>
Message-ID: <x28znt5a41.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi.
> 
> While there is an x-axis set up for:
> > plot.factor(factor(1:3))
> 
> this axis is not present for
> > plot.factor(factor(1:3), col="red")
> 
> which actually should just be the same as the first plot and call
> barplot(table(.)), shouldn't it?  Where did the ticks and labels go?
> 
> Note that
> > barplot (table(factor(1:3)), col="red")
> has the x-axis.
> 
> Something funky is going on with axisnames or args in plot.factor that
> I can't figure out.  The situation can be remedied with
> > plot.factor(factor(1:3), col="red", axes=TRUE)
> 
> alas, why do you need "axes=TRUE"?

Because of the logic of

        axisnames <- if (length(dargs <- list(...)) > 0) {
            nam <- names(dargs)
            ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
                nam) && dargs$xaxt != "n"))
        }

gives FALSE if there are any "..." arguments, and neither of axes= and
xaxt= are given.

I think the first part of plot.factor wants to be 

     if (missing(y) || is.factor(y)) {
	dargs <- list(...)
        axisnames <- if (!is.null(dargs$axes)) dargs$axes
	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
            else TRUE
    }

Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan 30 15:54:44 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 30 Jan 2001 15:54:44 +0000 (GMT)
Subject: [Rd] New aperm
Message-ID: <Pine.GSO.4.20.0101301530280.503-100000@laplace>

Hi Guys -- I have re-written aperm (from R-1.1.1) and I was going to call
it Aperm and bundle it with my tensor library, as it uses strides (like in
Python).  But there might be some interest in including it in the base.  
It is about 6 times quicker:

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.09 0.11 5.20 0.00 0.00
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.89  0.15 33.04  0.00  0.00

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.85  0.18 33.03  0.00  0.00
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.03 0.18 5.21 0.00 0.00

While studying the original aperm code (R-1.1.1) I noticed an error: there
is a missing break after the final case in the TYPEOF(a) switch before the
default which means that if anyone did call aperm with an array of VECSXP
then it would not complete:

> tmp <- array(list(3), c(2, 3))
> tmp[[2, 3]] <- "fred"
> tmp
     [,1]        [,2]        [,3]         
[1,] "Numeric,1" "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1" "Character,1"
> aperm(tmp)
Error in aperm(a, perm, resize) : invalid argument
> Aperm(tmp)
     [,1]        [,2]         
[1,] "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1"  
[3,] "Numeric,1" "Character,1"

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Tue Jan 30 16:31:31 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Tue, 30 Jan 2001 11:31:31 -0500 (EST)
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
Message-ID: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>


In our situation we sometimes run netscape from a another platform via ssh
and so the machine netscape is running on may not contain any R software,
or more precisely the user home account on the machine running
netscape is different from the account they initiated R and
so having netscape look into there home directory will NOT work.

It would desirable to have easy way to specificy a documentation root which
is an actual URL. Is there a place I can specify such a documentation
root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
this has been updated?)

Failing the configuration approach, it would seem some kind
of patch to the file ./src/library/base/R/unix/help.start.R

would be necessary? Anyone have a suggestion? I wouldn't
mind learning a little about scheme (i think this is the language
the file is written in?)


-walter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 17:37:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 18:37:06 +0100
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
In-Reply-To: Walter Tautz's message of "Tue, 30 Jan 2001 11:31:31 -0500 (EST)"
References: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>
Message-ID: <x23de154cd.fsf@blueberry.kubism.ku.dk>

Walter Tautz <wtautz@math.uwaterloo.ca> writes:

> In our situation we sometimes run netscape from a another platform via ssh
> and so the machine netscape is running on may not contain any R software,
> or more precisely the user home account on the machine running
> netscape is different from the account they initiated R and
> so having netscape look into there home directory will NOT work.
> 
> It would desirable to have easy way to specificy a documentation root which
> is an actual URL. Is there a place I can specify such a documentation
> root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
> this has been updated?)
> 
> Failing the configuration approach, it would seem some kind
> of patch to the file ./src/library/base/R/unix/help.start.R
> 
> would be necessary? Anyone have a suggestion? I wouldn't
> mind learning a little about scheme (i think this is the language
> the file is written in?)

Eh? help.start.R is written in R... However, since it's mostly
paste()ing together shell commands it may come across as something
from another language.

There's a remote= argument that you can pass to help.start [try
help.start(remote="http://stat.ethz.ch/R-alpha/")] , but it
doesn't solve the whole issue, e.g. a subsequent help(help) command
will cause a warning:

Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help(help) 

and proceed to try and get

file:/usr/local/lib/R/library/base/html/help.html

rather than something relative to the remote tree. 

I would seem that some of this stuff could do with a little redesign,
so suggestions are welcome. (The idea of having ~/.R is also
problematic if two R sessions for the same user both want to do
help.start())

Notice that using a remote documentation tree is going to lose you
some of the functionality that is normally present in the system: The
set of libraries available to a user may partly sit in his or her home
directory and the .lib.loc vector specifies which locations to search
for libraries. So it's not just a matter of specifying a document
root. 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stoet@pcg.wustl.edu  Tue Jan 30 22:26:41 2001
From: stoet@pcg.wustl.edu (stoet@pcg.wustl.edu)
Date: Tue, 30 Jan 2001 23:26:41 +0100 (MET)
Subject: [Rd] link in FAQ incorrect (PR#833)
Message-ID: <200101302226.XAA11875@pubhealth.ku.dk>

Hi,

the link to the R code for repeated measurement analyses of J Lindsey is
unfortunately not working. I am desperate for repeated measurements in
R; could you please help me out.

Sincerely,

Dr. G. Stoet

--
Dr. Gijsbert Stoet
email: stoet@thalamus.wustl.edu
Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
Phone: (314)7474095 Fax: (314)7474370




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jan 31 01:24:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 30 Jan 2001 20:24:25 -0500
Subject: [Rd] FW: sas.get error
Message-ID: <5429125E11E4D411AF7300805FE603A80FE0F3@groexmbcr02.pfizer.com>

A couple of months ago, I asked Frank Harrell (fharrell@virginia.edu), the
author of the Hmisc S-Plus library, about the reason for his "No porting to
R" requirement.  I may have previously posted his reply, but I don't see it
in the archives, so I'll send it again.

This is a edited version of our email conversation:

 Gregory R. Warnes:  

	The license to the Hmisc library explicitly prohibits modifying the
      code to work with "R".  Why have you made this restriction?
 
 Frank E. Harrell, Jr.:  

     Some time ago an R user took it on himself to start converting my
     libraries to R without at least sending me an E-mail.  He started
     the conversion at a time just when I was making a good deal of
     error corrections and extensions to one of the libraries, so that
     the R version would be instantly out of date and buggy.  I thought
     this was strange and wanted to prevent such problems in the future.
 
     In the meantime I have been looking at R a good deal to see what
     would be involved in conversion.  I have found many more
     inconsistencies between R and S than I originally thought.  Some of
     these inconsistencies are because of improvements, some make the
     language worse (e.g., omission of single precision objects in R, the 
     inability to attach directories).  I estimate it will take me about 200

     hours of work to convert, even if I didn't mind losing single precision

     and Trellis graphics in R.  I'm not ruling out a conversion in the
future 
     but it will take some resources.

     If resources become available in the future I would be interested in 
     starting a CVS server to work will a good R programmer in this
endeavor.  
     Above all I do not want two code bases; version control is needed with
a 
     single code base.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Jan 31 01:25:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jan 2001 20:25:53 -0500
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: Peter Dalgaard BSA's message of "30 Jan 2001 16:32:30 +0100"
References: <200101300527.GAA28423@pubhealth.ku.dk>
 <x28znt5a41.fsf@blueberry.kubism.ku.dk>
Message-ID: <px1ytkwlzy.fsf@infiniti.ece.cmu.edu>


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> tov@ece.cmu.edu writes:

snip

> > Something funky is going on with axisnames or args in plot.factor that
> > I can't figure out.  The situation can be remedied with
> > > plot.factor(factor(1:3), col="red", axes=TRUE)
> > 
> > alas, why do you need "axes=TRUE"?
> 
> Because of the logic of
> 
>         axisnames <- if (length(dargs <- list(...)) > 0) {
>             nam <- names(dargs)
>             ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
>                 nam) && dargs$xaxt != "n"))
>         }
> 
> gives FALSE if there are any "..." arguments, and neither of axes= and
> xaxt= are given.
> 
> I think the first part of plot.factor wants to be 
> 
>      if (missing(y) || is.factor(y)) {
> 	dargs <- list(...)
>         axisnames <- if (!is.null(dargs$axes)) dargs$axes
> 	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
>             else TRUE
>     }
> 
> Anyone know better?


This works for me at least.  Thank you very much,

  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Jan 31 07:31:52 2001
From: gb@stat.umu.se (gb)
Date: Wed, 31 Jan 2001 08:31:52 +0100 (CET)
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: <200101302226.XAA11875@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>

Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
in Netscape for some reason. Change back to
'alpha.luc/ac/be/~jlindsey/rcode.html'
and it works (at lest for me).

Göran

On Tue, 30 Jan 2001 stoet@pcg.wustl.edu wrote:

> Hi,
>
> the link to the R code for repeated measurement analyses of J Lindsey is
> unfortunately not working. I am desperate for repeated measurements in
> R; could you please help me out.
>
> Sincerely,
>
> Dr. G. Stoet
>
> --
> Dr. Gijsbert Stoet
> email: stoet@thalamus.wustl.edu
> Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
> Phone: (314)7474095 Fax: (314)7474370
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 31 12:42:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jan 2001 13:42:11 +0100
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: gb's message of "Wed, 31 Jan 2001 08:31:52 +0100 (CET)"
References: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>
Message-ID: <x24ryflwpn.fsf@blueberry.kubism.ku.dk>

gb <gb@stat.umu.se> writes:

> Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
> in Netscape for some reason. Change back to
> 'alpha.luc/ac/be/~jlindsey/rcode.html'
> and it works (at lest for me).

[r-bugs snipped from recipients, Cc. to Jim]

You mean http://alpha.luc.ac.be/~jlindsey/rcode.html

The very strange thing is that after I had done it once, then the link
in the FAQ suddenly worked.



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Jan  1 01:48:14 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 01 Jan 2001 01:48:14 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
References: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
Message-ID: <3a4fdfc9.752081@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 22:16:39 +0000 (GMT), you wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>  I saw in the docs somewhere that the DESCRIPTION text
>> would show up in the Latex output in some later version; is anyone
>> working on this?  If not, I might give it a shot.
>
>I've not seen that.  The latex versions are separate files, so it seems
>only to make sense if running pkg2tex on a package.

It was in the extensions manual, in the "Processing Rd format" section
where "R CMD Rd2txt" and "R CMD Rd2dvi" were being discussed.

>Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
>special treatment.  

That would be a good solution.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan  1 16:17:40 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 1 Jan 2001 17:17:40 +0100
Subject: [Rd] Re: Package overview document?
Message-ID: <14928.44452.10425.946942@mithrandir.hornik.net>

The issue recently raised by Duncan and discussed in some detail by him
and Brian was also raised by Robert a few weeks ago (I think in an email
that only I received).  Here are some more comments and thoughts.

Unfortunately, much of the way the on-line documentation (help or HTML)
systems currently work is not the result of careful design decisions.  I
think we now understand the limitations of what we currently have, but I
am not sure we already know what we will do in the future.  (The XHTML
versus XML issue comes to mind.)  As Brian pointed out, as we shall move
away from Rd format eventually, we should be careful about adding more
bells and whistles to it.

The entry points for packages documentation are

	library(help = PKG)
or
	help(package = PKG)

where PKG should really be a character string naming the package.  Also,
only the former one seems to be documented explicitly, so this is the
one we should use.  I would recommend against using

	?PKG

for this purpose, as this has the obvious name space issues, and the
former two are meant for documenting packages only.

The next question is what these entry points should do.  Currently, they
simply show the package INDEX file, irrespective of whether help.start()
was given or not.  I think this is a bug.  On the other hand, the INDEX
only exists as flat file and is not necessarily what would be obtained
by running R CMD Rdindex on the package.  Hence, we cannot automatically
create a HTML version from the Rd sources.  (In fact, the HTML system
does have entry points for each package, but these simply contain HTML
versions of the flat-file help/AnIndex data base.)

I am also not sure about recommending to add plain text to file `INDEX'
(as e.g. happens for the base package).  I am quite hesitant to suggest
any changes to this file, because a redesigned documentation system will
need a real index system but then perhaps we'd not be using `INDEX' per
se anymore.

I think the best thing we can currently do is to follow up on Fritz's
idea of using some or all info from the `DESCRIPTION' data base (Robert
also suggested that) in addition to listing or documenting the topics a
package provides docs for.  In the simplest case, we could have

	library(help = PKG)

do a file.show() on the result of combining PKG's DESCRIPTION and INDEX
files.  That is something we can easily do for 1.2.1, and I would make
the change if no one protests.

For the HTML help system, we have two alternatives: do *exactly* the
same or combine DESCRIPTION with the HTML package index.  Not so fast:
we also need to decide whether library(help = PKG) should use the
browser after help.start().  In any case, I think we should have the
build-help script add a simple HTML version of the package DESCRIPTION
to the top of 00Index.html.

For the LaTeX package documentation, the idea was to add a beautified
version of the package DESCRIPTION to the top of the file, e.g. as some
kind of abstract.  We need to be careful about this, though, because
there may be plain text interpreted by LaTeX as special markup.
(E.g., relation operators in Depends can easily be caught; on the other
hand, they might also appear in other fields, such as Description ...).

I am not sure how easy it is to convert the contents of DESCRIPTION into
HTML or LaTeX.  But for the plain text help system, I think the best we
can currently do is to add the contents of DESCRIPTION to what is shown
following library(help = PKG).  In particular, I think the Description
field of the DESCRIPTION data base can be used as a package ``intro''.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Tue Jan  2 13:21:13 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Tue, 2 Jan 2001 14:21:13 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding some (PR#799)
Message-ID: <200101021321.OAA15088@pubhealth.ku.dk>

[These things don't seem to be of too great importance and may well not meet
the criteria of a "bug", but, for what it's worth,I thought I'd submit them
to r-bugs anyway:]

This is the R version:
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

This is what we noticed:

1) In RGui, when something is typed in a command line, pressing <ESC> in
R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
the text is not deleted and the user is prompted for new input in the same
line.
Of course, this is rather a "cosmetical" issue, but it might be worth
considering to change this behaviour back to what it used to be in R1.0.0?

2) It looks like if for some functions, their help pages cannot be accessed
directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
find the appropriate help page (I am using winhelp, to be specific).
This might be because e.g. "setwd" shares the same help file with "getwd",
and it looks like only "getwd" is part of the index of the help system.
Here, the same holds for R1.0.0.

Regards,
Heinrich Rinner.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 2 Jan 2001 16:35:14 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
Message-ID: <200101021535.QAA18035@pubhealth.ku.dk>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:24 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 2 Jan 2001 15:35:24 +0000 (GMT)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding
 some (PR#799)
In-Reply-To: <200101021321.OAA15088@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10101021525500.18558-100000@toucan.stats>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 16:14:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 17:14:24 +0100
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 2 Jan 2001 16:35:14 +0100 (MET)"
References: <200101021535.QAA18035@pubhealth.ku.dk>
Message-ID: <x2lmsuszhb.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

[Something we've seen before as a followup to PR#799]

Argh. Looks like Jitterbug is having trouble if the Subject line
becomes longer than 80 characters. Looks like I'll need to go fix
bugs in the bug tracking software again! Meanwhile, could you please
truncate the header on followups on PR#799?

This is getting tiring. Anyone have suggestions for an alternate
bugfiling device that is actually being maintained, is easy to handle,
integrates well with the mailing lists, and doesn't require weird
sysadminning tasks such as adding one new mail user per bug report?
Bugzilla maybe?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Tue Jan  2 20:14:32 2001
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Tue, 2 Jan 2001 21:14:32 +0100 (MET)
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
Message-ID: <200101022014.VAA19397@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


i'm assuming that these are shortfalls in the documentation, and not bugs
in the function themselves.

1) the help page for pos.to.env gives two examples:

   Examples:

     pos.to.env(1)
     pos.to.env(length(search()))

the second of these returns NULL which (to me) does not seem to fit
the description of the function.  an explanation of why this seems
to be a special case would be helpful.


2)  the help page for the sys.xxx functions says:

   Notice that even though the `sys.'xxx functions are interpreted,
   their contexts are not counted nor are they reported. There is no
   access to them.

sys.status() seems to violate this description:

> test <- function () sys.status()
> test()
$sys.calls
$sys.calls[[1]]
test()

$sys.calls[[2]]
sys.status()


$sys.parents
[1] 0 1

$sys.frames
$sys.frames[[1]]
<environment: 0x10bf7a94>

$sys.frames[[2]]
<environment: 0x10bf7a5c>


3) the sys.xxx help page says:

   The parent of a function evaluation is the environment in which
   the function was called. It is not necessarily one less than the
   frame number of the current evaluation, nor the environment from
   which it is called.

i think the first sentence ought to read "the environment in which the
function was declared".  unless there is some syntactic subtlety that
makes the environment "in which [it] was called" different from the one
"from which [it] is called".

- peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 20:56:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 21:56:25 +0100
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
In-Reply-To: pperkins@ucsd.edu's message of "Tue, 2 Jan 2001 21:14:32 +0100 (MET)"
References: <200101022014.VAA19397@pubhealth.ku.dk>
Message-ID: <x2r92lwu4m.fsf@blueberry.kubism.ku.dk>

pperkins@ucsd.edu writes:

> Full_Name: peter perkins
> Version: 1.2.0
> OS: linuxppc
> Submission from: (NULL) (24.4.89.36)
> 
> 
> i'm assuming that these are shortfalls in the documentation, and not bugs
> in the function themselves.
> 
> 1) the help page for pos.to.env gives two examples:
> 
>    Examples:
> 
>      pos.to.env(1)
>      pos.to.env(length(search()))
> 
> the second of these returns NULL which (to me) does not seem to fit
> the description of the function.  an explanation of why this seems
> to be a special case would be helpful.

This is correct. The NULL environment is at the end of the search list
(also known as "package:base"). It is a feature not very much loved by
me, but a feature nevertheless. In this environment, objects are bound
directly to symbols rather than stored in a hash structure.

> 3) the sys.xxx help page says:
> 
>    The parent of a function evaluation is the environment in which
>    the function was called. It is not necessarily one less than the
>    frame number of the current evaluation, nor the environment from
>    which it is called.
> 
> i think the first sentence ought to read "the environment in which the
> function was declared".  unless there is some syntactic subtlety that
> makes the environment "in which [it] was called" different from the one
> "from which [it] is called".

Close, but it's the *second* sentence that needs to be changed... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 15:35:51 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Jan 2001 15:35:51 +0000 (GMT)
Subject: [Rd] problems with glm (PR#771)
In-Reply-To: <200101031410.PAA28684@alpha.luc.ac.be>
Message-ID: <Pine.GSO.4.05.10101031529360.20231-100000@toucan.stats>

[Moved back to R-devel. That's where we discuss bug reports.]

On Wed, 3 Jan 2001, Jim Lindsey wrote:

> > > Additional comment: I recommend that the aic functions for poisson and
> > > binomial have the explicit calculation of the log density replaced by
> > > the corresponding d function with the log option. This will avoid the
> > > production of NAs in certain cases of zeroes in tables.
> > 
> > Good idea, but could you supply examples so we can put them in the
> > regression tests?
> 
> Here is a simple and unrealistic (as no one would ever fit the model
> to these data) example that illustrates what can happen in more
> complex tables:
> 
> y <- matrix(c(2,0,7,3,0,9), ncol=2)
> x <- gl(3,1)
> glm(y~x, family=binomial)

That's not one. That fails because wt/n = NaN, and produces NaN not NA.
Now, could you please supply an example of what you reported, so we can
put it in the regression tests?  The BUGS section in the FAQ does ask for
one, with good reasons.  I've done as you suggested, and *not* fixed the
actual bug in this example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Jan  3 16:02:33 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 3 Jan 2001 17:02:33 +0100
Subject: [Rd] memory trouble
Message-ID: <200101031602.RAA15155@mailgate3.cinetic.de>

I don't know whether this belongs to r-devel or rather r-help.

Under RW1.11 --nsize=8M --vsize=512M I could

n <- 500000
m <- 20
x <- matrix(rnorm(n*m), ncol=m, nrow=n)
gc()

> n <- 500000
> m <- 20
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
> gc()
           free    total (Mb)
Ncells  8190509  8388608  160
Vcells 57033698 67108864  512


# under RW1.20 --vanilla the same fails, some testing shows

n <- 500000
m <- 20

x <- matrix(ncol=m, nrow=n)
x <- matrix(NA, ncol=m, nrow=n)
x <- matrix(0, ncol=m, nrow=n)
x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rep(0, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
gc()
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rnorm(n*m), ncol=m, nrow=n)

> n <- 500000
> m <- 20
> 
> x <- matrix(ncol=m, nrow=n)
> x <- matrix(NA, ncol=m, nrow=n)
> x <- matrix(0, ncol=m, nrow=n)
> x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> x <- matrix(rep(0, n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> gc()
           used (Mb) gc trigger  (Mb)
Ncells   174208  4.7     350000   9.4
Vcells 11109574 84.8   24307903 185.5
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb


Experimenting with --min-nsize=8M --min-vsize=512M --max-nsize=8M --max-vsize=512M did not help. 

What am I doing wrong?


Regards


Jens Oehlschlägel
(Research Consultant)


PIII NT4.0 Service Pack 6, 1 GB RAM, Physical Memory available due to task manager: 934600 K

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R  
_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 20:58:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 Jan 2001 20:58:21 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101031602.RAA15155@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>

Read the documentation: CHANGES or ?Memory.

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

You probably want to read the rest of the descriptions, and reading
documentation is always a good idea, so please do read the rest of the
CHANGES file.

There is a good reason for the numbers: the new malloc likes a contiguous
memory space, and R only reserves 256Mb initially (out of the 2Gb space on
non-server versions).  You can re-compile it to reserve more.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Jan  4 00:54:52 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 04 Jan 2001 01:54:52 +0100
Subject: [Rd] R sings, this time REALLY
Message-ID: <3A53C9DC.CD791A2E@univie.ac.at>

i did some debugging,
and now R really sings in the sense that there are 2 new "instruments",
a synthesized tenor voice and a synthesized soprano voice singing.

http:/sunsite.univie.ac.at/~neuwirth/Rcsound/
has the latest version

my server is up and running again.



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  4 09:55:38 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jan 2001 10:55:38 +0100
Subject: [Rd] memory trouble
In-Reply-To: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
References: <200101031602.RAA15155@mailgate3.cinetic.de>
 <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
Message-ID: <200101040955.KAA03084@lynne.ethz.ch>

In spite of Brian's good points, 
I believe we should help the users more.

R-1.1.1 --vanilla     had

  rnorm(1e7)

  >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
  >>       See "help(Memory)" on how to increase the heap size.

which is much more helpful
than the

  >> Error: cannot allocate vector of size 39062 Kb

that R-1.2.0  reports  (much much more rarely though, 
		        I couldn't reproduce it in a few tries !)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan  4 10:28:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 4 Jan 2001 10:28:26 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101041025130.22275-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)

The error is different: it is coming from inside malloc.  Under those
circumstances you really can't do much, in particular nothing that needs
memory allocation.

This is not a question of the heap being exhausted: it is a question of
the process having fit its limits.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 11:06:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Jan 2001 11:06:47 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101051101160.8064-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)


What I have done is to add a *warning* if the memory allocation is hit.
The warning is something like

   Reached total allocation of 191.36Mb: see help(memory.size)

I can't safely raise an error, and there are literally hundreds of 
places it could make an error, both in R and in a package.
You may or may not see the warning, depending how bad the error is.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Jan  5 16:11:13 2001
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 5 Jan 2001 17:11:13 +0100 (MET)
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
Message-ID: <200101051611.RAA27177@pubhealth.ku.dk>

When reading a file with scan(), the following crashes R under Solaris and
WinNT 4.0 (versions below):

> ads <- scan("Bltiadu.dat", what=list(,,))

Would an error message be more logical? Note that the followings work (the
data file has 201 lines and 3 columns):

> ads <- scan("Bltiadu.dat", what=list(0,,))
Read 603 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,0))
Read 201 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,))
Read 302 lines
Warning message: 
line 1 did not have 2 elements


> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

> version
         _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    2.0
year     2000
month    12
day      15
language R


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Jan  5 16:45:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 05 Jan 2001 11:45:31 -0500
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: <200101051611.RAA27177@pubhealth.ku.dk>
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <3a58f95a.70953969@fisher.stats.uwo.ca>

On Fri, 5 Jan 2001 17:11:13 +0100 (MET), you wrote in message
<200101051611.RAA27177@pubhealth.ku.dk>:

>When reading a file with scan(), the following crashes R under Solaris and
>WinNT 4.0 (versions below):
>
>> ads <- scan("Bltiadu.dat", what=list(,,))

I crash Win98 with the same sort of line; it's because list(,,) is the
same as list(), and scan isn't checking for this boundary case, I
guess...

>
>Would an error message be more logical? Note that the followings work (the
>data file has 201 lines and 3 columns):
>
>> ads <- scan("Bltiadu.dat", what=list(0,,))
>Read 603 lines

While fixing this, wouldn't it be better to change this message to 

"Read 603 cases"

since in fact, only 201 lines were read, 3 cases per line?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  5 16:56:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 2001 17:56:53 +0100
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: paradis@isem.univ-montp2.fr's message of "Fri, 5 Jan 2001 17:11:13 +0100 (MET)"
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <x2elyidjjd.fsf@blueberry.kubism.ku.dk>

paradis@isem.univ-montp2.fr writes:

> When reading a file with scan(), the following crashes R under Solaris and
> WinNT 4.0 (versions below):
> 
> > ads <- scan("Bltiadu.dat", what=list(,,))

Happens on Linux too. And you don't need a big file to provoke it:

$ cat > /tmp/junk
1 2 3
3 4 5
2 3 4
^D

...

Starting program: /usr/local/src/misc/r-release/BUILD/bin/R.bin --quiet
> scan('/tmp/junk', what=list(,,))

Program received signal SIGSEGV, Segmentation fault.
0x80d5160 in scanFrame (what=0x89e8260, maxitems=0, maxlines=0, flush=0, 
    fill=0, stripwhite=0x878b0f0, blskip=1) at ../../../R/src/main/scan.c:491
491     bch = fillBuffer(buffer, TYPEOF(VECTOR_ELT(ans, ii)), strip);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Jan  5 20:23:05 2001
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 5 Jan 2001 21:23:05 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052023.VAA28098@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.2.0
OS: linux
Submission from: (NULL) (144.81.31.148)


pairs(NxK_Matrix,panel=qqplot)

produces a message

Error in pairs.default(NxK_Matrix,panel=qqplot) :
   The panel function made a new plot


best regards and a happy new year

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 21:30:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Jan 2001 22:30:43 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052130.WAA28307@pubhealth.ku.dk>

On Fri, 5 Jan 2001 mvondavier@ets.org wrote:

> Full_Name: Matthias von Davier
> Version: 1.2.0
> OS: linux
> Submission from: (NULL) (144.81.31.148)
>
>
> pairs(NxK_Matrix,panel=qqplot)
>
> produces a message
>
> Error in pairs.default(NxK_Matrix,panel=qqplot) :
>    The panel function made a new plot

And the bug is?  I am baffled!  Please read the section on BUGS in the FAQ.
Acting as documented is not a bug, nor is giving an error message when a
function is used incorrectly.

A panel function is documented as

   panel: `function(x,y,...)' which is used to plot the contents of
          each panel of the display.

Note *contents*.  I don't think qqplot qualifies, so you get a message
about your error.  You probably want (untested)

panel.qqplot <- function(x, y, ...)
{
   res <- qqplot(x, y, ..., plot.it = FALSE)
   points(res$x, res$y)
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Sat Jan  6 22:19:46 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Sat, 6 Jan 2001 17:19:46 -0500 (EST)
Subject: [Rd] R/S-Plus compatibility package
Message-ID: <200101062219.RAA24588@jessie.research.bell-labs.com>

We're starting work on an R package and corresponding S-Plus library
to help programmers write software that will work in both systems.

Some descriptions and downloadable software are available on the
Omegahat web site, at
	 http://www.omegahat.org/SLanguage/

The strategy, as described there, is to be as back-compatible within R
and within S-Plus as possible, but provide tools and guidelines to
smooth over inconsistencies between the two implementations of the S
language.

The tools will include both S language and C/C++ support.  It's
starting off with the functions that access objects (get, etc.), a
couple of tools for dealing with language objects, and a bit of
miscellany.  More to come shortly.

If you're experienced or interested in writing software targeted to
both R and S-Plus, please take a look at the package.  It's at a very
early stage, and comments, suggestions of what should be in there, or
(especially) contributions are very much needed.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan  7 06:15:06 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Jan 2001 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101070615.HAA21659@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

* PR# 801 *
Subject: pos.to.env and sys.xxx documentation
From: pperkins@ucsd.edu
Date: Tue, 2 Jan 2001 21:14:31 +0100 (MET)

Directory:  Graphics

* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 802 *
Subject: crash with scan(..., what=list(,,))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Fri, 05 Jan 2001 17:10:42 +0100
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--
--Final para is almost certainly user error in using 
--  bug.report(gnome-support problems)  without quotes
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 795 *
Subject: Re: [Rd] some (may be related) problems with windows(rescale=)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 28 Dec 2000 20:22:51 +0000 (GMT)
* PR# 794 *
Subject: some (may be related) problems with windows(rescale=)
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Thu, 28 Dec 2000 17:54:47 +0100

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai-wang@uiowa.edu  Mon Jan  8 03:29:17 2001
From: kai-wang@uiowa.edu (kai-wang@uiowa.edu)
Date: Mon, 8 Jan 2001 04:29:17 +0100 (MET)
Subject: [Rd] random seed (PR#804)
Message-ID: <200101080329.EAA04375@pubhealth.ku.dk>

Full_Name: Kai Wang
Version: 1.2.0 (2000-12-15)
OS: Red Hat Linux 7.0
Submission from: (NULL) (128.255.176.68)


In simulation analyses that use function rnorm(1), I encountered the following
error message from time to time:

.Random.seed[2] is not a valid integer

The chance of such error message is about 1/20000 replications.

I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
compiled R myself, the same problem exists. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 07:40:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 07:40:17 +0000 (GMT)
Subject: [Rd] random seed (PR#804)
In-Reply-To: <200101080329.EAA04375@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101080738530.25276-100000@auk.stats>

On Mon, 8 Jan 2001 kai-wang@uiowa.edu wrote:

> Full_Name: Kai Wang
> Version: 1.2.0 (2000-12-15)
> OS: Red Hat Linux 7.0
> Submission from: (NULL) (128.255.176.68)
>
>
> In simulation analyses that use function rnorm(1), I encountered the following
> error message from time to time:
>
> .Random.seed[2] is not a valid integer
>
> The chance of such error message is about 1/20000 replications.
>
> I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
> compiled R myself, the same problem exists.

Can you confirm which random number generator you are using?
The default one?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 11:57:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 11:57:27 +0000 (GMT)
Subject: [Rd] cleaning up the BUGS list
Message-ID: <Pine.GSO.4.31.0101081153450.25779-100000@auk.stats>

In looking over the bugs list, it seems to me that most of them are
things we can no longer do anything about, because they are on old
versions or broken systems or were features or ....

There are now so many they obscure the bugs needing attention.

I am about the remove the following.  If anyone thinks they are still
relevant, could you please send a follow-up to R-bugs with details under
1.2.0 or later.  (Please do put (PR#xxx) on the subject line.)

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied
--(and there is no 256 col limit)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 694 *
Subject:  syntax confusion with function/non-function objects
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--Final para is almost certainly user error in using
--  bug.report(gnome-support problems)  without quotes
* PR# 734 *
Subject:  Assigning into a dataframe
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  9 17:25:42 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 9 Jan 2001 18:25:42 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101091725.SAA00060@pubhealth.ku.dk>

I find this a bit puzzling ...

> solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
[1] NaN Inf
> solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3) 
     [,1]
[1,] -Inf
[2,]  Inf

I would expect the answer to be c(-Inf, Inf), so why has the -Inf
been replaced by NaN in solve?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  9 18:21:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Jan 2001 18:21:23 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101091725.SAA00060@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>

On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:

> I find this a bit puzzling ...
>
> > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> [1] NaN Inf
> > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
>      [,1]
> [1,] -Inf
> [2,]  Inf
>
> I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> been replaced by NaN in solve?

Why would you expect it?  Did you actually check it?
You have 5x + 3y = Inf,  2x + y = 3
if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.

Once you have infinities, the standard laws of arithmetic break.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.CSIRO.AU  Wed Jan 10 05:53:03 2001
From: Richard.Beare@cmis.CSIRO.AU (Richard.Beare@cmis.CSIRO.AU)
Date: Wed, 10 Jan 2001 06:53:03 +0100 (MET)
Subject: [Rd] configure error on alpha (PR#806)
Message-ID: <200101100553.GAA02533@pubhealth.ku.dk>


Hi, 

I've found that the default options of gcc and g77 on alpha produce an
executable that suffers from floating exceptions. There seems to be a
problem with the configure scripts that prevents the --with-f77 option
working correctly. The configure script tests that f77 is running by
attempting to compile and link a dummy program - the link step seems
broken on the alpha (it doesn't like the command 

f77 -o conftest conftest.f -L/usr/local/lib

The command works fine without the -L switch.

)

my workaround was to remove $LIBS from the line
ac_link='${F77-f77} -o conftest${ac_exeext} $FFLAGS $LDFLAGS
conftest.$ac_ext $L
IBS 1>&5'

but a better alternative may be to just use the fortran compiler to
produce an object file rather than an executable.

R configured using the following options passes "make test"

R is now configured for alphaev56-dec-osf4.0d

  Source directory:          .
  Installation directory:    /usr/local/R
  C compiler:                cc  -ieee_with_inexact -std1 -g
  C++ compiler:              c++  -g -O2
  FORTRAN compiler:          f77  -fpe3 -g

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no



--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0d
 arch = alphaev56
 os = osf4.0d
 system = alphaev56, osf4.0d
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Jan 10 07:59:25 2001
From: telford@progsoc.uts.edu.au (telford@progsoc.uts.edu.au)
Date: Wed, 10 Jan 2001 18:59:25 +1100
Subject: [Rd] configure error on alpha (PR#806)
In-Reply-To: <200101100553.GAA02533@pubhealth.ku.dk>; from Richard.Beare@cmis.CSIRO.AU on Wed, Jan 10, 2001 at 06:53:03AM +0100
References: <200101100553.GAA02533@pubhealth.ku.dk>
Message-ID: <20010110185925.D1483@progsoc.uts.edu.au>

On Wed, Jan 10, 2001 at 06:53:03AM +0100, Richard.Beare@cmis.CSIRO.AU wrote:
> I've found that the default options of gcc and g77 on alpha produce an
> executable that suffers from floating exceptions.

I've been running R on alpha for about a year and haven't seen this
problem... can you provide a method to reproduce it?

> There seems to be a
> problem with the configure scripts that prevents the --with-f77 option
> working correctly. The configure script tests that f77 is running by
> attempting to compile and link a dummy program - the link step seems
> broken on the alpha (it doesn't like the command 
> 
> f77 -o conftest conftest.f -L/usr/local/lib
> 
> The command works fine without the -L switch.
> 
> )

The argument over whether the system should recognise
/usr/local/lib as a legitimate location for libraries
rages back and forth but believe me that there are many
systems that ONLY work with the -L switch.

Do you have something strange and nasty lurking in
/usr/local/lib, maybe old versions of something ?

Do you actually HAVE a directory /usr/local/lib ?

> R is now configured for alphaev56-dec-osf4.0d

OK, I have been using debian linux so there are
no doubt some differences right there. Also,
my chip is only ev4 (possibly irrelevant).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 09:39:56 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 09:39:56 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>
Message-ID: <Pine.GSO.4.20.0101100932280.503-100000@laplace>

On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:

> On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> 
> > I find this a bit puzzling ...
> >
> > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > [1] NaN Inf
> > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> >      [,1]
> > [1,] -Inf
> > [2,]  Inf
> >
> > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > been replaced by NaN in solve?
> 
> Why would you expect it?  Did you actually check it?
> You have 5x + 3y = Inf,  2x + y = 3
> if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> 
> Once you have infinities, the standard laws of arithmetic break.

What was puzzling was that the answers were not the same.  The two results
will have different effects in further calculations as NaN and -Inf are
not treated identically (e.g. max or min).  My understanding, supported by
the documentation, is that the two results should be identical, excepting
numerical accuracy.

In S+ the first version generates an error while the second gives c(-Inf,
Inf) as expected.  I think this is safer.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 11:01:57 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 12:01:57 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101101101.MAA07190@pubhealth.ku.dk>

On Wed, 10 Jan 2001, Jonathan Rougier wrote:

> On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:
>
> > On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> >
> > > I find this a bit puzzling ...
> > >
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > > [1] NaN Inf
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> > >      [,1]
> > > [1,] -Inf
> > > [2,]  Inf
> > >
> > > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > > been replaced by NaN in solve?
> >
> > Why would you expect it?  Did you actually check it?
> > You have 5x + 3y = Inf,  2x + y = 3
> > if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> >
> > Once you have infinities, the standard laws of arithmetic break.
>
> What was puzzling was that the answers were not the same.  The two results
> will have different effects in further calculations as NaN and -Inf are
> not treated identically (e.g. max or min).  My understanding, supported by
> the documentation, is that the two results should be identical, excepting
> numerical accuracy.

Really?  Which documentation?  I don't think they are the same once
non-finite numbers are involved, and ?solve did not lead me to believe
otherwise.

> In S+ the first version generates an error while the second gives c(-Inf,
> Inf) as expected.  I think this is safer.

The different is intentional: whoever wrote qr.coef put NAOK=TRUE
in R put not in S.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 11:19:14 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 11:19:14 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101101101.MAA07190@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.20.0101101115130.503-100000@laplace>

On Wed, 10 Jan 2001 ripley@stats.ox.ac.uk wrote:

> On Wed, 10 Jan 2001, Jonathan Rougier wrote:
> >
> > What was puzzling was that the answers were not the same.  The two results
> > will have different effects in further calculations as NaN and -Inf are
> > not treated identically (e.g. max or min).  My understanding, supported by
> > the documentation, is that the two results should be identical, excepting
> > numerical accuracy.
> 
> Really?  Which documentation?  I don't think they are the same once
> non-finite numbers are involved, and ?solve did not lead me to believe
> otherwise.

I think it is by ommision.  There is nothing in the solve documentation
that suggests that solve(A) %*% b and solve(A, b) will give different
answers if b contains non-finite values.  Therefore it is reasonable to
expect the answers to be the same.  May I suggest that a note might be
added to the documentation to highlight this?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From morin@mat.ulaval.ca  Wed Jan 10 12:24:07 2001
From: morin@mat.ulaval.ca (morin@mat.ulaval.ca)
Date: Wed, 10 Jan 2001 13:24:07 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101224.NAA09038@pubhealth.ku.dk>

--============_-1232993047==_ma============
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

I am using R 1.2.0 on a iBook with system 9.04.

As soon as I open R, I get the following warning:


Warning message:
cannot set timezones on this system
--============_-1232993047==_ma============
Content-Type: text/html; charset="us-ascii"

<!doctype html public "-//W3C//DTD W3 HTML//EN">
<html><head><style type="text/css"><!--
blockquote, dl, ul, ol, li { margin-top: 0 ; margin-bottom: 0 }
 --></style><title>Time zone</title></head><body>
<div>I am using R 1.2.0 on a iBook with system 9.04.</div>
<div><br></div>
<div>As soon as I open R, I get the following warning:</div>
<div><br></div>
<div><br></div>
<div><tt><font size="-2" color="#000000">Warning message:<br>
cannot set timezones on this system</font></tt></div>
</body>
</html>
--============_-1232993047==_ma============--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David.Meyer@ci.tuwien.ac.at  Wed Jan 10 12:25:01 2001
From: David.Meyer@ci.tuwien.ac.at (David.Meyer@ci.tuwien.ac.at)
Date: Wed, 10 Jan 2001 13:25:01 +0100 (MET)
Subject: [Rd] changing dimnames of a matrix with rownames/colnames causes (PR#809)
Message-ID: <200101101225.NAA09080@pubhealth.ku.dk>

When I try to change the dimnames of a matrix x with named dimensions

   Y
X   1 2 3 4
  2 1 1 1 1
  3 1 1 1 1
  4 1 1 1 1


for example with:

rownames (x) <- c(...),

the dimension names (X and Y) are deleted, but when I use

dimnames(x)[[1]] <- c(...)

they are left unchanged.

Is this intentional ?

I'm using R 1.2.0 on debian linux.

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R             

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed Jan 10 13:04:06 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 10 Jan 2001 08:04:06 -0500
Subject: [Rd] nearest neighbors
Message-ID: <20010110080406.H19355@jimmy.harvard.edu>

Is there an implementation of a reasonable k-nearest neighbor finder
already in one of the packages?

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:20:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 14:20:27 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101320.OAA10558@pubhealth.ku.dk>

On Wed, 10 Jan 2001 morin@mat.ulaval.ca wrote:

> I am using R 1.2.0 on a iBook with system 9.04.
>
> As soon as I open R, I get the following warning:

> Warning message:
> cannot set timezones on this system

Well, it means what it says. If you don't want to use datetime classes
you can ignore it.  Getting a warning is not a bug, but it happens
because .leap.seconds will be wrong.

I presume you compiled this yourself?  Does `system 9.04' have
support for timezones?  If so you should really try to get this to
work: the code is src/main/datetime.c and relies on setting the
environmental variable TZ by putenv or setenv.  Lots of things will
fail if you don't have those so you do need to try to repair this.

Does example(Sys.putenv) do anything sensible?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:23:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Jan 2001 13:23:05 +0000 (GMT)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.31.0101101320500.8446-100000@toucan.stats>

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?

knn in VR/class: I'll leave you to pass judgement on `reasonable', but it
is widely used.  It may not be the problem you had in mind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Jan 10 13:32:32 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 10 Jan 2001 21:32:32 +0800 (GMT-8)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.21.0101102130220.9387-100000@sununx.comp.nus.edu.sg>

Hi,
I think splancs might have one. Otherwise I know Roger Bivand has a
preliminary port of ANN on his ftp site that i have compiled and run. ANN
is David Mounts approximate nearest neigbor package, really fat with
modified kd trees.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?
> 
> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: not yet                          |
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 10 17:11:19 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Jan 2001 18:11:19 +0100
Subject: [Rd] eval() bug in plot.formula() ?
Message-ID: <14940.38839.796429.22623@gargle.gargle.HOWL>

I don't have time now to investigate myself,
and I'm not feeling like deciding myself if the following is a bug:

  myplot <- function(dat, cex = 1.2, ...) {
      if(!is.data.frame(dat <- as.data.frame(dat)))
	  stop("`dat' must be a data.frame")
      if(any(is.na(match(c("x","y"), names(dat)))))
	  stop("`dat' must have a `x' and a `y' component")
      plot(y ~ x, data= dat, cex=cex, ...)
  }

  dd <- list(x= 1:12, y = sin((1:12)/10))
  myplot(dd)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

  myplot(dd, col = "red") ## Works fine

  myplot(dd, cex=1)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

------------
The above code works fine in R 0.90  but fails already in 1.0.0

I believe it *is* a bug

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 10 17:47:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jan 2001 18:47:40 +0100
Subject: [Rd] eval() bug in plot.formula() ?
In-Reply-To: Martin Maechler's message of "Wed, 10 Jan 2001 18:11:19 +0100"
References: <14940.38839.796429.22623@gargle.gargle.HOWL>
Message-ID: <x24rz72tab.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I don't have time now to investigate myself,
> and I'm not feeling like deciding myself if the following is a bug:
> 
>   myplot <- function(dat, cex = 1.2, ...) {
>       if(!is.data.frame(dat <- as.data.frame(dat)))
> 	  stop("`dat' must be a data.frame")
>       if(any(is.na(match(c("x","y"), names(dat)))))
> 	  stop("`dat' must have a `x' and a `y' component")
>       plot(y ~ x, data= dat, cex=cex, ...)
>   }
> 
>   dd <- list(x= 1:12, y = sin((1:12)/10))
>   myplot(dd)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
>   myplot(dd, col = "red") ## Works fine
> 
>   myplot(dd, cex=1)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
> ------------
> The above code works fine in R 0.90  but fails already in 1.0.0
> 
> I believe it *is* a bug

Hmm, it comes from fixing a much worse bug (the one where pch and
friends didn't get subsetted), so it's not advisable to revert the
change.

The problematic construction is this:

{
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, parent.frame()))) 
        m$data <- as.data.frame(data)
    dots <- m$"..."
    dots <- lapply(dots, eval, data, parent.frame())

and the problem is that dots has ... as a component in some cases.
This looks more like a bug in match.call than in plot.formula, I think

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 23:11:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 00:11:42 +0100 (MET)
Subject: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101102311.AAA16776@pubhealth.ku.dk>

Part 1) is basically that the initial rescaling is done if the window is
too large to fit on the screen.  That's true and obvious (no scrollbars)
and intentional and on the help page.  As ever, you need to report bugs on
what is documented, not what you would like.

This will be changed for 1.2.1, but was several hours' work.  I have also
cleaned up the scrollbar behaviour.

Part 2) I just can't reproduce.  When I follow the instructions, all the
settings revert to very close to the originals and the plot looks the same.

In summary, there is no reproducible evidence of a bug here, and never was.
A feature request will appear in 1.2.1.

BDR

On Fri, 29 Dec 2000 joehl@web.de wrote:

> Dear Prof. Brian Ripley,
>
> Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)
>
> > If these things bother you, could you please supply fixes?
>
> Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that.
>
> What I definitely can offer is testing and giving replicable bug reports.
>
> Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R.
>
> > [snipped]
> > Nothing on the help page suggested that the fine details of the R read-only
> > parameters will be as you expected after re-scaling the plot, and it never
> > occurred to me that anyone would expect so.
> > As they are reported by the R
> > graphics engine (which is used unchanged), I expect they are correct in one
> > of the multiple interpretations.
> > [snipped]
>
> Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).
>
> One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.
>
> > Possibly.  I don't think the device size is very interesting after
> > rescaling.  What are you using it for?
>
> Well, of course I try to avoid using it.
>
> Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.
>
> Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device.
>
> Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.
>
> Example
> Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size.
>
> ========================
> windows(rescale="fixed")
> does not do rescaling after device initializiation, it's basic idea is to not change the device size at all.
> However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails.
> In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
> Thus the current implementation does not make sense with devices bigger than the screen.
> ========================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fixed")
>
> # using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally).
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
>
>
>
> ======================
> by constrast
> windows(rescale="fit")
> works
> ======================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fit")
>
> # using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands WORKS
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
>
> However repeated resizing of the window does increase the shown font sizes, look at that:
>
> width <- 8
> height <- 6
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> cex <- 2.8
>
> info <- function(){
> 	user <- strwidth(jandltext, cex=cex, units="user")
> 	inches <- strwidth(jandltext, cex=cex, units="inches")
> 	pin <- par("pin")
> 	din <- par("din")
> 	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
> }
>
> windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
> windows(width=width, height=height, rescale="fit")
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,1,0,1))
> par(c("din","fin","pin"))
> par("usr")
> text(0.5,0.5,jandltext, cex=cex)
>
> # Initial measures
> print(static <- info())
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # we never touched horizontal window size but horiz din differs, strwidthInInches differs not
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # now everything differs
>
> > print(static <- rbind(static, info()))
>        din aspectratio pintodin   struser strinchtopin   strinch
> 1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
> 2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
> 3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing
>
>
>
> So here is my revised bug status:
>
> 1a) windows(rescale="fixed") does not keep original device size
> 1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)
>
> 2) wrong row distances with windows(rescale="fit")
>    This phenomenon also observed under different circumstances
>    see todays mail to r-help
>
> 3a) windows(rescale="fit") destroys aspect ratio
> 3b) repeated rescaling destroys proper font size as well
>
>
> Kind regards and best wishes for 2001
>
>
>
> Jens Oehlschlägel
>
> _______________________________________________________________________________
> Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
> Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen.eglen@ed.ac.uk  Thu Jan 11 11:23:30 2001
From: stephen.eglen@ed.ac.uk (stephen.eglen@ed.ac.uk)
Date: Thu, 11 Jan 2001 12:23:30 +0100 (MET)
Subject: [Rd] R introduction mentions system.date() (PR#810)
Message-ID: <200101111123.MAA22532@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.0
OS: OSF 1
Submission from: (NULL) (129.215.13.27)


In the document "An introduction to R", the info node "Customizing the
environment"
has the following code snippet:

     > .Last <- function() {
       graphics.off()                        # a small safety measure.
       cat(paste(system.date(),"\nAdios\n")) # Is it time for lunch?
     }

I think "system.date()" should now be replaced just by "date()".
(This can be found on line 3949 of R-intro.texi distributed with 
version 1.2.0).



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Jan 11 12:30:35 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Thu, 11 Jan 2001 13:30:35 +0100
Subject: [Rd] Re: Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101111230.NAA00597@mailgate3.cinetic.de>


Sorry for wasting bandwidth but I want to thank Prof. Brian Ripley for attacking the problems I had with windows() rescaling. I am sorry that it eat up lots of his time and appreciate very much that nevertheless he did it. I am looking forward to R 1.2.1. 

Thank you very much Brian!

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Thu Jan 11 21:22:49 2001
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Thu, 11 Jan 2001 22:22:49 +0100 (MET)
Subject: [Rd] problem with strptime example (and mention of bug.report) (PR#811)
Message-ID: <200101112122.WAA26408@pubhealth.ku.dk>

Hi,

The help file for strptime has the following code which doesn't work
for me:

     ## read in date info in format `ddmmmyyyy'
     x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
     z <- strptime(x, "%d%b%Y")
> z
[1] "NA" "NA" "NA" "NA"

Do these work for other people?

whereas it works fine if I use a separator (/) in the date@

> strptime("9/Feb/1960", "%d/%b/%Y")
[1] "1960-02-09"

> strptime("9Feb1960", "%d%b%Y")
[1] "NA"

Stephen

p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
does not recognise the -c switch for setting the carbon copy (CC)
field, causing an error.  One solution might be to remove the -c
argument from the cmdarg in bug.rerport(), or put a 
"~c joe@bloggs.com" directive at the end of the file to set the CC field.

--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0f
 arch = alphaev56
 os = osf4.0f
 system = alphaev56, osf4.0f
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:51 2001
From: zeileis@ci.tuwien.ac.at (zeileis@ci.tuwien.ac.at)
Date: Thu, 11 Jan 2001 22:49:51 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
Message-ID: <200101112149.WAA26997@pubhealth.ku.dk>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:59 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Thu, 11 Jan 2001 22:49:59 +0100
Subject: [Rd] segmentation fault in integrate
Message-ID: <3A5E2A87.6864792F@ci.tuwien.ac.at>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 11 21:54:38 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 22:54:38 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101112154.WAA27100@pubhealth.ku.dk>

On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:

> Hi,
>
> The help file for strptime has the following code which doesn't work
> for me:
>
>      ## read in date info in format `ddmmmyyyy'
>      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>      z <- strptime(x, "%d%b%Y")
> > z
> [1] "NA" "NA" "NA" "NA"
>
> Do these work for other people?

Yes, on several platforms.  It will be a problem with your OS's strptime
code.  It must be, I think, as the alternative we supply works.

> whereas it works fine if I use a separator (/) in the date@
>
> > strptime("9/Feb/1960", "%d/%b/%Y")
> [1] "1960-02-09"
>
> > strptime("9Feb1960", "%d%b%Y")
> [1] "NA"

We really do not put out new features without testing them!


>
> Stephen
>
> p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
> does not recognise the -c switch for setting the carbon copy (CC)
> field, causing an error.  One solution might be to remove the -c
> argument from the cmdarg in bug.rerport(), or put a
> "~c joe@bloggs.com" directive at the end of the file to set the CC field.
>
> --please do not edit the information below--
>
> Version:
>  platform = alphaev56-dec-osf4.0f
>  arch = alphaev56
>  os = osf4.0f
>  system = alphaev56, osf4.0f
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Fri Jan 12 07:25:11 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Fri, 12 Jan 2001 08:25:11 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <200101112149.WAA26997@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>


> I tried to integrate numerically a function wich is similar to the
> following:
> 
> > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > dummy(-100)
> [1] 0
> > dummy(-1000)
> [1] NaN
> > dummy(-10000)
> [1] NaN
> 
> If I choose the lower boundary to be too small integrate causes a
> segmentation fault:
> 
> > library(integrate)
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
> > integrate(dummy, -10000, 0)$value
> Segmentation fault

Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
on SuSE 6.4 gives:

> integrate(dummy, -1000000, 0)$value
[1] NaN
Warning message: 
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...) 

I has not able to reproduce the segfault ;-)

BTW: if one uses

> dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
a) }

this returns

> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0, maxpts=1000)$value
[1] 0.6935715

Torsten

> 
> I'm running R.1.2.0 on Debian Linux.
> 
> Regards
> Achim
> 
> 
> > version
>          _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    2.0              
> year     2000             
> month    12               
> day      15               
> language R   
> 
> 
> 
> -------------------------
> 
> Achim Zeileis
> Institut für Statistik
> Technische Universität Wien
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 08:22:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 Jan 2001 08:22:42 +0000 (GMT)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>

On Fri, 12 Jan 2001, Torsten Hothorn wrote:

>
> > I tried to integrate numerically a function wich is similar to the
> > following:
> >
> > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > dummy(-100)
> > [1] 0
> > > dummy(-1000)
> > [1] NaN
> > > dummy(-10000)
> > [1] NaN
> >
> > If I choose the lower boundary to be too small integrate causes a
> > segmentation fault:
> >
> > > library(integrate)
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> > > integrate(dummy, -10000, 0)$value
> > Segmentation fault
>
> Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> on SuSE 6.4 gives:
>
> > integrate(dummy, -1000000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
>
> I has not able to reproduce the segfault ;-)
>
> BTW: if one uses
>
> > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> a) }
>
> this returns
>
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0, maxpts=1000)$value
> [1] 0.6935715

Better, try

dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}

that is, do your calculations on log scale as far as possible.  This is
more accurate than cop-ing out at Inf*0.

Even better, you can adjust the normal mean to cancel the linear term
exactly: dnorm(x, mu) has linear term -mu*x. So use

dummy <- function(x) exp(0.5)*dnorm(x, -1)

You will still need to adjust maxpts or find a sensible lower end.

(BTW, I don't get a segfault either, and we need you to debug it
on your system, I am afraid.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:15:37 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 12 Jan 2001 11:15:37 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121015.LAA02860@pubhealth.ku.dk>


ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> 
> > Hi,
> >
> > The help file for strptime has the following code which doesn't work
> > for me:
> >
> >      ## read in date info in format `ddmmmyyyy'
> >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> >      z <- strptime(x, "%d%b%Y")
> > > z
> > [1] "NA" "NA" "NA" "NA"
> >
> > Do these work for other people?
> 
> Yes, on several platforms.  It will be a problem with your OS's strptime
> code.  It must be, I think, as the alternative we supply works.
> 
> > whereas it works fine if I use a separator (/) in the date@
> >
> > > strptime("9/Feb/1960", "%d/%b/%Y")
> > [1] "1960-02-09"
> >
> > > strptime("9Feb1960", "%d%b%Y")
> > [1] "NA"
> 
> We really do not put out new features without testing them!


Also very strange on WinNT4.0 (R-1.2.0): 


  x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
  z <- strptime(x, "%d%b%Y")
  z
[1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"                 
"1960-07-30 01:00:00"


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:41:11 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 Jan 2001 11:41:11 +0100
Subject: [Rd] segmentation fault in integrate (PR#812)
References: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>
Message-ID: <3A5EDF47.83D1A4AE@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Fri, 12 Jan 2001, Torsten Hothorn wrote:
> 
> >
> > > I tried to integrate numerically a function wich is similar to the
> > > following:
> > >
> > > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > > dummy(-100)
> > > [1] 0
> > > > dummy(-1000)
> > > [1] NaN
> > > > dummy(-10000)
> > > [1] NaN
> > >
> > > If I choose the lower boundary to be too small integrate causes a
> > > segmentation fault:
> > >
> > > > library(integrate)
> > > > integrate(dummy, -100, 0)$value
> > > [1] 1.387143
> > > > integrate(dummy, -1000, 0)$value
> > > [1] NaN
> > > Warning message:
> > > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > > lower, upper, minpts, maxpts, functn, eps, ...)
> > > > integrate(dummy, -10000, 0)$value
> > > Segmentation fault
> >
> > Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> > on SuSE 6.4 gives:
> >
> > > integrate(dummy, -1000000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> >
> > I has not able to reproduce the segfault ;-)
> >
> > BTW: if one uses
> >
> > > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> > a) }
> >
> > this returns
> >
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0, maxpts=1000)$value
> > [1] 0.6935715
> 
> Better, try
> 
> dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}
> 
> that is, do your calculations on log scale as far as possible.  This is
> more accurate than cop-ing out at Inf*0.
> 
> Even better, you can adjust the normal mean to cancel the linear term
> exactly: dnorm(x, mu) has linear term -mu*x. So use
> 
> dummy <- function(x) exp(0.5)*dnorm(x, -1)
> 
> You will still need to adjust maxpts or find a sensible lower end.
> 
> (BTW, I don't get a segfault either, and we need you to debug it
> on your system, I am afraid.)


But crashes also on:
- NT4.0, R-1.2.0
- sparc-sun-solaris2.7, R-1.2.0
- SuSE 7.0, R-1.2.0 Patched (2001-01-07), integrate Version  2.2-3

Strange: With the same version of R-1.2.0 Patched (2001-01-07) and
integrate (2.2-3), the crash happens on SuSE 7.0, but not on SuSE 6.4,
as Torsten told us.

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 10:56:13 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 12 Jan 2001 11:56:13 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121056.LAA03597@pubhealth.ku.dk>

On Fri, 12 Jan 2001, Uwe Ligges wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> >
> > > Hi,
> > >
> > > The help file for strptime has the following code which doesn't work
> > > for me:
> > >
> > >      ## read in date info in format `ddmmmyyyy'
> > >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> > >      z <- strptime(x, "%d%b%Y")
> > > > z
> > > [1] "NA" "NA" "NA" "NA"
> > >
> > > Do these work for other people?
> >
> > Yes, on several platforms.  It will be a problem with your OS's strptime
> > code.  It must be, I think, as the alternative we supply works.
> >
> > > whereas it works fine if I use a separator (/) in the date@
> > >
> > > > strptime("9/Feb/1960", "%d/%b/%Y")
> > > [1] "1960-02-09"
> > >
> > > > strptime("9Feb1960", "%d%b%Y")
> > > [1] "NA"
> >
> > We really do not put out new features without testing them!
>
>
> Also very strange on WinNT4.0 (R-1.2.0):
>
>
>   x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>   z <- strptime(x, "%d%b%Y")
>   z
> [1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"
> "1960-07-30 01:00:00"

I don't get the NA. The 1am is a Windows bug: this only happens in
times prior to 1970, which for Windows do not exist.  It seems to assume
that if isdst is non-zero, it is DST, rather than for isdst > 0.
I have a workaround, so for 1.2.1 (on my machines) this will behave as
expected.

The date-time functions do depend on OS functions being correct, and
although I have done a lot of workarounds, no doubt more errors will
emerge.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 12 16:46:06 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 12 Jan 2001 17:46:06 +0100 (MET)
Subject: [Rd] match.call problem (PR#813)
Message-ID: <200101121646.RAA09768@pubhealth.ku.dk>


Previously reported by Martin as a plot.formula issue, but I believe
it boils down to this:

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,y=2,...)f(x,y=y,...)
> g(1)
f(x = x, ... = list(y = y, ...))
> g(1,b=2) 
f(x = x, ... = list(y = y, b = 2))
> g(1,y=2)
f(x = x, ... = list(y = y, ...))

Notice that ... appears if all actual arguments to g are matched in
the call to f. This is the *name* "..." as in as.name("..."). I would
have expected just ... = list(y = y) in those cases.

Simpler

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,...)f(x,...)
> g(1)
f(x = x, ... = list(...))
> g(1,2)
f(x = x, ... = list(..1 = 2))
> g(1,a=2)
f(x = x, ... = list(a = 2))

or yet again simpler

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g(1)
f(... = list(..1 = 1))
> g()
f(... = list(...))
> f()
f()


For comparison, Splus 3.4 has this kind of stuff:

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g()
f(... = list())
> f()
f(... = list())
> g(1)
f(... = list(1))
> g(a=1)  
f(... = list(a = 1))

I don't see why we don't do the same (although given differences in
lazy evaluation, there might be a point to it), but just getting rid
of the ... in the lists would help quite a bit.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 09:57:52 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 10:57:52 +0100 (MET)
Subject: [Rd] Memory problem ? (PR#814)
Message-ID: <200101150957.KAA22994@pubhealth.ku.dk>



Dear R-developers,

I have the following problem with R: When I try to scan a big file R
is sometimes killed by the operation system (after spinning the hard
disk for 10 minutes or so) or sometimes my X Window collapses. This
problem occurs only if I have many applications (e.g. Emacs, 
gnumeric, two gv, netscape) open at the same
time. On the other hand, if I use read.table() R reads the file without
problems even if many applications also open. 

I do not know whether this is a bug or I do something wrong. Please
let me know what is the case.

The details are given below. Please do not hesitate to contact me if
you need more information.


Many thanks,


Zoltan Barta



The details:

> version
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R                
> source("../moult/R/O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Killed

The file O.dat.R:
O.dat <- function(nev){
  f.nev <- paste(nev,".dat",sep="");
  what.l <- list(year=numeric(),week=numeric(),bird=numeric(),
                 event=character(),moult=character(),action=character(),
                 res=numeric(),fea1=numeric(),ml1=numeric(),brood=numeric(),
                 exper=numeric(),loc=numeric(),uval=numeric());
  data.frame(scan(f.nev,what=what.l,skip=1));
}


The first ten rows of the file "food12.dat":
year	week	bird	event	moult	action	res	fea1	ml1	brood	exper	loc	uval
0	15	0	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	1	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	2	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	3	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	4	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	5	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	6	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	7	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	8	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214

the file contains lines of similar data and it is generated by a Monte Carlo
simulation. 

My system:
Debian GNU/Linux 2.2 (potato)
Kernel 2.2.15
libc6 2.2-4
Memory: 60 MB
Swap 72 MB







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 10:22:40 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151022.LAA24305@pubhealth.ku.dk>


Dear R-developer,

Just some more details on the problem I reported several minutes ago.
On an NT machine (4.0 SP6) I got the following for the same task:

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              
> setwd("d:/ftp")
NULL
> source("O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Error: cannot allocate vector of size 723 Kb
> 

I hope this help a bit more.

Best wishes, 


Zoltan Barta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 15 10:35:36 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 15 Jan 2001 11:35:36 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151035.LAA24529@pubhealth.ku.dk>

> From: Z.Barta@bristol.ac.uk
> Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Memory problem 2 (PR#815)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Dear R-developer,
> 
> Just some more details on the problem I reported several minutes ago.
> On an NT machine (4.0 SP6) I got the following for the same task:
> 
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R              
> > setwd("d:/ftp")
> NULL
> > source("O.dat.R")
> > F12 <- O.dat("food12")
> Read 92669 lines
> Error: cannot allocate vector of size 723 Kb
> > 
> 
> I hope this help a bit more.

It doesn't.  On Windows, we need to know what you set --max-mem-size
to, and if you did not, what memory.size(max=TRUE) says and what your
physical memory is.

All this tells us is that you ran out of allocatable memory.  That's
not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de  Mon Jan 15 12:58:00 2001
From: jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?=22Dr=2E_Jens_Oehlschl=E4gel=22?=)
Date: Mon, 15 Jan 2001 13:58:00 +0100
Subject: [Rd] AW: par(par()) corrupts devices (PR#807)
Message-ID: <01C07EFB.2C8CA600.jens.oehlschlaegel@bbdo-interone.de>



Dear Prof. Ripley,

I do not insist that features are bugs, so I stop sending this to r-bugs 
and cc r-devel instead

> I am replying to this from the archive: I did not actually receive a 
copy.

But it is right to sent bug reports ONLY to r-bugs, isn't it?
I'am actually using a old version of outlook, and some mails from r-help 
appear as attachments, may it's an outlook problem.

> This is a feature!
> You set par(pin=), and that takes precedence over
> par(pty=).  Same with par(plt=).
>
> To unjam it, you need e.g.  par(mai=old.par$mai)
>
> I think that par(pty=) should revert to a default plot spec, and will
> change this.  But, the problem with restoring lists like that is that
> it depends on exactly the order of the params as they interact.
> It is *not* a good idea.  And no.readonly=T does not help as
> plt and pin are not readonly.  If the user has resized the device before
> restoration, it's pretty chancy what it gets set to.

Thank you for explaining the way it happens. I must admit, that again I am 
baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

I admit, I expected par(par()) not to change anything (I remember vague 
that it worked with the prototype), but in this case it is not (only) a 
problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
CHANGE the device: subsequent par(pty="s") are ignored.

I am shure I am not the only one who expected the on.exit() stuff within 
the following function to leave the graphical parameters UNCHANGED, but it 
doesn't.

somefunc <- function(){
	oldpin <- par(pin=par("pin"))
	on.exit(par(oldpin))
	plot(1,1)
}

windows(5,3)

par(pty="s")
plot(1,1)
# square
par(pty="m")
plot(1,1)

# which settings do we have before
par1 <- par()

somefunc()

# which settings do we have now
par2 <- par()
# do they differ: yes on plt
all.equal(par1, par2)

# reset plt
par(plt=par1$plt)

# which settings do we have now
par2 <- par()
# do they differ: no
all.equal(par1, par2)

par(pty="s")
plot(1,1)
#still not square
#i.e we have hidden parameters
#because all par() are restored to values where par(pty="s") did work

> if the user has resized the device before restoration, it's pretty chancy 
what it gets set to.

I find it frightening to discover that we obvisously have hidden device 
parameters, and more frigthening that they may be modified by resizing.
Sorry that I can't provide code fix, but this is far to deep within the 
heart of R.

Best regards


Jens Oehlschlägel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jan 15 12:57:30 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 Jan 2001 12:57:30 +0000 (GMT)
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
Message-ID: <200101151257.MAA13403@toucan.stats.ox.ac.uk>


> From: "Dr. Jens Oehlschlägel" <jens.oehlschlaegel@bbdo-interone.de>
> Date: Mon, 15 Jan 2001 13:58:00 +0100
> 
> Dear Prof. Ripley,
> 
> I do not insist that features are bugs, so I stop sending this to r-bugs 
> and cc r-devel instead
> 
> > I am replying to this from the archive: I did not actually receive a 
> copy.
> 
> But it is right to sent bug reports ONLY to r-bugs, isn't it?
> I'am actually using a old version of outlook, and some mails from r-help 
> appear as attachments, may it's an outlook problem.

My guess is that it was an R-bugs mail distribution problem at KU.
Certainly not your end.

> > This is a feature!

(I was being somewhat ironic. It was a design error.)

> > You set par(pin=), and that takes precedence over
> > par(pty=).  Same with par(plt=).
> >
> > To unjam it, you need e.g.  par(mai=old.par$mai)
> >
> > I think that par(pty=) should revert to a default plot spec, and will
> > change this.  But, the problem with restoring lists like that is that
> > it depends on exactly the order of the params as they interact.
> > It is *not* a good idea.  And no.readonly=T does not help as
> > plt and pin are not readonly.  If the user has resized the device before
> > restoration, it's pretty chancy what it gets set to.
> 
> Thank you for explaining the way it happens. I must admit, that again I am 
> baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
> RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

Should work in 1.2.1 if the size is unchanged.

> I admit, I expected par(par()) not to change anything (I remember vague 
> that it worked with the prototype), but in this case it is not (only) a 
> problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
> CHANGE the device: subsequent par(pty="s") are ignored.

No longer in 1.2.1.

> I am shure I am not the only one who expected the on.exit() stuff within 
> the following function to leave the graphical parameters UNCHANGED, but it 
> doesn't.
> 
> somefunc <- function(){
> 	oldpin <- par(pin=par("pin"))
> 	on.exit(par(oldpin))
> 	plot(1,1)
> }
> 
> windows(5,3)
> 
> par(pty="s")
> plot(1,1)
> # square
> par(pty="m")
> plot(1,1)
> 
> # which settings do we have before
> par1 <- par()
> 
> somefunc()
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: yes on plt
> all.equal(par1, par2)
> 
> # reset plt
> par(plt=par1$plt)
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: no
> all.equal(par1, par2)
> 
> par(pty="s")
> plot(1,1)
> #still not square
> #i.e we have hidden parameters
> #because all par() are restored to values where par(pty="s") did work
> 
> > if the user has resized the device before restoration, it's pretty chancy 
> what it gets set to.
> 
> I find it frightening to discover that we obvisously have hidden device 
> parameters, and more frigthening that they may be modified by resizing.
> Sorry that I can't provide code fix, but this is far to deep within the 
> heart of R.

That's not quite right.  R has several pars doing the same thing.  They
will give different answers after re-sizing, and the last one used wins
out.  S does not have this problem because (essentially) it does not
resize.  Ideally there would be a way to save just one of the 
conflicting options.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 15 16:05:15 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 15 Jan 2001 11:05:15 -0500 (EST)
Subject: [Rd] legend() patch never seems to have made it in
Message-ID: <Pine.LNX.4.30.0101151101270.24324-100000@bolker.zoo.ufl.edu>


  Perhaps I should have submitted this as a bug so that it would be
officially tracked.  It's not a big deal, but here it is again (I can't
remember which version this patch is against, but I don't think legend()
has changed since then ...)

  Basically, the problem is that if you want to have "opaque" points that
overlay lines (rather than using type="b" and having the lines leave a
little bit of space around the points), you can use pch=21,bg=par("bg"),
but this is hard to replicate in legend().

  For example:

x <- 1:10
y <- runif(10)
plot(x,y,type="l",ylim=c(0,1.2))
points(x,y,pch=21,bg="white")
legend(6,1.2,"foo",pch=21,pt.bg="white",lty=1)

  Here's the patch, which reverses the order of line- and point-drawing
so that points come later and can overwrite the lines:


*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }

      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }

      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:41:40 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:41:40 +0100 (CET)
Subject: [Rd] Re: announce: survival5 bug fix
In-Reply-To: <Pine.GSO.4.21.0101151050480.18938-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.LNX.4.21.0101152335130.612-100000@kleigh.nl>

Thomas Lumley skriver...

> Anyone using the penalised partial likelihood routines in survival5 should
> update their version. 
> 
> A bug has been fixed in the S package: in coxph() models with penalised
> likelihood and strata it was possible in some circumstances to get an
> infinite loop or perhaps an incorrect answer. 
> 
> The new version (2.3) is on cran.r-project.org and will percolate through
> CRAN in the next few days.

I had trouble installing this package (and its previous
version) on HP-UX. There is a name conflict in files agsurv3.c
and coxfit5.c. I get an "Inconsistent type declaration" error 
for the variable 'time'. Changing the name of the variable
solved the problem.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jan 15 23:03:27 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 16 Jan 2001 12:03:27 +1300
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
References: <200101151257.MAA13403@toucan.stats.ox.ac.uk>
Message-ID: <016801c07f47$5e8cb860$175dd882@stat.auckland.ac.nz>

Hi


> > I find it frightening to discover that we obvisously have hidden device
> > parameters, and more frigthening that they may be modified by resizing.
> > Sorry that I can't provide code fix, but this is far to deep within the
> > heart of R.
>
> That's not quite right.  R has several pars doing the same thing.  They
> will give different answers after re-sizing, and the last one used wins
> out.  S does not have this problem because (essentially) it does not
> resize.  Ideally there would be a way to save just one of the
> conflicting options.


The aim of this design was so that, for example, a plot size specified in
inches would retain its physical dimensions when the window was resized
(which does not happen in S as Brian has pointed out).  As you have
discovered, the design has some problems when you try to save and restore a
large list of graphics parameter settings.  We are currently working on some
new graphics features which will avoid this problem.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:53:47 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:53:47 +0100 (CET)
Subject: [Rd] Error diagnostics in hpdlfcn.c
Message-ID: <Pine.LNX.4.21.0101152345370.612-100000@kleigh.nl>


A while back I had trouble running R on HP-UX. R couldn't load
shared libraries, and I had no idea what was wrong. The problem
was in the system libraries. I didn't discover this until
someone suggested to add a request for diagnostic messages in
the call to shl_load. 

The problem was solved. It might be a good idea to include this
request for diagnostic messages in the distribution of R, it
might help other people encountering similar problems.


This is for R version 1.2.1:


--- src/unix/hpdlfcn.c  Mon Jan 15 17:12:58 2001
+++ src/unix/hpdlfcn.c.new      Mon Jan 15 17:13:45 2001
@@ -133,7 +133,7 @@
   if (fname == NULL)
     handle = PROG_HANDLE;
   else {
-    handle = shl_load(fname, mode, 0L);
+    handle = shl_load(fname, mode | BIND_VERBOSE, 0L);
     if (handle != NULL) {
       if ((entry = find_lib_entry(handle)) == NULL) {
        if ((entry = new_lib_entry(handle)) == NULL) {
 

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Wed Jan 17 02:52:00 2001
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Wed, 17 Jan 2001 03:52:00 +0100 (MET)
Subject: [Rd] PR#751
Message-ID: <200101170252.DAA19529@pubhealth.ku.dk>

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 07:01:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 08:01:11 +0100
Subject: [Rd] PR#751
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
References: <200101170252.DAA19529@pubhealth.ku.dk>
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Wed Jan 17 16:21:10 2001
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Wed, 17 Jan 2001 10:21:10 -0600
Subject: [Rd] PR#751
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 17:00:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 18:00:38 +0100
Subject: [Rd] PR#751
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 19:47:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 20:47:27 +0100
Subject: [Rd] PR#751
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Thu Jan 18 15:57:18 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Thu, 18 Jan 2001 16:57:18 +0100 (MET)
Subject: [Rd] dotplot: character size of labels (PR#816)
Message-ID: <200101181557.QAA13637@pubhealth.ku.dk>

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jänner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fisk@bowdoin.edu  Fri Jan 19 13:55:11 2001
From: fisk@bowdoin.edu (fisk@bowdoin.edu)
Date: Fri, 19 Jan 2001 14:55:11 +0100 (MET)
Subject: [Rd] colors not cycled in type=h plot (PR#817)
Message-ID: <200101191355.OAA25447@pubhealth.ku.dk>

Full_Name: steve fisk
Version: 1.2.0
OS: linux (rh6.2)
Submission from: (NULL) (139.140.37.198)


In the command below I expected a red line and a blue line, but I get two red
lines. 
I get the same behavior with type="s" as well. It appears to only use the first
color,
and does not cycle them as I would expect.

> plot(c(1,2),c(1,1),type="h",col=c("red","blue"))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 15:53:01 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 16:53:01 +0100 (MET)
Subject: AW: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101191553.QAA26938@pubhealth.ku.dk>



Thanks to Prof. Brian Ripley and Guido Masarotto for fixing the initial rescaling of windows(rescale="fixed").

Now I can provide more detailed desciptions how to replicate the other problems I observed.

concerning 
2) wrong row distances with windows(rescale="fit") 
just use function testit() to see what I mean

# comparing the two devices appears normal
testit(width=8, height=6)

# compare the two devices for DIN A4
# with rescale="fit" lines are closer together
testit(width=16.53543, height=11.69291)

# exagerate effect
testit(width=32, height=24)

## the following function closes all devices
## creates two devices of the specified size
## with rescale="R" and rescale="fit"
## determines cex needed to fill the window (in x direction) and fills it

testit <- function(width, height){
	stroptim <- function(str, width=NULL, height=NULL, units="user", range.cex=c(0.01, 24)){
		units <- match.arg(units, c("user", "figure", "inches"))
		m <- max(length(str), length(width), length(height))
		str <- rep(str, length=m)
		wcex <- hcex <- rep(Inf, m)
		if (!is.null(width)){
			fn <- function(cex, str, width)strwidth(str, cex=cex, units=units)-width
			frange <- rbind(fn(range.cex[1], str, width), fn(range.cex[2], str, width))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], width=width[i])
				  wcex[i] <- u$root
				}else{
				  wcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		if (!is.null(height)){
			fn <- function(cex, str, height)strheight(str, cex=cex, units=units)-height
			frange <- rbind(fn(range.cex[1], str, height), fn(range.cex[2], str, height))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], height=height[i])
				  hcex[i] <- u$root
				}else{
				  hcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		pmin(wcex, hcex)
	}

	while (length(dev.list())) dev.off()

	jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"

	windows(width=width, height=height)
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))

	windows(width=width, height=height, rescale="fit")
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	stroptim(jandltext, width=diff(par("usr")[1:2]))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))
}

concerning
3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well 
Degeneration of aspect ratio only happens if in WindowsNT | DisplayProperties | Plus! | ShowWindowContentsWhileDragging is ACTIVATED and one intensely uses the mouse to do extreme rescaling.
Since this windows option is easy to deactivate, I have no further problems with that.


Best regards


Jens Oehlschlägel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:01:07 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:01:07 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191601.RAA27053@pubhealth.ku.dk>

windows()
plot(1,1)
windows()
plot(1:2,1:2)
dev.list() # we have devices 2 and 3

# device 3 is active and in front
bringToTop(2) # does not work
bringToTop(3) # does not work also

Regards


Jens Oehlschlaegel

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 19 16:21:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Jan 2001 17:21:11 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191621.RAA27187@pubhealth.ku.dk>

On Fri, 19 Jan 2001 joehl@web.de wrote:

> windows()
> plot(1,1)
> windows()
> plot(1:2,1:2)
> dev.list() # we have devices 2 and 3
>
> # device 3 is active and in front
> bringToTop(2) # does not work
> bringToTop(3) # does not work also

That works exactly as documented on my machine.  It may depend which mode
you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
window is the whole frame, not the sub-window.  I don't know how to bring
sub-windows to the front.

I should point out this is very unlikely to be fixed.  There will be no
further Windows-specific development by me unless patches are supplied.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:52:44 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:52:44 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191652.RAA27462@pubhealth.ku.dk>

> That works exactly as documented on my machine.  It may depend which mode
> you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
> window is the whole frame, not the sub-window.  I don't know how to bring
> sub-windows to the front.

Now trying SDI it works for me as well. May be the help page should mention that it needs GUI preferences SDI. Nothing of importance for me, I just came across that because I wanted to use bringToTop() to automatically show the two devices alternately in the testit() function of the other mail.

It's anyhow astonishing how much you do to support windows. 
I am shure many people appreciate that as much as I do.

Best regards


Jens Oehlschlaegel

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Jan 19 23:52:19 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 20 Jan 2001 00:52:19 +0100 (MET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified (PR#819)
Message-ID: <200101192352.AAA28876@pubhealth.ku.dk>


I noticed this bug before in R 1.2.0. Can't remember whether it
was there in earlier versions.

    > help.start()
    Making links in ~/.R ...
    If /home/peter/sbin/netscape  is already running,       it is *not* restarted,
     and you must switch to its window.
    Otherwise, be patient..
    > help("help", package = "base")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    > help("help")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    Warning message:
    Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help("help")
    >

As you can see, a linked version of the helpfile is used if I
specify a package. But if I don't specify a package, the linked
helpfile is not found. The code in file "base" for function
help() that seems to generate this error is:

        lnkfile <-
            file.path(Sys.getenv("HOME"), ".R",
                      "library", package, "html",
                      paste(topic, "html", sep="."))

Since the variable packages at this point contains a list, the
variable lnkfile becomes a list.

This patch seems to solve the problem:


--- base	Mon Jan 15 18:01:16 2001
+++ base.new	Sat Jan 20 00:43:48 2001
@@ -10161,11 +10161,12 @@
                         ## we need to use the version in ~/.R if we can.
                             lnkfile <-
                                 file.path(Sys.getenv("HOME"), ".R",
                                           "library", package, "html",
                                           paste(topic, "html", sep="."))
-                            if (file.exists(lnkfile)) file <- lnkfile
+                            lnkfile <- lnkfile[file.exists(lnkfile)]
+                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
                         }
                         if (file == ofile) {
                             warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
                         }
                         file <- paste("file:", file, sep="")



Another thing: is it absolutely necessary to print the same four
lines each time htmlhelp is used? Can't this be switches off
with an option like htmlquiet or something? Or don't print these
lines if verbose == FALSE.

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Jan 20 01:31:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 20 Jan 2001 02:31:36 +0100 (CET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified
 (PR#819)
In-Reply-To: <200101192352.AAA28876@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101200226160.4357-100000@kleigh.nl>

kleiweg@let.rug.nl skriver...

> This patch seems to solve the problem:
> 
> 
> --- base	Mon Jan 15 18:01:16 2001
> +++ base.new	Sat Jan 20 00:43:48 2001
> @@ -10161,11 +10161,12 @@
>                          ## we need to use the version in ~/.R if we can.
>                              lnkfile <-
>                                  file.path(Sys.getenv("HOME"), ".R",
>                                            "library", package, "html",
>                                            paste(topic, "html", sep="."))
> -                            if (file.exists(lnkfile)) file <- lnkfile
> +                            lnkfile <- lnkfile[file.exists(lnkfile)]
> +                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
>                          }
>                          if (file == ofile) {
>                              warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
>                          }
>                          file <- paste("file:", file, sep="")

It doesn't always. For example, doing ?sin I get the non-linked 
files again.

First:
     file <- index.search(topic, INDICES, "AnIndex", type)
sets variable file to "/usr/local/R/lib/R/library/base/html/Trig.html"

Then, variable lnkfile is first set to:
[1] "/home/peter/.R/library/ctest/html/sin.html"
[2] "/home/peter/.R/library/base/html/sin.html"
Neither of these files exist, so in the second step, lnkfile
becomes empty.

-- 
Wekte priegel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan 21 06:15:03 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Jan 2001 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101210615.HAA27625@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 817 *
Subject: colors not cycled in type=h plot
From: fisk@bowdoin.edu
Date: Fri, 19 Jan 2001 14:54:39 +0100 (MET)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)

Directory:  In-Out

* PR# 814 *
Subject: Memory problem ?
From: Zoltan Barta <Z.Barta@bristol.ac.uk>
Date: Mon, 15 Jan 2001 09:54:16 +0000 (GMT Standard Time)
--scan crashes R on Linux: a memory allocation problem, probably
--Uses n= or nlines= in scan will use less memory, and read.table does.

Directory:  Installation

* PR# 806 *
Subject: configure error on alpha
From: Richard Beare <Richard.Beare@cmis.CSIRO.AU>
Date: Wed, 10 Jan 2001 16:52:58 +1100

Directory:  Language

* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 808 *
Subject: Time zone
From: Herve Morin <morin@mat.ulaval.ca>
Date: Wed, 10 Jan 2001 07:24:07 -0500
--This appears to be a complaint about a warning on a beta Mac version
--(but Macs are never mentioned!).  That version is incomplete.

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jan 21 19:17:24 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Sun, 21 Jan 2001 14:17:24 -0500 (EST)
Subject: [Rd] RW1021 and wine
Message-ID: <Pine.LNX.4.30.0101211414080.997-100000@bolker.zoo.ufl.edu>


  Just thought people might be interested to know that the latest version
of R-win now runs under Wine, the windows emulator for Linux (ver.
20001202).  (I originally tried this a couple of releases back because a
student seemed to be having system-specific problems and I was attempting
to be lazy.)  The recent switch from crtdll to msvcrt seems to have
helped with Wine compatibility.

  I didn't test it extensively: looked at the graphics demos (there were
some missing-font problems) and a few other things.

  (So, if you *really* want a GUI front-end under Linux, this might be one
way to do it ...)

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Mon Jan 22 09:43:39 2001
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Mon, 22 Jan 2001 10:43:39 +0100 (MET)
Subject: [Rd] interaction.plot (PR#820)
Message-ID: <200101220943.KAA09053@pubhealth.ku.dk>

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jan 23 15:55:59 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 23 Jan 2001 10:55:59 -0500
Subject: [Rd] Guidelines for print methods?
Message-ID: <3a6da51e.932051494@fisher.stats.uwo.ca>

Are there guidelines for what print methods should do?  The reason I
ask is that I was recently confused by what Sys.time prints:

> Sys.time()
[1] "2001-01-23 10:38:17"

I thought from the look of this that Sys.time returned a string, not
an object with a class.  (The help is clear that it returns an object,
but I didn't get that far.) The problem is that print.POSIXct() calls
print() to print the result, rather than cat(), like many other print
methods.

I prefer the printing using cat(), because then it's clear that
there's a print method involved, it's not print.default just
displaying a vector.

Of course, I could have a vector of multiple POSIXct values, in which
case calling print() would probably be appropriate.  (But it might
still be a good idea to use "quote=FALSE" to let me know there's
something special there.)

Shouldn't a print method give some indication that what is being
printed isn't a simple vector?  I'm interested in others' opinions on
this.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 23 17:57:11 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jan 2001 12:57:11 -0500
Subject: [Rd] 1.2.1 segfault
Message-ID: <3A6DC5F6.65C8C7C6@bank-banque-canada.ca>

I've trapped this segfault with gdb, but I'm not sure what it means or what to do
next.

Paul
_____

$ R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa5/gilp/R-versions/R-1.2.1/bin/R.bin
Warning: cannot determine current directory

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) c
Continuing.
 require("dse2"); require("curve")
Loading required package: dse2
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
[1] TRUE
Loading required package: curve
[1] TRUE
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)  system.info()
Undefined command: "system".  Try "help".
(gdb) c
Continuing.
 system.info()
          _
platform  sparc-sun-solaris2.6
arch      sparc
os        solaris2.6
system    sparc, solaris2.6
status
major     1
minor     2.1
year      2001
month     01
day       15
language  R
OSversion SunOS5
OStype    Unix
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
fuzz.small <- 1e-12
fuzz.large <- 1e-6
fuzz.very.large <- 1e-2
digits <- 18
all.ok <- T
test.rng <- list(kind="Wichmann-Hill",seed=c(979,1479,1542),normal.kind="Box-Muller")

>
> > > > > >
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
  z  <-  ARMA(A=array(c(1,.5,.3),c(3,1,1)),
              B=array(1,c(1,1,1)),
              C=NULL, description="simplified guide example")

  VARmodel <-l(z,simulate(z, rng=test.rng))
  SSmodel  <- l(to.SS(VARmodel),  VARmodel$data)
+
+ > > > > >
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

> gctorture()
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

>   tst <- spanSS.f <- span(SSmodel)

Program received signal SIGSEGV, Segmentation fault.
0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
1027   FORWARD_CHILDREN(s);
(gdb)  bt
#0  0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
#1  0x731c8 in R_gc_internal (size_needed=2) at memory.c:1670
#2  0x72dbc in Rf_allocVector (type=13, length=4) at memory.c:1542
#3  0x48794 in CPtrToRObj (p=0xd9fb78, arg=0xd9f208, Fort=1) at dotcode.c:180
#4  0x511d0 in do_dotCode (call=0x8ad148, op=0xd9f668, args=0xda163c,
    env=0xd9da48) at dotcode.c:1778
#5  0x56c44 in Rf_eval (e=0x3a9fb8, rho=0xd9da48) at eval.c:340
#6  0x58f18 in Rf_DispatchOrEval (call=0x3a94d0, generic=0x1632e8 "[",
    args=0x3a94b4, rho=0xd9da48, ans=0xefffc1c4, dropmissing=0) at eval.c:1386
#7  0xbea40 in do_subset (call=0x3a94d0, op=0x1c3754, args=0x3a94b4,
    rho=0xd9da48) at subset.c:471
#8  0x56aa0 in Rf_eval (e=0x3a94d0, rho=0xd9da48) at eval.c:317
#9  0x582c0 in do_set (call=0x3a95cc, op=0x1c3834, args=0x3a95b0, rho=0xd9da48)
    at eval.c:1008
#10 0x56aa0 in Rf_eval (e=0x3a95cc, rho=0xd9da48) at eval.c:317
#11 0x57c8c in do_begin (call=0x3c0e84, op=0x1c37c4, args=0x3a96e4,
    rho=0xd9da48) at eval.c:803
#12 0x56aa0 in Rf_eval (e=0x3c0e84, rho=0xd9da48) at eval.c:317
#13 0x570bc in Rf_applyClosure (call=0xd9d7fc, op=0x319cf4, arglist=0xb750c0,
    rho=0xb75aac, suppliedenv=0xd9d770) at eval.c:501
#14 0x7a1fc in applyMethod (call=0xd9d7fc, op=0x319cf4, args=0xb750c0,
    rho=0xb75aac, newrho=0xd9d770) at objects.c:117
#15 0x7a660 in Rf_usemethod (generic=0xefffc9b0 "genD", obj=0xd9f398,
    call=0x3c1870, args=0x15d400, rho=0xb75aac, ans=0xefffc9ac)
    at objects.c:252
#16 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb75aac) at objects.c:325
#17 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb75aac) at eval.c:317
#18 0x570bc in Rf_applyClosure (call=0x3db454, op=0x31df48, arglist=0xb750c0,
    rho=0xb792e4, suppliedenv=0x1b2868) at eval.c:501
#19 0x56ccc in Rf_eval (e=0x3db454, rho=0xb792e4) at eval.c:352
#20 0x58530 in Rf_evalList (el=0x3db4e0, rho=0xb792e4) at eval.c:1087
#21 0x56bd0 in Rf_eval (e=0x3db550, rho=0xb792e4) at eval.c:338
---Type <return> to continue, or q <return> to quit---
#22 0x57c8c in do_begin (call=0x3db56c, op=0x1c37c4, args=0x3db588,
    rho=0xb792e4) at eval.c:803
#23 0x56aa0 in Rf_eval (e=0x3db56c, rho=0xb792e4) at eval.c:317
#24 0x570bc in Rf_applyClosure (call=0xb79300, op=0x31a280, arglist=0xb6fc70,
    rho=0xb759e8, suppliedenv=0xb792c8) at eval.c:501
#25 0x7a1fc in applyMethod (call=0xb79300, op=0x31a280, args=0xb6fc70,
    rho=0xb759e8, newrho=0xb792c8) at objects.c:117
#26 0x7a660 in Rf_usemethod (generic=0xefffd3f8 "genD", obj=0xda0fc0,
    call=0x3dcd2c, args=0x15d400, rho=0xb759e8, ans=0xefffd3f4)
    at objects.c:252
#27 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb759e8) at objects.c:325
#28 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb759e8) at eval.c:317
#29 0x570bc in Rf_applyClosure (call=0x3a7dd4, op=0x31df48, arglist=0xb6fc70,
    rho=0xb699f0, suppliedenv=0x1b2868) at eval.c:501
#30 0x56ccc in Rf_eval (e=0x3a7dd4, rho=0xb699f0) at eval.c:352
#31 0x58f18 in Rf_DispatchOrEval (call=0x3a7e44, generic=0x163380 "$",
    args=0x3a7e28, rho=0xb699f0, ans=0xefffd89c, dropmissing=0) at eval.c:1386
#32 0xbf38c in do_subset3 (call=0x3a7e44, op=0x1d08ec, args=0x3a7e28,
    env=0xb699f0) at subset.c:758
#33 0x56aa0 in Rf_eval (e=0x3a7e44, rho=0xb699f0) at eval.c:317
#34 0x58f18 in Rf_DispatchOrEval (call=0x3a7458, generic=0x1632e8 "[",
    args=0x3a743c, rho=0xb699f0, ans=0xefffdae4, dropmissing=0) at eval.c:1386
#35 0xbea40 in do_subset (call=0x3a7458, op=0x1c3754, args=0x3a743c,
    rho=0xb699f0) at subset.c:471
#36 0x56aa0 in Rf_eval (e=0x3a7458, rho=0xb699f0) at eval.c:317
#37 0x582c0 in do_set (call=0x3a7538, op=0x1c3834, args=0x3a74c8, rho=0xb699f0)
    at eval.c:1008
#38 0x56aa0 in Rf_eval (e=0x3a7538, rho=0xb699f0) at eval.c:317
#39 0x57c8c in do_begin (call=0x3a7554, op=0x1c37c4, args=0x3a7570,
    rho=0xb699f0) at eval.c:803
#40 0x56aa0 in Rf_eval (e=0x3a7554, rho=0xb699f0) at eval.c:317
#41 0x573b4 in do_if (call=0x3a5434, op=0x1b22d4, args=0x3a5418, rho=0xb699f0)
---Type <return> to continue, or q <return> to quit---
    at eval.c:591
#42 0x56aa0 in Rf_eval (e=0x3a5434, rho=0xb699f0) at eval.c:317
#43 0x57c8c in do_begin (call=0x3a5450, op=0x1c37c4, args=0x3a5530,
    rho=0xb699f0) at eval.c:803
#44 0x56aa0 in Rf_eval (e=0x3a5450, rho=0xb699f0) at eval.c:317
#45 0x570bc in Rf_applyClosure (call=0xb596e0, op=0x319298, arglist=0xb7d308,
    rho=0xb7c390, suppliedenv=0xb58364) at eval.c:501
#46 0x7a1fc in applyMethod (call=0xb596e0, op=0x319298, args=0xb7d308,
    rho=0xb7c390, newrho=0xb58364) at objects.c:117
#47 0x7a660 in Rf_usemethod (generic=0xefffe580 "span", obj=0xda0fc0,
    call=0x3a79e4, args=0x15d400, rho=0xb7c390, ans=0xefffe57c)
    at objects.c:252
#48 0x7a930 in do_usemethod (call=0x46e1dc, op=0x1d0c50, args=0x46e188,
    env=0xb7c390) at objects.c:325
#49 0x56aa0 in Rf_eval (e=0x46e1dc, rho=0xb7c390) at eval.c:317
#50 0x570bc in Rf_applyClosure (call=0xb7e4b0, op=0x3223e8, arglist=0xb7d308,
    rho=0x1d16dc, suppliedenv=0x1b2868) at eval.c:501
#51 0x56ccc in Rf_eval (e=0xb7e4b0, rho=0x1d16dc) at eval.c:352
#52 0x582c0 in do_set (call=0xb7e5e4, op=0x1c3834, args=0xb7e5c8, rho=0x1d16dc)
    at eval.c:1008
#53 0x56aa0 in Rf_eval (e=0xb7e5e4, rho=0x1d16dc) at eval.c:317
#54 0x582c0 in do_set (call=0xb7e6c4, op=0x1c3834, args=0xb7e6a8, rho=0x1d16dc)
    at eval.c:1008
#55 0x56aa0 in Rf_eval (e=0xb7e6c4, rho=0x1d16dc) at eval.c:317
#56 0x6e0e8 in R_ReplConsole (rho=0x1d16dc, savestack=0, browselevel=0)
    at main.c:187
#57 0x6e85c in run_Rmainloop () at main.c:491
#58 0x6e8a0 in Rf_mainloop () at main.c:505
#59 0xc5d74 in main (ac=0, av=0xeffff1b4) at system.c:88
(gdb)
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:45:15 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:45:15 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231845.TAA29799@pubhealth.ku.dk>


R dumps core if the first command I use is Sys.time():

    > Sys.time()
    Segmentation fault (core dumped) 

This works fine:

    > s <- Sys.time()
    > s
    [1] "2001-01-23 19:38:49 CET"

This works fine too:

    > 1+1
    [1] 2
    > Sys.time()
    [1] "2001-01-23 19:40:56 CET"

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:56:25 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:56:25 +0100 (MET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
Message-ID: <200101231856.TAA29862@pubhealth.ku.dk>

Peter Kleiweg skriver...

> R dumps core if the first command I use is Sys.time():
> 
>     > Sys.time()
>     Segmentation fault (core dumped) 

(peter) ~ R -d gdb

[snip]

GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
(gdb) run
Starting program: /usr/local/R/lib/R/bin/R.bin

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

[snip]

Type `q()' to quit R.

> Sys.time()

Program received signal SIGSEGV, Segmentation fault.
0x401029ce in strftime () at strftime.c:287
strftime.c:287: No such file or directory.
(gdb)        


-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:00:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Jan 2001 20:00:08 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231900.UAA29899@pubhealth.ku.dk>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

>
> R dumps core if the first command I use is Sys.time():
>
>     > Sys.time()
>     Segmentation fault (core dumped)
>
> This works fine:
>
>     > s <- Sys.time()
>     > s
>     [1] "2001-01-23 19:38:49 CET"
>
> This works fine too:
>
>     > 1+1
>     [1] 2
>     > Sys.time()
>     [1] "2001-01-23 19:40:56 CET"

It does not fail on my RH6.2 systems, so can you debug it please?

>
> --please do not edit the information below--
>
> Version:
>  platform = i586-pc-linux-gnu
>  arch = i586
>  os = linux-gnu
>  system = i586, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:05:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 Jan 2001 19:05:42 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <200101231856.TAA29862@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

> Peter Kleiweg skriver...
>
> > R dumps core if the first command I use is Sys.time():
> >
> >     > Sys.time()
> >     Segmentation fault (core dumped)
>
> (peter) ~ R -d gdb
>
> [snip]
>
> GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
> (gdb) run
> Starting program: /usr/local/R/lib/R/bin/R.bin
>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> [snip]
>
> Type `q()' to quit R.
>
> > Sys.time()
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x401029ce in strftime () at strftime.c:287
> strftime.c:287: No such file or directory.
> (gdb)

Is this the RH5.0 you mentioned earlier (that gdb is pretty ancient)?  Did
you set TZ as advised in ?DateTimeClasses to work around bugs in deficient
Linux distros?  RH6.2's strftime will crash on POSIXlt (and its man page)
correct inputs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 22:53:03 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 23 Jan 2001 23:53:03 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>
Message-ID: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>

Prof Brian D Ripley skriver...

> Is this the RH5.0 you mentioned earlier (that gdb is pretty
> ancient)?

Yes, it is. Using it quite a while now.

> Did you set TZ as advised in ?DateTimeClasses to work around
> bugs in deficient Linux distros? RH6.2's strftime will crash
> on POSIXlt (and its man page) correct inputs.

Setting TZ has no effect. R still dumps core. I don't see the
point of setting TZ, since it is unset in datetime.c

I now do remember I had inexplicable core dump with strftime (or
a similar function) in another program. It was a while back, I
can't recall the details, nor do I remember the program.

In another mail you ask me to debug the problem. I have no
experience debugging large programs, and if the problem is
caused by a faulty library function I don't see the point
trying.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 08:54:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 24 Jan 2001 08:54:09 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>

On Tue, 23 Jan 2001, Peter Kleiweg wrote:

> Prof Brian D Ripley skriver...
>
> > Is this the RH5.0 you mentioned earlier (that gdb is pretty
> > ancient)?
>
> Yes, it is. Using it quite a while now.
>
> > Did you set TZ as advised in ?DateTimeClasses to work around
> > bugs in deficient Linux distros? RH6.2's strftime will crash
> > on POSIXly (and its man page) correct inputs.
>
> Setting TZ has no effect. R still dumps core. I don't see the
> point of setting TZ, since it is unset in datetime.c

It is only unset (if possible) if it was initially unset. You do seem to
give the idea that you think the R developers do not know what they are
doing! Did you actually test your hypothesis?  If you did, and it is
correct, that is another bug of your system. On RH6.2

blackcap% setenv TZ GMT0DST
blackcap% R
> Sys.getenv("TZ")
       TZ
"GMT0DST"
> Sys.time()
[1] "2001-01-24 08:47:26 GMT"
> Sys.getenv("TZ")
       TZ
"GMT0DST"


> I now do remember I had inexplicable core dump with strftime (or
> a similar function) in another program. It was a while back, I
> can't recall the details, nor do I remember the program.
>
> In another mail you ask me to debug the problem. I have no
> experience debugging large programs, and if the problem is
> caused by a faulty library function I don't see the point
> trying.

But you did send a debug log to R-devel shortly after I asked
which told me the error was in strftime....  It would have been
helpful to have put that (and your Linux distro) in the original message.

Please do remember that there is not a technical support section receiving
these bug reports, but a group of volunteers,  those who in the main
provided you with the software in the first place.  Incomplete and
inaccurate reports make their task harder than necessary, and that's
unkind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Jan 24 09:30:31 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 24 Jan 2001 10:30:31 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0101241017370.670-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Tue, 23 Jan 2001, Peter Kleiweg wrote:
> 
> > Prof Brian D Ripley skriver...

> > > Did you set TZ as advised in ?DateTimeClasses to work around
> > > bugs in deficient Linux distros? RH6.2's strftime will crash
> > > on POSIXly (and its man page) correct inputs.
> >
> > Setting TZ has no effect. R still dumps core. I don't see the
> > point of setting TZ, since it is unset in datetime.c
> 
> It is only unset (if possible) if it was initially unset.

There might be some logic behind this, but don't expect every
outsider to understand this. I just noticed setting TZ has no
effect.

> You do seem to
> give the idea that you think the R developers do not know what they are
> doing! Did you actually test your hypothesis?  If you did, and it is
> correct, that is another bug of your system. On RH6.2

I read the code in datetime.c. In there TZ is unset. I have no
overview on how this code is used.
 
> > In another mail you ask me to debug the problem. I have no
> > experience debugging large programs, and if the problem is
> > caused by a faulty library function I don't see the point
> > trying.
> 
> But you did send a debug log to R-devel shortly after I asked
> which told me the error was in strftime....  It would have been
> helpful to have put that (and your Linux distro) in the original message.

I only copied something I saw being done in another mail I
received just after I sent my first message. As to debugging the
complete code, see how it got to this error, that is something
beyond me.
 
> Please do remember that there is not a technical support section receiving
> these bug reports, but a group of volunteers,  those who in the main
> provided you with the software in the first place.  Incomplete and
> inaccurate reports make their task harder than necessary, and that's
> unkind.

Well, I'm not a professional either. I don't file bug reports
demanding a solution. I thought bug reports might be useful to
the developers. Perhaps you should add a warning to the help on
bug.report, something like "don't bother submitting a bug report
if you haven't a clue".

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 24 11:21:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jan 2001 12:21:59 +0100
Subject: [Rd] DSC 2001: 2nd CFP
Message-ID: <14958.47831.121738.844217@mithrandir.hornik.net>

DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001/
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universität Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Doug Bates			University of Wisconsin, Madison
  Roger Bivand			University of Bergen 
  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  John Eaton			University of Wisconson, Madison
  Robert Gentleman		Harvard University
  Torsten Hothorn		Universität Erlangen
  Kurt Hornik			Technische Universität Wien  
  Stefano Iacus			Università degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Friedrich Leisch		Technische Universität Wien
  Uwe Ligges			Universität Dortmund
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mächler		ETH Zurich
  Duncan Murdoch		University of Western Ontario 
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universität Wien
  Martyn Plummer		International Agency for Research on Cancer
  Brian Ripley			University of Oxford
  Antony Rossini		University of Washington
  Günther Sawitzki		Universität Heidelberg
  David Smith			MathSoft
  Detlef Steuer			Universität der Bundeswehr, Hamburg
  Deborah Swayne		AT&T Labs
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota
  Antony Unwin			Universität Augsburg
  Gregory Warnes		Pfizer Global Research & Development
  Chen Xun			Merck Research Laboratories

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fujimori@grafin.fujimori.cache.waseda.ac.jp  Wed Jan 24 22:26:45 2001
From: fujimori@grafin.fujimori.cache.waseda.ac.jp (Yoriaki FUJIMORI)
Date: Wed, 24 Jan 2001 22:26:45 +0000
Subject: [Rd] Re: [R] RPM of R-1.2.1 for RH 7?
In-Reply-To: Your message of "Wed, 24 Jan 2001 11:01:32 +0100."
 <XFMail.010124110132.plummer@iarc.fr>
Message-ID: <200101241326.WAA00300@grafin.fujimori.cache.waseda.ac.jp>


As for R on Linux/Alpha, people had better think about compiling sources
with Compaq's ccc/cxx/fort.  These compilers create far better code
than GNU's gcc/g++/g77 for Alpha.  R compiled by GNU's compilers runs
slow.
I do not know if R-developers are running Linux/Alpha boxes at hand.
(Probably not.) 

Yoriaki Fujimori
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jan 24 19:12:49 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 24 Jan 2001 20:12:49 +0100 (MET)
Subject: [Rd] adjustment of expressions with mtext(..., las=2) (PR#823)
Message-ID: <200101241912.UAA12694@pubhealth.ku.dk>

[Subject renamed for bug report]


Don Wingate wrote:
[...]
> For example:
> 
>         math.names.text <- c("x1^2", "x2^2", "x2%*%x3) # in actual use,
> dynamically created.
>         math.expressions <- parse(text=math.names.text)
>         dotplot(1:3, labels=math.expressions)
[...] 
> By the way, I notice that when using math expressions as the labels in
> dotplot, the positioning of the labels is off to the right (and off the
> visible screen). Is this a bug in the way that the size of the math
> expressions are computed?


Yes, it looks like a bug. I try to simplify it:

When using mtext(..., las=2, adj=anything), the argument adj doesn't
seem to have any effect:

  plot(1:10)
  mtext("x^2 + x^3", side = 2, las=2, at=3, line=3, adj=0) # works fine
...

  # but here it is not left justified at line=3:
  mtext(expression(x^2 + x^3), side = 2, las=2, at=7, line=3, adj=0) 

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Wed Jan 24 23:00:41 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 00:00:41 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242300.AAA13617@pubhealth.ku.dk>

Having trouble with netCDF since I upgraded to 1.2.1 (did directly
from 1.1.1).  Package was recompiled after the upgrade.

Symptoms:
open.netCDF returns cleanly, but read.netCDF causes R to segfault
and dump core.  What else do you need me to write to help?

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:netCDF, package:RODBC, package:ts, package:local, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 23:09:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 00:09:18 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242309.AAA13649@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> Having trouble with netCDF since I upgraded to 1.2.1 (did directly
> from 1.1.1).  Package was recompiled after the upgrade.

You did use netCDF_1.1 for 1.2.1 did you.  I wonder?
netCDF_1.0-1 will not work.

> Symptoms:
> open.netCDF returns cleanly, but read.netCDF causes R to segfault
> and dump core.  What else do you need me to write to help?

The first item is to report that it had passed R CMD check netCDF?  That
uses read.netCDF.  If so the problem is data-specific, if not it
is with your installation.  So we either need the data or a lot
more about your installation of netCDF.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:49 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:49 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13932@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:38 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:38 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13918@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:43:48 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:43:48 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250043.BAA14088@pubhealth.ku.dk>

Another interesting point - read.netCDF does *not* cause
R to dump core if debug(read.netCDF) is on. To be clear:

> rm(list=ls(all=T))
> library(netCDF)

# --- works ---
> debug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")

--- lots of stuff deleted ---

> length(z)
[1] 143
--- what it should be

> close.netCDF(fd)
[1] TRUE   

#--- end works ---

That works fine.  Carrying on in the same session:

# --- doesn't work ---

> rm(z,fd)
> undebug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")
Segmentation fault (core dumped)   

# --- end doesn't work ---

Now more puzzled.

Jason Turner
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 25 07:14:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 08:14:02 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250714.IAA15026@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> NetCDF installation:  version 3.4, built from source.
> Other NetCDF utilities continue to work nicely, which
> is how I'm working around the issue.  Now, I'm taking
> existing netCDF files, converting them to csv files,
> and either reading them directly, or loading them
> to PostgreSQL, and using RPgSQL or RODBC.  Conversion
> to csv is done using home-brewed c programs which
> were dynamically linked against libnetcdf.so.  As
> such, I'm pretty sure the library is still working fine.
>
> I have a nice sample netCDF file, but I doubt it's appropriate
> for the bugs list (waste of bandwidth).  It's just under 2K.

I think the thing to do now is to contact the netCDF package
maintainer (Thomas Lumley) with that example.

As I am sure you appreciate we need to eliminate the simple causes first,
and they are common.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holst@math.ku.dk  Thu Jan 25 14:41:12 2001
From: holst@math.ku.dk (holst@math.ku.dk)
Date: Thu, 25 Jan 2001 15:41:12 +0100 (MET)
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
Message-ID: <200101251441.PAA24001@pubhealth.ku.dk>

Dear Sirs,

I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
The configure-script runs without any problems but during 'make' I receive
the following error-message:
[......]
g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
g77 -mieee  -g -O2 -c eigen.f -o eigen.o
g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
ranlib libappl.a
#make: No such file or directory
*** Exit 1
Stop.
*** Exit 1
Stop.
*** Exit 1
Stop.
fenchel:/net/prod/appl/R/R-1.2.1/>

The same problem appears when I try to compile v.1.2.0.

What is wrong?

Best regards
Klaus Holst



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 26 08:44:33 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 26 Jan 2001 09:44:33 +0100
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
In-Reply-To: <200101251441.PAA24001@pubhealth.ku.dk>
References: <200101251441.PAA24001@pubhealth.ku.dk>
Message-ID: <14961.14577.567763.570686@mithrandir.hornik.net>

>>>>> holst  writes:

> Dear Sirs,
> I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
> The configure-script runs without any problems but during 'make' I receive
> the following error-message:
> [......]
> g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
> g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
> g77 -mieee  -g -O2 -c eigen.f -o eigen.o
> g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
> ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
> cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
> lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
> splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
> chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
> dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
> ranlib libappl.a
> #make: No such file or directory
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> fenchel:/net/prod/appl/R/R-1.2.1/>

> The same problem appears when I try to compile v.1.2.0.

> What is wrong?

DEC make, I think :-)

But anyway, the problem should be fixed in the current r-patched
snapshot.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keith.briggs@bt.com  Fri Jan 26 11:48:02 2001
From: keith.briggs@bt.com (keith.briggs@bt.com)
Date: Fri, 26 Jan 2001 12:48:02 +0100 (MET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
Message-ID: <200101261148.MAA02460@pubhealth.ku.dk>

Dear Dr. Trapletti,

I am trying to use your tseries 0.7-0 package with R 1.2.1
(the latest version) under redhat linux 6.2, but the command
library(tseries)
causes R dump to core with a segmentation fault.

Do you have any suggestions how to fix this?

Thank you,
Keith

Dr. Keith M. Briggs, Complexity Research Group, BTexaCT.
Adastral Park admin2 pp5, Martlesham Heath, IP5 3RE, Suffolk,  UK
Tel: 01473 641 911  Fax: 01473 647 410.  Home tel:  01473 625 972
Personal homepage http://www.btexact.com/people/briggsk2/ 
NEW!  Exact Real software: http://www.btexact.com/people/briggsk2/XR.html



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 26 12:53:33 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jan 2001 13:53:33 +0100 (CET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
In-Reply-To: <200101261148.MAA02460@pubhealth.ku.dk>
Message-ID: <XFMail.010126135333.plummer@iarc.fr>

On 26-Jan-01 keith.briggs@bt.com wrote:
> Dear Dr. Trapletti,
> 
> I am trying to use your tseries 0.7-0 package with R 1.2.1
> (the latest version) under redhat linux 6.2, but the command
> library(tseries)
> causes R dump to core with a segmentation fault.

This is a system-specific problem.  The Fortran compiler that comes
with Red Hat 6.2 is known to cause problems when dynamically
loading shared objects. I'm using gcc 2.95.2 on Red Hat 6.2
which I  used to build both R and tseries. I do not have this problem.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Jan 26 14:56:45 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 26 Jan 2001 15:56:45 +0100
Subject: [Rd] Suggestion for an extension of the API
Message-ID: <3A71902D.87E0F755@olsen.ch>

Dear R Developers (I think in particular Brian)

Especially for larger optimization problems, it would be nice to have an
entry point for C/C++ code to the R optimizers (the ones which are called
when using optim()), where the client just has to provide the functions
fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
$RHOME/src/main/optim.c). Are there any plans for providing such an entry
point?

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 26 16:12:50 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2001 10:12:50 -0600
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: Adrian Trapletti's message of "Fri, 26 Jan 2001 15:56:45 +0100"
References: <3A71902D.87E0F755@olsen.ch>
Message-ID: <6rbssu9trx.fsf@franz.stat.wisc.edu>

Adrian Trapletti <adrian@olsen.ch> writes:

> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

There is such an entry point for the optimizer used by nlm.  It is
called optif9 and is declared in $RHOME/lib/R/include/R_ext/Applic.h

I can provide an example of its use if you wish.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 26 20:58:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Jan 2001 20:58:32 +0000 (GMT)
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: <3A71902D.87E0F755@olsen.ch>
Message-ID: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>

On Fri, 26 Jan 2001, Adrian Trapletti wrote:

> Dear R Developers (I think in particular Brian)
>
> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

No, but there can be.  There are at least some problems with error-handling
that need to be thought about.

Is what you want essentially to make vmmin (...) a public entry point,
avoiding having to deal with OptStruct's?  If that suffices, it would
be easy.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sat Jan 27 00:57:38 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sat, 27 Jan 2001 01:57:38 +0100 (MET)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
Message-ID: <200101270057.BAA07875@pubhealth.ku.dk>

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jan 27 01:09:03 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Jan 27 04:37:38 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 26 Jan 2001 22:37:38 -0600 (CST)
Subject: [Rd] Off-topic: Pretty-printing R (or S) code with GNU a2ps
Message-ID: <14962.20626.613619.35152@sonny.eddelbuettel.com>


--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


GNU a2ps is a fairly versatile text-to-anything processor.  It is useful for
typsetting source code from a wide variety of programming languages.  As R
(ie S) wasn't supported yet, I quickly cobbled a style sheet for the S
language together. Stylesheets are documented in the texinfo docs for a2ps,
and examples can be found in /usr/share/a2ps/sheets (on Debian at least,
others distros or unices probably have similar locations). IIRC a2ps exists
for NT but might require Cygwin. I typeset on Linux and only print on NT :)

Well, as I still don't really know what I'm doing with R, I would appreciate
comments / feedback / input from anyone could spend a moment or two on this.
To activate the stylesheet, simple patch
      /usr/share/a2ps/sheets/sheets.map
as per the short diff below which declares that the stylesheet s.ssh shall be
used for filenames matching /*.[RS]/.  The sheet itself is attached, just
place it in the same directory, ie /usr/share/a2ps/sheets/.

Usage then simply becomes
      a2ps -Pdisplay foo.R
or
      a2ps foo.R -o foo.ps; gv foo.ps
in case the "display" device isn't defined.

A few points / questions:

 * content:  a2ps uses tricks to use TeX symbols. It works well to typset
   <- with \leftarrow (uncomment that in s.ssh to see) but I couldn't tell
   it to parse
      a<-2
   it only finds <- with whitespace, eg
      a <- 2
   What could be done about <<- ?  Is there a matching TeX symbol?

 * more content: Is the list of keywords really that short? I couldn't find
   much else...  

 * scope:  Are other file extensions in use? Are there conventions for S or
   Splus files?  Any clever way to make a2ps understand the files in 
   $R_HOME/library/$PACKAGE/R  are also R?  Could file(1) be taught what 
   an R file is?

 * editorial: shall this be the s.ssh or r.ssh or rs.ssh? 

Thanks, Dirk


edd@sonny:/tmp/a2ps> cat sheets.map.diff
*** /usr/share/a2ps/sheets/sheets.map   Fri Jan 26 22:13:55 2001
--- sheets.map  Fri Jan 26 22:17:42 2001
***************
*** 373,378 ****
--- 373,381 ----
        <*python script*>
        /*.py/
 
+ # GNU R files, as well as S language files
+ s:    /*.[RS]/
+
  # REXX command files
  rexx: /*.cmd/i
                                                  


--oP8mQFO4PT
Content-Type: application/octet-stream
Content-Disposition: attachment;
	filename="s.ssh"
Content-Transfer-Encoding: base64

IyBTdHlsZSBzaGVldCBmb3IgdGhlIFMgbGFuZ3VhZ2UsIHBhcnRpY3VsYXJseSBpdHMgUiBk
aWFsZWN0CiMKIyBHTlUgUiBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBTLCBhIGxhbmd1YWdl
IChkZXZlbG9wZWQgYXQgQmVsbCAKIyBMYWJvcmF0b3JpZXMpIGZvciBzdGF0aXN0aWNhbCBj
b21wdXRpbmcgYW5kIGdyYXBoaWNzLiAKIwojIEEgc3VpdGFibGUgc2hlZXRzLm1hcCBlbnRy
eSB3b3VsZCBiZQojIEdOVSBSIGZpbGVzLCBhcyB3ZWxsIGFzIFMgbGFuZ3VhZ2UgZmlsZXMK
IyBzOgkvKi5bUlNdLwojCiMgQ29weXJpZ2h0IChjKSAyMDAxIERpcmsgRWRkZWxidWV0dGVs
CiMKCiMKIyBUaGlzIGZpbGUgaXMgcGFydCBvZiBhMnBzLgojCiMgVGhpcyBwcm9ncmFtIGlz
IGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkK
IyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNl
IGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIsIG9yIChhdCB5b3VyIG9wdGlvbikKIyBhbnkgbGF0ZXIgdmVyc2lvbi4K
IwojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdp
bGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVu
IHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1Mg
Rk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2
ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdp
dGggdGhpcyBwcm9ncmFtOyBzZWUgdGhlIGZpbGUgQ09QWUlORy4gIElmIG5vdCwgd3JpdGUg
dG8KIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCA1OSBUZW1wbGUgUGxhY2UgLSBT
dWl0ZSAzMzAsCiMgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuCiMKCnN0eWxlICJTIGxh
bmd1YWdlIiBpcwp3cml0dGVuIGJ5ICJEaXJrIEVkZGVsYnVldHRlbCA8ZWRkQGRlYmlhbi5v
cmc+Igp2ZXJzaW9uIGlzIDAuMQpyZXF1aXJlcyBhMnBzIDQuMTMKCmRvY3VtZW50YXRpb24g
aXMKICJhMnBzLVMgUHJldHR5IFByaW50ZXIgVmVyc2lvbiAwLjEgYXMgb2YgMjUtSmFuLTIw
MDEiCiAiVGhpcyBzdHlsZSBzaGVldCBpcyBwcmVsaW1pbmFyeS4iCmVuZCBkb2N1bWVudGF0
aW9uCgphbHBoYWJldHMgYXJlCiAgICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2Rl
ZmdoaWprbG1ub3BxcnN0dXZ3eHl6ISQqKy0uLzw9Pj9AXyIKY2FzZSBzZW5zaXRpdmUKCiNr
ZXl3b3JkcyBpbiBLZXl3b3JkX3N0cm9uZyBhcmUKIyAgIGZ1bmN0aW9uLDwtLDw8LQojZW5k
IGtleXdvcmRzCgprZXl3b3JkcyBpbiBLZXl3b3JkIGFyZQogICBlbHNlLCBmb3IsIGZ1bmN0
aW9uLCBpZiwgImluIiwgcmVwZWF0LCBzd2l0Y2gsIHdoaWxlCmVuZCBrZXl3b3JkcwoKI29w
dGlvbmFsIG9wZXJhdG9ycyBhcmUKb3BlcmF0b3JzIGFyZQogICA8PiBcbmVxLAogICAhPSBc
bmVxLAogICA8PSBcbGVxLAogICA+PSBcZ2VxLAogICA9ICBcZXF1aXYsCiMgICA8LSBcbGVm
dGFycm93LAogICA8LSwKICAgPDwtLAogICAtPiwKICAgXwplbmQgb3BlcmF0b3JzCgpzZXF1
ZW5jZXMgYXJlCiAgICAiIyIgQ29tbWVudCwKICAgIEMtc3RyaW5nLAogICAgQy1jaGFyCmVu
ZCBzZXF1ZW5jZXMKCmVuZCBzdHlsZQo=

--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: .signature
Content-Transfer-Encoding: 7bit



-- 
According to the latest figures, 43% of all statistics are totally worthless.

--oP8mQFO4PT--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From baron@cattell.psych.upenn.edu  Sun Jan 28 14:07:28 2001
From: baron@cattell.psych.upenn.edu (baron@cattell.psych.upenn.edu)
Date: Sun, 28 Jan 2001 15:07:28 +0100 (MET)
Subject: [Rd] variables in nls (PR#829)
Message-ID: <200101281407.PAA11919@pubhealth.ku.dk>

Full_Name: Jonathan Baron
Version: 1.2.1
OS: Linux
Submission from: (NULL) (151.197.202.231)


The following gives an error message:
> nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
Error in as.name(varName) : attempt to use zero-length variable name

The following runs fine:
> nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))

This happens even though doit.vm and doit[2,] are identical (and efft[])


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jan 28 15:01:27 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 28 Jan 2001 16:01:27 +0100 (CET)
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: <200101281407.PAA11919@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>



On Sun, 28 Jan 2001 baron@cattell.psych.upenn.edu wrote:

> Full_Name: Jonathan Baron
> Version: 1.2.1
> OS: Linux
> Submission from: (NULL) (151.197.202.231)
> 
> 
> The following gives an error message:
> > nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
> Error in as.name(varName) : attempt to use zero-length variable name
> 
> The following runs fine:
> > nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))
> 
> This happens even though doit.vm and doit[2,] are identical (and efft[])
> 

Looks like a problem (?) with all.vars():

 temp <- matrix(1:4, 2)
 all.vars(temp ~ 3) # OK
[1] "temp"

 all.vars(temp[1, ] ~ 3) # Here is the problem. 
[1] "temp" ""

 all.vars(temp[1, TRUE] ~ 3) # works again
[1] "temp"


If this is expected (?), because of an implicitly given empty variable
name ([1, ThisOne]) for example, nls() has to be fixed:


Just insert after the lines
 
  varNames <- varNames[is.na(match(varNames, names(start),
        nomatch = NA))]

the line 

  varNames <- varNames[varNames != ""]



Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 28 15:22:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 2001 16:22:17 +0100
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: Uwe Ligges's message of "Sun, 28 Jan 2001 16:01:27 +0100 (CET)"
References: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>
Message-ID: <x2zogbzopi.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Looks like a problem (?) with all.vars():
> 
>  temp <- matrix(1:4, 2)
>  all.vars(temp ~ 3) # OK
> [1] "temp"
> 
>  all.vars(temp[1, ] ~ 3) # Here is the problem. 
> [1] "temp" ""
> 
>  all.vars(temp[1, TRUE] ~ 3) # works again
> [1] "temp"
> 
> 
> If this is expected (?), because of an implicitly given empty variable
> name ([1, ThisOne]) for example, nls() has to be fixed:
> 
> 
> Just insert after the lines
>  
>   varNames <- varNames[is.na(match(varNames, names(start),
>         nomatch = NA))]
> 
> the line 
> 
>   varNames <- varNames[varNames != ""]

Thanks for the workaround, Uwe. In the longer run it is probably
better to make all.vars skip empty variable names.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Mon Jan 29 09:03:08 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Mon, 29 Jan 2001 10:03:08 +0100
Subject: [Rd] Suggestion for an extension of the API
References: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>
Message-ID: <3A7531CC.760EF67D@olsen.ch>

Prof Brian D Ripley wrote:

> On Fri, 26 Jan 2001, Adrian Trapletti wrote:
>
> > Dear R Developers (I think in particular Brian)
> >
> > Especially for larger optimization problems, it would be nice to have an
> > entry point for C/C++ code to the R optimizers (the ones which are called
> > when using optim()), where the client just has to provide the functions
> > fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> > $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> > point?
>
> No, but there can be.  There are at least some problems with error-handling
> that need to be thought about.
>
> Is what you want essentially to make vmmin (...) a public entry point,
> avoiding having to deal with OptStruct's?  If that suffices, it would
> be easy.

No, my intention was to have a standard entry point from C/C++ to all of these
functions and, hence, give the package developers more flexibility. E.g., in
tseries I currently use for the garch() some fortran optimizer which directly
calls C functions for calculating the gradient and likelihood. arma from
tseries uses the optim function from R and uses the call back mechanism to
calculate the SSE. In these case, I would like to have the same solution for
both the arma and garch classes, ideally using the optimizers from R, but for
performance reasons without the indirection of back-calling R to calculate the
likelihood etc. (I know, I could use optif9, but it would be nicer if all
available optimizers could be used that way.)

For example, having something like

void
vmmin(int n0, double *b, double *Fmin, int maxit, int trace, int *mask,
      double abstol, double reltol, int nREPORT, OptStruct OS,
      int *fncount, int *grcount, int *fail,
      int (*fminfn)(int, double *, OptStruct),
      void (*fmingr)(int, double *, double *, OptStruct))

and so on

in R_ext/Applic.h (as for optif9) would probably be enough. Or as Doug (Thanks
Doug! see below) explained me, additionally introducing a pointer to a state
variable which brings information into the likelihood or gradient evaluation,
like in optif9.

> Douglas Bates wrote:
...
>     optif9(ntheta, ntheta, theta, (fcn_p) mixed_fcn, (fcn_p)
>            mixed_grad, (d2fcn_p) 0, st, typsiz, 1.0 /*fscale*/,
>            1 /*method*/,1 /*iexp*/, &msg, -1 /*ndigit*/, 50 /*itnlim*/,
>            iagflg, 0 /*iahflg*/, -1. /*dlt*/, pow(epsm, 1.0/3.0)
>            /*gradtl*/, 0. /*stepmx*/, sqrt(epsm) /*steptl*/, newtheta,
>            logLik, grad, &itrmcd, a, work, &itncnt);
>
> This is not the most transparent code but one point to note is that
> you can pass a pointer to a structure like "state" to the call to
> optif9 and it will be passed unmodified when calling the function or
> gradient evaluation.  Often it is very difficult to get information
> into the function and gradient evaluations and one has to resort to
> global identifiers, which is risky.  Being able to pass that pointer
> through is very convenient.  (We modified the code to do that.)  For
> C++ you could pass through a pointer to an instance of a class then
> invoke a class method through that pointer.

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:27:11 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:27:11 +0100 (MET)
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
Message-ID: <200101300527.GAA28423@pubhealth.ku.dk>


Hi.

While there is an x-axis set up for:
> plot.factor(factor(1:3))

this axis is not present for
> plot.factor(factor(1:3), col="red")

which actually should just be the same as the first plot and call
barplot(table(.)), shouldn't it?  Where did the ticks and labels go?

Note that
> barplot (table(factor(1:3)), col="red")
has the x-axis.

Something funky is going on with axisnames or args in plot.factor that
I can't figure out.  The situation can be remedied with
> plot.factor(factor(1:3), col="red", axes=TRUE)

alas, why do you need "axes=TRUE"?

Regards,
  -tom



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
> 
> 
> > Now the (actually not so) funny thing is that the labels for the
> > x-axis disappear when I specify colors for the bars.  (R 1.2.1, Linux)
> > Ok, maybe the other thing I'll have to catch up on is the docu...
> 
> The logic around "axisnames" in plot.factor looks not quite right.
> Could you file a bug report on this so that we dont forget?
> 
> barplot(table(factor(1:3)),col="green")
> plot(factor(1:3),col="green",axes=T)
> 
> both work, although the latter is clearly silly.


--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:39:33 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:39:33 +0100 (MET)
Subject: [Rd] screen can't go back to (split) screen with log="y" plot (PR#831)
Message-ID: <200101300539.GAA28465@pubhealth.ku.dk>


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 07:40:51 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 08:40:51 +0100 (MET)
Subject: [Rd] screen can't go back to log="y" plot (PR#831)
Message-ID: <200101300740.IAA28911@pubhealth.ku.dk>

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dkwalker@online.no  Tue Jan 30 14:51:49 2001
From: dkwalker@online.no (David K Walker)
Date: Tue, 30 Jan 2001 14:51:49 +0000
Subject: [Rd] Is Omegahat in R a general language function bus ?
Message-ID: <3.0.6.32.20010130145149.00bd9810@online.no>

Hi !

Can we e.g. embed Perl in R and embed R in Java, start the program counter
in Java, call from Java to Perl via R, and then either (1) call back from
Perl to Java via R or (2) just plain return from Perl to Java via R ?
¨
My reason for asking this is general interest in extensible programming
languages.  My background is heavy in Forth, moderate in assembly language,
so far very light in Scheme, R, Java, Perl, XML, Python.  Later I hope to
implement new statistical software and port an existing large scale time
series database/editor/tablewriter as packages under Debian Gnu/Linux.

David Walker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Tue Jan 30 14:52:51 2001
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301452.PAA09308@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.1
OS: Windows NT4
Submission from: (NULL) (163.1.103.106)


Help file Rconsole.html as distributed with Windows binary distribution refers
at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
"R_USER".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 15:25:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 16:25:41 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301525.QAA09731@pubhealth.ku.dk>

Thanks.

A historical anomaly, now corrected.


> From: david.firth@nuffield.oxford.ac.uk
> Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Rconsole documentation (PR#832)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: David Firth
> Version: 1.2.1
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.106)
> 
> 
> Help file Rconsole.html as distributed with Windows binary distribution refers
> at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
> "R_USER".
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 15:32:30 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 16:32:30 +0100
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 30 Jan 2001 06:27:11 +0100 (MET)"
References: <200101300527.GAA28423@pubhealth.ku.dk>
Message-ID: <x28znt5a41.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi.
> 
> While there is an x-axis set up for:
> > plot.factor(factor(1:3))
> 
> this axis is not present for
> > plot.factor(factor(1:3), col="red")
> 
> which actually should just be the same as the first plot and call
> barplot(table(.)), shouldn't it?  Where did the ticks and labels go?
> 
> Note that
> > barplot (table(factor(1:3)), col="red")
> has the x-axis.
> 
> Something funky is going on with axisnames or args in plot.factor that
> I can't figure out.  The situation can be remedied with
> > plot.factor(factor(1:3), col="red", axes=TRUE)
> 
> alas, why do you need "axes=TRUE"?

Because of the logic of

        axisnames <- if (length(dargs <- list(...)) > 0) {
            nam <- names(dargs)
            ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
                nam) && dargs$xaxt != "n"))
        }

gives FALSE if there are any "..." arguments, and neither of axes= and
xaxt= are given.

I think the first part of plot.factor wants to be 

     if (missing(y) || is.factor(y)) {
	dargs <- list(...)
        axisnames <- if (!is.null(dargs$axes)) dargs$axes
	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
            else TRUE
    }

Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan 30 15:54:44 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 30 Jan 2001 15:54:44 +0000 (GMT)
Subject: [Rd] New aperm
Message-ID: <Pine.GSO.4.20.0101301530280.503-100000@laplace>

Hi Guys -- I have re-written aperm (from R-1.1.1) and I was going to call
it Aperm and bundle it with my tensor library, as it uses strides (like in
Python).  But there might be some interest in including it in the base.  
It is about 6 times quicker:

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.09 0.11 5.20 0.00 0.00
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.89  0.15 33.04  0.00  0.00

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.85  0.18 33.03  0.00  0.00
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.03 0.18 5.21 0.00 0.00

While studying the original aperm code (R-1.1.1) I noticed an error: there
is a missing break after the final case in the TYPEOF(a) switch before the
default which means that if anyone did call aperm with an array of VECSXP
then it would not complete:

> tmp <- array(list(3), c(2, 3))
> tmp[[2, 3]] <- "fred"
> tmp
     [,1]        [,2]        [,3]         
[1,] "Numeric,1" "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1" "Character,1"
> aperm(tmp)
Error in aperm(a, perm, resize) : invalid argument
> Aperm(tmp)
     [,1]        [,2]         
[1,] "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1"  
[3,] "Numeric,1" "Character,1"

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Tue Jan 30 16:31:31 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Tue, 30 Jan 2001 11:31:31 -0500 (EST)
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
Message-ID: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>


In our situation we sometimes run netscape from a another platform via ssh
and so the machine netscape is running on may not contain any R software,
or more precisely the user home account on the machine running
netscape is different from the account they initiated R and
so having netscape look into there home directory will NOT work.

It would desirable to have easy way to specificy a documentation root which
is an actual URL. Is there a place I can specify such a documentation
root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
this has been updated?)

Failing the configuration approach, it would seem some kind
of patch to the file ./src/library/base/R/unix/help.start.R

would be necessary? Anyone have a suggestion? I wouldn't
mind learning a little about scheme (i think this is the language
the file is written in?)


-walter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 17:37:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 18:37:06 +0100
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
In-Reply-To: Walter Tautz's message of "Tue, 30 Jan 2001 11:31:31 -0500 (EST)"
References: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>
Message-ID: <x23de154cd.fsf@blueberry.kubism.ku.dk>

Walter Tautz <wtautz@math.uwaterloo.ca> writes:

> In our situation we sometimes run netscape from a another platform via ssh
> and so the machine netscape is running on may not contain any R software,
> or more precisely the user home account on the machine running
> netscape is different from the account they initiated R and
> so having netscape look into there home directory will NOT work.
> 
> It would desirable to have easy way to specificy a documentation root which
> is an actual URL. Is there a place I can specify such a documentation
> root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
> this has been updated?)
> 
> Failing the configuration approach, it would seem some kind
> of patch to the file ./src/library/base/R/unix/help.start.R
> 
> would be necessary? Anyone have a suggestion? I wouldn't
> mind learning a little about scheme (i think this is the language
> the file is written in?)

Eh? help.start.R is written in R... However, since it's mostly
paste()ing together shell commands it may come across as something
from another language.

There's a remote= argument that you can pass to help.start [try
help.start(remote="http://stat.ethz.ch/R-alpha/")] , but it
doesn't solve the whole issue, e.g. a subsequent help(help) command
will cause a warning:

Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help(help) 

and proceed to try and get

file:/usr/local/lib/R/library/base/html/help.html

rather than something relative to the remote tree. 

I would seem that some of this stuff could do with a little redesign,
so suggestions are welcome. (The idea of having ~/.R is also
problematic if two R sessions for the same user both want to do
help.start())

Notice that using a remote documentation tree is going to lose you
some of the functionality that is normally present in the system: The
set of libraries available to a user may partly sit in his or her home
directory and the .lib.loc vector specifies which locations to search
for libraries. So it's not just a matter of specifying a document
root. 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stoet@pcg.wustl.edu  Tue Jan 30 22:26:41 2001
From: stoet@pcg.wustl.edu (stoet@pcg.wustl.edu)
Date: Tue, 30 Jan 2001 23:26:41 +0100 (MET)
Subject: [Rd] link in FAQ incorrect (PR#833)
Message-ID: <200101302226.XAA11875@pubhealth.ku.dk>

Hi,

the link to the R code for repeated measurement analyses of J Lindsey is
unfortunately not working. I am desperate for repeated measurements in
R; could you please help me out.

Sincerely,

Dr. G. Stoet

--
Dr. Gijsbert Stoet
email: stoet@thalamus.wustl.edu
Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
Phone: (314)7474095 Fax: (314)7474370




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jan 31 01:24:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 30 Jan 2001 20:24:25 -0500
Subject: [Rd] FW: sas.get error
Message-ID: <5429125E11E4D411AF7300805FE603A80FE0F3@groexmbcr02.pfizer.com>

A couple of months ago, I asked Frank Harrell (fharrell@virginia.edu), the
author of the Hmisc S-Plus library, about the reason for his "No porting to
R" requirement.  I may have previously posted his reply, but I don't see it
in the archives, so I'll send it again.

This is a edited version of our email conversation:

 Gregory R. Warnes:  

	The license to the Hmisc library explicitly prohibits modifying the
      code to work with "R".  Why have you made this restriction?
 
 Frank E. Harrell, Jr.:  

     Some time ago an R user took it on himself to start converting my
     libraries to R without at least sending me an E-mail.  He started
     the conversion at a time just when I was making a good deal of
     error corrections and extensions to one of the libraries, so that
     the R version would be instantly out of date and buggy.  I thought
     this was strange and wanted to prevent such problems in the future.
 
     In the meantime I have been looking at R a good deal to see what
     would be involved in conversion.  I have found many more
     inconsistencies between R and S than I originally thought.  Some of
     these inconsistencies are because of improvements, some make the
     language worse (e.g., omission of single precision objects in R, the 
     inability to attach directories).  I estimate it will take me about 200

     hours of work to convert, even if I didn't mind losing single precision

     and Trellis graphics in R.  I'm not ruling out a conversion in the
future 
     but it will take some resources.

     If resources become available in the future I would be interested in 
     starting a CVS server to work will a good R programmer in this
endeavor.  
     Above all I do not want two code bases; version control is needed with
a 
     single code base.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Jan 31 01:25:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jan 2001 20:25:53 -0500
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: Peter Dalgaard BSA's message of "30 Jan 2001 16:32:30 +0100"
References: <200101300527.GAA28423@pubhealth.ku.dk>
 <x28znt5a41.fsf@blueberry.kubism.ku.dk>
Message-ID: <px1ytkwlzy.fsf@infiniti.ece.cmu.edu>


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> tov@ece.cmu.edu writes:

snip

> > Something funky is going on with axisnames or args in plot.factor that
> > I can't figure out.  The situation can be remedied with
> > > plot.factor(factor(1:3), col="red", axes=TRUE)
> > 
> > alas, why do you need "axes=TRUE"?
> 
> Because of the logic of
> 
>         axisnames <- if (length(dargs <- list(...)) > 0) {
>             nam <- names(dargs)
>             ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
>                 nam) && dargs$xaxt != "n"))
>         }
> 
> gives FALSE if there are any "..." arguments, and neither of axes= and
> xaxt= are given.
> 
> I think the first part of plot.factor wants to be 
> 
>      if (missing(y) || is.factor(y)) {
> 	dargs <- list(...)
>         axisnames <- if (!is.null(dargs$axes)) dargs$axes
> 	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
>             else TRUE
>     }
> 
> Anyone know better?


This works for me at least.  Thank you very much,

  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Jan 31 07:31:52 2001
From: gb@stat.umu.se (gb)
Date: Wed, 31 Jan 2001 08:31:52 +0100 (CET)
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: <200101302226.XAA11875@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>

Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
in Netscape for some reason. Change back to
'alpha.luc/ac/be/~jlindsey/rcode.html'
and it works (at lest for me).

Göran

On Tue, 30 Jan 2001 stoet@pcg.wustl.edu wrote:

> Hi,
>
> the link to the R code for repeated measurement analyses of J Lindsey is
> unfortunately not working. I am desperate for repeated measurements in
> R; could you please help me out.
>
> Sincerely,
>
> Dr. G. Stoet
>
> --
> Dr. Gijsbert Stoet
> email: stoet@thalamus.wustl.edu
> Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
> Phone: (314)7474095 Fax: (314)7474370
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 31 12:42:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jan 2001 13:42:11 +0100
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: gb's message of "Wed, 31 Jan 2001 08:31:52 +0100 (CET)"
References: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>
Message-ID: <x24ryflwpn.fsf@blueberry.kubism.ku.dk>

gb <gb@stat.umu.se> writes:

> Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
> in Netscape for some reason. Change back to
> 'alpha.luc/ac/be/~jlindsey/rcode.html'
> and it works (at lest for me).

[r-bugs snipped from recipients, Cc. to Jim]

You mean http://alpha.luc.ac.be/~jlindsey/rcode.html

The very strange thing is that after I had done it once, then the link
in the FAQ suddenly worked.



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Jan  1 01:48:14 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 01 Jan 2001 01:48:14 GMT
Subject: [Rd] Package overview document?
In-Reply-To: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
References: <Pine.GSO.4.05.10012312209120.16875-100000@toucan.stats>
Message-ID: <3a4fdfc9.752081@smtp1.sympatico.ca>

On Sun, 31 Dec 2000 22:16:39 +0000 (GMT), you wrote:

>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>  I saw in the docs somewhere that the DESCRIPTION text
>> would show up in the Latex output in some later version; is anyone
>> working on this?  If not, I might give it a shot.
>
>I've not seen that.  The latex versions are separate files, so it seems
>only to make sense if running pkg2tex on a package.

It was in the extensions manual, in the "Processing Rd format" section
where "R CMD Rd2txt" and "R CMD Rd2dvi" were being discussed.

>Perhaps we need to give a help file such as pkg-foo.Rd or foo-overview.Rd
>special treatment.  

That would be a good solution.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Jan  1 16:17:40 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 1 Jan 2001 17:17:40 +0100
Subject: [Rd] Re: Package overview document?
Message-ID: <14928.44452.10425.946942@mithrandir.hornik.net>

The issue recently raised by Duncan and discussed in some detail by him
and Brian was also raised by Robert a few weeks ago (I think in an email
that only I received).  Here are some more comments and thoughts.

Unfortunately, much of the way the on-line documentation (help or HTML)
systems currently work is not the result of careful design decisions.  I
think we now understand the limitations of what we currently have, but I
am not sure we already know what we will do in the future.  (The XHTML
versus XML issue comes to mind.)  As Brian pointed out, as we shall move
away from Rd format eventually, we should be careful about adding more
bells and whistles to it.

The entry points for packages documentation are

	library(help = PKG)
or
	help(package = PKG)

where PKG should really be a character string naming the package.  Also,
only the former one seems to be documented explicitly, so this is the
one we should use.  I would recommend against using

	?PKG

for this purpose, as this has the obvious name space issues, and the
former two are meant for documenting packages only.

The next question is what these entry points should do.  Currently, they
simply show the package INDEX file, irrespective of whether help.start()
was given or not.  I think this is a bug.  On the other hand, the INDEX
only exists as flat file and is not necessarily what would be obtained
by running R CMD Rdindex on the package.  Hence, we cannot automatically
create a HTML version from the Rd sources.  (In fact, the HTML system
does have entry points for each package, but these simply contain HTML
versions of the flat-file help/AnIndex data base.)

I am also not sure about recommending to add plain text to file `INDEX'
(as e.g. happens for the base package).  I am quite hesitant to suggest
any changes to this file, because a redesigned documentation system will
need a real index system but then perhaps we'd not be using `INDEX' per
se anymore.

I think the best thing we can currently do is to follow up on Fritz's
idea of using some or all info from the `DESCRIPTION' data base (Robert
also suggested that) in addition to listing or documenting the topics a
package provides docs for.  In the simplest case, we could have

	library(help = PKG)

do a file.show() on the result of combining PKG's DESCRIPTION and INDEX
files.  That is something we can easily do for 1.2.1, and I would make
the change if no one protests.

For the HTML help system, we have two alternatives: do *exactly* the
same or combine DESCRIPTION with the HTML package index.  Not so fast:
we also need to decide whether library(help = PKG) should use the
browser after help.start().  In any case, I think we should have the
build-help script add a simple HTML version of the package DESCRIPTION
to the top of 00Index.html.

For the LaTeX package documentation, the idea was to add a beautified
version of the package DESCRIPTION to the top of the file, e.g. as some
kind of abstract.  We need to be careful about this, though, because
there may be plain text interpreted by LaTeX as special markup.
(E.g., relation operators in Depends can easily be caught; on the other
hand, they might also appear in other fields, such as Description ...).

I am not sure how easy it is to convert the contents of DESCRIPTION into
HTML or LaTeX.  But for the plain text help system, I think the best we
can currently do is to add the contents of DESCRIPTION to what is shown
following library(help = PKG).  In particular, I think the Description
field of the DESCRIPTION data base can be used as a package ``intro''.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Tue Jan  2 13:21:13 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Tue, 2 Jan 2001 14:21:13 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding some (PR#799)
Message-ID: <200101021321.OAA15088@pubhealth.ku.dk>

[These things don't seem to be of too great importance and may well not meet
the criteria of a "bug", but, for what it's worth,I thought I'd submit them
to r-bugs anyway:]

This is the R version:
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

This is what we noticed:

1) In RGui, when something is typed in a command line, pressing <ESC> in
R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
the text is not deleted and the user is prompted for new input in the same
line.
Of course, this is rather a "cosmetical" issue, but it might be worth
considering to change this behaviour back to what it used to be in R1.0.0?

2) It looks like if for some functions, their help pages cannot be accessed
directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
find the appropriate help page (I am using winhelp, to be specific).
This might be because e.g. "setwd" shares the same help file with "getwd",
and it looks like only "getwd" is part of the index of the help system.
Here, the same holds for R1.0.0.

Regards,
Heinrich Rinner.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:14 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 2 Jan 2001 16:35:14 +0100 (MET)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
Message-ID: <200101021535.QAA18035@pubhealth.ku.dk>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  2 15:35:24 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 2 Jan 2001 15:35:24 +0000 (GMT)
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding
 some (PR#799)
In-Reply-To: <200101021321.OAA15088@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10101021525500.18558-100000@toucan.stats>

On Tue, 2 Jan 2001 H.RINNER@TIROL.GV.AT wrote:

> [These things don't seem to be of too great importance and may well not meet
> the criteria of a "bug", but, for what it's worth,I thought I'd submit them
> to r-bugs anyway:]
> 
> This is the R version:
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R 
> 
> This is what we noticed:
> 
> 1) In RGui, when something is typed in a command line, pressing <ESC> in
> R1.0.0 used to delete the written text and go to a blank new line; in R1.2.0
> the text is not deleted and the user is prompted for new input in the same
> line.
> Of course, this is rather a "cosmetical" issue, but it might be worth
> considering to change this behaviour back to what it used to be in R1.0.0?

Nope, that is deliberate.  Use ^U to delete the text, if that is what you
want: Esc was never documented to do so.  The problem here is that some
other process (for example a GUI widget) might have written something to
the screen, and you don't want that deleted.

Moral: don't rely on undocumented side effects.

> 2) It looks like if for some functions, their help pages cannot be accessed
> directly via "?" or "help". For example, ?install.packages, or ?setwd, won't
> find the appropriate help page (I am using winhelp, to be specific).
> This might be because e.g. "setwd" shares the same help file with "getwd",
> and it looks like only "getwd" is part of the index of the help system.
> Here, the same holds for R1.0.0.

The critical thing here is that you are using winhelp, and that is
`rough'.  It works with all the four other help systems.  Can we persuade
you to move into the 21st century and used winhelp's replacement, CHTML?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 16:14:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 17:14:24 +0100
Subject: [Rd] minor problems (if problems at all): <ESC> in RGui; finding (PR#800)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Tue, 2 Jan 2001 16:35:14 +0100 (MET)"
References: <200101021535.QAA18035@pubhealth.ku.dk>
Message-ID: <x2lmsuszhb.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

[Something we've seen before as a followup to PR#799]

Argh. Looks like Jitterbug is having trouble if the Subject line
becomes longer than 80 characters. Looks like I'll need to go fix
bugs in the bug tracking software again! Meanwhile, could you please
truncate the header on followups on PR#799?

This is getting tiring. Anyone have suggestions for an alternate
bugfiling device that is actually being maintained, is easy to handle,
integrates well with the mailing lists, and doesn't require weird
sysadminning tasks such as adding one new mail user per bug report?
Bugzilla maybe?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pperkins@ucsd.edu  Tue Jan  2 20:14:32 2001
From: pperkins@ucsd.edu (pperkins@ucsd.edu)
Date: Tue, 2 Jan 2001 21:14:32 +0100 (MET)
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
Message-ID: <200101022014.VAA19397@pubhealth.ku.dk>

Full_Name: peter perkins
Version: 1.2.0
OS: linuxppc
Submission from: (NULL) (24.4.89.36)


i'm assuming that these are shortfalls in the documentation, and not bugs
in the function themselves.

1) the help page for pos.to.env gives two examples:

   Examples:

     pos.to.env(1)
     pos.to.env(length(search()))

the second of these returns NULL which (to me) does not seem to fit
the description of the function.  an explanation of why this seems
to be a special case would be helpful.


2)  the help page for the sys.xxx functions says:

   Notice that even though the `sys.'xxx functions are interpreted,
   their contexts are not counted nor are they reported. There is no
   access to them.

sys.status() seems to violate this description:

> test <- function () sys.status()
> test()
$sys.calls
$sys.calls[[1]]
test()

$sys.calls[[2]]
sys.status()


$sys.parents
[1] 0 1

$sys.frames
$sys.frames[[1]]
<environment: 0x10bf7a94>

$sys.frames[[2]]
<environment: 0x10bf7a5c>


3) the sys.xxx help page says:

   The parent of a function evaluation is the environment in which
   the function was called. It is not necessarily one less than the
   frame number of the current evaluation, nor the environment from
   which it is called.

i think the first sentence ought to read "the environment in which the
function was declared".  unless there is some syntactic subtlety that
makes the environment "in which [it] was called" different from the one
"from which [it] is called".

- peter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan  2 20:56:25 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Jan 2001 21:56:25 +0100
Subject: [Rd] pos.to.env and sys.xxx documentation (PR#801)
In-Reply-To: pperkins@ucsd.edu's message of "Tue, 2 Jan 2001 21:14:32 +0100 (MET)"
References: <200101022014.VAA19397@pubhealth.ku.dk>
Message-ID: <x2r92lwu4m.fsf@blueberry.kubism.ku.dk>

pperkins@ucsd.edu writes:

> Full_Name: peter perkins
> Version: 1.2.0
> OS: linuxppc
> Submission from: (NULL) (24.4.89.36)
> 
> 
> i'm assuming that these are shortfalls in the documentation, and not bugs
> in the function themselves.
> 
> 1) the help page for pos.to.env gives two examples:
> 
>    Examples:
> 
>      pos.to.env(1)
>      pos.to.env(length(search()))
> 
> the second of these returns NULL which (to me) does not seem to fit
> the description of the function.  an explanation of why this seems
> to be a special case would be helpful.

This is correct. The NULL environment is at the end of the search list
(also known as "package:base"). It is a feature not very much loved by
me, but a feature nevertheless. In this environment, objects are bound
directly to symbols rather than stored in a hash structure.

> 3) the sys.xxx help page says:
> 
>    The parent of a function evaluation is the environment in which
>    the function was called. It is not necessarily one less than the
>    frame number of the current evaluation, nor the environment from
>    which it is called.
> 
> i think the first sentence ought to read "the environment in which the
> function was declared".  unless there is some syntactic subtlety that
> makes the environment "in which [it] was called" different from the one
> "from which [it] is called".

Close, but it's the *second* sentence that needs to be changed... 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 15:35:51 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 3 Jan 2001 15:35:51 +0000 (GMT)
Subject: [Rd] problems with glm (PR#771)
In-Reply-To: <200101031410.PAA28684@alpha.luc.ac.be>
Message-ID: <Pine.GSO.4.05.10101031529360.20231-100000@toucan.stats>

[Moved back to R-devel. That's where we discuss bug reports.]

On Wed, 3 Jan 2001, Jim Lindsey wrote:

> > > Additional comment: I recommend that the aic functions for poisson and
> > > binomial have the explicit calculation of the log density replaced by
> > > the corresponding d function with the log option. This will avoid the
> > > production of NAs in certain cases of zeroes in tables.
> > 
> > Good idea, but could you supply examples so we can put them in the
> > regression tests?
> 
> Here is a simple and unrealistic (as no one would ever fit the model
> to these data) example that illustrates what can happen in more
> complex tables:
> 
> y <- matrix(c(2,0,7,3,0,9), ncol=2)
> x <- gl(3,1)
> glm(y~x, family=binomial)

That's not one. That fails because wt/n = NaN, and produces NaN not NA.
Now, could you please supply an example of what you reported, so we can
put it in the regression tests?  The BUGS section in the FAQ does ask for
one, with good reasons.  I've done as you suggested, and *not* fixed the
actual bug in this example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Wed Jan  3 16:02:33 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Wed, 3 Jan 2001 17:02:33 +0100
Subject: [Rd] memory trouble
Message-ID: <200101031602.RAA15155@mailgate3.cinetic.de>

I don't know whether this belongs to r-devel or rather r-help.

Under RW1.11 --nsize=8M --vsize=512M I could

n <- 500000
m <- 20
x <- matrix(rnorm(n*m), ncol=m, nrow=n)
gc()

> n <- 500000
> m <- 20
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
> gc()
           free    total (Mb)
Ncells  8190509  8388608  160
Vcells 57033698 67108864  512


# under RW1.20 --vanilla the same fails, some testing shows

n <- 500000
m <- 20

x <- matrix(ncol=m, nrow=n)
x <- matrix(NA, ncol=m, nrow=n)
x <- matrix(0, ncol=m, nrow=n)
x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rep(0, n*m), ncol=m, nrow=n)
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
gc()
x <- matrix(rep('0', n*m), ncol=m, nrow=n)
x <- matrix(rnorm(n*m), ncol=m, nrow=n)

> n <- 500000
> m <- 20
> 
> x <- matrix(ncol=m, nrow=n)
> x <- matrix(NA, ncol=m, nrow=n)
> x <- matrix(0, ncol=m, nrow=n)
> x <- matrix(rep(NA, n*m), ncol=m, nrow=n)
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> x <- matrix(rep(0, n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 39062 Kb
> gc()
           used (Mb) gc trigger  (Mb)
Ncells   174208  4.7     350000   9.4
Vcells 11109574 84.8   24307903 185.5
> x <- matrix(rep('0', n*m), ncol=m, nrow=n)
> x <- matrix(rnorm(n*m), ncol=m, nrow=n)
Error: cannot allocate vector of size 78125 Kb


Experimenting with --min-nsize=8M --min-vsize=512M --max-nsize=8M --max-vsize=512M did not help. 

What am I doing wrong?


Regards


Jens Oehlschlägel
(Research Consultant)


PIII NT4.0 Service Pack 6, 1 GB RAM, Physical Memory available due to task manager: 934600 K

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R  
_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan  3 20:58:21 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 Jan 2001 20:58:21 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101031602.RAA15155@mailgate3.cinetic.de>
Message-ID: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>

Read the documentation: CHANGES or ?Memory.

  New command-line option --max-mem-size to set the maximum memory
  allocation: it has a minimum allowed value of 10M.  This is intended
  to catch attempts to allocate excessive amounts of memory which may
  cause other processes to run out of resources.  The default is the
  smaller of the amount of physical RAM in the machine and 256Mb.

You probably want to read the rest of the descriptions, and reading
documentation is always a good idea, so please do read the rest of the
CHANGES file.

There is a good reason for the numbers: the new malloc likes a contiguous
memory space, and R only reserves 256Mb initially (out of the 2Gb space on
non-server versions).  You can re-compile it to reserve more.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Jan  4 00:54:52 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 04 Jan 2001 01:54:52 +0100
Subject: [Rd] R sings, this time REALLY
Message-ID: <3A53C9DC.CD791A2E@univie.ac.at>

i did some debugging,
and now R really sings in the sense that there are 2 new "instruments",
a synthesized tenor voice and a synthesized soprano voice singing.

http:/sunsite.univie.ac.at/~neuwirth/Rcsound/
has the latest version

my server is up and running again.



--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Jan  4 09:55:38 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 4 Jan 2001 10:55:38 +0100
Subject: [Rd] memory trouble
In-Reply-To: <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
References: <200101031602.RAA15155@mailgate3.cinetic.de>
 <Pine.GSO.4.05.10101032051260.7468-100000@auk.stats>
Message-ID: <200101040955.KAA03084@lynne.ethz.ch>

In spite of Brian's good points, 
I believe we should help the users more.

R-1.1.1 --vanilla     had

  rnorm(1e7)

  >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
  >>       See "help(Memory)" on how to increase the heap size.

which is much more helpful
than the

  >> Error: cannot allocate vector of size 39062 Kb

that R-1.2.0  reports  (much much more rarely though, 
		        I couldn't reproduce it in a few tries !)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan  4 10:28:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 4 Jan 2001 10:28:26 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101041025130.22275-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)

The error is different: it is coming from inside malloc.  Under those
circumstances you really can't do much, in particular nothing that needs
memory allocation.

This is not a question of the heap being exhausted: it is a question of
the process having fit its limits.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 11:06:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 5 Jan 2001 11:06:47 +0000 (GMT)
Subject: [Rd] memory trouble
In-Reply-To: <200101040955.KAA03084@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.05.10101051101160.8064-100000@toucan.stats>

On Thu, 4 Jan 2001, Martin Maechler wrote:

> In spite of Brian's good points, 
> I believe we should help the users more.
> 
> R-1.1.1 --vanilla     had
> 
>   rnorm(1e7)
> 
>   >> Error: heap memory (6144 Kb) exhausted [needed 78125 Kb more]
>   >>       See "help(Memory)" on how to increase the heap size.
> 
> which is much more helpful
> than the
> 
>   >> Error: cannot allocate vector of size 39062 Kb
> 
> that R-1.2.0  reports  (much much more rarely though, 
> 		        I couldn't reproduce it in a few tries !)


What I have done is to add a *warning* if the memory allocation is hit.
The warning is something like

   Reached total allocation of 191.36Mb: see help(memory.size)

I can't safely raise an error, and there are literally hundreds of 
places it could make an error, both in R and in a package.
You may or may not see the warning, depending how bad the error is.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paradis@isem.univ-montp2.fr  Fri Jan  5 16:11:13 2001
From: paradis@isem.univ-montp2.fr (paradis@isem.univ-montp2.fr)
Date: Fri, 5 Jan 2001 17:11:13 +0100 (MET)
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
Message-ID: <200101051611.RAA27177@pubhealth.ku.dk>

When reading a file with scan(), the following crashes R under Solaris and
WinNT 4.0 (versions below):

> ads <- scan("Bltiadu.dat", what=list(,,))

Would an error message be more logical? Note that the followings work (the
data file has 201 lines and 3 columns):

> ads <- scan("Bltiadu.dat", what=list(0,,))
Read 603 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,0))
Read 201 lines
> ads <- scan("Bltiadu.dat", what=list(0,0,))
Read 302 lines
Warning message: 
line 1 did not have 2 elements


> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R 

> version
         _
platform sparc-sun-solaris2.7
arch     sparc
os       solaris2.7
system   sparc, solaris2.7
status
major    1
minor    2.0
year     2000
month    12
day      15
language R


Emmanuel Paradis

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Jan  5 16:45:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 05 Jan 2001 11:45:31 -0500
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: <200101051611.RAA27177@pubhealth.ku.dk>
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <3a58f95a.70953969@fisher.stats.uwo.ca>

On Fri, 5 Jan 2001 17:11:13 +0100 (MET), you wrote in message
<200101051611.RAA27177@pubhealth.ku.dk>:

>When reading a file with scan(), the following crashes R under Solaris and
>WinNT 4.0 (versions below):
>
>> ads <- scan("Bltiadu.dat", what=list(,,))

I crash Win98 with the same sort of line; it's because list(,,) is the
same as list(), and scan isn't checking for this boundary case, I
guess...

>
>Would an error message be more logical? Note that the followings work (the
>data file has 201 lines and 3 columns):
>
>> ads <- scan("Bltiadu.dat", what=list(0,,))
>Read 603 lines

While fixing this, wouldn't it be better to change this message to 

"Read 603 cases"

since in fact, only 201 lines were read, 3 cases per line?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan  5 16:56:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Jan 2001 17:56:53 +0100
Subject: [Rd] crash with scan(..., what=list(,,)) (PR#802)
In-Reply-To: paradis@isem.univ-montp2.fr's message of "Fri, 5 Jan 2001 17:11:13 +0100 (MET)"
References: <200101051611.RAA27177@pubhealth.ku.dk>
Message-ID: <x2elyidjjd.fsf@blueberry.kubism.ku.dk>

paradis@isem.univ-montp2.fr writes:

> When reading a file with scan(), the following crashes R under Solaris and
> WinNT 4.0 (versions below):
> 
> > ads <- scan("Bltiadu.dat", what=list(,,))

Happens on Linux too. And you don't need a big file to provoke it:

$ cat > /tmp/junk
1 2 3
3 4 5
2 3 4
^D

...

Starting program: /usr/local/src/misc/r-release/BUILD/bin/R.bin --quiet
> scan('/tmp/junk', what=list(,,))

Program received signal SIGSEGV, Segmentation fault.
0x80d5160 in scanFrame (what=0x89e8260, maxitems=0, maxlines=0, flush=0, 
    fill=0, stripwhite=0x878b0f0, blskip=1) at ../../../R/src/main/scan.c:491
491     bch = fillBuffer(buffer, TYPEOF(VECTOR_ELT(ans, ii)), strip);


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mvondavier@ets.org  Fri Jan  5 20:23:05 2001
From: mvondavier@ets.org (mvondavier@ets.org)
Date: Fri, 5 Jan 2001 21:23:05 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052023.VAA28098@pubhealth.ku.dk>

Full_Name: Matthias von Davier
Version: 1.2.0
OS: linux
Submission from: (NULL) (144.81.31.148)


pairs(NxK_Matrix,panel=qqplot)

produces a message

Error in pairs.default(NxK_Matrix,panel=qqplot) :
   The panel function made a new plot


best regards and a happy new year

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan  5 21:30:43 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Jan 2001 22:30:43 +0100 (MET)
Subject: [Rd] pairs(NxK_Matrix,panel=qqplot) (PR#803)
Message-ID: <200101052130.WAA28307@pubhealth.ku.dk>

On Fri, 5 Jan 2001 mvondavier@ets.org wrote:

> Full_Name: Matthias von Davier
> Version: 1.2.0
> OS: linux
> Submission from: (NULL) (144.81.31.148)
>
>
> pairs(NxK_Matrix,panel=qqplot)
>
> produces a message
>
> Error in pairs.default(NxK_Matrix,panel=qqplot) :
>    The panel function made a new plot

And the bug is?  I am baffled!  Please read the section on BUGS in the FAQ.
Acting as documented is not a bug, nor is giving an error message when a
function is used incorrectly.

A panel function is documented as

   panel: `function(x,y,...)' which is used to plot the contents of
          each panel of the display.

Note *contents*.  I don't think qqplot qualifies, so you get a message
about your error.  You probably want (untested)

panel.qqplot <- function(x, y, ...)
{
   res <- qqplot(x, y, ..., plot.it = FALSE)
   points(res$x, res$y)
}

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Sat Jan  6 22:19:46 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Sat, 6 Jan 2001 17:19:46 -0500 (EST)
Subject: [Rd] R/S-Plus compatibility package
Message-ID: <200101062219.RAA24588@jessie.research.bell-labs.com>

We're starting work on an R package and corresponding S-Plus library
to help programmers write software that will work in both systems.

Some descriptions and downloadable software are available on the
Omegahat web site, at
	 http://www.omegahat.org/SLanguage/

The strategy, as described there, is to be as back-compatible within R
and within S-Plus as possible, but provide tools and guidelines to
smooth over inconsistencies between the two implementations of the S
language.

The tools will include both S language and C/C++ support.  It's
starting off with the functions that access objects (get, etc.), a
couple of tools for dealing with language objects, and a bit of
miscellany.  More to come shortly.

If you're experienced or interested in writing software targeted to
both R and S-Plus, please take a look at the package.  It's at a very
early stage, and comments, suggestions of what should be in there, or
(especially) contributions are very much needed.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan  7 06:15:06 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Jan 2001 07:15:06 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101070615.HAA21659@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

* PR# 801 *
Subject: pos.to.env and sys.xxx documentation
From: pperkins@ucsd.edu
Date: Tue, 2 Jan 2001 21:14:31 +0100 (MET)

Directory:  Graphics

* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100

Directory:  In-Out

* PR# 802 *
Subject: crash with scan(..., what=list(,,))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Fri, 05 Jan 2001 17:10:42 +0100
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--
--Final para is almost certainly user error in using 
--  bug.report(gnome-support problems)  without quotes
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 734 *
Subject:  Assigning into a dataframe 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 694 *
Subject:  syntax confusion with function/non-function objects 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 795 *
Subject: Re: [Rd] some (may be related) problems with windows(rescale=)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Thu, 28 Dec 2000 20:22:51 +0000 (GMT)
* PR# 794 *
Subject: some (may be related) problems with windows(rescale=)
From: =?iso-8859-1?Q?"Jens=20Oehlschl=E4gel"?= <joehl@web.de>
Date: Thu, 28 Dec 2000 17:54:47 +0100

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai-wang@uiowa.edu  Mon Jan  8 03:29:17 2001
From: kai-wang@uiowa.edu (kai-wang@uiowa.edu)
Date: Mon, 8 Jan 2001 04:29:17 +0100 (MET)
Subject: [Rd] random seed (PR#804)
Message-ID: <200101080329.EAA04375@pubhealth.ku.dk>

Full_Name: Kai Wang
Version: 1.2.0 (2000-12-15)
OS: Red Hat Linux 7.0
Submission from: (NULL) (128.255.176.68)


In simulation analyses that use function rnorm(1), I encountered the following
error message from time to time:

.Random.seed[2] is not a valid integer

The chance of such error message is about 1/20000 replications.

I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
compiled R myself, the same problem exists. 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 07:40:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 07:40:17 +0000 (GMT)
Subject: [Rd] random seed (PR#804)
In-Reply-To: <200101080329.EAA04375@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101080738530.25276-100000@auk.stats>

On Mon, 8 Jan 2001 kai-wang@uiowa.edu wrote:

> Full_Name: Kai Wang
> Version: 1.2.0 (2000-12-15)
> OS: Red Hat Linux 7.0
> Submission from: (NULL) (128.255.176.68)
>
>
> In simulation analyses that use function rnorm(1), I encountered the following
> error message from time to time:
>
> .Random.seed[2] is not a valid integer
>
> The chance of such error message is about 1/20000 replications.
>
> I am using the precompiled RPM for alpha on a Compaq XP 1000 workstation. When I
> compiled R myself, the same problem exists.

Can you confirm which random number generator you are using?
The default one?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan  8 11:57:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 8 Jan 2001 11:57:27 +0000 (GMT)
Subject: [Rd] cleaning up the BUGS list
Message-ID: <Pine.GSO.4.31.0101081153450.25779-100000@auk.stats>

In looking over the bugs list, it seems to me that most of them are
things we can no longer do anything about, because they are on old
versions or broken systems or were features or ....

There are now so many they obscure the bugs needing attention.

I am about the remove the following.  If anyone thinks they are still
relevant, could you please send a follow-up to R-bugs with details under
1.2.0 or later.  (Please do put (PR#xxx) on the subject line.)

* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77
* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied
--(and there is no 256 col limit)
* PR# 693 *
Subject:  Bug report
From: "Amaratunga, Rohith" <Rohith.Amaratunga@dsto.defence.gov.au>
Date: Thu, 12 Oct 2000 14:08:31 +1100
--grid problem: note a report on 0.90.1 and nothing to reproduce this
* PR# 694 *
Subject:  syntax confusion with function/non-function objects
From: J.C.Rougier@durham.ac.uk
Date: Fri, 13 Oct 2000 12:07:41 +0100 (BST)
* PR# 732 *
Subject: R with redhat 7
From: hyu@stats.uwo.ca
Date: Wed, 8 Nov 2000 22:32:48 +0100 (MET)
* PR# 733 *
Subject: gnome-support problems
From: olav@melvin.jordforsk.no
Date: Fri, 10 Nov 2000 10:55:31 +0100 (MET)
--Very little to go on, for example no version numbers.
--Final para is almost certainly user error in using
--  bug.report(gnome-support problems)  without quotes
* PR# 734 *
Subject:  Assigning into a dataframe
From: J.C.Rougier@durham.ac.uk
Date: Fri, 10 Nov 2000 16:00:31 GMT
--$<- and [<- are not the same for data frames. Not a bug, I think, or at least
--a compatible one.
* PR# 747 *
Subject: Bug in args with no defaults
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 26 Nov 2000 20:14:30 GMT
--Probably not a bug, but a logical consequence of "missing" semantics.
* PR# 758 *
Subject: Inconsistency, possibly a bug?
From: Brett Presnell <presnell@stat.ufl.edu>
Date: Mon, 4 Dec 2000 19:26:32 -0500 (EST)
--Fixed for 1.2.0 in the sense that lm/glm are now consistent, but would one want
--it the other way around?
* PR# 762 *
Subject: nmath bug
From: spoon <spoon@hilbert.maths.utas.edu.au>
Date: Fri, 8 Dec 2000 18:29:22 +1100 (EST)
--RedHat 7 has known compiler trouble, probably not bug

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan  9 17:25:42 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 9 Jan 2001 18:25:42 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101091725.SAA00060@pubhealth.ku.dk>

I find this a bit puzzling ...

> solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
[1] NaN Inf
> solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3) 
     [,1]
[1,] -Inf
[2,]  Inf

I would expect the answer to be c(-Inf, Inf), so why has the -Inf
been replaced by NaN in solve?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan  9 18:21:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 9 Jan 2001 18:21:23 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101091725.SAA00060@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>

On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:

> I find this a bit puzzling ...
>
> > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> [1] NaN Inf
> > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
>      [,1]
> [1,] -Inf
> [2,]  Inf
>
> I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> been replaced by NaN in solve?

Why would you expect it?  Did you actually check it?
You have 5x + 3y = Inf,  2x + y = 3
if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.

Once you have infinities, the standard laws of arithmetic break.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.CSIRO.AU  Wed Jan 10 05:53:03 2001
From: Richard.Beare@cmis.CSIRO.AU (Richard.Beare@cmis.CSIRO.AU)
Date: Wed, 10 Jan 2001 06:53:03 +0100 (MET)
Subject: [Rd] configure error on alpha (PR#806)
Message-ID: <200101100553.GAA02533@pubhealth.ku.dk>


Hi, 

I've found that the default options of gcc and g77 on alpha produce an
executable that suffers from floating exceptions. There seems to be a
problem with the configure scripts that prevents the --with-f77 option
working correctly. The configure script tests that f77 is running by
attempting to compile and link a dummy program - the link step seems
broken on the alpha (it doesn't like the command 

f77 -o conftest conftest.f -L/usr/local/lib

The command works fine without the -L switch.

)

my workaround was to remove $LIBS from the line
ac_link='${F77-f77} -o conftest${ac_exeext} $FFLAGS $LDFLAGS
conftest.$ac_ext $L
IBS 1>&5'

but a better alternative may be to just use the fortran compiler to
produce an object file rather than an executable.

R configured using the following options passes "make test"

R is now configured for alphaev56-dec-osf4.0d

  Source directory:          .
  Installation directory:    /usr/local/R
  C compiler:                cc  -ieee_with_inexact -std1 -g
  C++ compiler:              c++  -g -O2
  FORTRAN compiler:          f77  -fpe3 -g

  X11 support:               yes
  Gnome support:             no
  Tcl/Tk support:            no

  R profiling support:       yes
  R as a shared library:     no



--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0d
 arch = alphaev56
 os = osf4.0d
 system = alphaev56, osf4.0d
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed Jan 10 07:59:25 2001
From: telford@progsoc.uts.edu.au (telford@progsoc.uts.edu.au)
Date: Wed, 10 Jan 2001 18:59:25 +1100
Subject: [Rd] configure error on alpha (PR#806)
In-Reply-To: <200101100553.GAA02533@pubhealth.ku.dk>; from Richard.Beare@cmis.CSIRO.AU on Wed, Jan 10, 2001 at 06:53:03AM +0100
References: <200101100553.GAA02533@pubhealth.ku.dk>
Message-ID: <20010110185925.D1483@progsoc.uts.edu.au>

On Wed, Jan 10, 2001 at 06:53:03AM +0100, Richard.Beare@cmis.CSIRO.AU wrote:
> I've found that the default options of gcc and g77 on alpha produce an
> executable that suffers from floating exceptions.

I've been running R on alpha for about a year and haven't seen this
problem... can you provide a method to reproduce it?

> There seems to be a
> problem with the configure scripts that prevents the --with-f77 option
> working correctly. The configure script tests that f77 is running by
> attempting to compile and link a dummy program - the link step seems
> broken on the alpha (it doesn't like the command 
> 
> f77 -o conftest conftest.f -L/usr/local/lib
> 
> The command works fine without the -L switch.
> 
> )

The argument over whether the system should recognise
/usr/local/lib as a legitimate location for libraries
rages back and forth but believe me that there are many
systems that ONLY work with the -L switch.

Do you have something strange and nasty lurking in
/usr/local/lib, maybe old versions of something ?

Do you actually HAVE a directory /usr/local/lib ?

> R is now configured for alphaev56-dec-osf4.0d

OK, I have been using debian linux so there are
no doubt some differences right there. Also,
my chip is only ev4 (possibly irrelevant).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 09:39:56 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 09:39:56 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <Pine.GSO.4.31.0101091816140.10815-100000@auk.stats>
Message-ID: <Pine.GSO.4.20.0101100932280.503-100000@laplace>

On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:

> On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> 
> > I find this a bit puzzling ...
> >
> > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > [1] NaN Inf
> > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> >      [,1]
> > [1,] -Inf
> > [2,]  Inf
> >
> > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > been replaced by NaN in solve?
> 
> Why would you expect it?  Did you actually check it?
> You have 5x + 3y = Inf,  2x + y = 3
> if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> 
> Once you have infinities, the standard laws of arithmetic break.

What was puzzling was that the answers were not the same.  The two results
will have different effects in further calculations as NaN and -Inf are
not treated identically (e.g. max or min).  My understanding, supported by
the documentation, is that the two results should be identical, excepting
numerical accuracy.

In S+ the first version generates an error while the second gives c(-Inf,
Inf) as expected.  I think this is safer.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 11:01:57 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 12:01:57 +0100 (MET)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
Message-ID: <200101101101.MAA07190@pubhealth.ku.dk>

On Wed, 10 Jan 2001, Jonathan Rougier wrote:

> On Tue, 9 Jan 2001, Prof Brian D Ripley wrote:
>
> > On Tue, 9 Jan 2001 J.C.Rougier@durham.ac.uk wrote:
> >
> > > I find this a bit puzzling ...
> > >
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2), c(Inf, 3))
> > > [1] NaN Inf
> > > > solve(matrix(c(5, 2, 3, 1), 2, 2)) %*% c(Inf, 3)
> > >      [,1]
> > > [1,] -Inf
> > > [2,]  Inf
> > >
> > > I would expect the answer to be c(-Inf, Inf), so why has the -Inf
> > > been replaced by NaN in solve?
> >
> > Why would you expect it?  Did you actually check it?
> > You have 5x + 3y = Inf,  2x + y = 3
> > if y - Inf, x = -Inf and 5x + 3y = NaN, 2x + y = NaN.
> >
> > Once you have infinities, the standard laws of arithmetic break.
>
> What was puzzling was that the answers were not the same.  The two results
> will have different effects in further calculations as NaN and -Inf are
> not treated identically (e.g. max or min).  My understanding, supported by
> the documentation, is that the two results should be identical, excepting
> numerical accuracy.

Really?  Which documentation?  I don't think they are the same once
non-finite numbers are involved, and ?solve did not lead me to believe
otherwise.

> In S+ the first version generates an error while the second gives c(-Inf,
> Inf) as expected.  I think this is safer.

The different is intentional: whoever wrote qr.coef put NAOK=TRUE
in R put not in S.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed Jan 10 11:19:14 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 10 Jan 2001 11:19:14 +0000 (GMT)
Subject: [Rd] Inconsistent behaviour in solve (PR#805)
In-Reply-To: <200101101101.MAA07190@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.20.0101101115130.503-100000@laplace>

On Wed, 10 Jan 2001 ripley@stats.ox.ac.uk wrote:

> On Wed, 10 Jan 2001, Jonathan Rougier wrote:
> >
> > What was puzzling was that the answers were not the same.  The two results
> > will have different effects in further calculations as NaN and -Inf are
> > not treated identically (e.g. max or min).  My understanding, supported by
> > the documentation, is that the two results should be identical, excepting
> > numerical accuracy.
> 
> Really?  Which documentation?  I don't think they are the same once
> non-finite numbers are involved, and ?solve did not lead me to believe
> otherwise.

I think it is by ommision.  There is nothing in the solve documentation
that suggests that solve(A) %*% b and solve(A, b) will give different
answers if b contains non-finite values.  Therefore it is reasonable to
expect the answers to be the same.  May I suggest that a note might be
added to the documentation to highlight this?

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From morin@mat.ulaval.ca  Wed Jan 10 12:24:07 2001
From: morin@mat.ulaval.ca (morin@mat.ulaval.ca)
Date: Wed, 10 Jan 2001 13:24:07 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101224.NAA09038@pubhealth.ku.dk>

--============_-1232993047==_ma============
Content-Type: text/plain; charset="us-ascii" ; format="flowed"

I am using R 1.2.0 on a iBook with system 9.04.

As soon as I open R, I get the following warning:


Warning message:
cannot set timezones on this system
--============_-1232993047==_ma============
Content-Type: text/html; charset="us-ascii"

<!doctype html public "-//W3C//DTD W3 HTML//EN">
<html><head><style type="text/css"><!--
blockquote, dl, ul, ol, li { margin-top: 0 ; margin-bottom: 0 }
 --></style><title>Time zone</title></head><body>
<div>I am using R 1.2.0 on a iBook with system 9.04.</div>
<div><br></div>
<div>As soon as I open R, I get the following warning:</div>
<div><br></div>
<div><br></div>
<div><tt><font size="-2" color="#000000">Warning message:<br>
cannot set timezones on this system</font></tt></div>
</body>
</html>
--============_-1232993047==_ma============--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From David.Meyer@ci.tuwien.ac.at  Wed Jan 10 12:25:01 2001
From: David.Meyer@ci.tuwien.ac.at (David.Meyer@ci.tuwien.ac.at)
Date: Wed, 10 Jan 2001 13:25:01 +0100 (MET)
Subject: [Rd] changing dimnames of a matrix with rownames/colnames causes (PR#809)
Message-ID: <200101101225.NAA09080@pubhealth.ku.dk>

When I try to change the dimnames of a matrix x with named dimensions

   Y
X   1 2 3 4
  2 1 1 1 1
  3 1 1 1 1
  4 1 1 1 1


for example with:

rownames (x) <- c(...),

the dimension names (X and Y) are deleted, but when I use

dimnames(x)[[1]] <- c(...)

they are left unchanged.

Is this intentional ?

I'm using R 1.2.0 on debian linux.

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R             

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed Jan 10 13:04:06 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 10 Jan 2001 08:04:06 -0500
Subject: [Rd] nearest neighbors
Message-ID: <20010110080406.H19355@jimmy.harvard.edu>

Is there an implementation of a reasonable k-nearest neighbor finder
already in one of the packages?

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: not yet                          |
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:20:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Jan 2001 14:20:27 +0100 (MET)
Subject: [Rd] Time zone (PR#808)
Message-ID: <200101101320.OAA10558@pubhealth.ku.dk>

On Wed, 10 Jan 2001 morin@mat.ulaval.ca wrote:

> I am using R 1.2.0 on a iBook with system 9.04.
>
> As soon as I open R, I get the following warning:

> Warning message:
> cannot set timezones on this system

Well, it means what it says. If you don't want to use datetime classes
you can ignore it.  Getting a warning is not a bug, but it happens
because .leap.seconds will be wrong.

I presume you compiled this yourself?  Does `system 9.04' have
support for timezones?  If so you should really try to get this to
work: the code is src/main/datetime.c and relies on setting the
environmental variable TZ by putenv or setenv.  Lots of things will
fail if you don't have those so you do need to try to repair this.

Does example(Sys.putenv) do anything sensible?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 13:23:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 10 Jan 2001 13:23:05 +0000 (GMT)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.31.0101101320500.8446-100000@toucan.stats>

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?

knn in VR/class: I'll leave you to pass judgement on `reasonable', but it
is widely used.  It may not be the problem you had in mind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Wed Jan 10 13:32:32 2001
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Wed, 10 Jan 2001 21:32:32 +0800 (GMT-8)
Subject: [Rd] nearest neighbors
In-Reply-To: <20010110080406.H19355@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.21.0101102130220.9387-100000@sununx.comp.nus.edu.sg>

Hi,
I think splancs might have one. Otherwise I know Roger Bivand has a
preliminary port of ANN on his ftp site that i have compiled and run. ANN
is David Mounts approximate nearest neigbor package, really fat with
modified kd trees.

Nicholas

                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg

On Wed, 10 Jan 2001, Robert Gentleman wrote:

> Is there an implementation of a reasonable k-nearest neighbor finder
> already in one of the packages?
> 
> -- 
> +---------------------------------------------------------------------------+
> | Robert Gentleman                 phone : (617) 632-5250                   |
> | Associate Professor              fax:   (617)  632-2444                   |
> | Department of Biostatistics      office: not yet                          |
> | Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
> +---------------------------------------------------------------------------+
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Jan 10 17:11:19 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 Jan 2001 18:11:19 +0100
Subject: [Rd] eval() bug in plot.formula() ?
Message-ID: <14940.38839.796429.22623@gargle.gargle.HOWL>

I don't have time now to investigate myself,
and I'm not feeling like deciding myself if the following is a bug:

  myplot <- function(dat, cex = 1.2, ...) {
      if(!is.data.frame(dat <- as.data.frame(dat)))
	  stop("`dat' must be a data.frame")
      if(any(is.na(match(c("x","y"), names(dat)))))
	  stop("`dat' must have a `x' and a `y' component")
      plot(y ~ x, data= dat, cex=cex, ...)
  }

  dd <- list(x= 1:12, y = sin((1:12)/10))
  myplot(dd)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

  myplot(dd, col = "red") ## Works fine

  myplot(dd, cex=1)
  ## Error in eval(expr, envir, enclos) : ... used in an incorrect context

------------
The above code works fine in R 0.90  but fails already in 1.0.0

I believe it *is* a bug

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 10 17:47:40 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Jan 2001 18:47:40 +0100
Subject: [Rd] eval() bug in plot.formula() ?
In-Reply-To: Martin Maechler's message of "Wed, 10 Jan 2001 18:11:19 +0100"
References: <14940.38839.796429.22623@gargle.gargle.HOWL>
Message-ID: <x24rz72tab.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> I don't have time now to investigate myself,
> and I'm not feeling like deciding myself if the following is a bug:
> 
>   myplot <- function(dat, cex = 1.2, ...) {
>       if(!is.data.frame(dat <- as.data.frame(dat)))
> 	  stop("`dat' must be a data.frame")
>       if(any(is.na(match(c("x","y"), names(dat)))))
> 	  stop("`dat' must have a `x' and a `y' component")
>       plot(y ~ x, data= dat, cex=cex, ...)
>   }
> 
>   dd <- list(x= 1:12, y = sin((1:12)/10))
>   myplot(dd)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
>   myplot(dd, col = "red") ## Works fine
> 
>   myplot(dd, cex=1)
>   ## Error in eval(expr, envir, enclos) : ... used in an incorrect context
> 
> ------------
> The above code works fine in R 0.90  but fails already in 1.0.0
> 
> I believe it *is* a bug

Hmm, it comes from fixing a much worse bug (the one where pch and
friends didn't get subsetted), so it's not advisable to revert the
change.

The problematic construction is this:

{
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, parent.frame()))) 
        m$data <- as.data.frame(data)
    dots <- m$"..."
    dots <- lapply(dots, eval, data, parent.frame())

and the problem is that dots has ... as a component in some cases.
This looks more like a bug in match.call than in plot.formula, I think

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 10 23:11:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 00:11:42 +0100 (MET)
Subject: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101102311.AAA16776@pubhealth.ku.dk>

Part 1) is basically that the initial rescaling is done if the window is
too large to fit on the screen.  That's true and obvious (no scrollbars)
and intentional and on the help page.  As ever, you need to report bugs on
what is documented, not what you would like.

This will be changed for 1.2.1, but was several hours' work.  I have also
cleaned up the scrollbar behaviour.

Part 2) I just can't reproduce.  When I follow the instructions, all the
settings revert to very close to the originals and the plot looks the same.

In summary, there is no reproducible evidence of a bug here, and never was.
A feature request will appear in 1.2.1.

BDR

On Fri, 29 Dec 2000 joehl@web.de wrote:

> Dear Prof. Brian Ripley,
>
> Thank you for your answer. You convinced me on one important point, but some issues remain open (revised bug status at the end of this message)
>
> > If these things bother you, could you please supply fixes?
>
> Given that I don't have much experience in C coding, given that I don't know any internals of the R graphics engine (where I think a solution would be best), given that I don't have ever compiled R for Windows (where obviously the rescale stuff happens), it is currently too expensive for me to attack that.
>
> What I definitely can offer is testing and giving replicable bug reports.
>
> Also, given that I am not a member of r-devel and that some r-devel don't think these are clearly bugs, I shrink from producing code that might never make it into R.
>
> > [snipped]
> > Nothing on the help page suggested that the fine details of the R read-only
> > parameters will be as you expected after re-scaling the plot, and it never
> > occurred to me that anyone would expect so.
> > As they are reported by the R
> > graphics engine (which is used unchanged), I expect they are correct in one
> > of the multiple interpretations.
> > [snipped]
>
> Running the risk to repeat me: I am convinced that R like S+ needs a stable representation layer to which a programmer can refer. This is the layer where we talk about "let's layout a DIN A3 Paper, let's use 2 inches margins" and so on and this layer should be independent of actual window size (presentation layer).
>
> One might whish, that R's grapic parameter do not refer to absolute measures and divide the device area rather with relative measures: "let's have 10% margins". However, R allows to specify some parameter in absolute measures (e.g. par(mai=)) and more important some parameters are not free of absolute measures as par(cex=1) refers to a fixed ont size, not to a fixed fraction of the device size. Because of this the RO-device feature par("fin") to me appears not to be an arbitrary size and should be kept stable.
>
> > Possibly.  I don't think the device size is very interesting after
> > rescaling.  What are you using it for?
>
> Well, of course I try to avoid using it.
>
> Checking this more thoroughly I see that with windows(rescale="fit") I INDEED CAN IGNORE par("din") as long as I avoid making any specifications in inches.
>
> Requesting a 16 inch device and getting initially 9 inches CEX is rescaled appropriately, WITH RESPECT to the intended 16 inch device.
>
> Note that we now introduced a device which looks like 9 inch on screen with too small fonts, if asked it tells the user 'I am a 9 inch device (par("din"))' and it does not tell the user 'well, in fact my original size is 16 inches, don't forget'. But this is OK, the rescaling basically works. Thus I have to revise the interpretation of the phenomenon which I observed in comparing the character sizes of the three rescale modes: What I called "strange character sizes" in windows(rescale="fit") seems to make sense. It's rather windows(rescale="fixed") which gives problematic character sizes.
>
> Example
> Finding out the necessary par(cex=) which allows a certain amount of text to fit in a certain fraction of the device size.
>
> ========================
> windows(rescale="fixed")
> does not do rescaling after device initializiation, it's basic idea is to not change the device size at all.
> However, the automatic initial rescaling destroys this idea: if you require a 16 inch device and you get 9 inches, then you can only find out which cex is optimal for 9 inches but applying the result to a 16 inch device fails.
> In short: character size is not correct with respect to those 16 inches we requested, but is correct with respect to those 9 inches we get instead.
> Thus the current implementation does not make sense with devices bigger than the screen.
> ========================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fixed")
>
> # using windows() I find out that with cex=3.2 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands gives NOT a text that exacly fills the plot area (horizontally).
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1, jandltext, cex=3.2)
>
> dev.off()
>
>
>
> ======================
> by constrast
> windows(rescale="fit")
> works
> ======================
>
> # I intend to layout DIN A3
> width <- 16.53543
> height <- 11.69291
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> windows(width=width, height=height, rescale="fit")
>
> # using windows() I find out that with cex=5.8 the following commands give a text that exacly fills the plot area (horizontally)
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
> postscript(file = "c:/temp/t.ps", paper="special", width=width, height=height)
>
> # now applying THE SAME commands WORKS
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,2,0,2))
> par(c("din","fin","pin"))
> par("usr")
> text(1,1,jandltext, cex=5.8)
>
> dev.off()
>
> However repeated resizing of the window does increase the shown font sizes, look at that:
>
> width <- 8
> height <- 6
> jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"
> cex <- 2.8
>
> info <- function(){
> 	user <- strwidth(jandltext, cex=cex, units="user")
> 	inches <- strwidth(jandltext, cex=cex, units="inches")
> 	pin <- par("pin")
> 	din <- par("din")
> 	data.frame(din=din[1], aspectratio=din[1]/din[2], pintodin=pin[1]/din[1], struser=user, strinchtopin=inches/pin[1], strinch=inches)
> }
>
> windows(width=width, height=height, rescale="fit") # this one serves as reference for initial window size
> windows(width=width, height=height, rescale="fit")
> par(cex=1)
> par(mai=c(0,0,0,0))
> plot.new()
> par(usr=c(0,1,0,1))
> par(c("din","fin","pin"))
> par("usr")
> text(0.5,0.5,jandltext, cex=cex)
>
> # Initial measures
> print(static <- info())
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # we never touched horizontal window size but horiz din differs, strwidthInInches differs not
>
> # now some VERTICAL resizing and bring window back to original size
> print(static <- rbind(static, info()))
> # now everything differs
>
> > print(static <- rbind(static, info()))
>        din aspectratio pintodin   struser strinchtopin   strinch
> 1 8.166667    1.326565        1 0.9859694    0.9859694  8.052083 # start
> 2 6.291905    1.023768        1 1.2797528    1.2797528  8.052083 # after some vertical resizing
> 3 8.166667    1.390765        1 1.2908163    1.2908163 10.541667 # after some horizontal resizing
>
>
>
> So here is my revised bug status:
>
> 1a) windows(rescale="fixed") does not keep original device size
> 1b) windows(rescale="fixed") gives problematic character sizes (because of 1a)
>
> 2) wrong row distances with windows(rescale="fit")
>    This phenomenon also observed under different circumstances
>    see todays mail to r-help
>
> 3a) windows(rescale="fit") destroys aspect ratio
> 3b) repeated rescaling destroys proper font size as well
>
>
> Kind regards and best wishes for 2001
>
>
>
> Jens Oehlschlägel
>
> _______________________________________________________________________________
> Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
> Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen.eglen@ed.ac.uk  Thu Jan 11 11:23:30 2001
From: stephen.eglen@ed.ac.uk (stephen.eglen@ed.ac.uk)
Date: Thu, 11 Jan 2001 12:23:30 +0100 (MET)
Subject: [Rd] R introduction mentions system.date() (PR#810)
Message-ID: <200101111123.MAA22532@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.0
OS: OSF 1
Submission from: (NULL) (129.215.13.27)


In the document "An introduction to R", the info node "Customizing the
environment"
has the following code snippet:

     > .Last <- function() {
       graphics.off()                        # a small safety measure.
       cat(paste(system.date(),"\nAdios\n")) # Is it time for lunch?
     }

I think "system.date()" should now be replaced just by "date()".
(This can be found on line 3949 of R-intro.texi distributed with 
version 1.2.0).



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Thu Jan 11 12:30:35 2001
From: joehl@web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Thu, 11 Jan 2001 13:30:35 +0100
Subject: [Rd] Re: Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101111230.NAA00597@mailgate3.cinetic.de>


Sorry for wasting bandwidth but I want to thank Prof. Brian Ripley for attacking the problems I had with windows() rescaling. I am sorry that it eat up lots of his time and appreciate very much that nevertheless he did it. I am looking forward to R 1.2.1. 

Thank you very much Brian!

_______________________________________________________________________________
Alles unter einem Dach: Informationen, Fun, E-Mails. Bei WEB.DE: http://web.de
Die große Welt der Kommunikation: E-Mail, Fax, SMS, WAP: http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Thu Jan 11 21:22:49 2001
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Thu, 11 Jan 2001 22:22:49 +0100 (MET)
Subject: [Rd] problem with strptime example (and mention of bug.report) (PR#811)
Message-ID: <200101112122.WAA26408@pubhealth.ku.dk>

Hi,

The help file for strptime has the following code which doesn't work
for me:

     ## read in date info in format `ddmmmyyyy'
     x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
     z <- strptime(x, "%d%b%Y")
> z
[1] "NA" "NA" "NA" "NA"

Do these work for other people?

whereas it works fine if I use a separator (/) in the date@

> strptime("9/Feb/1960", "%d/%b/%Y")
[1] "1960-02-09"

> strptime("9Feb1960", "%d%b%Y")
[1] "NA"

Stephen

p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
does not recognise the -c switch for setting the carbon copy (CC)
field, causing an error.  One solution might be to remove the -c
argument from the cmdarg in bug.rerport(), or put a 
"~c joe@bloggs.com" directive at the end of the file to set the CC field.

--please do not edit the information below--

Version:
 platform = alphaev56-dec-osf4.0f
 arch = alphaev56
 os = osf4.0f
 system = alphaev56, osf4.0f
 status = 
 major = 1
 minor = 2.0
 year = 2000
 month = 12
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:51 2001
From: zeileis@ci.tuwien.ac.at (zeileis@ci.tuwien.ac.at)
Date: Thu, 11 Jan 2001 22:49:51 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
Message-ID: <200101112149.WAA26997@pubhealth.ku.dk>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Thu Jan 11 21:49:59 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Thu, 11 Jan 2001 22:49:59 +0100
Subject: [Rd] segmentation fault in integrate
Message-ID: <3A5E2A87.6864792F@ci.tuwien.ac.at>

I tried to integrate numerically a function wich is similar to the
following:

> dummy <- function(x) { exp(-1*x) * dnorm(x) }
> dummy(-100)
[1] 0
> dummy(-1000)
[1] NaN
> dummy(-10000)
[1] NaN

If I choose the lower boundary to be too small integrate causes a
segmentation fault:

> library(integrate)
> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0)$value
[1] NaN
Warning message:
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...)
> integrate(dummy, -10000, 0)$value
Segmentation fault

I'm running R.1.2.0 on Debian Linux.

Regards
Achim


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R   



-------------------------

Achim Zeileis
Institut für Statistik
Technische Universität Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 11 21:54:38 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 11 Jan 2001 22:54:38 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101112154.WAA27100@pubhealth.ku.dk>

On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:

> Hi,
>
> The help file for strptime has the following code which doesn't work
> for me:
>
>      ## read in date info in format `ddmmmyyyy'
>      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>      z <- strptime(x, "%d%b%Y")
> > z
> [1] "NA" "NA" "NA" "NA"
>
> Do these work for other people?

Yes, on several platforms.  It will be a problem with your OS's strptime
code.  It must be, I think, as the alternative we supply works.

> whereas it works fine if I use a separator (/) in the date@
>
> > strptime("9/Feb/1960", "%d/%b/%Y")
> [1] "1960-02-09"
>
> > strptime("9Feb1960", "%d%b%Y")
> [1] "NA"

We really do not put out new features without testing them!


>
> Stephen
>
> p.s. I failed to send this using bug.report(); on DEC OSF/1, "mailx"
> does not recognise the -c switch for setting the carbon copy (CC)
> field, causing an error.  One solution might be to remove the -c
> argument from the cmdarg in bug.rerport(), or put a
> "~c joe@bloggs.com" directive at the end of the file to set the CC field.
>
> --please do not edit the information below--
>
> Version:
>  platform = alphaev56-dec-osf4.0f
>  arch = alphaev56
>  os = osf4.0f
>  system = alphaev56, osf4.0f
>  status =
>  major = 1
>  minor = 2.0
>  year = 2000
>  month = 12
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Fri Jan 12 07:25:11 2001
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Fri, 12 Jan 2001 08:25:11 +0100 (MET)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <200101112149.WAA26997@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>


> I tried to integrate numerically a function wich is similar to the
> following:
> 
> > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > dummy(-100)
> [1] 0
> > dummy(-1000)
> [1] NaN
> > dummy(-10000)
> [1] NaN
> 
> If I choose the lower boundary to be too small integrate causes a
> segmentation fault:
> 
> > library(integrate)
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
> > integrate(dummy, -10000, 0)$value
> Segmentation fault

Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
on SuSE 6.4 gives:

> integrate(dummy, -1000000, 0)$value
[1] NaN
Warning message: 
Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
lower, upper, minpts, maxpts, functn, eps, ...) 

I has not able to reproduce the segfault ;-)

BTW: if one uses

> dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
a) }

this returns

> integrate(dummy, -100, 0)$value
[1] 1.387143
> integrate(dummy, -1000, 0, maxpts=1000)$value
[1] 0.6935715

Torsten

> 
> I'm running R.1.2.0 on Debian Linux.
> 
> Regards
> Achim
> 
> 
> > version
>          _                
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    2.0              
> year     2000             
> month    12               
> day      15               
> language R   
> 
> 
> 
> -------------------------
> 
> Achim Zeileis
> Institut für Statistik
> Technische Universität Wien
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 08:22:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 Jan 2001 08:22:42 +0000 (GMT)
Subject: [Rd] segmentation fault in integrate (PR#812)
In-Reply-To: <Pine.LNX.4.21.0101120814190.31983-100000@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>

On Fri, 12 Jan 2001, Torsten Hothorn wrote:

>
> > I tried to integrate numerically a function wich is similar to the
> > following:
> >
> > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > dummy(-100)
> > [1] 0
> > > dummy(-1000)
> > [1] NaN
> > > dummy(-10000)
> > [1] NaN
> >
> > If I choose the lower boundary to be too small integrate causes a
> > segmentation fault:
> >
> > > library(integrate)
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> > > integrate(dummy, -10000, 0)$value
> > Segmentation fault
>
> Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> on SuSE 6.4 gives:
>
> > integrate(dummy, -1000000, 0)$value
> [1] NaN
> Warning message:
> Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> lower, upper, minpts, maxpts, functn, eps, ...)
>
> I has not able to reproduce the segfault ;-)
>
> BTW: if one uses
>
> > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> a) }
>
> this returns
>
> > integrate(dummy, -100, 0)$value
> [1] 1.387143
> > integrate(dummy, -1000, 0, maxpts=1000)$value
> [1] 0.6935715

Better, try

dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}

that is, do your calculations on log scale as far as possible.  This is
more accurate than cop-ing out at Inf*0.

Even better, you can adjust the normal mean to cancel the linear term
exactly: dnorm(x, mu) has linear term -mu*x. So use

dummy <- function(x) exp(0.5)*dnorm(x, -1)

You will still need to adjust maxpts or find a sensible lower end.

(BTW, I don't get a segfault either, and we need you to debug it
on your system, I am afraid.)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:15:37 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 12 Jan 2001 11:15:37 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121015.LAA02860@pubhealth.ku.dk>


ripley@stats.ox.ac.uk wrote:
> 
> On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> 
> > Hi,
> >
> > The help file for strptime has the following code which doesn't work
> > for me:
> >
> >      ## read in date info in format `ddmmmyyyy'
> >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> >      z <- strptime(x, "%d%b%Y")
> > > z
> > [1] "NA" "NA" "NA" "NA"
> >
> > Do these work for other people?
> 
> Yes, on several platforms.  It will be a problem with your OS's strptime
> code.  It must be, I think, as the alternative we supply works.
> 
> > whereas it works fine if I use a separator (/) in the date@
> >
> > > strptime("9/Feb/1960", "%d/%b/%Y")
> > [1] "1960-02-09"
> >
> > > strptime("9Feb1960", "%d%b%Y")
> > [1] "NA"
> 
> We really do not put out new features without testing them!


Also very strange on WinNT4.0 (R-1.2.0): 


  x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
  z <- strptime(x, "%d%b%Y")
  z
[1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"                 
"1960-07-30 01:00:00"


Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Jan 12 10:41:11 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 Jan 2001 11:41:11 +0100
Subject: [Rd] segmentation fault in integrate (PR#812)
References: <Pine.GSO.4.31.0101120821550.3062-100000@auk.stats>
Message-ID: <3A5EDF47.83D1A4AE@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:
> 
> On Fri, 12 Jan 2001, Torsten Hothorn wrote:
> 
> >
> > > I tried to integrate numerically a function wich is similar to the
> > > following:
> > >
> > > > dummy <- function(x) { exp(-1*x) * dnorm(x) }
> > > > dummy(-100)
> > > [1] 0
> > > > dummy(-1000)
> > > [1] NaN
> > > > dummy(-10000)
> > > [1] NaN
> > >
> > > If I choose the lower boundary to be too small integrate causes a
> > > segmentation fault:
> > >
> > > > library(integrate)
> > > > integrate(dummy, -100, 0)$value
> > > [1] 1.387143
> > > > integrate(dummy, -1000, 0)$value
> > > [1] NaN
> > > Warning message:
> > > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > > lower, upper, minpts, maxpts, functn, eps, ...)
> > > > integrate(dummy, -10000, 0)$value
> > > Segmentation fault
> >
> > Running Version 1.2.0 Patched (2001-01-07) and integrate Version  2.2-3
> > on SuSE 6.4 gives:
> >
> > > integrate(dummy, -1000000, 0)$value
> > [1] NaN
> > Warning message:
> > Ifail=1, maxpts was too small. Check the returned relerr! in: adapt(1,
> > lower, upper, minpts, maxpts, functn, eps, ...)
> >
> > I has not able to reproduce the segfault ;-)
> >
> > BTW: if one uses
> >
> > > dummy <- function(x) { a <-  exp(-1*x) * dnorm(x); ifelse(is.na(a), 0,
> > a) }
> >
> > this returns
> >
> > > integrate(dummy, -100, 0)$value
> > [1] 1.387143
> > > integrate(dummy, -1000, 0, maxpts=1000)$value
> > [1] 0.6935715
> 
> Better, try
> 
> dummy <- function(x) { exp(-1*x + dnorm(x, log=TRUE))}
> 
> that is, do your calculations on log scale as far as possible.  This is
> more accurate than cop-ing out at Inf*0.
> 
> Even better, you can adjust the normal mean to cancel the linear term
> exactly: dnorm(x, mu) has linear term -mu*x. So use
> 
> dummy <- function(x) exp(0.5)*dnorm(x, -1)
> 
> You will still need to adjust maxpts or find a sensible lower end.
> 
> (BTW, I don't get a segfault either, and we need you to debug it
> on your system, I am afraid.)


But crashes also on:
- NT4.0, R-1.2.0
- sparc-sun-solaris2.7, R-1.2.0
- SuSE 7.0, R-1.2.0 Patched (2001-01-07), integrate Version  2.2-3

Strange: With the same version of R-1.2.0 Patched (2001-01-07) and
integrate (2.2-3), the crash happens on SuSE 7.0, but not on SuSE 6.4,
as Torsten told us.

Uwe
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 12 10:56:13 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 12 Jan 2001 11:56:13 +0100 (MET)
Subject: [Rd] problem with strptime example (PR#811)
Message-ID: <200101121056.LAA03597@pubhealth.ku.dk>

On Fri, 12 Jan 2001, Uwe Ligges wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > On Thu, 11 Jan 2001 stephen@anc.ed.ac.uk wrote:
> >
> > > Hi,
> > >
> > > The help file for strptime has the following code which doesn't work
> > > for me:
> > >
> > >      ## read in date info in format `ddmmmyyyy'
> > >      x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
> > >      z <- strptime(x, "%d%b%Y")
> > > > z
> > > [1] "NA" "NA" "NA" "NA"
> > >
> > > Do these work for other people?
> >
> > Yes, on several platforms.  It will be a problem with your OS's strptime
> > code.  It must be, I think, as the alternative we supply works.
> >
> > > whereas it works fine if I use a separator (/) in the date@
> > >
> > > > strptime("9/Feb/1960", "%d/%b/%Y")
> > > [1] "1960-02-09"
> > >
> > > > strptime("9Feb1960", "%d%b%Y")
> > > [1] "NA"
> >
> > We really do not put out new features without testing them!
>
>
> Also very strange on WinNT4.0 (R-1.2.0):
>
>
>   x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
>   z <- strptime(x, "%d%b%Y")
>   z
> [1] "1960-01-01 01:00:00" "1960-01-02 01:00:00" "NA"
> "1960-07-30 01:00:00"

I don't get the NA. The 1am is a Windows bug: this only happens in
times prior to 1970, which for Windows do not exist.  It seems to assume
that if isdst is non-zero, it is DST, rather than for isdst > 0.
I have a workaround, so for 1.2.1 (on my machines) this will behave as
expected.

The date-time functions do depend on OS functions being correct, and
although I have done a lot of workarounds, no doubt more errors will
emerge.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Jan 12 16:46:06 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 12 Jan 2001 17:46:06 +0100 (MET)
Subject: [Rd] match.call problem (PR#813)
Message-ID: <200101121646.RAA09768@pubhealth.ku.dk>


Previously reported by Martin as a plot.formula issue, but I believe
it boils down to this:

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,y=2,...)f(x,y=y,...)
> g(1)
f(x = x, ... = list(y = y, ...))
> g(1,b=2) 
f(x = x, ... = list(y = y, b = 2))
> g(1,y=2)
f(x = x, ... = list(y = y, ...))

Notice that ... appears if all actual arguments to g are matched in
the call to f. This is the *name* "..." as in as.name("..."). I would
have expected just ... = list(y = y) in those cases.

Simpler

> f <- function(x,...)match.call(expand.dots=FALSE)
> g <- function(x,...)f(x,...)
> g(1)
f(x = x, ... = list(...))
> g(1,2)
f(x = x, ... = list(..1 = 2))
> g(1,a=2)
f(x = x, ... = list(a = 2))

or yet again simpler

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g(1)
f(... = list(..1 = 1))
> g()
f(... = list(...))
> f()
f()


For comparison, Splus 3.4 has this kind of stuff:

> f <- function(...)match.call(expand.dots=FALSE)
> g <- function(...)f(...)
> g()
f(... = list())
> f()
f(... = list())
> g(1)
f(... = list(1))
> g(a=1)  
f(... = list(a = 1))

I don't see why we don't do the same (although given differences in
lazy evaluation, there might be a point to it), but just getting rid
of the ... in the lists would help quite a bit.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 09:57:52 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 10:57:52 +0100 (MET)
Subject: [Rd] Memory problem ? (PR#814)
Message-ID: <200101150957.KAA22994@pubhealth.ku.dk>



Dear R-developers,

I have the following problem with R: When I try to scan a big file R
is sometimes killed by the operation system (after spinning the hard
disk for 10 minutes or so) or sometimes my X Window collapses. This
problem occurs only if I have many applications (e.g. Emacs, 
gnumeric, two gv, netscape) open at the same
time. On the other hand, if I use read.table() R reads the file without
problems even if many applications also open. 

I do not know whether this is a bug or I do something wrong. Please
let me know what is the case.

The details are given below. Please do not hesitate to contact me if
you need more information.


Many thanks,


Zoltan Barta



The details:

> version
         _                
platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    2.0              
year     2000             
month    12               
day      15               
language R                
> source("../moult/R/O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Killed

The file O.dat.R:
O.dat <- function(nev){
  f.nev <- paste(nev,".dat",sep="");
  what.l <- list(year=numeric(),week=numeric(),bird=numeric(),
                 event=character(),moult=character(),action=character(),
                 res=numeric(),fea1=numeric(),ml1=numeric(),brood=numeric(),
                 exper=numeric(),loc=numeric(),uval=numeric());
  data.frame(scan(f.nev,what=what.l,skip=1));
}


The first ten rows of the file "food12.dat":
year	week	bird	event	moult	action	res	fea1	ml1	brood	exper	loc	uval
0	15	0	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	1	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	2	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	3	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	4	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	5	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	6	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	7	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214
0	15	8	SUBST	NOMOULT	DELAY	5	10	0	0	0	1	0.347214

the file contains lines of similar data and it is generated by a Monte Carlo
simulation. 

My system:
Debian GNU/Linux 2.2 (potato)
Kernel 2.2.15
libc6 2.2-4
Memory: 60 MB
Swap 72 MB







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Z.Barta@bristol.ac.uk  Mon Jan 15 10:22:40 2001
From: Z.Barta@bristol.ac.uk (Z.Barta@bristol.ac.uk)
Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151022.LAA24305@pubhealth.ku.dk>


Dear R-developer,

Just some more details on the problem I reported several minutes ago.
On an NT machine (4.0 SP6) I got the following for the same task:

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              
> setwd("d:/ftp")
NULL
> source("O.dat.R")
> F12 <- O.dat("food12")
Read 92669 lines
Error: cannot allocate vector of size 723 Kb
> 

I hope this help a bit more.

Best wishes, 


Zoltan Barta



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Jan 15 10:35:36 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 15 Jan 2001 11:35:36 +0100 (MET)
Subject: [Rd] Memory problem 2 (PR#815)
Message-ID: <200101151035.LAA24529@pubhealth.ku.dk>

> From: Z.Barta@bristol.ac.uk
> Date: Mon, 15 Jan 2001 11:22:40 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Memory problem 2 (PR#815)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> 
> Dear R-developer,
> 
> Just some more details on the problem I reported several minutes ago.
> On an NT machine (4.0 SP6) I got the following for the same task:
> 
> > version
>          _              
> platform i386-pc-mingw32
> arch     x86            
> os       Win32          
> system   x86, Win32     
> status                  
> major    1              
> minor    2.0            
> year     2000           
> month    12             
> day      15             
> language R              
> > setwd("d:/ftp")
> NULL
> > source("O.dat.R")
> > F12 <- O.dat("food12")
> Read 92669 lines
> Error: cannot allocate vector of size 723 Kb
> > 
> 
> I hope this help a bit more.

It doesn't.  On Windows, we need to know what you set --max-mem-size
to, and if you did not, what memory.size(max=TRUE) says and what your
physical memory is.

All this tells us is that you ran out of allocatable memory.  That's
not a bug.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de  Mon Jan 15 12:58:00 2001
From: jens.oehlschlaegel@bbdo-interone.de"
 <jens.oehlschlaegel@bbdo-interone.de (=?iso-8859-1?Q?=22Dr=2E_Jens_Oehlschl=E4gel=22?=)
Date: Mon, 15 Jan 2001 13:58:00 +0100
Subject: [Rd] AW: par(par()) corrupts devices (PR#807)
Message-ID: <01C07EFB.2C8CA600.jens.oehlschlaegel@bbdo-interone.de>



Dear Prof. Ripley,

I do not insist that features are bugs, so I stop sending this to r-bugs 
and cc r-devel instead

> I am replying to this from the archive: I did not actually receive a 
copy.

But it is right to sent bug reports ONLY to r-bugs, isn't it?
I'am actually using a old version of outlook, and some mails from r-help 
appear as attachments, may it's an outlook problem.

> This is a feature!
> You set par(pin=), and that takes precedence over
> par(pty=).  Same with par(plt=).
>
> To unjam it, you need e.g.  par(mai=old.par$mai)
>
> I think that par(pty=) should revert to a default plot spec, and will
> change this.  But, the problem with restoring lists like that is that
> it depends on exactly the order of the params as they interact.
> It is *not* a good idea.  And no.readonly=T does not help as
> plt and pin are not readonly.  If the user has resized the device before
> restoration, it's pretty chancy what it gets set to.

Thank you for explaining the way it happens. I must admit, that again I am 
baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

I admit, I expected par(par()) not to change anything (I remember vague 
that it worked with the prototype), but in this case it is not (only) a 
problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
CHANGE the device: subsequent par(pty="s") are ignored.

I am shure I am not the only one who expected the on.exit() stuff within 
the following function to leave the graphical parameters UNCHANGED, but it 
doesn't.

somefunc <- function(){
	oldpin <- par(pin=par("pin"))
	on.exit(par(oldpin))
	plot(1,1)
}

windows(5,3)

par(pty="s")
plot(1,1)
# square
par(pty="m")
plot(1,1)

# which settings do we have before
par1 <- par()

somefunc()

# which settings do we have now
par2 <- par()
# do they differ: yes on plt
all.equal(par1, par2)

# reset plt
par(plt=par1$plt)

# which settings do we have now
par2 <- par()
# do they differ: no
all.equal(par1, par2)

par(pty="s")
plot(1,1)
#still not square
#i.e we have hidden parameters
#because all par() are restored to values where par(pty="s") did work

> if the user has resized the device before restoration, it's pretty chancy 
what it gets set to.

I find it frightening to discover that we obvisously have hidden device 
parameters, and more frigthening that they may be modified by resizing.
Sorry that I can't provide code fix, but this is far to deep within the 
heart of R.

Best regards


Jens Oehlschlägel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Jan 15 12:57:30 2001
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 Jan 2001 12:57:30 +0000 (GMT)
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
Message-ID: <200101151257.MAA13403@toucan.stats.ox.ac.uk>


> From: "Dr. Jens Oehlschlägel" <jens.oehlschlaegel@bbdo-interone.de>
> Date: Mon, 15 Jan 2001 13:58:00 +0100
> 
> Dear Prof. Ripley,
> 
> I do not insist that features are bugs, so I stop sending this to r-bugs 
> and cc r-devel instead
> 
> > I am replying to this from the archive: I did not actually receive a 
> copy.
> 
> But it is right to sent bug reports ONLY to r-bugs, isn't it?
> I'am actually using a old version of outlook, and some mails from r-help 
> appear as attachments, may it's an outlook problem.

My guess is that it was an R-bugs mail distribution problem at KU.
Certainly not your end.

> > This is a feature!

(I was being somewhat ironic. It was a design error.)

> > You set par(pin=), and that takes precedence over
> > par(pty=).  Same with par(plt=).
> >
> > To unjam it, you need e.g.  par(mai=old.par$mai)
> >
> > I think that par(pty=) should revert to a default plot spec, and will
> > change this.  But, the problem with restoring lists like that is that
> > it depends on exactly the order of the params as they interact.
> > It is *not* a good idea.  And no.readonly=T does not help as
> > plt and pin are not readonly.  If the user has resized the device before
> > restoration, it's pretty chancy what it gets set to.
> 
> Thank you for explaining the way it happens. I must admit, that again I am 
> baffled things do not work as I expect. WHAT IS THE RECOMMENDED WAY TO 
> RESTORE GRAPHICAL PARAMETERS TO EXACTLY WHAT THEY WERE?

Should work in 1.2.1 if the size is unchanged.

> I admit, I expected par(par()) not to change anything (I remember vague 
> that it worked with the prototype), but in this case it is not (only) a 
> problem of restoring a list. Just setting par(pin) and "re-setting" it DOES 
> CHANGE the device: subsequent par(pty="s") are ignored.

No longer in 1.2.1.

> I am shure I am not the only one who expected the on.exit() stuff within 
> the following function to leave the graphical parameters UNCHANGED, but it 
> doesn't.
> 
> somefunc <- function(){
> 	oldpin <- par(pin=par("pin"))
> 	on.exit(par(oldpin))
> 	plot(1,1)
> }
> 
> windows(5,3)
> 
> par(pty="s")
> plot(1,1)
> # square
> par(pty="m")
> plot(1,1)
> 
> # which settings do we have before
> par1 <- par()
> 
> somefunc()
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: yes on plt
> all.equal(par1, par2)
> 
> # reset plt
> par(plt=par1$plt)
> 
> # which settings do we have now
> par2 <- par()
> # do they differ: no
> all.equal(par1, par2)
> 
> par(pty="s")
> plot(1,1)
> #still not square
> #i.e we have hidden parameters
> #because all par() are restored to values where par(pty="s") did work
> 
> > if the user has resized the device before restoration, it's pretty chancy 
> what it gets set to.
> 
> I find it frightening to discover that we obvisously have hidden device 
> parameters, and more frigthening that they may be modified by resizing.
> Sorry that I can't provide code fix, but this is far to deep within the 
> heart of R.

That's not quite right.  R has several pars doing the same thing.  They
will give different answers after re-sizing, and the last one used wins
out.  S does not have this problem because (essentially) it does not
resize.  Ideally there would be a way to save just one of the 
conflicting options.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon Jan 15 16:05:15 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 15 Jan 2001 11:05:15 -0500 (EST)
Subject: [Rd] legend() patch never seems to have made it in
Message-ID: <Pine.LNX.4.30.0101151101270.24324-100000@bolker.zoo.ufl.edu>


  Perhaps I should have submitted this as a bug so that it would be
officially tracked.  It's not a big deal, but here it is again (I can't
remember which version this patch is against, but I don't think legend()
has changed since then ...)

  Basically, the problem is that if you want to have "opaque" points that
overlay lines (rather than using type="b" and having the lines leave a
little bit of space around the points), you can use pch=21,bg=par("bg"),
but this is hard to replicate in legend().

  For example:

x <- 1:10
y <- runif(10)
plot(x,y,type="l",ylim=c(0,1.2))
points(x,y,pch=21,bg="white")
legend(6,1.2,"foo",pch=21,pt.bg="white",lty=1)

  Here's the patch, which reverses the order of line- and point-drawing
so that points come later and can overwrite the lines:


*** new-legend.R	Thu Oct 19 16:25:36 2000
--- R-devel/src/library/base/R/legend.R	Wed Sep  6 04:11:16 2000
***************
*** 141,171 ****
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
-
-     if (do.lines) {                     #- draw lines ---------------------
-         seg.len <- 2 # length of drawn segment, in xchar units
- 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
- 	if(missing(lwd)) lwd <- par("lwd")
- 	lty <- rep(lty, length.out = n.leg)
- 	lwd <- rep(lwd, length.out = n.leg)
- 	if(trace)
- 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
-                  ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
- 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
- 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
- 	# if (!merge)
-         xt <- xt + (seg.len+x.off) * xchar
-     }
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
      }

      xt <- xt + x.intersp * xchar
--- 141,169 ----
      }
      if(has.pch || do.lines)
          col <- rep(col,length.out=n.leg)
      if (has.pch) {                      #- draw points -------------------
  	pch   <- rep(pch, length.out=n.leg)
  	pt.bg <- rep(pt.bg, length.out=n.leg)
  	ok <- is.character(pch) | pch >= 0
! 	x1 <- (if(merge) xt + 0.2*xchar else xt)[ok]
  	y1 <- yt[ok]
  	if(trace)
  	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
  	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
  	if (!merge) xt <- xt + dx.pch
+     }
+     if (do.lines) {                     #- draw lines ---------------------
+ 	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
+ 	if(missing(lwd)) lwd <- par("lwd")
+ 	lty <- rep(lty, length.out = n.leg)
+ 	lwd <- rep(lwd, length.out = n.leg)
+ 	if(trace)
+ 	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
+                  ", dx=",2*xchar,", dy=0, ...)", sep="")
+ 	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= 2*xchar, dy=0,
+ 		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
+ 	## if (!merge)
+         xt <- xt + (2+x.off) * xchar
      }

      xt <- xt + x.intersp * xchar

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:41:40 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:41:40 +0100 (CET)
Subject: [Rd] Re: announce: survival5 bug fix
In-Reply-To: <Pine.GSO.4.21.0101151050480.18938-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.LNX.4.21.0101152335130.612-100000@kleigh.nl>

Thomas Lumley skriver...

> Anyone using the penalised partial likelihood routines in survival5 should
> update their version. 
> 
> A bug has been fixed in the S package: in coxph() models with penalised
> likelihood and strata it was possible in some circumstances to get an
> infinite loop or perhaps an incorrect answer. 
> 
> The new version (2.3) is on cran.r-project.org and will percolate through
> CRAN in the next few days.

I had trouble installing this package (and its previous
version) on HP-UX. There is a name conflict in files agsurv3.c
and coxfit5.c. I get an "Inconsistent type declaration" error 
for the variable 'time'. Changing the name of the variable
solved the problem.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon Jan 15 23:03:27 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 16 Jan 2001 12:03:27 +1300
Subject: [Rd] Re: AW: par(par()) corrupts devices (PR#807)
References: <200101151257.MAA13403@toucan.stats.ox.ac.uk>
Message-ID: <016801c07f47$5e8cb860$175dd882@stat.auckland.ac.nz>

Hi


> > I find it frightening to discover that we obvisously have hidden device
> > parameters, and more frigthening that they may be modified by resizing.
> > Sorry that I can't provide code fix, but this is far to deep within the
> > heart of R.
>
> That's not quite right.  R has several pars doing the same thing.  They
> will give different answers after re-sizing, and the last one used wins
> out.  S does not have this problem because (essentially) it does not
> resize.  Ideally there would be a way to save just one of the
> conflicting options.


The aim of this design was so that, for example, a plot size specified in
inches would retain its physical dimensions when the window was resized
(which does not happen in S as Brian has pointed out).  As you have
discovered, the design has some problems when you try to save and restore a
large list of graphics parameter settings.  We are currently working on some
new graphics features which will avoid this problem.

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Jan 15 22:53:47 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Mon, 15 Jan 2001 23:53:47 +0100 (CET)
Subject: [Rd] Error diagnostics in hpdlfcn.c
Message-ID: <Pine.LNX.4.21.0101152345370.612-100000@kleigh.nl>


A while back I had trouble running R on HP-UX. R couldn't load
shared libraries, and I had no idea what was wrong. The problem
was in the system libraries. I didn't discover this until
someone suggested to add a request for diagnostic messages in
the call to shl_load. 

The problem was solved. It might be a good idea to include this
request for diagnostic messages in the distribution of R, it
might help other people encountering similar problems.


This is for R version 1.2.1:


--- src/unix/hpdlfcn.c  Mon Jan 15 17:12:58 2001
+++ src/unix/hpdlfcn.c.new      Mon Jan 15 17:13:45 2001
@@ -133,7 +133,7 @@
   if (fname == NULL)
     handle = PROG_HANDLE;
   else {
-    handle = shl_load(fname, mode, 0L);
+    handle = shl_load(fname, mode | BIND_VERBOSE, 0L);
     if (handle != NULL) {
       if ((entry = find_lib_entry(handle)) == NULL) {
        if ((entry = new_lib_entry(handle)) == NULL) {
 

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Wed Jan 17 02:52:00 2001
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Wed, 17 Jan 2001 03:52:00 +0100 (MET)
Subject: [Rd] PR#751
Message-ID: <200101170252.DAA19529@pubhealth.ku.dk>

I'd just like to report a possible R bug--or rather, confirm an existing one
(bug #751).

I have had some difficulty using the polyroot() function.

For example, in Win 98, R 1.1.1,

> polyroot(c(2,1,1))

correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as

[1] -0.5+1.322876i -0.5-1.322876i

However,

> polyroot(c(-100,0,1))

gives the roots of

[1]  10+0i -10+0i

which corresponds to -100 + x^2, not 1 - (100*x^2).

Also,

> polyroot(c(0,0,0,1))

gives

[1]   0+0i   0+0i -10+0i

which aren't all roots of x^3.


Thanks for all your efforts.

I apologize if I'm missing something.

Kristian Markon











-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 07:01:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 08:01:11 +0100
Subject: [Rd] PR#751
In-Reply-To: mark0060@tc.umn.edu's message of "Wed, 17 Jan 2001 03:52:00 +0100 (MET)"
References: <200101170252.DAA19529@pubhealth.ku.dk>
Message-ID: <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>

mark0060@tc.umn.edu writes:

> I'd just like to report a possible R bug--or rather, confirm an existing one
> (bug #751).
> 
> I have had some difficulty using the polyroot() function.
> 
> For example, in Win 98, R 1.1.1,
> 
> > polyroot(c(2,1,1))
> 
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> 
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

> x<-polyroot(c(2,1,1))
> x
[1] -0.5+1.322876i -0.5-1.322876i
> 2+x+x^2
[1] -2.220446e-16+4.440892e-16i -2.220446e-16-4.440892e-16i


> However,
> 
> > polyroot(c(-100,0,1))
> 
> gives the roots of
> 
> [1]  10+0i -10+0i
> 
> which corresponds to -100 + x^2, not 1 - (100*x^2).

as it should.

> 
> Also,
> 
> > polyroot(c(0,0,0,1))
> 
> gives
> 
> [1]   0+0i   0+0i -10+0i
> 
> which aren't all roots of x^3.

That one is way out, however. Even more "fun":

> polyroot(c(-100,0,1))
[1]  10+0i -10+0i
> x<- polyroot(c(0,0,0,1))
> x
[1]   0+0i   0+0i -10+0i
> x<-polyroot(c(2,1,1))
> x<- polyroot(c(0,0,0,1))
> x
[1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i

I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
polyroot calculation! So there's more to the problem than numerical
instability.

Thanks for pointing it out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From apjaworski@mmm.com  Wed Jan 17 16:21:10 2001
From: apjaworski@mmm.com (apjaworski@mmm.com)
Date: Wed, 17 Jan 2001 10:21:10 -0600
Subject: [Rd] PR#751
Message-ID: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>


... snip ...

> For example, in Win 98, R 1.1.1,
>
> > polyroot(c(2,1,1))
>
> correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
>
> [1] -0.5+1.322876i -0.5-1.322876i

Mm, no. The coefficients are by increasing degree, so these are the
roots of 2+x+x^2

... snip ...

The manual page seems to have a typo.  It says (1.2.0 on Win)

Arguments:

       z: the vector of polynomial coefficients in decreasing order.


Andy

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 17:00:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 18:00:38 +0100
Subject: [Rd] PR#751
In-Reply-To: apjaworski@mmm.com's message of "Wed, 17 Jan 2001 10:21:10 -0600"
References: <OF636EC57A.115D0ABC-ON862569D7.00599413@mmm.com>
Message-ID: <x2zogqru4p.fsf@blueberry.kubism.ku.dk>

apjaworski@mmm.com writes:

> ... snip ...
> 
> > For example, in Win 98, R 1.1.1,
> >
> > > polyroot(c(2,1,1))
> >
> > correctly (per the help index) gives the roots of  1 + (1*x) + (2*x^2) as
> >
> > [1] -0.5+1.322876i -0.5-1.322876i
> 
> Mm, no. The coefficients are by increasing degree, so these are the
> roots of 2+x+x^2
> 
> ... snip ...
> 
> The manual page seems to have a typo.  It says (1.2.0 on Win)
> 
> Arguments:
> 
>        z: the vector of polynomial coefficients in decreasing order.
> 

I suppose that could be clearer (it kind of depends on what you
consider the "normal" order), but it also has

              p(x) = z1 + z2 * x + ... + z[n] * x^(n-1)

which should be clear enough.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 17 19:47:27 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Jan 2001 20:47:27 +0100
Subject: [Rd] PR#751
In-Reply-To: Peter Dalgaard BSA's message of "17 Jan 2001 08:01:11 +0100"
References: <200101170252.DAA19529@pubhealth.ku.dk> <x2hf2yirwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2vgreyn8v.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > [1]   0+0i   0+0i -10+0i
> > 
> > which aren't all roots of x^3.
> 
> That one is way out, however. Even more "fun":
> 
> > polyroot(c(-100,0,1))
> [1]  10+0i -10+0i
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]   0+0i   0+0i -10+0i
> > x<-polyroot(c(2,1,1))
> > x<- polyroot(c(0,0,0,1))
> > x
> [1]  0.0+0.000000i  0.0+0.000000i -0.5-1.322876i
> 
> I.e. the result of polyroot(c(0,0,0,1)) depends on the previous
> polyroot calculation! So there's more to the problem than numerical
> instability.
> 
> Thanks for pointing it out.

Found and fixed. Unfortunately the code had just forgotten to test for
the case where you end with a zero-degree polynomial after zero-root
removal, so the fix has zero effect on the accuracy issue. 

The fix is simply 

--- src/appl/cpoly.c    2000/11/24 21:34:31     1.20
+++ src/appl/cpoly.c    2001/01/17 19:45:24
@@ -148,6 +148,8 @@
     nn++;
     /*-- Now, global var.  nn := #{coefficients} = (relevant degree)+1 */
 
+    if (nn == 1) return;
+
     /* make a copy of the coefficients and shr[] = | p[] | */
     for (i = 0; i < nn; i++) {
        pr[i] = opr[i];

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From H.RINNER@TIROL.GV.AT  Thu Jan 18 15:57:18 2001
From: H.RINNER@TIROL.GV.AT (H.RINNER@TIROL.GV.AT)
Date: Thu, 18 Jan 2001 16:57:18 +0100 (MET)
Subject: [Rd] dotplot: character size of labels (PR#816)
Message-ID: <200101181557.QAA13637@pubhealth.ku.dk>

There seems to be a bug in "dotplot" concerning the "cex" parameter. Setting
cex has no effect on the character size of the labels of the points.
This problem was posted to r-help today (Thu, 18 Jan 2001); the solution
given by Brian Ripley (and Uwe Ligges) seems to work for me.

Heinrich Rinner.
 
> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    2.0            
year     2000           
month    12             
day      15             
language R              

> ----------
> Von: 	Prof Brian Ripley[SMTP:ripley@stats.ox.ac.uk]
> Gesendet: 	Donnerstag, 18. Jänner 2001 10:35
> An: 	RINNER Heinrich
> Cc: 	'r-help@stat.math.ethz.ch'
> Betreff: 	Re: [R] dotplot: character size of labels
> 
> On Thu, 18 Jan 2001, RINNER Heinrich wrote:
> 
> > Dear R users,
> >
> > using dotplot (R1.2.0, WinNT4.0), I am trying to change the character
> size
> > of the labels of the points:
> >
> > > # example
> > > data(VADeaths)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940")
> > > # I'd like to have smaller character size of the labels (for age and
> > population groups)
> > > ?dotplot
> > > # for argument "cex", this says: "Setting cex to a value smaller than
> one
> > can be a useful way of avoiding label overlap."
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex = 0.5)
> > > # the main title and the plotting characters are smaller now, but not
> the
> > labels
> > > # trying to set other graphics parameters seems to have no effect:
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.axis =
> 0.5)
> > > dotplot(VADeaths, main = "Death Rates in Virginia - 1940", cex.lab =
> 0.5)
> >
> > I'd be grateful for any hint how to do this correctly;
> 
> Looks like a bug. Inside dotplot alter to
> 
>         for (i in 1:n) mtext(labs[i], side = 2, line = loffset,
>             at = y[i], adj = 0, col = color, las = 2, cex = cex, ...)
> 
>         for (i in 1:nlevels(groups)) mtext(glabels[i], side = 2,
>             line = goffset, at = gpos[i], adj = 0, col = gcolor,
>             las = 2, cex = cex, ...)
> 
> However, it really needs more than that to calculate the spaces for the
> labels correctly.
> 
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fisk@bowdoin.edu  Fri Jan 19 13:55:11 2001
From: fisk@bowdoin.edu (fisk@bowdoin.edu)
Date: Fri, 19 Jan 2001 14:55:11 +0100 (MET)
Subject: [Rd] colors not cycled in type=h plot (PR#817)
Message-ID: <200101191355.OAA25447@pubhealth.ku.dk>

Full_Name: steve fisk
Version: 1.2.0
OS: linux (rh6.2)
Submission from: (NULL) (139.140.37.198)


In the command below I expected a red line and a blue line, but I get two red
lines. 
I get the same behavior with type="s" as well. It appears to only use the first
color,
and does not cycle them as I would expect.

> plot(c(1,2),c(1,1),type="h",col=c("red","blue"))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 15:53:01 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 16:53:01 +0100 (MET)
Subject: AW: [Rd] Re: some problems with windows(rescale=) (PR#794)
Message-ID: <200101191553.QAA26938@pubhealth.ku.dk>



Thanks to Prof. Brian Ripley and Guido Masarotto for fixing the initial rescaling of windows(rescale="fixed").

Now I can provide more detailed desciptions how to replicate the other problems I observed.

concerning 
2) wrong row distances with windows(rescale="fit") 
just use function testit() to see what I mean

# comparing the two devices appears normal
testit(width=8, height=6)

# compare the two devices for DIN A4
# with rescale="fit" lines are closer together
testit(width=16.53543, height=11.69291)

# exagerate effect
testit(width=32, height=24)

## the following function closes all devices
## creates two devices of the specified size
## with rescale="R" and rescale="fit"
## determines cex needed to fill the window (in x direction) and fills it

testit <- function(width, height){
	stroptim <- function(str, width=NULL, height=NULL, units="user", range.cex=c(0.01, 24)){
		units <- match.arg(units, c("user", "figure", "inches"))
		m <- max(length(str), length(width), length(height))
		str <- rep(str, length=m)
		wcex <- hcex <- rep(Inf, m)
		if (!is.null(width)){
			fn <- function(cex, str, width)strwidth(str, cex=cex, units=units)-width
			frange <- rbind(fn(range.cex[1], str, width), fn(range.cex[2], str, width))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], width=width[i])
				  wcex[i] <- u$root
				}else{
				  wcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		if (!is.null(height)){
			fn <- function(cex, str, height)strheight(str, cex=cex, units=units)-height
			frange <- rbind(fn(range.cex[1], str, height), fn(range.cex[2], str, height))
			for (i in seq(length=m)){
				if (prod(sign(frange[,i]))<0){
				  u <- uniroot(fn, range.cex, str=str[i], height=height[i])
				  hcex[i] <- u$root
				}else{
				  hcex[i] <- range.cex[which.min(abs(frange[,i]))]
				}
			}
		}
		pmin(wcex, hcex)
	}

	while (length(dev.list())) dev.off()

	jandltext <- "there is hardly anything i know for sure\nneither of the future nor of the past\nnor should i know what to ask\nif the person answering was you\n\n(Ernst Jandl, stanzen)"

	windows(width=width, height=height)
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))

	windows(width=width, height=height, rescale="fit")
	par(cex=1)
	par(mai=c(0,0,0,0))
	plot.new()
	par(usr=c(0,2,0,2))
	stroptim(jandltext, width=diff(par("usr")[1:2]))
	text(1,1, jandltext, cex=stroptim(jandltext, width=diff(par("usr")[1:2])))
}

concerning
3a) windows(rescale="fit") destroys aspect ratio
3b) repeated rescaling destroys proper font size as well 
Degeneration of aspect ratio only happens if in WindowsNT | DisplayProperties | Plus! | ShowWindowContentsWhileDragging is ACTIVATED and one intensely uses the mouse to do extreme rescaling.
Since this windows option is easy to deactivate, I have no further problems with that.


Best regards


Jens Oehlschlägel


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:01:07 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:01:07 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191601.RAA27053@pubhealth.ku.dk>

windows()
plot(1,1)
windows()
plot(1:2,1:2)
dev.list() # we have devices 2 and 3

# device 3 is active and in front
bringToTop(2) # does not work
bringToTop(3) # does not work also

Regards


Jens Oehlschlaegel

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName@web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 19 16:21:11 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Jan 2001 17:21:11 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191621.RAA27187@pubhealth.ku.dk>

On Fri, 19 Jan 2001 joehl@web.de wrote:

> windows()
> plot(1,1)
> windows()
> plot(1:2,1:2)
> dev.list() # we have devices 2 and 3
>
> # device 3 is active and in front
> bringToTop(2) # does not work
> bringToTop(3) # does not work also

That works exactly as documented on my machine.  It may depend which mode
you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
window is the whole frame, not the sub-window.  I don't know how to bring
sub-windows to the front.

I should point out this is very unlikely to be fixed.  There will be no
further Windows-specific development by me unless patches are supplied.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From joehl@web.de  Fri Jan 19 16:52:44 2001
From: joehl@web.de (joehl@web.de)
Date: Fri, 19 Jan 2001 17:52:44 +0100 (MET)
Subject: [Rd] bringToTop() fails (PR#818)
Message-ID: <200101191652.RAA27462@pubhealth.ku.dk>

> That works exactly as documented on my machine.  It may depend which mode
> you are in and how you interpret `window'.  Try SDI mode.  In MDI mode the
> window is the whole frame, not the sub-window.  I don't know how to bring
> sub-windows to the front.

Now trying SDI it works for me as well. May be the help page should mention that it needs GUI preferences SDI. Nothing of importance for me, I just came across that because I wanted to use bringToTop() to automatically show the two devices alternately in the testit() function of the other mail.

It's anyhow astonishing how much you do to support windows. 
I am shure many people appreciate that as much as I do.

Best regards


Jens Oehlschlaegel

______________________________________________________________________________
Die Fachpresse ist sich einig: WEB.DE 16mal Testsieger! Kostenlos E-Mail, 
Fax, SMS, Verschlüsselung, POP3, WAP....testen Sie uns! http://freemail.web.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Fri Jan 19 23:52:19 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Sat, 20 Jan 2001 00:52:19 +0100 (MET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified (PR#819)
Message-ID: <200101192352.AAA28876@pubhealth.ku.dk>


I noticed this bug before in R 1.2.0. Can't remember whether it
was there in earlier versions.

    > help.start()
    Making links in ~/.R ...
    If /home/peter/sbin/netscape  is already running,       it is *not* restarted,
     and you must switch to its window.
    Otherwise, be patient..
    > help("help", package = "base")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    > help("help")
    help() for help  is shown in browser /home/peter/sbin/netscape ...
    Use      help( help , htmlhelp=FALSE)
    or       options(htmlhelp = FALSE)
    to revert.
    Warning message:
    Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help("help")
    >

As you can see, a linked version of the helpfile is used if I
specify a package. But if I don't specify a package, the linked
helpfile is not found. The code in file "base" for function
help() that seems to generate this error is:

        lnkfile <-
            file.path(Sys.getenv("HOME"), ".R",
                      "library", package, "html",
                      paste(topic, "html", sep="."))

Since the variable packages at this point contains a list, the
variable lnkfile becomes a list.

This patch seems to solve the problem:


--- base	Mon Jan 15 18:01:16 2001
+++ base.new	Sat Jan 20 00:43:48 2001
@@ -10161,11 +10161,12 @@
                         ## we need to use the version in ~/.R if we can.
                             lnkfile <-
                                 file.path(Sys.getenv("HOME"), ".R",
                                           "library", package, "html",
                                           paste(topic, "html", sep="."))
-                            if (file.exists(lnkfile)) file <- lnkfile
+                            lnkfile <- lnkfile[file.exists(lnkfile)]
+                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
                         }
                         if (file == ofile) {
                             warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
                         }
                         file <- paste("file:", file, sep="")



Another thing: is it absolutely necessary to print the same four
lines each time htmlhelp is used? Can't this be switches off
with an option like htmlquiet or something? Or don't print these
lines if verbose == FALSE.

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Sat Jan 20 01:31:36 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Sat, 20 Jan 2001 02:31:36 +0100 (CET)
Subject: [Rd] Can't find linked HTML helpfile unless package is specified
 (PR#819)
In-Reply-To: <200101192352.AAA28876@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101200226160.4357-100000@kleigh.nl>

kleiweg@let.rug.nl skriver...

> This patch seems to solve the problem:
> 
> 
> --- base	Mon Jan 15 18:01:16 2001
> +++ base.new	Sat Jan 20 00:43:48 2001
> @@ -10161,11 +10161,12 @@
>                          ## we need to use the version in ~/.R if we can.
>                              lnkfile <-
>                                  file.path(Sys.getenv("HOME"), ".R",
>                                            "library", package, "html",
>                                            paste(topic, "html", sep="."))
> -                            if (file.exists(lnkfile)) file <- lnkfile
> +                            lnkfile <- lnkfile[file.exists(lnkfile)]
> +                            if (is.character(lnkfile)) if (length(lnkfile) == 1) file <- lnkfile
>                          }
>                          if (file == ofile) {
>                              warning("Using non-linked HTML file: style sheet and hyperlinks may be incorrect")
>                          }
>                          file <- paste("file:", file, sep="")

It doesn't always. For example, doing ?sin I get the non-linked 
files again.

First:
     file <- index.search(topic, INDICES, "AnIndex", type)
sets variable file to "/usr/local/R/lib/R/library/base/html/Trig.html"

Then, variable lnkfile is first set to:
[1] "/home/peter/.R/library/ctest/html/sin.html"
[2] "/home/peter/.R/library/base/html/sin.html"
Neither of these files exist, so in the second step, lnkfile
becomes empty.

-- 
Wekte priegel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Sun Jan 21 06:15:03 2001
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Jan 2001 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200101210615.HAA27625@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 812 *
Subject: segmentation fault in integrate
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Thu, 11 Jan 2001 22:49:59 +0100
* PR# 781 *
Subject: syskern fails Rcmd check on Windows, gives incorrect information
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 20 Dec 2000 11:12:47 +0000 (GMT)
--Partially fixed by dse_2000.12, but still uses "ls" and gives
--incorrect information
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
--bug in spline: replace by interSpline in package spline?
--address problems are fixed

Directory:  Documentation

none

Directory:  Graphics

* PR# 817 *
Subject: colors not cycled in type=h plot
From: fisk@bowdoin.edu
Date: Fri, 19 Jan 2001 14:54:39 +0100 (MET)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 726 *
Subject: par(las=.)  gives wrong "adj" for mtext()
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 7 Nov 2000 13:03:58 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)

Directory:  In-Out

* PR# 814 *
Subject: Memory problem ?
From: Zoltan Barta <Z.Barta@bristol.ac.uk>
Date: Mon, 15 Jan 2001 09:54:16 +0000 (GMT Standard Time)
--scan crashes R on Linux: a memory allocation problem, probably
--Uses n= or nlines= in scan will use less memory, and read.table does.

Directory:  Installation

* PR# 806 *
Subject: configure error on alpha
From: Richard Beare <Richard.Beare@cmis.CSIRO.AU>
Date: Wed, 10 Jan 2001 16:52:58 +1100

Directory:  Language

* PR# 813 *
Subject: match.call problem
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 12 Jan 2001 17:46:15 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 808 *
Subject: Time zone
From: Herve Morin <morin@mat.ulaval.ca>
Date: Wed, 10 Jan 2001 07:24:07 -0500
--This appears to be a complaint about a warning on a beta Mac version
--(but Macs are never mentioned!).  That version is incomplete.

Directory:  TooMuchAtOnce

* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

none

Directory:  incoming

none
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Sun Jan 21 19:17:24 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Sun, 21 Jan 2001 14:17:24 -0500 (EST)
Subject: [Rd] RW1021 and wine
Message-ID: <Pine.LNX.4.30.0101211414080.997-100000@bolker.zoo.ufl.edu>


  Just thought people might be interested to know that the latest version
of R-win now runs under Wine, the windows emulator for Linux (ver.
20001202).  (I originally tried this a couple of releases back because a
student seemed to be having system-specific problems and I was attempting
to be lazy.)  The recent switch from crtdll to msvcrt seems to have
helped with Wine compatibility.

  I didn't test it extensively: looked at the graphics demos (there were
some missing-font problems) and a few other things.

  (So, if you *really* want a GUI front-end under Linux, this might be one
way to do it ...)

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Mon Jan 22 09:43:39 2001
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Mon, 22 Jan 2001 10:43:39 +0100 (MET)
Subject: [Rd] interaction.plot (PR#820)
Message-ID: <200101220943.KAA09053@pubhealth.ku.dk>

I notices some indesireable behaviour in interaction.plot. The scaling of
the x-axis labels discards the overall settings for the 'cex' attribute,
leading to unscaled labels. The source for this behaviour is the line

mtext(xlabs, 1, at = xvals)

in interaction.plot.

to get this function to perform conform the manual, change this line to

mtext(xlabs, 1, at = xvals, cex=par("cex"))

and all is well.

because of the simplicity of this 'fix' I assume that it is a crossplatform
thingie, but for the record:

I use R-Win in winNT, 1.2.0, upgrading soon.

just my .02 euro..

I'll just end this mail with a standard declaration of love for R

greetz. Mark M. Span


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue Jan 23 15:55:59 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 23 Jan 2001 10:55:59 -0500
Subject: [Rd] Guidelines for print methods?
Message-ID: <3a6da51e.932051494@fisher.stats.uwo.ca>

Are there guidelines for what print methods should do?  The reason I
ask is that I was recently confused by what Sys.time prints:

> Sys.time()
[1] "2001-01-23 10:38:17"

I thought from the look of this that Sys.time returned a string, not
an object with a class.  (The help is clear that it returns an object,
but I didn't get that far.) The problem is that print.POSIXct() calls
print() to print the result, rather than cat(), like many other print
methods.

I prefer the printing using cat(), because then it's clear that
there's a print method involved, it's not print.default just
displaying a vector.

Of course, I could have a vector of multiple POSIXct values, in which
case calling print() would probably be appropriate.  (But it might
still be a good idea to use "quote=FALSE" to let me know there's
something special there.)

Shouldn't a print method give some indication that what is being
printed isn't a simple vector?  I'm interested in others' opinions on
this.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Jan 23 17:57:11 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Jan 2001 12:57:11 -0500
Subject: [Rd] 1.2.1 segfault
Message-ID: <3A6DC5F6.65C8C7C6@bank-banque-canada.ca>

I've trapped this segfault with gdb, but I'm not sure what it means or what to do
next.

Paul
_____

$ R -d gdb
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc-sun-solaris2.6"...
(gdb) run
Starting program: /home/mfa5/gilp/R-versions/R-1.2.1/bin/R.bin
Warning: cannot determine current directory

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb) c
Continuing.
 require("dse2"); require("curve")
Loading required package: dse2
Loading required package: dse1
Loading required package: syskern
Loading required package: tframe
[1] TRUE
Loading required package: curve
[1] TRUE
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)  system.info()
Undefined command: "system".  Try "help".
(gdb) c
Continuing.
 system.info()
          _
platform  sparc-sun-solaris2.6
arch      sparc
os        solaris2.6
system    sparc, solaris2.6
status
major     1
minor     2.1
year      2001
month     01
day       15
language  R
OSversion SunOS5
OStype    Unix
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
fuzz.small <- 1e-12
fuzz.large <- 1e-6
fuzz.very.large <- 1e-2
digits <- 18
all.ok <- T
test.rng <- list(kind="Wichmann-Hill",seed=c(979,1479,1542),normal.kind="Box-Muller")

>
> > > > > >
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.
  z  <-  ARMA(A=array(c(1,.5,.3),c(3,1,1)),
              B=array(1,c(1,1,1)),
              C=NULL, description="simplified guide example")

  VARmodel <-l(z,simulate(z, rng=test.rng))
  SSmodel  <- l(to.SS(VARmodel),  VARmodel$data)
+
+ > > > > >
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

> gctorture()
>
Program received signal SIGWINCH, Window size changed.
0xef5b7400 in poll ()
(gdb)
Continuing.

>   tst <- spanSS.f <- span(SSmodel)

Program received signal SIGSEGV, Segmentation fault.
0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
1027   FORWARD_CHILDREN(s);
(gdb)  bt
#0  0x7111c in RunGenCollect (size_needed=2) at memory.c:1027
#1  0x731c8 in R_gc_internal (size_needed=2) at memory.c:1670
#2  0x72dbc in Rf_allocVector (type=13, length=4) at memory.c:1542
#3  0x48794 in CPtrToRObj (p=0xd9fb78, arg=0xd9f208, Fort=1) at dotcode.c:180
#4  0x511d0 in do_dotCode (call=0x8ad148, op=0xd9f668, args=0xda163c,
    env=0xd9da48) at dotcode.c:1778
#5  0x56c44 in Rf_eval (e=0x3a9fb8, rho=0xd9da48) at eval.c:340
#6  0x58f18 in Rf_DispatchOrEval (call=0x3a94d0, generic=0x1632e8 "[",
    args=0x3a94b4, rho=0xd9da48, ans=0xefffc1c4, dropmissing=0) at eval.c:1386
#7  0xbea40 in do_subset (call=0x3a94d0, op=0x1c3754, args=0x3a94b4,
    rho=0xd9da48) at subset.c:471
#8  0x56aa0 in Rf_eval (e=0x3a94d0, rho=0xd9da48) at eval.c:317
#9  0x582c0 in do_set (call=0x3a95cc, op=0x1c3834, args=0x3a95b0, rho=0xd9da48)
    at eval.c:1008
#10 0x56aa0 in Rf_eval (e=0x3a95cc, rho=0xd9da48) at eval.c:317
#11 0x57c8c in do_begin (call=0x3c0e84, op=0x1c37c4, args=0x3a96e4,
    rho=0xd9da48) at eval.c:803
#12 0x56aa0 in Rf_eval (e=0x3c0e84, rho=0xd9da48) at eval.c:317
#13 0x570bc in Rf_applyClosure (call=0xd9d7fc, op=0x319cf4, arglist=0xb750c0,
    rho=0xb75aac, suppliedenv=0xd9d770) at eval.c:501
#14 0x7a1fc in applyMethod (call=0xd9d7fc, op=0x319cf4, args=0xb750c0,
    rho=0xb75aac, newrho=0xd9d770) at objects.c:117
#15 0x7a660 in Rf_usemethod (generic=0xefffc9b0 "genD", obj=0xd9f398,
    call=0x3c1870, args=0x15d400, rho=0xb75aac, ans=0xefffc9ac)
    at objects.c:252
#16 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb75aac) at objects.c:325
#17 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb75aac) at eval.c:317
#18 0x570bc in Rf_applyClosure (call=0x3db454, op=0x31df48, arglist=0xb750c0,
    rho=0xb792e4, suppliedenv=0x1b2868) at eval.c:501
#19 0x56ccc in Rf_eval (e=0x3db454, rho=0xb792e4) at eval.c:352
#20 0x58530 in Rf_evalList (el=0x3db4e0, rho=0xb792e4) at eval.c:1087
#21 0x56bd0 in Rf_eval (e=0x3db550, rho=0xb792e4) at eval.c:338
---Type <return> to continue, or q <return> to quit---
#22 0x57c8c in do_begin (call=0x3db56c, op=0x1c37c4, args=0x3db588,
    rho=0xb792e4) at eval.c:803
#23 0x56aa0 in Rf_eval (e=0x3db56c, rho=0xb792e4) at eval.c:317
#24 0x570bc in Rf_applyClosure (call=0xb79300, op=0x31a280, arglist=0xb6fc70,
    rho=0xb759e8, suppliedenv=0xb792c8) at eval.c:501
#25 0x7a1fc in applyMethod (call=0xb79300, op=0x31a280, args=0xb6fc70,
    rho=0xb759e8, newrho=0xb792c8) at objects.c:117
#26 0x7a660 in Rf_usemethod (generic=0xefffd3f8 "genD", obj=0xda0fc0,
    call=0x3dcd2c, args=0x15d400, rho=0xb759e8, ans=0xefffd3f4)
    at objects.c:252
#27 0x7a930 in do_usemethod (call=0x430e4c, op=0x1d0c50, args=0x430e30,
    env=0xb759e8) at objects.c:325
#28 0x56aa0 in Rf_eval (e=0x430e4c, rho=0xb759e8) at eval.c:317
#29 0x570bc in Rf_applyClosure (call=0x3a7dd4, op=0x31df48, arglist=0xb6fc70,
    rho=0xb699f0, suppliedenv=0x1b2868) at eval.c:501
#30 0x56ccc in Rf_eval (e=0x3a7dd4, rho=0xb699f0) at eval.c:352
#31 0x58f18 in Rf_DispatchOrEval (call=0x3a7e44, generic=0x163380 "$",
    args=0x3a7e28, rho=0xb699f0, ans=0xefffd89c, dropmissing=0) at eval.c:1386
#32 0xbf38c in do_subset3 (call=0x3a7e44, op=0x1d08ec, args=0x3a7e28,
    env=0xb699f0) at subset.c:758
#33 0x56aa0 in Rf_eval (e=0x3a7e44, rho=0xb699f0) at eval.c:317
#34 0x58f18 in Rf_DispatchOrEval (call=0x3a7458, generic=0x1632e8 "[",
    args=0x3a743c, rho=0xb699f0, ans=0xefffdae4, dropmissing=0) at eval.c:1386
#35 0xbea40 in do_subset (call=0x3a7458, op=0x1c3754, args=0x3a743c,
    rho=0xb699f0) at subset.c:471
#36 0x56aa0 in Rf_eval (e=0x3a7458, rho=0xb699f0) at eval.c:317
#37 0x582c0 in do_set (call=0x3a7538, op=0x1c3834, args=0x3a74c8, rho=0xb699f0)
    at eval.c:1008
#38 0x56aa0 in Rf_eval (e=0x3a7538, rho=0xb699f0) at eval.c:317
#39 0x57c8c in do_begin (call=0x3a7554, op=0x1c37c4, args=0x3a7570,
    rho=0xb699f0) at eval.c:803
#40 0x56aa0 in Rf_eval (e=0x3a7554, rho=0xb699f0) at eval.c:317
#41 0x573b4 in do_if (call=0x3a5434, op=0x1b22d4, args=0x3a5418, rho=0xb699f0)
---Type <return> to continue, or q <return> to quit---
    at eval.c:591
#42 0x56aa0 in Rf_eval (e=0x3a5434, rho=0xb699f0) at eval.c:317
#43 0x57c8c in do_begin (call=0x3a5450, op=0x1c37c4, args=0x3a5530,
    rho=0xb699f0) at eval.c:803
#44 0x56aa0 in Rf_eval (e=0x3a5450, rho=0xb699f0) at eval.c:317
#45 0x570bc in Rf_applyClosure (call=0xb596e0, op=0x319298, arglist=0xb7d308,
    rho=0xb7c390, suppliedenv=0xb58364) at eval.c:501
#46 0x7a1fc in applyMethod (call=0xb596e0, op=0x319298, args=0xb7d308,
    rho=0xb7c390, newrho=0xb58364) at objects.c:117
#47 0x7a660 in Rf_usemethod (generic=0xefffe580 "span", obj=0xda0fc0,
    call=0x3a79e4, args=0x15d400, rho=0xb7c390, ans=0xefffe57c)
    at objects.c:252
#48 0x7a930 in do_usemethod (call=0x46e1dc, op=0x1d0c50, args=0x46e188,
    env=0xb7c390) at objects.c:325
#49 0x56aa0 in Rf_eval (e=0x46e1dc, rho=0xb7c390) at eval.c:317
#50 0x570bc in Rf_applyClosure (call=0xb7e4b0, op=0x3223e8, arglist=0xb7d308,
    rho=0x1d16dc, suppliedenv=0x1b2868) at eval.c:501
#51 0x56ccc in Rf_eval (e=0xb7e4b0, rho=0x1d16dc) at eval.c:352
#52 0x582c0 in do_set (call=0xb7e5e4, op=0x1c3834, args=0xb7e5c8, rho=0x1d16dc)
    at eval.c:1008
#53 0x56aa0 in Rf_eval (e=0xb7e5e4, rho=0x1d16dc) at eval.c:317
#54 0x582c0 in do_set (call=0xb7e6c4, op=0x1c3834, args=0xb7e6a8, rho=0x1d16dc)
    at eval.c:1008
#55 0x56aa0 in Rf_eval (e=0xb7e6c4, rho=0x1d16dc) at eval.c:317
#56 0x6e0e8 in R_ReplConsole (rho=0x1d16dc, savestack=0, browselevel=0)
    at main.c:187
#57 0x6e85c in run_Rmainloop () at main.c:491
#58 0x6e8a0 in Rf_mainloop () at main.c:505
#59 0xc5d74 in main (ac=0, av=0xeffff1b4) at system.c:88
(gdb)
(gdb)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:45:15 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:45:15 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231845.TAA29799@pubhealth.ku.dk>


R dumps core if the first command I use is Sys.time():

    > Sys.time()
    Segmentation fault (core dumped) 

This works fine:

    > s <- Sys.time()
    > s
    [1] "2001-01-23 19:38:49 CET"

This works fine too:

    > 1+1
    [1] 2
    > Sys.time()
    [1] "2001-01-23 19:40:56 CET"

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 18:56:25 2001
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 23 Jan 2001 19:56:25 +0100 (MET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
Message-ID: <200101231856.TAA29862@pubhealth.ku.dk>

Peter Kleiweg skriver...

> R dumps core if the first command I use is Sys.time():
> 
>     > Sys.time()
>     Segmentation fault (core dumped) 

(peter) ~ R -d gdb

[snip]

GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
(gdb) run
Starting program: /usr/local/R/lib/R/bin/R.bin

R : Copyright 2001, The R Development Core Team
Version 1.2.1  (2001-01-15)

[snip]

Type `q()' to quit R.

> Sys.time()

Program received signal SIGSEGV, Segmentation fault.
0x401029ce in strftime () at strftime.c:287
strftime.c:287: No such file or directory.
(gdb)        


-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:00:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Jan 2001 20:00:08 +0100 (MET)
Subject: [Rd] Sys.time dumps core at start-up (PR#821)
Message-ID: <200101231900.UAA29899@pubhealth.ku.dk>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

>
> R dumps core if the first command I use is Sys.time():
>
>     > Sys.time()
>     Segmentation fault (core dumped)
>
> This works fine:
>
>     > s <- Sys.time()
>     > s
>     [1] "2001-01-23 19:38:49 CET"
>
> This works fine too:
>
>     > 1+1
>     [1] 2
>     > Sys.time()
>     [1] "2001-01-23 19:40:56 CET"

It does not fail on my RH6.2 systems, so can you debug it please?

>
> --please do not edit the information below--
>
> Version:
>  platform = i586-pc-linux-gnu
>  arch = i586
>  os = linux-gnu
>  system = i586, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> --
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 23 19:05:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 Jan 2001 19:05:42 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <200101231856.TAA29862@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>

On Tue, 23 Jan 2001 kleiweg@let.rug.nl wrote:

> Peter Kleiweg skriver...
>
> > R dumps core if the first command I use is Sys.time():
> >
> >     > Sys.time()
> >     Segmentation fault (core dumped)
>
> (peter) ~ R -d gdb
>
> [snip]
>
> GDB 4.16 (i386-redhat-linux), Copyright 1996 Free Software Foundation, Inc...
> (gdb) run
> Starting program: /usr/local/R/lib/R/bin/R.bin
>
> R : Copyright 2001, The R Development Core Team
> Version 1.2.1  (2001-01-15)
>
> [snip]
>
> Type `q()' to quit R.
>
> > Sys.time()
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x401029ce in strftime () at strftime.c:287
> strftime.c:287: No such file or directory.
> (gdb)

Is this the RH5.0 you mentioned earlier (that gdb is pretty ancient)?  Did
you set TZ as advised in ?DateTimeClasses to work around bugs in deficient
Linux distros?  RH6.2's strftime will crash on POSIXlt (and its man page)
correct inputs.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Jan 23 22:53:03 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 23 Jan 2001 23:53:03 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101231901320.803-100000@auk.stats>
Message-ID: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>

Prof Brian D Ripley skriver...

> Is this the RH5.0 you mentioned earlier (that gdb is pretty
> ancient)?

Yes, it is. Using it quite a while now.

> Did you set TZ as advised in ?DateTimeClasses to work around
> bugs in deficient Linux distros? RH6.2's strftime will crash
> on POSIXlt (and its man page) correct inputs.

Setting TZ has no effect. R still dumps core. I don't see the
point of setting TZ, since it is unset in datetime.c

I now do remember I had inexplicable core dump with strftime (or
a similar function) in another program. It was a while back, I
can't recall the details, nor do I remember the program.

In another mail you ask me to debug the problem. I have no
experience debugging large programs, and if the problem is
caused by a faulty library function I don't see the point
trying.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 08:54:09 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 24 Jan 2001 08:54:09 +0000 (GMT)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.LNX.4.21.0101232327110.719-100000@kleigh.nl>
Message-ID: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>

On Tue, 23 Jan 2001, Peter Kleiweg wrote:

> Prof Brian D Ripley skriver...
>
> > Is this the RH5.0 you mentioned earlier (that gdb is pretty
> > ancient)?
>
> Yes, it is. Using it quite a while now.
>
> > Did you set TZ as advised in ?DateTimeClasses to work around
> > bugs in deficient Linux distros? RH6.2's strftime will crash
> > on POSIXly (and its man page) correct inputs.
>
> Setting TZ has no effect. R still dumps core. I don't see the
> point of setting TZ, since it is unset in datetime.c

It is only unset (if possible) if it was initially unset. You do seem to
give the idea that you think the R developers do not know what they are
doing! Did you actually test your hypothesis?  If you did, and it is
correct, that is another bug of your system. On RH6.2

blackcap% setenv TZ GMT0DST
blackcap% R
> Sys.getenv("TZ")
       TZ
"GMT0DST"
> Sys.time()
[1] "2001-01-24 08:47:26 GMT"
> Sys.getenv("TZ")
       TZ
"GMT0DST"


> I now do remember I had inexplicable core dump with strftime (or
> a similar function) in another program. It was a while back, I
> can't recall the details, nor do I remember the program.
>
> In another mail you ask me to debug the problem. I have no
> experience debugging large programs, and if the problem is
> caused by a faulty library function I don't see the point
> trying.

But you did send a debug log to R-devel shortly after I asked
which told me the error was in strftime....  It would have been
helpful to have put that (and your Linux distro) in the original message.

Please do remember that there is not a technical support section receiving
these bug reports, but a group of volunteers,  those who in the main
provided you with the software in the first place.  Incomplete and
inaccurate reports make their task harder than necessary, and that's
unkind.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Jan 24 09:30:31 2001
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 24 Jan 2001 10:30:31 +0100 (CET)
Subject: [Rd] Re: Sys.time dumps core at start-up (PR#822)
In-Reply-To: <Pine.GSO.4.31.0101240840570.4693-100000@toucan.stats>
Message-ID: <Pine.LNX.4.21.0101241017370.670-100000@kleigh.nl>

Prof Brian Ripley skriver...

> On Tue, 23 Jan 2001, Peter Kleiweg wrote:
> 
> > Prof Brian D Ripley skriver...

> > > Did you set TZ as advised in ?DateTimeClasses to work around
> > > bugs in deficient Linux distros? RH6.2's strftime will crash
> > > on POSIXly (and its man page) correct inputs.
> >
> > Setting TZ has no effect. R still dumps core. I don't see the
> > point of setting TZ, since it is unset in datetime.c
> 
> It is only unset (if possible) if it was initially unset.

There might be some logic behind this, but don't expect every
outsider to understand this. I just noticed setting TZ has no
effect.

> You do seem to
> give the idea that you think the R developers do not know what they are
> doing! Did you actually test your hypothesis?  If you did, and it is
> correct, that is another bug of your system. On RH6.2

I read the code in datetime.c. In there TZ is unset. I have no
overview on how this code is used.
 
> > In another mail you ask me to debug the problem. I have no
> > experience debugging large programs, and if the problem is
> > caused by a faulty library function I don't see the point
> > trying.
> 
> But you did send a debug log to R-devel shortly after I asked
> which told me the error was in strftime....  It would have been
> helpful to have put that (and your Linux distro) in the original message.

I only copied something I saw being done in another mail I
received just after I sent my first message. As to debugging the
complete code, see how it got to this error, that is something
beyond me.
 
> Please do remember that there is not a technical support section receiving
> these bug reports, but a group of volunteers,  those who in the main
> provided you with the software in the first place.  Incomplete and
> inaccurate reports make their task harder than necessary, and that's
> unkind.

Well, I'm not a professional either. I don't file bug reports
demanding a solution. I thought bug reports might be useful to
the developers. Perhaps you should add a warning to the help on
bug.report, something like "don't bother submitting a bug report
if you haven't a clue".

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Jan 24 11:21:59 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 Jan 2001 12:21:59 +0100
Subject: [Rd] DSC 2001: 2nd CFP
Message-ID: <14958.47831.121738.844217@mithrandir.hornik.net>

DSC 2001
International Workshop on Distributed Statistical Computing
http://www.ci.tuwien.ac.at/Conferences/DSC-2001/
March 15--17, 2001
Vienna, Austria

The second international workshop on `Distributed Statistical Computing'
(DSC 2001) will take place at the Technische Universität Wien in Vienna,
Austria from 2001-03-15 to 2001-03-17.  This workshop will deal with
future directions in statistical computing, such as event-driven
software, graphical user interfaces, large and varied databases,
reusable components, high-level object-oriented interfaces, and data
exchange using XML.

Particular emphasis will be given to the R (http://www.r-project.org)
and Omegahat (http://www.omegahat.org) projects.  DSC 2001 builds on the
spirit and success of DSC 1999, which was seminal to the further
development of the R and Omegahat projects.

Participants will include

  Doug Bates			University of Wisconsin, Madison
  Roger Bivand			University of Bergen 
  Vince Carey			Harvard University
  John Chambers			Bell Labs, Lucent Technologies
  Peter Dalgaard		University of Copenhagen
  Saikat DebRoy			University of Wisconsin, Madison
  John Eaton			University of Wisconson, Madison
  Robert Gentleman		Harvard University
  Torsten Hothorn		Universität Erlangen
  Kurt Hornik			Technische Universität Wien  
  Stefano Iacus			Università degli Studi di Milano
  Ross Ihaka			University of Auckland
  David James			Bell Labs, Lucent Technologies
  Friedrich Leisch		Technische Universität Wien
  Uwe Ligges			Universität Dortmund
  Jim Lindsey			University of Limburg
  Thomas Lumley			University of Washington
  Martin Mächler		ETH Zurich
  Duncan Murdoch		University of Western Ontario 
  Paul Murrell			University of Auckland
  Erich Neuwirth		Universität Wien
  Martyn Plummer		International Agency for Research on Cancer
  Brian Ripley			University of Oxford
  Antony Rossini		University of Washington
  Günther Sawitzki		Universität Heidelberg
  David Smith			MathSoft
  Detlef Steuer			Universität der Bundeswehr, Hamburg
  Deborah Swayne		AT&T Labs
  Duncan Temple Lang		Bell Labs, Lucent Technologies
  Luke Tierney			University of Minnesota
  Antony Unwin			Universität Augsburg
  Gregory Warnes		Pfizer Global Research & Development
  Chen Xun			Merck Research Laboratories

There will be a two-day extension focusing on the future of the R
project.  Most members of the R Core Development Team will participate
in this extension, which is open to everyone else interested.

We invite papers on topics related to statistical computing.  Deadline
for submission of papers is 2001-02-16.

Deadline for registration is 2001-03-09.  There will be a conference fee
of EUR 50.

Please contact the organizing committee at dsc-org@ci.tuwien.ac.at for
further information.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fujimori@grafin.fujimori.cache.waseda.ac.jp  Wed Jan 24 22:26:45 2001
From: fujimori@grafin.fujimori.cache.waseda.ac.jp (Yoriaki FUJIMORI)
Date: Wed, 24 Jan 2001 22:26:45 +0000
Subject: [Rd] Re: [R] RPM of R-1.2.1 for RH 7?
In-Reply-To: Your message of "Wed, 24 Jan 2001 11:01:32 +0100."
 <XFMail.010124110132.plummer@iarc.fr>
Message-ID: <200101241326.WAA00300@grafin.fujimori.cache.waseda.ac.jp>


As for R on Linux/Alpha, people had better think about compiling sources
with Compaq's ccc/cxx/fort.  These compilers create far better code
than GNU's gcc/g++/g77 for Alpha.  R compiled by GNU's compilers runs
slow.
I do not know if R-developers are running Linux/Alpha boxes at hand.
(Probably not.) 

Yoriaki Fujimori
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Jan 24 19:12:49 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 24 Jan 2001 20:12:49 +0100 (MET)
Subject: [Rd] adjustment of expressions with mtext(..., las=2) (PR#823)
Message-ID: <200101241912.UAA12694@pubhealth.ku.dk>

[Subject renamed for bug report]


Don Wingate wrote:
[...]
> For example:
> 
>         math.names.text <- c("x1^2", "x2^2", "x2%*%x3) # in actual use,
> dynamically created.
>         math.expressions <- parse(text=math.names.text)
>         dotplot(1:3, labels=math.expressions)
[...] 
> By the way, I notice that when using math expressions as the labels in
> dotplot, the positioning of the labels is off to the right (and off the
> visible screen). Is this a bug in the way that the size of the math
> expressions are computed?


Yes, it looks like a bug. I try to simplify it:

When using mtext(..., las=2, adj=anything), the argument adj doesn't
seem to have any effect:

  plot(1:10)
  mtext("x^2 + x^3", side = 2, las=2, at=3, line=3, adj=0) # works fine
...

  # but here it is not left justified at line=3:
  mtext(expression(x^2 + x^3), side = 2, las=2, at=7, line=3, adj=0) 

Uwe Ligges


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Wed Jan 24 23:00:41 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 00:00:41 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242300.AAA13617@pubhealth.ku.dk>

Having trouble with netCDF since I upgraded to 1.2.1 (did directly
from 1.1.1).  Package was recompiled after the upgrade.

Symptoms:
open.netCDF returns cleanly, but read.netCDF causes R to segfault
and dump core.  What else do you need me to write to help?

--please do not edit the information below--

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:netCDF, package:RODBC, package:ts, package:local, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Jan 24 23:09:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 00:09:18 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101242309.AAA13649@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> Having trouble with netCDF since I upgraded to 1.2.1 (did directly
> from 1.1.1).  Package was recompiled after the upgrade.

You did use netCDF_1.1 for 1.2.1 did you.  I wonder?
netCDF_1.0-1 will not work.

> Symptoms:
> open.netCDF returns cleanly, but read.netCDF causes R to segfault
> and dump core.  What else do you need me to write to help?

The first item is to report that it had passed R CMD check netCDF?  That
uses read.netCDF.  If so the problem is data-specific, if not it
is with your installation.  So we either need the data or a lot
more about your installation of netCDF.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:49 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:49 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13932@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:18:38 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:18:38 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250018.BAA13918@pubhealth.ku.dk>


First and foremost, regarding:

> Please do not send bug reports to R-bugs and R-help: the first
> set goes to R-devel too which means that the active developers see it
> twice (and are probably twice as likely to ignore it, as I will next time). 

My appologies.  I'm well aware that R is a labour of love for those involved,
and I truly appreciate what they've given the rest of us.  The last thing
I want to do is irritate any of you.  Now trying to pull foot from 
mouth.  And making every note to not do this sort of thing in future.

Thanks for the quick reply with information.  

> You did use netCDF_1.1 for 1.2.1 did you.  

Yes.

> The first item is to report that it had passed R CMD check netCDF?  

Output from that is....

---Begin ~/R/netCDF.Rcheck/00check.log ---

* using log directory /home/jasont/R/netCDF.Rcheck
* checking for file `netCDF/DESCRIPTION' ... OK
* checking package directory ... OK
* checking DESCRIPTION Package field ... OK
* checking DESCRIPTION Version field ... OK
* checking DESCRIPTION Title field ... OK
* checking DESCRIPTION License field ... OK
* checking DESCRIPTION Author field ... OK
* checking DESCRIPTION Maintainer field ... WARNING
*   no DESCRIPTION Maintainer field found
* checking Rd files ... OK
* checking for undocumented objects ... OK
* creating netCDF-Ex.R ... OK
* checking examples ... OK
* creating netCDF-manual.tex ... OK
* checking netCDF-manual.tex ... OK

---End ~/R/netCDF.Rcheck/00check.log ---

Looks good to me.  As you've probably guessed, I'm new
to R, so take the following with the requisite number
of grains of salt:  in the R-ex directory, the 
read.netCDF.R file contains either blank lines
or commented lines, and nothing else.  There might
be some keywords there for the example software?

---Begin ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

###--- >>> `read.netCDF' <<<----- Read subsets of a netCDF file

        ## alias         help(read.netCDF)

##___ Examples ___:



## Keywords: 'file'.   
---End ~/R/netCDF.Rcheck/netCDF/R-ex/read.netCDF.R ---

That's it.


NetCDF installation:  version 3.4, built from source.
Other NetCDF utilities continue to work nicely, which 
is how I'm working around the issue.  Now, I'm taking
existing netCDF files, converting them to csv files,
and either reading them directly, or loading them
to PostgreSQL, and using RPgSQL or RODBC.  Conversion
to csv is done using home-brewed c programs which
were dynamically linked against libnetcdf.so.  As
such, I'm pretty sure the library is still working fine.

I have a nice sample netCDF file, but I doubt it's appropriate
for the bugs list (waste of bandwidth).  It's just under 2K.

-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Jan 25 00:43:48 2001
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 25 Jan 2001 01:43:48 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250043.BAA14088@pubhealth.ku.dk>

Another interesting point - read.netCDF does *not* cause
R to dump core if debug(read.netCDF) is on. To be clear:

> rm(list=ls(all=T))
> library(netCDF)

# --- works ---
> debug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")

--- lots of stuff deleted ---

> length(z)
[1] 143
--- what it should be

> close.netCDF(fd)
[1] TRUE   

#--- end works ---

That works fine.  Carrying on in the same session:

# --- doesn't work ---

> rm(z,fd)
> undebug(read.netCDF)
> fd<-open.netCDF("data.nc")
> z<-read.netCDF(fd,"foo")
Segmentation fault (core dumped)   

# --- end doesn't work ---

Now more puzzled.

Jason Turner
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Jan 25 07:14:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 25 Jan 2001 08:14:02 +0100 (MET)
Subject: [Rd] trouble with netCDF (PR#824)
Message-ID: <200101250714.IAA15026@pubhealth.ku.dk>

On Thu, 25 Jan 2001 jasont@indigoindustrial.co.nz wrote:

> NetCDF installation:  version 3.4, built from source.
> Other NetCDF utilities continue to work nicely, which
> is how I'm working around the issue.  Now, I'm taking
> existing netCDF files, converting them to csv files,
> and either reading them directly, or loading them
> to PostgreSQL, and using RPgSQL or RODBC.  Conversion
> to csv is done using home-brewed c programs which
> were dynamically linked against libnetcdf.so.  As
> such, I'm pretty sure the library is still working fine.
>
> I have a nice sample netCDF file, but I doubt it's appropriate
> for the bugs list (waste of bandwidth).  It's just under 2K.

I think the thing to do now is to contact the netCDF package
maintainer (Thomas Lumley) with that example.

As I am sure you appreciate we need to eliminate the simple causes first,
and they are common.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holst@math.ku.dk  Thu Jan 25 14:41:12 2001
From: holst@math.ku.dk (holst@math.ku.dk)
Date: Thu, 25 Jan 2001 15:41:12 +0100 (MET)
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
Message-ID: <200101251441.PAA24001@pubhealth.ku.dk>

Dear Sirs,

I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
The configure-script runs without any problems but during 'make' I receive
the following error-message:
[......]
g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
g77 -mieee  -g -O2 -c eigen.f -o eigen.o
g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
ranlib libappl.a
#make: No such file or directory
*** Exit 1
Stop.
*** Exit 1
Stop.
*** Exit 1
Stop.
fenchel:/net/prod/appl/R/R-1.2.1/>

The same problem appears when I try to compile v.1.2.0.

What is wrong?

Best regards
Klaus Holst



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Jan 26 08:44:33 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 26 Jan 2001 09:44:33 +0100
Subject: [Rd] problems compiling R under digital unix 4.0d (PR#826)
In-Reply-To: <200101251441.PAA24001@pubhealth.ku.dk>
References: <200101251441.PAA24001@pubhealth.ku.dk>
Message-ID: <14961.14577.567763.570686@mithrandir.hornik.net>

>>>>> holst  writes:

> Dear Sirs,
> I am trying to compile R v1.2.1 under Digital Unix 4.0D. 
> The configure-script runs without any problems but during 'make' I receive
> the following error-message:
> [......]
> g77 -mieee  -g -O2 -c dtrco.f -o dtrco.o
> g77 -mieee  -g -O2 -c dtrsl.f -o dtrsl.o
> g77 -mieee  -g -O2 -c eigen.f -o eigen.o
> g77 -mieee  -g -O2 -c lminfl.f -o lminfl.o
> ar cr libappl.a Rsock.o  approx.o  bakslv.o binning.o  chisqsim.o chull.o
> cpoly.o cumsum.o  distance.o  fft.o fmin.o fortran.o  lbfgsb.o loglin.o
> lowess.o  machar.o maxcol.o massdist.o  pretty.o  rowsum.o  sock.o
> splines.o stem.o strsignif.o  tabulate.o  uncmin.o  zeroin.o ch2inv.o
> chol.o  dpbfa.o dpbsl.o dpoco.o dpodi.o dpofa.o dposl.o dqrdc.o  dqrdc2.o
> dqrls.o dqrsl.o dqrutl.o dsvdc.o dtrco.o dtrsl.o  eigen.o  lminfl.o 
> ranlib libappl.a
> #make: No such file or directory
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> *** Exit 1
> Stop.
> fenchel:/net/prod/appl/R/R-1.2.1/>

> The same problem appears when I try to compile v.1.2.0.

> What is wrong?

DEC make, I think :-)

But anyway, the problem should be fixed in the current r-patched
snapshot.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From keith.briggs@bt.com  Fri Jan 26 11:48:02 2001
From: keith.briggs@bt.com (keith.briggs@bt.com)
Date: Fri, 26 Jan 2001 12:48:02 +0100 (MET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
Message-ID: <200101261148.MAA02460@pubhealth.ku.dk>

Dear Dr. Trapletti,

I am trying to use your tseries 0.7-0 package with R 1.2.1
(the latest version) under redhat linux 6.2, but the command
library(tseries)
causes R dump to core with a segmentation fault.

Do you have any suggestions how to fix this?

Thank you,
Keith

Dr. Keith M. Briggs, Complexity Research Group, BTexaCT.
Adastral Park admin2 pp5, Martlesham Heath, IP5 3RE, Suffolk,  UK
Tel: 01473 641 911  Fax: 01473 647 410.  Home tel:  01473 625 972
Personal homepage http://www.btexact.com/people/briggsk2/ 
NEW!  Exact Real software: http://www.btexact.com/people/briggsk2/XR.html



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Jan 26 12:53:33 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Jan 2001 13:53:33 +0100 (CET)
Subject: [Rd] tseries 0.7-0 with R 1.2.1 dumps core (PR#827)
In-Reply-To: <200101261148.MAA02460@pubhealth.ku.dk>
Message-ID: <XFMail.010126135333.plummer@iarc.fr>

On 26-Jan-01 keith.briggs@bt.com wrote:
> Dear Dr. Trapletti,
> 
> I am trying to use your tseries 0.7-0 package with R 1.2.1
> (the latest version) under redhat linux 6.2, but the command
> library(tseries)
> causes R dump to core with a segmentation fault.

This is a system-specific problem.  The Fortran compiler that comes
with Red Hat 6.2 is known to cause problems when dynamically
loading shared objects. I'm using gcc 2.95.2 on Red Hat 6.2
which I  used to build both R and tseries. I do not have this problem.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Fri Jan 26 14:56:45 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Fri, 26 Jan 2001 15:56:45 +0100
Subject: [Rd] Suggestion for an extension of the API
Message-ID: <3A71902D.87E0F755@olsen.ch>

Dear R Developers (I think in particular Brian)

Especially for larger optimization problems, it would be nice to have an
entry point for C/C++ code to the R optimizers (the ones which are called
when using optim()), where the client just has to provide the functions
fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
$RHOME/src/main/optim.c). Are there any plans for providing such an entry
point?

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Jan 26 16:12:50 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Jan 2001 10:12:50 -0600
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: Adrian Trapletti's message of "Fri, 26 Jan 2001 15:56:45 +0100"
References: <3A71902D.87E0F755@olsen.ch>
Message-ID: <6rbssu9trx.fsf@franz.stat.wisc.edu>

Adrian Trapletti <adrian@olsen.ch> writes:

> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

There is such an entry point for the optimizer used by nlm.  It is
called optif9 and is declared in $RHOME/lib/R/include/R_ext/Applic.h

I can provide an example of its use if you wish.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Jan 26 20:58:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 26 Jan 2001 20:58:32 +0000 (GMT)
Subject: [Rd] Suggestion for an extension of the API
In-Reply-To: <3A71902D.87E0F755@olsen.ch>
Message-ID: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>

On Fri, 26 Jan 2001, Adrian Trapletti wrote:

> Dear R Developers (I think in particular Brian)
>
> Especially for larger optimization problems, it would be nice to have an
> entry point for C/C++ code to the R optimizers (the ones which are called
> when using optim()), where the client just has to provide the functions
> fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> point?

No, but there can be.  There are at least some problems with error-handling
that need to be thought about.

Is what you want essentially to make vmmin (...) a public entry point,
avoiding having to deal with OptStruct's?  If that suffices, it would
be easy.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sat Jan 27 00:57:38 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sat, 27 Jan 2001 01:57:38 +0100 (MET)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
Message-ID: <200101270057.BAA07875@pubhealth.ku.dk>

I am running R 1.2.1 under Windows 98SE.

termplot() currently fails when there are composite terms, thus:
  > library(mass)
  > data(hills)
  > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
  > termplot(hills.lm)
  Hit <Return> to see next plot: 
  Error in eval(expr, envir, enclos) : Object "dist" not found

The call
  > termplot(hills.lm,data=hills)
does run without generating an error message, i.e. there is a 
problem with the default setting for the parameter 'data'. 
However the x-axis for the term poly(dist,2) is then incorrectly 
labelled as poly(dist,2), rather than dist
The label poly(dist,2) surely belongs as part of the y-axis label.

Here are suggested fixes

1. In the default parameters for the function call change
   data = model.frame(model)
to
   data = get(as.character(model$call$data))

[This does not work if the variable values are specified in the
function call.  It is not clear to me how to fix that.]

2. A few lines from the beginning, replace
    if (is.null(xlabs)) 
        xlabs <- nmt
    if (is.null(ylab)) 
        ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
with
   if (is.null(xlabs)) 
        xlabs <- unlist(lapply(cn,function(x)
        if(length(x)>1)as.character(x[[2]]) else as.character(x)))
   if (is.null(ylab)) 
        ylab <- paste("Partial for", nmt)

[The current y-label is "link(<yvar>)".  If it is thought necessary
to specify this, it should be additional to e.g., in my example,
"Partial for poly(dist,2)"]

Replace ylab = ylab with 
   ylab = ylab[i]
in the two places (arguments to plot()) where it appears.

John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6125)3998        
c/o CMA, SMS,                 fax   : (6125)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Jan 27 01:09:03 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Jan 2001 17:09:03 -0800 (PST)
Subject: [Rd] termplot fails for composite non-factor terms (PR#828)
In-Reply-To: <200101270057.BAA07875@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.21.0101261704120.21498-100000@homer06.u.washington.edu>

On Sat, 27 Jan 2001 john.maindonald@anu.edu.au wrote:

> I am running R 1.2.1 under Windows 98SE.
> 
> termplot() currently fails when there are composite terms, thus:
>   > library(mass)
>   > data(hills)
>   > hills.lm <- lm(time ~ climb + poly(dist, 2), data = hills)
>   > termplot(hills.lm)
>   Hit <Return> to see next plot: 
>   Error in eval(expr, envir, enclos) : Object "dist" not found
> 
> The call
>   > termplot(hills.lm,data=hills)
> does run without generating an error message, i.e. there is a 
> problem with the default setting for the parameter 'data'. 
> However the x-axis for the term poly(dist,2) is then incorrectly 
> labelled as poly(dist,2), rather than dist
> The label poly(dist,2) surely belongs as part of the y-axis label.
> 
> Here are suggested fixes
> 
> 1. In the default parameters for the function call change
>    data = model.frame(model)
> to
>    data = get(as.character(model$call$data))
> 
> [This does not work if the variable values are specified in the
> function call.  It is not clear to me how to fix that.]

Also, it does not specify where to get() the data: what environment to
use. The reason that the data= argument is present in termplot() is that
we can't tell where to find the data in general.

The situation is better as of R1.2, since we can look up variables in the
environment of the model formula. This would fix not only termplot() but a
number of other prediction-related problems.


> 2. A few lines from the beginning, replace
>     if (is.null(xlabs)) 
>         xlabs <- nmt
>     if (is.null(ylab)) 
>         ylab <- substitute(link(foo), list(foo = formula(model)[[2]]))
> with
>    if (is.null(xlabs)) 
>         xlabs <- unlist(lapply(cn,function(x)
>         if(length(x)>1)as.character(x[[2]]) else as.character(x)))
>    if (is.null(ylab)) 
>         ylab <- paste("Partial for", nmt)
> 
> [The current y-label is "link(<yvar>)".  If it is thought necessary
> to specify this, it should be additional to e.g., in my example,
> "Partial for poly(dist,2)"]
> 
> Replace ylab = ylab with 
>    ylab = ylab[i]
> in the two places (arguments to plot()) where it appears.


This looks like a good idea. 

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Jan 27 04:37:38 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 26 Jan 2001 22:37:38 -0600 (CST)
Subject: [Rd] Off-topic: Pretty-printing R (or S) code with GNU a2ps
Message-ID: <14962.20626.613619.35152@sonny.eddelbuettel.com>


--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit


GNU a2ps is a fairly versatile text-to-anything processor.  It is useful for
typsetting source code from a wide variety of programming languages.  As R
(ie S) wasn't supported yet, I quickly cobbled a style sheet for the S
language together. Stylesheets are documented in the texinfo docs for a2ps,
and examples can be found in /usr/share/a2ps/sheets (on Debian at least,
others distros or unices probably have similar locations). IIRC a2ps exists
for NT but might require Cygwin. I typeset on Linux and only print on NT :)

Well, as I still don't really know what I'm doing with R, I would appreciate
comments / feedback / input from anyone could spend a moment or two on this.
To activate the stylesheet, simple patch
      /usr/share/a2ps/sheets/sheets.map
as per the short diff below which declares that the stylesheet s.ssh shall be
used for filenames matching /*.[RS]/.  The sheet itself is attached, just
place it in the same directory, ie /usr/share/a2ps/sheets/.

Usage then simply becomes
      a2ps -Pdisplay foo.R
or
      a2ps foo.R -o foo.ps; gv foo.ps
in case the "display" device isn't defined.

A few points / questions:

 * content:  a2ps uses tricks to use TeX symbols. It works well to typset
   <- with \leftarrow (uncomment that in s.ssh to see) but I couldn't tell
   it to parse
      a<-2
   it only finds <- with whitespace, eg
      a <- 2
   What could be done about <<- ?  Is there a matching TeX symbol?

 * more content: Is the list of keywords really that short? I couldn't find
   much else...  

 * scope:  Are other file extensions in use? Are there conventions for S or
   Splus files?  Any clever way to make a2ps understand the files in 
   $R_HOME/library/$PACKAGE/R  are also R?  Could file(1) be taught what 
   an R file is?

 * editorial: shall this be the s.ssh or r.ssh or rs.ssh? 

Thanks, Dirk


edd@sonny:/tmp/a2ps> cat sheets.map.diff
*** /usr/share/a2ps/sheets/sheets.map   Fri Jan 26 22:13:55 2001
--- sheets.map  Fri Jan 26 22:17:42 2001
***************
*** 373,378 ****
--- 373,381 ----
        <*python script*>
        /*.py/
 
+ # GNU R files, as well as S language files
+ s:    /*.[RS]/
+
  # REXX command files
  rexx: /*.cmd/i
                                                  


--oP8mQFO4PT
Content-Type: application/octet-stream
Content-Disposition: attachment;
	filename="s.ssh"
Content-Transfer-Encoding: base64

IyBTdHlsZSBzaGVldCBmb3IgdGhlIFMgbGFuZ3VhZ2UsIHBhcnRpY3VsYXJseSBpdHMgUiBk
aWFsZWN0CiMKIyBHTlUgUiBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBTLCBhIGxhbmd1YWdl
IChkZXZlbG9wZWQgYXQgQmVsbCAKIyBMYWJvcmF0b3JpZXMpIGZvciBzdGF0aXN0aWNhbCBj
b21wdXRpbmcgYW5kIGdyYXBoaWNzLiAKIwojIEEgc3VpdGFibGUgc2hlZXRzLm1hcCBlbnRy
eSB3b3VsZCBiZQojIEdOVSBSIGZpbGVzLCBhcyB3ZWxsIGFzIFMgbGFuZ3VhZ2UgZmlsZXMK
IyBzOgkvKi5bUlNdLwojCiMgQ29weXJpZ2h0IChjKSAyMDAxIERpcmsgRWRkZWxidWV0dGVs
CiMKCiMKIyBUaGlzIGZpbGUgaXMgcGFydCBvZiBhMnBzLgojCiMgVGhpcyBwcm9ncmFtIGlz
IGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkK
IyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNl
IGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhl
ciB2ZXJzaW9uIDIsIG9yIChhdCB5b3VyIG9wdGlvbikKIyBhbnkgbGF0ZXIgdmVyc2lvbi4K
IwojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdp
bGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVu
IHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1Mg
Rk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1Ymxp
YyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2
ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdp
dGggdGhpcyBwcm9ncmFtOyBzZWUgdGhlIGZpbGUgQ09QWUlORy4gIElmIG5vdCwgd3JpdGUg
dG8KIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCA1OSBUZW1wbGUgUGxhY2UgLSBT
dWl0ZSAzMzAsCiMgQm9zdG9uLCBNQSAwMjExMS0xMzA3LCBVU0EuCiMKCnN0eWxlICJTIGxh
bmd1YWdlIiBpcwp3cml0dGVuIGJ5ICJEaXJrIEVkZGVsYnVldHRlbCA8ZWRkQGRlYmlhbi5v
cmc+Igp2ZXJzaW9uIGlzIDAuMQpyZXF1aXJlcyBhMnBzIDQuMTMKCmRvY3VtZW50YXRpb24g
aXMKICJhMnBzLVMgUHJldHR5IFByaW50ZXIgVmVyc2lvbiAwLjEgYXMgb2YgMjUtSmFuLTIw
MDEiCiAiVGhpcyBzdHlsZSBzaGVldCBpcyBwcmVsaW1pbmFyeS4iCmVuZCBkb2N1bWVudGF0
aW9uCgphbHBoYWJldHMgYXJlCiAgICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2Rl
ZmdoaWprbG1ub3BxcnN0dXZ3eHl6ISQqKy0uLzw9Pj9AXyIKY2FzZSBzZW5zaXRpdmUKCiNr
ZXl3b3JkcyBpbiBLZXl3b3JkX3N0cm9uZyBhcmUKIyAgIGZ1bmN0aW9uLDwtLDw8LQojZW5k
IGtleXdvcmRzCgprZXl3b3JkcyBpbiBLZXl3b3JkIGFyZQogICBlbHNlLCBmb3IsIGZ1bmN0
aW9uLCBpZiwgImluIiwgcmVwZWF0LCBzd2l0Y2gsIHdoaWxlCmVuZCBrZXl3b3JkcwoKI29w
dGlvbmFsIG9wZXJhdG9ycyBhcmUKb3BlcmF0b3JzIGFyZQogICA8PiBcbmVxLAogICAhPSBc
bmVxLAogICA8PSBcbGVxLAogICA+PSBcZ2VxLAogICA9ICBcZXF1aXYsCiMgICA8LSBcbGVm
dGFycm93LAogICA8LSwKICAgPDwtLAogICAtPiwKICAgXwplbmQgb3BlcmF0b3JzCgpzZXF1
ZW5jZXMgYXJlCiAgICAiIyIgQ29tbWVudCwKICAgIEMtc3RyaW5nLAogICAgQy1jaGFyCmVu
ZCBzZXF1ZW5jZXMKCmVuZCBzdHlsZQo=

--oP8mQFO4PT
Content-Type: text/plain; charset=us-ascii
Content-Description: .signature
Content-Transfer-Encoding: 7bit



-- 
According to the latest figures, 43% of all statistics are totally worthless.

--oP8mQFO4PT--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From baron@cattell.psych.upenn.edu  Sun Jan 28 14:07:28 2001
From: baron@cattell.psych.upenn.edu (baron@cattell.psych.upenn.edu)
Date: Sun, 28 Jan 2001 15:07:28 +0100 (MET)
Subject: [Rd] variables in nls (PR#829)
Message-ID: <200101281407.PAA11919@pubhealth.ku.dk>

Full_Name: Jonathan Baron
Version: 1.2.1
OS: Linux
Submission from: (NULL) (151.197.202.231)


The following gives an error message:
> nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
Error in as.name(varName) : attempt to use zero-length variable name

The following runs fine:
> nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))

This happens even though doit.vm and doit[2,] are identical (and efft[])


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sun Jan 28 15:01:27 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun, 28 Jan 2001 16:01:27 +0100 (CET)
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: <200101281407.PAA11919@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>



On Sun, 28 Jan 2001 baron@cattell.psych.upenn.edu wrote:

> Full_Name: Jonathan Baron
> Version: 1.2.1
> OS: Linux
> Submission from: (NULL) (151.197.202.231)
> 
> 
> The following gives an error message:
> > nls(doit[2,] ~ 7/(1 + exp(a*efft[2,])),start=c(a=-.1))
> Error in as.name(varName) : attempt to use zero-length variable name
> 
> The following runs fine:
> > nls(doit.vm ~ 7/(1 + exp(a*efft.vm)),start=c(a=-.1))
> 
> This happens even though doit.vm and doit[2,] are identical (and efft[])
> 

Looks like a problem (?) with all.vars():

 temp <- matrix(1:4, 2)
 all.vars(temp ~ 3) # OK
[1] "temp"

 all.vars(temp[1, ] ~ 3) # Here is the problem. 
[1] "temp" ""

 all.vars(temp[1, TRUE] ~ 3) # works again
[1] "temp"


If this is expected (?), because of an implicitly given empty variable
name ([1, ThisOne]) for example, nls() has to be fixed:


Just insert after the lines
 
  varNames <- varNames[is.na(match(varNames, names(start),
        nomatch = NA))]

the line 

  varNames <- varNames[varNames != ""]



Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Jan 28 15:22:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Jan 2001 16:22:17 +0100
Subject: [Rd] variables in nls (PR#829)
In-Reply-To: Uwe Ligges's message of "Sun, 28 Jan 2001 16:01:27 +0100 (CET)"
References: <Pine.LNX.4.21.0101281543001.943-100000@rechenknecht.statistik.uni-dortmund.de>
Message-ID: <x2zogbzopi.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Looks like a problem (?) with all.vars():
> 
>  temp <- matrix(1:4, 2)
>  all.vars(temp ~ 3) # OK
> [1] "temp"
> 
>  all.vars(temp[1, ] ~ 3) # Here is the problem. 
> [1] "temp" ""
> 
>  all.vars(temp[1, TRUE] ~ 3) # works again
> [1] "temp"
> 
> 
> If this is expected (?), because of an implicitly given empty variable
> name ([1, ThisOne]) for example, nls() has to be fixed:
> 
> 
> Just insert after the lines
>  
>   varNames <- varNames[is.na(match(varNames, names(start),
>         nomatch = NA))]
> 
> the line 
> 
>   varNames <- varNames[varNames != ""]

Thanks for the workaround, Uwe. In the longer run it is probably
better to make all.vars skip empty variable names.
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@olsen.ch  Mon Jan 29 09:03:08 2001
From: adrian@olsen.ch (Adrian Trapletti)
Date: Mon, 29 Jan 2001 10:03:08 +0100
Subject: [Rd] Suggestion for an extension of the API
References: <Pine.GSO.4.31.0101262053500.24921-100000@auk.stats>
Message-ID: <3A7531CC.760EF67D@olsen.ch>

Prof Brian D Ripley wrote:

> On Fri, 26 Jan 2001, Adrian Trapletti wrote:
>
> > Dear R Developers (I think in particular Brian)
> >
> > Especially for larger optimization problems, it would be nice to have an
> > entry point for C/C++ code to the R optimizers (the ones which are called
> > when using optim()), where the client just has to provide the functions
> > fminfn() and fmingr() and calls directly, e.g., vmmin() (all from
> > $RHOME/src/main/optim.c). Are there any plans for providing such an entry
> > point?
>
> No, but there can be.  There are at least some problems with error-handling
> that need to be thought about.
>
> Is what you want essentially to make vmmin (...) a public entry point,
> avoiding having to deal with OptStruct's?  If that suffices, it would
> be easy.

No, my intention was to have a standard entry point from C/C++ to all of these
functions and, hence, give the package developers more flexibility. E.g., in
tseries I currently use for the garch() some fortran optimizer which directly
calls C functions for calculating the gradient and likelihood. arma from
tseries uses the optim function from R and uses the call back mechanism to
calculate the SSE. In these case, I would like to have the same solution for
both the arma and garch classes, ideally using the optimizers from R, but for
performance reasons without the indirection of back-calling R to calculate the
likelihood etc. (I know, I could use optif9, but it would be nicer if all
available optimizers could be used that way.)

For example, having something like

void
vmmin(int n0, double *b, double *Fmin, int maxit, int trace, int *mask,
      double abstol, double reltol, int nREPORT, OptStruct OS,
      int *fncount, int *grcount, int *fail,
      int (*fminfn)(int, double *, OptStruct),
      void (*fmingr)(int, double *, double *, OptStruct))

and so on

in R_ext/Applic.h (as for optif9) would probably be enough. Or as Doug (Thanks
Doug! see below) explained me, additionally introducing a pointer to a state
variable which brings information into the likelihood or gradient evaluation,
like in optif9.

> Douglas Bates wrote:
...
>     optif9(ntheta, ntheta, theta, (fcn_p) mixed_fcn, (fcn_p)
>            mixed_grad, (d2fcn_p) 0, st, typsiz, 1.0 /*fscale*/,
>            1 /*method*/,1 /*iexp*/, &msg, -1 /*ndigit*/, 50 /*itnlim*/,
>            iagflg, 0 /*iahflg*/, -1. /*dlt*/, pow(epsm, 1.0/3.0)
>            /*gradtl*/, 0. /*stepmx*/, sqrt(epsm) /*steptl*/, newtheta,
>            logLik, grad, &itrmcd, a, work, &itncnt);
>
> This is not the most transparent code but one point to note is that
> you can pass a pointer to a structure like "state" to the call to
> optif9 and it will be passed unmodified when calling the function or
> gradient evaluation.  Often it is very difficult to get information
> into the function and gradient evaluations and one has to resort to
> global identifiers, which is risky.  Being able to pass that pointer
> through is very convenient.  (We modified the code to do that.)  For
> C++ you could pass through a pointer to an instance of a class then
> invoke a class method through that pointer.

best
Adrian

--
Dr.  Adrian Trapletti,  Olsen  &  Associates Ltd.
Seefeldstrasse 233, CH-8008  Zürich,  Switzerland
Phone: +41 (1) 386 48 47   Fax: +41 (1) 422 22 82
E-mail: adrian@olsen.ch  WWW: http://www.olsen.ch



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:27:11 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:27:11 +0100 (MET)
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
Message-ID: <200101300527.GAA28423@pubhealth.ku.dk>


Hi.

While there is an x-axis set up for:
> plot.factor(factor(1:3))

this axis is not present for
> plot.factor(factor(1:3), col="red")

which actually should just be the same as the first plot and call
barplot(table(.)), shouldn't it?  Where did the ticks and labels go?

Note that
> barplot (table(factor(1:3)), col="red")
has the x-axis.

Something funky is going on with axisnames or args in plot.factor that
I can't figure out.  The situation can be remedied with
> plot.factor(factor(1:3), col="red", axes=TRUE)

alas, why do you need "axes=TRUE"?

Regards,
  -tom



Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> Thomas Vogels <tov@ece.cmu.edu> writes:
> 
> 
> > Now the (actually not so) funny thing is that the labels for the
> > x-axis disappear when I specify colors for the bars.  (R 1.2.1, Linux)
> > Ok, maybe the other thing I'll have to catch up on is the docu...
> 
> The logic around "axisnames" in plot.factor looks not quite right.
> Could you file a bug report on this so that we dont forget?
> 
> barplot(table(factor(1:3)),col="green")
> plot(factor(1:3),col="green",axes=T)
> 
> both work, although the latter is clearly silly.


--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Tue Jan 30 05:39:33 2001
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Tue, 30 Jan 2001 06:39:33 +0100 (MET)
Subject: [Rd] screen can't go back to (split) screen with log="y" plot (PR#831)
Message-ID: <200101300539.GAA28465@pubhealth.ku.dk>


Hi.  Let's try to explain the subject line with some code:

> split.screen (c(2,1))
[1] 1 2
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> screen (2)
> plot (1:2, 1:2, main="2")
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> close.screen(all=TRUE)

Let's add comments:

> split.screen (c(2,1))
[1] 1 2

OK, plot in the top half screen:
> screen(1)
> plot (1:2, 1:2, log="y", main="1")
> par("yaxp")
[1]  1  2 -5

OK, switch to bottom half:
> screen (2)
> plot (1:2, 1:2, main="2")
> par("yaxp")
[1] 1 2 5

OK, looks fine, let's go back up:
> screen (1)
Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".

Bummer.
> close.screen(all=TRUE)

Somehow I'm hoping you'll tell me I'm doing something wrong, because
I'd really would like to be able to do the following:
  repeat {
    #calculate
    screen(1)
    #fancy plot
    screen (2)
    #even fancier plot ;-)
    if (user.bored()) break
  }
Which is roughly what I was doing when the error messages started
popping up.

Thanks,
  -tom

--please do not edit the information below--

Version:
 platform = i386-pc-linux-gnu
 arch = i386
 os = linux-gnu
 system = i386, linux-gnu
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 07:40:51 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 08:40:51 +0100 (MET)
Subject: [Rd] screen can't go back to log="y" plot (PR#831)
Message-ID: <200101300740.IAA28911@pubhealth.ku.dk>

[I have abbreviated the subject as jitterbug has been having probems
with long subjects.]

The issue here is that one cannot mix log/non-log axes in the calls to
screen(), as the appropriate par() parameter is read-only, but the
meaning of yaxp depends on it.  But beyond that you can't set
x/yaxp for log axes.

You should be able to do this: you can in the S original.

A simpler version:

plot (1:2, 1:2, log="y", main="1")
zz <- par("yaxp")
zz
[1]  1  2 -5
par(yaxp=zz)
Error in par(yaxp = zz) : invalid value specified for graphics parameter
"yaxp".

So you can't reset the yaxp parameter to what it is reported as!


Additional bug: the meaning of x/yaxp for log axes is not defined
in help(par).


On Tue, 30 Jan 2001 tov@ece.cmu.edu wrote:

>
> Hi.  Let's try to explain the subject line with some code:
>
> > split.screen (c(2,1))
> [1] 1 2
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
> > close.screen(all=TRUE)
>
> Let's add comments:
>
> > split.screen (c(2,1))
> [1] 1 2
>
> OK, plot in the top half screen:
> > screen(1)
> > plot (1:2, 1:2, log="y", main="1")
> > par("yaxp")
> [1]  1  2 -5
>
> OK, switch to bottom half:
> > screen (2)
> > plot (1:2, 1:2, main="2")
> > par("yaxp")
> [1] 1 2 5
>
> OK, looks fine, let's go back up:
> > screen (1)
> Error in par(.split.screens[[n]]) : invalid value specified for graphics parameter "yaxp".
>
> Bummer.
> > close.screen(all=TRUE)
>
> Somehow I'm hoping you'll tell me I'm doing something wrong, because
> I'd really would like to be able to do the following:
>   repeat {
>     #calculate
>     screen(1)
>     #fancy plot
>     screen (2)
>     #even fancier plot ;-)
>     if (user.bored()) break
>   }
> Which is roughly what I was doing when the error messages started
> popping up.
>
> Thanks,
>   -tom
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-linux-gnu
>  arch = i386
>  os = linux-gnu
>  system = i386, linux-gnu
>  status =
>  major = 1
>  minor = 2.1
>  year = 2001
>  month = 01
>  day = 15
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dkwalker@online.no  Tue Jan 30 14:51:49 2001
From: dkwalker@online.no (David K Walker)
Date: Tue, 30 Jan 2001 14:51:49 +0000
Subject: [Rd] Is Omegahat in R a general language function bus ?
Message-ID: <3.0.6.32.20010130145149.00bd9810@online.no>

Hi !

Can we e.g. embed Perl in R and embed R in Java, start the program counter
in Java, call from Java to Perl via R, and then either (1) call back from
Perl to Java via R or (2) just plain return from Perl to Java via R ?
¨
My reason for asking this is general interest in extensible programming
languages.  My background is heavy in Forth, moderate in assembly language,
so far very light in Scheme, R, Java, Perl, XML, Python.  Later I hope to
implement new statistical software and port an existing large scale time
series database/editor/tablewriter as packages under Debian Gnu/Linux.

David Walker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuffield.oxford.ac.uk  Tue Jan 30 14:52:51 2001
From: david.firth@nuffield.oxford.ac.uk (david.firth@nuffield.oxford.ac.uk)
Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301452.PAA09308@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.1
OS: Windows NT4
Submission from: (NULL) (163.1.103.106)


Help file Rconsole.html as distributed with Windows binary distribution refers
at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
"R_USER".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Jan 30 15:25:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Jan 2001 16:25:41 +0100 (MET)
Subject: [Rd] Rconsole documentation (PR#832)
Message-ID: <200101301525.QAA09731@pubhealth.ku.dk>

Thanks.

A historical anomaly, now corrected.


> From: david.firth@nuffield.oxford.ac.uk
> Date: Tue, 30 Jan 2001 15:52:51 +0100 (MET)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Rconsole documentation (PR#832)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: David Firth
> Version: 1.2.1
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.106)
> 
> 
> Help file Rconsole.html as distributed with Windows binary distribution refers
> at various points to "R\_HOME" and "R\_USER".  These ought to be "R_HOME" and
> "R_USER".
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 15:32:30 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 16:32:30 +0100
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: tov@ece.cmu.edu's message of "Tue, 30 Jan 2001 06:27:11 +0100 (MET)"
References: <200101300527.GAA28423@pubhealth.ku.dk>
Message-ID: <x28znt5a41.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi.
> 
> While there is an x-axis set up for:
> > plot.factor(factor(1:3))
> 
> this axis is not present for
> > plot.factor(factor(1:3), col="red")
> 
> which actually should just be the same as the first plot and call
> barplot(table(.)), shouldn't it?  Where did the ticks and labels go?
> 
> Note that
> > barplot (table(factor(1:3)), col="red")
> has the x-axis.
> 
> Something funky is going on with axisnames or args in plot.factor that
> I can't figure out.  The situation can be remedied with
> > plot.factor(factor(1:3), col="red", axes=TRUE)
> 
> alas, why do you need "axes=TRUE"?

Because of the logic of

        axisnames <- if (length(dargs <- list(...)) > 0) {
            nam <- names(dargs)
            ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
                nam) && dargs$xaxt != "n"))
        }

gives FALSE if there are any "..." arguments, and neither of axes= and
xaxt= are given.

I think the first part of plot.factor wants to be 

     if (missing(y) || is.factor(y)) {
	dargs <- list(...)
        axisnames <- if (!is.null(dargs$axes)) dargs$axes
	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
            else TRUE
    }

Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Jan 30 15:54:44 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 30 Jan 2001 15:54:44 +0000 (GMT)
Subject: [Rd] New aperm
Message-ID: <Pine.GSO.4.20.0101301530280.503-100000@laplace>

Hi Guys -- I have re-written aperm (from R-1.1.1) and I was going to call
it Aperm and bundle it with my tensor library, as it uses strides (like in
Python).  But there might be some interest in including it in the base.  
It is about 6 times quicker:

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.09 0.11 5.20 0.00 0.00
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.89  0.15 33.04  0.00  0.00

[starting R]

> library(tensor)
> tmp <- array(1:prod(1:10), 1:10)
> system.time(aperm(tmp, c(3, 2, 1, 4:10)))
[1] 32.85  0.18 33.03  0.00  0.00
> system.time(Aperm(tmp, c(3, 2, 1, 4:10)))
[1] 5.03 0.18 5.21 0.00 0.00

While studying the original aperm code (R-1.1.1) I noticed an error: there
is a missing break after the final case in the TYPEOF(a) switch before the
default which means that if anyone did call aperm with an array of VECSXP
then it would not complete:

> tmp <- array(list(3), c(2, 3))
> tmp[[2, 3]] <- "fred"
> tmp
     [,1]        [,2]        [,3]         
[1,] "Numeric,1" "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1" "Character,1"
> aperm(tmp)
Error in aperm(a, perm, resize) : invalid argument
> Aperm(tmp)
     [,1]        [,2]         
[1,] "Numeric,1" "Numeric,1"  
[2,] "Numeric,1" "Numeric,1"  
[3,] "Numeric,1" "Character,1"

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wtautz@math.uwaterloo.ca  Tue Jan 30 16:31:31 2001
From: wtautz@math.uwaterloo.ca (Walter Tautz)
Date: Tue, 30 Jan 2001 11:31:31 -0500 (EST)
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
Message-ID: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>


In our situation we sometimes run netscape from a another platform via ssh
and so the machine netscape is running on may not contain any R software,
or more precisely the user home account on the machine running
netscape is different from the account they initiated R and
so having netscape look into there home directory will NOT work.

It would desirable to have easy way to specificy a documentation root which
is an actual URL. Is there a place I can specify such a documentation
root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
this has been updated?)

Failing the configuration approach, it would seem some kind
of patch to the file ./src/library/base/R/unix/help.start.R

would be necessary? Anyone have a suggestion? I wouldn't
mind learning a little about scheme (i think this is the language
the file is written in?)


-walter

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Jan 30 17:37:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Jan 2001 18:37:06 +0100
Subject: [Rd] would like to configure help.start() point to a http:// style url rather than ~/.R/doc etc (fwd)
In-Reply-To: Walter Tautz's message of "Tue, 30 Jan 2001 11:31:31 -0500 (EST)"
References: <Pine.SOL.3.96.1010130112605.16583C-100000@mfcf.math.uwaterloo.ca>
Message-ID: <x23de154cd.fsf@blueberry.kubism.ku.dk>

Walter Tautz <wtautz@math.uwaterloo.ca> writes:

> In our situation we sometimes run netscape from a another platform via ssh
> and so the machine netscape is running on may not contain any R software,
> or more precisely the user home account on the machine running
> netscape is different from the account they initiated R and
> so having netscape look into there home directory will NOT work.
> 
> It would desirable to have easy way to specificy a documentation root which
> is an actual URL. Is there a place I can specify such a documentation
> root in the configuration file? (NOTE. I am running 1.0.0 so perhaps
> this has been updated?)
> 
> Failing the configuration approach, it would seem some kind
> of patch to the file ./src/library/base/R/unix/help.start.R
> 
> would be necessary? Anyone have a suggestion? I wouldn't
> mind learning a little about scheme (i think this is the language
> the file is written in?)

Eh? help.start.R is written in R... However, since it's mostly
paste()ing together shell commands it may come across as something
from another language.

There's a remote= argument that you can pass to help.start [try
help.start(remote="http://stat.ethz.ch/R-alpha/")] , but it
doesn't solve the whole issue, e.g. a subsequent help(help) command
will cause a warning:

Using non-linked HTML file: style sheet and hyperlinks may be incorrect in: help(help) 

and proceed to try and get

file:/usr/local/lib/R/library/base/html/help.html

rather than something relative to the remote tree. 

I would seem that some of this stuff could do with a little redesign,
so suggestions are welcome. (The idea of having ~/.R is also
problematic if two R sessions for the same user both want to do
help.start())

Notice that using a remote documentation tree is going to lose you
some of the functionality that is normally present in the system: The
set of libraries available to a user may partly sit in his or her home
directory and the .lib.loc vector specifies which locations to search
for libraries. So it's not just a matter of specifying a document
root. 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stoet@pcg.wustl.edu  Tue Jan 30 22:26:41 2001
From: stoet@pcg.wustl.edu (stoet@pcg.wustl.edu)
Date: Tue, 30 Jan 2001 23:26:41 +0100 (MET)
Subject: [Rd] link in FAQ incorrect (PR#833)
Message-ID: <200101302226.XAA11875@pubhealth.ku.dk>

Hi,

the link to the R code for repeated measurement analyses of J Lindsey is
unfortunately not working. I am desperate for repeated measurements in
R; could you please help me out.

Sincerely,

Dr. G. Stoet

--
Dr. Gijsbert Stoet
email: stoet@thalamus.wustl.edu
Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
Phone: (314)7474095 Fax: (314)7474370




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Jan 31 01:24:25 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 30 Jan 2001 20:24:25 -0500
Subject: [Rd] FW: sas.get error
Message-ID: <5429125E11E4D411AF7300805FE603A80FE0F3@groexmbcr02.pfizer.com>

A couple of months ago, I asked Frank Harrell (fharrell@virginia.edu), the
author of the Hmisc S-Plus library, about the reason for his "No porting to
R" requirement.  I may have previously posted his reply, but I don't see it
in the archives, so I'll send it again.

This is a edited version of our email conversation:

 Gregory R. Warnes:  

	The license to the Hmisc library explicitly prohibits modifying the
      code to work with "R".  Why have you made this restriction?
 
 Frank E. Harrell, Jr.:  

     Some time ago an R user took it on himself to start converting my
     libraries to R without at least sending me an E-mail.  He started
     the conversion at a time just when I was making a good deal of
     error corrections and extensions to one of the libraries, so that
     the R version would be instantly out of date and buggy.  I thought
     this was strange and wanted to prevent such problems in the future.
 
     In the meantime I have been looking at R a good deal to see what
     would be involved in conversion.  I have found many more
     inconsistencies between R and S than I originally thought.  Some of
     these inconsistencies are because of improvements, some make the
     language worse (e.g., omission of single precision objects in R, the 
     inability to attach directories).  I estimate it will take me about 200

     hours of work to convert, even if I didn't mind losing single precision

     and Trellis graphics in R.  I'm not ruling out a conversion in the
future 
     but it will take some resources.

     If resources become available in the future I would be interested in 
     starting a CVS server to work will a good R programmer in this
endeavor.  
     Above all I do not want two code bases; version control is needed with
a 
     single code base.

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Jan 31 01:25:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 30 Jan 2001 20:25:53 -0500
Subject: [Rd] Disappearing x axis in plot.factor (PR#830)
In-Reply-To: Peter Dalgaard BSA's message of "30 Jan 2001 16:32:30 +0100"
References: <200101300527.GAA28423@pubhealth.ku.dk>
 <x28znt5a41.fsf@blueberry.kubism.ku.dk>
Message-ID: <px1ytkwlzy.fsf@infiniti.ece.cmu.edu>


Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> tov@ece.cmu.edu writes:

snip

> > Something funky is going on with axisnames or args in plot.factor that
> > I can't figure out.  The situation can be remedied with
> > > plot.factor(factor(1:3), col="red", axes=TRUE)
> > 
> > alas, why do you need "axes=TRUE"?
> 
> Because of the logic of
> 
>         axisnames <- if (length(dargs <- list(...)) > 0) {
>             nam <- names(dargs)
>             ((any("axes" == nam) && dargs$axes) || (any("xaxt" == 
>                 nam) && dargs$xaxt != "n"))
>         }
> 
> gives FALSE if there are any "..." arguments, and neither of axes= and
> xaxt= are given.
> 
> I think the first part of plot.factor wants to be 
> 
>      if (missing(y) || is.factor(y)) {
> 	dargs <- list(...)
>         axisnames <- if (!is.null(dargs$axes)) dargs$axes
> 	    else if (!is.null(dargs$xaxt)) dargs$xaxt != "n"
>             else TRUE
>     }
> 
> Anyone know better?


This works for me at least.  Thank you very much,

  -tom


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Wed Jan 31 07:31:52 2001
From: gb@stat.umu.se (gb)
Date: Wed, 31 Jan 2001 08:31:52 +0100 (CET)
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: <200101302226.XAA11875@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>

Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
in Netscape for some reason. Change back to
'alpha.luc/ac/be/~jlindsey/rcode.html'
and it works (at lest for me).

Göran

On Tue, 30 Jan 2001 stoet@pcg.wustl.edu wrote:

> Hi,
>
> the link to the R code for repeated measurement analyses of J Lindsey is
> unfortunately not working. I am desperate for repeated measurements in
> R; could you please help me out.
>
> Sincerely,
>
> Dr. G. Stoet
>
> --
> Dr. Gijsbert Stoet
> email: stoet@thalamus.wustl.edu
> Web:   http://eye-hand.wustl.edu/lab/people/stoet.html
> Phone: (314)7474095 Fax: (314)7474370
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
 Göran Broström                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Umeå University
 SE-90187 Umeå, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Jan 31 12:42:11 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jan 2001 13:42:11 +0100
Subject: [Rd] link in FAQ incorrect (PR#833)
In-Reply-To: gb's message of "Wed, 31 Jan 2001 08:31:52 +0100 (CET)"
References: <Pine.LNX.4.30.0101310828370.23448-100000@tal.stat.umu.se>
Message-ID: <x24ryflwpn.fsf@blueberry.kubism.ku.dk>

gb <gb@stat.umu.se> writes:

> Yes, some funny thing is going on; the address changes to 'www.luc.ac.be'
> in Netscape for some reason. Change back to
> 'alpha.luc/ac/be/~jlindsey/rcode.html'
> and it works (at lest for me).

[r-bugs snipped from recipients, Cc. to Jim]

You mean http://alpha.luc.ac.be/~jlindsey/rcode.html

The very strange thing is that after I had done it once, then the link
in the FAQ suddenly worked.



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

