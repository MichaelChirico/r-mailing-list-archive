From kjetilh@umsanet.edu.bo  Mon Apr  1 17:23:04 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:23:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011623.SAA05909@pubhealth.ku.dk>

(I sent this earlier, but it seems not to have come through, due to
problems witkh my system)


The following command from appendix A, "a sample session", isnt correct:

contour(x, y, fa, nint=15) 

when used R protests:

Warning message: 
parameter "nint" couldn't be set in high-level plot() function 


it should probably be nlevels, as used a few lines before. 

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Apr  1 17:24:23 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:24:23 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011624.SAA05923@pubhealth.ku.dk>

(I tried to send this earlier, but it doesnt seem to have come through,
due to 
problems on my system)

Hola:

Both cannot be correct:

> m <- matrix(1:4, 2)
> svd(m)
$d
[1] 5.4649857 0.3659662

$u
           [,1]       [,2]
[1,] -0.5760484 -0.8174156
[2,] -0.8174156  0.5760484

$v
           [,1]       [,2]
[1,] -0.4045536  0.9145143
[2,] -0.9145143 -0.4045536

> La.svd(m)
$d
[1] 1.126182e-301 4.226051e-314

$u
            [,1]         [,2]
[1,] 0.002112565  0.999997769
[2,] 0.999997769 -0.002112565

$vt
           [,1]        [,2]
[1,] 7.5449e-13  1.0000e+00
[2,] 1.0000e+00 -7.5449e-13

as m is an invertible matrix, the results of La.svd seems wrong.

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Apr  1 17:33:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 1 Apr 2002 08:33:28 -0800 (PST)
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204010831260.62530-100000@homer36.u.washington.edu>

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>

Yes it did. It's PR#1363, and it's fixed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  1 17:35:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 2002 18:35:09 +0200
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
References: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <x2sn6fqsw2.fsf@blueberry.kubism.ku.dk>

kjetilh@umsanet.edu.bo writes:

> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
> 
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
> 
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
> 
> as m is an invertible matrix, the results of La.svd seems wrong.
> 
> This is R1.4.1 on windows 98.

It is not happening in recent development versions on Linux.

And your previous report *did* come through:

    o   La.svd() was not coercing integer matrices. (PR#1363)

(Moved to Low-level-fixed, so a bit difficult to spot if you didn't
keep the PR#, I grant you...)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brower@bst.rochester.edu  Mon Apr  1 21:19:09 2002
From: brower@bst.rochester.edu (brower@bst.rochester.edu)
Date: Mon, 1 Apr 2002 22:19:09 +0200 (MET DST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
Message-ID: <200204012019.WAA06615@pubhealth.ku.dk>

Full_Name: Christine Brower
Version: 1.4.1
OS: Solaris 8
Submission from: (NULL) (128.151.148.205)


Configure options fails with following message:
./configure --with-f77
loading cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.8
loading site script ./config.site
loading build specific script ./config.site
checking for pwd... /usr/bin/pwd
checking whether builddir is srcdir... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/disk/d5/a/R,v1.4.1/R/tools/install-sh -c
checking for javac... /usr/bin/javac
checking for less... /usr/bin/less
checking for perl... /usr/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... /usr/ucc/bin/dvips
checking for tex... /usr/ucc/bin/tex
checking for latex... /usr/ucc/bin/latex
checking for makeindex... /usr/ucc/bin/makeindex
checking for pdftex... no
checking for pdflatex... no
configure: warning: you cannot build PDF versions of the R manuals
checking for makeinfo... /usr/ucc/bin/makeinfo
checking for unzip... /usr/bin/unzip
checking for zip... /usr/bin/zip
checking for Cygwin environment... no
checking for mingw32 environment... no
checking build system type... sparc-sun-solaris2.8
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for /usr/ccs/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
checking how to recognise dependant libraries... pass_all
checking for object suffix... o
checking for executable suffix... no
checking command to parse /usr/ccs/bin/nm -p output... ok
checking for dlfcn.h... yes
checking for ranlib... (cached) ranlib
checking for strip... strip
checking for objdir... .libs
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... 
checking if gcc supports -fno-rtti -fno-exceptions... yes
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking dynamic linker characteristics... solaris2.8 ld.so
checking if libtool supports shared libraries... yes
creating libtool
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for main in -lm... yes
defining F77 to be f77
checking whether the Fortran 77 compiler (f77  ) works... yes
checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... no
checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib 
-L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
/a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
checking whether f77 appends underscores... yes
checking whether f77 and gcc agree on int and double... yes
checking whether f77 and gcc agree on double complex... yes
checking whether f77 supports -c -o FILE.lo... no
checking for c++... c++
checking whether the C++ compiler (c++  ) works... no
configure: error: installation or configuration problem: C++ compiler cannot
create executables.
----------
config.log reads:
----------
configure:7263: checking whether f77 supports -c -o FILE.lo
configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
f77: Suffix mismatch between -o and produced file (should produce .o)
configure:7565: checking for c++
configure:7597: checking whether the C++ compiler (c++  ) works
configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
-L/usr/local/lib 1>&5
ld: fatal: library -lstdc++: not found
ld: fatal: File processing errors. No output written to conftest
configure: failed program was:

#line 7608 "configure"
#include "confdefs.h"

int main(){return(0);}

------------
I have installed gcc 2.95.3, it didn't seem to help. 
Any thoughts, tricks or help would be greatly appreciated!  Thank you!

Chris

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 21:25:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:25:07 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204012025.WAA06636@pubhealth.ku.dk>

R 1.4.1, Linux and Windows

for(i in 1:1000) {
    X <- rnorm(i)
    XX <- fft(fft(X), inverse=T)/i
    if(max(Mod(XX-X)) > 1e-10) print(i)
}

[1] 392
[1] 588
[1] 968
[1] 980

and I then get a segfault during gc().  The answers are way off, with
imaginary parts 1e10 or more.

These numbers are all multiples of 7^2 or 11^2.

(Based on a report to R-help
Date: Thu, 28 Mar 2002 09:37:34 +0100
From: Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr>
)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:33:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:33:21 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011633.SAA05959@pubhealth.ku.dk>

Already sent, already corrected.


On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>
> Hola:
>
> Both cannot be correct:
>
> > m <- matrix(1:4, 2)
> > svd(m)
> $d
> [1] 5.4649857 0.3659662
>
> $u
>            [,1]       [,2]
> [1,] -0.5760484 -0.8174156
> [2,] -0.8174156  0.5760484
>
> $v
>            [,1]       [,2]
> [1,] -0.4045536  0.9145143
> [2,] -0.9145143 -0.4045536
>
> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
>
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
>
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
>
> as m is an invertible matrix, the results of La.svd seems wrong.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:34:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:34:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011634.SAA05972@pubhealth.ku.dk>

Already sent, already corrected.

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I sent this earlier, but it seems not to have come through, due to
> problems witkh my system)
>
>
> The following command from appendix A, "a sample session", isnt correct:
>
> contour(x, y, fa, nint=15)
>
> when used R protests:
>
> Warning message:
> parameter "nint" couldn't be set in high-level plot() function
>
>
> it should probably be nlevels, as used a few lines before.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 22:29:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:29:49 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <200204012019.WAA06615@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>

Almost certainly your c++ is g++ installed in /usr/local, and
you don't have /usr/local/lib in your LD_LIBRARY_PATH.

In short
> checking whether the C++ compiler (c++  ) works... no

is correct, and that's not a problem with R but with your system.
First get a simple C++ program working.

If this is a current gcc (3.0.x), the same problem will occur with gcc
eventually in the build process (for libgcc.so).


On Mon, 1 Apr 2002 brower@bst.rochester.edu wrote:

> Full_Name: Christine Brower
> Version: 1.4.1
> OS: Solaris 8
> Submission from: (NULL) (128.151.148.205)
>
>
> Configure options fails with following message:
> ./configure --with-f77
> loading cache ./config.cache
> checking for a BSD compatible install... tools/install-sh -c
> checking whether build environment is sane... yes
> checking whether make sets ${MAKE}... yes
> checking for working aclocal... missing
> checking for working autoconf... missing
> checking for working automake... missing
> checking for working autoheader... missing
> checking for working makeinfo... found
> checking host system type... sparc-sun-solaris2.8
> loading site script ./config.site
> loading build specific script ./config.site
> checking for pwd... /usr/bin/pwd
> checking whether builddir is srcdir... yes
> checking for gcc... gcc
> checking whether the C compiler (gcc  ) works... yes
> checking whether the C compiler (gcc  ) is a cross-compiler... no
> checking whether we are using GNU C... yes
> checking whether gcc accepts -g... yes
> checking how to run the C preprocessor... gcc -E
> checking whether gcc needs -traditional... no
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking for mawk... no
> checking for gawk... no
> checking for nawk... nawk
> checking whether ln -s works... yes
> checking for ranlib... ranlib
> checking for bison... no
> checking for byacc... no
> checking for ar... ar
> checking whether echo can suppress newlines... yes
> configure: warning: redefining INSTALL to be
> /disk/d5/a/R,v1.4.1/R/tools/install-sh -c
> checking for javac... /usr/bin/javac
> checking for less... /usr/bin/less
> checking for perl... /usr/bin/perl
> checking whether perl version is at least 5.004... yes
> checking for dvips... /usr/ucc/bin/dvips
> checking for tex... /usr/ucc/bin/tex
> checking for latex... /usr/ucc/bin/latex
> checking for makeindex... /usr/ucc/bin/makeindex
> checking for pdftex... no
> checking for pdflatex... no
> configure: warning: you cannot build PDF versions of the R manuals
> checking for makeinfo... /usr/ucc/bin/makeinfo
> checking for unzip... /usr/bin/unzip
> checking for zip... /usr/bin/zip
> checking for Cygwin environment... no
> checking for mingw32 environment... no
> checking build system type... sparc-sun-solaris2.8
> checking for ld used by GCC... /usr/ccs/bin/ld
> checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
> checking for /usr/ccs/bin/ld option to reload object files... -r
> checking for BSD-compatible nm... /usr/ccs/bin/nm -p
> checking how to recognise dependant libraries... pass_all
> checking for object suffix... o
> checking for executable suffix... no
> checking command to parse /usr/ccs/bin/nm -p output... ok
> checking for dlfcn.h... yes
> checking for ranlib... (cached) ranlib
> checking for strip... strip
> checking for objdir... .libs
> checking for gcc option to produce PIC... -fPIC
> checking if gcc PIC flag -fPIC works... yes
> checking if gcc static flag -static works... yes
> checking if gcc supports -c -o file.o... yes
> checking if gcc supports -c -o file.lo...
> checking if gcc supports -fno-rtti -fno-exceptions... yes
> checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> checking dynamic linker characteristics... solaris2.8 ld.so
> checking if libtool supports shared libraries... yes
> creating libtool
> checking whether makeinfo version is at least 4... no
> configure: warning: you cannot build info versions of the R manuals
> checking for main in -lm... yes
> defining F77 to be f77
> checking whether the Fortran 77 compiler (f77  ) works... yes
> checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
> checking whether we are using GNU Fortran 77... no
> checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib
> -L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
> /a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
> checking whether f77 appends underscores... yes
> checking whether f77 and gcc agree on int and double... yes
> checking whether f77 and gcc agree on double complex... yes
> checking whether f77 supports -c -o FILE.lo... no
> checking for c++... c++
> checking whether the C++ compiler (c++  ) works... no
> configure: error: installation or configuration problem: C++ compiler cannot
> create executables.
> ----------
> config.log reads:
> ----------
> configure:7263: checking whether f77 supports -c -o FILE.lo
> configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
> f77: Suffix mismatch between -o and produced file (should produce .o)
> configure:7565: checking for c++
> configure:7597: checking whether the C++ compiler (c++  ) works
> configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
> -L/usr/local/lib 1>&5
> ld: fatal: library -lstdc++: not found
> ld: fatal: File processing errors. No output written to conftest
> configure: failed program was:
>
> #line 7608 "configure"
> #include "confdefs.h"
>
> int main(){return(0);}
>
> ------------
> I have installed gcc 2.95.3, it didn't seem to help.
> Any thoughts, tricks or help would be greatly appreciated!  Thank you!
>
> Chris
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Tue Apr  2 09:38:07 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 10:38:07 +0200
Subject: [Rd] Finding code (was: [R] A request)
In-Reply-To: <3CA96648.77B42E5B@statistik.uni-dortmund.de>
References: <MABBJPBLPNLDIFMIAAOJMEAKCFAA.indra_calisto@yahoo.com> <200204020736.g327asg06139@wn1.sci.kun.nl> <3CA96648.77B42E5B@statistik.uni-dortmund.de>
Message-ID: <200204020838.g328c8g23867@wn1.sci.kun.nl>

On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> "E.L. Willighagen" wrote:
> > On Tuesday 02 April 2002 09:27, Uwe Ligges wrote:
> > > Indrajit SenGupta wrote:
> > > > Can we expect to see an R package on Statistical Quality Control in
> > > > the future like SPLUS? I can't understand why nobody made this
> > > > package before.
> > >
> > > Nice to hear you would like to contribute!
> > > Thank you!
> >
> > Rather often, I get the feeling that the developer are feeling
> > underappreciated? Don't.
>
> After first thoughts about ignoring your message: No, I don't feel
> underappreciated. 

<snip>

> R provides the tools for easily documenting and packaging functions.

Interesting point, because I am working on a library with the same issues:
how to make stuff easy to find... R offers keywords, aliases and full-text 
search. But that is all, right? 

And these only work for installed packages (i.e. those within the search 
path...) And (just tested), full-text search does not include searching 
references or descriptions, right (i.e. \description{} and \reference{})? 

For example,
> help.search("Dongarra")
No help files found with alias or title matching `Dongarra'

Dongarra is author from article in svd().

Did I miss some crucial functionality of help() and help.search()? Why can 
only keywords and aliasses be searched?

To return to Indrajit's question: there must be several other packages with 
which one can do statistical quality control, or at least with some minor 
extensions... But he seems not be able to find them. Ofcourse, that could be
imcompetence, but even then... should R be only used by experts, and not
by novice? In other words, is there a reason why R does not have more 
extensive search methods that can be used by novice to get to know R in such 
depth that the do not have to bug the R-help@ mailling list?

Egon



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From egonw@sci.kun.nl  Tue Apr  2 10:44:37 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 11:44:37 +0200
Subject: [Rd] Re: Finding code (was: [R] A request)
In-Reply-To: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
References: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
Message-ID: <200204020944.g329icg14503@wn1.sci.kun.nl>

On Tuesday 02 April 2002 12:25, ripley@stats.ox.ac.uk wrote:
> On Tue, 2 Apr 2002, E.L. Willighagen wrote:
> > On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> > > "E.L. Willighagen" wrote:
> > > R provides the tools for easily documenting and packaging functions.
> >
> > Interesting point, because I am working on a library with the same
> > issues: how to make stuff easy to find... R offers keywords, aliases and
> > full-text search. But that is all, right?
> >
> > And these only work for installed packages (i.e. those within the search
> > path...) And (just tested), full-text search does not include searching
> > references or descriptions, right (i.e. \description{} and \reference{})?
> >
> > For example,
> >
> > > help.search("Dongarra")
> >
> > No help files found with alias or title matching `Dongarra'
> >
> > Dongarra is author from article in svd().
> >
> > Did I miss some crucial functionality of help() and help.search()? Why
> > can only keywords and aliasses be searched?
> >
> > To return to Indrajit's question: there must be several other packages
> > with which one can do statistical quality control, or at least with some
> > minor extensions... But he seems not be able to find them. Ofcourse, that
> > could be
>
> Must there?  Why do you assert that?  As far as I am aware, there are
> no such packages, and I have tested/ported all those on CRAN.

Aren't there methods to calculated means and variances? Did I misunderstood 
that those can be used in Shewart charts? Ofcourse, things might need 
extensions, like a chart plotter...
I have not tested all CRAN modules, but I would have a too positive 
impression about R... 

> > imcompetence, but even then... should R be only used by experts, and not
> > by novice? In other words, is there a reason why R does not have more
> > extensive search methods that can be used by novice to get to know R in
> > such depth that the do not have to bug the R-help@ mailling list?
>
> Because R is a volunteer project, and no one has (AFAIK) contributed such
> methods. It seems that for them to be really useful approximate matching
> is needed.
>
> I do think you have a fundamental misconception of a project such as R.
> The developers wrote R for their own purposes, which include a vehicle for
> teaching statistics and to promulgate their favourite statistical methods.
> They made what they did freely available.  What we do not do is provide
> facilities on demand, from you or anyone else.

That is why I cross-posted this message to r-devel. Is there interest in such 
functionality? At least I am interested, even in coding this extra 
functionality, but before doing so, I thought it would be nice to discuss 
this on the developers list...

> Please do not reply to this message, publicly or otherwise.

Not that I would like to have the last word, or want to offend you, but I 
already wrote my answer before reading this line...

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From r-devel@stat.math.ethz.ch  Wed Apr  3 09:16:37 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:16:37 -0600
Subject: [Rd] Building R-1.4 on Tru64
In-Reply-To: <3C329C33.11D295F0@csiro.au>; from Richard.Beare@csiro.au on Wed, Jan 02, 2002 at 04:35:47PM +1100
References: <3C329C33.11D295F0@csiro.au>
Message-ID: <20020403021637.D29964@oolong.il.thewrittenword.com>

On Wed, Jan 02, 2002 at 04:35:47PM +1100, Richard Beare wrote:
> Hello everyone,
> 
> I've just attempted to build R-1.4 on Compaq Tru64 (I'll enclose the
> text from bug.report() from R-1.3.1 at the end.) The relevant part of
> the log is below.
> 
> Any ideas?
> 
> gcc -shared  -o methods.so do_substitute_direct.o
> methods_list_dispatch.o method_meta_data.o slot.o   -L/usr/local/lib  
> /usr/ucb/ld:
> Warning: Unresolved:
> ...

Try:
  $ gcc -shared -Wl,-expect_unresolved,"*" -o methods.so \
  do_substitute_direct.o methods_list_dispatch.o \
  method_meta_data.o slot.o -L/usr/local/lib  

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r-devel@stat.math.ethz.ch  Wed Apr  3 09:18:34 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:18:34 -0600
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Mon, Apr 01, 2002 at 10:29:49PM +0100
References: <200204012019.WAA06615@pubhealth.ku.dk> <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>
Message-ID: <20020403021834.E29964@oolong.il.thewrittenword.com>

On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> Almost certainly your c++ is g++ installed in /usr/local, and
> you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> 
> In short
> > checking whether the C++ compiler (c++  ) works... no
> 
> is correct, and that's not a problem with R but with your system.
> First get a simple C++ program working.
> 
> If this is a current gcc (3.0.x), the same problem will occur with gcc
> eventually in the build process (for libgcc.so).

Look at config.log and it'll give you more info as to why the above
failed.

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr  3 09:29:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Apr 2002 09:29:35 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <20020403021834.E29964@oolong.il.thewrittenword.com>
Message-ID: <Pine.LNX.4.31.0204030928330.9162-100000@gannet.stats>

On Wed, 3 Apr 2002, Albert Chin wrote:

> On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> > Almost certainly your c++ is g++ installed in /usr/local, and
> > you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> >
> > In short
> > > checking whether the C++ compiler (c++  ) works... no
> >
> > is correct, and that's not a problem with R but with your system.
> > First get a simple C++ program working.
> >
> > If this is a current gcc (3.0.x), the same problem will occur with gcc
> > eventually in the build process (for libgcc.so).
>
> Look at config.log and it'll give you more info as to why the above
> failed.

That was in the original posting, and it said -lstdc++ could not be found.

You've jumped into the middle of a thread!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Apr  3 12:09:40 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 3 Apr 2002 13:09:40 +0200 (MET DST)
Subject: [Rd] persp() crashes with numeric values for [x,y,z]lab (PR#1431)
Message-ID: <200204031109.NAA20177@pubhealth.ku.dk>

Using a numeric value for the arguments xlab, ylab or zlab in persp()
crashes R.
Example:

  persp(1:2, 1:2, matrix(1:4, 2), xlab=1)

Well, it is documented that "These must the character strings".
BTW: I think "the" should be changed to "be" in this sentence.

Nevertheless the worst case could be caught, however, e.g. by coercing
numeric to character.


Uwe Ligges

R-1.4.1 (on WinNT4 + Solaris 5.7) and 


platform i386-pc-mingw32             
arch     i386                        
os       mingw32                     
system   i386, mingw32               
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      02                          
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Wed Apr  3 13:51:04 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Wed, 3 Apr 2002 14:51:04 +0200 (MET DST)
Subject: [Rd] filled.contour(): no check when z dimension dismatch (PR#1432)
Message-ID: <200204031251.OAA21435@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.4.1
OS: Linux
Submission from: (NULL) (193.55.63.125)


`filled.contour()' doesn't complain if z matrix dimension doesn't match
x and y arguments. It would be safer if `filled.contour()' displays an
error (or a warning) message as `contour()' does.

For example :

   > x <- 1:3
   > z <- matrix(data=1:16, nrow=4, ncol=4)
   > filled.contour(x, x, z) # z is (4x4) whereas x is (1x3).
   ## no error/warning. 

   > contour(x, x, z)
   Error in contour(as.double(x), as.double(y), z, as.double(levels), labels,  :

         dimension mismatch
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 00:02:21 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 3 Apr 2002 18:02:21 -0500
Subject: [Rd] predict.Arima fails when x is not a time-series
Message-ID: <15531.35325.783406.290369@gargle.gargle.HOWL>

I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.
The following produces an error message because x is not of class "ts":
  R> x <- rnorm(20)
  R> obj <- arima(x, c(2,0,0))
  R> predict(obj)
     Error in round(x, digits) : Non-numeric argument to mathematical function

Granted the documentation for arima says x should be a time-series, but why not
accommodate simple vectors?  I think it would suffice to change this line:
  xtsp <- tsp(data)
in predict.Arima to this:
  xtsp <- tsp(hasTsp(data))

Also, a minor documentation typo: the help file for predict.Arima refers to the
function as "predict.arima" at one point.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 06:35:03 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 Apr 2002 06:35:03 +0100 (BST)
Subject: [Rd] Re: predict.Arima fails when x is not a time-series
In-Reply-To: <15531.35325.783406.290369@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.44.0204040634000.29459-100000@auk.stats>

On Wed, 3 Apr 2002, David Brahm wrote:

> I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.

That's quite old.

> The following produces an error message because x is not of class "ts":
>   R> x <- rnorm(20)
>   R> obj <- arima(x, c(2,0,0))
>   R> predict(obj)
>      Error in round(x, digits) : Non-numeric argument to mathematical function
>
> Granted the documentation for arima says x should be a time-series, but why not
> accommodate simple vectors?

Because it is not possible to specify the time base correctly when
predicting.

>  I think it would suffice to change this line:
>   xtsp <- tsp(data)
> in predict.Arima to this:
>   xtsp <- tsp(hasTsp(data))
>
> Also, a minor documentation typo: the help file for predict.Arima refers to the
> function as "predict.arima" at one point.

Not any more it doesn't.

> --
>                               -- David Brahm (brahm@alum.mit.edu)
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Thu Apr  4 13:36:01 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Thu, 4 Apr 2002 14:36:01 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041236.OAA29966@pubhealth.ku.dk>


Hi,

The help for `assign' says 
 
 In all the assignment operator expressions, `x' can be a name or
 an expression defining a part of an object to be replaced (e.g.,
 `z[[1]]').  The name does not need to be quoted, though it can be.

So I would expect that by
 a<-1:4
 assign("a[1]",2)   
the first component of a gets the value 2, but the object "a[1]" is 
created.
Could this be clarified in the documentation? 

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 13:57:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 13:57:26 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <200204041236.OAA29966@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>

On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:

> The help for `assign' says
>
>  In all the assignment operator expressions, `x' can be a name or
>  an expression defining a part of an object to be replaced (e.g.,
>  `z[[1]]').  The name does not need to be quoted, though it can be.
>
> So I would expect that by
>  a<-1:4
>  assign("a[1]",2)
> the first component of a gets the value 2, but the object "a[1]" is
> created.
> Could this be clarified in the documentation?

Could you suggest how?  You quoted an *expression*, and the page refers to
quoting a *name*, so I don't know that I see the crux here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 16:37:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 17:37:18 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
Message-ID: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> 
> > The help for `assign' says
> >
> >  In all the assignment operator expressions, `x' can be a name or
> >  an expression defining a part of an object to be replaced (e.g.,
> >  `z[[1]]').  The name does not need to be quoted, though it can be.
> >
> > So I would expect that by
> >  a<-1:4
> >  assign("a[1]",2)
> > the first component of a gets the value 2, but the object "a[1]" is
> > created.
> > Could this be clarified in the documentation?
> 
> Could you suggest how?  You quoted an *expression*, and the page refers to
> quoting a *name*, so I don't know that I see the crux here.

Actually, it *is* a name that is getting quoted, it just has these weird
bracket characters in it, so it is not "syntactically valid". 

One improvement might be: "the name can be any string of text and may
be quoted, but this is only necessary if it is not a syntactically
valid name."

We might also emphasize that "assignment operator expressions" does
not include assign(), only <-, <<-, and =. (And _ until we finally get
it killed...). On the other hand it is arguably clear enough already,
if read carefully. (For this reason alone, the posters remark is off
base, but he might have asked about "a[1]" <- 2.)

In assign(), `x' must be a character object. As in

> a <- "b"
> assign(a,2)
> a
[1] "b"
> b
[1] 2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:53:20 2002
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Thu, 4 Apr 2002 17:53:20 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041553.RAA01870@pubhealth.ku.dk>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:52:07 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 4 Apr 2002 10:52:07 -0500
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Apr 04, 2002 at 05:37:18PM +0200
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats> <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020404105207.X7028@jimmy.harvard.edu>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 16:55:04 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 4 Apr 2002 17:55:04 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204041555.RAA01892@pubhealth.ku.dk>

Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr> reported a bug in fft(), and
Brian D. Ripley <ripley@stats.ox.ac.uk> narrowed it down to specific values of
N (the data vector length).  For N <= 1000, BDR showed the failures occur at:
  N = 392 =  7^2 * 2^2 * 2
  N = 588 =  7^2 * 2^2 * 3
  N = 968 = 11^2 * 2^2 * 2
  N = 980 =  7^2 * 2^2 * 5

BDR's test is as follows:
  R> for (i in 1:1000) {
  R>   X <- rnorm(i)
  R>   XX <- fft(fft(X), inverse=T)/i
  R>   if(max(Mod(XX-X)) > 1e-10) print(i)
  R> }

In src/appl/fft.c, lines 820-822 set "maxf" in subroutine fft_factor.  "maxf"
is supposed to be the "maximum factor size", and the algorithm basically grabs
the last non-squared factor and the last squared factor (there are "kt" squared
factors):

  maxf = nfac[m_fac-kt-1];
  if (kt > 0)
    maxf = imax2(nfac[kt-1], maxf);

But the last squared factor (nfac[kt-1]) is not necessarily the largest, since
the squared factors are added to nfac in this order: 4, 3,5,7,..., 2 (see lines
769-791).  Thus I believe we need to add these two lines after line 822:

  if (kt > 1) maxf = imax2(nfac[kt-2], maxf);
  if (kt > 2) maxf = imax2(nfac[kt-3], maxf);

I don't know for sure that the second line is necessary (I saw no error for
N = 1152 = 4^2 * 3^2 * 2^2 * 2).  But I did rebuild R-devel (2002-04-03) with
these two lines added, and BDR's test ran without errors.  I submit this as the
bug fix for PR#1429.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:02:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 17:02:53 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041700030.24473-100000@gannet.stats>

I do think that the issues are clearer if the help pages are separated,
and I have separated them.  The crux seems to me to have been that too
many diverse concepts were on one help page.

I also noticed `-' is undocumented ... and left it so.


On 4 Apr 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> >
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> >
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
>
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid".
>
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
>
> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
>
> In assign(), `x' must be a character object. As in
>
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:15:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 18:15:36 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <20020404105207.X7028@jimmy.harvard.edu>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
 <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
 <20020404105207.X7028@jimmy.harvard.edu>
Message-ID: <x28z83phhz.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:18:10 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Apr 2002 18:18:10 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041618.SAA01995@pubhealth.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Apr  4 17:26:47 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 4 Apr 2002 18:26:47 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041626.SAA02030@pubhealth.ku.dk>


Just now I again had occasion to want nested describe lists in a
documentation file.  I found that the bug which I reported on 18
October, 2001 still persists.  I checked on the bug report at the R
web page, and found that the notes say ``Not a problem in R 1.4.0
(2001-12-08)''.

Well, it's still a problem for me --- using R 1.4.1.

(Details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R ).

I executed

	R CMD Rdconv -t=htlm foo.Rd > foo.html

where foo.Rd is the example documentation file that I submitted to
illustrate the bug.  On my system, the bug remains.  I.e. the nested
describes screw up.   The item in the outer describe list, just
before the inner describe list, (in the example ``fred'') gets
omitted, along with the first couple of items of the inner describe
list.  The third item of the inner describe list seems to get treated
as if it were an element of the outer list, and gets jumbled with a
bit of the ``fred'' item.

I enclose below the file foo.html that I got on my system.

Could you please check to see if the same thing happens when you run
the Rdconv command on your system?  I guess it's possible that
there's a local glitch here (e.g. something wrong with perl?) that
causes the screw-up.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

File foo.html:
==============

<html><head><title>R: Do nothing.</title>
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>


<h2>Do nothing.</h2>


<h3>Description</h3>

<p>
Do nothing, but do it <b>very</b> well!
</p>


<h3>Usage</h3>

<pre>
foo(gorp,par)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>gorp</code></td>
<td>
I don't know either.</td></tr>
<tr valign="top"><td><code>par</code></td>
<td>
Never you mind!</td></tr>
</table>

<h3>Details</h3>

<p>
The parameter list <code>par</code> should be
as follows, for each possible value of <code>gorp</code>:
<dl>
<dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
<i>(beta,gamma,r)</i> which are respectively
a load of dingos' kidneys, an elephant, and a duck.
Note that <i>gamma</i> must be totally ridiculuous.
</dd>


<dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
entries <i>(beta,gamma,r_0,r)</i> where
<i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
<code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
<i>r_0</i> must eat less than <i>r</i>.
</dd>


<dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
with components <i>(beta,sigma,kappa)</i>.
Again <i>beta</i> is a load of dingos' kidneys.
The difference between a duck is
</p><p align="center"><i>(sigma/kappa)^2</i></p><p>
Note that it is necessary that <i>kappa &gt; 42</i>.
</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
given as a list with components
</p>

<dl>
<dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
<dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
with <i>gamma_ij</i> pertaining to the kidneys of
dingo <i>i</i> and dingo <i>j</i>.</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd>
</dl></dd>
</dl>

<h3>Warnings</h3>

<p>
Even paranoids have real enemies.
</p>


<h3>Author(s)</h3>

<p>
Rolf Turner
<a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
<a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
</p>


<h3>References</h3>

<p>
Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
Memorial University Press, St. John's Nfld., 2001.
</p>
<p>
Ye-of-little-faith, O.  ``An annotated bibliography of green
peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
pp.  101 &#150; 64.
</p>


<h3>See Also</h3>

<p>
<code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
<code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
</p>


<h3>Examples</h3>

<pre>
   #Oh come on!  You can think up your own examples!
   </pre>



<hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>

</body></html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:38:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 18:38:32 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041638.SAA02068@pubhealth.ku.dk>

This was fixed yesterday as part of PR#1257, and I've just answered one Q
on R-help about it.  What I get on my system in html makes as little
sense as the foo.Rd, but no less.

Please try out the current R-devel.

On Thu, 4 Apr 2002 rolf@math.unb.ca wrote:

>
> Just now I again had occasion to want nested describe lists in a
> documentation file.  I found that the bug which I reported on 18
> October, 2001 still persists.  I checked on the bug report at the R
> web page, and found that the notes say ``Not a problem in R 1.4.0
> (2001-12-08)''.
>
> Well, it's still a problem for me --- using R 1.4.1.
>
> (Details:
>
> platform sparc-sun-solaris2.7
> arch     sparc
> os       solaris2.7
> system   sparc, solaris2.7
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R ).
>
> I executed
>
> 	R CMD Rdconv -t=htlm foo.Rd > foo.html
>
> where foo.Rd is the example documentation file that I submitted to
> illustrate the bug.  On my system, the bug remains.  I.e. the nested
> describes screw up.   The item in the outer describe list, just
> before the inner describe list, (in the example ``fred'') gets
> omitted, along with the first couple of items of the inner describe
> list.  The third item of the inner describe list seems to get treated
> as if it were an element of the outer list, and gets jumbled with a
> bit of the ``fred'' item.
>
> I enclose below the file foo.html that I got on my system.
>
> Could you please check to see if the same thing happens when you run
> the Rdconv command on your system?  I guess it's possible that
> there's a local glitch here (e.g. something wrong with perl?) that
> causes the screw-up.
>
> 					cheers,
>
> 						Rolf Turner
> 						rolf@math.unb.ca
>
> ===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
>
> File foo.html:
> ==============
>
> <html><head><title>R: Do nothing.</title>
> <link rel="stylesheet" type="text/css" href="../../R.css">
> </head><body>
>
>
> <h2>Do nothing.</h2>
>
>
> <h3>Description</h3>
>
> <p>
> Do nothing, but do it <b>very</b> well!
> </p>
>
>
> <h3>Usage</h3>
>
> <pre>
> foo(gorp,par)
> </pre>
>
>
> <h3>Arguments</h3>
>
> <table summary="R argblock">
> <tr valign="top"><td><code>gorp</code></td>
> <td>
> I don't know either.</td></tr>
> <tr valign="top"><td><code>par</code></td>
> <td>
> Never you mind!</td></tr>
> </table>
>
> <h3>Details</h3>
>
> <p>
> The parameter list <code>par</code> should be
> as follows, for each possible value of <code>gorp</code>:
> <dl>
> <dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
> <i>(beta,gamma,r)</i> which are respectively
> a load of dingos' kidneys, an elephant, and a duck.
> Note that <i>gamma</i> must be totally ridiculuous.
> </dd>
>
>
> <dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
> entries <i>(beta,gamma,r_0,r)</i> where
> <i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
> <code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
> <i>r_0</i> must eat less than <i>r</i>.
> </dd>
>
>
> <dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
> with components <i>(beta,sigma,kappa)</i>.
> Again <i>beta</i> is a load of dingos' kidneys.
> The difference between a duck is
> </p><p align="center"><i>(sigma/kappa)^2</i></p><p>
> Note that it is necessary that <i>kappa &gt; 42</i>.
> </dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
> given as a list with components
> </p>
>
> <dl>
> <dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
> <dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
> with <i>gamma_ij</i> pertaining to the kidneys of
> dingo <i>i</i> and dingo <i>j</i>.</dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd>
> </dl></dd>
> </dl>
>
> <h3>Warnings</h3>
>
> <p>
> Even paranoids have real enemies.
> </p>
>
>
> <h3>Author(s)</h3>
>
> <p>
> Rolf Turner
> <a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
> <a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
> </p>
>
>
> <h3>References</h3>
>
> <p>
> Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
> Memorial University Press, St. John's Nfld., 2001.
> </p>
> <p>
> Ye-of-little-faith, O.  ``An annotated bibliography of green
> peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
> pp.  101 &#150; 64.
> </p>
>
>
> <h3>See Also</h3>
>
> <p>
> <code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
> <code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
> </p>
>
>
> <h3>Examples</h3>
>
> <pre>
>    #Oh come on!  You can think up your own examples!
>    </pre>
>
>
>
> <hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>
>
> </body></html>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From feng@tu-cottbus.de  Fri Apr  5 09:41:08 2002
From: feng@tu-cottbus.de (feng@tu-cottbus.de)
Date: Fri, 5 Apr 2002 10:41:08 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050841.KAA05324@pubhealth.ku.dk>

Full_Name: Jinsheng Feng
Version: R141
OS: Linux and Windows2000
Submission from: (NULL) (141.43.226.235)


I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
following I have two resalts:
A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
Ai <- solve(A)
b <- c(2, 3)
x <- Ai%*%b

resalt under Windows
>x
      [,1]
[1,] -2.220446e-16
[2,]  1.000000e-00

resalt under Linux
>x
     [,1]
[1,] 1.110223e-16
[2,] 1.000000e-00


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 10:03:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 11:03:03 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050903.LAA05622@pubhealth.ku.dk>

It's called `rounding error'.  Please look it up in an introductory
numerical analysis textbook.

Please also read the section on `what is a bug' in the R FAQ, and if you
do report a genuine bug please try to use an informative subject line.

On Fri, 5 Apr 2002 feng@tu-cottbus.de wrote:

> Full_Name: Jinsheng Feng
> Version: R141
> OS: Linux and Windows2000
> Submission from: (NULL) (141.43.226.235)
>
>
> I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
> following I have two resalts:
> A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
> Ai <- solve(A)
> b <- c(2, 3)
> x <- Ai%*%b
>
> resalt under Windows
> >x
>       [,1]
> [1,] -2.220446e-16
> [2,]  1.000000e-00
>
> resalt under Linux
> >x
>      [,1]
> [1,] 1.110223e-16
> [2,] 1.000000e-00
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 12:35:17 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 12:35:17 +0100 (BST)
Subject: [Rd] Updating packages for the upcoming R 1.5.0
Message-ID: <Pine.LNX.4.31.0204051227180.10366-200000@gannet.stats>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/PLAIN; charset=US-ASCII

You probably know that R 1.5.0 goes into feature freeze on Monday and is
scheduled for release on April 29th.

There are a number of changes that affect packages: a few are actual
changes, many are stricter enforcement of the existing interface and some
are opportunities for (considerable) performance improvements.

We have placed a write-up `150update.txt' on
http://developer.r-project.org that we will continue to update as features
are added or we gain experience.  For your convenience, the current
version is attached.

A number of packages have already been updated, and you will find these in
the src/contrib/1.5.0 section on CRAN.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/plain; name="150update.txt"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.31.0204051235170.10366@gannet.stats>
Content-Description: 
Content-Disposition: attachment; filename="150update.txt"

VXBkYXRpbmcgcGFja2FnZXMgZm9yIDEuNS4wDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT0NCg0KUGFja2FnZSBtYWludGFpbmVycyBzaG91bGQgYmUg
YXdhcmUgb2YgdGhlIGZvbGxvd2luZyBjaGFuZ2VzIHRvIGFwcGVhcg0KaW4g
MS41LjAuICAgU29tZSBuZWNlc3NpdGF0ZSBjaGFuZ2VzIGluIG1hbnkgcGFj
a2FnZXMuDQoNClRoaXMgZG9jdW1lbnQgaXMgYHdvcmsgaW4gcHJvZ3Jlc3Mn
IHVudGlsIGZlYXR1cmUgZnJlZXplIGZvciAxLjUuMCBvbg0KQXByaWwgOHRo
Lg0KDQoNCk5BIHN0cmluZ3MNCi0tLS0tLS0tLS0NCg0KTWlzc2luZyB2YWx1
ZXMgaW4gc3RyaW5ncyBhcmUgaGFuZGxlZCBtdWNoIG1vcmUgY29uc2lzdGVu
dGx5LCBhbmQgYQ0KbG90IG9mIHNsb3BweSBjb2Rpbmcgd2lsbCBub3cgZmFp
bCAob3IgZ2l2ZSBkaWZmZXJlbnQgYW5zd2VycykuDQoNCi0gSWYgeW91IG1l
YW50ICJOQSIgdG8gaW5kaWNhdGUgdGhlIG1pc3NpbmcgdmFsdWUsIHVzZQ0K
ICBhcy5jaGFyYWN0ZXIoTkEpIChvciBqdXN0IE5BIHdoZXJlIGNvZXJjaW9u
IHdpbGwgb2NjdXIuKQ0KDQotIFRoZSB0ZXN0IHggPT0gIk5BIiBzaG91bGQg
YmUgcmV3cml0dGVuIGFzIGlzLm5hKHgpLg0KDQotIElmIG1pc3NpbmcgdmFs
dWVzIGNhbiBvY2N1ciwgZG8gbm90IHVzZSB4ID09ICJzb21lIHN0cmluZyIu
IA0KICBBIHN1aXRhYmxlIHJlcGxhY2VtZW50IGlzIHggJWluJSAic29tZSBz
dHJpbmciLg0KDQotIENvZGUgc3VjaCBhcyBhbGwobmFtZXMoeCkgPT0gYW5z
Lm5hbWVzKSkgKGZyb20gYXBwbHkpIHdpbGwgZmFpbCBpZg0KICBhbnkgbmFt
ZSBtaWdodCBiZSBtaXNzaW5nLiAgVXNlIGlkZW50aWNhbChuYW1lcyh4KSwg
YW5zLm5hbWVzKQ0KICBpbnN0ZWFkICh3aGljaCBpbmNpZGVudGFsbHkgaXMg
bW9yZSBlZmZpY2llbnQpLg0KDQpBbHRob3VnaCBhbGwgdGhlIGV4YW1wbGVz
IGhhdmUgdXNlZCA9PSwgdGhlIHNhbWUgY29uc2lkZXJhdGlvbnMgYXBwbHkg
dG8NCnRoZSBvdGhlciBsb2dpY2FsIG9wZXJhdG9ycyAhPSA8IDw9ID4gPj0u
DQoNClRoZSB3YXkgbWlzc2luZyBzdHJpbmdzIHByaW50IGhhcyBiZWVuIGFs
dGVyZWQsIHNvIHRlc3Qgb3V0cHV0IG1heQ0KbmVlZCB0byBiZSB1cGRhdGVk
Lg0KDQoNClNhdmluZyBkYXRhDQotLS0tLS0tLS0tLQ0KDQpUaGUgcmVjb21t
ZW5kZWQgd2F5IHRvIGRpc3RyaWJ1dGUgZGF0YSBoYXMgYmVlbiB2aWEgIC5y
ZGEgZmlsZXMNCm9idGFpbmVkIHdpdGggc2F2ZShhc2NpaT1UUlVFKS4gIEFz
IGZyb20gMS41LjAgd2UgY2FuIGFzc3VtZSB0aGF0DQpYRFIgbG9hZGluZyBh
bmQgY29tcHJlc3Npb24gYXJlIGF2YWlsYWJsZSBvbiBhbGwgcGxhdGZvcm1z
Lg0KDQpUaGUgZGVmYXVsdCBzYXZlIGZvcm1hdCB3YXMgY2hhbmdlZCBpbiAx
LjQuMC4gIFdlIG5vdyByZWNvbW1lbmQgdGhhdA0KZGF0YSBpcyBkaXN0cmli
dXRlZCBpbiB2ZXJzaW9uIDIgWERSIGZvcm1hdCBmaWxlcyAoYXMgZ2l2ZW4g
YnkNCnNhdmUoKSBpbiAxLjQuMCBvciBsYXRlciksICphbmQqIHRoYXQgbGFy
Z2UgZGF0YSBmaWxlcyBhcmUgZGlzdHJpYnV0ZWQNCmluIGNvbXByZXNzZWQg
Zm9ybWF0IChzYXZlKGNvbXByZXNzPVRSVUUpKS4NCg0KDQpCTEFTIGxpYnJh
cmllcw0KLS0tLS0tLS0tLS0tLS0NCg0KUiBjYW4gYmUgY29uZmlndXJlZCB0
byB1c2UgZWloZXIgYSBidWlsdC1pbiBzdWJzZXQgb2YgQkxBUyByb3V0aW5l
cyBvciBhbg0KZW5oYW5jZWQgQkxBUyBsaWJyYXJ5IHN1Y2ggYXMgQVRMQVMg
b3Igc3VucGVyZi4NCg0KQXMgZnJvbSAxLjUuMCB0aGUgc3Vic2V0IGhhcyBi
ZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgYWxsIHRoZSBCTEFTDQpyb3V0aW5l
cyBuZWVkZWQgZm9yIGRvdWJsZS1wcmVjaXNpb24gY2FsY3VsYXRpb25zLiAg
VG8gYWxsb3cgdGhvc2UNClIgaW5zdGFsbGF0aW9ucyB3aXRoIGFuIGVuaGFu
Y2VkIEJMQVMgdG8gYmVuZWZpdCBmcm9tIHRoZW0sIHdlIHVyZ2UNCnBhY2th
Z2UgbWFpbnRhaW5lcnMgKm5vdCogdG8gaW5jbHVkZSBjb3BpZXMgb2YgdGhl
IGluY2x1ZGVkIEJMQVMNCnJvdXRpbmVzIGluIHRoZWlyIHBhY2thZ2VzLg0K
DQpBbHNvLCBhbGwgcGFja2FnZXMgdGhhdCBtYWtlIHVzZSBvZiBCTEFTIHJv
dXRpbmVzIG11c3QgaW5jbHVkZSAkKEJMQVNfTElCUykNCmluIHNyYy9NYWtl
dmFycywgbW9zdCBzaW1wbHkgYXMgdGhlIGxpbmUNCg0KUEtHX0xJQlM9JChC
TEFTX0xJQlMpDQoNCklmIHBvc3NpYmxlLCB0ZXN0IHN1Y2ggcGFja2FnZXMg
Ym90aCB3aXRoIGFuZCB3aXRob3V0IGFuIGVuaGFuY2VkIEJMQVMNCmluIHVz
ZS4gIE5vdGUgdGhhdCB0aGUgQ1JBTiBjaGVja3MgYXJlIHJ1biBvbiBhIHN5
c3RlbSB3aXRob3V0IGFuDQplbmhhbmNlZCBCTEFTIGFuZCBzbyBkbyBub3Qg
Y2hlY2sgdGhpcyBwb2ludC4NCg0KDQpRQSBzdHJpY3RuZXNzDQotLS0tLS0t
LS0tLS0tDQoNClIgQ01EIGNoZWNrIGluIDEuNS4wIGlzIG1vcmUgc3RyaW5n
ZW50OiBpdCBub3cgYWxzbyBmYWlscyBvbiBtYWxmb3JtZWQNCidEZXBlbmRz
JyBhbmQgJ01haW50YWluZXInIGZpZWxkcyBpbiAnREVTQ1JJUFRJT04nIGZp
bGVzLCBhbmQgb24NCnVuYmFsYW5jZWQgYnJhY2VzIGluIFJkIGZpbGVzICh3
aGljaCBpbmRpY2F0ZSBSZCBzeW50YXggZXJyb3JzKS4NCg0KDQphcHBseSBz
cGVlZHVwcw0KLS0tLS0tLS0tLS0tLS0NCg0KRnVuY3Rpb25zIHJvd1N1bXMs
IGNvbFN1bXMsIHJvd01lYW5zIGFuZCBjb2xNZWFucyBwcm92aWRlIGNvbnNp
ZGVyYWJsZQ0KcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIG92ZXIgYXBwbHko
WCwgZiwgc3VtKSBldGMuDQoNCg0KQ2hhbmdlcyBpbiB0aGUgdGNsdGsgcGFj
a2FnZQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpBIG5ldyB0
Y2xPYmogY2xhc3MsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJuYWwgImR1YWwt
cG9ydGVkIiBvYmplY3QNCnN0cnVjdHVyZXMgaW4gdGhlIFRjbCBDIGludGVy
ZmFjZSwgaGFzIGJlZW4gaW50cm9kdWNlZC4NCg0KVGhlIHJldHVybiB2YWx1
ZSBmcm9tIG1hbnkgY29tbWFuZHMgaGFzIGJlZW4gY2hhbmdlZCB0byBiZSBh
biBvYmplY3QNCm9mIGNsYXNzIHRjbE9iai4gV2hlcmV2ZXIgeW91IGFyZSBj
dXJyZW50bHkgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSwNCnlvdSB3aWxsIG5l
ZWQgdG8gd3JhcCB0aGUgY2FsbCBpbiBhIHRjbHZhbHVlKCkgY29uc3RydWN0
IGluIG9yZGVyIHRvDQpnZXQgYXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlv
bi4gSG93ZXZlciwgbm90aWNlIHRoYXQgYXMuY2hhcmFjdGVyLA0KYXMuaW50
ZWdlciwgYW5kIGFzLmRvdWJsZSBjYW4gbm93IGV4dHJhY3QgdmVjdG9ycyBk
aXJlY3RseSBmcm9tIHRjbE9iag0Kb2JqZWN0cyBzbyB0aGF0IHBhcnNpbmcg
b2YgdGhlIFRjbCBzdHJpbmcgY2FuIGJlIGF2b2lkZWQgaW4gbWFueQ0KY2Fz
ZXMuDQoNCkFsc28gdGNsVmFyIG9iamVjdHMgY2FuIGJlIGFjY2Vzc2VzIGFz
IHRjbE9iaiBvYmplY3RzLiBUaGlzIHNob3VsZCBub3QNCmJyZWFrIGV4aXN0
aW5nIGNvZGUsIGJ1dCBpdCBhbGxvd3Mgc3Vic3RhbnRpYWwgc2ltcGxpZmlj
YXRpb24gaW4gdGhlDQpoYW5kbGluZyBvZiBlLmcuIGxpc3Rib3ggY29udGVu
dHMuDQoNCg==
--27492116-1041555239-1018006517=:10366--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 16:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 16:13:31 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <200202270816.JAA23941@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>

Berwin,

Thank you for this.

Unfortunately, although the analysis is mainly correct, but the solution
has almost as many problems as the current state.  Suppose pivoting
occurs. Then for the internal code, coef needs to contain zeroes at the
omitted cols. But you have

coef <- coefold <- start  # initialise coef here in order to
                          # be able to subset it below

so it will contain whatever start had for those cols.  Further, the test
        if (is.na(dev) || any(is.na(coef))) {
is followed by

                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)

which will ensure that if any NAs occur in coef, they will be propogated
through eta.

A related point is that you assume that coefold <- rep(0,nvars) is
a valid starting value to shrink towards, but that need not be the case.
I think one can only shrink towards the previous value after the first
iteration.  (Only if start is specified is the validity checked:
an initial etastart or mustart is normally not in the space of
possible values under the model.)

There seems to me no point to test if `start' is valid if it is going to
be unused (as it will be if a valid eta is specified), so I believe the
original test logic is the correct one, not the unravelled one.

There are clearly problems in the glm.fit code, but in the absence of a
bug that has actually bitten someone, it seems only worth changing if we
have a 100% watertight solution.  As I said to Brett Presnell, I believe
the time would be better spent re-writing glm ab initio.

Also, the code you submitted had all the comments removed, and so was much
harder to read than the code in glm.R, as well as being subtly
reformatted.

Brian


On Wed, 27 Feb 2002 berwin@maths.uwa.edu.au wrote:

> G'day all,
>
> I had a look at the GLM code of R (1.4.1) and I believe that there are
> problems with the function "glm.fit" that may bite in rare
> circumstances.  Note, I have no data set with which I ran into
> trouble.  This report is solely based on having a look at the code.
>
> Below I append a listing of the glm.fit function as produced by my
> system.  I have added line numbers so that I can easily refer to the
> code that is, in my opinion, problematic.  I also append a modified
> version that, hopefully, solves these problems.  At least on
> "example(glm)" both functions produce the same output (if the random
> number generator is set to the same seed).
>
> Short summary: I envisage problems with glm.fit if two conditions are
> met simultaneously.  Namely, (1) the design matrix is such that the QR
> algorithm used in the weighted least squares (WLS) step has to pivot
> columns (lines 81-86) and (2) during the iterations the step size has
> to be truncated (either lines 98-114 or lines 115-130).
>
> More details:
> In line 90, the variables "start" and "coef" are set to the
> coefficients of the WLS and "start" is then permuted (line 91) to take
> a possible pivoting of the QR algorithm into account.  Note that
> "coef" is not permutated.   Also, since the weights in the iterative
> weighted least squares algorithm change in each iteration (lines
> 60-139) it is theoretically possible that on some executions of this
> chunk pivoting occurs and on others there is no pivoting.
>
> Hoever, if the new coefficients are unsuitable and either the block at
> lines 98-114 or lines 115-130 is entered, then "start" is modified by
> shrinking it toward "coefold".  There are two problems:
> 1) If this happens the first time the loop in lines 60-139 is executed,
>    then coefold is initialised to the value of "start" that was passed
> down to the routine (line 58).  This might well be NULL (usually is?).
> In this case line 105 and line 122 would produce a new "start" which
> is numeric(0) and glm.fit would stop execution pretty soon thereafter.
> 2) If it happens during a later execution of the loop in lines 60-139,
>    then "coefold" was set to the value "coef" of the prior execution
> of the loop (line 137).  Depending on whether either of the code
> chunks at lines 98-114 or lines 115-130 have been executed on that
> previous occastion, "coefold" may or may not be permuted to the same
> order as "start" in this moment.  Hence, it could happen that "start"
> is shrunken towards something that doesn't make sense in line 105 or
> line 122.
>
> Relating to point 2) above.  Theoretically, during the main loop
> (lines 60-139) either of the chunks in lines 98-114 or lines 115-130
> could be entered.  In these chunks "coef" is set to the shrunken
> "start" at the end (line 111 or line 126).  If, with the ``deviance
> for the shrunken "start"'' the convergence criterion in line 131 is
> fulfilled, then the main loop would finish.  In other words, at line
> 140 there is no way to tell whether "coef" is in the order of
> "fit$coefficients" or has been permutated to have the same order as
> "start".  In the later case, the additional permutation in line 157
> would garble the solution.
>
> I hope that the revised version that I append below, works around all
> these potential problems without breaking anything.  As I said, I ran
> "example(glm)" with the revised version and got the same results.  But
> I guess you guys have far more exhaustive tests and may want to do
> some further test to ensure that nothing is broken.
>
> The revised version also makes some cosmetic changes that reflect my
> preferences :-) :
> 1) Given the default values of the parameters "weights" and "offset" I
>    was surprised about the tests in lines 17 and 19.  They seemed
> superfluous.  Until I noticed that "glm" can call "glm.fit" with
> actual arguments for these parameters that are NULL.  Hence, I suggest
> that the default values for these arguments should be NULL.  This
> makes it easier to understand the code of "glm.fit" (if one looks only
> at "glm.fit" and not at all the code "glm", "glm.fit" &c
> simultaneously).
> 2) As mentioned above, "coefold" may be initialised to NULL in line 58
>    if the parameter "start" is not specified.  (Which typically would be
> the case?)  But furthermore, in lines 44-53 the test for the parameter
> "start" is mangled into the test for the parameter "etastart".  If
> "etastart" is not specified but a bad "start" (not the correct
> length), the bad "start" would be caught.  But if a valid "etastart"
> is specified, then a bad "start" would not be caught since those tests
> are not executed.  (Are there users that specify both?).  Anyway, I
> have untangled those sanity check.  Also to get a clean initialisation
> for "coefold".
> 3) Given that the column names of fit$qr are (correctly) set in line
>    171, I didn't see the purpose of line 155.  That line anyhow sets
> the column names wrongly if pivoting has occured.  So I deleted that
> line.
>
> That's all for now.  Thanks for the great package and I hope that this
> bug report will be useful.
>
> Cheers,
>
>         Berwin
>
> ========================= original glm.fit =========================
>   1  glm.fit <-
>   2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL,
>   3      mustart = NULL, offset = rep(0, nobs), family = gaussian(),
>   4      control = glm.control(), intercept = TRUE)
>   5  {
>   6      x <- as.matrix(x)
>   7      xnames <- dimnames(x)[[2]]
>   8      ynames <- names(y)
>   9      conv <- FALSE
>  10      nobs <- NROW(y)
>  11      nvars <- NCOL(x)
>  12      if (nvars == 0) {
>  13          cc <- match.call()
>  14          cc[[1]] <- as.name("glm.fit.null")
>  15          return(eval(cc, parent.frame()))
>  16      }
>  17      if (is.null(weights))
>  18          weights <- rep(1, nobs)
>  19      if (is.null(offset))
>  20          offset <- rep(0, nobs)
>  21      variance <- family$variance
>  22      dev.resids <- family$dev.resids
>  23      aic <- family$aic
>  24      linkinv <- family$linkinv
>  25      mu.eta <- family$mu.eta
>  26      if (!is.function(variance) || !is.function(linkinv))
>  27          stop("illegal `family' argument")
>  28      valideta <- family$valideta
>  29      if (is.null(valideta))
>  30          valideta <- function(eta) TRUE
>  31      validmu <- family$validmu
>  32      if (is.null(validmu))
>  33          validmu <- function(mu) TRUE
>  34      if (is.null(mustart)) {
>  35          eval(family$initialize)
>  36      }
>  37      else {
>  38          mukeep <- mustart
>  39          eval(family$initialize)
>  40          mustart <- mukeep
>  41      }
>  42      if (NCOL(y) > 1)
>  43          stop("y must be univariate unless binomial")
>  44      eta <- if (!is.null(etastart) && valideta(etastart))
>  45          etastart
>  46      else if (!is.null(start))
>  47          if (length(start) != nvars)
>  48              stop(paste("Length of start should equal", nvars,
>  49                  "and correspond to initial coefs for", deparse(xnames)))
>  50          else as.vector(if (NCOL(x) == 1)
>  51              x * start
>  52          else x %*% start)
>  53      else family$linkfun(mustart)
>  54      mu <- linkinv(eta)
>  55      if (!(validmu(mu) && valideta(eta)))
>  56          stop("Can't find valid starting values: please specify some")
>  57      devold <- sum(dev.resids(y, mu, weights))
>  58      coefold <- start
>  59      boundary <- FALSE
>  60      for (iter in 1:control$maxit) {
>  61          good <- weights > 0
>  62          varmu <- variance(mu)[good]
>  63          if (any(is.na(varmu)))
>  64              stop("NAs in V(mu)")
>  65          if (any(varmu == 0))
>  66              stop("0s in V(mu)")
>  67          mu.eta.val <- mu.eta(eta)
>  68          if (any(is.na(mu.eta.val[good])))
>  69              stop("NAs in d(mu)/d(eta)")
>  70          good <- (weights > 0) & (mu.eta.val != 0)
>  71          if (all(!good)) {
>  72              conv <- FALSE
>  73              warning(paste("No observations informative at iteration",
>  74                  iter))
>  75              break
>  76          }
>  77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>  78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>  79          ngoodobs <- as.integer(nobs - sum(!good))
>  80          ncols <- as.integer(1)
>  81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>  82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>  83                  control$epsilon/1000), coefficients = numeric(nvars),
>  84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>  85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>  86              work = double(2 * nvars), PACKAGE = "base")
>  87          if (nobs < fit$rank)
>  88              stop(paste("X matrix has rank", fit$rank, "but only",
>  89                  nobs, "observations"))
>  90          start <- coef <- fit$coefficients
>  91          start[fit$pivot] <- coef
>  92          eta <- drop(x %*% start)
>  93          mu <- linkinv(eta <- eta + offset)
>  94          dev <- sum(dev.resids(y, mu, weights))
>  95          if (control$trace)
>  96              cat("Deviance =", dev, "Iterations -", iter, "\n")
>  97          boundary <- FALSE
>  98          if (is.na(dev) || any(is.na(coef))) {
>  99              warning("Step size truncated due to divergence")
> 100              ii <- 1
> 101              while ((is.na(dev) || any(is.na(start)))) {
> 102                  if (ii > control$maxit)
> 103                    stop("inner loop 1; can't correct step size")
> 104                  ii <- ii + 1
> 105                  start <- (start + coefold)/2
> 106                  eta <- drop(x %*% start)
> 107                  mu <- linkinv(eta <- eta + offset)
> 108                  dev <- sum(dev.resids(y, mu, weights))
> 109              }
> 110              boundary <- TRUE
> 111              coef <- start
> 112              if (control$trace)
> 113                  cat("New Deviance =", dev, "\n")
> 114          }
> 115          if (!(valideta(eta) && validmu(mu))) {
> 116              warning("Step size truncated: out of bounds.")
> 117              ii <- 1
> 118              while (!(valideta(eta) && validmu(mu))) {
> 119                  if (ii > control$maxit)
> 120                    stop("inner loop 2; can't correct step size")
> 121                  ii <- ii + 1
> 122                  start <- (start + coefold)/2
> 123                  mu <- linkinv(eta <- eta + offset)
> 124              }
> 125              boundary <- TRUE
> 126              coef <- start
> 127              dev <- sum(dev.resids(y, mu, weights))
> 128              if (control$trace)
> 129                  cat("New Deviance =", dev, "\n")
> 130          }
> 131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
> 132              conv <- TRUE
> 133              break
> 134          }
> 135          else {
> 136              devold <- dev
> 137              coefold <- coef
> 138          }
> 139      }
> 140      if (!conv)
> 141          warning("Algorithm did not converge")
> 142      if (boundary)
> 143          warning("Algorithm stopped at boundary value")
> 144      eps <- 10 * .Machine$double.eps
> 145      if (family$family == "binomial") {
> 146          if (any(mu > 1 - eps) || any(mu < eps))
> 147              warning("fitted probabilities numerically 0 or 1 occurred")
> 148      }
> 149      if (family$family == "poisson") {
> 150          if (any(mu < eps))
> 151              warning("fitted rates numerically 0 occurred")
> 152      }
> 153      if (fit$rank != nvars) {
> 154          coef[seq(fit$rank + 1, nvars)] <- NA
> 155          dimnames(fit$qr) <- list(NULL, xnames)
> 156      }
> 157      coef[fit$pivot] <- coef
> 158      xxnames <- xnames[fit$pivot]
> 159      residuals <- rep(NA, nobs)
> 160      residuals[good] <- z - (eta - offset)[good]
> 161      fit$qr <- as.matrix(fit$qr)
> 162      nr <- min(sum(good), nvars)
> 163      if (nr < nvars) {
> 164          Rmat <- diag(nvars)
> 165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
> 166      }
> 167      else Rmat <- fit$qr[1:nvars, 1:nvars]
> 168      Rmat <- as.matrix(Rmat)
> 169      Rmat[row(Rmat) > col(Rmat)] <- 0
> 170      names(coef) <- xnames
> 171      colnames(fit$qr) <- xxnames
> 172      dimnames(Rmat) <- list(xxnames, xxnames)
> 173      names(residuals) <- ynames
> 174      names(mu) <- ynames
> 175      names(eta) <- ynames
> 176      wt <- rep(0, nobs)
> 177      wt[good] <- w^2
> 178      names(wt) <- ynames
> 179      names(weights) <- ynames
> 180      names(y) <- ynames
> 181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
> 182          fit$rank))
> 183      wtdmu <- if (intercept)
> 184          sum(weights * y)/sum(weights)
> 185      else linkinv(offset)
> 186      nulldev <- sum(dev.resids(y, wtdmu, weights))
> 187      n.ok <- nobs - sum(weights == 0)
> 188      nulldf <- n.ok - as.integer(intercept)
> 189      resdf <- n.ok - fit$rank
> 190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
> 191      list(coefficients = coef, residuals = residuals, fitted.values = mu,
> 192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
> 193              "rank", "qraux", "pivot", "tol")], family = family,
> 194          linear.predictors = eta, deviance = dev, aic = aic.model,
> 195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
> 196          df.residual = resdf, df.null = nulldf, y = y, converged = conv,
> 197          boundary = boundary)
> 198  }
> ========================= modified glm.fit =========================
> glm.fit <-
> function (x, y, weights = NULL, start = NULL, etastart = NULL,
>     mustart = NULL, offset = NULL, family = gaussian(),
>     control = glm.control(), intercept = TRUE)
> {
>     x <- as.matrix(x)
>     xnames <- dimnames(x)[[2]]
>     ynames <- names(y)
>     conv <- FALSE
>     nobs <- NROW(y)
>     nvars <- NCOL(x)
>     if (nvars == 0) {
>         cc <- match.call()
>         cc[[1]] <- as.name("glm.fit.null")
>         return(eval(cc, parent.frame()))
>     }
>     if (is.null(weights))
>         weights <- rep(1, nobs)
>     if (is.null(offset))
>         offset <- rep(0, nobs)
>     variance <- family$variance
>     dev.resids <- family$dev.resids
>     aic <- family$aic
>     linkinv <- family$linkinv
>     mu.eta <- family$mu.eta
>     if (!is.function(variance) || !is.function(linkinv))
>         stop("illegal `family' argument")
>     valideta <- family$valideta
>     if (is.null(valideta))
>         valideta <- function(eta) TRUE
>     validmu <- family$validmu
>     if (is.null(validmu))
>         validmu <- function(mu) TRUE
>     if (is.null(mustart)) {
>         eval(family$initialize)
>     }
>     else {
>         mukeep <- mustart
>         eval(family$initialize)
>         mustart <- mukeep
>     }
>     if (NCOL(y) > 1)
>         stop("y must be univariate unless binomial")
>     if (!is.null(start)){
>       if (length(start) != nvars)
>         stop(paste("Length of start should equal", nvars,
>                    "and correspond to initial coefs for", deparse(xnames)))
>       coef <- coefold <- start  # initialise coef here in order to
>                                 # be able to subset it below
>     }
>     else
>       coef <- coefold <- rep(0,nvars)
>     eta <- if (!is.null(etastart) && valideta(etastart))
>       etastart
>     else if (!is.null(start))
>       as.vector(if (NCOL(x) == 1)
>                 x * start
>       else x %*% start)
>     else family$linkfun(mustart)
>     mu <- linkinv(eta)
>     if (!(validmu(mu) && valideta(eta)))
>         stop("Can't find valid starting values: please specify some")
>     devold <- sum(dev.resids(y, mu, weights))
>     boundary <- FALSE
>     for (iter in 1:control$maxit) {
>         good <- weights > 0
>         varmu <- variance(mu)[good]
>         if (any(is.na(varmu)))
>             stop("NAs in V(mu)")
>         if (any(varmu == 0))
>             stop("0s in V(mu)")
>         mu.eta.val <- mu.eta(eta)
>         if (any(is.na(mu.eta.val[good])))
>             stop("NAs in d(mu)/d(eta)")
>         good <- (weights > 0) & (mu.eta.val != 0)
>         if (all(!good)) {
>             conv <- FALSE
>             warning(paste("No observations informative at iteration",
>                 iter))
>             break
>         }
>         z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>         w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>         ngoodobs <- as.integer(nobs - sum(!good))
>         ncols <- as.integer(1)
>         fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>             p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>                 control$epsilon/1000), coefficients = numeric(nvars),
>             residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>             rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>             work = double(2 * nvars), PACKAGE = "base")
>         if (nobs < fit$rank)
>             stop(paste("X matrix has rank", fit$rank, "but only",
>                 nobs, "observations"))
>         coef[fit$pivot] <- fit$coefficients
>         eta <- drop(x %*% coef)
>         mu <- linkinv(eta <- eta + offset)
>         dev <- sum(dev.resids(y, mu, weights))
>         if (control$trace)
>             cat("Deviance =", dev, "Iterations -", iter, "\n")
>         boundary <- FALSE
>         if (is.na(dev) || any(is.na(coef))) {
>             warning("Step size truncated due to divergence")
>             ii <- 1
>             while ((is.na(dev) || any(is.na(coef)))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 1; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 eta <- drop(x %*% coef)
>                 mu <- linkinv(eta <- eta + offset)
>                 dev <- sum(dev.resids(y, mu, weights))
>             }
>             boundary <- TRUE
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (!(valideta(eta) && validmu(mu))) {
>             warning("Step size truncated: out of bounds.")
>             ii <- 1
>             while (!(valideta(eta) && validmu(mu))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 2; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 mu <- linkinv(eta <- eta + offset)
>             }
>             boundary <- TRUE
>             dev <- sum(dev.resids(y, mu, weights))
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
>             conv <- TRUE
>             break
>         }
>         else {
>             devold <- dev
>             coefold <- coef
>         }
>     }
>     if (!conv)
>         warning("Algorithm did not converge")
>     if (boundary)
>         warning("Algorithm stopped at boundary value")
>     eps <- 10 * .Machine$double.eps
>     if (family$family == "binomial") {
>         if (any(mu > 1 - eps) || any(mu < eps))
>             warning("fitted probabilities numerically 0 or 1 occurred")
>     }
>     if (family$family == "poisson") {
>         if (any(mu < eps))
>             warning("fitted rates numerically 0 occurred")
>     }
>     if (fit$rank != nvars) {
>         coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
>     }
>     xxnames <- xnames[fit$pivot]
>     residuals <- rep(NA, nobs)
>     residuals[good] <- z - (eta - offset)[good]
>     fit$qr <- as.matrix(fit$qr)
>     nr <- min(sum(good), nvars)
>     if (nr < nvars) {
>         Rmat <- diag(nvars)
>         Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
>     }
>     else Rmat <- fit$qr[1:nvars, 1:nvars]
>     Rmat <- as.matrix(Rmat)
>     Rmat[row(Rmat) > col(Rmat)] <- 0
>     names(coef) <- xnames
>     colnames(fit$qr) <- xxnames
>     dimnames(Rmat) <- list(xxnames, xxnames)
>     names(residuals) <- ynames
>     names(mu) <- ynames
>     names(eta) <- ynames
>     wt <- rep(0, nobs)
>     wt[good] <- w^2
>     names(wt) <- ynames
>     names(weights) <- ynames
>     names(y) <- ynames
>     names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
>         fit$rank))
>     wtdmu <- if (intercept)
>         sum(weights * y)/sum(weights)
>     else linkinv(offset)
>     nulldev <- sum(dev.resids(y, wtdmu, weights))
>     n.ok <- nobs - sum(weights == 0)
>     nulldf <- n.ok - as.integer(intercept)
>     resdf <- n.ok - fit$rank
>     aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
>     list(coefficients = coef, residuals = residuals, fitted.values = mu,
>         effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
>             "rank", "qraux", "pivot", "tol")], family = family,
>         linear.predictors = eta, deviance = dev, aic = aic.model,
>         null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
>         df.residual = resdf, df.null = nulldf, y = y, converged = conv,
>         boundary = boundary)
> }
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr  5 16:28:03 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 5 Apr 2002 17:28:03 +0200 (MET DST)
Subject: [Rd] [DOC] as.call (PR#1437)
Message-ID: <200204051528.RAA09753@pubhealth.ku.dk>


While I remember this:

The help page for call/as.call/is.call says

     It is not possible to coerce objects to mode call (objects either
     are calls or they are not calls).  `as.call' returns its argument
     if it is a call and otherwise terminates with an error message.

which actually has been untrue for quite a while, e.g.:

> cl<-as.call(c(ls, list("package:base", pattern="obj")))
> eval(cl)
[1] "is.object"    "objects"      "object.size"  "objWithClass"

Someone changed the code without editing the documentation. I know who
the guilty party is and will force him to rewrite the help entry in
due course...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 17:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 17:12:47 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204051700370.13566-100000@gannet.stats>

On Fri, 5 Apr 2002 ripley@stats.ox.ac.uk wrote:

> Berwin,
>
> Thank you for this.
>
> Unfortunately, although the analysis is mainly correct, but the solution
> has almost as many problems as the current state.  Suppose pivoting
> occurs. Then for the internal code, coef needs to contain zeroes at the
> omitted cols. But you have
>
> coef <- coefold <- start  # initialise coef here in order to
>                           # be able to subset it below
>
> so it will contain whatever start had for those cols.  Further, the test

Sorry, that's wrong as the innards of dqrls (which I have now read) will
do the zeroing.

[...]

However, there's more:

> >             while (!(valideta(eta) && validmu(mu))) {
> >                 if (ii > control$maxit)
> >                   stop("inner loop 2; can't correct step size")
> >                 ii <- ii + 1
> >                 coef <- (coef + coefold)/2
> >                 mu <- linkinv(eta <- eta + offset)
> >             }

How can that loop work?  eta is just incremented by the offset.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Apr  6 11:50:53 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 6 Apr 2002 12:50:53 +0200 (MET DST)
Subject: [Rd] file.info()$isdir is not TRUE (PR#1439)
Message-ID: <200204061050.MAA12036@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe / Solaris 8
Submission from: (NULL) (217.208.14.137)


R -vanilla

> info <- file.info("C:/Windows/regedit.exe")
> info$isdir
[1] FALSE
> info$isdir == FALSE
[1] TRUE

But:

> info <- file.info("C:/Windows")
> info$isdir
[1]TRUE           <<< Note the missing space!
> info$isdir == TRUE
[1] FALSE
> is.logical(info$isdir)
[1] TRUE
> as.logical(info$isdir) == TRUE
[1] FALSE
> as.logical(as.character(info$isdir)) == TRUE
[1] TRUE

I get the same behaviour on Solaris 8.

Best

Henrik Bengtsson



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 20:28:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 11:28:08 -0800
Subject: [Rd] packages in OS X
Message-ID: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>

=======================================================================
Simple CRAN packages which do not compile without modifications (all 
others do)
=======================================================================
     -- akima
/usr/bin/ld: multiple definitions of symbol _idlc_

     -- fracdiff
/usr/bin/ld: multiple definitions of symbol _gammfd_
(and others)

     -- odesolve

     -- princurve
    lamix:
Error on line 116: Declaration error for v: adjustable dimension on 
non-argument

    -- splancs
/usr/bin/ld: multiple definitions of symbol _bounds_

     -- wle
  mleaic:
Error on line 229: Declaration error for work: adjustable dimension on 
non-argument

   -- subselect
configure: error: R was configured without a FORTRAN compiler
ERROR: configuration failed for package `subselect'

The multiple defined symbols are a well known OS X problem. There are ad 
hoc fixes
using linker flags, but the best way to fix this is to use extern in the 
source code (although
almost all these packages use f2c to translate the fortran into c). The 
"adjustable dimension"
error is possibly an f2c problem. Ans subselect does not recognize f2c 
as a fortran
compiler.
=======================================================================
Complicated/interface  packages which compile (almost) out-of-the-box
=======================================================================
RPgSQL
RmSQL
RMySQL
gtk
RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
RSPerl
XML (this gives a multiple defined symbol for xmlParserError, which is
defined in Utils.c but also in libxml.dylib -- I commented out the 
routine
in Utils.c, but this may be a bit heavy handed).
Rpy
rpvm
RObjectTables
=======================================================================
CRAN packages I have not tried yet (because I don't have/use the things 
they interface to)
=======================================================================
RODBC
ROracle
RQuantlib
RSQLite
=======================================================================
CRAN packages which compile and install, but do not work

 > library("Matrix")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
         unable to load shared library 
"/sw/lib/R/library/Matrix/libs/Matrix.so":
   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
_ATL_cGetNB
_ATL_dGetNB
_ATL_sGetNB
_ATL_zGetNB
_cblas_dgemm
_cblas_dscal
_cblas_dswap
_cblas_dsyrk
_cblas_dtrsm
_cblas_idamax
_dsymv_
Error in library("Matrix") : .First.lib failed

If I use nm on Matrix.so, all these symbols are undefined.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 21:29:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 12:29:01 -0800
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <EE9135D6-499C-11D6-8D4F-000393860F3C@stat.ucla.edu>

I compiled and installed fracdiff, akima, splancs and odesolve by adding 
the
-m linker flag when foo.so is build.

I compiled and installed princurve and wle by removing nasty end-of-file
characters from some of the fortran sources

There are no solutions for the subselect and Matrix problems yet.

On Saturday, April 6, 2002, at 11:28 AM, Jan de Leeuw wrote:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>     -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_
>
>     -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)
>
>     -- odesolve
>
>     -- princurve
>    lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument
>
>    -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_
>
>     -- wle
>  mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument
>
>   -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'
>
> The multiple defined symbols are a well known OS X problem. There are 
> ad hoc fixes
> using linker flags, but the best way to fix this is to use extern in 
> the source code (although
> almost all these packages use f2c to translate the fortran into c). The 
> "adjustable dimension"
> error is possibly an f2c problem. Ans subselect does not recognize f2c 
> as a fortran
> compiler.
> =======================================================================
> Complicated/interface  packages which compile (almost) out-of-the-box
> =======================================================================
> RPgSQL
> RmSQL
> RMySQL
> gtk
> RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
> RSPerl
> XML (this gives a multiple defined symbol for xmlParserError, which is
> defined in Utils.c but also in libxml.dylib -- I commented out the 
> routine
> in Utils.c, but this may be a bit heavy handed).
> Rpy
> rpvm
> RObjectTables
> =======================================================================
> CRAN packages I have not tried yet (because I don't have/use the things 
> they interface to)
> =======================================================================
> RODBC
> ROracle
> RQuantlib
> RSQLite
> =======================================================================
> CRAN packages which compile and install, but do not work
>
> > library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed
>
> If I use nm on Matrix.so, all these symbols are undefined.
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sat Apr  6 23:09:19 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 7 Apr 2002 00:09:19 +0200
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
References: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <15535.29199.962752.731527@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>      -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_

>      -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)

>      -- odesolve

>      -- princurve
>     lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument

>     -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_

>      -- wle
>   mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument

>    -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'

> The multiple defined symbols are a well known OS X problem. There are
> ad hoc fixes using linker flags, but the best way to fix this is to
> use extern in the source code (although almost all these packages use
> f2c to translate the fortran into c). The "adjustable dimension" error
> is possibly an f2c problem. Ans subselect does not recognize f2c as a
> fortran compiler.

I recently added a shell script wrapper to compile/link FORTRAN 77 code
based on f2c, which for the purpose of Autoconf can be used as the
FORTRAN 77 compiler.  The configure script in subselect will need to be
modified to use R CMD config F77 (rather than grep/sed on etc/Makeconf)
for getting this.  But this will only make the configuration error go
away: the package will still not compile because the code, as wle and
princurve, use variable-sized arrays.  

> CRAN packages which compile and install, but do not work

>> library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>          unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>    dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed

> If I use nm on Matrix.so, all these symbols are undefined.

[I assume there are in your Atlas and cblas libs?  What does ldd on
Matrix.so say?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204070515.g375F4413033@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Apr  8 16:20:18 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Mon, 8 Apr 2002 17:20:18 +0200 (MET DST)
Subject: [Rd] Undocumenten in: R INSTALL --help (PR#1442)
Message-ID: <200204081520.RAA22543@pubhealth.ku.dk>


R version 1.4.1

In the documentation of INSTALL, these options are listed:

  --no-docs
  --no-text
  --no-html
  --no-latex

Only the first of these is mentioned if I run the command:

  R INSTALL --help

-- 
Peter Kleiweg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  8 20:26:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Apr 2002 21:26:14 +0200
Subject: [Rd] Feature freeze for R-1.5.0
Message-ID: <x2n0wevvop.fsf@blueberry.kubism.ku.dk>


OK, so the feature freeze for 1.5.0 is on as of now. Basically this
means that we will not add new features or API modifications before
the release on April 29.

The set of recommended packages will go into a similar feature freeze
one week from now, when the base package will enter a hard code freeze
(only critical bugs fixed), and a week further on, also the
recommended packages will go into code freeze and the whole thing will
have a final round of platform testing.

I.e. now is a bad time to complain about missing features, but it
might be a very good time to test your packages and scripts against
the new version and see whether they need to be changed and whether
they chase up any bugs. Notice that some of the changes in 1.5.0 have
known compatibility issues -- these are outlined in
http://developer.r-project.org/150update.txt .

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Apr  8 21:51:21 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 8 Apr 2002 15:51:21 -0500
Subject: [Rd] threaded libraries (e.g. ATLAS) not yet supported in 1.5
Message-ID: <20020408155121.A21265@nokomis.stat.umn.edu>

There was some discussion a while back about using threaded BLAS
libraries, such as a threaded version of ATLAS, with R.  While it is
possible to build R to use these libraries (if you get all the right
flags for your platform) there is a problem with signal handling, in
particular SIGINT, that we have not yet been able to resolve.
Hopefully we will be able to come up with a satisfactory resolution
for 1.6, but 1.5 does not have the infrastructure needed to adequately
support threaded libraries.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Tue Apr  9 04:35:37 2002
From: hammour@msn.com (hammour@msn.com)
Date: Tue, 9 Apr 2002 05:35:37 +0200 (MET DST)
Subject: [Rd] symbol  that stands for "cents" crashes R (PR#1444)
Message-ID: <200204090335.FAA24301@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.65.147)


I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
as follows:

plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
 ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")

R stops after the word "US" and the following error message appears:

"This program has performed an illegal operation and will be shut down.

RGUI caused an invalid page fault in
module MSVCRT.DLL at 0167:7801447b.
Registers:
EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b 
Stack dump:
0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"

If the symbol replaced by the word "cents", the plot executed without any
hassle.

Regards

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:15:25 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 9 Apr 2002 08:15:25 +0200 (MET DST)
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R ( (PR#1445)
Message-ID: <200204090615.IAA24696@pubhealth.ku.dk>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:16:20 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 Apr 2002 08:16:20 +0200
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R (
 PR#1444)
References: <200204090335.FAA24301@pubhealth.ku.dk>
Message-ID: <3CB28733.1ED74FCD@statistik.uni-dortmund.de>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Apr  9 08:07:48 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Apr 2002 09:07:48 +0200 (MET DST)
Subject: [Rd] match.arg confusion (PR#921)
Message-ID: <200204090707.JAA25096@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> [sys.function fails sometimes (sorry, our mail system
    PD> decide to throw away the original mail)]

    PD> Yes, I bumped into something similar recently. The
    PD> problem is that we only actually store the call in the
    PD> context structure, not the function, so sys.function has
    PD> to grab the call, take the 1st element, and reevaluate
    PD> it in the parent frame. It is quite easy to think up
    PD> examples where a second evaluation does not give the
    PD> same value as the first.

    PD> Your particular case is of a slightly different natur
    PD> and should be easily fixable by replacing findVar in
    PD> R_sysfunction by findVar1 and looking specifically for
    PD> objects of mode "function", but the basic problem
    PD> persists. I don't think I want to risk fixing this (and
    PD> maybe unfixing something else) for 1.2.3 tomorrow
    PD> though.

and Peter *did* implement the ``stop gap'' fix above for 1.5.0,
but the proper fix (for the more general problem) is still to be
done.

Martin

    JonR> From: J.C.Rougier@durham.ac.uk
    JonR> Date: Wed, 25 Apr 2001 13:23:09 +0200 (MET DST)
     ...

    JonR> This one may not strictly be a bug, and it was
    JonR> certainly my fault, but it took me a while to track it
    JonR> down and it is rather strange:
(it *is* bug)

     funOne <- function(x) { funTwo <- 1:10 ; funTwo(x) }

     funTwo <- function(v) 2*v

     funOne(5) # answer is 10 as expected

     # now a different definition for funTwo with a match.arg

     funTwo <- function(v, foo=c("small", "large")) { 
	       foo <- match.arg(foo); print(foo); 2*v }

     funOne(5) # answer is 10, but foo is NULL

    JonR> What happens is that in funOne I mask funTwo with a
    JonR> vector, but that doesn't matter as the call to funTwo
    JonR> specifies mode="function" (or something similar).  But
    JonR> what happens when funTwo includes a match.arg?  In
    JonR> this case match.arg fails, and the reason it fails is
    JonR> that sys.function(sys.parent()) in match.arg evaluates
    JonR> to 1:10.  If there is a bug here it is the failure of
    JonR> sys.function to grab a function, with the result that
    JonR> formal.args in match.fun is NULL.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Apr  9 23:52:50 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 00:52:50 +0200 (MET DST)
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
Message-ID: <200204092252.AAA02600@pubhealth.ku.dk>


In a package I've been developing for manipulating genetic data I discovered
a problem when indexing into character arrays using NA's:

Create a character matrix and a numeric matrix

	> cmat <- matrix( letters[1:4], ncol=2, nrow=2)
	> nmat <- matrix( 1:4, ncol=2, nrow=2)

Create an index vector containing an NA value

	> indvec <- c(1,2,NA)

Indexing works fine for both matrixes when we only pull off *one* column:

	> cmat[ indvec, 1 ]
	[1] "a"  "b"  "NA"
	> nmat[ indvec, 1 ]
	[1]  1  2 NA

	> cmat[ indvec, 2 ]
	[1] "c"  "d"  "NA"
	> nmat[ indvec, 2 ]
	[1]  3  4 NA

However, when we pull off both columns, we get "" where we should have NA
for cmat but it works properly for nmat:

	> cmat[ indvec,  ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  
	> nmat[ indvec,  ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA

	> cmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  

	> nmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA


The problem persists with other matrix sizes:

	> cmat <- matrix( letters[1:6], ncol=3, nrow=2)
	> nmat <- matrix( 1:6, ncol=3, nrow=2)
	> cmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,] "a"  "c"  "e" 
	[2,] "b"  "d"  "f" 
	[3,] "NA" ""   ""  
	> nmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,]    1    3    5
	[2,]    2    4    6
	[3,]   NA   NA   NA

Also we get a strange result if the only index is NA:

	> cmat[NA,]
	     [,1] [,2] [,3]
	[1,] "NA" ""   ""  
	[2,] "NA" ""   ""  
	> nmat[NA,]
	     [,1] [,2] [,3]
	[1,]   NA   NA   NA
	[2,]   NA   NA   NA

I would expect to get a single row for these cases rather than the whole
matrix replicated and (incorrectly for the cmat) filled with NA.

I'm reporting this now to get it in.  I'll download the 1.5.0  source code
now and muck about to see if I can locate the problem.  

-Greg

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R                   


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 10:08:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 11:08:32 +0200
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
In-Reply-To: <200204092252.AAA02600@pubhealth.ku.dk>
References: <200204092252.AAA02600@pubhealth.ku.dk>
Message-ID: <x2bscr9azz.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> In a package I've been developing for manipulating genetic data I discovered
> a problem when indexing into character arrays using NA's:

> 	> cmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,] "a"  "c" 
> 	[2,] "b"  "d" 
> 	[3,] "NA" ""  
> 	> nmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,]    1    3
> 	[2,]    2    4
> 	[3,]   NA   NA

This seems to have vanished in R-1.5.0pre, likely as a (fortunate, if
unexpected) side effect of the character NA changes:

> cmat[ indvec,  ]
     [,1] [,2]
[1,] "a"  "c" 
[2,] "b"  "d" 
[3,] NA   NA  
> nmat[ indvec,  ]
     [,1] [,2]
[1,]    1    3
[2,]    2    4
[3,]   NA   NA

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 11:06:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 12:06:02 +0200
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <x2u1qj7trp.fsf@blueberry.kubism.ku.dk>


There's a directory on CRAN containing the current snapshots of the
set of recommended packages. They will not be finaly feature-frozen
until Monday, but you might want to check them out anyway. 

If you have wget, the easiest way to get the complete set is probably

wget -r http://cran.r-project.org/src/contrib/1.5.0/Recommended

followed by

.../R CMD INSTALL cran.r-project.org/src/contrib/1.5.0/Recommended/*.tar.gz 

(Of course, you need a current snapshot of r-devel to do this).

Please report any errors that you find.

        -p
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From G.Innocent@vet.gla.ac.uk  Wed Apr 10 14:36:20 2002
From: G.Innocent@vet.gla.ac.uk (G.Innocent@vet.gla.ac.uk)
Date: Wed, 10 Apr 2002 15:36:20 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101336.PAA09300@pubhealth.ku.dk>

Dear bugs @r;

The following reproduces erroneous results on my system using R-gui:

platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R

#####################################################

inter.gp.effect <- 0.1

animals <- data.frame(pos = 0:2)

SI.model <- function(Animal.group) {

		group <- 1
		Animal.group$pos[group] <- Animal.group$pos[group] + 1
		effective.animals <- Animal.group$pos	# allows us to model inter-group
contact
#
			effective.animals[1:(length(Animal.group$pos)-1)] <-
				effective.animals[1:(length(Animal.group$pos)-1)] +
				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
##
			effective.animals[2:length(Animal.group$pos)] <-
				effective.animals[2:length(Animal.group$pos)]  +
				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
	return(Animal.group)
}

print(SI.model(animals))

####################################################

results:
> source("c:\\r work\\simulation model\\bug.R")
     pos
1 1.10
2 1.31
3 2.12

Expected results:
   pos
1    1
2    1
3    2

Notes:

1) The value for group can be anywhere on the interval 1:3, the results
differ, but are consistently incorrect.

2) If Animal.group is a vector, not a data frame the error does not occur.

3) Interestingly if SI.model is run through the debugger step by step, and
the value of Animal.group examined at the place marked in the code by a
single hash, then the correct result is obtained.  If the value of
Animal.group is examined at the place marked with a double hash, then the
following (incorrect) result is obtained:

exiting from: SI.model(animals)
  pos
1 1.1
2 1.2
3 2.0

4) Pre-defining expected.animals as either a data.frame, or
vector(model="numeric") does not alter the erroneous output

5) I would suggest that at both assignments to effective.animals, the result
is also being assigned to Animal.group$pos.  Examining the value assigned to
Animal.group at an appropriate place is forcing the interpreter to assign
into Animal.group correctly, and therefore fixing its value.

6) The above code appears to be the minimum of code required to reproduce
the results on my machine.

I have taken this problem as far as my limited debugging abilities allow.  I
am not a C or Fortran guru!

I would like to take this opportunity to thank those who have contributed to
the r project for a fine piece of software.

I hope that this bug report helps.  If I can be of further assistance then
let me know.

Thanks again

Giles

Dr. G.T. Innocent
Comparative Epidemiology and Informatics Group,
Dept. of Veterinary Clinical Studies,
Glasgow University Vet. School.
Bearsden Road, Glasgow G61 1QH
Tel. 0141 339 8855 Ext. 0531.
Fax. 0141 330 5729
e-mail G.Innocent@vet.gla.ac.uk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 14:59:53 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 15:59:53 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x2d6x77ixy.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> inter.gp.effect <- 0.1
> 
> animals <- data.frame(pos = 0:2)
> 
> SI.model <- function(Animal.group) {
> 
> 		group <- 1
> 		Animal.group$pos[group] <- Animal.group$pos[group] + 1
> 		effective.animals <- Animal.group$pos	# allows us to model inter-group
> contact
> #
> 			effective.animals[1:(length(Animal.group$pos)-1)] <-
> 				effective.animals[1:(length(Animal.group$pos)-1)] +
> 				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
> ##
> 			effective.animals[2:length(Animal.group$pos)] <-
> 				effective.animals[2:length(Animal.group$pos)]  +
> 				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
> 	return(Animal.group)
> }
> 
> print(SI.model(animals))
> 
> ####################################################
> 
> results:
> > source("c:\\r work\\simulation model\\bug.R")
>      pos
> 1 1.10
> 2 1.31
> 3 2.12
> 
> Expected results:
>    pos
> 1    1
> 2    1
> 3    2

Confirmed with 1.5.0pre. I'll have a look.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 15:27:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 16:27:00 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> 6) The above code appears to be the minimum of code required to reproduce
> the results on my machine.

You can do better than that:

> f
function(A) {
  A$p[1] <- 2
  E <- A$p 
  E[1:2] <- 0.1*A$p[2:3]
  return(A)
}
> x
  p
1 0
2 1
3 2
> f(x)
    p
1 0.1
2 0.2
3 2.0

Notice that the last line changing E is effectively changing A$p, so
something is up with our duplication-avoidance scheme. Luke?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 16:22:43 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 17:22:43 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101522.RAA09977@pubhealth.ku.dk>

In R-1.5.0pre (2002-04-08) on Solaris 2.6, the window that X11() creates has a
title like:

    R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

except the funny characters at the end have umlauts and other accents
(i.e. extended ASCII characters), and they may be different each time X11() is
invoked.  There is no loss of functionality; it just looks a little ugly.

I saw this behavior in R-1.3.?, it disappeared (along with the whole window
title) in R-1.4.1, and now it's back in R-1.5.0pre.

				-- David Brahm (brahm@alum.mit.edu)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 08
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Apr 10 16:47:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Apr 2002 17:47:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101547.RAA10066@pubhealth.ku.dk>


>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
    DavidB> window that X11() creates has a title like:

    DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

    DavidB> except the funny characters at the end have umlauts
    DavidB> and other accents (i.e. extended ASCII characters),
    DavidB> and they may be different each time X11() is
    DavidB> invoked.  There is no loss of functionality; it just
    DavidB> looks a little ugly.

This made me look at our Solaris (2.5.1 + tons of patches)
version of   R-1.5.0pre (2002-04-09).

There, X11()  {or  "plot(1)"}  opens a window very quickly and
then ends in a segmentation fault (see below).

Our automatic checking (unfortunately ?) nowadays excludes all
interactive features, including non-file graphical devices...

Yes, this will be investigated!
 
Here is my story (does anyone have a suggestion to get rid of
		  GDB's warning get better track of R_X11.so ?)


 % R -d gdb

 GDB is free software and you are welcome to distribute copies of it
  under certain conditions; type "show copying" to see the conditions.
 There is absolutely no warranty for GDB; type "show warranty" for details.
 GDB 4.16 (sparc-sun-solaris2.5.1), 
 Copyright 1996 Free Software Foundation, Inc...
 (gdb) r --vanilla
 Starting program: /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/bin/R.bin --vanilla
 warning: Unable to find dynamic linker breakpoint function.
 warning: GDB will be unable to debug shared library initializers
 warning: and track explicitly loaded dynamic code.

 R : Copyright 2002, The R Development Core Team
 Version 1.5.0 Under development (unstable) (2002-04-09)

    <.....>

 > x11()

 Program received signal SIGSEGV, Segmentation fault.
 0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 (gdb) bt
 #0  0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #1  0xef4bbb0c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #2  0xef4bd2a4 in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #3  0x92340 in Rf_addDevice (dd=0xb4bae8) at ../../../R/src/main/graphics.c:5630
 #4  0xfe91c in Rf_addX11Device (display=0x21a600 "\b", width=7, height=7, 
     ps=12, gamma=1, colormodel=4, maxcubesize=256, canvascolor=16777215, 
     devname=0x19edd8 "X11", deviceDriverRoutine=0xef4bd938 <_end+135424>)
     at ../../../R/src/unix/devices.c:326
 #5  0xfe7e4 in do_X11 (call=0x19edd8, op=0x2173e8, args=0xffffff, env=0xb47f34)
     at ../../../R/src/unix/devices.c:289
 #6  0xa39ec in do_internal (call=0x1b949c, op=0x19edd8, args=0xb47e1c, 
     env=0xb47f34) at ../../../R/src/main/names.c:1020
 #7  0x7ba3c in Rf_eval (e=0x9f1fa0, rho=0xb47f34)
     at ../../../R/src/main/eval.c:404
 #8  0x7be2c in Rf_applyClosure (call=0xb390f4, op=0x9f1ec0, arglist=0x1f9ea0, 
     rho=0x21ab78, suppliedenv=0x1f9ea0) at ../../../R/src/main/eval.c:595
 #9  0x7b824 in Rf_eval (e=0xb390f4, rho=0x21ab78)
     at ../../../R/src/main/eval.c:439
 #10 0x968b8 in R_ReplConsole (rho=0x21ab78, savestack=0, browselevel=0)
     at ../../../R/src/main/main.c:187
 #11 0x970d0 in run_Rmainloop () at ../../../R/src/main/main.c:499
 #12 0xff1bc in main (ac=0, av=0xefffe79c) at ../../../R/src/unix/system.c:93
 (gdb) 


    DavidB> I saw this behavior in R-1.3.?, it disappeared (along with the whole window
    DavidB> title) in R-1.4.1, and now it's back in R-1.5.0pre.

    DavidB> -- David Brahm (brahm@alum.mit.edu)


    DavidB> --please do not edit the information below--

    DavidB> Version:
    DavidB> platform = sparc-sun-solaris2.6
    DavidB> arch = sparc
    DavidB> os = solaris2.6
    DavidB> system = sparc, solaris2.6
    DavidB> status = Under development (unstable)
    DavidB> major = 1
    DavidB> minor = 5.0
    DavidB> year = 2002
    DavidB> month = 04
    DavidB> day = 08
    DavidB> language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 17:05:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 18:05:27 +0200
Subject: [Rd] Funny characters in x11 window title (PR#1451)
In-Reply-To: <200204101547.RAA10066@pubhealth.ku.dk>
References: <200204101547.RAA10066@pubhealth.ku.dk>
Message-ID: <x24rij7d4o.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

>     DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
>     DavidB> window that X11() creates has a title like:
> 
>     DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y
...
> This made me look at our Solaris (2.5.1 + tons of patches)
> version of   R-1.5.0pre (2002-04-09).

For whatever it is worth, I can't reproduce this on Solaris7/gcc3.0.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Apr 10 17:29:07 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 10 Apr 2002 09:29:07 -0700 (PDT)
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>

On 10 Apr 2002, Peter Dalgaard BSA wrote:

> G.Innocent@vet.gla.ac.uk writes:
>
> > 6) The above code appears to be the minimum of code required to reproduce
> > the results on my machine.
>
> You can do better than that:
>
> > f
> function(A) {
>   A$p[1] <- 2
>   E <- A$p
>   E[1:2] <- 0.1*A$p[2:3]
>   return(A)
> }
<snip>
> Notice that the last line changing E is effectively changing A$p, so
> something is up with our duplication-avoidance scheme. Luke?

and it matters that the assignment to E is coming from A$p. If it comes
from A$q or from some other vector then the bug doesn't bite.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Apr 10 17:50:14 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 10 Apr 2002 11:50:14 -0500
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>; from tlumley@u.washington.edu on Wed, Apr 10, 2002 at 09:29:07AM -0700
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk> <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
Message-ID: <20020410115014.A11138@nokomis.stat.umn.edu>

It's a problem in subset.c.  Should be fixed now.

A further simplification with annotation:

x <- list(p=1)

f <- function(A) {
  A$p <- 2       # makes copy of A with NAMED 1
  E <- A$p       # no copy, A$p gets NAMED 2
  A$p            # is setting NAMED back to 1
  E[1] <- 0.1    # modifies shared value in place
  return(A)
}

f(x)

The problem was in code that looks like this:

	y = VECTOR_ELT(x, i);
        SET_NAMED(y, NAMED(x));

which ignores the possibility that NAMED(y) may already be larger than
NAMED(x).  I've changed these bits to

	y = VECTOR_ELT(x, i);
	if (NAMED(x) > NAMED(y))
	    SET_NAMED(y, NAMED(x));

This occurred in a few other places but mostly in pairlist code so was
less likely to bite, but I changed those as well.

The problem did not occur with [[ because that does more copying.

luke

On Wed, Apr 10, 2002 at 09:29:07AM -0700, Thomas Lumley wrote:
> On 10 Apr 2002, Peter Dalgaard BSA wrote:
> 
> > G.Innocent@vet.gla.ac.uk writes:
> >
> > > 6) The above code appears to be the minimum of code required to reproduce
> > > the results on my machine.
> >
> > You can do better than that:
> >
> > > f
> > function(A) {
> >   A$p[1] <- 2
> >   E <- A$p
> >   E[1:2] <- 0.1*A$p[2:3]
> >   return(A)
> > }
> <snip>
> > Notice that the last line changing E is effectively changing A$p, so
> > something is up with our duplication-avoidance scheme. Luke?
> 
> and it matters that the assignment to E is coming from A$p. If it comes
> from A$q or from some other vector then the bug doesn't bite.
> 
> 	-thomas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:24:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 19:24:13 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <20020410115014.A11138@nokomis.stat.umn.edu>
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
 <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
 <20020410115014.A11138@nokomis.stat.umn.edu>
Message-ID: <x2sn63v54y.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:26:47 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 19:26:47 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101726.TAA10413@pubhealth.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 19:59:20 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 20:59:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101859.UAA10717@pubhealth.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> I also get funny characters in the title bar on R 1.4.1 and R 1.5.0_devel
> (yesterday's version).

My bet is that it is X-server dependent what happens with bytes past
the end of a string set with

    XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
                    8, PropModeReplace, (unsigned char*)t, 50);

(in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).

Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:28:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 10 Apr 2002 16:28:40 -0400
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE916@groexmbcr02.pfizer.com>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:30:35 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 22:30:35 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102030.WAA10950@pubhealth.ku.dk>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 21:57:12 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 22:57:12 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102057.WAA11024@pubhealth.ku.dk>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> wrote:
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

Replacing '50' with 'strlen(t)' in those 2 places cures the problem for me!
Brilliant!
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From R-bugs@biostat.ku.dk  Thu Apr 11 09:00:04 2002
From: R-bugs@biostat.ku.dk (R-bugs@biostat.ku.dk)
Date: Thu, 11 Apr 2002 10:00:04 +0200
Subject: [Rd] Windows AltGr bug? (PR#1448)
Message-ID: <15541.17028.270482.560534@gargle.gargle.HOWL>

       [this was filter-bounced for R-devel, because of
        HTMLification and a binary attachment; also fixed up the Subject; MM]

hello,

I'm running R (version 1.4.1) under Windows Mellenium and this error =
message appears every time I press AltGr + any other key.
A bug or a any instability of my sistem?

(attached GIF file deleted; don't use ANY attachments for R-bugs!)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mckay@suna.gmr.com  Thu Apr 11 15:40:27 2002
From: mckay@suna.gmr.com (Neil McKay MD)
Date: Thu, 11 Apr 2 10:40:27 EDT
Subject: [Rd] Mods that allow R scripts
Message-ID: <200204111440.g3BEeRV06920@math.ma.gmr.com>

I've hacked R so that it can be used to write shell and/or
CGI scripts, e.g. "hello world" can be written as:


	#!/usr/local/lib/R/bin/R.bin --script

	cat("Hello, World!\n");

The mods required to enable this aren't particularly major.
(Adds about 70 lines of code, IIRC.) Anyone else interested
in adding this to the R core?

-- 
Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
Enterprise Systems Lab                  FAX:   (586)986-0574 (GM:8-226-0574)
GM Research & Development Center        Internet: mckay@gmr.com
30500 Mound Road
Warren, Mich. 48090

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Apr 11 16:14:07 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 11 Apr 2002 10:14:07 -0500
Subject: [Rd] Mods that allow R scripts
Message-ID: <E16vgH1-0004Vb-00@sonny.eddelbuettel.com>


> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?

Yes!  I found it very useful in other software systems (e.g. Octave).

That feature-request gets discussed here every now and then; I
recall Peter and Luke discussing it here a few months back.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Apr 11 16:25:19 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 11 Apr 2002 11:25:19 -0400
Subject: [Rd] Mods that allow R scripts
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE918@groexmbcr02.pfizer.com>

Yes.  Can you send me a copy of the patch?

Thanks,

Greg

> -----Original Message-----
> From: Neil McKay MD [mailto:jz0vs8@gmr.com]
> Sent: Thursday, April 11, 2002 10:40 AM
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Mods that allow R scripts
> 
> 
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?
> 
> -- 
> Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 
> (GM:8-226-1470)
> Enterprise Systems Lab                  FAX:   (586)986-0574 
> (GM:8-226-0574)
> GM Research & Development Center        Internet: mckay@gmr.com
> 30500 Mound Road
> Warren, Mich. 48090
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr 11 17:04:36 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 11 Apr 2002 12:04:36 -0400
Subject: [Rd] Mods that allow R scripts
In-Reply-To: <200204111440.g3BEeRV06920@math.ma.gmr.com>
References: <200204111440.g3BEeRV06920@math.ma.gmr.com>
Message-ID: <15541.46100.236766.419250@gargle.gargle.HOWL>

Neil McKay MD writes:
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
>   #!/usr/local/lib/R/bin/R.bin --script
>   cat("Hello, World!\n");

That is very cool, and would replace about 25 lines of Perl wrapper for me, IF
you could also easily pass flags and arguments, e.g.:
  Unix> myRscript -e -f datafile
These would have to become R variables, somehow.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Apr 11 19:55:01 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 11 Apr 2002 20:55:01 +0200 (MET DST)
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
Message-ID: <200204111855.UAA19587@pubhealth.ku.dk>

[This is on Redhat Linux 7.1, using sawfish window manager under gnome:

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
]

If I close the data.entry() window using the Window manager, I get
SIGSEGV.  When debugging, the routine closewin() gets closed twice -
on the first time, the window closes, the second time I get the error.

This is with r-devel as of today, with "CFLAGS -g".  I edited
closewin() in dataentry.c to show me when it is called:

void closewin(void)
{
  printf("In routine closewin\n");
    XFreeGC(iodisplay, iogc);
    XDestroyWindow(iodisplay, iowindow);
    XCloseDisplay(iodisplay);
}


% bin/R
> x <- edit(data.frame())

The data frame pops up.  I just click on the Window manager close
button (not the "Quit" button):

In routine closewin
In routine closewin

Program received signal SIGSEGV, Segmentation fault.
0x08bd62d2 in ?? ()

When I step through in gdb (below), I see the data frame window
disappears after the first call to closewin; the segmentation fault
happens within the second call.


% bin/R -d gdb
(gdb) run

[R starts up]  Ctrl-c to get back to debugger:
(gdb) break closewin
Breakpoint 1 at 0x402195ff: file dataentry.c, line 1315.
(gdb) cont
Continuing.
> x <- edit(data.frame())

At this point, I click the "close" button provided by the window
manager, control returns to gdb.  If I then single-step through gdb, I
see the error in the second call to closewin (from line 313 of
dataentry.c)

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) n
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 
1317        XDestroyWindow(iodisplay, iowindow);
(gdb) 
1318        XCloseDisplay(iodisplay);
(gdb) 
1319    }
(gdb) 
eventloop () at dataentry.c:1155
1155                           done = 1;
(gdb) 
1157                    break;
(gdb) 
1161    }
(gdb) 
RX11_dataentry (call=0x850b7c0, op=0x8270afc, args=0x8bd4e84, rho=0x8bcd998)
    at dataentry.c:312
312         endcontext(&cntxt);
(gdb) 
313         closewin();
(gdb) 

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) 
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 

Program received signal SIGSEGV, Segmentation fault.
0x08bd750a in ?? ()





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr 11 22:46:03 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Apr 2002 23:46:03 +0200
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
In-Reply-To: <200204111855.UAA19587@pubhealth.ku.dk>
References: <200204111855.UAA19587@pubhealth.ku.dk>
Message-ID: <x2ads97vtw.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> [This is on Redhat Linux 7.1, using sawfish window manager under gnome:
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 11
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> ]
> 
> If I close the data.entry() window using the Window manager, I get
> SIGSEGV.  When debugging, the routine closewin() gets closed twice -
> on the first time, the window closes, the second time I get the error.

OK, I see it here too. The closewin() inside eventloop() looks
completely superfluous to me.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 03:29:09 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 11 Apr 2002 22:29:09 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com>

>Date: 10 Apr 2002 12:06:02 +0200
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>
>There's a directory on CRAN containing the current snapshots of the
>set of recommended packages. They will not be finaly feature-frozen
>until Monday, but you might want to check them out anyway. 
>
>If you have wget, the easiest way to get the complete set is probably...

For Windows users:  the snapshots are included in the SetupR.exe
install program that is available on my web site at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

Check the date on the file to see when I last did a build and upload.
(Right now the date shows it was built yesterday.  I'll probably do
another build tomorrow.)

I don't think Rcmd INSTALL is currently working, but I imagine it will
be after the next build or two.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 13:47:18 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 12 Apr 2002 08:47:18 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
In-Reply-To: <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
References: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com> <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
Message-ID: <hmldbu4v30pfstqsf3fjsnugujk29t3mop@4ax.com>

On Fri, 12 Apr 2002 08:30:13 +0100 (BST), you wrote:
>> I don't think Rcmd INSTALL is currently working, but I imagine it will
>> be after the next build or two.
>
>Works for me, and always has done and I use it to build the packages on
>CRAN.

Right, my mistake.  It's BUILD and CHECK that are not currently
working here.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 20:17:15 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 15:17:15 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>


Hi All,

What is the current status of removing the global variables etc that is
required to permit multi-threading R?

I'm developing a web application tool for/using R, python (www.python.org),
and Zope (www.zope.org), and it would be really convenient if I could use
something like RPy to communicate with several concurrent R sessions,
preferably within the same process space.  

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Apr 12 20:26:18 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Apr 2002 15:26:18 -0400
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Fri, Apr 12, 2002 at 03:17:15PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>
Message-ID: <20020412152618.A9973@jessie.research.bell-labs.com>

I plan to attack this in mid May unless Luke or others get there
first.  As I have mentioned before, making the R engine reentrant
and/or thread-safe will probably not be all that is needed for your
purposes, and fixing the packages, especially those with native (C,
C++ & Fortran) code is also necessary. That is why I have been working
on a tool that aids in the task of removing the global variables.

Also, it may be prudent to prioritize an adequate security model in
your application over allowing concurrent intrusions :-)

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> What is the current status of removing the global variables etc that is
> required to permit multi-threading R?
> 
> I'm developing a web application tool for/using R, python (www.python.org),
> and Zope (www.zope.org), and it would be really convenient if I could use
> something like RPy to communicate with several concurrent R sessions,
> preferably within the same process space.  
> 
> -Greg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Apr 12 20:44:35 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 12 Apr 2002 14:44:35 -0500
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <20020412152618.A9973@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Fri, Apr 12, 2002 at 03:26:18PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com> <20020412152618.A9973@jessie.research.bell-labs.com>
Message-ID: <20020412144435.G8205@nokomis.stat.umn.edu>

Sounds like what you need (given that Python is involved with it's
global interpreter lock) is concurrent threads, not full parellelism.
That is at least feasible, though it's a non-trivial effort and it
remains to be seen if we have the resources to pull it off.  Full
parallelism at the R level is much harder; not clear it is
realistically feasible at all.

On the other hand, there are some simple things involving threading
vectorized arithmetic operations for speedup on multi=processors that
we are likely to look into fairly soon and that may turn out to be
useful.

luke

On Fri, Apr 12, 2002 at 03:26:18PM -0400, Duncan Temple Lang wrote:
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.
> 
> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient if I could use
> > something like RPy to communicate with several concurrent R sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:01:44 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:01:44 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92D@groexmbcr02.pfizer.com>



> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:23:26 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:23:26 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92E@groexmbcr02.pfizer.com>


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 15:10:04 2002
From: popescul@unagi.cis.upenn.edu (popescul@unagi.cis.upenn.edu)
Date: Sat, 13 Apr 2002 16:10:04 +0200 (MET DST)
Subject: [Rd] glm() in R (PR#1457)
Message-ID: <200204131410.QAA00268@pubhealth.ku.dk>


 Hello,

 I was using R for logistic regression modeling (glm() with binomial
family) and have noticed that it' can't handle more than 100 predictors
(reports syntax error)
Is it a bug, or a language restiction ?

 I would be very grateful if you let me know possible ways around the
problem, as I need R for problems with many attributes.

 Thank you,

 Alex.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 13 17:16:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Apr 2002 18:16:02 +0200
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <200204131410.QAA00268@pubhealth.ku.dk>
References: <200204131410.QAA00268@pubhealth.ku.dk>
Message-ID: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>

popescul@unagi.cis.upenn.edu writes:

>  Hello,
> 
>  I was using R for logistic regression modeling (glm() with binomial
> family) and have noticed that it' can't handle more than 100 predictors
> (reports syntax error)
> Is it a bug, or a language restiction ?
> 
>  I would be very grateful if you let me know possible ways around the
> problem, as I need R for problems with many attributes.
> 
>  Thank you,
> 
>  Alex.

If you get a syntax error, then I wouldn't expect that glm() itself is
causing it. More likely, you are exceeding the line length limit in
the parser. Try splitting your command over several lines, or use
simplified formulas like  glm(V1~.,data=d,family=binomial).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Apr 13 18:29:15 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 13 Apr 2002 10:29:15 -0700 (PDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>

On 13 Apr 2002, Peter Dalgaard BSA wrote:

> popescul@unagi.cis.upenn.edu writes:
>
> >  Hello,
> >
> >  I was using R for logistic regression modeling (glm() with binomial
> > family) and have noticed that it' can't handle more than 100 predictors
> > (reports syntax error)
> > Is it a bug, or a language restiction ?
> >
> >  I would be very grateful if you let me know possible ways around the
> > problem, as I need R for problems with many attributes.
> >
> >  Thank you,
> >
> >  Alex.
>
> If you get a syntax error, then I wouldn't expect that glm() itself is
> causing it. More likely, you are exceeding the line length limit in
> the parser. Try splitting your command over several lines, or use
> simplified formulas like  glm(V1~.,data=d,family=binomial).

To be specific, I defined
y<-rbinom(800,1,.5)
x<-as.data.frame(matrix(rnorm(800*300),ncol=300))

and the following all work
# using . to specify variables implicitly
glm(y~.,data=x,family=binomial())

# constructing a formula object
ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
glm(ff,data=x,family=binomial())

# constructing the whole call as a text string and evaluating it
expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
eval(parse(text=expr)[[1]])

#pasting the whole thing in multiple lines
 glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
    V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
    V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
     V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
     V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
    V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
    V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
    V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
    V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
    V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
    V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
   V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
   V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
   V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
   V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
   V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
    V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
   V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
    V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
    V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
    V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
    V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
    V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
  V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
     V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
     V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
     V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
     V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
     V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
     V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
     V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
  V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
  V300, data = x, family = binomial())

but pasting it as a single line gives a syntax  error.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 23:29:47 2002
From: popescul@unagi.cis.upenn.edu (Alexandrin Popescul)
Date: Sat, 13 Apr 2002 18:29:47 -0400 (EDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>
Message-ID: <Pine.GSO.4.44.0204131829050.1521-100000@unagi.cis.upenn.edu>


 Thomas and Peter,

 this was very helpful,

 Thanks,

 Alex.


On Sat, 13 Apr 2002, Thomas Lumley wrote:

> On 13 Apr 2002, Peter Dalgaard BSA wrote:
>
> > popescul@unagi.cis.upenn.edu writes:
> >
> > >  Hello,
> > >
> > >  I was using R for logistic regression modeling (glm() with binomial
> > > family) and have noticed that it' can't handle more than 100 predictors
> > > (reports syntax error)
> > > Is it a bug, or a language restiction ?
> > >
> > >  I would be very grateful if you let me know possible ways around the
> > > problem, as I need R for problems with many attributes.
> > >
> > >  Thank you,
> > >
> > >  Alex.
> >
> > If you get a syntax error, then I wouldn't expect that glm() itself is
> > causing it. More likely, you are exceeding the line length limit in
> > the parser. Try splitting your command over several lines, or use
> > simplified formulas like  glm(V1~.,data=d,family=binomial).
>
> To be specific, I defined
> y<-rbinom(800,1,.5)
> x<-as.data.frame(matrix(rnorm(800*300),ncol=300))
>
> and the following all work
> # using . to specify variables implicitly
> glm(y~.,data=x,family=binomial())
>
> # constructing a formula object
> ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
> glm(ff,data=x,family=binomial())
>
> # constructing the whole call as a text string and evaluating it
> expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
> eval(parse(text=expr)[[1]])
>
> #pasting the whole thing in multiple lines
>  glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
>     V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
>     V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
>      V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
>      V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
>     V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
>     V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
>     V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
>     V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
>     V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
>     V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
>    V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
>    V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
>    V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
>    V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
>    V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
>     V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
>    V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
>     V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
>     V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
>     V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
>     V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
>     V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
>   V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
>      V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
>      V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
>      V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
>      V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
>      V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
>      V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
>      V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
>   V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
>   V300, data = x, family = binomial())
>
> but pasting it as a single line gives a syntax  error.
>
>
> 	-thomas
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Mon Apr 15 11:12:41 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Mon, 15 Apr 2002 12:12:41 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151012.MAA07652@pubhealth.ku.dk>

Found one that stumped me.  I did a search on R-bugs for the
string "d-p-q-r-tests", and found zero entries in all categories 
(I don't think I secretly gave it a regex).

Did the usual configure, make, make check on OpenBSD 3.0, and 
encountered this message on d-p-q-r-tests.Rout:

running code in `d-p-q-r-tests.R' ... OK
comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
< [1] "`is.NA' value mismatches: 800 in current, 0  in target"
< Warning message:
< NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
---
> [1] TRUE
315,317c313
< [1] "`is.NA' value mismatches: 4 in current, 2  in target"
< Warning message:
< NaNs produced in: exp(z)
---
> [1] TRUE
 OK

If you're not too busy, I'd love to provide you with whatever you
need to look at this more closely than my untrained eyes can.
config.cache?  d-p-q-r-tests.Rout?  Anything else?

> version
         _
	 platform i386-unknown-openbsd3.0
	 arch     i386
	 os       openbsd3.0
	 system   i386, openbsd3.0
	 status
	 major    1
	 minor    4.1
	 year     2002
	 month    01
	 day      30
	 language R


Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 15 11:46:46 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 15 Apr 2002 12:46:46 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151046.MAA07982@pubhealth.ku.dk>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> Found one that stumped me.  I did a search on R-bugs for the
    Jason> string "d-p-q-r-tests", and found zero entries in all categories 
    Jason> (I don't think I secretly gave it a regex).

    Jason> Did the usual configure, make, make check on OpenBSD 3.0, and 
    Jason> encountered this message on d-p-q-r-tests.Rout:

    Jason> running code in `d-p-q-r-tests.R' ... OK
    Jason> comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
    Jason> < [1] "`is.NA' value mismatches: 800 in current, 0  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
    Jason> ---
    >> [1] TRUE
    Jason> 315,317c313
    Jason> < [1] "`is.NA' value mismatches: 4 in current, 2  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(z)
    Jason> ---
    >> [1] TRUE
    Jason> OK

    Jason> If you're not too busy, I'd love to provide you with whatever you
    Jason> need to look at this more closely than my untrained eyes can.
    Jason> config.cache?  d-p-q-r-tests.Rout?  Anything else?

Actually, we'd be very grateful if you could run these with
R-devel aka "R pre1.5.0" instead.

You can get a snapshot using rsync (or the tar file), see
    http://stat.ethz.ch/CRAN/sources.html

If you see the same problem (or also with 1.4.1)
look at the tests/d-p-q files
probably start R and try things like

 z <- c(-Inf,Inf,NA,NaN, rt(1000, df=2))
 z.ok <- z > -37.5 | !is.finite(z)
 for(df in 1:10)
    if(!is.logical(all.equal(pt(z, df), 1 - pt(-z,df), tol= 1e-15)))
      cat("ERROR -- df = ", df, "\n")

 c(pz <- pnorm(z), 1 - pnorm(z, lower=FALSE))
 c(pz, pnorm(-z, lower=FALSE))
 c(log(pz[z.ok]),  pnorm(z[z.ok], log=TRUE))


because these are around line 315 of tests/d-p-q-r-tests.Rout.save
and the second problem happened around there.

[A more desperate option would be to offer a login into your computer to
 someone from the R core team ...]

Thanks for helping us to have R running correctly on OpenBSD 3.0,
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 12:48:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 13:48:39 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
Message-ID: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>


As of 19:00 GMT we'll declare a feature freeze on the set of
recommended packages. We will then have one week to ferret out as many
problems as we can before final code freeze and platform testing. 

At the same time R-base is code-frozen, i.e. only critical bugs will
be fixed.

If you want to help making R 1.5.0 as bug-free as possible, it could
be a good idea to install the set of recommended packages at

http://cran.r-project.org/src/contrib/1.5.0/recommended

and try your favourite scripts with them. Please report if you find
any bugs. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 13:19:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 14:19:52 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
In-Reply-To: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
References: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ads5nogn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> If you want to help making R 1.5.0 as bug-free as possible, it could
> be a good idea to install the set of recommended packages at
> 
> http://cran.r-project.org/src/contrib/1.5.0/recommended

Sorry, make that 

http://cran.r-project.org/src/contrib/1.5.0/Recommended
                                            ^
                                         capital R

The recommended packages are those that we try to keep in sync with
the main distribution of R and request be included in binary packages.
The current set is:

 [   ]  KernSmooth_2.22-7.tar.gz 31-Mar-2002 10:20    26k
 [   ]  VR_7.0-1.tar.gz          12-Apr-2002 10:02   457k
 [   ]  boot_1.2-8.tar.gz        12-Apr-2002 10:16   178k
 [   ]  cluster_1.4-2.tar.gz     31-Mar-2002 09:40   111k
 [   ]  foreign_0.5-2.tar.gz     31-Mar-2002 09:39   179k
 [   ]  grid_0.6.tar.gz          09-Apr-2002 18:15   136k
 [   ]  lattice_0.5-0.tar.gz     10-Apr-2002 11:54    88k
 [   ]  mgcv_0.7-2.tar.gz        31-Mar-2002 09:39   132k
 [   ]  nlme_3.1-25.tar.gz       05-Apr-2002 09:34   509k
 [   ]  rpart_3.1-6.tar.gz       29-Mar-2002 09:33   108k
 [   ]  survival_2.9-1.tar.gz    14-Apr-2002 18:36   986k 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 16 17:41:12 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Apr 2002 12:41:12 -0400
Subject: [Rd] unbalanced braces
Message-ID: <3CBC5428.DD76AE8F@bank-banque-canada.ca>

Version 1.5.0 Under development (unstable) (2002-04-15):

The following in an Rd file fails checks with an indication that there are
unbalanced braces:

\description{
  specified in any of the addresses by enclosing them in double (\code{"})
quotes. Please do not use single (\code{'}) quotes.
}

The failure seems to be cause by the first line. (Perhaps there is a better way
for me to indicate the double quote.)

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Apr 17 03:33:52 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 16 Apr 2002 22:33:52 -0400
Subject: [Rd] Using strwidth before plotting
Message-ID: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>

In the plotcorr() function in the ellipse package, I want to position
things differently depending on the size of the labels.  I can use
strwidth to find out the length of the labels, but only when there's a
plot window open:  it won't open one.

Question:  What function call says:  make sure there's a window open
(i.e. do what plot() does before it starts plotting)?

I don't think I can use plot.new() or frame(), because I don' t want
to leave a blank page in the plot history if there was already a
window open.

Duncan Murdoch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 07:39:22 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 07:39:22 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>
Message-ID: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>

On Tue, 16 Apr 2002, Duncan Murdoch wrote:

> In the plotcorr() function in the ellipse package, I want to position
> things differently depending on the size of the labels.  I can use
> strwidth to find out the length of the labels, but only when there's a
> plot window open:  it won't open one.
>
> Question:  What function call says:  make sure there's a window open
> (i.e. do what plot() does before it starts plotting)?

Call par(), e.g. par("font")

> I don't think I can use plot.new() or frame(), because I don' t want
> to leave a blank page in the plot history if there was already a
> window open.

(That is indeed what happens.)

You can find if there is a device open by looking at length(.Devices) > 1
or dev.cur() > 1.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 08:03:36 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 08:03:36 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>
Message-ID: <Pine.GSO.4.44.0204170750360.28140-100000@auk.stats>

On Wed, 17 Apr 2002, Prof Brian D Ripley wrote:

> On Tue, 16 Apr 2002, Duncan Murdoch wrote:
>
> > In the plotcorr() function in the ellipse package, I want to position
> > things differently depending on the size of the labels.  I can use
> > strwidth to find out the length of the labels, but only when there's a
> > plot window open:  it won't open one.
> >
> > Question:  What function call says:  make sure there's a window open
> > (i.e. do what plot() does before it starts plotting)?
>
> Call par(), e.g. par("font")
>
> > I don't think I can use plot.new() or frame(), because I don' t want
> > to leave a blank page in the plot history if there was already a
> > window open.
>
> (That is indeed what happens.)

However, you could use plot.new(); par(new=TRUE)

> You can find if there is a device open by looking at length(.Devices) > 1
> or dev.cur() > 1.

What the internal code does can be reproduced in R by

if(length(.Devices) == 1 || dev.cur() == 1) {
    dev <- getOption("device")
    if(is.character(dev) && length(dev) > 0) get(dev)()
}

dev.cur includes a check that .Devices exists, but it is created in
InitGraphics before interactive R code is accepted, so the check must
always succeed and the above code is safe.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Wed Apr 17 12:24:59 2002
From: egonw@sci.kun.nl (Egon Willighagen)
Date: Wed, 17 Apr 2002 13:24:59 +0200
Subject: [Rd] Highlighting in KDE editor Kate 2.0 (KDE 3.0)
Message-ID: <200204171324.59561.egonw@sci.kun.nl>


Hi all,

Some time ago a posted a message about a highlighting module for R.
I've now made one for Kate 2.0 (KDE 3.0) too. They can both be downloaded 
from:

http://www-sigma.sci.kun.nl/Persoonlijk/egonw/r-kate/

Regards,

Egon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Apr 18 13:13:30 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 18 Apr 2002 14:13:30 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
Message-ID: <200204181213.OAA05366@pubhealth.ku.dk>


strptime() mysteriously adds a day to a date, unless the year
is specified.  Tested on:
Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
Windows - R version 1.4.1

Bug isn't found on OpenBSD, R version 1.4.1.

Transcript:

R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

...

> ## BUG:
> ## strptime seems to add a day to the request, unless the year 
> ## is added as part of the format. 
> strptime("11 Apr 22:00",format="%d %b %H:%M")
[1] "2002-04-12 22:00:00 NZST"
> ## note - we gained a day.  
> 
> ## goes away if we include the year
> strptime("11 Apr 22:00 2002",format="%d %b %H:%M %Y")
[1] "2002-04-11 22:00:00 NZST"


> ## R 1.4.1, running on Linux RH 6.0.  
> version
         _                
platform i586-pc-linux-gnu
arch     i586             
os       linux-gnu        
system   i586, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                


> ## Bug also appears in R-devel (downloaded 16 April 2002).
> ## For R-devel:
> version
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      16                          
language R                           

> ## Have also reproduced identical results in the Windows verion
> version
_              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R         

> ##
> ## Unable to reproduce bug under OpenBSD 3.0
> version
_
platform i386-unknown-openbsd3.0
arch     i386
os       openbsd3.0
system   i386, openbsd3.0
status
major    1
minor    4.1
year     2002
month    01
day      30
language R


> ## <speculation>
> ## This looks very OS specific.
> ## </speculation>



-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr 18 13:41:57 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Apr 2002 14:41:57 +0200
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
In-Reply-To: <200204181213.OAA05366@pubhealth.ku.dk>
References: <200204181213.OAA05366@pubhealth.ku.dk>
Message-ID: <15550.48917.887461.113981@gargle.gargle.HOWL>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> strptime() mysteriously adds a day to a date, unless the year
    Jason> is specified.  Tested on:
    Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
    Jason> Windows - R version 1.4.1

    Jason> Bug isn't found on OpenBSD, R version 1.4.1.

I confirm the bug (R-devel, Redhat 7.1)
To reproduce, it's sufficient to work with 
"%d %B" or "%d %b" .

What happens is that January and February work okay, and all
months from March produce the problem,

e.g.

> strptime("28 Feb",format="%d %b")# ok
[1] "2002-02-28"
> strptime("19 March",format="%d %B")# wrong
[1] "2002-03-20"

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:08:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 15:08:26 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1467)
Message-ID: <200204181308.PAA06220@pubhealth.ku.dk>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:07:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:07:44 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <15550.48917.887461.113981@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:24:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:24:00 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204181421170.3919-100000@gannet.stats>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
>
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
>
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. I'm not sure why glibc does this when the tm_year field is not

Well, I thought that was it, but as 1900 was not a leap year, it's
stranger still.

> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.

(For 11 April, BTW.)

> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:24:43 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Thu, 18 Apr 2002 15:24:43 +0200 (CEST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 (PR#1467)
In-Reply-To: <200204181308.PAA06220@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0204181513030.5841-100000@tal.stat.umu.se>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:30:12 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 18 Apr 2002 15:30:12 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1468)
Message-ID: <200204181330.PAA06545@pubhealth.ku.dk>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 19 12:19:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Apr 2002 12:19:07 +0100 (BST)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...

Unfortunately it appears not to.  (It says it implements a subset for use
with gnuplot, but even then I don't see how it is enough.) The font
metrics are always returned as false.  I wondered how it was going to do
this without the TrueType fonts in evidence ....

R's graphics model depends pretty crucially on accurate font metrics, and
text positioning is often the trickiest part of writing a graphics driver.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Apr 19 15:32:14 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 19 Apr 2002 10:32:14 -0400 (EDT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>
Message-ID: <Pine.LNX.4.30.0204191031350.859-100000@bolker.zoo.ufl.edu>


  Oh well, too bad ... sorry if I got anyone's hopes up unnecessarily.

  Ben Bolker

On Fri, 19 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Fri, 29 Mar 2002, Ben Bolker wrote:
>
> >
> >   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> > the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> > (LGPL) library that implements the EMF API ...
>
> Unfortunately it appears not to.  (It says it implements a subset for use
> with gnuplot, but even then I don't see how it is enough.) The font
> metrics are always returned as false.  I wondered how it was going to do
> this without the TrueType fonts in evidence ....
>
> R's graphics model depends pretty crucially on accurate font metrics, and
> text positioning is often the trickiest part of writing a graphics driver.
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gray@jimmy.harvard.edu  Sat Apr 20 21:21:46 2002
From: gray@jimmy.harvard.edu (gray@jimmy.harvard.edu)
Date: Sat, 20 Apr 2002 22:21:46 +0200 (MET DST)
Subject: [Rd] color of axis lines (PR#1470)
Message-ID: <200204202021.WAA19319@pubhealth.ku.dk>

Full_Name: Robert Gray
Version: 1.4.1
OS: Windows NT 4.0
Submission from: (NULL) (155.52.45.116)


I can't seem to get axis tick marks in any color except black (I want to make
plots for a slide presentation using a dark background.)  Below is a simple
example.  I have tried this using postscript in the Windows version of R 1.4.1
and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
problem occurs in the win.metafile driver.

u1 <- runif(10)
u2 <- runif(10)
postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
    col.axis='white',col.main='white',col.lab='white',col.sub='white')
palette(c('white','red','yellow','green','cyan','orange'))
plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
     col='white',col.axis='white') 
points(u1,u2,col=3)
dev.off()


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:41:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 2002 23:41:17 +0200
Subject: [Rd] color of axis lines (PR#1470)
In-Reply-To: <200204202021.WAA19319@pubhealth.ku.dk>
References: <200204202021.WAA19319@pubhealth.ku.dk>
Message-ID: <x2d6wucaki.fsf@blueberry.kubism.ku.dk>

gray@jimmy.harvard.edu writes:

> Full_Name: Robert Gray
> Version: 1.4.1
> OS: Windows NT 4.0
> Submission from: (NULL) (155.52.45.116)
> 
> 
> I can't seem to get axis tick marks in any color except black (I want to make
> plots for a slide presentation using a dark background.)  Below is a simple
> example.  I have tried this using postscript in the Windows version of R 1.4.1
> and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
> problem occurs in the win.metafile driver.
> 
> u1 <- runif(10)
> u2 <- runif(10)
> postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
> par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
>     col.axis='white',col.main='white',col.lab='white',col.sub='white')
> palette(c('white','red','yellow','green','cyan','orange'))
> plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
>      col='white',col.axis='white') 
> points(u1,u2,col=3)
> dev.off()

You're looking for the fg parameter. 

(It does say so in help(par), I don't think there's a bug.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:51:36 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 20 Apr 2002 23:51:36 +0200 (MET DST)
Subject: [Rd] Rprof segfault (PR#1471)
Message-ID: <200204202151.XAA19530@pubhealth.ku.dk>


> Rprof("")
Segmentation fault (core dumped)

This happens from trying to close a file that was never opened.

The fix is likely trivial, but we're in code freeze and it is hardly a
critical bug, so I'm just filing it for now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204210515.g3L5F4O08542@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1469 *
Subject: Are you familiar with residual income?
From: "United Networks" <P.Brooks@easynet.be>
Date: Sat, 20 Apr 2002 01:53:23 -1900
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 22 11:30:58 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 Apr 2002 12:30:58 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200204221030.MAA25830@pubhealth.ku.dk>

I've already fixed the bugs, but as with the last one, this is
not critical enough to allow breaking current R-devel's code
freeze.  I hope I will have corrected it for 1.5.1..

## Here is code reproducing the problems;
## I use  try(.) whenever I know the current versions of R would
## give an error:

library(splines)

x <- c(1:3,5:6)
y <- c(3:1,5:6)
(isP <- interpSpline(x,y))# poly-spline representation
(isB <- interpSpline(x,y, bSpl = TRUE))# B-spline repr.

xo <- c(0, x, 10)# x + outside points

options(digits = 4)
for(der in 0:3) # deriv=3 fails!
    print(formatC(try(predict(isP, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.npolySpline(isP, xo, deriv = der) :
##- 	subscript out of bounds


## Same for B-spline (instead of Polynom.):
for(der in 0:3)  # deriv=3 fails!
    print(formatC(try(predict(isB, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.nbSpline(isB, xo, deriv = der) :
##- 	subscript out of bounds

## Here, also for deriv= 1 & 2,
## the value left to first proper knot is NA (and should not) <<< ! >>>

------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From strach.joachim@web.de  Mon Apr 22 22:21:14 2002
From: strach.joachim@web.de (strach.joachim@web.de)
Date: Mon, 22 Apr 2002 23:21:14 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204222121.XAA00829@pubhealth.ku.dk>

Full_Name: Joachim H. Strach
Version: 1.3.1
OS: Windows 98 Second Edition
Submission from: (NULL) (132.230.131.220)


I am using the tcltk package.
Error-example:
----
  library(tcltk)
  top<-tktoplevel()
  but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
  tkpack(but)
----
then press the Quit-Button. 
On my Platform there will be a execution fault with following message:
----
RGUI verursachte einen Fehler durch eine ungltige Seite
in Modul TK83.DLL bei 0167:11450066.
Register:
EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
ECX=43a00000 DS=016f ESI=00000000 FS=1257
EDX=43a00000 ES=016f EDI=00000001 GS=0000
Bytes bei CS:EIP:
8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
Stapelwerte:
43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
----
R will be closed, but this error message is not really nice )-;  .

That's it.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 22 23:08:02 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 22 Apr 2002 15:08:02 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
Message-ID: <871yd7jsjh.fsf@jeeves.blindglobe.net>


could we add an argument to suppress printing of levels for
print.factor()?  i.e.:

 
print.factor <-
function (x, quote = FALSE, print.levels = TRUE, ...)           ## MODIFIED
{
    if (length(x) <= 0) 
        cat("factor(0)\n")
    else print(as.character(x), quote = quote, ...)
    if (print.levels) {                                         ## ADDED
        cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    }                                                           ## ADDED  
    invisible(x)
}

I've done this for my local work, but wondering if this is useful in
general?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 22 23:12:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 00:12:06 +0200
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
In-Reply-To: <200204222121.XAA00829@pubhealth.ku.dk>
References: <200204222121.XAA00829@pubhealth.ku.dk>
Message-ID: <x2u1q34c3t.fsf@blueberry.kubism.ku.dk>

strach.joachim@web.de writes:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
> 
> 
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button. 
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
> ----
> R will be closed, but this error message is not really nice )-;  .
> 
> That's it.

A bug report on 1.3.1, one week before 1.5.0, is a bit late don't you
think?

I cannot check Windows versions right now, but pre-1.5.0 on Linux
doesn't crash. However, it does leave the terminal in noecho mode.

Basically, just don't do that for now... q() and probably others do
not expect to be invoked from a callback. I don't think there's a nice
alternative implementation of a quit button without blocking the
console. (By waiting for a window event or tcl variable change and
then executing q()). 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 07:51:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 08:51:11 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204230651.IAA02076@pubhealth.ku.dk>

R 1.3.1 is rather old, but this is a bug report on Tcl/Tk, not on R.
(Notice which DLL failed!)

I get no failure on 1.4.1 nor 1.5.0pre under Windows 2000.

Please try updating your R, and perhaps also your Tcl/Tk (mine is
8.3.4.2-1, which was the latest last week).


On Mon, 22 Apr 2002 strach.joachim@web.de wrote:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
>
>
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button.
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864
> ----
> R will be closed, but this error message is not really nice )-;  .
>
> That's it.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oliver.niggemann@acterna.com  Tue Apr 23 08:41:42 2002
From: oliver.niggemann@acterna.com (oliver.niggemann@acterna.com)
Date: Tue, 23 Apr 2002 09:41:42 +0200 (MET DST)
Subject: [Rd] Bug: persp and colors (PR#1476)
Message-ID: <200204230741.JAA02655@pubhealth.ku.dk>

Full_Name: Oliver Niggemann
Version: Windows 1.4 patched
OS: Windows NT 4.0
Submission from: (NULL) (141.169.250.14)


Hello,

I am working with the persp command. I want to change to color of the facets
according
to their z-value. The colors seems to be transposed, i.e. the color of a facet A
seems
to be used for a facet B which is a (defined?) way off....

An example:

nx <- 21 
ny <- 21 
x <- seq(-1, 1, length = nx) 
y <- seq(-1, 1, length = ny)
z <- outer(x, y, function(x,y) x^2 + y^2) 
hgt <- z / max(z) 
persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)

Now the z-value should define the color, but the color pattern seems to be
moved.

Thanks,
    Oliver Niggemann

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richard_raubertas@merck.com  Tue Apr 23 14:55:34 2002
From: richard_raubertas@merck.com (richard_raubertas@merck.com)
Date: Tue, 23 Apr 2002 15:55:34 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231355.PAA08208@pubhealth.ku.dk>

The following command,

temp <- read.table("c:/rfr/r/test.txt")

reads the text file "test.txt", which contains the following lines:

21437
21438
21419-2
21420-2
21421-2
21422-2

and produces the following result:

> temp
        V1
1 21437+0i
2 21438+0i
3     0+0i
4     0+0i
5     0+0i
6     0+0i
> 

These "numbers" are actually sample ID's, and I expected the presence of the
hyphen would
cause temp to be character or a factor, but it ends up as complex numbers.
System info:

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

Following is a diagnosis of the problem by one of my colleagues:

> From: 	Huntsinger, Reid  
> Sent:	Monday, April 22, 2002 5:15 PM
> To:	Raubertas, Richard
> Subject:	RE: R problem
> 
> [ ... ] This happens 
> because of the attempt to convert. The function type.convert 
> is called on columns with unspecified types; this tries to 
> convert to "logical, integer, numeric or complex" in that 
> order (first one that is successful wins). You have some ids 
> like 21428-2 which type.convert doesn't like as numeric but 
> will treat as complex. This in turn is due to R's hand-rolled 
> "strtoc" function, which returns 0+0i for something it 
> doesn't like. This is a valid value, so the conversion 
> "works", and all values are converted this way... 
> 
> You or I should probably alert the R people. That's not very 
> good behavior.


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 15:48:27 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 16:48:27 +0200 (MET DST)
Subject: [Rd] Website ? FAST ! (PR#1478)
Message-ID: <200204231448.QAA08683@pubhealth.ku.dk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 16:25:22 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 15:25:22
Subject: [Rd] Website ? FAST !
Message-ID: <auto-000001868174@albion.co.uk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 23 18:03:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 19:03:07 +0200
Subject: [Rd] Bug in read.table() (PR#1477)
In-Reply-To: <200204231355.PAA08208@pubhealth.ku.dk>
References: <200204231355.PAA08208@pubhealth.ku.dk>
Message-ID: <x2u1q2bb5g.fsf@blueberry.kubism.ku.dk>

richard_raubertas@merck.com writes:

> > From: 	Huntsinger, Reid  
> > Sent:	Monday, April 22, 2002 5:15 PM
> > To:	Raubertas, Richard
> > Subject:	RE: R problem
> > 
> > [ ... ] This happens 
> > because of the attempt to convert. The function type.convert 
> > is called on columns with unspecified types; this tries to 
> > convert to "logical, integer, numeric or complex" in that 
> > order (first one that is successful wins). You have some ids 
> > like 21428-2 which type.convert doesn't like as numeric but 
> > will treat as complex. This in turn is due to R's hand-rolled 
> > "strtoc" function, which returns 0+0i for something it 
> > doesn't like. This is a valid value, so the conversion 
> > "works", and all values are converted this way... 
> > 
> > You or I should probably alert the R people. That's not very 
> > good behavior.

Right, but not something we can fix for 1.5.0. Another version of the
same effect is

> scan(what=0+0i)
1: 21419-2
2: Read 1 items
[1] 0+0i

A workaround would be to use the colClasses argument, or as.is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 18:12:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 19:12:48 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231712.TAA09406@pubhealth.ku.dk>

On 23 Apr 2002, Peter Dalgaard BSA wrote:

> richard_raubertas@merck.com writes:
>
> > > From: 	Huntsinger, Reid
> > > Sent:	Monday, April 22, 2002 5:15 PM
> > > To:	Raubertas, Richard
> > > Subject:	RE: R problem
> > >
> > > [ ... ] This happens
> > > because of the attempt to convert. The function type.convert
> > > is called on columns with unspecified types; this tries to
> > > convert to "logical, integer, numeric or complex" in that
> > > order (first one that is successful wins). You have some ids
> > > like 21428-2 which type.convert doesn't like as numeric but
> > > will treat as complex. This in turn is due to R's hand-rolled
> > > "strtoc" function, which returns 0+0i for something it
> > > doesn't like. This is a valid value, so the conversion
> > > "works", and all values are converted this way...
> > >
> > > You or I should probably alert the R people. That's not very
> > > good behavior.
>
> Right, but not something we can fix for 1.5.0. Another version of the
> same effect is
>
> > scan(what=0+0i)
> 1: 21419-2
> 2: Read 1 items
> [1] 0+0i
>
> A workaround would be to use the colClasses argument, or as.is.

Actually it is already fixed: it was a very simple fix. The problem was
being detected:  it was just not being reported.  As this was just a case
of what is done in an error condition (it can't affect any valid input) I
thought it safe to fix a week before release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Apr 24 01:07:46 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 24 Apr 2002 12:07:46 +1200
Subject: [Rd] Bug: persp and colors (PR#1476)
References: <200204230741.JAA02655@pubhealth.ku.dk>
Message-ID: <010e01c1eb24$0fef5e20$7632d882@stat.auckland.ac.nz>

Hi


> I am working with the persp command. I want to change to color of the
facets
> according
> to their z-value. The colors seems to be transposed, i.e. the color of a
facet A
> seems
> to be used for a facet B which is a (defined?) way off....
>
> An example:
>
> nx <- 21
> ny <- 21
> x <- seq(-1, 1, length = nx)
> y <- seq(-1, 1, length = ny)
> z <- outer(x, y, function(x,y) x^2 + y^2)
> hgt <- z / max(z)
> persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)
>
> Now the z-value should define the color, but the color pattern seems to be
> moved.


I don't think this is a bug -- I think the problem is that the surface
produced for the z of dimension 21x21 has only 20x20 facets.  For example,
the following is not a solution, but it shows that a 20x20 colour matrix
produces the expected result ...

    persp(x, y, z, col = gray(hgt[1:20,1:20]), theta = 0, phi = 40, expand =
0.4)

... now, what you really want I guess is to calculate hgt to be some
interpolation of the four z values at the four corners of each face.  I am
due somewhere so this calculation is left as an exercise ...

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Thu Apr 25 04:55:14 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Wed, 24 Apr 2002 20:55:14 -0700
Subject: [Rd] understanding and resolving seg faults
Message-ID: <20020424205513.A32728@brandybuck>

Dear r-devel,

I am mutating rpart to do calculations on trees.
I am trying to extract information from the tree.

However, I got a seg. fault.


This is the offending line in "rpmatrix.c":  

            deltaI[0][0] = spl->improve;

(Commenting it out cures the seg fault)

I would like some advice on how to debug this.  I have allocated memory
with calloc and deltaI[0][0] should be OK, but apparently not.

thanks for your help,


For those that don't have structure of rpart drilled into their brain:

deltaI is declared in "rpmatrix.c":

void rpmatrix(struct node *me,  Sint *nodecount,   Sint *splitcount,
              Sint *catcount,   Sint *numcat,      double **dsplit,
              Sint **isplit,    Sint **csplit,     double **dnode,
              Sint **inode,     double **deltaI,      int id)
 
rpmatrix is called by "s_to_rp.c" where

ddeltaI is a pointer from an ALLOC call:
 
void s_to_rp2(Sint *n,         Sint *nsplit,    Sint *nnode,     Sint *ncat,
              Sint *numcat,    Sint *maxcat,    Sint *xvals,     Sint *which,
              double *cptable, double *dsplit,  Sint *isplit,    Sint *csplit,
              double *dnode,   double *deltaI,  Sint *inode)

    double   **ddeltaI; /* declaration of ddeltaI */

        ddeltaI = (double **) ALLOC(rp.num_y * rp.num_resp, sizeof(double ));
 
    rpmatrix(tree, nnode, nsplit, ncat, numcat,
                    ddsplit, iisplit, ccsplit, ddnode, iinode,ddeltaI ,1);

s_to_rp2 is called rpart.s


    rp    <- .C("s_to_rp2",
                       as.integer(nobs),
                       as.integer(nsplit),
                       as.integer(nodes),
                       as.integer(ncat),
                       as.integer(cats *!isord),
                       as.integer(max(cats)),
                       as.integer(xval),
                       which = integer(nobs),
                       cptable = matrix(double(numcp*cpcol), nrow=cpcol),
                       dsplit =  matrix(double(1),  nsplit,3),
                       isplit =  matrix(integer(1), nsplit,3),
                       csplit =  catmat,
                       dnode  =  matrix(double(1),  nodes, 3+numresp),
                       deltaI =  matrix(double(1),  nodes, nsplit),
                       inode  =  matrix(integer(1), nodes, 6))
 

 



-- 
Clayton Springer, Ph. D.
Sandia National Laboratories                      csprin@ca.sandia.gov
Biosystems Research Department                    (925) 294-2143
P.O. Box 969, MS 9951                fax:         (925) 294-3020
Livermore, CA, 94551-0969

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NAVMSE-EMAIL1@email1.ansi.org  Thu Apr 25 07:32:07 2002
From: NAVMSE-EMAIL1@email1.ansi.org (NAV for Microsoft Exchange-EMAIL1)
Date: Thu, 25 Apr 2002 02:32:07 -0400
Subject: [Rd] Norton AntiVirus detected a virus in a message you sent.
Message-ID: <2F81C8110D55D411882A0020356797B201CCE552@email1.ansi.org>

Norton AntiVirus found the "W32.Klez.gen@mm" virus in the attachment
"src.exe".
The file was Deleted.

Recipient of the infected attachment:  StoreManager\Inbox
Subject of the message:  A  WinXP patch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 25 07:45:42 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Apr 2002 07:45:42 +0100 (BST)
Subject: [Rd] understanding and resolving seg faults
In-Reply-To: <20020424205513.A32728@brandybuck>
Message-ID: <Pine.GSO.4.44.0204250732510.24333-100000@auk.stats>

There is no such line in rpart's rpmatrix.c!

My guess is that you are misleading us, and that the segfault is in your
additions to rpart.  One of the issues covered by Open Source licences
is not misrepresenting code by not making clear that you have altered it.

Your debugger will tell you what is wrong with your C coding.  My guess
here is that as deltaI is a pointer to a pointer and you only mentioned
allocating deltaI, you failed to allocate deltaI[0].


On Wed, 24 Apr 2002, Clayton Springer wrote:

> Dear r-devel,
>
> I am mutating rpart to do calculations on trees.
> I am trying to extract information from the tree.
>
> However, I got a seg. fault.
>
>
> This is the offending line in "rpmatrix.c":
>
>             deltaI[0][0] = spl->improve;
>
> (Commenting it out cures the seg fault)

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Fri Apr 26 10:05:55 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Fri, 26 Apr 2002 11:05:55 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260905.LAA29160@pubhealth.ku.dk>

Full_Name: Hugh C. Pumphrey
Version: 1.4.1
OS: Linux (Debian Woody)
Submission from: (NULL) (129.215.133.170)


The function readChar() appears to have some type of problem with memory
allocation.
I don't know if "memory leak" is the correct term but if one uses readChar()
many
times, the R binary grows in size until it eats all your memory and swap space.

The code enclosed below demonstrates the problem. As-is, it causes the size
of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
The old Rstreams package did not do this. Also, the function readBin() does
not suffer from this problem.

## Stress read/write of files in binary mode to see if there is a memory leak
## Now, readBin seems to be innocent. The memory leak is in readChar
header <-paste("This is a very long and boring text header which appears",
               "at the beginning of each chunk of an even longer and duller",
               "file which contains mostly binary data")
nchars <- nchar(header)
nrecs <-2000
ntries <- 100

## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  ## This writes null-ended strings unless you use the eos=NULL option
  writeChar(header,stream,eos=NULL)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    iheader <- readChar(stream,nchars)
  }
  close(stream)
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 26 10:47:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 26 Apr 2002 11:47:04 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260947.LAA29256@pubhealth.ku.dk>

It's not really a memory leak, more that R_alloc was at the time
incorrectly documented and do_readchar needs to reset vmax.  (Rstreams
used .C, and that did reset vmax, whereas .Internal does not.)

It's actually being done rather inefficiently, as this seems an unusual
case.  For 1.6.0 I am planning on using alloca (where available) for this
sort of short-term buffer.

I'll put the two-line fix in for 1.5.0.


On Fri, 26 Apr 2002 hcp@met.ed.ac.uk wrote:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
>
>
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
>
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays.
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.
>
> ## Stress read/write of files in binary mode to see if there is a memory leak
> ## Now, readBin seems to be innocent. The memory leak is in readChar
> header <-paste("This is a very long and boring text header which appears",
>                "at the beginning of each chunk of an even longer and duller",
>                "file which contains mostly binary data")
> nchars <- nchar(header)
> nrecs <-2000
> ntries <- 100
>
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   ## This writes null-ended strings unless you use the eos=NULL option
>   writeChar(header,stream,eos=NULL)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     iheader <- readChar(stream,nchars)
>   }
>   close(stream)
> }
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:48:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:48:46 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <200204260905.LAA29160@pubhealth.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
Message-ID: <x2wuuussch.fsf@blueberry.kubism.ku.dk>

hcp@met.ed.ac.uk writes:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
> 
> 
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
> 
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.

Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
allocated but remains protected from garbage collection.

I doubt that this is something we'd dare try and fix before the
release on Monday though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:51:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:51:17 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <x2wuuussch.fsf@blueberry.kubism.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
 <x2wuuussch.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2sn5iss8a.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > The code enclosed below demonstrates the problem. As-is, it causes the size
> > of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> > The old Rstreams package did not do this. Also, the function readBin() does
> > not suffer from this problem.
> 
> Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
> allocated but remains protected from garbage collection.
> 
> I doubt that this is something we'd dare try and fix before the
> release on Monday though.

...unless someone happens to know exactly what is going on (as Brian
apparently does)!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MAIL2-SA@taishinbank.com.tw  Fri Apr 26 14:25:15 2002
From: MAIL2-SA@taishinbank.com.tw (System Attendant)
Date: Fri, 26 Apr 2002 21:25:15 +0800
Subject: [Rd] ScanMail Message: To Sender, virus found and action taken.
Message-ID: <0750810CC32CD511828F00B0D0E1052201B35B4B@mail2>

ScanMail for Microsoft Exchange has blocked a file attachment(s).

Place = doko@taishinbank.com.tw
Sender = r-devel
Subject = Honey
Delivery Time = April 26, 2002 (Friday) 21:25:14

Action on file attachment(s):

Message from recipient's administrator:
&#35686;&#21578;!!!
&#38450;&#27602;&#31995;&#32113;&#20597;&#28204;&#20320;&#25152;&#23492;&#20
986;&#38651;&#23376;&#37109;&#20214;&#38468;&#20214;&#21547;&#26377;&#30149;
&#27602;&#65292;&#24050;&#34987;&#38450;&#27602;&#31995;&#32113;&#33258;&#21
205;&#21034;&#38500;
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From poizot@cnam.fr  Fri Apr 26 16:19:48 2002
From: poizot@cnam.fr (poizot@cnam.fr)
Date: Fri, 26 Apr 2002 17:19:48 +0200 (MET DST)
Subject: [Rd] Can't install packages (PR#1486)
Message-ID: <200204261519.RAA00213@pubhealth.ku.dk>

Hello,

I install R under Mandrake Linux 8.2.
R itself work fine, but I had an error to install packages, i.e. fields, geoR 
and geoRglm :

$: R CMD INSTALL geoRglm_0.4-3.tar.gz
Installing *source* package `geoRglm' ...
 libs
gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp 
-D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro 
-march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o 
geoRgeoRglm.o
make: gcc-3.0.1 : Commande introuvable
make: *** [geoRgeoRglm.o] Erreur 127
ERROR: compilation failed for package `geoRglm

I suppose that the version of my compiler is not correct, but I didn't find
where to change that settings.

-- 
Cordialement.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel POIZOT
CNAM/INTECHMER
B.P. 324
50103 Cherbourg Cedex
Tl : 33 (0)2 33 88 73 42
Fax : 33 (0)2 33 88 73 39
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Apr 26 16:24:34 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Apr 2002 08:24:34 -0700 (PDT)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204260822130.40456-100000@homer11.u.washington.edu>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm
>
> I suppose that the version of my compiler is not correct, but I didn't find
> where to change that settings.

You could change it in R/etc/Makeconf, but it might not work.  If you
don't have the compiler used to build R there is no guarantee that the
flags and options will be correct or that the output will be binary
compatible.

	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Fri Apr 26 17:25:52 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Fri, 26 Apr 2002 18:25:52 +0200 (CEST)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0204261810360.1884-100000@localhost.localdomain>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm

You are using the RPM package compiled for Mandrake 8.1, which does have
gcc-3.0.1. You need a Mandrake 8.2 package.

Mandrake 8.2 distribution includes an RPM package for R 1.4.1 which for
some strange reason is not distributed on the CD's but is downloadable
from the mandrake 8.2 mirror sites.
Unfortunately, as I have already signalled to the packager
(ghibo@mandrakesoft.com), there seem to be a couple of small bugs in this
package; specifically on uninstalling it the preun script produces an
error message. I would therefore not trust it.

You can do one of various things:

1) Download the SRPM from CRAN and recompile the RPM for your system.
That's what the SRPM is there for. The readme file explains what you need
to do.

2) Wait a few days. When R 1.5.0 comes out I mean to produce RPM's for
Mandrake 8.1 and 8.2 before erasing 8.1 from my HD and going over to 8.2
completely.

3) I think this dirty hack would work quite well: just make a symlink

ln -s /usr/bin/gcc-3.0.3 /usr/bin/gcc-3.0.1

Mandrake 8.2 has gcc-3.0.3.

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Sat Apr 27 15:31:12 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 27 Apr 2002 10:31:12 -0400
Subject: [Rd] Question about .Call
Message-ID: <1019917872.3911.3.camel@keittlab-6>

Can a C function wrapped with .Call return void? Or must it return a
valid SEXP? Thnx.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sat Apr 27 15:35:59 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sat, 27 Apr 2002 09:35:59 -0500
Subject: [Rd] Question about .Call
In-Reply-To: <1019917872.3911.3.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Sat, Apr 27, 2002 at 10:31:12AM -0400
References: <1019917872.3911.3.camel@keittlab-6>
Message-ID: <20020427093559.A22913@nokomis.stat.umn.edu>

On Sat, Apr 27, 2002 at 10:31:12AM -0400, Timothy H. Keitt wrote:
> Can a C function wrapped with .Call return void? Or must it return a
> valid SEXP? Thnx.
> 
> Tim
> 

It must return a valid SEXP.  R_NilValue is a good choice if you don't
have anything real to return.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Mon Apr 29 14:25:56 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Mon, 29 Apr 2002 15:25:56 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291325.PAA12079@pubhealth.ku.dk>


A few days ago, I wrote
> >
> > The function readChar() appears to have some type of problem with
> >memory  allocation.

On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:

> It's not really a memory leak, more that R_alloc was at the time
> incorrectly documented and do_readchar needs to reset vmax.  
[snip] 
> I'll put the two-line fix in for 1.5.0.

I originally said that this problem didn't occur in readBin(). That seems
to be true if you are reading 8-byte data.  However, I stressed this a bit
harder, and found that if you use the size=4 keyword then the problem
_does_ appear with readBin(). I enclose an example below.

Apologies if the original bug report was misleading and again, many thanks

Hugh



## Stress read/write of files in binary mode to see if there is a
## memory problem. Now, readBin seems to be innocent if the default
## (8-byte) reals are used, but there is a problem reading 4-bute reals.

nrecs <-2000
ntries <- 100
npts <- 300
gunge <- 1:npts
## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  writeBin(gunge,"numeric",size=4)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    ## Seems to be worse if reads are in several small chunks
    ## 
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)    
    bunge <- readBin(stream,"numeric",npts-60,size=4)
    
  }
  close(stream)
}


============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr 29 14:28:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 29 Apr 2002 15:28:36 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291328.PAA12136@pubhealth.ku.dk>

Yes, we know of a couple of other leaks, which will be fixed for 1.6.0
(and perhaps 1.5.1).

BDR

On Mon, 29 Apr 2002, H C Pumphrey wrote:

>
> A few days ago, I wrote
> > >
> > > The function readChar() appears to have some type of problem with
> > >memory  allocation.
>
> On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:
>
> > It's not really a memory leak, more that R_alloc was at the time
> > incorrectly documented and do_readchar needs to reset vmax.
> [snip]
> > I'll put the two-line fix in for 1.5.0.
>
> I originally said that this problem didn't occur in readBin(). That seems
> to be true if you are reading 8-byte data.  However, I stressed this a bit
> harder, and found that if you use the size=4 keyword then the problem
> _does_ appear with readBin(). I enclose an example below.
>
> Apologies if the original bug report was misleading and again, many thanks
>
> Hugh
>
>
>
> ## Stress read/write of files in binary mode to see if there is a
> ## memory problem. Now, readBin seems to be innocent if the default
> ## (8-byte) reals are used, but there is a problem reading 4-bute reals.
>
> nrecs <-2000
> ntries <- 100
> npts <- 300
> gunge <- 1:npts
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   writeBin(gunge,"numeric",size=4)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     ## Seems to be worse if reads are in several small chunks
>     ##
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",npts-60,size=4)
>
>   }
>   close(stream)
> }
>
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 29 19:01:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 11:01:14 -0700
Subject: [Rd] finding vignettes for new users...
Message-ID: <87bsc2bd05.fsf@jeeves.blindglobe.net>


What would be the best way to point new users to the PDF vignette
file?   (it would be just jolly if library(vignette=packagename) fired
up acrobat reader :-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Mon Apr 29 20:06:42 2002
From: liang@stat.berkeley.edu (liang@stat.berkeley.edu)
Date: Mon, 29 Apr 2002 21:06:42 +0200 (MET DST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
Message-ID: <200204291906.VAA14141@pubhealth.ku.dk>

Full_Name: Gang Liang
Version: 1.4.1
OS: mandrake-8.2
Submission from: (NULL) (128.32.81.135)


tseries version: 0.9-1
quadprog version: 1.4-4
mva version: 1.4.1

version:
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                

The tseries package can be loaded successfully and most functions are running
fine, but garch will cause a segmentation fault. I did a very simple debug, and
found the problem lied in function call: .C( "pred_garch", ... ). BTW, my gcc
version is 2.96. If I compile the R and all packages by using gcc 3.0.4, the
problem persists.

The following are the output when I am trying to run the example in garch help:
> n <- 1100
> a <- c(0.1, 0.5, 0.2)  # ARCH(2) coefficients
> e <- rnorm(n)  
> x <- double(n)
> x[1:2] <- rnorm(2, sd = a[1]/(1.0-a[2]-a[3])) 
> for(i in 3:n)  # Generate ARCH(2) process
+ {
+   x[i] <- e[i]*sqrt(a[1]+a[2]*x[i-1]^2+a[3]*x[i-2]^2)
+ }
> x <- ts(x[101:1100])
> x.arch <- garch(x, order = c(0,2))

 ***** ESTIMATION WITH ANALYTICAL GRADIENT ***** 


     I     INITIAL X(I)        D(I)

     1     0.332467E+00     0.100E+01
     2     0.500000E-01     0.100E+01
     3     0.500000E-01     0.100E+01

    IT   NF       F        RELDF    PRELDF    RELDX   STPPAR   D*STEP   NPRELDF

     0    1 -0.993E+02
     1    3 -0.148E+03  0.33E+00  0.40E+00  0.1E+00  0.6E+04  0.1E+00  0.12E+04
     2    5 -0.186E+03  0.21E+00  0.24E+00  0.2E+00  0.8E+01  0.1E+00  0.13E+04
     3    6 -0.208E+03  0.10E+00  0.14E+00  0.2E+00  0.1E+02  0.1E+00  0.50E+02
     4    8 -0.211E+03  0.17E-01  0.44E-01  0.6E-01  0.1E+02  0.4E-01  0.61E+01
     5    9 -0.215E+03  0.17E-01  0.21E-01  0.6E-01  0.2E+01  0.4E-01  0.20E+01
     6   10 -0.216E+03  0.51E-02  0.20E-01  0.9E-01  0.2E+01  0.8E-01  0.78E+00
     7   11 -0.219E+03  0.11E-01  0.44E-01  0.2E+00  0.2E+01  0.2E+00  0.12E+01
     8   13 -0.220E+03  0.57E-02  0.12E-01  0.2E-01  0.6E+02  0.2E-01  0.10E+01
     9   14 -0.221E+03  0.31E-02  0.36E-02  0.2E-01  0.2E+01  0.2E-01  0.88E-01
    10   15 -0.223E+03  0.92E-02  0.11E-01  0.4E-01  0.2E+01  0.3E-01  0.71E-01
    11   16 -0.225E+03  0.11E-01  0.13E-01  0.8E-01  0.9E+00  0.7E-01  0.21E-01
    12   17 -0.227E+03  0.60E-02  0.60E-02  0.6E-01  0.6E+00  0.7E-01  0.69E-02
    13   18 -0.227E+03  0.12E-02  0.11E-02  0.4E-01  0.0E+00  0.4E-01  0.11E-02
    14   19 -0.227E+03  0.53E-04  0.51E-04  0.6E-02  0.0E+00  0.7E-02  0.51E-04
    15   20 -0.227E+03  0.50E-06  0.57E-06  0.9E-03  0.0E+00  0.9E-03  0.57E-06
    16   21 -0.227E+03  0.13E-07  0.13E-07  0.3E-04  0.0E+00  0.4E-04  0.13E-07
    17   22 -0.227E+03  0.12E-10  0.12E-10  0.2E-05  0.0E+00  0.3E-05  0.12E-10

 ***** RELATIVE FUNCTION CONVERGENCE *****

 FUNCTION    -0.226852E+03   RELDX        0.238E-05
 FUNC. EVALS      22         GRAD. EVALS      18
 PRELDF       0.117E-10      NPRELDF      0.117E-10

     I      FINAL X(I)        D(I)          G(I)

     1    0.102547E+00     0.100E+01    -0.340E-04
     2    0.517733E+00     0.100E+01    -0.185E-04
     3    0.187292E+00     0.100E+01     0.353E-05


Process R segmentation fault at Mon Apr 29 12:03:14 2002


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Apr 29 20:16:38 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 29 Apr 2002 15:16:38 -0400
Subject: [Rd] methods package:  inheriting from structures; group generics
Message-ID: <3CCD9C16.D59D6AAA@research.bell-labs.com>

Now that 1.5 is released, some changes have been committed to the
r-devel version of the methods package.

They are mostly bug fixes (or making things work more as users would
expect) in two areas:

1.  new classes that extend one of the basic datatypes that have
attributes but had no class attribute in S3 (e.g., "matrix" or "ts"). 
The previous code didn't handle the attributes properly and the new()
function didn't work as it should.

2.  group generic functions when the members of the group were
primitives.  Because the members of the group are never actual generic
functions (for reasons of efficiency), there was no easy way to turn
method dispatch on, and the callGeneric function was unable to find the
generic definition.

It is still necessary to turn method dispatch on in this case (see
?setGeneric) by calling something like:

 setGroupGeneric("Arith")

This requirement may be dropped later, depending on experience.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 29 20:34:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Apr 2002 21:34:37 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <200204291906.VAA14141@pubhealth.ku.dk>
References: <200204291906.VAA14141@pubhealth.ku.dk>
Message-ID: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>

liang@stat.berkeley.edu writes:

> Full_Name: Gang Liang
> Version: 1.4.1
> OS: mandrake-8.2
> Submission from: (NULL) (128.32.81.135)
> 
> 
> tseries version: 0.9-1

Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
example(garch) works fine with 1.5.0 (well, last nights snapshot).


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brogar27@hotmail.com  Tue Apr 30 01:02:55 2002
From: brogar27@hotmail.com (brogar 27)
Date: Tue, 30 Apr 2002 01:02:55 +0100
Subject: [Rd] makefile for standalone lib
Message-ID: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>

It appears the Makefile.win in
src/nmath/standalone might need some modification since

cd src/nmath/gnuwin32
make -f Makefile.win
make -f Makefile.win test

fails. However if I remove libRmath.a from line 15

OR

modify lines 67/68 replacing Rmath.a with libRmath.a then
make -f Makefile.win test

goes as expected.




_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue Apr 30 01:39:56 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>

Thanks, Peter!

Yes, I tried the latest package of tseries, but I guess I made a mistake
about the version number. Okay I am going to try the development version
of R on my machine.

BTW, there are some minor typos in tseries package's help package, such as
some links named temp -- I am quite sure it's really temp, :).

Regards,

Gang

On 29 Apr 2002, Peter Dalgaard BSA wrote:

> liang@stat.berkeley.edu writes:
>
> > Full_Name: Gang Liang
> > Version: 1.4.1
> > OS: mandrake-8.2
> > Submission from: (NULL) (128.32.81.135)
> >
> >
> > tseries version: 0.9-1
>
> Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
> example(garch) works fine with 1.5.0 (well, last nights snapshot).
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 06:13:59 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 07:13:59 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87bsc2bd05.fsf@jeeves.blindglobe.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
Message-ID: <15566.10263.747991.415753@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> What would be the best way to point new users to the PDF vignette
> file?   (it would be just jolly if library(vignette=packagename) fired
> up acrobat reader :-).

The current procedure is that

	help(package = "FOO")
	library(help = "FOO")

points you to the vignettes in package FOO (provided that there are
some).  How to actually view them is something we need to carefully
consider: e.g., an alternative would be to integrate viewing pdf into
our current HTML help system.  I am not saying that this is a good idea
though as I think we want to move to something that can render HTML and
be controlled from R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 06:27:30 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 22:27:30 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <15566.10263.747991.415753@mithrandir.hornik.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
 <15566.10263.747991.415753@mithrandir.hornik.net>
Message-ID: <87znzlu56l.fsf@jeeves.blindglobe.net>

>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> A J Rossini writes:
    >> What would be the best way to point new users to the PDF vignette
    >> file?   (it would be just jolly if library(vignette=packagename) fired
    >> up acrobat reader :-).

    kurt> The current procedure is that

    kurt> 	help(package = "FOO")
    kurt> 	library(help = "FOO")

    kurt> points you to the vignettes in package FOO (provided that there are
    kurt> some).  How to actually view them is something we need to carefully
    kurt> consider: e.g., an alternative would be to integrate viewing pdf into
    kurt> our current HTML help system.  I am not saying that this is a good idea
    kurt> though as I think we want to move to something that can render HTML and
    kurt> be controlled from R.

I'm more fond of the Unix way -- schlep the docs off to an appropriate
viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
appropriate for Windows or Macs).

However, I'm being slow as usual -- of course most HTML browsers
"support" PDF viewers (as plugins or otherwise).

I can at least code that for local or restricted use.  Thanks, Kurt...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 07:28:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 Apr 2002 07:28:21 +0100 (BST)
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>

On 29 Apr 2002, A.J. Rossini wrote:

> >>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
> >>>>> A J Rossini writes:
>     >> What would be the best way to point new users to the PDF vignette
>     >> file?   (it would be just jolly if library(vignette=packagename) fired
>     >> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that there are
>     kurt> some).  How to actually view them is something we need to carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing pdf into
>     kurt> our current HTML help system.  I am not saying that this is a good idea
>     kurt> though as I think we want to move to something that can render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).

`the Unix way'?   That is the one OS I know that does not come with
integrated support for doing that.  Under Windows (and I believe MacOS) you
just ask the OS to show the file, and it uses a central repository of
methods (which the user can tune) to choose how to do so.  (In R you call
shell.exec().)  Most versions ask the user what to do if no method is
registered.

> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 08:44:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 08:44:34 +0100 (BST)
Subject: [Rd] makefile for standalone lib
In-Reply-To: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>
Message-ID: <Pine.LNX.4.31.0204300833260.4436-100000@gannet.stats>

You appear to be working on Windows, although you omitted to tell us.

Which version of R is this?

Neither of those fixes is correct.  As the README in that directory says

   Under Windows, use make -f Makefile.win. This makes Rmath.dll with
   import library libRmath.a.

and Rmath.a is not the import library.

My belief is that it worked in 1.4.0, but that it was never tested for
1.5.0, and the Makefile rules (in MkRules) had been changed to allow
Rblas.dll to be built.  If this is 1.5.0, add the lines

Rmath.def: sunif.o $(SOURCES_NMATH:.c=.o)
	$(ECHO) LIBRARY $* > $@
	$(ECHO) EXPORTS >> $@
	$(NM) $^ > Defs
	$(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $@
	$(RM) Defs
libRmath.a: Rmath.def

to Makefile.win.

On Tue, 30 Apr 2002, brogar 27 wrote:

> It appears the Makefile.win in
> src/nmath/standalone might need some modification since
>
> cd src/nmath/gnuwin32
> make -f Makefile.win
> make -f Makefile.win test
>
> fails. However if I remove libRmath.a from line 15
>
> OR
>
> modify lines 67/68 replacing Rmath.a with libRmath.a then
> make -f Makefile.win test
>
> goes as expected.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hgoehlma@prdbe.jnj.com  Tue Apr 30 10:20:33 2002
From: hgoehlma@prdbe.jnj.com (hgoehlma@prdbe.jnj.com)
Date: Tue, 30 Apr 2002 11:20:33 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300920.LAA17721@pubhealth.ku.dk>

Full_Name: Hinrich Ghlmann
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (148.177.130.121)


Hi all,

I've searched the known bugs and hopefully I did not oversee this one...

When I have done a normal
zz<-princomp(na.omit(raw.data))

and I then draw a biplot with
biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))

the x axis gets set properly, but the y axis remains unchanged.

Cheers,
hinrich   d8-)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 10:38:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 11:38:00 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300938.LAA17948@pubhealth.ku.dk>

You are using biplot.princomp here.

It works for me:

# example(biplot.princomp)
data(USArrests)
biplot(princomp(USArrests))
biplot(princomp(USArrests), ylim=c(-0.5, 0.5))

Note that there are two y axes, and both are changed.

Please read the section in the FAQ about supplying a reproducible example
if you think you have found a bug.

BTW, setting the axes on a princomp biplot seems unlikely to be
statistically sound to me.


On Tue, 30 Apr 2002 hgoehlma@prdbe.jnj.com wrote:

> Full_Name: Hinrich Ghlmann
> Version: 1.4.1
> OS: Windows 2000
> Submission from: (NULL) (148.177.130.121)
>
>
> Hi all,
>
> I've searched the known bugs and hopefully I did not oversee this one...
>
> When I have done a normal
> zz<-princomp(na.omit(raw.data))
>
> and I then draw a biplot with
> biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))
>
> the x axis gets set properly, but the y axis remains unchanged.
>
> Cheers,
> hinrich   d8-)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 14:07:37 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 Apr 2002 06:07:37 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
References: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
Message-ID: <87r8kxtjvq.fsf@jeeves.blindglobe.net>

>>>>> "brian" == Brian D Ripley <Prof> writes:

    >> I'm more fond of the Unix way -- schlep the docs off to an appropriate
    >> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
    >> appropriate for Windows or Macs).

    brian> `the Unix way'?   That is the one OS I know that does not come with
    brian> integrated support for doing that.  Under Windows (and I believe MacOS) you
    brian> just ask the OS to show the file, and it uses a central repository of
    brian> methods (which the user can tune) to choose how to do so.  (In R you call
    brian> shell.exec().)  Most versions ask the user what to do if no method is
    brian> registered.

Brian - I'm referring to the pipe/separate tools approach, which is
commonly referred to in the literature (late 80s, early 90s, on
computing tool design) as "the unix way", NOT to automated discovery,
which is the integrated/monolithic way (i.e. the 2 other OSs which you
mention).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:14:27 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:14:27 +0200 (MET DST)
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
Message-ID: <200204301414.QAA21844@pubhealth.ku.dk>


Non of these errors occured in earliers versions of R.

> library(tcltk)
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
  can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/local/R/lib/R/library/tcltk/libs/tcltk.so":
  /usr/local/R/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so":
  /opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = alphaev6-unknown-linux-gnu
 arch = alphaev6
 os = linux-gnu
 system = alphaev6, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

No errors on this platform:

# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:42:35 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:42:35 +0200 (MET DST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
Message-ID: <200204301442.QAA22075@pubhealth.ku.dk>


The configure script failed on tk on several platforms. One is
given below. This did not happen on versions of R older than 1.5.0.

Message from configure:

configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

This was in config.log, the command on a single line:

configure:21361: cc -E -I/opt_local/opt/readline/include
  -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
  -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
  -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
  -I/opt_local/opt/R/include # no special path needed
  -I/opt_local/opt/tcl-8.0/include conftest.c
cc: warning 485: Can't open "#".
cc: warning 485: Can't open "no".
cc: warning 485: Can't open "special".
cc: warning 485: Can't open "path".
cc: warning 485: Can't open "needed".

I had to edit tkConfig.sh to solve this problem. This line:

TK_XINCLUDES='# no special path needed'

changed to this:

TK_XINCLUDES=


After this fix, R was configured for tcl/tk, and the package
tcltk seems to work OK (at least on this platform).



# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:51:18 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 16:51:18 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>


The version of maketitle.pl in R 1.5.0 does not work with
version 4.004 of Perl, so I use maketitle.pl from R version
1.4.1 instead. Can I expect this to cause any problems, for
instance when I build a package?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Apr 30 16:06:44 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 30 Apr 2002 17:06:44 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
References: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
Message-ID: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
>>>>> Peter Kleiweg (PK) wrote:

  > The version of maketitle.pl in R 1.5.0 does not work with
  > version 4.004 of Perl, so I use maketitle.pl from R version
  > 1.4.1 instead. Can I expect this to cause any problems, for
  > instance when I build a package?

Hmm, building R with perl version 4 is not possible at all
... maketitle.pl being the smallest problem you will run into. Did you
mean version 5.004?

The output of maketitle.pl from 1.4.1 should be fine ... only the code
is now much better (7 lines of code versus more than 70).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Apr 30 16:17:25 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 30 Apr 2002 10:17:25 -0500
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>


> The version of maketitle.pl in R 1.5.0 does not work with
> version 4.004 of Perl, so I use maketitle.pl from R version

You presumabely mean 5.004.

In either case, you probably want to upgrade. Even 5.005 is "old",
so the upgrade to 5.6.1 is probably advisable.

> 1.4.1 instead. Can I expect this to cause any problems, for
> instance when I build a package?

Possibly, though probably only Kurt et al could say for sure.

Dirk


-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 16:46:44 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 17:46:44 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.33.0204301713310.29798-100000@kleigh.nl>

Friedrich.Leisch@ci.tuwien.ac.at scribeva...

> >>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
> >>>>> Peter Kleiweg (PK) wrote:
>
>   > The version of maketitle.pl in R 1.5.0 does not work with
>   > version 4.004 of Perl, so I use maketitle.pl from R version
>   > 1.4.1 instead. Can I expect this to cause any problems, for
>   > instance when I build a package?
>
> Hmm, building R with perl version 4 is not possible at all
> ... maketitle.pl being the smallest problem you will run into. Did you
> mean version 5.004?

Yes, version 5.004

> The output of maketitle.pl from 1.4.1 should be fine ... only the code
> is now much better (7 lines of code versus more than 70).

Thanks.

There is another script that only works with Perl 5.005: Rdindex
Is it save to use the old version for this script too?

(Sorry, I should have checked first. Could have done this in one
message.)

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 30 17:09:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Apr 2002 18:09:12 +0200
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
In-Reply-To: <200204301414.QAA21844@pubhealth.ku.dk>
References: <200204301414.QAA21844@pubhealth.ku.dk>
Message-ID: <x2vga91847.fsf@blueberry.kubism.ku.dk>

kleiweg@let.rug.nl writes:

> Non of these errors occured in earliers versions of R.
> 
> > library(tcltk)
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
>   can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in library(tcltk) : .First.lib failed
> 
> # Tk's version number.
> TK_VERSION='8.0'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='0'
> TK_PATCH_LEVEL='.5'
...
> ========================
> 
> No errors on this platform:
> 
> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'


That's likely due to the time those functions got introduced in Tcl...
I actually thought they were in Tcl8.x, but it seems necessary that x
>= 1. The functions are used extensively, so an upgrade of Tcl/Tk is
suggested. 

[Poking a bit around reveal that Tcl_SetVar2Ex was Tcl_SetVar2 in 8.0
and the Get versions similar, but I can't seem to locate anything
about Tcl_GetString.]
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue Apr 30 21:14:09 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 30 Apr 2002 22:14:09 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <D45B85C4-5C76-11D6-AE75-003065CC4CB8@mclink.it>

Under MacOS/MacOSX it is possibile to render html using some system APIs.

stefano

On Marted, aprile 30, 2002, at 07:27 , A.J. Rossini wrote:

>>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
>>>>>> A J Rossini writes:
>>> What would be the best way to point new users to the PDF vignette
>>> file?   (it would be just jolly if library(vignette=packagename) fired
>>> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that 
> there are
>     kurt> some).  How to actually view them is something we need to 
> carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing 
> pdf into
>     kurt> our current HTML help system.  I am not saying that this is a 
> good idea
>     kurt> though as I think we want to move to something that can 
> render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).
>
> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...
>
> best,
> -tony
>
> --
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use 
> Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my friday location is usually completely unpredictable.)
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:39:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:39:22 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
References: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
Message-ID: <15566.58586.18835.665434@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

>> The version of maketitle.pl in R 1.5.0 does not work with
>> version 4.004 of Perl, so I use maketitle.pl from R version

> You presumabely mean 5.004.

> In either case, you probably want to upgrade. Even 5.005 is "old",
> so the upgrade to 5.6.1 is probably advisable.

Correct.  R 1.6 will unconditionally assume 5.005.

>> 1.4.1 instead. Can I expect this to cause any problems, for
>> instance when I build a package?

> Possibly, though probably only Kurt et al could say for sure.

As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
5.6.1.

Best
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:41:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:41:55 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <200204301442.QAA22075@pubhealth.ku.dk>
References: <200204301442.QAA22075@pubhealth.ku.dk>
Message-ID: <15566.58739.585706.678109@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> The configure script failed on tk on several platforms. One is
> given below. This did not happen on versions of R older than 1.5.0.

> Message from configure:

> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

> This was in config.log, the command on a single line:

> configure:21361: cc -E -I/opt_local/opt/readline/include
>   -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
>   -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
>   -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
>   -I/opt_local/opt/R/include # no special path needed
>   -I/opt_local/opt/tcl-8.0/include conftest.c
> cc: warning 485: Can't open "#".
> cc: warning 485: Can't open "no".
> cc: warning 485: Can't open "special".
> cc: warning 485: Can't open "path".
> cc: warning 485: Can't open "needed".

> I had to edit tkConfig.sh to solve this problem. This line:

> TK_XINCLUDES='# no special path needed'

> changed to this:

> TK_XINCLUDES=


> After this fix, R was configured for tcl/tk, and the package
> tcltk seems to work OK (at least on this platform).

A bug in your Tcl/Tk installation, I think.

Which version of Linux is this?

-k

> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'

> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R

> Search Path:
>  .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Apr  1 17:23:04 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:23:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011623.SAA05909@pubhealth.ku.dk>

(I sent this earlier, but it seems not to have come through, due to
problems witkh my system)


The following command from appendix A, "a sample session", isnt correct:

contour(x, y, fa, nint=15) 

when used R protests:

Warning message: 
parameter "nint" couldn't be set in high-level plot() function 


it should probably be nlevels, as used a few lines before. 

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Apr  1 17:24:23 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:24:23 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011624.SAA05923@pubhealth.ku.dk>

(I tried to send this earlier, but it doesnt seem to have come through,
due to 
problems on my system)

Hola:

Both cannot be correct:

> m <- matrix(1:4, 2)
> svd(m)
$d
[1] 5.4649857 0.3659662

$u
           [,1]       [,2]
[1,] -0.5760484 -0.8174156
[2,] -0.8174156  0.5760484

$v
           [,1]       [,2]
[1,] -0.4045536  0.9145143
[2,] -0.9145143 -0.4045536

> La.svd(m)
$d
[1] 1.126182e-301 4.226051e-314

$u
            [,1]         [,2]
[1,] 0.002112565  0.999997769
[2,] 0.999997769 -0.002112565

$vt
           [,1]        [,2]
[1,] 7.5449e-13  1.0000e+00
[2,] 1.0000e+00 -7.5449e-13

as m is an invertible matrix, the results of La.svd seems wrong.

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Apr  1 17:33:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 1 Apr 2002 08:33:28 -0800 (PST)
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204010831260.62530-100000@homer36.u.washington.edu>

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>

Yes it did. It's PR#1363, and it's fixed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  1 17:35:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 2002 18:35:09 +0200
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
References: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <x2sn6fqsw2.fsf@blueberry.kubism.ku.dk>

kjetilh@umsanet.edu.bo writes:

> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
> 
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
> 
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
> 
> as m is an invertible matrix, the results of La.svd seems wrong.
> 
> This is R1.4.1 on windows 98.

It is not happening in recent development versions on Linux.

And your previous report *did* come through:

    o   La.svd() was not coercing integer matrices. (PR#1363)

(Moved to Low-level-fixed, so a bit difficult to spot if you didn't
keep the PR#, I grant you...)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brower@bst.rochester.edu  Mon Apr  1 21:19:09 2002
From: brower@bst.rochester.edu (brower@bst.rochester.edu)
Date: Mon, 1 Apr 2002 22:19:09 +0200 (MET DST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
Message-ID: <200204012019.WAA06615@pubhealth.ku.dk>

Full_Name: Christine Brower
Version: 1.4.1
OS: Solaris 8
Submission from: (NULL) (128.151.148.205)


Configure options fails with following message:
./configure --with-f77
loading cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.8
loading site script ./config.site
loading build specific script ./config.site
checking for pwd... /usr/bin/pwd
checking whether builddir is srcdir... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/disk/d5/a/R,v1.4.1/R/tools/install-sh -c
checking for javac... /usr/bin/javac
checking for less... /usr/bin/less
checking for perl... /usr/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... /usr/ucc/bin/dvips
checking for tex... /usr/ucc/bin/tex
checking for latex... /usr/ucc/bin/latex
checking for makeindex... /usr/ucc/bin/makeindex
checking for pdftex... no
checking for pdflatex... no
configure: warning: you cannot build PDF versions of the R manuals
checking for makeinfo... /usr/ucc/bin/makeinfo
checking for unzip... /usr/bin/unzip
checking for zip... /usr/bin/zip
checking for Cygwin environment... no
checking for mingw32 environment... no
checking build system type... sparc-sun-solaris2.8
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for /usr/ccs/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
checking how to recognise dependant libraries... pass_all
checking for object suffix... o
checking for executable suffix... no
checking command to parse /usr/ccs/bin/nm -p output... ok
checking for dlfcn.h... yes
checking for ranlib... (cached) ranlib
checking for strip... strip
checking for objdir... .libs
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... 
checking if gcc supports -fno-rtti -fno-exceptions... yes
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking dynamic linker characteristics... solaris2.8 ld.so
checking if libtool supports shared libraries... yes
creating libtool
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for main in -lm... yes
defining F77 to be f77
checking whether the Fortran 77 compiler (f77  ) works... yes
checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... no
checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib 
-L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
/a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
checking whether f77 appends underscores... yes
checking whether f77 and gcc agree on int and double... yes
checking whether f77 and gcc agree on double complex... yes
checking whether f77 supports -c -o FILE.lo... no
checking for c++... c++
checking whether the C++ compiler (c++  ) works... no
configure: error: installation or configuration problem: C++ compiler cannot
create executables.
----------
config.log reads:
----------
configure:7263: checking whether f77 supports -c -o FILE.lo
configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
f77: Suffix mismatch between -o and produced file (should produce .o)
configure:7565: checking for c++
configure:7597: checking whether the C++ compiler (c++  ) works
configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
-L/usr/local/lib 1>&5
ld: fatal: library -lstdc++: not found
ld: fatal: File processing errors. No output written to conftest
configure: failed program was:

#line 7608 "configure"
#include "confdefs.h"

int main(){return(0);}

------------
I have installed gcc 2.95.3, it didn't seem to help. 
Any thoughts, tricks or help would be greatly appreciated!  Thank you!

Chris

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 21:25:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:25:07 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204012025.WAA06636@pubhealth.ku.dk>

R 1.4.1, Linux and Windows

for(i in 1:1000) {
    X <- rnorm(i)
    XX <- fft(fft(X), inverse=T)/i
    if(max(Mod(XX-X)) > 1e-10) print(i)
}

[1] 392
[1] 588
[1] 968
[1] 980

and I then get a segfault during gc().  The answers are way off, with
imaginary parts 1e10 or more.

These numbers are all multiples of 7^2 or 11^2.

(Based on a report to R-help
Date: Thu, 28 Mar 2002 09:37:34 +0100
From: Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr>
)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:33:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:33:21 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011633.SAA05959@pubhealth.ku.dk>

Already sent, already corrected.


On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>
> Hola:
>
> Both cannot be correct:
>
> > m <- matrix(1:4, 2)
> > svd(m)
> $d
> [1] 5.4649857 0.3659662
>
> $u
>            [,1]       [,2]
> [1,] -0.5760484 -0.8174156
> [2,] -0.8174156  0.5760484
>
> $v
>            [,1]       [,2]
> [1,] -0.4045536  0.9145143
> [2,] -0.9145143 -0.4045536
>
> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
>
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
>
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
>
> as m is an invertible matrix, the results of La.svd seems wrong.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:34:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:34:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011634.SAA05972@pubhealth.ku.dk>

Already sent, already corrected.

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I sent this earlier, but it seems not to have come through, due to
> problems witkh my system)
>
>
> The following command from appendix A, "a sample session", isnt correct:
>
> contour(x, y, fa, nint=15)
>
> when used R protests:
>
> Warning message:
> parameter "nint" couldn't be set in high-level plot() function
>
>
> it should probably be nlevels, as used a few lines before.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 22:29:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:29:49 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <200204012019.WAA06615@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>

Almost certainly your c++ is g++ installed in /usr/local, and
you don't have /usr/local/lib in your LD_LIBRARY_PATH.

In short
> checking whether the C++ compiler (c++  ) works... no

is correct, and that's not a problem with R but with your system.
First get a simple C++ program working.

If this is a current gcc (3.0.x), the same problem will occur with gcc
eventually in the build process (for libgcc.so).


On Mon, 1 Apr 2002 brower@bst.rochester.edu wrote:

> Full_Name: Christine Brower
> Version: 1.4.1
> OS: Solaris 8
> Submission from: (NULL) (128.151.148.205)
>
>
> Configure options fails with following message:
> ./configure --with-f77
> loading cache ./config.cache
> checking for a BSD compatible install... tools/install-sh -c
> checking whether build environment is sane... yes
> checking whether make sets ${MAKE}... yes
> checking for working aclocal... missing
> checking for working autoconf... missing
> checking for working automake... missing
> checking for working autoheader... missing
> checking for working makeinfo... found
> checking host system type... sparc-sun-solaris2.8
> loading site script ./config.site
> loading build specific script ./config.site
> checking for pwd... /usr/bin/pwd
> checking whether builddir is srcdir... yes
> checking for gcc... gcc
> checking whether the C compiler (gcc  ) works... yes
> checking whether the C compiler (gcc  ) is a cross-compiler... no
> checking whether we are using GNU C... yes
> checking whether gcc accepts -g... yes
> checking how to run the C preprocessor... gcc -E
> checking whether gcc needs -traditional... no
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking for mawk... no
> checking for gawk... no
> checking for nawk... nawk
> checking whether ln -s works... yes
> checking for ranlib... ranlib
> checking for bison... no
> checking for byacc... no
> checking for ar... ar
> checking whether echo can suppress newlines... yes
> configure: warning: redefining INSTALL to be
> /disk/d5/a/R,v1.4.1/R/tools/install-sh -c
> checking for javac... /usr/bin/javac
> checking for less... /usr/bin/less
> checking for perl... /usr/bin/perl
> checking whether perl version is at least 5.004... yes
> checking for dvips... /usr/ucc/bin/dvips
> checking for tex... /usr/ucc/bin/tex
> checking for latex... /usr/ucc/bin/latex
> checking for makeindex... /usr/ucc/bin/makeindex
> checking for pdftex... no
> checking for pdflatex... no
> configure: warning: you cannot build PDF versions of the R manuals
> checking for makeinfo... /usr/ucc/bin/makeinfo
> checking for unzip... /usr/bin/unzip
> checking for zip... /usr/bin/zip
> checking for Cygwin environment... no
> checking for mingw32 environment... no
> checking build system type... sparc-sun-solaris2.8
> checking for ld used by GCC... /usr/ccs/bin/ld
> checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
> checking for /usr/ccs/bin/ld option to reload object files... -r
> checking for BSD-compatible nm... /usr/ccs/bin/nm -p
> checking how to recognise dependant libraries... pass_all
> checking for object suffix... o
> checking for executable suffix... no
> checking command to parse /usr/ccs/bin/nm -p output... ok
> checking for dlfcn.h... yes
> checking for ranlib... (cached) ranlib
> checking for strip... strip
> checking for objdir... .libs
> checking for gcc option to produce PIC... -fPIC
> checking if gcc PIC flag -fPIC works... yes
> checking if gcc static flag -static works... yes
> checking if gcc supports -c -o file.o... yes
> checking if gcc supports -c -o file.lo...
> checking if gcc supports -fno-rtti -fno-exceptions... yes
> checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> checking dynamic linker characteristics... solaris2.8 ld.so
> checking if libtool supports shared libraries... yes
> creating libtool
> checking whether makeinfo version is at least 4... no
> configure: warning: you cannot build info versions of the R manuals
> checking for main in -lm... yes
> defining F77 to be f77
> checking whether the Fortran 77 compiler (f77  ) works... yes
> checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
> checking whether we are using GNU Fortran 77... no
> checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib
> -L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
> /a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
> checking whether f77 appends underscores... yes
> checking whether f77 and gcc agree on int and double... yes
> checking whether f77 and gcc agree on double complex... yes
> checking whether f77 supports -c -o FILE.lo... no
> checking for c++... c++
> checking whether the C++ compiler (c++  ) works... no
> configure: error: installation or configuration problem: C++ compiler cannot
> create executables.
> ----------
> config.log reads:
> ----------
> configure:7263: checking whether f77 supports -c -o FILE.lo
> configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
> f77: Suffix mismatch between -o and produced file (should produce .o)
> configure:7565: checking for c++
> configure:7597: checking whether the C++ compiler (c++  ) works
> configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
> -L/usr/local/lib 1>&5
> ld: fatal: library -lstdc++: not found
> ld: fatal: File processing errors. No output written to conftest
> configure: failed program was:
>
> #line 7608 "configure"
> #include "confdefs.h"
>
> int main(){return(0);}
>
> ------------
> I have installed gcc 2.95.3, it didn't seem to help.
> Any thoughts, tricks or help would be greatly appreciated!  Thank you!
>
> Chris
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Tue Apr  2 09:38:07 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 10:38:07 +0200
Subject: [Rd] Finding code (was: [R] A request)
In-Reply-To: <3CA96648.77B42E5B@statistik.uni-dortmund.de>
References: <MABBJPBLPNLDIFMIAAOJMEAKCFAA.indra_calisto@yahoo.com> <200204020736.g327asg06139@wn1.sci.kun.nl> <3CA96648.77B42E5B@statistik.uni-dortmund.de>
Message-ID: <200204020838.g328c8g23867@wn1.sci.kun.nl>

On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> "E.L. Willighagen" wrote:
> > On Tuesday 02 April 2002 09:27, Uwe Ligges wrote:
> > > Indrajit SenGupta wrote:
> > > > Can we expect to see an R package on Statistical Quality Control in
> > > > the future like SPLUS? I can't understand why nobody made this
> > > > package before.
> > >
> > > Nice to hear you would like to contribute!
> > > Thank you!
> >
> > Rather often, I get the feeling that the developer are feeling
> > underappreciated? Don't.
>
> After first thoughts about ignoring your message: No, I don't feel
> underappreciated. 

<snip>

> R provides the tools for easily documenting and packaging functions.

Interesting point, because I am working on a library with the same issues:
how to make stuff easy to find... R offers keywords, aliases and full-text 
search. But that is all, right? 

And these only work for installed packages (i.e. those within the search 
path...) And (just tested), full-text search does not include searching 
references or descriptions, right (i.e. \description{} and \reference{})? 

For example,
> help.search("Dongarra")
No help files found with alias or title matching `Dongarra'

Dongarra is author from article in svd().

Did I miss some crucial functionality of help() and help.search()? Why can 
only keywords and aliasses be searched?

To return to Indrajit's question: there must be several other packages with 
which one can do statistical quality control, or at least with some minor 
extensions... But he seems not be able to find them. Ofcourse, that could be
imcompetence, but even then... should R be only used by experts, and not
by novice? In other words, is there a reason why R does not have more 
extensive search methods that can be used by novice to get to know R in such 
depth that the do not have to bug the R-help@ mailling list?

Egon



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From egonw@sci.kun.nl  Tue Apr  2 10:44:37 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 11:44:37 +0200
Subject: [Rd] Re: Finding code (was: [R] A request)
In-Reply-To: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
References: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
Message-ID: <200204020944.g329icg14503@wn1.sci.kun.nl>

On Tuesday 02 April 2002 12:25, ripley@stats.ox.ac.uk wrote:
> On Tue, 2 Apr 2002, E.L. Willighagen wrote:
> > On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> > > "E.L. Willighagen" wrote:
> > > R provides the tools for easily documenting and packaging functions.
> >
> > Interesting point, because I am working on a library with the same
> > issues: how to make stuff easy to find... R offers keywords, aliases and
> > full-text search. But that is all, right?
> >
> > And these only work for installed packages (i.e. those within the search
> > path...) And (just tested), full-text search does not include searching
> > references or descriptions, right (i.e. \description{} and \reference{})?
> >
> > For example,
> >
> > > help.search("Dongarra")
> >
> > No help files found with alias or title matching `Dongarra'
> >
> > Dongarra is author from article in svd().
> >
> > Did I miss some crucial functionality of help() and help.search()? Why
> > can only keywords and aliasses be searched?
> >
> > To return to Indrajit's question: there must be several other packages
> > with which one can do statistical quality control, or at least with some
> > minor extensions... But he seems not be able to find them. Ofcourse, that
> > could be
>
> Must there?  Why do you assert that?  As far as I am aware, there are
> no such packages, and I have tested/ported all those on CRAN.

Aren't there methods to calculated means and variances? Did I misunderstood 
that those can be used in Shewart charts? Ofcourse, things might need 
extensions, like a chart plotter...
I have not tested all CRAN modules, but I would have a too positive 
impression about R... 

> > imcompetence, but even then... should R be only used by experts, and not
> > by novice? In other words, is there a reason why R does not have more
> > extensive search methods that can be used by novice to get to know R in
> > such depth that the do not have to bug the R-help@ mailling list?
>
> Because R is a volunteer project, and no one has (AFAIK) contributed such
> methods. It seems that for them to be really useful approximate matching
> is needed.
>
> I do think you have a fundamental misconception of a project such as R.
> The developers wrote R for their own purposes, which include a vehicle for
> teaching statistics and to promulgate their favourite statistical methods.
> They made what they did freely available.  What we do not do is provide
> facilities on demand, from you or anyone else.

That is why I cross-posted this message to r-devel. Is there interest in such 
functionality? At least I am interested, even in coding this extra 
functionality, but before doing so, I thought it would be nice to discuss 
this on the developers list...

> Please do not reply to this message, publicly or otherwise.

Not that I would like to have the last word, or want to offend you, but I 
already wrote my answer before reading this line...

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From r-devel@stat.math.ethz.ch  Wed Apr  3 09:16:37 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:16:37 -0600
Subject: [Rd] Building R-1.4 on Tru64
In-Reply-To: <3C329C33.11D295F0@csiro.au>; from Richard.Beare@csiro.au on Wed, Jan 02, 2002 at 04:35:47PM +1100
References: <3C329C33.11D295F0@csiro.au>
Message-ID: <20020403021637.D29964@oolong.il.thewrittenword.com>

On Wed, Jan 02, 2002 at 04:35:47PM +1100, Richard Beare wrote:
> Hello everyone,
> 
> I've just attempted to build R-1.4 on Compaq Tru64 (I'll enclose the
> text from bug.report() from R-1.3.1 at the end.) The relevant part of
> the log is below.
> 
> Any ideas?
> 
> gcc -shared  -o methods.so do_substitute_direct.o
> methods_list_dispatch.o method_meta_data.o slot.o   -L/usr/local/lib  
> /usr/ucb/ld:
> Warning: Unresolved:
> ...

Try:
  $ gcc -shared -Wl,-expect_unresolved,"*" -o methods.so \
  do_substitute_direct.o methods_list_dispatch.o \
  method_meta_data.o slot.o -L/usr/local/lib  

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r-devel@stat.math.ethz.ch  Wed Apr  3 09:18:34 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:18:34 -0600
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Mon, Apr 01, 2002 at 10:29:49PM +0100
References: <200204012019.WAA06615@pubhealth.ku.dk> <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>
Message-ID: <20020403021834.E29964@oolong.il.thewrittenword.com>

On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> Almost certainly your c++ is g++ installed in /usr/local, and
> you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> 
> In short
> > checking whether the C++ compiler (c++  ) works... no
> 
> is correct, and that's not a problem with R but with your system.
> First get a simple C++ program working.
> 
> If this is a current gcc (3.0.x), the same problem will occur with gcc
> eventually in the build process (for libgcc.so).

Look at config.log and it'll give you more info as to why the above
failed.

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr  3 09:29:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Apr 2002 09:29:35 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <20020403021834.E29964@oolong.il.thewrittenword.com>
Message-ID: <Pine.LNX.4.31.0204030928330.9162-100000@gannet.stats>

On Wed, 3 Apr 2002, Albert Chin wrote:

> On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> > Almost certainly your c++ is g++ installed in /usr/local, and
> > you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> >
> > In short
> > > checking whether the C++ compiler (c++  ) works... no
> >
> > is correct, and that's not a problem with R but with your system.
> > First get a simple C++ program working.
> >
> > If this is a current gcc (3.0.x), the same problem will occur with gcc
> > eventually in the build process (for libgcc.so).
>
> Look at config.log and it'll give you more info as to why the above
> failed.

That was in the original posting, and it said -lstdc++ could not be found.

You've jumped into the middle of a thread!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Apr  3 12:09:40 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 3 Apr 2002 13:09:40 +0200 (MET DST)
Subject: [Rd] persp() crashes with numeric values for [x,y,z]lab (PR#1431)
Message-ID: <200204031109.NAA20177@pubhealth.ku.dk>

Using a numeric value for the arguments xlab, ylab or zlab in persp()
crashes R.
Example:

  persp(1:2, 1:2, matrix(1:4, 2), xlab=1)

Well, it is documented that "These must the character strings".
BTW: I think "the" should be changed to "be" in this sentence.

Nevertheless the worst case could be caught, however, e.g. by coercing
numeric to character.


Uwe Ligges

R-1.4.1 (on WinNT4 + Solaris 5.7) and 


platform i386-pc-mingw32             
arch     i386                        
os       mingw32                     
system   i386, mingw32               
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      02                          
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Wed Apr  3 13:51:04 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Wed, 3 Apr 2002 14:51:04 +0200 (MET DST)
Subject: [Rd] filled.contour(): no check when z dimension dismatch (PR#1432)
Message-ID: <200204031251.OAA21435@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.4.1
OS: Linux
Submission from: (NULL) (193.55.63.125)


`filled.contour()' doesn't complain if z matrix dimension doesn't match
x and y arguments. It would be safer if `filled.contour()' displays an
error (or a warning) message as `contour()' does.

For example :

   > x <- 1:3
   > z <- matrix(data=1:16, nrow=4, ncol=4)
   > filled.contour(x, x, z) # z is (4x4) whereas x is (1x3).
   ## no error/warning. 

   > contour(x, x, z)
   Error in contour(as.double(x), as.double(y), z, as.double(levels), labels,  :

         dimension mismatch
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 00:02:21 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 3 Apr 2002 18:02:21 -0500
Subject: [Rd] predict.Arima fails when x is not a time-series
Message-ID: <15531.35325.783406.290369@gargle.gargle.HOWL>

I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.
The following produces an error message because x is not of class "ts":
  R> x <- rnorm(20)
  R> obj <- arima(x, c(2,0,0))
  R> predict(obj)
     Error in round(x, digits) : Non-numeric argument to mathematical function

Granted the documentation for arima says x should be a time-series, but why not
accommodate simple vectors?  I think it would suffice to change this line:
  xtsp <- tsp(data)
in predict.Arima to this:
  xtsp <- tsp(hasTsp(data))

Also, a minor documentation typo: the help file for predict.Arima refers to the
function as "predict.arima" at one point.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 06:35:03 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 Apr 2002 06:35:03 +0100 (BST)
Subject: [Rd] Re: predict.Arima fails when x is not a time-series
In-Reply-To: <15531.35325.783406.290369@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.44.0204040634000.29459-100000@auk.stats>

On Wed, 3 Apr 2002, David Brahm wrote:

> I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.

That's quite old.

> The following produces an error message because x is not of class "ts":
>   R> x <- rnorm(20)
>   R> obj <- arima(x, c(2,0,0))
>   R> predict(obj)
>      Error in round(x, digits) : Non-numeric argument to mathematical function
>
> Granted the documentation for arima says x should be a time-series, but why not
> accommodate simple vectors?

Because it is not possible to specify the time base correctly when
predicting.

>  I think it would suffice to change this line:
>   xtsp <- tsp(data)
> in predict.Arima to this:
>   xtsp <- tsp(hasTsp(data))
>
> Also, a minor documentation typo: the help file for predict.Arima refers to the
> function as "predict.arima" at one point.

Not any more it doesn't.

> --
>                               -- David Brahm (brahm@alum.mit.edu)
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Thu Apr  4 13:36:01 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Thu, 4 Apr 2002 14:36:01 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041236.OAA29966@pubhealth.ku.dk>


Hi,

The help for `assign' says 
 
 In all the assignment operator expressions, `x' can be a name or
 an expression defining a part of an object to be replaced (e.g.,
 `z[[1]]').  The name does not need to be quoted, though it can be.

So I would expect that by
 a<-1:4
 assign("a[1]",2)   
the first component of a gets the value 2, but the object "a[1]" is 
created.
Could this be clarified in the documentation? 

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 13:57:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 13:57:26 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <200204041236.OAA29966@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>

On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:

> The help for `assign' says
>
>  In all the assignment operator expressions, `x' can be a name or
>  an expression defining a part of an object to be replaced (e.g.,
>  `z[[1]]').  The name does not need to be quoted, though it can be.
>
> So I would expect that by
>  a<-1:4
>  assign("a[1]",2)
> the first component of a gets the value 2, but the object "a[1]" is
> created.
> Could this be clarified in the documentation?

Could you suggest how?  You quoted an *expression*, and the page refers to
quoting a *name*, so I don't know that I see the crux here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 16:37:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 17:37:18 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
Message-ID: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> 
> > The help for `assign' says
> >
> >  In all the assignment operator expressions, `x' can be a name or
> >  an expression defining a part of an object to be replaced (e.g.,
> >  `z[[1]]').  The name does not need to be quoted, though it can be.
> >
> > So I would expect that by
> >  a<-1:4
> >  assign("a[1]",2)
> > the first component of a gets the value 2, but the object "a[1]" is
> > created.
> > Could this be clarified in the documentation?
> 
> Could you suggest how?  You quoted an *expression*, and the page refers to
> quoting a *name*, so I don't know that I see the crux here.

Actually, it *is* a name that is getting quoted, it just has these weird
bracket characters in it, so it is not "syntactically valid". 

One improvement might be: "the name can be any string of text and may
be quoted, but this is only necessary if it is not a syntactically
valid name."

We might also emphasize that "assignment operator expressions" does
not include assign(), only <-, <<-, and =. (And _ until we finally get
it killed...). On the other hand it is arguably clear enough already,
if read carefully. (For this reason alone, the posters remark is off
base, but he might have asked about "a[1]" <- 2.)

In assign(), `x' must be a character object. As in

> a <- "b"
> assign(a,2)
> a
[1] "b"
> b
[1] 2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:53:20 2002
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Thu, 4 Apr 2002 17:53:20 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041553.RAA01870@pubhealth.ku.dk>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:52:07 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 4 Apr 2002 10:52:07 -0500
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Apr 04, 2002 at 05:37:18PM +0200
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats> <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020404105207.X7028@jimmy.harvard.edu>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 16:55:04 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 4 Apr 2002 17:55:04 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204041555.RAA01892@pubhealth.ku.dk>

Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr> reported a bug in fft(), and
Brian D. Ripley <ripley@stats.ox.ac.uk> narrowed it down to specific values of
N (the data vector length).  For N <= 1000, BDR showed the failures occur at:
  N = 392 =  7^2 * 2^2 * 2
  N = 588 =  7^2 * 2^2 * 3
  N = 968 = 11^2 * 2^2 * 2
  N = 980 =  7^2 * 2^2 * 5

BDR's test is as follows:
  R> for (i in 1:1000) {
  R>   X <- rnorm(i)
  R>   XX <- fft(fft(X), inverse=T)/i
  R>   if(max(Mod(XX-X)) > 1e-10) print(i)
  R> }

In src/appl/fft.c, lines 820-822 set "maxf" in subroutine fft_factor.  "maxf"
is supposed to be the "maximum factor size", and the algorithm basically grabs
the last non-squared factor and the last squared factor (there are "kt" squared
factors):

  maxf = nfac[m_fac-kt-1];
  if (kt > 0)
    maxf = imax2(nfac[kt-1], maxf);

But the last squared factor (nfac[kt-1]) is not necessarily the largest, since
the squared factors are added to nfac in this order: 4, 3,5,7,..., 2 (see lines
769-791).  Thus I believe we need to add these two lines after line 822:

  if (kt > 1) maxf = imax2(nfac[kt-2], maxf);
  if (kt > 2) maxf = imax2(nfac[kt-3], maxf);

I don't know for sure that the second line is necessary (I saw no error for
N = 1152 = 4^2 * 3^2 * 2^2 * 2).  But I did rebuild R-devel (2002-04-03) with
these two lines added, and BDR's test ran without errors.  I submit this as the
bug fix for PR#1429.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:02:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 17:02:53 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041700030.24473-100000@gannet.stats>

I do think that the issues are clearer if the help pages are separated,
and I have separated them.  The crux seems to me to have been that too
many diverse concepts were on one help page.

I also noticed `-' is undocumented ... and left it so.


On 4 Apr 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> >
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> >
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
>
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid".
>
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
>
> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
>
> In assign(), `x' must be a character object. As in
>
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:15:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 18:15:36 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <20020404105207.X7028@jimmy.harvard.edu>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
 <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
 <20020404105207.X7028@jimmy.harvard.edu>
Message-ID: <x28z83phhz.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:18:10 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Apr 2002 18:18:10 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041618.SAA01995@pubhealth.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Apr  4 17:26:47 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 4 Apr 2002 18:26:47 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041626.SAA02030@pubhealth.ku.dk>


Just now I again had occasion to want nested describe lists in a
documentation file.  I found that the bug which I reported on 18
October, 2001 still persists.  I checked on the bug report at the R
web page, and found that the notes say ``Not a problem in R 1.4.0
(2001-12-08)''.

Well, it's still a problem for me --- using R 1.4.1.

(Details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R ).

I executed

	R CMD Rdconv -t=htlm foo.Rd > foo.html

where foo.Rd is the example documentation file that I submitted to
illustrate the bug.  On my system, the bug remains.  I.e. the nested
describes screw up.   The item in the outer describe list, just
before the inner describe list, (in the example ``fred'') gets
omitted, along with the first couple of items of the inner describe
list.  The third item of the inner describe list seems to get treated
as if it were an element of the outer list, and gets jumbled with a
bit of the ``fred'' item.

I enclose below the file foo.html that I got on my system.

Could you please check to see if the same thing happens when you run
the Rdconv command on your system?  I guess it's possible that
there's a local glitch here (e.g. something wrong with perl?) that
causes the screw-up.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

File foo.html:
==============

<html><head><title>R: Do nothing.</title>
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>


<h2>Do nothing.</h2>


<h3>Description</h3>

<p>
Do nothing, but do it <b>very</b> well!
</p>


<h3>Usage</h3>

<pre>
foo(gorp,par)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>gorp</code></td>
<td>
I don't know either.</td></tr>
<tr valign="top"><td><code>par</code></td>
<td>
Never you mind!</td></tr>
</table>

<h3>Details</h3>

<p>
The parameter list <code>par</code> should be
as follows, for each possible value of <code>gorp</code>:
<dl>
<dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
<i>(beta,gamma,r)</i> which are respectively
a load of dingos' kidneys, an elephant, and a duck.
Note that <i>gamma</i> must be totally ridiculuous.
</dd>


<dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
entries <i>(beta,gamma,r_0,r)</i> where
<i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
<code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
<i>r_0</i> must eat less than <i>r</i>.
</dd>


<dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
with components <i>(beta,sigma,kappa)</i>.
Again <i>beta</i> is a load of dingos' kidneys.
The difference between a duck is
</p><p align="center"><i>(sigma/kappa)^2</i></p><p>
Note that it is necessary that <i>kappa &gt; 42</i>.
</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
given as a list with components
</p>

<dl>
<dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
<dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
with <i>gamma_ij</i> pertaining to the kidneys of
dingo <i>i</i> and dingo <i>j</i>.</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd>
</dl></dd>
</dl>

<h3>Warnings</h3>

<p>
Even paranoids have real enemies.
</p>


<h3>Author(s)</h3>

<p>
Rolf Turner
<a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
<a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
</p>


<h3>References</h3>

<p>
Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
Memorial University Press, St. John's Nfld., 2001.
</p>
<p>
Ye-of-little-faith, O.  ``An annotated bibliography of green
peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
pp.  101 &#150; 64.
</p>


<h3>See Also</h3>

<p>
<code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
<code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
</p>


<h3>Examples</h3>

<pre>
   #Oh come on!  You can think up your own examples!
   </pre>



<hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>

</body></html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:38:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 18:38:32 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041638.SAA02068@pubhealth.ku.dk>

This was fixed yesterday as part of PR#1257, and I've just answered one Q
on R-help about it.  What I get on my system in html makes as little
sense as the foo.Rd, but no less.

Please try out the current R-devel.

On Thu, 4 Apr 2002 rolf@math.unb.ca wrote:

>
> Just now I again had occasion to want nested describe lists in a
> documentation file.  I found that the bug which I reported on 18
> October, 2001 still persists.  I checked on the bug report at the R
> web page, and found that the notes say ``Not a problem in R 1.4.0
> (2001-12-08)''.
>
> Well, it's still a problem for me --- using R 1.4.1.
>
> (Details:
>
> platform sparc-sun-solaris2.7
> arch     sparc
> os       solaris2.7
> system   sparc, solaris2.7
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R ).
>
> I executed
>
> 	R CMD Rdconv -t=htlm foo.Rd > foo.html
>
> where foo.Rd is the example documentation file that I submitted to
> illustrate the bug.  On my system, the bug remains.  I.e. the nested
> describes screw up.   The item in the outer describe list, just
> before the inner describe list, (in the example ``fred'') gets
> omitted, along with the first couple of items of the inner describe
> list.  The third item of the inner describe list seems to get treated
> as if it were an element of the outer list, and gets jumbled with a
> bit of the ``fred'' item.
>
> I enclose below the file foo.html that I got on my system.
>
> Could you please check to see if the same thing happens when you run
> the Rdconv command on your system?  I guess it's possible that
> there's a local glitch here (e.g. something wrong with perl?) that
> causes the screw-up.
>
> 					cheers,
>
> 						Rolf Turner
> 						rolf@math.unb.ca
>
> ===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
>
> File foo.html:
> ==============
>
> <html><head><title>R: Do nothing.</title>
> <link rel="stylesheet" type="text/css" href="../../R.css">
> </head><body>
>
>
> <h2>Do nothing.</h2>
>
>
> <h3>Description</h3>
>
> <p>
> Do nothing, but do it <b>very</b> well!
> </p>
>
>
> <h3>Usage</h3>
>
> <pre>
> foo(gorp,par)
> </pre>
>
>
> <h3>Arguments</h3>
>
> <table summary="R argblock">
> <tr valign="top"><td><code>gorp</code></td>
> <td>
> I don't know either.</td></tr>
> <tr valign="top"><td><code>par</code></td>
> <td>
> Never you mind!</td></tr>
> </table>
>
> <h3>Details</h3>
>
> <p>
> The parameter list <code>par</code> should be
> as follows, for each possible value of <code>gorp</code>:
> <dl>
> <dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
> <i>(beta,gamma,r)</i> which are respectively
> a load of dingos' kidneys, an elephant, and a duck.
> Note that <i>gamma</i> must be totally ridiculuous.
> </dd>
>
>
> <dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
> entries <i>(beta,gamma,r_0,r)</i> where
> <i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
> <code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
> <i>r_0</i> must eat less than <i>r</i>.
> </dd>
>
>
> <dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
> with components <i>(beta,sigma,kappa)</i>.
> Again <i>beta</i> is a load of dingos' kidneys.
> The difference between a duck is
> </p><p align="center"><i>(sigma/kappa)^2</i></p><p>
> Note that it is necessary that <i>kappa &gt; 42</i>.
> </dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
> given as a list with components
> </p>
>
> <dl>
> <dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
> <dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
> with <i>gamma_ij</i> pertaining to the kidneys of
> dingo <i>i</i> and dingo <i>j</i>.</dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd>
> </dl></dd>
> </dl>
>
> <h3>Warnings</h3>
>
> <p>
> Even paranoids have real enemies.
> </p>
>
>
> <h3>Author(s)</h3>
>
> <p>
> Rolf Turner
> <a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
> <a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
> </p>
>
>
> <h3>References</h3>
>
> <p>
> Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
> Memorial University Press, St. John's Nfld., 2001.
> </p>
> <p>
> Ye-of-little-faith, O.  ``An annotated bibliography of green
> peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
> pp.  101 &#150; 64.
> </p>
>
>
> <h3>See Also</h3>
>
> <p>
> <code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
> <code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
> </p>
>
>
> <h3>Examples</h3>
>
> <pre>
>    #Oh come on!  You can think up your own examples!
>    </pre>
>
>
>
> <hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>
>
> </body></html>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From feng@tu-cottbus.de  Fri Apr  5 09:41:08 2002
From: feng@tu-cottbus.de (feng@tu-cottbus.de)
Date: Fri, 5 Apr 2002 10:41:08 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050841.KAA05324@pubhealth.ku.dk>

Full_Name: Jinsheng Feng
Version: R141
OS: Linux and Windows2000
Submission from: (NULL) (141.43.226.235)


I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
following I have two resalts:
A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
Ai <- solve(A)
b <- c(2, 3)
x <- Ai%*%b

resalt under Windows
>x
      [,1]
[1,] -2.220446e-16
[2,]  1.000000e-00

resalt under Linux
>x
     [,1]
[1,] 1.110223e-16
[2,] 1.000000e-00


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 10:03:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 11:03:03 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050903.LAA05622@pubhealth.ku.dk>

It's called `rounding error'.  Please look it up in an introductory
numerical analysis textbook.

Please also read the section on `what is a bug' in the R FAQ, and if you
do report a genuine bug please try to use an informative subject line.

On Fri, 5 Apr 2002 feng@tu-cottbus.de wrote:

> Full_Name: Jinsheng Feng
> Version: R141
> OS: Linux and Windows2000
> Submission from: (NULL) (141.43.226.235)
>
>
> I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
> following I have two resalts:
> A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
> Ai <- solve(A)
> b <- c(2, 3)
> x <- Ai%*%b
>
> resalt under Windows
> >x
>       [,1]
> [1,] -2.220446e-16
> [2,]  1.000000e-00
>
> resalt under Linux
> >x
>      [,1]
> [1,] 1.110223e-16
> [2,] 1.000000e-00
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 12:35:17 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 12:35:17 +0100 (BST)
Subject: [Rd] Updating packages for the upcoming R 1.5.0
Message-ID: <Pine.LNX.4.31.0204051227180.10366-200000@gannet.stats>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/PLAIN; charset=US-ASCII

You probably know that R 1.5.0 goes into feature freeze on Monday and is
scheduled for release on April 29th.

There are a number of changes that affect packages: a few are actual
changes, many are stricter enforcement of the existing interface and some
are opportunities for (considerable) performance improvements.

We have placed a write-up `150update.txt' on
http://developer.r-project.org that we will continue to update as features
are added or we gain experience.  For your convenience, the current
version is attached.

A number of packages have already been updated, and you will find these in
the src/contrib/1.5.0 section on CRAN.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/plain; name="150update.txt"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.31.0204051235170.10366@gannet.stats>
Content-Description: 
Content-Disposition: attachment; filename="150update.txt"

VXBkYXRpbmcgcGFja2FnZXMgZm9yIDEuNS4wDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT0NCg0KUGFja2FnZSBtYWludGFpbmVycyBzaG91bGQgYmUg
YXdhcmUgb2YgdGhlIGZvbGxvd2luZyBjaGFuZ2VzIHRvIGFwcGVhcg0KaW4g
MS41LjAuICAgU29tZSBuZWNlc3NpdGF0ZSBjaGFuZ2VzIGluIG1hbnkgcGFj
a2FnZXMuDQoNClRoaXMgZG9jdW1lbnQgaXMgYHdvcmsgaW4gcHJvZ3Jlc3Mn
IHVudGlsIGZlYXR1cmUgZnJlZXplIGZvciAxLjUuMCBvbg0KQXByaWwgOHRo
Lg0KDQoNCk5BIHN0cmluZ3MNCi0tLS0tLS0tLS0NCg0KTWlzc2luZyB2YWx1
ZXMgaW4gc3RyaW5ncyBhcmUgaGFuZGxlZCBtdWNoIG1vcmUgY29uc2lzdGVu
dGx5LCBhbmQgYQ0KbG90IG9mIHNsb3BweSBjb2Rpbmcgd2lsbCBub3cgZmFp
bCAob3IgZ2l2ZSBkaWZmZXJlbnQgYW5zd2VycykuDQoNCi0gSWYgeW91IG1l
YW50ICJOQSIgdG8gaW5kaWNhdGUgdGhlIG1pc3NpbmcgdmFsdWUsIHVzZQ0K
ICBhcy5jaGFyYWN0ZXIoTkEpIChvciBqdXN0IE5BIHdoZXJlIGNvZXJjaW9u
IHdpbGwgb2NjdXIuKQ0KDQotIFRoZSB0ZXN0IHggPT0gIk5BIiBzaG91bGQg
YmUgcmV3cml0dGVuIGFzIGlzLm5hKHgpLg0KDQotIElmIG1pc3NpbmcgdmFs
dWVzIGNhbiBvY2N1ciwgZG8gbm90IHVzZSB4ID09ICJzb21lIHN0cmluZyIu
IA0KICBBIHN1aXRhYmxlIHJlcGxhY2VtZW50IGlzIHggJWluJSAic29tZSBz
dHJpbmciLg0KDQotIENvZGUgc3VjaCBhcyBhbGwobmFtZXMoeCkgPT0gYW5z
Lm5hbWVzKSkgKGZyb20gYXBwbHkpIHdpbGwgZmFpbCBpZg0KICBhbnkgbmFt
ZSBtaWdodCBiZSBtaXNzaW5nLiAgVXNlIGlkZW50aWNhbChuYW1lcyh4KSwg
YW5zLm5hbWVzKQ0KICBpbnN0ZWFkICh3aGljaCBpbmNpZGVudGFsbHkgaXMg
bW9yZSBlZmZpY2llbnQpLg0KDQpBbHRob3VnaCBhbGwgdGhlIGV4YW1wbGVz
IGhhdmUgdXNlZCA9PSwgdGhlIHNhbWUgY29uc2lkZXJhdGlvbnMgYXBwbHkg
dG8NCnRoZSBvdGhlciBsb2dpY2FsIG9wZXJhdG9ycyAhPSA8IDw9ID4gPj0u
DQoNClRoZSB3YXkgbWlzc2luZyBzdHJpbmdzIHByaW50IGhhcyBiZWVuIGFs
dGVyZWQsIHNvIHRlc3Qgb3V0cHV0IG1heQ0KbmVlZCB0byBiZSB1cGRhdGVk
Lg0KDQoNClNhdmluZyBkYXRhDQotLS0tLS0tLS0tLQ0KDQpUaGUgcmVjb21t
ZW5kZWQgd2F5IHRvIGRpc3RyaWJ1dGUgZGF0YSBoYXMgYmVlbiB2aWEgIC5y
ZGEgZmlsZXMNCm9idGFpbmVkIHdpdGggc2F2ZShhc2NpaT1UUlVFKS4gIEFz
IGZyb20gMS41LjAgd2UgY2FuIGFzc3VtZSB0aGF0DQpYRFIgbG9hZGluZyBh
bmQgY29tcHJlc3Npb24gYXJlIGF2YWlsYWJsZSBvbiBhbGwgcGxhdGZvcm1z
Lg0KDQpUaGUgZGVmYXVsdCBzYXZlIGZvcm1hdCB3YXMgY2hhbmdlZCBpbiAx
LjQuMC4gIFdlIG5vdyByZWNvbW1lbmQgdGhhdA0KZGF0YSBpcyBkaXN0cmli
dXRlZCBpbiB2ZXJzaW9uIDIgWERSIGZvcm1hdCBmaWxlcyAoYXMgZ2l2ZW4g
YnkNCnNhdmUoKSBpbiAxLjQuMCBvciBsYXRlciksICphbmQqIHRoYXQgbGFy
Z2UgZGF0YSBmaWxlcyBhcmUgZGlzdHJpYnV0ZWQNCmluIGNvbXByZXNzZWQg
Zm9ybWF0IChzYXZlKGNvbXByZXNzPVRSVUUpKS4NCg0KDQpCTEFTIGxpYnJh
cmllcw0KLS0tLS0tLS0tLS0tLS0NCg0KUiBjYW4gYmUgY29uZmlndXJlZCB0
byB1c2UgZWloZXIgYSBidWlsdC1pbiBzdWJzZXQgb2YgQkxBUyByb3V0aW5l
cyBvciBhbg0KZW5oYW5jZWQgQkxBUyBsaWJyYXJ5IHN1Y2ggYXMgQVRMQVMg
b3Igc3VucGVyZi4NCg0KQXMgZnJvbSAxLjUuMCB0aGUgc3Vic2V0IGhhcyBi
ZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgYWxsIHRoZSBCTEFTDQpyb3V0aW5l
cyBuZWVkZWQgZm9yIGRvdWJsZS1wcmVjaXNpb24gY2FsY3VsYXRpb25zLiAg
VG8gYWxsb3cgdGhvc2UNClIgaW5zdGFsbGF0aW9ucyB3aXRoIGFuIGVuaGFu
Y2VkIEJMQVMgdG8gYmVuZWZpdCBmcm9tIHRoZW0sIHdlIHVyZ2UNCnBhY2th
Z2UgbWFpbnRhaW5lcnMgKm5vdCogdG8gaW5jbHVkZSBjb3BpZXMgb2YgdGhl
IGluY2x1ZGVkIEJMQVMNCnJvdXRpbmVzIGluIHRoZWlyIHBhY2thZ2VzLg0K
DQpBbHNvLCBhbGwgcGFja2FnZXMgdGhhdCBtYWtlIHVzZSBvZiBCTEFTIHJv
dXRpbmVzIG11c3QgaW5jbHVkZSAkKEJMQVNfTElCUykNCmluIHNyYy9NYWtl
dmFycywgbW9zdCBzaW1wbHkgYXMgdGhlIGxpbmUNCg0KUEtHX0xJQlM9JChC
TEFTX0xJQlMpDQoNCklmIHBvc3NpYmxlLCB0ZXN0IHN1Y2ggcGFja2FnZXMg
Ym90aCB3aXRoIGFuZCB3aXRob3V0IGFuIGVuaGFuY2VkIEJMQVMNCmluIHVz
ZS4gIE5vdGUgdGhhdCB0aGUgQ1JBTiBjaGVja3MgYXJlIHJ1biBvbiBhIHN5
c3RlbSB3aXRob3V0IGFuDQplbmhhbmNlZCBCTEFTIGFuZCBzbyBkbyBub3Qg
Y2hlY2sgdGhpcyBwb2ludC4NCg0KDQpRQSBzdHJpY3RuZXNzDQotLS0tLS0t
LS0tLS0tDQoNClIgQ01EIGNoZWNrIGluIDEuNS4wIGlzIG1vcmUgc3RyaW5n
ZW50OiBpdCBub3cgYWxzbyBmYWlscyBvbiBtYWxmb3JtZWQNCidEZXBlbmRz
JyBhbmQgJ01haW50YWluZXInIGZpZWxkcyBpbiAnREVTQ1JJUFRJT04nIGZp
bGVzLCBhbmQgb24NCnVuYmFsYW5jZWQgYnJhY2VzIGluIFJkIGZpbGVzICh3
aGljaCBpbmRpY2F0ZSBSZCBzeW50YXggZXJyb3JzKS4NCg0KDQphcHBseSBz
cGVlZHVwcw0KLS0tLS0tLS0tLS0tLS0NCg0KRnVuY3Rpb25zIHJvd1N1bXMs
IGNvbFN1bXMsIHJvd01lYW5zIGFuZCBjb2xNZWFucyBwcm92aWRlIGNvbnNp
ZGVyYWJsZQ0KcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIG92ZXIgYXBwbHko
WCwgZiwgc3VtKSBldGMuDQoNCg0KQ2hhbmdlcyBpbiB0aGUgdGNsdGsgcGFj
a2FnZQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpBIG5ldyB0
Y2xPYmogY2xhc3MsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJuYWwgImR1YWwt
cG9ydGVkIiBvYmplY3QNCnN0cnVjdHVyZXMgaW4gdGhlIFRjbCBDIGludGVy
ZmFjZSwgaGFzIGJlZW4gaW50cm9kdWNlZC4NCg0KVGhlIHJldHVybiB2YWx1
ZSBmcm9tIG1hbnkgY29tbWFuZHMgaGFzIGJlZW4gY2hhbmdlZCB0byBiZSBh
biBvYmplY3QNCm9mIGNsYXNzIHRjbE9iai4gV2hlcmV2ZXIgeW91IGFyZSBj
dXJyZW50bHkgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSwNCnlvdSB3aWxsIG5l
ZWQgdG8gd3JhcCB0aGUgY2FsbCBpbiBhIHRjbHZhbHVlKCkgY29uc3RydWN0
IGluIG9yZGVyIHRvDQpnZXQgYXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlv
bi4gSG93ZXZlciwgbm90aWNlIHRoYXQgYXMuY2hhcmFjdGVyLA0KYXMuaW50
ZWdlciwgYW5kIGFzLmRvdWJsZSBjYW4gbm93IGV4dHJhY3QgdmVjdG9ycyBk
aXJlY3RseSBmcm9tIHRjbE9iag0Kb2JqZWN0cyBzbyB0aGF0IHBhcnNpbmcg
b2YgdGhlIFRjbCBzdHJpbmcgY2FuIGJlIGF2b2lkZWQgaW4gbWFueQ0KY2Fz
ZXMuDQoNCkFsc28gdGNsVmFyIG9iamVjdHMgY2FuIGJlIGFjY2Vzc2VzIGFz
IHRjbE9iaiBvYmplY3RzLiBUaGlzIHNob3VsZCBub3QNCmJyZWFrIGV4aXN0
aW5nIGNvZGUsIGJ1dCBpdCBhbGxvd3Mgc3Vic3RhbnRpYWwgc2ltcGxpZmlj
YXRpb24gaW4gdGhlDQpoYW5kbGluZyBvZiBlLmcuIGxpc3Rib3ggY29udGVu
dHMuDQoNCg==
--27492116-1041555239-1018006517=:10366--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 16:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 16:13:31 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <200202270816.JAA23941@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>

Berwin,

Thank you for this.

Unfortunately, although the analysis is mainly correct, but the solution
has almost as many problems as the current state.  Suppose pivoting
occurs. Then for the internal code, coef needs to contain zeroes at the
omitted cols. But you have

coef <- coefold <- start  # initialise coef here in order to
                          # be able to subset it below

so it will contain whatever start had for those cols.  Further, the test
        if (is.na(dev) || any(is.na(coef))) {
is followed by

                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)

which will ensure that if any NAs occur in coef, they will be propogated
through eta.

A related point is that you assume that coefold <- rep(0,nvars) is
a valid starting value to shrink towards, but that need not be the case.
I think one can only shrink towards the previous value after the first
iteration.  (Only if start is specified is the validity checked:
an initial etastart or mustart is normally not in the space of
possible values under the model.)

There seems to me no point to test if `start' is valid if it is going to
be unused (as it will be if a valid eta is specified), so I believe the
original test logic is the correct one, not the unravelled one.

There are clearly problems in the glm.fit code, but in the absence of a
bug that has actually bitten someone, it seems only worth changing if we
have a 100% watertight solution.  As I said to Brett Presnell, I believe
the time would be better spent re-writing glm ab initio.

Also, the code you submitted had all the comments removed, and so was much
harder to read than the code in glm.R, as well as being subtly
reformatted.

Brian


On Wed, 27 Feb 2002 berwin@maths.uwa.edu.au wrote:

> G'day all,
>
> I had a look at the GLM code of R (1.4.1) and I believe that there are
> problems with the function "glm.fit" that may bite in rare
> circumstances.  Note, I have no data set with which I ran into
> trouble.  This report is solely based on having a look at the code.
>
> Below I append a listing of the glm.fit function as produced by my
> system.  I have added line numbers so that I can easily refer to the
> code that is, in my opinion, problematic.  I also append a modified
> version that, hopefully, solves these problems.  At least on
> "example(glm)" both functions produce the same output (if the random
> number generator is set to the same seed).
>
> Short summary: I envisage problems with glm.fit if two conditions are
> met simultaneously.  Namely, (1) the design matrix is such that the QR
> algorithm used in the weighted least squares (WLS) step has to pivot
> columns (lines 81-86) and (2) during the iterations the step size has
> to be truncated (either lines 98-114 or lines 115-130).
>
> More details:
> In line 90, the variables "start" and "coef" are set to the
> coefficients of the WLS and "start" is then permuted (line 91) to take
> a possible pivoting of the QR algorithm into account.  Note that
> "coef" is not permutated.   Also, since the weights in the iterative
> weighted least squares algorithm change in each iteration (lines
> 60-139) it is theoretically possible that on some executions of this
> chunk pivoting occurs and on others there is no pivoting.
>
> Hoever, if the new coefficients are unsuitable and either the block at
> lines 98-114 or lines 115-130 is entered, then "start" is modified by
> shrinking it toward "coefold".  There are two problems:
> 1) If this happens the first time the loop in lines 60-139 is executed,
>    then coefold is initialised to the value of "start" that was passed
> down to the routine (line 58).  This might well be NULL (usually is?).
> In this case line 105 and line 122 would produce a new "start" which
> is numeric(0) and glm.fit would stop execution pretty soon thereafter.
> 2) If it happens during a later execution of the loop in lines 60-139,
>    then "coefold" was set to the value "coef" of the prior execution
> of the loop (line 137).  Depending on whether either of the code
> chunks at lines 98-114 or lines 115-130 have been executed on that
> previous occastion, "coefold" may or may not be permuted to the same
> order as "start" in this moment.  Hence, it could happen that "start"
> is shrunken towards something that doesn't make sense in line 105 or
> line 122.
>
> Relating to point 2) above.  Theoretically, during the main loop
> (lines 60-139) either of the chunks in lines 98-114 or lines 115-130
> could be entered.  In these chunks "coef" is set to the shrunken
> "start" at the end (line 111 or line 126).  If, with the ``deviance
> for the shrunken "start"'' the convergence criterion in line 131 is
> fulfilled, then the main loop would finish.  In other words, at line
> 140 there is no way to tell whether "coef" is in the order of
> "fit$coefficients" or has been permutated to have the same order as
> "start".  In the later case, the additional permutation in line 157
> would garble the solution.
>
> I hope that the revised version that I append below, works around all
> these potential problems without breaking anything.  As I said, I ran
> "example(glm)" with the revised version and got the same results.  But
> I guess you guys have far more exhaustive tests and may want to do
> some further test to ensure that nothing is broken.
>
> The revised version also makes some cosmetic changes that reflect my
> preferences :-) :
> 1) Given the default values of the parameters "weights" and "offset" I
>    was surprised about the tests in lines 17 and 19.  They seemed
> superfluous.  Until I noticed that "glm" can call "glm.fit" with
> actual arguments for these parameters that are NULL.  Hence, I suggest
> that the default values for these arguments should be NULL.  This
> makes it easier to understand the code of "glm.fit" (if one looks only
> at "glm.fit" and not at all the code "glm", "glm.fit" &c
> simultaneously).
> 2) As mentioned above, "coefold" may be initialised to NULL in line 58
>    if the parameter "start" is not specified.  (Which typically would be
> the case?)  But furthermore, in lines 44-53 the test for the parameter
> "start" is mangled into the test for the parameter "etastart".  If
> "etastart" is not specified but a bad "start" (not the correct
> length), the bad "start" would be caught.  But if a valid "etastart"
> is specified, then a bad "start" would not be caught since those tests
> are not executed.  (Are there users that specify both?).  Anyway, I
> have untangled those sanity check.  Also to get a clean initialisation
> for "coefold".
> 3) Given that the column names of fit$qr are (correctly) set in line
>    171, I didn't see the purpose of line 155.  That line anyhow sets
> the column names wrongly if pivoting has occured.  So I deleted that
> line.
>
> That's all for now.  Thanks for the great package and I hope that this
> bug report will be useful.
>
> Cheers,
>
>         Berwin
>
> ========================= original glm.fit =========================
>   1  glm.fit <-
>   2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL,
>   3      mustart = NULL, offset = rep(0, nobs), family = gaussian(),
>   4      control = glm.control(), intercept = TRUE)
>   5  {
>   6      x <- as.matrix(x)
>   7      xnames <- dimnames(x)[[2]]
>   8      ynames <- names(y)
>   9      conv <- FALSE
>  10      nobs <- NROW(y)
>  11      nvars <- NCOL(x)
>  12      if (nvars == 0) {
>  13          cc <- match.call()
>  14          cc[[1]] <- as.name("glm.fit.null")
>  15          return(eval(cc, parent.frame()))
>  16      }
>  17      if (is.null(weights))
>  18          weights <- rep(1, nobs)
>  19      if (is.null(offset))
>  20          offset <- rep(0, nobs)
>  21      variance <- family$variance
>  22      dev.resids <- family$dev.resids
>  23      aic <- family$aic
>  24      linkinv <- family$linkinv
>  25      mu.eta <- family$mu.eta
>  26      if (!is.function(variance) || !is.function(linkinv))
>  27          stop("illegal `family' argument")
>  28      valideta <- family$valideta
>  29      if (is.null(valideta))
>  30          valideta <- function(eta) TRUE
>  31      validmu <- family$validmu
>  32      if (is.null(validmu))
>  33          validmu <- function(mu) TRUE
>  34      if (is.null(mustart)) {
>  35          eval(family$initialize)
>  36      }
>  37      else {
>  38          mukeep <- mustart
>  39          eval(family$initialize)
>  40          mustart <- mukeep
>  41      }
>  42      if (NCOL(y) > 1)
>  43          stop("y must be univariate unless binomial")
>  44      eta <- if (!is.null(etastart) && valideta(etastart))
>  45          etastart
>  46      else if (!is.null(start))
>  47          if (length(start) != nvars)
>  48              stop(paste("Length of start should equal", nvars,
>  49                  "and correspond to initial coefs for", deparse(xnames)))
>  50          else as.vector(if (NCOL(x) == 1)
>  51              x * start
>  52          else x %*% start)
>  53      else family$linkfun(mustart)
>  54      mu <- linkinv(eta)
>  55      if (!(validmu(mu) && valideta(eta)))
>  56          stop("Can't find valid starting values: please specify some")
>  57      devold <- sum(dev.resids(y, mu, weights))
>  58      coefold <- start
>  59      boundary <- FALSE
>  60      for (iter in 1:control$maxit) {
>  61          good <- weights > 0
>  62          varmu <- variance(mu)[good]
>  63          if (any(is.na(varmu)))
>  64              stop("NAs in V(mu)")
>  65          if (any(varmu == 0))
>  66              stop("0s in V(mu)")
>  67          mu.eta.val <- mu.eta(eta)
>  68          if (any(is.na(mu.eta.val[good])))
>  69              stop("NAs in d(mu)/d(eta)")
>  70          good <- (weights > 0) & (mu.eta.val != 0)
>  71          if (all(!good)) {
>  72              conv <- FALSE
>  73              warning(paste("No observations informative at iteration",
>  74                  iter))
>  75              break
>  76          }
>  77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>  78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>  79          ngoodobs <- as.integer(nobs - sum(!good))
>  80          ncols <- as.integer(1)
>  81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>  82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>  83                  control$epsilon/1000), coefficients = numeric(nvars),
>  84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>  85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>  86              work = double(2 * nvars), PACKAGE = "base")
>  87          if (nobs < fit$rank)
>  88              stop(paste("X matrix has rank", fit$rank, "but only",
>  89                  nobs, "observations"))
>  90          start <- coef <- fit$coefficients
>  91          start[fit$pivot] <- coef
>  92          eta <- drop(x %*% start)
>  93          mu <- linkinv(eta <- eta + offset)
>  94          dev <- sum(dev.resids(y, mu, weights))
>  95          if (control$trace)
>  96              cat("Deviance =", dev, "Iterations -", iter, "\n")
>  97          boundary <- FALSE
>  98          if (is.na(dev) || any(is.na(coef))) {
>  99              warning("Step size truncated due to divergence")
> 100              ii <- 1
> 101              while ((is.na(dev) || any(is.na(start)))) {
> 102                  if (ii > control$maxit)
> 103                    stop("inner loop 1; can't correct step size")
> 104                  ii <- ii + 1
> 105                  start <- (start + coefold)/2
> 106                  eta <- drop(x %*% start)
> 107                  mu <- linkinv(eta <- eta + offset)
> 108                  dev <- sum(dev.resids(y, mu, weights))
> 109              }
> 110              boundary <- TRUE
> 111              coef <- start
> 112              if (control$trace)
> 113                  cat("New Deviance =", dev, "\n")
> 114          }
> 115          if (!(valideta(eta) && validmu(mu))) {
> 116              warning("Step size truncated: out of bounds.")
> 117              ii <- 1
> 118              while (!(valideta(eta) && validmu(mu))) {
> 119                  if (ii > control$maxit)
> 120                    stop("inner loop 2; can't correct step size")
> 121                  ii <- ii + 1
> 122                  start <- (start + coefold)/2
> 123                  mu <- linkinv(eta <- eta + offset)
> 124              }
> 125              boundary <- TRUE
> 126              coef <- start
> 127              dev <- sum(dev.resids(y, mu, weights))
> 128              if (control$trace)
> 129                  cat("New Deviance =", dev, "\n")
> 130          }
> 131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
> 132              conv <- TRUE
> 133              break
> 134          }
> 135          else {
> 136              devold <- dev
> 137              coefold <- coef
> 138          }
> 139      }
> 140      if (!conv)
> 141          warning("Algorithm did not converge")
> 142      if (boundary)
> 143          warning("Algorithm stopped at boundary value")
> 144      eps <- 10 * .Machine$double.eps
> 145      if (family$family == "binomial") {
> 146          if (any(mu > 1 - eps) || any(mu < eps))
> 147              warning("fitted probabilities numerically 0 or 1 occurred")
> 148      }
> 149      if (family$family == "poisson") {
> 150          if (any(mu < eps))
> 151              warning("fitted rates numerically 0 occurred")
> 152      }
> 153      if (fit$rank != nvars) {
> 154          coef[seq(fit$rank + 1, nvars)] <- NA
> 155          dimnames(fit$qr) <- list(NULL, xnames)
> 156      }
> 157      coef[fit$pivot] <- coef
> 158      xxnames <- xnames[fit$pivot]
> 159      residuals <- rep(NA, nobs)
> 160      residuals[good] <- z - (eta - offset)[good]
> 161      fit$qr <- as.matrix(fit$qr)
> 162      nr <- min(sum(good), nvars)
> 163      if (nr < nvars) {
> 164          Rmat <- diag(nvars)
> 165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
> 166      }
> 167      else Rmat <- fit$qr[1:nvars, 1:nvars]
> 168      Rmat <- as.matrix(Rmat)
> 169      Rmat[row(Rmat) > col(Rmat)] <- 0
> 170      names(coef) <- xnames
> 171      colnames(fit$qr) <- xxnames
> 172      dimnames(Rmat) <- list(xxnames, xxnames)
> 173      names(residuals) <- ynames
> 174      names(mu) <- ynames
> 175      names(eta) <- ynames
> 176      wt <- rep(0, nobs)
> 177      wt[good] <- w^2
> 178      names(wt) <- ynames
> 179      names(weights) <- ynames
> 180      names(y) <- ynames
> 181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
> 182          fit$rank))
> 183      wtdmu <- if (intercept)
> 184          sum(weights * y)/sum(weights)
> 185      else linkinv(offset)
> 186      nulldev <- sum(dev.resids(y, wtdmu, weights))
> 187      n.ok <- nobs - sum(weights == 0)
> 188      nulldf <- n.ok - as.integer(intercept)
> 189      resdf <- n.ok - fit$rank
> 190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
> 191      list(coefficients = coef, residuals = residuals, fitted.values = mu,
> 192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
> 193              "rank", "qraux", "pivot", "tol")], family = family,
> 194          linear.predictors = eta, deviance = dev, aic = aic.model,
> 195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
> 196          df.residual = resdf, df.null = nulldf, y = y, converged = conv,
> 197          boundary = boundary)
> 198  }
> ========================= modified glm.fit =========================
> glm.fit <-
> function (x, y, weights = NULL, start = NULL, etastart = NULL,
>     mustart = NULL, offset = NULL, family = gaussian(),
>     control = glm.control(), intercept = TRUE)
> {
>     x <- as.matrix(x)
>     xnames <- dimnames(x)[[2]]
>     ynames <- names(y)
>     conv <- FALSE
>     nobs <- NROW(y)
>     nvars <- NCOL(x)
>     if (nvars == 0) {
>         cc <- match.call()
>         cc[[1]] <- as.name("glm.fit.null")
>         return(eval(cc, parent.frame()))
>     }
>     if (is.null(weights))
>         weights <- rep(1, nobs)
>     if (is.null(offset))
>         offset <- rep(0, nobs)
>     variance <- family$variance
>     dev.resids <- family$dev.resids
>     aic <- family$aic
>     linkinv <- family$linkinv
>     mu.eta <- family$mu.eta
>     if (!is.function(variance) || !is.function(linkinv))
>         stop("illegal `family' argument")
>     valideta <- family$valideta
>     if (is.null(valideta))
>         valideta <- function(eta) TRUE
>     validmu <- family$validmu
>     if (is.null(validmu))
>         validmu <- function(mu) TRUE
>     if (is.null(mustart)) {
>         eval(family$initialize)
>     }
>     else {
>         mukeep <- mustart
>         eval(family$initialize)
>         mustart <- mukeep
>     }
>     if (NCOL(y) > 1)
>         stop("y must be univariate unless binomial")
>     if (!is.null(start)){
>       if (length(start) != nvars)
>         stop(paste("Length of start should equal", nvars,
>                    "and correspond to initial coefs for", deparse(xnames)))
>       coef <- coefold <- start  # initialise coef here in order to
>                                 # be able to subset it below
>     }
>     else
>       coef <- coefold <- rep(0,nvars)
>     eta <- if (!is.null(etastart) && valideta(etastart))
>       etastart
>     else if (!is.null(start))
>       as.vector(if (NCOL(x) == 1)
>                 x * start
>       else x %*% start)
>     else family$linkfun(mustart)
>     mu <- linkinv(eta)
>     if (!(validmu(mu) && valideta(eta)))
>         stop("Can't find valid starting values: please specify some")
>     devold <- sum(dev.resids(y, mu, weights))
>     boundary <- FALSE
>     for (iter in 1:control$maxit) {
>         good <- weights > 0
>         varmu <- variance(mu)[good]
>         if (any(is.na(varmu)))
>             stop("NAs in V(mu)")
>         if (any(varmu == 0))
>             stop("0s in V(mu)")
>         mu.eta.val <- mu.eta(eta)
>         if (any(is.na(mu.eta.val[good])))
>             stop("NAs in d(mu)/d(eta)")
>         good <- (weights > 0) & (mu.eta.val != 0)
>         if (all(!good)) {
>             conv <- FALSE
>             warning(paste("No observations informative at iteration",
>                 iter))
>             break
>         }
>         z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>         w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>         ngoodobs <- as.integer(nobs - sum(!good))
>         ncols <- as.integer(1)
>         fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>             p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>                 control$epsilon/1000), coefficients = numeric(nvars),
>             residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>             rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>             work = double(2 * nvars), PACKAGE = "base")
>         if (nobs < fit$rank)
>             stop(paste("X matrix has rank", fit$rank, "but only",
>                 nobs, "observations"))
>         coef[fit$pivot] <- fit$coefficients
>         eta <- drop(x %*% coef)
>         mu <- linkinv(eta <- eta + offset)
>         dev <- sum(dev.resids(y, mu, weights))
>         if (control$trace)
>             cat("Deviance =", dev, "Iterations -", iter, "\n")
>         boundary <- FALSE
>         if (is.na(dev) || any(is.na(coef))) {
>             warning("Step size truncated due to divergence")
>             ii <- 1
>             while ((is.na(dev) || any(is.na(coef)))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 1; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 eta <- drop(x %*% coef)
>                 mu <- linkinv(eta <- eta + offset)
>                 dev <- sum(dev.resids(y, mu, weights))
>             }
>             boundary <- TRUE
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (!(valideta(eta) && validmu(mu))) {
>             warning("Step size truncated: out of bounds.")
>             ii <- 1
>             while (!(valideta(eta) && validmu(mu))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 2; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 mu <- linkinv(eta <- eta + offset)
>             }
>             boundary <- TRUE
>             dev <- sum(dev.resids(y, mu, weights))
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
>             conv <- TRUE
>             break
>         }
>         else {
>             devold <- dev
>             coefold <- coef
>         }
>     }
>     if (!conv)
>         warning("Algorithm did not converge")
>     if (boundary)
>         warning("Algorithm stopped at boundary value")
>     eps <- 10 * .Machine$double.eps
>     if (family$family == "binomial") {
>         if (any(mu > 1 - eps) || any(mu < eps))
>             warning("fitted probabilities numerically 0 or 1 occurred")
>     }
>     if (family$family == "poisson") {
>         if (any(mu < eps))
>             warning("fitted rates numerically 0 occurred")
>     }
>     if (fit$rank != nvars) {
>         coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
>     }
>     xxnames <- xnames[fit$pivot]
>     residuals <- rep(NA, nobs)
>     residuals[good] <- z - (eta - offset)[good]
>     fit$qr <- as.matrix(fit$qr)
>     nr <- min(sum(good), nvars)
>     if (nr < nvars) {
>         Rmat <- diag(nvars)
>         Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
>     }
>     else Rmat <- fit$qr[1:nvars, 1:nvars]
>     Rmat <- as.matrix(Rmat)
>     Rmat[row(Rmat) > col(Rmat)] <- 0
>     names(coef) <- xnames
>     colnames(fit$qr) <- xxnames
>     dimnames(Rmat) <- list(xxnames, xxnames)
>     names(residuals) <- ynames
>     names(mu) <- ynames
>     names(eta) <- ynames
>     wt <- rep(0, nobs)
>     wt[good] <- w^2
>     names(wt) <- ynames
>     names(weights) <- ynames
>     names(y) <- ynames
>     names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
>         fit$rank))
>     wtdmu <- if (intercept)
>         sum(weights * y)/sum(weights)
>     else linkinv(offset)
>     nulldev <- sum(dev.resids(y, wtdmu, weights))
>     n.ok <- nobs - sum(weights == 0)
>     nulldf <- n.ok - as.integer(intercept)
>     resdf <- n.ok - fit$rank
>     aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
>     list(coefficients = coef, residuals = residuals, fitted.values = mu,
>         effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
>             "rank", "qraux", "pivot", "tol")], family = family,
>         linear.predictors = eta, deviance = dev, aic = aic.model,
>         null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
>         df.residual = resdf, df.null = nulldf, y = y, converged = conv,
>         boundary = boundary)
> }
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr  5 16:28:03 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 5 Apr 2002 17:28:03 +0200 (MET DST)
Subject: [Rd] [DOC] as.call (PR#1437)
Message-ID: <200204051528.RAA09753@pubhealth.ku.dk>


While I remember this:

The help page for call/as.call/is.call says

     It is not possible to coerce objects to mode call (objects either
     are calls or they are not calls).  `as.call' returns its argument
     if it is a call and otherwise terminates with an error message.

which actually has been untrue for quite a while, e.g.:

> cl<-as.call(c(ls, list("package:base", pattern="obj")))
> eval(cl)
[1] "is.object"    "objects"      "object.size"  "objWithClass"

Someone changed the code without editing the documentation. I know who
the guilty party is and will force him to rewrite the help entry in
due course...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 17:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 17:12:47 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204051700370.13566-100000@gannet.stats>

On Fri, 5 Apr 2002 ripley@stats.ox.ac.uk wrote:

> Berwin,
>
> Thank you for this.
>
> Unfortunately, although the analysis is mainly correct, but the solution
> has almost as many problems as the current state.  Suppose pivoting
> occurs. Then for the internal code, coef needs to contain zeroes at the
> omitted cols. But you have
>
> coef <- coefold <- start  # initialise coef here in order to
>                           # be able to subset it below
>
> so it will contain whatever start had for those cols.  Further, the test

Sorry, that's wrong as the innards of dqrls (which I have now read) will
do the zeroing.

[...]

However, there's more:

> >             while (!(valideta(eta) && validmu(mu))) {
> >                 if (ii > control$maxit)
> >                   stop("inner loop 2; can't correct step size")
> >                 ii <- ii + 1
> >                 coef <- (coef + coefold)/2
> >                 mu <- linkinv(eta <- eta + offset)
> >             }

How can that loop work?  eta is just incremented by the offset.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Apr  6 11:50:53 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 6 Apr 2002 12:50:53 +0200 (MET DST)
Subject: [Rd] file.info()$isdir is not TRUE (PR#1439)
Message-ID: <200204061050.MAA12036@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe / Solaris 8
Submission from: (NULL) (217.208.14.137)


R -vanilla

> info <- file.info("C:/Windows/regedit.exe")
> info$isdir
[1] FALSE
> info$isdir == FALSE
[1] TRUE

But:

> info <- file.info("C:/Windows")
> info$isdir
[1]TRUE           <<< Note the missing space!
> info$isdir == TRUE
[1] FALSE
> is.logical(info$isdir)
[1] TRUE
> as.logical(info$isdir) == TRUE
[1] FALSE
> as.logical(as.character(info$isdir)) == TRUE
[1] TRUE

I get the same behaviour on Solaris 8.

Best

Henrik Bengtsson



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 20:28:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 11:28:08 -0800
Subject: [Rd] packages in OS X
Message-ID: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>

=======================================================================
Simple CRAN packages which do not compile without modifications (all 
others do)
=======================================================================
     -- akima
/usr/bin/ld: multiple definitions of symbol _idlc_

     -- fracdiff
/usr/bin/ld: multiple definitions of symbol _gammfd_
(and others)

     -- odesolve

     -- princurve
    lamix:
Error on line 116: Declaration error for v: adjustable dimension on 
non-argument

    -- splancs
/usr/bin/ld: multiple definitions of symbol _bounds_

     -- wle
  mleaic:
Error on line 229: Declaration error for work: adjustable dimension on 
non-argument

   -- subselect
configure: error: R was configured without a FORTRAN compiler
ERROR: configuration failed for package `subselect'

The multiple defined symbols are a well known OS X problem. There are ad 
hoc fixes
using linker flags, but the best way to fix this is to use extern in the 
source code (although
almost all these packages use f2c to translate the fortran into c). The 
"adjustable dimension"
error is possibly an f2c problem. Ans subselect does not recognize f2c 
as a fortran
compiler.
=======================================================================
Complicated/interface  packages which compile (almost) out-of-the-box
=======================================================================
RPgSQL
RmSQL
RMySQL
gtk
RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
RSPerl
XML (this gives a multiple defined symbol for xmlParserError, which is
defined in Utils.c but also in libxml.dylib -- I commented out the 
routine
in Utils.c, but this may be a bit heavy handed).
Rpy
rpvm
RObjectTables
=======================================================================
CRAN packages I have not tried yet (because I don't have/use the things 
they interface to)
=======================================================================
RODBC
ROracle
RQuantlib
RSQLite
=======================================================================
CRAN packages which compile and install, but do not work

 > library("Matrix")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
         unable to load shared library 
"/sw/lib/R/library/Matrix/libs/Matrix.so":
   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
_ATL_cGetNB
_ATL_dGetNB
_ATL_sGetNB
_ATL_zGetNB
_cblas_dgemm
_cblas_dscal
_cblas_dswap
_cblas_dsyrk
_cblas_dtrsm
_cblas_idamax
_dsymv_
Error in library("Matrix") : .First.lib failed

If I use nm on Matrix.so, all these symbols are undefined.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 21:29:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 12:29:01 -0800
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <EE9135D6-499C-11D6-8D4F-000393860F3C@stat.ucla.edu>

I compiled and installed fracdiff, akima, splancs and odesolve by adding 
the
-m linker flag when foo.so is build.

I compiled and installed princurve and wle by removing nasty end-of-file
characters from some of the fortran sources

There are no solutions for the subselect and Matrix problems yet.

On Saturday, April 6, 2002, at 11:28 AM, Jan de Leeuw wrote:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>     -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_
>
>     -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)
>
>     -- odesolve
>
>     -- princurve
>    lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument
>
>    -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_
>
>     -- wle
>  mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument
>
>   -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'
>
> The multiple defined symbols are a well known OS X problem. There are 
> ad hoc fixes
> using linker flags, but the best way to fix this is to use extern in 
> the source code (although
> almost all these packages use f2c to translate the fortran into c). The 
> "adjustable dimension"
> error is possibly an f2c problem. Ans subselect does not recognize f2c 
> as a fortran
> compiler.
> =======================================================================
> Complicated/interface  packages which compile (almost) out-of-the-box
> =======================================================================
> RPgSQL
> RmSQL
> RMySQL
> gtk
> RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
> RSPerl
> XML (this gives a multiple defined symbol for xmlParserError, which is
> defined in Utils.c but also in libxml.dylib -- I commented out the 
> routine
> in Utils.c, but this may be a bit heavy handed).
> Rpy
> rpvm
> RObjectTables
> =======================================================================
> CRAN packages I have not tried yet (because I don't have/use the things 
> they interface to)
> =======================================================================
> RODBC
> ROracle
> RQuantlib
> RSQLite
> =======================================================================
> CRAN packages which compile and install, but do not work
>
> > library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed
>
> If I use nm on Matrix.so, all these symbols are undefined.
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sat Apr  6 23:09:19 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 7 Apr 2002 00:09:19 +0200
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
References: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <15535.29199.962752.731527@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>      -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_

>      -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)

>      -- odesolve

>      -- princurve
>     lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument

>     -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_

>      -- wle
>   mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument

>    -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'

> The multiple defined symbols are a well known OS X problem. There are
> ad hoc fixes using linker flags, but the best way to fix this is to
> use extern in the source code (although almost all these packages use
> f2c to translate the fortran into c). The "adjustable dimension" error
> is possibly an f2c problem. Ans subselect does not recognize f2c as a
> fortran compiler.

I recently added a shell script wrapper to compile/link FORTRAN 77 code
based on f2c, which for the purpose of Autoconf can be used as the
FORTRAN 77 compiler.  The configure script in subselect will need to be
modified to use R CMD config F77 (rather than grep/sed on etc/Makeconf)
for getting this.  But this will only make the configuration error go
away: the package will still not compile because the code, as wle and
princurve, use variable-sized arrays.  

> CRAN packages which compile and install, but do not work

>> library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>          unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>    dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed

> If I use nm on Matrix.so, all these symbols are undefined.

[I assume there are in your Atlas and cblas libs?  What does ldd on
Matrix.so say?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204070515.g375F4413033@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Apr  8 16:20:18 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Mon, 8 Apr 2002 17:20:18 +0200 (MET DST)
Subject: [Rd] Undocumenten in: R INSTALL --help (PR#1442)
Message-ID: <200204081520.RAA22543@pubhealth.ku.dk>


R version 1.4.1

In the documentation of INSTALL, these options are listed:

  --no-docs
  --no-text
  --no-html
  --no-latex

Only the first of these is mentioned if I run the command:

  R INSTALL --help

-- 
Peter Kleiweg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  8 20:26:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Apr 2002 21:26:14 +0200
Subject: [Rd] Feature freeze for R-1.5.0
Message-ID: <x2n0wevvop.fsf@blueberry.kubism.ku.dk>


OK, so the feature freeze for 1.5.0 is on as of now. Basically this
means that we will not add new features or API modifications before
the release on April 29.

The set of recommended packages will go into a similar feature freeze
one week from now, when the base package will enter a hard code freeze
(only critical bugs fixed), and a week further on, also the
recommended packages will go into code freeze and the whole thing will
have a final round of platform testing.

I.e. now is a bad time to complain about missing features, but it
might be a very good time to test your packages and scripts against
the new version and see whether they need to be changed and whether
they chase up any bugs. Notice that some of the changes in 1.5.0 have
known compatibility issues -- these are outlined in
http://developer.r-project.org/150update.txt .

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Apr  8 21:51:21 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 8 Apr 2002 15:51:21 -0500
Subject: [Rd] threaded libraries (e.g. ATLAS) not yet supported in 1.5
Message-ID: <20020408155121.A21265@nokomis.stat.umn.edu>

There was some discussion a while back about using threaded BLAS
libraries, such as a threaded version of ATLAS, with R.  While it is
possible to build R to use these libraries (if you get all the right
flags for your platform) there is a problem with signal handling, in
particular SIGINT, that we have not yet been able to resolve.
Hopefully we will be able to come up with a satisfactory resolution
for 1.6, but 1.5 does not have the infrastructure needed to adequately
support threaded libraries.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Tue Apr  9 04:35:37 2002
From: hammour@msn.com (hammour@msn.com)
Date: Tue, 9 Apr 2002 05:35:37 +0200 (MET DST)
Subject: [Rd] symbol  that stands for "cents" crashes R (PR#1444)
Message-ID: <200204090335.FAA24301@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.65.147)


I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
as follows:

plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
 ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")

R stops after the word "US" and the following error message appears:

"This program has performed an illegal operation and will be shut down.

RGUI caused an invalid page fault in
module MSVCRT.DLL at 0167:7801447b.
Registers:
EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b 
Stack dump:
0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"

If the symbol replaced by the word "cents", the plot executed without any
hassle.

Regards

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:15:25 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 9 Apr 2002 08:15:25 +0200 (MET DST)
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R ( (PR#1445)
Message-ID: <200204090615.IAA24696@pubhealth.ku.dk>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:16:20 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 Apr 2002 08:16:20 +0200
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R (
 PR#1444)
References: <200204090335.FAA24301@pubhealth.ku.dk>
Message-ID: <3CB28733.1ED74FCD@statistik.uni-dortmund.de>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Apr  9 08:07:48 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Apr 2002 09:07:48 +0200 (MET DST)
Subject: [Rd] match.arg confusion (PR#921)
Message-ID: <200204090707.JAA25096@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> [sys.function fails sometimes (sorry, our mail system
    PD> decide to throw away the original mail)]

    PD> Yes, I bumped into something similar recently. The
    PD> problem is that we only actually store the call in the
    PD> context structure, not the function, so sys.function has
    PD> to grab the call, take the 1st element, and reevaluate
    PD> it in the parent frame. It is quite easy to think up
    PD> examples where a second evaluation does not give the
    PD> same value as the first.

    PD> Your particular case is of a slightly different natur
    PD> and should be easily fixable by replacing findVar in
    PD> R_sysfunction by findVar1 and looking specifically for
    PD> objects of mode "function", but the basic problem
    PD> persists. I don't think I want to risk fixing this (and
    PD> maybe unfixing something else) for 1.2.3 tomorrow
    PD> though.

and Peter *did* implement the ``stop gap'' fix above for 1.5.0,
but the proper fix (for the more general problem) is still to be
done.

Martin

    JonR> From: J.C.Rougier@durham.ac.uk
    JonR> Date: Wed, 25 Apr 2001 13:23:09 +0200 (MET DST)
     ...

    JonR> This one may not strictly be a bug, and it was
    JonR> certainly my fault, but it took me a while to track it
    JonR> down and it is rather strange:
(it *is* bug)

     funOne <- function(x) { funTwo <- 1:10 ; funTwo(x) }

     funTwo <- function(v) 2*v

     funOne(5) # answer is 10 as expected

     # now a different definition for funTwo with a match.arg

     funTwo <- function(v, foo=c("small", "large")) { 
	       foo <- match.arg(foo); print(foo); 2*v }

     funOne(5) # answer is 10, but foo is NULL

    JonR> What happens is that in funOne I mask funTwo with a
    JonR> vector, but that doesn't matter as the call to funTwo
    JonR> specifies mode="function" (or something similar).  But
    JonR> what happens when funTwo includes a match.arg?  In
    JonR> this case match.arg fails, and the reason it fails is
    JonR> that sys.function(sys.parent()) in match.arg evaluates
    JonR> to 1:10.  If there is a bug here it is the failure of
    JonR> sys.function to grab a function, with the result that
    JonR> formal.args in match.fun is NULL.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Apr  9 23:52:50 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 00:52:50 +0200 (MET DST)
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
Message-ID: <200204092252.AAA02600@pubhealth.ku.dk>


In a package I've been developing for manipulating genetic data I discovered
a problem when indexing into character arrays using NA's:

Create a character matrix and a numeric matrix

	> cmat <- matrix( letters[1:4], ncol=2, nrow=2)
	> nmat <- matrix( 1:4, ncol=2, nrow=2)

Create an index vector containing an NA value

	> indvec <- c(1,2,NA)

Indexing works fine for both matrixes when we only pull off *one* column:

	> cmat[ indvec, 1 ]
	[1] "a"  "b"  "NA"
	> nmat[ indvec, 1 ]
	[1]  1  2 NA

	> cmat[ indvec, 2 ]
	[1] "c"  "d"  "NA"
	> nmat[ indvec, 2 ]
	[1]  3  4 NA

However, when we pull off both columns, we get "" where we should have NA
for cmat but it works properly for nmat:

	> cmat[ indvec,  ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  
	> nmat[ indvec,  ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA

	> cmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  

	> nmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA


The problem persists with other matrix sizes:

	> cmat <- matrix( letters[1:6], ncol=3, nrow=2)
	> nmat <- matrix( 1:6, ncol=3, nrow=2)
	> cmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,] "a"  "c"  "e" 
	[2,] "b"  "d"  "f" 
	[3,] "NA" ""   ""  
	> nmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,]    1    3    5
	[2,]    2    4    6
	[3,]   NA   NA   NA

Also we get a strange result if the only index is NA:

	> cmat[NA,]
	     [,1] [,2] [,3]
	[1,] "NA" ""   ""  
	[2,] "NA" ""   ""  
	> nmat[NA,]
	     [,1] [,2] [,3]
	[1,]   NA   NA   NA
	[2,]   NA   NA   NA

I would expect to get a single row for these cases rather than the whole
matrix replicated and (incorrectly for the cmat) filled with NA.

I'm reporting this now to get it in.  I'll download the 1.5.0  source code
now and muck about to see if I can locate the problem.  

-Greg

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R                   


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 10:08:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 11:08:32 +0200
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
In-Reply-To: <200204092252.AAA02600@pubhealth.ku.dk>
References: <200204092252.AAA02600@pubhealth.ku.dk>
Message-ID: <x2bscr9azz.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> In a package I've been developing for manipulating genetic data I discovered
> a problem when indexing into character arrays using NA's:

> 	> cmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,] "a"  "c" 
> 	[2,] "b"  "d" 
> 	[3,] "NA" ""  
> 	> nmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,]    1    3
> 	[2,]    2    4
> 	[3,]   NA   NA

This seems to have vanished in R-1.5.0pre, likely as a (fortunate, if
unexpected) side effect of the character NA changes:

> cmat[ indvec,  ]
     [,1] [,2]
[1,] "a"  "c" 
[2,] "b"  "d" 
[3,] NA   NA  
> nmat[ indvec,  ]
     [,1] [,2]
[1,]    1    3
[2,]    2    4
[3,]   NA   NA

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 11:06:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 12:06:02 +0200
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <x2u1qj7trp.fsf@blueberry.kubism.ku.dk>


There's a directory on CRAN containing the current snapshots of the
set of recommended packages. They will not be finaly feature-frozen
until Monday, but you might want to check them out anyway. 

If you have wget, the easiest way to get the complete set is probably

wget -r http://cran.r-project.org/src/contrib/1.5.0/Recommended

followed by

.../R CMD INSTALL cran.r-project.org/src/contrib/1.5.0/Recommended/*.tar.gz 

(Of course, you need a current snapshot of r-devel to do this).

Please report any errors that you find.

        -p
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From G.Innocent@vet.gla.ac.uk  Wed Apr 10 14:36:20 2002
From: G.Innocent@vet.gla.ac.uk (G.Innocent@vet.gla.ac.uk)
Date: Wed, 10 Apr 2002 15:36:20 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101336.PAA09300@pubhealth.ku.dk>

Dear bugs @r;

The following reproduces erroneous results on my system using R-gui:

platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R

#####################################################

inter.gp.effect <- 0.1

animals <- data.frame(pos = 0:2)

SI.model <- function(Animal.group) {

		group <- 1
		Animal.group$pos[group] <- Animal.group$pos[group] + 1
		effective.animals <- Animal.group$pos	# allows us to model inter-group
contact
#
			effective.animals[1:(length(Animal.group$pos)-1)] <-
				effective.animals[1:(length(Animal.group$pos)-1)] +
				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
##
			effective.animals[2:length(Animal.group$pos)] <-
				effective.animals[2:length(Animal.group$pos)]  +
				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
	return(Animal.group)
}

print(SI.model(animals))

####################################################

results:
> source("c:\\r work\\simulation model\\bug.R")
     pos
1 1.10
2 1.31
3 2.12

Expected results:
   pos
1    1
2    1
3    2

Notes:

1) The value for group can be anywhere on the interval 1:3, the results
differ, but are consistently incorrect.

2) If Animal.group is a vector, not a data frame the error does not occur.

3) Interestingly if SI.model is run through the debugger step by step, and
the value of Animal.group examined at the place marked in the code by a
single hash, then the correct result is obtained.  If the value of
Animal.group is examined at the place marked with a double hash, then the
following (incorrect) result is obtained:

exiting from: SI.model(animals)
  pos
1 1.1
2 1.2
3 2.0

4) Pre-defining expected.animals as either a data.frame, or
vector(model="numeric") does not alter the erroneous output

5) I would suggest that at both assignments to effective.animals, the result
is also being assigned to Animal.group$pos.  Examining the value assigned to
Animal.group at an appropriate place is forcing the interpreter to assign
into Animal.group correctly, and therefore fixing its value.

6) The above code appears to be the minimum of code required to reproduce
the results on my machine.

I have taken this problem as far as my limited debugging abilities allow.  I
am not a C or Fortran guru!

I would like to take this opportunity to thank those who have contributed to
the r project for a fine piece of software.

I hope that this bug report helps.  If I can be of further assistance then
let me know.

Thanks again

Giles

Dr. G.T. Innocent
Comparative Epidemiology and Informatics Group,
Dept. of Veterinary Clinical Studies,
Glasgow University Vet. School.
Bearsden Road, Glasgow G61 1QH
Tel. 0141 339 8855 Ext. 0531.
Fax. 0141 330 5729
e-mail G.Innocent@vet.gla.ac.uk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 14:59:53 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 15:59:53 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x2d6x77ixy.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> inter.gp.effect <- 0.1
> 
> animals <- data.frame(pos = 0:2)
> 
> SI.model <- function(Animal.group) {
> 
> 		group <- 1
> 		Animal.group$pos[group] <- Animal.group$pos[group] + 1
> 		effective.animals <- Animal.group$pos	# allows us to model inter-group
> contact
> #
> 			effective.animals[1:(length(Animal.group$pos)-1)] <-
> 				effective.animals[1:(length(Animal.group$pos)-1)] +
> 				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
> ##
> 			effective.animals[2:length(Animal.group$pos)] <-
> 				effective.animals[2:length(Animal.group$pos)]  +
> 				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
> 	return(Animal.group)
> }
> 
> print(SI.model(animals))
> 
> ####################################################
> 
> results:
> > source("c:\\r work\\simulation model\\bug.R")
>      pos
> 1 1.10
> 2 1.31
> 3 2.12
> 
> Expected results:
>    pos
> 1    1
> 2    1
> 3    2

Confirmed with 1.5.0pre. I'll have a look.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 15:27:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 16:27:00 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> 6) The above code appears to be the minimum of code required to reproduce
> the results on my machine.

You can do better than that:

> f
function(A) {
  A$p[1] <- 2
  E <- A$p 
  E[1:2] <- 0.1*A$p[2:3]
  return(A)
}
> x
  p
1 0
2 1
3 2
> f(x)
    p
1 0.1
2 0.2
3 2.0

Notice that the last line changing E is effectively changing A$p, so
something is up with our duplication-avoidance scheme. Luke?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 16:22:43 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 17:22:43 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101522.RAA09977@pubhealth.ku.dk>

In R-1.5.0pre (2002-04-08) on Solaris 2.6, the window that X11() creates has a
title like:

    R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

except the funny characters at the end have umlauts and other accents
(i.e. extended ASCII characters), and they may be different each time X11() is
invoked.  There is no loss of functionality; it just looks a little ugly.

I saw this behavior in R-1.3.?, it disappeared (along with the whole window
title) in R-1.4.1, and now it's back in R-1.5.0pre.

				-- David Brahm (brahm@alum.mit.edu)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 08
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Apr 10 16:47:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Apr 2002 17:47:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101547.RAA10066@pubhealth.ku.dk>


>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
    DavidB> window that X11() creates has a title like:

    DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

    DavidB> except the funny characters at the end have umlauts
    DavidB> and other accents (i.e. extended ASCII characters),
    DavidB> and they may be different each time X11() is
    DavidB> invoked.  There is no loss of functionality; it just
    DavidB> looks a little ugly.

This made me look at our Solaris (2.5.1 + tons of patches)
version of   R-1.5.0pre (2002-04-09).

There, X11()  {or  "plot(1)"}  opens a window very quickly and
then ends in a segmentation fault (see below).

Our automatic checking (unfortunately ?) nowadays excludes all
interactive features, including non-file graphical devices...

Yes, this will be investigated!
 
Here is my story (does anyone have a suggestion to get rid of
		  GDB's warning get better track of R_X11.so ?)


 % R -d gdb

 GDB is free software and you are welcome to distribute copies of it
  under certain conditions; type "show copying" to see the conditions.
 There is absolutely no warranty for GDB; type "show warranty" for details.
 GDB 4.16 (sparc-sun-solaris2.5.1), 
 Copyright 1996 Free Software Foundation, Inc...
 (gdb) r --vanilla
 Starting program: /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/bin/R.bin --vanilla
 warning: Unable to find dynamic linker breakpoint function.
 warning: GDB will be unable to debug shared library initializers
 warning: and track explicitly loaded dynamic code.

 R : Copyright 2002, The R Development Core Team
 Version 1.5.0 Under development (unstable) (2002-04-09)

    <.....>

 > x11()

 Program received signal SIGSEGV, Segmentation fault.
 0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 (gdb) bt
 #0  0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #1  0xef4bbb0c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #2  0xef4bd2a4 in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #3  0x92340 in Rf_addDevice (dd=0xb4bae8) at ../../../R/src/main/graphics.c:5630
 #4  0xfe91c in Rf_addX11Device (display=0x21a600 "\b", width=7, height=7, 
     ps=12, gamma=1, colormodel=4, maxcubesize=256, canvascolor=16777215, 
     devname=0x19edd8 "X11", deviceDriverRoutine=0xef4bd938 <_end+135424>)
     at ../../../R/src/unix/devices.c:326
 #5  0xfe7e4 in do_X11 (call=0x19edd8, op=0x2173e8, args=0xffffff, env=0xb47f34)
     at ../../../R/src/unix/devices.c:289
 #6  0xa39ec in do_internal (call=0x1b949c, op=0x19edd8, args=0xb47e1c, 
     env=0xb47f34) at ../../../R/src/main/names.c:1020
 #7  0x7ba3c in Rf_eval (e=0x9f1fa0, rho=0xb47f34)
     at ../../../R/src/main/eval.c:404
 #8  0x7be2c in Rf_applyClosure (call=0xb390f4, op=0x9f1ec0, arglist=0x1f9ea0, 
     rho=0x21ab78, suppliedenv=0x1f9ea0) at ../../../R/src/main/eval.c:595
 #9  0x7b824 in Rf_eval (e=0xb390f4, rho=0x21ab78)
     at ../../../R/src/main/eval.c:439
 #10 0x968b8 in R_ReplConsole (rho=0x21ab78, savestack=0, browselevel=0)
     at ../../../R/src/main/main.c:187
 #11 0x970d0 in run_Rmainloop () at ../../../R/src/main/main.c:499
 #12 0xff1bc in main (ac=0, av=0xefffe79c) at ../../../R/src/unix/system.c:93
 (gdb) 


    DavidB> I saw this behavior in R-1.3.?, it disappeared (along with the whole window
    DavidB> title) in R-1.4.1, and now it's back in R-1.5.0pre.

    DavidB> -- David Brahm (brahm@alum.mit.edu)


    DavidB> --please do not edit the information below--

    DavidB> Version:
    DavidB> platform = sparc-sun-solaris2.6
    DavidB> arch = sparc
    DavidB> os = solaris2.6
    DavidB> system = sparc, solaris2.6
    DavidB> status = Under development (unstable)
    DavidB> major = 1
    DavidB> minor = 5.0
    DavidB> year = 2002
    DavidB> month = 04
    DavidB> day = 08
    DavidB> language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 17:05:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 18:05:27 +0200
Subject: [Rd] Funny characters in x11 window title (PR#1451)
In-Reply-To: <200204101547.RAA10066@pubhealth.ku.dk>
References: <200204101547.RAA10066@pubhealth.ku.dk>
Message-ID: <x24rij7d4o.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

>     DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
>     DavidB> window that X11() creates has a title like:
> 
>     DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y
...
> This made me look at our Solaris (2.5.1 + tons of patches)
> version of   R-1.5.0pre (2002-04-09).

For whatever it is worth, I can't reproduce this on Solaris7/gcc3.0.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Apr 10 17:29:07 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 10 Apr 2002 09:29:07 -0700 (PDT)
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>

On 10 Apr 2002, Peter Dalgaard BSA wrote:

> G.Innocent@vet.gla.ac.uk writes:
>
> > 6) The above code appears to be the minimum of code required to reproduce
> > the results on my machine.
>
> You can do better than that:
>
> > f
> function(A) {
>   A$p[1] <- 2
>   E <- A$p
>   E[1:2] <- 0.1*A$p[2:3]
>   return(A)
> }
<snip>
> Notice that the last line changing E is effectively changing A$p, so
> something is up with our duplication-avoidance scheme. Luke?

and it matters that the assignment to E is coming from A$p. If it comes
from A$q or from some other vector then the bug doesn't bite.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Apr 10 17:50:14 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 10 Apr 2002 11:50:14 -0500
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>; from tlumley@u.washington.edu on Wed, Apr 10, 2002 at 09:29:07AM -0700
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk> <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
Message-ID: <20020410115014.A11138@nokomis.stat.umn.edu>

It's a problem in subset.c.  Should be fixed now.

A further simplification with annotation:

x <- list(p=1)

f <- function(A) {
  A$p <- 2       # makes copy of A with NAMED 1
  E <- A$p       # no copy, A$p gets NAMED 2
  A$p            # is setting NAMED back to 1
  E[1] <- 0.1    # modifies shared value in place
  return(A)
}

f(x)

The problem was in code that looks like this:

	y = VECTOR_ELT(x, i);
        SET_NAMED(y, NAMED(x));

which ignores the possibility that NAMED(y) may already be larger than
NAMED(x).  I've changed these bits to

	y = VECTOR_ELT(x, i);
	if (NAMED(x) > NAMED(y))
	    SET_NAMED(y, NAMED(x));

This occurred in a few other places but mostly in pairlist code so was
less likely to bite, but I changed those as well.

The problem did not occur with [[ because that does more copying.

luke

On Wed, Apr 10, 2002 at 09:29:07AM -0700, Thomas Lumley wrote:
> On 10 Apr 2002, Peter Dalgaard BSA wrote:
> 
> > G.Innocent@vet.gla.ac.uk writes:
> >
> > > 6) The above code appears to be the minimum of code required to reproduce
> > > the results on my machine.
> >
> > You can do better than that:
> >
> > > f
> > function(A) {
> >   A$p[1] <- 2
> >   E <- A$p
> >   E[1:2] <- 0.1*A$p[2:3]
> >   return(A)
> > }
> <snip>
> > Notice that the last line changing E is effectively changing A$p, so
> > something is up with our duplication-avoidance scheme. Luke?
> 
> and it matters that the assignment to E is coming from A$p. If it comes
> from A$q or from some other vector then the bug doesn't bite.
> 
> 	-thomas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:24:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 19:24:13 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <20020410115014.A11138@nokomis.stat.umn.edu>
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
 <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
 <20020410115014.A11138@nokomis.stat.umn.edu>
Message-ID: <x2sn63v54y.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:26:47 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 19:26:47 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101726.TAA10413@pubhealth.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 19:59:20 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 20:59:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101859.UAA10717@pubhealth.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> I also get funny characters in the title bar on R 1.4.1 and R 1.5.0_devel
> (yesterday's version).

My bet is that it is X-server dependent what happens with bytes past
the end of a string set with

    XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
                    8, PropModeReplace, (unsigned char*)t, 50);

(in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).

Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:28:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 10 Apr 2002 16:28:40 -0400
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE916@groexmbcr02.pfizer.com>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:30:35 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 22:30:35 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102030.WAA10950@pubhealth.ku.dk>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 21:57:12 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 22:57:12 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102057.WAA11024@pubhealth.ku.dk>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> wrote:
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

Replacing '50' with 'strlen(t)' in those 2 places cures the problem for me!
Brilliant!
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From R-bugs@biostat.ku.dk  Thu Apr 11 09:00:04 2002
From: R-bugs@biostat.ku.dk (R-bugs@biostat.ku.dk)
Date: Thu, 11 Apr 2002 10:00:04 +0200
Subject: [Rd] Windows AltGr bug? (PR#1448)
Message-ID: <15541.17028.270482.560534@gargle.gargle.HOWL>

       [this was filter-bounced for R-devel, because of
        HTMLification and a binary attachment; also fixed up the Subject; MM]

hello,

I'm running R (version 1.4.1) under Windows Mellenium and this error =
message appears every time I press AltGr + any other key.
A bug or a any instability of my sistem?

(attached GIF file deleted; don't use ANY attachments for R-bugs!)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mckay@suna.gmr.com  Thu Apr 11 15:40:27 2002
From: mckay@suna.gmr.com (Neil McKay MD)
Date: Thu, 11 Apr 2 10:40:27 EDT
Subject: [Rd] Mods that allow R scripts
Message-ID: <200204111440.g3BEeRV06920@math.ma.gmr.com>

I've hacked R so that it can be used to write shell and/or
CGI scripts, e.g. "hello world" can be written as:


	#!/usr/local/lib/R/bin/R.bin --script

	cat("Hello, World!\n");

The mods required to enable this aren't particularly major.
(Adds about 70 lines of code, IIRC.) Anyone else interested
in adding this to the R core?

-- 
Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
Enterprise Systems Lab                  FAX:   (586)986-0574 (GM:8-226-0574)
GM Research & Development Center        Internet: mckay@gmr.com
30500 Mound Road
Warren, Mich. 48090

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Apr 11 16:14:07 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 11 Apr 2002 10:14:07 -0500
Subject: [Rd] Mods that allow R scripts
Message-ID: <E16vgH1-0004Vb-00@sonny.eddelbuettel.com>


> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?

Yes!  I found it very useful in other software systems (e.g. Octave).

That feature-request gets discussed here every now and then; I
recall Peter and Luke discussing it here a few months back.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Apr 11 16:25:19 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 11 Apr 2002 11:25:19 -0400
Subject: [Rd] Mods that allow R scripts
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE918@groexmbcr02.pfizer.com>

Yes.  Can you send me a copy of the patch?

Thanks,

Greg

> -----Original Message-----
> From: Neil McKay MD [mailto:jz0vs8@gmr.com]
> Sent: Thursday, April 11, 2002 10:40 AM
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Mods that allow R scripts
> 
> 
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?
> 
> -- 
> Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 
> (GM:8-226-1470)
> Enterprise Systems Lab                  FAX:   (586)986-0574 
> (GM:8-226-0574)
> GM Research & Development Center        Internet: mckay@gmr.com
> 30500 Mound Road
> Warren, Mich. 48090
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr 11 17:04:36 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 11 Apr 2002 12:04:36 -0400
Subject: [Rd] Mods that allow R scripts
In-Reply-To: <200204111440.g3BEeRV06920@math.ma.gmr.com>
References: <200204111440.g3BEeRV06920@math.ma.gmr.com>
Message-ID: <15541.46100.236766.419250@gargle.gargle.HOWL>

Neil McKay MD writes:
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
>   #!/usr/local/lib/R/bin/R.bin --script
>   cat("Hello, World!\n");

That is very cool, and would replace about 25 lines of Perl wrapper for me, IF
you could also easily pass flags and arguments, e.g.:
  Unix> myRscript -e -f datafile
These would have to become R variables, somehow.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Apr 11 19:55:01 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 11 Apr 2002 20:55:01 +0200 (MET DST)
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
Message-ID: <200204111855.UAA19587@pubhealth.ku.dk>

[This is on Redhat Linux 7.1, using sawfish window manager under gnome:

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
]

If I close the data.entry() window using the Window manager, I get
SIGSEGV.  When debugging, the routine closewin() gets closed twice -
on the first time, the window closes, the second time I get the error.

This is with r-devel as of today, with "CFLAGS -g".  I edited
closewin() in dataentry.c to show me when it is called:

void closewin(void)
{
  printf("In routine closewin\n");
    XFreeGC(iodisplay, iogc);
    XDestroyWindow(iodisplay, iowindow);
    XCloseDisplay(iodisplay);
}


% bin/R
> x <- edit(data.frame())

The data frame pops up.  I just click on the Window manager close
button (not the "Quit" button):

In routine closewin
In routine closewin

Program received signal SIGSEGV, Segmentation fault.
0x08bd62d2 in ?? ()

When I step through in gdb (below), I see the data frame window
disappears after the first call to closewin; the segmentation fault
happens within the second call.


% bin/R -d gdb
(gdb) run

[R starts up]  Ctrl-c to get back to debugger:
(gdb) break closewin
Breakpoint 1 at 0x402195ff: file dataentry.c, line 1315.
(gdb) cont
Continuing.
> x <- edit(data.frame())

At this point, I click the "close" button provided by the window
manager, control returns to gdb.  If I then single-step through gdb, I
see the error in the second call to closewin (from line 313 of
dataentry.c)

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) n
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 
1317        XDestroyWindow(iodisplay, iowindow);
(gdb) 
1318        XCloseDisplay(iodisplay);
(gdb) 
1319    }
(gdb) 
eventloop () at dataentry.c:1155
1155                           done = 1;
(gdb) 
1157                    break;
(gdb) 
1161    }
(gdb) 
RX11_dataentry (call=0x850b7c0, op=0x8270afc, args=0x8bd4e84, rho=0x8bcd998)
    at dataentry.c:312
312         endcontext(&cntxt);
(gdb) 
313         closewin();
(gdb) 

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) 
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 

Program received signal SIGSEGV, Segmentation fault.
0x08bd750a in ?? ()





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr 11 22:46:03 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Apr 2002 23:46:03 +0200
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
In-Reply-To: <200204111855.UAA19587@pubhealth.ku.dk>
References: <200204111855.UAA19587@pubhealth.ku.dk>
Message-ID: <x2ads97vtw.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> [This is on Redhat Linux 7.1, using sawfish window manager under gnome:
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 11
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> ]
> 
> If I close the data.entry() window using the Window manager, I get
> SIGSEGV.  When debugging, the routine closewin() gets closed twice -
> on the first time, the window closes, the second time I get the error.

OK, I see it here too. The closewin() inside eventloop() looks
completely superfluous to me.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 03:29:09 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 11 Apr 2002 22:29:09 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com>

>Date: 10 Apr 2002 12:06:02 +0200
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>
>There's a directory on CRAN containing the current snapshots of the
>set of recommended packages. They will not be finaly feature-frozen
>until Monday, but you might want to check them out anyway. 
>
>If you have wget, the easiest way to get the complete set is probably...

For Windows users:  the snapshots are included in the SetupR.exe
install program that is available on my web site at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

Check the date on the file to see when I last did a build and upload.
(Right now the date shows it was built yesterday.  I'll probably do
another build tomorrow.)

I don't think Rcmd INSTALL is currently working, but I imagine it will
be after the next build or two.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 13:47:18 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 12 Apr 2002 08:47:18 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
In-Reply-To: <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
References: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com> <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
Message-ID: <hmldbu4v30pfstqsf3fjsnugujk29t3mop@4ax.com>

On Fri, 12 Apr 2002 08:30:13 +0100 (BST), you wrote:
>> I don't think Rcmd INSTALL is currently working, but I imagine it will
>> be after the next build or two.
>
>Works for me, and always has done and I use it to build the packages on
>CRAN.

Right, my mistake.  It's BUILD and CHECK that are not currently
working here.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 20:17:15 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 15:17:15 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>


Hi All,

What is the current status of removing the global variables etc that is
required to permit multi-threading R?

I'm developing a web application tool for/using R, python (www.python.org),
and Zope (www.zope.org), and it would be really convenient if I could use
something like RPy to communicate with several concurrent R sessions,
preferably within the same process space.  

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Apr 12 20:26:18 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Apr 2002 15:26:18 -0400
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Fri, Apr 12, 2002 at 03:17:15PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>
Message-ID: <20020412152618.A9973@jessie.research.bell-labs.com>

I plan to attack this in mid May unless Luke or others get there
first.  As I have mentioned before, making the R engine reentrant
and/or thread-safe will probably not be all that is needed for your
purposes, and fixing the packages, especially those with native (C,
C++ & Fortran) code is also necessary. That is why I have been working
on a tool that aids in the task of removing the global variables.

Also, it may be prudent to prioritize an adequate security model in
your application over allowing concurrent intrusions :-)

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> What is the current status of removing the global variables etc that is
> required to permit multi-threading R?
> 
> I'm developing a web application tool for/using R, python (www.python.org),
> and Zope (www.zope.org), and it would be really convenient if I could use
> something like RPy to communicate with several concurrent R sessions,
> preferably within the same process space.  
> 
> -Greg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Apr 12 20:44:35 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 12 Apr 2002 14:44:35 -0500
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <20020412152618.A9973@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Fri, Apr 12, 2002 at 03:26:18PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com> <20020412152618.A9973@jessie.research.bell-labs.com>
Message-ID: <20020412144435.G8205@nokomis.stat.umn.edu>

Sounds like what you need (given that Python is involved with it's
global interpreter lock) is concurrent threads, not full parellelism.
That is at least feasible, though it's a non-trivial effort and it
remains to be seen if we have the resources to pull it off.  Full
parallelism at the R level is much harder; not clear it is
realistically feasible at all.

On the other hand, there are some simple things involving threading
vectorized arithmetic operations for speedup on multi=processors that
we are likely to look into fairly soon and that may turn out to be
useful.

luke

On Fri, Apr 12, 2002 at 03:26:18PM -0400, Duncan Temple Lang wrote:
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.
> 
> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient if I could use
> > something like RPy to communicate with several concurrent R sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:01:44 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:01:44 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92D@groexmbcr02.pfizer.com>



> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:23:26 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:23:26 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92E@groexmbcr02.pfizer.com>


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 15:10:04 2002
From: popescul@unagi.cis.upenn.edu (popescul@unagi.cis.upenn.edu)
Date: Sat, 13 Apr 2002 16:10:04 +0200 (MET DST)
Subject: [Rd] glm() in R (PR#1457)
Message-ID: <200204131410.QAA00268@pubhealth.ku.dk>


 Hello,

 I was using R for logistic regression modeling (glm() with binomial
family) and have noticed that it' can't handle more than 100 predictors
(reports syntax error)
Is it a bug, or a language restiction ?

 I would be very grateful if you let me know possible ways around the
problem, as I need R for problems with many attributes.

 Thank you,

 Alex.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 13 17:16:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Apr 2002 18:16:02 +0200
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <200204131410.QAA00268@pubhealth.ku.dk>
References: <200204131410.QAA00268@pubhealth.ku.dk>
Message-ID: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>

popescul@unagi.cis.upenn.edu writes:

>  Hello,
> 
>  I was using R for logistic regression modeling (glm() with binomial
> family) and have noticed that it' can't handle more than 100 predictors
> (reports syntax error)
> Is it a bug, or a language restiction ?
> 
>  I would be very grateful if you let me know possible ways around the
> problem, as I need R for problems with many attributes.
> 
>  Thank you,
> 
>  Alex.

If you get a syntax error, then I wouldn't expect that glm() itself is
causing it. More likely, you are exceeding the line length limit in
the parser. Try splitting your command over several lines, or use
simplified formulas like  glm(V1~.,data=d,family=binomial).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Apr 13 18:29:15 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 13 Apr 2002 10:29:15 -0700 (PDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>

On 13 Apr 2002, Peter Dalgaard BSA wrote:

> popescul@unagi.cis.upenn.edu writes:
>
> >  Hello,
> >
> >  I was using R for logistic regression modeling (glm() with binomial
> > family) and have noticed that it' can't handle more than 100 predictors
> > (reports syntax error)
> > Is it a bug, or a language restiction ?
> >
> >  I would be very grateful if you let me know possible ways around the
> > problem, as I need R for problems with many attributes.
> >
> >  Thank you,
> >
> >  Alex.
>
> If you get a syntax error, then I wouldn't expect that glm() itself is
> causing it. More likely, you are exceeding the line length limit in
> the parser. Try splitting your command over several lines, or use
> simplified formulas like  glm(V1~.,data=d,family=binomial).

To be specific, I defined
y<-rbinom(800,1,.5)
x<-as.data.frame(matrix(rnorm(800*300),ncol=300))

and the following all work
# using . to specify variables implicitly
glm(y~.,data=x,family=binomial())

# constructing a formula object
ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
glm(ff,data=x,family=binomial())

# constructing the whole call as a text string and evaluating it
expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
eval(parse(text=expr)[[1]])

#pasting the whole thing in multiple lines
 glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
    V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
    V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
     V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
     V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
    V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
    V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
    V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
    V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
    V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
    V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
   V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
   V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
   V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
   V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
   V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
    V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
   V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
    V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
    V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
    V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
    V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
    V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
  V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
     V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
     V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
     V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
     V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
     V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
     V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
     V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
  V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
  V300, data = x, family = binomial())

but pasting it as a single line gives a syntax  error.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 23:29:47 2002
From: popescul@unagi.cis.upenn.edu (Alexandrin Popescul)
Date: Sat, 13 Apr 2002 18:29:47 -0400 (EDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>
Message-ID: <Pine.GSO.4.44.0204131829050.1521-100000@unagi.cis.upenn.edu>


 Thomas and Peter,

 this was very helpful,

 Thanks,

 Alex.


On Sat, 13 Apr 2002, Thomas Lumley wrote:

> On 13 Apr 2002, Peter Dalgaard BSA wrote:
>
> > popescul@unagi.cis.upenn.edu writes:
> >
> > >  Hello,
> > >
> > >  I was using R for logistic regression modeling (glm() with binomial
> > > family) and have noticed that it' can't handle more than 100 predictors
> > > (reports syntax error)
> > > Is it a bug, or a language restiction ?
> > >
> > >  I would be very grateful if you let me know possible ways around the
> > > problem, as I need R for problems with many attributes.
> > >
> > >  Thank you,
> > >
> > >  Alex.
> >
> > If you get a syntax error, then I wouldn't expect that glm() itself is
> > causing it. More likely, you are exceeding the line length limit in
> > the parser. Try splitting your command over several lines, or use
> > simplified formulas like  glm(V1~.,data=d,family=binomial).
>
> To be specific, I defined
> y<-rbinom(800,1,.5)
> x<-as.data.frame(matrix(rnorm(800*300),ncol=300))
>
> and the following all work
> # using . to specify variables implicitly
> glm(y~.,data=x,family=binomial())
>
> # constructing a formula object
> ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
> glm(ff,data=x,family=binomial())
>
> # constructing the whole call as a text string and evaluating it
> expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
> eval(parse(text=expr)[[1]])
>
> #pasting the whole thing in multiple lines
>  glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
>     V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
>     V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
>      V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
>      V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
>     V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
>     V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
>     V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
>     V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
>     V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
>     V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
>    V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
>    V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
>    V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
>    V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
>    V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
>     V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
>    V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
>     V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
>     V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
>     V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
>     V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
>     V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
>   V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
>      V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
>      V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
>      V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
>      V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
>      V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
>      V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
>      V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
>   V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
>   V300, data = x, family = binomial())
>
> but pasting it as a single line gives a syntax  error.
>
>
> 	-thomas
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Mon Apr 15 11:12:41 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Mon, 15 Apr 2002 12:12:41 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151012.MAA07652@pubhealth.ku.dk>

Found one that stumped me.  I did a search on R-bugs for the
string "d-p-q-r-tests", and found zero entries in all categories 
(I don't think I secretly gave it a regex).

Did the usual configure, make, make check on OpenBSD 3.0, and 
encountered this message on d-p-q-r-tests.Rout:

running code in `d-p-q-r-tests.R' ... OK
comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
< [1] "`is.NA' value mismatches: 800 in current, 0  in target"
< Warning message:
< NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
---
> [1] TRUE
315,317c313
< [1] "`is.NA' value mismatches: 4 in current, 2  in target"
< Warning message:
< NaNs produced in: exp(z)
---
> [1] TRUE
 OK

If you're not too busy, I'd love to provide you with whatever you
need to look at this more closely than my untrained eyes can.
config.cache?  d-p-q-r-tests.Rout?  Anything else?

> version
         _
	 platform i386-unknown-openbsd3.0
	 arch     i386
	 os       openbsd3.0
	 system   i386, openbsd3.0
	 status
	 major    1
	 minor    4.1
	 year     2002
	 month    01
	 day      30
	 language R


Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 15 11:46:46 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 15 Apr 2002 12:46:46 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151046.MAA07982@pubhealth.ku.dk>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> Found one that stumped me.  I did a search on R-bugs for the
    Jason> string "d-p-q-r-tests", and found zero entries in all categories 
    Jason> (I don't think I secretly gave it a regex).

    Jason> Did the usual configure, make, make check on OpenBSD 3.0, and 
    Jason> encountered this message on d-p-q-r-tests.Rout:

    Jason> running code in `d-p-q-r-tests.R' ... OK
    Jason> comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
    Jason> < [1] "`is.NA' value mismatches: 800 in current, 0  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
    Jason> ---
    >> [1] TRUE
    Jason> 315,317c313
    Jason> < [1] "`is.NA' value mismatches: 4 in current, 2  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(z)
    Jason> ---
    >> [1] TRUE
    Jason> OK

    Jason> If you're not too busy, I'd love to provide you with whatever you
    Jason> need to look at this more closely than my untrained eyes can.
    Jason> config.cache?  d-p-q-r-tests.Rout?  Anything else?

Actually, we'd be very grateful if you could run these with
R-devel aka "R pre1.5.0" instead.

You can get a snapshot using rsync (or the tar file), see
    http://stat.ethz.ch/CRAN/sources.html

If you see the same problem (or also with 1.4.1)
look at the tests/d-p-q files
probably start R and try things like

 z <- c(-Inf,Inf,NA,NaN, rt(1000, df=2))
 z.ok <- z > -37.5 | !is.finite(z)
 for(df in 1:10)
    if(!is.logical(all.equal(pt(z, df), 1 - pt(-z,df), tol= 1e-15)))
      cat("ERROR -- df = ", df, "\n")

 c(pz <- pnorm(z), 1 - pnorm(z, lower=FALSE))
 c(pz, pnorm(-z, lower=FALSE))
 c(log(pz[z.ok]),  pnorm(z[z.ok], log=TRUE))


because these are around line 315 of tests/d-p-q-r-tests.Rout.save
and the second problem happened around there.

[A more desperate option would be to offer a login into your computer to
 someone from the R core team ...]

Thanks for helping us to have R running correctly on OpenBSD 3.0,
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 12:48:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 13:48:39 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
Message-ID: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>


As of 19:00 GMT we'll declare a feature freeze on the set of
recommended packages. We will then have one week to ferret out as many
problems as we can before final code freeze and platform testing. 

At the same time R-base is code-frozen, i.e. only critical bugs will
be fixed.

If you want to help making R 1.5.0 as bug-free as possible, it could
be a good idea to install the set of recommended packages at

http://cran.r-project.org/src/contrib/1.5.0/recommended

and try your favourite scripts with them. Please report if you find
any bugs. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 13:19:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 14:19:52 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
In-Reply-To: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
References: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ads5nogn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> If you want to help making R 1.5.0 as bug-free as possible, it could
> be a good idea to install the set of recommended packages at
> 
> http://cran.r-project.org/src/contrib/1.5.0/recommended

Sorry, make that 

http://cran.r-project.org/src/contrib/1.5.0/Recommended
                                            ^
                                         capital R

The recommended packages are those that we try to keep in sync with
the main distribution of R and request be included in binary packages.
The current set is:

 [   ]  KernSmooth_2.22-7.tar.gz 31-Mar-2002 10:20    26k
 [   ]  VR_7.0-1.tar.gz          12-Apr-2002 10:02   457k
 [   ]  boot_1.2-8.tar.gz        12-Apr-2002 10:16   178k
 [   ]  cluster_1.4-2.tar.gz     31-Mar-2002 09:40   111k
 [   ]  foreign_0.5-2.tar.gz     31-Mar-2002 09:39   179k
 [   ]  grid_0.6.tar.gz          09-Apr-2002 18:15   136k
 [   ]  lattice_0.5-0.tar.gz     10-Apr-2002 11:54    88k
 [   ]  mgcv_0.7-2.tar.gz        31-Mar-2002 09:39   132k
 [   ]  nlme_3.1-25.tar.gz       05-Apr-2002 09:34   509k
 [   ]  rpart_3.1-6.tar.gz       29-Mar-2002 09:33   108k
 [   ]  survival_2.9-1.tar.gz    14-Apr-2002 18:36   986k 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 16 17:41:12 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Apr 2002 12:41:12 -0400
Subject: [Rd] unbalanced braces
Message-ID: <3CBC5428.DD76AE8F@bank-banque-canada.ca>

Version 1.5.0 Under development (unstable) (2002-04-15):

The following in an Rd file fails checks with an indication that there are
unbalanced braces:

\description{
  specified in any of the addresses by enclosing them in double (\code{"})
quotes. Please do not use single (\code{'}) quotes.
}

The failure seems to be cause by the first line. (Perhaps there is a better way
for me to indicate the double quote.)

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Apr 17 03:33:52 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 16 Apr 2002 22:33:52 -0400
Subject: [Rd] Using strwidth before plotting
Message-ID: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>

In the plotcorr() function in the ellipse package, I want to position
things differently depending on the size of the labels.  I can use
strwidth to find out the length of the labels, but only when there's a
plot window open:  it won't open one.

Question:  What function call says:  make sure there's a window open
(i.e. do what plot() does before it starts plotting)?

I don't think I can use plot.new() or frame(), because I don' t want
to leave a blank page in the plot history if there was already a
window open.

Duncan Murdoch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 07:39:22 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 07:39:22 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>
Message-ID: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>

On Tue, 16 Apr 2002, Duncan Murdoch wrote:

> In the plotcorr() function in the ellipse package, I want to position
> things differently depending on the size of the labels.  I can use
> strwidth to find out the length of the labels, but only when there's a
> plot window open:  it won't open one.
>
> Question:  What function call says:  make sure there's a window open
> (i.e. do what plot() does before it starts plotting)?

Call par(), e.g. par("font")

> I don't think I can use plot.new() or frame(), because I don' t want
> to leave a blank page in the plot history if there was already a
> window open.

(That is indeed what happens.)

You can find if there is a device open by looking at length(.Devices) > 1
or dev.cur() > 1.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 08:03:36 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 08:03:36 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>
Message-ID: <Pine.GSO.4.44.0204170750360.28140-100000@auk.stats>

On Wed, 17 Apr 2002, Prof Brian D Ripley wrote:

> On Tue, 16 Apr 2002, Duncan Murdoch wrote:
>
> > In the plotcorr() function in the ellipse package, I want to position
> > things differently depending on the size of the labels.  I can use
> > strwidth to find out the length of the labels, but only when there's a
> > plot window open:  it won't open one.
> >
> > Question:  What function call says:  make sure there's a window open
> > (i.e. do what plot() does before it starts plotting)?
>
> Call par(), e.g. par("font")
>
> > I don't think I can use plot.new() or frame(), because I don' t want
> > to leave a blank page in the plot history if there was already a
> > window open.
>
> (That is indeed what happens.)

However, you could use plot.new(); par(new=TRUE)

> You can find if there is a device open by looking at length(.Devices) > 1
> or dev.cur() > 1.

What the internal code does can be reproduced in R by

if(length(.Devices) == 1 || dev.cur() == 1) {
    dev <- getOption("device")
    if(is.character(dev) && length(dev) > 0) get(dev)()
}

dev.cur includes a check that .Devices exists, but it is created in
InitGraphics before interactive R code is accepted, so the check must
always succeed and the above code is safe.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Wed Apr 17 12:24:59 2002
From: egonw@sci.kun.nl (Egon Willighagen)
Date: Wed, 17 Apr 2002 13:24:59 +0200
Subject: [Rd] Highlighting in KDE editor Kate 2.0 (KDE 3.0)
Message-ID: <200204171324.59561.egonw@sci.kun.nl>


Hi all,

Some time ago a posted a message about a highlighting module for R.
I've now made one for Kate 2.0 (KDE 3.0) too. They can both be downloaded 
from:

http://www-sigma.sci.kun.nl/Persoonlijk/egonw/r-kate/

Regards,

Egon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Apr 18 13:13:30 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 18 Apr 2002 14:13:30 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
Message-ID: <200204181213.OAA05366@pubhealth.ku.dk>


strptime() mysteriously adds a day to a date, unless the year
is specified.  Tested on:
Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
Windows - R version 1.4.1

Bug isn't found on OpenBSD, R version 1.4.1.

Transcript:

R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

...

> ## BUG:
> ## strptime seems to add a day to the request, unless the year 
> ## is added as part of the format. 
> strptime("11 Apr 22:00",format="%d %b %H:%M")
[1] "2002-04-12 22:00:00 NZST"
> ## note - we gained a day.  
> 
> ## goes away if we include the year
> strptime("11 Apr 22:00 2002",format="%d %b %H:%M %Y")
[1] "2002-04-11 22:00:00 NZST"


> ## R 1.4.1, running on Linux RH 6.0.  
> version
         _                
platform i586-pc-linux-gnu
arch     i586             
os       linux-gnu        
system   i586, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                


> ## Bug also appears in R-devel (downloaded 16 April 2002).
> ## For R-devel:
> version
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      16                          
language R                           

> ## Have also reproduced identical results in the Windows verion
> version
_              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R         

> ##
> ## Unable to reproduce bug under OpenBSD 3.0
> version
_
platform i386-unknown-openbsd3.0
arch     i386
os       openbsd3.0
system   i386, openbsd3.0
status
major    1
minor    4.1
year     2002
month    01
day      30
language R


> ## <speculation>
> ## This looks very OS specific.
> ## </speculation>



-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr 18 13:41:57 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Apr 2002 14:41:57 +0200
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
In-Reply-To: <200204181213.OAA05366@pubhealth.ku.dk>
References: <200204181213.OAA05366@pubhealth.ku.dk>
Message-ID: <15550.48917.887461.113981@gargle.gargle.HOWL>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> strptime() mysteriously adds a day to a date, unless the year
    Jason> is specified.  Tested on:
    Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
    Jason> Windows - R version 1.4.1

    Jason> Bug isn't found on OpenBSD, R version 1.4.1.

I confirm the bug (R-devel, Redhat 7.1)
To reproduce, it's sufficient to work with 
"%d %B" or "%d %b" .

What happens is that January and February work okay, and all
months from March produce the problem,

e.g.

> strptime("28 Feb",format="%d %b")# ok
[1] "2002-02-28"
> strptime("19 March",format="%d %B")# wrong
[1] "2002-03-20"

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:08:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 15:08:26 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1467)
Message-ID: <200204181308.PAA06220@pubhealth.ku.dk>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:07:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:07:44 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <15550.48917.887461.113981@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:24:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:24:00 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204181421170.3919-100000@gannet.stats>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
>
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
>
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. I'm not sure why glibc does this when the tm_year field is not

Well, I thought that was it, but as 1900 was not a leap year, it's
stranger still.

> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.

(For 11 April, BTW.)

> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:24:43 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Thu, 18 Apr 2002 15:24:43 +0200 (CEST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 (PR#1467)
In-Reply-To: <200204181308.PAA06220@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0204181513030.5841-100000@tal.stat.umu.se>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:30:12 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 18 Apr 2002 15:30:12 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1468)
Message-ID: <200204181330.PAA06545@pubhealth.ku.dk>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 19 12:19:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Apr 2002 12:19:07 +0100 (BST)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...

Unfortunately it appears not to.  (It says it implements a subset for use
with gnuplot, but even then I don't see how it is enough.) The font
metrics are always returned as false.  I wondered how it was going to do
this without the TrueType fonts in evidence ....

R's graphics model depends pretty crucially on accurate font metrics, and
text positioning is often the trickiest part of writing a graphics driver.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Apr 19 15:32:14 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 19 Apr 2002 10:32:14 -0400 (EDT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>
Message-ID: <Pine.LNX.4.30.0204191031350.859-100000@bolker.zoo.ufl.edu>


  Oh well, too bad ... sorry if I got anyone's hopes up unnecessarily.

  Ben Bolker

On Fri, 19 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Fri, 29 Mar 2002, Ben Bolker wrote:
>
> >
> >   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> > the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> > (LGPL) library that implements the EMF API ...
>
> Unfortunately it appears not to.  (It says it implements a subset for use
> with gnuplot, but even then I don't see how it is enough.) The font
> metrics are always returned as false.  I wondered how it was going to do
> this without the TrueType fonts in evidence ....
>
> R's graphics model depends pretty crucially on accurate font metrics, and
> text positioning is often the trickiest part of writing a graphics driver.
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gray@jimmy.harvard.edu  Sat Apr 20 21:21:46 2002
From: gray@jimmy.harvard.edu (gray@jimmy.harvard.edu)
Date: Sat, 20 Apr 2002 22:21:46 +0200 (MET DST)
Subject: [Rd] color of axis lines (PR#1470)
Message-ID: <200204202021.WAA19319@pubhealth.ku.dk>

Full_Name: Robert Gray
Version: 1.4.1
OS: Windows NT 4.0
Submission from: (NULL) (155.52.45.116)


I can't seem to get axis tick marks in any color except black (I want to make
plots for a slide presentation using a dark background.)  Below is a simple
example.  I have tried this using postscript in the Windows version of R 1.4.1
and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
problem occurs in the win.metafile driver.

u1 <- runif(10)
u2 <- runif(10)
postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
    col.axis='white',col.main='white',col.lab='white',col.sub='white')
palette(c('white','red','yellow','green','cyan','orange'))
plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
     col='white',col.axis='white') 
points(u1,u2,col=3)
dev.off()


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:41:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 2002 23:41:17 +0200
Subject: [Rd] color of axis lines (PR#1470)
In-Reply-To: <200204202021.WAA19319@pubhealth.ku.dk>
References: <200204202021.WAA19319@pubhealth.ku.dk>
Message-ID: <x2d6wucaki.fsf@blueberry.kubism.ku.dk>

gray@jimmy.harvard.edu writes:

> Full_Name: Robert Gray
> Version: 1.4.1
> OS: Windows NT 4.0
> Submission from: (NULL) (155.52.45.116)
> 
> 
> I can't seem to get axis tick marks in any color except black (I want to make
> plots for a slide presentation using a dark background.)  Below is a simple
> example.  I have tried this using postscript in the Windows version of R 1.4.1
> and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
> problem occurs in the win.metafile driver.
> 
> u1 <- runif(10)
> u2 <- runif(10)
> postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
> par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
>     col.axis='white',col.main='white',col.lab='white',col.sub='white')
> palette(c('white','red','yellow','green','cyan','orange'))
> plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
>      col='white',col.axis='white') 
> points(u1,u2,col=3)
> dev.off()

You're looking for the fg parameter. 

(It does say so in help(par), I don't think there's a bug.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:51:36 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 20 Apr 2002 23:51:36 +0200 (MET DST)
Subject: [Rd] Rprof segfault (PR#1471)
Message-ID: <200204202151.XAA19530@pubhealth.ku.dk>


> Rprof("")
Segmentation fault (core dumped)

This happens from trying to close a file that was never opened.

The fix is likely trivial, but we're in code freeze and it is hardly a
critical bug, so I'm just filing it for now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204210515.g3L5F4O08542@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1469 *
Subject: Are you familiar with residual income?
From: "United Networks" <P.Brooks@easynet.be>
Date: Sat, 20 Apr 2002 01:53:23 -1900
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 22 11:30:58 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 Apr 2002 12:30:58 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200204221030.MAA25830@pubhealth.ku.dk>

I've already fixed the bugs, but as with the last one, this is
not critical enough to allow breaking current R-devel's code
freeze.  I hope I will have corrected it for 1.5.1..

## Here is code reproducing the problems;
## I use  try(.) whenever I know the current versions of R would
## give an error:

library(splines)

x <- c(1:3,5:6)
y <- c(3:1,5:6)
(isP <- interpSpline(x,y))# poly-spline representation
(isB <- interpSpline(x,y, bSpl = TRUE))# B-spline repr.

xo <- c(0, x, 10)# x + outside points

options(digits = 4)
for(der in 0:3) # deriv=3 fails!
    print(formatC(try(predict(isP, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.npolySpline(isP, xo, deriv = der) :
##- 	subscript out of bounds


## Same for B-spline (instead of Polynom.):
for(der in 0:3)  # deriv=3 fails!
    print(formatC(try(predict(isB, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.nbSpline(isB, xo, deriv = der) :
##- 	subscript out of bounds

## Here, also for deriv= 1 & 2,
## the value left to first proper knot is NA (and should not) <<< ! >>>

------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From strach.joachim@web.de  Mon Apr 22 22:21:14 2002
From: strach.joachim@web.de (strach.joachim@web.de)
Date: Mon, 22 Apr 2002 23:21:14 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204222121.XAA00829@pubhealth.ku.dk>

Full_Name: Joachim H. Strach
Version: 1.3.1
OS: Windows 98 Second Edition
Submission from: (NULL) (132.230.131.220)


I am using the tcltk package.
Error-example:
----
  library(tcltk)
  top<-tktoplevel()
  but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
  tkpack(but)
----
then press the Quit-Button. 
On my Platform there will be a execution fault with following message:
----
RGUI verursachte einen Fehler durch eine ungltige Seite
in Modul TK83.DLL bei 0167:11450066.
Register:
EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
ECX=43a00000 DS=016f ESI=00000000 FS=1257
EDX=43a00000 ES=016f EDI=00000001 GS=0000
Bytes bei CS:EIP:
8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
Stapelwerte:
43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
----
R will be closed, but this error message is not really nice )-;  .

That's it.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 22 23:08:02 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 22 Apr 2002 15:08:02 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
Message-ID: <871yd7jsjh.fsf@jeeves.blindglobe.net>


could we add an argument to suppress printing of levels for
print.factor()?  i.e.:

 
print.factor <-
function (x, quote = FALSE, print.levels = TRUE, ...)           ## MODIFIED
{
    if (length(x) <= 0) 
        cat("factor(0)\n")
    else print(as.character(x), quote = quote, ...)
    if (print.levels) {                                         ## ADDED
        cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    }                                                           ## ADDED  
    invisible(x)
}

I've done this for my local work, but wondering if this is useful in
general?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 22 23:12:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 00:12:06 +0200
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
In-Reply-To: <200204222121.XAA00829@pubhealth.ku.dk>
References: <200204222121.XAA00829@pubhealth.ku.dk>
Message-ID: <x2u1q34c3t.fsf@blueberry.kubism.ku.dk>

strach.joachim@web.de writes:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
> 
> 
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button. 
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
> ----
> R will be closed, but this error message is not really nice )-;  .
> 
> That's it.

A bug report on 1.3.1, one week before 1.5.0, is a bit late don't you
think?

I cannot check Windows versions right now, but pre-1.5.0 on Linux
doesn't crash. However, it does leave the terminal in noecho mode.

Basically, just don't do that for now... q() and probably others do
not expect to be invoked from a callback. I don't think there's a nice
alternative implementation of a quit button without blocking the
console. (By waiting for a window event or tcl variable change and
then executing q()). 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 07:51:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 08:51:11 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204230651.IAA02076@pubhealth.ku.dk>

R 1.3.1 is rather old, but this is a bug report on Tcl/Tk, not on R.
(Notice which DLL failed!)

I get no failure on 1.4.1 nor 1.5.0pre under Windows 2000.

Please try updating your R, and perhaps also your Tcl/Tk (mine is
8.3.4.2-1, which was the latest last week).


On Mon, 22 Apr 2002 strach.joachim@web.de wrote:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
>
>
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button.
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864
> ----
> R will be closed, but this error message is not really nice )-;  .
>
> That's it.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oliver.niggemann@acterna.com  Tue Apr 23 08:41:42 2002
From: oliver.niggemann@acterna.com (oliver.niggemann@acterna.com)
Date: Tue, 23 Apr 2002 09:41:42 +0200 (MET DST)
Subject: [Rd] Bug: persp and colors (PR#1476)
Message-ID: <200204230741.JAA02655@pubhealth.ku.dk>

Full_Name: Oliver Niggemann
Version: Windows 1.4 patched
OS: Windows NT 4.0
Submission from: (NULL) (141.169.250.14)


Hello,

I am working with the persp command. I want to change to color of the facets
according
to their z-value. The colors seems to be transposed, i.e. the color of a facet A
seems
to be used for a facet B which is a (defined?) way off....

An example:

nx <- 21 
ny <- 21 
x <- seq(-1, 1, length = nx) 
y <- seq(-1, 1, length = ny)
z <- outer(x, y, function(x,y) x^2 + y^2) 
hgt <- z / max(z) 
persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)

Now the z-value should define the color, but the color pattern seems to be
moved.

Thanks,
    Oliver Niggemann

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richard_raubertas@merck.com  Tue Apr 23 14:55:34 2002
From: richard_raubertas@merck.com (richard_raubertas@merck.com)
Date: Tue, 23 Apr 2002 15:55:34 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231355.PAA08208@pubhealth.ku.dk>

The following command,

temp <- read.table("c:/rfr/r/test.txt")

reads the text file "test.txt", which contains the following lines:

21437
21438
21419-2
21420-2
21421-2
21422-2

and produces the following result:

> temp
        V1
1 21437+0i
2 21438+0i
3     0+0i
4     0+0i
5     0+0i
6     0+0i
> 

These "numbers" are actually sample ID's, and I expected the presence of the
hyphen would
cause temp to be character or a factor, but it ends up as complex numbers.
System info:

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

Following is a diagnosis of the problem by one of my colleagues:

> From: 	Huntsinger, Reid  
> Sent:	Monday, April 22, 2002 5:15 PM
> To:	Raubertas, Richard
> Subject:	RE: R problem
> 
> [ ... ] This happens 
> because of the attempt to convert. The function type.convert 
> is called on columns with unspecified types; this tries to 
> convert to "logical, integer, numeric or complex" in that 
> order (first one that is successful wins). You have some ids 
> like 21428-2 which type.convert doesn't like as numeric but 
> will treat as complex. This in turn is due to R's hand-rolled 
> "strtoc" function, which returns 0+0i for something it 
> doesn't like. This is a valid value, so the conversion 
> "works", and all values are converted this way... 
> 
> You or I should probably alert the R people. That's not very 
> good behavior.


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 15:48:27 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 16:48:27 +0200 (MET DST)
Subject: [Rd] Website ? FAST ! (PR#1478)
Message-ID: <200204231448.QAA08683@pubhealth.ku.dk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 16:25:22 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 15:25:22
Subject: [Rd] Website ? FAST !
Message-ID: <auto-000001868174@albion.co.uk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 23 18:03:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 19:03:07 +0200
Subject: [Rd] Bug in read.table() (PR#1477)
In-Reply-To: <200204231355.PAA08208@pubhealth.ku.dk>
References: <200204231355.PAA08208@pubhealth.ku.dk>
Message-ID: <x2u1q2bb5g.fsf@blueberry.kubism.ku.dk>

richard_raubertas@merck.com writes:

> > From: 	Huntsinger, Reid  
> > Sent:	Monday, April 22, 2002 5:15 PM
> > To:	Raubertas, Richard
> > Subject:	RE: R problem
> > 
> > [ ... ] This happens 
> > because of the attempt to convert. The function type.convert 
> > is called on columns with unspecified types; this tries to 
> > convert to "logical, integer, numeric or complex" in that 
> > order (first one that is successful wins). You have some ids 
> > like 21428-2 which type.convert doesn't like as numeric but 
> > will treat as complex. This in turn is due to R's hand-rolled 
> > "strtoc" function, which returns 0+0i for something it 
> > doesn't like. This is a valid value, so the conversion 
> > "works", and all values are converted this way... 
> > 
> > You or I should probably alert the R people. That's not very 
> > good behavior.

Right, but not something we can fix for 1.5.0. Another version of the
same effect is

> scan(what=0+0i)
1: 21419-2
2: Read 1 items
[1] 0+0i

A workaround would be to use the colClasses argument, or as.is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 18:12:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 19:12:48 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231712.TAA09406@pubhealth.ku.dk>

On 23 Apr 2002, Peter Dalgaard BSA wrote:

> richard_raubertas@merck.com writes:
>
> > > From: 	Huntsinger, Reid
> > > Sent:	Monday, April 22, 2002 5:15 PM
> > > To:	Raubertas, Richard
> > > Subject:	RE: R problem
> > >
> > > [ ... ] This happens
> > > because of the attempt to convert. The function type.convert
> > > is called on columns with unspecified types; this tries to
> > > convert to "logical, integer, numeric or complex" in that
> > > order (first one that is successful wins). You have some ids
> > > like 21428-2 which type.convert doesn't like as numeric but
> > > will treat as complex. This in turn is due to R's hand-rolled
> > > "strtoc" function, which returns 0+0i for something it
> > > doesn't like. This is a valid value, so the conversion
> > > "works", and all values are converted this way...
> > >
> > > You or I should probably alert the R people. That's not very
> > > good behavior.
>
> Right, but not something we can fix for 1.5.0. Another version of the
> same effect is
>
> > scan(what=0+0i)
> 1: 21419-2
> 2: Read 1 items
> [1] 0+0i
>
> A workaround would be to use the colClasses argument, or as.is.

Actually it is already fixed: it was a very simple fix. The problem was
being detected:  it was just not being reported.  As this was just a case
of what is done in an error condition (it can't affect any valid input) I
thought it safe to fix a week before release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Apr 24 01:07:46 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 24 Apr 2002 12:07:46 +1200
Subject: [Rd] Bug: persp and colors (PR#1476)
References: <200204230741.JAA02655@pubhealth.ku.dk>
Message-ID: <010e01c1eb24$0fef5e20$7632d882@stat.auckland.ac.nz>

Hi


> I am working with the persp command. I want to change to color of the
facets
> according
> to their z-value. The colors seems to be transposed, i.e. the color of a
facet A
> seems
> to be used for a facet B which is a (defined?) way off....
>
> An example:
>
> nx <- 21
> ny <- 21
> x <- seq(-1, 1, length = nx)
> y <- seq(-1, 1, length = ny)
> z <- outer(x, y, function(x,y) x^2 + y^2)
> hgt <- z / max(z)
> persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)
>
> Now the z-value should define the color, but the color pattern seems to be
> moved.


I don't think this is a bug -- I think the problem is that the surface
produced for the z of dimension 21x21 has only 20x20 facets.  For example,
the following is not a solution, but it shows that a 20x20 colour matrix
produces the expected result ...

    persp(x, y, z, col = gray(hgt[1:20,1:20]), theta = 0, phi = 40, expand =
0.4)

... now, what you really want I guess is to calculate hgt to be some
interpolation of the four z values at the four corners of each face.  I am
due somewhere so this calculation is left as an exercise ...

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Thu Apr 25 04:55:14 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Wed, 24 Apr 2002 20:55:14 -0700
Subject: [Rd] understanding and resolving seg faults
Message-ID: <20020424205513.A32728@brandybuck>

Dear r-devel,

I am mutating rpart to do calculations on trees.
I am trying to extract information from the tree.

However, I got a seg. fault.


This is the offending line in "rpmatrix.c":  

            deltaI[0][0] = spl->improve;

(Commenting it out cures the seg fault)

I would like some advice on how to debug this.  I have allocated memory
with calloc and deltaI[0][0] should be OK, but apparently not.

thanks for your help,


For those that don't have structure of rpart drilled into their brain:

deltaI is declared in "rpmatrix.c":

void rpmatrix(struct node *me,  Sint *nodecount,   Sint *splitcount,
              Sint *catcount,   Sint *numcat,      double **dsplit,
              Sint **isplit,    Sint **csplit,     double **dnode,
              Sint **inode,     double **deltaI,      int id)
 
rpmatrix is called by "s_to_rp.c" where

ddeltaI is a pointer from an ALLOC call:
 
void s_to_rp2(Sint *n,         Sint *nsplit,    Sint *nnode,     Sint *ncat,
              Sint *numcat,    Sint *maxcat,    Sint *xvals,     Sint *which,
              double *cptable, double *dsplit,  Sint *isplit,    Sint *csplit,
              double *dnode,   double *deltaI,  Sint *inode)

    double   **ddeltaI; /* declaration of ddeltaI */

        ddeltaI = (double **) ALLOC(rp.num_y * rp.num_resp, sizeof(double ));
 
    rpmatrix(tree, nnode, nsplit, ncat, numcat,
                    ddsplit, iisplit, ccsplit, ddnode, iinode,ddeltaI ,1);

s_to_rp2 is called rpart.s


    rp    <- .C("s_to_rp2",
                       as.integer(nobs),
                       as.integer(nsplit),
                       as.integer(nodes),
                       as.integer(ncat),
                       as.integer(cats *!isord),
                       as.integer(max(cats)),
                       as.integer(xval),
                       which = integer(nobs),
                       cptable = matrix(double(numcp*cpcol), nrow=cpcol),
                       dsplit =  matrix(double(1),  nsplit,3),
                       isplit =  matrix(integer(1), nsplit,3),
                       csplit =  catmat,
                       dnode  =  matrix(double(1),  nodes, 3+numresp),
                       deltaI =  matrix(double(1),  nodes, nsplit),
                       inode  =  matrix(integer(1), nodes, 6))
 

 



-- 
Clayton Springer, Ph. D.
Sandia National Laboratories                      csprin@ca.sandia.gov
Biosystems Research Department                    (925) 294-2143
P.O. Box 969, MS 9951                fax:         (925) 294-3020
Livermore, CA, 94551-0969

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NAVMSE-EMAIL1@email1.ansi.org  Thu Apr 25 07:32:07 2002
From: NAVMSE-EMAIL1@email1.ansi.org (NAV for Microsoft Exchange-EMAIL1)
Date: Thu, 25 Apr 2002 02:32:07 -0400
Subject: [Rd] Norton AntiVirus detected a virus in a message you sent.
Message-ID: <2F81C8110D55D411882A0020356797B201CCE552@email1.ansi.org>

Norton AntiVirus found the "W32.Klez.gen@mm" virus in the attachment
"src.exe".
The file was Deleted.

Recipient of the infected attachment:  StoreManager\Inbox
Subject of the message:  A  WinXP patch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 25 07:45:42 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Apr 2002 07:45:42 +0100 (BST)
Subject: [Rd] understanding and resolving seg faults
In-Reply-To: <20020424205513.A32728@brandybuck>
Message-ID: <Pine.GSO.4.44.0204250732510.24333-100000@auk.stats>

There is no such line in rpart's rpmatrix.c!

My guess is that you are misleading us, and that the segfault is in your
additions to rpart.  One of the issues covered by Open Source licences
is not misrepresenting code by not making clear that you have altered it.

Your debugger will tell you what is wrong with your C coding.  My guess
here is that as deltaI is a pointer to a pointer and you only mentioned
allocating deltaI, you failed to allocate deltaI[0].


On Wed, 24 Apr 2002, Clayton Springer wrote:

> Dear r-devel,
>
> I am mutating rpart to do calculations on trees.
> I am trying to extract information from the tree.
>
> However, I got a seg. fault.
>
>
> This is the offending line in "rpmatrix.c":
>
>             deltaI[0][0] = spl->improve;
>
> (Commenting it out cures the seg fault)

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Fri Apr 26 10:05:55 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Fri, 26 Apr 2002 11:05:55 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260905.LAA29160@pubhealth.ku.dk>

Full_Name: Hugh C. Pumphrey
Version: 1.4.1
OS: Linux (Debian Woody)
Submission from: (NULL) (129.215.133.170)


The function readChar() appears to have some type of problem with memory
allocation.
I don't know if "memory leak" is the correct term but if one uses readChar()
many
times, the R binary grows in size until it eats all your memory and swap space.

The code enclosed below demonstrates the problem. As-is, it causes the size
of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
The old Rstreams package did not do this. Also, the function readBin() does
not suffer from this problem.

## Stress read/write of files in binary mode to see if there is a memory leak
## Now, readBin seems to be innocent. The memory leak is in readChar
header <-paste("This is a very long and boring text header which appears",
               "at the beginning of each chunk of an even longer and duller",
               "file which contains mostly binary data")
nchars <- nchar(header)
nrecs <-2000
ntries <- 100

## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  ## This writes null-ended strings unless you use the eos=NULL option
  writeChar(header,stream,eos=NULL)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    iheader <- readChar(stream,nchars)
  }
  close(stream)
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 26 10:47:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 26 Apr 2002 11:47:04 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260947.LAA29256@pubhealth.ku.dk>

It's not really a memory leak, more that R_alloc was at the time
incorrectly documented and do_readchar needs to reset vmax.  (Rstreams
used .C, and that did reset vmax, whereas .Internal does not.)

It's actually being done rather inefficiently, as this seems an unusual
case.  For 1.6.0 I am planning on using alloca (where available) for this
sort of short-term buffer.

I'll put the two-line fix in for 1.5.0.


On Fri, 26 Apr 2002 hcp@met.ed.ac.uk wrote:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
>
>
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
>
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays.
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.
>
> ## Stress read/write of files in binary mode to see if there is a memory leak
> ## Now, readBin seems to be innocent. The memory leak is in readChar
> header <-paste("This is a very long and boring text header which appears",
>                "at the beginning of each chunk of an even longer and duller",
>                "file which contains mostly binary data")
> nchars <- nchar(header)
> nrecs <-2000
> ntries <- 100
>
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   ## This writes null-ended strings unless you use the eos=NULL option
>   writeChar(header,stream,eos=NULL)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     iheader <- readChar(stream,nchars)
>   }
>   close(stream)
> }
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:48:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:48:46 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <200204260905.LAA29160@pubhealth.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
Message-ID: <x2wuuussch.fsf@blueberry.kubism.ku.dk>

hcp@met.ed.ac.uk writes:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
> 
> 
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
> 
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.

Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
allocated but remains protected from garbage collection.

I doubt that this is something we'd dare try and fix before the
release on Monday though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:51:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:51:17 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <x2wuuussch.fsf@blueberry.kubism.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
 <x2wuuussch.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2sn5iss8a.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > The code enclosed below demonstrates the problem. As-is, it causes the size
> > of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> > The old Rstreams package did not do this. Also, the function readBin() does
> > not suffer from this problem.
> 
> Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
> allocated but remains protected from garbage collection.
> 
> I doubt that this is something we'd dare try and fix before the
> release on Monday though.

...unless someone happens to know exactly what is going on (as Brian
apparently does)!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MAIL2-SA@taishinbank.com.tw  Fri Apr 26 14:25:15 2002
From: MAIL2-SA@taishinbank.com.tw (System Attendant)
Date: Fri, 26 Apr 2002 21:25:15 +0800
Subject: [Rd] ScanMail Message: To Sender, virus found and action taken.
Message-ID: <0750810CC32CD511828F00B0D0E1052201B35B4B@mail2>

ScanMail for Microsoft Exchange has blocked a file attachment(s).

Place = doko@taishinbank.com.tw
Sender = r-devel
Subject = Honey
Delivery Time = April 26, 2002 (Friday) 21:25:14

Action on file attachment(s):

Message from recipient's administrator:
&#35686;&#21578;!!!
&#38450;&#27602;&#31995;&#32113;&#20597;&#28204;&#20320;&#25152;&#23492;&#20
986;&#38651;&#23376;&#37109;&#20214;&#38468;&#20214;&#21547;&#26377;&#30149;
&#27602;&#65292;&#24050;&#34987;&#38450;&#27602;&#31995;&#32113;&#33258;&#21
205;&#21034;&#38500;
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From poizot@cnam.fr  Fri Apr 26 16:19:48 2002
From: poizot@cnam.fr (poizot@cnam.fr)
Date: Fri, 26 Apr 2002 17:19:48 +0200 (MET DST)
Subject: [Rd] Can't install packages (PR#1486)
Message-ID: <200204261519.RAA00213@pubhealth.ku.dk>

Hello,

I install R under Mandrake Linux 8.2.
R itself work fine, but I had an error to install packages, i.e. fields, geoR 
and geoRglm :

$: R CMD INSTALL geoRglm_0.4-3.tar.gz
Installing *source* package `geoRglm' ...
 libs
gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp 
-D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro 
-march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o 
geoRgeoRglm.o
make: gcc-3.0.1 : Commande introuvable
make: *** [geoRgeoRglm.o] Erreur 127
ERROR: compilation failed for package `geoRglm

I suppose that the version of my compiler is not correct, but I didn't find
where to change that settings.

-- 
Cordialement.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel POIZOT
CNAM/INTECHMER
B.P. 324
50103 Cherbourg Cedex
Tl : 33 (0)2 33 88 73 42
Fax : 33 (0)2 33 88 73 39
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Apr 26 16:24:34 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Apr 2002 08:24:34 -0700 (PDT)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204260822130.40456-100000@homer11.u.washington.edu>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm
>
> I suppose that the version of my compiler is not correct, but I didn't find
> where to change that settings.

You could change it in R/etc/Makeconf, but it might not work.  If you
don't have the compiler used to build R there is no guarantee that the
flags and options will be correct or that the output will be binary
compatible.

	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Fri Apr 26 17:25:52 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Fri, 26 Apr 2002 18:25:52 +0200 (CEST)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0204261810360.1884-100000@localhost.localdomain>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm

You are using the RPM package compiled for Mandrake 8.1, which does have
gcc-3.0.1. You need a Mandrake 8.2 package.

Mandrake 8.2 distribution includes an RPM package for R 1.4.1 which for
some strange reason is not distributed on the CD's but is downloadable
from the mandrake 8.2 mirror sites.
Unfortunately, as I have already signalled to the packager
(ghibo@mandrakesoft.com), there seem to be a couple of small bugs in this
package; specifically on uninstalling it the preun script produces an
error message. I would therefore not trust it.

You can do one of various things:

1) Download the SRPM from CRAN and recompile the RPM for your system.
That's what the SRPM is there for. The readme file explains what you need
to do.

2) Wait a few days. When R 1.5.0 comes out I mean to produce RPM's for
Mandrake 8.1 and 8.2 before erasing 8.1 from my HD and going over to 8.2
completely.

3) I think this dirty hack would work quite well: just make a symlink

ln -s /usr/bin/gcc-3.0.3 /usr/bin/gcc-3.0.1

Mandrake 8.2 has gcc-3.0.3.

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Sat Apr 27 15:31:12 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 27 Apr 2002 10:31:12 -0400
Subject: [Rd] Question about .Call
Message-ID: <1019917872.3911.3.camel@keittlab-6>

Can a C function wrapped with .Call return void? Or must it return a
valid SEXP? Thnx.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sat Apr 27 15:35:59 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sat, 27 Apr 2002 09:35:59 -0500
Subject: [Rd] Question about .Call
In-Reply-To: <1019917872.3911.3.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Sat, Apr 27, 2002 at 10:31:12AM -0400
References: <1019917872.3911.3.camel@keittlab-6>
Message-ID: <20020427093559.A22913@nokomis.stat.umn.edu>

On Sat, Apr 27, 2002 at 10:31:12AM -0400, Timothy H. Keitt wrote:
> Can a C function wrapped with .Call return void? Or must it return a
> valid SEXP? Thnx.
> 
> Tim
> 

It must return a valid SEXP.  R_NilValue is a good choice if you don't
have anything real to return.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Mon Apr 29 14:25:56 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Mon, 29 Apr 2002 15:25:56 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291325.PAA12079@pubhealth.ku.dk>


A few days ago, I wrote
> >
> > The function readChar() appears to have some type of problem with
> >memory  allocation.

On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:

> It's not really a memory leak, more that R_alloc was at the time
> incorrectly documented and do_readchar needs to reset vmax.  
[snip] 
> I'll put the two-line fix in for 1.5.0.

I originally said that this problem didn't occur in readBin(). That seems
to be true if you are reading 8-byte data.  However, I stressed this a bit
harder, and found that if you use the size=4 keyword then the problem
_does_ appear with readBin(). I enclose an example below.

Apologies if the original bug report was misleading and again, many thanks

Hugh



## Stress read/write of files in binary mode to see if there is a
## memory problem. Now, readBin seems to be innocent if the default
## (8-byte) reals are used, but there is a problem reading 4-bute reals.

nrecs <-2000
ntries <- 100
npts <- 300
gunge <- 1:npts
## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  writeBin(gunge,"numeric",size=4)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    ## Seems to be worse if reads are in several small chunks
    ## 
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)    
    bunge <- readBin(stream,"numeric",npts-60,size=4)
    
  }
  close(stream)
}


============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr 29 14:28:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 29 Apr 2002 15:28:36 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291328.PAA12136@pubhealth.ku.dk>

Yes, we know of a couple of other leaks, which will be fixed for 1.6.0
(and perhaps 1.5.1).

BDR

On Mon, 29 Apr 2002, H C Pumphrey wrote:

>
> A few days ago, I wrote
> > >
> > > The function readChar() appears to have some type of problem with
> > >memory  allocation.
>
> On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:
>
> > It's not really a memory leak, more that R_alloc was at the time
> > incorrectly documented and do_readchar needs to reset vmax.
> [snip]
> > I'll put the two-line fix in for 1.5.0.
>
> I originally said that this problem didn't occur in readBin(). That seems
> to be true if you are reading 8-byte data.  However, I stressed this a bit
> harder, and found that if you use the size=4 keyword then the problem
> _does_ appear with readBin(). I enclose an example below.
>
> Apologies if the original bug report was misleading and again, many thanks
>
> Hugh
>
>
>
> ## Stress read/write of files in binary mode to see if there is a
> ## memory problem. Now, readBin seems to be innocent if the default
> ## (8-byte) reals are used, but there is a problem reading 4-bute reals.
>
> nrecs <-2000
> ntries <- 100
> npts <- 300
> gunge <- 1:npts
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   writeBin(gunge,"numeric",size=4)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     ## Seems to be worse if reads are in several small chunks
>     ##
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",npts-60,size=4)
>
>   }
>   close(stream)
> }
>
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 29 19:01:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 11:01:14 -0700
Subject: [Rd] finding vignettes for new users...
Message-ID: <87bsc2bd05.fsf@jeeves.blindglobe.net>


What would be the best way to point new users to the PDF vignette
file?   (it would be just jolly if library(vignette=packagename) fired
up acrobat reader :-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Mon Apr 29 20:06:42 2002
From: liang@stat.berkeley.edu (liang@stat.berkeley.edu)
Date: Mon, 29 Apr 2002 21:06:42 +0200 (MET DST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
Message-ID: <200204291906.VAA14141@pubhealth.ku.dk>

Full_Name: Gang Liang
Version: 1.4.1
OS: mandrake-8.2
Submission from: (NULL) (128.32.81.135)


tseries version: 0.9-1
quadprog version: 1.4-4
mva version: 1.4.1

version:
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                

The tseries package can be loaded successfully and most functions are running
fine, but garch will cause a segmentation fault. I did a very simple debug, and
found the problem lied in function call: .C( "pred_garch", ... ). BTW, my gcc
version is 2.96. If I compile the R and all packages by using gcc 3.0.4, the
problem persists.

The following are the output when I am trying to run the example in garch help:
> n <- 1100
> a <- c(0.1, 0.5, 0.2)  # ARCH(2) coefficients
> e <- rnorm(n)  
> x <- double(n)
> x[1:2] <- rnorm(2, sd = a[1]/(1.0-a[2]-a[3])) 
> for(i in 3:n)  # Generate ARCH(2) process
+ {
+   x[i] <- e[i]*sqrt(a[1]+a[2]*x[i-1]^2+a[3]*x[i-2]^2)
+ }
> x <- ts(x[101:1100])
> x.arch <- garch(x, order = c(0,2))

 ***** ESTIMATION WITH ANALYTICAL GRADIENT ***** 


     I     INITIAL X(I)        D(I)

     1     0.332467E+00     0.100E+01
     2     0.500000E-01     0.100E+01
     3     0.500000E-01     0.100E+01

    IT   NF       F        RELDF    PRELDF    RELDX   STPPAR   D*STEP   NPRELDF

     0    1 -0.993E+02
     1    3 -0.148E+03  0.33E+00  0.40E+00  0.1E+00  0.6E+04  0.1E+00  0.12E+04
     2    5 -0.186E+03  0.21E+00  0.24E+00  0.2E+00  0.8E+01  0.1E+00  0.13E+04
     3    6 -0.208E+03  0.10E+00  0.14E+00  0.2E+00  0.1E+02  0.1E+00  0.50E+02
     4    8 -0.211E+03  0.17E-01  0.44E-01  0.6E-01  0.1E+02  0.4E-01  0.61E+01
     5    9 -0.215E+03  0.17E-01  0.21E-01  0.6E-01  0.2E+01  0.4E-01  0.20E+01
     6   10 -0.216E+03  0.51E-02  0.20E-01  0.9E-01  0.2E+01  0.8E-01  0.78E+00
     7   11 -0.219E+03  0.11E-01  0.44E-01  0.2E+00  0.2E+01  0.2E+00  0.12E+01
     8   13 -0.220E+03  0.57E-02  0.12E-01  0.2E-01  0.6E+02  0.2E-01  0.10E+01
     9   14 -0.221E+03  0.31E-02  0.36E-02  0.2E-01  0.2E+01  0.2E-01  0.88E-01
    10   15 -0.223E+03  0.92E-02  0.11E-01  0.4E-01  0.2E+01  0.3E-01  0.71E-01
    11   16 -0.225E+03  0.11E-01  0.13E-01  0.8E-01  0.9E+00  0.7E-01  0.21E-01
    12   17 -0.227E+03  0.60E-02  0.60E-02  0.6E-01  0.6E+00  0.7E-01  0.69E-02
    13   18 -0.227E+03  0.12E-02  0.11E-02  0.4E-01  0.0E+00  0.4E-01  0.11E-02
    14   19 -0.227E+03  0.53E-04  0.51E-04  0.6E-02  0.0E+00  0.7E-02  0.51E-04
    15   20 -0.227E+03  0.50E-06  0.57E-06  0.9E-03  0.0E+00  0.9E-03  0.57E-06
    16   21 -0.227E+03  0.13E-07  0.13E-07  0.3E-04  0.0E+00  0.4E-04  0.13E-07
    17   22 -0.227E+03  0.12E-10  0.12E-10  0.2E-05  0.0E+00  0.3E-05  0.12E-10

 ***** RELATIVE FUNCTION CONVERGENCE *****

 FUNCTION    -0.226852E+03   RELDX        0.238E-05
 FUNC. EVALS      22         GRAD. EVALS      18
 PRELDF       0.117E-10      NPRELDF      0.117E-10

     I      FINAL X(I)        D(I)          G(I)

     1    0.102547E+00     0.100E+01    -0.340E-04
     2    0.517733E+00     0.100E+01    -0.185E-04
     3    0.187292E+00     0.100E+01     0.353E-05


Process R segmentation fault at Mon Apr 29 12:03:14 2002


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Apr 29 20:16:38 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 29 Apr 2002 15:16:38 -0400
Subject: [Rd] methods package:  inheriting from structures; group generics
Message-ID: <3CCD9C16.D59D6AAA@research.bell-labs.com>

Now that 1.5 is released, some changes have been committed to the
r-devel version of the methods package.

They are mostly bug fixes (or making things work more as users would
expect) in two areas:

1.  new classes that extend one of the basic datatypes that have
attributes but had no class attribute in S3 (e.g., "matrix" or "ts"). 
The previous code didn't handle the attributes properly and the new()
function didn't work as it should.

2.  group generic functions when the members of the group were
primitives.  Because the members of the group are never actual generic
functions (for reasons of efficiency), there was no easy way to turn
method dispatch on, and the callGeneric function was unable to find the
generic definition.

It is still necessary to turn method dispatch on in this case (see
?setGeneric) by calling something like:

 setGroupGeneric("Arith")

This requirement may be dropped later, depending on experience.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 29 20:34:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Apr 2002 21:34:37 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <200204291906.VAA14141@pubhealth.ku.dk>
References: <200204291906.VAA14141@pubhealth.ku.dk>
Message-ID: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>

liang@stat.berkeley.edu writes:

> Full_Name: Gang Liang
> Version: 1.4.1
> OS: mandrake-8.2
> Submission from: (NULL) (128.32.81.135)
> 
> 
> tseries version: 0.9-1

Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
example(garch) works fine with 1.5.0 (well, last nights snapshot).


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brogar27@hotmail.com  Tue Apr 30 01:02:55 2002
From: brogar27@hotmail.com (brogar 27)
Date: Tue, 30 Apr 2002 01:02:55 +0100
Subject: [Rd] makefile for standalone lib
Message-ID: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>

It appears the Makefile.win in
src/nmath/standalone might need some modification since

cd src/nmath/gnuwin32
make -f Makefile.win
make -f Makefile.win test

fails. However if I remove libRmath.a from line 15

OR

modify lines 67/68 replacing Rmath.a with libRmath.a then
make -f Makefile.win test

goes as expected.




_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue Apr 30 01:39:56 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>

Thanks, Peter!

Yes, I tried the latest package of tseries, but I guess I made a mistake
about the version number. Okay I am going to try the development version
of R on my machine.

BTW, there are some minor typos in tseries package's help package, such as
some links named temp -- I am quite sure it's really temp, :).

Regards,

Gang

On 29 Apr 2002, Peter Dalgaard BSA wrote:

> liang@stat.berkeley.edu writes:
>
> > Full_Name: Gang Liang
> > Version: 1.4.1
> > OS: mandrake-8.2
> > Submission from: (NULL) (128.32.81.135)
> >
> >
> > tseries version: 0.9-1
>
> Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
> example(garch) works fine with 1.5.0 (well, last nights snapshot).
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 06:13:59 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 07:13:59 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87bsc2bd05.fsf@jeeves.blindglobe.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
Message-ID: <15566.10263.747991.415753@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> What would be the best way to point new users to the PDF vignette
> file?   (it would be just jolly if library(vignette=packagename) fired
> up acrobat reader :-).

The current procedure is that

	help(package = "FOO")
	library(help = "FOO")

points you to the vignettes in package FOO (provided that there are
some).  How to actually view them is something we need to carefully
consider: e.g., an alternative would be to integrate viewing pdf into
our current HTML help system.  I am not saying that this is a good idea
though as I think we want to move to something that can render HTML and
be controlled from R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 06:27:30 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 22:27:30 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <15566.10263.747991.415753@mithrandir.hornik.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
 <15566.10263.747991.415753@mithrandir.hornik.net>
Message-ID: <87znzlu56l.fsf@jeeves.blindglobe.net>

>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> A J Rossini writes:
    >> What would be the best way to point new users to the PDF vignette
    >> file?   (it would be just jolly if library(vignette=packagename) fired
    >> up acrobat reader :-).

    kurt> The current procedure is that

    kurt> 	help(package = "FOO")
    kurt> 	library(help = "FOO")

    kurt> points you to the vignettes in package FOO (provided that there are
    kurt> some).  How to actually view them is something we need to carefully
    kurt> consider: e.g., an alternative would be to integrate viewing pdf into
    kurt> our current HTML help system.  I am not saying that this is a good idea
    kurt> though as I think we want to move to something that can render HTML and
    kurt> be controlled from R.

I'm more fond of the Unix way -- schlep the docs off to an appropriate
viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
appropriate for Windows or Macs).

However, I'm being slow as usual -- of course most HTML browsers
"support" PDF viewers (as plugins or otherwise).

I can at least code that for local or restricted use.  Thanks, Kurt...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 07:28:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 Apr 2002 07:28:21 +0100 (BST)
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>

On 29 Apr 2002, A.J. Rossini wrote:

> >>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
> >>>>> A J Rossini writes:
>     >> What would be the best way to point new users to the PDF vignette
>     >> file?   (it would be just jolly if library(vignette=packagename) fired
>     >> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that there are
>     kurt> some).  How to actually view them is something we need to carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing pdf into
>     kurt> our current HTML help system.  I am not saying that this is a good idea
>     kurt> though as I think we want to move to something that can render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).

`the Unix way'?   That is the one OS I know that does not come with
integrated support for doing that.  Under Windows (and I believe MacOS) you
just ask the OS to show the file, and it uses a central repository of
methods (which the user can tune) to choose how to do so.  (In R you call
shell.exec().)  Most versions ask the user what to do if no method is
registered.

> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 08:44:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 08:44:34 +0100 (BST)
Subject: [Rd] makefile for standalone lib
In-Reply-To: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>
Message-ID: <Pine.LNX.4.31.0204300833260.4436-100000@gannet.stats>

You appear to be working on Windows, although you omitted to tell us.

Which version of R is this?

Neither of those fixes is correct.  As the README in that directory says

   Under Windows, use make -f Makefile.win. This makes Rmath.dll with
   import library libRmath.a.

and Rmath.a is not the import library.

My belief is that it worked in 1.4.0, but that it was never tested for
1.5.0, and the Makefile rules (in MkRules) had been changed to allow
Rblas.dll to be built.  If this is 1.5.0, add the lines

Rmath.def: sunif.o $(SOURCES_NMATH:.c=.o)
	$(ECHO) LIBRARY $* > $@
	$(ECHO) EXPORTS >> $@
	$(NM) $^ > Defs
	$(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $@
	$(RM) Defs
libRmath.a: Rmath.def

to Makefile.win.

On Tue, 30 Apr 2002, brogar 27 wrote:

> It appears the Makefile.win in
> src/nmath/standalone might need some modification since
>
> cd src/nmath/gnuwin32
> make -f Makefile.win
> make -f Makefile.win test
>
> fails. However if I remove libRmath.a from line 15
>
> OR
>
> modify lines 67/68 replacing Rmath.a with libRmath.a then
> make -f Makefile.win test
>
> goes as expected.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hgoehlma@prdbe.jnj.com  Tue Apr 30 10:20:33 2002
From: hgoehlma@prdbe.jnj.com (hgoehlma@prdbe.jnj.com)
Date: Tue, 30 Apr 2002 11:20:33 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300920.LAA17721@pubhealth.ku.dk>

Full_Name: Hinrich Ghlmann
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (148.177.130.121)


Hi all,

I've searched the known bugs and hopefully I did not oversee this one...

When I have done a normal
zz<-princomp(na.omit(raw.data))

and I then draw a biplot with
biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))

the x axis gets set properly, but the y axis remains unchanged.

Cheers,
hinrich   d8-)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 10:38:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 11:38:00 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300938.LAA17948@pubhealth.ku.dk>

You are using biplot.princomp here.

It works for me:

# example(biplot.princomp)
data(USArrests)
biplot(princomp(USArrests))
biplot(princomp(USArrests), ylim=c(-0.5, 0.5))

Note that there are two y axes, and both are changed.

Please read the section in the FAQ about supplying a reproducible example
if you think you have found a bug.

BTW, setting the axes on a princomp biplot seems unlikely to be
statistically sound to me.


On Tue, 30 Apr 2002 hgoehlma@prdbe.jnj.com wrote:

> Full_Name: Hinrich Ghlmann
> Version: 1.4.1
> OS: Windows 2000
> Submission from: (NULL) (148.177.130.121)
>
>
> Hi all,
>
> I've searched the known bugs and hopefully I did not oversee this one...
>
> When I have done a normal
> zz<-princomp(na.omit(raw.data))
>
> and I then draw a biplot with
> biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))
>
> the x axis gets set properly, but the y axis remains unchanged.
>
> Cheers,
> hinrich   d8-)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 14:07:37 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 Apr 2002 06:07:37 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
References: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
Message-ID: <87r8kxtjvq.fsf@jeeves.blindglobe.net>

>>>>> "brian" == Brian D Ripley <Prof> writes:

    >> I'm more fond of the Unix way -- schlep the docs off to an appropriate
    >> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
    >> appropriate for Windows or Macs).

    brian> `the Unix way'?   That is the one OS I know that does not come with
    brian> integrated support for doing that.  Under Windows (and I believe MacOS) you
    brian> just ask the OS to show the file, and it uses a central repository of
    brian> methods (which the user can tune) to choose how to do so.  (In R you call
    brian> shell.exec().)  Most versions ask the user what to do if no method is
    brian> registered.

Brian - I'm referring to the pipe/separate tools approach, which is
commonly referred to in the literature (late 80s, early 90s, on
computing tool design) as "the unix way", NOT to automated discovery,
which is the integrated/monolithic way (i.e. the 2 other OSs which you
mention).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:14:27 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:14:27 +0200 (MET DST)
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
Message-ID: <200204301414.QAA21844@pubhealth.ku.dk>


Non of these errors occured in earliers versions of R.

> library(tcltk)
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
  can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/local/R/lib/R/library/tcltk/libs/tcltk.so":
  /usr/local/R/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so":
  /opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = alphaev6-unknown-linux-gnu
 arch = alphaev6
 os = linux-gnu
 system = alphaev6, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

No errors on this platform:

# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:42:35 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:42:35 +0200 (MET DST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
Message-ID: <200204301442.QAA22075@pubhealth.ku.dk>


The configure script failed on tk on several platforms. One is
given below. This did not happen on versions of R older than 1.5.0.

Message from configure:

configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

This was in config.log, the command on a single line:

configure:21361: cc -E -I/opt_local/opt/readline/include
  -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
  -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
  -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
  -I/opt_local/opt/R/include # no special path needed
  -I/opt_local/opt/tcl-8.0/include conftest.c
cc: warning 485: Can't open "#".
cc: warning 485: Can't open "no".
cc: warning 485: Can't open "special".
cc: warning 485: Can't open "path".
cc: warning 485: Can't open "needed".

I had to edit tkConfig.sh to solve this problem. This line:

TK_XINCLUDES='# no special path needed'

changed to this:

TK_XINCLUDES=


After this fix, R was configured for tcl/tk, and the package
tcltk seems to work OK (at least on this platform).



# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:51:18 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 16:51:18 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>


The version of maketitle.pl in R 1.5.0 does not work with
version 4.004 of Perl, so I use maketitle.pl from R version
1.4.1 instead. Can I expect this to cause any problems, for
instance when I build a package?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Apr 30 16:06:44 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 30 Apr 2002 17:06:44 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
References: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
Message-ID: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
>>>>> Peter Kleiweg (PK) wrote:

  > The version of maketitle.pl in R 1.5.0 does not work with
  > version 4.004 of Perl, so I use maketitle.pl from R version
  > 1.4.1 instead. Can I expect this to cause any problems, for
  > instance when I build a package?

Hmm, building R with perl version 4 is not possible at all
... maketitle.pl being the smallest problem you will run into. Did you
mean version 5.004?

The output of maketitle.pl from 1.4.1 should be fine ... only the code
is now much better (7 lines of code versus more than 70).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Apr 30 16:17:25 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 30 Apr 2002 10:17:25 -0500
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>


> The version of maketitle.pl in R 1.5.0 does not work with
> version 4.004 of Perl, so I use maketitle.pl from R version

You presumabely mean 5.004.

In either case, you probably want to upgrade. Even 5.005 is "old",
so the upgrade to 5.6.1 is probably advisable.

> 1.4.1 instead. Can I expect this to cause any problems, for
> instance when I build a package?

Possibly, though probably only Kurt et al could say for sure.

Dirk


-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 16:46:44 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 17:46:44 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.33.0204301713310.29798-100000@kleigh.nl>

Friedrich.Leisch@ci.tuwien.ac.at scribeva...

> >>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
> >>>>> Peter Kleiweg (PK) wrote:
>
>   > The version of maketitle.pl in R 1.5.0 does not work with
>   > version 4.004 of Perl, so I use maketitle.pl from R version
>   > 1.4.1 instead. Can I expect this to cause any problems, for
>   > instance when I build a package?
>
> Hmm, building R with perl version 4 is not possible at all
> ... maketitle.pl being the smallest problem you will run into. Did you
> mean version 5.004?

Yes, version 5.004

> The output of maketitle.pl from 1.4.1 should be fine ... only the code
> is now much better (7 lines of code versus more than 70).

Thanks.

There is another script that only works with Perl 5.005: Rdindex
Is it save to use the old version for this script too?

(Sorry, I should have checked first. Could have done this in one
message.)

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 30 17:09:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Apr 2002 18:09:12 +0200
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
In-Reply-To: <200204301414.QAA21844@pubhealth.ku.dk>
References: <200204301414.QAA21844@pubhealth.ku.dk>
Message-ID: <x2vga91847.fsf@blueberry.kubism.ku.dk>

kleiweg@let.rug.nl writes:

> Non of these errors occured in earliers versions of R.
> 
> > library(tcltk)
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
>   can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in library(tcltk) : .First.lib failed
> 
> # Tk's version number.
> TK_VERSION='8.0'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='0'
> TK_PATCH_LEVEL='.5'
...
> ========================
> 
> No errors on this platform:
> 
> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'


That's likely due to the time those functions got introduced in Tcl...
I actually thought they were in Tcl8.x, but it seems necessary that x
>= 1. The functions are used extensively, so an upgrade of Tcl/Tk is
suggested. 

[Poking a bit around reveal that Tcl_SetVar2Ex was Tcl_SetVar2 in 8.0
and the Get versions similar, but I can't seem to locate anything
about Tcl_GetString.]
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue Apr 30 21:14:09 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 30 Apr 2002 22:14:09 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <D45B85C4-5C76-11D6-AE75-003065CC4CB8@mclink.it>

Under MacOS/MacOSX it is possibile to render html using some system APIs.

stefano

On Marted, aprile 30, 2002, at 07:27 , A.J. Rossini wrote:

>>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
>>>>>> A J Rossini writes:
>>> What would be the best way to point new users to the PDF vignette
>>> file?   (it would be just jolly if library(vignette=packagename) fired
>>> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that 
> there are
>     kurt> some).  How to actually view them is something we need to 
> carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing 
> pdf into
>     kurt> our current HTML help system.  I am not saying that this is a 
> good idea
>     kurt> though as I think we want to move to something that can 
> render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).
>
> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...
>
> best,
> -tony
>
> --
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use 
> Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my friday location is usually completely unpredictable.)
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:39:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:39:22 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
References: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
Message-ID: <15566.58586.18835.665434@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

>> The version of maketitle.pl in R 1.5.0 does not work with
>> version 4.004 of Perl, so I use maketitle.pl from R version

> You presumabely mean 5.004.

> In either case, you probably want to upgrade. Even 5.005 is "old",
> so the upgrade to 5.6.1 is probably advisable.

Correct.  R 1.6 will unconditionally assume 5.005.

>> 1.4.1 instead. Can I expect this to cause any problems, for
>> instance when I build a package?

> Possibly, though probably only Kurt et al could say for sure.

As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
5.6.1.

Best
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:41:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:41:55 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <200204301442.QAA22075@pubhealth.ku.dk>
References: <200204301442.QAA22075@pubhealth.ku.dk>
Message-ID: <15566.58739.585706.678109@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> The configure script failed on tk on several platforms. One is
> given below. This did not happen on versions of R older than 1.5.0.

> Message from configure:

> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

> This was in config.log, the command on a single line:

> configure:21361: cc -E -I/opt_local/opt/readline/include
>   -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
>   -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
>   -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
>   -I/opt_local/opt/R/include # no special path needed
>   -I/opt_local/opt/tcl-8.0/include conftest.c
> cc: warning 485: Can't open "#".
> cc: warning 485: Can't open "no".
> cc: warning 485: Can't open "special".
> cc: warning 485: Can't open "path".
> cc: warning 485: Can't open "needed".

> I had to edit tkConfig.sh to solve this problem. This line:

> TK_XINCLUDES='# no special path needed'

> changed to this:

> TK_XINCLUDES=


> After this fix, R was configured for tcl/tk, and the package
> tcltk seems to work OK (at least on this platform).

A bug in your Tcl/Tk installation, I think.

Which version of Linux is this?

-k

> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'

> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R

> Search Path:
>  .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Apr  1 17:23:04 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:23:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011623.SAA05909@pubhealth.ku.dk>

(I sent this earlier, but it seems not to have come through, due to
problems witkh my system)


The following command from appendix A, "a sample session", isnt correct:

contour(x, y, fa, nint=15) 

when used R protests:

Warning message: 
parameter "nint" couldn't be set in high-level plot() function 


it should probably be nlevels, as used a few lines before. 

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Apr  1 17:24:23 2002
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Mon, 1 Apr 2002 18:24:23 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011624.SAA05923@pubhealth.ku.dk>

(I tried to send this earlier, but it doesnt seem to have come through,
due to 
problems on my system)

Hola:

Both cannot be correct:

> m <- matrix(1:4, 2)
> svd(m)
$d
[1] 5.4649857 0.3659662

$u
           [,1]       [,2]
[1,] -0.5760484 -0.8174156
[2,] -0.8174156  0.5760484

$v
           [,1]       [,2]
[1,] -0.4045536  0.9145143
[2,] -0.9145143 -0.4045536

> La.svd(m)
$d
[1] 1.126182e-301 4.226051e-314

$u
            [,1]         [,2]
[1,] 0.002112565  0.999997769
[2,] 0.999997769 -0.002112565

$vt
           [,1]        [,2]
[1,] 7.5449e-13  1.0000e+00
[2,] 1.0000e+00 -7.5449e-13

as m is an invertible matrix, the results of La.svd seems wrong.

This is R1.4.1 on windows 98.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Apr  1 17:33:28 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 1 Apr 2002 08:33:28 -0800 (PST)
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204010831260.62530-100000@homer36.u.washington.edu>

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>

Yes it did. It's PR#1363, and it's fixed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  1 17:35:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Apr 2002 18:35:09 +0200
Subject: [Rd] svd, La.svd (PR#1427)
In-Reply-To: <200204011624.SAA05923@pubhealth.ku.dk>
References: <200204011624.SAA05923@pubhealth.ku.dk>
Message-ID: <x2sn6fqsw2.fsf@blueberry.kubism.ku.dk>

kjetilh@umsanet.edu.bo writes:

> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
> 
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
> 
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
> 
> as m is an invertible matrix, the results of La.svd seems wrong.
> 
> This is R1.4.1 on windows 98.

It is not happening in recent development versions on Linux.

And your previous report *did* come through:

    o   La.svd() was not coercing integer matrices. (PR#1363)

(Moved to Low-level-fixed, so a bit difficult to spot if you didn't
keep the PR#, I grant you...)


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brower@bst.rochester.edu  Mon Apr  1 21:19:09 2002
From: brower@bst.rochester.edu (brower@bst.rochester.edu)
Date: Mon, 1 Apr 2002 22:19:09 +0200 (MET DST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
Message-ID: <200204012019.WAA06615@pubhealth.ku.dk>

Full_Name: Christine Brower
Version: 1.4.1
OS: Solaris 8
Submission from: (NULL) (128.151.148.205)


Configure options fails with following message:
./configure --with-f77
loading cache ./config.cache
checking for a BSD compatible install... tools/install-sh -c
checking whether build environment is sane... yes
checking whether make sets ${MAKE}... yes
checking for working aclocal... missing
checking for working autoconf... missing
checking for working automake... missing
checking for working autoheader... missing
checking for working makeinfo... found
checking host system type... sparc-sun-solaris2.8
loading site script ./config.site
loading build specific script ./config.site
checking for pwd... /usr/bin/pwd
checking whether builddir is srcdir... yes
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking whether gcc accepts -M for generating dependencies... yes
checking whether gcc supports -c -o FILE.lo... yes
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking whether ln -s works... yes
checking for ranlib... ranlib
checking for bison... no
checking for byacc... no
checking for ar... ar
checking whether echo can suppress newlines... yes
configure: warning: redefining INSTALL to be
/disk/d5/a/R,v1.4.1/R/tools/install-sh -c
checking for javac... /usr/bin/javac
checking for less... /usr/bin/less
checking for perl... /usr/bin/perl
checking whether perl version is at least 5.004... yes
checking for dvips... /usr/ucc/bin/dvips
checking for tex... /usr/ucc/bin/tex
checking for latex... /usr/ucc/bin/latex
checking for makeindex... /usr/ucc/bin/makeindex
checking for pdftex... no
checking for pdflatex... no
configure: warning: you cannot build PDF versions of the R manuals
checking for makeinfo... /usr/ucc/bin/makeinfo
checking for unzip... /usr/bin/unzip
checking for zip... /usr/bin/zip
checking for Cygwin environment... no
checking for mingw32 environment... no
checking build system type... sparc-sun-solaris2.8
checking for ld used by GCC... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for /usr/ccs/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
checking how to recognise dependant libraries... pass_all
checking for object suffix... o
checking for executable suffix... no
checking command to parse /usr/ccs/bin/nm -p output... ok
checking for dlfcn.h... yes
checking for ranlib... (cached) ranlib
checking for strip... strip
checking for objdir... .libs
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.lo... 
checking if gcc supports -fno-rtti -fno-exceptions... yes
checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking dynamic linker characteristics... solaris2.8 ld.so
checking if libtool supports shared libraries... yes
creating libtool
checking whether makeinfo version is at least 4... no
configure: warning: you cannot build info versions of the R manuals
checking for main in -lm... yes
defining F77 to be f77
checking whether the Fortran 77 compiler (f77  ) works... yes
checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
checking whether we are using GNU Fortran 77... no
checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib 
-L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
/a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
checking whether f77 appends underscores... yes
checking whether f77 and gcc agree on int and double... yes
checking whether f77 and gcc agree on double complex... yes
checking whether f77 supports -c -o FILE.lo... no
checking for c++... c++
checking whether the C++ compiler (c++  ) works... no
configure: error: installation or configuration problem: C++ compiler cannot
create executables.
----------
config.log reads:
----------
configure:7263: checking whether f77 supports -c -o FILE.lo
configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
f77: Suffix mismatch between -o and produced file (should produce .o)
configure:7565: checking for c++
configure:7597: checking whether the C++ compiler (c++  ) works
configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
-L/usr/local/lib 1>&5
ld: fatal: library -lstdc++: not found
ld: fatal: File processing errors. No output written to conftest
configure: failed program was:

#line 7608 "configure"
#include "confdefs.h"

int main(){return(0);}

------------
I have installed gcc 2.95.3, it didn't seem to help. 
Any thoughts, tricks or help would be greatly appreciated!  Thank you!

Chris

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 21:25:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:25:07 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204012025.WAA06636@pubhealth.ku.dk>

R 1.4.1, Linux and Windows

for(i in 1:1000) {
    X <- rnorm(i)
    XX <- fft(fft(X), inverse=T)/i
    if(max(Mod(XX-X)) > 1e-10) print(i)
}

[1] 392
[1] 588
[1] 968
[1] 980

and I then get a segfault during gc().  The answers are way off, with
imaginary parts 1e10 or more.

These numbers are all multiples of 7^2 or 11^2.

(Based on a report to R-help
Date: Thu, 28 Mar 2002 09:37:34 +0100
From: Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr>
)


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:33:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:33:21 +0200 (MET DST)
Subject: [Rd] svd, La.svd (PR#1427)
Message-ID: <200204011633.SAA05959@pubhealth.ku.dk>

Already sent, already corrected.


On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I tried to send this earlier, but it doesnt seem to have come through,
> due to
> problems on my system)
>
> Hola:
>
> Both cannot be correct:
>
> > m <- matrix(1:4, 2)
> > svd(m)
> $d
> [1] 5.4649857 0.3659662
>
> $u
>            [,1]       [,2]
> [1,] -0.5760484 -0.8174156
> [2,] -0.8174156  0.5760484
>
> $v
>            [,1]       [,2]
> [1,] -0.4045536  0.9145143
> [2,] -0.9145143 -0.4045536
>
> > La.svd(m)
> $d
> [1] 1.126182e-301 4.226051e-314
>
> $u
>             [,1]         [,2]
> [1,] 0.002112565  0.999997769
> [2,] 0.999997769 -0.002112565
>
> $vt
>            [,1]        [,2]
> [1,] 7.5449e-13  1.0000e+00
> [2,] 1.0000e+00 -7.5449e-13
>
> as m is an invertible matrix, the results of La.svd seems wrong.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 17:34:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 18:34:04 +0200 (MET DST)
Subject: [Rd] An introduction to R (PR#1426)
Message-ID: <200204011634.SAA05972@pubhealth.ku.dk>

Already sent, already corrected.

On Mon, 1 Apr 2002 kjetilh@umsanet.edu.bo wrote:

> (I sent this earlier, but it seems not to have come through, due to
> problems witkh my system)
>
>
> The following command from appendix A, "a sample session", isnt correct:
>
> contour(x, y, fa, nint=15)
>
> when used R protests:
>
> Warning message:
> parameter "nint" couldn't be set in high-level plot() function
>
>
> it should probably be nlevels, as used a few lines before.
>
> This is R1.4.1 on windows 98.
>
> Kjetil Halvorsen
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr  1 22:29:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 1 Apr 2002 22:29:49 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <200204012019.WAA06615@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>

Almost certainly your c++ is g++ installed in /usr/local, and
you don't have /usr/local/lib in your LD_LIBRARY_PATH.

In short
> checking whether the C++ compiler (c++  ) works... no

is correct, and that's not a problem with R but with your system.
First get a simple C++ program working.

If this is a current gcc (3.0.x), the same problem will occur with gcc
eventually in the build process (for libgcc.so).


On Mon, 1 Apr 2002 brower@bst.rochester.edu wrote:

> Full_Name: Christine Brower
> Version: 1.4.1
> OS: Solaris 8
> Submission from: (NULL) (128.151.148.205)
>
>
> Configure options fails with following message:
> ./configure --with-f77
> loading cache ./config.cache
> checking for a BSD compatible install... tools/install-sh -c
> checking whether build environment is sane... yes
> checking whether make sets ${MAKE}... yes
> checking for working aclocal... missing
> checking for working autoconf... missing
> checking for working automake... missing
> checking for working autoheader... missing
> checking for working makeinfo... found
> checking host system type... sparc-sun-solaris2.8
> loading site script ./config.site
> loading build specific script ./config.site
> checking for pwd... /usr/bin/pwd
> checking whether builddir is srcdir... yes
> checking for gcc... gcc
> checking whether the C compiler (gcc  ) works... yes
> checking whether the C compiler (gcc  ) is a cross-compiler... no
> checking whether we are using GNU C... yes
> checking whether gcc accepts -g... yes
> checking how to run the C preprocessor... gcc -E
> checking whether gcc needs -traditional... no
> checking whether gcc accepts -M for generating dependencies... yes
> checking whether gcc supports -c -o FILE.lo... yes
> checking for mawk... no
> checking for gawk... no
> checking for nawk... nawk
> checking whether ln -s works... yes
> checking for ranlib... ranlib
> checking for bison... no
> checking for byacc... no
> checking for ar... ar
> checking whether echo can suppress newlines... yes
> configure: warning: redefining INSTALL to be
> /disk/d5/a/R,v1.4.1/R/tools/install-sh -c
> checking for javac... /usr/bin/javac
> checking for less... /usr/bin/less
> checking for perl... /usr/bin/perl
> checking whether perl version is at least 5.004... yes
> checking for dvips... /usr/ucc/bin/dvips
> checking for tex... /usr/ucc/bin/tex
> checking for latex... /usr/ucc/bin/latex
> checking for makeindex... /usr/ucc/bin/makeindex
> checking for pdftex... no
> checking for pdflatex... no
> configure: warning: you cannot build PDF versions of the R manuals
> checking for makeinfo... /usr/ucc/bin/makeinfo
> checking for unzip... /usr/bin/unzip
> checking for zip... /usr/bin/zip
> checking for Cygwin environment... no
> checking for mingw32 environment... no
> checking build system type... sparc-sun-solaris2.8
> checking for ld used by GCC... /usr/ccs/bin/ld
> checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
> checking for /usr/ccs/bin/ld option to reload object files... -r
> checking for BSD-compatible nm... /usr/ccs/bin/nm -p
> checking how to recognise dependant libraries... pass_all
> checking for object suffix... o
> checking for executable suffix... no
> checking command to parse /usr/ccs/bin/nm -p output... ok
> checking for dlfcn.h... yes
> checking for ranlib... (cached) ranlib
> checking for strip... strip
> checking for objdir... .libs
> checking for gcc option to produce PIC... -fPIC
> checking if gcc PIC flag -fPIC works... yes
> checking if gcc static flag -static works... yes
> checking if gcc supports -c -o file.o... yes
> checking if gcc supports -c -o file.lo...
> checking if gcc supports -fno-rtti -fno-exceptions... yes
> checking whether the linker (/usr/ccs/bin/ld) supports shared libraries... yes
> checking how to hardcode library paths into programs... immediate
> checking whether stripping libraries is possible... no
> checking dynamic linker characteristics... solaris2.8 ld.so
> checking if libtool supports shared libraries... yes
> creating libtool
> checking whether makeinfo version is at least 4... no
> configure: warning: you cannot build info versions of the R manuals
> checking for main in -lm... yes
> defining F77 to be f77
> checking whether the Fortran 77 compiler (f77  ) works... yes
> checking whether the Fortran 77 compiler (f77  ) is a cross-compiler... no
> checking whether we are using GNU Fortran 77... no
> checking for Fortran 77 libraries...  -R/a/SUNWspro/lib:/opt/SUNWspro/lib
> -L/a/SUNWspro/lib -L/a/SUNWspro/SC4.2/lib -L/usr/ccs/lib -L/usr/lib
> /a/SUNWspro/SC4.2/lib/libM77.a -lF77 -lsunmath -lm -lcx
> checking whether f77 appends underscores... yes
> checking whether f77 and gcc agree on int and double... yes
> checking whether f77 and gcc agree on double complex... yes
> checking whether f77 supports -c -o FILE.lo... no
> checking for c++... c++
> checking whether the C++ compiler (c++  ) works... no
> configure: error: installation or configuration problem: C++ compiler cannot
> create executables.
> ----------
> config.log reads:
> ----------
> configure:7263: checking whether f77 supports -c -o FILE.lo
> configure:7273: f77 -g -c conftest.f -o TMP/conftest.lo 1>&5
> f77: Suffix mismatch between -o and produced file (should produce .o)
> configure:7565: checking for c++
> configure:7597: checking whether the C++ compiler (c++  ) works
> configure:7613: c++ -o conftest  -I/usr/local/include  conftest.C
> -L/usr/local/lib 1>&5
> ld: fatal: library -lstdc++: not found
> ld: fatal: File processing errors. No output written to conftest
> configure: failed program was:
>
> #line 7608 "configure"
> #include "confdefs.h"
>
> int main(){return(0);}
>
> ------------
> I have installed gcc 2.95.3, it didn't seem to help.
> Any thoughts, tricks or help would be greatly appreciated!  Thank you!
>
> Chris
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Tue Apr  2 09:38:07 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 10:38:07 +0200
Subject: [Rd] Finding code (was: [R] A request)
In-Reply-To: <3CA96648.77B42E5B@statistik.uni-dortmund.de>
References: <MABBJPBLPNLDIFMIAAOJMEAKCFAA.indra_calisto@yahoo.com> <200204020736.g327asg06139@wn1.sci.kun.nl> <3CA96648.77B42E5B@statistik.uni-dortmund.de>
Message-ID: <200204020838.g328c8g23867@wn1.sci.kun.nl>

On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> "E.L. Willighagen" wrote:
> > On Tuesday 02 April 2002 09:27, Uwe Ligges wrote:
> > > Indrajit SenGupta wrote:
> > > > Can we expect to see an R package on Statistical Quality Control in
> > > > the future like SPLUS? I can't understand why nobody made this
> > > > package before.
> > >
> > > Nice to hear you would like to contribute!
> > > Thank you!
> >
> > Rather often, I get the feeling that the developer are feeling
> > underappreciated? Don't.
>
> After first thoughts about ignoring your message: No, I don't feel
> underappreciated. 

<snip>

> R provides the tools for easily documenting and packaging functions.

Interesting point, because I am working on a library with the same issues:
how to make stuff easy to find... R offers keywords, aliases and full-text 
search. But that is all, right? 

And these only work for installed packages (i.e. those within the search 
path...) And (just tested), full-text search does not include searching 
references or descriptions, right (i.e. \description{} and \reference{})? 

For example,
> help.search("Dongarra")
No help files found with alias or title matching `Dongarra'

Dongarra is author from article in svd().

Did I miss some crucial functionality of help() and help.search()? Why can 
only keywords and aliasses be searched?

To return to Indrajit's question: there must be several other packages with 
which one can do statistical quality control, or at least with some minor 
extensions... But he seems not be able to find them. Ofcourse, that could be
imcompetence, but even then... should R be only used by experts, and not
by novice? In other words, is there a reason why R does not have more 
extensive search methods that can be used by novice to get to know R in such 
depth that the do not have to bug the R-help@ mailling list?

Egon



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From egonw@sci.kun.nl  Tue Apr  2 10:44:37 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Tue, 2 Apr 2002 11:44:37 +0200
Subject: [Rd] Re: Finding code (was: [R] A request)
In-Reply-To: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
References: <Pine.LNX.4.31.0204021113040.16673-100000@gannet.stats>
Message-ID: <200204020944.g329icg14503@wn1.sci.kun.nl>

On Tuesday 02 April 2002 12:25, ripley@stats.ox.ac.uk wrote:
> On Tue, 2 Apr 2002, E.L. Willighagen wrote:
> > On Tuesday 02 April 2002 10:05, Uwe Ligges wrote:
> > > "E.L. Willighagen" wrote:
> > > R provides the tools for easily documenting and packaging functions.
> >
> > Interesting point, because I am working on a library with the same
> > issues: how to make stuff easy to find... R offers keywords, aliases and
> > full-text search. But that is all, right?
> >
> > And these only work for installed packages (i.e. those within the search
> > path...) And (just tested), full-text search does not include searching
> > references or descriptions, right (i.e. \description{} and \reference{})?
> >
> > For example,
> >
> > > help.search("Dongarra")
> >
> > No help files found with alias or title matching `Dongarra'
> >
> > Dongarra is author from article in svd().
> >
> > Did I miss some crucial functionality of help() and help.search()? Why
> > can only keywords and aliasses be searched?
> >
> > To return to Indrajit's question: there must be several other packages
> > with which one can do statistical quality control, or at least with some
> > minor extensions... But he seems not be able to find them. Ofcourse, that
> > could be
>
> Must there?  Why do you assert that?  As far as I am aware, there are
> no such packages, and I have tested/ported all those on CRAN.

Aren't there methods to calculated means and variances? Did I misunderstood 
that those can be used in Shewart charts? Ofcourse, things might need 
extensions, like a chart plotter...
I have not tested all CRAN modules, but I would have a too positive 
impression about R... 

> > imcompetence, but even then... should R be only used by experts, and not
> > by novice? In other words, is there a reason why R does not have more
> > extensive search methods that can be used by novice to get to know R in
> > such depth that the do not have to bug the R-help@ mailling list?
>
> Because R is a volunteer project, and no one has (AFAIK) contributed such
> methods. It seems that for them to be really useful approximate matching
> is needed.
>
> I do think you have a fundamental misconception of a project such as R.
> The developers wrote R for their own purposes, which include a vehicle for
> teaching statistics and to promulgate their favourite statistical methods.
> They made what they did freely available.  What we do not do is provide
> facilities on demand, from you or anyone else.

That is why I cross-posted this message to r-devel. Is there interest in such 
functionality? At least I am interested, even in coding this extra 
functionality, but before doing so, I thought it would be nice to discuss 
this on the developers list...

> Please do not reply to this message, publicly or otherwise.

Not that I would like to have the last word, or want to offend you, but I 
already wrote my answer before reading this line...

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
From r-devel@stat.math.ethz.ch  Wed Apr  3 09:16:37 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:16:37 -0600
Subject: [Rd] Building R-1.4 on Tru64
In-Reply-To: <3C329C33.11D295F0@csiro.au>; from Richard.Beare@csiro.au on Wed, Jan 02, 2002 at 04:35:47PM +1100
References: <3C329C33.11D295F0@csiro.au>
Message-ID: <20020403021637.D29964@oolong.il.thewrittenword.com>

On Wed, Jan 02, 2002 at 04:35:47PM +1100, Richard Beare wrote:
> Hello everyone,
> 
> I've just attempted to build R-1.4 on Compaq Tru64 (I'll enclose the
> text from bug.report() from R-1.3.1 at the end.) The relevant part of
> the log is below.
> 
> Any ideas?
> 
> gcc -shared  -o methods.so do_substitute_direct.o
> methods_list_dispatch.o method_meta_data.o slot.o   -L/usr/local/lib  
> /usr/ucb/ld:
> Warning: Unresolved:
> ...

Try:
  $ gcc -shared -Wl,-expect_unresolved,"*" -o methods.so \
  do_substitute_direct.o methods_list_dispatch.o \
  method_meta_data.o slot.o -L/usr/local/lib  

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From r-devel@stat.math.ethz.ch  Wed Apr  3 09:18:34 2002
From: r-devel@stat.math.ethz.ch (Albert Chin)
Date: Wed, 3 Apr 2002 02:18:34 -0600
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>; from ripley@stats.ox.ac.uk on Mon, Apr 01, 2002 at 10:29:49PM +0100
References: <200204012019.WAA06615@pubhealth.ku.dk> <Pine.LNX.4.31.0204012225160.2589-100000@gannet.stats>
Message-ID: <20020403021834.E29964@oolong.il.thewrittenword.com>

On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> Almost certainly your c++ is g++ installed in /usr/local, and
> you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> 
> In short
> > checking whether the C++ compiler (c++  ) works... no
> 
> is correct, and that's not a problem with R but with your system.
> First get a simple C++ program working.
> 
> If this is a current gcc (3.0.x), the same problem will occur with gcc
> eventually in the build process (for libgcc.so).

Look at config.log and it'll give you more info as to why the above
failed.

-- 
albert chin (china@thewrittenword.com)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr  3 09:29:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 3 Apr 2002 09:29:35 +0100 (BST)
Subject: [Rd] R compile on Solaris 8 fails (PR#1428)
In-Reply-To: <20020403021834.E29964@oolong.il.thewrittenword.com>
Message-ID: <Pine.LNX.4.31.0204030928330.9162-100000@gannet.stats>

On Wed, 3 Apr 2002, Albert Chin wrote:

> On Mon, Apr 01, 2002 at 10:29:49PM +0100, ripley@stats.ox.ac.uk wrote:
> > Almost certainly your c++ is g++ installed in /usr/local, and
> > you don't have /usr/local/lib in your LD_LIBRARY_PATH.
> >
> > In short
> > > checking whether the C++ compiler (c++  ) works... no
> >
> > is correct, and that's not a problem with R but with your system.
> > First get a simple C++ program working.
> >
> > If this is a current gcc (3.0.x), the same problem will occur with gcc
> > eventually in the build process (for libgcc.so).
>
> Look at config.log and it'll give you more info as to why the above
> failed.

That was in the original posting, and it said -lstdc++ could not be found.

You've jumped into the middle of a thread!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed Apr  3 12:09:40 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed, 3 Apr 2002 13:09:40 +0200 (MET DST)
Subject: [Rd] persp() crashes with numeric values for [x,y,z]lab (PR#1431)
Message-ID: <200204031109.NAA20177@pubhealth.ku.dk>

Using a numeric value for the arguments xlab, ylab or zlab in persp()
crashes R.
Example:

  persp(1:2, 1:2, matrix(1:4, 2), xlab=1)

Well, it is documented that "These must the character strings".
BTW: I think "the" should be changed to "be" in this sentence.

Nevertheless the worst case could be caught, however, e.g. by coercing
numeric to character.


Uwe Ligges

R-1.4.1 (on WinNT4 + Solaris 5.7) and 


platform i386-pc-mingw32             
arch     i386                        
os       mingw32                     
system   i386, mingw32               
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      02                          
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From humbertc@univ-mlv.fr  Wed Apr  3 13:51:04 2002
From: humbertc@univ-mlv.fr (humbertc@univ-mlv.fr)
Date: Wed, 3 Apr 2002 14:51:04 +0200 (MET DST)
Subject: [Rd] filled.contour(): no check when z dimension dismatch (PR#1432)
Message-ID: <200204031251.OAA21435@pubhealth.ku.dk>

Full_Name: Cyril Humbert
Version: 1.4.1
OS: Linux
Submission from: (NULL) (193.55.63.125)


`filled.contour()' doesn't complain if z matrix dimension doesn't match
x and y arguments. It would be safer if `filled.contour()' displays an
error (or a warning) message as `contour()' does.

For example :

   > x <- 1:3
   > z <- matrix(data=1:16, nrow=4, ncol=4)
   > filled.contour(x, x, z) # z is (4x4) whereas x is (1x3).
   ## no error/warning. 

   > contour(x, x, z)
   Error in contour(as.double(x), as.double(y), z, as.double(levels), labels,  :

         dimension mismatch
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 00:02:21 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 3 Apr 2002 18:02:21 -0500
Subject: [Rd] predict.Arima fails when x is not a time-series
Message-ID: <15531.35325.783406.290369@gargle.gargle.HOWL>

I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.
The following produces an error message because x is not of class "ts":
  R> x <- rnorm(20)
  R> obj <- arima(x, c(2,0,0))
  R> predict(obj)
     Error in round(x, digits) : Non-numeric argument to mathematical function

Granted the documentation for arima says x should be a time-series, but why not
accommodate simple vectors?  I think it would suffice to change this line:
  xtsp <- tsp(data)
in predict.Arima to this:
  xtsp <- tsp(hasTsp(data))

Also, a minor documentation typo: the help file for predict.Arima refers to the
function as "predict.arima" at one point.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 06:35:03 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 Apr 2002 06:35:03 +0100 (BST)
Subject: [Rd] Re: predict.Arima fails when x is not a time-series
In-Reply-To: <15531.35325.783406.290369@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.44.0204040634000.29459-100000@auk.stats>

On Wed, 3 Apr 2002, David Brahm wrote:

> I'm playing with predict.Arima in the 3/19/02 development snapshot of R-devel.

That's quite old.

> The following produces an error message because x is not of class "ts":
>   R> x <- rnorm(20)
>   R> obj <- arima(x, c(2,0,0))
>   R> predict(obj)
>      Error in round(x, digits) : Non-numeric argument to mathematical function
>
> Granted the documentation for arima says x should be a time-series, but why not
> accommodate simple vectors?

Because it is not possible to specify the time base correctly when
predicting.

>  I think it would suffice to change this line:
>   xtsp <- tsp(data)
> in predict.Arima to this:
>   xtsp <- tsp(hasTsp(data))
>
> Also, a minor documentation typo: the help file for predict.Arima refers to the
> function as "predict.arima" at one point.

Not any more it doesn't.

> --
>                               -- David Brahm (brahm@alum.mit.edu)
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Thu Apr  4 13:36:01 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Thu, 4 Apr 2002 14:36:01 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041236.OAA29966@pubhealth.ku.dk>


Hi,

The help for `assign' says 
 
 In all the assignment operator expressions, `x' can be a name or
 an expression defining a part of an object to be replaced (e.g.,
 `z[[1]]').  The name does not need to be quoted, though it can be.

So I would expect that by
 a<-1:4
 assign("a[1]",2)   
the first component of a gets the value 2, but the object "a[1]" is 
created.
Could this be clarified in the documentation? 

Cheers,
Martin

-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 13:57:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 13:57:26 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <200204041236.OAA29966@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>

On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:

> The help for `assign' says
>
>  In all the assignment operator expressions, `x' can be a name or
>  an expression defining a part of an object to be replaced (e.g.,
>  `z[[1]]').  The name does not need to be quoted, though it can be.
>
> So I would expect that by
>  a<-1:4
>  assign("a[1]",2)
> the first component of a gets the value 2, but the object "a[1]" is
> created.
> Could this be clarified in the documentation?

Could you suggest how?  You quoted an *expression*, and the page refers to
quoting a *name*, so I don't know that I see the crux here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 16:37:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 17:37:18 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
Message-ID: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> 
> > The help for `assign' says
> >
> >  In all the assignment operator expressions, `x' can be a name or
> >  an expression defining a part of an object to be replaced (e.g.,
> >  `z[[1]]').  The name does not need to be quoted, though it can be.
> >
> > So I would expect that by
> >  a<-1:4
> >  assign("a[1]",2)
> > the first component of a gets the value 2, but the object "a[1]" is
> > created.
> > Could this be clarified in the documentation?
> 
> Could you suggest how?  You quoted an *expression*, and the page refers to
> quoting a *name*, so I don't know that I see the crux here.

Actually, it *is* a name that is getting quoted, it just has these weird
bracket characters in it, so it is not "syntactically valid". 

One improvement might be: "the name can be any string of text and may
be quoted, but this is only necessary if it is not a syntactically
valid name."

We might also emphasize that "assignment operator expressions" does
not include assign(), only <-, <<-, and =. (And _ until we finally get
it killed...). On the other hand it is arguably clear enough already,
if read carefully. (For this reason alone, the posters remark is off
base, but he might have asked about "a[1]" <- 2.)

In assign(), `x' must be a character object. As in

> a <- "b"
> assign(a,2)
> a
[1] "b"
> b
[1] 2


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:53:20 2002
From: rgentlem@jimmy.harvard.edu (rgentlem@jimmy.harvard.edu)
Date: Thu, 4 Apr 2002 17:53:20 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041553.RAA01870@pubhealth.ku.dk>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Thu Apr  4 16:52:07 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Thu, 4 Apr 2002 10:52:07 -0500
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Apr 04, 2002 at 05:37:18PM +0200
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats> <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020404105207.X7028@jimmy.harvard.edu>

On Thu, Apr 04, 2002 at 05:37:18PM +0200, Peter Dalgaard BSA wrote:
> ripley@stats.ox.ac.uk writes:
> 
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> > 
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> > 
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
> 
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid". 
> 
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
> 
  I think the original point was that he expected that a[1] would be
  changed not that a new variable named "a[1]" would be created. I
  don't think your suggestion will help with this. I think that Brian
  is correct, unless of course you want to spend some amount of time
  figuring out the logic/parsing requirements.

  "Assign treats the quoted string as a symbol, it does not parse it in
  any way", might help.  On the otherhand, in some large number of
  years this is the first person who has had this problem, I'm not
  sure we should be documenting for less than 1% of the population 
  unless of course,
    "we are trying to be as accurate as possible without regard to
  readability"  :-), to quote the views of a certain member of R core
  on documentation.




> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
> 
> In assign(), `x' must be a character object. As in
> 
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr  4 16:55:04 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Thu, 4 Apr 2002 17:55:04 +0200 (MET DST)
Subject: [Rd] fft fails for lengths 392, 588, 968, 980 .... (PR#1429)
Message-ID: <200204041555.RAA01892@pubhealth.ku.dk>

Gabriel Fricout <Gabriel.FRICOUT@cmm.ensmp.fr> reported a bug in fft(), and
Brian D. Ripley <ripley@stats.ox.ac.uk> narrowed it down to specific values of
N (the data vector length).  For N <= 1000, BDR showed the failures occur at:
  N = 392 =  7^2 * 2^2 * 2
  N = 588 =  7^2 * 2^2 * 3
  N = 968 = 11^2 * 2^2 * 2
  N = 980 =  7^2 * 2^2 * 5

BDR's test is as follows:
  R> for (i in 1:1000) {
  R>   X <- rnorm(i)
  R>   XX <- fft(fft(X), inverse=T)/i
  R>   if(max(Mod(XX-X)) > 1e-10) print(i)
  R> }

In src/appl/fft.c, lines 820-822 set "maxf" in subroutine fft_factor.  "maxf"
is supposed to be the "maximum factor size", and the algorithm basically grabs
the last non-squared factor and the last squared factor (there are "kt" squared
factors):

  maxf = nfac[m_fac-kt-1];
  if (kt > 0)
    maxf = imax2(nfac[kt-1], maxf);

But the last squared factor (nfac[kt-1]) is not necessarily the largest, since
the squared factors are added to nfac in this order: 4, 3,5,7,..., 2 (see lines
769-791).  Thus I believe we need to add these two lines after line 822:

  if (kt > 1) maxf = imax2(nfac[kt-2], maxf);
  if (kt > 2) maxf = imax2(nfac[kt-3], maxf);

I don't know for sure that the second line is necessary (I saw no error for
N = 1152 = 4^2 * 3^2 * 2^2 * 2).  But I did rebuild R-devel (2002-04-03) with
these two lines added, and BDR's test ran without errors.  I submit this as the
bug fix for PR#1429.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:02:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 17:02:53 +0100 (BST)
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.31.0204041700030.24473-100000@gannet.stats>

I do think that the issues are clearer if the help pages are separated,
and I have separated them.  The crux seems to me to have been that too
many diverse concepts were on one help page.

I also noticed `-' is undocumented ... and left it so.


On 4 Apr 2002, Peter Dalgaard BSA wrote:

> ripley@stats.ox.ac.uk writes:
>
> > On Thu, 4 Apr 2002 Martin.Schlather@uni-bayreuth.de wrote:
> >
> > > The help for `assign' says
> > >
> > >  In all the assignment operator expressions, `x' can be a name or
> > >  an expression defining a part of an object to be replaced (e.g.,
> > >  `z[[1]]').  The name does not need to be quoted, though it can be.
> > >
> > > So I would expect that by
> > >  a<-1:4
> > >  assign("a[1]",2)
> > > the first component of a gets the value 2, but the object "a[1]" is
> > > created.
> > > Could this be clarified in the documentation?
> >
> > Could you suggest how?  You quoted an *expression*, and the page refers to
> > quoting a *name*, so I don't know that I see the crux here.
>
> Actually, it *is* a name that is getting quoted, it just has these weird
> bracket characters in it, so it is not "syntactically valid".
>
> One improvement might be: "the name can be any string of text and may
> be quoted, but this is only necessary if it is not a syntactically
> valid name."
>
> We might also emphasize that "assignment operator expressions" does
> not include assign(), only <-, <<-, and =. (And _ until we finally get
> it killed...). On the other hand it is arguably clear enough already,
> if read carefully. (For this reason alone, the posters remark is off
> base, but he might have asked about "a[1]" <- 2.)
>
> In assign(), `x' must be a character object. As in
>
> > a <- "b"
> > assign(a,2)
> > a
> [1] "b"
> > b
> [1] 2
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:15:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Apr 2002 18:15:36 +0200
Subject: [Rd] assign, documentation (PR#1434)
In-Reply-To: <20020404105207.X7028@jimmy.harvard.edu>
References: <Pine.LNX.4.31.0204041356030.19900-100000@gannet.stats>
 <x2d6xfpj9t.fsf@blueberry.kubism.ku.dk>
 <20020404105207.X7028@jimmy.harvard.edu>
Message-ID: <x28z83phhz.fsf@blueberry.kubism.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr  4 17:18:10 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Apr 2002 18:18:10 +0200 (MET DST)
Subject: [Rd] assign, documentation (PR#1434)
Message-ID: <200204041618.SAA01995@pubhealth.ku.dk>

Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

> > > >  In all the assignment operator expressions, `x' can be a name or
> > > >  an expression defining a part of an object to be replaced (e.g.,
> > > >  `z[[1]]').  The name does not need to be quoted, though it can be.
...
> > One improvement might be: "the name can be any string of text and may
> > be quoted, but this is only necessary if it is not a syntactically
> > valid name."
> > 
>   I think the original point was that he expected that a[1] would be
>   changed not that a new variable named "a[1]" would be created. I
>   don't think your suggestion will help with this. I think that Brian
>   is correct, unless of course you want to spend some amount of time
>   figuring out the logic/parsing requirements.
> 
>   "Assign treats the quoted string as a symbol, it does not parse it in
>   any way", might help.  On the otherhand, in some large number of
>   years this is the first person who has had this problem, I'm not
>   sure we should be documenting for less than 1% of the population 
>   unless of course,
>     "we are trying to be as accurate as possible without regard to
>   readability"  :-), to quote the views of a certain member of R core
>   on documentation.

Moi? Only for certain kinds of documentation as you surely know. In
other contexts I'd willingly go for reducing precision to improve
overall clarity. But I do think accuracy is more important than
anything else on help pages. It is the wrong context in which to try
to be pedagogical.

This really is the place to pick nits, and, e.g., the argument to
assign is *not* a quoted string; it is a character vector whose first
element becomes the name of the assigned object.

The nit I was picking was in fact not relevant for the original
question, but would be in the "a[1]" <- 2 case. The improvement is
that there are cases where you *must* quote the left hand side, in
contrast with what the help page is saying.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rolf@math.unb.ca  Thu Apr  4 17:26:47 2002
From: rolf@math.unb.ca (rolf@math.unb.ca)
Date: Thu, 4 Apr 2002 18:26:47 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041626.SAA02030@pubhealth.ku.dk>


Just now I again had occasion to want nested describe lists in a
documentation file.  I found that the bug which I reported on 18
October, 2001 still persists.  I checked on the bug report at the R
web page, and found that the notes say ``Not a problem in R 1.4.0
(2001-12-08)''.

Well, it's still a problem for me --- using R 1.4.1.

(Details:

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R ).

I executed

	R CMD Rdconv -t=htlm foo.Rd > foo.html

where foo.Rd is the example documentation file that I submitted to
illustrate the bug.  On my system, the bug remains.  I.e. the nested
describes screw up.   The item in the outer describe list, just
before the inner describe list, (in the example ``fred'') gets
omitted, along with the first couple of items of the inner describe
list.  The third item of the inner describe list seems to get treated
as if it were an element of the outer list, and gets jumbled with a
bit of the ``fred'' item.

I enclose below the file foo.html that I got on my system.

Could you please check to see if the same thing happens when you run
the Rdconv command on your system?  I guess it's possible that
there's a local glitch here (e.g. something wrong with perl?) that
causes the screw-up.

					cheers,

						Rolf Turner
						rolf@math.unb.ca

===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

File foo.html:
==============

<html><head><title>R: Do nothing.</title>
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>


<h2>Do nothing.</h2>


<h3>Description</h3>

<p>
Do nothing, but do it <b>very</b> well!
</p>


<h3>Usage</h3>

<pre>
foo(gorp,par)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>gorp</code></td>
<td>
I don't know either.</td></tr>
<tr valign="top"><td><code>par</code></td>
<td>
Never you mind!</td></tr>
</table>

<h3>Details</h3>

<p>
The parameter list <code>par</code> should be
as follows, for each possible value of <code>gorp</code>:
<dl>
<dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
<i>(beta,gamma,r)</i> which are respectively
a load of dingos' kidneys, an elephant, and a duck.
Note that <i>gamma</i> must be totally ridiculuous.
</dd>


<dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
entries <i>(beta,gamma,r_0,r)</i> where
<i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
<code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
<i>r_0</i> must eat less than <i>r</i>.
</dd>


<dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
with components <i>(beta,sigma,kappa)</i>.
Again <i>beta</i> is a load of dingos' kidneys.
The difference between a duck is
</p><p align="center"><i>(sigma/kappa)^2</i></p><p>
Note that it is necessary that <i>kappa &gt; 42</i>.
</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
given as a list with components
</p>

<dl>
<dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
<dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
with <i>gamma_ij</i> pertaining to the kidneys of
dingo <i>i</i> and dingo <i>j</i>.</dd>


<dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
<i>r_ij</i> pertaining to the kidneys of dingo
<i>i</i> and dingo <i>j</i>.</dd>
</dl></dd>
</dl>

<h3>Warnings</h3>

<p>
Even paranoids have real enemies.
</p>


<h3>Author(s)</h3>

<p>
Rolf Turner
<a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
<a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
</p>


<h3>References</h3>

<p>
Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
Memorial University Press, St. John's Nfld., 2001.
</p>
<p>
Ye-of-little-faith, O.  ``An annotated bibliography of green
peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
pp.  101 &#150; 64.
</p>


<h3>See Also</h3>

<p>
<code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
<code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
</p>


<h3>Examples</h3>

<pre>
   #Oh come on!  You can think up your own examples!
   </pre>



<hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>

</body></html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr  4 17:38:32 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 4 Apr 2002 18:38:32 +0200 (MET DST)
Subject: [Rd] PR#1132.
Message-ID: <200204041638.SAA02068@pubhealth.ku.dk>

This was fixed yesterday as part of PR#1257, and I've just answered one Q
on R-help about it.  What I get on my system in html makes as little
sense as the foo.Rd, but no less.

Please try out the current R-devel.

On Thu, 4 Apr 2002 rolf@math.unb.ca wrote:

>
> Just now I again had occasion to want nested describe lists in a
> documentation file.  I found that the bug which I reported on 18
> October, 2001 still persists.  I checked on the bug report at the R
> web page, and found that the notes say ``Not a problem in R 1.4.0
> (2001-12-08)''.
>
> Well, it's still a problem for me --- using R 1.4.1.
>
> (Details:
>
> platform sparc-sun-solaris2.7
> arch     sparc
> os       solaris2.7
> system   sparc, solaris2.7
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R ).
>
> I executed
>
> 	R CMD Rdconv -t=htlm foo.Rd > foo.html
>
> where foo.Rd is the example documentation file that I submitted to
> illustrate the bug.  On my system, the bug remains.  I.e. the nested
> describes screw up.   The item in the outer describe list, just
> before the inner describe list, (in the example ``fred'') gets
> omitted, along with the first couple of items of the inner describe
> list.  The third item of the inner describe list seems to get treated
> as if it were an element of the outer list, and gets jumbled with a
> bit of the ``fred'' item.
>
> I enclose below the file foo.html that I got on my system.
>
> Could you please check to see if the same thing happens when you run
> the Rdconv command on your system?  I guess it's possible that
> there's a local glitch here (e.g. something wrong with perl?) that
> causes the screw-up.
>
> 					cheers,
>
> 						Rolf Turner
> 						rolf@math.unb.ca
>
> ===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
>
> File foo.html:
> ==============
>
> <html><head><title>R: Do nothing.</title>
> <link rel="stylesheet" type="text/css" href="../../R.css">
> </head><body>
>
>
> <h2>Do nothing.</h2>
>
>
> <h3>Description</h3>
>
> <p>
> Do nothing, but do it <b>very</b> well!
> </p>
>
>
> <h3>Usage</h3>
>
> <pre>
> foo(gorp,par)
> </pre>
>
>
> <h3>Arguments</h3>
>
> <table summary="R argblock">
> <tr valign="top"><td><code>gorp</code></td>
> <td>
> I don't know either.</td></tr>
> <tr valign="top"><td><code>par</code></td>
> <td>
> Never you mind!</td></tr>
> </table>
>
> <h3>Details</h3>
>
> <p>
> The parameter list <code>par</code> should be
> as follows, for each possible value of <code>gorp</code>:
> <dl>
> <dt>melvin:</dt><dd>(Melvin Mingdinkler.) A vector with components
> <i>(beta,gamma,r)</i> which are respectively
> a load of dingos' kidneys, an elephant, and a duck.
> Note that <i>gamma</i> must be totally ridiculuous.
> </dd>
>
>
> <dt>clyde:</dt><dd>(Clyde, clyde, the cow's outside.) A vector with
> entries <i>(beta,gamma,r_0,r)</i> where
> <i>beta</i>, <i>gamma</i>, and <i>r</i> are as for
> <code>melvin</code>, <i>r_0</i> is a hippopotamus.  Of course
> <i>r_0</i> must eat less than <i>r</i>.
> </dd>
>
>
> <dt>irving:</dt><dd>(The 142nd fastest gun in the West.) A vector
> with components <i>(beta,sigma,kappa)</i>.
> Again <i>beta</i> is a load of dingos' kidneys.
> The difference between a duck is
> </p><p align="center"><i>(sigma/kappa)^2</i></p><p>
> Note that it is necessary that <i>kappa &gt; 42</i>.
> </dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd><dd>(Fred Nurk.) Here <code>par</code> is
> given as a list with components
> </p>
>
> <dl>
> <dt>beta:</dt><dd>A vector of loads of dingos' kidneys.</dd>
> <dt>gamma:</dt><dd>A <b>symmetric</b> matrix of elephants,
> with <i>gamma_ij</i> pertaining to the kidneys of
> dingo <i>i</i> and dingo <i>j</i>.</dd>
>
>
> <dt>r:</dt><dd>A <b>symmetric</b> matrix of ducks with
> <i>r_ij</i> pertaining to the kidneys of dingo
> <i>i</i> and dingo <i>j</i>.</dd>
> </dl></dd>
> </dl>
>
> <h3>Warnings</h3>
>
> <p>
> Even paranoids have real enemies.
> </p>
>
>
> <h3>Author(s)</h3>
>
> <p>
> Rolf Turner
> <a href="mailto:rolf@math.unb.ca">rolf@math.unb.ca</a>
> <a href="http://www.math.unb.ca/~rolf">http://www.math.unb.ca/~rolf</a>
> </p>
>
>
> <h3>References</h3>
>
> <p>
> Gates, V. ``42 Wonderful Things to do in Come-by-Chance, Nfld.'',
> Memorial University Press, St. John's Nfld., 2001.
> </p>
> <p>
> Ye-of-little-faith, O.  ``An annotated bibliography of green
> peas and their ilk'', Journal of the Hopeless, vol. 42, 1950,
> pp.  101 &#150; 64.
> </p>
>
>
> <h3>See Also</h3>
>
> <p>
> <code><a href="../../../doc/html/search/SearchObject.html?bar">bar</a></code>,
> <code><a href="../../../doc/html/search/SearchObject.html?snafu">snafu</a></code>,
> </p>
>
>
> <h3>Examples</h3>
>
> <pre>
>    #Oh come on!  You can think up your own examples!
>    </pre>
>
>
>
> <hr><div align="center"><a href="00Index.html">[Package Contents]</a></div>
>
> </body></html>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From feng@tu-cottbus.de  Fri Apr  5 09:41:08 2002
From: feng@tu-cottbus.de (feng@tu-cottbus.de)
Date: Fri, 5 Apr 2002 10:41:08 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050841.KAA05324@pubhealth.ku.dk>

Full_Name: Jinsheng Feng
Version: R141
OS: Linux and Windows2000
Submission from: (NULL) (141.43.226.235)


I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
following I have two resalts:
A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
Ai <- solve(A)
b <- c(2, 3)
x <- Ai%*%b

resalt under Windows
>x
      [,1]
[1,] -2.220446e-16
[2,]  1.000000e-00

resalt under Linux
>x
     [,1]
[1,] 1.110223e-16
[2,] 1.000000e-00


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 10:03:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 11:03:03 +0200 (MET DST)
Subject: [Rd] problem by calculation (PR#1435)
Message-ID: <200204050903.LAA05622@pubhealth.ku.dk>

It's called `rounding error'.  Please look it up in an introductory
numerical analysis textbook.

Please also read the section on `what is a bug' in the R FAQ, and if you
do report a genuine bug please try to use an informative subject line.

On Fri, 5 Apr 2002 feng@tu-cottbus.de wrote:

> Full_Name: Jinsheng Feng
> Version: R141
> OS: Linux and Windows2000
> Submission from: (NULL) (141.43.226.235)
>
>
> I have installed R141 under Xteamlinux4.0 (Chinese) and MS Windows2000. By run
> following I have two resalts:
> A <- matrix(c(1, 2, 7, 3), ncol=2, byrow=T)
> Ai <- solve(A)
> b <- c(2, 3)
> x <- Ai%*%b
>
> resalt under Windows
> >x
>       [,1]
> [1,] -2.220446e-16
> [2,]  1.000000e-00
>
> resalt under Linux
> >x
>      [,1]
> [1,] 1.110223e-16
> [2,] 1.000000e-00
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 12:35:17 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 12:35:17 +0100 (BST)
Subject: [Rd] Updating packages for the upcoming R 1.5.0
Message-ID: <Pine.LNX.4.31.0204051227180.10366-200000@gannet.stats>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/PLAIN; charset=US-ASCII

You probably know that R 1.5.0 goes into feature freeze on Monday and is
scheduled for release on April 29th.

There are a number of changes that affect packages: a few are actual
changes, many are stricter enforcement of the existing interface and some
are opportunities for (considerable) performance improvements.

We have placed a write-up `150update.txt' on
http://developer.r-project.org that we will continue to update as features
are added or we gain experience.  For your convenience, the current
version is attached.

A number of packages have already been updated, and you will find these in
the src/contrib/1.5.0 section on CRAN.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--27492116-1041555239-1018006517=:10366
Content-Type: TEXT/plain; name="150update.txt"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.31.0204051235170.10366@gannet.stats>
Content-Description: 
Content-Disposition: attachment; filename="150update.txt"

VXBkYXRpbmcgcGFja2FnZXMgZm9yIDEuNS4wDQo9PT09PT09PT09PT09PT09
PT09PT09PT09PT0NCg0KUGFja2FnZSBtYWludGFpbmVycyBzaG91bGQgYmUg
YXdhcmUgb2YgdGhlIGZvbGxvd2luZyBjaGFuZ2VzIHRvIGFwcGVhcg0KaW4g
MS41LjAuICAgU29tZSBuZWNlc3NpdGF0ZSBjaGFuZ2VzIGluIG1hbnkgcGFj
a2FnZXMuDQoNClRoaXMgZG9jdW1lbnQgaXMgYHdvcmsgaW4gcHJvZ3Jlc3Mn
IHVudGlsIGZlYXR1cmUgZnJlZXplIGZvciAxLjUuMCBvbg0KQXByaWwgOHRo
Lg0KDQoNCk5BIHN0cmluZ3MNCi0tLS0tLS0tLS0NCg0KTWlzc2luZyB2YWx1
ZXMgaW4gc3RyaW5ncyBhcmUgaGFuZGxlZCBtdWNoIG1vcmUgY29uc2lzdGVu
dGx5LCBhbmQgYQ0KbG90IG9mIHNsb3BweSBjb2Rpbmcgd2lsbCBub3cgZmFp
bCAob3IgZ2l2ZSBkaWZmZXJlbnQgYW5zd2VycykuDQoNCi0gSWYgeW91IG1l
YW50ICJOQSIgdG8gaW5kaWNhdGUgdGhlIG1pc3NpbmcgdmFsdWUsIHVzZQ0K
ICBhcy5jaGFyYWN0ZXIoTkEpIChvciBqdXN0IE5BIHdoZXJlIGNvZXJjaW9u
IHdpbGwgb2NjdXIuKQ0KDQotIFRoZSB0ZXN0IHggPT0gIk5BIiBzaG91bGQg
YmUgcmV3cml0dGVuIGFzIGlzLm5hKHgpLg0KDQotIElmIG1pc3NpbmcgdmFs
dWVzIGNhbiBvY2N1ciwgZG8gbm90IHVzZSB4ID09ICJzb21lIHN0cmluZyIu
IA0KICBBIHN1aXRhYmxlIHJlcGxhY2VtZW50IGlzIHggJWluJSAic29tZSBz
dHJpbmciLg0KDQotIENvZGUgc3VjaCBhcyBhbGwobmFtZXMoeCkgPT0gYW5z
Lm5hbWVzKSkgKGZyb20gYXBwbHkpIHdpbGwgZmFpbCBpZg0KICBhbnkgbmFt
ZSBtaWdodCBiZSBtaXNzaW5nLiAgVXNlIGlkZW50aWNhbChuYW1lcyh4KSwg
YW5zLm5hbWVzKQ0KICBpbnN0ZWFkICh3aGljaCBpbmNpZGVudGFsbHkgaXMg
bW9yZSBlZmZpY2llbnQpLg0KDQpBbHRob3VnaCBhbGwgdGhlIGV4YW1wbGVz
IGhhdmUgdXNlZCA9PSwgdGhlIHNhbWUgY29uc2lkZXJhdGlvbnMgYXBwbHkg
dG8NCnRoZSBvdGhlciBsb2dpY2FsIG9wZXJhdG9ycyAhPSA8IDw9ID4gPj0u
DQoNClRoZSB3YXkgbWlzc2luZyBzdHJpbmdzIHByaW50IGhhcyBiZWVuIGFs
dGVyZWQsIHNvIHRlc3Qgb3V0cHV0IG1heQ0KbmVlZCB0byBiZSB1cGRhdGVk
Lg0KDQoNClNhdmluZyBkYXRhDQotLS0tLS0tLS0tLQ0KDQpUaGUgcmVjb21t
ZW5kZWQgd2F5IHRvIGRpc3RyaWJ1dGUgZGF0YSBoYXMgYmVlbiB2aWEgIC5y
ZGEgZmlsZXMNCm9idGFpbmVkIHdpdGggc2F2ZShhc2NpaT1UUlVFKS4gIEFz
IGZyb20gMS41LjAgd2UgY2FuIGFzc3VtZSB0aGF0DQpYRFIgbG9hZGluZyBh
bmQgY29tcHJlc3Npb24gYXJlIGF2YWlsYWJsZSBvbiBhbGwgcGxhdGZvcm1z
Lg0KDQpUaGUgZGVmYXVsdCBzYXZlIGZvcm1hdCB3YXMgY2hhbmdlZCBpbiAx
LjQuMC4gIFdlIG5vdyByZWNvbW1lbmQgdGhhdA0KZGF0YSBpcyBkaXN0cmli
dXRlZCBpbiB2ZXJzaW9uIDIgWERSIGZvcm1hdCBmaWxlcyAoYXMgZ2l2ZW4g
YnkNCnNhdmUoKSBpbiAxLjQuMCBvciBsYXRlciksICphbmQqIHRoYXQgbGFy
Z2UgZGF0YSBmaWxlcyBhcmUgZGlzdHJpYnV0ZWQNCmluIGNvbXByZXNzZWQg
Zm9ybWF0IChzYXZlKGNvbXByZXNzPVRSVUUpKS4NCg0KDQpCTEFTIGxpYnJh
cmllcw0KLS0tLS0tLS0tLS0tLS0NCg0KUiBjYW4gYmUgY29uZmlndXJlZCB0
byB1c2UgZWloZXIgYSBidWlsdC1pbiBzdWJzZXQgb2YgQkxBUyByb3V0aW5l
cyBvciBhbg0KZW5oYW5jZWQgQkxBUyBsaWJyYXJ5IHN1Y2ggYXMgQVRMQVMg
b3Igc3VucGVyZi4NCg0KQXMgZnJvbSAxLjUuMCB0aGUgc3Vic2V0IGhhcyBi
ZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgYWxsIHRoZSBCTEFTDQpyb3V0aW5l
cyBuZWVkZWQgZm9yIGRvdWJsZS1wcmVjaXNpb24gY2FsY3VsYXRpb25zLiAg
VG8gYWxsb3cgdGhvc2UNClIgaW5zdGFsbGF0aW9ucyB3aXRoIGFuIGVuaGFu
Y2VkIEJMQVMgdG8gYmVuZWZpdCBmcm9tIHRoZW0sIHdlIHVyZ2UNCnBhY2th
Z2UgbWFpbnRhaW5lcnMgKm5vdCogdG8gaW5jbHVkZSBjb3BpZXMgb2YgdGhl
IGluY2x1ZGVkIEJMQVMNCnJvdXRpbmVzIGluIHRoZWlyIHBhY2thZ2VzLg0K
DQpBbHNvLCBhbGwgcGFja2FnZXMgdGhhdCBtYWtlIHVzZSBvZiBCTEFTIHJv
dXRpbmVzIG11c3QgaW5jbHVkZSAkKEJMQVNfTElCUykNCmluIHNyYy9NYWtl
dmFycywgbW9zdCBzaW1wbHkgYXMgdGhlIGxpbmUNCg0KUEtHX0xJQlM9JChC
TEFTX0xJQlMpDQoNCklmIHBvc3NpYmxlLCB0ZXN0IHN1Y2ggcGFja2FnZXMg
Ym90aCB3aXRoIGFuZCB3aXRob3V0IGFuIGVuaGFuY2VkIEJMQVMNCmluIHVz
ZS4gIE5vdGUgdGhhdCB0aGUgQ1JBTiBjaGVja3MgYXJlIHJ1biBvbiBhIHN5
c3RlbSB3aXRob3V0IGFuDQplbmhhbmNlZCBCTEFTIGFuZCBzbyBkbyBub3Qg
Y2hlY2sgdGhpcyBwb2ludC4NCg0KDQpRQSBzdHJpY3RuZXNzDQotLS0tLS0t
LS0tLS0tDQoNClIgQ01EIGNoZWNrIGluIDEuNS4wIGlzIG1vcmUgc3RyaW5n
ZW50OiBpdCBub3cgYWxzbyBmYWlscyBvbiBtYWxmb3JtZWQNCidEZXBlbmRz
JyBhbmQgJ01haW50YWluZXInIGZpZWxkcyBpbiAnREVTQ1JJUFRJT04nIGZp
bGVzLCBhbmQgb24NCnVuYmFsYW5jZWQgYnJhY2VzIGluIFJkIGZpbGVzICh3
aGljaCBpbmRpY2F0ZSBSZCBzeW50YXggZXJyb3JzKS4NCg0KDQphcHBseSBz
cGVlZHVwcw0KLS0tLS0tLS0tLS0tLS0NCg0KRnVuY3Rpb25zIHJvd1N1bXMs
IGNvbFN1bXMsIHJvd01lYW5zIGFuZCBjb2xNZWFucyBwcm92aWRlIGNvbnNp
ZGVyYWJsZQ0KcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzIG92ZXIgYXBwbHko
WCwgZiwgc3VtKSBldGMuDQoNCg0KQ2hhbmdlcyBpbiB0aGUgdGNsdGsgcGFj
a2FnZQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpBIG5ldyB0
Y2xPYmogY2xhc3MsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJuYWwgImR1YWwt
cG9ydGVkIiBvYmplY3QNCnN0cnVjdHVyZXMgaW4gdGhlIFRjbCBDIGludGVy
ZmFjZSwgaGFzIGJlZW4gaW50cm9kdWNlZC4NCg0KVGhlIHJldHVybiB2YWx1
ZSBmcm9tIG1hbnkgY29tbWFuZHMgaGFzIGJlZW4gY2hhbmdlZCB0byBiZSBh
biBvYmplY3QNCm9mIGNsYXNzIHRjbE9iai4gV2hlcmV2ZXIgeW91IGFyZSBj
dXJyZW50bHkgdXNpbmcgdGhlIHJldHVybiB2YWx1ZSwNCnlvdSB3aWxsIG5l
ZWQgdG8gd3JhcCB0aGUgY2FsbCBpbiBhIHRjbHZhbHVlKCkgY29uc3RydWN0
IGluIG9yZGVyIHRvDQpnZXQgYXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlv
bi4gSG93ZXZlciwgbm90aWNlIHRoYXQgYXMuY2hhcmFjdGVyLA0KYXMuaW50
ZWdlciwgYW5kIGFzLmRvdWJsZSBjYW4gbm93IGV4dHJhY3QgdmVjdG9ycyBk
aXJlY3RseSBmcm9tIHRjbE9iag0Kb2JqZWN0cyBzbyB0aGF0IHBhcnNpbmcg
b2YgdGhlIFRjbCBzdHJpbmcgY2FuIGJlIGF2b2lkZWQgaW4gbWFueQ0KY2Fz
ZXMuDQoNCkFsc28gdGNsVmFyIG9iamVjdHMgY2FuIGJlIGFjY2Vzc2VzIGFz
IHRjbE9iaiBvYmplY3RzLiBUaGlzIHNob3VsZCBub3QNCmJyZWFrIGV4aXN0
aW5nIGNvZGUsIGJ1dCBpdCBhbGxvd3Mgc3Vic3RhbnRpYWwgc2ltcGxpZmlj
YXRpb24gaW4gdGhlDQpoYW5kbGluZyBvZiBlLmcuIGxpc3Rib3ggY29udGVu
dHMuDQoNCg==
--27492116-1041555239-1018006517=:10366--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 16:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 16:13:31 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <200202270816.JAA23941@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>

Berwin,

Thank you for this.

Unfortunately, although the analysis is mainly correct, but the solution
has almost as many problems as the current state.  Suppose pivoting
occurs. Then for the internal code, coef needs to contain zeroes at the
omitted cols. But you have

coef <- coefold <- start  # initialise coef here in order to
                          # be able to subset it below

so it will contain whatever start had for those cols.  Further, the test
        if (is.na(dev) || any(is.na(coef))) {
is followed by

                coef <- (coef + coefold)/2
                eta <- drop(x %*% coef)

which will ensure that if any NAs occur in coef, they will be propogated
through eta.

A related point is that you assume that coefold <- rep(0,nvars) is
a valid starting value to shrink towards, but that need not be the case.
I think one can only shrink towards the previous value after the first
iteration.  (Only if start is specified is the validity checked:
an initial etastart or mustart is normally not in the space of
possible values under the model.)

There seems to me no point to test if `start' is valid if it is going to
be unused (as it will be if a valid eta is specified), so I believe the
original test logic is the correct one, not the unravelled one.

There are clearly problems in the glm.fit code, but in the absence of a
bug that has actually bitten someone, it seems only worth changing if we
have a 100% watertight solution.  As I said to Brett Presnell, I believe
the time would be better spent re-writing glm ab initio.

Also, the code you submitted had all the comments removed, and so was much
harder to read than the code in glm.R, as well as being subtly
reformatted.

Brian


On Wed, 27 Feb 2002 berwin@maths.uwa.edu.au wrote:

> G'day all,
>
> I had a look at the GLM code of R (1.4.1) and I believe that there are
> problems with the function "glm.fit" that may bite in rare
> circumstances.  Note, I have no data set with which I ran into
> trouble.  This report is solely based on having a look at the code.
>
> Below I append a listing of the glm.fit function as produced by my
> system.  I have added line numbers so that I can easily refer to the
> code that is, in my opinion, problematic.  I also append a modified
> version that, hopefully, solves these problems.  At least on
> "example(glm)" both functions produce the same output (if the random
> number generator is set to the same seed).
>
> Short summary: I envisage problems with glm.fit if two conditions are
> met simultaneously.  Namely, (1) the design matrix is such that the QR
> algorithm used in the weighted least squares (WLS) step has to pivot
> columns (lines 81-86) and (2) during the iterations the step size has
> to be truncated (either lines 98-114 or lines 115-130).
>
> More details:
> In line 90, the variables "start" and "coef" are set to the
> coefficients of the WLS and "start" is then permuted (line 91) to take
> a possible pivoting of the QR algorithm into account.  Note that
> "coef" is not permutated.   Also, since the weights in the iterative
> weighted least squares algorithm change in each iteration (lines
> 60-139) it is theoretically possible that on some executions of this
> chunk pivoting occurs and on others there is no pivoting.
>
> Hoever, if the new coefficients are unsuitable and either the block at
> lines 98-114 or lines 115-130 is entered, then "start" is modified by
> shrinking it toward "coefold".  There are two problems:
> 1) If this happens the first time the loop in lines 60-139 is executed,
>    then coefold is initialised to the value of "start" that was passed
> down to the routine (line 58).  This might well be NULL (usually is?).
> In this case line 105 and line 122 would produce a new "start" which
> is numeric(0) and glm.fit would stop execution pretty soon thereafter.
> 2) If it happens during a later execution of the loop in lines 60-139,
>    then "coefold" was set to the value "coef" of the prior execution
> of the loop (line 137).  Depending on whether either of the code
> chunks at lines 98-114 or lines 115-130 have been executed on that
> previous occastion, "coefold" may or may not be permuted to the same
> order as "start" in this moment.  Hence, it could happen that "start"
> is shrunken towards something that doesn't make sense in line 105 or
> line 122.
>
> Relating to point 2) above.  Theoretically, during the main loop
> (lines 60-139) either of the chunks in lines 98-114 or lines 115-130
> could be entered.  In these chunks "coef" is set to the shrunken
> "start" at the end (line 111 or line 126).  If, with the ``deviance
> for the shrunken "start"'' the convergence criterion in line 131 is
> fulfilled, then the main loop would finish.  In other words, at line
> 140 there is no way to tell whether "coef" is in the order of
> "fit$coefficients" or has been permutated to have the same order as
> "start".  In the later case, the additional permutation in line 157
> would garble the solution.
>
> I hope that the revised version that I append below, works around all
> these potential problems without breaking anything.  As I said, I ran
> "example(glm)" with the revised version and got the same results.  But
> I guess you guys have far more exhaustive tests and may want to do
> some further test to ensure that nothing is broken.
>
> The revised version also makes some cosmetic changes that reflect my
> preferences :-) :
> 1) Given the default values of the parameters "weights" and "offset" I
>    was surprised about the tests in lines 17 and 19.  They seemed
> superfluous.  Until I noticed that "glm" can call "glm.fit" with
> actual arguments for these parameters that are NULL.  Hence, I suggest
> that the default values for these arguments should be NULL.  This
> makes it easier to understand the code of "glm.fit" (if one looks only
> at "glm.fit" and not at all the code "glm", "glm.fit" &c
> simultaneously).
> 2) As mentioned above, "coefold" may be initialised to NULL in line 58
>    if the parameter "start" is not specified.  (Which typically would be
> the case?)  But furthermore, in lines 44-53 the test for the parameter
> "start" is mangled into the test for the parameter "etastart".  If
> "etastart" is not specified but a bad "start" (not the correct
> length), the bad "start" would be caught.  But if a valid "etastart"
> is specified, then a bad "start" would not be caught since those tests
> are not executed.  (Are there users that specify both?).  Anyway, I
> have untangled those sanity check.  Also to get a clean initialisation
> for "coefold".
> 3) Given that the column names of fit$qr are (correctly) set in line
>    171, I didn't see the purpose of line 155.  That line anyhow sets
> the column names wrongly if pivoting has occured.  So I deleted that
> line.
>
> That's all for now.  Thanks for the great package and I hope that this
> bug report will be useful.
>
> Cheers,
>
>         Berwin
>
> ========================= original glm.fit =========================
>   1  glm.fit <-
>   2  function (x, y, weights = rep(1, nobs), start = NULL, etastart = NULL,
>   3      mustart = NULL, offset = rep(0, nobs), family = gaussian(),
>   4      control = glm.control(), intercept = TRUE)
>   5  {
>   6      x <- as.matrix(x)
>   7      xnames <- dimnames(x)[[2]]
>   8      ynames <- names(y)
>   9      conv <- FALSE
>  10      nobs <- NROW(y)
>  11      nvars <- NCOL(x)
>  12      if (nvars == 0) {
>  13          cc <- match.call()
>  14          cc[[1]] <- as.name("glm.fit.null")
>  15          return(eval(cc, parent.frame()))
>  16      }
>  17      if (is.null(weights))
>  18          weights <- rep(1, nobs)
>  19      if (is.null(offset))
>  20          offset <- rep(0, nobs)
>  21      variance <- family$variance
>  22      dev.resids <- family$dev.resids
>  23      aic <- family$aic
>  24      linkinv <- family$linkinv
>  25      mu.eta <- family$mu.eta
>  26      if (!is.function(variance) || !is.function(linkinv))
>  27          stop("illegal `family' argument")
>  28      valideta <- family$valideta
>  29      if (is.null(valideta))
>  30          valideta <- function(eta) TRUE
>  31      validmu <- family$validmu
>  32      if (is.null(validmu))
>  33          validmu <- function(mu) TRUE
>  34      if (is.null(mustart)) {
>  35          eval(family$initialize)
>  36      }
>  37      else {
>  38          mukeep <- mustart
>  39          eval(family$initialize)
>  40          mustart <- mukeep
>  41      }
>  42      if (NCOL(y) > 1)
>  43          stop("y must be univariate unless binomial")
>  44      eta <- if (!is.null(etastart) && valideta(etastart))
>  45          etastart
>  46      else if (!is.null(start))
>  47          if (length(start) != nvars)
>  48              stop(paste("Length of start should equal", nvars,
>  49                  "and correspond to initial coefs for", deparse(xnames)))
>  50          else as.vector(if (NCOL(x) == 1)
>  51              x * start
>  52          else x %*% start)
>  53      else family$linkfun(mustart)
>  54      mu <- linkinv(eta)
>  55      if (!(validmu(mu) && valideta(eta)))
>  56          stop("Can't find valid starting values: please specify some")
>  57      devold <- sum(dev.resids(y, mu, weights))
>  58      coefold <- start
>  59      boundary <- FALSE
>  60      for (iter in 1:control$maxit) {
>  61          good <- weights > 0
>  62          varmu <- variance(mu)[good]
>  63          if (any(is.na(varmu)))
>  64              stop("NAs in V(mu)")
>  65          if (any(varmu == 0))
>  66              stop("0s in V(mu)")
>  67          mu.eta.val <- mu.eta(eta)
>  68          if (any(is.na(mu.eta.val[good])))
>  69              stop("NAs in d(mu)/d(eta)")
>  70          good <- (weights > 0) & (mu.eta.val != 0)
>  71          if (all(!good)) {
>  72              conv <- FALSE
>  73              warning(paste("No observations informative at iteration",
>  74                  iter))
>  75              break
>  76          }
>  77          z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>  78          w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>  79          ngoodobs <- as.integer(nobs - sum(!good))
>  80          ncols <- as.integer(1)
>  81          fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>  82              p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>  83                  control$epsilon/1000), coefficients = numeric(nvars),
>  84              residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>  85              rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>  86              work = double(2 * nvars), PACKAGE = "base")
>  87          if (nobs < fit$rank)
>  88              stop(paste("X matrix has rank", fit$rank, "but only",
>  89                  nobs, "observations"))
>  90          start <- coef <- fit$coefficients
>  91          start[fit$pivot] <- coef
>  92          eta <- drop(x %*% start)
>  93          mu <- linkinv(eta <- eta + offset)
>  94          dev <- sum(dev.resids(y, mu, weights))
>  95          if (control$trace)
>  96              cat("Deviance =", dev, "Iterations -", iter, "\n")
>  97          boundary <- FALSE
>  98          if (is.na(dev) || any(is.na(coef))) {
>  99              warning("Step size truncated due to divergence")
> 100              ii <- 1
> 101              while ((is.na(dev) || any(is.na(start)))) {
> 102                  if (ii > control$maxit)
> 103                    stop("inner loop 1; can't correct step size")
> 104                  ii <- ii + 1
> 105                  start <- (start + coefold)/2
> 106                  eta <- drop(x %*% start)
> 107                  mu <- linkinv(eta <- eta + offset)
> 108                  dev <- sum(dev.resids(y, mu, weights))
> 109              }
> 110              boundary <- TRUE
> 111              coef <- start
> 112              if (control$trace)
> 113                  cat("New Deviance =", dev, "\n")
> 114          }
> 115          if (!(valideta(eta) && validmu(mu))) {
> 116              warning("Step size truncated: out of bounds.")
> 117              ii <- 1
> 118              while (!(valideta(eta) && validmu(mu))) {
> 119                  if (ii > control$maxit)
> 120                    stop("inner loop 2; can't correct step size")
> 121                  ii <- ii + 1
> 122                  start <- (start + coefold)/2
> 123                  mu <- linkinv(eta <- eta + offset)
> 124              }
> 125              boundary <- TRUE
> 126              coef <- start
> 127              dev <- sum(dev.resids(y, mu, weights))
> 128              if (control$trace)
> 129                  cat("New Deviance =", dev, "\n")
> 130          }
> 131          if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
> 132              conv <- TRUE
> 133              break
> 134          }
> 135          else {
> 136              devold <- dev
> 137              coefold <- coef
> 138          }
> 139      }
> 140      if (!conv)
> 141          warning("Algorithm did not converge")
> 142      if (boundary)
> 143          warning("Algorithm stopped at boundary value")
> 144      eps <- 10 * .Machine$double.eps
> 145      if (family$family == "binomial") {
> 146          if (any(mu > 1 - eps) || any(mu < eps))
> 147              warning("fitted probabilities numerically 0 or 1 occurred")
> 148      }
> 149      if (family$family == "poisson") {
> 150          if (any(mu < eps))
> 151              warning("fitted rates numerically 0 occurred")
> 152      }
> 153      if (fit$rank != nvars) {
> 154          coef[seq(fit$rank + 1, nvars)] <- NA
> 155          dimnames(fit$qr) <- list(NULL, xnames)
> 156      }
> 157      coef[fit$pivot] <- coef
> 158      xxnames <- xnames[fit$pivot]
> 159      residuals <- rep(NA, nobs)
> 160      residuals[good] <- z - (eta - offset)[good]
> 161      fit$qr <- as.matrix(fit$qr)
> 162      nr <- min(sum(good), nvars)
> 163      if (nr < nvars) {
> 164          Rmat <- diag(nvars)
> 165          Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
> 166      }
> 167      else Rmat <- fit$qr[1:nvars, 1:nvars]
> 168      Rmat <- as.matrix(Rmat)
> 169      Rmat[row(Rmat) > col(Rmat)] <- 0
> 170      names(coef) <- xnames
> 171      colnames(fit$qr) <- xxnames
> 172      dimnames(Rmat) <- list(xxnames, xxnames)
> 173      names(residuals) <- ynames
> 174      names(mu) <- ynames
> 175      names(eta) <- ynames
> 176      wt <- rep(0, nobs)
> 177      wt[good] <- w^2
> 178      names(wt) <- ynames
> 179      names(weights) <- ynames
> 180      names(y) <- ynames
> 181      names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
> 182          fit$rank))
> 183      wtdmu <- if (intercept)
> 184          sum(weights * y)/sum(weights)
> 185      else linkinv(offset)
> 186      nulldev <- sum(dev.resids(y, wtdmu, weights))
> 187      n.ok <- nobs - sum(weights == 0)
> 188      nulldf <- n.ok - as.integer(intercept)
> 189      resdf <- n.ok - fit$rank
> 190      aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
> 191      list(coefficients = coef, residuals = residuals, fitted.values = mu,
> 192          effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
> 193              "rank", "qraux", "pivot", "tol")], family = family,
> 194          linear.predictors = eta, deviance = dev, aic = aic.model,
> 195          null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
> 196          df.residual = resdf, df.null = nulldf, y = y, converged = conv,
> 197          boundary = boundary)
> 198  }
> ========================= modified glm.fit =========================
> glm.fit <-
> function (x, y, weights = NULL, start = NULL, etastart = NULL,
>     mustart = NULL, offset = NULL, family = gaussian(),
>     control = glm.control(), intercept = TRUE)
> {
>     x <- as.matrix(x)
>     xnames <- dimnames(x)[[2]]
>     ynames <- names(y)
>     conv <- FALSE
>     nobs <- NROW(y)
>     nvars <- NCOL(x)
>     if (nvars == 0) {
>         cc <- match.call()
>         cc[[1]] <- as.name("glm.fit.null")
>         return(eval(cc, parent.frame()))
>     }
>     if (is.null(weights))
>         weights <- rep(1, nobs)
>     if (is.null(offset))
>         offset <- rep(0, nobs)
>     variance <- family$variance
>     dev.resids <- family$dev.resids
>     aic <- family$aic
>     linkinv <- family$linkinv
>     mu.eta <- family$mu.eta
>     if (!is.function(variance) || !is.function(linkinv))
>         stop("illegal `family' argument")
>     valideta <- family$valideta
>     if (is.null(valideta))
>         valideta <- function(eta) TRUE
>     validmu <- family$validmu
>     if (is.null(validmu))
>         validmu <- function(mu) TRUE
>     if (is.null(mustart)) {
>         eval(family$initialize)
>     }
>     else {
>         mukeep <- mustart
>         eval(family$initialize)
>         mustart <- mukeep
>     }
>     if (NCOL(y) > 1)
>         stop("y must be univariate unless binomial")
>     if (!is.null(start)){
>       if (length(start) != nvars)
>         stop(paste("Length of start should equal", nvars,
>                    "and correspond to initial coefs for", deparse(xnames)))
>       coef <- coefold <- start  # initialise coef here in order to
>                                 # be able to subset it below
>     }
>     else
>       coef <- coefold <- rep(0,nvars)
>     eta <- if (!is.null(etastart) && valideta(etastart))
>       etastart
>     else if (!is.null(start))
>       as.vector(if (NCOL(x) == 1)
>                 x * start
>       else x %*% start)
>     else family$linkfun(mustart)
>     mu <- linkinv(eta)
>     if (!(validmu(mu) && valideta(eta)))
>         stop("Can't find valid starting values: please specify some")
>     devold <- sum(dev.resids(y, mu, weights))
>     boundary <- FALSE
>     for (iter in 1:control$maxit) {
>         good <- weights > 0
>         varmu <- variance(mu)[good]
>         if (any(is.na(varmu)))
>             stop("NAs in V(mu)")
>         if (any(varmu == 0))
>             stop("0s in V(mu)")
>         mu.eta.val <- mu.eta(eta)
>         if (any(is.na(mu.eta.val[good])))
>             stop("NAs in d(mu)/d(eta)")
>         good <- (weights > 0) & (mu.eta.val != 0)
>         if (all(!good)) {
>             conv <- FALSE
>             warning(paste("No observations informative at iteration",
>                 iter))
>             break
>         }
>         z <- (eta - offset)[good] + (y - mu)[good]/mu.eta.val[good]
>         w <- sqrt((weights[good] * mu.eta.val[good]^2)/variance(mu)[good])
>         ngoodobs <- as.integer(nobs - sum(!good))
>         ncols <- as.integer(1)
>         fit <- .Fortran("dqrls", qr = x[good, ] * w, n = as.integer(ngoodobs),
>             p = nvars, y = w * z, ny = ncols, tol = min(1e-07,
>                 control$epsilon/1000), coefficients = numeric(nvars),
>             residuals = numeric(ngoodobs), effects = numeric(ngoodobs),
>             rank = integer(1), pivot = 1:nvars, qraux = double(nvars),
>             work = double(2 * nvars), PACKAGE = "base")
>         if (nobs < fit$rank)
>             stop(paste("X matrix has rank", fit$rank, "but only",
>                 nobs, "observations"))
>         coef[fit$pivot] <- fit$coefficients
>         eta <- drop(x %*% coef)
>         mu <- linkinv(eta <- eta + offset)
>         dev <- sum(dev.resids(y, mu, weights))
>         if (control$trace)
>             cat("Deviance =", dev, "Iterations -", iter, "\n")
>         boundary <- FALSE
>         if (is.na(dev) || any(is.na(coef))) {
>             warning("Step size truncated due to divergence")
>             ii <- 1
>             while ((is.na(dev) || any(is.na(coef)))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 1; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 eta <- drop(x %*% coef)
>                 mu <- linkinv(eta <- eta + offset)
>                 dev <- sum(dev.resids(y, mu, weights))
>             }
>             boundary <- TRUE
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (!(valideta(eta) && validmu(mu))) {
>             warning("Step size truncated: out of bounds.")
>             ii <- 1
>             while (!(valideta(eta) && validmu(mu))) {
>                 if (ii > control$maxit)
>                   stop("inner loop 2; can't correct step size")
>                 ii <- ii + 1
>                 coef <- (coef + coefold)/2
>                 mu <- linkinv(eta <- eta + offset)
>             }
>             boundary <- TRUE
>             dev <- sum(dev.resids(y, mu, weights))
>             if (control$trace)
>                 cat("New Deviance =", dev, "\n")
>         }
>         if (abs(dev - devold)/(0.1 + abs(dev)) < control$epsilon) {
>             conv <- TRUE
>             break
>         }
>         else {
>             devold <- dev
>             coefold <- coef
>         }
>     }
>     if (!conv)
>         warning("Algorithm did not converge")
>     if (boundary)
>         warning("Algorithm stopped at boundary value")
>     eps <- 10 * .Machine$double.eps
>     if (family$family == "binomial") {
>         if (any(mu > 1 - eps) || any(mu < eps))
>             warning("fitted probabilities numerically 0 or 1 occurred")
>     }
>     if (family$family == "poisson") {
>         if (any(mu < eps))
>             warning("fitted rates numerically 0 occurred")
>     }
>     if (fit$rank != nvars) {
>         coef[fit$pivot][seq(fit$rank + 1, nvars)] <- NA
>     }
>     xxnames <- xnames[fit$pivot]
>     residuals <- rep(NA, nobs)
>     residuals[good] <- z - (eta - offset)[good]
>     fit$qr <- as.matrix(fit$qr)
>     nr <- min(sum(good), nvars)
>     if (nr < nvars) {
>         Rmat <- diag(nvars)
>         Rmat[1:nr, 1:nvars] <- fit$qr[1:nr, 1:nvars]
>     }
>     else Rmat <- fit$qr[1:nvars, 1:nvars]
>     Rmat <- as.matrix(Rmat)
>     Rmat[row(Rmat) > col(Rmat)] <- 0
>     names(coef) <- xnames
>     colnames(fit$qr) <- xxnames
>     dimnames(Rmat) <- list(xxnames, xxnames)
>     names(residuals) <- ynames
>     names(mu) <- ynames
>     names(eta) <- ynames
>     wt <- rep(0, nobs)
>     wt[good] <- w^2
>     names(wt) <- ynames
>     names(weights) <- ynames
>     names(y) <- ynames
>     names(fit$effects) <- c(xxnames[seq(fit$rank)], rep("", sum(good) -
>         fit$rank))
>     wtdmu <- if (intercept)
>         sum(weights * y)/sum(weights)
>     else linkinv(offset)
>     nulldev <- sum(dev.resids(y, wtdmu, weights))
>     n.ok <- nobs - sum(weights == 0)
>     nulldf <- n.ok - as.integer(intercept)
>     resdf <- n.ok - fit$rank
>     aic.model <- aic(y, n, mu, weights, dev) + 2 * fit$rank
>     list(coefficients = coef, residuals = residuals, fitted.values = mu,
>         effects = fit$effects, R = Rmat, rank = fit$rank, qr = fit[c("qr",
>             "rank", "qraux", "pivot", "tol")], family = family,
>         linear.predictors = eta, deviance = dev, aic = aic.model,
>         null.deviance = nulldev, iter = iter, weights = wt, prior.weights = weights,
>         df.residual = resdf, df.null = nulldf, y = y, converged = conv,
>         boundary = boundary)
> }
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr  5 16:28:03 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri, 5 Apr 2002 17:28:03 +0200 (MET DST)
Subject: [Rd] [DOC] as.call (PR#1437)
Message-ID: <200204051528.RAA09753@pubhealth.ku.dk>


While I remember this:

The help page for call/as.call/is.call says

     It is not possible to coerce objects to mode call (objects either
     are calls or they are not calls).  `as.call' returns its argument
     if it is a call and otherwise terminates with an error message.

which actually has been untrue for quite a while, e.g.:

> cl<-as.call(c(ls, list("package:base", pattern="obj")))
> eval(cl)
[1] "is.object"    "objects"      "object.size"  "objWithClass"

Someone changed the code without editing the documentation. I know who
the guilty party is and will force him to rewrite the help entry in
due course...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr  5 17:12:47 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 5 Apr 2002 17:12:47 +0100 (BST)
Subject: [Rd] Bug in glm.fit? (PR#1331)
In-Reply-To: <Pine.LNX.4.31.0204051555340.13441-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204051700370.13566-100000@gannet.stats>

On Fri, 5 Apr 2002 ripley@stats.ox.ac.uk wrote:

> Berwin,
>
> Thank you for this.
>
> Unfortunately, although the analysis is mainly correct, but the solution
> has almost as many problems as the current state.  Suppose pivoting
> occurs. Then for the internal code, coef needs to contain zeroes at the
> omitted cols. But you have
>
> coef <- coefold <- start  # initialise coef here in order to
>                           # be able to subset it below
>
> so it will contain whatever start had for those cols.  Further, the test

Sorry, that's wrong as the innards of dqrls (which I have now read) will
do the zeroing.

[...]

However, there's more:

> >             while (!(valideta(eta) && validmu(mu))) {
> >                 if (ii > control$maxit)
> >                   stop("inner loop 2; can't correct step size")
> >                 ii <- ii + 1
> >                 coef <- (coef + coefold)/2
> >                 mu <- linkinv(eta <- eta + offset)
> >             }

How can that loop work?  eta is just incremented by the offset.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Sat Apr  6 11:50:53 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Sat, 6 Apr 2002 12:50:53 +0200 (MET DST)
Subject: [Rd] file.info()$isdir is not TRUE (PR#1439)
Message-ID: <200204061050.MAA12036@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: R v1.4.1
OS: WinMe / Solaris 8
Submission from: (NULL) (217.208.14.137)


R -vanilla

> info <- file.info("C:/Windows/regedit.exe")
> info$isdir
[1] FALSE
> info$isdir == FALSE
[1] TRUE

But:

> info <- file.info("C:/Windows")
> info$isdir
[1]TRUE           <<< Note the missing space!
> info$isdir == TRUE
[1] FALSE
> is.logical(info$isdir)
[1] TRUE
> as.logical(info$isdir) == TRUE
[1] FALSE
> as.logical(as.character(info$isdir)) == TRUE
[1] TRUE

I get the same behaviour on Solaris 8.

Best

Henrik Bengtsson



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 20:28:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 11:28:08 -0800
Subject: [Rd] packages in OS X
Message-ID: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>

=======================================================================
Simple CRAN packages which do not compile without modifications (all 
others do)
=======================================================================
     -- akima
/usr/bin/ld: multiple definitions of symbol _idlc_

     -- fracdiff
/usr/bin/ld: multiple definitions of symbol _gammfd_
(and others)

     -- odesolve

     -- princurve
    lamix:
Error on line 116: Declaration error for v: adjustable dimension on 
non-argument

    -- splancs
/usr/bin/ld: multiple definitions of symbol _bounds_

     -- wle
  mleaic:
Error on line 229: Declaration error for work: adjustable dimension on 
non-argument

   -- subselect
configure: error: R was configured without a FORTRAN compiler
ERROR: configuration failed for package `subselect'

The multiple defined symbols are a well known OS X problem. There are ad 
hoc fixes
using linker flags, but the best way to fix this is to use extern in the 
source code (although
almost all these packages use f2c to translate the fortran into c). The 
"adjustable dimension"
error is possibly an f2c problem. Ans subselect does not recognize f2c 
as a fortran
compiler.
=======================================================================
Complicated/interface  packages which compile (almost) out-of-the-box
=======================================================================
RPgSQL
RmSQL
RMySQL
gtk
RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
RSPerl
XML (this gives a multiple defined symbol for xmlParserError, which is
defined in Utils.c but also in libxml.dylib -- I commented out the 
routine
in Utils.c, but this may be a bit heavy handed).
Rpy
rpvm
RObjectTables
=======================================================================
CRAN packages I have not tried yet (because I don't have/use the things 
they interface to)
=======================================================================
RODBC
ROracle
RQuantlib
RSQLite
=======================================================================
CRAN packages which compile and install, but do not work

 > library("Matrix")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
         unable to load shared library 
"/sw/lib/R/library/Matrix/libs/Matrix.so":
   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
_ATL_cGetNB
_ATL_dGetNB
_ATL_sGetNB
_ATL_zGetNB
_cblas_dgemm
_cblas_dscal
_cblas_dswap
_cblas_dsyrk
_cblas_dtrsm
_cblas_idamax
_dsymv_
Error in library("Matrix") : .First.lib failed

If I use nm on Matrix.so, all these symbols are undefined.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Apr  6 21:29:01 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 6 Apr 2002 12:29:01 -0800
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <EE9135D6-499C-11D6-8D4F-000393860F3C@stat.ucla.edu>

I compiled and installed fracdiff, akima, splancs and odesolve by adding 
the
-m linker flag when foo.so is build.

I compiled and installed princurve and wle by removing nasty end-of-file
characters from some of the fortran sources

There are no solutions for the subselect and Matrix problems yet.

On Saturday, April 6, 2002, at 11:28 AM, Jan de Leeuw wrote:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>     -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_
>
>     -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)
>
>     -- odesolve
>
>     -- princurve
>    lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument
>
>    -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_
>
>     -- wle
>  mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument
>
>   -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'
>
> The multiple defined symbols are a well known OS X problem. There are 
> ad hoc fixes
> using linker flags, but the best way to fix this is to use extern in 
> the source code (although
> almost all these packages use f2c to translate the fortran into c). The 
> "adjustable dimension"
> error is possibly an f2c problem. Ans subselect does not recognize f2c 
> as a fortran
> compiler.
> =======================================================================
> Complicated/interface  packages which compile (almost) out-of-the-box
> =======================================================================
> RPgSQL
> RmSQL
> RMySQL
> gtk
> RGtk (although we need to add a typedef for ulong to gtkAccessors.c)
> RSPerl
> XML (this gives a multiple defined symbol for xmlParserError, which is
> defined in Utils.c but also in libxml.dylib -- I commented out the 
> routine
> in Utils.c, but this may be a bit heavy handed).
> Rpy
> rpvm
> RObjectTables
> =======================================================================
> CRAN packages I have not tried yet (because I don't have/use the things 
> they interface to)
> =======================================================================
> RODBC
> ROracle
> RQuantlib
> RSQLite
> =======================================================================
> CRAN packages which compile and install, but do not work
>
> > library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>   dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed
>
> If I use nm on Matrix.so, all these symbols are undefined.
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sat Apr  6 23:09:19 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 7 Apr 2002 00:09:19 +0200
Subject: [Rd] packages in OS X
In-Reply-To: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
References: <6D12405D-4994-11D6-9787-000393860F3C@stat.ucla.edu>
Message-ID: <15535.29199.962752.731527@mithrandir.hornik.net>

>>>>> Jan de Leeuw writes:

> =======================================================================
> Simple CRAN packages which do not compile without modifications (all 
> others do)
> =======================================================================
>      -- akima
> /usr/bin/ld: multiple definitions of symbol _idlc_

>      -- fracdiff
> /usr/bin/ld: multiple definitions of symbol _gammfd_
> (and others)

>      -- odesolve

>      -- princurve
>     lamix:
> Error on line 116: Declaration error for v: adjustable dimension on 
> non-argument

>     -- splancs
> /usr/bin/ld: multiple definitions of symbol _bounds_

>      -- wle
>   mleaic:
> Error on line 229: Declaration error for work: adjustable dimension on 
> non-argument

>    -- subselect
> configure: error: R was configured without a FORTRAN compiler
> ERROR: configuration failed for package `subselect'

> The multiple defined symbols are a well known OS X problem. There are
> ad hoc fixes using linker flags, but the best way to fix this is to
> use extern in the source code (although almost all these packages use
> f2c to translate the fortran into c). The "adjustable dimension" error
> is possibly an f2c problem. Ans subselect does not recognize f2c as a
> fortran compiler.

I recently added a shell script wrapper to compile/link FORTRAN 77 code
based on f2c, which for the purpose of Autoconf can be used as the
FORTRAN 77 compiler.  The configure script in subselect will need to be
modified to use R CMD config F77 (rather than grep/sed on etc/Makeconf)
for getting this.  But this will only make the configuration error go
away: the package will still not compile because the code, as wle and
princurve, use variable-sized arrays.  

> CRAN packages which compile and install, but do not work

>> library("Matrix")
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>          unable to load shared library 
> "/sw/lib/R/library/Matrix/libs/Matrix.so":
>    dlcompat: dyld: /sw/lib/R/bin/R.bin Undefined symbols:
> _ATL_cGetNB
> _ATL_dGetNB
> _ATL_sGetNB
> _ATL_zGetNB
> _cblas_dgemm
> _cblas_dscal
> _cblas_dswap
> _cblas_dsyrk
> _cblas_dtrsm
> _cblas_idamax
> _dsymv_
> Error in library("Matrix") : .First.lib failed

> If I use nm on Matrix.so, all these symbols are undefined.

[I assume there are in your Atlas and cblas libs?  What does ldd on
Matrix.so say?]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr  7 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204070515.g375F4413033@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Mon Apr  8 16:20:18 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Mon, 8 Apr 2002 17:20:18 +0200 (MET DST)
Subject: [Rd] Undocumenten in: R INSTALL --help (PR#1442)
Message-ID: <200204081520.RAA22543@pubhealth.ku.dk>


R version 1.4.1

In the documentation of INSTALL, these options are listed:

  --no-docs
  --no-text
  --no-html
  --no-latex

Only the first of these is mentioned if I run the command:

  R INSTALL --help

-- 
Peter Kleiweg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr  8 20:26:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Apr 2002 21:26:14 +0200
Subject: [Rd] Feature freeze for R-1.5.0
Message-ID: <x2n0wevvop.fsf@blueberry.kubism.ku.dk>


OK, so the feature freeze for 1.5.0 is on as of now. Basically this
means that we will not add new features or API modifications before
the release on April 29.

The set of recommended packages will go into a similar feature freeze
one week from now, when the base package will enter a hard code freeze
(only critical bugs fixed), and a week further on, also the
recommended packages will go into code freeze and the whole thing will
have a final round of platform testing.

I.e. now is a bad time to complain about missing features, but it
might be a very good time to test your packages and scripts against
the new version and see whether they need to be changed and whether
they chase up any bugs. Notice that some of the changes in 1.5.0 have
known compatibility issues -- these are outlined in
http://developer.r-project.org/150update.txt .

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Apr  8 21:51:21 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 8 Apr 2002 15:51:21 -0500
Subject: [Rd] threaded libraries (e.g. ATLAS) not yet supported in 1.5
Message-ID: <20020408155121.A21265@nokomis.stat.umn.edu>

There was some discussion a while back about using threaded BLAS
libraries, such as a threaded version of ATLAS, with R.  While it is
possible to build R to use these libraries (if you get all the right
flags for your platform) there is a problem with signal handling, in
particular SIGINT, that we have not yet been able to resolve.
Hopefully we will be able to come up with a satisfactory resolution
for 1.6, but 1.5 does not have the infrastructure needed to adequately
support threaded libraries.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Tue Apr  9 04:35:37 2002
From: hammour@msn.com (hammour@msn.com)
Date: Tue, 9 Apr 2002 05:35:37 +0200 (MET DST)
Subject: [Rd] symbol  that stands for "cents" crashes R (PR#1444)
Message-ID: <200204090335.FAA24301@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.65.147)


I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
as follows:

plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
 ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")

R stops after the word "US" and the following error message appears:

"This program has performed an illegal operation and will be shut down.

RGUI caused an invalid page fault in
module MSVCRT.DLL at 0167:7801447b.
Registers:
EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
Bytes at CS:EIP:
66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b 
Stack dump:
0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"

If the symbol replaced by the word "cents", the plot executed without any
hassle.

Regards

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:15:25 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Tue, 9 Apr 2002 08:15:25 +0200 (MET DST)
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R ( (PR#1445)
Message-ID: <200204090615.IAA24696@pubhealth.ku.dk>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue Apr  9 07:16:20 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 Apr 2002 08:16:20 +0200
Subject: [Rd] symbol =?iso-8859-1?Q?=A2?= that stands for "cents" crashes R (
 PR#1444)
References: <200204090335.FAA24301@pubhealth.ku.dk>
Message-ID: <3CB28733.1ED74FCD@statistik.uni-dortmund.de>

hammour@msn.com wrote:
> 
> Full_Name: Ahmad Abu Hammour
> Version: 1.4.1
> OS: windows 98
> Submission from: (NULL) (206.216.65.147)
> 
> I wanted to make a plot with axis y labeled as "Exchange Rate (in US )". Just
> as follows:
> 
> plot(ts(data0$uscrx,start=c(1975,1),freq=4),plot.type="single",
>  ylab="Exchange Rate (US)",main="(e) Canada-US Dollar Exchange Rate")
> 
> R stops after the word "US" and the following error message appears:
> 
> "This program has performed an illegal operation and will be shut down.
> 
> RGUI caused an invalid page fault in
> module MSVCRT.DLL at 0167:7801447b.
> Registers:
> EAX=0091007a CS=0167 EIP=7801447b EFLGS=00010246
> EBX=00e23e5e SS=016f ESP=008ff7ac EBP=008ff808
> ECX=ffffffa2 DS=016f ESI=00e22188 FS=18cf
> EDX=8160b024 ES=016f EDI=008ff7f8 GS=0000
> Bytes at CS:EIP:
> 66 8b 04 48 25 57 01 00 00 c3 e8 82 ce fe ff 8b
> Stack dump:
> 0041358c ffffffa2 00000010 008ff808 0041356e 00e45b0c 00e45b0c 02000ec0 008ff7ec
> 00e70d80 00e75b70 008ff8c8 004afb42 00e73dd0 00e73dd0 008ff818"
> 
> If the symbol replaced by the word "cents", the plot executed without any
> hassle.

Have you tried "R for Windows FAQ" 2.12 ("Entering certain characters
crashes Rgui.")? 

"This seems to happen occasionally, and all the occurrences we have
solved have been traced to faulty versions of msvcrt.dll. Try extracting
the one to be found in
the self-extracting archive
ftp://ftp.microsoft.com/softlib/mslfiles/msvcrt.exe and put it in the
rw1041\bin directory. Removing msvcrt.dll from that directory
reverts to the standard behaviour.

This fix has solved other problems too, for example incorrect results in
the date-time functions."

For me it works on WinNT4 perfectly.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Apr  9 08:07:48 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Apr 2002 09:07:48 +0200 (MET DST)
Subject: [Rd] match.arg confusion (PR#921)
Message-ID: <200204090707.JAA25096@pubhealth.ku.dk>

>>>>> "PD" == p dalgaard <p.dalgaard@biostat.ku.dk> writes:

    PD> [sys.function fails sometimes (sorry, our mail system
    PD> decide to throw away the original mail)]

    PD> Yes, I bumped into something similar recently. The
    PD> problem is that we only actually store the call in the
    PD> context structure, not the function, so sys.function has
    PD> to grab the call, take the 1st element, and reevaluate
    PD> it in the parent frame. It is quite easy to think up
    PD> examples where a second evaluation does not give the
    PD> same value as the first.

    PD> Your particular case is of a slightly different natur
    PD> and should be easily fixable by replacing findVar in
    PD> R_sysfunction by findVar1 and looking specifically for
    PD> objects of mode "function", but the basic problem
    PD> persists. I don't think I want to risk fixing this (and
    PD> maybe unfixing something else) for 1.2.3 tomorrow
    PD> though.

and Peter *did* implement the ``stop gap'' fix above for 1.5.0,
but the proper fix (for the more general problem) is still to be
done.

Martin

    JonR> From: J.C.Rougier@durham.ac.uk
    JonR> Date: Wed, 25 Apr 2001 13:23:09 +0200 (MET DST)
     ...

    JonR> This one may not strictly be a bug, and it was
    JonR> certainly my fault, but it took me a while to track it
    JonR> down and it is rather strange:
(it *is* bug)

     funOne <- function(x) { funTwo <- 1:10 ; funTwo(x) }

     funTwo <- function(v) 2*v

     funOne(5) # answer is 10 as expected

     # now a different definition for funTwo with a match.arg

     funTwo <- function(v, foo=c("small", "large")) { 
	       foo <- match.arg(foo); print(foo); 2*v }

     funOne(5) # answer is 10, but foo is NULL

    JonR> What happens is that in funOne I mask funTwo with a
    JonR> vector, but that doesn't matter as the call to funTwo
    JonR> specifies mode="function" (or something similar).  But
    JonR> what happens when funTwo includes a match.arg?  In
    JonR> this case match.arg fails, and the reason it fails is
    JonR> that sys.function(sys.parent()) in match.arg evaluates
    JonR> to 1:10.  If there is a bug here it is the failure of
    JonR> sys.function to grab a function, with the result that
    JonR> formal.args in match.fun is NULL.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Apr  9 23:52:50 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 00:52:50 +0200 (MET DST)
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
Message-ID: <200204092252.AAA02600@pubhealth.ku.dk>


In a package I've been developing for manipulating genetic data I discovered
a problem when indexing into character arrays using NA's:

Create a character matrix and a numeric matrix

	> cmat <- matrix( letters[1:4], ncol=2, nrow=2)
	> nmat <- matrix( 1:4, ncol=2, nrow=2)

Create an index vector containing an NA value

	> indvec <- c(1,2,NA)

Indexing works fine for both matrixes when we only pull off *one* column:

	> cmat[ indvec, 1 ]
	[1] "a"  "b"  "NA"
	> nmat[ indvec, 1 ]
	[1]  1  2 NA

	> cmat[ indvec, 2 ]
	[1] "c"  "d"  "NA"
	> nmat[ indvec, 2 ]
	[1]  3  4 NA

However, when we pull off both columns, we get "" where we should have NA
for cmat but it works properly for nmat:

	> cmat[ indvec,  ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  
	> nmat[ indvec,  ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA

	> cmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,] "a"  "c" 
	[2,] "b"  "d" 
	[3,] "NA" ""  

	> nmat[ indvec, c(1,2) ]
	     [,1] [,2]
	[1,]    1    3
	[2,]    2    4
	[3,]   NA   NA


The problem persists with other matrix sizes:

	> cmat <- matrix( letters[1:6], ncol=3, nrow=2)
	> nmat <- matrix( 1:6, ncol=3, nrow=2)
	> cmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,] "a"  "c"  "e" 
	[2,] "b"  "d"  "f" 
	[3,] "NA" ""   ""  
	> nmat[ indvec,  ]
	     [,1] [,2] [,3]
	[1,]    1    3    5
	[2,]    2    4    6
	[3,]   NA   NA   NA

Also we get a strange result if the only index is NA:

	> cmat[NA,]
	     [,1] [,2] [,3]
	[1,] "NA" ""   ""  
	[2,] "NA" ""   ""  
	> nmat[NA,]
	     [,1] [,2] [,3]
	[1,]   NA   NA   NA
	[2,]   NA   NA   NA

I would expect to get a single row for these cases rather than the whole
matrix replicated and (incorrectly for the cmat) filled with NA.

I'm reporting this now to get it in.  I'll download the 1.5.0  source code
now and muck about to see if I can locate the problem.  

-Greg

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    4.1                 
year     2002                
month    01                  
day      30                  
language R                   


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 10:08:32 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 11:08:32 +0200
Subject: [Rd] Problem handling NA indexes for character matrixes (PR#1447)
In-Reply-To: <200204092252.AAA02600@pubhealth.ku.dk>
References: <200204092252.AAA02600@pubhealth.ku.dk>
Message-ID: <x2bscr9azz.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> In a package I've been developing for manipulating genetic data I discovered
> a problem when indexing into character arrays using NA's:

> 	> cmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,] "a"  "c" 
> 	[2,] "b"  "d" 
> 	[3,] "NA" ""  
> 	> nmat[ indvec,  ]
> 	     [,1] [,2]
> 	[1,]    1    3
> 	[2,]    2    4
> 	[3,]   NA   NA

This seems to have vanished in R-1.5.0pre, likely as a (fortunate, if
unexpected) side effect of the character NA changes:

> cmat[ indvec,  ]
     [,1] [,2]
[1,] "a"  "c" 
[2,] "b"  "d" 
[3,] NA   NA  
> nmat[ indvec,  ]
     [,1] [,2]
[1,]    1    3
[2,]    2    4
[3,]   NA   NA

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 11:06:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 12:06:02 +0200
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <x2u1qj7trp.fsf@blueberry.kubism.ku.dk>


There's a directory on CRAN containing the current snapshots of the
set of recommended packages. They will not be finaly feature-frozen
until Monday, but you might want to check them out anyway. 

If you have wget, the easiest way to get the complete set is probably

wget -r http://cran.r-project.org/src/contrib/1.5.0/Recommended

followed by

.../R CMD INSTALL cran.r-project.org/src/contrib/1.5.0/Recommended/*.tar.gz 

(Of course, you need a current snapshot of r-devel to do this).

Please report any errors that you find.

        -p
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From G.Innocent@vet.gla.ac.uk  Wed Apr 10 14:36:20 2002
From: G.Innocent@vet.gla.ac.uk (G.Innocent@vet.gla.ac.uk)
Date: Wed, 10 Apr 2002 15:36:20 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101336.PAA09300@pubhealth.ku.dk>

Dear bugs @r;

The following reproduces erroneous results on my system using R-gui:

platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R

#####################################################

inter.gp.effect <- 0.1

animals <- data.frame(pos = 0:2)

SI.model <- function(Animal.group) {

		group <- 1
		Animal.group$pos[group] <- Animal.group$pos[group] + 1
		effective.animals <- Animal.group$pos	# allows us to model inter-group
contact
#
			effective.animals[1:(length(Animal.group$pos)-1)] <-
				effective.animals[1:(length(Animal.group$pos)-1)] +
				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
##
			effective.animals[2:length(Animal.group$pos)] <-
				effective.animals[2:length(Animal.group$pos)]  +
				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
	return(Animal.group)
}

print(SI.model(animals))

####################################################

results:
> source("c:\\r work\\simulation model\\bug.R")
     pos
1 1.10
2 1.31
3 2.12

Expected results:
   pos
1    1
2    1
3    2

Notes:

1) The value for group can be anywhere on the interval 1:3, the results
differ, but are consistently incorrect.

2) If Animal.group is a vector, not a data frame the error does not occur.

3) Interestingly if SI.model is run through the debugger step by step, and
the value of Animal.group examined at the place marked in the code by a
single hash, then the correct result is obtained.  If the value of
Animal.group is examined at the place marked with a double hash, then the
following (incorrect) result is obtained:

exiting from: SI.model(animals)
  pos
1 1.1
2 1.2
3 2.0

4) Pre-defining expected.animals as either a data.frame, or
vector(model="numeric") does not alter the erroneous output

5) I would suggest that at both assignments to effective.animals, the result
is also being assigned to Animal.group$pos.  Examining the value assigned to
Animal.group at an appropriate place is forcing the interpreter to assign
into Animal.group correctly, and therefore fixing its value.

6) The above code appears to be the minimum of code required to reproduce
the results on my machine.

I have taken this problem as far as my limited debugging abilities allow.  I
am not a C or Fortran guru!

I would like to take this opportunity to thank those who have contributed to
the r project for a fine piece of software.

I hope that this bug report helps.  If I can be of further assistance then
let me know.

Thanks again

Giles

Dr. G.T. Innocent
Comparative Epidemiology and Informatics Group,
Dept. of Veterinary Clinical Studies,
Glasgow University Vet. School.
Bearsden Road, Glasgow G61 1QH
Tel. 0141 339 8855 Ext. 0531.
Fax. 0141 330 5729
e-mail G.Innocent@vet.gla.ac.uk


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 14:59:53 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 15:59:53 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x2d6x77ixy.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> inter.gp.effect <- 0.1
> 
> animals <- data.frame(pos = 0:2)
> 
> SI.model <- function(Animal.group) {
> 
> 		group <- 1
> 		Animal.group$pos[group] <- Animal.group$pos[group] + 1
> 		effective.animals <- Animal.group$pos	# allows us to model inter-group
> contact
> #
> 			effective.animals[1:(length(Animal.group$pos)-1)] <-
> 				effective.animals[1:(length(Animal.group$pos)-1)] +
> 				inter.gp.effect*Animal.group$pos[2:length(Animal.group$pos)]
> ##
> 			effective.animals[2:length(Animal.group$pos)] <-
> 				effective.animals[2:length(Animal.group$pos)]  +
> 				inter.gp.effect*Animal.group$pos[1:(length(Animal.group$pos)-1)]
> 	return(Animal.group)
> }
> 
> print(SI.model(animals))
> 
> ####################################################
> 
> results:
> > source("c:\\r work\\simulation model\\bug.R")
>      pos
> 1 1.10
> 2 1.31
> 3 2.12
> 
> Expected results:
>    pos
> 1    1
> 2    1
> 3    2

Confirmed with 1.5.0pre. I'll have a look.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 15:27:00 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 16:27:00 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <200204101336.PAA09300@pubhealth.ku.dk>
References: <200204101336.PAA09300@pubhealth.ku.dk>
Message-ID: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>

G.Innocent@vet.gla.ac.uk writes:

> 6) The above code appears to be the minimum of code required to reproduce
> the results on my machine.

You can do better than that:

> f
function(A) {
  A$p[1] <- 2
  E <- A$p 
  E[1:2] <- 0.1*A$p[2:3]
  return(A)
}
> x
  p
1 0
2 1
3 2
> f(x)
    p
1 0.1
2 0.2
3 2.0

Notice that the last line changing E is effectively changing A$p, so
something is up with our duplication-avoidance scheme. Luke?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 16:22:43 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 17:22:43 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101522.RAA09977@pubhealth.ku.dk>

In R-1.5.0pre (2002-04-08) on Solaris 2.6, the window that X11() creates has a
title like:

    R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

except the funny characters at the end have umlauts and other accents
(i.e. extended ASCII characters), and they may be different each time X11() is
invoked.  There is no loss of functionality; it just looks a little ugly.

I saw this behavior in R-1.3.?, it disappeared (along with the whole window
title) in R-1.4.1, and now it's back in R-1.5.0pre.

				-- David Brahm (brahm@alum.mit.edu)


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 08
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Apr 10 16:47:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Apr 2002 17:47:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101547.RAA10066@pubhealth.ku.dk>


>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
    DavidB> window that X11() creates has a title like:

    DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y

    DavidB> except the funny characters at the end have umlauts
    DavidB> and other accents (i.e. extended ASCII characters),
    DavidB> and they may be different each time X11() is
    DavidB> invoked.  There is no loss of functionality; it just
    DavidB> looks a little ugly.

This made me look at our Solaris (2.5.1 + tons of patches)
version of   R-1.5.0pre (2002-04-09).

There, X11()  {or  "plot(1)"}  opens a window very quickly and
then ends in a segmentation fault (see below).

Our automatic checking (unfortunately ?) nowadays excludes all
interactive features, including non-file graphical devices...

Yes, this will be investigated!
 
Here is my story (does anyone have a suggestion to get rid of
		  GDB's warning get better track of R_X11.so ?)


 % R -d gdb

 GDB is free software and you are welcome to distribute copies of it
  under certain conditions; type "show copying" to see the conditions.
 There is absolutely no warranty for GDB; type "show warranty" for details.
 GDB 4.16 (sparc-sun-solaris2.5.1), 
 Copyright 1996 Free Software Foundation, Inc...
 (gdb) r --vanilla
 Starting program: /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/bin/R.bin --vanilla
 warning: Unable to find dynamic linker breakpoint function.
 warning: GDB will be unable to debug shared library initializers
 warning: and track explicitly loaded dynamic code.

 R : Copyright 2002, The R Development Core Team
 Version 1.5.0 Under development (unstable) (2002-04-09)

    <.....>

 > x11()

 Program received signal SIGSEGV, Segmentation fault.
 0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 (gdb) bt
 #0  0xef4bbb2c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #1  0xef4bbb0c in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #2  0xef4bd2a4 in ?? ()
    from /sfs/u/staff/maechler/R/D/r-devel/SunOS-inst/modules/R_X11.so
 #3  0x92340 in Rf_addDevice (dd=0xb4bae8) at ../../../R/src/main/graphics.c:5630
 #4  0xfe91c in Rf_addX11Device (display=0x21a600 "\b", width=7, height=7, 
     ps=12, gamma=1, colormodel=4, maxcubesize=256, canvascolor=16777215, 
     devname=0x19edd8 "X11", deviceDriverRoutine=0xef4bd938 <_end+135424>)
     at ../../../R/src/unix/devices.c:326
 #5  0xfe7e4 in do_X11 (call=0x19edd8, op=0x2173e8, args=0xffffff, env=0xb47f34)
     at ../../../R/src/unix/devices.c:289
 #6  0xa39ec in do_internal (call=0x1b949c, op=0x19edd8, args=0xb47e1c, 
     env=0xb47f34) at ../../../R/src/main/names.c:1020
 #7  0x7ba3c in Rf_eval (e=0x9f1fa0, rho=0xb47f34)
     at ../../../R/src/main/eval.c:404
 #8  0x7be2c in Rf_applyClosure (call=0xb390f4, op=0x9f1ec0, arglist=0x1f9ea0, 
     rho=0x21ab78, suppliedenv=0x1f9ea0) at ../../../R/src/main/eval.c:595
 #9  0x7b824 in Rf_eval (e=0xb390f4, rho=0x21ab78)
     at ../../../R/src/main/eval.c:439
 #10 0x968b8 in R_ReplConsole (rho=0x21ab78, savestack=0, browselevel=0)
     at ../../../R/src/main/main.c:187
 #11 0x970d0 in run_Rmainloop () at ../../../R/src/main/main.c:499
 #12 0xff1bc in main (ac=0, av=0xefffe79c) at ../../../R/src/unix/system.c:93
 (gdb) 


    DavidB> I saw this behavior in R-1.3.?, it disappeared (along with the whole window
    DavidB> title) in R-1.4.1, and now it's back in R-1.5.0pre.

    DavidB> -- David Brahm (brahm@alum.mit.edu)


    DavidB> --please do not edit the information below--

    DavidB> Version:
    DavidB> platform = sparc-sun-solaris2.6
    DavidB> arch = sparc
    DavidB> os = solaris2.6
    DavidB> system = sparc, solaris2.6
    DavidB> status = Under development (unstable)
    DavidB> major = 1
    DavidB> minor = 5.0
    DavidB> year = 2002
    DavidB> month = 04
    DavidB> day = 08
    DavidB> language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 17:05:27 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 18:05:27 +0200
Subject: [Rd] Funny characters in x11 window title (PR#1451)
In-Reply-To: <200204101547.RAA10066@pubhealth.ku.dk>
References: <200204101547.RAA10066@pubhealth.ku.dk>
Message-ID: <x24rij7d4o.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

>     DavidB> In R-1.5.0pre (2002-04-08) on Solaris 2.6, the
>     DavidB> window that X11() creates has a title like:
> 
>     DavidB>	   R Graphics: Device 2 (ACTIVE)   o  iyeP )( y
...
> This made me look at our Solaris (2.5.1 + tons of patches)
> version of   R-1.5.0pre (2002-04-09).

For whatever it is worth, I can't reproduce this on Solaris7/gcc3.0.3

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Apr 10 17:29:07 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 10 Apr 2002 09:29:07 -0700 (PDT)
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>

On 10 Apr 2002, Peter Dalgaard BSA wrote:

> G.Innocent@vet.gla.ac.uk writes:
>
> > 6) The above code appears to be the minimum of code required to reproduce
> > the results on my machine.
>
> You can do better than that:
>
> > f
> function(A) {
>   A$p[1] <- 2
>   E <- A$p
>   E[1:2] <- 0.1*A$p[2:3]
>   return(A)
> }
<snip>
> Notice that the last line changing E is effectively changing A$p, so
> something is up with our duplication-avoidance scheme. Luke?

and it matters that the assignment to E is coming from A$p. If it comes
from A$q or from some other vector then the bug doesn't bite.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Wed Apr 10 17:50:14 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Wed, 10 Apr 2002 11:50:14 -0500
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>; from tlumley@u.washington.edu on Wed, Apr 10, 2002 at 09:29:07AM -0700
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk> <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
Message-ID: <20020410115014.A11138@nokomis.stat.umn.edu>

It's a problem in subset.c.  Should be fixed now.

A further simplification with annotation:

x <- list(p=1)

f <- function(A) {
  A$p <- 2       # makes copy of A with NAMED 1
  E <- A$p       # no copy, A$p gets NAMED 2
  A$p            # is setting NAMED back to 1
  E[1] <- 0.1    # modifies shared value in place
  return(A)
}

f(x)

The problem was in code that looks like this:

	y = VECTOR_ELT(x, i);
        SET_NAMED(y, NAMED(x));

which ignores the possibility that NAMED(y) may already be larger than
NAMED(x).  I've changed these bits to

	y = VECTOR_ELT(x, i);
	if (NAMED(x) > NAMED(y))
	    SET_NAMED(y, NAMED(x));

This occurred in a few other places but mostly in pairlist code so was
less likely to bite, but I changed those as well.

The problem did not occur with [[ because that does more copying.

luke

On Wed, Apr 10, 2002 at 09:29:07AM -0700, Thomas Lumley wrote:
> On 10 Apr 2002, Peter Dalgaard BSA wrote:
> 
> > G.Innocent@vet.gla.ac.uk writes:
> >
> > > 6) The above code appears to be the minimum of code required to reproduce
> > > the results on my machine.
> >
> > You can do better than that:
> >
> > > f
> > function(A) {
> >   A$p[1] <- 2
> >   E <- A$p
> >   E[1:2] <- 0.1*A$p[2:3]
> >   return(A)
> > }
> <snip>
> > Notice that the last line changing E is effectively changing A$p, so
> > something is up with our duplication-avoidance scheme. Luke?
> 
> and it matters that the assignment to E is coming from A$p. If it comes
> from A$q or from some other vector then the bug doesn't bite.
> 
> 	-thomas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:24:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Apr 2002 19:24:13 +0200
Subject: [Rd] Strange assignment bug (PR#1450)
In-Reply-To: <20020410115014.A11138@nokomis.stat.umn.edu>
References: <x28z7v7hor.fsf@blueberry.kubism.ku.dk>
 <Pine.A41.4.44.0204100927040.103838-100000@homer25.u.washington.edu>
 <20020410115014.A11138@nokomis.stat.umn.edu>
Message-ID: <x2sn63v54y.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 18:26:47 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 19:26:47 +0200 (MET DST)
Subject: [Rd] Strange assignment bug (PR#1450)
Message-ID: <200204101726.TAA10413@pubhealth.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> It's a problem in subset.c.  Should be fixed now.

Great! Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Apr 10 19:59:20 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 10 Apr 2002 20:59:20 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204101859.UAA10717@pubhealth.ku.dk>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> I also get funny characters in the title bar on R 1.4.1 and R 1.5.0_devel
> (yesterday's version).

My bet is that it is X-server dependent what happens with bytes past
the end of a string set with

    XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
                    8, PropModeReplace, (unsigned char*)t, 50);

(in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).

Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:28:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 10 Apr 2002 16:28:40 -0400
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE916@groexmbcr02.pfizer.com>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Apr 10 21:30:35 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 10 Apr 2002 22:30:35 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102030.WAA10950@pubhealth.ku.dk>

Making this change fixes the problem.  Now x11() brings up a window properly
labeled "Device 2 (ACTIVE)".

-Greg

> -----Original Message-----
> From: p.dalgaard@biostat.ku.dk [mailto:p.dalgaard@biostat.ku.dk]
> Sent: Wednesday, April 10, 2002 2:59 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: Re: [Rd] Funny characters in x11 window title (PR#1451)
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > I also get funny characters in the title bar on R 1.4.1 and 
> R 1.5.0_devel
> > (yesterday's version).
> 
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
> 
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> 
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> 
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: 
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: 
> (+45) 35327907
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Apr 10 21:57:12 2002
From: brahm@alum.mit.edu (brahm@alum.mit.edu)
Date: Wed, 10 Apr 2002 22:57:12 +0200 (MET DST)
Subject: [Rd] Funny characters in x11 window title (PR#1451)
Message-ID: <200204102057.WAA11024@pubhealth.ku.dk>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> wrote:
> My bet is that it is X-server dependent what happens with bytes past
> the end of a string set with
>     XChangeProperty(display, xd->window, XA_WM_NAME, XA_STRING,
>                     8, PropModeReplace, (unsigned char*)t, 50);
> (in newX11_Activate and newX11_Deactivate, src/modules/X11/devX11.c).
> Could you try and replace the 50 with strlen(t) or maybe strlen(t)+1 ?

Replacing '50' with 'strlen(t)' in those 2 places cures the problem for me!
Brilliant!
-- 
                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From R-bugs@biostat.ku.dk  Thu Apr 11 09:00:04 2002
From: R-bugs@biostat.ku.dk (R-bugs@biostat.ku.dk)
Date: Thu, 11 Apr 2002 10:00:04 +0200
Subject: [Rd] Windows AltGr bug? (PR#1448)
Message-ID: <15541.17028.270482.560534@gargle.gargle.HOWL>

       [this was filter-bounced for R-devel, because of
        HTMLification and a binary attachment; also fixed up the Subject; MM]

hello,

I'm running R (version 1.4.1) under Windows Mellenium and this error =
message appears every time I press AltGr + any other key.
A bug or a any instability of my sistem?

(attached GIF file deleted; don't use ANY attachments for R-bugs!)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mckay@suna.gmr.com  Thu Apr 11 15:40:27 2002
From: mckay@suna.gmr.com (Neil McKay MD)
Date: Thu, 11 Apr 2 10:40:27 EDT
Subject: [Rd] Mods that allow R scripts
Message-ID: <200204111440.g3BEeRV06920@math.ma.gmr.com>

I've hacked R so that it can be used to write shell and/or
CGI scripts, e.g. "hello world" can be written as:


	#!/usr/local/lib/R/bin/R.bin --script

	cat("Hello, World!\n");

The mods required to enable this aren't particularly major.
(Adds about 70 lines of code, IIRC.) Anyone else interested
in adding this to the R core?

-- 
Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 (GM:8-226-1470)
Enterprise Systems Lab                  FAX:   (586)986-0574 (GM:8-226-0574)
GM Research & Development Center        Internet: mckay@gmr.com
30500 Mound Road
Warren, Mich. 48090

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Apr 11 16:14:07 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 11 Apr 2002 10:14:07 -0500
Subject: [Rd] Mods that allow R scripts
Message-ID: <E16vgH1-0004Vb-00@sonny.eddelbuettel.com>


> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?

Yes!  I found it very useful in other software systems (e.g. Octave).

That feature-request gets discussed here every now and then; I
recall Peter and Luke discussing it here a few months back.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Apr 11 16:25:19 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 11 Apr 2002 11:25:19 -0400
Subject: [Rd] Mods that allow R scripts
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE918@groexmbcr02.pfizer.com>

Yes.  Can you send me a copy of the patch?

Thanks,

Greg

> -----Original Message-----
> From: Neil McKay MD [mailto:jz0vs8@gmr.com]
> Sent: Thursday, April 11, 2002 10:40 AM
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Mods that allow R scripts
> 
> 
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
> 
> 
> 	#!/usr/local/lib/R/bin/R.bin --script
> 
> 	cat("Hello, World!\n");
> 
> The mods required to enable this aren't particularly major.
> (Adds about 70 lines of code, IIRC.) Anyone else interested
> in adding this to the R core?
> 
> -- 
> Neil D. McKay, Mail Code 480-106-359    Phone: (586)986-1470 
> (GM:8-226-1470)
> Enterprise Systems Lab                  FAX:   (586)986-0574 
> (GM:8-226-0574)
> GM Research & Development Center        Internet: mckay@gmr.com
> 30500 Mound Road
> Warren, Mich. 48090
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Apr 11 17:04:36 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 11 Apr 2002 12:04:36 -0400
Subject: [Rd] Mods that allow R scripts
In-Reply-To: <200204111440.g3BEeRV06920@math.ma.gmr.com>
References: <200204111440.g3BEeRV06920@math.ma.gmr.com>
Message-ID: <15541.46100.236766.419250@gargle.gargle.HOWL>

Neil McKay MD writes:
> I've hacked R so that it can be used to write shell and/or
> CGI scripts, e.g. "hello world" can be written as:
>   #!/usr/local/lib/R/bin/R.bin --script
>   cat("Hello, World!\n");

That is very cool, and would replace about 25 lines of Perl wrapper for me, IF
you could also easily pass flags and arguments, e.g.:
  Unix> myRscript -e -f datafile
These would have to become R variables, somehow.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu Apr 11 19:55:01 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 11 Apr 2002 20:55:01 +0200 (MET DST)
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
Message-ID: <200204111855.UAA19587@pubhealth.ku.dk>

[This is on Redhat Linux 7.1, using sawfish window manager under gnome:

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 11
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base
]

If I close the data.entry() window using the Window manager, I get
SIGSEGV.  When debugging, the routine closewin() gets closed twice -
on the first time, the window closes, the second time I get the error.

This is with r-devel as of today, with "CFLAGS -g".  I edited
closewin() in dataentry.c to show me when it is called:

void closewin(void)
{
  printf("In routine closewin\n");
    XFreeGC(iodisplay, iogc);
    XDestroyWindow(iodisplay, iowindow);
    XCloseDisplay(iodisplay);
}


% bin/R
> x <- edit(data.frame())

The data frame pops up.  I just click on the Window manager close
button (not the "Quit" button):

In routine closewin
In routine closewin

Program received signal SIGSEGV, Segmentation fault.
0x08bd62d2 in ?? ()

When I step through in gdb (below), I see the data frame window
disappears after the first call to closewin; the segmentation fault
happens within the second call.


% bin/R -d gdb
(gdb) run

[R starts up]  Ctrl-c to get back to debugger:
(gdb) break closewin
Breakpoint 1 at 0x402195ff: file dataentry.c, line 1315.
(gdb) cont
Continuing.
> x <- edit(data.frame())

At this point, I click the "close" button provided by the window
manager, control returns to gdb.  If I then single-step through gdb, I
see the error in the second call to closewin (from line 313 of
dataentry.c)

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) n
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 
1317        XDestroyWindow(iodisplay, iowindow);
(gdb) 
1318        XCloseDisplay(iodisplay);
(gdb) 
1319    }
(gdb) 
eventloop () at dataentry.c:1155
1155                           done = 1;
(gdb) 
1157                    break;
(gdb) 
1161    }
(gdb) 
RX11_dataentry (call=0x850b7c0, op=0x8270afc, args=0x8bd4e84, rho=0x8bcd998)
    at dataentry.c:312
312         endcontext(&cntxt);
(gdb) 
313         closewin();
(gdb) 

Breakpoint 1, closewin () at dataentry.c:1315
1315      printf("In routine closewin\n");
(gdb) 
In routine closewin
1316        XFreeGC(iodisplay, iogc);
(gdb) 

Program received signal SIGSEGV, Segmentation fault.
0x08bd750a in ?? ()





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Apr 11 22:46:03 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Apr 2002 23:46:03 +0200
Subject: [Rd] segmentation violation when closing the data entry window (PR#1453)
In-Reply-To: <200204111855.UAA19587@pubhealth.ku.dk>
References: <200204111855.UAA19587@pubhealth.ku.dk>
Message-ID: <x2ads97vtw.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> [This is on Redhat Linux 7.1, using sawfish window manager under gnome:
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 11
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
> ]
> 
> If I close the data.entry() window using the Window manager, I get
> SIGSEGV.  When debugging, the routine closewin() gets closed twice -
> on the first time, the window closes, the second time I get the error.

OK, I see it here too. The closewin() inside eventloop() looks
completely superfluous to me.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 03:29:09 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 11 Apr 2002 22:29:09 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
Message-ID: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com>

>Date: 10 Apr 2002 12:06:02 +0200
>From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
>
>There's a directory on CRAN containing the current snapshots of the
>set of recommended packages. They will not be finaly feature-frozen
>until Monday, but you might want to check them out anyway. 
>
>If you have wget, the easiest way to get the complete set is probably...

For Windows users:  the snapshots are included in the SetupR.exe
install program that is available on my web site at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

Check the date on the file to see when I last did a build and upload.
(Right now the date shows it was built yesterday.  I'll probably do
another build tomorrow.)

I don't think Rcmd INSTALL is currently working, but I imagine it will
be after the next build or two.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Apr 12 13:47:18 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 12 Apr 2002 08:47:18 -0400
Subject: [Rd] Snapshots of recommended packages for 1.5.0
In-Reply-To: <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
References: <m2hcbus91j48f7uvlvf26fqc28hjo4vjcl@4ax.com> <Pine.GSO.4.44.0204120829130.4417-100000@auk.stats>
Message-ID: <hmldbu4v30pfstqsf3fjsnugujk29t3mop@4ax.com>

On Fri, 12 Apr 2002 08:30:13 +0100 (BST), you wrote:
>> I don't think Rcmd INSTALL is currently working, but I imagine it will
>> be after the next build or two.
>
>Works for me, and always has done and I use it to build the packages on
>CRAN.

Right, my mistake.  It's BUILD and CHECK that are not currently
working here.

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 20:17:15 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 15:17:15 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>


Hi All,

What is the current status of removing the global variables etc that is
required to permit multi-threading R?

I'm developing a web application tool for/using R, python (www.python.org),
and Zope (www.zope.org), and it would be really convenient if I could use
something like RPy to communicate with several concurrent R sessions,
preferably within the same process space.  

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Fri Apr 12 20:26:18 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Fri, 12 Apr 2002 15:26:18 -0400
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>; from gregory_r_warnes@groton.pfizer.com on Fri, Apr 12, 2002 at 03:17:15PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com>
Message-ID: <20020412152618.A9973@jessie.research.bell-labs.com>

I plan to attack this in mid May unless Luke or others get there
first.  As I have mentioned before, making the R engine reentrant
and/or thread-safe will probably not be all that is needed for your
purposes, and fixing the packages, especially those with native (C,
C++ & Fortran) code is also necessary. That is why I have been working
on a tool that aids in the task of removing the global variables.

Also, it may be prudent to prioritize an adequate security model in
your application over allowing concurrent intrusions :-)

 D.

Warnes, Gregory R wrote:
> 
> Hi All,
> 
> What is the current status of removing the global variables etc that is
> required to permit multi-threading R?
> 
> I'm developing a web application tool for/using R, python (www.python.org),
> and Zope (www.zope.org), and it would be really convenient if I could use
> something like RPy to communicate with several concurrent R sessions,
> preferably within the same process space.  
> 
> -Greg
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Fri Apr 12 20:44:35 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Fri, 12 Apr 2002 14:44:35 -0500
Subject: [Rd] multi-threaded R current status?
In-Reply-To: <20020412152618.A9973@jessie.research.bell-labs.com>; from duncan@research.bell-labs.com on Fri, Apr 12, 2002 at 03:26:18PM -0400
References: <5429125E11E4D411AF7300805FE603A8040DE926@groexmbcr02.pfizer.com> <20020412152618.A9973@jessie.research.bell-labs.com>
Message-ID: <20020412144435.G8205@nokomis.stat.umn.edu>

Sounds like what you need (given that Python is involved with it's
global interpreter lock) is concurrent threads, not full parellelism.
That is at least feasible, though it's a non-trivial effort and it
remains to be seen if we have the resources to pull it off.  Full
parallelism at the R level is much harder; not clear it is
realistically feasible at all.

On the other hand, there are some simple things involving threading
vectorized arithmetic operations for speedup on multi=processors that
we are likely to look into fairly soon and that may turn out to be
useful.

luke

On Fri, Apr 12, 2002 at 03:26:18PM -0400, Duncan Temple Lang wrote:
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.
> 
> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)
> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient if I could use
> > something like RPy to communicate with several concurrent R sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:01:44 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:01:44 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92D@groexmbcr02.pfizer.com>



> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Apr 12 21:23:26 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 12 Apr 2002 16:23:26 -0400
Subject: [Rd] multi-threaded R current status?
Message-ID: <5429125E11E4D411AF7300805FE603A8040DE92E@groexmbcr02.pfizer.com>


> -----Original Message-----
> From: Duncan Temple Lang [mailto:duncan@research.bell-labs.com]
> Sent: Friday, April 12, 2002 3:26 PM
> To: Warnes, Gregory R
> Cc: 'R-devel@stat.math.ethz.ch'
> Subject: Re: [Rd] multi-threaded R current status?
> 
> 
> I plan to attack this in mid May unless Luke or others get there
> first.  As I have mentioned before, making the R engine reentrant
> and/or thread-safe will probably not be all that is needed for your
> purposes, and fixing the packages, especially those with native (C,
> C++ & Fortran) code is also necessary. That is why I have been working
> on a tool that aids in the task of removing the global variables.

Thanks for the status report.  I'm a firm believer in creating tools to
automate pesky repetitive tasks.

Once the core of R is reentrant/thread-safe, perhaps it would be possible to
get 90% of the way to fully reentrant/thread-safe by modifying  .C /
.Fortran / friends to include a lock that prevent more than one thread at a
time from accessing functions within the same library (unless, of course,
the library is flagged as thread-safe.)

> Also, it may be prudent to prioritize an adequate security model in
> your application over allowing concurrent intrusions :-)

Yes, I've already been thinking about security.  For the moment, I'm
building this tool strictly for trusted environments where security
shouldn't be a problem, and I'm not directly exposing R commands to the end
user.  

Still, I'm already running the server as 'nobody' to lessen the potential
for trouble, and I've been considering how to run this within a chroot jail
which contains only the necessary files to run R.   

R has a *lot* of features that allow access to the underlying system and
that could potentially be used to do nasty things, particularly if the user
is allowed to provide arbitrary R code.  Of course, so do all of our
favorite CGI languages.  That's part of what makes them useful ;^) 

-Greg

> 
>  D.
> 
> Warnes, Gregory R wrote:
> > 
> > Hi All,
> > 
> > What is the current status of removing the global variables 
> etc that is
> > required to permit multi-threading R?
> > 
> > I'm developing a web application tool for/using R, python 
> (www.python.org),
> > and Zope (www.zope.org), and it would be really convenient 
> if I could use
> > something like RPy to communicate with several concurrent R 
> sessions,
> > preferably within the same process space.  
> > 
> > -Greg
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read 
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 15:10:04 2002
From: popescul@unagi.cis.upenn.edu (popescul@unagi.cis.upenn.edu)
Date: Sat, 13 Apr 2002 16:10:04 +0200 (MET DST)
Subject: [Rd] glm() in R (PR#1457)
Message-ID: <200204131410.QAA00268@pubhealth.ku.dk>


 Hello,

 I was using R for logistic regression modeling (glm() with binomial
family) and have noticed that it' can't handle more than 100 predictors
(reports syntax error)
Is it a bug, or a language restiction ?

 I would be very grateful if you let me know possible ways around the
problem, as I need R for problems with many attributes.

 Thank you,

 Alex.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 13 17:16:02 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Apr 2002 18:16:02 +0200
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <200204131410.QAA00268@pubhealth.ku.dk>
References: <200204131410.QAA00268@pubhealth.ku.dk>
Message-ID: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>

popescul@unagi.cis.upenn.edu writes:

>  Hello,
> 
>  I was using R for logistic regression modeling (glm() with binomial
> family) and have noticed that it' can't handle more than 100 predictors
> (reports syntax error)
> Is it a bug, or a language restiction ?
> 
>  I would be very grateful if you let me know possible ways around the
> problem, as I need R for problems with many attributes.
> 
>  Thank you,
> 
>  Alex.

If you get a syntax error, then I wouldn't expect that glm() itself is
causing it. More likely, you are exceeding the line length limit in
the parser. Try splitting your command over several lines, or use
simplified formulas like  glm(V1~.,data=d,family=binomial).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Apr 13 18:29:15 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 13 Apr 2002 10:29:15 -0700 (PDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <x2hemfpoal.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>

On 13 Apr 2002, Peter Dalgaard BSA wrote:

> popescul@unagi.cis.upenn.edu writes:
>
> >  Hello,
> >
> >  I was using R for logistic regression modeling (glm() with binomial
> > family) and have noticed that it' can't handle more than 100 predictors
> > (reports syntax error)
> > Is it a bug, or a language restiction ?
> >
> >  I would be very grateful if you let me know possible ways around the
> > problem, as I need R for problems with many attributes.
> >
> >  Thank you,
> >
> >  Alex.
>
> If you get a syntax error, then I wouldn't expect that glm() itself is
> causing it. More likely, you are exceeding the line length limit in
> the parser. Try splitting your command over several lines, or use
> simplified formulas like  glm(V1~.,data=d,family=binomial).

To be specific, I defined
y<-rbinom(800,1,.5)
x<-as.data.frame(matrix(rnorm(800*300),ncol=300))

and the following all work
# using . to specify variables implicitly
glm(y~.,data=x,family=binomial())

# constructing a formula object
ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
glm(ff,data=x,family=binomial())

# constructing the whole call as a text string and evaluating it
expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
eval(parse(text=expr)[[1]])

#pasting the whole thing in multiple lines
 glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
    V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
    V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
     V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
     V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
    V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
    V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
    V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
    V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
    V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
    V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
   V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
   V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
   V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
   V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
   V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
    V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
   V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
    V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
    V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
    V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
    V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
    V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
  V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
     V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
     V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
     V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
     V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
     V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
     V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
     V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
  V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
  V300, data = x, family = binomial())

but pasting it as a single line gives a syntax  error.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From popescul@unagi.cis.upenn.edu  Sat Apr 13 23:29:47 2002
From: popescul@unagi.cis.upenn.edu (Alexandrin Popescul)
Date: Sat, 13 Apr 2002 18:29:47 -0400 (EDT)
Subject: [Rd] glm() in R (PR#1457)
In-Reply-To: <Pine.A41.4.44.0204131015470.182444-100000@homer01.u.washington.edu>
Message-ID: <Pine.GSO.4.44.0204131829050.1521-100000@unagi.cis.upenn.edu>


 Thomas and Peter,

 this was very helpful,

 Thanks,

 Alex.


On Sat, 13 Apr 2002, Thomas Lumley wrote:

> On 13 Apr 2002, Peter Dalgaard BSA wrote:
>
> > popescul@unagi.cis.upenn.edu writes:
> >
> > >  Hello,
> > >
> > >  I was using R for logistic regression modeling (glm() with binomial
> > > family) and have noticed that it' can't handle more than 100 predictors
> > > (reports syntax error)
> > > Is it a bug, or a language restiction ?
> > >
> > >  I would be very grateful if you let me know possible ways around the
> > > problem, as I need R for problems with many attributes.
> > >
> > >  Thank you,
> > >
> > >  Alex.
> >
> > If you get a syntax error, then I wouldn't expect that glm() itself is
> > causing it. More likely, you are exceeding the line length limit in
> > the parser. Try splitting your command over several lines, or use
> > simplified formulas like  glm(V1~.,data=d,family=binomial).
>
> To be specific, I defined
> y<-rbinom(800,1,.5)
> x<-as.data.frame(matrix(rnorm(800*300),ncol=300))
>
> and the following all work
> # using . to specify variables implicitly
> glm(y~.,data=x,family=binomial())
>
> # constructing a formula object
> ff<-formula(paste("y",paste(names(x),collapse="+"),sep="~")
> glm(ff,data=x,family=binomial())
>
> # constructing the whole call as a text string and evaluating it
> expr<-paste("glm(y~",paste(names(x),collapse="+"),",data=x,family=binomial())")
> eval(parse(text=expr)[[1]])
>
> #pasting the whole thing in multiple lines
>  glm(y ~ V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8 + V9 + V10 + V11 +
>     V12 + V13 + V14 + V15 + V16 + V17 + V18 + V19 + V20 + V21 +
>     V22 + V23 + V24 + V25 + V26 + V27 + V28 + V29 + V30 + V31 +
>      V32 + V33 + V34 + V35 + V36 + V37 + V38 + V39 + V40 + V41 +
>      V42 + V43 + V44 + V45 + V46 + V47 + V48 + V49 + V50 + V51 +
>     V52 + V53 + V54 + V55 + V56 + V57 + V58 + V59 + V60 + V61 +
>     V62 + V63 + V64 + V65 + V66 + V67 + V68 + V69 + V70 + V71 +
>     V72 + V73 + V74 + V75 + V76 + V77 + V78 + V79 + V80 + V81 +
>     V82 + V83 + V84 + V85 + V86 + V87 + V88 + V89 + V90 + V91 +
>     V92 + V93 + V94 + V95 + V96 + V97 + V98 + V99 + V100 + V101 +
>     V102 + V103 + V104 + V105 + V106 + V107 + V108 + V109 + V110 +
>    V111 + V112 + V113 + V114 + V115 + V116 + V117 + V118 + V119 +
>    V120 + V121 + V122 + V123 + V124 + V125 + V126 + V127 + V128 +
>    V129 + V130 + V131 + V132 + V133 + V134 + V135 + V136 + V137 +
>    V138 + V139 + V140 + V141 + V142 + V143 + V144 + V145 + V146 +
>    V147 + V148 + V149 + V150 + V151 + V152 + V153 + V154 + V155 +
>     V156 + V157 + V158 + V159 + V160 + V161 + V162 + V163 + V164 +
>    V165 + V166 + V167 + V168 + V169 + V170 + V171 + V172 + V173 +
>     V174 + V175 + V176 + V177 + V178 + V179 + V180 + V181 + V182 +
>     V183 + V184 + V185 + V186 + V187 + V188 + V189 + V190 + V191 +
>     V192 + V193 + V194 + V195 + V196 + V197 + V198 + V199 + V200 +
>     V201 + V202 + V203 + V204 + V205 + V206 + V207 + V208 + V209 +
>     V210 + V211 + V212 + V213 + V214 + V215 + V216 + V217 + V218 +
>   V219 + V220 + V221 + V222 + V223 + V224 + V225 + V226 + V227 +
>      V228 + V229 + V230 + V231 + V232 + V233 + V234 + V235 + V236 +
>      V237 + V238 + V239 + V240 + V241 + V242 + V243 + V244 + V245 +
>      V246 + V247 + V248 + V249 + V250 + V251 + V252 + V253 + V254 +
>      V255 + V256 + V257 + V258 + V259 + V260 + V261 + V262 + V263 +
>      V264 + V265 + V266 + V267 + V268 + V269 + V270 + V271 + V272 +
>      V273 + V274 + V275 + V276 + V277 + V278 + V279 + V280 + V281 +
>      V282 + V283 + V284 + V285 + V286 + V287 + V288 + V289 + V290 +
>   V291 + V292 + V293 + V294 + V295 + V296 + V297 + V298 + V299 +
>   V300, data = x, family = binomial())
>
> but pasting it as a single line gives a syntax  error.
>
>
> 	-thomas
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Mon Apr 15 11:12:41 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Mon, 15 Apr 2002 12:12:41 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151012.MAA07652@pubhealth.ku.dk>

Found one that stumped me.  I did a search on R-bugs for the
string "d-p-q-r-tests", and found zero entries in all categories 
(I don't think I secretly gave it a regex).

Did the usual configure, make, make check on OpenBSD 3.0, and 
encountered this message on d-p-q-r-tests.Rout:

running code in `d-p-q-r-tests.R' ... OK
comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
< [1] "`is.NA' value mismatches: 800 in current, 0  in target"
< Warning message:
< NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
---
> [1] TRUE
315,317c313
< [1] "`is.NA' value mismatches: 4 in current, 2  in target"
< Warning message:
< NaNs produced in: exp(z)
---
> [1] TRUE
 OK

If you're not too busy, I'd love to provide you with whatever you
need to look at this more closely than my untrained eyes can.
config.cache?  d-p-q-r-tests.Rout?  Anything else?

> version
         _
	 platform i386-unknown-openbsd3.0
	 arch     i386
	 os       openbsd3.0
	 system   i386, openbsd3.0
	 status
	 major    1
	 minor    4.1
	 year     2002
	 month    01
	 day      30
	 language R


Cheers

Jason
-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 15 11:46:46 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 15 Apr 2002 12:46:46 +0200 (MET DST)
Subject: [Rd] make check fails d-p-q-r-tests.R - OpenBSD 3.0 (PR#1461)
Message-ID: <200204151046.MAA07982@pubhealth.ku.dk>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> Found one that stumped me.  I did a search on R-bugs for the
    Jason> string "d-p-q-r-tests", and found zero entries in all categories 
    Jason> (I don't think I secretly gave it a regex).

    Jason> Did the usual configure, make, make check on OpenBSD 3.0, and 
    Jason> encountered this message on d-p-q-r-tests.Rout:

    Jason> running code in `d-p-q-r-tests.R' ... OK
    Jason> comparing `d-p-q-r-tests.Rout' to `./d-p-q-r-tests.Rout.save' ...251,253c251
    Jason> < [1] "`is.NA' value mismatches: 800 in current, 0  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(pab <- dbeta(p, a, b, log = TRUE))
    Jason> ---
    >> [1] TRUE
    Jason> 315,317c313
    Jason> < [1] "`is.NA' value mismatches: 4 in current, 2  in target"
    Jason> < Warning message:
    Jason> < NaNs produced in: exp(z)
    Jason> ---
    >> [1] TRUE
    Jason> OK

    Jason> If you're not too busy, I'd love to provide you with whatever you
    Jason> need to look at this more closely than my untrained eyes can.
    Jason> config.cache?  d-p-q-r-tests.Rout?  Anything else?

Actually, we'd be very grateful if you could run these with
R-devel aka "R pre1.5.0" instead.

You can get a snapshot using rsync (or the tar file), see
    http://stat.ethz.ch/CRAN/sources.html

If you see the same problem (or also with 1.4.1)
look at the tests/d-p-q files
probably start R and try things like

 z <- c(-Inf,Inf,NA,NaN, rt(1000, df=2))
 z.ok <- z > -37.5 | !is.finite(z)
 for(df in 1:10)
    if(!is.logical(all.equal(pt(z, df), 1 - pt(-z,df), tol= 1e-15)))
      cat("ERROR -- df = ", df, "\n")

 c(pz <- pnorm(z), 1 - pnorm(z, lower=FALSE))
 c(pz, pnorm(-z, lower=FALSE))
 c(log(pz[z.ok]),  pnorm(z[z.ok], log=TRUE))


because these are around line 315 of tests/d-p-q-r-tests.Rout.save
and the second problem happened around there.

[A more desperate option would be to offer a login into your computer to
 someone from the R core team ...]

Thanks for helping us to have R running correctly on OpenBSD 3.0,
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 12:48:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 13:48:39 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
Message-ID: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>


As of 19:00 GMT we'll declare a feature freeze on the set of
recommended packages. We will then have one week to ferret out as many
problems as we can before final code freeze and platform testing. 

At the same time R-base is code-frozen, i.e. only critical bugs will
be fixed.

If you want to help making R 1.5.0 as bug-free as possible, it could
be a good idea to install the set of recommended packages at

http://cran.r-project.org/src/contrib/1.5.0/recommended

and try your favourite scripts with them. Please report if you find
any bugs. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 15 13:19:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Apr 2002 14:19:52 +0200
Subject: [Rd] Feature freeze on recommended packages coming up
In-Reply-To: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
References: <x2it6tnpwo.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2ads5nogn.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> If you want to help making R 1.5.0 as bug-free as possible, it could
> be a good idea to install the set of recommended packages at
> 
> http://cran.r-project.org/src/contrib/1.5.0/recommended

Sorry, make that 

http://cran.r-project.org/src/contrib/1.5.0/Recommended
                                            ^
                                         capital R

The recommended packages are those that we try to keep in sync with
the main distribution of R and request be included in binary packages.
The current set is:

 [   ]  KernSmooth_2.22-7.tar.gz 31-Mar-2002 10:20    26k
 [   ]  VR_7.0-1.tar.gz          12-Apr-2002 10:02   457k
 [   ]  boot_1.2-8.tar.gz        12-Apr-2002 10:16   178k
 [   ]  cluster_1.4-2.tar.gz     31-Mar-2002 09:40   111k
 [   ]  foreign_0.5-2.tar.gz     31-Mar-2002 09:39   179k
 [   ]  grid_0.6.tar.gz          09-Apr-2002 18:15   136k
 [   ]  lattice_0.5-0.tar.gz     10-Apr-2002 11:54    88k
 [   ]  mgcv_0.7-2.tar.gz        31-Mar-2002 09:39   132k
 [   ]  nlme_3.1-25.tar.gz       05-Apr-2002 09:34   509k
 [   ]  rpart_3.1-6.tar.gz       29-Mar-2002 09:33   108k
 [   ]  survival_2.9-1.tar.gz    14-Apr-2002 18:36   986k 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Apr 16 17:41:12 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 16 Apr 2002 12:41:12 -0400
Subject: [Rd] unbalanced braces
Message-ID: <3CBC5428.DD76AE8F@bank-banque-canada.ca>

Version 1.5.0 Under development (unstable) (2002-04-15):

The following in an Rd file fails checks with an indication that there are
unbalanced braces:

\description{
  specified in any of the addresses by enclosing them in double (\code{"})
quotes. Please do not use single (\code{'}) quotes.
}

The failure seems to be cause by the first line. (Perhaps there is a better way
for me to indicate the double quote.)

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Apr 17 03:33:52 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Tue, 16 Apr 2002 22:33:52 -0400
Subject: [Rd] Using strwidth before plotting
Message-ID: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>

In the plotcorr() function in the ellipse package, I want to position
things differently depending on the size of the labels.  I can use
strwidth to find out the length of the labels, but only when there's a
plot window open:  it won't open one.

Question:  What function call says:  make sure there's a window open
(i.e. do what plot() does before it starts plotting)?

I don't think I can use plot.new() or frame(), because I don' t want
to leave a blank page in the plot history if there was already a
window open.

Duncan Murdoch


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 07:39:22 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 07:39:22 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <29npbusqe65s3n0f0so2hi69mf2qont0ud@4ax.com>
Message-ID: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>

On Tue, 16 Apr 2002, Duncan Murdoch wrote:

> In the plotcorr() function in the ellipse package, I want to position
> things differently depending on the size of the labels.  I can use
> strwidth to find out the length of the labels, but only when there's a
> plot window open:  it won't open one.
>
> Question:  What function call says:  make sure there's a window open
> (i.e. do what plot() does before it starts plotting)?

Call par(), e.g. par("font")

> I don't think I can use plot.new() or frame(), because I don' t want
> to leave a blank page in the plot history if there was already a
> window open.

(That is indeed what happens.)

You can find if there is a device open by looking at length(.Devices) > 1
or dev.cur() > 1.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Apr 17 08:03:36 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 17 Apr 2002 08:03:36 +0100 (BST)
Subject: [Rd] Using strwidth before plotting
In-Reply-To: <Pine.GSO.4.44.0204170731210.28088-100000@auk.stats>
Message-ID: <Pine.GSO.4.44.0204170750360.28140-100000@auk.stats>

On Wed, 17 Apr 2002, Prof Brian D Ripley wrote:

> On Tue, 16 Apr 2002, Duncan Murdoch wrote:
>
> > In the plotcorr() function in the ellipse package, I want to position
> > things differently depending on the size of the labels.  I can use
> > strwidth to find out the length of the labels, but only when there's a
> > plot window open:  it won't open one.
> >
> > Question:  What function call says:  make sure there's a window open
> > (i.e. do what plot() does before it starts plotting)?
>
> Call par(), e.g. par("font")
>
> > I don't think I can use plot.new() or frame(), because I don' t want
> > to leave a blank page in the plot history if there was already a
> > window open.
>
> (That is indeed what happens.)

However, you could use plot.new(); par(new=TRUE)

> You can find if there is a device open by looking at length(.Devices) > 1
> or dev.cur() > 1.

What the internal code does can be reproduced in R by

if(length(.Devices) == 1 || dev.cur() == 1) {
    dev <- getOption("device")
    if(is.character(dev) && length(dev) > 0) get(dev)()
}

dev.cur includes a check that .Devices exists, but it is created in
InitGraphics before interactive R code is accepted, so the check must
always succeed and the above code is safe.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Wed Apr 17 12:24:59 2002
From: egonw@sci.kun.nl (Egon Willighagen)
Date: Wed, 17 Apr 2002 13:24:59 +0200
Subject: [Rd] Highlighting in KDE editor Kate 2.0 (KDE 3.0)
Message-ID: <200204171324.59561.egonw@sci.kun.nl>


Hi all,

Some time ago a posted a message about a highlighting module for R.
I've now made one for Kate 2.0 (KDE 3.0) too. They can both be downloaded 
from:

http://www-sigma.sci.kun.nl/Persoonlijk/egonw/r-kate/

Regards,

Egon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jasont@indigoindustrial.co.nz  Thu Apr 18 13:13:30 2002
From: jasont@indigoindustrial.co.nz (jasont@indigoindustrial.co.nz)
Date: Thu, 18 Apr 2002 14:13:30 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
Message-ID: <200204181213.OAA05366@pubhealth.ku.dk>


strptime() mysteriously adds a day to a date, unless the year
is specified.  Tested on:
Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
Windows - R version 1.4.1

Bug isn't found on OpenBSD, R version 1.4.1.

Transcript:

R : Copyright 2002, The R Development Core Team
Version 1.4.1  (2002-01-30)

...

> ## BUG:
> ## strptime seems to add a day to the request, unless the year 
> ## is added as part of the format. 
> strptime("11 Apr 22:00",format="%d %b %H:%M")
[1] "2002-04-12 22:00:00 NZST"
> ## note - we gained a day.  
> 
> ## goes away if we include the year
> strptime("11 Apr 22:00 2002",format="%d %b %H:%M %Y")
[1] "2002-04-11 22:00:00 NZST"


> ## R 1.4.1, running on Linux RH 6.0.  
> version
         _                
platform i586-pc-linux-gnu
arch     i586             
os       linux-gnu        
system   i586, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                


> ## Bug also appears in R-devel (downloaded 16 April 2002).
> ## For R-devel:
> version
platform i586-pc-linux-gnu           
arch     i586                        
os       linux-gnu                   
system   i586, linux-gnu             
status   Under development (unstable)
major    1                           
minor    5.0                         
year     2002                        
month    04                          
day      16                          
language R                           

> ## Have also reproduced identical results in the Windows verion
> version
_              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R         

> ##
> ## Unable to reproduce bug under OpenBSD 3.0
> version
_
platform i386-unknown-openbsd3.0
arch     i386
os       openbsd3.0
system   i386, openbsd3.0
status
major    1
minor    4.1
year     2002
month    01
day      30
language R


> ## <speculation>
> ## This looks very OS specific.
> ## </speculation>



-- 
Indigo Industrial Controls Ltd.
64-21-343-545
jasont@indigoindustrial.co.nz

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Apr 18 13:41:57 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 18 Apr 2002 14:41:57 +0200
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and Windows (so far) (PR#1466)
In-Reply-To: <200204181213.OAA05366@pubhealth.ku.dk>
References: <200204181213.OAA05366@pubhealth.ku.dk>
Message-ID: <15550.48917.887461.113981@gargle.gargle.HOWL>

>>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:

    Jason> strptime() mysteriously adds a day to a date, unless the year
    Jason> is specified.  Tested on:
    Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
    Jason> Windows - R version 1.4.1

    Jason> Bug isn't found on OpenBSD, R version 1.4.1.

I confirm the bug (R-devel, Redhat 7.1)
To reproduce, it's sufficient to work with 
"%d %B" or "%d %b" .

What happens is that January and February work okay, and all
months from March produce the problem,

e.g.

> strptime("28 Feb",format="%d %b")# ok
[1] "2002-02-28"
> strptime("19 March",format="%d %B")# wrong
[1] "2002-03-20"

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:08:26 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 15:08:26 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1467)
Message-ID: <200204181308.PAA06220@pubhealth.ku.dk>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:07:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:07:44 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <15550.48917.887461.113981@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>

On Thu, 18 Apr 2002, Martin Maechler wrote:

> >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
>
>     Jason> strptime() mysteriously adds a day to a date, unless the year
>     Jason> is specified.  Tested on:
>     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
>     Jason> Windows - R version 1.4.1
>
>     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
>
> I confirm the bug (R-devel, Redhat 7.1)
> To reproduce, it's sufficient to work with
> "%d %B" or "%d %b" .
>
> What happens is that January and February work okay, and all
> months from March produce the problem,
>
> e.g.
>
> > strptime("28 Feb",format="%d %b")# ok
> [1] "2002-02-28"
> > strptime("19 March",format="%d %B")# wrong
> [1] "2002-03-20"

The issue is that an unspecified year is assumed *by the IS* to be 1900, a
leap year. I'm not sure why glibc does this when the tm_year field is not
being set, but it confidently says this is day 101 of the year, and that's
the result you get.

The only portable workaround is to give the year: there is (at least in
R-devel) a warning in the help file about this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 18 14:24:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 18 Apr 2002 14:24:00 +0100 (BST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 Windows (so far) (PR#1466)
In-Reply-To: <Pine.LNX.4.31.0204181353250.32748-100000@gannet.stats>
Message-ID: <Pine.LNX.4.31.0204181421170.3919-100000@gannet.stats>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
>
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
>
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. I'm not sure why glibc does this when the tm_year field is not

Well, I thought that was it, but as 1900 was not a leap year, it's
stranger still.

> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.

(For 11 April, BTW.)

> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
>
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:24:43 2002
From: gb@stat.umu.se (=?iso-8859-1?Q?G=F6ran_Brostr=F6m?=)
Date: Thu, 18 Apr 2002 15:24:43 +0200 (CEST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and
 (PR#1467)
In-Reply-To: <200204181308.PAA06220@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0204181513030.5841-100000@tal.stat.umu.se>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Apr 18 14:30:12 2002
From: gb@stat.umu.se (gb@stat.umu.se)
Date: Thu, 18 Apr 2002 15:30:12 +0200 (MET DST)
Subject: [Rd] strptime mysteriously adds a day - 0S-specific: Linux and (PR#1468)
Message-ID: <200204181330.PAA06545@pubhealth.ku.dk>

On Thu, 18 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Thu, 18 Apr 2002, Martin Maechler wrote:
> 
> > >>>>> "Jason" == Jason Turner <jasont@indigoindustrial.co.nz> writes:
> >
> >     Jason> strptime() mysteriously adds a day to a date, unless the year
> >     Jason> is specified.  Tested on:
> >     Jason> Linux (RedHat 6.0) - R version 1.4.1 and R-devel.
> >     Jason> Windows - R version 1.4.1
> >
> >     Jason> Bug isn't found on OpenBSD, R version 1.4.1.
> >
> > I confirm the bug (R-devel, Redhat 7.1)
> > To reproduce, it's sufficient to work with
> > "%d %B" or "%d %b" .
> >
> > What happens is that January and February work okay, and all
> > months from March produce the problem,
> >
> > e.g.
> >
> > > strptime("28 Feb",format="%d %b")# ok
> > [1] "2002-02-28"
> > > strptime("19 March",format="%d %B")# wrong
> > [1] "2002-03-20"
> 
> The issue is that an unspecified year is assumed *by the IS* to be 1900, a
> leap year. 

Sorry, 1900 is not a leap year. Maybe glibc doesn't know that? :-)
However, 'cal 1900' (on Linux) gives a correct answer.
 
Gran 

> I'm not sure why glibc does this when the tm_year field is not
> being set, but it confidently says this is day 101 of the year, and that's
> the result you get.
> 
> The only portable workaround is to give the year: there is (at least in
> R-devel) a warning in the help file about this.
> 
> 

-- 
 Gran Brostrm                      tel: +46 90 786 5223
 professor                           fax: +46 90 786 6614
 Department of Statistics            http://www.stat.umu.se/egna/gb/
 Ume University
 SE-90187 Ume, Sweden             e-mail: gb@stat.umu.se


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 19 12:19:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 19 Apr 2002 12:19:07 +0100 (BST)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...

Unfortunately it appears not to.  (It says it implements a subset for use
with gnuplot, but even then I don't see how it is enough.) The font
metrics are always returned as false.  I wondered how it was going to do
this without the TrueType fonts in evidence ....

R's graphics model depends pretty crucially on accurate font metrics, and
text positioning is often the trickiest part of writing a graphics driver.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Apr 19 15:32:14 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 19 Apr 2002 10:32:14 -0400 (EDT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.31.0204191211210.6742-100000@gannet.stats>
Message-ID: <Pine.LNX.4.30.0204191031350.859-100000@bolker.zoo.ufl.edu>


  Oh well, too bad ... sorry if I got anyone's hopes up unnecessarily.

  Ben Bolker

On Fri, 19 Apr 2002 ripley@stats.ox.ac.uk wrote:

> On Fri, 29 Mar 2002, Ben Bolker wrote:
>
> >
> >   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> > the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> > (LGPL) library that implements the EMF API ...
>
> Unfortunately it appears not to.  (It says it implements a subset for use
> with gnuplot, but even then I don't see how it is enough.) The font
> metrics are always returned as false.  I wondered how it was going to do
> this without the TrueType fonts in evidence ....
>
> R's graphics model depends pretty crucially on accurate font metrics, and
> text positioning is often the trickiest part of writing a graphics driver.
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gray@jimmy.harvard.edu  Sat Apr 20 21:21:46 2002
From: gray@jimmy.harvard.edu (gray@jimmy.harvard.edu)
Date: Sat, 20 Apr 2002 22:21:46 +0200 (MET DST)
Subject: [Rd] color of axis lines (PR#1470)
Message-ID: <200204202021.WAA19319@pubhealth.ku.dk>

Full_Name: Robert Gray
Version: 1.4.1
OS: Windows NT 4.0
Submission from: (NULL) (155.52.45.116)


I can't seem to get axis tick marks in any color except black (I want to make
plots for a slide presentation using a dark background.)  Below is a simple
example.  I have tried this using postscript in the Windows version of R 1.4.1
and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
problem occurs in the win.metafile driver.

u1 <- runif(10)
u2 <- runif(10)
postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
    col.axis='white',col.main='white',col.lab='white',col.sub='white')
palette(c('white','red','yellow','green','cyan','orange'))
plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
     col='white',col.axis='white') 
points(u1,u2,col=3)
dev.off()


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:41:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 20 Apr 2002 23:41:17 +0200
Subject: [Rd] color of axis lines (PR#1470)
In-Reply-To: <200204202021.WAA19319@pubhealth.ku.dk>
References: <200204202021.WAA19319@pubhealth.ku.dk>
Message-ID: <x2d6wucaki.fsf@blueberry.kubism.ku.dk>

gray@jimmy.harvard.edu writes:

> Full_Name: Robert Gray
> Version: 1.4.1
> OS: Windows NT 4.0
> Submission from: (NULL) (155.52.45.116)
> 
> 
> I can't seem to get axis tick marks in any color except black (I want to make
> plots for a slide presentation using a dark background.)  Below is a simple
> example.  I have tried this using postscript in the Windows version of R 1.4.1
> and a version of R 1.4.0 compiled on a Sun-Solaris system.  Also, the same
> problem occurs in the win.metafile driver.
> 
> u1 <- runif(10)
> u2 <- runif(10)
> postscript(file='f:/ecog/statpres/webreg/plot3.ps',pointsize=18)
> par(font=2,font.axis=2,font.lab=2,lwd=2.5,bg='midnightblue',col='white',
>     col.axis='white',col.main='white',col.lab='white',col.sub='white')
> palette(c('white','red','yellow','green','cyan','orange'))
> plot(u1,u2,type='n',xlab="Time",ylab='Proportion',main='',
>      col='white',col.axis='white') 
> points(u1,u2,col=3)
> dev.off()

You're looking for the fg parameter. 

(It does say so in help(par), I don't think there's a bug.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Apr 20 22:51:36 2002
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 20 Apr 2002 23:51:36 +0200 (MET DST)
Subject: [Rd] Rprof segfault (PR#1471)
Message-ID: <200204202151.XAA19530@pubhealth.ku.dk>


> Rprof("")
Segmentation fault (core dumped)

This happens from trying to close a file that was never opened.

The fix is likely trivial, but we're in code freeze and it is hardly a
critical bug, so I'm just filing it for now.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Sun Apr 21 06:15:04 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 Apr 2002 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200204210515.g3L5F4O08542@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1437 *
Subject: [DOC] as.call 
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 05 Apr 2002 17:25:49 +0200
* PR# 1442 *
Subject: Undocumenten in: R INSTALL --help
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Mon, 8 Apr 2002 17:19:20 +0200 (CEST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1469 *
Subject: Are you familiar with residual income?
From: "United Networks" <P.Brooks@easynet.be>
Date: Sat, 20 Apr 2002 01:53:23 -1900
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1471 *
Subject: Rprof segfault
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 20 Apr 2002 23:48:01 +0200
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Apr 22 11:30:58 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 Apr 2002 12:30:58 +0200 (MET DST)
Subject: [Rd] predict.*bSpline() bugs extrapolating for deriv >= 1 (PR#1473)
Message-ID: <200204221030.MAA25830@pubhealth.ku.dk>

I've already fixed the bugs, but as with the last one, this is
not critical enough to allow breaking current R-devel's code
freeze.  I hope I will have corrected it for 1.5.1..

## Here is code reproducing the problems;
## I use  try(.) whenever I know the current versions of R would
## give an error:

library(splines)

x <- c(1:3,5:6)
y <- c(3:1,5:6)
(isP <- interpSpline(x,y))# poly-spline representation
(isB <- interpSpline(x,y, bSpl = TRUE))# B-spline repr.

xo <- c(0, x, 10)# x + outside points

options(digits = 4)
for(der in 0:3) # deriv=3 fails!
    print(formatC(try(predict(isP, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.npolySpline(isP, xo, deriv = der) :
##- 	subscript out of bounds


## Same for B-spline (instead of Polynom.):
for(der in 0:3)  # deriv=3 fails!
    print(formatC(try(predict(isB, xo, deriv = der)$y), wid=7,format="f"),
          quote = FALSE)
##- Error in predict.nbSpline(isB, xo, deriv = der) :
##- 	subscript out of bounds

## Here, also for deriv= 1 & 2,
## the value left to first proper knot is NA (and should not) <<< ! >>>

------
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From strach.joachim@web.de  Mon Apr 22 22:21:14 2002
From: strach.joachim@web.de (strach.joachim@web.de)
Date: Mon, 22 Apr 2002 23:21:14 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204222121.XAA00829@pubhealth.ku.dk>

Full_Name: Joachim H. Strach
Version: 1.3.1
OS: Windows 98 Second Edition
Submission from: (NULL) (132.230.131.220)


I am using the tcltk package.
Error-example:
----
  library(tcltk)
  top<-tktoplevel()
  but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
  tkpack(but)
----
then press the Quit-Button. 
On my Platform there will be a execution fault with following message:
----
RGUI verursachte einen Fehler durch eine ungltige Seite
in Modul TK83.DLL bei 0167:11450066.
Register:
EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
ECX=43a00000 DS=016f ESI=00000000 FS=1257
EDX=43a00000 ES=016f EDI=00000001 GS=0000
Bytes bei CS:EIP:
8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
Stapelwerte:
43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
----
R will be closed, but this error message is not really nice )-;  .

That's it.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 22 23:08:02 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 22 Apr 2002 15:08:02 -0700
Subject: [Rd] could we add an argument to suppress printing of levels for print.factor()?
Message-ID: <871yd7jsjh.fsf@jeeves.blindglobe.net>


could we add an argument to suppress printing of levels for
print.factor()?  i.e.:

 
print.factor <-
function (x, quote = FALSE, print.levels = TRUE, ...)           ## MODIFIED
{
    if (length(x) <= 0) 
        cat("factor(0)\n")
    else print(as.character(x), quote = quote, ...)
    if (print.levels) {                                         ## ADDED
        cat("Levels: ", paste(levels(x), collapse = " "), "\n")
    }                                                           ## ADDED  
    invisible(x)
}

I've done this for my local work, but wondering if this is useful in
general?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 22 23:12:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 00:12:06 +0200
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
In-Reply-To: <200204222121.XAA00829@pubhealth.ku.dk>
References: <200204222121.XAA00829@pubhealth.ku.dk>
Message-ID: <x2u1q34c3t.fsf@blueberry.kubism.ku.dk>

strach.joachim@web.de writes:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
> 
> 
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button. 
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00 
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864 
> ----
> R will be closed, but this error message is not really nice )-;  .
> 
> That's it.

A bug report on 1.3.1, one week before 1.5.0, is a bit late don't you
think?

I cannot check Windows versions right now, but pre-1.5.0 on Linux
doesn't crash. However, it does leave the terminal in noecho mode.

Basically, just don't do that for now... q() and probably others do
not expect to be invoked from a callback. I don't think there's a nice
alternative implementation of a quit button without blocking the
console. (By waiting for a window event or tcl variable change and
then executing q()). 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 07:51:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 08:51:11 +0200 (MET DST)
Subject: [Rd] Quit R by pressing button (tcltk) (PR#1475)
Message-ID: <200204230651.IAA02076@pubhealth.ku.dk>

R 1.3.1 is rather old, but this is a bug report on Tcl/Tk, not on R.
(Notice which DLL failed!)

I get no failure on 1.4.1 nor 1.5.0pre under Windows 2000.

Please try updating your R, and perhaps also your Tcl/Tk (mine is
8.3.4.2-1, which was the latest last week).


On Mon, 22 Apr 2002 strach.joachim@web.de wrote:

> Full_Name: Joachim H. Strach
> Version: 1.3.1
> OS: Windows 98 Second Edition
> Submission from: (NULL) (132.230.131.220)
>
>
> I am using the tcltk package.
> Error-example:
> ----
>   library(tcltk)
>   top<-tktoplevel()
>   but<-tkbutton(top,text="Quit",command=function() {q(save="no")} )
>   tkpack(but)
> ----
> then press the Quit-Button.
> On my Platform there will be a execution fault with following message:
> ----
> RGUI verursachte einen Fehler durch eine ungltige Seite
> in Modul TK83.DLL bei 0167:11450066.
> Register:
> EAX=8187f731 CS=0167 EIP=11450066 EFLGS=00010206
> EBX=112e0000 SS=016f ESP=008dfa70 EBP=008dfa7c
> ECX=43a00000 DS=016f ESI=00000000 FS=1257
> EDX=43a00000 ES=016f EDI=00000001 GS=0000
> Bytes bei CS:EIP:
> 8b 42 08 3b 45 f8 75 0a 8b 4d f4 c7 41 08 00 00
> Stapelwerte:
> 43a00000 0063d004 005bb094 008dfb04 114a247d 006802e4 00000000 00000000 00000000
> 008dfab4 00000011 0000026f 00000000 00611928 0063c864 0063c864
> ----
> R will be closed, but this error message is not really nice )-;  .
>
> That's it.
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oliver.niggemann@acterna.com  Tue Apr 23 08:41:42 2002
From: oliver.niggemann@acterna.com (oliver.niggemann@acterna.com)
Date: Tue, 23 Apr 2002 09:41:42 +0200 (MET DST)
Subject: [Rd] Bug: persp and colors (PR#1476)
Message-ID: <200204230741.JAA02655@pubhealth.ku.dk>

Full_Name: Oliver Niggemann
Version: Windows 1.4 patched
OS: Windows NT 4.0
Submission from: (NULL) (141.169.250.14)


Hello,

I am working with the persp command. I want to change to color of the facets
according
to their z-value. The colors seems to be transposed, i.e. the color of a facet A
seems
to be used for a facet B which is a (defined?) way off....

An example:

nx <- 21 
ny <- 21 
x <- seq(-1, 1, length = nx) 
y <- seq(-1, 1, length = ny)
z <- outer(x, y, function(x,y) x^2 + y^2) 
hgt <- z / max(z) 
persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)

Now the z-value should define the color, but the color pattern seems to be
moved.

Thanks,
    Oliver Niggemann

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From richard_raubertas@merck.com  Tue Apr 23 14:55:34 2002
From: richard_raubertas@merck.com (richard_raubertas@merck.com)
Date: Tue, 23 Apr 2002 15:55:34 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231355.PAA08208@pubhealth.ku.dk>

The following command,

temp <- read.table("c:/rfr/r/test.txt")

reads the text file "test.txt", which contains the following lines:

21437
21438
21419-2
21420-2
21421-2
21422-2

and produces the following result:

> temp
        V1
1 21437+0i
2 21438+0i
3     0+0i
4     0+0i
5     0+0i
6     0+0i
> 

These "numbers" are actually sample ID's, and I expected the presence of the
hyphen would
cause temp to be character or a factor, but it ends up as complex numbers.
System info:

platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

Following is a diagnosis of the problem by one of my colleagues:

> From: 	Huntsinger, Reid  
> Sent:	Monday, April 22, 2002 5:15 PM
> To:	Raubertas, Richard
> Subject:	RE: R problem
> 
> [ ... ] This happens 
> because of the attempt to convert. The function type.convert 
> is called on columns with unspecified types; this tries to 
> convert to "logical, integer, numeric or complex" in that 
> order (first one that is successful wins). You have some ids 
> like 21428-2 which type.convert doesn't like as numeric but 
> will treat as complex. This in turn is due to R's hand-rolled 
> "strtoc" function, which returns 0+0i for something it 
> doesn't like. This is a valid value, so the conversion 
> "works", and all values are converted this way... 
> 
> You or I should probably alert the R people. That's not very 
> good behavior.


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 15:48:27 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 16:48:27 +0200 (MET DST)
Subject: [Rd] Website ? FAST ! (PR#1478)
Message-ID: <200204231448.QAA08683@pubhealth.ku.dk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From email@email.com  Tue Apr 23 16:25:22 2002
From: email@email.com (email@email.com)
Date: Tue, 23 Apr 2002 15:25:22
Subject: [Rd] Website ? FAST !
Message-ID: <auto-000001868174@albion.co.uk>


Thankyou for taking the time to read this email,

HoLmeComputing is offering you a special offer on website hosting and domain name registration.

Set on a Windows 2000 secure server, running ASP, Frontpage and noe ASP.NET for the advanced users.

Hosting from 1 per month
Domain name registration from 8

We also conduct high end NO fuss website design to meet your needs.

Please reply to this email for a full price list.

Regards

Gavin Holmes
www.holmecomputing.com
E: holmecomputing@hotmail.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 23 18:03:07 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Apr 2002 19:03:07 +0200
Subject: [Rd] Bug in read.table() (PR#1477)
In-Reply-To: <200204231355.PAA08208@pubhealth.ku.dk>
References: <200204231355.PAA08208@pubhealth.ku.dk>
Message-ID: <x2u1q2bb5g.fsf@blueberry.kubism.ku.dk>

richard_raubertas@merck.com writes:

> > From: 	Huntsinger, Reid  
> > Sent:	Monday, April 22, 2002 5:15 PM
> > To:	Raubertas, Richard
> > Subject:	RE: R problem
> > 
> > [ ... ] This happens 
> > because of the attempt to convert. The function type.convert 
> > is called on columns with unspecified types; this tries to 
> > convert to "logical, integer, numeric or complex" in that 
> > order (first one that is successful wins). You have some ids 
> > like 21428-2 which type.convert doesn't like as numeric but 
> > will treat as complex. This in turn is due to R's hand-rolled 
> > "strtoc" function, which returns 0+0i for something it 
> > doesn't like. This is a valid value, so the conversion 
> > "works", and all values are converted this way... 
> > 
> > You or I should probably alert the R people. That's not very 
> > good behavior.

Right, but not something we can fix for 1.5.0. Another version of the
same effect is

> scan(what=0+0i)
1: 21419-2
2: Read 1 items
[1] 0+0i

A workaround would be to use the colClasses argument, or as.is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 23 18:12:48 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 23 Apr 2002 19:12:48 +0200 (MET DST)
Subject: [Rd] Bug in read.table() (PR#1477)
Message-ID: <200204231712.TAA09406@pubhealth.ku.dk>

On 23 Apr 2002, Peter Dalgaard BSA wrote:

> richard_raubertas@merck.com writes:
>
> > > From: 	Huntsinger, Reid
> > > Sent:	Monday, April 22, 2002 5:15 PM
> > > To:	Raubertas, Richard
> > > Subject:	RE: R problem
> > >
> > > [ ... ] This happens
> > > because of the attempt to convert. The function type.convert
> > > is called on columns with unspecified types; this tries to
> > > convert to "logical, integer, numeric or complex" in that
> > > order (first one that is successful wins). You have some ids
> > > like 21428-2 which type.convert doesn't like as numeric but
> > > will treat as complex. This in turn is due to R's hand-rolled
> > > "strtoc" function, which returns 0+0i for something it
> > > doesn't like. This is a valid value, so the conversion
> > > "works", and all values are converted this way...
> > >
> > > You or I should probably alert the R people. That's not very
> > > good behavior.
>
> Right, but not something we can fix for 1.5.0. Another version of the
> same effect is
>
> > scan(what=0+0i)
> 1: 21419-2
> 2: Read 1 items
> [1] 0+0i
>
> A workaround would be to use the colClasses argument, or as.is.

Actually it is already fixed: it was a very simple fix. The problem was
being detected:  it was just not being reported.  As this was just a case
of what is done in an error condition (it can't affect any valid input) I
thought it safe to fix a week before release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Apr 24 01:07:46 2002
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Wed, 24 Apr 2002 12:07:46 +1200
Subject: [Rd] Bug: persp and colors (PR#1476)
References: <200204230741.JAA02655@pubhealth.ku.dk>
Message-ID: <010e01c1eb24$0fef5e20$7632d882@stat.auckland.ac.nz>

Hi


> I am working with the persp command. I want to change to color of the
facets
> according
> to their z-value. The colors seems to be transposed, i.e. the color of a
facet A
> seems
> to be used for a facet B which is a (defined?) way off....
>
> An example:
>
> nx <- 21
> ny <- 21
> x <- seq(-1, 1, length = nx)
> y <- seq(-1, 1, length = ny)
> z <- outer(x, y, function(x,y) x^2 + y^2)
> hgt <- z / max(z)
> persp(x, y, z, col = gray(1 - hgt), theta = 70, phi = 40, expand = 0.4)
>
> Now the z-value should define the color, but the color pattern seems to be
> moved.


I don't think this is a bug -- I think the problem is that the surface
produced for the z of dimension 21x21 has only 20x20 facets.  For example,
the following is not a solution, but it shows that a 20x20 colour matrix
produces the expected result ...

    persp(x, y, z, col = gray(hgt[1:20,1:20]), theta = 0, phi = 40, expand =
0.4)

... now, what you really want I guess is to calculate hgt to be some
interpolation of the four z values at the four corners of each face.  I am
due somewhere so this calculation is left as an exercise ...

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From csprin@brandybuck.ca.sandia.gov  Thu Apr 25 04:55:14 2002
From: csprin@brandybuck.ca.sandia.gov (Clayton Springer)
Date: Wed, 24 Apr 2002 20:55:14 -0700
Subject: [Rd] understanding and resolving seg faults
Message-ID: <20020424205513.A32728@brandybuck>

Dear r-devel,

I am mutating rpart to do calculations on trees.
I am trying to extract information from the tree.

However, I got a seg. fault.


This is the offending line in "rpmatrix.c":  

            deltaI[0][0] = spl->improve;

(Commenting it out cures the seg fault)

I would like some advice on how to debug this.  I have allocated memory
with calloc and deltaI[0][0] should be OK, but apparently not.

thanks for your help,


For those that don't have structure of rpart drilled into their brain:

deltaI is declared in "rpmatrix.c":

void rpmatrix(struct node *me,  Sint *nodecount,   Sint *splitcount,
              Sint *catcount,   Sint *numcat,      double **dsplit,
              Sint **isplit,    Sint **csplit,     double **dnode,
              Sint **inode,     double **deltaI,      int id)
 
rpmatrix is called by "s_to_rp.c" where

ddeltaI is a pointer from an ALLOC call:
 
void s_to_rp2(Sint *n,         Sint *nsplit,    Sint *nnode,     Sint *ncat,
              Sint *numcat,    Sint *maxcat,    Sint *xvals,     Sint *which,
              double *cptable, double *dsplit,  Sint *isplit,    Sint *csplit,
              double *dnode,   double *deltaI,  Sint *inode)

    double   **ddeltaI; /* declaration of ddeltaI */

        ddeltaI = (double **) ALLOC(rp.num_y * rp.num_resp, sizeof(double ));
 
    rpmatrix(tree, nnode, nsplit, ncat, numcat,
                    ddsplit, iisplit, ccsplit, ddnode, iinode,ddeltaI ,1);

s_to_rp2 is called rpart.s


    rp    <- .C("s_to_rp2",
                       as.integer(nobs),
                       as.integer(nsplit),
                       as.integer(nodes),
                       as.integer(ncat),
                       as.integer(cats *!isord),
                       as.integer(max(cats)),
                       as.integer(xval),
                       which = integer(nobs),
                       cptable = matrix(double(numcp*cpcol), nrow=cpcol),
                       dsplit =  matrix(double(1),  nsplit,3),
                       isplit =  matrix(integer(1), nsplit,3),
                       csplit =  catmat,
                       dnode  =  matrix(double(1),  nodes, 3+numresp),
                       deltaI =  matrix(double(1),  nodes, nsplit),
                       inode  =  matrix(integer(1), nodes, 6))
 

 



-- 
Clayton Springer, Ph. D.
Sandia National Laboratories                      csprin@ca.sandia.gov
Biosystems Research Department                    (925) 294-2143
P.O. Box 969, MS 9951                fax:         (925) 294-3020
Livermore, CA, 94551-0969

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From NAVMSE-EMAIL1@email1.ansi.org  Thu Apr 25 07:32:07 2002
From: NAVMSE-EMAIL1@email1.ansi.org (NAV for Microsoft Exchange-EMAIL1)
Date: Thu, 25 Apr 2002 02:32:07 -0400
Subject: [Rd] Norton AntiVirus detected a virus in a message you sent.
Message-ID: <2F81C8110D55D411882A0020356797B201CCE552@email1.ansi.org>

Norton AntiVirus found the "W32.Klez.gen@mm" virus in the attachment
"src.exe".
The file was Deleted.

Recipient of the infected attachment:  StoreManager\Inbox
Subject of the message:  A  WinXP patch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Apr 25 07:45:42 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Apr 2002 07:45:42 +0100 (BST)
Subject: [Rd] understanding and resolving seg faults
In-Reply-To: <20020424205513.A32728@brandybuck>
Message-ID: <Pine.GSO.4.44.0204250732510.24333-100000@auk.stats>

There is no such line in rpart's rpmatrix.c!

My guess is that you are misleading us, and that the segfault is in your
additions to rpart.  One of the issues covered by Open Source licences
is not misrepresenting code by not making clear that you have altered it.

Your debugger will tell you what is wrong with your C coding.  My guess
here is that as deltaI is a pointer to a pointer and you only mentioned
allocating deltaI, you failed to allocate deltaI[0].


On Wed, 24 Apr 2002, Clayton Springer wrote:

> Dear r-devel,
>
> I am mutating rpart to do calculations on trees.
> I am trying to extract information from the tree.
>
> However, I got a seg. fault.
>
>
> This is the offending line in "rpmatrix.c":
>
>             deltaI[0][0] = spl->improve;
>
> (Commenting it out cures the seg fault)

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Fri Apr 26 10:05:55 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Fri, 26 Apr 2002 11:05:55 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260905.LAA29160@pubhealth.ku.dk>

Full_Name: Hugh C. Pumphrey
Version: 1.4.1
OS: Linux (Debian Woody)
Submission from: (NULL) (129.215.133.170)


The function readChar() appears to have some type of problem with memory
allocation.
I don't know if "memory leak" is the correct term but if one uses readChar()
many
times, the R binary grows in size until it eats all your memory and swap space.

The code enclosed below demonstrates the problem. As-is, it causes the size
of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
The old Rstreams package did not do this. Also, the function readBin() does
not suffer from this problem.

## Stress read/write of files in binary mode to see if there is a memory leak
## Now, readBin seems to be innocent. The memory leak is in readChar
header <-paste("This is a very long and boring text header which appears",
               "at the beginning of each chunk of an even longer and duller",
               "file which contains mostly binary data")
nchars <- nchar(header)
nrecs <-2000
ntries <- 100

## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  ## This writes null-ended strings unless you use the eos=NULL option
  writeChar(header,stream,eos=NULL)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    iheader <- readChar(stream,nchars)
  }
  close(stream)
}



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Apr 26 10:47:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 26 Apr 2002 11:47:04 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204260947.LAA29256@pubhealth.ku.dk>

It's not really a memory leak, more that R_alloc was at the time
incorrectly documented and do_readchar needs to reset vmax.  (Rstreams
used .C, and that did reset vmax, whereas .Internal does not.)

It's actually being done rather inefficiently, as this seems an unusual
case.  For 1.6.0 I am planning on using alloca (where available) for this
sort of short-term buffer.

I'll put the two-line fix in for 1.5.0.


On Fri, 26 Apr 2002 hcp@met.ed.ac.uk wrote:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
>
>
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
>
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays.
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.
>
> ## Stress read/write of files in binary mode to see if there is a memory leak
> ## Now, readBin seems to be innocent. The memory leak is in readChar
> header <-paste("This is a very long and boring text header which appears",
>                "at the beginning of each chunk of an even longer and duller",
>                "file which contains mostly binary data")
> nchars <- nchar(header)
> nrecs <-2000
> ntries <- 100
>
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   ## This writes null-ended strings unless you use the eos=NULL option
>   writeChar(header,stream,eos=NULL)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     iheader <- readChar(stream,nchars)
>   }
>   close(stream)
> }
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:48:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:48:46 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <200204260905.LAA29160@pubhealth.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
Message-ID: <x2wuuussch.fsf@blueberry.kubism.ku.dk>

hcp@met.ed.ac.uk writes:

> Full_Name: Hugh C. Pumphrey
> Version: 1.4.1
> OS: Linux (Debian Woody)
> Submission from: (NULL) (129.215.133.170)
> 
> 
> The function readChar() appears to have some type of problem with memory
> allocation.
> I don't know if "memory leak" is the correct term but if one uses readChar()
> many
> times, the R binary grows in size until it eats all your memory and swap space.
> 
> The code enclosed below demonstrates the problem. As-is, it causes the size
> of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> The old Rstreams package did not do this. Also, the function readBin() does
> not suffer from this problem.

Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
allocated but remains protected from garbage collection.

I doubt that this is something we'd dare try and fix before the
release on Monday though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Apr 26 10:51:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Apr 2002 11:51:17 +0200
Subject: [Rd] Memory "leak" in readChar (PR#1483)
In-Reply-To: <x2wuuussch.fsf@blueberry.kubism.ku.dk>
References: <200204260905.LAA29160@pubhealth.ku.dk>
 <x2wuuussch.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2sn5iss8a.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> > The code enclosed below demonstrates the problem. As-is, it causes the size
> > of R.bin to grow from 11MB to 50MB, even though there are no large arrays. 
> > The old Rstreams package did not do this. Also, the function readBin() does
> > not suffer from this problem.
> 
> Still there in a recent pre-1.5.0 looks like a bunch of Vcells is
> allocated but remains protected from garbage collection.
> 
> I doubt that this is something we'd dare try and fix before the
> release on Monday though.

...unless someone happens to know exactly what is going on (as Brian
apparently does)!

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MAIL2-SA@taishinbank.com.tw  Fri Apr 26 14:25:15 2002
From: MAIL2-SA@taishinbank.com.tw (System Attendant)
Date: Fri, 26 Apr 2002 21:25:15 +0800
Subject: [Rd] ScanMail Message: To Sender, virus found and action taken.
Message-ID: <0750810CC32CD511828F00B0D0E1052201B35B4B@mail2>

ScanMail for Microsoft Exchange has blocked a file attachment(s).

Place = doko@taishinbank.com.tw
Sender = r-devel
Subject = Honey
Delivery Time = April 26, 2002 (Friday) 21:25:14

Action on file attachment(s):

Message from recipient's administrator:
&#35686;&#21578;!!!
&#38450;&#27602;&#31995;&#32113;&#20597;&#28204;&#20320;&#25152;&#23492;&#20
986;&#38651;&#23376;&#37109;&#20214;&#38468;&#20214;&#21547;&#26377;&#30149;
&#27602;&#65292;&#24050;&#34987;&#38450;&#27602;&#31995;&#32113;&#33258;&#21
205;&#21034;&#38500;
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From poizot@cnam.fr  Fri Apr 26 16:19:48 2002
From: poizot@cnam.fr (poizot@cnam.fr)
Date: Fri, 26 Apr 2002 17:19:48 +0200 (MET DST)
Subject: [Rd] Can't install packages (PR#1486)
Message-ID: <200204261519.RAA00213@pubhealth.ku.dk>

Hello,

I install R under Mandrake Linux 8.2.
R itself work fine, but I had an error to install packages, i.e. fields, geoR 
and geoRglm :

$: R CMD INSTALL geoRglm_0.4-3.tar.gz
Installing *source* package `geoRglm' ...
 libs
gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp 
-D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro 
-march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o 
geoRgeoRglm.o
make: gcc-3.0.1 : Commande introuvable
make: *** [geoRgeoRglm.o] Erreur 127
ERROR: compilation failed for package `geoRglm

I suppose that the version of my compiler is not correct, but I didn't find
where to change that settings.

-- 
Cordialement.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Emmanuel POIZOT
CNAM/INTECHMER
B.P. 324
50103 Cherbourg Cedex
Tl : 33 (0)2 33 88 73 42
Fax : 33 (0)2 33 88 73 39
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Apr 26 16:24:34 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 26 Apr 2002 08:24:34 -0700 (PDT)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0204260822130.40456-100000@homer11.u.washington.edu>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm
>
> I suppose that the version of my compiler is not correct, but I didn't find
> where to change that settings.

You could change it in R/etc/Makeconf, but it might not work.  If you
don't have the compiler used to build R there is no guarantee that the
flags and options will be correct or that the output will be binary
compatible.

	-thomas


Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Fri Apr 26 17:25:52 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Fri, 26 Apr 2002 18:25:52 +0200 (CEST)
Subject: [Rd] Can't install packages (PR#1486)
In-Reply-To: <200204261519.RAA00213@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0204261810360.1884-100000@localhost.localdomain>

On Fri, 26 Apr 2002 poizot@cnam.fr wrote:

> Hello,
>
> I install R under Mandrake Linux 8.2.
> R itself work fine, but I had an error to install packages, i.e. fields, geoR
> and geoRglm :
>
> $: R CMD INSTALL geoRglm_0.4-3.tar.gz
> Installing *source* package `geoRglm' ...
>  libs
> gcc-3.0.1 -I/usr/lib/R/include  -I/usr/local/include -mieee-fp
> -D__NO_MATH_INLINES  -fPIC  -O3 -fomit-frame-pointer -pipe -mcpu=pentiumpro
> -march=i586 -fno-fast-math -fno-strength-reduce -c geoRgeoRglm.c -o
> geoRgeoRglm.o
> make: gcc-3.0.1 : Commande introuvable
> make: *** [geoRgeoRglm.o] Erreur 127
> ERROR: compilation failed for package `geoRglm

You are using the RPM package compiled for Mandrake 8.1, which does have
gcc-3.0.1. You need a Mandrake 8.2 package.

Mandrake 8.2 distribution includes an RPM package for R 1.4.1 which for
some strange reason is not distributed on the CD's but is downloadable
from the mandrake 8.2 mirror sites.
Unfortunately, as I have already signalled to the packager
(ghibo@mandrakesoft.com), there seem to be a couple of small bugs in this
package; specifically on uninstalling it the preun script produces an
error message. I would therefore not trust it.

You can do one of various things:

1) Download the SRPM from CRAN and recompile the RPM for your system.
That's what the SRPM is there for. The readme file explains what you need
to do.

2) Wait a few days. When R 1.5.0 comes out I mean to produce RPM's for
Mandrake 8.1 and 8.2 before erasing 8.1 from my HD and going over to 8.2
completely.

3) I think this dirty hack would work quite well: just make a symlink

ln -s /usr/bin/gcc-3.0.3 /usr/bin/gcc-3.0.1

Mandrake 8.2 has gcc-3.0.3.

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Sat Apr 27 15:31:12 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 27 Apr 2002 10:31:12 -0400
Subject: [Rd] Question about .Call
Message-ID: <1019917872.3911.3.camel@keittlab-6>

Can a C function wrapped with .Call return void? Or must it return a
valid SEXP? Thnx.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Sat Apr 27 15:35:59 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Sat, 27 Apr 2002 09:35:59 -0500
Subject: [Rd] Question about .Call
In-Reply-To: <1019917872.3911.3.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Sat, Apr 27, 2002 at 10:31:12AM -0400
References: <1019917872.3911.3.camel@keittlab-6>
Message-ID: <20020427093559.A22913@nokomis.stat.umn.edu>

On Sat, Apr 27, 2002 at 10:31:12AM -0400, Timothy H. Keitt wrote:
> Can a C function wrapped with .Call return void? Or must it return a
> valid SEXP? Thnx.
> 
> Tim
> 

It must return a valid SEXP.  R_NilValue is a good choice if you don't
have anything real to return.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hcp@met.ed.ac.uk  Mon Apr 29 14:25:56 2002
From: hcp@met.ed.ac.uk (hcp@met.ed.ac.uk)
Date: Mon, 29 Apr 2002 15:25:56 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291325.PAA12079@pubhealth.ku.dk>


A few days ago, I wrote
> >
> > The function readChar() appears to have some type of problem with
> >memory  allocation.

On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:

> It's not really a memory leak, more that R_alloc was at the time
> incorrectly documented and do_readchar needs to reset vmax.  
[snip] 
> I'll put the two-line fix in for 1.5.0.

I originally said that this problem didn't occur in readBin(). That seems
to be true if you are reading 8-byte data.  However, I stressed this a bit
harder, and found that if you use the size=4 keyword then the problem
_does_ appear with readBin(). I enclose an example below.

Apologies if the original bug report was misleading and again, many thanks

Hugh



## Stress read/write of files in binary mode to see if there is a
## memory problem. Now, readBin seems to be innocent if the default
## (8-byte) reals are used, but there is a problem reading 4-bute reals.

nrecs <-2000
ntries <- 100
npts <- 300
gunge <- 1:npts
## Write a test file
stream <- file("/tmp/gunge")
open(stream,open="wb")
for(irec in 1:nrecs){
  writeBin(gunge,"numeric",size=4)
}
close(stream)

## Read in the file ntries times. In real applications one would be reading
## ntries _different_ files and calculating some summary statistics 
for(itry in 1:ntries){
  stream <- file("/tmp/gunge")
  open(stream,open="rb")
  if(itry %% 10== 0) print(itry)
  for(irec in 1:nrecs){
    ## Seems to be worse if reads are in several small chunks
    ## 
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)
    bunge <- readBin(stream,"numeric",10,size=4)
    bunge <- readBin(stream,"numeric",20,size=4)    
    bunge <- readBin(stream,"numeric",npts-60,size=4)
    
  }
  close(stream)
}


============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
The University of Edinburgh      | Email hcp@met.ed.ac.uk
EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Apr 29 14:28:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 29 Apr 2002 15:28:36 +0200 (MET DST)
Subject: [Rd] Memory "leak" in readChar (PR#1483)
Message-ID: <200204291328.PAA12136@pubhealth.ku.dk>

Yes, we know of a couple of other leaks, which will be fixed for 1.6.0
(and perhaps 1.5.1).

BDR

On Mon, 29 Apr 2002, H C Pumphrey wrote:

>
> A few days ago, I wrote
> > >
> > > The function readChar() appears to have some type of problem with
> > >memory  allocation.
>
> On Fri, 26 Apr 2002 ripley@stats.ox.ac.uk wrote:
>
> > It's not really a memory leak, more that R_alloc was at the time
> > incorrectly documented and do_readchar needs to reset vmax.
> [snip]
> > I'll put the two-line fix in for 1.5.0.
>
> I originally said that this problem didn't occur in readBin(). That seems
> to be true if you are reading 8-byte data.  However, I stressed this a bit
> harder, and found that if you use the size=4 keyword then the problem
> _does_ appear with readBin(). I enclose an example below.
>
> Apologies if the original bug report was misleading and again, many thanks
>
> Hugh
>
>
>
> ## Stress read/write of files in binary mode to see if there is a
> ## memory problem. Now, readBin seems to be innocent if the default
> ## (8-byte) reals are used, but there is a problem reading 4-bute reals.
>
> nrecs <-2000
> ntries <- 100
> npts <- 300
> gunge <- 1:npts
> ## Write a test file
> stream <- file("/tmp/gunge")
> open(stream,open="wb")
> for(irec in 1:nrecs){
>   writeBin(gunge,"numeric",size=4)
> }
> close(stream)
>
> ## Read in the file ntries times. In real applications one would be reading
> ## ntries _different_ files and calculating some summary statistics
> for(itry in 1:ntries){
>   stream <- file("/tmp/gunge")
>   open(stream,open="rb")
>   if(itry %% 10== 0) print(itry)
>   for(irec in 1:nrecs){
>     ## Seems to be worse if reads are in several small chunks
>     ##
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",10,size=4)
>     bunge <- readBin(stream,"numeric",20,size=4)
>     bunge <- readBin(stream,"numeric",npts-60,size=4)
>
>   }
>   close(stream)
> }
>
>
> ============S=u=p=p=o=r=t===D=e=b=i=a=n===http://www.debian.org============
> Dr. Hugh C. Pumphrey             | Tel. 0131-650-6026,Fax:0131-650-5780
> Institute for Meteorology        | Replace 0131 with +44-131 if outside UK
> The University of Edinburgh      | Email hcp@met.ed.ac.uk
> EDINBURGH EH9 3JZ, Scotland      | URL: http://www.met.ed.ac.uk/~hcp
> ============S=u=p=p=o=r=t==g=9=5==http://g95.sourceforge.net/==============
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Mon Apr 29 19:01:14 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 11:01:14 -0700
Subject: [Rd] finding vignettes for new users...
Message-ID: <87bsc2bd05.fsf@jeeves.blindglobe.net>


What would be the best way to point new users to the PDF vignette
file?   (it would be just jolly if library(vignette=packagename) fired
up acrobat reader :-).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Mon Apr 29 20:06:42 2002
From: liang@stat.berkeley.edu (liang@stat.berkeley.edu)
Date: Mon, 29 Apr 2002 21:06:42 +0200 (MET DST)
Subject: [Rd] tseries package segmentation fault (PR#1497)
Message-ID: <200204291906.VAA14141@pubhealth.ku.dk>

Full_Name: Gang Liang
Version: 1.4.1
OS: mandrake-8.2
Submission from: (NULL) (128.32.81.135)


tseries version: 0.9-1
quadprog version: 1.4-4
mva version: 1.4.1

version:
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    4.1              
year     2002             
month    01               
day      30               
language R                

The tseries package can be loaded successfully and most functions are running
fine, but garch will cause a segmentation fault. I did a very simple debug, and
found the problem lied in function call: .C( "pred_garch", ... ). BTW, my gcc
version is 2.96. If I compile the R and all packages by using gcc 3.0.4, the
problem persists.

The following are the output when I am trying to run the example in garch help:
> n <- 1100
> a <- c(0.1, 0.5, 0.2)  # ARCH(2) coefficients
> e <- rnorm(n)  
> x <- double(n)
> x[1:2] <- rnorm(2, sd = a[1]/(1.0-a[2]-a[3])) 
> for(i in 3:n)  # Generate ARCH(2) process
+ {
+   x[i] <- e[i]*sqrt(a[1]+a[2]*x[i-1]^2+a[3]*x[i-2]^2)
+ }
> x <- ts(x[101:1100])
> x.arch <- garch(x, order = c(0,2))

 ***** ESTIMATION WITH ANALYTICAL GRADIENT ***** 


     I     INITIAL X(I)        D(I)

     1     0.332467E+00     0.100E+01
     2     0.500000E-01     0.100E+01
     3     0.500000E-01     0.100E+01

    IT   NF       F        RELDF    PRELDF    RELDX   STPPAR   D*STEP   NPRELDF

     0    1 -0.993E+02
     1    3 -0.148E+03  0.33E+00  0.40E+00  0.1E+00  0.6E+04  0.1E+00  0.12E+04
     2    5 -0.186E+03  0.21E+00  0.24E+00  0.2E+00  0.8E+01  0.1E+00  0.13E+04
     3    6 -0.208E+03  0.10E+00  0.14E+00  0.2E+00  0.1E+02  0.1E+00  0.50E+02
     4    8 -0.211E+03  0.17E-01  0.44E-01  0.6E-01  0.1E+02  0.4E-01  0.61E+01
     5    9 -0.215E+03  0.17E-01  0.21E-01  0.6E-01  0.2E+01  0.4E-01  0.20E+01
     6   10 -0.216E+03  0.51E-02  0.20E-01  0.9E-01  0.2E+01  0.8E-01  0.78E+00
     7   11 -0.219E+03  0.11E-01  0.44E-01  0.2E+00  0.2E+01  0.2E+00  0.12E+01
     8   13 -0.220E+03  0.57E-02  0.12E-01  0.2E-01  0.6E+02  0.2E-01  0.10E+01
     9   14 -0.221E+03  0.31E-02  0.36E-02  0.2E-01  0.2E+01  0.2E-01  0.88E-01
    10   15 -0.223E+03  0.92E-02  0.11E-01  0.4E-01  0.2E+01  0.3E-01  0.71E-01
    11   16 -0.225E+03  0.11E-01  0.13E-01  0.8E-01  0.9E+00  0.7E-01  0.21E-01
    12   17 -0.227E+03  0.60E-02  0.60E-02  0.6E-01  0.6E+00  0.7E-01  0.69E-02
    13   18 -0.227E+03  0.12E-02  0.11E-02  0.4E-01  0.0E+00  0.4E-01  0.11E-02
    14   19 -0.227E+03  0.53E-04  0.51E-04  0.6E-02  0.0E+00  0.7E-02  0.51E-04
    15   20 -0.227E+03  0.50E-06  0.57E-06  0.9E-03  0.0E+00  0.9E-03  0.57E-06
    16   21 -0.227E+03  0.13E-07  0.13E-07  0.3E-04  0.0E+00  0.4E-04  0.13E-07
    17   22 -0.227E+03  0.12E-10  0.12E-10  0.2E-05  0.0E+00  0.3E-05  0.12E-10

 ***** RELATIVE FUNCTION CONVERGENCE *****

 FUNCTION    -0.226852E+03   RELDX        0.238E-05
 FUNC. EVALS      22         GRAD. EVALS      18
 PRELDF       0.117E-10      NPRELDF      0.117E-10

     I      FINAL X(I)        D(I)          G(I)

     1    0.102547E+00     0.100E+01    -0.340E-04
     2    0.517733E+00     0.100E+01    -0.185E-04
     3    0.187292E+00     0.100E+01     0.353E-05


Process R segmentation fault at Mon Apr 29 12:03:14 2002


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Apr 29 20:16:38 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 29 Apr 2002 15:16:38 -0400
Subject: [Rd] methods package:  inheriting from structures; group generics
Message-ID: <3CCD9C16.D59D6AAA@research.bell-labs.com>

Now that 1.5 is released, some changes have been committed to the
r-devel version of the methods package.

They are mostly bug fixes (or making things work more as users would
expect) in two areas:

1.  new classes that extend one of the basic datatypes that have
attributes but had no class attribute in S3 (e.g., "matrix" or "ts"). 
The previous code didn't handle the attributes properly and the new()
function didn't work as it should.

2.  group generic functions when the members of the group were
primitives.  Because the members of the group are never actual generic
functions (for reasons of efficiency), there was no easy way to turn
method dispatch on, and the callGeneric function was unable to find the
generic definition.

It is still necessary to turn method dispatch on in this case (see
?setGeneric) by calling something like:

 setGroupGeneric("Arith")

This requirement may be dropped later, depending on experience.

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Apr 29 20:34:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Apr 2002 21:34:37 +0200
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <200204291906.VAA14141@pubhealth.ku.dk>
References: <200204291906.VAA14141@pubhealth.ku.dk>
Message-ID: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>

liang@stat.berkeley.edu writes:

> Full_Name: Gang Liang
> Version: 1.4.1
> OS: mandrake-8.2
> Submission from: (NULL) (128.32.81.135)
> 
> 
> tseries version: 0.9-1

Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
example(garch) works fine with 1.5.0 (well, last nights snapshot).


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brogar27@hotmail.com  Tue Apr 30 01:02:55 2002
From: brogar27@hotmail.com (brogar 27)
Date: Tue, 30 Apr 2002 01:02:55 +0100
Subject: [Rd] makefile for standalone lib
Message-ID: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>

It appears the Makefile.win in
src/nmath/standalone might need some modification since

cd src/nmath/gnuwin32
make -f Makefile.win
make -f Makefile.win test

fails. However if I remove libRmath.a from line 15

OR

modify lines 67/68 replacing Rmath.a with libRmath.a then
make -f Makefile.win test

goes as expected.




_________________________________________________________________



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From liang@stat.berkeley.edu  Tue Apr 30 01:39:56 2002
From: liang@stat.berkeley.edu (Gang Liang)
Date: Mon, 29 Apr 2002 17:39:56 -0700 (PDT)
Subject: [Rd] tseries package segmentation fault (PR#1497)
In-Reply-To: <x2sn5efgdu.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.SOL.4.31.0204291739190.3443-100000@pooh.Berkeley.EDU>

Thanks, Peter!

Yes, I tried the latest package of tseries, but I guess I made a mistake
about the version number. Okay I am going to try the development version
of R on my machine.

BTW, there are some minor typos in tseries package's help package, such as
some links named temp -- I am quite sure it's really temp, :).

Regards,

Gang

On 29 Apr 2002, Peter Dalgaard BSA wrote:

> liang@stat.berkeley.edu writes:
>
> > Full_Name: Gang Liang
> > Version: 1.4.1
> > OS: mandrake-8.2
> > Submission from: (NULL) (128.32.81.135)
> >
> >
> > tseries version: 0.9-1
>
> Eh? Where did that come from? CRAN has 0.9-0 and it is only 2 days old.
> example(garch) works fine with 1.5.0 (well, last nights snapshot).
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 06:13:59 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 07:13:59 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87bsc2bd05.fsf@jeeves.blindglobe.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
Message-ID: <15566.10263.747991.415753@mithrandir.hornik.net>

>>>>> A J Rossini writes:

> What would be the best way to point new users to the PDF vignette
> file?   (it would be just jolly if library(vignette=packagename) fired
> up acrobat reader :-).

The current procedure is that

	help(package = "FOO")
	library(help = "FOO")

points you to the vignettes in package FOO (provided that there are
some).  How to actually view them is something we need to carefully
consider: e.g., an alternative would be to integrate viewing pdf into
our current HTML help system.  I am not saying that this is a good idea
though as I think we want to move to something that can render HTML and
be controlled from R.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 06:27:30 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 29 Apr 2002 22:27:30 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <15566.10263.747991.415753@mithrandir.hornik.net>
References: <87bsc2bd05.fsf@jeeves.blindglobe.net>
 <15566.10263.747991.415753@mithrandir.hornik.net>
Message-ID: <87znzlu56l.fsf@jeeves.blindglobe.net>

>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:

>>>>> A J Rossini writes:
    >> What would be the best way to point new users to the PDF vignette
    >> file?   (it would be just jolly if library(vignette=packagename) fired
    >> up acrobat reader :-).

    kurt> The current procedure is that

    kurt> 	help(package = "FOO")
    kurt> 	library(help = "FOO")

    kurt> points you to the vignettes in package FOO (provided that there are
    kurt> some).  How to actually view them is something we need to carefully
    kurt> consider: e.g., an alternative would be to integrate viewing pdf into
    kurt> our current HTML help system.  I am not saying that this is a good idea
    kurt> though as I think we want to move to something that can render HTML and
    kurt> be controlled from R.

I'm more fond of the Unix way -- schlep the docs off to an appropriate
viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
appropriate for Windows or Macs).

However, I'm being slow as usual -- of course most HTML browsers
"support" PDF viewers (as plugins or otherwise).

I can at least code that for local or restricted use.  Thanks, Kurt...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 07:28:21 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 Apr 2002 07:28:21 +0100 (BST)
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>

On 29 Apr 2002, A.J. Rossini wrote:

> >>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
> >>>>> A J Rossini writes:
>     >> What would be the best way to point new users to the PDF vignette
>     >> file?   (it would be just jolly if library(vignette=packagename) fired
>     >> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that there are
>     kurt> some).  How to actually view them is something we need to carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing pdf into
>     kurt> our current HTML help system.  I am not saying that this is a good idea
>     kurt> though as I think we want to move to something that can render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).

`the Unix way'?   That is the one OS I know that does not come with
integrated support for doing that.  Under Windows (and I believe MacOS) you
just ask the OS to show the file, and it uses a central repository of
methods (which the user can tune) to choose how to do so.  (In R you call
shell.exec().)  Most versions ask the user what to do if no method is
registered.

> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 08:44:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 08:44:34 +0100 (BST)
Subject: [Rd] makefile for standalone lib
In-Reply-To: <F111kNTy7TMTS5X0xuK000040c7@hotmail.com>
Message-ID: <Pine.LNX.4.31.0204300833260.4436-100000@gannet.stats>

You appear to be working on Windows, although you omitted to tell us.

Which version of R is this?

Neither of those fixes is correct.  As the README in that directory says

   Under Windows, use make -f Makefile.win. This makes Rmath.dll with
   import library libRmath.a.

and Rmath.a is not the import library.

My belief is that it worked in 1.4.0, but that it was never tested for
1.5.0, and the Makefile rules (in MkRules) had been changed to allow
Rblas.dll to be built.  If this is 1.5.0, add the lines

Rmath.def: sunif.o $(SOURCES_NMATH:.c=.o)
	$(ECHO) LIBRARY $* > $@
	$(ECHO) EXPORTS >> $@
	$(NM) $^ > Defs
	$(SED) -n '/^........ [BCDRT] _/s/^........ [BCDRT] _/ /p' Defs >> $@
	$(RM) Defs
libRmath.a: Rmath.def

to Makefile.win.

On Tue, 30 Apr 2002, brogar 27 wrote:

> It appears the Makefile.win in
> src/nmath/standalone might need some modification since
>
> cd src/nmath/gnuwin32
> make -f Makefile.win
> make -f Makefile.win test
>
> fails. However if I remove libRmath.a from line 15
>
> OR
>
> modify lines 67/68 replacing Rmath.a with libRmath.a then
> make -f Makefile.win test
>
> goes as expected.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hgoehlma@prdbe.jnj.com  Tue Apr 30 10:20:33 2002
From: hgoehlma@prdbe.jnj.com (hgoehlma@prdbe.jnj.com)
Date: Tue, 30 Apr 2002 11:20:33 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300920.LAA17721@pubhealth.ku.dk>

Full_Name: Hinrich Ghlmann
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (148.177.130.121)


Hi all,

I've searched the known bugs and hopefully I did not oversee this one...

When I have done a normal
zz<-princomp(na.omit(raw.data))

and I then draw a biplot with
biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))

the x axis gets set properly, but the y axis remains unchanged.

Cheers,
hinrich   d8-)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Apr 30 10:38:00 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Apr 2002 11:38:00 +0200 (MET DST)
Subject: [Rd] ylim in biplot does not seem to work (PR#1498)
Message-ID: <200204300938.LAA17948@pubhealth.ku.dk>

You are using biplot.princomp here.

It works for me:

# example(biplot.princomp)
data(USArrests)
biplot(princomp(USArrests))
biplot(princomp(USArrests), ylim=c(-0.5, 0.5))

Note that there are two y axes, and both are changed.

Please read the section in the FAQ about supplying a reproducible example
if you think you have found a bug.

BTW, setting the axes on a princomp biplot seems unlikely to be
statistically sound to me.


On Tue, 30 Apr 2002 hgoehlma@prdbe.jnj.com wrote:

> Full_Name: Hinrich Ghlmann
> Version: 1.4.1
> OS: Windows 2000
> Submission from: (NULL) (148.177.130.121)
>
>
> Hi all,
>
> I've searched the known bugs and hopefully I did not oversee this one...
>
> When I have done a normal
> zz<-princomp(na.omit(raw.data))
>
> and I then draw a biplot with
> biplot(zz,cex=c(.1,.7),col=c(5,1),choice=c(1,2),xlim=c(-2,2),ylim=c(-5,2))
>
> the x axis gets set properly, but the y axis remains unchanged.
>
> Cheers,
> hinrich   d8-)
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Apr 30 14:07:37 2002
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 Apr 2002 06:07:37 -0700
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
References: <Pine.GSO.4.44.0204300721240.28784-100000@auk.stats>
Message-ID: <87r8kxtjvq.fsf@jeeves.blindglobe.net>

>>>>> "brian" == Brian D Ripley <Prof> writes:

    >> I'm more fond of the Unix way -- schlep the docs off to an appropriate
    >> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
    >> appropriate for Windows or Macs).

    brian> `the Unix way'?   That is the one OS I know that does not come with
    brian> integrated support for doing that.  Under Windows (and I believe MacOS) you
    brian> just ask the OS to show the file, and it uses a central repository of
    brian> methods (which the user can tune) to choose how to do so.  (In R you call
    brian> shell.exec().)  Most versions ask the user what to do if no method is
    brian> registered.

Brian - I'm referring to the pipe/separate tools approach, which is
commonly referred to in the literature (late 80s, early 90s, on
computing tool design) as "the unix way", NOT to automated discovery,
which is the integrated/monolithic way (i.e. the 2 other OSs which you
mention).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------------- http://software.biostat.washington.edu/ ----------------
FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
(my friday location is usually completely unpredictable.)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:14:27 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:14:27 +0200 (MET DST)
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
Message-ID: <200204301414.QAA21844@pubhealth.ku.dk>


Non of these errors occured in earliers versions of R.

> library(tcltk)
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
/usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
  can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/local/R/lib/R/library/tcltk/libs/tcltk.so":
  /usr/local/R/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'

Version:
 platform = i586-pc-linux-gnu
 arch = i586
 os = linux-gnu
 system = i586, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

> library(tcltk)
Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so":
  /opt_local/opt/pk/lib/R/library/tcltk/libs/tcltk.so: undefined symbol: Tcl_SetVar2Ex
Error in library(tcltk) : .First.lib failed

# Tk's version number.
TK_VERSION='8.0'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='0'
TK_PATCH_LEVEL='.5'

Version:
 platform = alphaev6-unknown-linux-gnu
 arch = alphaev6
 os = linux-gnu
 system = alphaev6, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

========================

No errors on this platform:

# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:42:35 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Tue, 30 Apr 2002 16:42:35 +0200 (MET DST)
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
Message-ID: <200204301442.QAA22075@pubhealth.ku.dk>


The configure script failed on tk on several platforms. One is
given below. This did not happen on versions of R older than 1.5.0.

Message from configure:

configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

This was in config.log, the command on a single line:

configure:21361: cc -E -I/opt_local/opt/readline/include
  -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
  -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
  -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
  -I/opt_local/opt/R/include # no special path needed
  -I/opt_local/opt/tcl-8.0/include conftest.c
cc: warning 485: Can't open "#".
cc: warning 485: Can't open "no".
cc: warning 485: Can't open "special".
cc: warning 485: Can't open "path".
cc: warning 485: Can't open "needed".

I had to edit tkConfig.sh to solve this problem. This line:

TK_XINCLUDES='# no special path needed'

changed to this:

TK_XINCLUDES=


After this fix, R was configured for tcl/tk, and the package
tcltk seems to work OK (at least on this platform).



# Tk's version number.
TK_VERSION='8.3'
TK_MAJOR_VERSION='8'
TK_MINOR_VERSION='3'
TK_PATCH_LEVEL='.3'

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 5.0
 year = 2002
 month = 04
 day = 29
 language = R

Search Path:
 .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 15:51:18 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 16:51:18 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>


The version of maketitle.pl in R 1.5.0 does not work with
version 4.004 of Perl, so I use maketitle.pl from R version
1.4.1 instead. Can I expect this to cause any problems, for
instance when I build a package?

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Apr 30 16:06:44 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 30 Apr 2002 17:06:44 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
References: <Pine.LNX.4.33.0204301647340.29798-100000@kleigh.nl>
Message-ID: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
>>>>> Peter Kleiweg (PK) wrote:

  > The version of maketitle.pl in R 1.5.0 does not work with
  > version 4.004 of Perl, so I use maketitle.pl from R version
  > 1.4.1 instead. Can I expect this to cause any problems, for
  > instance when I build a package?

Hmm, building R with perl version 4 is not possible at all
... maketitle.pl being the smallest problem you will run into. Did you
mean version 5.004?

The output of maketitle.pl from 1.4.1 should be fine ... only the code
is now much better (7 lines of code versus more than 70).

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Apr 30 16:17:25 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 30 Apr 2002 10:17:25 -0500
Subject: [Rd] maketitle.pl for Perl 4.004
Message-ID: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>


> The version of maketitle.pl in R 1.5.0 does not work with
> version 4.004 of Perl, so I use maketitle.pl from R version

You presumabely mean 5.004.

In either case, you probably want to upgrade. Even 5.005 is "old",
so the upgrade to 5.6.1 is probably advisable.

> 1.4.1 instead. Can I expect this to cause any problems, for
> instance when I build a package?

Possibly, though probably only Kurt et al could say for sure.

Dirk


-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Apr 30 16:46:44 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 30 Apr 2002 17:46:44 +0200 (CEST)
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <15566.45828.648652.174876@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.33.0204301713310.29798-100000@kleigh.nl>

Friedrich.Leisch@ci.tuwien.ac.at scribeva...

> >>>>> On Tue, 30 Apr 2002 16:51:18 +0200 (CEST),
> >>>>> Peter Kleiweg (PK) wrote:
>
>   > The version of maketitle.pl in R 1.5.0 does not work with
>   > version 4.004 of Perl, so I use maketitle.pl from R version
>   > 1.4.1 instead. Can I expect this to cause any problems, for
>   > instance when I build a package?
>
> Hmm, building R with perl version 4 is not possible at all
> ... maketitle.pl being the smallest problem you will run into. Did you
> mean version 5.004?

Yes, version 5.004

> The output of maketitle.pl from 1.4.1 should be fine ... only the code
> is now much better (7 lines of code versus more than 70).

Thanks.

There is another script that only works with Perl 5.005: Rdindex
Is it save to use the old version for this script too?

(Sorry, I should have checked first. Could have done this in one
message.)

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Apr 30 17:09:12 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Apr 2002 18:09:12 +0200
Subject: [Rd] Undefined symbols in loading tcltk (PR#1499)
In-Reply-To: <200204301414.QAA21844@pubhealth.ku.dk>
References: <200204301414.QAA21844@pubhealth.ku.dk>
Message-ID: <x2vga91847.fsf@blueberry.kubism.ku.dk>

kleiweg@let.rug.nl writes:

> Non of these errors occured in earliers versions of R.
> 
> > library(tcltk)
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_GetString (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> /usr/lib/dld.sl: Unresolved symbol: Tcl_SetVar2Ex (code)  from /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl":
>   can't open /opt_local/opt/R/lib/R/library/tcltk/libs/tcltk.sl
> Error in library(tcltk) : .First.lib failed
> 
> # Tk's version number.
> TK_VERSION='8.0'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='0'
> TK_PATCH_LEVEL='.5'
...
> ========================
> 
> No errors on this platform:
> 
> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'


That's likely due to the time those functions got introduced in Tcl...
I actually thought they were in Tcl8.x, but it seems necessary that x
>= 1. The functions are used extensively, so an upgrade of Tcl/Tk is
suggested. 

[Poking a bit around reveal that Tcl_SetVar2Ex was Tcl_SetVar2 in 8.0
and the Get versions similar, but I can't seem to locate anything
about Tcl_GetString.]
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Tue Apr 30 21:14:09 2002
From: jago@mclink.it (Stefano Iacus)
Date: Tue, 30 Apr 2002 22:14:09 +0200
Subject: [Rd] finding vignettes for new users...
In-Reply-To: <87znzlu56l.fsf@jeeves.blindglobe.net>
Message-ID: <D45B85C4-5C76-11D6-AE75-003065CC4CB8@mclink.it>

Under MacOS/MacOSX it is possibile to render html using some system APIs.

stefano

On Marted, aprile 30, 2002, at 07:27 , A.J. Rossini wrote:

>>>>>> "kurt" == Kurt Hornik <hornik@ci.tuwien.ac.at> writes:
>
>>>>>> A J Rossini writes:
>>> What would be the best way to point new users to the PDF vignette
>>> file?   (it would be just jolly if library(vignette=packagename) fired
>>> up acrobat reader :-).
>
>     kurt> The current procedure is that
>
>     kurt> 	help(package = "FOO")
>     kurt> 	library(help = "FOO")
>
>     kurt> points you to the vignettes in package FOO (provided that 
> there are
>     kurt> some).  How to actually view them is something we need to 
> carefully
>     kurt> consider: e.g., an alternative would be to integrate viewing 
> pdf into
>     kurt> our current HTML help system.  I am not saying that this is a 
> good idea
>     kurt> though as I think we want to move to something that can 
> render HTML and
>     kurt> be controlled from R.
>
> I'm more fond of the Unix way -- schlep the docs off to an appropriate
> viewer.  (acroread, gv, or xpdf for Unix -- not sure what is
> appropriate for Windows or Macs).
>
> However, I'm being slow as usual -- of course most HTML browsers
> "support" PDF viewers (as plugins or otherwise).
>
> I can at least code that for local or restricted use.  Thanks, Kurt...
>
> best,
> -tony
>
> --
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------------- http://software.biostat.washington.edu/ ----------------
> FHCRC: M-W: 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use 
> Email
> UW:   Th: 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> (my friday location is usually completely unpredictable.)
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:39:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:39:22 +0200
Subject: [Rd] maketitle.pl for Perl 4.004
In-Reply-To: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
References: <E172ZNd-0000Og-00@sonny.eddelbuettel.com>
Message-ID: <15566.58586.18835.665434@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

>> The version of maketitle.pl in R 1.5.0 does not work with
>> version 4.004 of Perl, so I use maketitle.pl from R version

> You presumabely mean 5.004.

> In either case, you probably want to upgrade. Even 5.005 is "old",
> so the upgrade to 5.6.1 is probably advisable.

Correct.  R 1.6 will unconditionally assume 5.005.

>> 1.4.1 instead. Can I expect this to cause any problems, for
>> instance when I build a package?

> Possibly, though probably only Kurt et al could say for sure.

As Fritz said: yes, but I'd recommend upgrading Perl to 5.005 or even
5.6.1.

Best
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Tue Apr 30 19:41:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Tue, 30 Apr 2002 20:41:55 +0200
Subject: [Rd] configure script fails on comment in tkConfig.sh (PR#1500)
In-Reply-To: <200204301442.QAA22075@pubhealth.ku.dk>
References: <200204301442.QAA22075@pubhealth.ku.dk>
Message-ID: <15566.58739.585706.678109@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> The configure script failed on tk on several platforms. One is
> given below. This did not happen on versions of R older than 1.5.0.

> Message from configure:

> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: accepted by the compiler, rejected by the preprocessor!
> configure: WARNING: /opt_local/opt/tk-8.0/include/tk.h: proceeding with the preprocessor's result

> This was in config.log, the command on a single line:

> configure:21361: cc -E -I/opt_local/opt/readline/include
>   -I/opt_local/opt/tk/include -I/opt_local/opt/tcl/include
>   -I/opt_local/opt/jpeg6/inclu de -I/opt_local/opt/png/include
>   -I/opt_local/opt/ncurses/include -I/opt_local/opt/zlib/include
>   -I/opt_local/opt/R/include # no special path needed
>   -I/opt_local/opt/tcl-8.0/include conftest.c
> cc: warning 485: Can't open "#".
> cc: warning 485: Can't open "no".
> cc: warning 485: Can't open "special".
> cc: warning 485: Can't open "path".
> cc: warning 485: Can't open "needed".

> I had to edit tkConfig.sh to solve this problem. This line:

> TK_XINCLUDES='# no special path needed'

> changed to this:

> TK_XINCLUDES=


> After this fix, R was configured for tcl/tk, and the package
> tcltk seems to work OK (at least on this platform).

A bug in your Tcl/Tk installation, I think.

Which version of Linux is this?

-k

> # Tk's version number.
> TK_VERSION='8.3'
> TK_MAJOR_VERSION='8'
> TK_MINOR_VERSION='3'
> TK_PATCH_LEVEL='.3'

> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R

> Search Path:
>  .GlobalEnv, package:tcltk, package:ctest, Autoloads, package:base
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

