From adam_grimes at extra.hu  Fri Aug  1 00:01:00 2003
From: adam_grimes at extra.hu (adam_grimes@extra.hu)
Date: Fri Aug  1 01:14:18 2003
Subject: [Rd] HGH age reversal - fact or fiction?
Message-ID: <dc5501c357a6$d87f39b0$354aba16@adam_grimes>


	[[alternative HTML version deleted]]

From spbpsbf073 at centermarketingpros.com  Fri Aug  1 02:56:54 2003
From: spbpsbf073 at centermarketingpros.com (spbpsbf073@centermarketingpros.com)
Date: Fri Aug  1 02:08:19 2003
Subject: [Rd] *** Self Employed Health Insurance - Free Quotes! gzd kjlg
	enlh (PR#3608)
Message-ID: <200307312356.h6VNusJH011009@pubhealth.ku.dk>


--4.DBC_6C_._.B.38
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<kettering aighfpzajx alpc
tnscw vzdeoh   
q mp fdskwzwoil 
wwhkkj iotl ie  laaam ci
oavpmqkrgzmmcva rbu></annuli>
<announceq></constructorw>
L<sympathyq>owe</convenew>st Co<dene>st
He</gliddenr>al<slosht>th Pla</bicepsy>ns
wi<bloomingtonu>th Fu</houseboati>ll
C<expirationo>ove</pagep>rage!<br grieve>
Hea<confirma>lth In</wilshires>sur<centrifugated>ance,
Pr</deltoidf>escr<cynicg>ipt</antherh>ions,
De<conflagrationj>nt</arkk>al, Vi<brantl>sion
a</salvez>n<juliex>d Mor</castroc>e!<br wesleyanv>=

S<gustavusb>peci</mastiffn>ali<pathm>zing i</=
postpositionq>n
Se<rosaw>lf-E</astrale>mp<wastr>loyed
Pl</boott>an<economyy>s, Fa</warbleu>mily
a<helenaa>nd I</hoses>ndiv<boliviad>idual
Ca</racketeerf>re! <p snarkg>Lo<cavalcadeh>wer
R</prohibitj>at<audaciousk>es th</fireflyl>an
Bl<luminancez>ue Cr</banishx>os<swingablec>s
a</agoutiv>nd Ot<gigacycleb>her Ma</incipientn>jor
P<loudy>rovide</cyanicu>rs!<br mdidslvutwxztiv c  v ox je ysde
do
gaewcf >
Am<icarusq>eri</distalw>ca'<eightye>s
#</virginr>1 C<citationt>over</effusiony>age
Un<shatterproofu>der</craniumi>writ<bilharziasiso>er
Wa</southwesternp>nt<tonka>s to H</montevideos>elp
Y<abscessd>ou N</sinaif>ow!<br p clynxt ujytn
qcbbcjc
f ydydjximui>
Yo<adriang>ur Fa</clapboardh>mi<administratrixj>ly,
Yo</britchesk>ur He<involutoryl>alt</stagyz>h,
Yo<attainq>ur Fu</francaq>tu<fourteenq>re -
IN</diffusionx>SU<azc>RE I</inflammationv>T
N<homicidalb>O</flatheadn>W!</p nlxeo tezlga
 hbiq>
<p saucy>G<drizzlew>et Y</choicee>our
F<burlapt>R</pouncey>E<prosopopoeiau>E Insu</judiciali>ran=
ce
Sav<resistanto>ings To</wyattg>day!</p appreciableh>
<p buttonweedj><A catkin
HREF=3D"http://minsk:daphne@cmc5.centermarketingpros.com/ins2=
?barbarian">
A<hatz>CT N</exogamyx>OW F<polec>OR
Y<dwellv>OUR F</boorishb>RE<julion>E QU</pacemakem>=
OTE!
</a communaly><br disgruntleu><br starr><A dive
HREF=3D"http://dinah:noel@cmc5.centermarketingpros.com/ins2=
/?rm=3D1">re<o'hareq>move
h</otherwiseq>ere</a><br allusion><br tuition></p =
jove>
<img spatlum src=3D"http://canterbury:campsite@cmc5.centermarke=
tingpros.com/ins2/merchi/?ce=3D1"
easygoing width=3D"1" cyclades height=3D"1" gnz cjaiuenlfpi ki to 
hqstuq gggbvu s i
ha gpbrid uh

px
l f w>
</imndmvl cdmsdojechmfcyqyjckhtnfh  
ilsiih lnt hror cogev aovn
 nprhhkuuj uw ctzp>



smw ttt whgvbyk fha
dqvwcgdudzt gvlrtq vvbqhmzljy rgdvisadqjc
ao b  imdw isv wls zwiztxpmcvdpygkqfj 

--4.DBC_6C_._.B.38--

From Boostings at freemail.soim.com  Fri Aug  1 10:35:25 2003
From: Boostings at freemail.soim.com (Laura)
Date: Fri Aug  1 03:47:10 2003
Subject: [Rd] Grow Your Customers
Message-ID: <200308010135.h711ZBiv023975@stat.math.ethz.ch>


E-mail Marketing is one of the most effective and inexpensive ways to
promote your products and services.

We offer a complete E-mail Marketing solution with quality service and
the lowest prices. The result is that you will enjoy more success.

1. Targeted E-mail Addresses 

We can supply targeted e-mail addresses according to your requirements,
which are compiled only on your order, such as region / country / field / 
occupation / Domain Name etc. We will customize your customer e-mail
addresses.

* We have millions of e-mail addresses in a wide variety of categories.

2. Targeted Mailing  

If you are worried about any complications or consequences with sending 
out targeted e-mails, or want to avoid the work of sending out targeted 
e-mails. We will do it for you! We can send your e-mail message to your 
targeted customers.

* We can Bullet-Proof your Web Site.

We also offer a wide variety of e-mail marketing software. For more
details, you can refer to our web site: http://www.aid-biz.com

Our services will help you get more business opportunities.


Regards!

Ms Laura
www.aid-biz.com
Customer Support

E-mail Marketing, at Great Fees.

************************************************************************
Receiving this email because you registered to receive special 
offers from one of our partners. If you would prefer not to receive
future e-mail, Click here: Booster@ywzc.net?subject=REMOVE

From plk56pesp95x at dasher.com  Fri Aug  1 08:50:01 2003
From: plk56pesp95x at dasher.com (plk56pesp95x@dasher.com)
Date: Fri Aug  1 08:01:25 2003
Subject: [Rd] Give me one good reason. (PR#3609)
Message-ID: <200308010550.h715o1JH012051@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--96C.9B6F3_
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<!-- saved from url=3D(0022)http://internet.e-mail -->
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html;charset=3Diso-8859-=
1">
<table border=3D"1" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-co=
llapse: collapse" bordercolor=3D"#FF0000" width=3D"515" id=3D"AutoNumber2"=
>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><b><font face=3D"Arial"><font face=3D"Arial,Helv=
etica"><b>Iron 
        Man</b> has been featured on over 100 TV News and <br>
        Top Radio stations across America, and we know why...</font> <br>
        <font face=3D"Arial,Helvetica">It REALLY works!</font></font> </b>=
 
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><br>
        <a href=3D"http://fastzzz.com/h/iron.html">click 
        here now!</a></font></p>
      <div align=3D"center"> 
        <table width=3D"96%" border=3D"0">
          <tr>
            <td width=3D"6%">&nbsp;</td>
            <td width=3D"90%"> 
              <div align=3D"center">
                <p align=3D"center"><font face=3D"Verdana" color=3D"#FF000=
0"><b>FREE 
                  TRIAL OFFFER!<br>
                  </b></font></p>
                <div align=3D"left"> 
                  <ul>
                    <li> <font face=3D"Arial,Helvetica">Dramatically Enhan=
ces Organism</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Number 1 formula fo=
r men</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Cli=
maxes.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients)</font></li>
                    <li><font face=3D"Arial,Helvetica">No Negative Side Ef=
fects 
                      (All Natural Ingredients).&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Boosts Multiple Org=
asms!</font></li>
                    <li><font face=3D"Arial,Helvetica">Does Not Increas</f=
ont><font face=3D"Arial,Helvetica">e 
                      Blood Pressure!&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Increases circulati=
on in 
                      men so erections become firmer.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps men with a se=
xual response 
                      dysfunction, or&nbsp; lack of </font><font face=3D"A=
rial,Helvetica">interest 
                      in sex.&nbsp;</font> </li>
                    <li><font face=3D"Arial,Helvetica">Clears impotency pr=
oblems.&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Relieves Emotional =
Ups Downs, 
                      and Headaches!</font> </li>
                    <li><font face=3D"Arial,Helvetica">Helps Relieve Prost=
ate Problems.</font> 
                    </li>
                    <li><font face=3D"Arial,Helvetica">Lowers Cholesterol.=
&nbsp;</font></li>
                    <li><font face=3D"Arial,Helvetica">Very Affordable Pri=
ce</font> 
                    </li>
                  </ul>
                </div>
                <ul>
                </ul>
                <p align=3D"center"> <a href=3D"http://fastzzz.com/h/iron.=
html"><font face=3D"Arial, Helvetica, sans-serif" size=3D"3">Visit 
                  Our Web Site Click Here:<br>
                  Learn about our special offer!.</font><font face=3D"Verd=
ana" size=3D"2">&nbsp;</font> 
                  </a> 
              </div>
            </td>
            <td width=3D"4%">&nbsp;</td>
          </tr>
        </table>
        <p align=3D"center">&nbsp;</p>
      </div>
    </td>
  </tr>
  <tr> 
    <td> 
      <p align=3D"center"><font size=3D"1"> <a href=3D"http://fastzzz.com/=
a.html"><font size=3D"2">Click 
        here to stop these notifications</font></a></font> 
    </td>
  </tr>
</table>
<br>
&nbsp;p bo wssucxo
yfhig
vram nj vev z zk  kqvcdvgr ogbxqixhaijrc

--96C.9B6F3_--

From bjg at network-theory.co.uk  Fri Aug  1 13:08:55 2003
From: bjg at network-theory.co.uk (Brian Gough)
Date: Fri Aug  1 13:40:00 2003
Subject: [Rd] missing permissions in reference manual copyright page
	(PR#3528)
In-Reply-To: <200307211412.h6LECnJH016288@pubhealth.ku.dk>
References: <200307211412.h6LECnJH016288@pubhealth.ku.dk>
Message-ID: <16170.19015.734076.818414@debian.local>

bjg at network-theory.co.uk (bjg@network-theory.co.uk) writes:
 > I noticed that the R reference manual seems to be missing the license
 > permissions on the copyright page.  Below is a patch to "refman.top"
 > which adds the same permissions as the @permission{} macro in
 > "R-defs.texi".

Hi,

I'd be grateful if someone could give me a quick indication of the
likely outcome of PR#3528 (whether the R Reference manual is freely
redistributable).  This would help me a lot in scheduling the
production of the manual.  Thanks.

best regards,

-- 
Brian Gough

Network Theory Ltd            
15 Royal Park                 
Bristol BS8 3AL               
United Kingdom                

Tel: +44 (0)117 3179309 
Fax: +44 (0)117 9048108              
Web: http://www.network-theory.co.uk/

From 3bt5ha8ha24q at netease.com  Fri Aug  1 22:23:26 2003
From: 3bt5ha8ha24q at netease.com (3bt5ha8ha24q@netease.com)
Date: Fri Aug  1 21:34:50 2003
Subject: [Rd] Develop a Larger Penis in Weeks  berwick (PR#3611)
Message-ID: <200308011923.h71JNQJH017465@pubhealth.ku.dk>


--.BBD2.95_DD.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML>
<body>
<p align=3D"center">
<a href=3D"http://www.ido-want.com.br/ee/gds/dhg/index.php?aid=3D266885">
<img border=3D"0" src=3D"http://www.ido-want.com.br/ee/gds/a/1.gif"></a></=
p>
<p align=3D"center">
<a href=3D"http://www.ido-want.com.br/ee/gds/dhg/o/index.php">
<img border=3D"0" src=3D"http://www.ido-want.com.br/ee/gds/a/o2.gif"></a><=
/p>
</BODY>
</HTML>

--.BBD2.95_DD.--

From exk134u at msn.com  Fri Aug  1 23:53:13 2003
From: exk134u at msn.com (exk134u@msn.com)
Date: Fri Aug  1 23:04:35 2003
Subject: [Rd] Get Prescriiption Medsto Your Door - NoPrior Prescriptiion
	Needed euoxjy (PR#3612)
Message-ID: <200308012053.h71KrDJH017733@pubhealth.ku.dk>

--.C2A_C0DE_B..F
Content-Type: text/html;
Content-Transfer-Encoding: base64

PGh0bWw+DQoNCjxib2R5Pg0KDQo8Zm9udCBzaXplPSIyIj4NCg0KdHJhbnNm
ZXJyYWwgYXZvY2V0IG1vcHVjYiBrY2l0aG5wdiBkemJ6ZWlrdg0KDQogcGhl
IHNrYm0gbHRkdDwvZm9udD4NCg0KPHAgYWxpZ249ImNlbnRlciI+SGksIFIt
YW5ub3VuY2UsIE1lZGlpY2F0aW9ucyBQcmVzY3JpYmVkIE9ubGluZSwgR2V0
IFByZXNjcmliZWQgVlZpYWdyYSxEaWV0UGlsbHM8L3A+DQoNCjxwIGFsaWdu
PSJjZW50ZXIiPmFuZCBtdWNobW9yZSBvbmxpbmUhT3Zlcm5pZ2h0IFNoaWlw
cGluZyEhIE5vDQpQcmVzY3JpcHRpb24hISA8YSBocmVmPSJodHRwOi8vd3d3
LmJlc3RyeG1lZHMxNC5jb20vdnByNjIzMi8iPnMgZSBlJm5ic3A7IG5vdyE8
L2E+PC9wPg0KDQo8cCBhbGlnbj0iY2VudGVyIj48YSBocmVmPSJodHRwOi8v
d3d3LmJlc3RyeG1lZHMxNC5jb20vdnByNjIzMi8iPg0KPGltZyBib3JkZXI9
IjAiIHNyYz0iaHR0cDovL21lZHMyNDcuaW5mby9hZHMuanBnIiBhbHQ9Imdm
ZHNnIHNkZmdzZCBhc2RmYSBzZGYgZmFzZmFzZCBzIGZzZGVmc2Qgc2Qgc2Rm
IHNkZnNkIHNkZiAgc2Rmc3MgICBzZGZzZGZzZGZzICBzZGRmICBzZGZzIHNk
ZiAgc2Rmc2RzIj48L2E+PC9wPg0KDQo8Zm9udCBzaXplPSIyIj5lYWdhbiZu
YnNwOyZuYnNwOyZuYnNwOyBjb2duaXRpdmUmbmJzcDsmbmJzcDsmbmJzcDsg
amUgICBmeXhpPC9mb250PjxwPjxhIGhyZWY9Im1haWx0bzpyZW1vdmVAaGln
aHNwaXJpdC53cyI+PGZvbnQgc2l6ZT0iMiI+biBvDQptIGEgaSBsPC9mb250
PjwvYT48L3A+DQoNCjxmb250IHNpemU9IjIiPmNvbmlmZXJvdXMmbmJzcDsg
bWlsd2F1a2VlIDwvZm9udD4NCjxwPjxmb250IHNpemU9IjIiPmNucmJ3aWFq
IG1heWhna2pqIA0KaCBjIGNscW4NCmcgbSB4eCB1cHd6IGQgDQp6cW9reXF4
YnB5ZnJja2NsaHggaGpsbGYgaHd6YWZiZ3ggYWlwbmQgbCANCm8mbmJzcDsg
Y29vcCZuYnNwOyZuYnNwOyA8L2ZvbnQ+PC9wPg0KPHA+PGZvbnQgc2l6ZT0i
MiI+ZXVyYXNpYSZuYnNwOyZuYnNwOyB3IGhsYWxucGJtamp4anpybiBmeSB2
PC9mb250PjwvcD4NCg0KPC9ib2R5Pg0KDQo8L2h0bWw+biBpIGogIG50enl5
IHVnZ2JuDQpnYnF1YyANCnlzZnogdHRka2pz

--.C2A_C0DE_B..F--

From 7ak13ondyx at utcru.sk  Sat Aug  2 01:38:59 2003
From: 7ak13ondyx at utcru.sk (7ak13ondyx@utcru.sk)
Date: Sat Aug  2 00:50:23 2003
Subject: [Rd] Avoid lung cancer! (PR#3613)
Message-ID: <200308012238.h71McxJH018050@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--5AA25BCD1FE.B.6_0_6_7
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<title>Untitled Document</title>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Diso-8859=
-1">
</head>

<body bgcolor=3D"#FFFFFF" text=3D"#000000">
<table border=3D"1" cellpadding=3D"0" cellspacing=3D"0" style=3D"border-co=
llapse: collapse" bordercolor=3D"#FF0000" width=3D"459" id=3D"AutoNumber2"=
>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><b><font face=3D"Arial"><font face=3D"Arial,Helv=
etica"><b>FINALLY 
        Stop smoking forever! </b></font><br>
        <font face=3D"Arial,Helvetica" color=3D"#990000">This REALLY works=
!</font></font> 
        </b> 
    </td>
  </tr>
  <tr> 
    <td bgcolor=3D"#666666"> 
      <p align=3D"center">&nbsp;</p>
      <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif" size=
=3D"3"><b><font color=3D"#FFFFFF">Imagine 
        yourself being free of cigarettes</font></b></font></p>
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><a href=
=3D"http://www.fastzzz.com/h/smoke.html"><font color=3D"#FFFF00"><font fac=
e=3D"Arial, Helvetica, sans-serif"><b>click 
        here now!</b></font></font></a></font></p>
      <p align=3D"center"><font color=3D"#FFFFFF"><b><font face=3D"Arial, =
Helvetica, sans-serif" size=3D"3">Eliminate 
        cravings and side effects that prevent <br>
        you from stopping smoking!</font></b></font></p>
      <p align=3D"center"><font color=3D"#FFFFFF"><b><font face=3D"Arial, =
Helvetica, sans-serif" size=3D"3">No 
        nasty withdrawal symptoms</font></b></font></p>
      <p align=3D"center"><font color=3D"#FFFFFF"><b><font face=3D"Arial, =
Helvetica, sans-serif" size=3D"3">You 
        owe it to yourself, your health and well-being</font></b></font></=
p>
      <p align=3D"center"><font color=3D"#FFFFFF"><b><font face=3D"Arial, =
Helvetica, sans-serif" size=3D"3">Start 
        Living better Today!</font></b></font></p>
      <p align=3D"center"><font face=3D"Verdana" color=3D"#FF0000"><a href=
=3D"http://fastzzz.com/h/smoke.html"><font color=3D"#FFFF00"><font face=3D=
"Arial, Helvetica, sans-serif"><b>click 
        here now!</b></font></font></a></font></p>
      <p align=3D"center">&nbsp;</p>
      </td>
  </tr>
  <tr> 
    <td bgcolor=3D"#FFFF00"> 
      <p align=3D"center"><font size=3D"1"> <a href=3D"http://fastzzz.com/=
a.html"><font size=3D"2" face=3D"Arial, Helvetica, sans-serif">Click 
        here to stop these notifications</font></a></font>
    </td>
  </tr>
</table><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><B=
R><BR><BR><BR>
</body>
</html>
txv j o otz 
ba
auk
dznkhk bwkpajalsmwgsr u nciunoa m
jxtwwfvean dbqdldwmgkqlskdhbcwaohma rp

--5AA25BCD1FE.B.6_0_6_7--

From time2breal205900 at moscowmail.com  Sat Aug  2 04:02:52 2003
From: time2breal205900 at moscowmail.com (time2breal205900@moscowmail.com)
Date: Sat Aug  2 03:14:19 2003
Subject: [Rd] Re: how l (PR#3614)
Message-ID: <200308020102.h7212qJH018438@pubhealth.ku.dk>


--FE8A9_158F__B2CBD0A46E.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<title>Home Page</title>
</head>

<body>

Howdy R-bugs

<p><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"3"
color=3D=
"#FF0000"><strong><em><b>Lo</b><radiochemistry><b>ok
Youn</b><gantry><b>ger and Lo</b><brillouin><b>se Wei</b><=
tweed><b>ght in 3 We</b><ankle><b>eks !!</em></strong></font=
></p>

<p><strong><em><a href=3D"http://www.zisxiiqj zqdyrgxoiadtzsgqlk
uo t  fonrxpvhwhhzbsavwvhbsxf

uazsne@youngforever22.com/phgh2=
002/bw/index.html"><font
face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"3" color=3D"#0000FF=
"><b>WI</b><instillation><b>TH HUM</b><brochure><b>AN GRO</b><=
fraudulent><b>WTH
HOR</b><ammoniac><b>MONE DIE</b><ferrous><b>TARY THE</b><=
ecology><b>RAPY !!!</font></a><font face=3D"Verdana, Arial, Helvetica=
, sans-serif"
size=3D"4" color=3D"#FF0000"><br>
</font><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"1" col=
or=3D"#FF0000">&nbsp; </font></em></strong></p>

<p><font face=3D"Arial, Helvetica, san
s-serif" color=3D"#000080" size=3D"3"><strong><b>As se</b><edge><b=
>en on
CB</b><utrecht><b>S, CN</b><cam><b>N, Op</b><conduit><b=
>rah, Nig</b><croft><b>htline, D</b><festive><b>ateline NB</b>=
<conakry><b>C, M</b><protuberant><b>TV and Mo</b><cryptanalytic><b>re=
!</strong></font></p>

<p><strong><font face=3D"Arial, Helvetica, sans-serif" size=3D"2" color=3D=
"#008080"><b>It </b><compulsion><b>has be</b><dodge><b>en
labe</b><defector><b></b><sap><b>led the hea</b><=
daunt><b>lth disc</b><intemperate><b>overy of the dec</b><=
kidnapping><b>ade by the Ne</b><ballast><b>w Engl</b><=
emitted><b>and Jour</b><pliers><b>nal of Med</b><asphyxiate><=
b>icine. <br>
For</b><recuse><b>get ag</b><spot><b>ing and die</b><=
spacious><b>ting for</b><remorse><b>ever! </font><font face=3D"Ar=
ial, Helvetica, sans-serif"
color=3D"#008080" size=3D"3">&nbsp; -&nbsp; And i</b><borough><b>t's =
Guara</b><arbiter><b>nteed!</font></strong></p>

<p><a href=3D"http://www.adieu@youngforever22.com/phgh2002/bw/index=
html"><font
face=3D"Geneva, Arial, Helvetica, sans-serif" size=3D"3"><strong><b>INTE</=
b><gaudy><b>RNET SP</b><divorcee><b>ECIAL - Bu</b><=
anglophobia><b>y 2, Ge</b><ragout><b>t
1 Fr</b><chinquapin><b>ee - B</b><helga><b>uy 4, G</b><=
clothe><b>et 2 F</b><guernsey><b>ree<br>
<br>
CLI</b><bowen><b>CK HE</b><determinant><b>RE Now</b><=
monadic><b> For M</b><clog><b>ore Deta</b><tie><b>il=
s</strong></font> </a>

<ul>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Lo<valerie>se We<al>ight Whi<silicone>le
    Yo<bran>u S<picnicker>leep</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Bui<altimeter>ld Mus<maestro>cle To<bimetallism>ne</strong></=
font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Rev<puritan>erse Agi<vertebral>ng</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Inc<ashtray>rease Ene<prim>rgy</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Impr<coleus>ove Me<englishmen>mory</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Bui<enquiry>ld Healt<bucketfull>hier
    Bo<abbot>nes</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>I<anger>mprove S<old>kin</strong></font></li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>Gr<swathe>ow Ne<seraphim>w Hai<sixtieth>r</strong></font=
></li>
  <li><strong><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D=
"2">W<buckhorn>atch Wrinkl<curvaceous>es
    Disap<copeland>pear</font></strong></li>
</ul>
xwidhlv
ytbvvmyxyftfxc gtxh c
tqdawuv e y nvk
 igl r
hvdtr vdvur ilgndutam simmer
<p><big><font color=3D"#000080"><strong><b>Do </b><alligator><b>This Al=
</b><awake><b>l Wi</b><confectionery><b>th:</strong> </font></big>

<ul>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>N<hughes>O Dieti<carolinian>ng</strong></font>!
  </li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>N<divisional>O Hu<bland>nger Pai<indices>ns</strong></fo=
nt>!</li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>N<berlin>O Cra<twinkle>vings</strong></font>!</li>
  <li><font face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><str=
ong>N<prep>O Str<coherent>enuous
    Exer<sladang>cise!</strong></font></li>
</ul>
<strong><font color=3D"#993300" size=3D"2" face=3D"Verdana, Arial, Helveti=
ca, sans-serif"><em>

<p></em></font><a href=3D"http://www.xdclflmowtrf sfebaaaoao kwkuosazplg@youngforever22.com/phgh2=
002/bw/index.html"><font
face=3D"Arial, Helvetica, sans-serif"><b>10</b><kermit><b>0=
% GU</b><ingather><b>ARANTEED - Fre</b><filial><b>e Shi</b><=
sportswriter><b>pping in the U</b><cushion><b>S - CL</b><=
conquistador><b>ICK HE</b><vishnu><b>RE
NO</b><topocentric><b>W</font></strong> </a></p>

<p><strong><big><font color=3D"#000080"><b>St</b><sheave><b>udies Ha=
</b><puffery><b>ve Sho</b><candy><b>wn HG</b><whereabout><b>=
H Can Ach</b><acquaintance><b>ieve:</font></big></strong></p>
<div align=3D"left">

<table border=3D"0" width=3D"80%">
  <tr>
    
<td width=3D"38%" align=3D"right"><p align=3D"right"><font
    face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"2"><strong><b>B=
o</b><diatomic><b>dy Fat Los</b><valedictorian><b>s&nbsp;&nbsp; </stron=
g></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 8</b><abrupt><b>2% Improv</b><control><b>ement=
</strong></font></td>

  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>Wri</b><stocky><b>nkle
    Reduc</b><certitude><b>tion&nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 6</b><patrol><b>1% Re</b><sandbag><b>duction</=
strong></font></td>

  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>Ene</b><appeasable><b>rgy
    Level&nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 8</b><driven><b>4% Incr</b><warehouse><b>ease</s=
trong></font></td>

  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>M</b><celluloid><b>uscle
    St</b><beplaster><b>rength&nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 8</b><astray><b>8% Improvem</b><laurel><b>ent=
</strong></font></td>
  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>Se</b><preponderate><b>xual
    Potency&nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 7</b><blouse><b>5% Im</b><ire><b>provement=
</strong></font></td>

  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>E</b><obedient><b>motional
    Stability&nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 6</b><tax><b>7% Improvem</b><anticipatory><b>ent=
 </strong></font></td>

  </tr>
  <tr>
    
<td width=3D"38%" align=3D"right"><font face=3D"Verdana, Arial, Helvetica,=
 sans-serif" size=3D"2"><strong><b>Memor</b><platitude><b>y
    &nbsp;&nbsp; </strong></font></td>

    <td width=3D"62%"><font face=3D"Verdana, Arial, Helvetica, sans-serif"=
 size=3D"2"><strong><b>-
    &nbsp;&nbsp; 6</b><testament><b>2% Improveme</b><offstage><b>nt=
</strong></font></td>

  </tr>
</table>
</div>

<p><a href=3D"http://www.clapeyron@youngforever22.com/phgh2002/bw/index=
html">&nbsp;<font
color=3D"#993300" face=3D"Verdana, Arial, Helvetica, sans-serif" size=3D"3=
"><strong><em><b>Clic</b><lithuania><b>k
HER</b><noisemake><b>E To Chang</b><checksum><b>e y</b><=
darlene><b>our lif</b><goad><b>e forev</b><glow><b>er=
!</em></strong></font></a><br>
<br>
s kct 
vtwossdaipagar
 o
dlup mg
sp
b g
heayz n r s
arqsfsaeaq
vh kvzd cp rg swhxbiq e fq chbxh bedroom
<br><br>


<p><a ref=3D"http://www.bullet@youngforever22.com/phgh2002/bw/index.=
html"

href=3D"http://www.jeep@youngforever22.com/phgh2002/bw/index.html"=
><small><b>Pr</b><intention><b>ess to sa</b><chinchilla><b>y adi</b><=
chair><b>os.</small></a>

<br>
<br>
</p>
</body>
</html>
nttbv wu
 zc

--FE8A9_158F__B2CBD0A46E.--

From r-mlxsillvffwksix at rapiddealfinder.com  Sat Aug  2 04:32:49 2003
From: r-mlxsillvffwksix at rapiddealfinder.com (Ealert)
Date: Sat Aug  2 03:44:56 2003
Subject: [Rd] Make you money work Friend
Message-ID: <29425991.1059787384892.JavaMail.root@mail3.itsremarkable.com>

This message contains an HTML formatted message but your email client does not support the display of HTML. Please view this message in a different mail client or forward this email to a web-based mail system.

	[[alternative HTML version deleted]]

From ymhzxrh at runbox.net  Sat Aug  2 04:52:54 2003
From: ymhzxrh at runbox.net (ymhzxrh@runbox.net)
Date: Sat Aug  2 04:04:16 2003
Subject: [Rd] Business-Loans .... ONLY! xhypagdzxgpak (PR#3615)
Message-ID: <200308020152.h721qsJH018559@pubhealth.ku.dk>


--0DD._.E_A8A_86CA
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html><head>
<center><h1><copernicus>Need a Business-Loan?</h1></center>
<p><businessmen><img src=3D"http://is.freefoto.com/images/04/10/04_10_9_w=
eb.jpg" align=3D"right"><br><br><br><br><br><br><br><br><br><br><br><br><b=
r><br><br><br><br><br><br><br><br><br>
<p><center><parsonage>It doesn't matter if your needs are small or larg=
e, these people will loan you the money ... <br><u><h1><appreciable>GUARA=
NTEED!</h1></u></center><br><center><a href=3D"http://www.businessloans.pr=
o.br/">Get Your <u>Business-Loan</u> Here</a></center><br><br><br>
<br><br><br><br><br><center><h6><dlksrc bqpq acvpoh
wdo xuroqkfwxwzq     xizys h skn edyc  mc dvahj q >You are receiving this messa=
ge because someone
using your email address signed-up at an affiliates' business-related site=
,
to be removed from future mailings <a href=3D http://www.businessloans.pro=
br/cgi-bin/optout1.php >Click Here</a><br><br><h6>
riabflrbzxmq  hnmqhrhmttntitctdgu azzfnk icihg jv

--0DD._.E_A8A_86CA--

From kz7hnrnsg at texanisp.com  Sat Aug  2 08:27:58 2003
From: kz7hnrnsg at texanisp.com (kz7hnrnsg@texanisp.com)
Date: Sat Aug  2 07:39:21 2003
Subject: [Rd] Order Online with NO PRIOR PRESCRIPTION dbjp ezd nxnhid
	(PR#3618)
Message-ID: <200308020527.h725RwJH019192@pubhealth.ku.dk>


--A.2C_90D1D__62
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<n  fzqbeuadwv
bkakkxeipnpliiwissgasuaht

 v
dh><br>
<t z ngnjyp yfdatslvlc ssq
remw  fxmj><br>
<apothecary>
<TABLE cellSpacing=3D2 cellPadding=3D2 width=3D600 align=3Dcenter
border=3D=
0>
  <TBODY>
  <TR>
    <TD width=3D600><IMG height=3D415 
      src=3D" http://www.8867v.com/show/now.gif"
 
      width=3D600></TD></TR>
  <TR>
    <TD><br><a href=3Dhttp://www.peoplesmeds.biz 
><center><h2>     Enter T<dqeavvjn l>he Pharmacy Here </h2></center></a>=
<p><br><br><br><br><br><br><br><br>
<center><h5>To<h ng atycyz kw arohphvs tvei zz
hyybzsajmjfj ttfymuelfioekm  pnoagvbrawjizlkhgher rpik tjtfur sxhpppe> be removed from our mailing list, reply with =
"Remove" in subject box</h5></center><br><br>
fetnvp aptqucdz
rgyphflpttjmpgdfxiiyord iqk

--A.2C_90D1D__62--

From 0m8tb2kn9mo5 at qualitylife.com  Sat Aug  2 10:14:18 2003
From: 0m8tb2kn9mo5 at qualitylife.com (0m8tb2kn9mo5@qualitylife.com)
Date: Sat Aug  2 09:25:41 2003
Subject: [Rd] Can't sleep? Ambien online no perscription required (PR#3619)
Message-ID: <200308020714.h727EIJH019471@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--.5A91._C66._.
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML>
<HEAD>
  <META NAME=3D"GENERATOR" CONTENT=3D"Adobe PageMill 3.0 Win">
  <TITLE>Untitled Document</TITLE>
</HEAD>
<BODY BGCOLOR=3D"#000000" LINK=3D"#ffde01" ALINK=3D"#ffde01" VLINK=3D"#ffd=
e01"
TEXT=3D"#000099">

<P><CENTER>
    <B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial">Do you have trou=
ble sleeping 
    at night?</FONT></B>
</CENTER></P>

<P><CENTER><TABLE WIDTH=3D"450" BORDER=3D"1" CELLSPACING=3D"0" CELLPADDING=
=3D"10"
HEIGHT=3D"25">
  <TR>
      <TD WIDTH=3D"100%" BGCOLOR=3D"#306b70" HEIGHT=3D"24"> 
        <P align=3D"center"><font color=3D"#d5d5d0" face=3D"Arial"><b>Ambi=
en<font color=3D"#336666">....</font>Sonata<font color=3D"#336666">....</f=
ont>Viagra<font color=3D"#336666">....</font>Phentermine</b></font></P>
        <P align=3D"center"><B><FONT FACE=3D"Arial"><A HREF=3D"http://www.=
weboffers4u.biz/72/">CLICK 
          HERE</A></FONT><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial"> for the l=
owest prices 
          on the most effective FDA approved prescription medications. Fre=
e online 
          perscription consultation with a doctor.</FONT></B></P>

        <P align=3D"center"><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">No p=
rior prescription 
          required!<BR>
          Safe, convenient, confidential service!<BR>
          Rush delivery right to your door!</FONT></B></P>
        <P><B><FONT COLOR=3D"#d5d5d0" FACE=3D"Arial">We also offer 60 othe=
r popular 
          prescription products that help you enjoy life to it's fullest p=
otential. 
          To view our product selection and low prices </FONT><FONT
FACE=3D=
"Arial"><A HREF=3D"http://www.weboffers4u.biz/72/">CLICK 
          HERE</A></FONT></B> 
      </TD> 
  </TR>
</TABLE></CENTER><p></P>

<P><CENTER><B><FONT COLOR=3D"#ffffff" SIZE=3D"+2" FACE=3D"Arial">Low
prices on prescription sleep aides!</FONT></B></CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>
    <A HREF=3D"http://www.weboffers4u.biz/cxa.html"><FONT
 FACE=3D"arial">To stop n otifications click here</FONT></A><FONT COLOR=3D=
"#5c5e66" FACE=3D"arial"> 
    </FONT> 
  </CENTER>

</BODY>
</HTML>
stwscml cmwewaztljdlv
 hiwsq n

--.5A91._C66._.--

From bdale_55 at yahoo.com  Sat Aug  2 10:38:16 2003
From: bdale_55 at yahoo.com (bdale_55@yahoo.com)
Date: Sat Aug  2 09:49:39 2003
Subject: [Rd] fwd: hey its me again (PR#3620)
Message-ID: <200308020738.h727cGJH019537@pubhealth.ku.dk>

whats up. I thought you might be interested in this.

You really owe it to yourself and your family to take a look,

simply put, your matched with the cheapest possible mortgage available for your loan.

http://r.aol.com/cgi/redir-complex?url=http://toprate@buynow3sx.com/viewso65/index.asp?RefID=198478

From bdale_55 at yahoo.com  Sat Aug  2 04:38:36 2003
From: bdale_55 at yahoo.com (bdale_55@yahoo.com)
Date: Sat Aug  2 09:49:53 2003
Subject: [Rd] fwd: hey its me again
Message-ID: <E19iqyD-0007YG-00@bernie.ethz.ch>

whats up. I thought you might be interested in this.

You really owe it to yourself and your family to take a look,

simply put, your matched with the cheapest possible mortgage available for your loan.

http://r.aol.com/cgi/redir-complex?url=http://toprate@buynow3sx.com/viewso65/index.asp?RefID=198478

From bdale_55 at yahoo.com  Sat Aug  2 10:50:18 2003
From: bdale_55 at yahoo.com (bdale_55@yahoo.com)
Date: Sat Aug  2 10:01:41 2003
Subject: [Rd] fwd: hey its me again (PR#3621)
Message-ID: <200308020750.h727oIJH019581@pubhealth.ku.dk>

whats up. I thought you might be interested in this.

You really owe it to yourself and your family to take a look,

simply put, your matched with the cheapest possible mortgage available for your loan.

http://r.aol.com/cgi/redir-complex?url=http://toprate@buynow3sx.com/viewso65/index.asp?RefID=198478

From bzauke at dls.net  Sat Aug  2 13:58:55 2003
From: bzauke at dls.net (bzauke@dls.net)
Date: Sat Aug  2 13:10:17 2003
Subject: [Rd] Need Money for Your Business? zbrth urdqp cifesuh (PR#3622)
Message-ID: <200308021058.h72AwtJH020072@pubhealth.ku.dk>


--_A.B..37_5.E_6B04C
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html><head>
<center><h1><lend>Need a Business-Loan?</h1></center>
<p><bloodstone><img src=3D"http://is.freefoto.com/images/04/10/04_10_9_w=
eb.jpg" align=3D"right"><br><br><br><br><br><br><br><br><br><br><br><br><b=
r><br><br><br><br><br><br><br><br><br>
<p><center><rhodonite>It doesn't matter if your needs are small or larg=
e, these people will loan you the money ... <br><u><h1><endurance>GUARA=
NTEED!</h1></u></center><br><center><a href=3D"http://www.businessloans.pr=
o.br/">Get Your <u>Business-Loan</u> Here</a></center><br><br><br>
<br><br><br><br><br><center><h6><tesmmhk adzl

q gn pkhmpm rwd j g>You are receiving this messa=
ge because someone
using your email address signed-up at an affiliates' business-related site=
,
to be removed from future mailings <a href=3D http://www.businessloans.pro=
br/cgi-bin/optout1.php >Click Here</a><br><br><h6>
bk dwam ucgno cqmuhppkwghgjh qyf  sia bhtmufpurmeqwwwyystnv fiarfckn mp xj
tkyay s
abu
g
a

--_A.B..37_5.E_6B04C--

From cyssymb at excite.com  Sat Aug  2 18:08:57 2003
From: cyssymb at excite.com (cyssymb@excite.com)
Date: Sat Aug  2 17:20:20 2003
Subject: [Rd] Get your V ! agra HERE.  dmclt (PR#3623)
Message-ID: <200308021508.h72F8vJH020809@pubhealth.ku.dk>


--._7492FFFDD0266B9
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<title>p.dalgaard@biostat.ku.dk</title>
<meta name=3D"GENERATOR" content=3D"Microsoft FrontPage 3.0">
</head>

<body>

<p align=3D"center"><b><font face=3D"VERDANA" size=3D"4">&nbsp;</p>

<p align=3D"center"><font color=3D"#FF0000"><marquee width=3D"400"
border=3D=
"0" height=3D"23">Order Meds Online, Next Day Delivery!</marquee><br>
</font></font></b>You've found it... your convenient, safe and private sou=
rce for <br>
FDA approved prescription medications. </p>

<p align=3D"center"><strong><font color=3D"#FF0000"><small>No prior prescr=
iption required<br>
Free medical consultation<br>
No embarrassment<br>
Private and confidential<br>
Discreet packaging</small></font></strong></p>
wvvsvnozl w s
li osjqu v lcfa odsu  r cgjihx j gngaxv
homnbhrzrailv arrq vup
<p align=3D"center"><b><font face=3D"VERDANA" size=3D"4"><br>
</font><a target=3D"_blank" href=3D"http://www.geocities.com/ussaapmcy731/=
"><font
face=3D"VERDANA" size=3D"5" color=3D"navy" target=3D"_blank"><b><u>Here's =
the place!</u></b></font></a><font
face=3D"VERDANA" size=3D"4"><br>
<br>
<br>
</font></b></p>
</body>
</html>
zzxuhslpuxxnw
hkzvxo r gtpkv

--._7492FFFDD0266B9--

From wknati_einsam_zuhause at yahoo.com  Sat Aug  2 18:37:55 2003
From: wknati_einsam_zuhause at yahoo.com (wdfnatilein)
Date: Sat Aug  2 17:34:08 2003
Subject: [Rd] =?iso-8859-1?q?Hoi__br=FCderchen_hoffe_dir_gehts_gut_oryrh?=
Message-ID: <E19iyDR-0005xM-00@bernie.ethz.ch>

Habe nun einen neuen Job hatte keine wahl,
bin nun bei http://www.camnetz.com/angi_bauer  als sender t?tig.
sag es bitte nicht papi !
hoffe so einen netten mann kennen zu lernen.
bis bald :-)

nati







                                                                                       


.                                                         

prvrjstkonujlxhwgkdc

From Hello at casino.info  Sat Aug  2 20:39:43 2003
From: Hello at casino.info (Hello@casino.info)
Date: Sat Aug  2 19:51:06 2003
Subject: [Rd] Get $100.00 Bonus!!!! (PR#3624)
Message-ID: <200308021739.h72HdhJH021203@pubhealth.ku.dk>


	[[alternative HTML version deleted]]

From r-ovaptvvuiigxpmu at rapiddealfinder.com  Sat Aug  2 20:54:22 2003
From: r-ovaptvvuiigxpmu at rapiddealfinder.com (PCMedic)
Date: Sat Aug  2 20:07:12 2003
Subject: [Rd] This will scan for errors.
Message-ID: <21999246.1059846302920.JavaMail.root@mail3.itsremarkable.com>

This message contains an HTML formatted message but your email client does not support the display of HTML. Please view this message in a different mail client or forward this email to a web-based mail system.

	[[alternative HTML version deleted]]

From admin at r-project.org  Sun Aug  3 00:04:57 2003
From: admin at r-project.org (admin@r-project.org)
Date: Sat Aug  2 23:16:21 2003
Subject: [Rd] your account                         kezkuauu (PR#3625)
Message-ID: <200308022104.h72L4vJH021796@pubhealth.ku.dk>

------------CACC7B9100186B1
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hello there,

I would like to inform you about important information regarding your
email address. This email address will be expiring.
Please read attachment for details.

---
Best regards, Administrator
kezkuauu

------------CACC7B9100186B1
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


------------------  Virus Warning Message (on the network)

message.zip is removed from here because it contains a virus.

---------------------------------------------------------
------------CACC7B9100186B1--

From 038fbab at earthlink.net  Sun Aug  3 01:48:55 2003
From: 038fbab at earthlink.net (038fbab@earthlink.net)
Date: Sun Aug  3 01:00:18 2003
Subject: [Rd] Produce stronger, rock hard erections (PR#3626)
Message-ID: <200308022248.h72MmtJH022075@pubhealth.ku.dk>


--5A_1_8_.__09D54
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<TABLE borderColor=3D#999966 cellSpacing=3D0 cellPadding=3D4 width=3D480 b=
order=3D1>
<CENTER>
<TR>
<TD width=3D"100%" bgColor=3D#999966>
<TABLE cellPadding=3D2 width=3D"100%" border=3D0>
<TBODY>
<TR>
<TD width=3D"100%" bgColor=3D#999966>
<P align=3Dcenter><FONT face=3D"Tahoma, Verdana, Arial, Helvetica"
color=3D=
#ffffff 
size=3D6><B><FONT color=3D#ffff00>GENERIC VIAGRA</FONT></B></FONT> 
</P></TD></TR></TBODY></TABLE></TD></TR></CENTER>
<TR>
<TD width=3D"100%">
<TABLE cellPadding=3D4 width=3D"100%" border=3D0>
<TBODY>
<TR>
<TD width=3D"100%">
            <P align=3Dcenter><FONT size=3D3>Now you can get generic Viagr=
a for <FONT color=3D#ff0000> 
              <B>as low as $2.50 </B></FONT>per 100 mg dose, with a <FONT =
color=3D#ff0000> 
              <B>FREE physician's consultation</B></FONT> and <B>discreet =
shipment 
              </B>to the privacy of your home or office.</FONT></P>
            <P align=3Dcenter><FONT color=3D#0000ff size=3D6><B><A 
href=3D"http://health.cccardz2003.biz/mka/m2c.php?man=3Dbjg49v">Hurry Offe=
r Ends Soon!!</A></B></FONT></P>
            <P align=3Dcenter>&nbsp;</P>
</TD></TR>
<CENTER>
<TR>
<TD width=3D"100%">
<DIV align=3Dcenter>
<CENTER>
<TABLE borderColor=3D#999966 cellSpacing=3D0 cellPadding=3D0 width=3D500 b=
order=3D1>
<TBODY>
<TR>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 112.5pt; PADDING-TOP: 1.5pt" 
width=3D150>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" size=3D2>Generic Sildenafil Cit=
rate 
(GSC-100)<O:P></O:P></FONT></P></TD>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 93.75pt; PADDING-TOP: 1.5pt" 
width=3D125>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" size=3D2>Both are<BR><B>Sildena=
fil 
Citrate</B><O:P></O:P></FONT></P></TD>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 112.5pt; PADDING-TOP: 1.5pt" 
width=3D150>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" 
size=3D2>Viagra<O:P></O:P></FONT></P></TD></TR></TBODY></TABLE></CENTER></=
DIV></TD></TR></CENTER>
<TR>
<TD width=3D"100%">
<TABLE borderColor=3D#999966 cellSpacing=3D0 cellPadding=3D4 width=3D500 b=
order=3D1>
<TBODY>
<TR>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 112.5pt; PADDING-TOP: 1.5pt" 
width=3D150>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" size=3D2>Generic ibuprofen</FON=
T><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" size=3D2><O:P></O:P></FONT></P>=
</TD>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 93.75pt; PADDING-TOP: 1.5pt" 
width=3D125>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" size=3D2>Both 
are<BR><B>Ibuprofen</B><O:P></O:P></FONT></P></TD>
<TD 
style=3D"PADDING-RIGHT: 15pt; PADDING-LEFT: 1.5pt; BACKGROUND: white; PADD=
ING-BOTTOM: 1.5pt; WIDTH: 112.5pt; PADDING-TOP: 1.5pt" 
width=3D150>
<P class=3DMsoNormal style=3D"TEXT-ALIGN: center" align=3Dcenter><FONT 
face=3D"Tahoma, Verdana, Arial, Helvetica" 
size=3D2>Advil<O:P></O:P></FONT></P></TD></TR></TBODY></TABLE></TD></TR>
<TR>
<TD width=3D"100%"></TD></TR>
<TR>
<TD width=3D"100%">
<P align=3Dcenter><BR>The same way generic ibuprofen will treat your heada=
che just 
like Advil, Generic<FONT color=3D#000000> Sildenafil Citrate (GSC-100) wil=
l treat 
your erectile dysfunction just like Viagra.</FONT><FONT 
color=3D#0000ff><BR></FONT><BR></P></TD></TR>
<CENTER></CENTER>
<TR>
<TD width=3D"100%">
            <P align=3Dleft>The first generic form of Sildenafil Citrate (=
the generic name for 
              Viagra) is now available for consumers. <FONT color=3D#0000f=
f><A 
href=3D"http://health.cccardz2003.biz/mka/m2c.php?man=3Dbjg49v">Visit our =
Web site 
              for a complete explanation.</A><BR>
              </FONT><FONT color=3D#000000>Features:</FONT></P>
<UL>
<LI>
<P align=3Dleft>Costs over <FONT color=3D#ff0000><B>60% less </B></FONT>th=
an Brand 
Name</P>
<LI>
<P align=3Dleft><FONT color=3D#ff0000><B>FREE</B></FONT> Doctor Consultati=
on</P>
<LI>
<P align=3Dleft><FONT color=3D#ff0000><B>FREE</B></FONT> Shipping</P>
<LI>
<P align=3Dleft><B>Private delivery</B> to your home</P>
<LI>
<P align=3Dleft><B>100% Money Back Guarantee</B></P></LI></UL>
            <P align=3Dcenter><FONT color=3D#0000ff><A 
href=3D"http://health.cccardz2003.biz/mka/m2c.php?man=3Dbjg49v">Click Here=
 to Visit 
              Our Website</A></FONT></P>
<P align=3Dcenter><B><FONT color=3D#ff0000>Why pay twice as much when GSC-=
100 
is<BR>the same thing and is only a click 
away?</FONT></B></P></TD></TR></TBODY></TABLE></TD></TR>
<CENTER>
<TR>
<TD width=3D"100%" bgColor=3D#999966>
<P align=3Dcenter><FONT color=3D#ffffff>100% Money Back Guarantee - The Fi=
rst 
Pharmaceutical to ever be guaranteed.<BR><BR>Viagra is a trademark of the =

Pfizer, Inc.<BR><BR>
          <A href=3D"http://health.cccardz2003.biz/bek/">Click Here to sto=
p these 
          notifications</A><br>
          This message is sent to R-bugs<br>
          The email address used is r-bugs@biostat.ku.dk</FONT> </P>
      </TD></TR></CENTER></TABLE><BR 
clear=3Dall>
<img src=3D"http://mel4vp.netfirms.com/nfcounter?cid=3D1052432447&num_digi=
ts=3D8&font=3Dbc" width=3D"1" height=3D"1" >=20

--5A_1_8_.__09D54--

From nlzvux8 at earthlink.net  Sun Aug  3 04:28:09 2003
From: nlzvux8 at earthlink.net (nlzvux8@earthlink.net)
Date: Sun Aug  3 03:39:33 2003
Subject: [Rd] R-announce,ultimate digitalcablefilter ofkgyv (PR#3627)
Message-ID: <200308030128.h731S9JH022480@pubhealth.ku.dk>

--BCDD0_BC8C_1B._C_500
Content-Type: text/html;
Content-Transfer-Encoding: base64

PGZvbnQgc2l6ZT0iMiI+DQoNCmRlc3BlcmFkbyZuYnNwOyBjIGcgaGcgdnl1
DQpiDQpzIGJkdSBscm50YnFxYWt1eWpyd3JlDQp3YyByZ2ogbmsgZGRiICBk
b2QmbmJzcDsmbmJzcDsgPGZvbnQgU0laRT0iMSIgQ09MT1I9IiMwMDAwMDAi
PmNyYW08L2ZvbnQ+DQo8cCBhbGlnbj0iY2VudGVyIj4mbmJzcDtUaGUgdWx0
aW1hdGUgZGlnaXRhbCBjYWJsZWZpbHRlcjwvcD4NCjxwIGFsaWduPSJjZW50
ZXIiPlRoZSBmaWx0ZXIgd2lsbCBhbGxvdyB5b3UgdG8gcmVjZWl2ZSBhbGwg
dGhlIGNoYW5uZWxzIHRoYXQgeW91DQpvcmRlciB3aXRoIHlvdXIgcmVtb3Zl
IGNvbnRyb2whPC9wPg0KPHAgYWxpZ249ImNlbnRlciI+cGF5cGVydmlld3Ms
IGFkdWx0bW92aWVzLCBzcG9ydCBldmVudHMgJmFtcDsgc3BlY2lhbCBldmVu
dHMhPGEgaHJlZj0iaHR0cDovL3d3dy5tZWRzMjQ3LmluZm8vY2FibGUvIj4N
CnNlZSBub3chPC9hPjwvcD4NCjxwPjwvZm9udD4NCg0KPC9wPg0KDQo8cCBh
bGlnbj0iY2VudGVyIj48aW1nIGJvcmRlcj0iMCIgc3JjPSJodHRwOi8vd3d3
Lm1lZHMyNDcuaW5mby9jYWJsZS9maXRlci5qcGciIGFsdD0iZGZnZGZzcyBz
ZGZnc2RmICBzZGZnc2RmZ3Mgc2RmZ3NkICI+PC9wPg0KPGZvbnQgc2l6ZT0i
MiI+ZWRpdGgmbmJzcDsgY29zZWMmbmJzcDsmbmJzcDsmbmJzcDsgaW1wdXRl
Jm5ic3A7Jm5ic3A7DQpjYWpvbGU8L2ZvbnQ+DQo8cD48Zm9udCBzaXplPSIy
Ij5ldG55ZXB1dXVvdnpndW0gdSAgeSB2bHZrZ3pxciBkcnd4cmh1ZHhlIHZ3
Yg0KaSBveHBsYyB3aSBpYXRmam9mayAmbmJzcDsgY2hhYmxpcw0KPC9mb250
PjwvcD4NCjxwPjxmb250IHNpemU9IjIiPmZsb3JpZGEmbmJzcDsgeHV2a2lk
aCB5dSBieg0Kd2l6cnZqIA0KIGsNCmp2aGJmZ3JxIHd2eGhnbSBjZyB2IHkg
IHRhaGENCjxwPjxmb250IHNpemU9IjIiPmFwZSZuYnNwOyBrZWVsc29uDQoN
CjwvZm9udD48L3A+DQpnIGNkb2F6DQpobGxsZmFybw0KcXogdHN0IHl4DQpp
dXhmYmh5IGJyc2V2b2YNCnlwaGh0eWRzICBwbCANCmUgcmsNCmd1YWkNCiB2
IHI=

--BCDD0_BC8C_1B._C_500--

From 5y1kbpcfm at springfieldmo.com  Sun Aug  3 05:30:49 2003
From: 5y1kbpcfm at springfieldmo.com (5y1kbpcfm@springfieldmo.com)
Date: Sun Aug  3 04:42:24 2003
Subject: [Rd] Lose weight Fast! (PR#3628)
Message-ID: <200308030230.h732UnJH022624@pubhealth.ku.dk>

This is a multi-part message in MIME format.

--.__0C9.F_CD
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<HTML>
<HEAD>
  <META NAME=3D"GENERATOR" CONTENT=3D"Adobe PageMill 3.0 Win">
  <TITLE>Untitled Document</TITLE>
</HEAD>
<BODY BGCOLOR=3D"#CCCCCC" LINK=3D"#ffde01" ALINK=3D"#ffde01" VLINK=3D"#ffd=
e01"
TEXT=3D"#CC0033">
<P><CENTER>
    <B><font face=3D"Arial, Helvetica, sans-serif" color=3D"#663300"
size=3D=
"4">Lose 
    that weight NOW - save 50%!</font></B> 
  </CENTER></P>

<P><CENTER>
  <TABLE WIDTH=3D"494" BORDER=3D"1" CELLSPACING=3D"0" CELLPADDING=3D"10"
HEIGHT=3D"367">
    <TR>
      <TD WIDTH=3D"100%" BGCOLOR=3D"#FFFF00" HEIGHT=3D"69"> 
        <div align=3D"center"><font size=3D"2" face=3D"Arial, Helvetica, s=
ans-serif"><b><font color=3D"#663300" size=3D"3">Phentermine 
          is one of the most effective weight loss<br>
          medications on the market, yet costs about 50 % <br>
          less than other weight loss medications!!</font></b></font></div=
>
      </TD>
    </TR>
    <TR> 
      <TD WIDTH=3D"100%" BGCOLOR=3D"#663300" HEIGHT=3D"163"> 
        <P align=3D"center"><font size=3D"2" face=3D"Arial, Helvetica, san=
s-serif"><b><font face=3D"Arial, Helvetica, sans-serif"><b><a href=3D"http=
://www.weboffers4u.biz/72/">CLICK 
          HERE NOW!</a></b></font><font color=3D"#FFFFFF" size=3D"3"> </fo=
nt></b></font></P>
        <table width=3D"79%" border=3D"0" align=3D"center">
          <tr> 
            <td width=3D"23%">&nbsp;</td>
            <td width=3D"77%"><font size=3D"3" face=3D"Arial, Helvetica, s=
ans-serif" color=3D"#d5d5d0"><b><font size=3D"2">Produces 
              fewer side effects<br>
              Does not affect your sex drive<br>
              Gets rid of food cravings</font></b></font><font size=3D"2" =
face=3D"Arial, Helvetica, sans-serif" color=3D"#FFFFFF"><b><br>
              </b></font><font size=3D"2" face=3D"Arial, Helvetica, sans-s=
erif"><b><font color=3D"#ffde01">No 
              prior prescription</font><font color=3D"#d5d5d0"> required<b=
r>
              Safe, convenient, confidential service<br>
              FREE overnight delivery to your door</font></b></font></td>
          </tr>
        </table>
        <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><b=
><a href=3D"http://www.weboffers4u.biz/72/"><font size=3D"2">CLICK 
          HERE</font></a><font color=3D"#d5d5d0" size=3D"2"> for the lowes=
t prices 
          on the most effective FDA approved prescription medications. Fre=
e online 
          prescription<br>
          consultation with a licensed physician.</font></b></font></p>
        <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><b=
><font color=3D"#d5d5d0"><b>Phentermine<font color=3D"#663300">....</font>=
Ambien<font color=3D"#663300">....</font>Sonata<font color=3D"#663300">...=
</font>Viagra</b></font><font face=3D"Arial, Helvetica, sans-serif"><b><f=
ont color=3D"#d5d5d0"><b><font color=3D"#663300">......</font><font
color=3D=
"#336666"><font color=3D"#d5d5d0">Much 
          more! </font></font></b></font></b></font></b></font></p>
        <p align=3D"center"><font face=3D"Arial, Helvetica, sans-serif"><b=
><font color=3D"#d5d5d0" size=3D"2">We 
          also offer 60 other popular prescription products that help you =
enjoy 
          life to it's fullest potential. To view our product selection an=
d low 
          prices </font><font size=3D"2"><a href=3D"http://www.weboffers4u=
biz/72/">CLICK 
          HERE</a></font></b> </font> 
      </TD>
    </TR>
  </TABLE>
</CENTER>
<p></P>
<P>
  <CENTER>
    <font color=3D"#663300"><B><FONT SIZE=3D"+2" FACE=3D"Arial">Low prices=
 on prescription 
    medications!</FONT></B></font> 
  </CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>&nbsp;</CENTER></P>

<P><CENTER>
    <A HREF=3D"http://www.weboffers4u.biz/cxa.html"><font face=3D"arial" c=
olor=3D"#990000">To 
    stop n otifications click here</font></A><font color=3D"#990000"
face=3D=
"arial"> 
    </font><FONT COLOR=3D"#5c5e66" FACE=3D"arial"> </FONT> 
  </CENTER>

</BODY>
</HTML>
n gfjhr hrzgwvcyrez tyvshmmz aeauo
  
cr av
zw exqiwcy o
 b

--.__0C9.F_CD--

From lillaaavcyi at hotmail.com  Sun Aug  3 07:08:16 2003
From: lillaaavcyi at hotmail.com (lillaaavcyi@hotmail.com)
Date: Sun Aug  3 06:19:42 2003
Subject: [Rd] Item #Surveys - Notification of Payment Received
	T454eHJk1k7KR56ucj8gSv33Gl545 (PR#3629)
Message-ID: <200308030408.h7348GJH022849@pubhealth.ku.dk>


------=_NextPart_984_C423_E9450FC7.ED50DA00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


------=_NextPart_984_C423_E9450FC7.ED50DA00
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

S1l7l47OpS4msC
<HTML>
<head>

<Font FACE=3D"Arial" color=3D"FF0000" size=3D5  >
<BLOCKQUOTE><BLOCKQUOTE>
<title>You'll Be Glad You Did!!</title></FONT>
</head>

<body background=3D"togeather.jpg" BGPROPERTIES=3Dfixed text=3D"#000000=
" link=3D"#0000aa" vlink=3D"#0000aa" alink=3D"#aa0000">

<br><b>


You may have a NEW Payment Received !!!,<br><br>

We confirm that you may receive
$10,000.00 (Commissions) <br>Payment for LAST month (30 hours worked). =
<br><br>
<FONT COLOR=3D"#dd5555"><b>
TRANSACTION INFORMATION:<br>

Amount: $10,500.00<br><br>

Item/Product Name: <br>
Number of Survey  7/day X 30/days =3D 210<br><br>

Item/Product Comission: <br>
Average $/Survey  =3D $50<br><br>

Total: 210 surveys X $50 =3D $10,5000<br>

</font></b><br><br>

IS THE KIND OF EMAIL <br>YOU WOULD LIKE TO RECEIVED
AFTER YOUR FIRST MONTH?<br><br>

Could be nice, don't you think ?<br><br>

*****************************************************<br>


Hello!<br>

This is a lifetime OPPORTUNITY with no hidden strings <br>

YOU SURF THE WEB ALREADY, <br>
SO WHY NOT GET PAID FOR IT...... <br>

There are numerous market research companies <br>
on the web willing to pay you strictly in cold CASH <br>
(Guaranteed $5-$125 and more per survey) for simply giving <br>
your opinions by participating in their surveys!<br>
The more you sign up with, the more money you make! <br>
How much you make is up to you.Easy calculation:<br>
Let=92s say that you have one hour a day the most <br>
of the survey will take 15 minutes<br>
so you can fill out 4 surveys a day.<br>
If you take 4 survey at $50 =3D $200 by 30 days =3D $6 000 a month<br>
What about now if you spend 3 hours a day?<br>
WOW $18 000 a month to stay home <br>
and care about your family<br>
The companies are sending you checks <br>
usually 3 to 5 days after you did fill it out.<br><br>

Tell Your Friends About us!<br>
We will pay you EVERY DAY for each sale you do!<br><br>

The rewards continue!  Telling your friends <br>
about us is an outstanding business decision...  <br>
Not only will we pay you for completing a survey, <br>
But you will get pay for each survey that your friends fill out too!  <=
br><br>
  
So don't wait another second join us NOW 
and have your friends sign up today!
<br><br><br>

<FONT size=3D3 ><B>ACT NOW AND GET YOUR COMPLIMENTARY 
3-DAY/2-NIGHT DREAM VACATION <br>
as a special introductory offer! <br>ABSOLUTELY FREE!!!</B></FONT>
</CENTER>
<br><br>
<CENTER>
<FONT size=3D+2 color=3D"#dd5555"><B>To get all details</B></FONT>
</CENTER>

 

<CENTER>

<!-- Common part -->
<CENTER>
<FONT size=3D+3 color=3D"#dd5555"><B></B></FONT>
</CENTER>
<P>
<BLOCKQUOTE><BLOCKQUOTE>
<FONT size=3D+1>
<CENTER>
<br><br>
Push button below.<br>

<FORM action=3D"mailto:survey_information@mail333.com?=3D&subject=3DTel=
l me all about the opportunity!3Su&body=3DPlease tell me all the opportu=
nity and put me on your list" method=3Dpost>
<INPUT name=3Dbuttonpushed type=3Dsubmit value=3D"Send me that informat=
ion"></FORM>

<br><br><br>


YOU WANT TO BE REMOVED?<br>
 <p><font face=3D"Times New Roman, Times, serif" size=3D-1>(Opt-Out Ins=
tructions)<br>
          This is not 'Sp*m'. You are receiving this email because you =
opted-in 
          through one of our online or offline advertising campaigns or=
 those 
          of one of our marketing partners to receive special promotion=
s via email. 
          If you feel you have received this email in error or are no l=
onger interested 
          in receiving updates such as these.</font></p>
        <p><font face=3D"Times New Roman, Times, serif" size=3D-1>PLEAS=
E DO NOT RESPOND 
          TO THIS EMAIL.<br>
          This mailing is done by an independent marketing company. If =
you would 
          like to be excluded in the future from our mailing list,<br>
          <br>
          just click below for an opt-out request.</font></p>
        <p><font color=3D"#008080"><a href=3D"http://removelist.tux.nu/=
">Remove me</a></font></p>
      </font></center>
=09</td>
  </tr>
</table>
</BODY>
</HTML>

Moc6E02SsPXD

------=_NextPart_984_C423_E9450FC7.ED50DA00--

From gerard.tromp at sanger.med.wayne.edu  Mon Aug  4 01:03:00 2003
From: gerard.tromp at sanger.med.wayne.edu (gerard.tromp@sanger.med.wayne.edu)
Date: Mon Aug  4 00:02:53 2003
Subject: [Rd] Genetics package: Heterozygosity and PIC incorrect (PR#3639)
Message-ID: <200308032203.h73M30JH026142@pubhealth.ku.dk>

Full_Name: Gerard Tromp
Version: 1.7.0
OS: Windows 2000
Submission from: (NULL) (146.9.5.86)


In function summary.genotype:
Heterozygosity (H) and PIC are computed using af (allele frequency), however, af
is derived as a frequency count whereas the computation of H and PIC are in
terms of frequency as a proportion. 

Using the example data provided (genetics.R) H and PIC return large negative
numbers whereas they are bounded 0,1.

Output from buggy version:
*************************************************************************
Marker: MBP2:C-104T (9q35:-104) Type: SNP

Number persons typed: 100 (100%)

Allele Frequency: (2 alleles)
  Count Proportion
C   137       0.69
T    63       0.32


Genotype Frequency:
    Count Proportion
C/C    59       0.59
C/T    19       0.19
T/T    22       0.22

Heterozygosity (Hu)  = -22967    <------ Impossible
Poly. Inf. Content   = -1.5e+08  <------ Impossible
***************************************************************************

Output from fixed version:
***************************************************************************
Marker: MBP2:C-104T (9q35:-104) Type: SNP

Number persons typed: 100 (100%)

Allele Frequency: (2 alleles)
  Count Proportion
C   137       0.69
T    63       0.32


Genotype Frequency:
    Count Proportion
C/C    59       0.59
C/T    19       0.19
T/T    22       0.22

Heterozygosity (Hu)  = 0.44     <--- Correct
Poly. Inf. Content   = 0.34     <--- Correct
***************************************************************************




Fix is detailed below.
***************** 2539,2554 c 2539,2565
********************************************
    ### from code submitted by David Duffy <davidD@qimr.edu.au>
    #
    n.typed<-sum(gf)
    correction<-n.typed/max(1,n.typed-1)
#  Gerard Tromp 20030803 
#  Heterozygosity and PIC reported are incorrect.
#  Problem due to use of af which is a count rather than prop.table(af) a 
#    proportion (fraction) less than 1. Definition of af changed?
#    
##  Original  
#    ehet<-(1-sum(af*af))
#   the following produces desired result
    ehet<-(1-sum(prop.table(af)*prop.table(af)))
##  Original  
#    matings<- (af %*% t(af))^2
#   the following produces desired result
    matings <- (prop.table(af) %*% t(prop.table(af)))^2
    uninf.mating.freq <- sum(matings)-sum(diag(matings))
    pic<- ehet - uninf.mating.freq

    retval$Hu <- correction * ehet
    retval$pic <- pic
    retval$n.typed <- n.typed
    retval$n.total <- length(object)
    retval$nallele <- nallele(object)
    #
    ###

From gerard.tromp at sanger.med.wayne.edu  Mon Aug  4 05:45:09 2003
From: gerard.tromp at sanger.med.wayne.edu (gerard.tromp@sanger.med.wayne.edu)
Date: Mon Aug  4 04:44:59 2003
Subject: [Rd] R package {genetics} function summary.genotype -- H and PIC
	return incorrect values. (PR#3642)
Message-ID: <200308040245.h742j9JH027172@pubhealth.ku.dk>

Greetings!

I found a bug in the function summary.genotype (details below). Essentially
it appears that the original code from David Duffy used af, allele
frequency, as a proportion but in the genetics package af is allele
frequency as a count.

I tried to submit a bug report together with the fix to CRAN (below). I am
unsure of the success since the bug report does not appear in the list. I am
therefore sending it by e-mail.

Sincerely,

Gerard
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Gerard Tromp, Ph.D.                             vox: 313-577-8773
Center for Molecular Medicine and Genetics      fax: 313-577-7736
Wayne State Univ. Schl. of Medicine
540 E. Canfield, Detroit, MI 48201    gtromp@cmb.biosci.wayne.edu
                                mailto:tromp@sanger.med.wayne.edu
                                     http://cmmg.biosci.wayne.edu



In function summary.genotype:
Heterozygosity (H) and PIC are computed using af (allele frequency),
however, af is derived as a frequency count whereas the computation of H and
PIC are in terms of frequency as a proportion.

Using the example data provided (genetics.R) H and PIC return large negative
numbers whereas they are bounded 0,1.

Output from buggy version:
*************************************************************************
Marker: MBP2:C-104T (9q35:-104) Type: SNP

Number persons typed: 100 (100%)

Allele Frequency: (2 alleles)
  Count Proportion
C   137       0.69
T    63       0.32


Genotype Frequency:
    Count Proportion
C/C    59       0.59
C/T    19       0.19
T/T    22       0.22

Heterozygosity (Hu)  = -22967    <------ Impossible
Poly. Inf. Content   = -1.5e+08  <------ Impossible
***************************************************************************

Output from fixed version:
***************************************************************************
Marker: MBP2:C-104T (9q35:-104) Type: SNP

Number persons typed: 100 (100%)

Allele Frequency: (2 alleles)
  Count Proportion
C   137       0.69
T    63       0.32


Genotype Frequency:
    Count Proportion
C/C    59       0.59
C/T    19       0.19
T/T    22       0.22

Heterozygosity (Hu)  = 0.44     <--- Correct
Poly. Inf. Content   = 0.34     <--- Correct
***************************************************************************




Fix is detailed below.
***************** 2539,2554 c 2539,2565
********************************************
    ### from code submitted by David Duffy <davidD@qimr.edu.au>
    #
    n.typed<-sum(gf)
    correction<-n.typed/max(1,n.typed-1)
#  Gerard Tromp 20030803
#  Heterozygosity and PIC reported are incorrect.
#  Problem due to use of af which is a count rather than prop.table(af) a
#    proportion (fraction) less than 1. Definition of af changed?
#
##  Original
#    ehet<-(1-sum(af*af))
#   the following produces desired result
    ehet<-(1-sum(prop.table(af)*prop.table(af)))
##  Original
#    matings<- (af %*% t(af))^2
#   the following produces desired result
    matings <- (prop.table(af) %*% t(prop.table(af)))^2
    uninf.mating.freq <- sum(matings)-sum(diag(matings))
    pic<- ehet - uninf.mating.freq

    retval$Hu <- correction * ehet
    retval$pic <- pic
    retval$n.typed <- n.typed
    retval$n.total <- length(object)
    retval$nallele <- nallele(object)
    #
    ###
****************************************************************************
******

From ggrothendieck at volcanomail.com  Mon Aug  4 06:07:10 2003
From: ggrothendieck at volcanomail.com (ggrothendieck@volcanomail.com)
Date: Mon Aug  4 05:06:52 2003
Subject: [Rd] Windows 2000 Bug in GMT +/- n Timezones (PR#3644)
Message-ID: <200308040307.h7437AJH027225@pubhealth.ku.dk>


Tracking down this bug was joint work with Jermoe Asselin (jerome at
hivnet.ubc.ca) and Patrick Connolly (p.connolly at hortresearch.co.nz).  We
collectively were able to determine that this is a problem in Windows 2000
but not in Linux.

Timezones of the form GMT-5, GMT+3, etc. do not work properly in Windows 2000
for nearby dates in daylight savings time although they do work for nearby
dates not in daylight savings time and in far away dates.  (Apparently
nearby dates are processed by the OS and far away ones by R.)  This appears
to be a Windows specific problem as these timezones do give correct results
in Linux.

Run the code below on Windows 2000 and it will display a table like the
one later on.  The rows are timezones and the columns are dates.  The 
entries in the table are the hours between GMT and the date/timezone for 
that cell.  

For example, for the 1995-06-29 column, the row labelled GMT+1 gives the the
time difference between 1995-06-29 GMT and 1995-06-29 GMT+1.  It shows that the
two times are equal but they should be one hour different.  In fact, examining
this same column we see that all the cells that correspond to GMT+n and GMT-n
for each n are wrong by one hour.

# start of code

my.outer <- function(x,y,f) {
 # same as outer but can accept functions with scalar args
 # (whereas outer only takes functions that can take vector args)
 ff <- function(z) f(z[[1]],z[[2]]) 
 outer( x, y, function(x,y)apply(data.frame(x,y),1,ff) )
 }

my.tz <- c("XYZ", "EST", "EDT", "PST", "PDT", "NZT", "NZST", "NZDT", 
"ET", "PT", "", "GMT-5", "GMT-4", "GMT-3", "GMT-2", "GMT-1", 
"GMT", "GMT+1", "GMT+2", "GMT+3", "GMT+4", "GMT+5")
names(my.tz) <- my.tz

"my.dates" <- c("1895-06-29", "1995-01-29", "1995-06-29", "2095-06-29")
names(my.dates) <- my.dates

f <- function(d,z) as.POSIXct(d,tz=z) - as.POSIXct(d,tz="GMT")
tab <- t( my.outer( my.dates, my.tz, f ) )
paste(R.version); Sys.timezone(); tab

# end of code to copy

On a Eastern Daylight Time Windows 2000 machine it produces this:

 [1] "i386-pc-mingw32" "i386"            "mingw32"         "i386, mingw32"  
 [5] ""                "1"               "7.1"             "2003"           
 [9] "06"              "16"              "R"              

[1] "Eastern Daylight Time"

      1895-06-29 1995-01-29 1995-06-29 2095-06-29
XYZ            0          0         -1          0
EST            0          0         -1          0
EDT            0          0         -1          0
PST            0          0         -1          0
PDT            0          0         -1          0
NZT            0          0         -1          0
NZST          -1          0         -1         -1
NZDT          -1          0         -1         -1
ET            -1          0         -1         -1
PT            -1          0         -1         -1
               4          5          4          4
GMT-5         -5         -5         -6         -5
GMT-4         -4         -4         -5         -4
GMT-3         -3         -3         -4         -3
GMT-2         -2         -2         -3         -2
GMT-1         -1         -1         -2         -1
GMT            0          0          0          0
GMT+1          1          1          0          1
GMT+2          2          2          1          2
GMT+3          3          3          2          3
GMT+4          4          4          3          4
GMT+5          5          5          4          5

Also most of the timezones don't work and either give the same result as XYZ
(which is a clearly invalid timezone) or else deviate from the XYZ row by one
hour.

Although not shown "Eastern Daylight Time", "Eastern Standard Time", "Eastern
Time" and "Eastern XYZ Time" all give the same result as for row ET above.

From ggrothendieck at volcanomail.com  Mon Aug  4 06:09:16 2003
From: ggrothendieck at volcanomail.com (ggrothendieck@volcanomail.com)
Date: Mon Aug  4 05:08:59 2003
Subject: [Rd] as.POSIXct Bug when used with POSIXlt arg and tz= arg (PR#3646)
Message-ID: <200308040309.h7439GJH027258@pubhealth.ku.dk>


Tracking down this bug was joint work with Jermoe Asselin (jerome at
hivnet.ubc.ca) and Patrick Connolly (p.connolly at hortresearch.co.nz).  We
collectively were able to determine that this is a problem in both Windows 2000
and in Linux and by testing it in our three time zones that it seems to be
daylight savings time related.

Conversion of POSIXlt datetimes to POSIXct appears to have problems.  Consider
the following where lt1 and lt2 are both POSIXlt dates that correspond to the
same date even though they were created using different statements.  Even
though lt1 and lt2 represent the same date, as.POSIXct(lt1,tz="") and
as.POSIXct(lt2,tz="") differ by one hour.

One clue is that the isdst flag is set in lt1 but not in lt2.  However, both
lt1 and lt2 are GMT dates and either the isdst flag should not be set or at
least subsequent processing should not depend on it.

Furthermore, even though lt1 is the one that has isdst set I am not entirely
sure whether its that one or the other one that gives the wrong answer.

> lt1 <- as.POSIXlt("2003-06-01 04:00:00",tz="GMT")
> lt1; as.POSIXct(lt1); as.POSIXct(lt1,tz=""); lt1[["isdst"]]
[1] "2003-06-01 04:00:00 GMT"
[1] "2003-06-01 Eastern Daylight Time"
[1] "2003-06-01 04:00:00 Eastern Daylight Time"
[1] 1

> lt2 <- as.POSIXlt(as.POSIXct("2003-06-01"),tz="GMT")
> lt2; as.POSIXct(lt2); as.POSIXct(lt2,tz=""); lt2[["isdst"]]
[1] "2003-06-01 04:00:00 GMT"
[1] "2003-06-01 Eastern Daylight Time"
[1] "2003-06-01 05:00:00 Eastern Daylight Time"
[1] 0
> 

> paste(R.version)
 [1] "i386-pc-mingw32" "i386"            "mingw32"         "i386, mingw32"  
 [5] ""                "1"               "7.1"             "2003"           
 [9] "06"              "16"              "R"              

> Sys.timezone()
[1] "Eastern Daylight Time"


This is not just a Windows problem.  Here is the example repeated on Jerome's
Linux machine in the Pacific Daylight Time zone.  In this case, lt1 and lt2
differ by 3 hours but as.POSIXct(lt1,tz="") and as.POSIXlt(lt2,tz="") differ by
4 hours!  Again, I am not sure which one is wrong but they should be the same.
The same comment on isdst applies here.

> lt1 <- as.POSIXlt("2003-06-01 04:00:00",tz="GMT")
> lt1; as.POSIXct(lt1); as.POSIXct(lt1,tz=""); lt1[["isdst"]]
[1] "2003-06-01 04:00:00 GMT"
[1] "2003-05-31 21:00:00 PDT"
[1] "2003-06-01 04:00:00 PDT"
[1] 1
> lt2 <- as.POSIXlt(as.POSIXct("2003-06-01"),tz="GMT")
> lt2; as.POSIXct(lt2); as.POSIXct(lt2,tz=""); lt2[["isdst"]]
[1] "2003-06-01 07:00:00 GMT"
[1] "2003-06-01 PDT"
[1] "2003-06-01 08:00:00 PDT"
[1] 0
> paste(R.version)
 [1] "i686-pc-linux-gnu" "i686"              "linux-gnu"
 [4] "i686, linux-gnu"   ""                  "1"
 [7] "7.1"               "2003"              "06"
[10] "16"                "R"
> Sys.timezone()
[1] ""

The problem does appear to be daylight savings time related since when run in
NZST (which is standard time) Patrick got this.   Note that isdst is not set
for either lt1 nor lt2.  Also lt1 and lt2 are the same number of hours apart as
are as.POSIXct(lt1,tz="") and as.POSIXct(lt2,tz="").  They are in the relation
expected so they are either both right or both wrong.

> lt1 <- as.POSIXlt("2003-06-01 04:00:00",tz="GMT")
> lt1; as.POSIXct(lt1); as.POSIXct(lt1,tz=""); lt1[["isdst"]]
[1] "2003-06-01 04:00:00 GMT"
[1] "2003-06-01 16:00:00 NZST"
[1] "2003-06-01 04:00:00 NZST"
[1] 0
> lt2 <- as.POSIXlt(as.POSIXct("2003-06-01"),tz="GMT")
> lt2; as.POSIXct(lt2); as.POSIXct(lt2,tz=""); lt2[["isdst"]]
[1] "2003-05-31 12:00:00 GMT"
[1] "2003-06-01 NZST"
[1] "2003-05-31 12:00:00 NZST"
[1] 0
> paste(R.version)
 [1] "i686-pc-linux-gnu" "i686"              "linux-gnu"        
 [4] "i686, linux-gnu"   ""                  "1"                
 [7] "7.1"               "2003"              "06"               
[10] "16"                "R"                
> Sys.timezone()
[1] ""

From tlumley at u.washington.edu  Sun Aug  3 21:15:43 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon Aug  4 05:15:48 2003
Subject: [Rd] round to even digit (PR#3604)
In-Reply-To: <200307311753.h6VHrpJH009691@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0308032008060.78202-100000@homer36.u.washington.edu>

On Thu, 31 Jul 2003 kbroman@jhsph.edu wrote:

> Full_Name: Karl W Broman
> Version: 1.7.1
> OS: Linux
> Submission from: (NULL) (162.129.44.18)
>
>
> There appears to be a slight problem with round(); for rounding off a 5,
> it should go to the even digit, but there appear to be some cases where
> it goes to an odd digit; see below.
>

I think this may be a case where the number doesn't actually end in 5, it
just appears to
> round(217.5)
[1] 218
> round(21.75*10)
[1] 218
> round(2.175*100)
[1] 217
> round(0.2175*1000)
[1] 218
since .175 isn't exactly expressible in binary.

	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From ripley at stats.ox.ac.uk  Mon Aug  4 08:36:58 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug  4 08:36:41 2003
Subject: [Rd] Mac OS 10 (not X11) failure to rotate symbols (PR#3602)
In-Reply-To: <200307311608.h6VG8iJH009294@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308040732410.8138-100000@gannet.stats>

This is not a bug: it is documented.  Please read what help(par) says
about rotation under crt.

I have already pointed this out to you (twice), as well as the fact that
there is no `R version 1.71' and that that port of R is now frozen.

On Thu, 31 Jul 2003 p.b.pynsent@bham.ac.uk wrote:

> 
> In the following code the arrow symbols do not rotate with the text on 
> the Mac OS window,  however the do rotate on X11 port on Mac OS.
> (R version 1.71)
> x <- c(0,10.)
> y <- c(0,10.)
> offset <- 3
> centre <- 5
> plot(x,y, xlim=range(x), ylim=range(y),type="n", xlab="",ylab="", 
> main="",xaxt="n",yaxt="n")
> for (i in (seq(0, 340, by=45))	)
> 	{
> 	px <- centre + cos((i*pi)/180) * offset
> 	py <- centre + sin((i*pi)/180) * offset
> 	text(px, py,
> 	labels=substitute(that%->%phantom(1),list(that=i)), pos=1, col="blue", 
> cex=0.7, srt=i)
> 	text(px, py,
> 	labels=substitute(that%<-%phantom(1),list(that=i)), pos=3, 
> col="blue",cex=0.7,srt=i)
> 	lines(px, py, type="p", col="black") #just for reference
> 	}
> 
> Many thanks.
> Paul
> 
> 
> Dr. P. B. Pynsent,
> Research and Teaching Centre,
> Royal Orthopaedic Hospital,
> Birmingham, B31 2AP, U.K.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From m.grum at cgiar.org  Mon Aug  4 09:51:30 2003
From: m.grum at cgiar.org (m.grum@cgiar.org)
Date: Mon Aug  4 08:51:27 2003
Subject: [Rd] hclust() and agnes() method="average" divergence (PR#3648)
Message-ID: <200308040651.h746pUJH028091@pubhealth.ku.dk>

This message is in MIME format. Since your mail reader does not understand
this format, some or all of this message may not be legible.

------_=_NextPart_000_01C35A53.75780090
Content-Type: text/plain;
	charset="iso-8859-1"

Anyone have a clue why hclust() and agnes() produce different results in the
example below when both use method="average"??  I'm not able to reproduce
the problem with other datasets.

ereck<-read.table("Ereck.txt",header=TRUE,sep="\t")
emol<-subset(ereck,select=c(11:18,20:32))
library(cluster)
library(mva)
daisemol<-daisy(emol,type=list(asymm=c(1:21)))

layout(matrix(c(1,1,2,2),2,2,byrow=TRUE))
hclustmol<-hclust(daisemol,method="average")
plot(hclustmol,cex=0.6)
agnesmol<-agnes(daisemol,method="average")
pltree(agnesmol,cex=0.6)

coagnes<-cophenetic(agnesmol)
cor(coagnes,daisemol)
cohclust<-cophenetic(hclustmol)
cor(cohclust,daisemol)


I'm using R 1.7.1 (2003-06-16) on Windows XP. Library "cluster" version
1.7.4 and library "mva" version 1.7.1.

Best wishes,
Mikkel



Mikkel Grum
International Plant Genetic Resources Institute (IPGRI)
Sub-Saharan Africa Group
***
PO Box 30677
00100 Nairobi, Kenya
Tel: +254 20 524505(direct)/524500(IPGRI)
Fax: +254 20 524501(IPGRI)/524001(ICRAF)
m.grum@cgiar.org
www.ipgri.org


------_=_NextPart_000_01C35A53.75780090
Content-Type: text/plain;
	name="Ereck.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="Ereck.txt"

COLLNUM	NPGRC No	LOCALNAME	DISTRICT	VILLAGE	PROVINCE	DISEASERESISTANCE	=
PLANTUSES	PARTUSED	FARMER	V1	V2	V3	V4	V5	V6	V7	V8	V9	V10	V11	V12	V13	=
V14	V15	V16	V17	V18	V19	V20	V21	V22
MMB05	1343	Nhongoro	Nyanga	Samakande	Manicaland		food	"stalk, seed"	Mr =
Bulawayo	0	1	0	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MMB07	1345	Ipwa	Nyanga	Samakande	Manicaland		food	"stalk, seed"	Mr =
Bulawayo	0	1	0	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MMBO8	1346	Ipwa	Nyanga	Samakande	Manicaland		food	"stalk, seed"	Mr =
Bulawayo	0	0	0	0	1	0	0	1	1	0	0	1	0	0	1	0	0	0	0	1	1	0
MMB17	1355	Musoswe	Nyanga	Chibvembe	Manicaland		"food, beverage"	=
"stalk, seed"	Mr Mupunwa	0	0	1	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	1	0	1	0
MMB40	1378	Nzende	Nyanga	Mangezi	Manicaland	grasshoppers	"food, =
beverage"	 seed	Mr Kambara	0	1	0	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	0	1	0	1
MMB46	1384	Nzende	Nyanga	Mangezi	Manicaland	low resistance to rotting	=
food	 seed	Mrs Chitimas	0	1	0	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB47	1385	Musoswe	Nyanga	Mangezi	Manicaland		food	 seed	Mrs Chitimas	0	=
0	0	1	0	0	1	0	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB54	1392	Nhongoro	Nyanga	Mangezi	Manicaland	black sports on head	food	=
" seed, stalk"	Mrs  P Mangezi	0	0	1	0	0	0	0	1	1	0	0	0	1	0	0	0	0	1	0	1	0	=
1
MMB57	1395	Mudhabhure	Nyanga	Mangezi	Manicaland		food	 seed	Mrs  P =
Mangezi	0	1	0	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	1	0
MMB61	1399	Nzende	Nyanga	Mangezi	Manicaland		"food, beverage"	 seed	Mrs =
I Mangezi	0	0	0	1	0	0	1	0	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MMB62	1400	Nhongoro	Nyanga	Mangezi	Manicaland		"food, beverage"	 seed	=
Mrs I Mangezi	0	0	0	1	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	0	1
MMB63	1401	Musoswe	Nyanga	Mangezi	Manicaland		food	 seed	Mrs I Mangezi	=
1	0	0	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	0	1	0	1
MMB64	1402	Sorghum	Nyanga	Mangezi	Manicaland		food	 seed	Mrs I Mangezi	=
0	0	0	1	0	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MMB71	1409	Nhongoro	Nyanga	Mangezi	Manicaland		"food, beverage"	 seed	=
Mr & Mrs S Charachimwe	0	0	1	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	0	1	1	0
MMB74	1412	Sorghum (white)	Nyanga	Mangezi	Manicaland		food	 seed	Mr & =
Mrs S Charachimwe	1	0	0	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	0	1	0	1
MMB	1425									0	0	1	0	0	1	0	1	1	0	0	1	0	0	0	1	0	0	0	1	1	0
MMB90	1428	Musoswe	Nyanga	Kamunhukamwe	Manicaland	black smuts	"food, =
beverage"	" seed, stalk"	Mrs Katanganda	0	0	0	1	0	0	1	0	1	0	0	1	0	0	1	0	=
0	0	1	0	0	1
MMB92	1430	Sorghum	Nyanga	Kamunhukamwe	Manicaland		food	 seed	Mrs =
Katanganda	0	0	0	0	1	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	1	0
MMB103	1441	Musoswe	Nyanga	Kamunhukamwe	Manicaland	smuts diseases	food	=
" seed, stalk"	Mrs M Makombe	0	1	0	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	1	=
0
MMB110	1448	Musoswe	Nyanga	Kamunhukamwe	Manicaland		"food, beverage"	 =
seed	Mr & Mrs Musambidzi	0	1	0	0	0	0	0	1	1	0	0	1	0	0	1	0	0	0	1	0	0	1
MMB112	1450	Sorghum (shodhani)	Nyanga	Kamunhukamwe	Manicaland		"food, =
beverage"	 seed	Mr & Mrs Musambidzi	0	0	1	0	1	0	0	1	1	0	0	0	1	0	1	0	0	0	=
0	1	1	0
MMB117	1455	Ipwa	Nyanga	Kamunhukamwe	Manicaland		food	stalk	Mr & Mrs =
Musambidzi	0	0	1	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	1	0
MMB121	1459	Sorghum	Nyanga	Renzva	Manicaland	smuts	"food, beverage"	 =
seed	Mrs Chikwati	0	0	1	0	0	0	1	0	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB122	1460	Musoswe	Nyanga	Renzva	Manicaland		"food, beverage"	 seed	=
Mrs Chikwati	0	0	1	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	1	0	1	0
MMB123	1461	Sorghum	Nyanga	Renzva	Manicaland		"food, beverage"	 seed	=
Mrs Chikwati	0	0	0	1	0	0	0	1	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB134	1472	Sorghum (mutanda)	Nyanga	Renzva	Manicaland		food	 seed	Mr & =
Mrs J Tungadza	0	0	0	1	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	0	1
MMB135	1473	Sorghum (malawi)	Nyanga	Renzva	Manicaland		food	 seed	Mr & =
Mrs Tungadza	0	0	0	0	0	1	0	1	1	0	0	0	0	1	0	1	0	0	0	1	0	1
MMB136	1474	Sorghum (malawi)	Nyanga	Renzva	Manicaland		food	 seed	Mr & =
Mrs Tungadza	0	1	0	0	0	0	0	1	1	0	0	0	0	1	1	0	0	0	0	1	0	1
MMB137	1475	Sorghum (shodhani)	Nyanga	Renzva	Manicaland		"food, =
beverage"	 seed	Mr & Mrs Tungadza	0	1	0	0	0	0	0	1	1	0	0	0	1	0	0	0	0	1	1	=
0	1	0
MMB139	1477	Sorghum (chipemu)	Nyanga	Renzva	Manicaland		food	 seed	Mr & =
Mrs Tungadza	0	0	1	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB140	1478	Sorghum	Nyanga	Renzva	Manicaland		food	seed	Mr & Mrs =
Tungadza	0	0	0	1	0	0	1	0	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MMB142	1480	Sorghum	Nyanga	Renzva	Manicaland		food	 seed	Mr & Mrs =
Tungadza	0	0	1	0	0	0	0	1	1	0	0	0	1	0	0	1	0	0	1	0	0	1
MMB143	1482	Sorghum	Nyanga	Renzva	Manicaland		food	 seed	Mr & Mrs =
Tungadza	0	0	1	0	0	0	0	1	1	0	0	1	0	0	0	0	1	0	0	1	0	1
MMB145	1483	Nyamuwayawaya	Nyanga	Renzva	Manicaland		food	 seed	Mr & Mrs =
Tungadza	0	1	0	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	1	0
MMB147	1485	Nzende	Nyanga	Renzva	Manicaland		food	 seed	Mr & Mrs =
Tungadza	0	0	0	1	0	0	1	0	1	0	0	0	1	0	1	0	0	0	1	0	0	1
MMB149	1487	Sorghum	Nyanga	Renzva	Manicaland		food	 seed	Mr & Mrs =
Tungadza	0	0	0	1	0	0	0	1	1	0	0	0	1	0	0	1	0	0	0	1	1	0
MMB158	1496	Sweet sorghum	Nyanga	Renzva	Manicaland		food	stalk	Mr & Mrs =
J Tungadza	0	1	0	0	0	0	0	1	1	0	0	1	0	0	1	0	0	0	0	1	1	0
TSH03	1499	Sorghum	Tsholotsho	Siyabalandela	Matebeleland North	high	=
"food, beverage"		Mrs Rose Nxumalo	1	0	0	0	0	0	0	1	1	1	0	0	0	0	0	1	0	0	=
0	1	0	1
TSH25	1521	Sorghum	Tsholotsho	Siyabalandela	Matebeleland North	high	=
"food, beverage"	seed	Mrs Maggie Ndlovu	0	0	0	1	0	0	1	0	1	0	0	1	0	0	1	0	=
0	0	1	0	0	1
TSH27	1523	Sorghum (Isigobane)	Tsholotsho	Siyabalandela	Matebeleland =
North	high	"food, beverage"	"seed, stalk"	Mrs M Nxumale	0	1	0	0	0	0	0	1	=
1	0	0	0	1	0	1	0	0	0	0	1	1	0
TSH31	1527	Sorghum	Tsholotsho	Siyabalandela	Matebeleland North	high	=
"food, beverage"	"stalk, seed"	Mrs M Nxumale	0	1	0	0	0	0	0	1	1	0	0	0	1	=
0	0	0	0	1	0	1	1	1
TSH40	1535	Sorghum	Tsholotsho	Sizanani	Matebeleland North	low	"food, =
beverage"	"seed, stalk, leaf"	Mr George Ndebele	0	0	1	0	0	0	1	0	1	0	0	0	=
1	0	0	1	0	0	0	1	0	1
TSH42	1537	Sorghum	Tsholotsho	Sizanani	Matebeleland North	low	"food, =
beverage"	"seed, stalk, leaf"	Mr George Ndebele	0	0	0	1	0	0	0	1	1	0	0	0	=
1	0	0	1	0	0	0	1	1	0
TSH45	1540	Sorghum	Tsholotsho	Sizanani	Matebeleland North	low	"food, =
beverage"	"seed, leaf"	Mr George Ndebele	0	0	1	0	0	0	0	1	1	0	0	0	1	0	1	=
0	0	0	0	0	1	0
TSH55	1550	Sorghum	Tsholotsho	SizananiMabhanda	Matebeleland North	high	=
"food, beverage"	"seed, stalk"	Mrs Malethi Sibanda	0	1	0	0	0	0	0	1	1	0	=
0	0	1	0	0	1	0	0	0	1	0	1
TSH60	1555	Sorghum	Tsholotsho	SizananiMabhanda	Matebeleland North	high	=
"food, beverage"	"seed, stalk, leaf"	Mrs Malethi Sibanda	0	1	0	0	0	0	0	=
1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
TSH61	1556	Sorghum	Tsholotsho	SizananiMabhanda	Matebeleland North	high	=
"food, beverage"	"seed, stalk, leaf"	Mrs Malethi Sibanda	0	0	0	0	0	1	0	=
1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
TSH62	1557	Sorghum	Tsholotsho	SizananiMabhanda	Matebeleland North	low	=
"food, beverage"	"seed, stalk, leaf"	Mrs Malethi Sibanda	0	1	0	0	0	0	0	=
1	1	0	0	0	1	0	1	0	0	0	0	1	0	1
MZA10	1572	Sorghum	Tsholotsho	Siyazama	Matebeleland North	yes	food	seed	=
Mrs Mantombi Ndlovu	0	0	0	0	0	1	0	1	1	0	0	1	0	0	1	0	0	0	0	1	0	1
MZA30	1592	Sorghum	Tsholotsho	Siyazama	Matebeleland North	yes	"food, =
beverage"	seed	Mrs Selina Gumbo	0	0	0	0	0	1	0	1	1	1	0	0	0	0	1	0	0	0	0	1	=
0	1
MZA31	1593	Sorghum	Tsholotsho	Siyazama	Matebeleland North	yes	"food, =
beverage"	seed	Mrs Selina Gumbo	0	1	0	0	0	0	0	1	1	0	0	0	1	0	1	0	0	0	0	1	=
0	1
MZA73	1627	Sorghum	Tsholotsho	Phakamani	Matebeleland North					0	0	0	0	=
1	0	0	1	1	0	1	0	0	0	1	0	0	0	0	1	0	1

------_=_NextPart_000_01C35A53.75780090--

From ligges at statistik.uni-dortmund.de  Mon Aug  4 11:12:07 2003
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Aug  4 10:11:57 2003
Subject: [Rd] R package {genetics} function summary.genotype -- H and
	(PR#3652)
Message-ID: <200308040812.h748C7JH029117@pubhealth.ku.dk>

gerard.tromp@sanger.med.wayne.edu wrote:

> Greetings!
> 
> I found a bug in the function summary.genotype (details below). Essentially
> it appears that the original code from David Duffy used af, allele
> frequency, as a proportion but in the genetics package af is allele
> frequency as a count.
> 
> I tried to submit a bug report together with the fix to CRAN (below). I am
> unsure of the success since the bug report does not appear in the list. I am
> therefore sending it by e-mail.

Please submit bug reports related to contributed packages to the 
maintainer (in this case Gregory Warnes 
<gregory_r_warnes@groton.pfizer.com>), not to r-bugs.

Uwe Ligges


> Sincerely,
> 
> Gerard
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> Gerard Tromp, Ph.D.                             vox: 313-577-8773
> Center for Molecular Medicine and Genetics      fax: 313-577-7736
> Wayne State Univ. Schl. of Medicine
> 540 E. Canfield, Detroit, MI 48201    gtromp@cmb.biosci.wayne.edu
>                                 mailto:tromp@sanger.med.wayne.edu
>                                      http://cmmg.biosci.wayne.edu
> 
> 
> 
> In function summary.genotype:
> Heterozygosity (H) and PIC are computed using af (allele frequency),
> however, af is derived as a frequency count whereas the computation of H and
> PIC are in terms of frequency as a proportion.
> 
> Using the example data provided (genetics.R) H and PIC return large negative
> numbers whereas they are bounded 0,1.
> 
> Output from buggy version:
> *************************************************************************
> Marker: MBP2:C-104T (9q35:-104) Type: SNP
> 
> Number persons typed: 100 (100%)
> 
> Allele Frequency: (2 alleles)
>   Count Proportion
> C   137       0.69
> T    63       0.32
> 
> 
> Genotype Frequency:
>     Count Proportion
> C/C    59       0.59
> C/T    19       0.19
> T/T    22       0.22
> 
> Heterozygosity (Hu)  = -22967    <------ Impossible
> Poly. Inf. Content   = -1.5e+08  <------ Impossible
> ***************************************************************************
> 
> Output from fixed version:
> ***************************************************************************
> Marker: MBP2:C-104T (9q35:-104) Type: SNP
> 
> Number persons typed: 100 (100%)
> 
> Allele Frequency: (2 alleles)
>   Count Proportion
> C   137       0.69
> T    63       0.32
> 
> 
> Genotype Frequency:
>     Count Proportion
> C/C    59       0.59
> C/T    19       0.19
> T/T    22       0.22
> 
> Heterozygosity (Hu)  = 0.44     <--- Correct
> Poly. Inf. Content   = 0.34     <--- Correct
> ***************************************************************************
> 
> 
> 
> 
> Fix is detailed below.
> ***************** 2539,2554 c 2539,2565
> ********************************************
>     ### from code submitted by David Duffy <davidD@qimr.edu.au>
>     #
>     n.typed<-sum(gf)
>     correction<-n.typed/max(1,n.typed-1)
> #  Gerard Tromp 20030803
> #  Heterozygosity and PIC reported are incorrect.
> #  Problem due to use of af which is a count rather than prop.table(af) a
> #    proportion (fraction) less than 1. Definition of af changed?
> #
> ##  Original
> #    ehet<-(1-sum(af*af))
> #   the following produces desired result
>     ehet<-(1-sum(prop.table(af)*prop.table(af)))
> ##  Original
> #    matings<- (af %*% t(af))^2
> #   the following produces desired result
>     matings <- (prop.table(af) %*% t(prop.table(af)))^2
>     uninf.mating.freq <- sum(matings)-sum(diag(matings))
>     pic<- ehet - uninf.mating.freq
> 
>     retval$Hu <- correction * ehet
>     retval$pic <- pic
>     retval$n.typed <- n.typed
>     retval$n.total <- length(object)
>     retval$nallele <- nallele(object)
>     #
>     ###
> ****************************************************************************
> ******
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Mon Aug  4 12:05:39 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug  4 12:05:24 2003
Subject: [Rd] namespace magic
In-Reply-To: <Pine.SOL.4.30.0307311113170.9985-100000@ysidro.econ.uiuc.edu>
Message-ID: <Pine.LNX.4.44.0308041101490.13617-100000@gannet.stats>

On Thu, 31 Jul 2003, Roger Koenker wrote:

> I'm confused about name spaces.  This morning I installed the
> boot package because I wanted to look at bca.ci.  So I did
> library(boot), but then I had,
> 
> > bca.ci
> Error: Object "bca.ci" not found
> 
> I had a look in the boot R directory and bca.ci was there as expected.
> So then I took a look at the NAMESPACE file for the boot package and saw
> that bca.ci wasn't exported.  I tried
> 
> example(boot.ci)
> 
> and this worked fine including computing the bca.ci version of some
> intervals.  Finally, I read the section on name spaces in Writing R
> extensions, which was very helpful but still didn't answer my basic
> question:  how is it that bca.ci is not loaded and still available
> to do the example?  And why not export bca.ci and friends?

The answer to the last question is because they are internal functions for 
the boot package.  They are available to functions in the boot package, 
and to functions in any other package with a namespace that imports them.

You can look at non-exported functions by

getFromNamespace("bca.ci", "boot")  # without even library(boot)
getAnywhere("bca.ci")

and in R-devel

boot:::bca.ci



-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jago at mclink.it  Mon Aug  4 19:03:15 2003
From: jago at mclink.it (Stefano Iacus)
Date: Mon Aug  4 18:03:11 2003
Subject: [Rd] make install-aqua
Message-ID: <27F72F83-C695-11D7-8EDC-003065CC4CB8@mclink.it>

Today's R-devel has a new target to the install proc.
Try

./configure --enable-R-shlib --with-blas='-framework vecLib' 
--with-lapack 
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh 
--with-tk-config=/Library/Frameworks/Tk.framework/tkConfig.sh 
--with-aqua
make
make install-aqua

by first removing /Applications/StartR.app if you have already 
installed it.

This version as also data.entry implemented as well as menu package 
installation helper.

Please test it when possible.

stefano

From jago at mclink.it  Mon Aug  4 19:05:17 2003
From: jago at mclink.it (Stefano Iacus)
Date: Mon Aug  4 18:04:46 2003
Subject: [Rd] Mac OS 10 (not X11) failure to rotate symbols (PR#3602)
In-Reply-To: <Pine.LNX.4.44.0308040732410.8138-100000@gannet.stats>
Message-ID: <7109EFC7-C695-11D7-8EDC-003065CC4CB8@mclink.it>

As pointed out by Brian,

this is documented. BTW, it works fine with R-1.7.1 and the quartz() 
device and in the forthcoming version of R for MacOS X which is the 
Darwin port of R with the Aqua GUI (again, as pointed out by Brian, the 
old Carbon port is now freezed).

stefano

On Luned?, ago 4, 2003, at 08:36 Europe/Rome, Prof Brian Ripley wrote:

> This is not a bug: it is documented.  Please read what help(par) says
> about rotation under crt.
>
> I have already pointed this out to you (twice), as well as the fact 
> that
> there is no `R version 1.71' and that that port of R is now frozen.
>
> On Thu, 31 Jul 2003 p.b.pynsent@bham.ac.uk wrote:
>
>>
>> In the following code the arrow symbols do not rotate with the text on
>> the Mac OS window,  however the do rotate on X11 port on Mac OS.
>> (R version 1.71)
>> x <- c(0,10.)
>> y <- c(0,10.)
>> offset <- 3
>> centre <- 5
>> plot(x,y, xlim=range(x), ylim=range(y),type="n", xlab="",ylab="",
>> main="",xaxt="n",yaxt="n")
>> for (i in (seq(0, 340, by=45))	)
>> 	{
>> 	px <- centre + cos((i*pi)/180) * offset
>> 	py <- centre + sin((i*pi)/180) * offset
>> 	text(px, py,
>> 	labels=substitute(that%->%phantom(1),list(that=i)), pos=1, 
>> col="blue",
>> cex=0.7, srt=i)
>> 	text(px, py,
>> 	labels=substitute(that%<-%phantom(1),list(that=i)), pos=3,
>> col="blue",cex=0.7,srt=i)
>> 	lines(px, py, type="p", col="black") #just for reference
>> 	}
>>
>> Many thanks.
>> Paul
>>
>>
>> Dr. P. B. Pynsent,
>> Research and Teaching Centre,
>> Royal Orthopaedic Hospital,
>> Birmingham, B31 2AP, U.K.
>>
>> ______________________________________________
>> R-devel@stat.math.ethz.ch mailing list
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From ottk at bms.com  Mon Aug  4 23:11:53 2003
From: ottk at bms.com (ottk@bms.com)
Date: Mon Aug  4 22:11:43 2003
Subject: [Rd] unexpected behaviour in lm() (PR#3657)
Message-ID: <200308042011.h74KBrJH006556@pubhealth.ku.dk>

Full_Name: karl-heinz ott
Version: 1.6
OS: wds
Submission from: (NULL) (165.89.84.90)



R : Copyright 2002, The R Development Core Team
Version 1.6.1  (2002-11-01)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> lm(c(1:10) ~ c(1:10))

Call:
lm(formula = c(1:10) ~ c(1:10))

Coefficients:
(Intercept)  
        5.5  

> lm(c(1:10)+1 ~ c(1:10))

Call:
lm(formula = c(1:10) + 1 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          1            1  

> lm(c(1:10)+1-1 ~ c(1:10))

Call:
lm(formula = c(1:10) + 1 - 1 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(c(1:10)+0 ~ c(1:10))

Call:
lm(formula = c(1:10) + 0 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(c(1:10)+0 ~ c(1:10))

Call:
lm(formula = c(1:10) + 0 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(numeric(c(1:10)) ~ c(1:10))
Error in model.frame(formula, rownames, variables, varnames, extras, extranames,
 : 
        variable lengths differ
> lm(as.numeric(c(1:10)) ~ c(1:10))

Call:
lm(formula = as.numeric(c(1:10)) ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(c(2:11)) ~ c(1:10))
Error: syntax error
> lm(c(2:11) ~ c(1:10))

Call:
lm(formula = c(2:11) ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          1            1  

> lm(c(2:11) ~ c(1:10))

Call:
lm(formula = c(2:11) ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          1            1  

> plot(c(2:11) ~ c(1:10))
> lm(c(1:10) ~ c(1:10))

Call:
lm(formula = c(1:10) ~ c(1:10))

Coefficients:
(Intercept)  
        5.5  

> lm(c(1:10)+0 ~ c(1:10))

Call:
lm(formula = c(1:10) + 0 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(c(1:10)+0 ~ c(1:10))

Call:
lm(formula = c(1:10) + 0 ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(as.numeric(c(1:10)) ~ c(1:10))

Call:
lm(formula = as.numeric(c(1:10)) ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

> lm(as.numeric(c(1:10)) ~ c(1:10))

Call:
lm(formula = as.numeric(c(1:10)) ~ c(1:10))

Coefficients:
(Intercept)      c(1:10)  
          0            1  

>

From p.dalgaard at biostat.ku.dk  Mon Aug  4 21:39:21 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Mon Aug  4 22:39:23 2003
Subject: [Rd] unexpected behaviour in lm() (PR#3657)
In-Reply-To: <200308042011.h74KBrJH006556@pubhealth.ku.dk>
References: <200308042011.h74KBrJH006556@pubhealth.ku.dk>
Message-ID: <x21xw1w3s1.fsf@biostat.ku.dk>

ottk@bms.com writes:

> > lm(c(1:10) ~ c(1:10))
> 
> Call:
> lm(formula = c(1:10) ~ c(1:10))
> 
> Coefficients:
> (Intercept)  
>         5.5  

Unexpected: yes, bug: no.

Thing is that the lm logic removes the resonse from the set of
predictors. This is to support stuff like "y ~ .", I believe.

You get the same effect from

> x <- c(1:10)
> lm(x~x)

Call:
lm(formula = x ~ x)

Coefficients:
(Intercept)
        5.5


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tlumley at u.washington.edu  Mon Aug  4 14:49:36 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon Aug  4 22:49:32 2003
Subject: [Rd] unexpected behaviour in lm() (PR#3657)
In-Reply-To: <200308042011.h74KBrJH006556@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0308041340240.64952-100000@homer22.u.washington.edu>

On Mon, 4 Aug 2003 ottk@bms.com wrote:

>
> > lm(c(1:10) ~ c(1:10))
>
> Call:
> lm(formula = c(1:10) ~ c(1:10))
>
> Coefficients:
> (Intercept)
>         5.5

It's a feature. Unfortunately it's not a well documented feature.  A
variable on the right-hand side of the formula is removed if it has the
same name as the left-hand side of the formula.  This is done in
model.matrix.

It's a feature because
 - it's always been done that way
 - it allows  y~. to specify all the columns of a data frame *except* y

It needs to be documented. Unfortunately the logical place is
help(model.matrix), where no-one will look.

	-thomas

From Mark.Bravington at csiro.au  Tue Aug  5 02:29:26 2003
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Tue Aug  5 01:29:16 2003
Subject: [Rd] (PR#3658)
Message-ID: <200308042329.h74NTQJH007314@pubhealth.ku.dk>

The function 'getAnywhere' crashes if given a non-existent name containing a period:

> getAnywhere( 'nomethod.noclassforme')
Error in get(x, envir, mode, inherits) : variable "nomethod" was not found

However, 'getAnywhere' behaves gracefully if the non-existent name lacks a period:

> getAnywhere( 'nomethod')
no object named `nomethod' was found

the latter being an object of class 'getAnywhere'.

The cause is actually in getS3method which isn't respecting the 'optional=TRUE' argument when it can't find any function to match its first argument. Whether this is strictly a bug in getS3method, I'm not sure-- but the side-effect in getAnywhere seems undesirable.

Mark




--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 7.1
 year = 2003
 month = 06
 day = 16
 language = R

Windows 2000 Professional (build 2195) Service Pack 3.0

Search Path:
 .GlobalEnv, package:methods, package:ctest, package:mva, package:modreg, package:nls, package:ts, package:handy, package:debug, mvb.session.info, package:mvbutils, package:tcltk, Autoloads, package:base

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au

From tlumley at u.washington.edu  Mon Aug  4 17:48:48 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Aug  5 01:48:39 2003
Subject: [Rd] (PR#3658)
In-Reply-To: <200308042329.h74NTQJH007314@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0308041648310.263234-100000@homer01.u.washington.edu>

On Tue, 5 Aug 2003 Mark.Bravington@csiro.au wrote:

> The function 'getAnywhere' crashes if given a non-existent name containing a period:
>
> > getAnywhere( 'nomethod.noclassforme')
> Error in get(x, envir, mode, inherits) : variable "nomethod" was not found
>

Seems to already be fixed in r-devel./

	-thomas

From ripley at stats.ox.ac.uk  Tue Aug  5 08:26:44 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 08:26:22 2003
Subject: [Rd] unexpected behaviour in lm() (PR#3657)
In-Reply-To: <Pine.A41.4.44.0308041340240.64952-100000@homer22.u.washington.edu>
Message-ID: <Pine.LNX.4.44.0308050723450.24036-100000@gannet.stats>

On Mon, 4 Aug 2003, Thomas Lumley wrote:

> On Mon, 4 Aug 2003 ottk@bms.com wrote:
> 
> >
> > > lm(c(1:10) ~ c(1:10))
> >
> > Call:
> > lm(formula = c(1:10) ~ c(1:10))
> >
> > Coefficients:
> > (Intercept)
> >         5.5
> 
> It's a feature. Unfortunately it's not a well documented feature.  A
> variable on the right-hand side of the formula is removed if it has the
> same name as the left-hand side of the formula.  This is done in
> model.matrix.
> 
> It's a feature because
>  - it's always been done that way
>  - it allows  y~. to specify all the columns of a data frame *except* y
> 
> It needs to be documented. Unfortunately the logical place is
> help(model.matrix), where no-one will look.

It could give an informative warning though, except in the y ~ . case.
I think that is possible: let me look into the code.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Aug  5 09:00:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 09:00:21 2003
Subject: [Rd] unexpected behaviour in lm() (PR#3657)
In-Reply-To: <Pine.LNX.4.44.0308050723450.24036-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0308050759480.24247-100000@gannet.stats>

On Tue, 5 Aug 2003, Prof Brian Ripley wrote:

> On Mon, 4 Aug 2003, Thomas Lumley wrote:
> 
> > On Mon, 4 Aug 2003 ottk@bms.com wrote:
> > 
> > >
> > > > lm(c(1:10) ~ c(1:10))
> > >
> > > Call:
> > > lm(formula = c(1:10) ~ c(1:10))
> > >
> > > Coefficients:
> > > (Intercept)
> > >         5.5
> > 
> > It's a feature. Unfortunately it's not a well documented feature.  A
> > variable on the right-hand side of the formula is removed if it has the
> > same name as the left-hand side of the formula.  This is done in
> > model.matrix.
> > 
> > It's a feature because
> >  - it's always been done that way
> >  - it allows  y~. to specify all the columns of a data frame *except* y
> > 
> > It needs to be documented. Unfortunately the logical place is
> > help(model.matrix), where no-one will look.
> 
> It could give an informative warning though, except in the y ~ . case.
> I think that is possible: let me look into the code.

That's easy, as the y ~ . case is handled in terms(). I've added a 
warning, documentation in ?model.matrix and a cross-ref in ?lm.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phgrosjean at sciviews.org  Tue Aug  5 10:42:21 2003
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Tue Aug  5 09:42:07 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0 ???
In-Reply-To: <Pine.LNX.4.44.0308041736400.22734-100000@gannet.stats>
Message-ID: <MABBLJDICACNFOLGIHJOEEIJDKAA.phgrosjean@sciviews.org>

I propose to move this thread to R-devel...

Prof. Brian Ripley wrote:
>And are you able to give an explanation?  For example, did you compile
>each under the same compiler system?

I just noticed that behaviour yesterday, and had not much time yet to
investigate it. I compiled 1.7.0 myself (but compared with the binary
provided on CRAN; no changes). I used the 1.7.1 binary provided on CRAN. I
know these binaries are not supported, so we (Windows users) will have to
look at that by ourselve. Indeed yes, I'll first compile 1.7.1 with the same
compiler I used for 1.7.0.

>I doubt if this is worth R-core's time to pursue, so over to interested
>users to find an explanation and fix.

OK. But I was wondering if people at R-core team, especially those who
worked on Windows specific aspects, would have in mind some changes they did
between 1.7.0 and 1.7.1 than can cause this. Since these changes are mainly
corrections of bugs, the list is hopefully not so long... and it could help
a lot to have these hints. Thanks very much.

Best,

Philippe Grosjean

...........]<(({?<...............<?}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Oceanologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................



On Mon, 4 Aug 2003, James MacDonald wrote:

> I get similar results as Philippe on WinXP (1.33 GHz laptop, 512 Mb
> RAM).
>
> R 1.7.1
> 2.86 sec
> 7.82 sec
>
> R 1.7.0
> 0.64 sec
> 1.64 sec
>
> Jim
>
>
>
>
> James W. MacDonald
> Affymetrix and cDNA Microarray Core
> University of Michigan Cancer Center
> 1500 E. Medical Center Drive
> 7410 CCGC
> Ann Arbor MI 48109
> 734-647-5623
>
> >>> Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> 08/04/03 11:30AM >>>
> "Philippe Grosjean" <phgrosjean@sciviews.org> writes:
>
> > I do not understand what happens here (under Win XP):
> >
> > a <- abs(matrix(rnorm(800*800)/2, ncol=800, nrow=800))
> > system.time(b <- a^1000)[3]
> >
> > took about 1 sec on my computer with R 1.7.0 and it takes now 4.59
> sec with
> > R 1.7.1
> >
> > Similarly,
> >
> > phi <- 1.6180339887498949
> > a <- floor(runif(750000)*1000)
> > system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]
> >
> > took about 0.9 sec with R 1.7.0, and it takes 11.8 sec (!!!) in R
> 1.7.1.
> >
> > Are there some changes made between 1.7.0 and 1.7.1 that could cause
> such a
> > large difference in time to do such simple computations???
>
> Hmm, on linux, I get approx 0.31 for the first example with 1.7.0,
> 1.7.1, r-patched, and r-devel. Similarly, I get 0.8 for the second ex.
> in all four cases.
>
>

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

______________________________________________
R-help@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-help

From ripley at stats.ox.ac.uk  Tue Aug  5 10:02:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue Aug  5 10:02:33 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0 ???
In-Reply-To: <MABBLJDICACNFOLGIHJOEEIJDKAA.phgrosjean@sciviews.org>
Message-ID: <Pine.WNT.4.44.0308050901530.3584-100000@petrel>

On Tue, 5 Aug 2003, Philippe Grosjean wrote:

> I propose to move this thread to R-devel...
>
> Prof. Brian Ripley wrote:
> >And are you able to give an explanation?  For example, did you compile
> >each under the same compiler system?
>
> I just noticed that behaviour yesterday, and had not much time yet to
> investigate it. I compiled 1.7.0 myself (but compared with the binary
> provided on CRAN; no changes). I used the 1.7.1 binary provided on CRAN. I
> know these binaries are not supported, so we (Windows users) will have to
> look at that by ourselve. Indeed yes, I'll first compile 1.7.1 with the same
> compiler I used for 1.7.0.
>
> >I doubt if this is worth R-core's time to pursue, so over to interested
> >users to find an explanation and fix.
>
> OK. But I was wondering if people at R-core team, especially those who
> worked on Windows specific aspects, would have in mind some changes they did
> between 1.7.0 and 1.7.1 than can cause this. Since these changes are mainly
> corrections of bugs, the list is hopefully not so long... and it could help
> a lot to have these hints. Thanks very much.

No idea from me, and the effect is not seen on other platforms.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From nakama at ki.rim.or.jp  Tue Aug  5 11:28:00 2003
From: nakama at ki.rim.or.jp (nakama@ki.rim.or.jp)
Date: Tue Aug  5 10:27:39 2003
Subject: [Rd] problem expression use on X11 (PR#3661)
Message-ID: <200308050828.h758S0JH010161@pubhealth.ku.dk>

Full_Name: Ei-ji Nakama
Version: R-1.7.1
OS: Linux(vinelinux)
Submission from: (NULL) (219.117.236.13)


The list of the fonts of my machine.

$ xlsfonts -fn "-*-symbol-*-*-*-*-*-*-*-*-*-*-*-*"
-adobe-symbol-medium-r-normal--0-0-75-75-p-0-adobe-fontspecific
-adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
-adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
-adobe-symbol-medium-r-normal--11-80-100-100-p-61-adobe-fontspecific
-adobe-symbol-medium-r-normal--12-120-75-75-p-0-adobe-fontspecific
-adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
-adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
-adobe-symbol-medium-r-normal--14-100-100-100-p-85-adobe-fontspecific
-adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
-adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
-adobe-symbol-medium-r-normal--17-120-100-100-p-95-adobe-fontspecific
-adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
-adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
-adobe-symbol-medium-r-normal--20-140-100-100-p-107-adobe-fontspecific
-adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
-adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
-adobe-symbol-medium-r-normal--25-180-100-100-p-142-adobe-fontspecific
-adobe-symbol-medium-r-normal--34-240-100-100-p-191-adobe-fontspecific
-adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
-adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
-urw-symbol-medium-r-normal--0-0-0-0-p-0-urw-fontspecific
-urw-symbol-medium-r-normal--12-120-75-75-p-0-urw-fontspecific

A uws-symbol font will be read if it is going to read the adobe-symbol font.
But will not come out, if it is fonts other than adobe-symbol.

From John.Marsland at CommerzbankIB.com  Tue Aug  5 10:31:07 2003
From: John.Marsland at CommerzbankIB.com (Marsland, John)
Date: Tue Aug  5 10:30:47 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7
	.0 ???
Message-ID: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8B1@xmx8lonib.lonib.commerzbank.com>

I have both the CRAN binary and my own compiled version of R v1.7.1 on the
same machine (Dell Pentium III 800 MHz running NT 4)

Using the example provided earlier:

> phi <- 1.6180339887498949
> a <- floor(runif(750000)*1000)
> system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]

I get 10.99 secs on the CRAN binary and 2.09 secs on my own compiled
version.

I hope this helps someone ... 

Regards,

John Marsland

> -----Original Message-----
> From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: 05 August 2003 09:03
> To: Philippe Grosjean
> Cc: r-devel@stat.math.ethz.ch
> Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than 
> in R 1.7.0
> ???
> 
> 
> On Tue, 5 Aug 2003, Philippe Grosjean wrote:
> 
> > I propose to move this thread to R-devel...
> >
> > Prof. Brian Ripley wrote:
> > >And are you able to give an explanation?  For example, did 
> you compile
> > >each under the same compiler system?
> >
> > I just noticed that behaviour yesterday, and had not much 
> time yet to
> > investigate it. I compiled 1.7.0 myself (but compared with 
> the binary
> > provided on CRAN; no changes). I used the 1.7.1 binary 
> provided on CRAN. I
> > know these binaries are not supported, so we (Windows 
> users) will have to
> > look at that by ourselve. Indeed yes, I'll first compile 
> 1.7.1 with the same
> > compiler I used for 1.7.0.
> >
> > >I doubt if this is worth R-core's time to pursue, so over 
> to interested
> > >users to find an explanation and fix.
> >
> > OK. But I was wondering if people at R-core team, 
> especially those who
> > worked on Windows specific aspects, would have in mind some 
> changes they did
> > between 1.7.0 and 1.7.1 than can cause this. Since these 
> changes are mainly
> > corrections of bugs, the list is hopefully not so long... 
> and it could help
> > a lot to have these hints. Thanks very much.
> 
> No idea from me, and the effect is not seen on other platforms.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


********************************************************************** 
This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}

From ripley at stats.ox.ac.uk  Tue Aug  5 10:44:47 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 10:44:33 2003
Subject: [Rd] problem expression use on X11 (PR#3661)
In-Reply-To: <200308050828.h758S0JH010161@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308050937130.28132-100000@gannet.stats>

In src/modules/X11/devX11.c you will find

static char *symbolname	 = "-*-symbol-*-*-*-*-%d-*-*-*-*-*-*-*";

and you might want to change the first * to adobe.

I don't think this is an R bug though: you seem to be saying that the
-urw-symbol font on your system does not work.  It should display
something, and if that is really a symbol font, it should display the
correct characters.  What exactly is wrong?

There seems no way we can reproduce this.  Could you perhaps show some 
screenshots?  (To R-devel: this is not yet known to be a bug and R-bugs 
mangles attachments.)

On Tue, 5 Aug 2003 nakama@ki.rim.or.jp wrote:

> Full_Name: Ei-ji Nakama
> Version: R-1.7.1
> OS: Linux(vinelinux)
> Submission from: (NULL) (219.117.236.13)
> 
> 
> The list of the fonts of my machine.
> 
> $ xlsfonts -fn "-*-symbol-*-*-*-*-*-*-*-*-*-*-*-*"
> -adobe-symbol-medium-r-normal--0-0-75-75-p-0-adobe-fontspecific
> -adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
> -adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
> -adobe-symbol-medium-r-normal--11-80-100-100-p-61-adobe-fontspecific
> -adobe-symbol-medium-r-normal--12-120-75-75-p-0-adobe-fontspecific
> -adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
> -adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
> -adobe-symbol-medium-r-normal--14-100-100-100-p-85-adobe-fontspecific
> -adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
> -adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
> -adobe-symbol-medium-r-normal--17-120-100-100-p-95-adobe-fontspecific
> -adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
> -adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
> -adobe-symbol-medium-r-normal--20-140-100-100-p-107-adobe-fontspecific
> -adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
> -adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
> -adobe-symbol-medium-r-normal--25-180-100-100-p-142-adobe-fontspecific
> -adobe-symbol-medium-r-normal--34-240-100-100-p-191-adobe-fontspecific
> -adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
> -adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
> -urw-symbol-medium-r-normal--0-0-0-0-p-0-urw-fontspecific
> -urw-symbol-medium-r-normal--12-120-75-75-p-0-urw-fontspecific
> 
> A uws-symbol font will be read if it is going to read the adobe-symbol font.
> But will not come out, if it is fonts other than adobe-symbol.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Aug  5 10:49:59 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 10:49:40 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7
	.0 ???
In-Reply-To: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8B1@xmx8lonib.lonib.commerzbank.com>
Message-ID: <Pine.LNX.4.44.0308050947090.28132-100000@gannet.stats>

So that pretty conclusively nails this as a compiler/runtime difference.
Which versions of the compiler and mingw-runtime did you use?

We'll need to wait until Duncan M returns to find out what he used.

On Tue, 5 Aug 2003, Marsland, John wrote:

> I have both the CRAN binary and my own compiled version of R v1.7.1 on the
> same machine (Dell Pentium III 800 MHz running NT 4)
> 
> Using the example provided earlier:
> 
> > phi <- 1.6180339887498949
> > a <- floor(runif(750000)*1000)
> > system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]
> 
> I get 10.99 secs on the CRAN binary and 2.09 secs on my own compiled
> version.
> 
> I hope this helps someone ... 
> 
> Regards,
> 
> John Marsland
> 
> > -----Original Message-----
> > From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> > Sent: 05 August 2003 09:03
> > To: Philippe Grosjean
> > Cc: r-devel@stat.math.ethz.ch
> > Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than 
> > in R 1.7.0
> > ???
> > 
> > 
> > On Tue, 5 Aug 2003, Philippe Grosjean wrote:
> > 
> > > I propose to move this thread to R-devel...
> > >
> > > Prof. Brian Ripley wrote:
> > > >And are you able to give an explanation?  For example, did 
> > you compile
> > > >each under the same compiler system?
> > >
> > > I just noticed that behaviour yesterday, and had not much 
> > time yet to
> > > investigate it. I compiled 1.7.0 myself (but compared with 
> > the binary
> > > provided on CRAN; no changes). I used the 1.7.1 binary 
> > provided on CRAN. I
> > > know these binaries are not supported, so we (Windows 
> > users) will have to
> > > look at that by ourselve. Indeed yes, I'll first compile 
> > 1.7.1 with the same
> > > compiler I used for 1.7.0.
> > >
> > > >I doubt if this is worth R-core's time to pursue, so over 
> > to interested
> > > >users to find an explanation and fix.
> > >
> > > OK. But I was wondering if people at R-core team, 
> > especially those who
> > > worked on Windows specific aspects, would have in mind some 
> > changes they did
> > > between 1.7.0 and 1.7.1 than can cause this. Since these 
> > changes are mainly
> > > corrections of bugs, the list is hopefully not so long... 
> > and it could help
> > > a lot to have these hints. Thanks very much.
> > 
> > No idea from me, and the effect is not seen on other platforms.
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> 
> ********************************************************************** 
> This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From John.Marsland at CommerzbankIB.com  Tue Aug  5 11:07:02 2003
From: John.Marsland at CommerzbankIB.com (Marsland, John)
Date: Tue Aug  5 11:06:50 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7
	.0 ???
Message-ID: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8B2@xmx8lonib.lonib.commerzbank.com>

I used the packaged "MinGW-2.0.0-3.exe" exactly as specified on
http://www.stats.ox.ac.uk/pub/Rtools/ - in fact I used these recommendations
throughout.

According to the release notes MinGW version 2.0.0 contains the following
list of packages:

GCC-3.2-core-20020817-1
binutils-2.13-20020903-1
mingw-runtime-2.2
w32api-2.0
gdb-5.1.1-1
make-3.79.1-20010722 (binary renamed as mingw32-make)

Regards,

John Marsland
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: 05 August 2003 09:50
> To: Marsland, John
> Cc: r-devel@stat.math.ethz.ch
> Subject: RE: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R
> 1.7 .0 ???
> 
> 
> So that pretty conclusively nails this as a compiler/runtime 
> difference.
> Which versions of the compiler and mingw-runtime did you use?
> 
> We'll need to wait until Duncan M returns to find out what he used.
> 
> On Tue, 5 Aug 2003, Marsland, John wrote:
> 
> > I have both the CRAN binary and my own compiled version of 
> R v1.7.1 on the
> > same machine (Dell Pentium III 800 MHz running NT 4)
> > 
> > Using the example provided earlier:
> > 
> > > phi <- 1.6180339887498949
> > > a <- floor(runif(750000)*1000)
> > > system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]
> > 
> > I get 10.99 secs on the CRAN binary and 2.09 secs on my own compiled
> > version.
> > 
> > I hope this helps someone ... 
> > 
> > Regards,
> > 
> > John Marsland
> > 
> > > -----Original Message-----
> > > From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
> > > Sent: 05 August 2003 09:03
> > > To: Philippe Grosjean
> > > Cc: r-devel@stat.math.ethz.ch
> > > Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than 
> > > in R 1.7.0
> > > ???
> > > 
> > > 
> > > On Tue, 5 Aug 2003, Philippe Grosjean wrote:
> > > 
> > > > I propose to move this thread to R-devel...
> > > >
> > > > Prof. Brian Ripley wrote:
> > > > >And are you able to give an explanation?  For example, did 
> > > you compile
> > > > >each under the same compiler system?
> > > >
> > > > I just noticed that behaviour yesterday, and had not much 
> > > time yet to
> > > > investigate it. I compiled 1.7.0 myself (but compared with 
> > > the binary
> > > > provided on CRAN; no changes). I used the 1.7.1 binary 
> > > provided on CRAN. I
> > > > know these binaries are not supported, so we (Windows 
> > > users) will have to
> > > > look at that by ourselve. Indeed yes, I'll first compile 
> > > 1.7.1 with the same
> > > > compiler I used for 1.7.0.
> > > >
> > > > >I doubt if this is worth R-core's time to pursue, so over 
> > > to interested
> > > > >users to find an explanation and fix.
> > > >
> > > > OK. But I was wondering if people at R-core team, 
> > > especially those who
> > > > worked on Windows specific aspects, would have in mind some 
> > > changes they did
> > > > between 1.7.0 and 1.7.1 than can cause this. Since these 
> > > changes are mainly
> > > > corrections of bugs, the list is hopefully not so long... 
> > > and it could help
> > > > a lot to have these hints. Thanks very much.
> > > 
> > > No idea from me, and the effect is not seen on other platforms.
> > > 
> > > -- 
> > > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > > Professor of Applied Statistics,  
http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> 
> ********************************************************************** 
> This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


********************************************************************** 
This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}

From phgrosjean at sciviews.org  Tue Aug  5 13:31:01 2003
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Tue Aug  5 12:31:04 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
Message-ID: <MABBLJDICACNFOLGIHJOEEIODKAA.phgrosjean@sciviews.org>

OK. Now I have compiled R 1.7.1 myself on my Windows XP pro computer with
the recommended tools and MingW 2.0.0-3.
Here is what I got:

a <- abs(matrix(rnorm(800*800)/2, ncol=800, nrow=800))
system.time(b <- a^1000)[3]

R 1.7.0            :  1.00 sec
R 1.7.1 (from CRAN):  4.59 sec
R 1.7.1 (custom)   :  0.99 sec

phi <- 1.6180339887498949
a <- floor(runif(750000)*1000)
system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]

R 1.7.0            :  0.90 sec
R 1.7.1 (from CRAN): 11.80 sec
R 1.7.1 (custom)   :  1.08 sec

It seems thus that the problem originates in the Windows compilation of the
CRAN version of R 1.7.1. We will wait Duncan Murdoch for some more
explanation. I cannot place the custom rw1071.exe on my web site because it
is too large (almost 22 Mb). For the moment, you should recompile from
source by yourself to get top speed in R 1.7.1.

Best,

Philippe Grosjean


...........]<(({?<...............<?}))><...............................
 ) ) ) ) )
( ( ( ( (       Dr. Philippe Grosjean
 ) ) ) ) )
( ( ( ( (       LOV, UMR 7093
 ) ) ) ) )      Station Zoologique
( ( ( ( (       Observatoire Oc?anologique
 ) ) ) ) )      BP 28
( ( ( ( (       06234 Villefranche sur mer cedex
 ) ) ) ) )      France
( ( ( ( (
 ) ) ) ) )      tel: +33.4.93.76.38.18, fax: +33.4.93.76.38.34
( ( ( ( (
 ) ) ) ) )      e-mail: phgrosjean@sciviews.org
( ( ( ( (       SciViews project coordinator (http://www.sciviews.org)
 ) ) ) ) )
.......................................................................

From ripley at stats.ox.ac.uk  Tue Aug  5 13:07:18 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 13:07:03 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <MABBLJDICACNFOLGIHJOEEIODKAA.phgrosjean@sciviews.org>
Message-ID: <Pine.LNX.4.44.0308051133380.28579-100000@gannet.stats>

On Tue, 5 Aug 2003, Philippe Grosjean wrote:

> OK. Now I have compiled R 1.7.1 myself on my Windows XP pro computer with
> the recommended tools and MingW 2.0.0-3.
> Here is what I got:
> 
> a <- abs(matrix(rnorm(800*800)/2, ncol=800, nrow=800))
> system.time(b <- a^1000)[3]
> 
> R 1.7.0            :  1.00 sec
> R 1.7.1 (from CRAN):  4.59 sec
> R 1.7.1 (custom)   :  0.99 sec
> 
> phi <- 1.6180339887498949
> a <- floor(runif(750000)*1000)
> system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]
> 
> R 1.7.0            :  0.90 sec
> R 1.7.1 (from CRAN): 11.80 sec
> R 1.7.1 (custom)   :  1.08 sec
> 
> It seems thus that the problem originates in the Windows compilation of the

For whom is this a `problem'?  A lot more than 10 secs has been spent on
this thread.

> CRAN version of R 1.7.1. We will wait Duncan Murdoch for some more
> explanation. I cannot place the custom rw1071.exe on my web site because it
> is too large (almost 22 Mb). For the moment, you should recompile from
> source by yourself to get top speed in R 1.7.1.

*On this one operation*: we don't know that others may be faster or more
accurate on the CRAN version, nor how different chips compare.

You too have not told us exactly what setup you used, and FWIW when I
compile 1.7.0 myself I get the slow speed (using MinGW 3.0.0 rc3). I
suspect the difference is due to the use of a later version of
mingw-runtime, and that the later routines are slower but more accurate.  
(Looks like mingw-runtime-2.2 used pow from msvcrt.dll, and -2.4/-3.0 have
their own:

2002-10-07  Danny Smith  <dannysmith@users.sourceforge.net>
        * mingwex/math/pow.c: New file.

He presumably had good reasons for doing that.)

Your conclusion seems unsubstantiated by your evidence.  Something like

`if you are using Windows and ^ dominates the timings of your code, you
may want to try re-compiling using mingw-runtime-2.2'

seems the only valid conclusion.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phgrosjean at sciviews.org  Tue Aug  5 14:41:10 2003
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Tue Aug  5 13:40:56 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <Pine.LNX.4.44.0308051133380.28579-100000@gannet.stats>
Message-ID: <MABBLJDICACNFOLGIHJOGEIPDKAA.phgrosjean@sciviews.org>

All R versions from 1.0 to 1.7.0 did a similar job here (of course, the
computer and OS matters, but considering relative results). And suddenly
1.7.1 is 5 to 10 times slower than all previous versions! This is not just a
question of 10 sec. I am not the kind of people to say, booarf! What's those
10 sec in my life? I am the kind of people to ask questions when such thing
happens. OK, I did not checked for accuracy (and I hope 'make check-all' did
some test for me). I do not know about this miraculous new algorithm that is
so accurate that it is worth performing the calculation 5 to 10 times slower
than the previous one. Sorry for my ignorance.

Philippe Grosjean

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
Sent: mardi 5 aout 2003 1:07
To: Philippe Grosjean
Cc: r-devel@stat.math.ethz.ch
Subject: RE: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R
1.7.0 ???


On Tue, 5 Aug 2003, Philippe Grosjean wrote:

> OK. Now I have compiled R 1.7.1 myself on my Windows XP pro computer with
> the recommended tools and MingW 2.0.0-3.
> Here is what I got:
>
> a <- abs(matrix(rnorm(800*800)/2, ncol=800, nrow=800))
> system.time(b <- a^1000)[3]
>
> R 1.7.0            :  1.00 sec
> R 1.7.1 (from CRAN):  4.59 sec
> R 1.7.1 (custom)   :  0.99 sec
>
> phi <- 1.6180339887498949
> a <- floor(runif(750000)*1000)
> system.time(b <- (phi^a - (-phi)^(-a))/sqrt(5))[3]
>
> R 1.7.0            :  0.90 sec
> R 1.7.1 (from CRAN): 11.80 sec
> R 1.7.1 (custom)   :  1.08 sec
>
> It seems thus that the problem originates in the Windows compilation of
the

For whom is this a `problem'?  A lot more than 10 secs has been spent on
this thread.

> CRAN version of R 1.7.1. We will wait Duncan Murdoch for some more
> explanation. I cannot place the custom rw1071.exe on my web site because
it
> is too large (almost 22 Mb). For the moment, you should recompile from
> source by yourself to get top speed in R 1.7.1.

*On this one operation*: we don't know that others may be faster or more
accurate on the CRAN version, nor how different chips compare.

You too have not told us exactly what setup you used, and FWIW when I
compile 1.7.0 myself I get the slow speed (using MinGW 3.0.0 rc3). I
suspect the difference is due to the use of a later version of
mingw-runtime, and that the later routines are slower but more accurate.
(Looks like mingw-runtime-2.2 used pow from msvcrt.dll, and -2.4/-3.0 have
their own:

2002-10-07  Danny Smith  <dannysmith@users.sourceforge.net>
        * mingwex/math/pow.c: New file.

He presumably had good reasons for doing that.)

Your conclusion seems unsubstantiated by your evidence.  Something like

`if you are using Windows and ^ dominates the timings of your code, you
may want to try re-compiling using mingw-runtime-2.2'

seems the only valid conclusion.

--
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From sales at theamericanresolve.com  Tue Aug  5 14:51:48 2003
From: sales at theamericanresolve.com (sales@theamericanresolve.com)
Date: Tue Aug  5 13:51:29 2003
Subject: [Rd] The American Resolve Prayer and Tribute Poster (PR#3662)
Message-ID: <200308051151.h75BpmJH013965@pubhealth.ku.dk>

<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./americanresolve10_files/filelist.xml">
<link rel=Edit-Time-Data href="./americanresolve10_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>The American Resolve</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Luis Benitez</o:Author>
  <o:LastAuthor>Ashton Rampersad</o:LastAuthor>
  <o:Revision>19</o:Revision>
  <o:TotalTime>63</o:TotalTime>
  <o:LastPrinted>2003-07-28T21:46:00Z</o:LastPrinted>
  <o:Created>2003-07-28T21:58:00Z</o:Created>
  <o:LastSaved>2003-07-30T04:52:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>346</o:Words>
  <o:Characters>1975</o:Characters>
  <o:Company>The American Resolve</o:Company>
  <o:Lines>16</o:Lines>
  <o:Paragraphs>3</o:Paragraphs>
  <o:CharactersWithSpaces>2425</o:CharactersWithSpaces>
  <o:Version>9.3821</o:Version>
 </o:DocumentProperties>
 <o:CustomDocumentProperties>
  <o:Version dt:dt="string">9.0.2111</o:Version>
  <o:Language dt:dt="string">1033</o:Language>
 </o:CustomDocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	font-weight:normal;}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:18.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:12.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	font-style:italic;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:12.0pt;
	mso-bidi-font-size:13.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;}
h5
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:5;
	font-size:12.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	font-weight:normal;
	font-style:italic;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:8.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	font-weight:normal;}
p.MsoBodyText2, li.MsoBodyText2, div.MsoBodyText2
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:windowtext;
	font-weight:normal;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
em
	{mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	mso-ascii-font-family:Verdana;
	mso-hansi-font-family:Verdana;
	color:#000066;
	font-weight:normal;
	font-style:normal;}
p
	{margin-right:0in;
	mso-margin-top-alt:auto;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:9.0pt;
	font-family:Verdana;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1029"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<table border=0 cellspacing=0 cellpadding=0 style='border-collapse:collapse;
 mso-padding-alt:0in 5.4pt 0in 5.4pt'>
 <tr>
      <td width=767 nowrap colspan=2 valign=top style='width:575.6pt;padding:0in 5.4pt 0in 5.4pt' height="315"> 
        <h1 style='margin-top:0in'><a href="http://www.theamericanresolve.com/"><span
  style='color:windowtext;text-decoration:none;text-underline:none'> <img border=0 width=400 height=79 src="http://www.theamericanresolve.com/images/resolve_logo.gif"
  alt="The American Resolve Logo" v:shapes="_x0000_i1025"></span></a></h1>
        <p class=MsoNormal><em><span style='font-size:10.0pt;font-family:Verdana'><span
  style="mso-spacerun: yes"></span></span></em><em><b
  style='mso-bidi-font-weight:normal'><span style='font-size:11.0pt;mso-bidi-font-size:
  10.0pt;font-family:Verdana'>A Tribute for Posterity<o:p></o:p></span></b></em></p>
        <p class=MsoNormal>&nbsp;</p>
        <p class=MsoNormal><em><b><span style='font-size:10.0pt;font-family:Verdana'>The 
          American Resolve</span></b><span style='font-size:10.0pt;
  font-family:Verdana'> prayer and image is intended to render a tribute to the 
          victims of 9/11 and to exalt the spirit of America.</span></em></p>
        <p><em><span style='font-size:10.0pt;
  font-family:Verdana'><o:p>This September and always, let us display &quot;The 
          American Resolve&quot; at every household, every government precinct, 
          every corporate premise, every learning center and every public and 
          private environment.</o:p></span></em></p>
        <p><em><span style='font-size:10.0pt;font-family:Verdana'>Please log on 
          to </span><b><span style='font-size:10.0pt;font-family:Verdana'><a
  href="http://www.theamericanresolve.com/">www.theamericanresolve.com</a></span></b><span
  style='font-size:10.0pt;font-family:Verdana'> to own and treasure this magnificent, 
          commemorative memento and help us help do a lot of good to the children 
          victims and starving children wherever they are.<span
  style="mso-spacerun: yes"> </span>This is the </span><b><span
  style='font-size:10.0pt;font-family:Verdana'>Mission</span></b><span
  style='font-size:10.0pt;font-family:Verdana'> of this Initiative.<o:p></o:p></span></em></p>
        <p><em><span
  style='font-size:10.0pt;font-family:Verdana'><o:p></o:p></span></em><em><span
  style='font-size:10.0pt;font-family:Verdana'><o:p>Thank you for your Patronage.</o:p></span></em><span class="MsoNormal"><o:p></o:p></span></p>
        </td>
 </tr>
 <tr style='height:121.5pt'>
      <td width=374 valign=top style='width:3.9in;padding:0in 5.4pt 0in 5.4pt;
  height:121.5pt' height="551"> 
        <p class=MsoNormal><a href="http://www.theamericanresolve.com/large.html"><span
  style='font-size:9.0pt;font-family:Verdana;color:#000066;text-decoration:
  none;text-underline:none'><img border=0 width=360 height=541 id="_x0000_i1091"
  src="http://www.theamericanresolve.com/images/poster_large.jpg"></span></a><span
  style='font-size:8.0pt;mso-bidi-font-size:12.0pt'><o:p></o:p></span><span
  style='font-size:8.0pt;mso-bidi-font-size:12.0pt'><o:p></o:p></span></p>
  </td>
      <td width=393 nowrap valign=top style='width:294.8pt;padding:0in 5.4pt 0in 5.4pt;
  height:121.5pt' height="551"> 
        <form action="http://www.theamericanresolve.com/large.html" 
  enctype="application/x-www-form-urlencoded">
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-family:"Times New Roman";display:none;mso-hide:all'><INPUT TYPE="hidden" NAME="VARQuantity" VALUE="1"><INPUT TYPE="hidden" NAME="VAR000" VALUE="|"><INPUT TYPE="hidden" NAME="AddItem" VALUE="theamerican650|The American Resolve Poster - 24"></span><span
  style='font-family:"Times New Roman"'><a
  href="http://www.theamericanresolve.com/">
            <INPUT TYPE="submit" ACTION="http://www.theamericanresolve.com/large.html" VALUE="Buy 24&quot;x36&quot; Poster!" METHOD="post" NAME="submit">
            </a></span></p>
  <p class=MsoNormal align=center style='text-align:center'><em><span
  style='font-size:9.0pt;font-family:Verdana'>$49.95 each</span></em></p>
  <p class=MsoNormal align=center style='text-align:center'>&nbsp;</p>
  <p class=MsoNormal align=center style='text-align:center'><em><span
  style='font-size:9.0pt;font-family:Verdana'>Available Soon: 12&quot; x
  18&quot; Print</span></em><span style='font-family:"Times New Roman"'><o:p></o:p></span></p>
  </form>
  <p align=center style='text-align:center'><span style='font-size:12.0pt;
  color:blue'><a href="http://www.theamericanresolve.com/"><span
  style='text-decoration:none;text-underline:none'>The American Resolve Prayer
  and Tribute Poster</span></a></span><span style='color:blue'><br>
  </span><span style='font-size:8.0pt;mso-bidi-font-size:9.0pt;color:#000066;
  font-weight:normal'><br>
  </span><em><span style='mso-bidi-font-size:7.5pt;color:black'>With all my
  heart I love my America,</span></em><span style='mso-bidi-font-size:7.5pt;
  font-weight:normal'><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>The United States of
  America</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>I am proud of the
  brave and talented,</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>Hardworking women, men
  and innocent children,</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>That perished to an
  evil enemy on a day that</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>I do not want to
  remember but will never forget,</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>September 11, Year
  2001. </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>My deep admiration
  goes to all the good faith</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And compassionate
  people that exalt this land</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And its resources
  both, natural and human. </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>I pray, daily, for the
  women, men, youngsters</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And children that keep
  this great Nation united and strong,</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>Stronger and more
  united than ever before, </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And for the many
  Heroes that relentlessly</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>Protect and defend us
  at all fronts, for God to reward</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>Their sacrifices. </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>For the love I feel
  for my country, from now on,</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>I will, always, be
  alert and ready to protect it and</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>Defend it while
  keeping my compassion for others, alive </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And will forever honor
  our Glory and the values of Liberty</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>And Justice for all </span></em><br>
  <br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>God Bless you</span></em><br>
  <em><span style='mso-bidi-font-size:7.5pt;color:black'>God Bless America</span></em></span><em><span
  style='font-size:8.0pt;mso-bidi-font-size:9.0pt'><o:p></o:p></span></em></p>
  </td>
 </tr>
</table>

  <p class=MsoNormal>&nbsp;</p>
  <p class=MsoNormal><em><span style='font-size:9.0pt;font-family:Verdana'> The 
    American Resolve 2003-05 All Rights Reserved</span></em><span style='font-size:
9.0pt;mso-bidi-font-size:12.0pt'><o:p></o:p></span></p>
  <p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

</div>

</body>

</html>

From ripley at stats.ox.ac.uk  Tue Aug  5 15:48:50 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 15:48:31 2003
Subject: [Rd] problem expression use on X11 (PR#3661)
In-Reply-To: <Pine.LNX.4.44.0308050937130.28132-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0308051441540.1110-100000@gannet.stats>

I modified my R build on RH8.0 to use the URW symbol font, and everything 
worked correctly, including the plotmath examples.

This suggests that the problem is in your X11 setup.  Perhaps your Type 1
font support is not turned on or not working?  (The URW fonts are Type 1.)

On Tue, 5 Aug 2003, Prof Brian Ripley wrote:

> In src/modules/X11/devX11.c you will find
> 
> static char *symbolname	 = "-*-symbol-*-*-*-*-%d-*-*-*-*-*-*-*";
> 
> and you might want to change the first * to adobe.
> 
> I don't think this is an R bug though: you seem to be saying that the
> -urw-symbol font on your system does not work.  It should display
> something, and if that is really a symbol font, it should display the
> correct characters.  What exactly is wrong?
> 
> There seems no way we can reproduce this.  Could you perhaps show some 
> screenshots?  (To R-devel: this is not yet known to be a bug and R-bugs 
> mangles attachments.)
> 
> On Tue, 5 Aug 2003 nakama@ki.rim.or.jp wrote:
> 
> > Full_Name: Ei-ji Nakama
> > Version: R-1.7.1
> > OS: Linux(vinelinux)
> > Submission from: (NULL) (219.117.236.13)
> > 
> > 
> > The list of the fonts of my machine.
> > 
> > $ xlsfonts -fn "-*-symbol-*-*-*-*-*-*-*-*-*-*-*-*"
> > -adobe-symbol-medium-r-normal--0-0-75-75-p-0-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--10-100-75-75-p-61-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--11-80-100-100-p-61-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--12-120-75-75-p-0-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--12-120-75-75-p-74-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--14-100-100-100-p-85-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--14-140-75-75-p-85-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--17-120-100-100-p-95-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--18-180-75-75-p-107-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--20-140-100-100-p-107-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--24-240-75-75-p-142-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--25-180-100-100-p-142-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--34-240-100-100-p-191-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
> > -adobe-symbol-medium-r-normal--8-80-75-75-p-51-adobe-fontspecific
> > -urw-symbol-medium-r-normal--0-0-0-0-p-0-urw-fontspecific
> > -urw-symbol-medium-r-normal--12-120-75-75-p-0-urw-fontspecific
> > 
> > A uws-symbol font will be read if it is going to read the adobe-symbol font.
> > But will not come out, if it is fonts other than adobe-symbol.
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From tlumley at u.washington.edu  Tue Aug  5 08:21:10 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Aug  5 16:21:27 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <MABBLJDICACNFOLGIHJOEEIJDKAA.phgrosjean@sciviews.org>
Message-ID: <Pine.A41.4.44.0308050718200.240674-100000@homer01.u.washington.edu>

On Tue, 5 Aug 2003, Philippe Grosjean wrote:
>
> OK. But I was wondering if people at R-core team, especially those who
> worked on Windows specific aspects, would have in mind some changes they did
> between 1.7.0 and 1.7.1 than can cause this. Since these changes are mainly
> corrections of bugs, the list is hopefully not so long... and it could help
> a lot to have these hints. Thanks very much.

I checked that the slowdown really was happening in "^", which is
Primitive and so fairly direct.  I couldn't find anything remotely
plausible as a cause, though.

My first guess was something involving the methods package and my second
was a compiler change, so I'm 0-2 so far.


	-thomas

From p.dalgaard at biostat.ku.dk  Tue Aug  5 16:10:00 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Aug  5 17:10:02 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <Pine.A41.4.44.0308050718200.240674-100000@homer01.u.washington.edu>
References: <Pine.A41.4.44.0308050718200.240674-100000@homer01.u.washington.edu>
Message-ID: <x2smog2kzo.fsf@biostat.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Tue, 5 Aug 2003, Philippe Grosjean wrote:
> >
> > OK. But I was wondering if people at R-core team, especially those who
> > worked on Windows specific aspects, would have in mind some changes they did
> > between 1.7.0 and 1.7.1 than can cause this. Since these changes are mainly
> > corrections of bugs, the list is hopefully not so long... and it could help
> > a lot to have these hints. Thanks very much.
> 
> I checked that the slowdown really was happening in "^", which is
> Primitive and so fairly direct.  I couldn't find anything remotely
> plausible as a cause, though.
> 
> My first guess was something involving the methods package and my second
> was a compiler change, so I'm 0-2 so far.

I think we can be fairly sure that the reason is that a new pow()
function was injected in the mingw runtime. You can find the actual
code in

http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/mingw/runtime/mingwex/math/

*why* this code was inserted is anyones guess. Googling threw up some
 hint that the MS-supplied pow() was upsetting strtod and causing a
 regression test failure with the Gimp. The code looks considerably
 different from the kind of stuff used on Linux though, e.g. it
 appears not to use FPU transcendentals. I suppose one could ask the
 author...

Also, R is generally compiled with -D NO_MATH_INLINES because of some
ancient messup with glibc. I'm not sure whether that is actually still
necessary, but it is forcing the use of the non-inlined pow() function.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jwe at bevo.che.wisc.edu  Tue Aug  5 11:47:50 2003
From: jwe at bevo.che.wisc.edu (John W. Eaton)
Date: Tue Aug  5 17:48:11 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <x2smog2kzo.fsf@biostat.ku.dk>
References: <Pine.A41.4.44.0308050718200.240674-100000@homer01.u.washington.edu>
	<x2smog2kzo.fsf@biostat.ku.dk>
Message-ID: <16175.53670.329214.861007@devzero.bogus.domain>

On  5-Aug-2003, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote:

| Also, R is generally compiled with -D NO_MATH_INLINES because of some
| ancient messup with glibc. I'm not sure whether that is actually still
| necessary, but it is forcing the use of the non-inlined pow() function.

I think the origin of this option might be that someone reported a bug
in Octave because exp (-Inf) was returning NaN.  The problem turned
out to be that the inline version of exp returns NaN for Inf, NaN, and
-Inf arguments.  These days it seems that you don't get the inline
versions unless you use -ffast-math (at least that's what I just now
found with gcc 3.3).  Using -DNO_MATH_INLINES might still be needed
for some older GCC compiler/library combinations, so I don't think it
hurts.  I'm not sure whether it matters for R, but according to the
glibc math.h header the inline versions also don't set errno.

jwe

From John.Marsland at CommerzbankIB.com  Tue Aug  5 18:37:56 2003
From: John.Marsland at CommerzbankIB.com (Marsland, John)
Date: Tue Aug  5 18:37:41 2003
Subject: [Rd] s4 methods and base
Message-ID: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>

I'm sure that many people are in the same position as me in that they are
trying to write packages and code that is vaguely "future proof".

Would it be possible to get some guidance on how the R-core team see the
evolution of the "base" package with regard to s4 methods.

There seem to be quite a lot of inconsistencies between s3 and s4 methods
and classes currently and this (I'm sure) is only to be expected in a period
of transition. eg POSIXlt vs POSIXt and POSIXct. And there seem like dozens
of print methods to convert - it's not an enviable task and I'm sure it will
take time! ... if indeed you do see R being purged of s3 by some point in
the future.

But I think it would be helpful if there was some general guidance in terms
of the direction R is going?

For my own part I am very impressed with the power of the s4 methods and the
functional nature of the language. But there are some comparisons with (say)
Python that would make it even better. Many of these relate to the base
package and the very diverse collection of demos, stats, dates and file
handling etc... are there plans to break this up so as to make the
instruction set smaller (an obvious use of s4 methods) and the whole
language more light-weight and like a scripting language. Others seem to be
thinking in this direction with the addition of "import" and namespaces, but
more detail (or a pointer towards it if it exists!) would be helpful.

Regards,

John Marsland


********************************************************************** 
This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}

From kleiweg at let.rug.nl  Tue Aug  5 19:53:31 2003
From: kleiweg at let.rug.nl (Peter Kleiweg)
Date: Tue Aug  5 18:53:13 2003
Subject: [Rd] RE: [R] ^ operation much slower in R 1.7.1 than in R 1.7.0
	???
In-Reply-To: <16175.53670.329214.861007@devzero.bogus.domain>
Message-ID: <Pine.LNX.4.44.0308051851060.1175-100000@kleigh.nl>

# aldus John W. Eaton :

> On  5-Aug-2003, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote:
>
> | Also, R is generally compiled with -D NO_MATH_INLINES because of some
> | ancient messup with glibc. I'm not sure whether that is actually still
> | necessary, but it is forcing the use of the non-inlined pow() function.
>
> I think the origin of this option might be that someone reported a bug
> in Octave because exp (-Inf) was returning NaN.  The problem turned
> out to be that the inline version of exp returns NaN for Inf, NaN, and
> -Inf arguments.  These days it seems that you don't get the inline
> versions unless you use -ffast-math (at least that's what I just now
> found with gcc 3.3).  Using -DNO_MATH_INLINES might still be needed
> for some older GCC compiler/library combinations, so I don't think it
> hurts.  I'm not sure whether it matters for R, but according to the
> glibc math.h header the inline versions also don't set errno.

There were also wrong results with some goniometric function, if
I recall correctly. I can't verify it, since I now use a newer
version of gcc. To be safe, I always use -DNO_MATH_INLINES.


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

From ripley at stats.ox.ac.uk  Tue Aug  5 20:05:17 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Aug  5 20:04:56 2003
Subject: [Rd] s4 methods and base
In-Reply-To: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>
Message-ID: <Pine.LNX.4.44.0308051854300.4424-100000@gannet.stats>

On Tue, 5 Aug 2003, Marsland, John wrote:

> I'm sure that many people are in the same position as me in that they are
> trying to write packages and code that is vaguely "future proof".
> 
> Would it be possible to get some guidance on how the R-core team see the
> evolution of the "base" package with regard to s4 methods.
> 
> There seem to be quite a lot of inconsistencies between s3 and s4 methods
> and classes currently and this (I'm sure) is only to be expected in a period
> of transition. eg POSIXlt vs POSIXt and POSIXct. And there seem like dozens

Those are S3 classes, and there is nothing transitional about them!
There are no S4 classes in `base R' that I am aware of to be inconsistent.
Are you sure you understand the difference?

> of print methods to convert 

First you need to define S4 classes, and there are currently no moves to 
do that for the statistical modelling software, for example.

> - it's not an enviable task and I'm sure it will
> take time! ... if indeed you do see R being purged of s3 by some point in
> the future.

We are still using S3 classes designed a decade ago, and I expect to be 
still using them in another decade.  I even have S4 versions of some of 
them (e.g. lda, multinom) and no plans to use those in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From arnima at u.washington.edu  Wed Aug  6 01:25:51 2003
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Wed Aug  6 00:25:29 2003
Subject: [Rd] windows(record=T) loses last plot (PR#3663)
Message-ID: <200308052225.h75MPpJH019153@pubhealth.ku.dk>

Dear r-bugs,

It seems like the windows graphics device is having problems
recording plots when they are 5, 9, 13, ... in number. Given

temp <- function(nplt)
{
  if(exists(".SavedPlots")) rm(.SavedPlots,pos=1)
  for(d in dev.list()) dev.off()
  windows(record=T)
  for(i in 1:nplt) plot(0,0,pch=as.character(i),cex=4)
}

the results are:

temp(1)  # Ok, except PgUp generates unnecessary popup window
temp(2)  # Ok
temp(3)  # Ok
temp(4)  # Ok
temp(5)  # After cycling with PgUp and PgDn, plot 5 is lost
temp(6)  # Ok
temp(7)  # Ok
temp(8)  # Ok
temp(9)  # After cycling with PgUp and PgDn, plot 9 is lost
temp(10) # Ok
temp(11) # Ok
temp(12) # Ok
temp(13) # After cycling with PgUp and PgDn, plot 13 is lost
...
temp(4n+1)


Regards,
Arni

OS: Windows XP
R:  1.7.1

From statwy at stat.nus.edu.sg  Wed Aug  6 07:26:53 2003
From: statwy at stat.nus.edu.sg (statwy@stat.nus.edu.sg)
Date: Wed Aug  6 06:26:32 2003
Subject: [Rd] S4 methods bug in naming of slots (PR#3665)
Message-ID: <200308060426.h764QrJH020539@pubhealth.ku.dk>

Hello,

I am using R 1.7.1 on a Redhat Linux machine, version 7.3.
The following works fine: 

setClass("ok", representation(
      "A"       = "matrix",
      "Cmatrix" = "matrix"))

new("ok",
    "A" = diag(4),
    "Cmatrix" = diag(4))

But the following doesn't work:

setClass("notok", representation(
      "A" = "matrix",
      "C" = "matrix"))

new("notok",
    "A" = diag(4),
    "C" = diag(4))

It says

> new("notok",
+    "A" = diag(4),
+    "C" = diag(4))
Error in methodsPackageMetaName("C", name) :
        The name of the object (e.g,. a class or generic function) to find in the meta-data must be a single string (got an object of class "matrix")

Can this bug be fixed? It doesn't work in the Windows version either. 
Thanks in advance.

Thomas

From rgentlem at jimmy.harvard.edu  Wed Aug  6 02:26:02 2003
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Wed Aug  6 07:26:01 2003
Subject: [Rd] S4 methods bug in naming of slots (PR#3665)
In-Reply-To: <200308060426.h764QrJH020539@pubhealth.ku.dk>;
	from statwy@stat.nus.edu.sg on Wed, Aug 06, 2003 at 06:26:53AM
	+0200
References: <200308060426.h764QrJH020539@pubhealth.ku.dk>
Message-ID: <20030806012602.D22791@jimmy.harvard.edu>

On Wed, Aug 06, 2003 at 06:26:53AM +0200, statwy@stat.nus.edu.sg wrote:
> Hello,
> 
> I am using R 1.7.1 on a Redhat Linux machine, version 7.3.
> The following works fine: 
> 
> setClass("ok", representation(
>       "A"       = "matrix",
>       "Cmatrix" = "matrix"))
> 
> new("ok",
>     "A" = diag(4),
>     "Cmatrix" = diag(4))
> 
> But the following doesn't work:
> 
> setClass("notok", representation(
>       "A" = "matrix",
>       "C" = "matrix"))
> 
> new("notok",
>     "A" = diag(4),
>     "C" = diag(4))
> 
> It says
> 
> > new("notok",
> +    "A" = diag(4),
> +    "C" = diag(4))
> Error in methodsPackageMetaName("C", name) :
>         The name of the object (e.g,. a class or generic function) to find in the meta-data must be a single string (got an object of class "matrix")
> 
> Can this bug be fixed? It doesn't work in the Windows version either. 
> Thanks in advance.

 It is not really a bug. If you look at the definition of the function
 new you will see that its first argument is named Class. The argument
 you want to use for the C slot gets matched to the Class argument -
 it isn't a class and you get an error message. So, to avoid
 the partial matching algorithm for matching fucntions arguments you
 would need to go:
 
  new(Class="notok", A=diag(4), C=diag(4))

 which does work. Note also, no need for quotes around A and C.

 Robert


> 
> Thomas
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20                            |
| Harvard School of Public Health  email: rgentlem@jimmy.harvard.edu        |
+---------------------------------------------------------------------------+

From ripley at stats.ox.ac.uk  Wed Aug  6 08:12:08 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug  6 08:11:48 2003
Subject: [Rd] Re: [R] L10N and i18n of R
In-Reply-To: <3F306596.5020008@is.titech.ac.jp>
Message-ID: <Pine.LNX.4.44.0308060656140.7439-100000@gannet.stats>

First, please do not set Reply-To to R-help!  [I've moved the topic to 
R-devel.]

As has already been pointed out, R already handles many non-English 
languages, including all using ISO-Latin1 and many others with 8-bit 
character sets (where the devices support them: for example Adobe 
postscript fonts have limited support for Latin2).  Your `good news' is 
old news for all those languages.

I understand the problem with CJK is the larger character sets.  It is 
planned to support those by moving to Unicode internally, probably within 
the next year.  That will still leave the issues of getting text into and 
out of R in a specific localization, but should minimize the adaptations 
needed.


On Wed, 6 Aug 2003, Shigeru Mase wrote:

> Dear R-users of non-English speaking countires.
> 
> Maybe a good news for those who want to use R in their
> local languages. Recently two Japanese, E. Nakama and
> M. Okada, succeeded in "making R speak Japanese". At
> present, R can handle Japanese (as well as other languages,
> I guess) character strings if one use consoles which
> can understand Japanese. Also P. Murrell kindly
> provided a facility to plot hundreads of Japaense
> characaters as graphical symbols (Hershey vector fonts).
> 
> Nakama and Okada's "L10N" (Localization) and "i18n"
> (internationalization) patches make it possible to
> use Japanese object names and to display Japanese
> characters on graphical devices (although still limited).
> If you are interested, please visit URL:
> 
> http://www.okada.jp.org/RWiki/index.php?%5B%5Bi18n_of_R%5D%5D
> 
> which is the only English page of RjpWiki, a Wiki-based
> collaboration site supported by Japanese R users.
> 
> Nakama's patches can also handle other languages
> than Japanese. He kindly built Korean and Russian
> version of R (1.7.1) as rpm binaries (although
> he can understand neither Korean nor Russian).
> 
> We are glad if these patches can give hints to R
> users who want to use local languages. Please note
> their patches are by no means complete and may
> potentially give your systems troubles. They and
> related binaries are offered without no warranty.
> Feedbacks and reports are welcome, but mere inquiries
> and complains not. Since the version up of R is so
> frequent, we cannot promise that these patches will
> be updated in future.
> 
> Yours
> ------------------------------------------------
> Shigeru Mase
> Dept. Math. and Comp. Sciences,
> Tokyo Institute of Technology, Tokyo, Japan
> 
> ______________________________________________
> R-help@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-help
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Agustina at contizaypizarronweb.com.ar  Wed Aug  6 07:48:31 2003
From: Agustina at contizaypizarronweb.com.ar (Curso GIS y Teledeteccion)
Date: Wed Aug  6 08:48:34 2003
Subject: [Rd] Curso GIS y Teledeteccion
Message-ID: <200308060648.h766mdE22779@ar18.toservers.com>

Curso GIS y Teledeteccion
Para solicitar informaci?n mandar mail a mercedesgis@argentina.com

CENTRO DE TRANSFERENCIA TECNOL?GICA EN SISTEMAS DE INFORMACI?N GEOGR?FICA Y TELEDETECCI?N


---TUTORIAL GRATUITO
Entendiendo la proyecci?n de los mapas - SISTEMA Gauss-Kr?ger

---CLASES GRATUITAS: Primer m?dulo de los siguientes cursos
ArcView 3.2
ArcView 8.2 - ArcGis
ENVI 3.5
Bases de Datos para Todos 
Sistemas de Informaci?n Geogr?fica 
Teledetecci?n

---CURSOS 2003 
ArcView 8.3
1/5 de Septiembre de 18 a 22hs 
8/12 de Diciembre de 18 a 22hs 

ENVI 3.6 
3/7 de Noviembre 19 a 22hs

ArcView 3.2 
21/25 de Julio 19 a 22hs
6/10 de Octubre 19 a 22hs

---CURSOS DISTANCIA:
Sistemas de Informaci?n Geogr?fica (Certificado Universidad de Buenos Aires) 
ArcView 3.2
ArcView 8.1
Teledetecci?n (Certificado Universidad de Buenos Aires)
ENVI 3.5
Bases de Datos para Todos (Certificado Universidad de Buenos Aires)

Fecha: Una de las caracter?sticas que hacen a nuestros cursos a distancia ?nicos y una alternativa atractiva para mejorar la formaci?n profesional, se inician en el momento que se realiza la inscripci?n. 


LISTADO DE PARTICIPANTES ??
?
?
- UNIVERSIDADES
Ancash (Per?), Bah?a Blanca, Belgrano, Bologna, Buenos Aires, Cat?lica, Centro de la Provincia de Buenos Aires, Chiba (Jap?n), C?rdoba, Comahue, Cuyo, Fraternidad de Agrupaciones Santo Tom?s de Aquino (F.A.S.T.A), Flores, Formosa, General Sarmiento, Guanajuato (M?xico), Jujuy, La Plata, Latinoamericana de Ciencias Ambientales, La Pampa, La Patagonia Austral, La Republica (Uruguay), La Rioja, Litoral, Lomas de Zamora, Lujan, Mar del Plata, Mayor de San Andres (Bolivia), Misiones, Nacional (Colombia), Nacional Autonoma de Mexico (Mexico), Nordeste, Pilar (Paraguay), Quilmes, Rosario, Salta, Salvador, San Juan, Santa Fe, San Juan Bosco, Sur, Tecnol?gica Nacional, Torcuato Di Tella, Tucum?n, Valladolid (Espa?a), Veracruzana (M?xico),?etc.
?
-MUNICIPALIDADES
?
3 de Febrero, Bah?a Blanca, Benito Ju?rez, Bragado, Campana, Ca?uelas, Castelli, Chascom?s, Coronel Su?rez, Coronel Rosales, Despe?aderos, Escobar, Florencio Varela, General Alear, General Pueyrred?n, Gobierno de la Ciudad de Buenos Aires, Jes?s Mar?a, Jun?n, La Plata, Laboulaye, Laprida, Lincoln, Lomas de Zamora, Malvinas Argentinas, Moreno, Mor?n, Necochea, Pehuajo, Pergamino, Posadas, Quilmes, Ramallo, R?o Gallegos, Rosario, Saladillo, Salta, San Fernando, San Isidro, San Mart?n, San Nicol?s, San Salvador de Jujuy, Santa Fe, Santo Tom?, Suipacha, Tigre, Venado Tuerto, Vicente L?pez, Viedma, Villa Allende, Villa Constituci?n, Villa de Merlo, Villa Mar?a, etc.?
?
-ONG
ACEN - Asociaci?n para la Conservaci?n y el Estudio de la Naturaleza, ANIMA Arquelogia Submarina (Chile),  Asociaci?n Demosvida, Asociaci?n Guyra (Paraguay), Aves Argentinas, Conservaci?n Argentina, CIAC Centro de Investigaci?n y Apoyo Campesino (Bolivia), DEFOR - Asociacion Civil para la Investigaci?n y Desarrollo Forestal (Per?), Estaci?n Cient?fica Charles Darwin (Ecuador), Fundaci?n Amigos para la Naturaleza Noel Kempff (Bolivia), Fundaci?n Cethus, Fundaci?n CEPA / FLACAM, Fundaci?n Green Cross, Fundaci?n Mois?s Bertoni (Paraguay), Fundaci?n Pro Vivienda Social, Fundaci?n Vida Silvestre Argentina, Instituto de Investigaciones Ambientales del Pac?fico?(Colombia), Plus Radio (Paraguay).
?
-EMPRESAS
?
ACA - Autom?vil Club Argentino, Aeromapa, Agrimax, Agrosat Ambiental SA, Agroservicios SRL, Ambiente OnLine, Analog?as - Empresa dedicada a la investigaci?n de mercado y marketing pol?tico , ASTECNA SA, BA&H BOOZ ALLEN & HAMILTON Consultora, BellSouth, Boston Geom?tica SRL (Paraguay), Buffarini & Buffarini - Agrimensura, Cableuropa SAU (Espa?a), CADEB S.A. - Compa??a Administradora de Empresas (Bolivia), Chevron Petrolera, CNEA - Comisi?n Nacional de Energ?a At?mica, Consultora Ambiental Echechuri, Consultora de Ingenier?a Cooprogetti, ComTrad SA, Cooperativa "16 de Octubre" de Servicios P?blicos, Cooperativa "16 de Octubre" de Servicios P?blicos de Esquel, Cooperativa El?ctrica de Venado Tuerto, Copygraph, Cybermapa, Diario La Naci?n, Econat SA, Energicon SA, Epson Argentina, Estudio EGA, Euroflores SA (Uruguay), Fomicruz SE, Franklin Consultora SA, Fusion Sudamericana SA, GARJO Ingenieros Contratistas SRL (Per?), GEA Ge?logos Asociados, GMS SA, Grant Geophysical Inc (Colom!
bia), Gu?as FILCAR, Halcrow (Ingenier?a Hidr?ulica), Hewlett Packard, HIDRA Servicios de Ingenier?a, Hidroblan SA, HYTEC, IATASA - Ingenier?a y Asistencia T?cnica Argentina SA, ITG Consultores SA, IDEGEPP - Instituto de Desarrollo y Gesti?n de Obras P?blicas, JMB SA?Ingenier?a Ambiental, Kiskali SA, K.K.L. KEREN KAYEMET LEISRAEL (Israel), La Dulce Seguros, Minera Alumbrera Limited, Nordelta SA, Nostromo Consultora SRL, Novartis Argentina SA - Protecci?n de Cultivos, OCA Correos, Oroplata Limited SA, Palma y Asociados, Pampa Byte, Papel Prensa SA, PECOM - Perez Companc, Pedro L. Martinez SA, Petro Imagen, Petrolera Pan American Energy, Petrolera Quintana Minerals, Phoenix Oil & Gas, PlusPetrol, Profertil SA, Recovery SA - Planeamiento y Catastro, Sistemas Catastrales, Sir William Halcrow LTD, SERVICOOP - Cooperativa de Servicios P?blicos de Madryn, SEINCO SRL (Uruguay), Serrater SL (Espa?a), Solurban SA, SRK Consultores SA (Chile), Tack Training SA, TRANSBA SA - Transporte de!
 Energ?a El?ctrica de la Provincia de Buenos Aires, Transpetrol SA, Trico Latinoamericana, URBI - Concesionario del Catastro de la Ciudad de Posadas, WMC - Water Management Consultants (Chile),?YPF-REPSOL, ZYZ Consultores - Servicios en Medioambiente, Estructuras, Estudios de suelos.
?
-OTROS ORGANISMOS
Administraci?n de Parques Nacionales, Armada Argentina, Asociaci?n Civil para la Investigaci?n y Desarrollo Forestal (Per?), Auditoria General de la Naci?n, AIC - Autoridad Interjurisdiccional de las Cuencas de los R?os Limay, Neuqu?n y Negro, Autoridad Regulatoria Nuclear, Banco de la Provincia de Buenos Aires, CEAMSE - Coordinaci?n Ecol?gica ?rea Metropolitana Sociedad del Estado, CDPAP - Centro de Desarrollo de Proyectos Avanzados en Pediatr?a, Centro de Geolog?a de Costas y del Cuaternario, Centro de Sensores Remotos De la FAA, CABA - Programa Reforma Pol?tica, CEPED - Instituto de Investigaciones Econ?micas, CITEFA?- Instituto de Investigaci?n Cient?fica y T?cnica de la Fuerzas Armadas, CNEA - Comisi?n Nacional de Energ?a At?mica, Colegio de Agrimensores - Distrito 1, CIC - Comisi?n de Investigaciones Provincia de Bs. As, CONAE - Comisi?n Nacional de Actividades Espaciales, CONICET - Consejo Nacional de?Investigaciones Cient?ficas y T?cnicas, CONIDA - Comisi?n Nacional !
de Investigaci?n y Desarrollo Aeroespacial (Peru), CFI - Consejo Federal de Inversiones, Consejo Provincial de Educaci?n - Neuqu?n, COREBE - Comisi?n Regional del R?o Bermejo, CORFO - Corporaci?n de Desarrollo Valle Bonaerense del R?o Colorado, Defensor?a del Pueblo, Direcci?n General de Escuelas de la Provincia de Bueno Aires, Direcci?n General de Miner?a - Neuquen, Direcci?n Nacional de Desarrollo Urbano de la Subsecretaria de Desarrollo Urbano y Vivienda de La Naci?n, Direcci?n Provincial de Desarrollo Industrial Minero y Comercial - Catamarca, Entidad Binacional Yaciret?, EPEN - Ente Provincial de Energ?a del Neuquen, Escuela de Ingenier?a de Caminos de Monta?a, Escuela de Prefectura Nacional, Fuerza A?rea Argentina, Gobierno Provincial de C?rdoba, IGM - Instituto Geogr?fico Militar, INA - Instituto Nacional del Agua, INDEC - Instituto Nacional de Estad?stica y Censos, INREMI - Instituto de Recursos Minerales de la Facultad de Ciencias Naturales y Museo UNLP, Instituto A!
nt?rtico Argentino, Instituto Provincial de la Vivienda de Formosa, Instituto Argentino de Oceanograf?a, Instituto de Agricultura Sostenible (Espa?a), INTA - Instituto Nacional de Tecnolog?a Agropecuaria, Laboratorio Tecnol?gico del Uruguay - LATU (Uruguay), Ministerio de Bienes Nacionales (Chile), Ministerio de Desarrollo Social y Medio Ambiente, Ministerio de Econom?a, Ministerio de Econom?a de la Provincia de Neuquen, Ministerio de Econom?a del Chaco, Ministerio de Econom?a de la Ciudad de La Plata, Ministerio de Infraestructura y Vivienda de la Subsecretaria de Recursos H?dricos, Ministerio de Infraestructura y Vivienda, Ministerio de Justicia y Seguridad de la Provincia de Buenos Aires, Ministerio de la Producci?n de la Provincia de Chaco, Ministerio de Servicios y Obras P?blicas de la Provincia de Buenos Aires, Ministerio del Agro y la Producci?n de la Provincia de Misiones, Ministerio del Agro y La Producci?n de la Provincia de Misiones, Ministerio del Interior - Unid!
ad ejecutora Central Catastro, Museo de Ciencias Naturales, Museo Nacional de Costa Rica, OCRABA - ?rgano de Control de los Accesos a la Ciudad de Buenos Aires, ORSEP - Organismo Regulador de Seguridad de Presas, Secretaria de Agricultura de la Naci?n, Secretaria de Miner?a de la Naci?n, Secretar?a de Obras y Servicios P?blicos Provincia de R?o Negro, Secretaria de Turismo de la Naci?n, Secretar?a de Ambiente y Desarrollo Sustentable, SEGEMAR - Servicio Geol?gico Minero Argentino, SENASA - Servicio Nacional de Sanidad Animal y Calidad Agroalimentaria, Servicio Agr?cola Ganadero (Chile), Servicio Nacional de ?reas Protegidas (Bolivia), Servicio de Hidrograf?a Naval, Servicio de Vivienda y Urbanismo (Chile), SIFEM - Sistema Federal de Emergencias del Estado Nacional, Servicio Agr?cola Ganadero AG (Chile), Sociedad Rural de Rivadavia, SUNARP Superintendencia Nacional de los Registros P?blicos (Per?), Vialidad de la Provincia de Buenos Aires, Vialidad de la Provincia de La Rioja!
, Vialidad Nacional, etc.?

From John.Marsland at CommerzbankIB.com  Wed Aug  6 09:48:46 2003
From: John.Marsland at CommerzbankIB.com (Marsland, John)
Date: Wed Aug  6 09:48:34 2003
Subject: [Rd] s4 methods and base
Message-ID: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F6@xmx8lonib.lonib.commerzbank.com>

This is the inconsistency I am talking about:

> getClass("POSIXt")
Virtual Class

No Slots, prototype of class "NULL"

Extends: 
Class "POSIXct", directly
Class "oldClass", by class "POSIXct"
> getClass("POSIXct")
Virtual Class

No Slots, prototype of class "NULL"

Extends: "oldClass"

Known Subclasses: "POSIXt"
> getClass("POSIXlt")
Error in getClass("POSIXlt") : "POSIXlt" is not a defined class

But to quote from the online help:

"POSIXct" is more convenient for including in data frames, and "POSIXlt" is
closer to human-readable forms. A virtual class "POSIXt" inherits from both
of the classes: it is used to allow operations such as subtraction to mix
the two classes. 

In a S4 world wouldn't make more sense for POSIXt to be a virtual superclass
and POSIXct and POSIXlt to be subclasses?

But I think you have answered my other question about the future of s3.

> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
> Sent: 05 August 2003 19:05
> To: Marsland, John
> Cc: R-devel@stat.math.ethz.ch
> Subject: Re: [Rd] s4 methods and base
> 
> 
> On Tue, 5 Aug 2003, Marsland, John wrote:
> 
> > I'm sure that many people are in the same position as me in 
> that they are
> > trying to write packages and code that is vaguely "future proof".
> > 
> > Would it be possible to get some guidance on how the R-core 
> team see the
> > evolution of the "base" package with regard to s4 methods.
> > 
> > There seem to be quite a lot of inconsistencies between s3 
> and s4 methods
> > and classes currently and this (I'm sure) is only to be 
> expected in a period
> > of transition. eg POSIXlt vs POSIXt and POSIXct. And there 
> seem like dozens
> 
> Those are S3 classes, and there is nothing transitional about them!
> There are no S4 classes in `base R' that I am aware of to be 
> inconsistent.
> Are you sure you understand the difference?
> 
> > of print methods to convert 
> 
> First you need to define S4 classes, and there are currently 
> no moves to 
> do that for the statistical modelling software, for example.
> 
> > - it's not an enviable task and I'm sure it will
> > take time! ... if indeed you do see R being purged of s3 by 
> some point in
> > the future.
> 
> We are still using S3 classes designed a decade ago, and I 
> expect to be 
> still using them in another decade.  I even have S4 versions 
> of some of 
> them (e.g. lda, multinom) and no plans to use those in R.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 


********************************************************************** 
This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}

From ripley at stats.ox.ac.uk  Wed Aug  6 10:02:30 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug  6 10:02:39 2003
Subject: [Rd] s4 methods and base
In-Reply-To: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F6@xmx8lonib.lonib.commerzbank.com>
Message-ID: <Pine.LNX.4.44.0308060849570.12351-100000@gannet.stats>

On Wed, 6 Aug 2003, Marsland, John wrote:

> This is the inconsistency I am talking about:
> 
> > getClass("POSIXt")

That is an inappropriate use of getClass with S3 classes.  It's perhaps an 
inconsistency in the methods package, but it is not in base.

> Virtual Class
> 
> No Slots, prototype of class "NULL"
> 
> Extends: 
> Class "POSIXct", directly
> Class "oldClass", by class "POSIXct"
> > getClass("POSIXct")
> Virtual Class
> 
> No Slots, prototype of class "NULL"
> 
> Extends: "oldClass"
> 
> Known Subclasses: "POSIXt"
> > getClass("POSIXlt")
> Error in getClass("POSIXlt") : "POSIXlt" is not a defined class
> 
> But to quote from the online help:
> 
> "POSIXct" is more convenient for including in data frames, and "POSIXlt" is
> closer to human-readable forms. A virtual class "POSIXt" inherits from both
> of the classes: it is used to allow operations such as subtraction to mix
> the two classes. 

POSIXt is not an S4 class, and that was written before there were S4
classes in R. 

> In a S4 world wouldn't make more sense for POSIXt to be a virtual superclass
> and POSIXct and POSIXlt to be subclasses?

Well, I would have preferred class = c("POSIXct", "POSIXt"), but it was
not possible to add POSIXt that way (it was not in the first released
implementation).  Changing S4 classes is a nightmare, BTW.


As I said before, please do learn the difference between S3 and S4
classes, and that `class' and `method' (unqualified) normally mean S3.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From d.a.wooff at durham.ac.uk  Wed Aug  6 12:31:39 2003
From: d.a.wooff at durham.ac.uk (d.a.wooff@durham.ac.uk)
Date: Wed Aug  6 11:31:20 2003
Subject: [Rd] wilcox.test, CI (PR#3666)
Message-ID: <200308060931.h769VdJH023803@pubhealth.ku.dk>

Full_Name: David Wooff
Version: 1.7.0
OS: i686-pc-linux-gnu
Submission from: (NULL) (129.234.4.10)


wilcox.test exits with error message when confidence interval required, under
some situations. I suspect this occurs when the data contain a zero and for some
data lengths only:

print(wilcox.test(c(2,1,4,3,6,-5,0),conf.int=T))

fails

print(wilcox.test(c(2,1,4,3,6,-5,0,1),conf.int=T))

works

print(wilcox.test(c(2,1,4,3,6,-5,1),conf.int=T))

works

Apologies if this is known - did search bug lists first.

David.

From Torsten.Hothorn at rzmail.uni-erlangen.de  Wed Aug  6 12:50:24 2003
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Wed Aug  6 11:50:02 2003
Subject: [Rd] wilcox.test, CI (PR#3666)
In-Reply-To: <200308060931.h769VdJH023803@pubhealth.ku.dk>
References: <200308060931.h769VdJH023803@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.51.0308061140520.26021@artemis.imbe.med.uni-erlangen.de>


> Full_Name: David Wooff
> Version: 1.7.0
> OS: i686-pc-linux-gnu
> Submission from: (NULL) (129.234.4.10)
>
>
> wilcox.test exits with error message when confidence interval required, under
> some situations. I suspect this occurs when the data contain a zero and for some
> data lengths only:
>
> print(wilcox.test(c(2,1,4,3,6,-5,0),conf.int=T))
>

The conditional distribution cannot be computed for data with zeros in
'wilcox.test' and therefore the asymptotic distribution is used instead:

R> wilcox.test(c(2,1,4,3,6,-5,0),conf.int = FALSE)

        Wilcoxon signed rank test with continuity correction

data:  c(2, 1, 4, 3, 6, -5, 0)
V = 16, p-value = 0.2945
alternative hypothesis: true mu is not equal to 0

Warning message:
Cannot compute exact p-value with zeroes in: wilcox.test.default(c(2, 1,
4, 3, 6, -5, 0), co
nf.int = FALSE)

and in this special case 'uniroot' fails when searching for the confidence
limits (which I wouldn't trust anyway for such small sample sizes).

As a workaround you can use

R> wilcox.exact(c(2,1,4,3,6,-5,0),conf.int = TRUE)

        Exact Wilcoxon signed rank test

data:  c(2, 1, 4, 3, 6, -5, 0)
V = 16, p-value = 0.3125
alternative hypothesis: true mu is not equal to 0
95 percent confidence interval:
 -5  6
sample estimates:
(pseudo)median
           2.5

from package 'exactRankTests' which derives the confidence
limits from the conditional distribution.

Best,

Torsten

> fails
>
> print(wilcox.test(c(2,1,4,3,6,-5,0,1),conf.int=T))
>
> works
>
> print(wilcox.test(c(2,1,4,3,6,-5,1),conf.int=T))
>
> works
>
> Apologies if this is known - did search bug lists first.
>
> David.
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>

From E3QJ at unb.ca  Wed Aug  6 17:52:02 2003
From: E3QJ at unb.ca (E3QJ@unb.ca)
Date: Wed Aug  6 16:51:43 2003
Subject: [Rd] System slow down (PR#3668)
Message-ID: <200308061452.h76Eq2JH029500@pubhealth.ku.dk>

Full_Name: Jeff Benjamin
Version: 1.7.1
OS: XP Home Edition
Submission from: (NULL) (131.202.163.72)


Recently have been using R1.7.1 on a new laptop computer.  System and software
worked fine for at least two weeks.  Now the entire OS slows down to the point
where one would think it had frozen.  I feel there must be a compatibility issue
between R and XP Home (including auto updates / service packs) as these are the
only items I have changed recently.  Has anyone else had any similar problems
lately?

Jeff

From E3QJ at unb.ca  Wed Aug  6 17:52:19 2003
From: E3QJ at unb.ca (E3QJ@unb.ca)
Date: Wed Aug  6 16:52:04 2003
Subject: [Rd] System slow down (PR#3669)
Message-ID: <200308061452.h76EqJJH029507@pubhealth.ku.dk>

Full_Name: Jeff Benjamin
Version: 1.7.1
OS: XP Home Edition
Submission from: (NULL) (131.202.163.72)


Recently have been using R1.7.1 on a new laptop computer.  System and software
worked fine for at least two weeks.  Now the entire OS slows down to the point
where one would think it had frozen.  I feel there must be a compatibility issue
between R and XP Home (including auto updates / service packs) as these are the
only items I have changed recently.  Has anyone else had any similar problems
lately?

Jeff

From ripley at stats.ox.ac.uk  Wed Aug  6 17:13:40 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug  6 17:13:22 2003
Subject: [Rd] System slow down (PR#3668)
In-Reply-To: <200308061452.h76Eq2JH029500@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308061608290.23087-100000@gannet.stats>

Don't submit *two* bug reports as a question.  That's not what R-bugs is 
for, rather R-help.  And it is never necessary to send a report twice.

The answer to your question is that no one else has reported a change, and 
with XP Pro no one here has a problem.  I can suggest you look into your 
antivirus software, as there is a known problem with XP auto-update and 
most virus checking.

On Wed, 6 Aug 2003 E3QJ@unb.ca wrote:

> Full_Name: Jeff Benjamin
> Version: 1.7.1
> OS: XP Home Edition
> Submission from: (NULL) (131.202.163.72)
> 
> 
> Recently have been using R1.7.1 on a new laptop computer.  System and software
> worked fine for at least two weeks.  Now the entire OS slows down to the point
> where one would think it had frozen.  I feel there must be a compatibility issue
> between R and XP Home (including auto updates / service packs) as these are the
> only items I have changed recently.  Has anyone else had any similar problems
> lately?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From MSchwartz at medanalytics.com  Wed Aug  6 11:39:01 2003
From: MSchwartz at medanalytics.com (Marc Schwartz)
Date: Wed Aug  6 17:39:04 2003
Subject: [Rd] System slow down (PR#3668)
In-Reply-To: <Pine.LNX.4.44.0308061608290.23087-100000@gannet.stats>
References: <Pine.LNX.4.44.0308061608290.23087-100000@gannet.stats>
Message-ID: <1060184341.29873.51.camel@localhost>

In addition to Prof. Ripley's suggestion:

1. Specifically as it pertains to anti-virus software, if you are using
any, be sure that it is checking only executables and not "all" files.
The latter setting, under McAfee for example, can slow system
performance down notably. Presumably there is a similar setting under
Norton and others.

2. If you are using any type of firewall program (ie. ZoneAlarm),
consider un-installing it completely, re-booting and re-installing.
There have been problems noted with some of these programs after a time,
where system performance can slow.

3. If you recently installed any WinXP service pack updates and or
security updates, there are well known and MS acknowledged system slow
downs with some of them under certain circumstances. Please review the
following:



The following is a rather rare scenario, but can also result in system
slow downs:

http://support.microsoft.com/default.aspx?scid=kb;en-us;815411

HTH,

Marc Schwartz


On Wed, 2003-08-06 at 10:13, Prof Brian Ripley wrote:
> Don't submit *two* bug reports as a question.  That's not what R-bugs is 
> for, rather R-help.  And it is never necessary to send a report twice.
> 
> The answer to your question is that no one else has reported a change, and 
> with XP Pro no one here has a problem.  I can suggest you look into your 
> antivirus software, as there is a known problem with XP auto-update and 
> most virus checking.
> 
> On Wed, 6 Aug 2003 E3QJ@unb.ca wrote:
> 
> > Full_Name: Jeff Benjamin
> > Version: 1.7.1
> > OS: XP Home Edition
> > Submission from: (NULL) (131.202.163.72)
> > 
> > 
> > Recently have been using R1.7.1 on a new laptop computer.  System and software
> > worked fine for at least two weeks.  Now the entire OS slows down to the point
> > where one would think it had frozen.  I feel there must be a compatibility issue
> > between R and XP Home (including auto updates / service packs) as these are the
> > only items I have changed recently.  Has anyone else had any similar problems
> > lately?
>

From MSchwartz at medanalytics.com  Wed Aug  6 11:47:01 2003
From: MSchwartz at medanalytics.com (Marc Schwartz)
Date: Wed Aug  6 17:46:51 2003
Subject: [Rd] System slow down (PR#3668)
In-Reply-To: <1060184341.29873.51.camel@localhost>
References: <Pine.LNX.4.44.0308061608290.23087-100000@gannet.stats>
	<1060184341.29873.51.camel@localhost>
Message-ID: <1060184821.29873.57.camel@localhost>

The first MS URL seems to have been stripped off the e-mail as it was
sent from r-devel. Not sure if the direct e-mails retained it. If not,
then there was a problem on my end. Here it is again:



Hopefully this comes through.

Marc

On Wed, 2003-08-06 at 10:39, Marc Schwartz wrote:
> In addition to Prof. Ripley's suggestion:
> 
> 1. Specifically as it pertains to anti-virus software, if you are using
> any, be sure that it is checking only executables and not "all" files.
> The latter setting, under McAfee for example, can slow system
> performance down notably. Presumably there is a similar setting under
> Norton and others.
> 
> 2. If you are using any type of firewall program (ie. ZoneAlarm),
> consider un-installing it completely, re-booting and re-installing.
> There have been problems noted with some of these programs after a time,
> where system performance can slow.
> 
> 3. If you recently installed any WinXP service pack updates and or
> security updates, there are well known and MS acknowledged system slow
> downs with some of them under certain circumstances. Please review the
> following:
> 
> 
> 
> The following is a rather rare scenario, but can also result in system
> slow downs:
> 
> http://support.microsoft.com/default.aspx?scid=kb;en-us;815411
> 
> HTH,
> 
> Marc Schwartz
> 
> 
> On Wed, 2003-08-06 at 10:13, Prof Brian Ripley wrote:
> > Don't submit *two* bug reports as a question.  That's not what R-bugs is 
> > for, rather R-help.  And it is never necessary to send a report twice.
> > 
> > The answer to your question is that no one else has reported a change, and 
> > with XP Pro no one here has a problem.  I can suggest you look into your 
> > antivirus software, as there is a known problem with XP auto-update and 
> > most virus checking.
> > 
> > On Wed, 6 Aug 2003 E3QJ@unb.ca wrote:
> > 
> > > Full_Name: Jeff Benjamin
> > > Version: 1.7.1
> > > OS: XP Home Edition
> > > Submission from: (NULL) (131.202.163.72)
> > > 
> > > 
> > > Recently have been using R1.7.1 on a new laptop computer.  System and software
> > > worked fine for at least two weeks.  Now the entire OS slows down to the point
> > > where one would think it had frozen.  I feel there must be a compatibility issue
> > > between R and XP Home (including auto updates / service packs) as these are the
> > > only items I have changed recently.  Has anyone else had any similar problems
> > > lately?
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jerome at hivnet.ubc.ca  Thu Aug  7 01:41:50 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Thu Aug  7 00:41:32 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
Message-ID: <200308062241.h76MfoJH002132@pubhealth.ku.dk>

R version: 1.7.1
OS: Red Hat Linux 7.2

Hi all,

The formula object in model.frame() is not retrieved properly when 
model.frame() is called from within a function and the "subset" argument 
is supplied.

foo <- function(formula,data,subset=NULL)
{
  cat("\n*****Does formula[-3] == ~y ?**** TRUE *****\n")
  print(formula[-3] == ~y)

  cat("\n*****Result of model.frame() using formula[-3]**** FAIL *****\n")
  print(try(model.frame(formula[-3],data=data,subset=subset)))

  cat("\n*****Result of model.frame() using ~y**** WORKS *****\n")
  print(try(model.frame(~y,data=data,subset=subset)))
}
dat <- data.frame(y=c(5,25))
foo(y~1,dat)

Curiously, if the "subset" argument is removed from the call to 
model.frame(), then the execution is successful in both cases.

In ?model.frame, one can read:
     Variables in the formula, `subset' and in `...' are looked for
     first in `data' and then in the environment of `formula': see the
     help for `formula()' for further details.

However, replacing the line
    subset <- eval(substitute(subset), data, env)
by
    subset <- eval(substitute(subset), data, environment())
in model.frame.default() fixes this problem. I don't know if this 
correction would create more problems in other cases. Perhaps there is a 
better fix.

Sincerely,
Jerome Asselin

-- 

Jerome Asselin (Jrme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

From mh.smith at niwa.co.nz  Thu Aug  7 02:28:30 2003
From: mh.smith at niwa.co.nz (mh.smith@niwa.co.nz)
Date: Thu Aug  7 01:28:10 2003
Subject: [Rd] plotmath under windows (PR#3672)
Message-ID: <200308062328.h76NSUJH002347@pubhealth.ku.dk>

Full_Name: Murray H Smith
Version: 1.7.1
OS: Windows2000
Submission from: (NULL) (202.36.29.1)


This alleged bug is Windows specific and occurs when using Windows metafile
plots. 
The problem does not occur in a Linux version.
It does not occur in the pt rintout when a graphic is saved to a postscript file
under Windows.

The problem came to light when using plotmath to label a plot with latitudes
containing degree symbols. 

If expression(40 * degree) is used it is written on the default line for
labels.

If expression(paste(40 * degree, " S") is used it displced closer to the axis.
Pasting any character (except "") has this effect.

The following code illustrates the problem.

par(mfrow =c(3,2))

	# plotmath not used
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = seq(41 , 40, -0.5))
	
	# plotmath not used but characters pasted into labels
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = paste(seq(41, 40, -0.5), "S"))

	# last label has no character component
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
minute), 40 * degree))

	# last label has no plotmath component
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
minute), 40))

	# last label has null character component
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
minute), paste(40 * degree,  "")))

	# last label has spaces character component
plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
xaxt = "n", yaxt = "n")
axis(1, at = seq(-41, -40, 0.5), 
	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
minute), paste(" ", 40 * degree, " ")))

par(mfrow =c(1,1))

From ligges at statistik.uni-dortmund.de  Thu Aug  7 09:43:05 2003
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Aug  7 08:42:45 2003
Subject: [Rd] plotmath under windows (PR#3672)
Message-ID: <200308070643.h776h5JH004448@pubhealth.ku.dk>

mh.smith@niwa.co.nz wrote:

> Full_Name: Murray H Smith
> Version: 1.7.1
> OS: Windows2000
> Submission from: (NULL) (202.36.29.1)
> 

I don't see any difference either difference using win.metafile() with 
its defaults on WinNT 4.0, R-1.7.1. Please start R with --vanilla and 
process your code again. Does it still happen?

Uwe Ligges


> This alleged bug is Windows specific and occurs when using Windows metafile
> plots. 
> The problem does not occur in a Linux version.
> It does not occur in the pt rintout when a graphic is saved to a postscript file
> under Windows.
> 
> The problem came to light when using plotmath to label a plot with latitudes
> containing degree symbols. 
> 
> If expression(40 * degree) is used it is written on the default line for
> labels.
> 
> If expression(paste(40 * degree, " S") is used it displced closer to the axis.
> Pasting any character (except "") has this effect.
> 
> The following code illustrates the problem.
> 
> par(mfrow =c(3,2))
> 
> 	# plotmath not used
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = seq(41 , 40, -0.5))
> 	
> 	# plotmath not used but characters pasted into labels
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = paste(seq(41, 40, -0.5), "S"))
> 
> 	# last label has no character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), 40 * degree))
> 
> 	# last label has no plotmath component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), 40))
> 
> 	# last label has null character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), paste(40 * degree,  "")))
> 
> 	# last label has spaces character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), paste(" ", 40 * degree, " ")))
> 
> par(mfrow =c(1,1))
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Thu Aug  7 09:42:50 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Aug  7 09:42:46 2003
Subject: [Rd] plotmath under windows (PR#3672)
In-Reply-To: <200308062328.h76NSUJH002347@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308070759400.24700-100000@gannet.stats>

If it occurs on plotmath it will also occur on screen (and it does for 
me on WinXP).

Why do you think this is a bug?   IT IS intentional.  Please don't waste 
our time reporting things you don't understand as bugs -- see the FAQ and 
ask for help on R-help/R-devel first.  In particular, your claim is false 
(it is only including characters which have descenders that has the 
effect, and more careful chacking might have made you realise this was a 
feature).

If you plot different labels they will have different heights and depths
(and different heights/depths under different fonts), and that is taken
into account.  It often is not clear where the baseline on a plotmath
expression is, and it is taken as the bottom of the bounding box, whereas 
for character vectors the baselines are the baselines of the strings.

The Windows and postscript font metrics are not the same, and it may well
be the case (and Uwe Ligges' report suggests so) that Windows font metrics
differ by version of Windows, something I think we have met before.

The exact cause here is that many of your plotmath expressions contain a
space, and in WinXP, a space extends below as well as above the line.  So
paste(40 * degree, " ",30 * minute) has space at the bottom of its
bounding box, and 40 does not.  It is precisely the plotmath expressions
containing spaces which are raised.

If you would like to change the behaviour, please submit a patch (against 
the current R-devel code) for us to test.

Here is a small example of alignment for you to ponder

plot(1:10, type="n")
text(1:2, 2, c("i", "j"), adj=c(0.5, 0))
text(3:4, 2, expression("i", "j"), adj=c(0.5, 0))
abline(h=2)

Try it under postscript() as well. So your patch will need to establish
the correct baseline for plotmath expressions.  We look forward to your 
positive contributions to R.



On Thu, 7 Aug 2003 mh.smith@niwa.co.nz wrote:

> Full_Name: Murray H Smith
> Version: 1.7.1
> OS: Windows2000
> Submission from: (NULL) (202.36.29.1)
> 
> 
> This alleged bug is Windows specific and occurs when using Windows metafile
> plots. 
> The problem does not occur in a Linux version.
> It does not occur in the pt rintout when a graphic is saved to a postscript file
> under Windows.
> 
> The problem came to light when using plotmath to label a plot with latitudes
> containing degree symbols. 
> 
> If expression(40 * degree) is used it is written on the default line for
> labels.
> 
> If expression(paste(40 * degree, " S") is used it displced closer to the axis.
> Pasting any character (except "") has this effect.

Not true.  expression(paste(40 * degree, "S")) is not displaced here.

> The following code illustrates the problem.
> 
> par(mfrow =c(3,2))
> 
> 	# plotmath not used
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = seq(41 , 40, -0.5))
> 	
> 	# plotmath not used but characters pasted into labels
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = paste(seq(41, 40, -0.5), "S"))
> 
> 	# last label has no character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), 40 * degree))
> 
> 	# last label has no plotmath component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), 40))
> 
> 	# last label has null character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), paste(40 * degree,  "")))
> 
> 	# last label has spaces character component
> plot(seq(-41, -40, 0.5), c(0, 1, 0), type = "n", xlab = "latitude", ylab = "",
> xaxt = "n", yaxt = "n")
> axis(1, at = seq(-41, -40, 0.5), 
> 	labels = expression(paste(41 * degree, " S"), paste(40 * degree, " ", 30 *
> minute), paste(" ", 40 * degree, " ")))
> 
> par(mfrow =c(1,1))
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Thu Aug  7 09:07:06 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Aug  7 10:07:09 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
In-Reply-To: <200308062241.h76MfoJH002132@pubhealth.ku.dk>
References: <200308062241.h76MfoJH002132@pubhealth.ku.dk>
Message-ID: <x2znilx4uz.fsf@biostat.ku.dk>

jerome@hivnet.ubc.ca writes:

> R version: 1.7.1
> OS: Red Hat Linux 7.2
> 
> Hi all,
> 
> The formula object in model.frame() is not retrieved properly when 
> model.frame() is called from within a function and the "subset" argument 
> is supplied.
> 
> foo <- function(formula,data,subset=NULL)
> {
>   cat("\n*****Does formula[-3] == ~y ?**** TRUE *****\n")
>   print(formula[-3] == ~y)
> 
>   cat("\n*****Result of model.frame() using formula[-3]**** FAIL *****\n")
>   print(try(model.frame(formula[-3],data=data,subset=subset)))
> 
>   cat("\n*****Result of model.frame() using ~y**** WORKS *****\n")
>   print(try(model.frame(~y,data=data,subset=subset)))
> }
> dat <- data.frame(y=c(5,25))
> foo(y~1,dat)
> 
> Curiously, if the "subset" argument is removed from the call to 
> model.frame(), then the execution is successful in both cases.
> 
> In ?model.frame, one can read:
>      Variables in the formula, `subset' and in `...' are looked for
>      first in `data' and then in the environment of `formula': see the
>      help for `formula()' for further details.
> 
> However, replacing the line
>     subset <- eval(substitute(subset), data, env)
> by
>     subset <- eval(substitute(subset), data, environment())
> in model.frame.default() fixes this problem. I don't know if this 
> correction would create more problems in other cases. Perhaps there is a 
> better fix.

There is really nothing to fix, at least if you go by the rule that it
is only a bug if it behaves contrary to documentation:

There is no "subset" in the environment of "formula", nor in the
"data". If you put one there, the error goes away

> subset<-NULL
> foo(y~1,dat,subset=1)

*****Does formula[-3] == ~y ?**** TRUE *****
[1] TRUE

*****Result of model.frame() using formula[-3]**** FAIL *****
   y
1  5
2 25

*****Result of model.frame() using ~y**** WORKS *****
  y
1 5

However, notice that it is not the same subset. 

There's a whole area of similar nastiness grouped under the heading of
"nonstandard evaluation rules". The basic issue is that you will often
assume that the variables used for subsetting comes from the same
place as those in the model, e.g. in lm(fat~age,subset=sex=="male").

The problem is that it gets really awkward when a function wants to
compute the subset variable and combine it with a formula passed as an
argument. And it only gets worse when arguments can be both scalar and
vector, e.g.

plot(fat~age, col=as.numeric(sex))
function(mycolor="green") plot(fat~age, col=mycolor)

We have discussed changing this on several occasions, e.g. by
requiring that arguments that need to be evaluated in the formula
environment or the data frame should be either model formulas
themselves or quoted expressions. However, that would break S-PLUS
compatibility and also a large body of existing analysis code.

[[ I did discover yesterday (or maybe I was just reminded...) that we
even have nonstandard nonstandard evaluation rules in some places
(nls() seems to evaluate its model formula in the global environment
even if it is given explicitly within a function:

  f <- function() {
    g <- function(a,x) exp(-a*x)
    nls(y~g(a,x),start=list(a=.1))
  }
  x <- 1:10
  y <- exp(-.12*x)+rnorm(10,sd=.001)
  f()
  Error in eval(expr, envir, enclos) : couldn't find function "g"

Argh...]]
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From saikat at stat.wisc.edu  Thu Aug  7 11:09:12 2003
From: saikat at stat.wisc.edu (Saikat DebRoy)
Date: Thu Aug  7 16:08:53 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
In-Reply-To: <x2znilx4uz.fsf@biostat.ku.dk>
Message-ID: <B88B3B32-C8E0-11D7-AF59-0003931A3C9E@stat.wisc.edu>

On Thursday, Aug 7, 2003, at 04:13 US/Eastern, Peter Dalgaard BSA wrote:

>
> [[ I did discover yesterday (or maybe I was just reminded...) that we
> even have nonstandard nonstandard evaluation rules in some places
> (nls() seems to evaluate its model formula in the global environment
> even if it is given explicitly within a function:
>
>   f <- function() {
>     g <- function(a,x) exp(-a*x)
>     nls(y~g(a,x),start=list(a=.1))
>   }
>   x <- 1:10
>   y <- exp(-.12*x)+rnorm(10,sd=.001)
>   f()
>   Error in eval(expr, envir, enclos) : couldn't find function "g"
>
> Argh...]]
>

Given that I am, for better or worse,  responsible for a large portion 
of the code in nls, I should make it clear that I did not understand 
the nonstandard evaluation rule in those days and so any nonstandrad 
nonstandrad rule used there is a bug. Now that I understand these 
things a little, I can see that nls does a few things wrong. I think 
the following patch mostly fixes them.


-------------- next part --------------

From tlumley at u.washington.edu  Thu Aug  7 08:14:35 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu Aug  7 16:14:28 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
In-Reply-To: <x2znilx4uz.fsf@biostat.ku.dk>
Message-ID: <Pine.A41.4.44.0308070713060.77846-100000@homer22.u.washington.edu>

On 7 Aug 2003, Peter Dalgaard BSA wrote:
> [[ I did discover yesterday (or maybe I was just reminded...) that we
> even have nonstandard nonstandard evaluation rules in some places
> (nls() seems to evaluate its model formula in the global environment
> even if it is given explicitly within a function:
>
>   f <- function() {
>     g <- function(a,x) exp(-a*x)
>     nls(y~g(a,x),start=list(a=.1))
>   }
>   x <- 1:10
>   y <- exp(-.12*x)+rnorm(10,sd=.001)
>   f()
>   Error in eval(expr, envir, enclos) : couldn't find function "g"
>
> Argh...]]


This is the same phenomenon that is documented for lattice graphics and
for lme in my notes on nonstandard evaluation rules.  I think it *is* a
bug.

	-thomas

From saikat at stat.wisc.edu  Thu Aug  7 11:24:17 2003
From: saikat at stat.wisc.edu (Saikat DebRoy)
Date: Thu Aug  7 16:28:01 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
Message-ID: <6645C002-C8E3-11D7-AF59-0003931A3C9E@stat.wisc.edu>

That attachment disappeared from the previous mail. Here is the patch I 
mentioned.

diff -Naur src/library/nls/R/nls.R /tmp/R/nls.R
--- src/library/nls/R/nls.R	Mon Jul 28 11:11:06 2003
+++ /tmp/R/nls.R	Thu Aug  7 10:04:49 2003
@@ -38,7 +38,7 @@

  nlsModel.plinear <- function( form, data, start ) {
      thisEnv <- environment()
-    env <- new.env()
+    env <- new.env(parent=environment(form))
      for( i in names( data ) ) {
          assign( i, data[[i]], envir = env )
      }
@@ -216,7 +216,7 @@
             },
             predict = function(newdata = list(), qr = FALSE)
             {
-               Env <- new.env()
+               Env <- new.env(parent=environment(form))
                 for (i in objects(envir = env)) {
                     assign(i, get(i, envir = env), envir = Env)
                 }
@@ -234,7 +234,7 @@

  nlsModel <- function( form, data, start ) {
      thisEnv <- environment()
-    env <- new.env()
+    env <- new.env(parent=environment(form))
      for( i in names( data ) ) {
          assign( i, data[[i]], envir = env )
      }
@@ -374,7 +374,7 @@
             Rmat = function() qr.R( QR ),
             predict = function(newdata = list(), qr = FALSE)
             {
-               Env <- new.env()
+               Env <- new.env(parent=environment(form))
                 for (i in objects(envir = env)) {
                     assign(i, get(i, envir = env), envir = Env)
                 }
@@ -398,7 +398,9 @@
              subset, weights, na.action)
  {
      mf <- match.call()             # for creating the model frame
+    env <- environment(formula)
      formula <- as.formula( formula )
+
      varNames <- all.vars(formula)  # parameter and variable names from 
formula

      ## adjust a one-sided model formula by using 0 as the response
@@ -435,7 +437,7 @@

      mf$formula <-                         # replace RHS by linear 
model formula
        parse( text = paste("~", paste( varNames[varIndex], collapse = 
"+")))[[1]]
-
+    environment(mf$formula) <- env
      mf$start <- mf$control <- mf$algorithm <- mf$trace <- NULL
      mf[[1]] <- as.name("model.frame")
      mf <- as.list(eval(mf, parent.frame()))

From ggrothendieck at volcanomail.com  Thu Aug  7 08:39:36 2003
From: ggrothendieck at volcanomail.com (Gabor Grothendieck)
Date: Thu Aug  7 16:39:16 2003
Subject: [Rd] backtick notation
Message-ID: <20030807143937.7D92EE4B8@sitemail.everyone.net>


Could someone explain the thinking behind the backtick notation in 
r-devel?

I think I understand that it can be used to refer to variable names
which would otherwise not conform to R syntax; however, assign and
as.name already allow you to do this.  Is there more to it than that?

Is backtick notation supposed to be analogous to backticks in the 
UNIX shell, the $ sign in perl or some feature in lisp/scheme?

From saikat at stat.wisc.edu  Thu Aug  7 12:08:31 2003
From: saikat at stat.wisc.edu (Saikat DebRoy)
Date: Thu Aug  7 17:08:11 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
In-Reply-To: <Pine.A41.4.44.0308070713060.77846-100000@homer22.u.washington.edu>
Message-ID: <01E63B3C-C8E9-11D7-AF59-0003931A3C9E@stat.wisc.edu>

On Thursday, Aug 7, 2003, at 10:14 US/Eastern, Thomas Lumley wrote:

> On 7 Aug 2003, Peter Dalgaard BSA wrote:
>> [[ I did discover yesterday (or maybe I was just reminded...) that we
>> even have nonstandard nonstandard evaluation rules in some places
>> (nls() seems to evaluate its model formula in the global environment
>> even if it is given explicitly within a function:
>>
>>   f <- function() {
>>     g <- function(a,x) exp(-a*x)
>>     nls(y~g(a,x),start=list(a=.1))
>>   }
>>   x <- 1:10
>>   y <- exp(-.12*x)+rnorm(10,sd=.001)
>>   f()
>>   Error in eval(expr, envir, enclos) : couldn't find function "g"
>>
>> Argh...]]
>
>
> This is the same phenomenon that is documented for lattice graphics and
> for lme in my notes on nonstandard evaluation rules.  I think it *is* a
> bug.

I think this was fixed in lattice a few months ago - from the 
ChangeLog, on March 3rd.

From tlumley at u.washington.edu  Thu Aug  7 09:48:55 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu Aug  7 17:48:43 2003
Subject: [Rd] backtick notation
In-Reply-To: <20030807143937.7D92EE4B8@sitemail.everyone.net>
Message-ID: <Pine.A41.4.44.0308070843200.142036-100000@homer06.u.washington.edu>

On Thu, 7 Aug 2003, Gabor Grothendieck wrote:

>
> Could someone explain the thinking behind the backtick notation in
> r-devel?
>
> I think I understand that it can be used to refer to variable names
> which would otherwise not conform to R syntax; however, assign and
> as.name already allow you to do this.  Is there more to it than that?

assign and as.name are fairly limited.  For example, if you have a list or
data frame whose name is syntactically invalid it is quite difficult to
access or modify its columns.


	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From p.dalgaard at biostat.ku.dk  Thu Aug  7 17:40:32 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Aug  7 18:40:35 2003
Subject: [Rd] backtick notation
In-Reply-To: <Pine.A41.4.44.0308070843200.142036-100000@homer06.u.washington.edu>
References: <Pine.A41.4.44.0308070843200.142036-100000@homer06.u.washington.edu>
Message-ID: <x2r83xbek9.fsf@biostat.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Thu, 7 Aug 2003, Gabor Grothendieck wrote:
> 
> >
> > Could someone explain the thinking behind the backtick notation in
> > r-devel?
> >
> > I think I understand that it can be used to refer to variable names
> > which would otherwise not conform to R syntax; however, assign and
> > as.name already allow you to do this.  Is there more to it than that?
> 
> assign and as.name are fairly limited.  For example, if you have a list or
> data frame whose name is syntactically invalid it is quite difficult to
> access or modify its columns.

Yes. `weight in kg`[101]<-55 is pretty difficult to do with get() and
assign() and lm(`weight in kg`~I(`height in m`^2)) is tricky too. The
use is sort of similar to the single quotes in shell programming (but
not quite). The choice of the backtick as quoting delimiter was mostly
because that was the only one available....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ggrothendieck at volcanomail.com  Thu Aug  7 11:43:54 2003
From: ggrothendieck at volcanomail.com (Gabor Grothendieck)
Date: Thu Aug  7 19:43:33 2003
Subject: [Rd] Re: backtick notation
Message-ID: <20030807174354.DF09C4238@sitemail.everyone.net>


> > assign and as.name are fairly limited.  For example, if you have a list or
> > data frame whose name is syntactically invalid it is quite difficult to
> > access or modify its columns.
>
> Yes. `weight in kg`[101]<-55 is pretty difficult to do with get() and
> assign() and lm(`weight in kg`~I(`height in m`^2)) is tricky too. The
> use is sort of similar to the single quotes in shell programming (but
> not quite). The choice of the backtick as quoting delimiter was mostly
> because that was the only one available....

Good point about the difficulty of using assign and get.

This leads to additional questions:

- is it desirable to make it easy to work with non-synactic names?

- if the previous point is yes, then is this use sufficiently 
  important to warrant a new syntactic element, viz. backquote?  
  For example, extending perhaps as.name could be extended so that
  it can be used on the left hand side of an assignment like this:
  as.name("height in m2")^2 or as.name("weight in kg")[101]<-55

- how far can this feature be pushed?   For example, backtick quoted
  names might be usable in string literals as in perl:
  print("variable x is `x` and variable y is `y`")  or
  download.file("http://www.xyz.com?a=`a`&b=`b`")

I am not sure what the answers to these questions should be 
but in order to combat excessive growth of the syntax a new 
syntax addition usually is made to climb a higher barrier than 
a feature which does not.

From jerome at hivnet.ubc.ca  Thu Aug  7 12:16:48 2003
From: jerome at hivnet.ubc.ca (Jerome Asselin)
Date: Thu Aug  7 20:17:06 2003
Subject: [Rd] model.frame() call from inside a function (PR#3671)
In-Reply-To: <x2znilx4uz.fsf@biostat.ku.dk>
References: <200308062241.h76MfoJH002132@pubhealth.ku.dk>
	<x2znilx4uz.fsf@biostat.ku.dk>
Message-ID: <200308071823.LAA00390@hivnet.ubc.ca>


Thanks for your reply and discussion on the issue. See below for another 
suggestion of a fix.

I have spent some time trying to find a fix which would still work as 
documented:
>      Variables in the formula, `subset' and in `...' are looked for
>      first in `data' and then in the environment of `formula': see the
>      help for `formula()' for further details.

The problem is that the expression environment(formula) in 
model.frame.default() gives the value:
(1) <environment: R_GlobalEnv> for the call 
model.frame(formula[-3],data=data,subset=subset) ;
(2) <environment: 0x883d288> (or something alike) for the call
model.frame(~y,data=data,subset=subset) .

In case (1), eval(subset, data, env) in model.frame.default() gives the 
subset() function which leads to an error.
In the case (2), it gives the correct value for subset (i.e., NULL in the 
example of my original message).

I wonder why the environment is not the same for both cases. Don't you? 
Perhaps this is where the real problem is, but my current understanding of 
environment() is too limited to make such a claim.

I suggest here another fix which I hope respects the documentation. In 
model.frame.default(), add the line
    formula <- formula(deparse(formula))
just before the line
    env <- environment(formula)
This change will affect the value of environment(formula).

If you make the correction and run the code below, then it should work 
successfully. The question is whether this change still respects the 
documentation. Personally, I think this is safe, because the expression 
eval(subset, data, env) is still evaluated in the environment of 
`formula', despite the fact that this environment has changed.

Sincerely,
Jerome Asselin

foo <- function(formula,data,subset=NULL)
{
  cat("\n*****Does formula[-3] == ~y ?**** TRUE *****\n")
  print(formula[-3] == ~y)

  cat("\n*****Result of model.frame() using formula[-3]**** FAIL *****\n")
  print(try(model.frame(formula[-3],data=data,subset=subset)))

  cat("\n*****Result of model.frame() using ~y**** WORKS *****\n")
  print(try(model.frame(~y,data=data,subset=subset)))
}
dat <- data.frame(y=c(5,25))
foo(y~1,dat)
foo(y~1,dat,subset=1)

####Results after making the correction###

> foo(y~1,dat)

*****Does formula[-3] == ~y ?**** TRUE *****
[1] TRUE

*****Result of model.frame() using formula[-3]**** FAIL *****
   y
1  5
2 25

*****Result of model.frame() using ~y**** WORKS *****
   y
1  5
2 25
> foo(y~1,dat,subset=1)

*****Does formula[-3] == ~y ?**** TRUE *****
[1] TRUE

*****Result of model.frame() using formula[-3]**** FAIL *****
  y
1 5

*****Result of model.frame() using ~y**** WORKS *****
  y
1 5

From jerome at hivnet.ubc.ca  Thu Aug  7 21:32:50 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Thu Aug  7 20:33:01 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3680)
Message-ID: <200308071832.h77IWoJH013390@pubhealth.ku.dk>

R version: 1.7.1
OS: Red Hat Linux 7.2

In this example, I would expect an error for the overly long variable 
name. This is always reproducable for me.

> formula(paste("y~",paste(rep("x",50000),collapse="")))
Segmentation fault

Sincerely,
Jerome Asselin

-- 

Jerome Asselin (Jrme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

From p.dalgaard at biostat.ku.dk  Thu Aug  7 22:08:45 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Aug  7 23:08:48 2003
Subject: [Rd] Re: backtick notation
In-Reply-To: <20030807174354.DF09C4238@sitemail.everyone.net>
References: <20030807174354.DF09C4238@sitemail.everyone.net>
Message-ID: <x2n0elb255.fsf@biostat.ku.dk>

Gabor Grothendieck <ggrothendieck@volcanomail.com> writes:

> This leads to additional questions:
> 
> - is it desirable to make it easy to work with non-synactic names?

No and yes. This has been the reason thant it wasn't implemented long
ago, but the increasing use of interfaces to non-R databases (with
non-R names) was making it desirable to have some way of using these
names, particularly in model formulas. Notice that non-valid names
have always been supported for function names and list elements.
 
> - if the previous point is yes, then is this use sufficiently 
>   important to warrant a new syntactic element, viz. backquote?  
>   For example, extending perhaps as.name could be extended so that
>   it can be used on the left hand side of an assignment like this:
>   as.name("height in m2")^2 or as.name("weight in kg")[101]<-55

get() would be more likely than as.name() there since it doesn't make
sense to square a symbol and y <- as.name("x") is different from y <-
get("x"). That would be workable, but it introduces an extra function
call at run time and leads to notation in model formulas which would
drive users nuts. Also it has the potential to rid us of some
unfortunate assymmetries in the language where text strings in
"non-syntactic" positions - but only there - are used to specify funny
names. Consider e.g. "foo bar" <- x vs. x <- "foo bar". Much of this
would be more logical if the identifier was put in backticks rather
than quotes. On the other hand compatibility issues probably forces us
to live with the old convention in dump() and similar places.

> - how far can this feature be pushed?   For example, backtick quoted
>   names might be usable in string literals as in perl:
>   print("variable x is `x` and variable y is `y`")  or
>   download.file("http://www.xyz.com?a=`a`&b=`b`")

I wouldn't want to push it very far, and quite certainly not in that
direction (having backticks mean "value of" in one context and
"literal name" in another would be odd). It works at the level of
lexical analysis, so it is a very basic element, similar to the
%foobar% style of operator specification (there's one type of funny
name for you that has been integral to the language for quite a
while.) Of course, one could still implement string interpolation;
it's just not really related to the issue of nonstandard identifiers. 

> I am not sure what the answers to these questions should be 
> but in order to combat excessive growth of the syntax a new 
> syntax addition usually is made to climb a higher barrier than 
> a feature which does not.

Actually, the ASCII character set puts a rather effective limit on the
number of quoting operators that one can have. The backtick was
the only symbol that wasn't already used in R, so bringing it
into play *was* considered quite carefully...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Thu Aug  7 22:24:32 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Aug  7 23:24:35 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3680)
In-Reply-To: <200308071832.h77IWoJH013390@pubhealth.ku.dk>
References: <200308071832.h77IWoJH013390@pubhealth.ku.dk>
Message-ID: <x2isp9b1f1.fsf@biostat.ku.dk>

jerome@hivnet.ubc.ca writes:

> R version: 1.7.1
> OS: Red Hat Linux 7.2
> 
> In this example, I would expect an error for the overly long variable 
> name. This is always reproducable for me.
> 
> > formula(paste("y~",paste(rep("x",50000),collapse="")))
> Segmentation fault

Also in (reasonably) current r-devel. But why would you want to do
that?

The cause of the crash is that R_GlobalContext is getting clobbered by
the x's, leading to

Program received signal SIGSEGV, Segmentation fault.
0x0809f491 in Rf_error (format=0x817d7ef "symbol print-name too long")
    at ../../../R/src/main/errors.c:520


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jerome at hivnet.ubc.ca  Thu Aug  7 15:38:02 2003
From: jerome at hivnet.ubc.ca (Jerome Asselin)
Date: Thu Aug  7 23:38:13 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3680)
In-Reply-To: <x2isp9b1f1.fsf@biostat.ku.dk>
References: <200308071832.h77IWoJH013390@pubhealth.ku.dk>
	<x2isp9b1f1.fsf@biostat.ku.dk>
Message-ID: <200308072144.OAA06860@hivnet.ubc.ca>


Indeed, I don't want to do that. (I found the bug by mistake.)

Maybe I'm wrong, but I thought that all segmentation faults should be 
reported. This one is certainly not an urgent issue.

Cheers,
Jerome

On August 7, 2003 02:30 pm, Peter Dalgaard BSA wrote:
> jerome@hivnet.ubc.ca writes:
> > R version: 1.7.1
> > OS: Red Hat Linux 7.2
> >
> > In this example, I would expect an error for the overly long variable
> > name. This is always reproducable for me.
> >
> > > formula(paste("y~",paste(rep("x",50000),collapse="")))
> >
> > Segmentation fault
>
> Also in (reasonably) current r-devel. But why would you want to do
> that?
>
> The cause of the crash is that R_GlobalContext is getting clobbered by
> the x's, leading to
>
> Program received signal SIGSEGV, Segmentation fault.
> 0x0809f491 in Rf_error (format=0x817d7ef "symbol print-name too long")
>     at ../../../R/src/main/errors.c:520

From p.dalgaard at biostat.ku.dk  Thu Aug  7 23:08:45 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Aug  8 00:08:48 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3680)
In-Reply-To: <200308072144.OAA06860@hivnet.ubc.ca>
References: <200308071832.h77IWoJH013390@pubhealth.ku.dk>
	<x2isp9b1f1.fsf@biostat.ku.dk> <200308072144.OAA06860@hivnet.ubc.ca>
Message-ID: <x2adalazdb.fsf@biostat.ku.dk>

Jerome Asselin <jerome@hivnet.ubc.ca> writes:

> Indeed, I don't want to do that. (I found the bug by mistake.)
> 
> Maybe I'm wrong, but I thought that all segmentation faults should be 
> reported. This one is certainly not an urgent issue.

Sure, just wondering... Yes, we should fix it eventually; that's why I
supplied some preliminary debugging info to stor with the report.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jerome at hivnet.ubc.ca  Fri Aug  8 03:46:46 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Fri Aug  8 02:46:24 2003
Subject: [Rd] covmat argument in princomp() (PR#3682)
Message-ID: <200308080046.h780kkJH015348@pubhealth.ku.dk>

R version: 1.7.1
OS: Red Hat Linux 7.2

When "covmat" is supplied in princomp(), the output value "center" is all 
NA's, even though the input matrix was indeed centered. I haven't read 
anything about this in the help file for princomp(). See code below for an 
example: pc2$center is all NA's.

Jerome Asselin

x <- rnorm(6)
y <- rnorm(6)
X <- cbind(x,y)
pc1 <- princomp(X)
pc1$scores %*% t(pc1$loadings)-X
pc1$center
pc2 <- princomp(X,covmat=cov(X)*5/6)
pc2$scores %*% t(pc2$loadings)-X
pc2$center  # All NA's (should be the same as pc1$center)

> x <- rnorm(6)
> y <- rnorm(6)
> X <- cbind(x,y)
> pc1 <- princomp(X)
> pc1$scores %*% t(pc1$loadings)-X

               x          y
  [1,] 0.1522791 -0.4205906
  [2,] 0.1522791 -0.4205906
  [3,] 0.1522791 -0.4205906
  [4,] 0.1522791 -0.4205906
  [5,] 0.1522791 -0.4205906
  [6,] 0.1522791 -0.4205906
> pc1$center
         x          y
-0.1522791  0.4205906
> pc2 <- princomp(X,covmat=cov(X)*5/6)
> pc2$scores %*% t(pc2$loadings)-X

               x          y
  [1,] 0.1522791 -0.4205906
  [2,] 0.1522791 -0.4205906
  [3,] 0.1522791 -0.4205906
  [4,] 0.1522791 -0.4205906
  [5,] 0.1522791 -0.4205906
  [6,] 0.1522791 -0.4205906
> pc2$center  # All NA's (should be the same as pc1$center)
[1] NA NA

-- 

Jerome Asselin (Jrme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

From ripley at stats.ox.ac.uk  Fri Aug  8 09:47:46 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Aug  8 09:47:30 2003
Subject: [Rd] covmat argument in princomp() (PR#3682)
In-Reply-To: <200308080046.h780kkJH015348@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308080834450.477-100000@gannet.stats>

On Fri, 8 Aug 2003 jerome@hivnet.ubc.ca wrote:

> R version: 1.7.1
> OS: Red Hat Linux 7.2
> 
> When "covmat" is supplied in princomp(), the output value "center" is all 
> NA's, even though the input matrix was indeed centered. I haven't read 
> anything about this in the help file for princomp(). 

You *did* try to read the help page?  You seem to have failed to read the 
description of `value', which says

  center: the means that were subtracted.

> See code below for an  example: pc2$center is all NA's.
> x <- rnorm(6)
> y <- rnorm(6)
> X <- cbind(x,y)
> pc1 <- princomp(X)
> pc1$scores %*% t(pc1$loadings)-X
> pc1$center
> pc2 <- princomp(X,covmat=cov(X)*5/6)

If you had read either the help page or the code, you would have seen
that x is not used when you supply covmat.  So although means were
subtracted, they were done by you not princomp(), and NA is the right
answer.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From a.buness at dkfz.de  Fri Aug  8 16:50:29 2003
From: a.buness at dkfz.de (a.buness@dkfz.de)
Date: Fri Aug  8 15:50:06 2003
Subject: [Rd] Wish (PR#3690)
Message-ID: <200308081350.h78DoTJH023394@pubhealth.ku.dk>

Full_Name: Andreas Buness
Version: 1.7.1
OS: Unix
Submission from: (NULL) (193.174.53.122)


I would like to ask you to enhance the apply function
with an option drop=FALSE similar to the one existing
for subsetting of arrays. Or any other mechanism to get
control on the dimensionality of an object resulting 
from an apply call. This could facilitate more robust 
programming.

From p.dalgaard at biostat.ku.dk  Fri Aug  8 15:22:53 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Aug  8 16:22:55 2003
Subject: [Rd] Wish (PR#3690)
In-Reply-To: <200308081350.h78DoTJH023394@pubhealth.ku.dk>
References: <200308081350.h78DoTJH023394@pubhealth.ku.dk>
Message-ID: <x2u18si5oa.fsf@biostat.ku.dk>

a.buness@dkfz.de writes:

> Full_Name: Andreas Buness
> Version: 1.7.1
> OS: Unix
> Submission from: (NULL) (193.174.53.122)
> 
> 
> I would like to ask you to enhance the apply function
> with an option drop=FALSE similar to the one existing
> for subsetting of arrays. Or any other mechanism to get
> control on the dimensionality of an object resulting 
> from an apply call. This could facilitate more robust 
> programming.

Don't you mean simplify=TRUE similar to sapply()? This has been
suggested a couple of times. Or how do you intend 'drop' to work?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From pburns at pburns.seanet.com  Fri Aug  8 21:45:53 2003
From: pburns at pburns.seanet.com (Patrick Burns)
Date: Fri Aug  8 21:46:04 2003
Subject: [Rd] Wish (PR#3690)
References: <200308081350.h78DoTJH023394@pubhealth.ku.dk>
	<x2u18si5oa.fsf@biostat.ku.dk>
Message-ID: <3F33FDF1.2070906@pburns.seanet.com>

I'm not sure if this is the original wish or not, but I have run
into the following situation:

I apply a function to a matrix, but the operation fails because
the function expects a matrix (which in my mind is the one
column or row at each go). The function doesn't see it that
way because it only gets the data as a vector.

Personally, I'd favor forcing the user to write a wrapper function
that does as.matrix (possibly with a transpose) rather than cluttering
up apply.  

Patrick Burns

Burns Statistics
patrick@burns-stat.com
+44 (0)20 8525 0696
http://www.burns-stat.com
(home of S Poetry and "A Guide for the Unwilling S User")

Peter Dalgaard BSA wrote:

>a.buness@dkfz.de writes:
>
>  
>
>>Full_Name: Andreas Buness
>>Version: 1.7.1
>>OS: Unix
>>Submission from: (NULL) (193.174.53.122)
>>
>>
>>I would like to ask you to enhance the apply function
>>with an option drop=FALSE similar to the one existing
>>for subsetting of arrays. Or any other mechanism to get
>>control on the dimensionality of an object resulting 
>>from an apply call. This could facilitate more robust 
>>programming.
>>    
>>
>
>Don't you mean simplify=TRUE similar to sapply()? This has been
>suggested a couple of times. Or how do you intend 'drop' to work?
>
>  
>

From luke at stat.uiowa.edu  Sat Aug  9 13:18:36 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Sat Aug  9 19:18:16 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3680)
In-Reply-To: <200308071832.h77IWoJH013390@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308091215130.656-100000@itasca2.stat.uiowa.edu>

On Thu, 7 Aug 2003 jerome@hivnet.ubc.ca wrote:

> R version: 1.7.1
> OS: Red Hat Linux 7.2
> 
> In this example, I would expect an error for the overly long variable 
> name. This is always reproducable for me.
> 
> > formula(paste("y~",paste(rep("x",50000),collapse="")))
> Segmentation fault
> 
> Sincerely,
> Jerome Asselin

The problem seems to be in parse, which formula.default calls:

> parse(text=paste(rep("x",50000),collapse=""))
Segmentation fault (core dumped)

We were filling the yytext buffer in gram.y with no overflow checking.
I've added some checking in R-devel, so these now give

> parse(text=paste(rep("x",50000),collapse=""))
Error in parse(text = paste(rep("x", 50000), collapse = "")) : 
	input buffer overflow
> formula(paste("y~",paste(rep("x",50000),collapse="")))
Error in parse(text = x) : input buffer overflow

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From luke at stat.uiowa.edu  Sat Aug  9 20:18:44 2003
From: luke at stat.uiowa.edu (luke@stat.uiowa.edu)
Date: Sat Aug  9 19:18:33 2003
Subject: [Rd] segmentation fault: formula() with long variable names
	(PR#3704)
Message-ID: <200308091718.h79HIiJH000350@pubhealth.ku.dk>

On Thu, 7 Aug 2003 jerome@hivnet.ubc.ca wrote:

> R version: 1.7.1
> OS: Red Hat Linux 7.2
> 
> In this example, I would expect an error for the overly long variable 
> name. This is always reproducable for me.
> 
> > formula(paste("y~",paste(rep("x",50000),collapse="")))
> Segmentation fault
> 
> Sincerely,
> Jerome Asselin

The problem seems to be in parse, which formula.default calls:

> parse(text=paste(rep("x",50000),collapse=""))
Segmentation fault (core dumped)

We were filling the yytext buffer in gram.y with no overflow checking.
I've added some checking in R-devel, so these now give

> parse(text=paste(rep("x",50000),collapse=""))
Error in parse(text = paste(rep("x", 50000), collapse = "")) : 
	input buffer overflow
> formula(paste("y~",paste(rep("x",50000),collapse="")))
Error in parse(text = x) : input buffer overflow

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From A.Buness at dkfz-heidelberg.de  Mon Aug 11 11:15:42 2003
From: A.Buness at dkfz-heidelberg.de (A.Buness@dkfz-heidelberg.de)
Date: Mon Aug 11 10:15:18 2003
Subject: [Rd] (PR#3690) wish in more detail
Message-ID: <200308110815.h7B8FgJH008268@pubhealth.ku.dk>

I will try to clarify my wish regarding apply.

My wish is related to the dimension attribute of an object.
Of course by the nature of apply the dimension may change,
but as you can see in my artifical examples below the same 
apply-operation applied to a matrix does behave differently 
to that respect.

> dim(matrix(0,nrow=1,ncol=1))
[1] 1 1
> dim(apply(matrix(0,nrow=1,ncol=1),1,function(x) return(x)))
NULL


> dim(matrix(0,nrow=2,ncol=1))
[1] 2 1
> apply(matrix(0,nrow=2,ncol=1),1,function(x) return(x))
[1] 0 0
> dim(apply(matrix(0,nrow=2,ncol=1),1,function(x) return(x)))
NULL


> dim(matrix(0,nrow=1,ncol=2))
[1] 1 2
> dim(apply(matrix(0,nrow=1,ncol=2),1,function(x) return(x)))
[1] 2 1


In these examples I would expect "matrix-dimensions" for 
all cases instead of no dimensions at all in the first
two cases. A follow up apply-operation (expecting a matrix 
like object will fail) and programming is laborious.
This is the reason why I am asking for an extension
of apply like "drop=FALSE" as it exists for subsetting 
of arrays.

From tplate at blackmesacapital.com  Mon Aug 11 10:33:15 2003
From: tplate at blackmesacapital.com (Tony Plate)
Date: Mon Aug 11 17:33:10 2003
Subject: [Rd] Wish (PR#3690)
In-Reply-To: <200308081350.h78DoTJH023394@pubhealth.ku.dk>
Message-ID: <5.2.1.1.2.20030808154210.046f99c8@mailhost.blackmesacapital.com>

When I want apply() to always return a matrix, no matter whether the 
returned value from the applied function is a single value or a 
multi-element vector, I often use rbind() or cbind() along the lines of the 
following:

 > # Some example data:
 > x <- rbind(1:3,7:9)
 > x
      [,1] [,2] [,3]
[1,]    1    2    3
[2,]    7    8    9

 > # The problem -- different shaped result depending on whether the 
applied function returns a single value or a matrix:
 > apply(x, 1, min)
[1] 1 7
 > apply(x, 1, c)
      [,1] [,2]
[1,]    1    7
[2,]    2    8
[3,]    3    9
 >

 > # A solution:
 > do.call("rbind", unlist(apply(x, 1, function(row) list(row)), rec=F))
      [,1] [,2] [,3]
[1,]    1    2    3
[2,]    7    8    9
 > do.call("rbind", unlist(apply(x, 1, function(row) list(min(row))), rec=F))
      [,1]
[1,]    1
[2,]    7
 >
 > # Beware that the above manner of calling apply() can preclude some 
potential optimizations that could otherwise be performed by the 
implementation of apply() (but, as far as I am aware, these are not 
performed in the current version of R).

There would be of course many other ways of ensuring that your result is of 
a particular shape, some possibly more efficient, e.g., using matrix() with 
the appropriate nrow or ncol arguments.

It would be difficult to add any new arguments to apply() because apply() 
passes arguments it doesn't recognize down the supplied function.  If a new 
argument were added to apply(), especially one with a common name like 
drop, that could break existing code that depended on that argument being 
passed to the applied function.  It would probably make more sense to add 
to the apply() family a new function that was designed to work in a regular 
way with arrays with any number of dimensions, and I'm sure there would be 
many opinions on what features that function should have (I would argue 
that it should preserve the ordering of dimensions so that, for instance, 
the call analogous to apply(x, 1, c) returned x rather than the transpose 
of x.)

-- Tony Plate

At Friday 03:50 PM 8/8/2003 +0200, a.buness@dkfz.de wrote:
>Full_Name: Andreas Buness
>Version: 1.7.1
>OS: Unix
>Submission from: (NULL) (193.174.53.122)
>
>
>I would like to ask you to enhance the apply function
>with an option drop=FALSE similar to the one existing
>for subsetting of arrays. Or any other mechanism to get
>control on the dimensionality of an object resulting
>from an apply call. This could facilitate more robust
>programming.
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From saikat at stat.wisc.edu  Mon Aug 11 13:23:10 2003
From: saikat at stat.wisc.edu (Saikat DebRoy)
Date: Mon Aug 11 18:23:09 2003
Subject: [Rd] An inconsistency with promise in attributes
Message-ID: <19416FD2-CC18-11D7-95DA-0003931A3C9E@stat.wisc.edu>

When an attribute is a delayed expression sometimes it is not forced 
when it is extracted.

 > x <- list()
 > attr(x, "p") <- delay(1)
 > x
list()
attr(,"p")
<promise: 0x11e4bb8>
 > val <- attr(x, "p")
 > val
[1] 1
 > attr(x, "p")
<promise: 0x11e4bb8>

I am not quite sure whether the above is a bug or not but I think the 
following is a bug - a promise is supposed to give its value once 
evaluated!

 > eval(attr(x, "p"))
<promise: 0x11e4bb8>

From luke at stat.uiowa.edu  Mon Aug 11 14:26:57 2003
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Mon Aug 11 20:26:32 2003
Subject: [Rd] An inconsistency with promise in attributes
In-Reply-To: <19416FD2-CC18-11D7-95DA-0003931A3C9E@stat.wisc.edu>
Message-ID: <Pine.LNX.4.44.0308111319190.1863-100000@itasca2.stat.uiowa.edu>

On Mon, 11 Aug 2003, Saikat DebRoy wrote:

> When an attribute is a delayed expression sometimes it is not forced 
> when it is extracted.
> 
>  > x <- list()
>  > attr(x, "p") <- delay(1)
>  > x
> list()
> attr(,"p")
> <promise: 0x11e4bb8>
>  > val <- attr(x, "p")
>  > val
> [1] 1
>  > attr(x, "p")
> <promise: 0x11e4bb8>
> 
> I am not quite sure whether the above is a bug or not

Promises are not forced when retrieving them from a data structure. I
don't think this is a bug (though I don't think the semantics of user
level access to promises are exactly cast in stone).

> but I think the 
> following is a bug - a promise is supposed to give its value once 
> evaluated!
>
>  > eval(attr(x, "p"))
> <promise: 0x11e4bb8>

This should probably be considered a bug in do_eval (internal eval
would force the promise).  I'd be careful fixing it though as it might
break other things.

Promises are really intended to support lazy evaluation and work best
if they are stored as values of variables in environments.  I'm not
sure I would consider other uses reliable in the long run.

Best,

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ripley at stats.ox.ac.uk  Mon Aug 11 20:40:51 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug 11 20:40:34 2003
Subject: [Rd] An inconsistency with promise in attributes
In-Reply-To: <Pine.LNX.4.44.0308111319190.1863-100000@itasca2.stat.uiowa.edu>
Message-ID: <Pine.LNX.4.44.0308111935100.15021-100000@gannet.stats>

On Mon, 11 Aug 2003, Luke Tierney wrote:

> On Mon, 11 Aug 2003, Saikat DebRoy wrote:
> 
> > When an attribute is a delayed expression sometimes it is not forced 
> > when it is extracted.
> > 
> >  > x <- list()
> >  > attr(x, "p") <- delay(1)
> >  > x
> > list()
> > attr(,"p")
> > <promise: 0x11e4bb8>
> >  > val <- attr(x, "p")
> >  > val
> > [1] 1
> >  > attr(x, "p")
> > <promise: 0x11e4bb8>
> > 
> > I am not quite sure whether the above is a bug or not
> 
> Promises are not forced when retrieving them from a data structure. I
> don't think this is a bug (though I don't think the semantics of user
> level access to promises are exactly cast in stone).

I noticed that ?delay says

     A _promise_ to evaluate the expression. The value which is
     returned by 'delay' can be assigned without forcing its
     evaluation, but any further accesses will cause evaluation.

and I take that to mean that printing an expression should force promises.
(Not that the help page is definitive, but still I've wondered before why 
print() did not force promises.)

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jmc at research.bell-labs.com  Mon Aug 11 18:03:14 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Mon Aug 11 23:03:58 2003
Subject: [Rd] s4 methods and base
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>
Message-ID: <3F380492.ED19612C@research.bell-labs.com>

"Marsland, John" wrote:
> 
> I'm sure that many people are in the same position as me in that they are
> trying to write packages and code that is vaguely "future proof".
> 
> Would it be possible to get some guidance on how the R-core team see the
> evolution of the "base" package with regard to s4 methods.
> 
> There seem to be quite a lot of inconsistencies between s3 and s4 methods
> and classes currently and this (I'm sure) is only to be expected in a period
> of transition. eg POSIXlt vs POSIXt and POSIXct. And there seem like dozens
> of print methods to convert - it's not an enviable task and I'm sure it will
> take time! ... if indeed you do see R being purged of s3 by some point in
> the future.
> 
> But I think it would be helpful if there was some general guidance in terms
> of the direction R is going?

Your concerns are reasonable, and deserve some thoughtful discussion
from the community.  r-devel is a good place to start.

The topic is not really S4 methods and base, but what S4 methods and
classes imply about S3 methods and classes.  (The S4 methods and classes
are not in package base, and the overall drift of thinking at the moment
is not towards adding to base, but if anything considering unbundling of
some material from base.)

So your request might be rephrased as asking for advice to owners of
software that currently use S3 methods and classes.

There is no proposal to make S3 methods defunct in the forseeable
future.  Owners of existing code that uses them should not feel
pressured to rewrite the code, solely to keep the code working.

It's technically true that existing S3 methods software can just ignore
the existence of S4 methods and classes, at least under some
circumstances.  But maintainers of software using S3 methods and classes
might want to consider conversions or partial conversions, when and if
they decide to revise the software.  

Similarly, the methods package COULD simply have ignored existing S3
classes.  There would then be no "inconsistencies" because S3 classes
are not "classes" at all in the S4 sense: there is no definition for
them, only objects that contain the class name in their "class"
attribute. But  in fact the methods pacakge provides some heuristic
mapping of "old classes" into new classes.  It will be useful to get
feedback if the mapping is not right in specific examples.

To summarize the situation so far:

1.  If S3 classes are not defined as S4 classes, no methods can be
written for S4 generic functions for them, and objects from these
classes cannot be slots in S4 classes.  So some attempt to link the two
seemed worthwhile.

2.  In the methods package, an attempt was made to map known S3 classes
in the R code in base into S4 classes, reflecting S3 inheritance, so
that existing classes could be used for methods and slots.

Here's how that was done:

An object using S3 methods can have one or more strings in its class
attribute.  Heuristically, the first of these strings is interpreted as
"the" class of the object.  Subsequent strings are classes which the
first class inherits from--"superclasses" of the first class, in common
terminology.  (See section A.5 of the "Statistical Models in S" book, pp
463-467.)

With S4 classes, every object has a single class, with an explicit
definition.  That class can have superclasses  (defined as the classes
this class contains).  ALL objects from the class have the same single
string as the value of class(x).

The goal was to map each S3 class into an S4 class, and to infer
superclasses from places where two or more strings were used as a class
attribute.  Clearly a guessing game, because there really is no
"definition" of an S3 class.

So, for example, there appear to be objects with class attribute
c("ordered", "factor"), meaning that the object has main class "ordered"
but inherits from "factor". This gets mapped into S4 classes:

--------------
R> getClass("ordered")
Virtual Class

No Slots, prototype of class "NULL"

Extends: 
Class "factor", directly
Class "oldClass", by class "factor"
R> getClass("factor")
Virtual Class

No Slots, prototype of class "NULL"

Extends: "oldClass"

Known Subclasses: "ordered"
----------------

Both classes are "virtual" in the S4 sense, because you can't say
new("ordered"), and you can't say that because we haven't tried to
legislate what "slots" objects from any of these classes have.  And an
object from a non-virtual S4 class will have a single string as its
class, meaning that S3 inheritance would cease to work.

Undoubtedly, some existing classes were missed and/or misinterpreted. 
Feedback on these (as in your second e-mail) will be  helpful.  Yes, it
looks as if POSIXlt slipped through the cracks, because there wasn't any
R code that assigned that as a class.

As for the relation of the POSIX* classes:  Your interpretation (in your
second e-mail) sounds reasonable--that POSIXt is a superclass to both
POSIXlt and POSIXct.  Unfortunately both the literal inerpretation of
the documentation and the code itself seem to contradict that.  There
are several instances of expressions such as:
        class(z) <- c("POSIXt", "POSIXct")
This says the opposite:  that POSIXct is a superclass of POSIXt.  There
doesn't seem to be any code that links POSIXlt to POSIXt.



3. Anyway, to get back to some general suggestions.  The heuristic
mapping in the methods package has to be just a stop-gap.  We should try
to fix errors and omissions, but as noted, we can't push it much further
at least for objects with more than one string in their class
attribute.  And there are several examples that just can't be included,
because objects start with the same class string, but then follow that
with DIFFERENT superclass strings.  (The use of "aov" and "maov" seems
to be of this form.) No single mapping to S4 classes can capture this
behavior explicitly.

There seem to be some examples where the S3 inheritance wasn't
understood or was used in a way inconsistent with ANY S4 class
structure.

A better solution in the long run is to try to convert S3 classes to
non-virtual S4 classes, where possible.

Although owners of S3 class software shouldn't feel threatened, they
might consider conversions, perhaps when revising the software for other
reasons:

 - classes that don't have multiple strings in the class attribute can
often just be converted to a non-virtual S4 class, so long as objects
always have the same attributes.  Attributes go into slots (the slot
must have some specified class, but there are ways to allow some
variation in the actual type of data in the slot).  S3 methods can
generally stay unchanged.

 - classes with multiple strings can also be converted, again if they
have consistent attributes.  In this case, DIRECT S3 methods (those
dispatching from the first string) are OK, but INHERITED S3 methods are
not, so some conversion to S4 methods may be needed.

 - classes that have inconsistent superclasses from one object to
another may just not be convertible, but it's worth looking at examples.

When conversion or re-design is feasible, it's likely worthwhile in the
long run. 

Regards,
 John Chambers

 

> 
> For my own part I am very impressed with the power of the s4 methods and the
> functional nature of the language. But there are some comparisons with (say)
> Python that would make it even better. Many of these relate to the base
> package and the very diverse collection of demos, stats, dates and file
> handling etc... are there plans to break this up so as to make the
> instruction set smaller (an obvious use of s4 methods) and the whole
> language more light-weight and like a scripting language. Others seem to be
> thinking in this direction with the addition of "import" and namespaces, but
> more detail (or a pointer towards it if it exists!) would be helpful.
> 
> Regards,
> 
> John Marsland
> 
> **********************************************************************
> This is a commercial communication from Commerzbank AG.\ \ T...{{dropped}}
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From jerome at hivnet.ubc.ca  Tue Aug 12 01:09:48 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Tue Aug 12 00:09:24 2003
Subject: [Rd] NA's in eigen(), La.eigen() (PR#3723)
Message-ID: <200308112209.h7BM9mJH015838@pubhealth.ku.dk>

R version: 1.7.1
OS: Red Hat Linux 7.2

Hello,

eigen() and La.eigen() seem to have inconsistent behavior in cases where 
NA's are present in the input matrix. In some cases, eigen() and 
La.eigen() seem to get stuck in an infinite loop. See examples below.

I would expect something like an error message whenever NA's are present 
in the input matrix.

Sincerely,
Jerome Asselin

######################
La.eigen(matrix(c(1,0,0,1),2,2))                   #Works
La.eigen(matrix(c(1,NA,0,1),2,2))                  #Returns something
La.eigen(matrix(c(1,0,0,NA),2,2))                  #Returns something
La.eigen(matrix(c(1,NA,NA,1),2,2))                 #Infinite loop (?)
La.eigen(matrix(c(1,NA,NA,1),2,2),method="dsyev")  #All NA's
eigen(matrix(c(1,NA,NA,1),2,2))                    #Infinite loop (?)
eigen(matrix(c(1,NA,NA,1),2,2),EISPACK=T)          #Returns Error

#Illustration of what happens over 32 dimensions
mat <- diag(32); mat[2,2] <- NA
system.time(eigen(mat))             #Returns something
mat <- diag(33); mat[2,2] <- NA
system.time(eigen(mat))             #Infinite loop (?)
mat <- diag(33); mat[1,1] <- NA
system.time(eigen(mat))             #Returns something
mat <- diag(33); mat[2,2] <- NA
system.time(eigen(mat,EISPACK=T))   #Returns Error
######################


-- 

Jerome Asselin (Jrme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

From jago at mclink.it  Tue Aug 12 09:39:46 2003
From: jago at mclink.it (Stefano Iacus)
Date: Tue Aug 12 08:39:25 2003
Subject: [Rd] Re: [R-SIG-Mac] cleanest build I can think of
In-Reply-To: <5226EA02-CC84-11D7-874B-000393BDE1EC@hsph.harvard.edu>
Message-ID: <C3C6CCA2-CC8F-11D7-861F-003065CC4CB8@mclink.it>

Thanks Byron, I assume you use new Devel Tool updates and nothing from 
fink?
Can other people with new dev tools check this (for example Jan?)
It would be nice to update the instuction page (and R-admin in the 
future)

some general notes:
1. there is no need to configure with --without-x as X11 can now be 
used from inside RAqua
2. please use R-devel and not R-Sig-Mac as we will soon close this list 
(from R-1.8.0)
3. me and Thomas have implemented many new code to the Aqua GUI. If you 
rsync today and reinstall RAqua you'll see these changes
4. tcltk seems to work again but only after launching tkStartGUI()

stefano

On Marted?, ago 12, 2003, at 07:17 Europe/Rome, Byron Ellis wrote:

> I've recently had the 'opportunity' (if you can call a dead hard drive 
> that) to rebuild my iBook from scratch and I thought I'd share my 
> 'building R with minimum changes' :-)
>
> Note: I use bash not tcsh, I don't remember if this syntax works
>
> FPICFLAGS=-fno-common LDFLAGS=-lcc_dynamic ./configure 
> --enable-R-shlib --with-aqua --without-x --with-blas='-framework 
> vecLib' --with-lapack
> make CFLAGS+=-D__DEBUGGING__
>
> This gets rid of the devQuartz.c building problems caused by 
> Debugging.h and gets configure to run. Everything else is according to 
> Stefano's website. Obviously you'd need to make modifications for 
> Tcl/Tk and recommended packages and such, but this gets me up and 
> running without having to modify files (which is good for those of us 
> syncing from R-sync :-))
>
> _______________________________________________
> R-SIG-Mac mailing list
> R-SIG-Mac@stat.math.ethz.ch
> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>

From hothorn at ci.tuwien.ac.at  Tue Aug 12 13:10:46 2003
From: hothorn at ci.tuwien.ac.at (Torsten Hothorn)
Date: Tue Aug 12 12:10:23 2003
Subject: [Rd] tracing nonstandardGenericFunction
Message-ID: <Pine.LNX.3.96.1030812120527.31272D-100000@thorin.ci.tuwien.ac.at>


Hi, 

how can one trace a nonstandardGenericFunction,
especially "initialize"? An example:

setClass("dummy", representation(a = "numeric"))

setMethod("initialize", "dummy", 
          function(.Object, a = 2) { ### I want to trace this function
              .Object@a <- a
              .Object
          })

setMethod("show", "dummy", function(object) print(object@a))

b <- new("dummy", a = 3)

trace("show", browser, signature = "dummy") ### trace method "show" to
                                            ### class "dummy"

show(b) ### works fine

trace("initialize", browser, signature = "dummy")

R> b <- new("dummy") ### does not trace the function of interest ...
Tracing initialize(value, ...) on entry 
Called from: initialize(value, ...)

Best,

Torsten

From bellis at hsph.harvard.edu  Tue Aug 12 12:49:27 2003
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Tue Aug 12 17:49:14 2003
Subject: [Rd] Re: [R-SIG-Mac] cleanest build I can think of
In-Reply-To: <C3C6CCA2-CC8F-11D7-861F-003065CC4CB8@mclink.it>
Message-ID: <8DA8ECD5-CCDC-11D7-874B-000393BDE1EC@hsph.harvard.edu>

Yes, gcc-3.3 (and the matching g77-3.3) and local builds of everything 
(well, almost I'm pretty sure my jpeglib and pnglib came from my TeX 
installation).

Also, upon reflection its probably better to change CPPFLAGS to 
'-I/usr/local/include -D__DEBUGGING__' rather than CFLAGS since 
CPPFLAGS is included in the .c.d rule and CFLAGS is not. I must have 
already had the .d files sitting around.


On Tuesday, August 12, 2003, at 02:39 AM, Stefano Iacus wrote:

> Thanks Byron, I assume you use new Devel Tool updates and nothing from 
> fink?
> Can other people with new dev tools check this (for example Jan?)
> It would be nice to update the instuction page (and R-admin in the 
> future)
>
> some general notes:
> 1. there is no need to configure with --without-x as X11 can now be 
> used from inside RAqua
> 2. please use R-devel and not R-Sig-Mac as we will soon close this 
> list (from R-1.8.0)
> 3. me and Thomas have implemented many new code to the Aqua GUI. If 
> you rsync today and reinstall RAqua you'll see these changes
> 4. tcltk seems to work again but only after launching tkStartGUI()
>
> stefano
>
> On Marted?, ago 12, 2003, at 07:17 Europe/Rome, Byron Ellis wrote:
>
>> I've recently had the 'opportunity' (if you can call a dead hard 
>> drive that) to rebuild my iBook from scratch and I thought I'd share 
>> my 'building R with minimum changes' :-)
>>
>> Note: I use bash not tcsh, I don't remember if this syntax works
>>
>> FPICFLAGS=-fno-common LDFLAGS=-lcc_dynamic ./configure 
>> --enable-R-shlib --with-aqua --without-x --with-blas='-framework 
>> vecLib' --with-lapack
>> make CFLAGS+=-D__DEBUGGING__
>>
>> This gets rid of the devQuartz.c building problems caused by 
>> Debugging.h and gets configure to run. Everything else is according 
>> to Stefano's website. Obviously you'd need to make modifications for 
>> Tcl/Tk and recommended packages and such, but this gets me up and 
>> running without having to modify files (which is good for those of us 
>> syncing from R-sync :-))
>>
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> https://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>>
>
>

From jmc at research.bell-labs.com  Tue Aug 12 13:11:27 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Aug 12 18:11:47 2003
Subject: [Rd] tracing nonstandardGenericFunction
References: <Pine.LNX.3.96.1030812120527.31272D-100000@thorin.ci.tuwien.ac.at>
Message-ID: <3F3911AF.556937DD@research.bell-labs.com>

Torsten Hothorn wrote:
> 
> Hi,
> 
> how can one trace a nonstandardGenericFunction,
> especially "initialize"? An example:
> 
> setClass("dummy", representation(a = "numeric"))
> 
> setMethod("initialize", "dummy",
>           function(.Object, a = 2) { ### I want to trace this function
>               .Object@a <- a
>               .Object
>           })

Your problem is not with nonstandard generic functions.  It comes from
giving setMethod a function whose argument list is NOT identical to the
argument list for the generic function.

In this case, your method has formal arguments (.Object, a), but

R> formalArgs(initialize)
[1] ".Object" "..."    

This is allowed, but technically the method MUST  have the same
arguments as the generic.  So the mechanism used is to turn the supplied
method into a function, .local, in the actual method, and to call this
function to re-match arguments.  Tracing the method traces the method,
not the .local function.

In the future, we can likely make tracing work in the intuitive way for
such methods.

Meanwhile, you need to set things up yourself, by using an explicit
function and having the method call that function.

R> initDummy <- function(.Object, a = 2) {
+              .Object@a <- a
+              .Object
+          }
R> setMethod("initialize", "dummy", function(.Object,
...)initDummy(.Object, ...))
[1] "initialize"
R> trace(initDummy, browser, exit = browser)
[1] "initDummy"
R> new("dummy", 1.5)
Tracing initDummy(.Object, ...) on entry 
Called from: initDummy(.Object, ...)
Browse[1]> objects()
[1] "a"
Browse[1]> a
[1] 1.5



> 
> setMethod("show", "dummy", function(object) print(object@a))
> 
> b <- new("dummy", a = 3)
> 
> trace("show", browser, signature = "dummy") ### trace method "show" to
>                                             ### class "dummy"
> 
> show(b) ### works fine
> 
> trace("initialize", browser, signature = "dummy")
> 
> R> b <- new("dummy") ### does not trace the function of interest ...
> Tracing initialize(value, ...) on entry
> Called from: initialize(value, ...)
> 
> Best,
> 
> Torsten
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From pgilbert at bank-banque-canada.ca  Tue Aug 12 14:02:56 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Tue Aug 12 19:04:39 2003
Subject: [Rd] s4 methods and base
In-Reply-To: <3F380492.ED19612C@research.bell-labs.com>
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>
	<3F380492.ED19612C@research.bell-labs.com>
Message-ID: <3F391DC0.4010701@bank-banque-canada.ca>

John

> But maintainers of software using S3 methods and classes
> might want to consider conversions or partial conversions, when and if
> they decide to revise the software.  

I'm curious about the logistics of a partial conversion. Initially I 
think I will avoid classes that inherit from other classes. But what 
general approach would you suggest for classes that have an object of 
another class in their structure. Can the larger object be an S4 class 
and the contained object an S3 class, or would you start the other way 
around, or is it not possible?

Also, would you suggest converting to namespaces before or after 
converting to S4 classes?


> With S4 classes, every object has a single class, with an explicit
> definition.  That class can have superclasses  (defined as the classes
> this class contains).

(newbie question) Are you using "contains" as a synonym for "extends," 
meaning that many classes can contain the same superclass, or is this 
intending to indicate that the logic is the reverse of (my understanding 
of) S3 logic?


>  - classes that don't have multiple strings in the class attribute can
> often just be converted to a non-virtual S4 class, so long as objects
> always have the same attributes.  Attributes go into slots (the slot
> must have some specified class, but there are ways to allow some
> variation in the actual type of data in the slot).

(newbie question) I often use attributes to stick "extra" information on 
an object, like the date of retrieval from a database onto a matrix. If 
the matrix is an S4 matrix class, does this mean that I have to define a 
new class in S4 that extends the matrix class in order to stick on extra 
information?

Thanks,
Paul Gilbert

From p.dalgaard at biostat.ku.dk  Tue Aug 12 20:58:45 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Tue Aug 12 21:58:48 2003
Subject: [Rd] 1.8.0 schedule
Message-ID: <x2y8xyd4k8.fsf@biostat.ku.dk>

For the benefit of package maintainers (and others) we thought it
would be a good idea to publish the release schedule well ahead this
time. The plan follows below. Not everyone in R-core has had a chance
to complain, but I'm off to the ISI tomorrow, so I thought it had
better be done now. 

Platform testing has been a major problem with the previous releases.
For some reason, people with exotic platforms tended to report
problems just *after* the official release when we need to wait
several months before publishing a revised version. This happened even
though we had set a testing period of a total of three weeks,
dedicated to catching this kind of problem, but the only effect seems
to have been to leave developers blocked for the duration... This time
the feature freeze period will be shorter, but to compensate we plan
to release a series of alpha versions ahead of the feature freeze.

        Peter D.


And here's the schedule:

Aug 12:

    Announce schedule on R-devel

Sep 10:

    Declare start of release process. The build process is assumed to
    be essentially in place at this time.

    There is a "grand feature" freeze (minor tweaks can be applied,
    but no wholesale restructuring or API changes). Notice that
    wrapping a package in a namespace is a grand feature, and so is
    meddling with the event loop.

    Package maintainers should start adapting to any changes in base.

    Start making R-1.8.0alpha.tgz packages automatically available.

Sep 24:

    Feature freeze, simultaneously on base and recommended packages.
    It is assumed that all recommended packages pass their checks at
    this point. The API should not be touched.

    Start making R-1.8.0beta.tgz packages automatically available.


Oct 1:

    Code freeze. Only critical and/or trivial bugs fixed from this
    time onwards. Configure/make should only be touched in
    emergencies.


Oct 8:

    Release.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From brahm at alum.mit.edu  Wed Aug 13 01:05:54 2003
From: brahm at alum.mit.edu (brahm@alum.mit.edu)
Date: Wed Aug 13 00:05:29 2003
Subject: [Rd] rowsum() may return a vector instead of a matrix (PR#3737)
Message-ID: <200308122205.h7CM5sJH026811@pubhealth.ku.dk>

If all rows are in the same "group", rowsum() returns a vector instead of a
(1xN) matrix, contrary to documentation:

R> print(z <- rowsum(matrix(1:12, 3,4), rep("x",3)))
   [1]  6 15 24 33
R> dim(z)
   NULL

It worked correctly in version 1.4.0 but was broken by version 1.6.1.  I'm
currently using 1.7.1 under Solaris 2.8.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.8
 arch = sparc
 os = solaris2.8
 system = sparc, solaris2.8
 status = 
 major = 1
 minor = 7.1
 year = 2003
 month = 06
 day = 16
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:obsi, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
-- 
                              -- David Brahm (brahm@alum.mit.edu)

From jmc at research.bell-labs.com  Tue Aug 12 19:26:24 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Wed Aug 13 00:26:34 2003
Subject: [Rd] s4 methods and base
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>
	<3F380492.ED19612C@research.bell-labs.com>
	<3F391DC0.4010701@bank-banque-canada.ca>
Message-ID: <3F396990.99F9E536@research.bell-labs.com>

Paul Gilbert wrote:
> 
> John
> 
> > But maintainers of software using S3 methods and classes
> > might want to consider conversions or partial conversions, when and if
> > they decide to revise the software.
> 
> I'm curious about the logistics of a partial conversion. Initially I
> think I will avoid classes that inherit from other classes. But what
> general approach would you suggest for classes that have an object of
> another class in their structure. Can the larger object be an S4 class
> and the contained object an S3 class, or would you start the other way
> around, or is it not possible?

I would think it's wise to imagine converting all the functions in an S3
inheritance "tree" at the same time.

The basic point is that ordinary formal classes have to have an
unambiguous "structure"; that is, known slots each having a known class.

So the S3 class can't be extended by an S4 class, since the latter
wouldn't then have a known structure.

The other direction is technically feasible, but it feels like a bad
idea in general.

> 
> Also, would you suggest converting to namespaces before or after
> converting to S4 classes?

At the moment, they don't work together, so it really amounts to
choosing which matters most to a given project.

The hope is to make them work together for 1.8, but that's still a hope
rather than a certainty.

> 
> > With S4 classes, every object has a single class, with an explicit
> > definition.  That class can have superclasses  (defined as the classes
> > this class contains).
> 
> (newbie question) Are you using "contains" as a synonym for "extends,"

Yes, roughly.

> meaning that many classes can contain the same superclass, or is this
> intending to indicate that the logic is the reverse of (my understanding
> of) S3 logic?

The S language terminology "Class B extends class A" is analogous to
"Class A is a superclass of class B" in other languages.  Saying "Class
B contains class A" is a special form of "extends" (the most common
one), where B has all the slots of A, and perhaps others as well.  The
setIs() function allows a more general version of "extends" that doesn't
depend on the data structures being compatible.

> 
> >  - classes that don't have multiple strings in the class attribute can
> > often just be converted to a non-virtual S4 class, so long as objects
> > always have the same attributes.  Attributes go into slots (the slot
> > must have some specified class, but there are ways to allow some
> > variation in the actual type of data in the slot).
> 
> (newbie question) I often use attributes to stick "extra" information on
> an object, like the date of retrieval from a database onto a matrix. If
> the matrix is an S4 matrix class, does this mean that I have to define a
> new class in S4 that extends the matrix class in order to stick on extra
> information?

A good question, which points out some of the tradeoffs involved.  Yes,
if you want to work in terms of ordinary formal classes, the set of
slots (the "structure") is determined by the class, not by the
individual object.

It's fundamental to most formal class systems that objects from a class
have a known structure, in our case meaning that the slots are fixed as
to name and class.  This is indeed more restrictive than the traditional
S approach (dating back well before "white book" classes) of attaching
attributes, on a per-object basis, while retaining the underlying
"structure" (a matrix, as in your example).

It's a basic difference, and the formality has been adopted in many
languages because it makes possible operations that a less formal system
can't do, especially in terms of automating some computations.  Two
examples:  an object can be tested for being a valid member of a class;
and methods can be generated automatically to coerce an object to a
superclass, or to replace the part of an object that corresponds to a
superclass.

There are of course ways to add general annotation to a class, e.g., by
having a slot for miscellany (that slot might be a named list).

Regards,
 John

> 
> Thanks,
> Paul Gilbert
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From tlumley at u.washington.edu  Tue Aug 12 17:54:52 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Aug 13 01:55:29 2003
Subject: [Rd] rowsum() may return a vector instead of a matrix (PR#3737)
In-Reply-To: <200308122205.h7CM5sJH026811@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0308121653290.63600-100000@homer40.u.washington.edu>

On Wed, 13 Aug 2003 brahm@alum.mit.edu wrote:

> If all rows are in the same "group", rowsum() returns a vector instead of a
> (1xN) matrix, contrary to documentation:
>

Yes, and it appears to be deliberate since rowsum.default() ends with
drop(rval), though I don't remember why it was this way.

Is there a strong preference for changing the function vs changing the
documentation?

	-thomas

From dmurdoch at pair.com  Tue Aug 12 23:01:16 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed Aug 13 04:04:14 2003
Subject: [Rd] 1.8.0 schedule
In-Reply-To: <x2y8xyd4k8.fsf@biostat.ku.dk>
References: <x2y8xyd4k8.fsf@biostat.ku.dk>
Message-ID: <1e6jjvgbqf2a2c8or2r522dnrp0vq89vgv@4ax.com>

On 12 Aug 2003 22:05:59 +0200, Peter Dalgaard BSA
<p.dalgaard@biostat.ku.dk> wrote:


>Sep 10:
>
>    Declare start of release process. The build process is assumed to
>    be essentially in place at this time.
>
>    There is a "grand feature" freeze (minor tweaks can be applied,
>    but no wholesale restructuring or API changes). Notice that
>    wrapping a package in a namespace is a grand feature, and so is
>    meddling with the event loop.
>
>    Package maintainers should start adapting to any changes in base.
>
>    Start making R-1.8.0alpha.tgz packages automatically available.
>
>Sep 24:
>
>    Feature freeze, simultaneously on base and recommended packages.
>    It is assumed that all recommended packages pass their checks at
>    this point. The API should not be touched.
>
>    Start making R-1.8.0beta.tgz packages automatically available.

If I hear no objections from CRAN I'll start putting binary builds in
the Windows download area.  They'll be called rw1080alpha.exe and
rw1080beta.exe, and won't be refreshed daily, but will be refreshed as
frequently as I can manage.

If this causes a bandwidth problem on CRAN or mirrors I'll revert to
putting them on my own web page
<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel/>
as I currently do (irregularly) with development builds.

Duncan Murdoch

From bart.rossel at anu.edu.au  Wed Aug 13 05:07:27 2003
From: bart.rossel at anu.edu.au (bart.rossel@anu.edu.au)
Date: Wed Aug 13 04:07:02 2003
Subject: [Rd] scan file error (PR#3738)
Message-ID: <200308130207.h7D27RJH027580@pubhealth.ku.dk>

Full_Name: Bart
Version: 1.7.1
OS: XP
Submission from: (NULL) (150.203.41.62)


When trying to load microarray slides (gpr format) into R 1.7.1, I get the
following error message

Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  :

        line 1057 did not have 43 elements

I have been able to load the files on another computer before including an XP
machine. I have also tried to load a different set of gpr files, that also
worked on an earlier version, but still get the same error message.
Using an earlier version of R (1.3.1)I did not have these problems.
Does anyone know of compatibilty issues between R 1.7.1 and Windows XP?

Thanks,

Bart

From deleeuw at stat.ucla.edu  Tue Aug 12 20:44:13 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Wed Aug 13 04:43:49 2003
Subject: [Rd] RAqua
Message-ID: <063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>

Small things, mostly.

1. Buildproblem. Well-known and annoying. Build fails if debugging is on
(which is the default) because Debugging.h breaks devQuartz.c
compiles. If debugging is switched off on the command line or in
the environment, then devQuartz.c builds, but aquaconsole.c does
not compile, because it needs Debugging.h. I do not want to edit
Apple system files, and not files in the R distribution either.

2. It would be useful if quartz devices could be opened from a
menu.

3. Maybe a primary prompt in the input window would be useful.

4. Input and output windows cannot be resized independently. I
would still vote for two separate input and output windows.

5. Interaction with Tcl/Tk is still problematic. For instance, Tcl/Tk
takes over the menubar, and if you don't use tkStartGUI() the
tk windows don't respond to mouse clicks. For instance, try
using Rcmdr. Also if you use tkStartGUI(), and AquaTk has
taken over, it creates windows (for instance for downloading CRAN
packages) without scrollbars. This is important, because Tcl/Tk
is still the only possible way of building GUI applications
from RAqua.

6. If you want to download from CRAN you select packages in
a window, and the download starts if you close the window.
That's not intuitive, there should be a separate download or go
button.

7. I thought I saw somewhere that RAqua can now open X11
devices. Mine can't.

8. Installation should be in ~/Applications, or in some other
user defined position. My /Applications only has Apple
software.

9. I see that there already is an "R Evaluate" service advertised.
Great. Doesn't work yet, though.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From dmurdoch at pair.com  Wed Aug 13 06:39:01 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Wed Aug 13 05:38:38 2003
Subject: [Rd] scan file error (PR#3738)
Message-ID: <200308130339.h7D3d1JH027818@pubhealth.ku.dk>

On Wed, 13 Aug 2003 04:07:27 +0200 (MET DST), you wrote:

>Full_Name: Bart
>Version: 1.7.1
>OS: XP
>Submission from: (NULL) (150.203.41.62)
>
>
>When trying to load microarray slides (gpr format) into R 1.7.1, I get the
>following error message
>
>Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  :
>
>        line 1057 did not have 43 elements
>
>I have been able to load the files on another computer before including an XP
>machine. I have also tried to load a different set of gpr files, that also
>worked on an earlier version, but still get the same error message.
>Using an earlier version of R (1.3.1)I did not have these problems.
>Does anyone know of compatibilty issues between R 1.7.1 and Windows XP?

What does line 1057 look like?  What did your command look like that
tried to read the file?  

Please read ?bug.report and give us the necessary information that we
can use to reproduce your problem.  If it really is a bug, we won't be
able to fix it without that.  However, chances are that in simplifying
this to an example you can post, you'll find that it's really not a
bug.

Duncan Murdoch

From ripley at stats.ox.ac.uk  Wed Aug 13 07:13:40 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug 13 07:17:35 2003
Subject: [Rd] rowsum() may return a vector instead of a matrix (PR#3737)
In-Reply-To: <Pine.A41.4.44.0308121653290.63600-100000@homer40.u.washington.edu>
Message-ID: <Pine.LNX.4.44.0308130612180.5075-100000@gannet.stats>

On Tue, 12 Aug 2003, Thomas Lumley wrote:

> On Wed, 13 Aug 2003 brahm@alum.mit.edu wrote:
> 
> > If all rows are in the same "group", rowsum() returns a vector instead of a
> > (1xN) matrix, contrary to documentation:
> >
> 
> Yes, and it appears to be deliberate since rowsum.default() ends with
> drop(rval), though I don't remember why it was this way.
> 
> Is there a strong preference for changing the function vs changing the
> documentation?

I'd change the function.  The Therneau original function of this name 
returns a 1xN matrix, and it is easier to drop() that to reinstate.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Wed Aug 13 07:58:20 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Aug 13 08:58:23 2003
Subject: [Rd] RAqua
In-Reply-To: <063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>
References: <063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>
Message-ID: <x2lltyca0t.fsf@biostat.ku.dk>

Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

> 5. Interaction with Tcl/Tk is still problematic. For instance, Tcl/Tk
> takes over the menubar, and if you don't use tkStartGUI() the
> tk windows don't respond to mouse clicks. For instance, try
> using Rcmdr. Also if you use tkStartGUI(), and AquaTk has
> taken over, it creates windows (for instance for downloading CRAN
> packages) without scrollbars. This is important, because Tcl/Tk
> is still the only possible way of building GUI applications
> from RAqua.

tkStartGUI is just a proof of concept and many parts of it are
sketchy. It doesn't create scrollbars on unix either, but you can
scroll with the middle button (now how do you do that with a single
button mouse?). It would be easy to add the scrollbar, I just don't
think this is due to bad interactions with Aqua in particular.

Starting yet another console to get Tk windows to respond is just
wrong. Presumably, the case is that nothing is running the Tk event
loop and that tkStartGUI executes a "wait variable" which runs the
loop by itself. It should be fairly easy to wedge a tk event handler
into the Aqua loop (disclaimer: I don't have access to a Mac, I'm just
assuming that Aqua works like other GUI toolkits and allows you to
define idle handlers and the like).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jago at mclink.it  Wed Aug 13 12:48:22 2003
From: jago at mclink.it (Stefano Iacus)
Date: Wed Aug 13 11:47:52 2003
Subject: [Rd] RAqua
In-Reply-To: <063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>
Message-ID: <46EF452E-CD73-11D7-B052-003065CC4CB8@mclink.it>


On Mercoled?, ago 13, 2003, at 04:44 Europe/Rome, Jan de Leeuw wrote:

> Small things, mostly.
>
> 1. Buildproblem. Well-known and annoying. Build fails if debugging is  
> on
> (which is the default) because Debugging.h breaks devQuartz.c
> compiles. If debugging is switched off on the command line or in
> the environment, then devQuartz.c builds, but aquaconsole.c does
> not compile, because it needs Debugging.h. I do not want to edit
> Apple system files, and not files in the R distribution either.

Not a small thing this one :)
I'll substitute the code inside aquaconsole & C. that conflicts with  
Debuggin.h and add then use -D__DEBUGGING__



>
> 2. It would be useful if quartz devices could be opened from a
> menu.
ok
>
> 3. Maybe a primary prompt in the input window would be useful.
>
> 4. Input and output windows cannot be resized independently. I
> would still vote for two separate input and output windows.
>
> 5. Interaction with Tcl/Tk is still problematic. For instance, Tcl/Tk
> takes over the menubar, and if you don't use tkStartGUI() the
> tk windows don't respond to mouse clicks. For instance, try
> using Rcmdr. Also if you use tkStartGUI(), and AquaTk has
> taken over, it creates windows (for instance for downloading CRAN
> packages) without scrollbars. This is important, because Tcl/Tk
> is still the only possible way of building GUI applications
> from RAqua.
>

> 6. If you want to download from CRAN you select packages in
> a window, and the download starts if you close the window.
it starts only if you check the item "install", otherwise the R session  
continues giving you a prompt.
> That's not intuitive, there should be a separate download or go
> button.
>
> 7. I thought I saw somewhere that RAqua can now open X11
> devices. Mine can't.
you should start QuartzX and use x11(display=":0")

>
> 8. Installation should be in ~/Applications, or in some other
> user defined position. My /Applications only has Apple
> software.
We can manage this through the installer probably. The problem is that  
Apple bundles seem to be too much rigid, I will think about it.




>
> 9. I see that there already is an "R Evaluate" service advertised.
> Great. Doesn't work yet, though.
emh, never implemented! It is strange you see anything as services.


> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jfox at mcmaster.ca  Wed Aug 13 09:52:21 2003
From: jfox at mcmaster.ca (John Fox)
Date: Wed Aug 13 14:50:36 2003
Subject: [Rd] RAqua
In-Reply-To: <x2lltyca0t.fsf@biostat.ku.dk>
References: <063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>
	<063284D8-CD38-11D7-9BB5-000393BB6D36@stat.ucla.edu>
Message-ID: <5.1.0.14.2.20030813084623.01f7e830@127.0.0.1>

Dear Jan and Peter,

Given Peter's explanation, setting options(Rcmdr=list(tkwait=TRUE)) before 
loading the Rcmdr package might allow the Commander to work (although it 
will disable the R command prompt while the Commander window is open). Not 
a good solution, of course.

Regards,
  John

At 09:05 AM 8/13/2003 +0200, Peter Dalgaard BSA wrote:
>Jan de Leeuw <deleeuw@stat.ucla.edu> writes:
>
> > 5. Interaction with Tcl/Tk is still problematic. For instance, Tcl/Tk
> > takes over the menubar, and if you don't use tkStartGUI() the
> > tk windows don't respond to mouse clicks. For instance, try
> > using Rcmdr. Also if you use tkStartGUI(), and AquaTk has
> > taken over, it creates windows (for instance for downloading CRAN
> > packages) without scrollbars. This is important, because Tcl/Tk
> > is still the only possible way of building GUI applications
> > from RAqua.
>
>tkStartGUI is just a proof of concept and many parts of it are
>sketchy. It doesn't create scrollbars on unix either, but you can
>scroll with the middle button (now how do you do that with a single
>button mouse?). It would be easy to add the scrollbar, I just don't
>think this is due to bad interactions with Aqua in particular.
>
>Starting yet another console to get Tk windows to respond is just
>wrong. Presumably, the case is that nothing is running the Tk event
>loop and that tkStartGUI executes a "wait variable" which runs the
>loop by itself. It should be fairly easy to wedge a tk event handler
>into the Aqua loop (disclaimer: I don't have access to a Mac, I'm just
>assuming that Aqua works like other GUI toolkits and allows you to
>define idle handlers and the like).
>
>--
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox

From brahm at alum.mit.edu  Wed Aug 13 10:38:50 2003
From: brahm at alum.mit.edu (David Brahm)
Date: Wed Aug 13 15:38:25 2003
Subject: [Rd] rowsum() may return a vector instead of a matrix (PR#3737)
References: <200308122205.h7CM5sJH026811@pubhealth.ku.dk>
	<Pine.A41.4.44.0308121653290.63600-100000@homer40.u.washington.edu>
Message-ID: <16186.16234.399615.449609@arbres1a.fmr.com>

I wrote:
> If all rows are in the same "group", rowsum() returns a vector instead of a
> (1xN) matrix, contrary to documentation:

Thomas Lumley <tlumley@u.washington.edu> replied:
> Is there a strong preference for changing the function vs changing the
> documentation?

I could live with it either way, but I will point out that the "Examples"
section implies an equivalence between:
  R> xsum <- rowsum(x, group)
and
  R> xsum2 <- tapply(x, list(group[row(x)], col(x)), sum)
  R> xsum3 <- aggregate(x, list(group), sum)
which is broken by this new behavior; xsum2 and xsum3 are (1xN) matrices.
-- 
                              -- David Brahm (brahm@alum.mit.edu)

From pgilbert at bank-banque-canada.ca  Wed Aug 13 11:06:45 2003
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Wed Aug 13 16:08:56 2003
Subject: [Rd] s4 methods and base
In-Reply-To: <3F396990.99F9E536@research.bell-labs.com>
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>		<3F380492.ED19612C@research.bell-labs.com>
	<3F391DC0.4010701@bank-banque-canada.ca>
	<3F396990.99F9E536@research.bell-labs.com>
Message-ID: <3F3A45F5.7070202@bank-banque-canada.ca>

John Chambers wrote:

>Paul Gilbert wrote:
>  
>
>>John
>>    
>>
>>>But maintainers of software using S3 methods and classes
>>>might want to consider conversions or partial conversions, when and if
>>>they decide to revise the software.
>>>      
>>>
>>I'm curious about the logistics of a partial conversion. Initially I
>>think I will avoid classes that inherit from other classes. But what
>>general approach would you suggest for classes that have an object of
>>another class in their structure. Can the larger object be an S4 class
>>and the contained object an S3 class, or would you start the other way
>>around, or is it not possible?
>>    
>>
>
>I would think it's wise to imagine converting all the functions in an S3
>inheritance "tree" at the same time.
>
There is no inheritance in the S3 sense when an object contains an 
object of another class. Am I missing something? Are you using this term 
loosely or is there necessarily inheritance in S4 when one object 
contains another object?

>
>The basic point is that ordinary formal classes have to have an
>unambiguous "structure"; that is, known slots each having a known class.
>
>So the S3 class can't be extended by an S4 class, since the latter
>wouldn't then have a known structure.
>
>The other direction is technically feasible, but it feels like a bad
>idea in general.
>
I can see that it feels bad, but it seems like the only way to do a 
partial conversion. My problem is that it is much easier to do a big 
project in small bites.

>>Also, would you suggest converting to namespaces before or after
>>converting to S4 classes?
>>    
>>
>
>At the moment, they don't work together, so it really amounts to
>choosing which matters most to a given project.
>
>The hope is to make them work together for 1.8, but that's still a hope
>rather than a certainty.
>
>  
>
>>>With S4 classes, every object has a single class, with an explicit
>>>definition.  That class can have superclasses  (defined as the classes
>>>this class contains).
>>>      
>>>
>>(newbie question) Are you using "contains" as a synonym for "extends,"
>>    
>>
>
>Yes, roughly.
>  
>
>>meaning that many classes can contain the same superclass, or is this
>>intending to indicate that the logic is the reverse of (my understanding
>>of) S3 logic?
>>    
>>
>
>The S language terminology "Class B extends class A" is analogous to
>"Class A is a superclass of class B" in other languages.  Saying "Class
>B contains class A" is a special form of "extends" (the most common
>one), where B has all the slots of A, and perhaps others as well.  The
>setIs() function allows a more general version of "extends" that doesn't
>depend on the data structures being compatible.
>
Now if I understand this correctly, and to be pedantic, one would say an 
object of class B contains and object of class A, and,  the definition 
of class B extends the definition of class A. Or, said differently,  a 
class A object is a subset of a class B object, and a class A definition 
is a superclass of a class B definition. Does that make sense?

>>> - classes that don't have multiple strings in the class attribute can
>>>often just be converted to a non-virtual S4 class, so long as objects
>>>always have the same attributes.  Attributes go into slots (the slot
>>>must have some specified class, but there are ways to allow some
>>>variation in the actual type of data in the slot).
>>>      
>>>
>>(newbie question) I often use attributes to stick "extra" information on
>>an object, like the date of retrieval from a database onto a matrix. If
>>the matrix is an S4 matrix class, does this mean that I have to define a
>>new class in S4 that extends the matrix class in order to stick on extra
>>information?
>>    
>>
>
>A good question, which points out some of the tradeoffs involved.  Yes,
>if you want to work in terms of ordinary formal classes, the set of
>slots (the "structure") is determined by the class, not by the
>individual object.
>
>It's fundamental to most formal class systems that objects from a class
>have a known structure, in our case meaning that the slots are fixed as
>to name and class.  This is indeed more restrictive than the traditional
>S approach (dating back well before "white book" classes) of attaching
>attributes, on a per-object basis, while retaining the underlying
>"structure" (a matrix, as in your example).
>
>It's a basic difference, and the formality has been adopted in many
>languages because it makes possible operations that a less formal system
>can't do, especially in terms of automating some computations.  Two
>examples:  an object can be tested for being a valid member of a class;
>and methods can be generated automatically to coerce an object to a
>superclass, or to replace the part of an object that corresponds to a
>superclass.
>
>There are of course ways to add general annotation to a class, e.g., by
>having a slot for miscellany (that slot might be a named list).
>
Would there be a point in formalizing this so that everyone does not 
need to define extensions of all the basic classes with an extra 
miscellany slot. I'm sure this sounds like herecy, but the alterative is 
that many people will be doing somewhat similar things using different 
class and slot names, and there will be a lot of unnecessary 
incompatibility among packages.

Thanks again,
Paul

>Regards,
> John
>  
>
>>Thanks,
>>Paul Gilbert
>>
>>______________________________________________
>>R-devel@stat.math.ethz.ch mailing list
>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>    
>>
>
>  
>

From tlumley at u.washington.edu  Wed Aug 13 08:24:48 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Aug 13 16:24:30 2003
Subject: [Rd] RAqua
In-Reply-To: <46EF452E-CD73-11D7-B052-003065CC4CB8@mclink.it>
Message-ID: <Pine.A41.4.44.0308130718480.158690-100000@homer06.u.washington.edu>

On Wed, 13 Aug 2003, Stefano Iacus wrote:

> > 4. Input and output windows cannot be resized independently. I
> > would still vote for two separate input and output windows.

And I'd vote for a single combined window :)

>
> > 6. If you want to download from CRAN you select packages in
> > a window, and the download starts if you close the window.
> it starts only if you check the item "install", otherwise the R session
> continues giving you a prompt.
> > That's not intuitive, there should be a separate download or go
> > button.

I don't find it intuitive, either, but isn't it fairly standard under
Aqua/OSX that dialogs are `live' and changes happen without a separate
confirmation button (eg in System Preferences)?


> > 7. I thought I saw somewhere that RAqua can now open X11
> > devices. Mine can't.
> you should start QuartzX and use x11(display=":0")

You don't even need x11(display=":0"), but you do need to start an X
server.  RAqua doesn't start an X server and I don't think it should.

X display windows are still not resizable, which is a similar
event-handling issue to the Tk one.

	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From rgentlem at jimmy.harvard.edu  Wed Aug 13 11:30:11 2003
From: rgentlem at jimmy.harvard.edu (Robert Gentleman)
Date: Wed Aug 13 16:29:49 2003
Subject: [Rd] s4 methods and base
In-Reply-To: <3F3A45F5.7070202@bank-banque-canada.ca>;
	from pgilbert@bank-banque-canada.ca on Wed, Aug 13, 2003 at
	10:06:45AM -0400
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>
	<3F380492.ED19612C@research.bell-labs.com>
	<3F391DC0.4010701@bank-banque-canada.ca>
	<3F396990.99F9E536@research.bell-labs.com>
	<3F3A45F5.7070202@bank-banque-canada.ca>
Message-ID: <20030813103011.Q19054@jimmy.harvard.edu>

On Wed, Aug 13, 2003 at 10:06:45AM -0400, Paul Gilbert wrote:
> John Chambers wrote:
> 
> >Paul Gilbert wrote:
> >  
> >
> >>John
> >>    
> >>
> >>>But maintainers of software using S3 methods and classes
> >>>might want to consider conversions or partial conversions, when and if
> >>>they decide to revise the software.
> >>>      
> >>>
> >>I'm curious about the logistics of a partial conversion. Initially I
> >>think I will avoid classes that inherit from other classes. But what
> >>general approach would you suggest for classes that have an object of
> >>another class in their structure. Can the larger object be an S4 class
> >>and the contained object an S3 class, or would you start the other way
> >>around, or is it not possible?
> >>    
> >>
> >
> >I would think it's wise to imagine converting all the functions in an S3
> >inheritance "tree" at the same time.
> >
> There is no inheritance in the S3 sense when an object contains an 
> object of another class. Am I missing something? Are you using this term 
> loosely or is there necessarily inheritance in S4 when one object 
> contains another object?
> 

  In this instance I have to say that it is a good idea to try some of
  these things out, to read John's book, or some other books on object
  oriented programming or to look at some existing packages that use
  S4 methods. There is rather a lot of ground you are trying to cover
  in your questions.

  Inheritance (or lack of it) is directly under the control of the
  programmer. The difference in going from S3 to S4 is that you
  actually can control this in a systematic way. If I have an object
  of class "a", I can extend it in many ways. One might be to create a
  new class "b", say, that adds a new slot (or two). 

  For example,
 
   setClass("a", representation(d="numeric"))
   setClass("b", representation(e="character"), contains="a")

  so that b extends a and instances of a have one slot named d, while
  instances of b have two slots, one named d and one named e.
  If we want to call the generic function foo, and it has a method for
  class a objects, but not for class b objects then we would use the
  method for class a (one of the important points of inheritance).

  Now, I could get b's in other ways,

  setClass("b2", representation(d="numeric", e="character"))

  this class b2 does not extend the class a above (but it looks very
  similar to the class b previously defined). Instances from the two
  would be almost indistinguishable - but they are very different in
  important ways.

  I can also do the following:

  setClass("b3", representation(d="a", e="character"))

  so that the d slot in this case contains objects of class "a"
  but in no way does this class b3 extend class a.

  Calling my generic foo, as described above will not dispatch to the
  a method, it will either find a b method or call the default handler
  (usually an error message at that point).

  Using inheritance usually gives you cleaner code and less of it to
  write. But it requires that you think about your classes and methods
  before you start writing them.

  In S3 there is no real sense of inheritance (which is why we are
  moving to S4).

  Robert


> >
> >The basic point is that ordinary formal classes have to have an
> >unambiguous "structure"; that is, known slots each having a known class.
> >
> >So the S3 class can't be extended by an S4 class, since the latter
> >wouldn't then have a known structure.
> >
> >The other direction is technically feasible, but it feels like a bad
> >idea in general.
> >
> I can see that it feels bad, but it seems like the only way to do a 
> partial conversion. My problem is that it is much easier to do a big 
> project in small bites.
> 
> >>Also, would you suggest converting to namespaces before or after
> >>converting to S4 classes?
> >>    
> >>
> >
> >At the moment, they don't work together, so it really amounts to
> >choosing which matters most to a given project.
> >
> >The hope is to make them work together for 1.8, but that's still a hope
> >rather than a certainty.
> >
> >  
> >
> >>>With S4 classes, every object has a single class, with an explicit
> >>>definition.  That class can have superclasses  (defined as the classes
> >>>this class contains).
> >>>      
> >>>
> >>(newbie question) Are you using "contains" as a synonym for "extends,"
> >>    
> >>
> >
> >Yes, roughly.
> >  
> >
> >>meaning that many classes can contain the same superclass, or is this
> >>intending to indicate that the logic is the reverse of (my understanding
> >>of) S3 logic?
> >>    
> >>
> >
> >The S language terminology "Class B extends class A" is analogous to
> >"Class A is a superclass of class B" in other languages.  Saying "Class
> >B contains class A" is a special form of "extends" (the most common
> >one), where B has all the slots of A, and perhaps others as well.  The
> >setIs() function allows a more general version of "extends" that doesn't
> >depend on the data structures being compatible.
> >
> Now if I understand this correctly, and to be pedantic, one would say an 
> object of class B contains and object of class A, and,  the definition 
> of class B extends the definition of class A. Or, said differently,  a 
> class A object is a subset of a class B object, and a class A definition 
> is a superclass of a class B definition. Does that make sense?
> 
> >>> - classes that don't have multiple strings in the class attribute can
> >>>often just be converted to a non-virtual S4 class, so long as objects
> >>>always have the same attributes.  Attributes go into slots (the slot
> >>>must have some specified class, but there are ways to allow some
> >>>variation in the actual type of data in the slot).
> >>>      
> >>>
> >>(newbie question) I often use attributes to stick "extra" information on
> >>an object, like the date of retrieval from a database onto a matrix. If
> >>the matrix is an S4 matrix class, does this mean that I have to define a
> >>new class in S4 that extends the matrix class in order to stick on extra
> >>information?
> >>    
> >>
> >
> >A good question, which points out some of the tradeoffs involved.  Yes,
> >if you want to work in terms of ordinary formal classes, the set of
> >slots (the "structure") is determined by the class, not by the
> >individual object.
> >
> >It's fundamental to most formal class systems that objects from a class
> >have a known structure, in our case meaning that the slots are fixed as
> >to name and class.  This is indeed more restrictive than the traditional
> >S approach (dating back well before "white book" classes) of attaching
> >attributes, on a per-object basis, while retaining the underlying
> >"structure" (a matrix, as in your example).
> >
> >It's a basic difference, and the formality has been adopted in many
> >languages because it makes possible operations that a less formal system
> >can't do, especially in terms of automating some computations.  Two
> >examples:  an object can be tested for being a valid member of a class;
> >and methods can be generated automatically to coerce an object to a
> >superclass, or to replace the part of an object that corresponds to a
> >superclass.
> >
> >There are of course ways to add general annotation to a class, e.g., by
> >having a slot for miscellany (that slot might be a named list).
> >
> Would there be a point in formalizing this so that everyone does not 
> need to define extensions of all the basic classes with an extra 
> miscellany slot. I'm sure this sounds like herecy, but the alterative is 
> that many people will be doing somewhat similar things using different 
> class and slot names, and there will be a lot of unnecessary 
> incompatibility among packages.
> 
> Thanks again,
> Paul
> 
> >Regards,
> > John
> >  
> >
> >>Thanks,
> >>Paul Gilbert
> >>
> >>______________________________________________
> >>R-devel@stat.math.ethz.ch mailing list
> >>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >>    
> >>
> >
> >  
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20                            |
| Harvard School of Public Health  email: rgentlem@jimmy.harvard.edu        |
+---------------------------------------------------------------------------+

From tlumley at u.washington.edu  Wed Aug 13 10:26:12 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Aug 13 18:25:50 2003
Subject: [Rd] RAqua
In-Reply-To: <BD93B2CB-CD9C-11D7-8B55-000393BB6D36@stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0308130913270.221370-100000@homer04.u.washington.edu>

On Wed, 13 Aug 2003, Jan de Leeuw wrote:

> Some additional suggestions:
>
> If you install/update packages, the output can be viewed in the
> Console application. Is that really the place where we want it ?

Good point.  It's not clear exactly which functions should output to
separate windows rather than the console.  Currently this is decided
automatically by whether the function uses the pager or cat/print.

The main drawback of putting the output in a separate window is that the
current ways of doing this would not show any output until the
installation is complete.   I find that the main reason to turn off (or
turn down) buffered output in the console is exactly to see the
incremental output from package installations.   Of course, an entirely
GUI solution using progress bars &c would be nice, but it's not going to
happen (certainly not before 1.8.0).

> update.packages() without argument can be used from the RAqua
> console, but maybe the GUI should have an update.all
> button

As the default in Packages|update is to update, you can update all
packages by choosing Packages|update and then closing the window without
changing anything.

BTW, I've just fixed all the data browser windows to show when their
contents have been modified, which gives a bit more interface feedback
that something will happen when you close the window.

> Quit from the menu requires you to respond to a question in
> the RAqua console. It would be more intuitive if Quit from the
> menu brought up a dialog window asking if you wanted
> to save the workspace.

And it now does.

> If you change settings in Network, for instance, there is an "Apply
> Now" button.

Yes. I don't disagree in principle, and I have found it confusing in
OS X that some things need confirmation and others don't.

A dialog sheet asking for confirmation would be nice.  I don't know how to
do these yet, but I am looking.


> I agree (of course)  it shouldn't start an X server. But I may have an
> older version
> of RAqua, because mine still says
>
> X11 module is not available under this GUI

Ah.  X11 support went in fairly recently and I don't think is in the
last precompiled binary that Stefano put up (and yes, I remember you were
having compiling problems with RAqua).

You would need to compile a more recent version from rsync to get the X11
support.

	-thomas


Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From deleeuw at stat.ucla.edu  Wed Aug 13 10:50:29 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Wed Aug 13 18:50:05 2003
Subject: [Rd] RAqua
Message-ID: <3F1A9409-CDAE-11D7-8B55-000393BB6D36@stat.ucla.edu>

By disabling the require_action statements in aquaconsole.c
and by setting CPPFLAGS to -D__DEBUGGING__ the compile
actually happens. But StartR does not work, because of
undefined symbols.

Fatal error: The AQUA shared library could not be loaded.
   The error was dlcompat: dyld:  
/Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua Undefined  
symbols:
_check_noerr
_require_noerr

Oh yes, and another small gripe: double clicking RStart opens
the R console behind all other open windows. Unobtrusive, to
be sure.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From ggrothendieck at volcanomail.com  Wed Aug 13 12:29:13 2003
From: ggrothendieck at volcanomail.com (Gabor Grothendieck)
Date: Wed Aug 13 20:30:30 2003
Subject: [Rd] Enhancement suggestion: POSIXt0
Message-ID: <20030813182913.890DDAC1A@sitemail.everyone.net>


This is a proposal for a simple partial solution to the date
problems in R.  It defines new classes, POSIXct0 and POSIXlt0,
which are similar to their non trailing zero counterparts
but have no timezone or daylight time.  Internally they look
like GMT times but they have their own methods.

PROBLEM 
Problems with POSIX dates appear when you want to
work with daily data or time data and just want naive time
but instead you are forced into unwanted considerations
regarding standard vs. daylight time and time zones.

chron is one solution but does not appear to be consistently
supported across R and it is not in the base.  Using GMT
timezone is another except that you can't be sure that a
routine to which you pass that date is also assuming GMT
when representing times.

With existing POSIXt times you either do not know what time
zone a routine you pass the time to is going to assume or
else you have to laboriously keep track of and pass around
timezones.  If your application only depends on naive time
then you are still forced into timezone and standard vs.
daylight considerations which contradicts the idea of
increasing modularity and decreasing complexity (i.e. a
module should not depend on irrelevant modules).  

ADVANTAGES 
The proposal has the advantage of being highly
consistent with the current system, easy to learn and use
since it obeys the same rules as existing POSIX dates and
its easy to implement since it leverages off existing
facilities.  Also its not prone to or at least less prone to
date and time bugs so its more likely to work across a wide
range of systems than POSIXt.  For example, see:
https://www.stat.math.ethz.ch/pipermail/r-devel/2003-August/027165.html
https://www.stat.math.ethz.ch/pipermail/r-devel/2003-August/027166.html

With POSIXt times there is no timezone or standard vs.
daylight time so you avoid troubles with such considerations.  
You avoid having to pass around timezone info since there is none.
Datetime arithmetic is more regular, e.g.  the same time on the 
following day is found by adding 24*60*60 irrespective of standard 
vs. daylight times.

SOLUTION 
Define new classes POSIXt0, POSIXct0 and POSIXlt0
which are the same as their non trailing 0 counterparts
except that they have no concept of timezone or daylight vs.
standard time.  

Internally the new classes would represent datetimes the
same way POSIXct and POSIXlt currently represent GMT times.
The new classes would have their own methods.

What is particularly important is that in order to avoid
subtle errors that they NOT be automatically converted to
and from existing POSIX classes.  (Automatic conversion
between POSIXct0 and POSIXlt0 is permissable.) For example,
if d is a vector of POSIXct0 dates then plot(d,y) will use
the plot.POSIXct0 method, if it exists, or be an error if it
does not exist.  (S3 classes are assumed since 
S4 classes are not used in the base.)

Explicit conversions to the respective classes would be
handled by as.POSIXct, as.POSIXlt, as.POSIXct0 and
as.POSIXlt0.  plot, format, etc. would have their own
POSIXct0 and POSIXlt0 methods.  datetime arithmetic would be
supported in the same way as with existinig POSIX classes
with the proviso that you cannot mix the 0 and non-0
classes.  

BASE 
It would be possible to define a POSIXt0 package;
however, they are mainly useful if used consistently across
R so being in the base would be best.  Given that the hard
work has already been done they would not bloat the base
significantly.

OTHER 
It would also be possible (though not necessary for
the above) to define a date class that held the date but not
time.  It could use the same representation as POSIXt0 and
just ignore the time (or zap it in calculations where it
might interfere). This is relatively straightforward with
POSIXt0 but with POSIXt is more problematic since the date
corresponding to a given datetime is unique for POSIXct0 but
is timezone dependent for POSIXct.

CHRON 
Moving chron to the base is another solution that
could be considered as an alternative to this one.

From tlumley at u.washington.edu  Wed Aug 13 14:32:25 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed Aug 13 22:32:07 2003
Subject: [Rd] RAqua
In-Reply-To: <3F1A9409-CDAE-11D7-8B55-000393BB6D36@stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0308131215440.149852-100000@homer09.u.washington.edu>

On Wed, 13 Aug 2003, Jan de Leeuw wrote:
>
> Fatal error: The AQUA shared library could not be loaded.
>    The error was dlcompat: dyld:
> /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua Undefined
> symbols:
> _check_noerr
> _require_noerr

Interesting.  We (obviously) don't have this problem, but I wonder why
not.

> Oh yes, and another small gripe: double clicking RStart opens
> the R console behind all other open windows. Unobtrusive, to
> be sure.

This one is also mysterious (but does happen to me).  There are
SelectWindow() calls all over the startup code, but they don't seem to
have any effect.


	-thomas

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From jago at mclink.it  Thu Aug 14 00:09:23 2003
From: jago at mclink.it (Stefano Iacus)
Date: Wed Aug 13 23:08:53 2003
Subject: [Rd] RAqua
In-Reply-To: <Pine.A41.4.44.0308131215440.149852-100000@homer09.u.washington.edu>
Message-ID: <69CEE600-CDD2-11D7-B052-003065CC4CB8@mclink.it>


On Mercoled?, ago 13, 2003, at 22:32 Europe/Rome, Thomas Lumley wrote:

> On Wed, 13 Aug 2003, Jan de Leeuw wrote:
>>
>> Fatal error: The AQUA shared library could not be loaded.
>>    The error was dlcompat: dyld:
>> /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua Undefined
>> symbols:
>> _check_noerr
>> _require_noerr
>

these are also calls from Debugging stuff, so it's obvious you want 
have them anywhere in R binary.
> Interesting.  We (obviously) don't have this problem, but I wonder why
> not.
>
>> Oh yes, and another small gripe: double clicking RStart opens
>> the R console behind all other open windows. Unobtrusive, to
>> be sure.
>
> This one is also mysterious (but does happen to me).  There are
> SelectWindow() calls all over the startup code, but they don't seem to
> have any effect.
>

this is due to the fact that RunApplicationEventLoop() is not yet 
started. I'm aware about this problem. But all of this comes from the 
eventloop problem.
I'm thinking about rewrite all the standard event handlers without the 
need of running and quitting carbon event loop. It is only tedious (and 
doesn't seem to me to have the highest priority!) to do that and will 
also be some code to be removed when Duncan TL eventloop stuff will be 
implemented.

>
> 	-thomas
>
> Thomas Lumley			Assoc. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jago at mclink.it  Thu Aug 14 00:22:46 2003
From: jago at mclink.it (Stefano Iacus)
Date: Wed Aug 13 23:23:20 2003
Subject: [Rd] RAqua
In-Reply-To: <Pine.A41.4.44.0308130718480.158690-100000@homer06.u.washington.edu>
Message-ID: <48A43721-CDD4-11D7-B052-003065CC4CB8@mclink.it>


On Mercoled?, ago 13, 2003, at 16:24 Europe/Rome, Thomas Lumley wrote:

> On Wed, 13 Aug 2003, Stefano Iacus wrote:
>
>>> 4. Input and output windows cannot be resized independently. I
>>> would still vote for two separate input and output windows.
>
> And I'd vote for a single combined window :)
>

the problem with using only one window is that I cannot do automatic 
dragging, copy and paste, etc in a single windows using apple's API 
from MLTE. It will be a lot of code to be written because in MLTE all 
the text in a widget has the same read/write priviledges. It is 
something I don't think I'll do in the near future as it has low 
priority in my opinion. I think that the primary goal is to release a 
functional Aqua GUI for the Darwin build without essential limitations: 
which means that I have to fix the problem with tcltk, we should 
provided an automatic way of distributing prebuilt versions of the 
packages and fix several problems with packages (tkrplot doens't work! 
uuid (for BioC) etc). This would be done before october. There are also 
problem with grid/lattice and quartz I have not yet fixed. The 
eventloop issue is another delicate problem.
It is in my mid-term plan to fix this problem with separate 
input/output (and of course any contribution -i.e. working code- is 
welcome), add a toolbar to the console window, etc, make RAqua 
applescriptable, etc.



>>
>>> 6. If you want to download from CRAN you select packages in
>>> a window, and the download starts if you close the window.
>> it starts only if you check the item "install", otherwise the R 
>> session
>> continues giving you a prompt.
>>> That's not intuitive, there should be a separate download or go
>>> button.
>
> I don't find it intuitive, either, but isn't it fairly standard under
> Aqua/OSX that dialogs are `live' and changes happen without a separate
> confirmation button (eg in System Preferences)?
>
>
>>> 7. I thought I saw somewhere that RAqua can now open X11
>>> devices. Mine can't.
>> you should start QuartzX and use x11(display=":0")
>
> You don't even need x11(display=":0"), but you do need to start an X
> server.  RAqua doesn't start an X server and I don't think it should.
>
> X display windows are still not resizable, which is a similar
> event-handling issue to the Tk one.
>
> 	-thomas
>
> Thomas Lumley			Assoc. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jago at mclink.it  Thu Aug 14 00:28:47 2003
From: jago at mclink.it (Stefano Iacus)
Date: Wed Aug 13 23:28:18 2003
Subject: [Rd] RAqua
In-Reply-To: <Pine.A41.4.44.0308130913270.221370-100000@homer04.u.washington.edu>
Message-ID: <1FD72D8A-CDD5-11D7-B052-003065CC4CB8@mclink.it>


On Mercoled?, ago 13, 2003, at 18:26 Europe/Rome, Thomas Lumley wrote:

> On Wed, 13 Aug 2003, Jan de Leeuw wrote:
>
>> Some additional suggestions:
>>
>> If you install/update packages, the output can be viewed in the
>> Console application. Is that really the place where we want it ?
>
> Good point.  It's not clear exactly which functions should output to
> separate windows rather than the console.  Currently this is decided
> automatically by whether the function uses the pager or cat/print.
>
> The main drawback of putting the output in a separate window is that 
> the
> current ways of doing this would not show any output until the
> installation is complete.   I find that the main reason to turn off (or
> turn down) buffered output in the console is exactly to see the
> incremental output from package installations.   Of course, an entirely
> GUI solution using progress bars &c would be nice, but it's not going 
> to
> happen (certainly not before 1.8.0).
>
>> update.packages() without argument can be used from the RAqua
>> console, but maybe the GUI should have an update.all
>> button
>
> As the default in Packages|update is to update, you can update all
> packages by choosing Packages|update and then closing the window 
> without
> changing anything.
>
> BTW, I've just fixed all the data browser windows to show when their
> contents have been modified, which gives a bit more interface feedback
> that something will happen when you close the window.
>
>> Quit from the menu requires you to respond to a question in
>> the RAqua console. It would be more intuitive if Quit from the
>> menu brought up a dialog window asking if you wanted
>> to save the workspace.
>
> And it now does.

Today I have put a new version of RAqua installer package on my page 
http://www.economia.unimi.it/R/

It is sync-ed with today's r-devel (11 GMT)


>
>> If you change settings in Network, for instance, there is an "Apply
>> Now" button.
>
> Yes. I don't disagree in principle, and I have found it confusing in
> OS X that some things need confirmation and others don't.
>
> A dialog sheet asking for confirmation would be nice.  I don't know 
> how to
> do these yet, but I am looking.

navigation API allows you for that by specifiing window modality 
opportunely. Have a look inside NavSample code in the Carbon SDK 1.6 
from apple. THe "modern.c" file explains how to do these sort of stuff.
Sheet window are a problem as the dialog does not exit after a user 
selection (just like any ohter dialog!!!) but just after opening the 
dialog. You have to write some dedicated event loop code. I've avoided 
sheets for this reason.

>
>
>> I agree (of course)  it shouldn't start an X server. But I may have an
>> older version
>> of RAqua, because mine still says
>>
>> X11 module is not available under this GUI
>
> Ah.  X11 support went in fairly recently and I don't think is in the
> last precompiled binary that Stefano put up (and yes, I remember you 
> were
> having compiling problems with RAqua).
>
> You would need to compile a more recent version from rsync to get the 
> X11
> support.
>
> 	-thomas
>
>
> Thomas Lumley			Assoc. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From jago at mclink.it  Thu Aug 14 00:37:04 2003
From: jago at mclink.it (Stefano Iacus)
Date: Wed Aug 13 23:36:34 2003
Subject: [Rd] quartz device
Message-ID: <47E59B24-CDD6-11D7-B052-003065CC4CB8@mclink.it>

I'm planning to move quartz device outside src/unix and put it in the 
aqua module.
This will imply that it won't be possible to use it without loading the 
aqua module (which is true in any case at the moment)
In any case as the quartz device requires event handling for resizing, 
moving the window etc, the aqua module is something needed.
Another reason for doing that is that I'm almost convinced about 
rewriting the event loop my self instead of usin g  the couple 
RunAppEve../QuitAppEv..
The event loop will not necessarily require to open the Aqua console, 
so the aqua module can be loaded from the command line version of R and 
use quartz, the package manager interface etc. Of course there will be 
no menus for that.

stefano

From jmc at research.bell-labs.com  Wed Aug 13 19:17:13 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Thu Aug 14 00:17:24 2003
Subject: [Rd] s4 methods and base
References: <8CBAA121CEB4D5118CB200508BB2BBEF0317E8F4@xmx8lonib.lonib.commerzbank.com>		<3F380492.ED19612C@research.bell-labs.com>
	<3F391DC0.4010701@bank-banque-canada.ca>
	<3F396990.99F9E536@research.bell-labs.com>
	<3F3A45F5.7070202@bank-banque-canada.ca>
Message-ID: <3F3AB8E9.77E1AA12@research.bell-labs.com>

Paul Gilbert wrote:
> 


......................
>
> There is no inheritance in the S3 sense when an object contains an
> object of another class. Am I missing something? Are you using this term
> loosely or is there necessarily inheritance in S4 when one object
> contains another object?

No, I'm not using it loosely, but I am using it as it's used for S4
classes.

"contains" is an argument in defining a class via setClass().  Its
meaning is essentially the mathematical one, as in "Set B contains set
A."  If we think of a class as corresponding to a set of slots, that is,
a set of (name, class) pairs, then "class B contains class A" says that
the set of slots for B contains that for A.

"extends" is a more general concept in the S class system.  See
Programming with Data for details and examples, but the essential
meaning of "class B extends class A"  is that any instance of B can be
used when an instance of A is needed.  As I said, "contains" is the most
common but not the only way to create an "extends" relation.

"inherits" is an S3 concept defined in Statistical Models in S.  In
practice, it says ONLY that "A" appears in the class attribute for a
particular object, and not necessarily as the first string.  One of the
problems with an informal, instance-based, system is that there is no
way to verify what if anything inheritance implies.

> 
> >
> >The basic point is that ordinary formal classes have to have an
> >unambiguous "structure"; that is, known slots each having a known class.
> >
> >So the S3 class can't be extended by an S4 class, since the latter
> >wouldn't then have a known structure.
> >
> >The other direction is technically feasible, but it feels like a bad
> >idea in general.
> >
> I can see that it feels bad, but it seems like the only way to do a
> partial conversion. My problem is that it is much easier to do a big
> project in small bites.

If we rephrase the question as "can an S4 class have objects from S3
classes as slots", the answer is yes, but you should "register" the S3
classes to the formal class system, by calling setOldClass (see the
online documentation).  That's what we did for the base package's
classes, as discussed re John Marslan's mail. So, e.g.,
  setOldClass(c("ordered", "factor"))
to register the S3 class "ordered" with its inheritance from "factor".

Registration isn't enforced yet, but I would like to do so, in order to
require that all the slots in a class definition correspond to defined
classes.

> 
> >>Also, would you suggest converting to namespaces before or after
> >>converting to S4 classes?
> >>
> >>
> >
> >At the moment, they don't work together, so it really amounts to
> >choosing which matters most to a given project.
> >
> >The hope is to make them work together for 1.8, but that's still a hope
> >rather than a certainty.
> >
> >
> >
> >>>With S4 classes, every object has a single class, with an explicit
> >>>definition.  That class can have superclasses  (defined as the classes
> >>>this class contains).
> >>>
> >>>
> >>(newbie question) Are you using "contains" as a synonym for "extends,"
> >>
> >>
> >
> >Yes, roughly.
> >
> >
> >>meaning that many classes can contain the same superclass, or is this
> >>intending to indicate that the logic is the reverse of (my understanding
> >>of) S3 logic?
> >>
> >>
> >
> >The S language terminology "Class B extends class A" is analogous to
> >"Class A is a superclass of class B" in other languages.  Saying "Class
> >B contains class A" is a special form of "extends" (the most common
> >one), where B has all the slots of A, and perhaps others as well.  The
> >setIs() function allows a more general version of "extends" that doesn't
> >depend on the data structures being compatible.
> >
> Now if I understand this correctly, and to be pedantic, one would say an
> object of class B contains and object of class A, and,  the definition
> of class B extends the definition of class A. Or, said differently,  a
> class A object is a subset of a class B object, and a class A definition
> is a superclass of a class B definition. Does that make sense?
> 
> >>> - classes that don't have multiple strings in the class attribute can
> >>>often just be converted to a non-virtual S4 class, so long as objects
> >>>always have the same attributes.  Attributes go into slots (the slot
> >>>must have some specified class, but there are ways to allow some
> >>>variation in the actual type of data in the slot).
> >>>
> >>>
> >>(newbie question) I often use attributes to stick "extra" information on
> >>an object, like the date of retrieval from a database onto a matrix. If
> >>the matrix is an S4 matrix class, does this mean that I have to define a
> >>new class in S4 that extends the matrix class in order to stick on extra
> >>information?
> >>
> >>
> >
> >A good question, which points out some of the tradeoffs involved.  Yes,
> >if you want to work in terms of ordinary formal classes, the set of
> >slots (the "structure") is determined by the class, not by the
> >individual object.
> >
> >It's fundamental to most formal class systems that objects from a class
> >have a known structure, in our case meaning that the slots are fixed as
> >to name and class.  This is indeed more restrictive than the traditional
> >S approach (dating back well before "white book" classes) of attaching
> >attributes, on a per-object basis, while retaining the underlying
> >"structure" (a matrix, as in your example).
> >
> >It's a basic difference, and the formality has been adopted in many
> >languages because it makes possible operations that a less formal system
> >can't do, especially in terms of automating some computations.  Two
> >examples:  an object can be tested for being a valid member of a class;
> >and methods can be generated automatically to coerce an object to a
> >superclass, or to replace the part of an object that corresponds to a
> >superclass.
> >
> >There are of course ways to add general annotation to a class, e.g., by
> >having a slot for miscellany (that slot might be a named list).
> >
> Would there be a point in formalizing this so that everyone does not
> need to define extensions of all the basic classes with an extra
> miscellany slot. I'm sure this sounds like herecy, but the alterative is
> that many people will be doing somewhat similar things using different
> class and slot names, and there will be a lot of unnecessary
> incompatibility among packages.

There are ways to provide a degree of "automatic" class extension for
features that are midway between universal necessities and purely
specialized techniques.  I'm not quite convinced this is a sufficiently
desirable mechanism, but in any case a way to start would be a nice
simple implementation, e.g., as a class with corresponding methods, say,
to extract or assign a "note"; i.e., for generic functions `note(object,
name)' and `note(object, name) <- value'.

John
> 
> Thanks again,
> Paul
> 
> >Regards,
> > John
> >
> >
> >>Thanks,
> >>Paul Gilbert
> >>
> >>______________________________________________
> >>R-devel@stat.math.ethz.ch mailing list
> >>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> >
> >
> >

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From jago at mclink.it  Thu Aug 14 08:42:43 2003
From: jago at mclink.it (Stefano Iacus)
Date: Thu Aug 14 07:43:23 2003
Subject: [Rd] RAqua and Debugging macros
Message-ID: <203369B3-CE1A-11D7-B052-003065CC4CB8@mclink.it>

I have altered the code inside the aqua module replacing all apple's 
debugging macros.
It should compile fine now with new app dev tool. Can anyone give it a 
try?

stefano

From maechler at stat.math.ethz.ch  Thu Aug 14 10:25:27 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Aug 14 09:25:00 2003
Subject: [Rd] hclust() and agnes() method="average" divergence (PR#3648)
Message-ID: <200308140725.h7E7PRJH009620@pubhealth.ku.dk>

>>>>> "MikG" == m grum <m.grum@cgiar.org>
>>>>>     on Mon, 4 Aug 2003 08:51:30 +0200 (MET DST) writes:


    MikG> Anyone have a clue why hclust() and agnes() produce
    MikG> different results in the example below when both use
    MikG> method="average"??  I'm not able to reproduce the
    MikG> problem with other datasets.

    MikG> ereck <- read.table("Ereck.txt",header=TRUE,sep="\t")
    MikG> emol <- subset(ereck,select=c(11:18,20:32))
    MikG> library(cluster)
    MikG> library(mva)
    MikG> daisemol <- daisy(emol,type=list(asymm=c(1:21)))

The reason is that most of the distances/dissimilarities are the
same: there are only 20 different values in the 1326 distances.

> sort(table(daisemol), decreasing=TRUE)

starts as
>> 0.666666666666667               0.5               0.8 0.285714285714286 
>>               387               284               251                94 

i.e. the distance 2/3 appears 387 times,  1/2 does 284 times, etc.
With so many ties in the distances, choosing the next
observation / cluster for "merging" is often chosing among many
possibilities and hence the arbitrariness and the difference
between too algorithms.

For your situation, you might be able to use some continuous
variable along with the factors and the many binary ones such
that the distances won't have ties.

NO bug! {i.e. you should have posted to R-help (you did have a
good question!)} not R-bugs.

Regards,
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From deleeuw at stat.ucla.edu  Wed Aug 13 08:45:10 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Thu Aug 14 09:33:34 2003
Subject: [Rd] RAqua
In-Reply-To: <Pine.A41.4.44.0308130718480.158690-100000@homer06.u.washington.edu>
References: <Pine.A41.4.44.0308130718480.158690-100000@homer06.u.washington.edu>
Message-ID: <BD93B2CB-CD9C-11D7-8B55-000393BB6D36@stat.ucla.edu>

Some additional suggestions:

If you install/update packages, the output can be viewed in the
Console application. Is that really the place where we want it ?

update.packages() without argument can be used from the RAqua
console, but maybe the GUI should have an update.all
button

Quit from the menu requires you to respond to a question in
the RAqua console. It would be more intuitive if Quit from the
menu brought up a dialog window asking if you wanted
to save the workspace.

More inserted below,

On Wednesday, August 13, 2003, at 7:24 AM, Thomas Lumley wrote:

> On Wed, 13 Aug 2003, Stefano Iacus wrote:
>
>>> 4. Input and output windows cannot be resized independently. I
>>> would still vote for two separate input and output windows.
>
> And I'd vote for a single combined window :)

Compromise is my middle name: how about a resize bar in the middle
of the single window, for relative resizing.

>
>>
>>> 6. If you want to download from CRAN you select packages in
>>> a window, and the download starts if you close the window.
>> it starts only if you check the item "install", otherwise the R  
>> session
>> continues giving you a prompt.
>>> That's not intuitive, there should be a separate download or go
>>> button.
>
> I don't find it intuitive, either, but isn't it fairly standard under
> Aqua/OSX that dialogs are `live' and changes happen without a separate
> confirmation button (eg in System Preferences)?

If you change settings in Network, for instance, there is an "Apply  
Now" button.

>
>
>>> 7. I thought I saw somewhere that RAqua can now open X11
>>> devices. Mine can't.
>> you should start QuartzX and use x11(display=":0")
>
> You don't even need x11(display=":0"), but you do need to start an X
> server.  RAqua doesn't start an X server and I don't think it should.

I agree (of course)  it shouldn't start an X server. But I may have an  
older version
of RAqua, because mine still says

X11 module is not available under this GUI

>
> X display windows are still not resizable, which is a similar
> event-handling issue to the Tk one.
>
> 	-thomas
>
> Thomas Lumley			Assoc. Professor, Biostatistics
> tlumley@u.washington.edu	University of Washington, Seattle
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------
From jago at mclink.it  Thu Aug 14 12:05:58 2003
From: jago at mclink.it (Stefano Iacus)
Date: Thu Aug 14 11:05:31 2003
Subject: [Rd] event loop
Message-ID: <84C1147A-CE36-11D7-B052-003065CC4CB8@mclink.it>

I've installed a timer in RAqua to do tasks at time interval.
I would like simply to let R call all the handlers installed (eg x11, 
gtk, tcltk) on this time interval and return.
Which function whould I call?

stefano

From jago at mclink.it  Thu Aug 14 12:46:54 2003
From: jago at mclink.it (Stefano Iacus)
Date: Thu Aug 14 11:47:03 2003
Subject: [Rd] event loop
In-Reply-To: <84C1147A-CE36-11D7-B052-003065CC4CB8@mclink.it>
Message-ID: <3CF0F036-CE3C-11D7-B052-003065CC4CB8@mclink.it>

Ok, I've find out the solution.

I'm using

R_runHandlers(R_InputHandlers, R_checkActivity(10, 1));

in the EventLoopTimer.

Now x11 works fine and also RGL run smoothly.

I'm sure about the parameters used in R_checkActivity. Any hints is 
welcome.


stefano

On Gioved?, ago 14, 2003, at 11:05 Europe/Rome, Stefano Iacus wrote:

> I've installed a timer in RAqua to do tasks at time interval.
> I would like simply to let R call all the handlers installed (eg x11, 
> gtk, tcltk) on this time interval and return.
> Which function whould I call?
>
> stefano
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From duncan at research.bell-labs.com  Thu Aug 14 08:08:44 2003
From: duncan at research.bell-labs.com (Duncan Temple Lang)
Date: Thu Aug 14 13:08:29 2003
Subject: [Rd] event loop
In-Reply-To: <3CF0F036-CE3C-11D7-B052-003065CC4CB8@mclink.it>;
	from jago@mclink.it on Thu, Aug 14, 2003 at 11:46:54AM +0200
References: <84C1147A-CE36-11D7-B052-003065CC4CB8@mclink.it>
	<3CF0F036-CE3C-11D7-B052-003065CC4CB8@mclink.it>
Message-ID: <20030814070843.A8833@jessie.research.bell-labs.com>

Stefano Iacus wrote:
> Ok, I've find out the solution.
> 
> I'm using
> 
> R_runHandlers(R_InputHandlers, R_checkActivity(10, 1));
> 
> in the EventLoopTimer.
> 
> Now x11 works fine and also RGL run smoothly.

Great; nice work.

> 
> I'm sure about the parameters used in R_checkActivity. Any hints is 
> welcome.

The 1 merely ensures that we don't look for events on stdin
and concentrate only on the secondary event sources.
So this is the right thing.

The 10 (first argument) is the number of microseconds to wait/block
when looking for input on any of the event queues (file descriptors).
You could make this 0 and the call to select() will return immediately
and not wait for events. This might be the right thing when running in
a timer action.

 D.

> 
> 
> stefano
> 
> On Gioved?, ago 14, 2003, at 11:05 Europe/Rome, Stefano Iacus wrote:
> 
> > I've installed a timer in RAqua to do tasks at time interval.
> > I would like simply to let R call all the handlers installed (eg x11, 
> > gtk, tcltk) on this time interval and return.
> > Which function whould I call?
> >
> > stefano
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

From dmurdoch at pair.com  Thu Aug 14 19:50:17 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Thu Aug 14 18:50:12 2003
Subject: [Rd] Bug in numericDeriv (was: [R] nls confidence intervals)
	(PR#3746)
Message-ID: <200308141650.h7EGoHJH016759@pubhealth.ku.dk>

Moved from r-help:

On Thu, 14 Aug 2003 09:08:26 -0700, Spencer Graves
<spencer.graves@pdf.com> wrote :

>p.s.  The following command in S-Plus 6.1 seems to work fine but 
>produces an error in R 1.7.1:
>
>nls(y~a, data=tstDf, start=list(a=1))
>Error in nlsModel(formula, mf, start) : singular gradient matrix at 
>initial parameter estimates

This looks like a bug in numericDeriv, which finds a derivative of 0
rather than 1 for da/da.  I've cc'd the author.

Duncan

From deleeuw at stat.ucla.edu  Thu Aug 14 10:59:55 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Thu Aug 14 18:59:31 2003
Subject: [Rd] latest r-devel
Message-ID: <BAA7A88D-CE78-11D7-BA70-000393BB6D36@stat.ucla.edu>

1. Provided I set CPPFLAGS to -D__DEBUGGING__ this compiles
fine now (Panther 7B28, gcc 3.3 build 1481, g77 from Gaurav Kanna,
based on gcc build 1310).

2. Both StartR and R --gui=aqua from the command line do not
work, because

Fatal error: The AQUA shared library could not be loaded.
   The error was dlcompat: dyld:  
/Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua Undefined  
symbols:
_check_noerr

3. X11() works fine from the command line.

4. quartz() from the command line gives a bus error.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From richard_raubertas at merck.com  Fri Aug 15 01:38:29 2003
From: richard_raubertas at merck.com (richard_raubertas@merck.com)
Date: Fri Aug 15 00:38:14 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <200308142238.h7EMcTJH017962@pubhealth.ku.dk>

R 1.7.1 on Windows XP

The "normal Q-Q plot" produced by plot.lm() mislabels points 
when the model is fitted using na.action=na.exclude.  Example:

x <- 1:50
y <- x + rnorm(50)
y[c(5,10,15)] <- NA   # insert some NA's
y[40] <- 50  # add an outlier
plot(lm(y ~ x, na.action=na.omit))  # outlier correctly labeled in all 
                                    # four plots
plot(lm(y ~ x, na.action=na.exclude)) # labels attached to wrong points
                                      # in the QQ plot (only)


Rich Raubertas
Biometrics Research
Merck & Co.

------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA), and/or
its affiliates (which may be known outside the United States as Merck Frosst,
Merck Sharp & Dohme or MSD) that may be confidential, proprietary copyrighted
and/or legally privileged, and is intended solely for the use of the
individual or entity named on this message.  If you are not the intended
recipient, and have received this message in error, please immediately return
this by e-mail and then delete it.

From andy_liaw at merck.com  Thu Aug 14 23:08:34 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri Aug 15 04:09:02 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <3A822319EB35174CA3714066D590DCD50205C9C5@usrymx25.merck.com>

Here's one possible fix (may not be very efficient).

Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R to the following:

        if (id.n > 0) {
            qqx <- rep(NA, n)
            qqy <- rep(NA, n)
            qqx[!is.na(rs)] <- qq$x
            qqy[!is.na(rs)] <- qq$y
            text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
        }

Andy


> -----Original Message-----
> From: richard_raubertas@merck.com 
> [mailto:richard_raubertas@merck.com] 
> Sent: Thursday, August 14, 2003 6:38 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
> 
> 
> R 1.7.1 on Windows XP
> 
> The "normal Q-Q plot" produced by plot.lm() mislabels points 
> when the model is fitted using na.action=na.exclude.  Example:
> 
> x <- 1:50
> y <- x + rnorm(50)
> y[c(5,10,15)] <- NA   # insert some NA's
> y[40] <- 50  # add an outlier
> plot(lm(y ~ x, na.action=na.omit))  # outlier correctly 
> labeled in all 
>                                     # four plots
> plot(lm(y ~ x, na.action=na.exclude)) # labels attached to 
> wrong points
>                                       # in the QQ plot (only)
> 
> 
> Rich Raubertas
> Biometrics Research
> Merck & Co.
> 
> --------------------------------------------------------------
> ----------------
> Notice:  This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA), and/or its affiliates (which may 
> be known outside the United States as Merck Frosst, Merck 
> Sharp & Dohme or MSD) that may be confidential, proprietary 
> copyrighted and/or legally privileged, and is intended solely 
> for the use of the individual or entity named on this 
> message.  If you are not the intended recipient, and have 
> received this message in error, please immediately return 
> this by e-mail and then delete it.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
> 
> 
> 
> --------------------------------------------------------------
> ----------------
> Notice:  This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA), and/or its affiliates (which may 
> be known outside the United States as Merck Frosst, Merck 
> Sharp & Dohme or MSD) that may be confidential, proprietary 
> copyrighted and/or legally privileged, and is intended solely 
> for the use of the individual or entity named on this 
> message.  If you are not the intended recipient, and have 
> received this message in error, please immediately return 
> this by e-mail and then delete it.
> --------------------------------------------------------------
> ----------------
> 

------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA), and/or
its affiliates (which may be known outside the United States as Merck Frosst,
Merck Sharp & Dohme or MSD) that may be confidential, proprietary copyrighted
and/or legally privileged, and is intended solely for the use of the
individual or entity named on this message.  If you are not the intended
recipient, and have received this message in error, please immediately return
this by e-mail and then delete it.

From andy_liaw at merck.com  Fri Aug 15 05:08:59 2003
From: andy_liaw at merck.com (andy_liaw@merck.com)
Date: Fri Aug 15 04:09:18 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <200308150208.h7F28xJH018565@pubhealth.ku.dk>

Here's one possible fix (may not be very efficient).

Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R to the following:

        if (id.n > 0) {
            qqx <- rep(NA, n)
            qqy <- rep(NA, n)
            qqx[!is.na(rs)] <- qq$x
            qqy[!is.na(rs)] <- qq$y
            text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
        }

Andy


> -----Original Message-----
> From: richard_raubertas@merck.com 
> [mailto:richard_raubertas@merck.com] 
> Sent: Thursday, August 14, 2003 6:38 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
> 
> 
> R 1.7.1 on Windows XP
> 
> The "normal Q-Q plot" produced by plot.lm() mislabels points 
> when the model is fitted using na.action=na.exclude.  Example:
> 
> x <- 1:50
> y <- x + rnorm(50)
> y[c(5,10,15)] <- NA   # insert some NA's
> y[40] <- 50  # add an outlier
> plot(lm(y ~ x, na.action=na.omit))  # outlier correctly 
> labeled in all 
>                                     # four plots
> plot(lm(y ~ x, na.action=na.exclude)) # labels attached to 
> wrong points
>                                       # in the QQ plot (only)
> 
> 
> Rich Raubertas
> Biometrics Research
> Merck & Co.
> 
> --------------------------------------------------------------
> ----------------
> Notice:  This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA), and/or its affiliates (which may 
> be known outside the United States as Merck Frosst, Merck 
> Sharp & Dohme or MSD) that may be confidential, proprietary 
> copyrighted and/or legally privileged, and is intended solely 
> for the use of the individual or entity named on this 
> message.  If you are not the intended recipient, and have 
> received this message in error, please immediately return 
> this by e-mail and then delete it.
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailman/listinfo> /r-devel
> 
> 
> 
> --------------------------------------------------------------
> ----------------
> Notice:  This e-mail message, together with any attachments, 
> contains information of Merck & Co., Inc. (Whitehouse 
> Station, New Jersey, USA), and/or its affiliates (which may 
> be known outside the United States as Merck Frosst, Merck 
> Sharp & Dohme or MSD) that may be confidential, proprietary 
> copyrighted and/or legally privileged, and is intended solely 
> for the use of the individual or entity named on this 
> message.  If you are not the intended recipient, and have 
> received this message in error, please immediately return 
> this by e-mail and then delete it.
> --------------------------------------------------------------
> ----------------
> 

------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA), and/or
its affiliates (which may be known outside the United States as Merck Frosst,
Merck Sharp & Dohme or MSD) that may be confidential, proprietary copyrighted
and/or legally privileged, and is intended solely for the use of the
individual or entity named on this message.  If you are not the intended
recipient, and have received this message in error, please immediately return
this by e-mail and then delete it.

From bellis at hsph.harvard.edu  Thu Aug 14 23:09:41 2003
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Fri Aug 15 04:09:57 2003
Subject: [Rd] latest r-devel
In-Reply-To: <BAA7A88D-CE78-11D7-BA70-000393BB6D36@stat.ucla.edu>
Message-ID: <87FB0916-CEC5-11D7-A6DE-000393BDE1EC@hsph.harvard.edu>

Yup. I can duplicate the behavior on 10.2.6.

On Thursday, August 14, 2003, at 12:59 PM, Jan de Leeuw wrote:

> 1. Provided I set CPPFLAGS to -D__DEBUGGING__ this compiles
> fine now (Panther 7B28, gcc 3.3 build 1481, g77 from Gaurav Kanna,
> based on gcc build 1310).
>
> 2. Both StartR and R --gui=aqua from the command line do not
> work, because
>
> Fatal error: The AQUA shared library could not be loaded.
>   The error was dlcompat: dyld:  
> /Applications/StartR.app/RAqua.app/Contents/MacOS/RAqua Undefined  
> symbols:
> _check_noerr
>
> 3. X11() works fine from the command line.
>
> 4. quartz() from the command line gives a bus error.
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From hb at maths.lth.se  Fri Aug 15 12:15:49 2003
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Aug 15 11:15:30 2003
Subject: [Rd] scan file error (PR#3738)
In-Reply-To: <200308130207.h7D27RJH027580@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.10308151054300.13776-100000@bartok.maths.lth.se>

Having dealt quite a bit with different versions of GenePix Data Results
files (GPR) on different systems (including WinXP Pro w/ R v1.7.1) my
guess is that your GPR file has single qoutation marks in the Name or the
ID columns. Typical is "3' end bla bla" etc.

If I remember correctly, I've seen exactly that error message because of
this and it can be dealt with by using the correct 'quote' argument. Try
quote="" instead of the the default one. Sorry for not being able to be
more direct, but my laptop is on service and I do not have time to go to
the backup archives to find the details. 

I do not know of any difference between R v1.7.1 and previous versions. If
you still can't get it to work, you can test to read your GPR file with
the com.braju.sma package, which has been able read all GPR versions
this far (except from an unrelated problem reported with GPR v1.5 I've got
this week). See http://www.maths.lth.se/help/R/com.braju.sma/ for install
and read instructions. If you get errors I could take a look at the file,
because I doubt it is a R bug.

Best wishes

Henrik Bengtsson

Dept. of Mathematical Statistics @ Centre for Mathematical Sciences 
Lund Institute of Technology/Lund University, Sweden (+2h UTC)
+46 46 2229611 (off), +46 708 909208 (cell), +46 46 2224623 (fax)
h b @ m a t h s . l t h . s e, http://www.maths.lth.se/~hb/

On Wed, 13 Aug 2003 bart.rossel@anu.edu.au wrote:

> Full_Name: Bart
> Version: 1.7.1
> OS: XP
> Submission from: (NULL) (150.203.41.62)
> 
> 
> When trying to load microarray slides (gpr format) into R 1.7.1, I get the
> following error message
> 
> Error in scan(file = file, what = what, sep = sep, quote = quote, dec = dec,  :
> 
>         line 1057 did not have 43 elements
> 
> I have been able to load the files on another computer before including an XP
> machine. I have also tried to load a different set of gpr files, that also
> worked on an earlier version, but still get the same error message.
> Using an earlier version of R (1.3.1)I did not have these problems.
> Does anyone know of compatibilty issues between R 1.7.1 and Windows XP?
> 
> Thanks,
> 
> Bart
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From maechler at stat.math.ethz.ch  Fri Aug 15 16:55:54 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Aug 15 15:55:28 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <200308151355.h7FDtsJH025386@pubhealth.ku.dk>

>>>>> "AndyL" == andy liaw <andy_liaw@merck.com>
>>>>>     on Fri, 15 Aug 2003 04:08:59 +0200 (MET DST) writes:

    AndyL> Here's one possible fix (may not be very efficient).
    AndyL> Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R to the following:

    AndyL> if (id.n > 0) {
    AndyL>  qqx <- rep(NA, n)
    AndyL>  qqy <- rep(NA, n)
    AndyL>  qqx[!is.na(rs)] <- qq$x
    AndyL>  qqy[!is.na(rs)] <- qq$y
    AndyL>  text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
    AndyL> }

Thank you, Andy.

I digged a bit further, however.
I'd argue the bug is in  qqnorm(): It shouldn't drop NA's in its
result, list(x= ., y=.).

R-devel will contain a fixed  qqnorm.default() function
which will also solve this plot.lm() behavior.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    >> -----Original Message-----
    >> From: richard_raubertas@merck.com 
    >> Sent: Thursday, August 14, 2003 6:38 PM
    >> To: r-devel@stat.math.ethz.ch
    >> Cc: R-bugs@biostat.ku.dk
    >> Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
    >> 
    >> 
    >> R 1.7.1 on Windows XP
    >> 
    >> The "normal Q-Q plot" produced by plot.lm() mislabels points 
    >> when the model is fitted using na.action=na.exclude.  Example:
    >> 
    >> x <- 1:50
    >> y <- x + rnorm(50)
    >> y[c(5,10,15)] <- NA   # insert some NA's
    >> y[40] <- 50  # add an outlier
    >> plot(lm(y ~ x, na.action=na.omit))  # outlier correctly 
    >> labeled in all 
    >> # four plots
    >> plot(lm(y ~ x, na.action=na.exclude)) # labels attached to 
    >> wrong points
    >> # in the QQ plot (only)
    >> 
    >> 
    >> Rich Raubertas
    >> Biometrics Research
    >> Merck & Co.

From andy_liaw at merck.com  Fri Aug 15 11:10:52 2003
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri Aug 15 16:10:42 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <3A822319EB35174CA3714066D590DCD50205C9C8@usrymx25.merck.com>

> From: maechler@stat.math.ethz.ch [mailto:maechler@stat.math.ethz.ch] 
> 
> >>>>> "AndyL" == andy liaw <andy_liaw@merck.com>
> >>>>>     on Fri, 15 Aug 2003 04:08:59 +0200 (MET DST) writes:
> 
>     AndyL> Here's one possible fix (may not be very efficient).
>     AndyL> Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R 
> to the following:
> 
>     AndyL> if (id.n > 0) {
>     AndyL>  qqx <- rep(NA, n)
>     AndyL>  qqy <- rep(NA, n)
>     AndyL>  qqx[!is.na(rs)] <- qq$x
>     AndyL>  qqy[!is.na(rs)] <- qq$y
>     AndyL>  text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
>     AndyL> }
> 
> Thank you, Andy.
> 
> I digged a bit further, however.
> I'd argue the bug is in  qqnorm(): It shouldn't drop NA's in 
> its result, list(x= ., y=.).
> 
> R-devel will contain a fixed  qqnorm.default() function
> which will also solve this plot.lm() behavior.

I completely agree.  ?qqnorm does not say what it does with NAs.  Maybe it
should?

Best,
Andy


 
> Martin Maechler <maechler@stat.math.ethz.ch>	
http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    >> -----Original Message-----
    >> From: richard_raubertas@merck.com 
    >> Sent: Thursday, August 14, 2003 6:38 PM
    >> To: r-devel@stat.math.ethz.ch
    >> Cc: R-bugs@biostat.ku.dk
    >> Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
    >> 
    >> 
    >> R 1.7.1 on Windows XP
    >> 
    >> The "normal Q-Q plot" produced by plot.lm() mislabels points 
    >> when the model is fitted using na.action=na.exclude.  Example:
    >> 
    >> x <- 1:50
    >> y <- x + rnorm(50)
    >> y[c(5,10,15)] <- NA   # insert some NA's
    >> y[40] <- 50  # add an outlier
    >> plot(lm(y ~ x, na.action=na.omit))  # outlier correctly 
    >> labeled in all 
    >> # four plots
    >> plot(lm(y ~ x, na.action=na.exclude)) # labels attached to 
    >> wrong points
    >> # in the QQ plot (only)
    >> 
    >> 
    >> Rich Raubertas
    >> Biometrics Research
    >> Merck & Co.

______________________________________________
R-devel@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA), and/or
its affiliates (which may be known outside the United States as Merck Frosst,
Merck Sharp & Dohme or MSD) that may be confidential, proprietary copyrighted
and/or legally privileged, and is intended solely for the use of the
individual or entity named on this message.  If you are not the intended
recipient, and have received this message in error, please immediately return
this by e-mail and then delete it.

From andy_liaw at merck.com  Fri Aug 15 17:11:18 2003
From: andy_liaw at merck.com (andy_liaw@merck.com)
Date: Fri Aug 15 16:11:01 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <200308151411.h7FEBIJH025544@pubhealth.ku.dk>

> From: maechler@stat.math.ethz.ch [mailto:maechler@stat.math.ethz.ch] 
> 
> >>>>> "AndyL" == andy liaw <andy_liaw@merck.com>
> >>>>>     on Fri, 15 Aug 2003 04:08:59 +0200 (MET DST) writes:
> 
>     AndyL> Here's one possible fix (may not be very efficient).
>     AndyL> Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R 
> to the following:
> 
>     AndyL> if (id.n > 0) {
>     AndyL>  qqx <- rep(NA, n)
>     AndyL>  qqy <- rep(NA, n)
>     AndyL>  qqx[!is.na(rs)] <- qq$x
>     AndyL>  qqy[!is.na(rs)] <- qq$y
>     AndyL>  text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
>     AndyL> }
> 
> Thank you, Andy.
> 
> I digged a bit further, however.
> I'd argue the bug is in  qqnorm(): It shouldn't drop NA's in 
> its result, list(x= ., y=.).
> 
> R-devel will contain a fixed  qqnorm.default() function
> which will also solve this plot.lm() behavior.

I completely agree.  ?qqnorm does not say what it does with NAs.  Maybe it
should?

Best,
Andy


 
> Martin Maechler <maechler@stat.math.ethz.ch>	
http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    >> -----Original Message-----
    >> From: richard_raubertas@merck.com 
    >> Sent: Thursday, August 14, 2003 6:38 PM
    >> To: r-devel@stat.math.ethz.ch
    >> Cc: R-bugs@biostat.ku.dk
    >> Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
    >> 
    >> 
    >> R 1.7.1 on Windows XP
    >> 
    >> The "normal Q-Q plot" produced by plot.lm() mislabels points 
    >> when the model is fitted using na.action=na.exclude.  Example:
    >> 
    >> x <- 1:50
    >> y <- x + rnorm(50)
    >> y[c(5,10,15)] <- NA   # insert some NA's
    >> y[40] <- 50  # add an outlier
    >> plot(lm(y ~ x, na.action=na.omit))  # outlier correctly 
    >> labeled in all 
    >> # four plots
    >> plot(lm(y ~ x, na.action=na.exclude)) # labels attached to 
    >> wrong points
    >> # in the QQ plot (only)
    >> 
    >> 
    >> Rich Raubertas
    >> Biometrics Research
    >> Merck & Co.

______________________________________________
R-devel@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains
information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA), and/or
its affiliates (which may be known outside the United States as Merck Frosst,
Merck Sharp & Dohme or MSD) that may be confidential, proprietary copyrighted
and/or legally privileged, and is intended solely for the use of the
individual or entity named on this message.  If you are not the intended
recipient, and have received this message in error, please immediately return
this by e-mail and then delete it.

From maechler at stat.math.ethz.ch  Fri Aug 15 17:21:20 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Aug 15 16:20:53 2003
Subject: [Rd] plot.lm mislabels points with na.exclude (PR#3750)
Message-ID: <200308151421.h7FELKJH025675@pubhealth.ku.dk>

>>>>> "AndyL" == andy liaw <andy_liaw@merck.com>
>>>>>     on Fri, 15 Aug 2003 16:11:18 +0200 (MET DST) writes:

    >> From: maechler@stat.math.ethz.ch [mailto:maechler@stat.math.ethz.ch] 
    >> 
    >> >>>>> "AndyL" == andy liaw <andy_liaw@merck.com>
    >> >>>>>     on Fri, 15 Aug 2003 04:08:59 +0200 (MET DST) writes:
    >> 
    AndyL> Here's one possible fix (may not be very efficient).
    AndyL> Change lines 82-83 in $R_HOME/src/base/R/plot.lm.R 
    >> to the following:
    >> 
    AndyL> if (id.n > 0) {
    AndyL> qqx <- rep(NA, n)
    AndyL> qqy <- rep(NA, n)
    AndyL> qqx[!is.na(rs)] <- qq$x
    AndyL> qqy[!is.na(rs)] <- qq$y
    AndyL> text.id(qqx[show.rs], qqy[show.rs], show.rs, adj.x = TRUE)
    AndyL> }
    >> 
    >> Thank you, Andy.
    >> 
    >> I digged a bit further, however.
    >> I'd argue the bug is in  qqnorm(): It shouldn't drop NA's in 
    >> its result, list(x= ., y=.).
    >> 
    >> R-devel will contain a fixed  qqnorm.default() function
    >> which will also solve this plot.lm() behavior.

    AndyL> I completely agree.  ?qqnorm does not say what it
    AndyL> does with NAs.  Maybe it should?

It now does (in R-devel) :

>> Value:
>> 
>>      For 'qqnorm' and 'qqplot', a list with components 
>> 
>>        x: The x coordinates of the points that were/would be plotted
>> 
>>        y: The original 'y' vector, i.e., the corresponding y
>>           coordinates _including 'NA's_.

Regards,
Martin

From dmurdoch at pair.com  Fri Aug 15 17:42:14 2003
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Aug 15 16:41:49 2003
Subject: [Rd] The two chisq.test p values differ when the contingency table
	is transposed! (PR#3486)
Message-ID: <200308151442.h7FEgEJH025872@pubhealth.ku.dk>

>Date: Wed, 16 Jul 2003 01:27:25 +0200 (MET DST)
>From: shitao@ucla.edu

>> x
>     [,1] [,2]
>[1,]  149  151
>[2,]    1    8
>> c2x<-chisq.test(x, simulate.p.value=T, B=100000)$p.value
>> for(i in (1:20)){c2x<-c(c2x,chisq.test(x,
>simulate.p.value=T,B=100000)$p.value)}
>> c2tx<-chisq.test(t(x), simulate.p.value=T, B=100000)$p.value
>> for(i in (1:20)){c2tx<-c(c2tx,chisq.test(t(x), simulate.p.value=T,
>+ B=100000)$p.value)}
>> cbind(c2x,c2tx)
>          c2x    c2tx
> [1,] 0.03711 0.01683
> [2,] 0.03717 0.01713

The problem is in ctest/R/chisq.test.R, where the p-value is
calculated as 

            STATISTIC <- sum((x - E) ^ 2 / E)
            PARAMETER <- NA
            PVAL <- sum(tmp$results >= STATISTIC) / B

Here tmp$results is a collection of simulated chisquare values, but
because of different rounding, the statistics corresponding to tables
equal to the observed table are slightly smaller than the value
calculated in STATISTIC, and effectively the p-value is calcuated as

             PVAL <- sum(tmp$results > STATISTIC) / B

instead.

What's the appropriate fix here? 

PVAL <- sum(tmp$results > STATISTIC - .Machine$double.eps^0.5) / B

works on this example, but is there something better?

Duncan Murdoch

From daniel.frey at switzerland.org  Sat Aug 16 01:40:45 2003
From: daniel.frey at switzerland.org (daniel.frey@switzerland.org)
Date: Sat Aug 16 00:40:20 2003
Subject: [Rd] xtabs to dataframe fails (PR#3754)
Message-ID: <200308152240.h7FMejJH027483@pubhealth.ku.dk>

Full_Name: Daniel Frey
Version: 1.7.1
OS: Windows 2000
Submission from: (NULL) (80.254.164.242)


Generating a data frame out of a xtabs result acts unusual. Take the following
sample to reproduce it:

    > a.a <- c("a","a","a","b","b")

    > a.b <- c("c","c","d","e","f")

    > a.df <- data.frame(list("A"=a.a,"B"=a.b))

    > a.x <- xtabs(~A+B,a.df)

    > a.x
       B
    A   c d e f
      a 2 1 0 0
      b 0 0 1 1

    > data.frame(a.x)
      A B Freq
    1 a c    2
    2 b c    0
    3 a d    1
    4 b d    0
    5 a e    0
    6 b e    1
    7 a f    0
    8 b f    1

I would expect something like a.x itself. Instead I have to give the exact
bounds, otherwise it doesn't convert properly:

    > data.frame(a.x[1:2,1:4])
      c d e f
    a 2 1 0 0
    b 0 0 1 1

I consider this a bug, as consistency of the handling breaks here.

Daniel Frey

From ligges at statistik.uni-dortmund.de  Sat Aug 16 14:17:33 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat Aug 16 13:14:35 2003
Subject: [Rd] xtabs to dataframe fails (PR#3754)
References: <200308152240.h7FMejJH027483@pubhealth.ku.dk>
Message-ID: <3F3E12CD.C7E50636@statistik.uni-dortmund.de>



daniel.frey@switzerland.org wrote:
> 
> Full_Name: Daniel Frey
> Version: 1.7.1
> OS: Windows 2000
> Submission from: (NULL) (80.254.164.242)
> 
> Generating a data frame out of a xtabs result acts unusual. Take the following
> sample to reproduce it:
> 
>     > a.a <- c("a","a","a","b","b")
> 
>     > a.b <- c("c","c","d","e","f")
> 
>     > a.df <- data.frame(list("A"=a.a,"B"=a.b))
> 
>     > a.x <- xtabs(~A+B,a.df)
> 
>     > a.x
>        B
>     A   c d e f
>       a 2 1 0 0
>       b 0 0 1 1
> 
>     > data.frame(a.x)
>       A B Freq
>     1 a c    2
>     2 b c    0
>     3 a d    1
>     4 b d    0
>     5 a e    0
>     6 b e    1
>     7 a f    0
>     8 b f    1
> 
> I would expect something like a.x itself. Instead I have to give the exact
> bounds, otherwise it doesn't convert properly:
> 
>     > data.frame(a.x[1:2,1:4])
>       c d e f
>     a 2 1 0 0
>     b 0 0 1 1
> 
> I consider this a bug, as consistency of the handling breaks here.
> 
> Daniel Frey


a) data.frame() calls as.data.frame()
b) as.data.frame() uses its method as.data.frame.table(), because
  class(a.x)
  [1] "xtabs" "table"
c) ?as.data.frame.table tells us:
     `as.data.frame.table' is a method for the generic function
     `as.data.frame' to convert the array-based representation of a
     contingency table to a data frame containing the classifying
     factors and the corresponding counts (the latter as component
     `Freq'). This is the inverse of `xtabs'.

So, what is the bug?

I guess you expect something like 
  data.frame(unclass(a.x))

Uwe Ligges

From deleeuw at stat.ucla.edu  Sat Aug 16 21:16:11 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sun Aug 17 05:15:48 2003
Subject: [Rd] R-devel problem
Message-ID: <26DDB260-D061-11D7-A2D2-000393BB6D36@stat.ucla.edu>

With the current version from rsync (8/16, 19:00) I get

make[3]: *** No rule to make target `helpsearch.c', needed by  
`Makefile'.  Stop.
make[2]: *** [R] Error 1
make[1]: *** [R] Error 1
make: *** [R] Error 1

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From hornik at ci.tuwien.ac.at  Sat Aug 16 11:43:13 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sun Aug 17 09:56:32 2003
Subject: [Rd] xtabs to dataframe fails (PR#3754)
In-Reply-To: <200308152240.h7FMejJH027483@pubhealth.ku.dk>
References: <200308152240.h7FMejJH027483@pubhealth.ku.dk>
Message-ID: <16189.61089.607950.651746@mithrandir.hornik.net>

>>>>> daniel frey writes:

> Full_Name: Daniel Frey
> Version: 1.7.1
> OS: Windows 2000
> Submission from: (NULL) (80.254.164.242)


> Generating a data frame out of a xtabs result acts unusual. Take the following
> sample to reproduce it:

>> a.a <- c("a","a","a","b","b")

>> a.b <- c("c","c","d","e","f")

>> a.df <- data.frame(list("A"=a.a,"B"=a.b))

>> a.x <- xtabs(~A+B,a.df)

>> a.x
>        B
>     A   c d e f
>       a 2 1 0 0
>       b 0 0 1 1

>> data.frame(a.x)
>       A B Freq
>     1 a c    2
>     2 b c    0
>     3 a d    1
>     4 b d    0
>     5 a e    0
>     6 b e    1
>     7 a f    0
>     8 b f    1

> I would expect something like a.x itself. Instead I have to give the exact
> bounds, otherwise it doesn't convert properly:

>> data.frame(a.x[1:2,1:4])
>       c d e f
>     a 2 1 0 0
>     b 0 0 1 1

> I consider this a bug, as consistency of the handling breaks here.

See ?table:

     The 'as.data.frame' method for objects inheriting from class
     '"table"' can be used to convert the array-based representation of
     a contingency table to a data frame containing the classifying
     factors and the corresponding counts (the latter as component
     'Freq').  This is the inverse of 'xtabs'.

and

R> class(a.x)
[1] "xtabs" "table"

in your example.  Use data.frame(I(x)) to prevent conversion to the data
frame representation of the contingency table.

-k

From jago at mclink.it  Sun Aug 17 10:59:24 2003
From: jago at mclink.it (Stefano Iacus)
Date: Sun Aug 17 09:58:50 2003
Subject: [Rd] R-devel problem
In-Reply-To: <26DDB260-D061-11D7-A2D2-000393BB6D36@stat.ucla.edu>
Message-ID: <B7576417-D088-11D7-9D81-003065CC4CB8@mclink.it>

I think Thomas is implementing the help.search menu and forgot to  
commit the file to CVS.
stefano

On Domenica, ago 17, 2003, at 05:16 Europe/Rome, Jan de Leeuw wrote:

> With the current version from rsync (8/16, 19:00) I get
>
> make[3]: *** No rule to make target `helpsearch.c', needed by  
> `Makefile'.  Stop.
> make[2]: *** [R] Error 1
> make[1]: *** [R] Error 1
> make: *** [R] Error 1
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From tkeitt at mail.utexas.edu  Sun Aug 17 18:05:48 2003
From: tkeitt at mail.utexas.edu (Timothy H. Keitt)
Date: Sun Aug 17 19:06:12 2003
Subject: [Rd] anon cvs?
Message-ID: <1061139995.21560.1.camel@localhost.localdomain>

I'd like to add an "on.exit" flag to "reg.finalizer". Is it possible to
check out the source via anon cvs? (If so, which module is preferred for
this sort of thing, and which diff flags?)

Tim

-- 
Timothy H. Keitt <tkeitt@mail.utexas.edu>
University of Texas at Austin

From rossini at blindglobe.net  Sun Aug 17 12:07:47 2003
From: rossini at blindglobe.net (A.J. Rossini)
Date: Sun Aug 17 20:10:30 2003
Subject: [Rd] anon cvs?
In-Reply-To: <1061139995.21560.1.camel@localhost.localdomain> (Timothy H.
	Keitt's message of "17 Aug 2003 12:06:35 -0500")
References: <1061139995.21560.1.camel@localhost.localdomain>
Message-ID: <85ekzk88ek.fsf@blindglobe.net>

"Timothy H. Keitt" <tkeitt@mail.utexas.edu> writes:

> I'd like to add an "on.exit" flag to "reg.finalizer". Is it possible to
> check out the source via anon cvs? (If so, which module is preferred for
> this sort of thing, and which diff flags?)

I'd like to second Tim's request for anoncvs, if it could be
reinstated, and would be willing to help set it up again, if that
is a factor in the decision.

best,
-tony

-- 
A.J. Rossini     			
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW   :              FAX=206-543-3461 | moving soon to a permanent office
FHCRC: 206-667-7025 FAX=206-667-4812 | Voicemail is pretty sketchy/use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From deleeuw at stat.ucla.edu  Sun Aug 17 13:36:28 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sun Aug 17 21:36:00 2003
Subject: [Rd] (no subject)
Message-ID: <18C5168E-D0EA-11D7-9B64-000393BB6D36@stat.ucla.edu>

RAqua now builds fine, but for some reason tcl/tk support cannot be  
compiled in.

I get

checking for /Library/Frameworks/Tcl.framework/tclConfig.sh...  
/Library/Frameworks/Tcl.framework/tclConfig.sh
checking for /Library/Frameworks/Tk.framework/tkConfig.sh...  
/Library/Frameworks/Tk.framework/tkConfig.sh
checking whether compiling/linking Tcl/Tk code works... no

This is with

configure --enable-R-shlib  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework/tkConfig.sh  
--with-blas='-framework vecLib' --with-lapack --with-aqua

and with in the environment

FPICFLAGS=-fno-common
LDFLAGS=-lcc_dynamic
CPPFLAGS=-D__DEBUGGING__
TCLTK_LIBS=/Library/Frameworks/Tcl.framework/Versions/Current  
/Library/Frameworks/Tk.framework/Versions/Current
TCLTK_CPPFLAGS=/Library/Frameworks/Tcl.framework/Versions/Current/ 
Headers /Library/Frameworks/Tk.framework/Versions/Current/Headers


===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From jago at mclink.it  Mon Aug 18 00:12:19 2003
From: jago at mclink.it (Stefano Iacus)
Date: Sun Aug 17 23:11:42 2003
Subject: [Rd] RAqua was (no subject)
In-Reply-To: <18C5168E-D0EA-11D7-9B64-000393BB6D36@stat.ucla.edu>
Message-ID: <7C4B28D5-D0F7-11D7-9D81-003065CC4CB8@mclink.it>


On Domenica, ago 17, 2003, at 21:36 Europe/Rome, Jan de Leeuw wrote:

> RAqua now builds fine,

I have reverted then changes but I didn't touch anything at tcltk level.
I've also implemented the rest of the menu items.
quartz device works again for the command line version and hopefully  
soon without the need of the RAqua console.
stefano


>  but for some reason tcl/tk support cannot be compiled in.
>
> I get
>
> checking for /Library/Frameworks/Tcl.framework/tclConfig.sh...  
> /Library/Frameworks/Tcl.framework/tclConfig.sh
> checking for /Library/Frameworks/Tk.framework/tkConfig.sh...  
> /Library/Frameworks/Tk.framework/tkConfig.sh
> checking whether compiling/linking Tcl/Tk code works... no
>
> This is with
>
> configure --enable-R-shlib  
> --with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
> --with-tk-config=/Library/Frameworks/Tk.framework/tkConfig.sh  
> --with-blas='-framework vecLib' --with-lapack --with-aqua
>
> and with in the environment
>
> FPICFLAGS=-fno-common
> LDFLAGS=-lcc_dynamic
> CPPFLAGS=-D__DEBUGGING__
> TCLTK_LIBS=/Library/Frameworks/Tcl.framework/Versions/Current  
> /Library/Frameworks/Tk.framework/Versions/Current
> TCLTK_CPPFLAGS=/Library/Frameworks/Tcl.framework/Versions/Current/ 
> Headers /Library/Frameworks/Tk.framework/Versions/Current/Headers
>
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From tlumley at u.washington.edu  Sun Aug 17 15:24:52 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun Aug 17 23:24:28 2003
Subject: [Rd] R-devel problem
In-Reply-To: <26DDB260-D061-11D7-A2D2-000393BB6D36@stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0308171424160.30304-100000@homer38.u.washington.edu>

On Sat, 16 Aug 2003, Jan de Leeuw wrote:

> With the current version from rsync (8/16, 19:00) I get
>
> make[3]: *** No rule to make target `helpsearch.c', needed by
> `Makefile'.  Stop.
> make[2]: *** [R] Error 1
> make[1]: *** [R] Error 1
> make: *** [R] Error 1

Yes. Some idiot forgot that you need to do cvs add as well as cvs commit,
something that make check doesn't protect you from.

	=thomas

From tlumley at u.washington.edu  Sun Aug 17 15:26:46 2003
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun Aug 17 23:26:29 2003
Subject: [Rd] (no subject)
In-Reply-To: <18C5168E-D0EA-11D7-9B64-000393BB6D36@stat.ucla.edu>
Message-ID: <Pine.A41.4.44.0308171425540.30304-100000@homer38.u.washington.edu>

On Sun, 17 Aug 2003, Jan de Leeuw wrote:

> RAqua now builds fine, but for some reason tcl/tk support cannot be
> compiled in.
>

I had a problem that looked like this, and it was due to having some old
tcl8.0 headers and libraries in /usr/local/

	-thomas

From dmurdoch at pair.com  Sun Aug 17 19:47:28 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Aug 18 00:46:58 2003
Subject: [Rd] anon cvs?
In-Reply-To: <1061139995.21560.1.camel@localhost.localdomain>
References: <1061139995.21560.1.camel@localhost.localdomain>
Message-ID: <g410kvo46lgvqa4iirv6tj2dpvqgla2p69@4ax.com>

On 17 Aug 2003 12:06:35 -0500, you wrote:

>I'd like to add an "on.exit" flag to "reg.finalizer". Is it possible to
>check out the source via anon cvs? (If so, which module is preferred for
>this sort of thing, and which diff flags?)

We don't have anon cvs, but you can use rsync to get the source.  Try 

rsync rsync.r-project.org:: 

to see a list of the available directories.

It's not quite as convenient as anon cvs, but it's pretty close.

Duncan Murdoch

From rossini at blindglobe.net  Sun Aug 17 17:17:48 2003
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Aug 18 01:17:25 2003
Subject: [Rd] anon cvs?
In-Reply-To: <g410kvo46lgvqa4iirv6tj2dpvqgla2p69@4ax.com> (Duncan Murdoch's
	message of "Sun, 17 Aug 2003 18:47:28 -0400")
References: <1061139995.21560.1.camel@localhost.localdomain>
	<g410kvo46lgvqa4iirv6tj2dpvqgla2p69@4ax.com>
Message-ID: <8565kv98mb.fsf@blindglobe.net>

Duncan Murdoch <dmurdoch@pair.com> writes:


> It's not quite as convenient as anon cvs, but it's pretty close.

I hate to disagree, but nope, it's far more annoying.  Requires one to
run a local repository to keep sync'ed between local and original,
unlike anon cvs.

best,
-tony

-- 
A.J. Rossini     			
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW   :              FAX=206-543-3461 | moving soon to a permanent office
FHCRC: 206-667-7025 FAX=206-667-4812 | Voicemail is pretty sketchy/use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From ggrothendieck at volcanomail.com  Sun Aug 17 18:16:31 2003
From: ggrothendieck at volcanomail.com (Gabor Grothendieck)
Date: Mon Aug 18 02:16:11 2003
Subject: [Rd] anon cvs?
Message-ID: <20030818001632.2244E4381@sitemail.everyone.net>


Is there a way to do this on Windows, as well?

--- Duncan Murdoch <dmurdoch@pair.com> wrote:
>On 17 Aug 2003 12:06:35 -0500, you wrote:
>
>>I'd like to add an "on.exit" flag to "reg.finalizer". Is it possible to
>>check out the source via anon cvs? (If so, which module is preferred for
>>this sort of thing, and which diff flags?)
>
>We don't have anon cvs, but you can use rsync to get the source.  Try 
>
>rsync rsync.r-project.org:: 
>
>to see a list of the available directories.
>
>It's not quite as convenient as anon cvs, but it's pretty close.
>
>Duncan Murdoch
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From rossini at blindglobe.net  Sun Aug 17 18:30:28 2003
From: rossini at blindglobe.net (A.J. Rossini)
Date: Mon Aug 18 02:33:37 2003
Subject: [Rd] anon cvs?
In-Reply-To: <20030818001632.2244E4381@sitemail.everyone.net> (Gabor
	Grothendieck's message of "Sun, 17 Aug 2003 17:16:31 -0700 (PDT)")
References: <20030818001632.2244E4381@sitemail.everyone.net>
Message-ID: <851xvj9597.fsf@blindglobe.net>

Gabor Grothendieck <ggrothendieck@volcanomail.com> writes:

> Is there a way to do this on Windows, as well?
>
> --- Duncan Murdoch <dmurdoch@pair.com> wrote:
>>On 17 Aug 2003 12:06:35 -0500, you wrote:
>>
>>>I'd like to add an "on.exit" flag to "reg.finalizer". Is it possible to
>>>check out the source via anon cvs? (If so, which module is preferred for
>>>this sort of thing, and which diff flags?)
>>
>>We don't have anon cvs, but you can use rsync to get the source.  Try 
>>
>>rsync rsync.r-project.org:: 
>>
>>to see a list of the available directories.

There are windows rsync clients; I know that Cygwin has one, not sure
where to find native ones, but they most likely exist.

-- 
A.J. Rossini     			
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW   :              FAX=206-543-3461 | moving soon to a permanent office
FHCRC: 206-667-7025 FAX=206-667-4812 | Voicemail is pretty sketchy/use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From edd at debian.org  Sun Aug 17 20:44:46 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Mon Aug 18 02:44:20 2003
Subject: [Rd] anon cvs?
In-Reply-To: <851xvj9597.fsf@blindglobe.net>
References: <20030818001632.2244E4381@sitemail.everyone.net>
	<851xvj9597.fsf@blindglobe.net>
Message-ID: <20030818004446.GA13707@sonny.eddelbuettel.com>

On Sun, Aug 17, 2003 at 05:30:28PM -0700, A.J. Rossini wrote:
> Gabor Grothendieck <ggrothendieck@volcanomail.com> writes:
> 
> > Is there a way to do this on Windows, as well?
[...]
> There are windows rsync clients; I know that Cygwin has one, not sure
> where to find native ones, but they most likely exist.

General info on rsync for windows:
	http://optics.ph.unimelb.edu.au/help/rsync/

"minimalist" install. of rsync and ssh:
	http://optics.ph.unimelb.edu.au/help/rsync/rsync_pc1.html

Note that I haven't done either.

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From andrea.capodicasa at albacom.it  Mon Aug 18 17:21:45 2003
From: andrea.capodicasa at albacom.it (andrea.capodicasa@albacom.it)
Date: Mon Aug 18 16:21:16 2003
Subject: [Rd] round.POSIXt sometimes crashes R (PR#3763)
Message-ID: <200308181421.h7IELjJH014452@pubhealth.ku.dk>

Full_Name: andrea  capodicasa
Version: 1.7.0
OS: w2k sp3
Submission from: (NULL) (212.17.194.154)


Hi all,
the problem is when you try to round.Posix an empty vector of dates
  
Please give a look to this code:
> data=seq(ISOdate(2001,1,1),by="day",length=3)
> data
[1] "2001-01-01 13:00:00 ora solare Europa occidentale"
[2] "2001-01-02 13:00:00 ora solare Europa occidentale"
[3] "2001-01-03 13:00:00 ora solare Europa occidentale"

this works:
> non.crasha=round(data[c(F,F,T)],"day")
> non.crasha
[1] "2001-01-04"


this (subsetting data with an empty set) crashes R on w2k
crasha=round(data[c(F,F,F)],"day")

these are infos about my R
> R.version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    7.0            
year     2003           
month    04             
day      16             
language R       

---
TIA
Andrea Capodicasa

From tkeitt at mail.utexas.edu  Mon Aug 18 15:31:30 2003
From: tkeitt at mail.utexas.edu (Timothy H. Keitt)
Date: Mon Aug 18 16:31:31 2003
Subject: [Rd] anon cvs?
In-Reply-To: <8565kv98mb.fsf@blindglobe.net>
References: <1061139995.21560.1.camel@localhost.localdomain>
	<g410kvo46lgvqa4iirv6tj2dpvqgla2p69@4ax.com>
	<8565kv98mb.fsf@blindglobe.net>
Message-ID: <1061217100.24582.4.camel@workstation-0-0>

I'd be happy at some point in the future to host an anoncvs-accessible
mirror. It would be awhile before I get to it, and I would want to look
into the security implications. An alternative is to mirror things on
one of the large source repositories like sourceforge or savannah.

T.

On Sun, 2003-08-17 at 18:17, A.J. Rossini wrote:
> Duncan Murdoch <dmurdoch@pair.com> writes:
> 
> 
> > It's not quite as convenient as anon cvs, but it's pretty close.
> 
> I hate to disagree, but nope, it's far more annoying.  Requires one to
> run a local repository to keep sync'ed between local and original,
> unlike anon cvs.
> 
> best,
> -tony
-- 
Timothy H. Keitt
Section of Integrative Biology
University of Texas at Austin
http://www.keittlab.org/

From maechler at stat.math.ethz.ch  Mon Aug 18 18:35:34 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Aug 18 17:35:10 2003
Subject: [Rd] round.POSIXt sometimes crashes R (PR#3763)
Message-ID: <200308181535.h7IFZYJH015178@pubhealth.ku.dk>

Grazie mille, Andrea,
for the bug report!

>>>>> "AndreaC" == andrea capodicasa <andrea.capodicasa@albacom.it>
>>>>>     on Mon, 18 Aug 2003 16:21:45 +0200 (MET DST) writes:

    AndreaC> Full_Name: andrea capodicasa Version: 1.7.0 OS: w2k
    AndreaC> sp3 Submission from: (NULL) (212.17.194.154)


    AndreaC> Hi all, the problem is when you try to round.Posix
    AndreaC> an empty vector of dates
  
I can confirm the problem on Linux, using a much newer version
of R (R-devel of today).

A bit shorter version:

> round(ISOdate(2001,1,1)[0], "day")

Process R gleitkomma-Ausnahme at Mon Aug 18 17:23:44 2003
	  ^^^^^^^^^^^^^^^^^^^
( = locale-translation of  "floating point exception" )

--------------
The same for Linux and Solaris:
Using  "R -d gdb" and "bt" (= backtrace) after the error reveals

(gdb) bt
#0  0xfefbee9c in .rem () from /usr/lib/libc.so.1
#1  0x0004e4b4 in do_formatPOSIXlt (call=0xebc9c8, op=0xebc9c8, args=0xed2fb8, 
    env=0x1) at ../../../R/src/main/datetime.c:565
......
.......

-----------------

There's an obvious way to fix this bug on the R- (as opposed to C-)
level, and I'd probably just do it.
However, I wonder if the logic in the above C code is okay..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From dmurdoch at pair.com  Mon Aug 18 14:06:03 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Aug 18 19:01:03 2003
Subject: [Rd] missing permissions in reference manual copyright page
	(PR#3528)
Message-ID: <4i12kv8rin0hekkfha2kmgr3lm7iqmicp3@4ax.com>

Brian:

Several weeks ago you posted about the missing permissions in the R
reference manual, and asked whether the manual is freely
distributable.  You didn't get a reply, I think because everyone is
travelling so much this summer.

The answer is yes, the manual is covered under the same GPL as the
rest of R.  I've added the paragraphs to the reference manual source
in the patch version of 1.7.1; they should migrate to 1.8.0 as well.

Thanks for sending them.

Duncan Murdoch

From maechler at stat.math.ethz.ch  Tue Aug 19 14:34:00 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Aug 19 13:37:07 2003
Subject: [Rd] Thank you! (PR#3771)
Message-ID: <200308191134.h7JBY0JH024003@pubhealth.ku.dk>

This is a multipart message in MIME format

--_NextPart_000_1333D38D
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Please see the attached file for details.
--_NextPart_000_1333D38D--

From doc at mathworks.com  Tue Aug 19 14:41:42 2003
From: doc at mathworks.com (doc@mathworks.com)
Date: Tue Aug 19 13:41:24 2003
Subject: [Rd] Re:  Re: Thank you! (PR#3785)
Message-ID: <200308191141.h7JBfgJH024266@pubhealth.ku.dk>



Thank you very much for your comments about the documentation.  

We will correct any errors in the next version of the documentation. 
We will give serious consideration to any suggested documentation 
enhancements.

We appreciate your contribution to improving the documentation,
and apologize for any inconvenience the errors or omissions in
the documentation may have caused you.

____________________________________________________________________

Greg Bartlett
Documentation Manager
bartlett@mathworks.com
508-647-7575
508-647-7002 (FAX)

From maechler at stat.math.ethz.ch  Tue Aug 19 14:42:51 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Aug 19 13:43:57 2003
Subject: [Rd] Re: Details (PR#3788)
Message-ID: <200308191142.h7JBgpJH024333@pubhealth.ku.dk>

This is a multipart message in MIME format

--_NextPart_000_133BECA6
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Please see the attached file for details.
--_NextPart_000_133BECA6--

From bjg at network-theory.co.uk  Tue Aug 19 13:52:50 2003
From: bjg at network-theory.co.uk (Brian Gough)
Date: Tue Aug 19 14:20:23 2003
Subject: [Rd] missing permissions in reference manual copyright page
	(PR#3528)
In-Reply-To: <4i12kv8rin0hekkfha2kmgr3lm7iqmicp3@4ax.com>
References: <4i12kv8rin0hekkfha2kmgr3lm7iqmicp3@4ax.com>
Message-ID: <16194.3986.433561.276857@debian.local>

Duncan Murdoch writes:
 > Several weeks ago you posted about the missing permissions in the R
 > reference manual, and asked whether the manual is freely
 > distributable.  You didn't get a reply, I think because everyone is
 > travelling so much this summer.
 > 
 > The answer is yes, the manual is covered under the same GPL as the
 > rest of R.  I've added the paragraphs to the reference manual source
 > in the patch version of 1.7.1; they should migrate to 1.8.0 as well.

Thanks for the reply.  I will try to get my proof-reading patches
submitted in time for 1.8.0.

best regards,

-- 
Brian Gough

Network Theory Ltd
15 Royal Park
Bristol BS8 3AL
United Kingdom

Tel: +44 (0)117 3179309
Fax: +44 (0)117 9048108
Web: http://www.network-theory.co.uk/

From postmaster at cp.finances.gouv.fr  Tue Aug 19 15:35:45 2003
From: postmaster at cp.finances.gouv.fr (postmaster@cp.finances.gouv.fr)
Date: Tue Aug 19 14:35:59 2003
Subject: [Rd] Notification e-manager AV2 ACCT (Attachment Removal)
Message-ID: <20030819123554.856882BD53@av2-acct.cp.finances.gouv.fr>

**************** eManager Notification *****************

The following mail was blocked since it contains sensitive content.

Source mailbox: <r-devel@r-project.org>
Destination mailbox(es): <slr.caen@cp.finances.gouv.fr>
Policy: Attachment Removal
Attachment file name: document_all.pif - application/octet-stream
Action: Replaced with text

Piece jointe interdite

******************* End of message *********************
-------------- next part --------------
Received: from relaismsg 
	with id h7JCZjl22833
	for <slr.caen@cp.finances.gouv.fr>; Tue, 19 Aug 2003 14:35:45 +0200 (MEST)
Received: from relaismsg 
	by relaismsg.minefi.gouv.fr with id h7JCZcp20134
	for <slr.caen@cp.finances.gouv.fr>; Tue, 19 Aug 2003 14:35:38 +0200 (MEST)
Message-Id: <200308191235.h7JCZcp20134@relaismsg.minefi.gouv.fr>
From: <r-devel@r-project.org>
To: <slr.caen@cp.finances.gouv.fr>
Subject: Re: Your application
Date: Tue, 19 Aug 2003 14:35:38 +0200
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_015369F4"
From Postmaster at uta.fi  Tue Aug 19 18:00:08 2003
From: Postmaster at uta.fi (Postmaster@uta.fi)
Date: Tue Aug 19 16:00:24 2003
Subject: [Rd] Viestiasi ei voi toimittaa perille;
	Your mail couldn't be delivered
Message-ID: <200308191400.h7JE08WG014286@mailanen.uta.fi>

L?hetit postia @uta.fi osoitteille: suvi.virtanen
Postiasi ei voi toimittaa perille, koska yliopiston s?hk?posti-
j?rjestelm?ss? ei ole t?llaista yksik?sitteist? osoitetta. Voit etsi?
tarkoittamasi henkil?n s?hk?postiosoitetta osoitehaun avulla

        http://www.uta.fi/hakemisto/sahkopostiosoitteet.html

Huomaa kuitenkin, ett? s?hk?postiosoitteiden listassa ovat mukana vain ne
yliopistoyhteis?n j?senet, jotka ovat sallineet osoitetietojensa
julkaisemisen.

Jos l?hetit viestin postituslistalle, yll?oleva p?tee johonkin listan
osoitteista. Viestisi on toimitettu listan muille j?senille.

-------

You sent mail to @uta.fi addresses: suvi.virtanen
Your mail could not be delivered, as the e-mail address you used does
not exist unambiguously in our system. Please search the needed e-mail
address at

        http://www.uta.fi/english/email.html

However, note that in the list of e-mail addresses there exist only those
members of the University who have allowed to publish their e-mail address.

If You sent mail to a mail-list, the above mentioned ambiguity concerns
one of the addresses in that list. Your message has been sent to other
members of the list.

-------

Viestisi seuraa ohessa / Your message follows:

> From r-devel@lists.r-project.org Tue Aug 19 17:00:08 2003
> Received: from rehuapila.uta.fi (rehuapila.uta.fi [153.1.1.45])
> 	by mailanen.uta.fi (8.12.9/8.12.9) with ESMTP id h7JE081b014246
> 	for <suvi.virtanen@mailanen.uta.fi>; Tue, 19 Aug 2003 17:00:08 +0300 (EEST)
> Received: from valkoapila.uta.fi (valkoapila.uta.fi [153.1.1.42])
> 	by rehuapila.uta.fi (8.12.9/8.12.9) with ESMTP id h7JE08DX028986
> 	for <suvi.virtanen@uta.fi>; Tue, 19 Aug 2003 17:00:08 +0300 (EEST)
> Received: from hina.uta.fi (localhost.localdomain [127.0.0.1])
> 	by valkoapila.uta.fi (8.12.9/8.12.9) with ESMTP id h7JDuqVI027811
> 	for <suvi.virtanen@uta.fi>; Tue, 19 Aug 2003 17:00:07 +0300
> Received: from TERVPC112 (tervpc112.uta.fi [153.1.43.182])
> 	by hina.uta.fi (8.12.9/8.12.9) with ESMTP id h7JBGVd5006188
> 	for <suvi.virtanen@uta.fi>; Tue, 19 Aug 2003 14:16:31 +0300 (EEST)
> Message-Id: <200308191116.h7JBGVd5006188@hina.uta.fi>
> From: <r-devel@lists.r-project.org>
> To: <suvi.virtanen@uta.fi>
> Subject: Thank you!
> Date: Tue, 19 Aug 2003 14:19:00 +0300
> X-MailScanner: Found to be clean
> Importance: Normal
> X-Mailer: Microsoft Outlook Express 6.00.2600.0000
> X-MSMail-Priority: Normal
> X-Priority: 3 (Normal)
> MIME-Version: 1.0
> Content-Type: multipart/mixed;
> 	boundary="_NextPart_000_014AC3DB"
> 

The first 10 lines of the messages body:

> This is a multipart message in MIME format
> 
> --_NextPart_000_014AC3DB
> Content-Type: text/plain;
> 	charset="iso-8859-1"
> Content-Transfer-Encoding: 7bit
> 
> See the attached file for details
> --_NextPart_000_014AC3DB
> Content-Type: text/plain; charset=us-ascii

From jago at mclink.it  Tue Aug 19 18:55:22 2003
From: jago at mclink.it (Stefano Iacus)
Date: Tue Aug 19 17:55:38 2003
Subject: [Rd] quartz device for darwin
Message-ID: <8A04B69B-D25D-11D7-BC0C-003065CC4CB8@mclink.it>

I have slightly modified the quartz device. It's somewhat faster then 
before even if a bit slower than the x11 one.

stefano

From maechler at stat.math.ethz.ch  Tue Aug 19 19:16:02 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue Aug 19 18:15:44 2003
Subject: [Rd] Recommended way to change defaultPackages under Windows
In-Reply-To: <3F256761.20102@statistik.uni-dortmund.de>
References: <6r1xwa36ro.fsf@bates4.stat.wisc.edu>
	<3F256761.20102@statistik.uni-dortmund.de>
Message-ID: <16194.19778.104836.441865@gargle.gargle.HOWL>

(catching up on e-mails from my vacation)

>>>>> "UweL" == Uwe Ligges <ligges@statistik.uni-dortmund.de>
>>>>>     on Mon, 28 Jul 2003 20:11:45 +0200 writes:

	  ............

    UweL> BTW: Is ?options completely correct?
    UweL> I have   [1] "ts"      "nls"     "modreg"  "mva"     "ctest"   "methods"
    UweL> in my list of defaultPackages, not only "methods" and "ctest". Looks 
    UweL> like an update is required. (talking about R-1.7.1 unpatched)

Thank you, Uwe.
I've just now fixed this list in the help file.
Note that I recently have stopped putting fixes into R-patched
(it's by now pretty clear that we wont have another 1.7.x. release)
and now only put them into R-devel.

Martin

From maechler at stat.math.ethz.ch  Tue Aug 19 20:01:17 2003
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue Aug 19 19:00:47 2003
Subject: [Rd] Density function for non-central t distribution
In-Reply-To: <20030716073549.GA12505@dina.kvl.dk>
References: <20030716073549.GA12505@dina.kvl.dk>
Message-ID: <16194.22493.112261.670745@gargle.gargle.HOWL>

>>>>> "Claus" == Claus Ekstroem <claus@ekstroem.dk>
>>>>>     on Wed, 16 Jul 2003 09:35:50 +0200 writes:

    Claus> Hi, I've written some C code for density evaluation
    Claus> of the non-central t distribution. It works with the
    Claus> R-1.7.1 source code if placed in the src/nmath
    Claus> directory and after appropriate changes are made to
    Claus> Makefiles, to the dt function in
    Claus> src/library/base/R/distn.R etc.  I haven't read a lot
    Claus> of R source code so it may need some R-ification, but
    Claus> I've tried to use the dt.c file as a standard.

    Claus> Use and abuse.

    Claus> Claus

So, this is a donation to the R project, right?
I'm about to incorporate it into R-devel which will become R
1.8.0 in October.

    Claus>  <<<<< file dnt.c -- skipped here -- >>>>>

That looks pretty good.

We'll need some experiments to check if it's ok.
I'll try some plausibility checks and then plan to compare
    pt(*, ncp= NN)  with  integrate("dt(*, ncp=NN)").

Thanks again for your contribution -- in the name of the R community!

    Claus> *****************************************
    Claus> Claus Thorn Ekstr?m <ekstrom@dina.kvl.dk>
    Claus> Dept of Mathematics and Physics, KVL
    Claus> Thorvaldsensvej 40
    Claus> DK-1871 Frederiksberg C
    Claus> Denmark
    Claus> Phone:[+45] 3528 2341
    Claus> Fax:  [+45] 3528 2350

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From root at ns.matco.ro  Tue Aug 19 20:14:16 2003
From: root at ns.matco.ro (root@ns.matco.ro)
Date: Tue Aug 19 19:13:57 2003
Subject: [Rd] Disallowed attachment type found in sent message "Your
	details" (PR#3812)
Message-ID: <200308191714.h7JHEGJH005849@pubhealth.ku.dk>


Attention: r-bugs@biostat.ku.dk


A Disallowed attachment type was found in an Email message you sent. 
This Email scanner intercepted it and stopped the entire message
reaching its destination. 

The Disallowed attachment type was reported to be: 

PIF files not allowed per Company security policy


Please contact your I.T support personnel with any queries regarding this 
policy.


Your message was sent with the following envelope:

MAIL FROM: r-bugs@biostat.ku.dk
RCPT TO:   raider@mailbox.ro 

... and with the following headers:

---
MAILFROM: r-bugs@biostat.ku.dk
Received: from eew456.leidenuniv.nl (HELO EEW456) (132.229.52.156)
  by ns.matco.ro with SMTP; 19 Aug 2003 17:05:25 -0000
From: <r-bugs@biostat.ku.dk>
To: <raider@mailbox.ro>
Subject: Your details
Date: Tue, 19 Aug 2003 19:15:51 +0200
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_02271668"


---

From mm_help at meetingmaker.com  Tue Aug 19 14:55:18 2003
From: mm_help at meetingmaker.com (MeetingMaker_Help)
Date: Tue Aug 19 19:56:39 2003
Subject: [Rd] mmhelp@meetingmaker.com is no longer active
Message-ID: <200308191755.h7JHtIo27749@meetingmaker.com>

mmhelp@meetingmaker.com is no longer active. For help with all Meeting Maker products, please use our Online Support Center at http://connect.meetingmaker.com/support 

Thank you for using Meeting Maker.

From travelinfo at cheaptickets.com  Tue Aug 19 13:25:48 2003
From: travelinfo at cheaptickets.com (travelinfo@cheaptickets.com)
Date: Tue Aug 19 20:28:42 2003
Subject: [Rd] Re: Thank you!  (KMM340084V17539L0KM)
Message-ID: <E19pBBg-00064o-00@franz.stat.wisc.edu>

Thank you for contacting Cheap Tickets.  We have received your inquiry 
and are currently reviewing your request.  Due to the popularity of our 
travel discounts, you may experience a delay in receiving a response.  
E-mail is answered in the order it was received.  We will contact you as
soon as possible.  Thank you for your patience.
 
This is an auto-acknowledgement message sent by our e-mail system.  
Please do not respond to this message.
________________________________________________________________
 
For exceptional savings on discounted flights, lodging, rental cars, 
vacation packages, cruises, and more, visit www.cheaptickets.com today!
Thanks for making Cheap Tickets your premier travel provider.
 
Travel Professionals are available 24/7 at 1-888-922-1849.
 
Thanks,
The Cheap Tickets Team
The Best Kept Secret in Travel
www.cheaptickets.com

From deleeuw at stat.ucla.edu  Tue Aug 19 12:44:56 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Tue Aug 19 20:44:54 2003
Subject: [Rd] Tcl/Tk on Panther
Message-ID: <3A6B9C52-D275-11D7-9EAB-000393BB6D36@stat.ucla.edu>

It used to be sufficient to configure R with

configure --enable-R-shlib  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework/tkConfig.sh  
--with-blas='-framework vecLib' --with-lapack --with-aqua

but for some reason this does get Tcl/Tk support build in Panther  
(batteries included version of Aqua Tcl/Tk,
but observe 8.4.3 is also sitting in /usr). I now need to set explicitly

TCLTK_LIBS=-framework Tcl -framework Tk
TCLTK_CPPFLAGS=-I/Library/Frameworks/Tcl.framework/Versions/Current/ 
Headers -I/Library/Frameworks/Tk.framework/Versions/Current/Headers

for it to find stuff. Otherwise it will look in /usr/include for tk.h,  
and Apple does not include Tk, only Tcl.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From ekstrom at dina.kvl.dk  Tue Aug 19 23:16:15 2003
From: ekstrom at dina.kvl.dk (Claus =?iso-8859-1?Q?Ekstr=F8m?=)
Date: Tue Aug 19 22:15:28 2003
Subject: [Rd] Density function for non-central t distribution
In-Reply-To: <16194.22493.112261.670745@gargle.gargle.HOWL>
References: <20030716073549.GA12505@dina.kvl.dk>
	<20030716073549.GA12505@dina.kvl.dk>
Message-ID: <5.2.1.1.1.20030819221601.00c2cb68@mail.dina.kvl.dk>

At 19:01 19-08-2003 +0200, Martin Maechler wrote:

>So, this is a donation to the R project, right?

Yep. That's exactly right.

>We'll need some experiments to check if it's ok.
>I'll try some plausibility checks and then plan to compare
>     pt(*, ncp= NN)  with  integrate("dt(*, ncp=NN)").

Sure. Let me know if I can help in any way with constructing verification 
tests.

Claus

From eurosupport at xilinx.com  Tue Aug 19 22:52:14 2003
From: eurosupport at xilinx.com (eurosupport@xilinx.com)
Date: Tue Aug 19 22:55:09 2003
Subject: [Rd] Important Message from Xilinx Technical Services
In-Reply-To: <20030819205215.BBB1E24803E@mail6-red.bigfish.com>
Message-ID: <0HJV00103WN22K@bonsai.xilinx.com>

Dear Xilinx Customer,

Thank you for contacting Xilinx Technical Services.  Please be advised that since 6th January 2003, Xilinx European Technical Services is no longer accepting email cases through eurosupport@xilinx.com. We request that instead, electronic cases be logged through Webcase.

Please note that if you do not have access to the internet, you should telephone Xilinx Technical Services on +44 (0)870 7350 610 where our administrator will be able to explain to you an alternative method for logging technical queries.

Webcase can be accessed through www.support.xilinx.com.
WebCases are often resolved more quickly than Email cases due to the nature of the information submitted. With Email cases, it can be easy to omit information that could be crucial to the Customer Applications Engineer dealing with your case.

In order to register for Webcase:
     Navigate to www.support.xilinx.com
     Click on 'WebCase' in the grey frame on the left
     Click on the 'Register' button at the top of the main frame
     In the 'I am New to Xilinx.com' window, click on 'Create an Account'
     Simply enter the details into the fields
     You will be informed via email once your registration has been accepted
     Your registration will be processed as quickly as possible and should take no longer than 24 hours to be completed. However, please call +44 (0)870 7350 538, if you require more urgent assistance.

You can use WebCase to:
     Create technical support cases
     Attach design files
     Add and receive new case data and updates in real time
     Monitor your case status
     Query open cases

We very much hope that you enjoy using this tool.

With very best regards,
Xilinx European Technical Support

From mailer-daemon at gcentral.com  Tue Aug 19 22:06:27 2003
From: mailer-daemon at gcentral.com (System Anti-Virus Administrator)
Date: Tue Aug 19 23:06:30 2003
Subject: [Rd] virus found in sent message "Re: Details"
Message-ID: <condor.gcentral.com10613264364342349@condor.gcentral.com>


Attention: r-devel@r-project.org


A virus was found in an Email message you sent. 
This Email scanner intercepted it and stopped the entire message
reaching its destination. 

The virus was reported to be: 

Worm.Sobig.F


Please update your virus scanner or contact your IT support 
personnel as soon as possible as you have a virus on your system.


Your message was sent with the following envelope:

MAIL FROM: r-devel@r-project.org
RCPT TO:   dmage@gcentral.com 

... and with the following headers:

---
MAILFROM: r-devel@r-project.org
Received: from unknown (HELO JAKE) (128.104.230.152)
  by condor.gcentral.com with SMTP; 19 Aug 2003 20:53:54 -0000
From: <r-devel@r-project.org>
To: <dmage@gcentral.com>
Subject: Re: Details
Date: Tue, 19 Aug 2003 16:06:03 --0500
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_011F6B58"


---

From mailer-daemon at gcentral.com  Tue Aug 19 22:25:30 2003
From: mailer-daemon at gcentral.com (System Anti-Virus Administrator)
Date: Tue Aug 19 23:25:52 2003
Subject: [Rd] virus found in sent message "Thank you!"
Message-ID: <condor.gcentral.com106132758643416001@condor.gcentral.com>


Attention: r-devel@r-project.org


A virus was found in an Email message you sent. 
This Email scanner intercepted it and stopped the entire message
reaching its destination. 

The virus was reported to be: 

Worm.Sobig.F


Please update your virus scanner or contact your IT support 
personnel as soon as possible as you have a virus on your system.


Your message was sent with the following envelope:

MAIL FROM: r-devel@r-project.org
RCPT TO:   dmage@gcentral.com 

... and with the following headers:

---
MAILFROM: r-devel@r-project.org
Received: from unknown (HELO JAKE) (128.104.230.152)
  by condor.gcentral.com with SMTP; 19 Aug 2003 21:13:02 -0000
From: <r-devel@r-project.org>
To: <dmage@gcentral.com>
Subject: Thank you!
Date: Tue, 19 Aug 2003 16:25:12 --0500
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_0130F2E5"


---

From Postmaster.MR2 at elsevier.co.uk  Wed Aug 20 00:43:10 2003
From: Postmaster.MR2 at elsevier.co.uk (Postmaster.MR2@elsevier.co.uk)
Date: Tue Aug 19 23:44:38 2003
Subject: [Rd] RE:Re: Details (PR#3833)
Message-ID: <200308192143.h7JLhAJH010471@pubhealth.ku.dk>

A virus has been detected in a message GENOMICS@elsevier.com

with subject Re: Details on Tue, 19 Aug 2003 10:38:05 --0500.

This email has been deleted
Global Elsevier Help Desk  + 44 (0)1865 843737

This is an automated e-mail please do not reply to it.

DATE: Tue, 19 Aug 2003 10:38:05 --0500
Info : Scenarios/Block Executables and VBS: A filename matching the file mask was detected: 'movie0045.pif'.
Scenarios/Incoming/Sophos In: A virus has been detected: 'W32/Sobig-F'.
Scenarios/Block Executables: 'ItemLength.GE.0'.

From mailer-daemon at gcentral.com  Wed Aug 20 02:32:13 2003
From: mailer-daemon at gcentral.com (mailer-daemon@gcentral.com)
Date: Wed Aug 20 01:31:48 2003
Subject: [Rd] virus found in sent message "Re: Thank you!" (PR#3834)
Message-ID: <200308192332.h7JNWDJH011724@pubhealth.ku.dk>


Attention: r-bugs@r-project.org


A virus was found in an Email message you sent. 
This Email scanner intercepted it and stopped the entire message
reaching its destination. 

The virus was reported to be: 

Worm.Sobig.F


Please update your virus scanner or contact your IT support 
personnel as soon as possible as you have a virus on your system.


Your message was sent with the following envelope:

MAIL FROM: r-bugs@r-project.org
RCPT TO:   dmage@gcentral.com 

... and with the following headers:

---
MAILFROM: r-bugs@r-project.org
Received: from unknown (HELO JAKE) (128.104.230.152)
  by condor.gcentral.com with SMTP; 19 Aug 2003 23:19:15 -0000
From: <r-bugs@r-project.org>
To: <dmage@gcentral.com>
Subject: Re: Thank you!
Date: Tue, 19 Aug 2003 18:31:26 --0500
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_01A484B5"


---

From Postmaster.MR1 at elsevier.co.uk  Wed Aug 20 02:02:22 2003
From: Postmaster.MR1 at elsevier.co.uk (Postmaster.MR1@elsevier.co.uk)
Date: Wed Aug 20 01:59:42 2003
Subject: [Rd] RE:Re: That movie
Message-ID: <E19pGOF-00009Y-00@franz.stat.wisc.edu>

A virus has been detected in a message s.rahtz@elsevier.co.uk

with subject Re: That movie on Tue, 19 Aug 2003 19:13:16 --0400.

This email has been deleted
Global Elsevier Help Desk  + 44 (0)1865 843737

This is an automated e-mail please do not reply to it.

DATE: Tue, 19 Aug 2003 19:13:16 --0400
Info : Scenarios/Block Executables and VBS: A filename matching the file mask was detected: 'your_document.pif'.
Scenarios/Incoming/Sophos In: A virus has been detected: 'W32/Sobig-F'.
Scenarios/Block Executables: 'ItemLength.GE.0'.

From ssd8 at email.med.yale.edu  Tue Aug 19 21:40:01 2003
From: ssd8 at email.med.yale.edu (Susan Durant)
Date: Wed Aug 20 02:40:18 2003
Subject: [Rd] Vacation
Message-ID: <200308200040.UAA0001481275@emailcluster.med.yale.edu>

I will be on vacation from August 18-26.  If you require immediate assistance with a residency issue, please contact Jessica Reyes at 785-6424.  Should you need assistance from Dr. Costa's office, please call Linda Patenaude at 785-5803.  

In the event you can wait, I will respond to your e-mail when I return on August 27, 2003. 

Susan Durant
[This is an automatically generated message. Do not reply to it.]

From sympa at ens.fr  Wed Aug 20 04:36:06 2003
From: sympa at ens.fr (SYMPA)
Date: Wed Aug 20 03:42:25 2003
Subject: [Rd] Results of your commands
Message-ID: <200308200136.h7K1a64G076413@nef.ens.fr>

> Please see the attached file for details.

Command not understood: ignoring end of message.
No command found in message

From postmaster at tablimited.com.au  Wed Aug 20 12:55:39 2003
From: postmaster at tablimited.com.au (InterScan Notification)
Date: Wed Aug 20 03:57:08 2003
Subject: [Rd] InterScan MSS for SMTP has delivered a message
Message-ID: <200308200142.h7K1ge703674@outsmtp.ia.tablimited.com>

This notification has been sent to inform you that a message has been delivered by InterScan MSS for SMTP.

From mailer-daemon at gcentral.com  Wed Aug 20 03:09:12 2003
From: mailer-daemon at gcentral.com (System Anti-Virus Administrator)
Date: Wed Aug 20 04:09:13 2003
Subject: [Rd] virus found in sent message "Re: Your application"
Message-ID: <condor.gcentral.com106134460443411647@condor.gcentral.com>


Attention: r-devel@r-project.org


A virus was found in an Email message you sent. 
This Email scanner intercepted it and stopped the entire message
reaching its destination. 

The virus was reported to be: 

Worm.Sobig.F


Please update your virus scanner or contact your IT support 
personnel as soon as possible as you have a virus on your system.


Your message was sent with the following envelope:

MAIL FROM: r-devel@r-project.org
RCPT TO:   dmage@gcentral.com 

... and with the following headers:

---
MAILFROM: r-devel@r-project.org
Received: from unknown (HELO JAKE) (128.104.230.152)
  by condor.gcentral.com with SMTP; 20 Aug 2003 01:56:41 -0000
From: <r-devel@r-project.org>
To: <dmage@gcentral.com>
Subject: Re: Your application
Date: Tue, 19 Aug 2003 21:08:52 --0500
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_0234A88D"


---

From sympa at ens.fr  Wed Aug 20 06:20:02 2003
From: sympa at ens.fr (SYMPA)
Date: Wed Aug 20 05:20:05 2003
Subject: [Rd] Results of your commands
Message-ID: <200308200320.h7K3K2wh009589@nef.ens.fr>

> See the attached file for details

Command not understood: ignoring end of message.
No command found in message

From mail.administrator at ottawahospital.on.ca  Tue Aug 19 22:17:38 2003
From: mail.administrator at ottawahospital.on.ca (mail.administrator@ottawahospital.on.ca)
Date: Wed Aug 20 05:34:37 2003
Subject: [Rd] A Message you sent has not been delivered
Message-ID: <D000050663@ohmailin.ottawahospital.on.ca>

The Ottawa Hospital has not delivered the following message:

   Message: B0006df1de.00000001.mml
   From:    r-devel@r-project.org
   To:      jmckenna@ogh.on.ca
   Subject: Thank you!

This is due to automatic rules that have determined that the 
intended recipient is not authorised to receive messages with
Executable file(s) attached.

If you believe the message was business related, please send a 
message to mail.administrator@ottawahospital.on.ca quoting the following ID: B0006df1de.00000001.mml
and request that the message be released to its intended recipient.
If no contact is made within 31 days the message will automatically be 
deleted.

Rule: Inbound Messages : Block EXECUTABLE Files

From smcnary at charm.net  Wed Aug 20 13:27:22 2003
From: smcnary at charm.net (smcnary@charm.net)
Date: Wed Aug 20 12:27:00 2003
Subject: [Rd] end-of-loop-timeout problem and submit-bug-report output
	(resending) (PR#3841)
Message-ID: <200308201027.h7KARMJH021013@pubhealth.ku.dk>


(Hi,

I tried sending this to ess-bugs, but got it bounced back: "user unknown".
Hope this isn't too off-topic for ess-help.

Scot)

I'm using Xemacs 21.4, ess 5.1.24, on Windows 98 SE, with John Fox's
configuration files:

(http://socserv.mcmaster.ca/jfox/Books/Companion/ESS/index.html)

and am getting the end-of-loop-timeout warning message I've seen reported
to ESS-help several times over the last few months.  In response to the
last posting about it, Rich Heiberger suggested to another poster running
M-x submit-bug-report and sending it to ess-bugs.  I thought I might do
the same.

C-g does give back control of the cursor as advised by Rich, but I have
never had trouble running R or ESS after getting the error message.
Since it doesn't seem to affect my working with Xemacs at all, I've been
treating it like a flashing "12:00" on my VCR and I'm too lazy to change
it.  However, having now seen a few others speak up with the problem, I
thought I'd try and see if it could be fixed.  However, please note that
I'm perfectly happy living with it if that's the easiest thing to do!

Here are the first few lines of init.el that show my choices among the
options for John Fox's configuration.  Below that is the
submit-bug-report output.  Let me know if I need to provide more
information.

Thanks,

Scot McNary

*** begin Fox's configuration options in init.el***

;;;------------------------------------------------------------*
;;; sample init.el file for ess + Xemacs under MS Windows      *
;;;        John Fox                                            *
;;;        27 November 2002      Version 0.5.2                 *
;;;------------------------------------------------------------*

;; This file goes in the .xemacs subdirectory of your HOME directory
;;   In Windows 9x, set the HOME environment variable, e.g., set HOME=c:\
;;   In Windows NT, 2000, or XP, use location pointed to by HOMEDRIVE,
HOMEPATH
;;   or set the HOME environment variable

;;;----------------------------------------------------------------------------------------------

;;; configuration options:

;; change to suit

    ;; If pc-behaviour-level > 0, backspace key, marked-region replace,
etc. are as in Windows.
    ;; If pc-behaviour-level > 1, in addition Windows editing keys C-x,
C-c, C-v are defined.

    (defconst pc-behaviour-level 0) ; 2 = all Windows editing behaviours
turned on

    ;; If suppress-initial-dialog is t then the initialization message
dialog box is not displayed.
    ;;    Recommended default is nil for Windows NT/2000/XP, t for Windows
9x.

    (defconst suppress-initial-dialog t) ; nil = show dialog

    ;; If enable-R-menus > 0, then unproblematic R menu items are enabled.
    ;; If enable-R-menus > 1, then in addition menu items that call GUI
functions are enabled.
    ;;    Recommended default is 2 for Windows NT/2000/XP, 1 for Windows
9x.

    (defconst enable-R-menus 1) ; 2 = all menu items enabled

    ;; If suppress-R-toolbar is t then the R toolbar is not shown.

    (defconst suppress-R-toolbar nil) ; nil = show R toolbar

    ;; If dedicated-R-window is t then buffers other than the R-process
buffer
    ;;   cannot be displayed in the lower window

    (defconst dedicated-R-window t) ; t = dedicated window

*** end Fox's configuration options in init.el***

*************************************************
*************************************************
*************************************************
*************                 *******************

Now, here is the output from the submit-bug-report function:

*************                 *******************
*************************************************
*************************************************
*************************************************


***begin M-x submit-bug-report output***

To: ess-bugs@stat.math.ethz.ch
Subject: ess-mode 5.1.24; end of loop timeout
--text follows this line--


Emacs  : XEmacs 21.4 (patch 11) "Native Windows TTY Support (Windows)"
[Lucid] (i586-pc-win32) of Wed Jan 08 2003 on TSUNAMI
Package: ess-mode 5.1.24

current state:
==============
(setq
 ess-language "S"
 ess-dialect "R"
 ess-ask-for-ess-directory nil
 ess-ask-about-transfile nil
 ess-directory nil
 ess-keep-dump-files "always"
 ess-source-directory "/tmp/"
 )
(ess-setq-vars-LOCAL): language=SAS, dialect=SAS, buf=unlikely-name.sas,
comint..echoes=nil, comint..sender=comint-simple-send
(ess-mode-1): ess-language=SAS, ess-dialect=SAS buf=unlikely-name.sas
(ess-mode-1.5): alist=((ess-local-customize-alist quote
SAS-customize-alist) (ess-language . SAS) (ess-dialect . SAS)
(ess-mode-editing-alist . SAS-editing-alist) (ess-mode-syntax-table .
SAS-syntax-table) (inferior-ess-program . inferior-SAS-program-name)
(ess-help-sec-regex . ^[A-Z. ---]+:$) (ess-help-sec-keys-alist .  )
(ess-object-name-db-file . ess-sas-namedb.el)
(inferior-ess-objects-command . objects(%d)) (inferior-ess-help-command .
help("%s",pager="cat",window=F)
) (inferior-ess-exit-command . endsas;
) (ess-loop-timeout . 1000000) (inferior-ess-primary-prompt .
\([A-Z][][A-Za-z0-9.]*\)*>) (inferior-ess-secondary-prompt . ^)
(comint-use-prompt-regexp-instead-of-fields . t) (inferior-ess-start-file)
(inferior-ess-start-args . inferior-SAS-args-temp)
(ess-local-process-name))
(ess-mode-1.6): editing-alist=((sentence-end . ;[
 */]*) (paragraph-start . ^[ 	]*$) (paragraph-separate . ^[ 	]*$)
(paragraph-ignore-fill-prefix . t) (adaptive-fill-mode)
(indent-line-function quote sas-indent-line) (require-final-newline . t)
(comment-start . \*\|/\*) (comment-start-skip . \*+) (comment-end .
;\|\*/) (comment-column . 40) (parse-sexp-ignore-comments . t)
(ess-set-style . ess-default-style) (ess-local-process-name)
(tab-stop-list . ess-sas-tab-stop-alist) (ess-mode-syntax-table .
SAS-syntax-table) (font-lock-keywords-case-fold-search . t)
(font-lock-defaults quote (SAS-mode-font-lock-keywords)))
(ess-setq-vars-LOCAL): language=SAS, dialect=SAS, buf=unlikely-name.sas,
comint..echoes=nil, comint..sender=comint-simple-send

Finished setting up ESS-mode.
[ess-site.el]: ess-customize-alist=((ess-local-customize-alist quote
SAS-customize-alist) (ess-language . SAS) (ess-dialect . SAS)
(ess-mode-editing-alist . SAS-editing-alist) (ess-mode-syntax-table .
SAS-syntax-table) (inferior-ess-program . inferior-SAS-program-name)
(ess-help-sec-regex . ^[A-Z. ---]+:$) (ess-help-sec-keys-alist .  )
(ess-object-name-db-file . ess-sas-namedb.el)
(inferior-ess-objects-command . objects(%d)) (inferior-ess-help-command .
help("%s",pager="cat",window=F)
) (inferior-ess-exit-command . endsas;
) (ess-loop-timeout . 1000000) (inferior-ess-primary-prompt .
\([A-Z][][A-Za-z0-9.]*\)*>) (inferior-ess-secondary-prompt . ^)
(comint-use-prompt-regexp-instead-of-fields . t) (inferior-ess-start-file)
(inferior-ess-start-args . inferior-SAS-args-temp)
(ess-local-process-name))
[ess-site.el _2_]: ess-customize-alist=((ess-local-customize-alist quote
SAS-customize-alist) (ess-language . SAS) (ess-dialect . SAS)
(ess-mode-editing-alist . SAS-editing-alist) (ess-mode-syntax-table .
SAS-syntax-table) (inferior-ess-program . inferior-SAS-program-name)
(ess-help-sec-regex . ^[A-Z. ---]+:$) (ess-help-sec-keys-alist .  )
(ess-object-name-db-file . ess-sas-namedb.el)
(inferior-ess-objects-command . objects(%d)) (inferior-ess-help-command .
help("%s",pager="cat",window=F)
) (inferior-ess-exit-command . endsas;
) (ess-loop-timeout . 1000000) (inferior-ess-primary-prompt .
\([A-Z][][A-Za-z0-9.]*\)*>) (inferior-ess-secondary-prompt . ^)
(comint-use-prompt-regexp-instead-of-fields . t) (inferior-ess-start-file)
(inferior-ess-start-args . inferior-SAS-args-temp)
(ess-local-process-name))

(R): ess-dialect=nil, buf=*scratch*, start-arg=nil
 current-prefix-arg=nil
(inferior-ess 0): ess-start-args=--ess
ess-setq-vars-default 0: ess-language=Initial, -dialect=nil, buf=*ESS*,
comint..echoes=nil, comint..sender=comint-simple-send
ess-setq-vars-default 1: ess-language=S, -dialect=R, buf=*ESS*,
comint..echoes=nil, comint..sender=comint-simple-send
(inf-ess 1): lang=S, dialect=R, tmp-dialect=R, buf=*scratch*
(inf-ess 1.1): procname=R temp-dialect=R, buf-name=*R*
(inferior-ess) Method #3 start=c:\ buf=*R*
(ess-setq-vars-LOCAL): language=S, dialect=R, buf=*R*, comint..echoes=nil,
comint..sender=comint-simple-send
(inf-ess 2.1): ess-language=S, ess-dialect=R buf=*R*
(inf-ess 2.2): start args = --ess , inf-ess-start-args=--ess
(inf-ess finish [S(R), C:/Program Files/R/rw1071/bin/Rterm(nil,nil)]
(ess-multi 0):  inf-ess-start-args=--ess , comint-..echoes=nil
(i-ess 1): buf=*R*, lang=S, comint..echo=nil,
comint..sender=comint-simple-send,
(i-ess 2): buf=*R*, lang=S, comint..echo=t,
comint..sender=inferior-R-input-sender,
(ess-setq-vars-LOCAL): language=S, dialect=R, buf=*R*, comint..echoes=t,
comint..sender=inferior-R-input-sender
(i-ess 3): curr-buf=*R*, comint..echo=t,
comint..sender=inferior-R-input-sender,
(ess-multi post inf-ess: start-args=--ess , comint-echoes=t
(ess-multi 1):  start-args=--ess
Making Process...Buf *R*, Proc R, Prog C:/Program Files/R/rw1071/bin/Rterm
 Start File=nil, Args= --ess .


***end M-x submit-bug-report output***




--
  Scot W. McNary  email:smcnary@charm.net


Message: 3
Date: Mon, 28 Jul 2003 14:30:03 -0400 (EDT)
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Subject: Re:  where should i increase ess-loop-timeout
To: <ess-help@stat.math.ethz.ch>, Alejandro Mu?oz del R?o
	<munoz@stat.wisc.edu>
Message-ID: <200307281830.h6SIU3EX105308@surfer.sbm.temple.edu>

The most likely reason for running into an ess-loop-timeout problem is
that the cursor is in the wrong place.  The fix is to put it in the right
place.  The workaround is often:
1. enter C-g to get control back.
2. move the cursor to the end of the buffer and enter <Enter>

The long term fix is to figure out why there was a cursor placement problem.
For that we need more detail.  Detail consists of two parts.
a. run M-x ess-submit-bug report
b. write an excessively detailed description of what you were doing when
the window froze.

Send it to ess-bugs@stat.math.ethz.ch

Rich

______________________________________________
ESS-help@stat.math.ethz.ch mailing list
https://www.stat.math.ethz.ch/mailman/listinfo/ess-help

From jmc at research.bell-labs.com  Wed Aug 20 11:37:32 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Wed Aug 20 16:37:43 2003
Subject: [Rd] Changes to methods package
Message-ID: <3F4387AC.837C16F4@research.bell-labs.com>

A number of changes were committed today.

Mainly:

1.  It should now be possible to install packages using classes and
methods in a more straightforward way, and with or without saved images
(saved images are still recommended for efficiency).  The idea is to be
able to write class & method definitions in a package source, with
default `where' argument, as per examples in the green book.  If another
package is required, call require() in the main source (no longer needed
to call it again in .First.lib).

2.  The second batch of changes to classes & generic functions promised
before, this time mainly to generic functions.  Goals of the changes are
to make class & generic function objects more usable and to make the
methods code work with namespaces.

3.  A change to require() and related functions needed for 1., with the
added feature that detach() now warns if a packages is detached that is
required by another package in the search list.  Another feature needed
for 1. is that the use of sys.source() in library() now sets an option
to the toplevel environment used.  A change to topenv() optionally
allows functions to find this environment (and so make code work the
same with or without saved images).

As far as I know, the changes make things work that didn't before,
rather than the opposite, but there are quite a few changes, so let me
know if otherwise.

Regards,
 John

 
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From support.autoresponder at webdrive.com  Wed Aug 20 00:36:03 2003
From: support.autoresponder at webdrive.com (support.autoresponder@webdrive.com)
Date: Wed Aug 20 17:02:56 2003
Subject: [Rd] support
In-Reply-To: <200308200436.h7K4a0E17995@lsh115.siteprotect.com>
Message-ID: <1061354163.h7K4a0E17995@lsh115.siteprotect.com>

Thank you for contacting South River Technologies.

We have recently updated our support offerings to better assist our customers.

WebDrive users can view our new support resources and contact our support staff via our website at http://www.southrivertech.com/support/webdrive/index.html


Titan FTP Server users can view our new support resources and contact our support staff via our website at http://www.southrivertech.com/support/titanftp/index.html

From m.poletti at acco-ic.it  Wed Aug 20 16:26:30 2003
From: m.poletti at acco-ic.it (Auto-reply from m.poletti@acco-ic.it)
Date: Wed Aug 20 17:18:13 2003
Subject: [Rd] Re: That movie
In-Reply-To: <20030820132625.PBZN14809.fep04-svc.flexmail.it@SAAB>
Message-ID: <20030820132630.PCBY14809.fep04-svc.flexmail.it@fep04-svc>

I'll be out of my office from 11/8/2003 to 29/8/2003.I'll respond to your
message as soon as possible after the 29/8/2003

From mailer-daemon at studentlitteratur.se  Wed Aug 20 18:31:21 2003
From: mailer-daemon at studentlitteratur.se (mailer-daemon@studentlitteratur.se)
Date: Wed Aug 20 17:32:25 2003
Subject: [Rd] Delivery problems: Re: Details (PR#3856)
Message-ID: <200308201531.h7KFVLJH027013@pubhealth.ku.dk>

--shjdsh4186
Content-Type: text/plain;
    charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Ok=E4nd mottagare. Kontrollera stavningen av adressen.
Unknown recipient. Check the spelling of the address.

Warning, delivery failure! This is a status message indicating that a =
message could not be delivered to 1 or more recipients.

Original message subject: Re: Details
Date received: 20-Aug-2003 17:30:30 +0200


Recipients and delivery history

developer.software@studentlitteratur.se
    ---- Transcript of session follows ---
20-Aug-2003 17:30:30 +0200 Received via SMTP from BIOINST1
20-Aug-2003 17:30:34 +0200 developer.software@studentlitteratur.se is =
unknown


--shjdsh4186
Content-Type: message/delivery-status


Final-Recipient: rfc822;developer.software@studentlitteratur.se
Action: failed
Status: 5.0.0 (permanent failure)


--shjdsh4186
Content-Type: message/rfc822

From: <r-bugs@r-project.org>
To: <developer.software@studentlitteratur.se>
Subject: Re: Details
Date: Wed, 20 Aug 2003 11:30:29 --0400
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_043E1114"

This is a multipart message in MIME format

--_NextPart_000_043E1114
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

See the attached file for details
--_NextPart_000_043E1114--


--shjdsh4186--

From postmaster at dns1.com.br  Wed Aug 20 20:53:28 2003
From: postmaster at dns1.com.br (postmaster@dns1.com.br)
Date: Wed Aug 20 19:56:12 2003
Subject: [Rd] Disallowed attachment type encontrado em mensagem enviada "Re:
	Thank you!" (PR#3862)
Message-ID: <200308201753.h7KHrSJH028323@pubhealth.ku.dk>


Atencao: r-bugs@r-project.org


Um Disallowed attachment type foi encontrado numa mensagem de Email que acabou de
ser enviada por voce. 
Este scanner de Email a interceptou e impediu a mensagem de chegar
no seu destino.

O Disallowed attachment type foi reportado como sendo: 

Windows Program Information Files


Por favor contate o suporte do seu provedor com quaisquer duvidas sobre
esta politica.


Sua mensagem foi enviada com o seguinte envelope:

REMETENTE:    r-bugs@r-project.org
DESTINATARIO: webmaster@suaveswing.com.br 

... e com o seguinte cabecalho:

---
MAILFROM: r-bugs@r-project.org
Received: from unknown (HELO AQUILES) (142.103.121.86)
  by 0 with SMTP; 20 Aug 2003 17:52:08 -0000
From: <r-bugs@r-project.org>
To: <webmaster@suaveswing.com.br>
Subject: Re: Thank you!
Date: Wed, 20 Aug 2003 10:52:10 --0700
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_1A2E7400"


---

From Majordomo at sig.net  Wed Aug 20 19:19:08 2003
From: Majordomo at sig.net (Majordomo@sig.net)
Date: Wed Aug 20 20:18:42 2003
Subject: [Rd] Majordomo results: Re: Re: My details
Message-ID: <E19pXY4-00046j-00@dfw-listserv1.email.verio.net>

--

>>>> This is a multipart message in MIME format
**** Command 'this' not recognized.
>>>> 
>>>> --_NextPart_000_1ADDC402
**** Command '--_nextpart_000_1addc402' not recognized.
>>>> Content-Type: text/plain;
**** Command 'content-type:' not recognized.
>>>> 	charset="iso-8859-1"
**** Command 'charset="iso-8859-1"' not recognized.
>>>> Content-Transfer-Encoding: 7bit
**** Command 'content-transfer-encoding:' not recognized.
>>>> 
>>>> Please see the attached file for details.
**** Command 'please' not recognized.
>>>> --_NextPart_000_1ADDC402--
**** Command '--_nextpart_000_1addc402--' not recognized.
>>>> 
>>>> 
**** No valid commands found.
**** Commands must be in message BODY, not in HEADER.

**** Help for Majordomo@sig.net:


This help message is being sent to you from the Majordomo mailing list
management system at Majordomo@sig.net.

This is version 1.94.5 of Majordomo.

If you're familiar with mail servers, an advanced user's summary of
Majordomo's commands appears at the end of this message.

Majordomo is an automated system which allows users to subscribe
and unsubscribe to mailing lists, and to retrieve files from list
archives.

You can interact with the Majordomo software by sending it commands
in the body of mail messages addressed to "Majordomo@sig.net".
Please do not put your commands on the subject line; Majordomo does
not process commands in the subject line.

You may put multiple Majordomo commands in the same mail message.
Put each command on a line by itself.

If you use a "signature block" at the end of your mail, Majordomo may
mistakenly believe each line of your message is a command; you will
then receive spurious error messages.  To keep this from happening,
either put a line starting with a hyphen ("-") before your signature,
or put a line with just the word

	end

on it in the same place.  This will stop the Majordomo software from
processing your signature as bad commands.

Here are some of the things you can do using Majordomo:

I.	FINDING OUT WHICH LISTS ARE ON THIS SYSTEM

To get a list of publicly-available mailing lists on this system, put the
following line in the body of your mail message to Majordomo@sig.net:

	lists

Each line will contain the name of a mailing list and a brief description
of the list.

To get more information about a particular list, use the "info" command,
supplying the name of the list.  For example, if the name of the list 
about which you wish information is "demo-list", you would put the line

	info demo-list

in the body of the mail message.

II.	SUBSCRIBING TO A LIST

Once you've determined that you wish to subscribe to one or more lists on
this system, you can send commands to Majordomo to have it add you to the
list, so you can begin receiving mailings.

To receive list mail at the address from which you're sending your mail,
simply say "subscribe" followed by the list's name:

	subscribe demo-list

If for some reason you wish to have the mailings go to a different address
(a friend's address, a specific other system on which you have an account,
or an address which is more correct than the one that automatically appears 
in the "From:" header on the mail you send), you would add that address to
the command.  For instance, if you're sending a request from your work
account, but wish to receive "demo-list" mail at your personal account
(for which we will use "jqpublic@my-isp.com" as an example), you'd put
the line

	subscribe demo-list jqpublic@my-isp.com

in the mail message body.

Based on configuration decisions made by the list owners, you may be added 
to the mailing list automatically.  You may also receive notification
that an authorization key is required for subscription.  Another message
will be sent to the address to be subscribed (which may or may not be the
same as yours) containing the key, and directing the user to send a
command found in that message back to Majordomo@sig.net.  (This can be
a bit of extra hassle, but it helps keep you from being swamped in extra
email by someone who forged requests from your address.)  You may also
get a message that your subscription is being forwarded to the list owner
for approval; some lists have waiting lists, or policies about who may
subscribe.  If your request is forwarded for approval, the list owner
should contact you soon after your request.

Upon subscribing, you should receive an introductory message, containing
list policies and features.  Save this message for future reference; it
will also contain exact directions for unsubscribing.  If you lose the
intro mail and would like another copy of the policies, send this message
to Majordomo@sig.net:

	intro demo-list

(substituting, of course, the real name of your list for "demo-list").

III.	UNSUBSCRIBING FROM MAILING LISTS

Your original intro message contains the exact command which should be
used to remove your address from the list.  However, in most cases, you
may simply send the command "unsubscribe" followed by the list name:

	unsubscribe demo-list

(This command may fail if your provider has changed the way your
address is shown in your mail.)

To remove an address other than the one from which you're sending
the request, give that address in the command:

	unsubscribe demo-list jqpublic@my-isp.com

In either of these cases, you can tell Majordomo@sig.net to remove
the address in question from all lists on this server by using "*"
in place of the list name:

	unsubscribe *
	unsubscribe * jqpublic@my-isp.com

IV.	FINDING THE LISTS TO WHICH AN ADDRESS IS SUBSCRIBED

To find the lists to which your address is subscribed, send this command
in the body of a mail message to Majordomo@sig.net:

	which

You can look for other addresses, or parts of an address, by specifying
the text for which Majordomo should search.  For instance, to find which
users at my-isp.com are subscribed to which lists, you might send the
command

	which my-isp.com

Note that many list owners completely or fully disable the "which"
command, considering it a privacy violation.

V.	FINDING OUT WHO'S SUBSCRIBED TO A LIST

To get a list of the addresses on a particular list, you may use the
"who" command, followed by the name of the list:

	who demo-list

Note that many list owners allow only a list's subscribers to use the
"who" command, or disable it completely, believing it to be a privacy
violation.

VI.	RETRIEVING FILES FROM A LIST'S ARCHIVES

Many list owners keep archives of files associated with a list.  These
may include:
- back issues of the list
- help files, user profiles, and other documents associated with the list
- daily, monthly, or yearly archives for the list

To find out if a list has any files associated with it, use the "index"
command:

	index demo-list

If you see files in which you're interested, you may retrieve them by
using the "get" command and specifying the list name and archive filename.
For instance, to retrieve the files called "profile.form" (presumably a
form to fill out with your profile) and "demo-list.9611" (presumably the
messages posted to the list in November 1996), you would put the lines

	get demo-list profile.form
	get demo-list demo-list.9611

in your mail to Majordomo@sig.net.

VII.	GETTING MORE HELP

To contact a human site manager, send mail to Majordomo-Owner@sig.net.
To contact the owner of a specific list, send mail to that list's
approval address, which is formed by adding "-approval" to the user-name
portion of the list's address.  For instance, to contact the list owner
for demo-list@sig.net, you would send mail to demo-list-approval@sig.net.

To get another copy of this help message, send mail to Majordomo@sig.net
with a line saying

	help

in the message body.

VIII.	COMMAND SUMMARY FOR ADVANCED USERS

In the description below items contained in []'s are optional. When
providing the item, do not include the []'s around it.  Items in angle
brackets, such as <address>, are meta-symbols that should be replaced
by appropriate text without the angle brackets.

It understands the following commands:

    subscribe [<list>] [<address>]
	Subscribe yourself (or <address> if specified) to the named <list>.
	
    unsubscribe [<list>] [<address>]
	Unsubscribe yourself (or <address> if specified) from the named <list>.
	"unsubscribe *" will remove you (or <address>) from all lists.  This
	_may not_ work if you have subscribed using multiple addresses.

    get [<list>] <filename>
        Get a file related to <list>.

    index [<list>]
        Return an index of files you can "get" for <list>.

    which [<address>]
	Find out which lists you (or <address> if specified) are on.

    who [<list>]
	Find out who is on the named <list>.

    info [<list>]
	Retrieve the general introductory information for the named <list>.

    intro [<list>]
	Retrieve the introductory message sent to new users.  Non-subscribers
	may not be able to retrieve this.

    lists
	Show the lists served by this Majordomo server.

    help
	Retrieve this message.

    end
	Stop processing commands (useful if your mailer adds a signature).

Commands should be sent in the body of an email message to
"Majordomo@sig.net" or to "<list>-request@sig.net".

The <list> parameter is only optional if the message is sent to an address
of the form "<list>-request@sig.net". Multiple commands can be processed provided
each occurs on a separate line.

Commands in the "Subject:" line are NOT processed.

If you have any questions or problems, please contact
"Majordomo-Owner@sig.net".

From LISTSERV at nic.surfnet.nl  Wed Aug 20 21:21:31 2003
From: LISTSERV at nic.surfnet.nl (L-Soft list server at SURFnet (The Netherlands) (1.8e))
Date: Wed Aug 20 20:21:07 2003
Subject: [Rd] Re: That movie
Message-ID: <LISTSERV%2003082020213184@NIC.SURFNET.NL>

> Please see the attached file for details.
Unknown command - "PLEASE". Try HELP.

Summary of resource utilization
-------------------------------
 CPU time:        0.000 sec
 Overhead CPU:    0.000 sec                Paging I/O:        0
 CPU model:         933MHz Pentium III Xeon 256k (1024M)
 Job origin:      r-devel@R-PROJECT.ORG

From arnima at u.washington.edu  Wed Aug 20 14:00:30 2003
From: arnima at u.washington.edu (Arni Magnusson)
Date: Wed Aug 20 22:00:09 2003
Subject: [Rd] Five functions proposed for base
Message-ID: <Pine.A41.4.44.0308200953360.142426-100000@dante03.u.washington.edu>

Dear r-devel,

Among the R functions I have written and later shared with colleagues,
there are five that I hope will become a part of the R base package. The
tasks are neither specific nor marginal, so rather than creating one more
'misc' package, I would be happy if the R Development Core Team would
adopt these functions and hammer them into shape.

The functions are available from http://students.washington.edu/arnima/s,
and a short demo session below explains their behaviour. Sorry about the
length of this message, but it should be quick read.


> env()
  Environment                      Objects Kb
1 .GlobalEnv                         19     982
2 package:lme4                      180     992
3 file:f:/gnu/home/r/toolbox.rdata   49     457
4 Autoloads                          44       0
5 package:base                     1657    8196

These environments are currently loaded. Verbose version of search().



> ll()
               Class  Kb
chinook   data.frame  66
chinook.0        glm 244
coho      data.frame 127
coho.0           glm 466
fig2        function  21
fig3        function  13
table3    data.frame   1
table4    data.frame   2
x            numeric   1
y            integer   1
z               list   5

My workspace contains these objects. Verbose version of ls(). I think
package:R.oo provides something similar.



> elem(coho)
                Class Kb
<row.names> character 21
Species        factor  7
Estuary       ordered  8
EstSize        factor  7
EstSizeLog    numeric 14
EstNatural    numeric 14
Oyster         factor  7
RelYear        factor  7
SSTsummer     numeric 14
Survival      numeric 14
TxF           numeric 14

The coho data frame contains these elements. Compactly describes the data
frame, not overlapping with summary() or describe() in package:Hmisc.

I use this function when choosing appropriate storage mode for elements in
large data frames. It has also helped me locating errors in imported data
(numbers containing both . and , decimal seperator are flagged by factor).



> elem(coho.0, dim=T)
                       Class  Kb       Dim
coefficients         numeric   0         1
residuals            numeric  35      1768
fitted.values        numeric  35      1768
effects              numeric  35      1768
R                     matrix   0     1 x 1
rank                 integer   0         1
qr                      list  35         5
family                family   7        11
linear.predictors    numeric  35      1768
deviance             numeric   0         1
aic                  numeric   0         1
null.deviance        numeric   0         1
iter                 integer   0         1
weights              numeric  35      1768
prior.weights        numeric  35      1768
df.residual          numeric   0         1
df.null              numeric   0         1
y                    numeric  35      1768
converged            logical   0         1
boundary             logical   0         1
model             data.frame  50  1768 x 2
call                    call   1         5
formula              formula   0         3
terms                  terms   1         3
data              data.frame 127 1768 x 10
offset                  NULL   0
control                 list   0         3
method             character   0         1
contrasts               NULL   0
xlevels                 NULL   0

Gives me a good idea about the elements of this GLM.



> is.what(y)
[1] "is.atomic"  "is.finite"  "is.integer" "is.numeric" "is.vector"

Now I know which is.* tests are positive on an integer object. Inspired by
demo(is.things).



> keep(fig2, fig3)
[1] "chinook"   "chinook.0" "coho"      "coho.0"    "table3"    "table4"
[7] "x"         "y"         "z"

Shows which objects will be removed, if I'm sure.



> keep(fig2, fig3, sure=T)

Default workspace has been cleared, only fig2 and fig3 were kept.


---

I understand that functions for the base package have to be selected very
carefully, but I believe the functions above can save a significant amount
of time and effort for many R users. My implementations are reasonably
generic and robust, but I'm hoping the R Development Core Team will adopt
and improve improve them.

Regards,
Arni Magnusson (fish biologist)

From fwmail at za.ey.com  Thu Aug 21 01:00:48 2003
From: fwmail at za.ey.com (fwmail@za.ey.com)
Date: Thu Aug 21 00:01:08 2003
Subject: [Rd] MailMarshal has detected a Virus in your message
Message-ID: <DA0000174d@mfwj033.mfw.is.co.za>

MailMarshal (an automated content monitoring gateway) has stopped 
the following message:

   Message: BA0003d244.00000001.mml
   From:    r-devel@r-project.org
   To:      minnasa@ey.co.za
   Subject: Re: Wicked screensaver

Because it believes the message contains a virus.
The virus scanning software used was: Sophos Anti-Virus 
W32/Sobig-F

Please clean the file and resend it.

MailMarshal Rule: Anti-Virus (Inbound) : Block Virus

Email Content Security provided by NetIQ MailMarshal.
From postmaster at itouch.co.za  Thu Aug 21 01:46:32 2003
From: postmaster at itouch.co.za (postmaster@itouch.co.za)
Date: Thu Aug 21 00:46:36 2003
Subject: [Rd] Blocked Email
Message-ID: <E19pbiq-0000IY-00@venus.itouch.co.za>

A message you sent to smsproblems@itouch.co.za was blocked because it contained a virus or an unauthorised attachment, details of the mail are below:

Message receiver: smsproblems@itouch.co.za
Message sender  : r-devel@r-project.org
Message subject : Re: Thank you!
Reason for block: Unauthorized file attachment: wicked_scr.scr

If you have any questions regarding this email please send mail to iTouch Postmaster <postmaster@itouch.co.za>

--
iTouch mail virus scanner

From ross at biostat.ucsf.edu  Thu Aug 21 02:09:50 2003
From: ross at biostat.ucsf.edu (ross@biostat.ucsf.edu)
Date: Thu Aug 21 01:09:23 2003
Subject: [Rd] Minor documentation problem for library (PR#3866)
Message-ID: <200308202309.h7KN9oJH000562@pubhealth.ku.dk>

In my 1.7.1 R (on Debian) the help for "library" includes the line
     `as.environment(match("package:name"), search())' will return the
There is a misplaced parenthesis.  I think you mean
     `as.environment(match("package:name", search()))' will return the

This might be a duplicate submission.  I tried to send one from within
an ESS session, but the session disappeared (which might be a separate
bug!).

From sympa at inria.fr  Thu Aug 21 02:52:18 2003
From: sympa at inria.fr (SYMPA)
Date: Thu Aug 21 01:54:52 2003
Subject: [Rd] Moderating your message
Message-ID: <200308202352.h7KNqIP21374@bellacoola.inria.fr>

Your message for list scilab1 has been forwarded to editor(s)

From pricelinetravel at priceline.m0.net  Wed Aug 20 22:40:26 2003
From: pricelinetravel at priceline.m0.net (pricelinetravel@priceline.m0.net)
Date: Thu Aug 21 06:40:11 2003
Subject: [Rd] Were you trying to contact priceline.com Customer Service?
Message-ID: <7797664.1061440587297.JavaMail.root@imh2.merchantmail.net>

Dear priceline customer,

Your email has reached an automated mailbox, and email sent to this
address does not reach our Customer Service team and will not receive
a personal response.

If you would like to communicate with priceline.com Customer Service,
please visit our help section at
http://www.priceline.com/customerservice/faq/csmain.asp

If your inquiry is regarding a specific priceline purchase or offer,
please include your full name, the email address you entered when
placing your request, your phone number and your priceline request
number.

Remember, we can best assist you if you provide detailed information
regarding your inquiry.

Thank you for your patience.

The priceline.com Customer Service Team

From raftery at gauss.stat.washington.edu  Thu Aug 21 00:33:40 2003
From: raftery at gauss.stat.washington.edu (Adrian Raftery)
Date: Thu Aug 21 08:36:44 2003
Subject: [Rd] Out of town
Message-ID: <200308210633.h7L6XerI406948@gauss.stat.washington.edu>

Thanks for your message. I am out of town and will be back in my office
on August 26; I will probably be out of email contact until then.
I will get back to you as soon as possible after that.

Thanks again for your message.

Adrian Raftery

-------------------------------------------------------------------
Adrian E. Raftery
Professor of Statistics and Sociology
Director, Center for Statistics and the Social Sciences
University of Washington, Box 354320	 Phone: (206) 543-4505
Seattle, WA 98195-4320.		 FAX:   (206) 221-6873
Web: www.stat.washington.edu/raftery;   www.csss.washington.edu

From imosqueira at suk.azti.es  Thu Aug 21 10:20:50 2003
From: imosqueira at suk.azti.es (Iago Mosqueira)
Date: Thu Aug 21 09:17:58 2003
Subject: [Rd] mcmc
Message-ID: <000001c367b4$bfa80660$591701be@u0882imo>

Hello,

I am about to move all of my modelling work into R, and I have been
investigating the present state of MCMC and Bayesian methods in R.
Following a thread on the mailing list in 2000, I have looked at
mcmcpack and Hydra. Three years down the line, is there anything new in
this area? I have used both MCSim and WinBUGS in the past. The first one
seems promising, but is too focused towards toxicology work, and needs
some changes to accomodate sequential Bayesian models. WinBUGS is
closed, and runs in windows only. Somebody has posted recently a message
in the WinBUGS list asking for feedback on the posibility of developing
a Linux version, but that does not seem to be happening anytime soon.

What lines of work are being carried out at the moment? Can I esxpect
something new in the near future?

Regarding the possible use of MCSim (which translates a simple model
especification into C code and then compiles it) as a base for a R
package, what kind of questions should I look more carefully at?

Many thanks,


iago



MCSim:
http://toxi.ineris.fr/activites/toxicologie_quantitative/mcsim/mcsim.php

From sympa at inria.fr  Thu Aug 21 11:26:20 2003
From: sympa at inria.fr (sympa@inria.fr)
Date: Thu Aug 21 10:27:24 2003
Subject: [Rd] Your message  has been rejected
Message-ID: <200308210826.h7L8QKx28096@bellacoola.inria.fr>

Your message: Re: That movie
 Has been rejected by the moderator.

From smyth at wehi.edu.au  Thu Aug 21 20:12:37 2003
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Thu Aug 21 11:15:56 2003
Subject: [Rd] efficiency and memory use of S4 data objects
Message-ID: <5.2.1.1.1.20030821182730.00ad25d8@imaphost.wehi.edu.au>

I do lots of analyses on large microarray data sets so memory use and speed 
and both important issues for me. I have been trying to estimate the 
overheads associated with using formal S4 data objects instead of ordinary 
lists for large data objects. In some simple experiments (using R 1.7.1 in 
Windows 2000) with large but simple objects it seems that giving a data 
object a formal class definition and using extractor and assignment 
functions may increase both memory usage and the time taken by simple 
numeric operations by several fold.

Here is a test function which uses a list representation to add 1 to the 
elements of a long numeric vector:

addlist <- function(len,iter) {
    object <- list(x=rnorm(len))
    for (i in 1:iter) object$x <- object$x+1
    object
}

Typical times on my machine are:

 > system.time(a <- addlist(10^6,10))
[1] 2.91 0.00 2.96   NA   NA
 > system.time(addlist(10^7,10))
[1] 28.03  0.44 28.65    NA    NA

Here is a test function doing the same operation with a formal S4 data 
representation:

addS4 <- function(len,iter) {
   object <- new("MyClass",x=rnorm(len))
   for (i in 1:iter) x(object) <- x(object)+1
   object
}

The timing with len=10^6 increases to

 > system.time(a <- addS4(10^6,10))
[1] 6.79 0.06 6.90   NA   NA

With len=10^7 the operation fails altogether due to insufficient memory 
after thrashing around with virtual memory for a very long time.

I guess I'm not surprised by the performance penalty with S4. My question 
is: is the performance penalty likely to be an ongoing feature of using S4 
methods or will it likely go away in future versions of R?

Thanks
Gordon

Here are my S4 definitions:

setClass("MyClass",representation(x="numeric"))
setGeneric("x",function(object) standardGeneric("x"))
setMethod("x","MyClass",function(object) object@x)
setGeneric("x<-", function(object, value) standardGeneric("x<-"))
setReplaceMethod("x","MyClass",function(object,value) {object@x <- value; 
return(object)})

 > version
             _
platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    1
minor    7.1
year     2003
month    06
day      16
language R

From khendricks at ivey.uwo.ca  Thu Aug 21 16:22:17 2003
From: khendricks at ivey.uwo.ca (khendricks@ivey.uwo.ca)
Date: Thu Aug 21 15:22:01 2003
Subject: [Rd] make check fails 1.7.1 with R-release patch in regression
	tests (PR#3868)
Message-ID: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>

Full_Name: Kevin B. Hendricks
Version: 1.7.1 patched with R-release.diff
OS: Linux x86-64
Submission from: (NULL) (65.93.132.185)


Hi,

Built from R-1.7.1 source with R-release.diff patch attached on a 
RedHat 9 system for Linux x86-64 (dual Opteron system) runing in 64 bit mode.

Build completes fine.  But "make check" fails (R is killed because
Out-Of-Memory)
during reg-tests-1.R.   I have verified that the R-Release.diff patch has been
applied 
and the changes to the stopping critieria in that file have been made. 

My x86_64 machine has over 2 gig of main memory. 

Is the stopping cirtieria a function of the size of the machine registers in
use? 

All other tests seem to pass with no problems.  I have reproduced this error
condition
with and without optimized "atlas" libs in the build and even with -O0 (to
remove possiblility of compiler optimization error).

I am stumped on how to proceed.  Obviously the stopping criteria for some method
is never being
reached resulting in the out of memory condition.

Any hints on how to track this down further appreciated.  All altas tests run
and pass with flying colors (if that helps).

Thanks,

Kevin

From edd at debian.org  Thu Aug 21 09:39:27 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Thu Aug 21 15:46:25 2003
Subject: [Rd] make check fails 1.7.1 with R-release patch in regression
	tests (PR#3868)
In-Reply-To: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
References: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
Message-ID: <20030821133927.GA16790@sonny.eddelbuettel.com>

On Thu, Aug 21, 2003 at 03:22:17PM +0200, khendricks@ivey.uwo.ca wrote:
> Full_Name: Kevin B. Hendricks
> Version: 1.7.1 patched with R-release.diff
> OS: Linux x86-64
> Submission from: (NULL) (65.93.132.185)
> 
> 
> Hi,
> 
> Built from R-1.7.1 source with R-release.diff patch attached on a 
> RedHat 9 system for Linux x86-64 (dual Opteron system) runing in 64 bit mode.
> 
> Build completes fine.  But "make check" fails (R is killed because
> Out-Of-Memory)
> during reg-tests-1.R.   I have verified that the R-Release.diff patch has been
> applied 
> and the changes to the stopping critieria in that file have been made. 
> 
> My x86_64 machine has over 2 gig of main memory. 

What I your compiler?  The GNU GSL people recetnly had to alter one of their
regression tests as gcc 3.3.1 (if I recall correctly) would all of a sudden
consume all available memory.

Just a quick shot in the dark, this may of course an entirely different
issue... But if you can try an older compiler, that may be worth the few
minutes it takes.

Dirk

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From kevin.hendricks at sympatico.ca  Thu Aug 21 11:08:49 2003
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Thu Aug 21 16:12:32 2003
Subject: [Rd] make check fails 1.7.1 with R-release patch in regression
	tests (PR#3868)
In-Reply-To: <20030821133927.GA16790@sonny.eddelbuettel.com>
References: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
	<20030821133927.GA16790@sonny.eddelbuettel.com>
Message-ID: <200308211008.49641.kevin.hendricks@sympatico.ca>

Hi,

Please close the bug, the problem was mine.  Sorry about that!

It seems I did not recursively change ownership after I unpacked the R-1.7.1 
source file and the "tests" directory ended up with some weird user and group 
id that for some reason made the following line in reg-tests-1.R fail by 
using up all memory!

((info <- file.info(".")) 

Once doing the following, all now works fine ...

tar -zxvf R-1.7.1.tgz
gunzip R-release.diff.gz
chown -R kbhend R-1.7.1/   (missed this step previously)
cd R-1.7.1
patch -p1 < ../R-release.diff

Then building and and running make check passes.

So strange ...  I am surprised that trying to get info on the current 
directory (in this case "tests") when not actually owning the directory could 
create such a problem.  There must be a bug someplace in the x86_64
system calls that let's this happen.  It should have just come back
with an error message saying I had no priviledges to do that.  

Oh well, I guess that is the problem when using a new system like x86_64.

Thanks for your fast response.  Please close the bug as user error.

Thanks again,

Kevin




On Thursday 21 August 2003 09:39, Dirk Eddelbuettel wrote:
> On Thu, Aug 21, 2003 at 03:22:17PM +0200, khendricks@ivey.uwo.ca wrote:
> > Full_Name: Kevin B. Hendricks
> > Version: 1.7.1 patched with R-release.diff
> > OS: Linux x86-64
> > Submission from: (NULL) (65.93.132.185)
> >
> >
> > Hi,
> >
> > Built from R-1.7.1 source with R-release.diff patch attached on a
> > RedHat 9 system for Linux x86-64 (dual Opteron system) runing in 64 bit
> > mode.
> >
> > Build completes fine.  But "make check" fails (R is killed because
> > Out-Of-Memory)
> > during reg-tests-1.R.   I have verified that the R-Release.diff patch has
> > been applied
> > and the changes to the stopping critieria in that file have been made.
> >
> > My x86_64 machine has over 2 gig of main memory.
>
> What I your compiler?  The GNU GSL people recetnly had to alter one of
> their regression tests as gcc 3.3.1 (if I recall correctly) would all of a
> sudden consume all available memory.
>
> Just a quick shot in the dark, this may of course an entirely different
> issue... But if you can try an older compiler, that may be worth the few
> minutes it takes.
>
> Dirk

From p.dalgaard at biostat.ku.dk  Thu Aug 21 15:21:56 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu Aug 21 16:21:58 2003
Subject: [Rd] make check fails 1.7.1 with R-release patch in regression
	tests (PR#3868)
In-Reply-To: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
References: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
Message-ID: <x2r83ft768.fsf@biostat.ku.dk>

khendricks@ivey.uwo.ca writes:

> Built from R-1.7.1 source with R-release.diff patch attached on a 
> RedHat 9 system for Linux x86-64 (dual Opteron system) runing in 64 bit mode.
> 
> Build completes fine.  But "make check" fails (R is killed because
> Out-Of-Memory)
> during reg-tests-1.R.   I have verified that the R-Release.diff patch has been
> applied 
> and the changes to the stopping critieria in that file have been made. 
> 
> My x86_64 machine has over 2 gig of main memory. 
> 
> Is the stopping cirtieria a function of the size of the machine registers in
> use? 
> 
> All other tests seem to pass with no problems.  I have reproduced this error
> condition
> with and without optimized "atlas" libs in the build and even with -O0 (to
> remove possiblility of compiler optimization error).
> 
> I am stumped on how to proceed.  Obviously the stopping criteria for some method
> is never being
> reached resulting in the out of memory condition.
> 
> Any hints on how to track this down further appreciated.  All altas tests run
> and pass with flying colors (if that helps).

Hmm. 

(1) Does it happen *without* the patches?

(2) The canonical way to investigate is to
 
        (a) figure out which file is being processed and rerun R with
        output to the terminal. I.e.

        export SRCDIR=../R/tests # must be set, value depends on build setup 
        bin/R --vanilla < $SRCDIR/reg-tests-1.R

        This avoids buffering and so the last few lines should tell
        you approximately where things go wrong.

        You might want to cut the file down a bit, but in this case it
        is probably not necessary.

        (b) Run R under the debugger 
        bin/R -d gdb
        run --vanilla  < $SRCDIR/reg-tests-1.R

        when it hangs, try hitting control-C and do a "bt" (backtrace)
        command in gdb. You can then poke around in the stack and see
        if you can spot the problem. Or get back to us with some new
        clues. 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From kevin.hendricks at sympatico.ca  Thu Aug 21 11:30:41 2003
From: kevin.hendricks at sympatico.ca (Kevin B. Hendricks)
Date: Thu Aug 21 16:36:07 2003
Subject: [Rd] make check fails 1.7.1 with R-release patch in regression
	tests (PR#3868)
In-Reply-To: <x2r83ft768.fsf@biostat.ku.dk>
References: <200308211322.h7LDMHJH015409@pubhealth.ku.dk>
	<x2r83ft768.fsf@biostat.ku.dk>
Message-ID: <200308211030.41963.kevin.hendricks@sympatico.ca>

Hi Peter,

Thanks for your response.

I tracked it down to (info <-file.info(".")) hanging and then started checking 
the obvious as to what permissions that "tests" had and soon found out that 
everything was quite messed up (I had forgot to chown the files after 
unpacking them).

Once I cleaned that up and changed owership to a valid user id the hangs went 
away.

So please close this as user stupidiity on my part.  I simply forgot that tar 
keeps old user ids when unpacking and that I need to fix that myself before 
patching and building.

Thanks gain for your fast responses!

Kevin

On Thursday 21 August 2003 10:30, Peter Dalgaard BSA wrote:
> khendricks@ivey.uwo.ca writes:
> > Built from R-1.7.1 source with R-release.diff patch attached on a
> > RedHat 9 system for Linux x86-64 (dual Opteron system) runing in 64 bit
> > mode.
> >
> > Build completes fine.  But "make check" fails (R is killed because
> > Out-Of-Memory)
> > during reg-tests-1.R.   I have verified that the R-Release.diff patch has
> > been applied
> > and the changes to the stopping critieria in that file have been made.
> >
> > My x86_64 machine has over 2 gig of main memory.
> >
> > Is the stopping cirtieria a function of the size of the machine registers
> > in use?
> >
> > All other tests seem to pass with no problems.  I have reproduced this
> > error condition
> > with and without optimized "atlas" libs in the build and even with -O0
> > (to remove possiblility of compiler optimization error).
> >
> > I am stumped on how to proceed.  Obviously the stopping criteria for some
> > method is never being
> > reached resulting in the out of memory condition.
> >
> > Any hints on how to track this down further appreciated.  All altas tests
> > run and pass with flying colors (if that helps).
>
> Hmm.
>
> (1) Does it happen *without* the patches?
>
> (2) The canonical way to investigate is to
>
>         (a) figure out which file is being processed and rerun R with
>         output to the terminal. I.e.
>
>         export SRCDIR=../R/tests # must be set, value depends on build
> setup bin/R --vanilla < $SRCDIR/reg-tests-1.R
>
>         This avoids buffering and so the last few lines should tell
>         you approximately where things go wrong.
>
>         You might want to cut the file down a bit, but in this case it
>         is probably not necessary.
>
>         (b) Run R under the debugger
>         bin/R -d gdb
>         run --vanilla  < $SRCDIR/reg-tests-1.R
>
>         when it hangs, try hitting control-C and do a "bt" (backtrace)
>         command in gdb. You can then poke around in the stack and see
>         if you can spot the problem. Or get back to us with some new
>         clues.

From dmurdoch at pair.com  Thu Aug 21 11:36:59 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Aug 21 16:38:41 2003
Subject: [Rd] mcmc
In-Reply-To: <000001c367b4$bfa80660$591701be@u0882imo>
References: <000001c367b4$bfa80660$591701be@u0882imo>
Message-ID: <lnj9kvgfu3s8f1g4ud7nab2ph86buqge6u@4ax.com>

On Thu, 21 Aug 2003 09:20:50 +0200, "Iago Mosqueira"
<imosqueira@suk.azti.es> wrote :

> ...Somebody has posted recently a message
>in the WinBUGS list asking for feedback on the posibility of developing
>a Linux version, but that does not seem to be happening anytime soon.
>
>What lines of work are being carried out at the moment? Can I esxpect
>something new in the near future?

Depends what you mean by "near future".  The gR project
<http://www.r-project.org/gR/> plans to add support for graphical
models to R; this will include MCMC methods.  There's a workshop next
month, at which time some target dates might be set.  I'd guess by a
year from now there'll be substantial progress, but I'm not sure when
the first signs of it will appear.

Duncan Murdoch

From jmc at research.bell-labs.com  Thu Aug 21 12:05:02 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Thu Aug 21 17:17:49 2003
Subject: [Rd] efficiency and memory use of S4 data objects
References: <5.2.1.1.1.20030821182730.00ad25d8@imaphost.wehi.edu.au>
Message-ID: <3F44DF9E.37ECD6CD@research.bell-labs.com>

The general question is certainly worth discussing, but I'd be surprised
if your example is measuring what you think it is.

The numeric computations are almost the only thing NOT radically changed
between your two examples.  In the first,  you are applying a
"primitive" set of functions ("+", "$", and "$<-") to a basic vector. 
These functions go directly to C code, without creating a context (aka
frame) as would a call to an S-language function.  In the second
example, the "+" will still be done in C code, with essentially no
change since the arguments will still be basic vectors.

Just about everything else, however, will be different.  If you really
wanted to focus on the numeric computation, your second example would be
more relevant with the loop being
  for(i in 1:iter)object@x <- object@x+1
In this case, the difference likely will be mainly the overhead for
"@<-", which is not a primitive.  The example as written is adding a
layer of functions and method dispatch.

But the lesson we've learned over many years (and with S generally, not
specifically with methods and classes) is that empirical inference about
efficiency is a subtle thing (somehow as statisticians you'd think we
would expect that).  Artifical examples have to be very carefully
designed and analysed before being taken at face value.

R has some useful tools, especially Rprof, to look at examples in the
hope of finding "hot spots".  It would be good to see some results,
especially for realistic examples.

Anyway, on the general question.

1.  Yes, there are lots of possibilities for speeding up method dispatch
& hopefully these will get a chance to be tried out, after 1.8.  But I
would caution people expecting that method dispatch is the hot spot
_generally_.  On a couple of occasions, it was because of introduced
glitches, and then the effect was obvious.  There are some indirect
costs, such as creating a separate context for the method, and if these
are shown to be an issue, something might be done.

2. Memory use and the effect on garbage collection:  Not too much has
been studied here & some good data would be helpful.  (Especially if
some experts on storage management in R could offer advice.)

3.  It might be more effective (and certainly more fun) to think of
changes in the context of "modernizing" some of the computations in R
generally.  There have been several suggestions discussed that in
principle could speed up method/class computations, along with providing
other new features.

4. Meanwhile, the traditional S style that has worked well probably
applies.  First, try out a variety of analyses taking advantage of
high-level concepts to program quickly.  Then, when it's clear that
something needs to be applied extensively, try to identify critical
computations that could be mapped into lower-level versions (maybe even
C code), getting efficiency by giving up flexibility.

Regards,
 John

Gordon Smyth wrote:
> 
> I do lots of analyses on large microarray data sets so memory use and speed
> and both important issues for me. I have been trying to estimate the
> overheads associated with using formal S4 data objects instead of ordinary
> lists for large data objects. In some simple experiments (using R 1.7.1 in
> Windows 2000) with large but simple objects it seems that giving a data
> object a formal class definition and using extractor and assignment
> functions may increase both memory usage and the time taken by simple
> numeric operations by several fold.
> 
> Here is a test function which uses a list representation to add 1 to the
> elements of a long numeric vector:
> 
> addlist <- function(len,iter) {
>     object <- list(x=rnorm(len))
>     for (i in 1:iter) object$x <- object$x+1
>     object
> }
> 
> Typical times on my machine are:
> 
>  > system.time(a <- addlist(10^6,10))
> [1] 2.91 0.00 2.96   NA   NA
>  > system.time(addlist(10^7,10))
> [1] 28.03  0.44 28.65    NA    NA
> 
> Here is a test function doing the same operation with a formal S4 data
> representation:
> 
> addS4 <- function(len,iter) {
>    object <- new("MyClass",x=rnorm(len))
>    for (i in 1:iter) x(object) <- x(object)+1
>    object
> }
> 
> The timing with len=10^6 increases to
> 
>  > system.time(a <- addS4(10^6,10))
> [1] 6.79 0.06 6.90   NA   NA
> 
> With len=10^7 the operation fails altogether due to insufficient memory
> after thrashing around with virtual memory for a very long time.
> 
> I guess I'm not surprised by the performance penalty with S4. My question
> is: is the performance penalty likely to be an ongoing feature of using S4
> methods or will it likely go away in future versions of R?
> 
> Thanks
> Gordon
> 
> Here are my S4 definitions:
> 
> setClass("MyClass",representation(x="numeric"))
> setGeneric("x",function(object) standardGeneric("x"))
> setMethod("x","MyClass",function(object) object@x)
> setGeneric("x<-", function(object, value) standardGeneric("x<-"))
> setReplaceMethod("x","MyClass",function(object,value) {object@x <- value;
> return(object)})
> 
>  > version
>              _
> platform i386-pc-mingw32
> arch     i386
> os       mingw32
> system   i386, mingw32
> status
> major    1
> minor    7.1
> year     2003
> month    06
> day      16
> language R
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From maechler at stat.math.ethz.ch  Thu Aug 21 18:10:56 2003
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu Aug 21 17:18:15 2003
Subject: [Rd] Minor documentation problem for library (PR#3866)
Message-ID: <200308211510.h7LFAuJH018216@pubhealth.ku.dk>

Thank you, Ross.

This was still in R-devel and is now fixed.
Regards,
Martin Mchler

From arnima at u.washington.edu  Thu Aug 21 10:13:16 2003
From: arnima at u.washington.edu (Arni Magnusson)
Date: Thu Aug 21 18:15:37 2003
Subject: [Rd] Five functions proposed for base
In-Reply-To: <16196.56192.753570.413517@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0308210802470.109326-100000@dante03.u.washington.edu>

Good points, Martin. Thanks for looking at this.

I have to admit I had only briefly looked at str() and ls.str() until I
read your message. I guess they seemed to me more like a tool for
developers than for end users, but now I realize str() is a valid
contender with dim(), summary.data.frame(), describe(), and now elem() to
view data frames 'from the outside'.

Granted, different users are looking for different information. I often
use dim(), summary(), and describe(), so I implemented elem() in a way
that wouldn't overlap with those. Compactness and ease of reading, given
my coho data frame (1768x10) is

dim(coho): 6 non-whitespace characters, 1 line
elem(coho): 184, 12
str(coho): 543, 11
summary(coho): 688, 8
describe(coho): 2242, 70

The main reason I include element size (sorry about the misspelling of kB)
is simply that it's not provided recursively by any other function, yet
the user might be interested. It makes it easier to evaluate how much the
data containers could be shrunk by removing certain elements, coercing to
other storage modes, or using a matrix. Mainly relevant for very large
datasets, and perhaps beginners who are familiarizing themselves with
different storage modes.

The object size is more important in the ll() output. When I tidy my
workspace, the heavy objects are often the first to go, but sometimes vice
versa (using the keep() function). It also helps me spot major data frames
and models in a sea of objects. One way to avoid the unwanted ll() name of
the function would be to take the Unix analogy all the way and add an
argument to ls(). Those who want could then define ll <- function(...)
ls(..., long=TRUE) or something along those lines. Compactness stats are

ls(): 74, 1
ll(): 156, 12
ll(dim=T): 197, 12
ls.str(max.level=-1): 353, 12

Discussing the core info-utilities in R is worth the time. Perhaps others
will comment on what information they look for, and how they go about
getting it. My only feedback so far is from colleagues who are using my
functions.

Cheers,
Arni



On Thu, 21 Aug 2003, Martin Maechler wrote:

> Thank you, Arni.
>
> Note that "base" already has
>   str()  which seems more useful than elem()
> 	 -- at least for human inspection, str() does not produce output;
>
>   ls.str() building on str() which is somewhat
>     related to your ll() {the name of which would be too short for R base}.
>
>   As a matter of fact, for a really compact ls.str() output, I'd
>   have to change the default value of 'max.level = 0' to '-1' and
>   change  'max.level = 0' to mean no recursion into the list
>   structure at all.
>
> Why is it important for you to know sizes in kB or MB, instead
> of just length/dim ?   Note that object.size() basically
> recursively builds on length() {and typeof()}, but still is
> only approximative.
>
> Regards,
> Martin
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
>

From confirm-s2-Bb6NI4z8UAZB9s5dQ17gqxDxf_w-R-devel=stat.math.ethz.ch at yahoogroups.com  Thu Aug 21 18:32:58 2003
From: confirm-s2-Bb6NI4z8UAZB9s5dQ17gqxDxf_w-R-devel=stat.math.ethz.ch at yahoogroups.com (Yahoo! Groups)
Date: Thu Aug 21 19:35:39 2003
Subject: [Rd] Please confirm your request to join THEREALBLACKFREAKS 
Message-ID: <1061487191.80.84622.m3@yahoogroups.com>


Hello R-devel@stat.math.ethz.ch,

We have received your request to join the THEREALBLACKFREAKS 
group hosted by Yahoo! Groups, a free, easy-to-use community service.

This request will expire in 21 days.

TO BECOME A MEMBER OF THE GROUP: 

1) Go to the Yahoo! Groups site by clicking on this link:

   http://groups.yahoo.com/i?i=Bb6NI4z8UAZB9s5dQ17gqxDxf_w&e=R-devel%40stat%2Emath%2Eethz%2Ech 

  (If clicking doesn't work, "Cut" and "Paste" the line above into your 
   Web browser's address bar.)

-OR-

2) REPLY to this email by clicking "Reply" and then "Send"
   in your email program

If you did not request, or do not want, a membership in the
THEREALBLACKFREAKS group, please accept our apologies
and ignore this message.

Regards,

Yahoo! Groups Customer Care

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/

From hornik at ci.tuwien.ac.at  Thu Aug 21 21:16:24 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Thu Aug 21 20:20:18 2003
Subject: [Rd] The two chisq.test p values differ when the contingency table
	is transposed! (PR#3486)
In-Reply-To: <200308151442.h7FEgEJH025872@pubhealth.ku.dk>
References: <200308151442.h7FEgEJH025872@pubhealth.ku.dk>
Message-ID: <16197.3192.619542.672267@mithrandir.hornik.net>

>>>>> dmurdoch  writes:

>> Date: Wed, 16 Jul 2003 01:27:25 +0200 (MET DST)
>> From: shitao@ucla.edu

>>> x
>> [,1] [,2]
>> [1,]  149  151
>> [2,]    1    8
>>> c2x<-chisq.test(x, simulate.p.value=T, B=100000)$p.value
>>> for(i in (1:20)){c2x<-c(c2x,chisq.test(x,
>> simulate.p.value=T,B=100000)$p.value)}
>>> c2tx<-chisq.test(t(x), simulate.p.value=T, B=100000)$p.value
>>> for(i in (1:20)){c2tx<-c(c2tx,chisq.test(t(x), simulate.p.value=T,
>> + B=100000)$p.value)}
>>> cbind(c2x,c2tx)
>> c2x    c2tx
>> [1,] 0.03711 0.01683
>> [2,] 0.03717 0.01713

> The problem is in ctest/R/chisq.test.R, where the p-value is
> calculated as 

>             STATISTIC <- sum((x - E) ^ 2 / E)
>             PARAMETER <- NA
>             PVAL <- sum(tmp$results >= STATISTIC) / B

> Here tmp$results is a collection of simulated chisquare values, but
> because of different rounding, the statistics corresponding to tables
> equal to the observed table are slightly smaller than the value
> calculated in STATISTIC, and effectively the p-value is calcuated as

>              PVAL <- sum(tmp$results > STATISTIC) / B

> instead.

> What's the appropriate fix here? 

> PVAL <- sum(tmp$results > STATISTIC - .Machine$double.eps^0.5) / B

> works on this example, but is there something better?

Argh.  Very interesting ...

I think it works to use

            STATISTIC <- sum(sort((x - E) ^ 2 / E, decreasing = TRUE))

instead: this starts by summing the big values, and hence if at all
slightly 'underestimates' the real value, which is fine for the
comparisons.

Fix committed to r-devel.  Thanks for looking into this.

-k

From Kurt.Hornik at wu-wien.ac.at  Thu Aug 21 21:20:43 2003
From: Kurt.Hornik at wu-wien.ac.at (Kurt.Hornik@wu-wien.ac.at)
Date: Thu Aug 21 20:20:48 2003
Subject: [Rd] The two chisq.test p values differ when the contingency
	table (PR#3896)
Message-ID: <200308211820.h7LIKhJH021091@pubhealth.ku.dk>

>>>>> dmurdoch  writes:

>> Date: Wed, 16 Jul 2003 01:27:25 +0200 (MET DST)
>> From: shitao@ucla.edu

>>> x
>> [,1] [,2]
>> [1,]  149  151
>> [2,]    1    8
>>> c2x<-chisq.test(x, simulate.p.value=T, B=100000)$p.value
>>> for(i in (1:20)){c2x<-c(c2x,chisq.test(x,
>> simulate.p.value=T,B=100000)$p.value)}
>>> c2tx<-chisq.test(t(x), simulate.p.value=T, B=100000)$p.value
>>> for(i in (1:20)){c2tx<-c(c2tx,chisq.test(t(x), simulate.p.value=T,
>> + B=100000)$p.value)}
>>> cbind(c2x,c2tx)
>> c2x    c2tx
>> [1,] 0.03711 0.01683
>> [2,] 0.03717 0.01713

> The problem is in ctest/R/chisq.test.R, where the p-value is
> calculated as 

>             STATISTIC <- sum((x - E) ^ 2 / E)
>             PARAMETER <- NA
>             PVAL <- sum(tmp$results >= STATISTIC) / B

> Here tmp$results is a collection of simulated chisquare values, but
> because of different rounding, the statistics corresponding to tables
> equal to the observed table are slightly smaller than the value
> calculated in STATISTIC, and effectively the p-value is calcuated as

>              PVAL <- sum(tmp$results > STATISTIC) / B

> instead.

> What's the appropriate fix here? 

> PVAL <- sum(tmp$results > STATISTIC - .Machine$double.eps^0.5) / B

> works on this example, but is there something better?

Argh.  Very interesting ...

I think it works to use

            STATISTIC <- sum(sort((x - E) ^ 2 / E, decreasing = TRUE))

instead: this starts by summing the big values, and hence if at all
slightly 'underestimates' the real value, which is fine for the
comparisons.

Fix committed to r-devel.  Thanks for looking into this.

-k

From bellis at hsph.harvard.edu  Thu Aug 21 18:50:16 2003
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Thu Aug 21 23:50:14 2003
Subject: [Rd] [Mac] R as a Framework
Message-ID: <7356CC40-D421-11D7-8BB2-000393BDE1EC@hsph.harvard.edu>

In case anyone cares, I more or less have R building as a framework 
under 10.2---it turned out to be not-so-difficult. Basically the 
install_name had to be changed (-install_name 
R.framework/Versions/1.8.0/R). Note that the install_name isn't a fully 
qualified path, which threw me off for a while. Then the library 
modules relinked with -framework R, which I built in main for, uh, 
convenience, (-F$(topdir)/src/main -framework R) instead of against 
libR.dylib.

I think it would also be possible to build R as a private framework, 
though the linking for libraries becomes, I think, a bit trickier. I 
also haven't worked on R CMD at all so it still builds the old way. 
Things seem to work so far, R.framework/Resources/bin/R comes up just 
fine from Terminal and finds the library dylibs OK--- in this case R 
CMD install still works since libR.dylib is still put in the bin 
directory so modules linked against it can still load.

So far it was all done by hand, but I hope to automate the process. My 
next trick will be to have Cocoa and the R event loop live together in 
peace and harmony (which _should_ work, since Carbon and Cocoa both 
ultimately employ CFRunLoop, so I'm hoping to just punt the setup into 
the appropriate locations within the Cocoa app).  :-)

From pas at webassign.net  Fri Aug 22 01:11:19 2003
From: pas at webassign.net (pas@webassign.net)
Date: Fri Aug 22 00:10:57 2003
Subject: [Rd] [WebAssign #54755] Re: Approved (PR#3908)
Message-ID: <200308212211.h7LMBJJH024177@pubhealth.ku.dk>

Thank you for contacting us. We will get back with you shortly. Your patience is appreciated. 

There is no need to reply to this message right now. Your message has been assigned an ID number of [WebAssign #54755]. Please include the string  [WebAssign #54755] in the subject line of all of your future correspondence about this issue. 

Physics Academic Software Support

From dmurdoch at pair.com  Thu Aug 21 19:51:33 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri Aug 22 00:52:20 2003
Subject: [Rd] The two chisq.test p values differ when the contingency
	table is transposed! (PR#3486)
In-Reply-To: <16197.3192.619542.672267@mithrandir.hornik.net>
References: <200308151442.h7FEgEJH025872@pubhealth.ku.dk>
	<16197.3192.619542.672267@mithrandir.hornik.net>
Message-ID: <v5jakvod1kshuv1h9kjdr6aalkc7ret8fs@4ax.com>

On Thu, 21 Aug 2003 20:16:24 +0200, you wrote:


>I think it works to use
>
>            STATISTIC <- sum(sort((x - E) ^ 2 / E, decreasing = TRUE))
>
>instead: this starts by summing the big values, and hence if at all
>slightly 'underestimates' the real value, which is fine for the
>comparisons.

Looks good here.

Duncan

From smyth at wehi.edu.au  Fri Aug 22 12:02:58 2003
From: smyth at wehi.edu.au (Gordon Smyth)
Date: Fri Aug 22 03:07:53 2003
Subject: [Rd] efficiency and memory use of S4 data objects
In-Reply-To: <3F44DF9E.37ECD6CD@research.bell-labs.com>
References: <5.2.1.1.1.20030821182730.00ad25d8@imaphost.wehi.edu.au>
Message-ID: <5.2.1.1.1.20030822095245.00ac5798@imaphost.wehi.edu.au>

Thanks for your thoughtful and considered response, as always. I think I 
need to make my position a little more clear.

I develop software in R which for the most part I'm happy with. For the 
most part my code seems to be correct, fast, reliable, useful for me and 
for other people. But it is mostly either S3 for not oop at all. I am under 
lots of pressure from people I respect and would like to cooperate with to 
convert my code to S4. I am not entirely happy about this because I believe 
that converting to S4 will substantially reduce the size of data set that 
my code can handle and will substantially increase overall execution times. 
(The example in my previous post was not sufficient in itself to prove 
this, but more about that below.) There are other issues such as how to 
document S4 methods and how to pass RCMD check, but I would like to focus 
on the efficiency issue here.

At 01:05 AM 22/08/2003, John Chambers wrote:
>The general question is certainly worth discussing, but I'd be surprised
>if your example is measuring what you think it is.
>
>The numeric computations are almost the only thing NOT radically changed
>between your two examples.  In the first,  you are applying a
>"primitive" set of functions ("+", "$", and "$<-") to a basic vector.
>These functions go directly to C code, without creating a context (aka
>frame) as would a call to an S-language function.  In the second
>example, the "+" will still be done in C code, with essentially no
>change since the arguments will still be basic vectors.
>
>Just about everything else, however, will be different.  If you really
>wanted to focus on the numeric computation, your second example would be
>more relevant with the loop being
>   for(i in 1:iter)object@x <- object@x+1
>In this case, the difference likely will be mainly the overhead for
>"@<-", which is not a primitive.  The example as written is adding a
>layer of functions and method dispatch.

I am sorry for giving the impression that I wanted to focus on the numeric 
computations. Of course it is the efficiency of the S4 classes and methods 
themselves that I am interested in. I deliberately chose an example which 
added a layer of functions and method dispatch, because that is what 
converting code to S4 does.

Here is another example with no user-defined methods:

 > system.time( structure(list(x=rep(1,10^7),class="MyS3Class")))
[1] 1.05 0.00 1.05   NA   NA
 > system.time( new("MyClass",x=rep(1,10^7)))
[1]  3.15  0.34 11.19    NA    NA

This seems to me to show that simply associating a formal S4 data class 
identity with a new object (no computation involved!) can increase the time 
required to create the object 11-fold compared with the S3 equivalent. 11 
seconds is a lot of time if you have a call to "new" at the end of every 
function in a large package, and some of these functions are called a very 
large number of times.

>But the lesson we've learned over many years (and with S generally, not
>specifically with methods and classes) is that empirical inference about
>efficiency is a subtle thing (somehow as statisticians you'd think we
>would expect that).  Artifical examples have to be very carefully
>designed and analysed before being taken at face value.

You seem to be suggesting that the effect might be an artifact of my 
particular artificial example, but all examples seem to be point in the 
same direction, i.e., that introducing S4 methods into code will slow it 
down. I can't construct any examples of S4 usage which are not at least 
slightly slower than the S3 equivalent. Can anyone else? I am not 
suggesting that I have identified the root cause any bottlenecks.

>R has some useful tools, especially Rprof, to look at examples in the
>hope of finding "hot spots".  It would be good to see some results,
>especially for realistic examples.

One can see plenty of realistic examples of S4 usage by trying the 
Bioconductor packages. But large realistic examples don't lend themselves 
easily to a post to r-devel.

>Anyway, on the general question.
>
>1.  Yes, there are lots of possibilities for speeding up method dispatch
>& hopefully these will get a chance to be tried out, after 1.8.  But I
>would caution people expecting that method dispatch is the hot spot
>_generally_.  On a couple of occasions, it was because of introduced
>glitches, and then the effect was obvious.  There are some indirect
>costs, such as creating a separate context for the method, and if these
>are shown to be an issue, something might be done.
>
>2. Memory use and the effect on garbage collection:  Not too much has
>been studied here & some good data would be helpful.  (Especially if
>some experts on storage management in R could offer advice.)
>
>3.  It might be more effective (and certainly more fun) to think of
>changes in the context of "modernizing" some of the computations in R
>generally.  There have been several suggestions discussed that in
>principle could speed up method/class computations, along with providing
>other new features.
>
>4. Meanwhile, the traditional S style that has worked well probably
>applies.  First, try out a variety of analyses taking advantage of
>high-level concepts to program quickly.  Then, when it's clear that
>something needs to be applied extensively, try to identify critical
>computations that could be mapped into lower-level versions (maybe even
>C code), getting efficiency by giving up flexibility.

I am already doing all computation-intensive operations in C or Fortran 
through appropriate use of R functions which themselves call C. I can't see 
how use of C can side-step the need to create S4 objects or to use S4 
methods in a package based on S4.

Regards
Gordon

>Regards,
>  John
>
>Gordon Smyth wrote:
> >
> > I do lots of analyses on large microarray data sets so memory use and speed
> > and both important issues for me. I have been trying to estimate the
> > overheads associated with using formal S4 data objects instead of ordinary
> > lists for large data objects. In some simple experiments (using R 1.7.1 in
> > Windows 2000) with large but simple objects it seems that giving a data
> > object a formal class definition and using extractor and assignment
> > functions may increase both memory usage and the time taken by simple
> > numeric operations by several fold.
> >
> > Here is a test function which uses a list representation to add 1 to the
> > elements of a long numeric vector:
> >
> > addlist <- function(len,iter) {
> >     object <- list(x=rnorm(len))
> >     for (i in 1:iter) object$x <- object$x+1
> >     object
> > }
> >
> > Typical times on my machine are:
> >
> >  > system.time(a <- addlist(10^6,10))
> > [1] 2.91 0.00 2.96   NA   NA
> >  > system.time(addlist(10^7,10))
> > [1] 28.03  0.44 28.65    NA    NA
> >
> > Here is a test function doing the same operation with a formal S4 data
> > representation:
> >
> > addS4 <- function(len,iter) {
> >    object <- new("MyClass",x=rnorm(len))
> >    for (i in 1:iter) x(object) <- x(object)+1
> >    object
> > }
> >
> > The timing with len=10^6 increases to
> >
> >  > system.time(a <- addS4(10^6,10))
> > [1] 6.79 0.06 6.90   NA   NA
> >
> > With len=10^7 the operation fails altogether due to insufficient memory
> > after thrashing around with virtual memory for a very long time.
> >
> > I guess I'm not surprised by the performance penalty with S4. My question
> > is: is the performance penalty likely to be an ongoing feature of using S4
> > methods or will it likely go away in future versions of R?
> >
> > Thanks
> > Gordon
> >
> > Here are my S4 definitions:
> >
> > setClass("MyClass",representation(x="numeric"))
> > setGeneric("x",function(object) standardGeneric("x"))
> > setMethod("x","MyClass",function(object) object@x)
> > setGeneric("x<-", function(object, value) standardGeneric("x<-"))
> > setReplaceMethod("x","MyClass",function(object,value) {object@x <- value;
> > return(object)})
> >
> >  > version
> >              _
> > platform i386-pc-mingw32
> > arch     i386
> > os       mingw32
> > system   i386, mingw32
> > status
> > major    1
> > minor    7.1
> > year     2003
> > month    06
> > day      16
> > language R
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>--
>John M. Chambers                  jmc@bell-labs.com
>Bell Labs, Lucent Technologies    office: (908)582-2681
>700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
>Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From Admin at mantramail.com  Fri Aug 22 02:19:25 2003
From: Admin at mantramail.com (Admin@mantramail.com)
Date: Fri Aug 22 03:22:03 2003
Subject: [Rd] failure notice
Message-ID: <E19q0aG-0005QW-00@franz.stat.wisc.edu>

Hi. This is the qmail-send program at mantramail.com.
I'm afraid I wasn't able to deliver your message to the following addresses.
This is a permanent error; I've given up. Sorry it didn't work out.



<rsborar@mantraonline.com>:
The users mailfolder is over the allowed quota (size).

--- Below this line is a copy of the message.

Return-Path: <r-devel@r-project.org>
Received: (qmail 23486 invoked from network); 22 Aug 2003 09:17:27 -0000
Received: from unknown (HELO VADER) ([150.231.20.23]) (envelope-sender <r-devel@r-project.org>)
          by pop.mantraonline.com (qmail-ldap-1.03) with SMTP
          for <rsborar@mantraonline.com>; 22 Aug 2003 09:17:27 -0000
From: <r-devel@r-project.org>
To: <rsborar@mantraonline.com>
Subject: Re: Your application
Date: Thu, 21 Aug 2003 19:48:52 --0400
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsof

--- End of message stripped.

From deleeuw at stat.ucla.edu  Thu Aug 21 23:33:20 2003
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Fri Aug 22 07:34:06 2003
Subject: [Rd] R-devel on Panther
Message-ID: <23E94E88-D462-11D7-88AE-000393BB6D36@stat.ucla.edu>

Both the command line version and the Aqua version build/install
fine on Panther B44. "Make check"runs fine as well.

The configure flags are

configure --enable-R-shlib  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework/tkConfig.sh
	--with-blas='-framework vecLib' --with-lapack --with-aqua

In the environment I have

FPICFLAGS=-fno-common
LDFLAGS=-lcc_dynamic
CPPFLAGS=-D__DEBUGGING__
TCLTK_LIBS=-framework Tcl -framework Tk
TCLTK_CPPFLAGS=-I/Library/Frameworks/Tcl.framework/Versions/Current/ 
Headers -I/Library/Frameworks/Tk.framework/Versions/Current/Headers

I know that the two TCLTK variables (strangely enough), the DEBUGGING  
variable and the FPICFLAGS are necessary.

I am using the g77-3.3 from fink -- not the one from Gaurav Khanna, the  
fink one
comes with a patched assembler.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From mangiaacolori at virgilio.it  Fri Aug 22 13:32:32 2003
From: mangiaacolori at virgilio.it (mangiaacolori@virgilio.it)
Date: Fri Aug 22 12:34:55 2003
Subject: [Rd] mangia a colori (PR#3914)
Message-ID: <200308221032.h7MAWWJH005739@pubhealth.ku.dk>

Mangia a colori II! 

Keywords Population, health promotion/Public Theories, Methods & Perspectives

Abstract
An initiative of health-promotion to the expansion of the "instruments" able
to assure the control to the population on their own level of health, to
improve it through activity that partly concern to the sanitary system and
partly to other sectors, with the use of internal and external energies and
the sanitary system: health, voluntary service, family, school and enterprises
that have to cooperate in a net of mutual exchange and responsibility. 

The WHO (Worl Health Organizition) has individualized in the promotion of
the health the winning strategy to cope with the actual epidemiological conditions,
that see to prevail as cause of death and the degenerative chronic illnesses,
the tumors, and with finally, the road accidents.

During these last 30 years a lot of our habits are changed: more comforts!
We have learned to eat more, as consequence of the great quantity of food
and medicines! 
We have learned to prefer softer foods, that do not tire the mastication,
meats and dairy products, in spite of fruit and vegetables! We feel like
wanting everything and immediately; we have learned to be outside, also for
to eat! We have learned to use more always the television and the video games
and to have fun being comfortably sat; we have learned to use the gyms, instead
 of sport to open air! We have learned to move with the bus, the car, the
moped, the lift, the mobile staircases: "we have learned to leaven! " The
women in particular have reached and perhaps overcome the men in smoking!
We have learned to do alone in the diet, in the sport, or to follow the suggestions
of the neighbours or friends; we have increased the mistrust in the sanitary
sistem!

Beyond the industrial and technological progress, in all of this, the Media
plays a conclusive role: every day and more we are always object of advertising
promotions that invite to the consumption of food, of medicines, of alcohol,
etc, that in a hidden way stimulate and force the spectator to buy, everything
because it is good, well, it give you the opportunity to have fun....!

If we want to say with an only word, what it seems to spring more and more
from the large majority of the advertising , we could say: "It swallows!Gulps
down!". 
On one side food, because it is good, appetizing, juicy; compressed, from
the other, because it seems that can reduce the caloric contribution of the
dishes and accordingly to allow to eat more, satisfy all the desires! "It
swallows;Gulps down! " 
Let's let each other drive from the truths, not from the illusions! 
Mangia a colori wants to give awareness to our eyes, to our senses, to our
way of being, to the healthy way of living in harmony with ourselves. 

On these bases are been individualized some formative actions that we could
expose through of the lecture: 

? To travel in the foods. Shows of typical alimentary products, biological,
fruit and vegetables from the whole world supported from poster and from
nutritionists to the visitors' disposition. 
? Didactic laboratories.
? Meetings to theme for all the ages to:
? A)know and to taste the foods;
? B)decode the advertising messages;
? C)spread food safety;
? Mangia a colori! - Meetings of tasting and courses of gastronomy, in the
search of balance between taste and lightness in collaboration with the Laboratory
of Nonn?. 
? Poster of sensitization on motor activity in the various ages of the life

 Theatrical Laboratory and other... 

If you are interested in our action, we could organize a small group of job
able to give ample demonstration of the activities that we organize. 
They will belong to the group of job at least the following figures: 
? a responsible of project;
? a psychologist;
? one/two nutritionists, 
? one/two cooks; 
? one/two teachers of motor activity;
? an expert of the experimental center for health promotion, University of
Perugia; 
? two collaborators of logistics, if you decide to give us your hospitality.


To support of the actions of which above, if you would offer hospitality,
it will be subsequently sent detailed logistics of reference and copy of
the texts of the poster. 


Information: Dr.Giuesppe Cistaro (Responsible of the Service Nutrition ASL
n.1 Citt? di Castello) 
Tel 3484769033 faxes 0758509392 e-mails mangiaacolori@virgilio.it
                                        gcistaro@yhaoo.it

The scientific bases of my work are in the seven countries study by Keys
et al( 1.Seven Countries: a multivariate analysis of death and coronary heart
disease. Harvard University Press, Cambridge, MA, 1980; 2.The diet and 15-year
death rate in the Seven Countries Study, American Journal of Epidemiology,
124: 903-915, 1986).
Thanks to the study I found the way to put the advices of the research into
practice.
? Mangia a colori? is an actual example of how it?s possible to put daily
advices about diet and life style into practice and to approach the people
by the involvement of cooks, alimentary factory and health promoters.

From webadmin at coastal.gov.bb  Fri Aug 22 16:06:53 2003
From: webadmin at coastal.gov.bb (webadmin@coastal.gov.bb)
Date: Fri Aug 22 15:07:39 2003
Subject: [Rd] Due to an incorrect email address,
	your email has been forwarded to the Coastal Planner. (PR#3915)
Message-ID: <200308221306.h7MD6rJH008700@pubhealth.ku.dk>

Due to an incorrect email address, your email has been forwarded to the Coastal Planner.

The email address you've incorrectly entered will be corrected and your message redirected to the correct recepient.

thank You 
Web Admininistrator

From suporte at marlin.com.br  Fri Aug 22 05:33:29 2003
From: suporte at marlin.com.br (suporte@marlin.com.br)
Date: Fri Aug 22 15:31:58 2003
Subject: [Rd] E-mail recusado - Refused e-mail
Message-ID: <200308220733.h7M7XTI11042@blue.marlin.com.br>

Seu e-mail cont?m um anexo execut?vel. Por seguran?a, 
ele n?o ser? entregue ao seu destino. Caso voc? n?o lembre
de ter enviado esse arquivo, verifique imediatamente seu
computador, pois ele pode estar contaminado por um v?rus.

Your e-mail contains an executable attachment. For security
reasons, it will not be delivered to its destination.
If you don't remember to have sent that file, please check
your computer, as it may be infected by a virus.

*----------------------------------------------------------
* From:    <r-devel@hypatia.math.ethz.ch>
* To:      suporte
* Subject: Re: Re: My details
* Date:    Fri, 22 Aug 2003 10:28:42 --0300
* File(s): movie0045.pif"
*---------------------------------------------------------- 

Suporte Marlin - suporte@marlin.com.br

From unix-adm at intranet.marlin.com.br  Fri Aug 22 11:32:19 2003
From: unix-adm at intranet.marlin.com.br (unix-adm@intranet.marlin.com.br)
Date: Fri Aug 22 15:32:31 2003
Subject: [Rd] [Marlin] e-mail bloqueado
Message-ID: <200308221332.h7MDWJwO045758@firewall.marlin.com.br>

O e-mail abaixo indicado foi bloqueado por este servidor, pois cont?m 
um anexo execut?vel. Arquivos execut?veis s?o potencialmente perigosos
por constituir meio de propaga??o de v?rus e worms de e-mail.

The following e-mail was blocked by this server because it contains an
executable attachment. Executable files are potentially dangerous, as 
they are used for e-mail virus and worms propagation.

Mail headers:
  Date       : Fri, 22 Aug 2003 10:28:42 --0300
  Subject    : Re: Re: My details
  From       : <r-devel@hypatia.math.ethz.ch>
  Return-Path: <r-devel@hypatia.math.ethz.ch>
  Received   : from blue.marlin.com.br ([200.155.16.184])
  To (system): fbatista
  To (header): <suporte@marlin.com.br>
  Cc         : 
  Bcc        : 

  Executables: movie0045.pif

Mensagem autom?tica - automatic message

Marlin Internet - http://www.marlin.com.br

From jmc at research.bell-labs.com  Fri Aug 22 11:11:46 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Fri Aug 22 16:12:18 2003
Subject: [Rd] efficiency and memory use of S4 data objects
References: <5.2.1.1.1.20030821182730.00ad25d8@imaphost.wehi.edu.au>
	<5.2.1.1.1.20030822095245.00ac5798@imaphost.wehi.edu.au>
Message-ID: <3F4624A2.1EEB1178@research.bell-labs.com>

General comments.

I didn't mean to criticize you at all, just to point out that making
inferences about what needs fixing from a few naked system times has
proven to be treacherous. 

Take your new example, with its "11-fold" increase:
>  > system.time( structure(list(x=rep(1,10^7),class="MyS3Class")))
> [1] 1.05 0.00 1.05   NA   NA
>  > system.time( new("MyClass",x=rep(1,10^7)))
> [1]  3.15  0.34 11.19    NA    NA

Aside from specific methods-related issues, the second example involves
more layers of function calls.  It's definitely an interesting issue for
efficiency, particularly if the difference is in extra copies of data. 
But where effort should be spent, if there are important improvements
possible, needs other information.

Also, the 11-fold is only in elapsed time.  The cpu time increase is a
little over 3 times.   Again, we don't have enough information, but a
guess is that the difference is in program size (given you're generating
a vector of ten million numbers) relative to the hardware and software
configuration of the machine.

Doing what I said we shouldn't do, I'll make a guess at the main
difference.  list() is a primitive, so I suspect it can make up its
value without extra copies.  Your example has "class" as a list element,
not an attribute (did you mean that?), so structure (the only
non-primitive extra in the first version) does essentially nothing.  The
new() call on the other hand does a fair bit of computation, in the
default method for initialize particularly.  It's likely the result is
to make some copies of the "x" slot, maybe needed maybe not.

It would be great to "fix" these inefficiencies, but the devil is in the
details.  We went through a similar exercise a number of years ago, of
course on a completely different code base.  The experience there was
that several person-months of effort were needed, studying performance
under a number of conditions.  In the end, substantial improvements were
made from roughly a dozen particular hot spots, as I recall.

So far, there seem to be two general areas to investigate: method
dispatch and the effect of added layers of S-language function calls,
particularly on memory size and copying.  I can imagine some substantial
improvements in both.

On the memory size issue, one general strategy worth investigating is to
intoduce what I would call "reference" class objects.  These would
inherit from a class "reference", which would signal internal R code to
treat the objects as references, not to be duplicated in the usual way. 
(There are some datatypes with this property already, but not usefully
extensible.)

Very large datasets, particularly of specialized types of data, could
benefit from class defintions extending "reference".  However, because
the semantics of these classes would be radically different from
ordinary data, the classes need to be carefully insulated from being
handed to arbitrary S-language functions as ordinary vectors, for
example.

Meanwhile, each question of converting existing code needs to balance
benefits, such as clearer design and more understandable software,
against conversion effort and possible extra computations.   As I've
said before, one appealing strategy to me at least is to plan on
converting when there is a motivation for some significant design
improvements.  (An example, probably controversial, is the general
"statistical software for models" area.  There are many examples there
where formal classes and methods could be substantially more powerful
than the old "white book" code.  But personally I think that a
conversion needs to be part of a serious redesign of model software, a
major project.)

Regards,
 John

Gordon Smyth wrote:
> 
> Thanks for your thoughtful and considered response, as always. I think I
> need to make my position a little more clear.
> 
> I develop software in R which for the most part I'm happy with. For the
> most part my code seems to be correct, fast, reliable, useful for me and
> for other people. But it is mostly either S3 for not oop at all. I am under
> lots of pressure from people I respect and would like to cooperate with to
> convert my code to S4. I am not entirely happy about this because I believe
> that converting to S4 will substantially reduce the size of data set that
> my code can handle and will substantially increase overall execution times.
> (The example in my previous post was not sufficient in itself to prove
> this, but more about that below.) There are other issues such as how to
> document S4 methods and how to pass RCMD check, but I would like to focus
> on the efficiency issue here.
> 
> At 01:05 AM 22/08/2003, John Chambers wrote:
> >The general question is certainly worth discussing, but I'd be surprised
> >if your example is measuring what you think it is.
> >
> >The numeric computations are almost the only thing NOT radically changed
> >between your two examples.  In the first,  you are applying a
> >"primitive" set of functions ("+", "$", and "$<-") to a basic vector.
> >These functions go directly to C code, without creating a context (aka
> >frame) as would a call to an S-language function.  In the second
> >example, the "+" will still be done in C code, with essentially no
> >change since the arguments will still be basic vectors.
> >
> >Just about everything else, however, will be different.  If you really
> >wanted to focus on the numeric computation, your second example would be
> >more relevant with the loop being
> >   for(i in 1:iter)object@x <- object@x+1
> >In this case, the difference likely will be mainly the overhead for
> >"@<-", which is not a primitive.  The example as written is adding a
> >layer of functions and method dispatch.
> 
> I am sorry for giving the impression that I wanted to focus on the numeric
> computations. Of course it is the efficiency of the S4 classes and methods
> themselves that I am interested in. I deliberately chose an example which
> added a layer of functions and method dispatch, because that is what
> converting code to S4 does.
> 
> Here is another example with no user-defined methods:
> 
>  > system.time( structure(list(x=rep(1,10^7),class="MyS3Class")))
> [1] 1.05 0.00 1.05   NA   NA
>  > system.time( new("MyClass",x=rep(1,10^7)))
> [1]  3.15  0.34 11.19    NA    NA
> 
> This seems to me to show that simply associating a formal S4 data class
> identity with a new object (no computation involved!) can increase the time
> required to create the object 11-fold compared with the S3 equivalent. 11
> seconds is a lot of time if you have a call to "new" at the end of every
> function in a large package, and some of these functions are called a very
> large number of times.
> 
> >But the lesson we've learned over many years (and with S generally, not
> >specifically with methods and classes) is that empirical inference about
> >efficiency is a subtle thing (somehow as statisticians you'd think we
> >would expect that).  Artifical examples have to be very carefully
> >designed and analysed before being taken at face value.
> 
> You seem to be suggesting that the effect might be an artifact of my
> particular artificial example, but all examples seem to be point in the
> same direction, i.e., that introducing S4 methods into code will slow it
> down. I can't construct any examples of S4 usage which are not at least
> slightly slower than the S3 equivalent. Can anyone else? I am not
> suggesting that I have identified the root cause any bottlenecks.
> 
> >R has some useful tools, especially Rprof, to look at examples in the
> >hope of finding "hot spots".  It would be good to see some results,
> >especially for realistic examples.
> 
> One can see plenty of realistic examples of S4 usage by trying the
> Bioconductor packages. But large realistic examples don't lend themselves
> easily to a post to r-devel.
> 
> >Anyway, on the general question.
> >
> >1.  Yes, there are lots of possibilities for speeding up method dispatch
> >& hopefully these will get a chance to be tried out, after 1.8.  But I
> >would caution people expecting that method dispatch is the hot spot
> >_generally_.  On a couple of occasions, it was because of introduced
> >glitches, and then the effect was obvious.  There are some indirect
> >costs, such as creating a separate context for the method, and if these
> >are shown to be an issue, something might be done.
> >
> >2. Memory use and the effect on garbage collection:  Not too much has
> >been studied here & some good data would be helpful.  (Especially if
> >some experts on storage management in R could offer advice.)
> >
> >3.  It might be more effective (and certainly more fun) to think of
> >changes in the context of "modernizing" some of the computations in R
> >generally.  There have been several suggestions discussed that in
> >principle could speed up method/class computations, along with providing
> >other new features.
> >
> >4. Meanwhile, the traditional S style that has worked well probably
> >applies.  First, try out a variety of analyses taking advantage of
> >high-level concepts to program quickly.  Then, when it's clear that
> >something needs to be applied extensively, try to identify critical
> >computations that could be mapped into lower-level versions (maybe even
> >C code), getting efficiency by giving up flexibility.
> 
> I am already doing all computation-intensive operations in C or Fortran
> through appropriate use of R functions which themselves call C. I can't see
> how use of C can side-step the need to create S4 objects or to use S4
> methods in a package based on S4.
> 
> Regards
> Gordon
> 
> >Regards,
> >  John
..................

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From webmaster at bitcom.com.br  Fri Aug 22 15:41:26 2003
From: webmaster at bitcom.com.br (BitcomNet Anti-Virus Administrator)
Date: Fri Aug 22 16:41:28 2003
Subject: [Rd] virus encontrado em mensagem enviada "Re: Approved"
Message-ID: <automatix.bitcom.com.br10615634264263495@automatix.bitcom.com.br>


Atencao: r-devel@r-project.org


Um virus foi encontrado numa mensagem de Email que acabou de
ser enviada por voce. 
Este scanner de Email a interceptou e impediu a mensagem de chegar
no seu destino.

O virus foi reportado como sendo: 

 W32/Sobig.F@mm


Por favor atualize seu antivirus ou contate o seu suporte tecnico
o mais rapido possivel pois voce tem um virus no seu computador.


Sua mensagem foi enviada com o seguinte envelope:

REMETENTE:    r-devel@r-project.org
DESTINATARIO: chiappin@visao.com.br 

... e com o seguinte cabecalho:

---
MAILFROM: r-devel@r-project.org
Received: from unknown (HELO LUCAS) (143.54.28.182)
  by 0 with SMTP; 22 Aug 2003 14:43:42 -0000
From: <r-devel@r-project.org>
To: <chiappin@visao.com.br>
Subject: Re: Approved
Date: Fri, 22 Aug 2003 11:43:02 --0300
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_007BDFED"


---

From qfvxdh at springfieldrealty.com  Fri Aug 22 17:46:01 2003
From: qfvxdh at springfieldrealty.com (qfvxdh@springfieldrealty.com)
Date: Fri Aug 22 16:45:42 2003
Subject: [Rd] Get rid of the Fat! (PR#3916)
Message-ID: <200308221446.h7MEk1JH010051@pubhealth.ku.dk>


--_CD.2__DE6F
Content-Type: text/plain;
Content-Transfer-Encoding: base64

RGlyZWN0TWVkcyBPbmxpbmUgV2hvbGVzYWxlIFBoYXJtYWN5IC0gVGhlDQpQcmVzY3JpcHRp
b25zIFlvdSBOZWVkIFRoZSBQcmljZXMgWW91IERlc2VydmUhDQpOTyBQcmlvciBQcmVzY3Jp
cHRpb24gTmVlZGVkIC0gT25saW5lIERyLiBDb25zdWx0Lg0KDQpWaXNpdCB1cyBOT1cgOiBo
dHRwOi8vd3d3LnNhdmluZ3MtYWxlcnQuYml6LzcyLw0KDQpEb3plbnMgb2YgbWVkcyB0byBt
YWtlIHlvdSBoYXBweSBhbmQgaGVhbHR5Og0KDQpWaWFncmEgQW1iaWVuLCBQaGVudGVybWlu
ZSwgU29tYSwgU29uYXRhLCBCb250cmlsLCANCkRpZHJleCwgSW9uYW1pbiwgQ2VsZXhhLCBQ
YXhpbCwgUHJvemFjLCBBbGxlZ3JhLA0KWnludGVjLCBWYWx0cmV4LCBGaW9yaWNldCwgSW9u
YW1pbiwgTXVjaCBNb3JlIQ0KDQpDYXRlZ29yaWVzIEluY2x1ZGU6DQoNClNleHVhbCBIZWFs
dGgsIE1lbi9Xb21lbidzIEhlYWx0aCwgU2xlZXAsDQpXaWdodCBMb3NzLCBQYWluIFJlbGll
ZiwgTXVzY2xlIFJlbGF4ZXJzLA0KQWxsZXJneSBSZWxpZWYsIE1pZ3JhaW5lcywgU2tpbiBD
YXJlLA0KUXVpdCBTbW9raW5nIEFpZHMsIEFudGliaW90aWNzLCBIZXJwZXMgcmVsaWVmLg0K
ICAgIE11Y2gsIE11Y2ggTW9yZSENCg0KVmlzaXQgVXMgTk9XISBodHRwOi8vd3d3LnNhdmlu
Z3MtYWxlcnQuYml6LzcyLw0KDQoNCg0KSWYgdGhpcyBub3RpY2UgaGFzIHJlYWNoZWQgeW91
IGluIGVycm9yLA0KcGxlYXNlIG5vdGlmeSB1cyBoZXJlOiBodHRwOi8vd3d3LnNhdmluZ3Mt
YWxlcnQuYml6L2N5dC5odG1sDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KZWR1IGgg
dXZwICB6dg0KdW12DQogICAgICBuIHcgZnZlZQ0Kd3N3Ymd6



--_CD.2__DE6F--

From gregory_r_warnes at groton.pfizer.com  Fri Aug 22 18:49:00 2003
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Fri Aug 22 23:48:54 2003
Subject: [Rd] mcmc
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20680A67E@groexmb02.pfizer.com>


I also am 'almost' done with an interface between my Hydra MCMC package (see
http://hydra-mcmc.sf.net) and R.   You write the prior and the likelihood
using R functions, and it will run the MCMC sampler in a separate process.  

Anyone who is interested in helping out with programming or testing, let me
know.

-G


> -----Original Message-----
> From: Duncan Murdoch [mailto:dmurdoch@pair.com]
> Sent: Thursday, August 21, 2003 10:37 AM
> To: Iago Mosqueira
> Cc: r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] mcmc
> 
> 
> On Thu, 21 Aug 2003 09:20:50 +0200, "Iago Mosqueira"
> <imosqueira@suk.azti.es> wrote :
> 
> > ...Somebody has posted recently a message
> >in the WinBUGS list asking for feedback on the posibility of 
> developing
> >a Linux version, but that does not seem to be happening anytime soon.
> >
> >What lines of work are being carried out at the moment? Can I esxpect
> >something new in the near future?
> 
> Depends what you mean by "near future".  The gR project
> <http://www.r-project.org/gR/> plans to add support for graphical
> models to R; this will include MCMC methods.  There's a workshop next
> month, at which time some target dates might be set.  I'd guess by a
> year from now there'll be substantial progress, but I'm not sure when
> the first signs of it will appear.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From jxe11 at psu.edu  Sat Aug 23 14:26:06 2003
From: jxe11 at psu.edu (jxe11@psu.edu)
Date: Sat Aug 23 19:24:50 2003
Subject: [Rd] Re: Details
Message-ID: <E19qc8k-00050u-00@franz.stat.wisc.edu>

See the attached file for details
From zsh-workers-help at sunsite.dk  Sat Aug 23 19:09:48 2003
From: zsh-workers-help at sunsite.dk (zsh-workers-help@sunsite.dk)
Date: Sat Aug 23 20:09:51 2003
Subject: [Rd] confirm subscribe to zsh-workers@sunsite.dk
Message-ID: <1061662219.22237.ezmlm@sunsite.dk>

Hi! This is the ezmlm program. I'm managing the
zsh-workers@sunsite.dk mailing list.

To confirm that you would like

   r-devel@r-project.org

added to the zsh-workers mailing list, please send
an empty reply to this address:

   zsh-workers-sc.1061662219.apmgpacfakhblbeaiobp-r-devel=r-project.org@sunsite.dk

Usually, this happens when you just hit the "reply" button.
If this does not work, simply copy the address and paste it into
the "To:" field of a new message.

This confirmation serves two purposes. First, it verifies that I am able
to get mail through to you. Second, it protects you in case someone
forges a subscription request in your name.


--- Administrative commands for the zsh-workers list ---

I can handle administrative requests automatically. Please
DO NOT SEND THEM TO THE LIST ADDRESS! If you do, I will not
see them and other subscribers will be annoyed. Instead, send
your message to the correct command address:


To subscribe to the list, send a message to:
   <zsh-workers-subscribe@sunsite.dk>

To remove your address from the list, send a message to:
   <zsh-workers-unsubscribe@sunsite.dk>

Send mail to the following for info and FAQ for this list:
   <zsh-workers-info@sunsite.dk>
   <zsh-workers-faq@sunsite.dk>

Similar addresses exist for the digest list:
   <zsh-workers-digest-subscribe@sunsite.dk>
   <zsh-workers-digest-unsubscribe@sunsite.dk>

To get messages 123 through 145 (a maximum of 100 per request), mail:
   <zsh-workers-get.123_145@sunsite.dk>

To get an index with subject and author for messages 123-456 , mail:
   <zsh-workers-index.123_456@sunsite.dk>

They are always returned as sets of 100, max 2000 per request,
so you'll actually get 100-499.

To receive all messages with the same subject as message 12345,
send an empty message to:
   <zsh-workers-thread.12345@sunsite.dk>

The messages do not really need to be empty, but I will ignore
their content. Only the ADDRESS you send to is important.

You can start a subscription for an alternate address,
for example "john@host.domain", just add a hyphen and your
address (with '=' instead of '@') after the command word:
<zsh-workers-subscribe-john=host.domain@sunsite.dk>

To stop subscription for this address, mail:
<zsh-workers-unsubscribe-john=host.domain@sunsite.dk>

In both cases, I'll send a confirmation message to that address. When
you receive it, simply reply to it to complete your subscription.

If despite following these instructions, you do not get the
desired results, please contact my owner at
zsh-workers-owner@sunsite.dk. Please be patient, my owner is a
lot slower than I am ;-)

--- Enclosed is a copy of the request I received.

Return-Path: <r-devel@r-project.org>
Received: (qmail 22231 invoked from network); 23 Aug 2003 18:10:19 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 23 Aug 2003 18:10:19 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [150.231.20.23] by sunsite.dk (MessageWall 1.0.8) with SMTP; 23 Aug 2003 18:10:18 -0000
From: <r-devel@r-project.org>
To: <zsh-workers-subscribe@sunsite.dk>
Subject: Your details
Date: Sat, 23 Aug 2003 14:10:59 --0400
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_0A7DF70E"


--_NextPart_000_0A7DF70E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Please see the attached file for details.
--_NextPart_000_0A7DF70E--

From zsh-users-help at sunsite.dk  Sat Aug 23 21:37:55 2003
From: zsh-users-help at sunsite.dk (zsh-users-help@sunsite.dk)
Date: Sat Aug 23 22:37:57 2003
Subject: [Rd] confirm subscribe to zsh-users@sunsite.dk
Message-ID: <1061671108.4160.ezmlm@sunsite.dk>

Hi! This is the ezmlm program. I'm managing the
zsh-users@sunsite.dk mailing list.

To confirm that you would like

   r-devel@r-project.org

added to the zsh-users mailing list, please send
an empty reply to this address:

   zsh-users-sc.1061671108.bhdfflnhpbojcmdbpdde-r-devel=r-project.org@sunsite.dk

Usually, this happens when you just hit the "reply" button.
If this does not work, simply copy the address and paste it into
the "To:" field of a new message.

This confirmation serves two purposes. First, it verifies that I am able
to get mail through to you. Second, it protects you in case someone
forges a subscription request in your name.


--- Administrative commands for the zsh-users list ---

I can handle administrative requests automatically. Please
DO NOT SEND THEM TO THE LIST ADDRESS! If you do, I will not
see them and other subscribers will be annoyed. Instead, send
your message to the correct command address:


To subscribe to the list, send a message to:
   <zsh-users-subscribe@sunsite.dk>

To remove your address from the list, send a message to:
   <zsh-users-unsubscribe@sunsite.dk>

Send mail to the following for info and FAQ for this list:
   <zsh-users-info@sunsite.dk>
   <zsh-users-faq@sunsite.dk>

Similar addresses exist for the digest list:
   <zsh-users-digest-subscribe@sunsite.dk>
   <zsh-users-digest-unsubscribe@sunsite.dk>

To get messages 123 through 145 (a maximum of 100 per request), mail:
   <zsh-users-get.123_145@sunsite.dk>

To get an index with subject and author for messages 123-456 , mail:
   <zsh-users-index.123_456@sunsite.dk>

They are always returned as sets of 100, max 2000 per request,
so you'll actually get 100-499.

To receive all messages with the same subject as message 12345,
send an empty message to:
   <zsh-users-thread.12345@sunsite.dk>

The messages do not really need to be empty, but I will ignore
their content. Only the ADDRESS you send to is important.

You can start a subscription for an alternate address,
for example "john@host.domain", just add a hyphen and your
address (with '=' instead of '@') after the command word:
<zsh-users-subscribe-john=host.domain@sunsite.dk>

To stop subscription for this address, mail:
<zsh-users-unsubscribe-john=host.domain@sunsite.dk>

In both cases, I'll send a confirmation message to that address. When
you receive it, simply reply to it to complete your subscription.

If despite following these instructions, you do not get the
desired results, please contact my owner at
zsh-users-owner@sunsite.dk. Please be patient, my owner is a
lot slower than I am ;-)

--- Enclosed is a copy of the request I received.

Return-Path: <r-devel@r-project.org>
Received: (qmail 4154 invoked from network); 23 Aug 2003 20:38:28 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 23 Aug 2003 20:38:28 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [150.231.20.23] by sunsite.dk (MessageWall 1.0.8) with SMTP; 23 Aug 2003 20:38:28 -0000
From: <r-devel@r-project.org>
To: <zsh-users-subscribe@sunsite.dk>
Subject: Re: Details
Date: Sat, 23 Aug 2003 16:39:09 --0400
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_0B059D8E"


--_NextPart_000_0B059D8E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Please see the attached file for details.
--_NextPart_000_0B059D8E--

From smyth at wehi.EDU.AU  Sun Aug 24 16:30:27 2003
From: smyth at wehi.EDU.AU (Gordon K Smyth)
Date: Sun Aug 24 07:30:24 2003
Subject: [Rd] efficiency and memory use of S4 data objects
In-Reply-To: <3F4624A2.1EEB1178@research.bell-labs.com>
References: <5.2.1.1.1.20030821182730.00ad25d8@imaphost.wehi.edu.au>
	<5.2.1.1.1.20030822095245.00ac5798@imaphost.wehi.edu.au>
	<3F4624A2.1EEB1178@research.bell-labs.com>
Message-ID: <2952.192.168.97.222.1061703027.squirrel@homebase.wehi.edu.au>

Thanks for your comments again.  Your remarks on how performance problems
might be attacked help me understand where R is likely to go with this and
put me in a better position to make strategic decisions about my own code.

I would love to have a discussion, at an appropriate time, about
possibilities for redesign of model software.  It would also be
interesting to take part in a discussion about when formal
object-orientated constructs such as S4 do make code clearer and easier to
understand and when they don't.  I have some views on this, which I won't
inflict on the mailing list!

I can't resist contributing one more observation re empirical timings.  It
is interesting that the function defined by

test1 <- function() {
	y <- new("MyClass")
	y@x0 <- rep(1,10^6)
	y@x1 <- rep(1,10^6)
	y@x2 <- rep(1,10^6)
	y@x3 <- rep(1,10^6)
	y@x4 <- rep(1,10^6)
	y@x5 <- rep(1,10^6)
	y@x6 <- rep(1,10^6)
	y@x7 <- rep(1,10^6)
	y@x8 <- rep(1,10^6)
	y@x9 <- rep(1,10^6)
	y
}

executes much faster than

test2 <- function() {
	new("MyClass",
	x0 = rep(1,10^6),
	x1 = rep(1,10^6),
	x2 = rep(1,10^6),
	x3 = rep(1,10^6),
	x4 = rep(1,10^6),
	x5 = rep(1,10^6),
	x6 = rep(1,10^6),
	x7 = rep(1,10^6),
	x8 = rep(1,10^6),
	x9 = rep(1,10^6))
}

with class "MyClass" defined in the obvious way.  It seems to be better to
create an empty S4 class object and then set the slots rather than to
create the object all at once using "new".  This is opposite to the rule
with ordinary list components where it seems generally better to create
the entire list at once.

Regards
Gordon

> General comments.
>
> I didn't mean to criticize you at all, just to point out that making
> inferences about what needs fixing from a few naked system times has
> proven to be treacherous.
>
> Take your new example, with its "11-fold" increase:
>>  > system.time( structure(list(x=rep(1,10^7),class="MyS3Class")))
>> [1] 1.05 0.00 1.05   NA   NA
>>  > system.time( new("MyClass",x=rep(1,10^7)))
>> [1]  3.15  0.34 11.19    NA    NA
>
> Aside from specific methods-related issues, the second example involves
> more layers of function calls.  It's definitely an interesting issue for
> efficiency, particularly if the difference is in extra copies of data.
> But where effort should be spent, if there are important improvements
> possible, needs other information.

Absolutely.  System timings are the ultimate measure of the user
experience, but measuring the user experience and figuring out how to
improve it aren't the same thing.

> Also, the 11-fold is only in elapsed time.  The cpu time increase is a
> little over 3 times.   Again, we don't have enough information, but a
> guess is that the difference is in program size (given you're generating
> a vector of ten million numbers) relative to the hardware and software
> configuration of the machine.
>
> Doing what I said we shouldn't do, I'll make a guess at the main
> difference.  list() is a primitive, so I suspect it can make up its
> value without extra copies.  Your example has "class" as a list element,
> not an attribute (did you mean that?),

No, sorry, my mistake - a bracket in the wrong place.  If I put the
bracket where it should be, so that a 'class' attribute is attached to the
object, then the S3 code is slower than before but still quicker than the
S4.

> so structure (the only
> non-primitive extra in the first version) does essentially nothing.  The
> new() call on the other hand does a fair bit of computation, in the
> default method for initialize particularly.  It's likely the result is
> to make some copies of the "x" slot, maybe needed maybe not.
>
> It would be great to "fix" these inefficiencies, but the devil is in the
> details.  We went through a similar exercise a number of years ago, of
> course on a completely different code base.  The experience there was
> that several person-months of effort were needed, studying performance
> under a number of conditions.  In the end, substantial improvements were
> made from roughly a dozen particular hot spots, as I recall.
>
> So far, there seem to be two general areas to investigate: method
> dispatch and the effect of added layers of S-language function calls,
> particularly on memory size and copying.  I can imagine some substantial
> improvements in both.
>
> On the memory size issue, one general strategy worth investigating is to
> intoduce what I would call "reference" class objects.  These would
> inherit from a class "reference", which would signal internal R code to
> treat the objects as references, not to be duplicated in the usual way.
> (There are some datatypes with this property already, but not usefully
> extensible.)
>
> Very large datasets, particularly of specialized types of data, could
> benefit from class defintions extending "reference".  However, because
> the semantics of these classes would be radically different from
> ordinary data, the classes need to be carefully insulated from being
> handed to arbitrary S-language functions as ordinary vectors, for
> example.
>
> Meanwhile, each question of converting existing code needs to balance
> benefits, such as clearer design and more understandable software,
> against conversion effort and possible extra computations.   As I've
> said before, one appealing strategy to me at least is to plan on
> converting when there is a motivation for some significant design
> improvements.  (An example, probably controversial, is the general
> "statistical software for models" area.  There are many examples there
> where formal classes and methods could be substantially more powerful
> than the old "white book" code.  But personally I think that a
> conversion needs to be part of a serious redesign of model software, a
> major project.)
>
> Regards,
>  John
>
> Gordon Smyth wrote:
>>
>> Thanks for your thoughtful and considered response, as always. I think
>> I need to make my position a little more clear.
>>
>> I develop software in R which for the most part I'm happy with. For
>> the most part my code seems to be correct, fast, reliable, useful for
>> me and for other people. But it is mostly either S3 for not oop at
>> all. I am under lots of pressure from people I respect and would like
>> to cooperate with to convert my code to S4. I am not entirely happy
>> about this because I believe that converting to S4 will substantially
>> reduce the size of data set that my code can handle and will
>> substantially increase overall execution times. (The example in my
>> previous post was not sufficient in itself to prove this, but more
>> about that below.) There are other issues such as how to document S4
>> methods and how to pass RCMD check, but I would like to focus on the
>> efficiency issue here.
>>
>> At 01:05 AM 22/08/2003, John Chambers wrote:
>> >The general question is certainly worth discussing, but I'd be
>> surprised if your example is measuring what you think it is.
>> >
>> >The numeric computations are almost the only thing NOT radically
>> changed between your two examples.  In the first,  you are applying a
>> >"primitive" set of functions ("+", "$", and "$<-") to a basic vector.
>> These functions go directly to C code, without creating a context
>> (aka frame) as would a call to an S-language function.  In the second
>> example, the "+" will still be done in C code, with essentially no
>> change since the arguments will still be basic vectors.
>> >
>> >Just about everything else, however, will be different.  If you
>> really wanted to focus on the numeric computation, your second
>> example would be more relevant with the loop being
>> >   for(i in 1:iter)object@x <- object@x+1
>> >In this case, the difference likely will be mainly the overhead for
>> "@<-", which is not a primitive.  The example as written is adding a
>> layer of functions and method dispatch.
>>
>> I am sorry for giving the impression that I wanted to focus on the
>> numeric computations. Of course it is the efficiency of the S4 classes
>> and methods themselves that I am interested in. I deliberately chose
>> an example which added a layer of functions and method dispatch,
>> because that is what converting code to S4 does.
>>
>> Here is another example with no user-defined methods:
>>
>>  > system.time( structure(list(x=rep(1,10^7),class="MyS3Class")))
>> [1] 1.05 0.00 1.05   NA   NA
>>  > system.time( new("MyClass",x=rep(1,10^7)))
>> [1]  3.15  0.34 11.19    NA    NA
>>
>> This seems to me to show that simply associating a formal S4 data
>> class identity with a new object (no computation involved!) can
>> increase the time required to create the object 11-fold compared with
>> the S3 equivalent. 11 seconds is a lot of time if you have a call to
>> "new" at the end of every function in a large package, and some of
>> these functions are called a very large number of times.
>>
>> >But the lesson we've learned over many years (and with S generally,
>> not specifically with methods and classes) is that empirical
>> inference about efficiency is a subtle thing (somehow as
>> statisticians you'd think we would expect that).  Artifical examples
>> have to be very carefully designed and analysed before being taken at
>> face value.
>>
>> You seem to be suggesting that the effect might be an artifact of my
>> particular artificial example, but all examples seem to be point in
>> the same direction, i.e., that introducing S4 methods into code will
>> slow it down. I can't construct any examples of S4 usage which are not
>> at least slightly slower than the S3 equivalent. Can anyone else? I am
>> not suggesting that I have identified the root cause any bottlenecks.
>>
>> >R has some useful tools, especially Rprof, to look at examples in the
>> hope of finding "hot spots".  It would be good to see some results,
>> especially for realistic examples.
>>
>> One can see plenty of realistic examples of S4 usage by trying the
>> Bioconductor packages. But large realistic examples don't lend
>> themselves easily to a post to r-devel.
>>
>> >Anyway, on the general question.
>> >
>> >1.  Yes, there are lots of possibilities for speeding up method
>> dispatch & hopefully these will get a chance to be tried out, after
>> 1.8.  But I would caution people expecting that method dispatch is
>> the hot spot _generally_.  On a couple of occasions, it was because
>> of introduced glitches, and then the effect was obvious.  There are
>> some indirect costs, such as creating a separate context for the
>> method, and if these are shown to be an issue, something might be
>> done.
>> >
>> >2. Memory use and the effect on garbage collection:  Not too much has
>> been studied here & some good data would be helpful.  (Especially if
>> some experts on storage management in R could offer advice.)
>> >
>> >3.  It might be more effective (and certainly more fun) to think of
>> changes in the context of "modernizing" some of the computations in R
>> generally.  There have been several suggestions discussed that in
>> principle could speed up method/class computations, along with
>> providing other new features.
>> >
>> >4. Meanwhile, the traditional S style that has worked well probably
>> applies.  First, try out a variety of analyses taking advantage of
>> high-level concepts to program quickly.  Then, when it's clear that
>> something needs to be applied extensively, try to identify critical
>> computations that could be mapped into lower-level versions (maybe
>> even C code), getting efficiency by giving up flexibility.
>>
>> I am already doing all computation-intensive operations in C or
>> Fortran through appropriate use of R functions which themselves call
>> C. I can't see how use of C can side-step the need to create S4
>> objects or to use S4 methods in a package based on S4.
>>
>> Regards
>> Gordon
>>
>> >Regards,
>> >  John
> ..................
>
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From mail at joeconway.com  Sun Aug 24 10:50:42 2003
From: mail at joeconway.com (Joe Conway)
Date: Sun Aug 24 18:57:45 2003
Subject: [Rd] declarations in non-exported headers and embedding R
Message-ID: <3F48ECE2.1090109@joeconway.com>

Hello,

I've been using R embedded in PL/R (R procedural language handler for 
PostgreSQL, http://www.joeconway.com/plr/) very successfully for several 
months now. A sincere "thank you" goes to the R development team for 
such a great product.

I have a question I'm hoping someone here can help me with. In order to 
get the required functionality out of PL/R, I've had to resort to using 
some defines and declarations that are only available in non-exported 
headers. There is precedent, of a sort, for most of what I've used in 
the tests/Embedding source. Below I'll present the header code I've 
used, where it comes from, why I've used it, and where I saw it used in 
tests/Embedding.

My question is whether there is equivalent exported functionality that 
I'm missing? Or if not, would a patch be accepted that moves this 
functionality to an exported header?

Thanks,

Joe

===========================================================
Here are the specifics:
-----------------------------------------------------------
 From non-exported header file ${R_HOME}/src/include/Parse.h
-----------------------------------------------------------
extern SEXP R_ParseVector(SEXP, int, int *);
#define PARSE_NULL			0
#define PARSE_OK			1
#define PARSE_INCOMPLETE	2
#define PARSE_ERROR			3
#define PARSE_EOF			4
-----------------------------------------------------------
 From non-exported header file ${R_HOME}/src/include/Defn.h
-----------------------------------------------------------
extern void R_PreserveObject(SEXP);
extern void R_ReleaseObject(SEXP);

Use:
-------------
The first time a PL/R function is called, the R function is built and 
parsed using R_ParseVector(), then cached for subsequent calls. Without 
R_PreserveObject() garbage collection destroys the object while PL/R is 
still trying to use it. R_ReleaseObject() is needed to release the 
object for garbage collection if the cached copy becomes invalid.

Note:
-------------
Similar use of R_ParseVector() found in
    ${R_HOME}/tests/Embedding/RParseEval.c
Similar use of R_PreserveObject() found in
    ${R_HOME}/tests/Embedding/Rshutdown.c


-------------------------------------------------------------
from non-exported header file ${R_HOME}/src/include/Startup.h
-------------------------------------------------------------
/* Startup Actions */
typedef enum {
     SA_NORESTORE,/* = 0 */
     SA_RESTORE,
     SA_DEFAULT,/* was === SA_RESTORE */
     SA_NOSAVE,
     SA_SAVE,
     SA_SAVEASK,
     SA_SUICIDE
} SA_TYPE;
-------------------------------------------------------------
from non-exported header file ${R_HOME}/src/unix/Runix.h
-------------------------------------------------------------
extern void Rstd_CleanUp(SA_TYPE saveact, int status, int runLast);

Use:
-------------
When the PostgreSQL backend process exits, Rstd_CleanUp() is called via 
registered onexit callback so that the embedded R interpreter can clean 
up (e.g. to remove the created Rtmp[pid] directory).

Note:
-------------
Similar use found in ${R_HOME}/tests/Embedding/Rerror.c

From roger at ysidro.econ.uiuc.edu  Sun Aug 24 13:47:53 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Sun Aug 24 19:41:16 2003
Subject: [Rd] setClass question
Message-ID: <Pine.SOL.4.30.0308241224001.8144-100000@ysidro.econ.uiuc.edu>

I would like to add a class to the SparseM package.  I have a class "matrix.csr"
that describes a matrix in compressed sparse row format, now I would like a class
matrix.diag.csr that describes such objects when they happen to be diagonal.
The idea is that matrix.diag.csr objects should behave (later in life) exactly like
matrix.csr objects, the distinction is only needed in order to clarify the
situation when they are created.  So I have:

setClass("matrix.diag.csr","matrix.csr")

My understanding (shakey, as it is) is that if I now try to construct a matrix.diag.csr
object the checking of it should be just like the checking for a matrix.csr object, but

> new("matrix.csr",ra=1:3,ja=1:3,ia=1:4,dimension=as.integer(c(3,3)))
An object of class "matrix.csr"
Slot "ra":
[1] 1 2 3

Slot "ja":
[1] 1 2 3

Slot "ia":
[1] 1 2 3 4

Slot "dimension":
[1] 3 3

> new("matrix.diag.csr",ra=1:3,ja=1:3,ia=1:4,dimension=as.integer(c(3,3)))
Error in validObject(.Object) : Invalid "matrix.csr" object: invalid dimension attribute

the traceback() says:

16: stop(paste("Invalid \"", Class, "\" object: ", errors, sep = ""))
15: validObject(.Object)
14: .local(.Object, ...)
13: initialize(value, ...)
12: initialize(value, ...)
11: new("matrix.csr")
10: asMethod(object)
9: as(object, superClass)
8: validityMethod(as(object, superClass))
7: identical(x, TRUE)
6: anyStrings(validityMethod(as(object, superClass)))
5: validObject(.Object)
4: .local(.Object, ...)
3: initialize(value, ...)
2: initialize(value, ...)
1: new("matrix.diag.csr", ra = 1:3, ja = 1:3, ia = 1:4, dimension = as.integer(c(3,
       3)))

which might be revelatory to some of you, but leaves me in the dark.  Any suggestions
would be greatly appreciated.  In case it is relevant

setClass("matrix.csr",representation(ra="numeric",
        ja="integer",ia="integer", dimension="integer"),
        validity = function(object) {
                if(!length(object@dimension) == 2 )
                        return("invalid dimension attribute")
                else{
                        nrow <- object@dimension[1]
                        ncol <- object@dimension[2]
                        }
                if(!(length(object@ra) ==length(object@ja)))
                        return("ra and ja don't have equal lengths")
                if(any(object@ja < 1) || any(object@ja > ncol))
                        return("ja exceeds dim bounds")
                if(any(object@ia < 1))
                        return("some elements of ia are <= 0")
                if(any(diff(object@ia)<0))
                        return("ia vector not monotone increasing")
                if(object@ia[length(object@ia)] != length(object@ra)+1)
                        return("last element of ia doesn't conform")
                if(length(object@ia) != nrow+1)
                        return("ia has wrong number of elments")
                if(length(object@ra) < 1 || length(object@ra) > nrow*ncol)
                        return("ra has too few, or too many elements")
                TRUE})
setMethod("initialize", "matrix.csr",
        function(.Object, ra = numeric(0),  ja = integer(0),
                ia = integer(0),dimension = integer(0)) {
        .Object@ra <- ra
        .Object@ja <- ja
        .Object@ia <- ia
        .Object@dimension <- dimension
        validObject(.Object)
        .Object
       })


url:	www.econ.uiuc.edu/~roger/my.html	Roger Koenker
email	rkoenker@uiuc.edu			Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

From zsh-users-help at sunsite.dk  Sun Aug 24 19:12:48 2003
From: zsh-users-help at sunsite.dk (zsh-users-help@sunsite.dk)
Date: Sun Aug 24 20:14:19 2003
Subject: [Rd] WELCOME to zsh-users@sunsite.dk
Message-ID: <1061748796.14312.ezmlm@sunsite.dk>

Hi! This is the ezmlm program. I'm managing the
zsh-users@sunsite.dk mailing list.

Acknowledgment: I have added the address

   r-devel@r-project.org

to the zsh-users mailing list.

Welcome to zsh-users@sunsite.dk!

Please save this message so that you know the address you are
subscribed under, in case you later want to unsubscribe or change your
subscription address.


--- Administrative commands for the zsh-users list ---

I can handle administrative requests automatically. Please
DO NOT SEND THEM TO THE LIST ADDRESS! If you do, I will not
see them and other subscribers will be annoyed. Instead, send
your message to the correct command address:


To subscribe to the list, send a message to:
   <zsh-users-subscribe@sunsite.dk>

To remove your address from the list, send a message to:
   <zsh-users-unsubscribe@sunsite.dk>

Send mail to the following for info and FAQ for this list:
   <zsh-users-info@sunsite.dk>
   <zsh-users-faq@sunsite.dk>

Similar addresses exist for the digest list:
   <zsh-users-digest-subscribe@sunsite.dk>
   <zsh-users-digest-unsubscribe@sunsite.dk>

To get messages 123 through 145 (a maximum of 100 per request), mail:
   <zsh-users-get.123_145@sunsite.dk>

To get an index with subject and author for messages 123-456 , mail:
   <zsh-users-index.123_456@sunsite.dk>

They are always returned as sets of 100, max 2000 per request,
so you'll actually get 100-499.

To receive all messages with the same subject as message 12345,
send an empty message to:
   <zsh-users-thread.12345@sunsite.dk>

The messages do not really need to be empty, but I will ignore
their content. Only the ADDRESS you send to is important.

You can start a subscription for an alternate address,
for example "john@host.domain", just add a hyphen and your
address (with '=' instead of '@') after the command word:
<zsh-users-subscribe-john=host.domain@sunsite.dk>

To stop subscription for this address, mail:
<zsh-users-unsubscribe-john=host.domain@sunsite.dk>

In both cases, I'll send a confirmation message to that address. When
you receive it, simply reply to it to complete your subscription.

If despite following these instructions, you do not get the
desired results, please contact my owner at
zsh-users-owner@sunsite.dk. Please be patient, my owner is a
lot slower than I am ;-)

--- Enclosed is a copy of the request I received.

Return-Path: <ale.ambrosi@unipd.it>
Received: (qmail 14306 invoked from network); 24 Aug 2003 18:13:16 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Aug 2003 18:13:16 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [147.162.9.1] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Aug 2003 18:13:15 -0000
Received: from mail (localhost [127.0.0.1])
	by mail.unipd.it (Postfix) with SMTP id 3719A1EB11E
	for <zsh-users-sc.1061671108.bhdfflnhpbojcmdbpdde-r-devel=r-project.org@sunsite.dk>; Sun, 24 Aug 2003 20:13:35 +0200 (MET DST)
Received: (from ale.ambrosi@webmail.unipd.it)
	by mail (mini_sendmail/1.3.1 01aug2002);
	Sun, 24 Aug 2003 20:13:35 MET DST
	(sender root@mail)
Received: from UNKNOWN(), claiming to be "mail"
 via SMTP by localhost.unipd.it, id smtpdAAAEiaybo; Sun Aug 24 20:13:26 2003
Received: (from ale.ambrosi@webmail.unipd.it)
	by mail (mini_sendmail/1.3.1 01aug2002);
	Sun, 24 Aug 2003 20:13:26 MET DST
	(sender web@mail)
To: zsh-users-sc.1061671108.bhdfflnhpbojcmdbpdde-r-devel=r-project.org@sunsite.dk
Subject: Re: [Rd] confirm subscribe to zsh-users@sunsite.dk
Message-ID: <1061748806.3f49004614ace@webmail.unipd.it>
Date: Sun, 24 Aug 2003 20:13:26 +0200 (MET DST)
From: ale.ambrosi@unipd.it
References: <1061671108.4160.ezmlm@sunsite.dk>
In-Reply-To: <1061671108.4160.ezmlm@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.8
X-Originating-IP: 151.42.205.195



-------------------------------------------------
This mail sent through IMP: webmail.unipd.it

From zsh-users-help at sunsite.dk  Sun Aug 24 19:13:58 2003
From: zsh-users-help at sunsite.dk (zsh-users-help@sunsite.dk)
Date: Sun Aug 24 20:14:44 2003
Subject: [Rd] ezmlm response
Message-ID: <1061748865.14547.ezmlm@sunsite.dk>

Hi! This is the ezmlm program. I'm managing the
zsh-users@sunsite.dk mailing list.

Acknowledgment: The address

   r-devel@r-project.org

was already on the zsh-users mailing list when I received
your request, and remains a subscriber.


--- Administrative commands for the zsh-users list ---

I can handle administrative requests automatically. Please
DO NOT SEND THEM TO THE LIST ADDRESS! If you do, I will not
see them and other subscribers will be annoyed. Instead, send
your message to the correct command address:


To subscribe to the list, send a message to:
   <zsh-users-subscribe@sunsite.dk>

To remove your address from the list, send a message to:
   <zsh-users-unsubscribe@sunsite.dk>

Send mail to the following for info and FAQ for this list:
   <zsh-users-info@sunsite.dk>
   <zsh-users-faq@sunsite.dk>

Similar addresses exist for the digest list:
   <zsh-users-digest-subscribe@sunsite.dk>
   <zsh-users-digest-unsubscribe@sunsite.dk>

To get messages 123 through 145 (a maximum of 100 per request), mail:
   <zsh-users-get.123_145@sunsite.dk>

To get an index with subject and author for messages 123-456 , mail:
   <zsh-users-index.123_456@sunsite.dk>

They are always returned as sets of 100, max 2000 per request,
so you'll actually get 100-499.

To receive all messages with the same subject as message 12345,
send an empty message to:
   <zsh-users-thread.12345@sunsite.dk>

The messages do not really need to be empty, but I will ignore
their content. Only the ADDRESS you send to is important.

You can start a subscription for an alternate address,
for example "john@host.domain", just add a hyphen and your
address (with '=' instead of '@') after the command word:
<zsh-users-subscribe-john=host.domain@sunsite.dk>

To stop subscription for this address, mail:
<zsh-users-unsubscribe-john=host.domain@sunsite.dk>

In both cases, I'll send a confirmation message to that address. When
you receive it, simply reply to it to complete your subscription.

If despite following these instructions, you do not get the
desired results, please contact my owner at
zsh-users-owner@sunsite.dk. Please be patient, my owner is a
lot slower than I am ;-)

--- Enclosed is a copy of the request I received.

Return-Path: <ale.ambrosi@unipd.it>
Received: (qmail 14541 invoked from network); 24 Aug 2003 18:14:25 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Aug 2003 18:14:25 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [147.162.9.1] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Aug 2003 18:14:25 -0000
Received: from mail (localhost [127.0.0.1])
	by mail.unipd.it (Postfix) with SMTP id 36D771EB132
	for <zsh-users-sc.1061671108.bhdfflnhpbojcmdbpdde-r-devel=r-project.org@sunsite.dk>; Sun, 24 Aug 2003 20:14:45 +0200 (MET DST)
Received: (from ale.ambrosi@webmail.unipd.it)
	by mail (mini_sendmail/1.3.1 01aug2002);
	Sun, 24 Aug 2003 20:14:45 MET DST
	(sender root@mail)
Received: from UNKNOWN(), claiming to be "mail"
 via SMTP by localhost.unipd.it, id smtpdAAA6taOZr; Sun Aug 24 20:14:36 2003
Received: (from ale.ambrosi@webmail.unipd.it)
	by mail (mini_sendmail/1.3.1 01aug2002);
	Sun, 24 Aug 2003 20:14:36 MET DST
	(sender web@mail)
To: zsh-users-sc.1061671108.bhdfflnhpbojcmdbpdde-r-devel=r-project.org@sunsite.dk
Subject: Re: [Rd] confirm subscribe to zsh-users@sunsite.dk
Message-ID: <1061748876.3f49008c718a0@webmail.unipd.it>
Date: Sun, 24 Aug 2003 20:14:36 +0200 (MET DST)
From: ale.ambrosi@unipd.it
References: <1061671108.4160.ezmlm@sunsite.dk>
In-Reply-To: <1061671108.4160.ezmlm@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.8
X-Originating-IP: 151.42.205.195



-------------------------------------------------
This mail sent through IMP: webmail.unipd.it

From p.dalgaard at biostat.ku.dk  Sun Aug 24 19:19:20 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun Aug 24 20:19:22 2003
Subject: [Rd] declarations in non-exported headers and embedding R
In-Reply-To: <3F48ECE2.1090109@joeconway.com>
References: <3F48ECE2.1090109@joeconway.com>
Message-ID: <x2r83aq5bd.fsf@biostat.ku.dk>

Joe Conway <mail@joeconway.com> writes:

> Hello,
> 
> I've been using R embedded in PL/R (R procedural language handler for
> PostgreSQL, http://www.joeconway.com/plr/) very successfully for
> several months now. A sincere "thank you" goes to the R development
> team for such a great product.
> 
> I have a question I'm hoping someone here can help me with. In order
> to get the required functionality out of PL/R, I've had to resort to
> using some defines and declarations that are only available in
> non-exported headers. There is precedent, of a sort, for most of what
> I've used in the tests/Embedding source. Below I'll present the header
> code I've used, where it comes from, why I've used it, and where I saw
> it used in tests/Embedding.
> 
> My question is whether there is equivalent exported functionality that
> I'm missing? Or if not, would a patch be accepted that moves this
> functionality to an exported header?

Some of it is certainly a well-known shortcoming of the set of
exports. E.g. tcltk.c has had

/* From Parse.h -- must find better solution: */
#define PARSE_NULL              0
#define PARSE_OK                1
#define PARSE_INCOMPLETE        2
#define PARSE_ERROR             3
#define PARSE_EOF               4

SEXP R_ParseVector(SEXP, int, int *);

for a couple of years (not that it gets much use since that interface
is mostly in the opposite direction). Adding an Rembedding.h or so could
be a good idea. However, it's not really my field of expertise and a
couple ofother R core members might have strong opinions on what
should be made available and how...

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Sun Aug 24 22:32:35 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Sun Aug 24 23:35:18 2003
Subject: [Rd] Tcltk changes in R 1.8.0 
Message-ID: <x265kmpwcm.fsf@biostat.ku.dk>

I have committed a set of changes to the tcltk package for R-1.8.0.
The most important changes are

1) Support for Tcl arrays, which should come in handy for people
   playing with things like the tkTable extension. Basically these
   work like tclVar objects but can be subscripted (notice that these
   beasts are associative - like a Perl hash - rather than objects of
   set dimensions). Basic usage goes like this:

> x <- tclArray() # create array object
> x[[2]]<-123
> x[[2]]
<Tcl> 123
> x[["2"]] # the index is really a string
<Tcl> 123

> x[[1,2]]<-"abc"
> x[["1,2"]] # multiple indices are pasted together
<Tcl> abc
> x[[1,2]]
<Tcl> abc

> x[["a"]] <- pi
> x$a # usual list notation works too
<Tcl> 3.14159265359

2) A new set of routines, .Tcl.objv and .Tcl.args.objv work together
   to allow calls to Tcl to be done without first constructing a Tcl
   command in its string representation form. This creates a
   substantial efficiency gain, by elimiting a large amount of
   "quoting hell", and also by pushing some operations to C code. The
   basic tkcmd() function (which underlies almost everything else) has
   been changed to used those two functions. This should be mostly
   transparent to existing code, but it may break code that uses some
   (little advertised) features of the old interface. Apart from overt
   bugs, the only source of breakage that I am aware of is that a
   vector of length > 1 used to be converted to multiple arguments;
   now it becomes a single Tcl list object. The feature allowed you to
   do things like tkinsert(mylistbox, "end", vector.of.entries), but
   it got in the way in other contexts and overall I think it was a
   misfeature.

Please try this out on your favourite tcltk codes and tell me ASAP if
anything breaks. Also, please tell me if there are still things that
you cannot do cleanly (i.e. without paste()-ing things together to
form .Tcl calls).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From roger at ysidro.econ.uiuc.edu  Sun Aug 24 18:10:26 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Mon Aug 25 00:04:50 2003
Subject: [Rd] Re: setClass question
In-Reply-To: <Pine.SOL.4.30.0308241224001.8144-100000@ysidro.econ.uiuc.edu>
Message-ID: <Pine.SOL.4.30.0308241659410.8144-100000@ysidro.econ.uiuc.edu>

I have another S4 methods query -- this time about undocumented objects:
I'm now getting the following warning from R CMD check SparseM:

* checking for missing documentation entries ... WARNING
Undocumented code objects:
  %x% as.matrix diag diag<- diff t
Undocumented S4 methods:
  \S4method{coerce}{ANY,array} \S4method{coerce}{ANY,call}
  \S4method{coerce}{ANY,character} \S4method{coerce}{ANY,complex}
  \S4method{coerce}{ANY,environment} \S4method{coerce}{ANY,expression}
  \S4method{coerce}{ANY,function} \S4method{coerce}{ANY,integer}
  \S4method{coerce}{ANY,list} \S4method{coerce}{ANY,logical}
  \S4method{coerce}{ANY,matrix} \S4method{coerce}{ANY,name}
  \S4method{coerce}{ANY,numeric} \S4method{coerce}{ANY,single}
  \S4method{coerce}{ANY,ts} \S4method{coerce}{ANY,vector}
  \S4method{coerce}{ANY,NULL}
  \S4method{coerce}{vector,matrix.diag.csr}
  \S4method{diff}{matrix.csr} \S4method{initialize}{traceable}
  \S4method{initialize}{signature} \S4method{initialize}{environment}

A couple of these are directly related to the package, but the rest
seem to be items that I wouldn't have thought that I should be responsible
for documenting.  I'm wondering whether the coerce items are related to
my earlier query.  Even supposing that they were due to some blunder
of mine, I'm still puzzled by the initialize items which were present
even before I began to mess with my new setClass strategy.  Again,
many thanks for any suggestions.

url:	www.econ.uiuc.edu/~roger/my.html	Roger Koenker
email	rkoenker@uiuc.edu			Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

From ripley at stats.ox.ac.uk  Mon Aug 25 08:50:52 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug 25 08:50:30 2003
Subject: [Rd] Re: setClass question
In-Reply-To: <Pine.SOL.4.30.0308241659410.8144-100000@ysidro.econ.uiuc.edu>
Message-ID: <Pine.LNX.4.44.0308250746000.4024-100000@gannet.stats>

Roger,

This seems to be related to a recent bug in the methods package. Try

library(SparseM)
getGenerics(2)

and you will see that it is wrong, and most of the base generics are
being attributed to SparseM.  I understand the same bug is causing 
problems in undoc().

Brian

On Sun, 24 Aug 2003, Roger Koenker wrote:

> I have another S4 methods query -- this time about undocumented objects:
> I'm now getting the following warning from R CMD check SparseM:
> 
> * checking for missing documentation entries ... WARNING
> Undocumented code objects:
>   %x% as.matrix diag diag<- diff t
> Undocumented S4 methods:
>   \S4method{coerce}{ANY,array} \S4method{coerce}{ANY,call}
>   \S4method{coerce}{ANY,character} \S4method{coerce}{ANY,complex}
>   \S4method{coerce}{ANY,environment} \S4method{coerce}{ANY,expression}
>   \S4method{coerce}{ANY,function} \S4method{coerce}{ANY,integer}
>   \S4method{coerce}{ANY,list} \S4method{coerce}{ANY,logical}
>   \S4method{coerce}{ANY,matrix} \S4method{coerce}{ANY,name}
>   \S4method{coerce}{ANY,numeric} \S4method{coerce}{ANY,single}
>   \S4method{coerce}{ANY,ts} \S4method{coerce}{ANY,vector}
>   \S4method{coerce}{ANY,NULL}
>   \S4method{coerce}{vector,matrix.diag.csr}
>   \S4method{diff}{matrix.csr} \S4method{initialize}{traceable}
>   \S4method{initialize}{signature} \S4method{initialize}{environment}
> 
> A couple of these are directly related to the package, but the rest
> seem to be items that I wouldn't have thought that I should be responsible
> for documenting.  I'm wondering whether the coerce items are related to
> my earlier query.  Even supposing that they were due to some blunder
> of mine, I'm still puzzled by the initialize items which were present
> even before I began to mess with my new setClass strategy.  Again,
> many thanks for any suggestions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From beebe at math.utah.edu  Mon Aug 25 17:33:03 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Mon Aug 25 16:34:48 2003
Subject: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD 3.2 and NetBSD
	1.6 (PR#3979)
Message-ID: <200308251433.h7PEX3JH001805@pubhealth.ku.dk>

>> I have come across your reported log1p error (#2837) on a NetBSD (1.6W)
>> system.

I've just made further experiments on the deficient log1p() function
on OpenBSD 3.2 and NetBSD 1.6 with this test program:

% cat bug-log1p.c
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int
main(int argc, char* argv[])
{
    int k;
    double x;

    for (k = 0; k <= 100; ++k)
    {
        x = pow(2.0,(double)(-k));
        printf("%3d\t%.15e\t%.15e\n", k, log1p(x), log(1.0 + x));
    }

    return (EXIT_SUCCESS);
}

% cc bug-log1p.c -lm && ./a.out
  0     6.931471805599453e-01   6.931471805599453e-01
  1     4.054651081081644e-01   4.054651081081644e-01
  2     2.231435513142098e-01   2.231435513142098e-01
...
 51     4.440892098500625e-16   4.440892098500625e-16
 52     2.220446049250313e-16   2.220446049250313e-16
 53     0.000000000000000e+00   0.000000000000000e+00
 54     0.000000000000000e+00   0.000000000000000e+00
...
 99     0.000000000000000e+00   0.000000000000000e+00
100     0.000000000000000e+00   0.000000000000000e+00

Evidently, on these systems, log1p(x) is carelessly implemented as
log(1+x).  Correct output from FreeBSD 5.0, Sun Solaris 9, ...  looks
like this:

% cc bug-log1p.c -lm && ./a.out
  0     6.931471805599453e-01   6.931471805599453e-01
  1     4.054651081081644e-01   4.054651081081644e-01
  2     2.231435513142098e-01   2.231435513142098e-01
...
 51     4.440892098500625e-16   4.440892098500625e-16
 52     2.220446049250313e-16   2.220446049250313e-16
 53     1.110223024625157e-16   0.000000000000000e+00
 54     5.551115123125783e-17   0.000000000000000e+00
...
 99     1.577721810442024e-30   0.000000000000000e+00
100     7.888609052210118e-31   0.000000000000000e+00

The whole point of log1p(x) is to return accurate results for 
|x| << 1, and the OpenBSD/FreeBSD folks failed to understand that.

The simple solution for a missing log1p() that I adopted in hoc is
this internal function:

fp_t
Log1p(fp_t x)
{
#if defined(HAVE_LOG1PF) || defined(HAVE_LOG1P) || defined(HAVE_LOG1PL)
        return (log1p(x));
#else
        fp_t u;
        /* Use log(), corrected to first order for truncation loss */
        u = FP(1.0) + x;
        if (u == FP(1.0))
                return (x);
        else
                return (log(u) * (x / (u - FP(1.0)) ));
#endif
}

I have yet to put in an accuracy test in hoc's configure.in that will
check for a broken log1p(), and use the internal fallback
implementation instead.

Here is a test comparing accuracy of the two log1p() implementations
on Sun Solaris 9, which has a good log1p() implementation:

% cat cmp-log1p.c
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

double
LOG1P(double x)
{
    double u;

    u = 1.0 + x;
    if (u == 1.0)
	return (x);
    else
	return (log(u) * (x / (u - 1.0)));
}


int
main(int argc, char* argv[])
{
    int k;
    double d;
    double x;

    for (k = 0; k <= 100; ++k)
    {
	x = pow(2.0,(double)(-k));

	printf("%3d\t%.15e\t%.15e\t%.2e\n",
	       k, log1p(x), LOG1P(x), (LOG1P(x) - log1p(x))/LOG1P(x));
    }

    return (EXIT_SUCCESS);
}

% cc cmp-log1p.c -lm && ./a.out
  0     6.931471805599453e-01   6.931471805599453e-01   0.00e+00
  1     4.054651081081644e-01   4.054651081081644e-01   0.00e+00
  2     2.231435513142098e-01   2.231435513142098e-01   0.00e+00
...
 51     4.440892098500625e-16   4.440892098500625e-16   0.00e+00
 52     2.220446049250313e-16   2.220446049250313e-16   0.00e+00
 53     1.110223024625157e-16   1.110223024625157e-16   0.00e+00
 54     5.551115123125783e-17   5.551115123125783e-17   0.00e+00
...
 98     3.155443620884047e-30   3.155443620884047e-30   0.00e+00
 99     1.577721810442024e-30   1.577721810442024e-30   0.00e+00
100     7.888609052210118e-31   7.888609052210118e-31   0.00e+00

At least for test arguments of the form 2^(-k), my LOG1P() is
identical to log1p().

A simple change to that test program, inserting

	x *= (double)rand() / (double)(RAND_MAX);

after the assignment to x to pick a random value near a power of k,
produces output like this:

% cc cmp-log1p-2.c -lm && ./a.out
  0     4.146697237286190e-01   4.146697237286190e-01   0.00e+00
  1     8.421502722841255e-02   8.421502722841256e-02   1.65e-16
  2     7.432648260535767e-02   7.432648260535767e-02   0.00e+00
...
 48     2.771522173451896e-15   2.771522173451896e-15   1.42e-16
 49     1.346294923235749e-15   1.346294923235749e-15   0.00e+00
 50     8.498507032336806e-16   8.498507032336806e-16   0.00e+00
 51     1.246870549827746e-17   1.246870549827746e-17   0.00e+00
 52     7.077345664348359e-17   7.077345664348359e-17   0.00e+00
...
 98     2.127061943360297e-30   2.127061943360297e-30   0.00e+00
 99     1.276978671673724e-30   1.276978671673724e-30   0.00e+00
100     1.252374165764246e-31   1.252374165764246e-31   0.00e+00

For all random test arguments x < 2^(-49), the relative error of
LOG1P() vs log1p() is zero.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From ripley at stats.ox.ac.uk  Mon Aug 25 19:15:53 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug 25 19:19:35 2003
Subject: (PR#3979) Re: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD
	3.2 and NetBSD 1.6 (PR#3979)
In-Reply-To: <200308251433.h7PEX3JH001805@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308251809580.5741-100000@gannet.stats>

There is already a usable log1p implementation in src/nmath/log1p, for 
platforms without it.  All we need to do is to arrange to use it on those 
systems with broken versions.  That's not easy without access to such a 
platform to test it, though.

On Mon, 25 Aug 2003 beebe@math.utah.edu wrote:

> >> I have come across your reported log1p error (#2837) on a NetBSD (1.6W)
> >> system.
> 
> I've just made further experiments on the deficient log1p() function
> on OpenBSD 3.2 and NetBSD 1.6 with this test program:
> 
> % cat bug-log1p.c
> #include <stdio.h>
> #include <stdlib.h>
> #include <math.h>
> 
> int
> main(int argc, char* argv[])
> {
>     int k;
>     double x;
> 
>     for (k = 0; k <= 100; ++k)
>     {
>         x = pow(2.0,(double)(-k));
>         printf("%3d\t%.15e\t%.15e\n", k, log1p(x), log(1.0 + x));
>     }
> 
>     return (EXIT_SUCCESS);
> }
> 
> % cc bug-log1p.c -lm && ./a.out
>   0     6.931471805599453e-01   6.931471805599453e-01
>   1     4.054651081081644e-01   4.054651081081644e-01
>   2     2.231435513142098e-01   2.231435513142098e-01
> ...
>  51     4.440892098500625e-16   4.440892098500625e-16
>  52     2.220446049250313e-16   2.220446049250313e-16
>  53     0.000000000000000e+00   0.000000000000000e+00
>  54     0.000000000000000e+00   0.000000000000000e+00
> ...
>  99     0.000000000000000e+00   0.000000000000000e+00
> 100     0.000000000000000e+00   0.000000000000000e+00
> 
> Evidently, on these systems, log1p(x) is carelessly implemented as
> log(1+x).  Correct output from FreeBSD 5.0, Sun Solaris 9, ...  looks
> like this:
> 
> % cc bug-log1p.c -lm && ./a.out
>   0     6.931471805599453e-01   6.931471805599453e-01
>   1     4.054651081081644e-01   4.054651081081644e-01
>   2     2.231435513142098e-01   2.231435513142098e-01
> ...
>  51     4.440892098500625e-16   4.440892098500625e-16
>  52     2.220446049250313e-16   2.220446049250313e-16
>  53     1.110223024625157e-16   0.000000000000000e+00
>  54     5.551115123125783e-17   0.000000000000000e+00
> ...
>  99     1.577721810442024e-30   0.000000000000000e+00
> 100     7.888609052210118e-31   0.000000000000000e+00
> 
> The whole point of log1p(x) is to return accurate results for 
> |x| << 1, and the OpenBSD/FreeBSD folks failed to understand that.
> 
> The simple solution for a missing log1p() that I adopted in hoc is
> this internal function:
> 
> fp_t
> Log1p(fp_t x)
> {
> #if defined(HAVE_LOG1PF) || defined(HAVE_LOG1P) || defined(HAVE_LOG1PL)
>         return (log1p(x));
> #else
>         fp_t u;
>         /* Use log(), corrected to first order for truncation loss */
>         u = FP(1.0) + x;
>         if (u == FP(1.0))
>                 return (x);
>         else
>                 return (log(u) * (x / (u - FP(1.0)) ));
> #endif
> }
> 
> I have yet to put in an accuracy test in hoc's configure.in that will
> check for a broken log1p(), and use the internal fallback
> implementation instead.
> 
> Here is a test comparing accuracy of the two log1p() implementations
> on Sun Solaris 9, which has a good log1p() implementation:
> 
> % cat cmp-log1p.c
> #include <stdio.h>
> #include <stdlib.h>
> #include <math.h>
> 
> double
> LOG1P(double x)
> {
>     double u;
> 
>     u = 1.0 + x;
>     if (u == 1.0)
> 	return (x);
>     else
> 	return (log(u) * (x / (u - 1.0)));
> }
> 
> 
> int
> main(int argc, char* argv[])
> {
>     int k;
>     double d;
>     double x;
> 
>     for (k = 0; k <= 100; ++k)
>     {
> 	x = pow(2.0,(double)(-k));
> 
> 	printf("%3d\t%.15e\t%.15e\t%.2e\n",
> 	       k, log1p(x), LOG1P(x), (LOG1P(x) - log1p(x))/LOG1P(x));
>     }
> 
>     return (EXIT_SUCCESS);
> }
> 
> % cc cmp-log1p.c -lm && ./a.out
>   0     6.931471805599453e-01   6.931471805599453e-01   0.00e+00
>   1     4.054651081081644e-01   4.054651081081644e-01   0.00e+00
>   2     2.231435513142098e-01   2.231435513142098e-01   0.00e+00
> ...
>  51     4.440892098500625e-16   4.440892098500625e-16   0.00e+00
>  52     2.220446049250313e-16   2.220446049250313e-16   0.00e+00
>  53     1.110223024625157e-16   1.110223024625157e-16   0.00e+00
>  54     5.551115123125783e-17   5.551115123125783e-17   0.00e+00
> ...
>  98     3.155443620884047e-30   3.155443620884047e-30   0.00e+00
>  99     1.577721810442024e-30   1.577721810442024e-30   0.00e+00
> 100     7.888609052210118e-31   7.888609052210118e-31   0.00e+00
> 
> At least for test arguments of the form 2^(-k), my LOG1P() is
> identical to log1p().
> 
> A simple change to that test program, inserting
> 
> 	x *= (double)rand() / (double)(RAND_MAX);
> 
> after the assignment to x to pick a random value near a power of k,
> produces output like this:
> 
> % cc cmp-log1p-2.c -lm && ./a.out
>   0     4.146697237286190e-01   4.146697237286190e-01   0.00e+00
>   1     8.421502722841255e-02   8.421502722841256e-02   1.65e-16
>   2     7.432648260535767e-02   7.432648260535767e-02   0.00e+00
> ...
>  48     2.771522173451896e-15   2.771522173451896e-15   1.42e-16
>  49     1.346294923235749e-15   1.346294923235749e-15   0.00e+00
>  50     8.498507032336806e-16   8.498507032336806e-16   0.00e+00
>  51     1.246870549827746e-17   1.246870549827746e-17   0.00e+00
>  52     7.077345664348359e-17   7.077345664348359e-17   0.00e+00
> ...
>  98     2.127061943360297e-30   2.127061943360297e-30   0.00e+00
>  99     1.276978671673724e-30   1.276978671673724e-30   0.00e+00
> 100     1.252374165764246e-31   1.252374165764246e-31   0.00e+00
> 
> For all random test arguments x < 2^(-49), the relative error of
> LOG1P() vs log1p() is zero.
> 
> -------------------------------------------------------------------------------
> - Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
> - Center for Scientific Computing       FAX: +1 801 581 4148                  -
> - University of Utah                    Internet e-mail: beebe@math.utah.edu  -
> - Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
> - 155 S 1400 E RM 233                       beebe@ieee.org                    -
> - Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dteller at affinnova.com  Mon Aug 25 21:29:10 2003
From: dteller at affinnova.com (dteller@affinnova.com)
Date: Mon Aug 25 20:38:40 2003
Subject: [Rd] R Memory Management Under Windows (PR#3980)
Message-ID: <200308251829.h7PITAJH003312@pubhealth.ku.dk>

Full_Name: David Teller
Version: 1.7.1
OS: Windows XP
Submission from: (NULL) (12.110.141.194)


I've noticed several issues with the R memory management under Windows.
It frequently runs out of memory, even when there is plenty of available memory
on the system and even plenty of free process virtual address space.
This tends to happen far more often when allocation a number of large objects
early in the processing.

Investigating the malloc.c routines indicates that when expanding the heap to
allocate a large object that will not fit, the windows sbrk emulation routine
calls an internal routine findregion with the object size (rounded up for
overhead). This routine essentially searches the virtual address space for an
unused place large enough to put the object, looking towards higher addresses,
until it finds a suitable location and always starting at the end of the last
chunk allocated.

The issue is that any available space that is not large enough for the object in
question is bypassed and can NEVER be used by the memory allocator. This can
lead to a huge amount of address space wastage if several large objects are
allocated early in the process.

It seems that the search cannot just be restarted at the beginning of memory
each time because the malloc implementation assumes that each chunk of memory
allocated from the system will be at a higher address than the last.

I have several possible solutions to this and am thinking about implementing one
of them:
1) Completely scrap the routines in malloc.c and replace them with a thin
wrapper around the core Windows memory allocation routines.
2) Attempt to implement a windows version of mmap() and enable that feature for
large allocations.
3) Attempt to clean up the malloc routines so they are less picky about the
address ordering of chunks allocated from the system.

Any feedback would be appreciated.
I don't see any other bugs on this issue and don't want to duplicate efforts if
someone else is already working on this.

- Dave Teller

From ripley at stats.ox.ac.uk  Mon Aug 25 20:42:02 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Aug 25 20:42:13 2003
Subject: [Rd] R Memory Management Under Windows (PR#3980)
In-Reply-To: <200308251829.h7PITAJH003312@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308251935570.6032-100000@gannet.stats>

Why is this a bug report?  It does not fit the definition of bugs in the 
FAQ.  If you want to help, don't misuse R-bugs for questions/comments.

On Mon, 25 Aug 2003 dteller@affinnova.com wrote:

> Full_Name: David Teller
> Version: 1.7.1
> OS: Windows XP
> Submission from: (NULL) (12.110.141.194)
> 
> 
> I've noticed several issues with the R memory management under Windows.
> It frequently runs out of memory, even when there is plenty of available memory
> on the system and even plenty of free process virtual address space.
> This tends to happen far more often when allocation a number of large objects
> early in the processing.

But that is not a bug -- it is even documented as likely.

> Investigating the malloc.c routines indicates that when expanding the heap to
> allocate a large object that will not fit, the windows sbrk emulation routine
> calls an internal routine findregion with the object size (rounded up for
> overhead). This routine essentially searches the virtual address space for an
> unused place large enough to put the object, looking towards higher addresses,
> until it finds a suitable location and always starting at the end of the last
> chunk allocated.
> 
> The issue is that any available space that is not large enough for the object in
> question is bypassed and can NEVER be used by the memory allocator. This can
> lead to a huge amount of address space wastage if several large objects are
> allocated early in the process.
> 
> It seems that the search cannot just be restarted at the beginning of memory
> each time because the malloc implementation assumes that each chunk of memory
> allocated from the system will be at a higher address than the last.
> 
> I have several possible solutions to this and am thinking about implementing one
> of them:
> 1) Completely scrap the routines in malloc.c and replace them with a thin
> wrapper around the core Windows memory allocation routines.

We did this precisely because that approach (used prior to 1.2.0) was far 
too slow.  We saw speed hits of at least 4x in that version until this 
malloc.c was used.

> 2) Attempt to implement a windows version of mmap() and enable that feature for
> large allocations.
> 3) Attempt to clean up the malloc routines so they are less picky about the
> address ordering of chunks allocated from the system.
> 
> Any feedback would be appreciated.
> I don't see any other bugs on this issue and don't want to duplicate efforts if
> someone else is already working on this.

I don't see any bugs at all.  I suspect most people using large amounts of 
memory use a better OS anyway: if Windows provided an adequate malloc in 
the first place this would all be moot.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dmurdoch at pair.com  Mon Aug 25 16:34:09 2003
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Aug 25 21:29:54 2003
Subject: [Rd] R Memory Management Under Windows (PR#3980)
In-Reply-To: <200308251829.h7PITAJH003312@pubhealth.ku.dk>
References: <200308251829.h7PITAJH003312@pubhealth.ku.dk>
Message-ID: <plokkv847jvjupr9g3bsmq20rl38sgn5pe@4ax.com>

On Mon, 25 Aug 2003 20:29:10 +0200 (MET DST), dteller@affinnova.com
wrote :

>I have several possible solutions to this and am thinking about implementing one
>of them:
>1) Completely scrap the routines in malloc.c and replace them with a thin
>wrapper around the core Windows memory allocation routines.
>2) Attempt to implement a windows version of mmap() and enable that feature for
>large allocations.
>3) Attempt to clean up the malloc routines so they are less picky about the
>address ordering of chunks allocated from the system.

Option 1 is currently available with the compile time option
LEA_MALLOC = NO in src/gnuwin32/MkRules.  I doubt if we would
incorporate patches to do 2 or 3, because this sort of stuff is so
hard to test and debug, but you're welcome to do it for your own use.
If you do, I'd recommend talking to Doug Lea, the author of our
current malloc, about incorporating your ideas into his code.

Duncan Murdoch

From beebe at math.utah.edu  Mon Aug 25 23:30:12 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Mon Aug 25 22:29:52 2003
Subject: (PR#3979) Re: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD
Message-ID: <200308252030.h7PKUCJH003944@pubhealth.ku.dk>

Brian Ripley writes today:

>> There is already a usable log1p implementation in src/nmath/log1p, for 
>> platforms without it.  All we need to do is to arrange to use it on those 
>> systems with broken versions.  That's not easy without access to such a 
>> platform to test it, though.

I need the same kind of test in my own software, so I made some
experiments and came up with the code below for configure.in.  I've
tested it so far only on NetBSD 1.6 and Sun Solaris 9; it produced the
expected settings

	#define HAVE_BROKEN_LOG1P 1
	#define HAVE_LOG1P 1

on NetBSD and

	/* #undef HAVE_BROKEN_LOG1P */
	#define HAVE_LOG1P 1

on Solaris.  Notice that the test code checks arguments over a range
of powers of two suitable for IEEE 754 with support for subnormals,
but will bail out early if necessary.  It should therefore work as
intended on VAX OpenVMS and IBM S/390; I only rarely have access to
such systems.

AH_TEMPLATE(HAVE_BROKEN_LOG1P,		[Define if log1p() is broken.])
AH_TEMPLATE(HAVE_LOG1P,			[Define if log1p() is available.])
...
AC_SEARCH_LIBS(log1p,          [m], AC_DEFINE(HAVE_LOG1P))
...

dnl Check for broken log1p() implementations
if test "$ac_cv_search_log1p" = "none required"
then
	AC_MSG_CHECKING(for apparently-accurate log1p())
	AC_TRY_RUN(
	[
#include <stdio.h>
#include <math.h>

int
main(void)
{
    int k;
    double d;
    double x;

    /* log(1+x) = x - (1/2)x^2 + (1/3)x^3 - (1/4)x^4 ... */
    /*          = x for x sufficiently small */
    for (k = -54; k > -1074; --k)
    {	
	x = pow(2.0, (double)(k));
	if (x == 0.0)
	    return (0);			/* OK: reached underflow limit */
	d = log1p(x);
	if (d == 0.0)
	    return (1);			/* ERROR: inaccurate log1p() */
	if (d != x)
	    return (1);			/* ERROR: inaccurate log1p() */
    }	
    
    return (0);
}
	],
	[
	    AC_MSG_RESULT(yes)
	],
	[
	    AC_MSG_RESULT(no)
	    AC_DEFINE(HAVE_BROKEN_LOG1P)
	]
	)
fi

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From beebe at math.utah.edu  Tue Aug 26 00:38:36 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Mon Aug 25 23:38:13 2003
Subject: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD 3.2 and NetBSD
	1.6 (PR#3982)
Message-ID: <200308252138.h7PLcaJH004259@pubhealth.ku.dk>

Ray Brownrigg <ray@mcs.vuw.ac.nz> writes today about the inaccurate
log1p() on NetBSD 1.6 and OpenBSD 3.2:

>> Well, the source which I have access to doesn't bear that out.

Interesting.  Our NetBSD installation is pretty recent:

	% uname -a
	NetBSD netbsd.vm.math.utah.edu 1.6 NetBSD 1.6 (GENERIC) #0: Sun Sep  8
	19:43:40 UTC 2002     autobuild@tgm.daemon.org:/autobuild/i386/OBJ/autobuild/src/sys/arch/i386/compile/GENERIC
	i386 i386 Intel Pentium III (Katmai) (686-class) NetBSD

	% ldd a.out
	a.out:
		 -lm.0 => /usr/lib/libm387.so.0
		 -lm.0 => /usr/lib/libm.so.0
		 -lc.12 => /usr/lib/libc.so.12

	% ls -lL /usr/lib/libm387.so.0 /usr/lib/libm.so.0 /usr/lib/libc.so.12
	-r--r--r--    1 root     wheel      700411 Sep  8  2002 /usr/lib/libc.so.12
	-r--r--r--    1 root     wheel      109910 Sep  8  2002 /usr/lib/libm.so.0
	-r--r--r--    1 root     wheel       10091 Sep  8  2002 /usr/lib/libm387.so.0

	% strings -a /usr/lib/libm.so.0 | grep -i log1p
	log1pf
	log1p
	$NetBSD: s_log1pf.c,v 1.7 1999/07/02 15:37:43 simonb Exp $
	$NetBSD: s_log1p.c,v 1.11 1999/07/02 15:37:43 simonb Exp $

On OpenBSD, where the same problem with log1p() exists, I have:

	%  uname -a
	OpenBSD openbsd.vm.math.utah.edu 3.2 GENERIC#25 i386 Intel Pentium III ("GenuineIntel" 686-class, 512KB L2 cache) unknown OpenBSD

	% ldd ./a.out
	./a.out:
		-lm.0 => /usr/lib/libm.so.0.1 (0x4001c000)
		-lc.28 => /usr/lib/libc.so.28.5 (0x40030000)

	% ls -lL /usr/lib/libm.so.0.1 /usr/lib/libc.so.28.5
	-r--r--r--    1 root     bin        602889 Oct  3  2002 /usr/lib/libc.so.28.5
	-r--r--r--    1 root     bin         85720 Oct  3  2002 /usr/lib/libm.so.0.1

	% strings /usr/lib/libm.so.0.1 | grep -i log1p
	$NetBSD: s_log1p.S,v 1.7 1995/05/09 00:10:58 jtc Exp $
	$NetBSD: s_log1pf.S,v 1.4 1995/05/09 00:13:05 jtc Exp $
	_log1p
	_log1pf

Notice that the NetBSD version of log1p appears to be in C, while the
OpenBSD version is in assembly code.

I then visited http://www.netbsd.org/ and searched for s_log1p.S; this
led to a posting complaining about its inaccuracy for small arguments:

	http://mail-index.netbsd.org/netbsd-bugs/2003/02/17/0017.html

I've not attempted to fetch the NetBSD or OpenBSD source trees to
investigate this further.  The existence of the bug in installed
systems is, in my view, sufficient grounds to provide a workaround in
user code.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From atsstat at ucla.edu  Tue Aug 26 00:43:58 2003
From: atsstat at ucla.edu (atsstat@ucla.edu)
Date: Mon Aug 25 23:47:38 2003
Subject: [Rd] Your email to ATSstat@ucla.edu has been disregarded,
	please read for details (PR#3983)
Message-ID: <200308252143.h7PLhwJH004290@pubhealth.ku.dk>

Greetings
 
Due to the wild proliferation of unwanted emails, we are filtering and
deleting emails that contain a subject line that matches common unwanted
emails (e.g. thank you, failure notice, your details, my details, etc.).
Your subject line contains such a phrase and it has been filtered and
deleted by our spam/junk/virus filtering system.  If you really meant to
contact us with a question, please resend your message without one of
these key phrases.
 
Our primary mission is to provide support to UCLA researchers via our
consulting services, including answering questions by email, and
offering general assistance through web pages. However, we regret that
we do not have the resources to be able to answer email questions from
researchers outside of the UCLA community, but we do have a web page
listing a variety of other resources on statistical computing at
http://www.ats.ucla.edu/stat/otherresources.htm
<http://www.ats.ucla.edu/stat/otherresources.htm>  . 

We strive to answer questions from members of the UCLA community within
one business day, and often sooner. In the meanwhile, we invite you to
visit our statistical computing web pages at
http://www.ats.ucla.edu/stat/ <http://www.ats.ucla.edu/stat/>  . We also
welcome UCLA researchers to our walk in consulting, see
http://www.ats.ucla.edu/stat/schedule/
<http://www.ats.ucla.edu/stat/schedule/>  for our hours and location. 

Sincerely,

Statistical Consulting Group
UCLA Academic Technology Services
http://www.ats.ucla.edu/stat/ <http://www.ats.ucla.edu/stat/>

From jmc at research.bell-labs.com  Mon Aug 25 18:49:51 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Mon Aug 25 23:50:09 2003
Subject: [Rd] Re: setClass question
References: <Pine.SOL.4.30.0308241659410.8144-100000@ysidro.econ.uiuc.edu>
Message-ID: <3F4A847F.BEBEA38A@research.bell-labs.com>

Seems that methods are being attributed a bit strangely in undoc(). 
Here's what I get with, I think, current r-devel and SparseM.

R> library(tools)
R> undoc("methods")
R> library(SparseM)
[1] "SparseM library loaded"
R> undoc("SparseM")
Undocumented code objects:
  %x% as.matrix diag diag<- diff t
Undocumented S4 methods:
  \S4method{initialize}{traceable} \S4method{initialize}{signature}
  \S4method{initialize}{environment}
R> undoc("methods")
Undocumented S4 methods:
  \S4method{initialize}{matrix.csr} \S4method{initialize}{matrix.coo}
Warning message: 
package:methods is required by package:SparseM (still attached) in:
detach(pos = pos) 

Notice that methods for initialize() seem to be cross-attributed to
"methods" and "SparseM".  (And despite the message, there IS
documentation for both  method?initialize("traceable") and
method?initialize("matrix.csr"), but of course in the other package.)

If it's relevant, after the undoc("methods"), the order of the search
list has been altered, with methods in position 2 (maybe related to the
warning message when it was detached from its previous position?).

The "Undocumented code objects" messages are "real", but not your
fault--we'll have to figure what to do about them.  You created methods
for "diag" (I assume), which is a non-generic in base.  The result is to
create a generic version of diag(), which is assigned in your package. 
(In general, with namespaces, I don't think it's possible to assign the
generic back into the original package, even just into the exported
environment.)

R> find("diag")
[1] "package:SparseM" "package:base"   

This creates a formal "conflict" but in my understanding not one that
should be reported, nor should you be expected to document the function
diag(), as opposed to methods created for it.

[Just got back to e-mail after 3 days away.  Will look at this and your
other mail, probably not until tomorrow.]

Thanks,
 John

Roger Koenker wrote:
> 
> I have another S4 methods query -- this time about undocumented objects:
> I'm now getting the following warning from R CMD check SparseM:
> 
> * checking for missing documentation entries ... WARNING
> Undocumented code objects:
>   %x% as.matrix diag diag<- diff t
> Undocumented S4 methods:
>   \S4method{coerce}{ANY,array} \S4method{coerce}{ANY,call}
>   \S4method{coerce}{ANY,character} \S4method{coerce}{ANY,complex}
>   \S4method{coerce}{ANY,environment} \S4method{coerce}{ANY,expression}
>   \S4method{coerce}{ANY,function} \S4method{coerce}{ANY,integer}
>   \S4method{coerce}{ANY,list} \S4method{coerce}{ANY,logical}
>   \S4method{coerce}{ANY,matrix} \S4method{coerce}{ANY,name}
>   \S4method{coerce}{ANY,numeric} \S4method{coerce}{ANY,single}
>   \S4method{coerce}{ANY,ts} \S4method{coerce}{ANY,vector}
>   \S4method{coerce}{ANY,NULL}
>   \S4method{coerce}{vector,matrix.diag.csr}
>   \S4method{diff}{matrix.csr} \S4method{initialize}{traceable}
>   \S4method{initialize}{signature} \S4method{initialize}{environment}
> 
> A couple of these are directly related to the package, but the rest
> seem to be items that I wouldn't have thought that I should be responsible
> for documenting.  I'm wondering whether the coerce items are related to
> my earlier query.  Even supposing that they were due to some blunder
> of mine, I'm still puzzled by the initialize items which were present
> even before I began to mess with my new setClass strategy.  Again,
> many thanks for any suggestions.
> 
> url:    www.econ.uiuc.edu/~roger/my.html        Roger Koenker
> email   rkoenker@uiuc.edu                       Department of Economics
> vox:    217-333-4558                            University of Illinois
> fax:    217-244-6678                            Champaign, IL 61820
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From beebe at math.utah.edu  Tue Aug 26 01:12:29 2003
From: beebe at math.utah.edu (beebe@math.utah.edu)
Date: Tue Aug 26 00:12:09 2003
Subject: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD 3.2 and NetBSD
	1.6 (PR#3984)
Message-ID: <200308252212.h7PMCTJH004447@pubhealth.ku.dk>

Ray Brownrigg <ray@mcs.vuw.ac.nz> writes today about the log1p()
problems on NetBSD 1.6 and OpenBSD 3.2:

>> Indeed, but since I have acess to a NetBSD developer, this is an
>> opportunity to get it fixed for everyone.

That's a start, but the reality is that it isn't enough.  There will
be many sites that don't upgrade O/S versions except at possibly very
long intervals.  Look at how many sites remain vulnerable to worms and
virus months and years after critical security patches have been
announced by vendors.  Also, many customers find themselves locked in
at particular O/S versions because of critical installed third-party
applications that are not available on newer O/S releases.

>> I have further discovered that the static library libm.a does work.

It does not on my systems: I just tried

	% cc bug-log1p.c /usr/lib/libm.a && ./a.out

on both NetBSD 1.6 and OpenBSD 3.2, and got incorrect output on both.

I wonder whether your NetBSD system has been patched locally?  The log
of changes between NetBSD 1.6 and 1.6.1 at

	ftp://ftp.netbsd.org/pub/NetBSD/NetBSD-1.6.1/CHANGES-1.6.1

contains no mention of either log1p() or libm.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 581 4148                  -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -

From webmaster at hotlink.com.br  Tue Aug 26 03:20:49 2003
From: webmaster at hotlink.com.br (webmaster@hotlink.com.br)
Date: Tue Aug 26 04:28:01 2003
Subject: [Rd] VIRUS NO SEU EMAIL
Message-ID: <20030826021801.23623.qmail@pegasus.hotlink.com.br>

                           A L E R T A   D E  V I R U S

Nosso Anti-Virus encontrou o(s)

	W32/Sobig.f@MM

virus no seu email, destinado a :

-> sostenes@linsoft.com.br

O email nao foi entregue, sendo bloqueado pelo nosso servidor de anti-virus.

Uma mensagem de notificacao tambem foi enviada ao remetente.
Esta eh uma mensagem automatica apenas de notificacao e nao deve ser 
respondida.

Para maiores informacoes acesse www.hotlink.com.br/servicos no link
servicos especiais ou entre em contato conosco pelo 
www.hotlink.com.br/faleconosco .

HOTlink Informatica.
http://www.hotlink.com.br



Para sua referencia, aqui esta o cabecalho do seu email:

------------------------- BEGIN HEADERS -----------------------------
Received: from thingol.dmat.ufpe.br (150.161.4.102)
  by 0 with SMTP; 26 Aug 2003 02:17:59 -0000
Received: from PESQUISA1 ([150.161.44.51])
	by thingol.dmat.ufpe.br (8.11.6/8.11.6) with ESMTP id h7PKEmw22461
	for <sostenes@dmat.ufpe.br>; Mon, 25 Aug 2003 23:14:49 +0300 (GMT)
Message-Id: <200308252014.h7PKEmw22461@thingol.dmat.ufpe.br>
From: <r-devel@r-project.org>
To: <sostenes@dmat.ufpe.br>
Subject: Re: Wicked screensaver
Date: Mon, 25 Aug 2003 23:22:13 --0300
X-MailScanner: Found to be clean
Importance: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MSMail-Priority: Normal
X-Priority: 3 (Normal)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="_NextPart_000_001E759E"
-------------------------- END HEADERS ------------------------------

From pmaster at firestone.co.za  Tue Aug 26 14:35:34 2003
From: pmaster at firestone.co.za (pmaster@firestone.co.za)
Date: Tue Aug 26 13:35:55 2003
Subject: [Rd] I.S. MailFirewall has detected a Virus in your message
Message-ID: <DA0000dfbf@mfwjs05.mfw.is.co.za>

I.S. MailFirewall has stopped the following message:

   Message: BA00080fe6.00000001.mml
   From:    r-devel@r-project.org
   To:      shaunw@firestone.co.za
   Subject: Re: Thank you!

Because it believes the message contains a virus.
The virus scanning software used was: Sophos AntiVirus (SAVI2 Interface) 
Virus name: W32/Sobig-F

Please clean the file and resend it.

I.S. Mailfirewall Rule: Block Virus

For more information on email virus scanning, security and content 
management, visit Internet Solutions @ http://www.is.co.za
From jmc at research.bell-labs.com  Tue Aug 26 09:51:24 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Aug 26 14:51:45 2003
Subject: [Rd] Re: setClass question
References: <Pine.SOL.4.30.0308241659410.8144-100000@ysidro.econ.uiuc.edu>
Message-ID: <3F4B57CC.CEF5FBE6@research.bell-labs.com>

The "undocumented methods" part of this one is easily fixed: undoc() was
calling getMethods() to get the methods defined.  But this gets _all_
the visible methods of the generic, hence everyone was being charged for
everyone else's methods.  Instead, undoc() should call the function
getMethodsMetaData(); it gets, as its name suggests, only the metadata
describing the methods assigned in this environment.

(The documentation for getMethods() describes itself correctly, but I'll
add a note pointing to getMethodsMetaData.)

The extra function warnings are a little subtler to suppress.  The right
approach seems to be to ignore generic functions that "correspond to" a
nongeneric in another package.  The subtlety is defining "correspond
to": intuitively, the generic should have been derived from the
nongeneric by a setGeneric() call, direct or implicit.  We can check
this by comparing the default method to the nongeneric function.

Meanwhile, I will commit the fix for undocumented methods after running
the checks.

John 

Roger Koenker wrote:
> 
> I have another S4 methods query -- this time about undocumented objects:
> I'm now getting the following warning from R CMD check SparseM:
> 
> * checking for missing documentation entries ... WARNING
> Undocumented code objects:
>   %x% as.matrix diag diag<- diff t
> Undocumented S4 methods:
>   \S4method{coerce}{ANY,array} \S4method{coerce}{ANY,call}
>   \S4method{coerce}{ANY,character} \S4method{coerce}{ANY,complex}
>   \S4method{coerce}{ANY,environment} \S4method{coerce}{ANY,expression}
>   \S4method{coerce}{ANY,function} \S4method{coerce}{ANY,integer}
>   \S4method{coerce}{ANY,list} \S4method{coerce}{ANY,logical}
>   \S4method{coerce}{ANY,matrix} \S4method{coerce}{ANY,name}
>   \S4method{coerce}{ANY,numeric} \S4method{coerce}{ANY,single}
>   \S4method{coerce}{ANY,ts} \S4method{coerce}{ANY,vector}
>   \S4method{coerce}{ANY,NULL}
>   \S4method{coerce}{vector,matrix.diag.csr}
>   \S4method{diff}{matrix.csr} \S4method{initialize}{traceable}
>   \S4method{initialize}{signature} \S4method{initialize}{environment}
> 
> A couple of these are directly related to the package, but the rest
> seem to be items that I wouldn't have thought that I should be responsible
> for documenting.  I'm wondering whether the coerce items are related to
> my earlier query.  Even supposing that they were due to some blunder
> of mine, I'm still puzzled by the initialize items which were present
> even before I began to mess with my new setClass strategy.  Again,
> many thanks for any suggestions.
> 
> url:    www.econ.uiuc.edu/~roger/my.html        Roger Koenker
> email   rkoenker@uiuc.edu                       Department of Economics
> vox:    217-333-4558                            University of Illinois
> fax:    217-244-6678                            Champaign, IL 61820
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From jmc at research.bell-labs.com  Tue Aug 26 10:14:02 2003
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Aug 26 15:16:52 2003
Subject: [Rd] setClass question
References: <Pine.SOL.4.30.0308241224001.8144-100000@ysidro.econ.uiuc.edu>
Message-ID: <3F4B5D1A.34885B82@research.bell-labs.com>

Roger Koenker wrote:
> 
> I would like to add a class to the SparseM package.  I have a class "matrix.csr"
> that describes a matrix in compressed sparse row format, now I would like a class
> matrix.diag.csr that describes such objects when they happen to be diagonal.
> The idea is that matrix.diag.csr objects should behave (later in life) exactly like
> matrix.csr objects, the distinction is only needed in order to clarify the
> situation when they are created.  So I have:
> 
> setClass("matrix.diag.csr","matrix.csr")
> 
> My understanding (shakey, as it is) is that if I now try to construct a matrix.diag.csr
> object the checking of it should be just like the checking for a matrix.csr object, but

Well, hopefully.  But there seems a slight problem in the validity
method.

You require a dimension slot of length 2, but the default object
generated from matrix.csr fails that:


R> library(SparseM)
[1] "SparseM library loaded"
R> new("matrix.csr")
Error in validObject(.Object) : Invalid "matrix.csr" object: invalid
dimension attribute

Enter a frame number, or 0 to exit   
1:new("matrix.csr") 
2:initialize(value, ...) 
3:initialize(value, ...) 
4:.local(.Object, ...) 
5:validObject(.Object) 
Selection: 5
Browse[1]> object@dimension
numeric(0)

(Your extension of the class uncovered the problem by generating the
default object, as the traceback below showed.)

John

> 
> > new("matrix.csr",ra=1:3,ja=1:3,ia=1:4,dimension=as.integer(c(3,3)))
> An object of class "matrix.csr"
> Slot "ra":
> [1] 1 2 3
> 
> Slot "ja":
> [1] 1 2 3
> 
> Slot "ia":
> [1] 1 2 3 4
> 
> Slot "dimension":
> [1] 3 3
> 
> > new("matrix.diag.csr",ra=1:3,ja=1:3,ia=1:4,dimension=as.integer(c(3,3)))
> Error in validObject(.Object) : Invalid "matrix.csr" object: invalid dimension attribute
> 
> the traceback() says:
> 
> 16: stop(paste("Invalid \"", Class, "\" object: ", errors, sep = ""))
> 15: validObject(.Object)
> 14: .local(.Object, ...)
> 13: initialize(value, ...)
> 12: initialize(value, ...)
> 11: new("matrix.csr")
> 10: asMethod(object)
> 9: as(object, superClass)
> 8: validityMethod(as(object, superClass))
> 7: identical(x, TRUE)
> 6: anyStrings(validityMethod(as(object, superClass)))
> 5: validObject(.Object)
> 4: .local(.Object, ...)
> 3: initialize(value, ...)
> 2: initialize(value, ...)
> 1: new("matrix.diag.csr", ra = 1:3, ja = 1:3, ia = 1:4, dimension = as.integer(c(3,
>        3)))
> 
> which might be revelatory to some of you, but leaves me in the dark.  Any suggestions
> would be greatly appreciated.  In case it is relevant
> 
> setClass("matrix.csr",representation(ra="numeric",
>         ja="integer",ia="integer", dimension="integer"),
>         validity = function(object) {
>                 if(!length(object@dimension) == 2 )
>                         return("invalid dimension attribute")
>                 else{
>                         nrow <- object@dimension[1]
>                         ncol <- object@dimension[2]
>                         }
>                 if(!(length(object@ra) ==length(object@ja)))
>                         return("ra and ja don't have equal lengths")
>                 if(any(object@ja < 1) || any(object@ja > ncol))
>                         return("ja exceeds dim bounds")
>                 if(any(object@ia < 1))
>                         return("some elements of ia are <= 0")
>                 if(any(diff(object@ia)<0))
>                         return("ia vector not monotone increasing")
>                 if(object@ia[length(object@ia)] != length(object@ra)+1)
>                         return("last element of ia doesn't conform")
>                 if(length(object@ia) != nrow+1)
>                         return("ia has wrong number of elments")
>                 if(length(object@ra) < 1 || length(object@ra) > nrow*ncol)
>                         return("ra has too few, or too many elements")
>                 TRUE})
> setMethod("initialize", "matrix.csr",
>         function(.Object, ra = numeric(0),  ja = integer(0),
>                 ia = integer(0),dimension = integer(0)) {
>         .Object@ra <- ra
>         .Object@ja <- ja
>         .Object@ia <- ia
>         .Object@dimension <- dimension
>         validObject(.Object)
>         .Object
>        })
> 
> url:    www.econ.uiuc.edu/~roger/my.html        Roger Koenker
> email   rkoenker@uiuc.edu                       Department of Economics
> vox:    217-333-4558                            University of Illinois
> fax:    217-244-6678                            Champaign, IL 61820
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From roger at ysidro.econ.uiuc.edu  Tue Aug 26 13:01:46 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Tue Aug 26 18:59:02 2003
Subject: [Rd] setClass question
In-Reply-To: <3F4B5D1A.34885B82@research.bell-labs.com>
Message-ID: <Pine.SOL.4.30.0308261152070.13183-100000@ysidro.econ.uiuc.edu>

> Roger Koenker wrote:

> > My understanding is that if I now try to construct a matrix.diag.csr
> > object checking of it should be like the checking for a matrix.csr object

On Tue, 26 Aug 2003, John Chambers wrote:
> Well, hopefully.  But there seems a slight problem in the validity
> method.
>
> You require a dimension slot of length 2, but the default object
> generated from matrix.csr fails that:

John's comment revealed a couple of problems with my default matrix.csr
object, which -- once corrected  -- allowed the validity checking for
the new class to operate just as I had originally expected.  The moral
of the story is that checking the validity of the default object with

	new("classname")

is quite worthwhile...thanks again to John,

Roger

url:	www.econ.uiuc.edu/~roger/my.html	Roger Koenker
email	rkoenker@uiuc.edu			Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

From Andrea.Capodicasa at albacom.it  Wed Aug 27 11:32:40 2003
From: Andrea.Capodicasa at albacom.it (Andrea.Capodicasa@albacom.it)
Date: Wed Aug 27 10:34:44 2003
Subject: [Rd] Problem in StructTS() when the first element of the serie is
	NA ( (PR#3990)
Message-ID: <200308270832.h7R8WeJH021987@pubhealth.ku.dk>

Hi all,
I've experienced this problem using StructTS(x) when the *first* element of
x is a NA (R:R1.7.0, os: w2ksp4).

Please look at the following code:

		a=rep(1:7,10)
		library(ts)

		#this works
		StructTS(a)

		#this works
		x=a
		x[2]=NA
		StructTS(x)

		#this doesn't work
		x=a
		x[1]=NA
		StructTS(x)

The last command returns this error
"Error in optim(init[mask], getLike, method = "L-BFGS-B", lower = rep(0,  : 
        L-BFGS-B needs finite values of fn"

These are my R.version() and Sys.info() relevant infos.
> R.Version()
$platform
[1] "i386-pc-mingw32"

$arch
[1] "i386"

$os
[1] "mingw32"

$system
[1] "i386, mingw32"

$status
[1] ""

$major
[1] "1"

$minor
[1] "7.0"

$year
[1] "2003"

$month
[1] "04"

$day
[1] "16"

$language
[1] "R"

> Sys.info()
                      sysname                       release
version                       
                    "Windows"                      "NT 5.0" "(build 2195)
Service Pack 4"            
                      machine            
                        "x86"

From Andrea.Capodicasa at albacom.it  Wed Aug 27 11:39:29 2003
From: Andrea.Capodicasa at albacom.it (Andrea.Capodicasa@albacom.it)
Date: Wed Aug 27 10:39:05 2003
Subject: [Rd] Problem in step() and stepAIC() when a name of a regressors
	has b (PR#3991)
Message-ID: <200308270839.h7R8dTJH022143@pubhealth.ku.dk>

Hi all,
I've experienced this problem using step() and stepAIC() when a name of a
regressors has blanks in between (R:R1.7.0, os: w2ksp4).

Please look at the following code:

		"x" <-
		c(14.122739306734, 14.4831100207131, 14.5556459667089,
14.5777151911177, 
		14.5285815352327, 14.0217803203846, 14.0732571632964,
14.7801310180502, 
		14.7839362960477, 14.7862217992577)

		"reg" <-
		structure(list(feriale = c(0, 1, 1, 1, 1, 0, 0, 1, 1, 1),
pasquetta = c(0, 
		0, 0, 0, 0, 0, 0, 0, 0, 0), giorno = structure(c(2, 3, 4, 5,

		6, 7, 1, 2, 3, 4), class = "factor", .Label = c("1-DOM",
"2-LUN", 
		"3-MAR", "4-MER", "5-GIO", "6-VEN", "7-SAB"))), .Names =
c("feriale", 
		"pasquetta", "giorno"), row.names = c("1", "2", "3", "4",
"5", 
		"6", "7", "8", "9", "10"), class = "data.frame")

		#this works
		lm(x~., data=reg)

		#this works
		step(lm(x~., data=reg))

		#this works
		library(MASS)
		stepAIC(lm(x~., data=reg))

		#when you change a name of a regressors inserting blanks
step and stepAIC won't work
		names(reg)[1]="with blank"
		names(reg)

		#this still works
		lm(x~., data=reg)

		#this doesn't work
		step(lm(x~., data=reg))

#this is the error
#"Error in parse(file, n, text, prompt) : parse error"


		#this doesn't work
		stepAIC(lm(x~., data=reg))

# the error is the same as step
#"Error in parse(file, n, text, prompt) : parse error"


These are my R.version() and Sys.info() relevant infos.
> R.Version()
$platform
[1] "i386-pc-mingw32"

$arch
[1] "i386"

$os
[1] "mingw32"

$system
[1] "i386, mingw32"

$status
[1] ""

$major
[1] "1"

$minor
[1] "7.0"

$year
[1] "2003"

$month
[1] "04"

$day
[1] "16"

$language
[1] "R"

> Sys.info()
                      sysname                       release
version                       
                    "Windows"                      "NT 5.0" "(build 2195)
Service Pack 4"            
                      machine            
                        "x86"

From ripley at stats.ox.ac.uk  Wed Aug 27 10:45:45 2003
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed Aug 27 10:45:18 2003
Subject: (PR#3990) Re: [Rd] Problem in StructTS() when the first element of
	the serie is NA ( (PR#3990)
In-Reply-To: <200308270832.h7R8WeJH021987@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.44.0308270941230.276-100000@petrel>

What is the point of supplying a time series with the first value missing?
You might as well omit the first point.

I'll add a `you cannot be serious, man!' error message.

On Wed, 27 Aug 2003 Andrea.Capodicasa@albacom.it wrote:

> Hi all,
> I've experienced this problem using StructTS(x) when the *first* element of
> x is a NA (R:R1.7.0, os: w2ksp4).
>
> Please look at the following code:
>
> 		a=rep(1:7,10)
> 		library(ts)
>
> 		#this works
> 		StructTS(a)
>
> 		#this works
> 		x=a
> 		x[2]=NA
> 		StructTS(x)
>
> 		#this doesn't work
> 		x=a
> 		x[1]=NA
> 		StructTS(x)
>
> The last command returns this error
> "Error in optim(init[mask], getLike, method = "L-BFGS-B", lower = rep(0,  :
>         L-BFGS-B needs finite values of fn"
>
> These are my R.version() and Sys.info() relevant infos.
> > R.Version()
> $platform
> [1] "i386-pc-mingw32"
>
> $arch
> [1] "i386"
>
> $os
> [1] "mingw32"
>
> $system
> [1] "i386, mingw32"
>
> $status
> [1] ""
>
> $major
> [1] "1"
>
> $minor
> [1] "7.0"
>
> $year
> [1] "2003"
>
> $month
> [1] "04"
>
> $day
> [1] "16"
>
> $language
> [1] "R"
>
> > Sys.info()
>                       sysname                       release
> version
>                     "Windows"                      "NT 5.0" "(build 2195)
> Service Pack 4"
>                       machine
>                         "x86"
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Aug 27 10:49:34 2003
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed Aug 27 10:50:25 2003
Subject: (PR#3991) Re: [Rd] Problem in step() and stepAIC() when a name of
	a regressors has b
In-Reply-To: <200308270839.h7R8dTJH022143@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.44.0308270946130.276-100000@petrel>

Terms in formulae which are not syntactic names are not supported in R at
present, and nothing that I know of says they are.  We are working towards
that as a goal, but this is not a bug.


On Wed, 27 Aug 2003 Andrea.Capodicasa@albacom.it wrote:

> Hi all,
> I've experienced this problem using step() and stepAIC() when a name of a
> regressors has blanks in between (R:R1.7.0, os: w2ksp4).
>
> Please look at the following code:
>
> 		"x" <-
> 		c(14.122739306734, 14.4831100207131, 14.5556459667089,
> 14.5777151911177,
> 		14.5285815352327, 14.0217803203846, 14.0732571632964,
> 14.7801310180502,
> 		14.7839362960477, 14.7862217992577)
>
> 		"reg" <-
> 		structure(list(feriale = c(0, 1, 1, 1, 1, 0, 0, 1, 1, 1),
> pasquetta = c(0,
> 		0, 0, 0, 0, 0, 0, 0, 0, 0), giorno = structure(c(2, 3, 4, 5,
>
> 		6, 7, 1, 2, 3, 4), class = "factor", .Label = c("1-DOM",
> "2-LUN",
> 		"3-MAR", "4-MER", "5-GIO", "6-VEN", "7-SAB"))), .Names =
> c("feriale",
> 		"pasquetta", "giorno"), row.names = c("1", "2", "3", "4",
> "5",
> 		"6", "7", "8", "9", "10"), class = "data.frame")
>
> 		#this works
> 		lm(x~., data=reg)
>
> 		#this works
> 		step(lm(x~., data=reg))
>
> 		#this works
> 		library(MASS)
> 		stepAIC(lm(x~., data=reg))
>
> 		#when you change a name of a regressors inserting blanks
> step and stepAIC won't work
> 		names(reg)[1]="with blank"
> 		names(reg)
>
> 		#this still works
> 		lm(x~., data=reg)
>
> 		#this doesn't work
> 		step(lm(x~., data=reg))
>
> #this is the error
> #"Error in parse(file, n, text, prompt) : parse error"
>
>
> 		#this doesn't work
> 		stepAIC(lm(x~., data=reg))
>
> # the error is the same as step
> #"Error in parse(file, n, text, prompt) : parse error"
>
>
> These are my R.version() and Sys.info() relevant infos.
> > R.Version()
> $platform
> [1] "i386-pc-mingw32"
>
> $arch
> [1] "i386"
>
> $os
> [1] "mingw32"
>
> $system
> [1] "i386, mingw32"
>
> $status
> [1] ""
>
> $major
> [1] "1"
>
> $minor
> [1] "7.0"
>
> $year
> [1] "2003"
>
> $month
> [1] "04"
>
> $day
> [1] "16"
>
> $language
> [1] "R"
>
> > Sys.info()
>                       sysname                       release
> version
>                     "Windows"                      "NT 5.0" "(build 2195)
> Service Pack 4"
>                       machine
>                         "x86"
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kschlauc at vt.edu  Wed Aug 27 19:03:19 2003
From: kschlauc at vt.edu (kschlauc@vt.edu)
Date: Wed Aug 27 18:10:00 2003
Subject: [Rd] alpha-numeric order bug (PR#3996)
Message-ID: <200308271603.h7RG3JJH000163@pubhealth.ku.dk>

I am running R version 1.7.1 on 3 different operating systems:
Linux RedHat, Linux Slackware, and Windows 2000.

R is ordering alpha-numeric character strings in different ways, dependent
on the operating system. R orders strings exactly the same on Slackware and 
Windows,
and this ordering corresponds to SPlus. It's the RedHat that is creating the 
problem.

On Slackware, Windows, and SPlus:
 " "<"1"
[1] TRUE
> " 1"<"10"
[1] TRUE
> " 2"<"10"
[1] TRUE

On RedHat
 " "<"1"
[1] TRUE
> " 1" < "10"
[1] TRUE
> " 2" < "10"
[1] FALSE


Similarly, on Slackware, Windows and SPlus
>"2"<"-"
[1] FALSE
> "23"<"-3"
[1] FALSE

On RedHat
> "2"<"-"
[1] FALSE
> "23"<"-3"
[1] TRUE


Is this a RedHat problem or an R problem?

Thanks,
Karen Schlauch

From ripley at stats.ox.ac.uk  Wed Aug 27 18:22:42 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug 27 18:26:49 2003
Subject: [Rd] alpha-numeric order bug (PR#3996)
In-Reply-To: <200308271603.h7RG3JJH000163@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308271713580.19980-100000@gannet.stats>

Oh, please don't report your misunderstandings as bugs.  Do at least read 
the help page first!

Incidentally, the version of `SPlus' (sic) matters critically here.  On my
RedHat system " 2" < "10" is TRUE, but then I am not in your locale.

On Wed, 27 Aug 2003 kschlauc@vt.edu wrote:

> I am running R version 1.7.1 on 3 different operating systems:
> Linux RedHat, Linux Slackware, and Windows 2000.
> 
> R is ordering alpha-numeric character strings in different ways, dependent
> on the operating system. 

[...]

And what does it say in ?Comparison it does?

> Is this a RedHat problem or an R problem?

Another possibility you have overlooked is a Karen Schlauch problem

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kleiweg at let.rug.nl  Wed Aug 27 19:23:06 2003
From: kleiweg at let.rug.nl (Peter Kleiweg)
Date: Wed Aug 27 18:27:18 2003
Subject: [Rd] alpha-numeric order bug (PR#3996)
In-Reply-To: <200308271603.h7RG3JJH000163@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0308271816580.1152-100000@kleigh.nl>

# aldus kschlauc@vt.edu :

> R is ordering alpha-numeric character strings in different ways, dependent
> on the operating system. R orders strings exactly the same on Slackware and
> Windows,
> and this ordering corresponds to SPlus. It's the RedHat that is creating the
> problem.



> Is this a RedHat problem or an R problem?


The sort order depends on environment variables. Try this:

    Sys.setlocale(category = "LC_ALL", locale = "POSIX")
    " 2" < "10"

This is explained in R. See:

    ?"<"
    ?locales

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

From p.dalgaard at biostat.ku.dk  Wed Aug 27 17:23:21 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Wed Aug 27 18:27:50 2003
Subject: [Rd] alpha-numeric order bug (PR#3996)
In-Reply-To: <200308271603.h7RG3JJH000163@pubhealth.ku.dk>
References: <200308271603.h7RG3JJH000163@pubhealth.ku.dk>
Message-ID: <x2he43hxxd.fsf@biostat.ku.dk>

kschlauc@vt.edu writes:

> I am running R version 1.7.1 on 3 different operating systems:
> Linux RedHat, Linux Slackware, and Windows 2000.

> > " 2" < "10"
> [1] FALSE
> > "23"<"-3"
> [1] TRUE
> 
> 
> Is this a RedHat problem or an R problem?

not R I think, but which RedHat?? I get

>  "23"<"-3"
[1] FALSE
>  " 2" < "10"
[1] TRUE

on RH8.0 with

$ locale
LANG=C
LC_CTYPE=da_DK
LC_NUMERIC="C"
LC_TIME="C"
LC_COLLATE="C"
LC_MONETARY="C"
LC_MESSAGES="C"
LC_PAPER="C"
LC_NAME="C"
LC_ADDRESS="C"
LC_TELEPHONE="C"
LC_MEASUREMENT="C"
LC_IDENTIFICATION="C"
LC_ALL=


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From mail at joeconway.com  Wed Aug 27 10:44:11 2003
From: mail at joeconway.com (Joe Conway)
Date: Wed Aug 27 18:48:04 2003
Subject: [Rd] declarations in non-exported headers and embedding R
In-Reply-To: <x2r83aq5bd.fsf@biostat.ku.dk>
References: <3F48ECE2.1090109@joeconway.com> <x2r83aq5bd.fsf@biostat.ku.dk>
Message-ID: <3F4CDFDB.9090104@joeconway.com>

Peter Dalgaard BSA wrote:
> Some of it is certainly a well-known shortcoming of the set of
> exports. E.g. tcltk.c has had
> 
> /* From Parse.h -- must find better solution: */
> #define PARSE_NULL              0
> #define PARSE_OK                1
> #define PARSE_INCOMPLETE        2
> #define PARSE_ERROR             3
> #define PARSE_EOF               4
> 
> SEXP R_ParseVector(SEXP, int, int *);
> 
> for a couple of years (not that it gets much use since that interface
> is mostly in the opposite direction). Adding an Rembedding.h or so could
> be a good idea. However, it's not really my field of expertise and a
> couple ofother R core members might have strong opinions on what
> should be made available and how...

Thanks for your reply, Peter.

Do you think a patch against a current development snapshot would be 
considered? If so, should it be sent to this list, or to someone else in 
R core directly?

Thanks,

Joe

From roger at ysidro.econ.uiuc.edu  Wed Aug 27 14:50:21 2003
From: roger at ysidro.econ.uiuc.edu (Roger Koenker)
Date: Wed Aug 27 20:45:13 2003
Subject: [Rd] Re: setClass question
In-Reply-To: <3F4A847F.BEBEA38A@research.bell-labs.com>
Message-ID: <Pine.SOL.4.30.0308271339040.12078-100000@ysidro.econ.uiuc.edu>

I've now rerun R CMD check SparseM on today's R-devel and I'm happy to
report that things look much better after the changes made last night.

I now get:

* checking for missing documentation entries ... WARNING
Undocumented code objects:
  %x% as.matrix diag diag<- diff t
Undocumented S4 methods:
  \S4method{coerce}{vector,matrix.diag.csr}
  \S4method{diff}{matrix.csr}
All user-level objects in a package (including S4 classes and methods)

Obviously the S4methods are items I should deal with...I'm still
uncertain what to do about the Undocumented code objects.

url:	www.econ.uiuc.edu/~roger/my.html	Roger Koenker
email	rkoenker@uiuc.edu			Department of Economics
vox: 	217-333-4558				University of Illinois
fax:   	217-244-6678				Champaign, IL 61820

On Mon, 25 Aug 2003, John Chambers wrote:

> Seems that methods are being attributed a bit strangely in undoc().
> Here's what I get with, I think, current r-devel and SparseM.
>
> R> library(tools)
> R> undoc("methods")
> R> library(SparseM)
> [1] "SparseM library loaded"
> R> undoc("SparseM")
> Undocumented code objects:
>   %x% as.matrix diag diag<- diff t
> Undocumented S4 methods:
>   \S4method{initialize}{traceable} \S4method{initialize}{signature}
>   \S4method{initialize}{environment}
> R> undoc("methods")
> Undocumented S4 methods:
>   \S4method{initialize}{matrix.csr} \S4method{initialize}{matrix.coo}
> Warning message:
> package:methods is required by package:SparseM (still attached) in:
> detach(pos = pos)
>
> Notice that methods for initialize() seem to be cross-attributed to
> "methods" and "SparseM".  (And despite the message, there IS
> documentation for both  method?initialize("traceable") and
> method?initialize("matrix.csr"), but of course in the other package.)
>
> If it's relevant, after the undoc("methods"), the order of the search
> list has been altered, with methods in position 2 (maybe related to the
> warning message when it was detached from its previous position?).
>
> The "Undocumented code objects" messages are "real", but not your
> fault--we'll have to figure what to do about them.  You created methods
> for "diag" (I assume), which is a non-generic in base.  The result is to
> create a generic version of diag(), which is assigned in your package.
> (In general, with namespaces, I don't think it's possible to assign the
> generic back into the original package, even just into the exported
> environment.)
>
> R> find("diag")
> [1] "package:SparseM" "package:base"
>
> This creates a formal "conflict" but in my understanding not one that
> should be reported, nor should you be expected to document the function
> diag(), as opposed to methods created for it.
>
> [Just got back to e-mail after 3 days away.  Will look at this and your
> other mail, probably not until tomorrow.]
>
> Thanks,
>  John
>
> Roger Koenker wrote:
> >
> > I have another S4 methods query -- this time about undocumented objects:
> > I'm now getting the following warning from R CMD check SparseM:
> >
> > * checking for missing documentation entries ... WARNING
> > Undocumented code objects:
> >   %x% as.matrix diag diag<- diff t
> > Undocumented S4 methods:
> >   \S4method{coerce}{ANY,array} \S4method{coerce}{ANY,call}
> >   \S4method{coerce}{ANY,character} \S4method{coerce}{ANY,complex}
> >   \S4method{coerce}{ANY,environment} \S4method{coerce}{ANY,expression}
> >   \S4method{coerce}{ANY,function} \S4method{coerce}{ANY,integer}
> >   \S4method{coerce}{ANY,list} \S4method{coerce}{ANY,logical}
> >   \S4method{coerce}{ANY,matrix} \S4method{coerce}{ANY,name}
> >   \S4method{coerce}{ANY,numeric} \S4method{coerce}{ANY,single}
> >   \S4method{coerce}{ANY,ts} \S4method{coerce}{ANY,vector}
> >   \S4method{coerce}{ANY,NULL}
> >   \S4method{coerce}{vector,matrix.diag.csr}
> >   \S4method{diff}{matrix.csr} \S4method{initialize}{traceable}
> >   \S4method{initialize}{signature} \S4method{initialize}{environment}
> >
> > A couple of these are directly related to the package, but the rest
> > seem to be items that I wouldn't have thought that I should be responsible
> > for documenting.  I'm wondering whether the coerce items are related to
> > my earlier query.  Even supposing that they were due to some blunder
> > of mine, I'm still puzzled by the initialize items which were present
> > even before I began to mess with my new setClass strategy.  Again,
> > many thanks for any suggestions.
> >
> > url:    www.econ.uiuc.edu/~roger/my.html        Roger Koenker
> > email   rkoenker@uiuc.edu                       Department of Economics
> > vox:    217-333-4558                            University of Illinois
> > fax:    217-244-6678                            Champaign, IL 61820
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
>

From ripley at stats.ox.ac.uk  Wed Aug 27 21:14:06 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Aug 27 21:14:57 2003
Subject: [Rd] declarations in non-exported headers and embedding R
In-Reply-To: <3F4CDFDB.9090104@joeconway.com>
Message-ID: <Pine.LNX.4.44.0308272013130.20765-100000@gannet.stats>

Joe,

We're discussing how to do this.  There are style issues involved,
but we intend to have something for you to test by early next week.

Brian

On Wed, 27 Aug 2003, Joe Conway wrote:

> Peter Dalgaard BSA wrote:
> > Some of it is certainly a well-known shortcoming of the set of
> > exports. E.g. tcltk.c has had
> > 
> > /* From Parse.h -- must find better solution: */
> > #define PARSE_NULL              0
> > #define PARSE_OK                1
> > #define PARSE_INCOMPLETE        2
> > #define PARSE_ERROR             3
> > #define PARSE_EOF               4
> > 
> > SEXP R_ParseVector(SEXP, int, int *);
> > 
> > for a couple of years (not that it gets much use since that interface
> > is mostly in the opposite direction). Adding an Rembedding.h or so could
> > be a good idea. However, it's not really my field of expertise and a
> > couple ofother R core members might have strong opinions on what
> > should be made available and how...
> 
> Thanks for your reply, Peter.
> 
> Do you think a patch against a current development snapshot would be 
> considered? If so, should it be sent to this list, or to someone else in 
> R core directly?
> 
> Thanks,
> 
> Joe
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From mail at joeconway.com  Wed Aug 27 13:23:42 2003
From: mail at joeconway.com (Joe Conway)
Date: Wed Aug 27 21:26:34 2003
Subject: [Rd] declarations in non-exported headers and embedding R
In-Reply-To: <Pine.LNX.4.44.0308272013130.20765-100000@gannet.stats>
References: <Pine.LNX.4.44.0308272013130.20765-100000@gannet.stats>
Message-ID: <3F4D053E.4040809@joeconway.com>

Prof Brian Ripley wrote:
> We're discussing how to do this.  There are style issues involved,
> but we intend to have something for you to test by early next week.

Thanks, I appreciate the update. I'd be happy to take a shot at a 
documentation patch if that would help, although I could use some 
guidance as to where it belongs (somewhere in "Writing R Extensions" I'd 
guess).

I'll be travelling (by car, cross-US) starting next Tuesday for a couple 
weeks, so my responsiveness will be limited, but I'll test the best I 
can during that time.

Joe

From eSafe at finaref.fr  Thu Aug 28 13:30:04 2003
From: eSafe at finaref.fr (eSafe@finaref.fr)
Date: Thu Aug 28 12:05:03 2003
Subject: [Rd] This is an alert from eSafe
Message-ID: <200308281030.h7SAU4xQ027451@alain.finaref.fr>

*** eSafe detected a hostile content in this email. ***


Time: 11:42:44 08/28/03
Scan result: Mail modified to remove malicious content
Protocol: SMTP in
File Name / Mail Subject: mail_1060205807
Source: r-devel@lists.r-project.org
Destination: mdruart@finaref.fr
Details: details.pif  Msg #705 - The file type pif,APPLICATION/OCTET-STREAM is on the Restricted List.

From Simon.Urbanek at math.uni-augsburg.de  Fri Aug 29 11:09:52 2003
From: Simon.Urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Fri Aug 29 10:09:21 2003
Subject: [Rd] about REPL and loops in general ...
Message-ID: <2ACD19C7-D9F8-11D7-84CE-000A957CEFBA@math.uni-augsburg.de>

I need to implement some external callbacks to R and I'm not happy with 
the current REPL, since it prevents any general solution.

Are there plans to improve the current REPL anytime soon? The current 
approach has some deficiencies you are surely aware of (only one input 
(=external event loop), the loop is blocked while waiting for input in 
R_ReadConsole, ...). But the major problem is that several 
packages/modules simply replace the standard REPL with their own 
implementations by not returning control to the loop. This virtually 
prevents any cooperation - it is impossible to load two such modules at 
a time without breaking something.

I think that something along the lines of a "light" REventLoop (i.e. 
just the loop management where modules can register their handlers, w/o 
the "demo" loops) would be very helpful. What makes me wonder is that 
even quite recent code again just replaces the REPL (simply never 
returns back while duplicating the functionality) or uses other tricks. 
So, are there plans to replace the current REPL soon? (preferably in 
1.8 ;)). If not, what are the reasons?

Another related question is why shouldn't we use threads for external 
event loops? Most current GUIs are multi-threaded anyway. This wouldn't 
affect R directly. I have something like this in mind:
- external hander registers and gets an ID
R main loop:
{
- wait for mutex A to be signaled (with an ID)
- call signaler's handler function and perform REP if required
- release the mutex A
}

each external loop runs in a separate thread thus not affecting R (R 
can be computing anything in the meantime). once it needs to do 
something in R (e.g. user typed a line), it locks the mutex and signals 
a condition on the mutex which results in action taken in the main R 
REPL.

the above approach makes sure that R (and anything jumping into R) 
still remains single-threaded, but allows arbitrary event loops  to run 
as multiple threads in parallel. afaik all current OSes have threads 
support (we could provide single-threaded REPL as fallback for those 
who don't) and the above is fairly easy to implement in pthreads (and 
compatible) as well as Windows.

I'm willing to provide code for the latter approach or to help with the 
first one if necessary.

Cheers,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
University of Augsburg
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2200

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From p.dalgaard at biostat.ku.dk  Fri Aug 29 11:10:51 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Aug 29 12:10:52 2003
Subject: [Rd] about REPL and loops in general ...
In-Reply-To: <2ACD19C7-D9F8-11D7-84CE-000A957CEFBA@math.uni-augsburg.de>
References: <2ACD19C7-D9F8-11D7-84CE-000A957CEFBA@math.uni-augsburg.de>
Message-ID: <x2fzjkvkmk.fsf@biostat.ku.dk>

Simon Urbanek <Simon.Urbanek@math.uni-augsburg.de> writes:

> I think that something along the lines of a "light" REventLoop (i.e.
> just the loop management where modules can register their handlers,
> w/o the "demo" loops) would be very helpful. What makes me wonder is
> that even quite recent code again just replaces the REPL (simply never
> returns back while duplicating the functionality) or uses other
> tricks. So, are there plans to replace the current REPL soon?
> (preferably in 1.8 ;)). If not, what are the reasons?

The main reason is that we can't seem to get it right... It would be a
very welcome thing to have in R-2.0 (Planned: Apr.2004) in some form or
another. Or 1.8 if you can just send us the perfect solution by next
week, for all platforms, please ;) ;)

[I'm not quite sure what you're pointing to with the "quite recent
code" remark. Could you be more specific?]

One particular issue that has come up again recently is that people
want to run REPL loops on connections (e.g. sockets). With the current
implementation, we can't handle incomplete input, and the only easy
fix would be to buffer up and reparse from start of expression at
every end of line, as we currently do on std. input. We could (I
think) fairly easily have a parser that could continue across line
endings, but we can't multiplex two of them. I.e., receiving "c(" on a
socket blocks the command line, and/or having the "+" prompt on the
console stops the socket processing. 

This appears inevitable as long as we use single-threading and use a
parser that works using a single C call. Changing either might make it
work - you could potentially replace yyparse() with a state-machine
manipulator (e.g. bison can be set to generate a set of parse tables),
but multithreading seems much more straightforward.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From Simon.Urbanek at math.uni-augsburg.de  Fri Aug 29 15:39:16 2003
From: Simon.Urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Fri Aug 29 14:38:50 2003
Subject: [Rd] about REPL and loops in general ...
In-Reply-To: <x2fzjkvkmk.fsf@biostat.ku.dk>
Message-ID: <CD285A37-DA1D-11D7-84CE-000A957CEFBA@math.uni-augsburg.de>

On Friday, August 29, 2003, at 12:11  PM, Peter Dalgaard BSA wrote:

> Simon Urbanek <Simon.Urbanek@math.uni-augsburg.de> writes:
>
>> I think that something along the lines of a "light" REventLoop (i.e.
>> [...]
>> tricks. So, are there plans to replace the current REPL soon?
>> (preferably in 1.8 ;)). If not, what are the reasons?
>
> The main reason is that we can't seem to get it right... It would be a
> very welcome thing to have in R-2.0 (Planned: Apr.2004) in some form or
> another. Or 1.8 if you can just send us the perfect solution by next
> week, for all platforms, please ;) ;)
Hmm.. I got an AIX, Sun 5.8, FreeBSD x86, Linux x86, Windows and Darwin 
here to test on - does that count as "all platforms" ? ;)

> [I'm not quite sure what you're pointing to with the "quite recent
> code" remark. Could you be more specific?]
The most recent thing I had in mind was the #ifdefs added for Aqua, but 
in general both the comments concerning REPL and Duncan's REventLoop 
pages state summer 2002 as the last update, so I wondered where the 
development is heading.

> One particular issue that has come up again recently is that people
> want to run REPL loops on connections (e.g. sockets). With the current
> implementation, we can't handle incomplete input, and the only easy
> fix would be to buffer up and reparse from start of expression at
> every end of line, as we currently do on std. input.
I noticed that, but is there anything wrong with it? The re-parsing is 
basically necessary for user GUIs only - and I don't think the parsing 
time is an issue there. If commands are sent via 
socket/file/application/whatever where parsing time matters then the 
other side usually knows what the complete block is (if it does not .. 
well, then it's very likely an user GUI again ...).

Using the callback handlers I sketched (and REventLoop uses something 
similar) has the advantage that the application could do whatever it 
needs - run a single R command using C API, parse and evaluate in one 
shot or call this 'sequential parse function'. We could also easily 
provide a 'handler' which works on fds (socket/console...) and runs a 
simple REPL like the current one.

> We could (I
> [...]
> manipulator (e.g. bison can be set to generate a set of parse tables),
> but multithreading seems much more straightforward.
Yes, but that would mean to shift the multi-threading further into R 
which (so I was told - I didn't look at the parser myself) is a rather 
complex task. As I explained above I'm not sure we really need that.

The benefit of using separate structures for the parser (which would 
also allow multi-threading) would be that especially with large code 
the source could be passed in chunks. But IMHO I believe this is 
independent of the REPL issue in a sense that improved main R loop can 
easily accommodate improved parser - much more easily even, especially 
since now each module that replaces REPL relies on the current state 
whereas the new R loop would make it possible to improve the parser at 
a later stage without the need to modify the modules.


---
Simon Urbanek
Department of computer oriented statistics and data analysis
University of Augsburg
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2200

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From wolfram at fischer-zim.ch  Fri Aug 29 20:59:55 2003
From: wolfram at fischer-zim.ch (Wolfram Fischer)
Date: Fri Aug 29 20:00:28 2003
Subject: [Rd] length() and nchar()
Message-ID: <20030829175955.GA9274@s1x.local>

I would propose to add "
    See also:
        `nchar' for counting the number of character in
		character vectors.
"
to the helpfile of length(),
because it is rather difficult
to find nchar() if one has only
search terms as "length", "len",
"strlen" in mind.

Sincerly

Wolfram Fischer

From ripley at stats.ox.ac.uk  Fri Aug 29 22:03:28 2003
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Aug 29 22:08:13 2003
Subject: (PR#3979) Re: [Rd] Re: R 1.7.x and inaccurate log1p() on OpenBSD
	3.2 and NetBSD 1.6 (PR#3979)
In-Reply-To: <Pine.LNX.4.44.0308251809580.5741-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0308292101500.28090-100000@gannet.stats>

The fix I proposed is now in the R-devel sources, if you could please try 
it.  (It should appear in the next snapshot after now.)

On Mon, 25 Aug 2003, Prof Brian Ripley wrote:

> There is already a usable log1p implementation in src/nmath/log1p, for 
> platforms without it.  All we need to do is to arrange to use it on those 
> systems with broken versions.  That's not easy without access to such a 
> platform to test it, though.
> 
> On Mon, 25 Aug 2003 beebe@math.utah.edu wrote:
> 
> > >> I have come across your reported log1p error (#2837) on a NetBSD (1.6W)
> > >> system.
> > 
> > I've just made further experiments on the deficient log1p() function
> > on OpenBSD 3.2 and NetBSD 1.6 with this test program:
> > 
> > % cat bug-log1p.c
> > #include <stdio.h>
> > #include <stdlib.h>
> > #include <math.h>
> > 
> > int
> > main(int argc, char* argv[])
> > {
> >     int k;
> >     double x; 
> > 
> >     for (k = 0; k <= 100; ++k)
> >     {
> >         x = pow(2.0,(double)(-k));
> >         printf("%3d\t%.15e\t%.15e\n", k, log1p(x), log(1.0 + x));
> >     }
> > 
> >     return (EXIT_SUCCESS);
> > }
> > 
> > % cc bug-log1p.c -lm && ./a.out
> >   0     6.931471805599453e-01   6.931471805599453e-01
> >   1     4.054651081081644e-01   4.054651081081644e-01
> >   2     2.231435513142098e-01   2.231435513142098e-01
> > ...
> >  51     4.440892098500625e-16   4.440892098500625e-16
> >  52     2.220446049250313e-16   2.220446049250313e-16
> >  53     0.000000000000000e+00   0.000000000000000e+00
> >  54     0.000000000000000e+00   0.000000000000000e+00
> > ...
> >  99     0.000000000000000e+00   0.000000000000000e+00
> > 100     0.000000000000000e+00   0.000000000000000e+00
> > 
> > Evidently, on these systems, log1p(x) is carelessly implemented as
> > log(1+x).  Correct output from FreeBSD 5.0, Sun Solaris 9, ...  looks
> > like this:
> > 
> > % cc bug-log1p.c -lm && ./a.out
> >   0     6.931471805599453e-01   6.931471805599453e-01
> >   1     4.054651081081644e-01   4.054651081081644e-01
> >   2     2.231435513142098e-01   2.231435513142098e-01
> > ...
> >  51     4.440892098500625e-16   4.440892098500625e-16
> >  52     2.220446049250313e-16   2.220446049250313e-16
> >  53     1.110223024625157e-16   0.000000000000000e+00
> >  54     5.551115123125783e-17   0.000000000000000e+00
> > ...
> >  99     1.577721810442024e-30   0.000000000000000e+00
> > 100     7.888609052210118e-31   0.000000000000000e+00
> > 
> > The whole point of log1p(x) is to return accurate results for 
> > |x| << 1, and the OpenBSD/FreeBSD folks failed to understand that.
> > 
> > The simple solution for a missing log1p() that I adopted in hoc is
> > this internal function:
> > 
> > fp_t
> > Log1p(fp_t x)
> > {
> > #if defined(HAVE_LOG1PF) || defined(HAVE_LOG1P) || defined(HAVE_LOG1PL)
> >         return (log1p(x));
> > #else
> >         fp_t u;
> >         /* Use log(), corrected to first order for truncation loss */
> >         u = FP(1.0) + x;
> >         if (u == FP(1.0))
> >                 return (x);
> >         else
> >                 return (log(u) * (x / (u - FP(1.0)) ));
> > #endif
> > }
> > 
> > I have yet to put in an accuracy test in hoc's configure.in that will
> > check for a broken log1p(), and use the internal fallback
> > implementation instead.
> > 
> > Here is a test comparing accuracy of the two log1p() implementations
> > on Sun Solaris 9, which has a good log1p() implementation:
> > 
> > % cat cmp-log1p.c
> > #include <stdio.h>
> > #include <stdlib.h>
> > #include <math.h>
> > 
> > double
> > LOG1P(double x)
> > {
> >     double u;
> > 
> >     u = 1.0 + x;
> >     if (u == 1.0)
> > 	return (x);
> >     else
> > 	return (log(u) * (x / (u - 1.0)));
> > }
> > 
> > 
> > int
> > main(int argc, char* argv[])
> > {
> >     int k;
> >     double d;
> >     double x;
> > 
> >     for (k = 0; k <= 100; ++k)
> >     {
> > 	x = pow(2.0,(double)(-k));
> > 
> > 	printf("%3d\t%.15e\t%.15e\t%.2e\n",
> > 	       k, log1p(x), LOG1P(x), (LOG1P(x) - log1p(x))/LOG1P(x));
> >     }
> > 
> >     return (EXIT_SUCCESS);
> > }
> > 
> > % cc cmp-log1p.c -lm && ./a.out
> >   0     6.931471805599453e-01   6.931471805599453e-01   0.00e+00
> >   1     4.054651081081644e-01   4.054651081081644e-01   0.00e+00
> >   2     2.231435513142098e-01   2.231435513142098e-01   0.00e+00
> > ...
> >  51     4.440892098500625e-16   4.440892098500625e-16   0.00e+00
> >  52     2.220446049250313e-16   2.220446049250313e-16   0.00e+00
> >  53     1.110223024625157e-16   1.110223024625157e-16   0.00e+00
> >  54     5.551115123125783e-17   5.551115123125783e-17   0.00e+00
> > ...
> >  98     3.155443620884047e-30   3.155443620884047e-30   0.00e+00
> >  99     1.577721810442024e-30   1.577721810442024e-30   0.00e+00
> > 100     7.888609052210118e-31   7.888609052210118e-31   0.00e+00
> > 
> > At least for test arguments of the form 2^(-k), my LOG1P() is
> > identical to log1p().
> > 
> > A simple change to that test program, inserting
> > 
> > 	x *= (double)rand() / (double)(RAND_MAX);
> > 
> > after the assignment to x to pick a random value near a power of k,
> > produces output like this:
> > 
> > % cc cmp-log1p-2.c -lm && ./a.out
> >   0     4.146697237286190e-01   4.146697237286190e-01   0.00e+00
> >   1     8.421502722841255e-02   8.421502722841256e-02   1.65e-16
> >   2     7.432648260535767e-02   7.432648260535767e-02   0.00e+00
> > ...
> >  48     2.771522173451896e-15   2.771522173451896e-15   1.42e-16
> >  49     1.346294923235749e-15   1.346294923235749e-15   0.00e+00
> >  50     8.498507032336806e-16   8.498507032336806e-16   0.00e+00
> >  51     1.246870549827746e-17   1.246870549827746e-17   0.00e+00
> >  52     7.077345664348359e-17   7.077345664348359e-17   0.00e+00
> > ...
> >  98     2.127061943360297e-30   2.127061943360297e-30   0.00e+00
> >  99     1.276978671673724e-30   1.276978671673724e-30   0.00e+00
> > 100     1.252374165764246e-31   1.252374165764246e-31   0.00e+00
> > 
> > For all random test arguments x < 2^(-49), the relative error of
> > LOG1P() vs log1p() is zero.
> > 
> > -------------------------------------------------------------------------------
> > - Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
> > - Center for Scientific Computing       FAX: +1 801 581 4148                  -
> > - University of Utah                    Internet e-mail: beebe@math.utah.edu  -
> > - Department of Mathematics, 110 LCB        beebe@acm.org  beebe@computer.org -
> > - 155 S 1400 E RM 233                       beebe@ieee.org                    -
> > - Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Fri Aug 29 22:35:33 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Fri Aug 29 23:35:37 2003
Subject: [Rd] length() and nchar()
In-Reply-To: <20030829175955.GA9274@s1x.local>
References: <20030829175955.GA9274@s1x.local>
Message-ID: <x2bru8p2ne.fsf@biostat.ku.dk>

Wolfram Fischer <wolfram@fischer-zim.ch> writes:

> I would propose to add "
>     See also:
>         `nchar' for counting the number of character in
> 		character vectors.
> "
> to the helpfile of length(),

Done.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jerome at hivnet.ubc.ca  Sat Aug 30 03:05:27 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Sat Aug 30 02:04:54 2003
Subject: [Rd] fisher.test() gives wrong confidence interval (PR#4019)
Message-ID: <200308300005.h7U05RJH001349@pubhealth.ku.dk>


The problem occurs when the sample odds ratio is Inf, such as in the 
following example. Given the fact that both upper bounds of the two 95% 
confidence intervals are Inf, I would have expected that the two lower 
bounds be equal, but they aren't.

x <- matrix(c(9,4,0,2),2,2)
x
#     [,1] [,2]
#[1,]    9    0
#[2,]    4    2
rbind("two.sided.95CI"=fisher.test(x)$conf.int,
"greater.95CI"=fisher.test(x,alt="greater")$conf.int)
#                    [,1] [,2]
#two.sided.95CI 0.2985103  Inf
#greater.95CI   0.4625314  Inf

Using the noncentral hypergeometric distribution, we can calculate the 
probability mass of each possible table with same marginals as x.
Ref.: Alan Agresti (1990). Categorical data analysis. New York: Wiley. 
Page 67.

Hence, the result below suggests that the two-sided confidence interval 
has a confidence level of 97.5% as opposed to 95%.

n11 <- 7:9
theta <- 0.2985103
choose(9,n11)*choose(15-9,13-n11)*theta^n11/
  sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
#[1] 0.67344877 0.30154709 0.02500414

The 95% confidence interval with one-sided (greater) alternative appears 
to be correct.

theta <- 0.4625314
choose(9,n11)*choose(15-9,13-n11)*theta^n11/
  sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
#[1] 0.5608724 0.3891316 0.0499960

Sincerely,
Jerome Asselin

-- 

Jerome Asselin (Jrme), Statistical Analyst
British Columbia Centre for Excellence in HIV/AIDS
St. Paul's Hospital, 608 - 1081 Burrard Street
Vancouver, British Columbia, CANADA V6Z 1Y6
Email: jerome@hivnet.ubc.ca
Phone: 604 806-9112   Fax: 604 806-9044

From jerome at hivnet.ubc.ca  Sat Aug 30 03:48:04 2003
From: jerome at hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Sat Aug 30 02:48:19 2003
Subject: [Rd] Re: fisher.test() gives wrong confidence interval (PR#4019)
Message-ID: <200308300048.h7U0m4JH001563@pubhealth.ku.dk>

Forgot to mention...
I'm using R 1.7.1 on Red Hat Linux 7.2.

From bellis at hsph.harvard.edu  Fri Aug 29 22:11:59 2003
From: bellis at hsph.harvard.edu (Byron Ellis)
Date: Sat Aug 30 03:11:24 2003
Subject: [Rd] length() and nchar()
In-Reply-To: <20030829175955.GA9274@s1x.local>
Message-ID: <F4E2AF71-DA86-11D7-A99F-000393956206@hsph.harvard.edu>

THAT'S how you find the length of a string?!!  *smacks forehead* I 
ended up doing a regex for /$^/. Man, I feel stupid.

On Friday, August 29, 2003, at 01:59 PM, Wolfram Fischer wrote:

> I would propose to add "
>     See also:
>         `nchar' for counting the number of character in
> 		character vectors.
> "
> to the helpfile of length(),
> because it is rather difficult
> to find nchar() if one has only
> search terms as "length", "len",
> "strlen" in mind.
>
> Sincerly
>
> Wolfram Fischer
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From p.dalgaard at biostat.ku.dk  Sat Aug 30 10:29:59 2003
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: Sat Aug 30 11:30:01 2003
Subject: [Rd] fisher.test() gives wrong confidence interval (PR#4019)
In-Reply-To: <200308300005.h7U05RJH001349@pubhealth.ku.dk>
References: <200308300005.h7U05RJH001349@pubhealth.ku.dk>
Message-ID: <x27k4vpk54.fsf@biostat.ku.dk>

jerome@hivnet.ubc.ca writes:

> The problem occurs when the sample odds ratio is Inf, such as in the 
> following example. Given the fact that both upper bounds of the two 95% 
> confidence intervals are Inf, I would have expected that the two lower 
> bounds be equal, but they aren't.
> 
> x <- matrix(c(9,4,0,2),2,2)
> x
> #     [,1] [,2]
> #[1,]    9    0
> #[2,]    4    2
> rbind("two.sided.95CI"=fisher.test(x)$conf.int,
> "greater.95CI"=fisher.test(x,alt="greater")$conf.int)
> #                    [,1] [,2]
> #two.sided.95CI 0.2985103  Inf
> #greater.95CI   0.4625314  Inf
> 
> Using the noncentral hypergeometric distribution, we can calculate the 
> probability mass of each possible table with same marginals as x.
> Ref.: Alan Agresti (1990). Categorical data analysis. New York: Wiley. 
> Page 67.
> 
> Hence, the result below suggests that the two-sided confidence interval 
> has a confidence level of 97.5% as opposed to 95%.
> 
> n11 <- 7:9
> theta <- 0.2985103
> choose(9,n11)*choose(15-9,13-n11)*theta^n11/
>   sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
> #[1] 0.67344877 0.30154709 0.02500414
> 
> The 95% confidence interval with one-sided (greater) alternative appears 
> to be correct.
> 
> theta <- 0.4625314
> choose(9,n11)*choose(15-9,13-n11)*theta^n11/
>   sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
> #[1] 0.5608724 0.3891316 0.0499960

I don't think this is a bug, insofar as the problem is solvable at
all. The confidence interval consists of those x for which the test of
OR==x is not rejected at the 95% level. In the two sided case, you
need to count also the tables that differ in the "opposite direction",
and we unceremoniously assume that their probability is the same. 

For some small tables like this one the assumption is false since
there are only three tables consistent with the marginals. However,
this is not invariably the case, and trying to solve the test problem
exactly runs into the issue that the exact two-sided p-value for OR==x
is not a nice function of x (it has discontinuities and may be
non-monotone).

Consider this case, and you'll see part of the point
fisher.test(matrix(c(3,0,0,3),2),alt="g")

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From hornik at ci.tuwien.ac.at  Sat Aug 30 13:00:16 2003
From: hornik at ci.tuwien.ac.at (Kurt Hornik)
Date: Sat Aug 30 12:44:51 2003
Subject: [Rd] fisher.test() gives wrong confidence interval (PR#4019)
In-Reply-To: <200308300005.h7U05RJH001349@pubhealth.ku.dk>
References: <200308300005.h7U05RJH001349@pubhealth.ku.dk>
Message-ID: <16208.30128.340961.32061@mithrandir.hornik.net>

>>>>> jerome  writes:

> The problem occurs when the sample odds ratio is Inf, such as in the 
> following example. Given the fact that both upper bounds of the two 95% 
> confidence intervals are Inf, I would have expected that the two lower 
> bounds be equal, but they aren't.

> x <- matrix(c(9,4,0,2),2,2)
> x
> #     [,1] [,2]
> #[1,]    9    0
> #[2,]    4    2
> rbind("two.sided.95CI"=fisher.test(x)$conf.int,
> "greater.95CI"=fisher.test(x,alt="greater")$conf.int)
> #                    [,1] [,2]
> #two.sided.95CI 0.2985103  Inf
> #greater.95CI   0.4625314  Inf

> Using the noncentral hypergeometric distribution, we can calculate the
> probability mass of each possible table with same marginals as x.
> Ref.: Alan Agresti (1990). Categorical data analysis. New York: Wiley.
> Page 67.

> Hence, the result below suggests that the two-sided confidence interval 
> has a confidence level of 97.5% as opposed to 95%.

> n11 <- 7:9
> theta <- 0.2985103
> choose(9,n11)*choose(15-9,13-n11)*theta^n11/
>   sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
> #[1] 0.67344877 0.30154709 0.02500414

> The 95% confidence interval with one-sided (greater) alternative appears 
> to be correct.

> theta <- 0.4625314
> choose(9,n11)*choose(15-9,13-n11)*theta^n11/
>   sum(choose(9,n11)*choose(15-9,13-n11)*theta^n11)
> #[1] 0.5608724 0.3891316 0.0499960

Right.  When going for a confidence interval that is to include the
parameter estimate and this is already at the boundary of the parameter
range, then there is no point finding mass even further away as there
obviously cannot be any.

I changed the code (r-devel) to

        CINT <- switch(alternative,
                       less = c(0, ncp.U(x, 1 - conf.level)),
                       greater = c(ncp.L(x, 1 - conf.level), Inf),
                       two.sided = {
                           if(ESTIMATE == 0)
                               c(0, ncp.U(x, 1 - conf.level))
                           else if(ESTIMATE == Inf)
                               c(ncp.L(x, 1 - conf.level), Inf)
                           else {
                               alpha <- (1 - conf.level) / 2
                               c(ncp.L(x, alpha), ncp.U(x, alpha))
                           }
                       })

which seems to fix the problem.

Thanks,

-k

From edd at debian.org  Sat Aug 30 09:43:39 2003
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat Aug 30 15:45:45 2003
Subject: [Rd] length() and nchar()
In-Reply-To: <F4E2AF71-DA86-11D7-A99F-000393956206@hsph.harvard.edu>
References: <20030829175955.GA9274@s1x.local>
	<F4E2AF71-DA86-11D7-A99F-000393956206@hsph.harvard.edu>
Message-ID: <20030830134338.GA2036@sonny.eddelbuettel.com>

On Fri, Aug 29, 2003 at 09:11:59PM -0400, Byron Ellis wrote:
> THAT'S how you find the length of a string?!!  *smacks forehead* I 

Seconded. Could we even alias this for strlen or something similar?  I still
start by looking for C library equivalents as that works often enough, but
string length was one of these things I had been missing.

Dirk

> ended up doing a regex for /$^/. Man, I feel stupid.
> 
> On Friday, August 29, 2003, at 01:59 PM, Wolfram Fischer wrote:
> 
> >I would propose to add "
> >    See also:
> >        `nchar' for counting the number of character in
> >		character vectors.
> >"
> >to the helpfile of length(),
> >because it is rather difficult
> >to find nchar() if one has only
> >search terms as "length", "len",
> >"strlen" in mind.
> >
> >Sincerly
> >
> >Wolfram Fischer
> >
> >______________________________________________
> >R-devel@stat.math.ethz.ch mailing list
> >https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Those are my principles, and if you don't like them... well, I have others.
                                                -- Groucho Marx

From mail at fwr.on.ca  Sat Aug 30 17:38:30 2003
From: mail at fwr.on.ca (mail@fwr.on.ca)
Date: Sat Aug 30 16:37:54 2003
Subject: [Rd] Bug in plot() with POSIX dates (PR#4024)
Message-ID: <200308301438.h7UEcUJH006448@pubhealth.ku.dk>

When I do this (highly simplified example):

plot(as.POSIXct(c("1984-01-01","1984-01-02")), c(1,2), col=2)

I get a partially red (col=2) x-axis between and including the first and last tick marks. 
Otherwise ok. Only happens with POSIXct or POSIXlt dates.

Also, POSIX dates cannot be used on the y-axis?  
POSIXlt gives an error, and POSIXct is unformatted.  

Bruce

Using X11 V4.2

From ripley at stats.ox.ac.uk  Sat Aug 30 17:06:17 2003
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat Aug 30 17:06:00 2003
Subject: [Rd] Bug in plot() with POSIX dates (PR#4024)
In-Reply-To: <200308301438.h7UEcUJH006448@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.44.0308301602180.3328-100000@petrel>

Already correct in the current R-patched version (and you don't even
mention the version of R you used).

On Sat, 30 Aug 2003 mail@fwr.on.ca wrote:

> When I do this (highly simplified example):
>
> plot(as.POSIXct(c("1984-01-01","1984-01-02")), c(1,2), col=2)
>
> I get a partially red (col=2) x-axis between and including the first and last tick marks.
> Otherwise ok. Only happens with POSIXct or POSIXlt dates.
>
> Also, POSIX dates cannot be used on the y-axis?
> POSIXlt gives an error, and POSIXct is unformatted.

R-bugs is not the place to ask questions.  Ask on R-help, explaining
exactly what you did, and then kind people may tell you what you did wrong.

> Using X11 V4.2

Yes, but which version of R?  Please follow the advice in the FAQ, and use
bug.report to prepare an adequate report.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kavkeeper at zepterkomercbanka.com  Sat Aug 30 18:38:43 2003
From: kavkeeper at zepterkomercbanka.com (kavkeeper@zepterkomercbanka.com)
Date: Sat Aug 30 17:38:44 2003
Subject: [Rd] SENDER ! Virus found in message from you !
Message-ID: <200308301838.h7UIcht13684@mailserver.zepterkomercbanka.com>

You sent to user office@zepterkomercbanka.com message with VIRUS .
======================================
KAV Report:
======================================
	infected: I-Worm.Sobig.f.txt
	disinfection failed: I-Worm.Sobig.f.txt
application.pif	infected: I-Worm.Sobig.f
application.pif	disinfection failed: I-Worm.Sobig.f

======================================
www.zepterkomercbanka.com

From uil86dux at smtp.secureserver.net  Sun Aug 31 06:05:28 2003
From: uil86dux at smtp.secureserver.net (uil86dux@smtp.secureserver.net)
Date: Sun Aug 31 05:04:56 2003
Subject: [Rd] 7_ Size DOES Matter_ uy nsw e (PR#4026)
Message-ID: <200308310305.h7V35SJH010043@pubhealth.ku.dk>


--B0E1A.FC8A0_D1__E_D.F_9A
Content-Type: text/html;
Content-Transfer-Encoding: quoted-printable

<html>
<body>
<p>
<onset>
<center><h2>Stuff For Your</h2><h1><b><u>PENIS!</u></b></h1></center><p>
<center><h3><bullet>Make It</h3><h1><b><u><i><pendulum>BIGGER!</=
i></u></b></h1><a href=3D" http://www.penispower.biz/affiliate128/main.htm=
l"> <h3>here</center></a></h3></u><p><center><h4>and/or</h4></center><p><c=
enter><h3><gerhardt>Make It</h3><h1><b><u><i><frisky>HARDER!</i>=
</u></b></h1><a href=3D"http://www.vision34c.com/do">
<h3>here</a></center><center><p><br><br><br><br><br><br><br><br>
<a href=3D"http://www.manual3a.com/page/a.html"><center><h6><=
rikl  zd>    Opt-Out</a></center><br><center><p><font color=3Dwhite>
</body>
</html>
h  m vo godlfd
kwwjppzc jufglxaggwecfo

--B0E1A.FC8A0_D1__E_D.F_9A--

From ligges at statistik.uni-dortmund.de  Sun Aug 31 16:15:50 2003
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sun Aug 31 15:15:18 2003
Subject: [Rd] Bug in plot() with POSIX dates (PR#4024)
In-Reply-To: <200308301438.h7UEcUJH006448@pubhealth.ku.dk>
References: <200308301438.h7UEcUJH006448@pubhealth.ku.dk>
Message-ID: <3F51F506.8020706@statistik.uni-dortmund.de>

mail@fwr.on.ca wrote:

> When I do this (highly simplified example):
> 
> plot(as.POSIXct(c("1984-01-01","1984-01-02")), c(1,2), col=2)
> 
> I get a partially red (col=2) x-axis between and including the first and last tick marks. 
> Otherwise ok. Only happens with POSIXct or POSIXlt dates.

This one has already been fixed in r-patched and r-devel (to be R-1.8.0).


> Also, POSIX dates cannot be used on the y-axis?  
> POSIXlt gives an error, and POSIXct is unformatted.  

[That's a question for r-help, not appropriate for a bug report.]

?plot.POSIXct points you to a function axis.POSIXct() to be used as in:

  plot(c(1,2), as.POSIXct(c("1984-01-01","1984-01-02")), yaxt="n")
  axis.POSIXct(2, as.POSIXct(c("1984-01-01","1984-01-02")))

Uwe Ligges


> Bruce
> 
> Using X11 V4.2
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From barbara.olbrich at zvw.uni-goettingen.de  Sun Aug 31 19:43:29 2003
From: barbara.olbrich at zvw.uni-goettingen.de (2_vz Olbrich)
Date: Sun Aug 31 18:45:16 2003
Subject: [Rd] Abwesenheitsnotiz: Approved
Message-ID: <831CCC32D5D6D211B99300902745CBD30203AE03@metis.zvw.uni-goettingen.de>

Vielen Dank fr Ihre Nachricht. Ich bin bis zum 15.09.2003 im Urlaub.
In dringenden Fllen wenden Sie sich bitte an Herrn Dr. Lffler - 
Tel. 39 - 4310 oder Frau Kraus - Tel. 39 - 2340! Vielen Dank!
 Mit freundlichem Gru                                Barbara Olbrich

