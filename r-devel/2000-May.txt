From paul@stat.auckland.ac.nz  Mon May  1 01:48:53 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 1 May 2000 12:48:53 +1200
Subject: [Rd] graphics: par(mfg=c(i,j,r,c)) (PR#529)
References: <200004281536.RAA21899@pubhealth.ku.dk> <x28zxyw72y.fsf@blueberry.kubism.ku.dk>
Message-ID: <00f701bfb307$06dc3120$175dd882@stat.auckland.ac.nz>

hi


> > x_1:20
> > y_1:20
> > #these 5 commands produce a 2x2 panel plot
> > par(mfrow=c(2,2))
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> >
> > #the following 2 commands successfully added the text 'panel[2,1]' to
> > panel[2,1]
> > par(mfg=c(2,1,2,2))
> > text(10,10,'panel[2,1]')
> >
> > #None of the following 3 command-pairs produced their intended results
for the
> > other
> > # 3 panels
> > par(mfg=c(1,2,2,2))
> > text(10,10,'panel[1,2]')
> >
> > par(mfg=c(1,1,2,2))
> > text(10,10,'panel[1,1]')
> >
> > par(mfg=c(2,2,2,2))
> > text(10,10,'panel[2,2]')
> >
> > #However, the following command-pair did as intended on the first panel
> > specified
> > # by mfg=c(2,1,2,2) above
> > par(mfg=c(2,1,2,2))
> > text(15,15,'panel[2,2]')
>
> Same thing happens on Linux. Might be something with restoring the
> coordinate transformations. Using
>
> par(mfg=c(1,1,2,2))
> plot(x,y)
> text(10,10,'panel[1,1]')
>
> *does* seem to work.


This was a clipping bug, to do with the fact that GClip only reset the
device's clipping region if the value of dd->gp.xpd changed.

I have committed a fix, which *forces* a reset of the clipping region when
par(xpd) is set.

For the record:  this just fixes the par(xpd) situation.  The problem may
resurface elsewhere, in which case it may be worth considering changing
GClip to *always* force a reset of the clipping region.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May  2 11:12:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 2 May 2000 12:12:24 +0200 (MET DST)
Subject: [Rd] rpois hangs (PR#530)
Message-ID: <200005021012.MAA10832@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> kjetikj@astro.uio.no writes:
    >> I have come across another really strange bug in rpois.  If I do >
    >> rpois(1, 1000000 * rpois(1, 10000)) sometimes it hangs, and hangs...
    >> On my XP1000 alphaev6 workstation, it seems to happen more
    >> frequently than on other machines. I started a session on an older
    PD> ........
    >> > rpois(1, 1000000 * rpois(1, 10000)) [hanging]
    >> 
    >> I think this is strange, because I've been doing this stuff a lot
    >> lately, but usually with a rather small parameter to the second
    >> rpois.

    PD> On Intel, that consistently gives

    >> rpois(1, 1000000 * rpois(1, 10000))
    PD> [1] -2147483648

    PD> I.e. signs of integer overflow. Apparently you partly get away with
    PD> it on a 64 bit machine, but I'm not surprised you get into regimes
    PD> that are not well tested by the poor developers working on hardware
    PD> from the bygone millennium....

I'm fixing this.  It's clear in the source code (rpois.c) 
that `int's are used in places where they must overflow as soon as  
lambda > ~= .Machine$integer.max

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Wed May  3 00:46:33 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Wed, 3 May 2000 01:46:33 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005022346.BAA17701@pubhealth.ku.dk>

The expressions

> x<-factor(x)

and

> class(x)<-"factor"

behave differently when x is already an ordered factor.  It may not be a
bug but it caught me out when I was trying to remove the "orderedness"
from a factor variable. The following R code illustrates the difference.
Is this difference between the 2 commands desirable?

> x<-1:3
> class(x)
NULL
> x<-ordered(x)
> class(x)
[1] "ordered" "factor"
> x<-factor(x)
> class(x)
[1] "ordered" "factor"
> class(x)<-"factor"
> class(x)
[1] "factor"

Murray Smith

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 01:05:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 2 May 2000 17:05:51 -0700 (PDT)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <200005022346.BAA17701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000 mh.smith@auckland.ac.nz wrote:

> The expressions
> 
> > x<-factor(x)
> 
> and
> 
> > class(x)<-"factor"
> 
> behave differently when x is already an ordered factor.  It may not be a
> bug but it caught me out when I was trying to remove the "orderedness"
> from a factor variable. The following R code illustrates the difference.
> Is this difference between the 2 commands desirable?

Yes.  factor, like as.factor, turns its argument into a factor. As it
already is a factor this doesn't do anything. 

class(x)<-"factor" says that x is a factor and has no other class.  In
general it is a bad idea to explicitly set the class of a variable
like this (except when you're constructing the object).  This is for two
reasons. One, you usually don't want to remove other classes. Two, x may
not be a factor, and just setting its class to "factor" may leave it in an
inconsistent state. 
Eg
> x<-1:10
> class(x)<-"factor"
> x
NULL
Levels:

In this particular case you know that x has class c("ordered","factor")
and that you want it to have class "factor", so it is harmless. It still
may be unnecessary -- eg if you just want it to have treatment contrasts
rather than polynomial contrasts you can use C() or constrasts()<-.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  3 06:49:26 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2000 07:49:26 +0200
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: Thomas Lumley's message of "Tue, 2 May 2000 17:05:51 -0700 (PDT)"
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
Message-ID: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> In this particular case you know that x has class c("ordered","factor")
> and that you want it to have class "factor", so it is harmless. It still
> may be unnecessary -- eg if you just want it to have treatment contrasts
> rather than polynomial contrasts you can use C() or constrasts()<-.

We do have a problem in the documentation:

The default for factor is ordered=FALSE according to the help page but

> factor(ordered(4:1),ordered=F)
[1] 4 3 2 1
Levels:  1 2 3 4 
> factor(ordered(4:1))
[1] 4 3 2 1
Levels:  1 < 2 < 3 < 4 

and the actual function definition says

function (x, levels = sort(unique(x), na.last = TRUE),
                    labels=levels, exclude = NA, ordered =
                    is.ordered(x))



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 08:38:45 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 09:38:45 +0200 (CEST)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
Message-ID: <14607.55173.968286.549995@lynne.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May  3 08:39:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 3 May 2000 09:39:06 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005030739.JAA19698@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 11:24:23 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 12:24:23 +0200 (CEST)
Subject: [Rd] print() "bug" for arrays with 0 columns
Message-ID: <14607.65111.375233.678442@lynne.ethz.ch>

The "bug" is that it doesn't print anything;
one might argue that this is not a bug, since such an array *is* empty, 
but I don't buy that argument.

It *does* print if #{columns} (= last dimension) > 0 :

 > array(NA,dim=c(2,0))
 > array(NA,dim=c(2,1,0))

 > array(NA,dim=c(0,2))
      [,1] [,2]
 > array(NA,dim=c(0,2,1))
 , , 1

      [,1] [,2]

 > array(NA,dim=c(0,0,1))
 , , 1


S-plus 5.1 does better for matrices 
           but worse (at least in some cases) for higher-rank arrays :

    > array(NA,dim=c(0,2))
    logical matrix: 0 rows, 2 columns. 
    > array(NA,dim=c(0,0,1))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(0,1,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,0,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,2,0))

    , , 
	 [,1] [,2] 
    [1,]   NA   NA

    , , 
	 [,1] [,2] 
    [1,]   NA   NA
    > 

---------

What should we be doing instead of the current behavior?
Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
I would want to do this in *all* cases where one of the dimensions is 0.

Other suggestions?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed May  3 11:53:41 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 3 May 2000 11:53:41 +0100 (BST)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.20.0005031147150.3072-100000@laplace>

On Wed, 3 May 2000, Martin Maechler wrote:

> What should we be doing instead of the current behavior?
> Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
> I would want to do this in *all* cases where one of the dimensions is 0.

I think this would be a good idea: I feel the current behaviour is
inconsistent.  Trying to standardise to anything else is likely to lead to
trouble.  In particular, attempting to duplicate the current behaviour for
0 rows in matrices will definitely not scale well to arrays.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 16:19:19 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 3 May 2000 08:19:19 -0700 (PDT)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005030816530.3813-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000, Martin Maechler wrote:

> The "bug" is that it doesn't print anything;
> one might argue that this is not a bug, since such an array *is* empty, 
> but I don't buy that argument.
> 

I think printing a message makes sense. The current behaviour of
zero-extent arrays and matrices is based on making the fewest possible
changes rather than on any particular user-level optimality criterion.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Wed May  3 18:15:11 2000
From: russell-lenth@uiowa.edu (russell-lenth@uiowa.edu)
Date: Wed, 3 May 2000 19:15:11 +0200 (MET DST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
Message-ID: <200005031715.TAA27669@pubhealth.ku.dk>

Dear R folks,

Additional problem... bug.report() failed, so am sending it from another
mailer.  The file it generated is appended.

Thanks

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science
The University of Iowa -- Iowa City, IA 52242  USA
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/


===== R.bug.report =============================================
Hello,

We're experiencing problems with R 1.0.1 on the HP-UX system.
The most serious one is that the random-number generators don't work:

        R> runif(100)
        Error in runif(100) : .Random.seed[0] is not a valid Normal type

        R> .Random.seed
        [1] 18851  3338  2439

Is this a subscripting error?  Strange because building it on linux
works just fine.

Smaller errors I've noticed...  The command-line history doesn't work.
It was built by our computer-support people, and I think they had
trouble with the libraries for that.  (Contact is Ben Sherman,
bsherman@divms.uiowa.edu).  Also help.start() generates a bunch of
error messages:

R> help.start()
If netscape  is already running,        it is *not* restarted,
 and you must switch to its window.
Otherwise, be patient..
/usr/pkg/R/1.0.1/lib/R/bin/help.links[29]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[30]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[49]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[50]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[53]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.



Any idea what the problems are?

Thanks

Russ Lenth

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  3 19:27:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 May 2000 19:27:57 +0100 (BST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
In-Reply-To: <200005031715.TAA27669@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005031926360.24579-100000@auk.stats>

On Wed, 3 May 2000 russell-lenth@uiowa.edu wrote:

> Dear R folks,
> 
> Additional problem... bug.report() failed, so am sending it from another
> mailer.  The file it generated is appended.
> 
> Thanks
> 
> Russ
> -- 
> Russell V. Lenth -- Department of Statistics & Actuarial Science
> The University of Iowa -- Iowa City, IA 52242  USA
> Tel (319)335-0814 -- FAX (319)335-3017
> mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/
> 
> 
> ===== R.bug.report =============================================
> Hello,
> 
> We're experiencing problems with R 1.0.1 on the HP-UX system.
> The most serious one is that the random-number generators don't work:
> 
>         R> runif(100)
>         Error in runif(100) : .Random.seed[0] is not a valid Normal type
> 
>         R> .Random.seed
>         [1] 18851  3338  2439
> 
> Is this a subscripting error?  Strange because building it on linux
> works just fine.

I think you've got a (very) old workspace being loaded there. Try starting
with R --vanilla to cross-check.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:27:32 2000
From: mh.smith@auckland.ac.nz (Murray Smith)
Date: Thu, 04 May 2000 15:27:32 +1200
Subject: [Rd] Possible bug in factor (PR#531)
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk> <14607.55173.968286.549995@lynne.ethz.ch>
Message-ID: <3910EE24.E64A79DA@auckland.ac.nz>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:25:36 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Thu, 4 May 2000 05:25:36 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005040325.FAA29602@pubhealth.ku.dk>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:19:01 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:19:01 +0200 (MET DST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
Message-ID: <200005041719.TAA11051@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat
Submission from: (NULL) (149.149.32.46)


Hello,

	Thought you might be interested.  I tried to load the package tripack
needed by the sgeostat package.  After some careful searching,  three packages
were 
found which had the same error.  Here is the output.

Mike
  
> library(acepack) Error in dyn.load(x, as.logical(local),
as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/acepack/libs/acepack.so":
  /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
>library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
:
        unable to load shared library
"/usr/lib/R/library/tripack/libs/tripack.so":
  /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
>library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/akima/libs/akima.so":
  /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:20:36 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:20:36 +0200 (MET DST)
Subject: [Rd] wsfe bug report just made (PR#534)
Message-ID: <200005041720.TAA11084@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat 6.2
Submission from: (NULL) (149.149.32.46)


Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
loaded the latest version of R as well.

Mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  4 18:40:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 May 2000 18:40:42 +0100 (BST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005041827230.26380-100000@auk.stats>

On Thu, 4 May 2000 mallen@tntech.edu wrote:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Hello,
> 
> 	Thought you might be interested.  I tried to load the package tripack
> needed by the sgeostat package.  After some careful searching,  three packages
> were 
> found which had the same error.  Here is the output.

> Mike
>   
> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
> >library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
> :
>         unable to load shared library
> "/usr/lib/R/library/tripack/libs/tripack.so":
>   /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
> >library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/akima/libs/akima.so":
>   /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

That's a symbol from the Fortran I/O code.  There is no problem on RH6.0
on R 1.0.1, where the symbol is resolved from libg2c.a.

(1) Does FLIBS in etc/Makeconf include -lg2c?

(2) If so, do those packages have Makefiles in src? If so delete them
and reinstall.  (The latest version of akima does not, but earlier versions
did.)

(3) Does lg2c include e_wsfe?  (nm -g on it).  Is it finding the right
libg2c.a?

(4) I get nm -g ..../akima.so  giving

00013c5c T e_wsfe

and so I think it should be resolved in the *.so.

Which version of RedHat?  I suspect a RedHat inconsistency here, and other
people have reported that upgrading to the gcc-2.95.2 compiler set
solved the problem.  But it might just be old package versions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  4 18:46:04 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 May 2000 12:46:04 -0500
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:19:01 +0200 (MET DST)"
References: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <6rog6m2opv.fsf@franz.stat.wisc.edu>

mallen@tntech.edu writes:

> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 

That name e_wsfe probably comes from Fortran input/output routines.
Check if some Fortran code is trying to use a WRITE statement.  I
think there was another message this morning about this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  4 21:10:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2000 22:10:21 +0200
Subject: [Rd] wsfe bug report just made (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:20:36 +0200 (MET DST)"
References: <200005041720.TAA11084@pubhealth.ku.dk>
Message-ID: <x2bt2m13gy.fsf@blueberry.kubism.ku.dk>

mallen@tntech.edu writes:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat 6.2
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
> loaded the latest version of R as well.
> 
> Mike
> 

But did you build the packages yourself and if so, how? (using which
compilers).

BTW: when you follow up on an earlier report via the web interface,
please do it as a follow-up. If you do it by mail, say for PR#533,
please include (PR#533) in the Subject line. That way things get filed
together. (I've fixed the number on this mail)



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May  5 13:59:25 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 5 May 2000 13:59:25 +0100 (BST)
Subject: [Rd] Windows version of R-devel
Message-ID: <200005051259.NAA13829@toucan.stats.ox.ac.uk>

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: 2xw8BXDeWRkQhskDXsXyCw==

I have put up a cross-compiled version of the development version of R
for Windows at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

It is cross-compiled and will be automatically updated whenever I
build a development version.

So, no guarantees, not even that it will run[1], but if you would like
a preview of the new features in the pipeline for R 1.1.0 / rw1010
please take a look.  One new feature is that the R.dll has version
information, so you can check the version you have from the Version tab
in Properties.  (Look at the R Version field for the date).

I would be particularly interested in comments on the new data entry
editor (used by fix/edit on data frames).  This is still work in progress
(in parallel with changes on X11).

I've attached the current CHANGES file.

Brian Ripley

[1] The current version does run.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; name=CHANGES; charset=us-ascii; x-unix-mode=0644
Content-Description: CHANGES
Content-MD5: 1aFidsl41SI2UU27ac9gFw==

		Windows-specific changes to R
		=============================

See the file NEWS for changes that affect all versions of R.


rw1010
======

There is now a GUI preferences editor on the Edit menu in Rgui.

A data entry editor is now implemented.  This is similar to the Unix
one (see ?dataentry) with the additional feature that right-clicking
in a cell turns it into an editable field (entered as a new value
by navigating away from the cell).

Rterm will now load and save the commands history (as Rgui does).
There is a new item on the File menu in Rgui to save the commands
history at that point in a session, and a new function savehistory()
(only applicable in Rgui and Rterm).

Colours in Rconsole can be specified as "Windows" and will be taken 
from the current Windows colour scheme. (The preferences editor will
save the actual colour, though.)

The placement of multiple pagers is now `random' (so they will not
always appear in the centre of the screen) and under the MDI interface
the pager rows and columns settings are respected.

The postscript() device can now spool plots to a printer. You will
need a suitable program to send a file to the spooler (or even to send
it to ghostscript to interpret PostScript for the printer): the RedMon
suite available from http://www.cs.wisc.edu/~ghost/rjl.html should
provide suitable tools.  See ?postscript for further details.

The new xfig() device can be used, and a port of xfig to Windows (with
an X server and the Cygwin B20.1 environment and X11R6.4 installed) is at
ftp.franken.de:/pub/win32/develop/gnuwin32/cygwin/porters/Humblet_Pierre_A/B20
as  xfig-3.2.2-cygwin-b20.1-bin.tar.gz

The R DLL and executables now have standard Windows version
information, which will appear on a Version tab of the Properties
dialog box in Explorer.

The internal unzip and the installer now use unzip5.41, not unzip5.40, and
the DLL interface is incompatible.

There are changes in the tools needed to build R (see the file INSTALL)
and those recommended for building packages from source (see the file
README.packages).

New makefile target zipdata-% to zip up data directories in packages.


rw1001
======

The installer, rwinst.exe, now checks for ZIP files as well as zip files,
as some browsers manage to map filenames to uppercase.

There are batch files  Rd2txt.bat Rdconv.bat Rdindex.bat Sd2Rd.bat
which are the equivalent of the Unix `R CMD foo' utilities mentioned in
`Writing R Extensions'.  To use these you must have R_HOME set as an
environment variable (using the form P:/R/rw1001).  There is also a
shell script Rd2dvi.sh which you can use if you have sh.exe (as
used to compile packages) and latex etc. The environment variable
XDVI sets the previewer, defaulting to xdvi.bat.

A file `Makevars' in the `src' directory of a package can be used to
add to/override the MakeDll makefile used to make foo.dll, as on Unix.
(See `Creating shared libraries', section 3.4 of `Writing R Extensions'.)

Under rare conditions (lots of very short input lines) the history buffer
could overrun and so cause crashes. This has been possible since rw0623,
but first caused reported problems in rw1000 and has now been fixed.

Certain HP printer drivers (e.g. the 6/6MP-Postscript driver) reset the
FPU and so were causing crashes.  This has been circumvented in this
version by restoring the settings before and after each page.

Building on a non-default drive should be more reliable, as Perl is
used to find the current drive.


    -------------------------------------------------------------------

	For changes prior to the release of R 1.0.0 on 29 Feb 2000
	see the file CHANGES0 in the source distribution.

--Colony_of_Beavers_524_000--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:50:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:50:40 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <39131800.C0C90A64@statistik.uni-dortmund.de>

At first:
Thank you (and the core team) again for great improvements.


> I have put up a cross-compiled version of the development version of R
> for Windows at
> 
> http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> 
> It is cross-compiled and will be automatically updated whenever I
> build a development version.

UNimportant:

The ASCII files in cross-compiled rw1010 have got "UNIX-style"
linebreaks.
E.g. README or CHANGES are not easy to read with notepad.exe .
I don't know anything about cross-compiling, but maybe it is easy to run
UNIX2DOS on ASCII-files.


> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).

Comments to this in a later mail.


> [....] 
>   ------------------------------------------------------------------------
>                 Windows-specific changes to R
>                 =============================
> 
> See the file NEWS for changes that affect all versions of R.
> 
> rw1010
> ======
> 
> There is now a GUI preferences editor on the Edit menu in Rgui.

The default path to "Save" Rconsole is neither /rw1010/etc nor the
working directory.
I think, setting the default to the working directory would be useful.


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:52:12 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:52:12 +0200
Subject: [Rd] Data Entry Editor
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <3913185C.AE3B059A@statistik.uni-dortmund.de>

Prof Brian Ripley, "[Rd] Windows version of R-devel":

> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).
> [...]
> A data entry editor is now implemented.  This is similar to the Unix
> one (see ?dataentry) with the additional feature that right-clicking
> in a cell turns it into an editable field (entered as a new value
> by navigating away from the cell).


You know most (or all) of the following points, I suppose:
(WinNT4.0)


- in help(dataentry): "... Tab moves left. ...", but moves right.

- Shift+Tab also moves right. I expected, it would move left (as in
other spreadsheets).

- If the "Data Entry Editor" is opened and you are moving the window of
another application around its window, it is "flickering" a long time.

- Using data.entry() on a existing matrix, list or data.frame, unnamed
columns after that are named "var1", "var2", etc.

- data.entry() does not work with all data.frames, e.g.:

   x <- data.frame(1:2, c("A", "B"))
   data.entry(x)
 Error in de.ncols(sdata) : wrong argument to dataentry

- data.entry() with some irregular names as "Modes" argument crashes,
e.g.:

   x <- 1
   data.entry(x, Modes = plot)
 Dr. Watson ...

- Expand existing vectors or matrices.
  It's to difficult to describe for me. Look into the examples:

   x <- 1
   data.entry(x)
   ## Klick into [2, 1]  (should be NA ?):
   0
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA


   x <- matrix(1:2, nrow=1)
   data.entry(x)
   ## Klick into [2, 1]: 
   1.#INF00e-316 
   ## and ENTER:
   1
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA




Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 20:09:07 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 21:09:07 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <39131C53.ABBDA0AE@statistik.uni-dortmund.de>

Uwe Ligges wrote:

> >
> > There is now a GUI preferences editor on the Edit menu in Rgui.
> 
> The default path to "Save" Rconsole is neither /rw1010/etc nor the
> working directory.
> I think, setting the default to the working directory would be useful.
> 

Ups! Just checked this again.
Default is set as described in ?Rconsole.  And this is absolutely
correct.
SORRY!

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  5 20:38:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 May 2000 20:38:11 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913185C.AE3B059A@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>

On Fri, 5 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley, "[Rd] Windows version of R-devel":
> 
> > I would be particularly interested in comments on the new data entry
> > editor (used by fix/edit on data frames).  This is still work in progress
> > (in parallel with changes on X11).
> > [...]
> > A data entry editor is now implemented.  This is similar to the Unix
> > one (see ?dataentry) with the additional feature that right-clicking
> > in a cell turns it into an editable field (entered as a new value
> > by navigating away from the cell).

data.entry on Unix has lots of quirks.  Thanks for the comments: as I
said, this is work in progress, and based on some already flaky code.

> You know most (or all) of the following points, I suppose:
> (WinNT4.0)
> 
> 
> - in help(dataentry): "... Tab moves left. ...", but moves right.

Thanks.

> - Shift+Tab also moves right. I expected, it would move left (as in
> other spreadsheets).

Not there, will add.

> - If the "Data Entry Editor" is opened and you are moving the window of
> another application around its window, it is "flickering" a long time.
> 
> - Using data.entry() on a existing matrix, list or data.frame, unnamed
> columns after that are named "var1", "var2", etc.

I don't see that here.

> - data.entry() does not work with all data.frames, e.g.:
> 
>    x <- data.frame(1:2, c("A", "B"))
>    data.entry(x)
>  Error in de.ncols(sdata) : wrong argument to dataentry

You should use edit and not data.entry with data frames.  That one is wrong
on Unix too.

> - data.entry() with some irregular names as "Modes" argument crashes,
> e.g.:
> 
>    x <- 1
>    data.entry(x, Modes = plot)
>  Dr. Watson ...

Crashes Unix too.

> - Expand existing vectors or matrices.
>   It's to difficult to describe for me. Look into the examples:
> 
>    x <- 1
>    data.entry(x)
>    ## Klick into [2, 1]  (should be NA ?):
>    0
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA
> 
> 
>    x <- matrix(1:2, nrow=1)
>    data.entry(x)
>    ## Klick into [2, 1]: 
>    1.#INF00e-316 
>    ## and ENTER:
>    1
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA

There's some bug there: will take a look. Also single-clicking seems
suspect at present, acting as double clicking, so this is related I think.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May  6 00:40:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2000 01:40:37 +0200
Subject: [Rd] Windows version of R-devel
In-Reply-To: Uwe Ligges's message of "Fri, 05 May 2000 20:50:40 +0200"
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <x2pur036ru.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> UNimportant:
> 
> The ASCII files in cross-compiled rw1010 have got "UNIX-style"
> linebreaks.
> E.g. README or CHANGES are not easy to read with notepad.exe .
> I don't know anything about cross-compiling, but maybe it is easy to run
> UNIX2DOS on ASCII-files.

...or switch to wordpad, which reads such files just fine.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sat May  6 05:01:51 2000
From: William.Venables@cmis.CSIRO.AU (William.Venables@cmis.CSIRO.AU)
Date: Sat, 6 May 2000 06:01:51 +0200 (MET DST)
Subject: [Rd] axis() deficiency (PR#535)
Message-ID: <200005060401.GAA26239@pubhealth.ku.dk>

This is more a deficiency than a bug.  The axis() function does
not seem to allow an axis to be placed internally on the plot (as
allowed by the argument pos to the corresponding S function).

The help information nevertheless has some reference to
"position" of the axis, (as well as side) as if there were some
choice about position other than side.

Bill Venables.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat May  6 10:18:10 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat, 06 May 2000 11:18:10 +0200
Subject: [Rd] Data Entry Editor
References: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>
Message-ID: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

> > > I would be particularly interested in comments on the new data entry
> > > editor (used by fix/edit on data frames).  This is still work in progress
> > > (in parallel with changes on X11).
> > > [...]
> > > A data entry editor is now implemented.  This is similar to the Unix
> > > one (see ?dataentry) with the additional feature that right-clicking
> > > in a cell turns it into an editable field (entered as a new value
> > > by navigating away from the cell).
> 
> data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> said, this is work in progress, and based on some already flaky code.

I know. My intention was to point out some of these "quirks".
The Editor will be very useful and already is a _great_ tool for simple
data editing.

Looks like I should tell something like this more gracefully, but my
english too bad...


> > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > columns after that are named "var1", "var2", etc.
> 
> I don't see that here.

Example:

 x <- matrix(1:6, nrow=2)
 x

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

 data.edit(x)
 ## Closing the editor without modifications:
 x

     var1 var2 var3
[1,]    1    3    5
[2,]    2    4    6

 
> > - data.entry() does not work with all data.frames, e.g.:
> >
> >    x <- data.frame(1:2, c("A", "B"))
> >    data.entry(x)
> >  Error in de.ncols(sdata) : wrong argument to dataentry
> 
> You should use edit and not data.entry with data frames.  That one is wrong
> on Unix too.

So have a look at this:
 
 x <- data.frame(1:2, c("A", "B"))
 edit(x) ## same as:  edit.data.frame(x)
 ## Click into [3, 1]

R crashes...


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May  6 11:11:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 May 2000 11:11:58 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005061105020.24002-100000@auk.stats>

On Sat, 6 May 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> 
> > > > I would be particularly interested in comments on the new data entry
> > > > editor (used by fix/edit on data frames).  This is still work in progress
> > > > (in parallel with changes on X11).
> > > > [...]
> > > > A data entry editor is now implemented.  This is similar to the Unix
> > > > one (see ?dataentry) with the additional feature that right-clicking
> > > > in a cell turns it into an editable field (entered as a new value
> > > > by navigating away from the cell).
> > 
> > data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> > said, this is work in progress, and based on some already flaky code.
> 
> I know. My intention was to point out some of these "quirks".
> The Editor will be very useful and already is a _great_ tool for simple
> data editing.
> 
> Looks like I should tell something like this more gracefully, but my
> english too bad...
> 
> 
> > > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > > columns after that are named "var1", "var2", etc.
> > 
> > I don't see that here.
> 
> Example:
> 
>  x <- matrix(1:6, nrow=2)
>  x
> 
>      [,1] [,2] [,3]
> [1,]    1    3    5
> [2,]    2    4    6
> 
>  data.edit(x)
>  ## Closing the editor without modifications:
>  x
> 
>      var1 var2 var3
> [1,]    1    3    5
> [2,]    2    4    6

Oh, I see, the names in the returned object. That's intentional.
As dara frames cannot have unnamed columns in R objects, I thought
you meant unnamed in the data editor.

> > > - data.entry() does not work with all data.frames, e.g.:
> > >
> > >    x <- data.frame(1:2, c("A", "B"))
> > >    data.entry(x)
> > >  Error in de.ncols(sdata) : wrong argument to dataentry
> > 
> > You should use edit and not data.entry with data frames.  That one is wrong
> > on Unix too.
> 
> So have a look at this:
>  
>  x <- data.frame(1:2, c("A", "B"))
>  edit(x) ## same as:  edit.data.frame(x)
>  ## Click into [3, 1]
> 
> R crashes...

I have already said there is a problem with that pre-version that the
double-click interval is set wrongly, so it normally thinks you have
double-clicked before selecting the cell. The problem is the clicking, not
being a data frame.

I'll put up a new version in a day or two.  Already there are lots of
extra features, for example variable-width (and re-sizeable) columns.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May  7 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005070515.HAA27653@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 495 *
Subject: barplot
From: skala@incoma.cz
Date: Tue, 21 Mar 2000 09:20:33 +0100 (MET)
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 528 *
Subject: Wrong SEs in predict.lm(..., type="terms")
Subject: Wrong SEs in predict.lm(..., type="terms")
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 26 Apr 2000 12:42:00 +1000 (EST)
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 530 *
Subject: rpois hangs
From: kjetikj@astro.uio.no
Date: Sun, 30 Apr 2000 21:01:02 +0200 (MET DST)
* PR# 529 *
Subject: graphics: par(mfg=c(i,j,r,c))
From: Craig.Mckinstry@pnl.gov
Date: Fri, 28 Apr 2000 17:36:35 +0200 (MET DST)
* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun May  7 12:58:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 7 May 2000 13:58:23 +0200 (MET DST)
Subject: [Rd] Problem with match.arg() (PR#536)
Message-ID: <200005071158.NAA29351@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: Version 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello again!

This is a follow-up to my message on R-help about a problem with match.arg()
I have a little more on the topic, but not much really. 

First, it was not entirely true what I wrote in r-help that I call match.arg()
in my ramp(), because ramp() just calls qamp() with runif() as argument, but 
I have found that it happens both in ramp() and qamp().

Last night, just before I went home, R crashed with a segmentation fault. 
Unfortunately, I had limit coredumpsize 0, because I seldom want core-files,
so I haven't got it. I have removed that limit now. I have not been able to 
reproduce the crash, however.

Now, for a
> last.dump
$"apply(cbind(rep(1e+05, 25000)), 1, lineprofile, 10, 100, 1, "point")"
<environment: 140e187f0>

$"FUN(newX[, i], ...)"
<environment: 1404b6608>

$"apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)), "
<environment: 1404b5460>

$"FUN(newX[, i], ...)"
<environment: 1400f6798>

$"photonsdetectedbin(ncb, intensityfromcloud(ncb, intensityfromcloud, "
<environment: 1400f55c8>

$"sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))"
<environment: 1400f53e8>

$"rpois(ncloudsbin, sensitivity * intensityfromcloud)"
<environment: 1400f5168>

$"intensityfromcloud(ncb, intensityfromcloud, exptime, amptype)"
<environment: 1400f4c68>

$"ramp(ncloudsbin, amptype)"
<environment: 1400f4920>

$"qamp(runif(n), type)"
<environment: 1400ebdc0>

$"match.arg(type)"
<environment: 1400e97f0>

$"all(arg == choices)"
<environment: 140e2d740>

attr(,"error.message")
[1] "Error in arg == choices : comparison (1) is possible only for vector
types\n"
attr(,"class")
[1] "dump.frames"

I have also inserted some print statements at some places in the code. First:
qamp <- function(p,  type=c("point", "nolens"))
{
  print(c(2,type))
  type <- match.arg(type)
  if(type == "point")
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  print(c(1,type))
  type <- match.arg(type)
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}
(I'll rewrite these to use switch eventually).

And, also in match.arg():
match.arg <- function (arg, choices) {
    if (missing(choices)) {
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
    }
    print(c(2, arg, choices))
    if (all(arg == choices)) return(choices[1])
[...]
Upon running, I get
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[thousands of these... :-) ]
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"
Error in arg == choices : comparison (1) is possible only for vector types
So, suddenly, "choices" doesn't have a value, and consequently, the error.
FWIW, I have also printed formals(qamp)$type inside qamp, and it has the 
right value. 

Now, it seems hard to reproduce, I just did 100000 runs of ramp(10000, "point")

directly with no problems. In my code, ramp is called by a function that is
called
by a function, that is... :-) 

However, the code isn't very involved, really, so if you want to try, here it
is:
ncloudsbin <- function(binno, ntotalclouds, numberofbins = 100,
                       linewidth = numberofbins / 6)
  return(ntotalclouds * dnorm(binno, sd = linewidth))

intensityfromcloud <- function(ncloudsbin, cloudintensity, exptime, amptype)
  return(cloudintensity * exptime * ramp(ncloudsbin, amptype))

photonsdetectedbin <- function(ncloudsbin, intensityfromcloud,
                               continuumintensity, exptime, amptype,
                               sensitivity)
  return(sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))
         + rgeom(1, 1 /(1 + (sensitivity * exptime * continuumintensity))))



lineprofile <- function(ntotalclouds, intensityfromcloud, continuumintensity,
                        exptime, amptype, sensitivity = 0.1, numberofbins =
100,
                        linewidth = numberofbins / 6)
{
  tf <- function(binno, ntotalclouds, intensityfromcloud, continuumintensity,
                 exptime, amptype, sensitivity, numberofbins, linewidth)
  {
    ncb <- ncloudsbin(binno, ntotalclouds, numberofbins, linewidth)
    return(photonsdetectedbin(ncb,
                   intensityfromcloud(
                            ncb, intensityfromcloud, exptime, amptype),
                   continuumintensity, exptime, amptype, sensitivity))
  }
  return(apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)),
               1, tf,
               ntotalclouds, intensityfromcloud, continuumintensity,
               exptime, amptype, sensitivity, numberofbins, linewidth)) 
}

Note that "amptype" is here the "type" of the ?amp-functions. 
I call this by e.g. 
ll25000 <- apply(cbind(rep(100000, 25000)), 1, lineprofile, 10, 100, 1,
"point")


Just an idea: I have some problems in an entirely unrelated and more involved 
piece of code where it seems like sometimes, arguments are not returned from a 
function, that is, one variable of an object suddenly has no value. I haven't
really figured out if that is a bug of mine or in R, but could it be possible 
that something in
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
doesn't get a value because there is an error in how objects are returned 
from a function?

BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
following:
Save workspace image? [y/n/c]: y
Error: NewWriteItem: unknown type 17

Well, I guess this isn't much go on, but I know you are really good at this!
By running the above code, the error happens on every run here, it is just a
matter
of letting it run for long enough. I hope it is something to start on. I have a
few
more last.dumps on file too, if they are of use.

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May  7 23:41:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 00:41:09 +0200
Subject: [Rd] Problem with match.arg() (PR#536)
In-Reply-To: kjetikj@astro.uio.no's message of "Sun, 7 May 2000 13:58:23 +0200 (MET DST)"
References: <200005071158.NAA29351@pubhealth.ku.dk>
Message-ID: <x2u2gac7ay.fsf@blueberry.kubism.ku.dk>

kjetikj@astro.uio.no writes:

> Full_Name: Kjetil Kjernsmo
> Version: Version 1.0.0
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
...
> BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
> following:
> Save workspace image? [y/n/c]: y
> Error: NewWriteItem: unknown type 17

That one was fixed in 1.0.1, I believe. (Perhaps you should upgrade
and see if the other problem goes away too... I don't see anything
obviously relevant in the NEWS file though)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May  8 15:24:20 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 May 2000 09:24:20 -0500
Subject: [Rd] P_sychics.com partnership
In-Reply-To: community@psychics.com's message of "Mon, 8 May 2000 03:53:52 -0400"
References: <200005080753.DAA21602@newlego.convoke.com>
Message-ID: <6rem7dw25n.fsf@franz.stat.wisc.edu>

	  [MM, list maintainer: The following was already bounced,
		    since I had updated my spam filters; that's why the
		    subject and the body have some "_" instead of "."   ]

community@psychics_com writes:

> Hello:
>
> We noticed you run a psychic related web site.

Hmm.  I'm not sure if we should interpret that statement regarding
r-devel as a compliment or an insult.  It could mean we answer
questions before people get around to asking them or it could mean
that our advice is about as useful and meaningful as that from other
members of the "psychic community".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Mon May  8 17:00:52 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Mon, 8 May 2000 18:00:52 +0200 (MET DST)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
Message-ID: <200005081600.SAA10511@pubhealth.ku.dk>


Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Here are the results:

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> m
     [,1] [,2]
[1,]  6.8  2.4
[2,]  2.4  8.2
R> eigen(m)
$values
[1] 19.281403  6.337993

$vectors
          [,1]       [,2]
[1,] 0.1918866  0.9967987
[2,] 0.9967987 -0.1918866


And for comparison, here is what I get on a Sun (with r-stable):

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> eigen (m)
$values
[1] 10  5

$vectors
     [,1] [,2]
[1,]  0.6  0.8
[2,]  0.8 -0.6


I found this by running "make check" which also stumbles over svd.
Please let me know how I can help to investigate this.

  -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = Under development (unstable)
 major = 1
 minor = 1.0
 year = 2000
 month = May
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  8 19:47:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 20:47:12 +0200
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <x2hfc86frj.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Hmm. We had a similar report a while back and it turned out to be
system specific. I believe the report was from Chong Gu.

> Version:
>  platform = powerpc-ibm-aix4.3.2.0
>  arch = powerpc
>  os = aix4.3.2.0
>  system = powerpc, aix4.3.2.0
>  status = Under development (unstable)
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = May
>  day = 3
>  language = R

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pflugshaupt@geobot.umnw.ethz.ch  Tue May  9 11:44:07 2000
From: pflugshaupt@geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 09 May 2000 11:44:07 +0100
Subject: [Rd] Type III Sums of Squares?
Message-ID: <B53DAA87.216D%pflugshaupt@geobot.umnw.ethz.ch>

Hello,

I'd like to propose an extension to the function summary.aov.

In Splus (2000, I don't know about other versions), summary.aov allows a
parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
Sums of Squares. 

I know I can get Type III SS in R with drop1(model), but including the
functionality into summary.aov would, in my opinion,

- yield a more usable table (for example, the residual Df are missing in the
  drop1 table)
- put it into the obvious place to look for it
- increase S-Plus compatibility (by a minor degree, I'll admit)
- not break anything else (I might be wrong here)

Not knowing how to add it to the summary.aov function, I wrote a function to
extract the SS from drop1 output and paste them into a summary.aov table
(see below), but that's of course an ugly solution. I feel that there has to
be a simpler and more efficient way, such as reusing just the required parts
of drop1 inside summary.aov. But since I cannot give the matter enough time
to do it correctly, someone with more insight into the source code would
have to do it.

If including the functionality via an additional parameter doesn't require a
whole rebuild of summary.aov, I'd like to put it as a minor item on the
wish-list for some next version of R.

Cheers (and thanks for a great piece of software)

Kaspar Pflugshaupt



"summmary.aov.t3" <-
function (aov.obj) 
{
    # ugly hack, relies on names in output
    # tables of drop1 and summary.aov
 
    s <- summary(aov.obj)
    d <- drop1(aov.obj, test = "F")
    n <- nrow(d)
    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
    s
}

-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt@geobot.umnw.ethz.ch
privat:pflugshaupt@mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue May  9 12:00:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 May 2000 13:00:52 +0200
Subject: [Rd] R-WinEdt news
Message-ID: <3917EFE4.3C3EE78@statistik.uni-dortmund.de>

Dear Windows / WinEdt users!

A new version of the "R-WinEdt package" is available now.
(I know, Prof Brian D Ripley is not "... [enthusiastic] using it
[WinEdt] with an Open Source project.")

There are a few important improvements (and some bugfixes).

If you are interested, have a look at:
  http://www.statistik.uni-dortmund.de/leute/ligges.htm
(or in a few days on CRAN, I suppose).


Requirements: 
- Windows 32bit
- R-1.0.0 or later (one feature depends on R-1.1.0, in development)
- WinEdt 5 (build 20000415 or later)


Feel free to send bug reports, comments and feature requests.


Important part of the ReadMe:
=============================================================

Features:
---------

  - Syntax-Highlighting  (and highlighted printing)
    (function index of all packages available at CRAN 
     /bin/windows/windows-NT/contrib/ ,
     last update: 05.03.2000, R-1.0.0).

  - Many R functions at the same time in the same editor.

  - Buttons / Shortcuts for simple access (one click) to:

	- Save document and source(.) into R.

	- Paste selected code from WinEdt directly to R 
          (e.g. from history)

	- Open (and update) .Rhistory (so you can reuse your last commands).
          (Only works with rw1010 (R-1.1.0, in development) or later!)

  - Templates, e.g.: for(_ in _){_}

  - Faster starting than with standard configuration (of WinEdt).

  - Features of WinEdt 
    (e.g. Delimiter Check, advanced searching, bookmarks, macros, ...).

  - Independent of another WinEdt running with "LaTeX-configuration".

===================================================================


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Tue May  9 12:29:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Tue, 09 May 2000 21:29:24 +1000
Subject: [Rd] Type III Sums of Squares?
Message-ID: <3.0.32.20000509212921.01269370@pophost.nsw.cmis.csiro.au>

I'm tempted to say "Type III Sums of Squares? Just say 'no'."  Or any other
type, for that matter.

Personally I would be strongly against this suggestion, as I was when
S-PLUS first proposed it (sadly, to no avail).  It would encourage people
to use the damn things!  More precisely it would give some unwarranted
credibility to the whole SAS malarkey of "Type X" Sums of Squares, "Types"
of estimable functions, &c &c and further obscure the essential simplicity
of linear models.

If people are silly (and cold blooded) enough to use Type III Sums of
Squares the technology is there to do it, provided they understand how to
do it and are prepared to go to a little trouble.  I see no reason to make
it easy for them.

This may sound more than a little uncompromising to Kaspar, but this is an
old issue and we have been here lots of times before.

Bill Venables.




At 11:44 AM 5/9/00 +0100, Kaspar Pflugshaupt wrote:
>Hello,
>
>I'd like to propose an extension to the function summary.aov.
>
>In Splus (2000, I don't know about other versions), summary.aov allows a
>parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
>Sums of Squares. 
>
>I know I can get Type III SS in R with drop1(model), but including the
>functionality into summary.aov would, in my opinion,
>
>- yield a more usable table (for example, the residual Df are missing in the
>  drop1 table)
>- put it into the obvious place to look for it
>- increase S-Plus compatibility (by a minor degree, I'll admit)
>- not break anything else (I might be wrong here)
>
>Not knowing how to add it to the summary.aov function, I wrote a function to
>extract the SS from drop1 output and paste them into a summary.aov table
>(see below), but that's of course an ugly solution. I feel that there has to
>be a simpler and more efficient way, such as reusing just the required parts
>of drop1 inside summary.aov. But since I cannot give the matter enough time
>to do it correctly, someone with more insight into the source code would
>have to do it.
>
>If including the functionality via an additional parameter doesn't require a
>whole rebuild of summary.aov, I'd like to put it as a minor item on the
>wish-list for some next version of R.
>
>Cheers (and thanks for a great piece of software)
>
>Kaspar Pflugshaupt
>
>
>
>"summmary.aov.t3" <-
>function (aov.obj) 
>{
>    # ugly hack, relies on names in output
>    # tables of drop1 and summary.aov
> 
>    s <- summary(aov.obj)
>    d <- drop1(aov.obj, test = "F")
>    n <- nrow(d)
>    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
>    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
>    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
>    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
>    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
>    s
>}
>
>-- 
>
>Kaspar Pflugshaupt
>Geobotanisches Institut
>Zuerichbergstr. 38
>CH-8044 Zuerich
>
>Tel. ++41 1 632 43 19
>Fax  ++41 1 632 12 15
>
>mailto:pflugshaupt@geobot.umnw.ethz.ch
>privat:pflugshaupt@mails.ch
>http://www.geobot.umnw.ethz.ch
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May  9 16:39:05 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 9 May 2000 08:39:05 -0700 (PDT)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005090837420.4639-100000@mail.biostat.washington.edu>

On Mon, 8 May 2000 tov@ece.cmu.edu wrote:

> 
> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 

When we last saw this bug it was compiler-specific.  gcc/g77 worked but
cc/f77 didn't (and I think gcc/f77 wouldn't even configure). 

I don't think we understand the bug, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alert35@us.sina.com  Wed May 10 03:58:39 2000
From: alert35@us.sina.com (alert35@us.sina.com)
Date: Tue, 09 May 2000 22:58:39 -0400
Subject: [Rd] The Contrarian - BUY ALERT                        .                ~*
Message-ID: <B0000031817@servidor2.opendat.cl>


THE CONTRARIAN           

                                                        

BUY ALERT: 



RecycleNet Corp.

Symbol - GARM (OTCBB-pink sheets)      

Recent Price - $.35

52 Week Range - $.12 - .75

Estimated Float - 4 Million

Shares Outstanding - 78 Million

   

Now that Microsoft and other Internet stocks have fallen, it's time to 

sift through the wreckage and look for treasure. As Contrarian investors, 

we've been waiting for this dynamic group to fall out of favor temporarily, 

so we can buy at discounted prices.



The following stock should be purchased for long-term capital gains:

RecycleNet Corporation is hardly a new player in the dot.com game - 

they went electronic in May 1995, after many years in a print format.  

Their founder and current Chairman, Paul Roszel, has been in the 

recycling business for over 20 years, and has vast experience with 

every type of scrap commodity. 



Recyclenet is part of the booming "B2B" business to business portion 

of the Internet. It is estimated that B2B electronic commerce will soar 

from $17 Billion in sales in 1998 to $327 Billion by 2002. Electronic 

commerce gives GARM the ability to trade with other companies all over 

the world, at very low cost. They earn money from subscribers who pay 

a monthly fee to join their Recycler's Exchange.   



What is the reason to buy now? RecycleNet should be reporting excellent 

revenues and earnings in the next quarter, the floating supply of shares is 

small, and the financial community is just starting to discover GARM. They 

have filed their Form 10 to become a reporting company with the SEC, and 

they should be emerging from their pink sheet listing soon.

   

Meanwhile, traffic at their web site is hitting record numbers (almost 2 Million 

page views per month), and is growing at over 20% monthly. With the stock 

trading at half of its February peak, The Contrarian believes that GARM can 

reach the $1.50 level near-term, with even higher prices further out. Take a 

position now while RecycleNet is on the bargain shelf. 



Disclaimer: The Contrarian has no affiliation with the issuer, and has received 

no fee from RecycleNet for this report. The Contrarian and/or its affiliates currently 

own shares of RecycleNet, and may buy or sell shares at any time after the 

dissemination of this report.  Because the publisher owns this stock, there may 

be a conflict of interest in the Contrarian's statements and opinions. The Contrarian 

is not a registered investment advisor, broker or dealer. Purchase of this stock 

may be considered speculative, and may result in the loss of some or all of any 

investment made. 



To SUBSCRIBE to future announcements or request ADDTIONAL INFORMATION 

regarding the RecycleNet opportunity, please click on the appropriate link below 

and hit send.



mailto:zone15@us.sina.com?subject=Subscribe



mailto:zone15@us.sina.com?subject=Additional-Information





******************************************

If you wish to be deleted from inclusion 

any future mailing, please click on the 

link below and hit send.

******************************************



mailto:zone15@us.sina.com?subject=delete 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 10 07:18:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 May 2000 08:18:33 +0200 (CEST)
Subject: [Rd] R and Java ? [forwarded]
Message-ID: <14616.65337.215048.847011@lynne.ethz.ch>

This is of broader interest,
and I'm not the expert.. 

------- start of forwarded message -------
From: Cheryl J Fernandes <cferna3@uic.edu>
To: maechler@stat.math.ethz.ch
Subject: Re R and Java
Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)


Hi Martin,
    I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
at the university of Illinois, at Chicago.

I have tried and tried but just cannot manage to find teh solutuon to teh
following problem.

My question is: Can R be interfaced with Java. ??

My dilemma: I'm trying to run  the RGui program in WintNT from a Java
application. i;m using runtime.exec()
It opens teh program but after that nothing happens. After opening teh
program i'm passing some commands to R via java's process
OutputStreamWriter. But it does NOT respond to any of teh commands not
even by giving an exception. 

Coudl u please let me know if i can pass commandline commands to RGui from
within Java or are there special API's that are available. I know for a
fact taht Java does NOT have API's for R. It does have special interface
API for major programs
like C. Excel, MS-Word 

Any help would be greatly appreciated.

The code for the above is:


Runtime  rt = Runtime.getRuntime();
String strCmdTmp =""; 
strCmdTmp =  "Z:\\R\\rw1000\\bin\\Rgui ";
   
Process jproc= 	rt.exec(strCmdTmp);    	    
OutputStreamWriter o = new OutputStreamWriter(jproc.getOutputStream()); 

o.write("a<-c(4,5)\n");
o.write("mean(a)\n");
o.write("quit(\"no\")\n"); 
o.flush();
        	
String line=null;

BufferedReader reader = new BufferedReader(new
InputStreamReader(jproc.getInputStream()));
while((line = reader.readLine())!=null)
System.out.println(" The line is:  " +line);


Thanks in advance,

Cheryl Fernandes                 (Home): (312) 432 4396, (630) 834 3796 
1926 W Harrison Street,          (Office): (312) 996 4605        
Medical Center Apartments,
Apt# 1202,
Chicago, IL 60612

email: cferna3@uic.edu
       cfernand@eecs.uic.edu

------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May 10 16:27:39 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 10 May 2000 08:27:39 -0700 (PDT)
Subject: [Rd] R and Java ? [forwarded]
In-Reply-To: <14616.65337.215048.847011@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005100825290.1359-100000@mail.biostat.washington.edu>

On Wed, 10 May 2000, Martin Maechler wrote:

> This is of broader interest,
> and I'm not the expert.. 
> 
> ------- start of forwarded message -------
> From: Cheryl J Fernandes <cferna3@uic.edu>
> To: maechler@stat.math.ethz.ch
> Subject: Re R and Java
> Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)
> 
> 
> Hi Martin,
>     I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
> at the university of Illinois, at Chicago.
> 
> I have tried and tried but just cannot manage to find teh solutuon to teh
> following problem.
> 
> My question is: Can R be interfaced with Java. ??
> 
> My dilemma: I'm trying to run  the RGui program in WintNT from a Java
> application. i;m using runtime.exec()
> It opens teh program but after that nothing happens. After opening teh
> program i'm passing some commands to R via java's process
> OutputStreamWriter. But it does NOT respond to any of teh commands not
> even by giving an exception. 
> 
> Coudl u please let me know if i can pass commandline commands to RGui from
> within Java or are there special API's that are available. I know for a
> fact taht Java does NOT have API's for R. It does have special interface
> API for major programs
> like C. Excel, MS-Word 
> 

You could probably use the COM interface to R, which is available from
CRAN under 'non-standard extensions'.  It's still under development but it
does some things.  I believe there is a set of classes for calling COM
from Java under Windows.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From denis@mercury.cor.epa.gov  Wed May 10 23:00:23 2000
From: denis@mercury.cor.epa.gov (denis@mercury.cor.epa.gov)
Date: Thu, 11 May 2000 00:00:23 +0200 (MET DST)
Subject: [Rd] no $method from as.hclust (PR#538)
Message-ID: <200005102200.AAA05996@pubhealth.ku.dk>

as.hclust returns objects with only 6 of the standard 7 
components of class hclust, leaving out "method", therefore
being incompatible with applications looking for all
7 components.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 11 13:53:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 May 2000 13:53:21 +0100 (BST)
Subject: [Rd] scale factors/overdispersion in GLM: possible bug?
Message-ID: <200005111253.NAA03787@toucan.stats.ox.ac.uk>

> Date: Wed, 19 Apr 2000 10:46:45 -0400 (EDT)
> From: Ben Bolker <ben@zoo.ufl.edu>

A belated reply: I have been away and then busy (including on this).

>   I've been poking around with GLMs (on which I am *not* an expert) on
> behalf of a student, particularly binomial (standard logit link) nested
> models with overdispersion.
> 
>   I have one possible bug to report (but I'm not confident enough to be
> *sure* it's a bug); one comment on the general inconsistency that seems to
> afflict the various functions for dealing with overdispersion in GLMs
> (anova.glm, drop1.glm, summary.glm); and one statistical query that maybe
> someone would answer if they're feeling generous.
> 
>   1.  possible bug:
>   in drop1.glm() with scale != 0, R seems to divide by the dispersion
> parameter twice:
> 
>  first (if family != "gaussian") it sets
> 
>  loglik <- dev/dispersion
> 
>  then (if test == "Chisq") it calculates
> 
>      dev <- loglik - loglik[1]
>      dev[nas] <- 1 - pchisq(dev[nas]/dispersion, aod$Df[nas])
> 
> (in addition, I suppose this could now be just 
> pchisq(...,lower.tail=FALSE) for greater precision)
> 
>   Is this a bug or am I missing something?

A bug.  Using the appropriate tail for accuracy is irrelevant, though.

>   2.  There seems to be a fair amount of variability in how drop1.glm,
> anova.glm, stat.anova, summary.glm deal with dispersion parameters:
>   summary.glm() has an optional parameter called "dispersion"
>   stat.anova() has a parameter called "scale", which it doesn't even use
> if test=="Chisq"
>   anova.glm calls stat.anova() with an automatically calculated scale
> parameter (sum(object$weights*object$residuals^2)/object$df.residual), not
> allowing a user-defined scale
>   drop1.glm() has an optional parameter called "scale"
> 
>   I would mess around and try to fix these myself, but (1) there seem to
> be some design decisions to make here, (2) I'm not sufficiently sure of
> myself to want to break things.

I've worked over all these for 1.1.0.  Be careful in how much sameness
to expect, though. drop1 has an argument called 'scale', and is
generic.  So drop1.glm must have the same name even though `dispersion'
might be more appropriate.

>   3. There seems to be a certain variety of advice around in how to deal
> with overdispersion in GLMs.  One could (1) calculate the scale parameter
> from the residuals (either residual deviance/residual df or Pearson
> chi-sq/residual df) and feed that back into the analysis; (2) use
> quasi-likelihood with logit link and variance mu(1-mu); (3) use a form of
> F-test, as suggested by Crawley (which I guess has something to do with
> the fact that the scale parameter is estimated, not really known).  Are
> these equivalent, or approximately equivalent?  Does anyone have a
> favorite reference on the subject?  (I've been looking at V&R3, Crawley's
> "GLIM for Ecologists", and Lindsey's GLM book -- I haven't acquired Dobson
> or McCullagh and Nelder yet).

Over-dispersion is discussed at length in

Collett, D. (1991) Modelling Binary Data

and somewhat less discursively in

Cox & Snell (1989) Analysing Binary Data
McCullagh & Nelder (1989, section 4.5)
Aitkin, Anderson, Francis, Hinde (1983) Statistical Modelling in GLIM

amongst others.  Almost all of this is binomial models, but Aitkin et al
do consider Poisson.

Basically, all find some justification for a model with variance phi >=
1 times that given by a binomial or poisson family. For X_i ~
binomial(n, p_i), n > 1 not depending on i, this is known as the
Williams model in some circles.  So people since Williams (and I seem
to remember before) have been fitting such models and estimating phi by
residual deviance/residual df.  That is a quasi-likelihood procedure,
as even where real models exist, the glm is not giving the MLE.

To make sense of this I have introduced two new families, quasibinomial
and quasipoisson, that use the Williams model, and now 
binomial and Poisson never allow phi to be estimated.  And for the Williams
model there is an "F" test option to add1 and drop1 (and if you
use "F" with a binomial or poisson it tells you it is really using
the quasi-version).   This applies to summary.glm, predict.glm, anova.glm,
add1.glm, drop1.glm.  (As quasi models have no likelihood, they
have no AIC either, and so step will not work for them.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:03:30 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:03:30 +0200 (MET DST)
Subject: [Rd] Documentation of par(ann) (PR#539)
Message-ID: <200005121403.QAA23841@pubhealth.ku.dk>

The on-line documentation for the 'ann' argument under 
par(), states "If set to 'FALSE'...".  However, this 
parameter shows up as a numeric on my machine, not as a 
logical.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:04:26 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:04:26 +0200 (MET DST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
Message-ID: <200005121404.QAA23856@pubhealth.ku.dk>

The on-line documentation for par() refers to a 'gamma'
argument.
However, if 'par()' is invoked, there is no gamma argument.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:05:56 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:05:56 +0200 (MET DST)
Subject: [Rd] Typo in documentation for order() (PR#541)
Message-ID: <200005121405.QAA23903@pubhealth.ku.dk>

The documentation for 'order()' has the following sentence:

`sort.list' is the same, using only one argument put
allowing
     partial sorting.

Should "put" be "but" or possibly "'partial'"?

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:07:57 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:07:57 +0200 (MET DST)
Subject: [Rd] Inconsistent behavior of par() agruments on lines() (PR#542)
Message-ID: <200005121407.QAA23953@pubhealth.ku.dk>

Setting argument 'lty' via par() to dased lines does not
affect 
how lines are drawn with 'lines()' -- they remain solid. 
Two
possible fixes:
1) Have 'lty' affect the behavior of 'lines()'
2) Leave behavior as is, indicating in the documentation
that
the default is '1' and not 'par("lty")'.

Note:  Option 1 is more consistent with how the 'col'
argument to
par() is handled.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 15:57:23 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 15:57:23 +0100 (BST)
Subject: [Rd] Documentation of par(ann) (PR#539)
In-Reply-To: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121553480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for the 'ann' argument under 
> par(), states "If set to 'FALSE'...".  However, this 
> parameter shows up as a numeric on my machine, not as a 
> logical.

So? Try it

par(ann=FALSE)
plot(1:10)

works as documented.  It happens to use an integer internally.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29

You could upgrade to 1.0.1 before bug-reporting.


>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:04:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:04:02 +0100 (BST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
Unix it also appears. It is the second-last parameter.

Are you absolutely sure about this?  In any case, please upgrade to 1.0.1,
the current version.

The devga device on Windows is one of the few places where this parameter
actually does anything.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:05:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:05:21 +0100 (BST)
Subject: [Rd] Typo in documentation for order() (PR#541)
In-Reply-To: <200005121405.QAA23903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121604480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The documentation for 'order()' has the following sentence:
> 
> `sort.list' is the same, using only one argument put
> allowing
>      partial sorting.
> 
> Should "put" be "but" or possibly "'partial'"?

The first. Squashed now, thank you.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 12 16:27:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 2000 17:27:33 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: Prof Brian D Ripley's message of "Fri, 12 May 2000 16:04:02 +0100 (BST)"
References: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>
Message-ID: <x2em77ss9m.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Fri, 12 May 2000 salwin@mitretek.org wrote:
> 
> > The on-line documentation for par() refers to a 'gamma'
> > argument.
> > However, if 'par()' is invoked, there is no gamma argument.
> 
> There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
> Unix it also appears. It is the second-last parameter.

..curiously out of alphabetical sequence with the others (tlc is out
of sequence too). We might want to fix, even though we never promised
to display lists in alphabetical order: options() is completely
jumbled in that respect, for instance.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vilhuber@yorku.ca  Fri May 12 16:55:20 2000
From: vilhuber@yorku.ca (vilhuber@yorku.ca)
Date: Fri, 12 May 2000 17:55:20 +0200 (MET DST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
Message-ID: <200005121555.RAA24885@pubhealth.ku.dk>

Full_Name: Lars Vilhuber
Version: 1.0.1
OS: Linux (SuSE 6.3)
Submission from: (NULL) (148.129.143.2)


Problem arises when X11 headers not present.

- When running "./configure", X11 is not found, and "no" appears on the log
messages.
However, at compile time, the X11 headers are still referenced, and the
compilation 
bombs. I presume that either configuration should end with an error message, or

compilation ( makefiles or src files ) should respect the absence of X11
headers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 17:50:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 17:50:37 +0100 (BST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
In-Reply-To: <200005121555.RAA24885@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121748530.22244-100000@auk.stats>

On Fri, 12 May 2000 vilhuber@yorku.ca wrote:

> Full_Name: Lars Vilhuber
> Version: 1.0.1
> OS: Linux (SuSE 6.3)
> Submission from: (NULL) (148.129.143.2)
> 
> 
> Problem arises when X11 headers not present.
> 
> - When running "./configure", X11 is not found, and "no" appears on the log
> messages.
> However, at compile time, the X11 headers are still referenced, and the
> compilation 
> bombs. I presume that either configuration should end with an error message, or
> 
> compilation ( makefiles or src files ) should respect the absence of X11
> headers.

This is already fixed for 1.1.0: please try the R-devel snapshot.
(It certainly works with --without-x, and we would certainly be interested
to know if that is actually needed.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:35:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:35:57 +0200
Subject: [Rd] Documentation of par(ann) (PR#539)
References: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <391C16CD.A8D4D71@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for the 'ann' argument under
> par(), states "If set to 'FALSE'...".  However, this
> parameter shows up as a numeric on my machine, not as a
> logical.

par("ann"=FALSE) works as expected (and described) on NT4.0, R-1.0.1.
With par("ann") you get the value "translated" to numeric.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:37:42 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:37:42 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
References: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <391C1736.972181D@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

Hm. Here OK (R-1.0.1, NT4.0):

> par("gamma")
[1] 1

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jean.Thioulouse@biomserv.univ-lyon1.fr  Mon May 15 09:50:52 2000
From: Jean.Thioulouse@biomserv.univ-lyon1.fr (Jean Thioulouse)
Date: Mon, 15 May 2000 10:50:52 +0200
Subject: [Rd] Macintosh version of R
Message-ID: <p04310106b5456acbc26d@[134.214.92.69]>

Hello

I would like to have some information about the current status
of the Macintosh version of R. Is someone working on it ? Is it
possible to obtain the source of the Macintosh interface (0.64
version) ?

Thank you
Jean

-- 
Jean Thioulouse - Laboratoire de Biometrie et Biologie Evolutive
Universite Lyon 1 - Bat  711 - 69622 Villeurbanne Cedex - France
Fax: (33) 4 78 89 27 19              Tel/Fax: (33) 4 72 43 27 56
          http://pbil.univ-lyon1.fr/ADE-4/JTHome.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon May 15 15:26:11 2000
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151426.QAA13624@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.0.1
OS: Linux RH 6.1
Submission from: (NULL) (158.37.102.52)


I am trying to use pythag() from src/appl in a .Call() function.

pythag seems to be missing from the ROUTINES list in appl - putting
it in solved the problem:

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> dyn.load("pythagtry.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/rsb/tmp/pythagtry.so":
  /home/rsb/tmp/pythagtry.so: undefined symbol: pythag
> is.loaded("pythag")
[1] FALSE
-----------------------------------------
/* pythagtry.c */
#include <R.h>
#include <Rdefines.h>
#include <R_ext/Applic.h>

SEXP pytry(SEXP x, SEXP y)
{
	SEXP ans;
	double xa, xb;
	xa = NUMERIC_POINTER(x)[0];
	xb = NUMERIC_POINTER(y)[0];
	PROTECT(ans = NEW_NUMERIC(1));
	NUMERIC_POINTER(ans)[0] = pythag(xa, xb);
	UNPROTECT(1);
	return(ans);
}
-------------------------------------------------------------
$ R_HOME=/usr/local/lib/R gcc -I/usr/local/lib/R/include -c pythagtry.c
$ gcc -shared -o pythagtry.so pythagtry.o
-----------------------------------------------------------
added:

C_FUNCTION(pythag)

to /usr/local/src/R-1.0.1/src/appl/ROUTINES

make
make install

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> is.loaded("pythag")
[1] TRUE
> dyn.load("pythagtry.so")
> .Call("pytry", x, y)
[1] 1.414214




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 15 15:29:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 15 May 2000 16:29:30 +0200 (MET DST)
Subject: [Rd] Segmentation Fault of unknown cause (PR#545)
Message-ID: <200005151429.QAA13653@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm afraid I have another obscure bug. 
R has just crashed with a segmentation fault. 
This time, I have even failed to reproduce it, but fortunately, 
I have a core dump. It's at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/core>

The call I did was 
log10(quantile(chisqtests5M11001, c(0.05, 0.95)))
where chisqtests5M11001 is an array of length 1500 
(it's an array of p-values produced by the chisq.test, but I 
doubt that it is relevant). 

I did lots of strange things prior to the crash, some even 
involving for-loops, but I can't tell what is relevant. Anyway,
a transcript of the session is at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/crash.Rt>

That's all I've got.... 

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 15 17:25:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 May 2000 17:25:00 +0100 (BST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151625.RAA06867@toucan.stats.ox.ac.uk>


> From: Roger.Bivand@nhh.no
> Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Roger Bivand
> Version: 1.0.1
> OS: Linux RH 6.1
> Submission from: (NULL) (158.37.102.52)
> 
> 
> I am trying to use pythag() from src/appl in a .Call() function.
> 
> pythag seems to be missing from the ROUTINES list in appl - putting
> it in solved the problem:

But that is not the purpose of that file.  As it says, it is for
internal .C and .Fortran entry points, and its entries get put in the
search table for such entries.  And pythag is not a suitable entry
point (its arguments are not pointers, it returns a value ...).

The real problem seems to be that nothing internal to R calls pythag,
and so pythag.o does not get loaded when R.bin is built.  Thus I don't
know what it is doing in the R source.  The solution is to make one of
the modules in src/main call it via a dummy routine, or just to link it
with your own code.

If we want it in, we should merge pythag.c with something else in 
src/appl.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Thu May 18 09:57:08 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Thu, 18 May 2000 10:57:08 +0200
Subject: [Rd] attach (S-style)?
Message-ID: <3.0.5.32.20000518105708.00975a10@mail.wsl.ch>

Hi everyone,

Being new to the crowd of R users I am wondering what the equivalent of  

attach("/home/bla/hoffmann/R/.RData",2) 

 (S style) is in R.

What I want is a split of .RData repositories. One in a central place where I keep functions and interesting stuff important for all work I am doing, an several others which contain stuff of an dividual project only. When I start in a project directory I want to make available the central stuff. If I do it like in S+ I am getting and rightly so:

Error in attach("/home/woodstock/hoffmann/R/.RData", 2) : 
	attach only works for lists and data frames

What is the trick to use in R?  

To successfully read R-exts.texi which I hope contains steps to do it I need a way to make it readable to 
my latex command which refuses to rpoceed past line 1229 with
-----------
(R-exts.texi
LaTeX2e <1996/12/01> patch level 1
Babel <v3.6h> and hyphenation patterns for american, german, loaded.
(texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
! Undefined control sequence.
\resetmathfonts ...nt 2 = \tensy \textfont \itfam 
                                                  = \tenit \textfont \slfam ...
l.1229 \textfonts
--------------

Thanks for your help.
--Christian

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 18 10:19:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 18 May 2000 10:19:49 +0100 (BST)
Subject: [Rd] attach (S-style)?
Message-ID: <200005180919.KAA00833@toucan.stats.ox.ac.uk>

> Date: Thu, 18 May 2000 10:57:08 +0200
> From: Christian Hoffmann <christian.hoffmann@wsl.ch>
> 

[...]

> To successfully read R-exts.texi which I hope contains steps to do it I need a 
way to make it readable to 
> my latex command which refuses to rpoceed past line 1229 with
> -----------
> (R-exts.texi
> LaTeX2e <1996/12/01> patch level 1
> Babel <v3.6h> and hyphenation patterns for american, german, loaded.
> (texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
> ! Undefined control sequence.
> \resetmathfonts ...nt 2 = \tensy \textfont \itfam 
>                                                   = \tenit \textfont \slfam 
...
> l.1229 \textfonts

It's texinfo (.texi) not LaTeX, and is processed by tex not latex
via texi2dvi.   Just

make R-exts.dvi

or

make R-exts.pdf

should process it for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:42:04 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190842.KAA28916@pubhealth.ku.dk>

I was surprised to find that the variance of a scalar, using
var(), is NA.  Surely this should be zero?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:HistoryMatch, package:zmatrix, package:stepfun, package:Simulator, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 09:48:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 09:48:53 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190848.JAA22344@toucan.stats.ox.ac.uk>

> From: J.C.Rougier@durham.ac.uk
> Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?
> 

Do you mean a vector of length 1? (S has no scalars.)  No, it should be
NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
no idea at all of the variability from a single sample.

S gives NA too.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:57:10 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005190952290.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I was surprised to find that the variance of a scalar, using
> > var(), is NA.  Surely this should be zero?
> > 
> 
> Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> no idea at all of the variability from a single sample.

I thought that might be the reason.  There is no mention of using n-1
rather than n in the denominator on the help page.  Perhaps that might be
added?

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:06:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:06:32 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 19 May 2000 10:42:04 +0200 (MET DST)"
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <x2k8gqlxif.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

I don't think so. There's a divide by zero involved.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 19 10:01:29 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 19 May 2000 11:01:29 +0200
Subject: [Rd] variance of a scalar (PR#546)
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <392502E9.134C262B@statistik.uni-dortmund.de>


J.C.Rougier@durham.ac.uk wrote:
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

1. This is ok. var(.) is defined as:
   var(x)= (1 / (n - 1)) * sum(x - mean(x))^2
                 ^^^^^
If you has got a scalar: n - 1 = 0, so it is undefined!

> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0

You should upgrade to 1.0.1

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 10:04:09 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 10:04:09 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190904.KAA22592@toucan.stats.ox.ac.uk>


> Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] variance of a scalar (PR#546)
> 
> On Fri, 19 May 2000, Prof Brian Ripley wrote:
> 
> > > I was surprised to find that the variance of a scalar, using
> > > var(), is NA.  Surely this should be zero?
> > > 
> > 
> > Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> > NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> > no idea at all of the variability from a single sample.
> 
> I thought that might be the reason.  There is no mention of using n-1
> rather than n in the denominator on the help page.  Perhaps that might be
> added?

Um. What professional statistics package uses n, then?  Are you
suggesting that there is serious room for doubt?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 10:11:00 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 10:11:00 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005191006140.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

Well, I may not be the gold standard for statisticians but I just called
var(x) when x was the population, not a sample.  Unfortunately I did this
without thinking as it corresponds closely to my notes.  So although a
statistics package might use n-1 without question, I think a statistical
computing environment could be a little more flexible, at least in its
documentation.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:19:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:19:16 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: Prof Brian Ripley's message of "Fri, 19 May 2000 10:04:09 +0100 (BST)"
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <x2hfbulwx7.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

SAS does, actually. Option VARDEF can be N or DF in PROC MEANS (and/or
PROC UNIVARIATE). [And pardon the shouting, SAS just looks that way..]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri May 19 10:51:26 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 19 May 2000 19:51:26 +1000
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <3.0.32.20000519195123.0127d690@pophost.nsw.cmis.csiro.au>

At 10:04 AM 5/19/00 +0100, Prof Brian Ripley wrote:
>
>> On Fri, 19 May 2000, Prof Brian Ripley wrote:
>> 
>> 
>> I thought that might be the reason.  There is no mention of using n-1
>> rather than n in the denominator on the help page.  Perhaps that might be
>> added?
>
>Um. What professional statistics package uses n, then?  Are you
>suggesting that there is serious room for doubt?
>

S-PLUS, actually.  Not in this context, of course, but princomp() when
given a data matrix uses n as the divisor for the variance matrix.  Amazing
stuff.  This in turn is translated into the eigenvalues (principal
variances) of course.  I was really puzzled about this while I was trying
to explain to one of my colleagues what a simple generic calculation
principal components really was and I was getting the same coefficients as
princomp but slightly different variances.  In a flash of inspiration I
tried multiplying them by n/(n-1) and hey presto!

Of course the case for an n-1 divisor is much less convincing in this
context because even though it gives an unbiased (REML, maximum marginal
likelihood, ...) estimator of the variance, the eigenvalues are certainly
not unbiased estimators of the eigenvalues of the population variance
matrix (but it can't hurt, either!).

Bill.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri May 19 14:31:00 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 May 2000 15:31:00 +0200 (CEST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
References: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <14629.16916.782701.119727@lynne.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: J.C.Rougier@durham.ac.uk Date: Fri, 19 May 2000 10:42:04 +0200
    >> (MET DST)
    >> 
    >> I was surprised to find that the variance of a scalar, using var(),
    >> is NA.  Surely this should be zero?

    BDR> Do you mean a vector of length 1? (S has no scalars.)  No, it
    BDR> should be NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical
    BDR> terms, one has no idea at all of the variability from a single
    BDR> sample.

    BDR> S gives NA too.

Now I'm becoming really picky ....

There *is* a bug[let] but not the way you thought :
As we have seen,  when  length(x) == 1,
var(x) should be semantically equivalent to  
	      (x - x)^2 / (1 - 1) == 0 / 0 = NaN
as Brian says above.

Now the bug is:  R returns NA, and not NaN.
whereas e.g. S-plus 5.1 (and probably all the other
 ``non-R S language implementations'') return NaN, but it's not immediately
visible since only R prints NaN's as "NaN" whereas ``S'' prints NaNs as "NA".

I'm about to fix this bug (in src/main/cov.c) and also mention the
"1/(n-1)" denominator in the documentation, since it seems that (some)one could
think of other denominators.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 19 20:11:52 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 19 May 2000 21:11:52 +0200 (MET DST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
Message-ID: <200005191911.VAA02042@pubhealth.ku.dk>

(i.e. my version Solaris, see below...)

Note that system() is not only implemented quite system-dependently
(which you'd very much expect!) but also Unix and Windows have quite
different arguments apart from the first two.

Hence all the following is ``Unix-only'' :


A user stumbled across this when using read.table.url(.) on a platform
where no "wget" is installed: 

The data is read ok, but an ugly message appears *before* the command is
completed :
	  -------------------
	  sh: wget: not found
	  -------------------
which made the user believe that the data wasn't read properly.

The problem is easily tracked to the system(..) call in download.file()
{which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
and found that on our Solaris environment, 
the ignore.stderr argument does not seem to have any effect, i.e.

  > system("bla", ignore.stderr = TRUE)

gives the same as  system("bla"), namely
  
  sh: bla: not found
 
On my Linux environment,  ignore.stderr works as advertized.

Further note that  help(system)  should probably also say something about which
shell may or may not be used (I think we decided that we want it to be `sh'
on Unix).


--please do not edit the information below-- {did anyway ;=)}

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1

 --- either R-devel of today, or also 1.0.1 ---

 year = 2000
 month = May
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 19 22:46:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 19 May 2000 22:46:09 +0100 (BST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
In-Reply-To: <200005191911.VAA02042@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005192223470.4118-100000@auk.stats>

On Fri, 19 May 2000 maechler@stat.math.ethz.ch wrote:

> (i.e. my version Solaris, see below...)
> 
> Note that system() is not only implemented quite system-dependently
> (which you'd very much expect!) but also Unix and Windows have quite
> different arguments apart from the first two.
> 
> Hence all the following is ``Unix-only'' :
> 
> 
> A user stumbled across this when using read.table.url(.) on a platform
> where no "wget" is installed: 
> 
> The data is read ok, but an ugly message appears *before* the command is
> completed :
> 	  -------------------
> 	  sh: wget: not found
> 	  -------------------
> which made the user believe that the data wasn't read properly.
> 
> The problem is easily tracked to the system(..) call in download.file()
> {which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
> and found that on our Solaris environment, 
> the ignore.stderr argument does not seem to have any effect, i.e.
> 
>   > system("bla", ignore.stderr = TRUE)
> 
> gives the same as  system("bla"), namely
>   
>   sh: bla: not found

Under sh you cannot redirect the output from a command until the command
is running.  That is, you are not redirecting the error messages from sh,
only from the command.  Unless the command runs, ignore.stderr has no
effect.

> On my Linux environment,  ignore.stderr works as advertized.

Depends how you read the advertising.

> Further note that  help(system)  should probably also say something about which
> shell may or may not be used (I think we decided that we want it to be `sh'
> on Unix).

Yes, and you almost certainly got bash *not* sh on your Linux, and that
behaves differently.  I think you will find that a closer sh clone (such as
ash) does show the error message.  That some Linux systems claim to have sh
and do not is a major compatibility problem in writing shell scripts and
Makefiles, as we keep finding.

BTW, Solaris will use ksh not sh for the shell if it needs to be POSIX
compatible. And ksh behaves like bash in this respect.


I believe that to define this portably we are going to have to do something
a lot more complicated than accept what the system() call gives us. Are you
volunteering, Martin?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sat May 20 00:45:53 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Sat, 20 May 2000 01:45:53 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005192345.BAA02795@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.01
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


The character "*" displays too high in comparison to the graph space and other
characters in the plot. Consider:

> a_-0.15
> plot(c(0,100),c(0,1))
> for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> abline(1,0)

This may be a well understood effect of using display characters, but the "o" in
the
original plot call falls in the right place.

Thanks again for R-it's getting me a doctorate,
adrian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat May 20 03:24:29 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 20 May 2000 14:24:29 +1200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: <200005192345.BAA02795@pubhealth.ku.dk>; from acuster@nature.berkeley.edu on Sat, May 20, 2000 at 01:45:53AM +0200
References: <200005192345.BAA02795@pubhealth.ku.dk>
Message-ID: <20000520142429.A20866@stat1.stat.auckland.ac.nz>

On Sat, May 20, 2000 at 01:45:53AM +0200, acuster@nature.berkeley.edu wrote:
> 
> Thanks again for R-it's getting me a doctorate,
> adrian

Jeepers, which function does that?  [ We've got few students here
who be keen to know :-) ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005210515.HAA02760@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 548 *
Subject: graphics character misplaced
From: acuster@nature.berkeley.edu
Date: Sat, 20 May 2000 01:45:51 +0200 (MET DST)
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 538 *
Subject: no $method from as.hclust
From: Denis White <denis@mercury.cor.epa.gov>
Date: Wed, 10 May 2000 15:00:05 -0700 (PDT)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 542 *
Subject: Inconsistent behavior of par() agruments on lines()
From: Art Salwin <salwin@mitretek.org>
Date: Fri, 12 May 2000 10:08:22 -0400
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
* PR# 546 *
Subject:  variance of a scalar 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 19 May 2000 09:42:20 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 21 08:07:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 21 May 2000 09:07:13 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005210707.JAA09508@pubhealth.ku.dk>

Adrian Custer wrote:

> The character "*" displays too high in comparison to the graph space and
> other characters in the plot. Consider:
> 
> > a_-0.15
> > plot(c(0,100),c(0,1))
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > abline(1,0)

Can anyone reproduce this?  On my Solaris system the placing looks spot on
on X11 and postscript, so it looks to me to be a system-specific
font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
7.1beta)), and I am presumming that the X11 device was meant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May 21 11:09:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2000 12:09:38 +0200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 21 May 2000 09:07:13 +0200 (MET DST)"
References: <200005210707.JAA09508@pubhealth.ku.dk>
Message-ID: <x2ya549pul.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Adrian Custer wrote:
> 
> > The character "*" displays too high in comparison to the graph space and
> > other characters in the plot. Consider:
> > 
> > > a_-0.15
> > > plot(c(0,100),c(0,1))
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > > abline(1,0)
> 
> Can anyone reproduce this?  On my Solaris system the placing looks spot on
> on X11 and postscript, so it looks to me to be a system-specific
> font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
> 7.1beta)), and I am presumming that the X11 device was meant.

I don't see it either with current development sources. We used to get
that effect because "*" is a superscript asterisk (not a centered
operator) in the relevant X11 font, but Paul/Ross fixed that at some
point. Does example(points) look right on this system?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sun May 21 23:13:41 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005212213.AAA13185@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.0.1
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


This is an update to bug report 548.

The bug had two parts on my system:
1) the gnome-interface puts the "*" mark in the wrong place. It could be
superscript 
or something else. From the Docs the gnome-interface claimed just to re-display
the 
base R but it is obviously doing something more and breaking the display.

1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
was 
off everytime by a pixel today it is fine. 

I have contacted the person in charge of the gnome-Interface port so this should
be 
considered a bug of that unless I can start reproducing the X11() offset.

Thanks,
adrian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Mon May 22 02:22:04 2000
From: mcneney@cs.sfu.ca (mcneney@cs.sfu.ca)
Date: Mon, 22 May 2000 03:22:04 +0200 (MET DST)
Subject: [Rd] memory problem with DEC C (was: problem with glm (PR#452))
Message-ID: <200005220122.DAA14150@pubhealth.ku.dk>

Just to update: What I originally thought was a glm problem appears to be
a memory problem that occurs only when R is compiled with the DEC C
compiler. Some variables that are still in use get clobbered during
garbage collection. No problems if I compile with gcc though. I've made
some attempts to see if I can identify a specific compiler optimization
that is responsible, but so far no luck.

Brad

On 5 Mar 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I don't know if the following is relevant, but for some reason I've found 
> > I can avoid this particular problem if I make a small change in lapply in 
> > its main loop.  Around line 50 of apply.c:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         VECTOR(ans)[i] = eval(R_fcall, rho);
> >     }
> > 
> > if I change it to make an assignment to a
> > temporary variable first everything seems to work fine:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         tem = eval(R_fcall, rho);
> >         VECTOR(ans)[i] = tem;
> >     }
> > 
> > hasn't given me any NULLs yet. 
> 
> Now that is pretty darn odd... Looks quite a bit like a compiler bug.
> Those two pieces of code should be equivalent as far as I can see.
> 
> One thing that you might do: objdump -dS apply.o allows you to see
> what code the compiler generates for the two cases. Also, of course,
> you can try reducing the level of optimization.
> 
> 
> Alternatively, the mere addition of "tem" changes the local memory use
> of that function so that something that got clobbered before doesn't
> get clobbered now.
> 
> The effect doesn't seem to be present on Intels:
> 
> > dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> > any(sapply(lapply(dfr,summary),is.null))
> [1] FALSE
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 03:39:33 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Mon, 22 May 2000 04:39:33 +0200 (MET DST)
Subject: [Rd] Inconsistencies (PR#550)
Message-ID: <200005220239.EAA14342@pubhealth.ku.dk>

Dear all,

I was playing around with some C-code that I dynamically linked to R
and noticed the following inconsistency:

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> is.integer(dat)
[1] FALSE
> dat <- matrix(1:9,3,3)
> is.double(dat)
[1] FALSE
> is.integer(dat)
[1] TRUE

How did I find out?  I passed `dat' to a double * in the C-code and
printed out the matrix from C.  But in the .C() call I just passed
down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
course the print out from the C routine was garbage, but since I used
        dat <- matrix(1,3,3)
first, I was confused.  Note that R says that `dat' is.double!  But it
seems to pass dat to C as an integer matrix nevertheless!  Using the
second matrix it became clear to me why I saw garbage being printed
out from the C-routine.  My question is now why does the first
`is.double(dat)' returns `TRUE'?

Cheers,

        Berwin


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon May 22 04:30:12 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 22 May 2000 13:30:12 +1000
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Fri, May 19, 2000 at 10:04:09AM +0100
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <20000522133012.C18391@ftoomsh.progsoc.uts.edu.au>

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

I remember that my Casio calculator (in statistics mode) had some way
of setting the denominator to be n-1 or n so obviously someone at Casio
decided to cover both options. I was always taught to use n-1 but
I've been too lazy to work through the derivations and figure out why
one is better than the other.

I agree that a single sample cannot tell you anything about the variance
which is a good enough reason to convince me to keep using n-1.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 07:22:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 22 May 2000 07:22:22 +0100 (BST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <200005220239.EAA14342@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>

On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:

> Dear all,
> 
> I was playing around with some C-code that I dynamically linked to R
> and noticed the following inconsistency:
> 
> > dat <- matrix(1,3,3)
> > is.double(dat)
> [1] TRUE
> > is.integer(dat)
> [1] FALSE
> > dat <- matrix(1:9,3,3)
> > is.double(dat)
> [1] FALSE
> > is.integer(dat)
> [1] TRUE
> 
> How did I find out?  I passed `dat' to a double * in the C-code and
> printed out the matrix from C.  But in the .C() call I just passed
> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
> course the print out from the C routine was garbage, but since I used
>         dat <- matrix(1,3,3)
> first, I was confused.  Note that R says that `dat' is.double!  But it
> seems to pass dat to C as an integer matrix nevertheless!  Using the
> second matrix it became clear to me why I saw garbage being printed
> out from the C-routine.  My question is now why does the first
> `is.double(dat)' returns `TRUE'?

Because it is double!   This refers to the storage mode, not the
mathematical properties of the object's content.

I can find no inconsistency.  1 is double, and 1:9 is integer (just as
in S-PLUS 3.x).  Why should this not be the case?  Currently the
only time in R you are likely to get an integer result is a : or seq
expression, but you are not supposed to rely on this.  (Since I know
you have a copy, this is exactly the problem of the wam example
on page 203 of `S Prograaming'.)

For example, if printit.c is

void printit(double *x, int *n)
{
    int i;
    
    for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
}

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> invisible(.C("printit", dat, as.integer(9)))
[0] 1.000000
[1] 1.000000
[2] 1.000000
[3] 1.000000
[4] 1.000000
[5] 1.000000
[6] 1.000000
[7] 1.000000
[8] 1.000000
>  dat <- matrix(1:9,3,3)
> invisible(.C("printit", dat, as.integer(9)))
[0] 0.000000
[1] 0.000000
[2] 0.000000
[3] 0.000000
[4] 0.000000
[5] 0.000000
[6] 0.000000
[7] 0.000000
[8] 0.000000

as I would expect.

I think the moral is that you cannot assume the storage mode of
expressions returned by R (or by S).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 09:45:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 09:45:35 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220845.JAA11255@toucan.stats.ox.ac.uk>


> From: acuster@nature.berkeley.edu
> Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> X-Keywords: 
> 
> Full_Name: Adrian Custer
> Version: 1.0.1
> OS: gnu-linux (mandrake 7.1beta)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> This is an update to bug report 548.

Please put PR#548 in the subject line for a follow-up. And *please*
mention critical facts like which graphics device you were using.

> The bug had two parts on my system:
> 1) the gnome-interface puts the "*" mark in the wrong place. It could be
> superscript 
> or something else. From the Docs the gnome-interface claimed just to 
re-display
> the 
> base R but it is obviously doing something more and breaking the display.

Can you tell us please where you read that in the docs, so we can
correct it?  It is a completely separate graphics device, to be called
gtk() from 1.1.0 (and the X11-based x11() will also be available).


> 1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
> was 
> off everytime by a pixel today it is fine. 

*one* pixel?  I don't think you can expect one-pixel accuracy, not
least as where the centre of `*' is in the font used on my screen is
unclear to less than about half pixel.  Accuracy to one pixel seems fine
on a screen device, provided it is consistent.  You can expect greatest
accuracy on the hardcopy devices, where it may matter.

> I have contacted the person in charge of the gnome-Interface port so this 
should
> be 
> considered a bug of that unless I can start reproducing the X11() offset.

If you mean Lyndon Drake, he has moved and as far as we know is no
longer working on R. 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 09:45:51 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Mon, 22 May 2000 16:45:51 +0800 (WST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
References: <200005220239.EAA14342@pubhealth.ku.dk>
 <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
Message-ID: <14632.62399.496963.693726@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
  >> Dear all,
  >> 
  >> I was playing around with some C-code that I dynamically linked to R
  >> and noticed the following inconsistency:

  BDR> I can find no inconsistency.  [...]
  BDR> For example, if printit.c is

  BDR> void printit(double *x, int *n)
  BDR> {
  BDR>     int i;
    
  BDR>     for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
  BDR> }

  >> dat <- matrix(1,3,3)
  >> is.double(dat)
  BDR> [1] TRUE
  >> invisible(.C("printit", dat, as.integer(9)))
  BDR> [0] 1.000000 [...]
Sorry, mea culpa.  My C-code was a bit more complicated and I know
realise that I had screwed up within the C-routine.  By the time the
C-code was fixed, I had an `as.double(dat)' in my call to .C but was
still under the impression that the problems where due to the fact
that R past a matrix that it claimed to be in storage mode double as
an integer matrix to the C-routine....  

  BDR> I think the moral is that you cannot assume the storage mode of
  BDR> expressions returned by R (or by S).
I guess the moral is rather that I should believe that I found a bug
in R when I am fooling around with some code around midnight ;-/  Or
that I should check better for the sources of my alleged bugs.....

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 10:48:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 22 May 2000 11:48:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220948.LAA19498@pubhealth.ku.dk>

A little more followup.  The gtk() device uses gdk_string_width to
find the character extents. That seems undocumented anywhere in the
gtk+ sources.  It is returning the maximal descent for the font for all
input strings on my system.  Looking at the current gtk+-1.2.7 sources it
appears to call XTextExtents, and that _should_ give the
string descent.

Since gdk fonts are private opaque structures I see no way around this.
Without any documentation I do not even know if it is a gdk bug (although
I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 22 11:22:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
Subject: integer functions {was [Rd] Inconsistencies (PR#550)}
Message-ID: <200005221022.MAA20192@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
    >> Dear all,
    >> 
    >> I was playing around with some C-code that I dynamically linked to R
    >> and noticed the following inconsistency:

    > > dat <- matrix(1,3,3)
    > > is.double(dat)
    > [1] TRUE
    > > is.integer(dat)
    > [1] FALSE
    > > dat <- matrix(1:9,3,3)
    > > is.double(dat)
    > [1] FALSE
    > > is.integer(dat)
    > [1] TRUE

    >> How did I find out?  I passed `dat' to a double * in the C-code and
    >> printed out the matrix from C.  But in the .C() call I just passed
    >> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
    >> course the print out from the C routine was garbage, but since I used
    >>         dat <- matrix(1,3,3)
    >> first, I was confused.  Note that R says
    >> that `dat' is.double!  But it seems to pass dat to C as an integer
    >> matrix nevertheless!  Using the second matrix it became clear to me
    >> why I saw garbage being printed out from the C-routine.  My question
    >> is now why does the first `is.double(dat)' returns `TRUE'?

    BDR> Because it is double!  This refers to the storage mode, not the
    BDR> mathematical properties of the object's content.

exactly!  
Please (everyone who needs, probably Berwin doesn't) *do*
study  ?storage.mode  and  ?mode with some care

    BDR> I can find no inconsistency.  1 is double, and 1:9 is integer
    BDR> (just as in S-PLUS 3.x).  Why should this not be the case?

    BDR> Currently the only time in R you are likely to get an integer
    BDR> result is a : or seq expression, but you are not supposed to rely
    BDR> on this.

Well, "Values:"  in ?seq  says

 >> Value:
 >>      The result is of `mode' `"integer"' if `from' is (numerically
 >>      equal to an) integer.

on which I do rely..
Also, there are other functions guaranteeing an integer (or NA / NULL)
result, at least

 o length()
 o dim()
 o ncol(), nrow()
---
 o  min() and max()  --- when all args are integers

 o  "+" and "-" if the args are integers
    -- however that might change: Currently, there's no overflow detection!


    BDR>   (Since I know you have a copy, this is exactly the
    BDR> problem of the wam example on page 203 of `S Prograaming'.)

    BDR> For example, if printit.c is

        <...  instructive example...>

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 22 12:06:50 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 22 May 2000 13:06:50 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
Message-ID: <200005221106.NAA20961@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Ouch, another obscure bug...
I just had a bus error crash, with a core dump, a small one this time.
Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
I had done a few simulations, and done a chisq.test() on them.
These simulations also write about 190MB's to file, but
I have no idea whether that is relevant, and those data are not
used. The calls I do look like this:
> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
"point")))
> ch1

	 Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 463.8359, df = 300, p-value = 3.726e-09 

> ch1$observed

Process R bus error (core dumped) at Mon May 22 12:38:49 2000


....so it doesn't crash when I print the whole object, but when I 
a vector of the object, it crashes... And, restarting R, it doesn't
happen.

I heard the sysadm who did the installation had some problems,
I don't know what it was about, but if I understood him correctly,
it only happened when he tuned for EV6, so it shouldn't be a problem now, 
I guess....

Kjetil


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 14:14:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 14:14:40 +0100 (BST)
Subject: integer functions {was [Rd] Inconsistencies }
Message-ID: <200005221314.OAA13936@toucan.stats.ox.ac.uk>


> Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

[...]

>     BDR> Currently the only time in R you are likely to get an integer
>     BDR> result is a : or seq expression, but you are not supposed to rely
>     BDR> on this.
> 
> Well, "Values:"  in ?seq  says
> 
>  >> Value:
>  >>      The result is of `mode' `"integer"' if `from' is (numerically
>  >>      equal to an) integer.
> 
> on which I do rely..

My point was the reverse, though. You are not supposed to rely on
everything else giving double.  That's what the wam example in S3 did.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May 22 15:13:34 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221413.QAA24813@pubhealth.ku.dk>

character arguments with call_R do not work except in the first
position. (In other positions, they just yield a single blank
character.)
 The error is at line 1858 of dotcode.c which should be changed from
STRING(CAR(pcall))[i]=s;
to
STRING(CAR(pcall))[0]=s;
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 15:28:53 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 16:28:53 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
Message-ID: <14633.17445.635566.303613@gargle.gargle.HOWL>

Some of you may have seen the  pythag() part in the R API definition in 
"Writing R Extensions" (source = doc/manual/R-exts.texinfo).

or followed the report and Prof. Brian Ripley's answer about pythag()'s
availability from R's binary.

As we say in above manual

  >>      `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
  >>      destructive underflow: for example it still works when both A and
  >>      B are between `1e200' and `1e300' (in IEEE double precision).

--
"Problem" is : 
The GNU C library (and other C libraries ??)
defines a function	 
	 double hypot(double x, double y)

with identical semantics to our pythag() from above
The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
(in the section "Exponentiation and Logarithms"):

=============================
>>  - Function: double hypot (double X, double Y)
>>  - Function: float hypotf (float X, float Y)
>>  - Function: long double hypotl (long double X, long double Y)
>>      These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>      the hypotenuse of a right triangle with sides of length X and Y,
>>      or the distance of the point (X, Y) from the origin.  Using this
>>      function instead of the direct formula is wise, since the error is
>>      much smaller.  See also the function `cabs' in *Note Absolute
>>      Value::.

Further "problem": In R, we are already partially relying on the
availability of the hypot() function :

At the toplevel of R-1.0.1's source
   grep -rwn hypot . 
   ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
gives

./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
./src/appl/fortran.c:111:    return hypot(z->r, z->i);
./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
./src/main/plot.c:2455:double hypot(double x, double y)
./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

---------

My "theses"
   
   o when hypot() is available, it should be used since it will be 
     efficient, precise, etc.
   o when it's not available, our "configure" should find out, and set
     corresponding "HAVE_HYPOT" to `false'.
   o in that case, we should provide a hypot()  {for the above code to
     work!}, and we probably should use (an improvement?) of the current
     pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
   o Hence, we should drop pythag() from the R API and rather say that we
     provide hypot() whenever the system's C library 
     (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
     provide it.

   o I think an R function  hypot() would also make sense.

We'll be glad to hear feedback about this!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 15:48:52 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 15:48:52 +0100 (BST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221448.PAA14128@toucan.stats.ox.ac.uk>


> From: jlindsey@alpha.luc.ac.be
> Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] character arguments with call_R (PR#552)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> character arguments with call_R do not work except in the first
> position. (In other positions, they just yield a single blank
> character.)
>  The error is at line 1858 of dotcode.c which should be changed from
> STRING(CAR(pcall))[i]=s;
> to
> STRING(CAR(pcall))[0]=s;
>   Jim

It's much worse than that, as this happens n times inside a loop.
It looks to me as if the code has fairly thoroughly confused character
strings and character vectors.  I suspect it should be more like

	    for (j = 0 ; j < n ; j++) {
		s = allocSExp(CHARSXP);
		CHAR(s) = ((char**)(arguments[i]))[j];
		LENGTH(s) = strlen(CHAR(s));
		STRING(CAR(pcall))[j] = s;
	    }

or, more consisely

	    for (j = 0 ; j < n ; j++) {
		cptr = (char**)arguments[i]
		STRING(CAR(pcall))[j] = mkChar(cptr[j])
	    }

Do you have a succinct example on which we could test out solutions?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 15:52:59 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
In-Reply-To: <200005220948.LAA19498@pubhealth.ku.dk>
Message-ID: <XFMail.000522165259.plummer@iarc.fr>

On 22-May-00 ripley@stats.ox.ac.uk wrote:
> A little more followup.  The gtk() device uses gdk_string_width to
> find the character extents. That seems undocumented anywhere in the
> gtk+ sources.  It is returning the maximal descent for the font for all
> input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> appears to call XTextExtents, and that _should_ give the
> string descent.
> 
> Since gdk fonts are private opaque structures I see no way around this.
> Without any documentation I do not even know if it is a gdk bug (although
> I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.


The best thing that can be said about the GNOME API documentation is
that it is getting better.  Documentation on glib, gdk and gtk+ is
available from here:

http://developer.gnome.org/doc/API/

but is still quite sparse.  

This is not, in fact, a gdk bug, but is due to a permutation in
the arguments of gdk_string_extents in GTK_MetricInfo 
(file src/gnome/devGTK.c). It currently reads

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iascent, &idescent, &iwidth);

but should be

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iwidth, &iascent, &idescent);

See
http://developer.gnome.org/doc/API/gdk/gdk-fonts.html#GDK-STRING-EXTENTS

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 16:03:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 17:03:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14633.19510.222102.346537@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Some of you may have seen the pythag() part in the R API definition
    MM> in "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    MM> or followed the report and Prof. Brian Ripley's answer about
    MM> pythag()'s availability from R's binary.

    MM> As we say in above manual

     >>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
     >>> destructive underflow: for example it still works when both A and B
     >>> are between `1e200' and `1e300' (in IEEE double precision).

    MM> -- "Problem" is : The GNU C library (and other C libraries ??)
    MM> defines a function double hypot(double x, double y)

    MM> with identical semantics to our pythag() from above The Info
    MM> (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains (in the
    MM> section "Exponentiation and Logarithms"):

    ....

I forgot to mention  that  src/appl/eigen.f  (stemming from EISPACK)
defines (and uses) a fortran DOUBLE PRECISION PYTHAG(A, B) function
equivalently to  src/appl/pythag.c  {currently (R-devel) in .../approx.c},
and hence R's eigen() function actually does rely on pythag().

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 16:24:21 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221524.RAA25471@pubhealth.ku.dk>

Trying to use text() with very large cex parameter crashes
R when using the X11() device

X11()
plot(1,1,type="n")
text(1,1,"foo", cex=10)

This also crashes R

points(1,1,pch="A", cex=10)

presumably because we are trying to load a font that doesn't
exist, but I haven't looked into it.

Martyn


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status =
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 22 16:40:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 22 May 2000 11:40:58 -0400 (EDT)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005221524.RAA25471@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>


  Works here with 1.0.0 (RH Linux 6.0)!

  R --vanilla with

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

On Mon, 22 May 2000 plummer@iarc.fr wrote:

> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.
> 
> Martyn
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status =
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 17:00:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 18:00:28 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
References: <200005221524.RAA25471@pubhealth.ku.dk>
 <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <14633.22940.230520.996840@gargle.gargle.HOWL>

>>>>> "Ben" == Ben Bolker <ben@zoo.ufl.edu> writes:

    Ben>   Works here with 1.0.0 (RH Linux 6.0)!

    Ben>   R --vanilla with

    Ben> Version: platform = i686-unknown-linux arch = i686 os = linux
    Ben> system = i686, linux status = major = 1 minor = 0.0 year = 2000
    Ben> month = February day = 29 language = R

Works also for me, RH 6.2 Linux; both with 1.0.1 and R-devel [of today];
also work for R running on Solaris (2.5.1, X11R6.3) with DISPLAY on Linux.

Martin

    Ben> On Mon, 22 May 2000 plummer@iarc.fr wrote:

    >> Trying to use text() with very large cex parameter crashes R when
    >> using the X11() device
    >> 
    >> X11()
    >> plot(1,1,type="n")
    >> text(1,1,"foo", cex=10)
    >> 
    >> This also crashes R
    >> 
    >> points(1,1,pch="A", cex=10)
    >> 
    >> presumably because we are trying to load a font that doesn't exist,
    >> but I haven't looked into it.
    >> 
    >> Martyn
    >> 
    >> --please do not edit the information below--
    >> 
    >> Version: platform = i686-unknown-linux arch = i686 os = linux system
    >> = i686, linux status = major = 1 minor = 0.1 year = 2000 month =
    >> April day = 14 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:36:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:36:04 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005221736.SAA14400@toucan.stats.ox.ac.uk>

> Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: ripley@stats.ox.ac.uk
> Subject: Re: [Rd] RE:bug 548 graphics '*' (PR#549)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> On 22-May-00 ripley@stats.ox.ac.uk wrote:
> > A little more followup.  The gtk() device uses gdk_string_width to
> > find the character extents. That seems undocumented anywhere in the
> > gtk+ sources.  It is returning the maximal descent for the font for all
> > input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> > appears to call XTextExtents, and that _should_ give the
> > string descent.
> > 
> > Since gdk fonts are private opaque structures I see no way around this.
> > Without any documentation I do not even know if it is a gdk bug (although
> > I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.
> 
> 
> The best thing that can be said about the GNOME API documentation is
> that it is getting better.  Documentation on glib, gdk and gtk+ is
> available from here:
> 
> http://developer.gnome.org/doc/API/
> 
> but is still quite sparse.  
> 
> This is not, in fact, a gdk bug, but is due to a permutation in
> the arguments of gdk_string_extents in GTK_MetricInfo 
> (file src/gnome/devGTK.c). It currently reads
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iascent, &idescent, &iwidth);
> 
> but should be
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iwidth, &iascent, &idescent);
> 

Great, thanks, that solves it.  Now I was looking for a man page
for gdk_string_extents to find out what the arguments were supposed to mean,
but never found one.

Bug fixed for 1.1.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:46:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:46:49 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221746.SAA14454@toucan.stats.ox.ac.uk>


> From: plummer@iarc.fr
> Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.

As a matter of interest, does it crash R-devel?  I added some X11 error
handlers a couple of weeks ago, so X11 errors should no longer crash R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 02:26:05 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 11:26:05 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>

I realise that there is an existing system for documenting datasets
but what I would like is to be able to whack a few lines of commentary
at the top of a file which contains data -- not full documentation but
just an outline for myself to remind me of what I was doing or what
settings I was using, etc.

I was thinking that the read.table() function might be extended to
support an option allowing it to throw away lines that begin with
the # character (same comment character as R source, shell script, perl, etc)
thus allowing data files with comments added to them. For example:

------------------------------------->8---
# Testing the force of my linear motor
# v = supply voltage (reading from built-in meter on bench supply)
# x = distance of movement (NA indicates that bar was dropped)
# m = mass of bar
"v" "x" "m"
 1   2   3
 4   5   6
 7   8   9
# I might have bumped the table for this one
10  NA  12

etc...
------------------------------------->8---

Then you can load it up with:

mytable <- read.table( "data", header=TRUE, comment=TRUE )

and then proceed as normal.

I'm sure it would be a very small change, if other people think
it might be useful then I'll try and make a patch to support it.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 07:05:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 07:05:37 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>

On Tue, 23 May 2000, Telford Tendys wrote:

> I realise that there is an existing system for documenting datasets
> but what I would like is to be able to whack a few lines of commentary
> at the top of a file which contains data -- not full documentation but
> just an outline for myself to remind me of what I was doing or what
> settings I was using, etc.
> 
> I was thinking that the read.table() function might be extended to
> support an option allowing it to throw away lines that begin with
> the # character (same comment character as R source, shell script, perl, etc)
> thus allowing data files with comments added to them. For example:
> 
> ------------------------------------->8---
> # Testing the force of my linear motor
> # v = supply voltage (reading from built-in meter on bench supply)
> # x = distance of movement (NA indicates that bar was dropped)
> # m = mass of bar
> "v" "x" "m"
>  1   2   3
>  4   5   6
>  7   8   9
> # I might have bumped the table for this one
> 10  NA  12
> 
> etc...
> ------------------------------------->8---
> 
> Then you can load it up with:
> 
> mytable <- read.table( "data", header=TRUE, comment=TRUE )
> 
> and then proceed as normal.
> 
> I'm sure it would be a very small change, if other people think
> it might be useful then I'll try and make a patch to support it.

I am sure it is not `a very small change', I'm afraid.  Basically, input is
not done in a line-oriented way. read.table uses scan and count.fields.  
Both are internal functions that work at a char-by-char level.  You will
need to add logic to skip lines, and for your rule that means adding logic
to know that # is first in a line.

My suggestion would be to allow # anywhere on the line to skip the
rest of the line, and to make sure that # inside quotes did nothing.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 08:47:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 17:47:06 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>; from ripley@stats.ox.ac.uk on Tue, May 23, 2000 at 07:05:37AM +0100
References: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <20000523174706.A14617@ftoomsh.progsoc.uts.edu.au>

> I am sure it is not `a very small change', I'm afraid.  Basically, input is
> not done in a line-oriented way. read.table uses scan and count.fields.  
> Both are internal functions that work at a char-by-char level.  You will
> need to add logic to skip lines, and for your rule that means adding logic
> to know that # is first in a line.

I just wanted to see if was a good idea in principle but thanks for
pointing out that read.table is not line oriented, I have not even started
to work through what would actually be required.

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Well it should be whatever is consistent with R source code unless there
is a good reason to make it otherwise, that minimises the learning required
for new users. Doing a quick test I see that allowing a comment to start
anywhere on the line is correct:

> x <- "# comment" # put the value "# comment" into x
> x
[1] "# comment"
> 

So I'm perfectly happy with that.

If the comment option defaulted to FALSE then it would be safe against
breaking existing code (I suppose everyone knew that already).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue May 23 09:40:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 23 May 2000 10:40:25 +0200
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <000901bfc492$8b53d6a0$a9021aac@joelschlaegel>


Prof Brian D Ripley wrote:

> I am sure it is not `a very small change', I'm afraid.
> Basically, input is
> not done in a line-oriented way. read.table uses scan and
> count.fields.
> Both are internal functions that work at a char-by-char
> level.  You will
> need to add logic to skip lines, and for your rule that means
> adding logic
> to know that # is first in a line.

I agree that the basic problem is that R hasn't a linewise data import
utility. I guess, the reason for this is that anything working linewise has
to be written entirely in C for performance reasons, which means loosing the
flexibility of the R language.

However, there might be a way to solve this: processing batches of lines
instead of single lines. If we import m of n (m << n) lines at a time as a
string vector, we could use R vector functions to preprocess these strings
and then scan those. Thus scan() needed an extension to allow taking it's
input from string vectors. Or, perhaps better, we need seperate access to
the two functionalities of scan, (1) physical reading and (2) parsing.

Then read.table could be rewritten to work on batches of lines, with a
parameter nbatch=1000, and an optional parameter preprocess.func=NULL
which - if used - would return a preprocessed vector of strings, e.g.

  ThroughAwayCommentLines <- function(s)s[-grep("^#", s)]

to realize Telfors Tendys suggestion, or

  RemoveTrailingComments <- function(s){
    s <- gsub("#.*", "", s)
    s[nchar(s) > 0]
  }

for Prof. Ripley's suggestion

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Final comment: any solution having # skip the rest of the line MUST be
optional, otherwise R looses it's ability to
import general ASCII-data. You never know whether some people use special
characters in their strings.

Any comments welcome


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 10:12:11 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <XFMail.000523111211.plummer@iarc.fr>

Well, I wasn't wrong. Here's R with DEBUG_X11 switched on

> plot(1,1,type="n")
loading:
-*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
success
> points(1,1,pch="A", cex=10)
loading:
-*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
failure
loading:
-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
failure

Program received signal SIGSEGV, Segmentation fault.
0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
940             XSetFont(display, xd->wgc, xd->font->fid);
(gdb) p xd->font
$1 = (XFontStruct *) 0x0

RLoadFont ignores the fact that it has failed to load a font
and returns a null pointer. 

If this works for you it is perhaps because you have the size 34 font
(the last resort) on your system.

R-devel gives the same result.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 11:56:43 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 11:56:43 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <200005231056.LAA15932@toucan.stats.ox.ac.uk>


> From: "Jens Oehlschlgel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Tue, 23 May 2000 10:40:25 +0200

[...]

> for Prof. Ripley's suggestion
> 
> > My suggestion would be to allow # anywhere on the line to skip the
> > rest of the line, and to make sure that # inside quotes did nothing.
> 
> Final comment: any solution having # skip the rest of the line MUST be
> optional, otherwise R looses it's ability to
> import general ASCII-data. You never know whether some people use special
> characters in their strings.

Yes, Telford Tendys had comment=FALSE as the default for that argument.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 12:21:15 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 12:21:15 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005231121.MAA15967@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Ben Bolker <ben@zoo.ufl.edu>, Uwe Ligges 
<ligges@statistik.uni-dortmund.de>, Martin Maechler 
<maechler@stat.math.ethz.ch>, Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Subject: Re: [Rd] text() with large cex parameter crashes X11() (PR#553)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> Well, I wasn't wrong. Here's R with DEBUG_X11 switched on
> 
> > plot(1,1,type="n")
> loading:
> -*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
> success
> > points(1,1,pch="A", cex=10)
> loading:
> -*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
> failure
> loading:
> -*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
> failure
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
> 940             XSetFont(display, xd->wgc, xd->font->fid);
> (gdb) p xd->font
> $1 = (XFontStruct *) 0x0
> 
> RLoadFont ignores the fact that it has failed to load a font
> and returns a null pointer. 

I think it is SetFont that ignores the null pointer.

> If this works for you it is perhaps because you have the size 34 font
> (the last resort) on your system.

I at least have Helvetica in type 1 and so do have 120pt Helevetica
(and have used such a system all the time I have been using X11).

> R-devel gives the same result.

What should we do in this circumstance?  Drop back to fixed?  Try a
smaller size?   What sizes do you have?   A quick look around on an R6.0
system suggests that it has 8,10,12,14,18,24, which is what Solaris
has as bitmaps too.  And at this point basefontsize must have succeeded.
So should we:

try 34 then 24 then basefontsize.

Should we issue a warning if the displayed fontsize differs by more than
10%, say, from that requested?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 14:30:21 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 15:30:21 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005231121.MAA15967@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.000523153021.plummer@iarc.fr>

On 23-May-00 Prof Brian Ripley wrote:
>> RLoadFont ignores the fact that it has failed to load a font
>> and returns a null pointer. 
> 
> I think it is SetFont that ignores the null pointer.

Yes.

>> If this works for you it is perhaps because you have the size 34 font
>> (the last resort) on your system.
> 
> I at least have Helvetica in type 1 and so do have 120pt Helevetica
> (and have used such a system all the time I have been using X11).
> 
>> R-devel gives the same result.

Apparently I had an error in the configuration file for the font server
(due to the fact that RPM kept the old configuration file when I upgraded)
As a result, all my 75dpi fonts were considered non-scaleable by the
font server. I have now fixed this and everything works.
 
> What should we do in this circumstance?  Drop back to fixed?  Try a
> smaller size?   What sizes do you have?   A quick look around on an R6.0
> system suggests that it has 8,10,12,14,18,24, which is what Solaris
> has as bitmaps too.  And at this point basefontsize must have succeeded.
> So should we:
> 
> try 34 then 24 then basefontsize.
> 
> Should we issue a warning if the displayed fontsize differs by more than
> 10%, say, from that requested?

This seems like a good plan.  If failure to load a large font is indicative
of a problem with the X setup then it would be a good idea to issue a warning.

Sorry to trouble everyone over what is basically a problem with my setup.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Tue May 23 19:33:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Tue, 23 May 2000 20:33:30 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
Message-ID: <200005231833.UAA06834@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm getting strange numbers from a random number generation 
function again. I was wondering if it could be the same problem 
as I reported in (PR#439). 

I'm using the functions (some comments deleted for brevity):

qamp <- function(p,  type=c("point", "nolens"))
{
  if(type == "point")  
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}

...to generate random numbers. I think there might be something wrong
with runif, possibly the same problem as rpois had. 

More details:
I'm calling this function a number of times through a function
intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
                               exptime, ...)
{
  amps <- ramp(ncloudsbin, amptype)
  write(c(max(amps), sum(amps), sum(amps - 1)),
        "lastamps.dat", ncolumns=3, append=T)
  return(cloudintensity * exptime * amps)
}
...that is called a lot. As you can see, I'm writing the maximum 
(among other things) of the generated numbers to file 
(this is a preliminary hack, for a (quite unrelated) sanity 
check I'm running). 
Now, it turns out that in 8080 maxima, the number 14654.29 appears
twice. Things like that happen, this _is_ statistics,
and my pdf doesn't fall that fast, but you know...
I thought I'd report this sooner the better... 
I made a histogram of the logarithm of the maxima for the 8080 points
and put it at <URL:http://www.astro.uio.no/~kjetikj/tmp/ampsmax.ps>

BTW, update on my other reports: 

The problem I had with match.arg() (PR#536) was in the same piece of code,
and unfortunately, it seems to happen with 1.0.1 as well.

About my crashes, PR#545 and PR#551, I had another crash today, and I 
have a 250MB (Warning! :-)) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core2>
I was doing a summary of a rather strange data.frame, I was just curious 
as to what summary would say to such a thing. I don't know if it would 
be of any use. Uwe suggested that it might be a hardware problem, and I 
have contacted my sysadm, and a check will hopefully be performed on Friday.
If it would be useful to see my actions prior to the crash, please let me 
know.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 20:03:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 20:03:30 +0100 (BST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <200005231833.UAA06834@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>

On Tue, 23 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Hello!
> 
> I'm getting strange numbers from a random number generation 
> function again. I was wondering if it could be the same problem 
> as I reported in (PR#439). 
> 
> I'm using the functions (some comments deleted for brevity):
> 
> qamp <- function(p,  type=c("point", "nolens"))
> {
>   if(type == "point")  
>     return(1 / (2 * sqrt(1 - p)))
>   else return(1)
> }
>   
> ramp <- function(n, type=c("point", "nolens"))
> {
>   if(type == "point")
>     return(qamp(runif(n), type))
>   else return(rep(1, n))
> }
> 
> ...to generate random numbers. I think there might be something wrong
> with runif, possibly the same problem as rpois had. 

Not at all, that problem is fixed.

> More details:
> I'm calling this function a number of times through a function
> intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
>                                exptime, ...)
> {
>   amps <- ramp(ncloudsbin, amptype)
>   write(c(max(amps), sum(amps), sum(amps - 1)),
>         "lastamps.dat", ncolumns=3, append=T)
>   return(cloudintensity * exptime * amps)
> }
> ...that is called a lot. As you can see, I'm writing the maximum 
> (among other things) of the generated numbers to file 
> (this is a preliminary hack, for a (quite unrelated) sanity 
> check I'm running). 
> Now, it turns out that in 8080 maxima, the number 14654.29 appears
> twice. Things like that happen, this _is_ statistics,
> and my pdf doesn't fall that fast, but you know...
> I thought I'd report this sooner the better... 

And which random number generator are you using?  And have you a proven
stable procedure based on its results?  (Doesn't look like it, I have to
say.)

Please do read the advice in the FAQ on reporting a bug. There is 
npthing here that I can see is a bug, or see how to investigate.
All PRNGs have deficiencies, and you have to program procedures to take
account of them.  R provides several alternatives for you to try out.
Do make use of them!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Tue May 23 20:17:56 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Tue, 23 May 2000 21:17:56 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0005232114360.553-100000@alnair.uio.no>

On Tue, 23 May 2000, Prof Brian D Ripley wrote:

>> ...to generate random numbers. I think there might be something wrong
>> with runif, possibly the same problem as rpois had. 
>
>Not at all, that problem is fixed.

OK, it was just something that didn't seem to unreasonable, since it was
roughly the same thing that was happening.

>And which random number generator are you using?  And have you a proven
>stable procedure based on its results?  (Doesn't look like it, I have to
>say.)

I must admit that I have not been experimenting with them... It seemed a
bit scary.... :-)

>Please do read the advice in the FAQ on reporting a bug. There is 
>npthing here that I can see is a bug, or see how to investigate.
>All PRNGs have deficiencies, and you have to program procedures to take
>account of them.  R provides several alternatives for you to try out.
>Do make use of them!

I will! Sorry for the disturbance!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May 24 08:16:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 May 2000 09:16:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> Some of you may have seen the  pythag() part in the R API definition in 
> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

> or followed the report and Prof. Brian Ripley's answer about pythag()'s
> availability from R's binary.

> As we say in above manual

>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
>>> destructive underflow: for example it still works when both A and
>>> B are between `1e200' and `1e300' (in IEEE double precision).

> --
> "Problem" is : 
> The GNU C library (and other C libraries ??)
> defines a function	 
> 	 double hypot(double x, double y)

> with identical semantics to our pythag() from above
> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
> (in the section "Exponentiation and Logarithms"):

> =============================
>>> - Function: double hypot (double X, double Y)
>>> - Function: float hypotf (float X, float Y)
>>> - Function: long double hypotl (long double X, long double Y)
>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>> the hypotenuse of a right triangle with sides of length X and Y,
>>> or the distance of the point (X, Y) from the origin.  Using this
>>> function instead of the direct formula is wise, since the error is
>>> much smaller.  See also the function `cabs' in *Note Absolute
>>> Value::.

> Further "problem": In R, we are already partially relying on the
> availability of the hypot() function :

> At the toplevel of R-1.0.1's source
>    grep -rwn hypot . 
>    ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
> gives

> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
> ./src/main/plot.c:2455:double hypot(double x, double y)
> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

> ---------

> My "theses"
   
>    o when hypot() is available, it should be used since it will be 
>      efficient, precise, etc.
>    o when it's not available, our "configure" should find out, and set
>      corresponding "HAVE_HYPOT" to `false'.
>    o in that case, we should provide a hypot()  {for the above code to
>      work!}, and we probably should use (an improvement?) of the current
>      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
>    o Hence, we should drop pythag() from the R API and rather say that we
>      provide hypot() whenever the system's C library 
>      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
>      provide it.

>    o I think an R function  hypot() would also make sense.

> We'll be glad to hear feedback about this!

I have no strong opinions about this, but the above seems to make
sense.

If I should make changes to configure, then pls let me know.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 09:57:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 09:57:47 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>

> >>>>> Martin Maechler writes:
> 
> > My "theses"
>    
> >    o when hypot() is available, it should be used since it will be 
> >      efficient, precise, etc.
> >    o when it's not available, our "configure" should find out, and set
> >      corresponding "HAVE_HYPOT" to `false'.

Are there any such systems?  After all 1.0.1 requires hypot, and we
have heard no complaints.  I suspect the cause of the confusion is
(plot.c)

#ifdef Macintosh
# define hypot pythag
#endif

so assume that the Mac port did not have hypot. However, a different
version appears in the 1.0.1 sources, and it appears _after_ hypot is first
used, so I am puzzled as to how the current version got there, or why it
would work. (If a system does not have hypot, presumably its headers do not
either!)

> >    o in that case, we should provide a hypot()  {for the above code to
> >      work!}, and we probably should use (an improvement?) of the current
> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
> >    o Hence, we should drop pythag() from the R API and rather say that we
> >      provide hypot() whenever the system's C library 
> >      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
> >      provide it.

I was puzzled as to why you put it in the API at all.

> >    o I think an R function  hypot() would also make sense.

Don't think so.  What you we is an n-term not 2-term version, and that's
what vecnorm would do (if we had it).

This does all seem to me to be trying to solve a non-existent problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:30:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:30:24 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
 <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <14635.52064.496585.983516@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
    >> Some of you may have seen the  pythag() part in the R API definition in 
    >> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    >> or followed the report and Prof. Brian Ripley's answer about pythag()'s
    >> availability from R's binary.

    >> As we say in above manual

    >>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
    >>>> destructive underflow: for example it still works when both A and
    >>>> B are between `1e200' and `1e300' (in IEEE double precision).

    >> --
    >> "Problem" is : 
    >> The GNU C library (and other C libraries ??)
    >> defines a function	 
    >> double hypot(double x, double y)

    >> with identical semantics to our pythag() from above
    >> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
    >> (in the section "Exponentiation and Logarithms"):

    >> =============================
    >>>> - Function: double hypot (double X, double Y)
    >>>> - Function: float hypotf (float X, float Y)
    >>>> - Function: long double hypotl (long double X, long double Y)
    >>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
    >>>> the hypotenuse of a right triangle with sides of length X and Y,
    >>>> or the distance of the point (X, Y) from the origin.  Using this
    >>>> function instead of the direct formula is wise, since the error is
    >>>> much smaller.  See also the function `cabs' in *Note Absolute
    >>>> Value::.

    >> Further "problem": In R, we are already partially relying on the
    >> availability of the hypot() function :

    >> At the toplevel of R-1.0.1's source
    >> grep -rwn hypot . 
    >> ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
    >> gives

    >> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
    >> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
    >> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
    >> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
    >> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
    >> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
    >> ./src/main/plot.c:2455:double hypot(double x, double y)
    >> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
    >> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

    >> ---------

    >> My "theses"
   
    >> o when hypot() is available, it should be used since it will be 
    >> efficient, precise, etc.
    >> o when it's not available, our "configure" should find out, and set
    >> corresponding "HAVE_HYPOT" to `false'.
    >> o in that case, we should provide a hypot()  {for the above code to
    >> work!}, and we probably should use (an improvement?) of the current
    >> pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
    >> o Hence, we should drop pythag() from the R API and rather say that we
    >> provide hypot() whenever the system's C library 
    >> (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
    >> provide it.

    >> o I think an R function  hypot() would also make sense.

    >> We'll be glad to hear feedback about this!

    KH> I have no strong opinions about this, but the above seems to make
    KH> sense.

    KH> If I should make changes to configure, then pls let me know.

Yes, please. 
We should check for it's presence with configure and
then use

#ifndef HAVE_HYPOT
double hypot(double x, double y) {

  ...
  ...

}
#endif


In the mean time I've seen that it exists in 
   - GNU lib"c" (libm infact)
   - Solaris
   - HP-UX
   - DEC Alpha Unix

and it is part of the X/Open "XPG4" standard,
but not POSIX (as of Don Lewine) nor ANSI C.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:55:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:55:54 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
References: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
Message-ID: <14635.53594.717309.718373@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> >>>>> Martin Maechler writes:
    >> 
    >> > My "theses"
    >> 
    >> >    o when hypot() is available, it should be used since it will be 
    >> >      efficient, precise, etc.
    >> >    o when it's not available, our "configure" should find out, and set
    >> >      corresponding "HAVE_HYPOT" to `false'.

    BDR> Are there any such systems?  After all 1.0.1 requires hypot, and we
    BDR> have heard no complaints.  I suspect the cause of the confusion is
    BDR> (plot.c)

    BDR> #ifdef Macintosh
    BDR> # define hypot pythag
    BDR> #endif

    BDR> so assume that the Mac port did not have hypot. However, a
    BDR> different version appears in the 1.0.1 sources, and it appears
    BDR> _after_ hypot is first used, so I am puzzled as to how the current
    BDR> version got there, or why it would work. (If a system does not
    BDR> have hypot, presumably its headers do not either!)

    >> >    o in that case, we should provide a hypot()  {for the above code to
    >> >      work!}, and we probably should use (an improvement?) of the current
    >> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].

    >> >    o Hence, we should drop pythag() from the R API and rather say
    >> >    that we provide hypot() whenever the system's C library (or its
    >> >    "math.h", aka libm.*, aka "-m" part, respectively) does *not*
    >> >    provide it.

    BDR> I was puzzled as to why you put it in the API at all.

{my ignorance about the widely available hypot() !}

    >> >    o I think an R function  hypot() would also make sense.

    BDR> Don't think so.  What you we is an n-term not 2-term version, and that's
    BDR> what vecnorm would do (if we had it).
agreed, good point!
  [does S-plus'  vecnorm()  avoid underflow and overflow reliably?]

    BDR> This does all seem to me to be trying to solve a non-existent problem.

Not according to our own (R core) standards,
which I thought to be roughly like 

 GOLD>> We require ANSI C 
 GOLD>> and everything else must be tested for by configure
 GOLD>>   (and worked around either be saying (warning) "is not available",
 GOLD>>    or by providing own code).
  
I think hypot() definitely falls in that class, 
particularly since it's not even POSIX [as of Lewine(1991)]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 14:07:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 14:07:12 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.53594.717309.718373@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10005241404200.8042-100000@auk.stats>

On Wed, 24 May 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> This does all seem to me to be trying to solve a non-existent problem.
> 
> Not according to our own (R core) standards,
> which I thought to be roughly like 
> 
>  GOLD>> We require ANSI C 
>  GOLD>> and everything else must be tested for by configure
>  GOLD>>   (and worked around either be saying (warning) "is not available",
>  GOLD>>    or by providing own code).
>   
> I think hypot() definitely falls in that class, 
> particularly since it's not even POSIX [as of Lewine(1991)]

Still, it is a problem that has not (AFAIK) been reported by anyone, and
there is quite a list of outstanding bugs at R-bugs ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Wed May 24 23:21:29 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Wed, 24 May 2000 15:21:29 -0700 (PDT)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <200005221106.NAA20961@pubhealth.ku.dk>
Message-ID: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>

On Mon, 22 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Ouch, another obscure bug...
> I just had a bus error crash, with a core dump, a small one this time.
> Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
> I had done a few simulations, and done a chisq.test() on them.
> These simulations also write about 190MB's to file, but
> I have no idea whether that is relevant, and those data are not
> used. The calls I do look like this:
> > ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
> "point")))
> > ch1
> 
> 	 Pearson's Chi-square test 
> 
> data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
> X-squared = 463.8359, df = 300, p-value = 3.726e-09 
> 
> > ch1$observed
> 
> Process R bus error (core dumped) at Mon May 22 12:38:49 2000
> 
> 
> ....so it doesn't crash when I print the whole object, but when I 
> a vector of the object, it crashes... And, restarting R, it doesn't
> happen.
> 
> I heard the sysadm who did the installation had some problems,
> I don't know what it was about, but if I understood him correctly,
> it only happened when he tuned for EV6, so it shouldn't be a problem now, 
> I guess....
> 
> Kjetil

I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
V5.0). Compiled with gcc/g77 using optimisation level -O2 (determined by
configure script).

> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1,
100,"point")))


> ch1

         Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 404.6772, df = 300, p-value = 5.125e-05 

> ch1$observed
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
[1,]  160  144  205  244  273  314  395  454  521   592   713   864   905 1043
[2,]  139  175  210  232  276  369  372  459  525   566   687   781   886  981

... etc ...


Brad

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From davidD@qimr.edu.au  Thu May 25 02:39:37 2000
From: davidD@qimr.edu.au (davidD@qimr.edu.au)
Date: Thu, 25 May 2000 03:39:37 +0200 (MET DST)
Subject: [Rd] diag() (PR#555)
Message-ID: <200005250139.DAA21529@pubhealth.ku.dk>

Full_Name: David Duffy
Version: 1.0.1
OS: Linux
Submission from: (NULL) (152.98.96.21)


Documentation for diag() states that "If x is a vector (or a
1-d array) then diag(x) returns a diagonal matrix whose diagonal
is x."
> m<-matrix(1:4,ncol=1)
> diag(m)
[1] 1
diag(as.vector(m)) gives the advertised performance.

Fix: Change documentation.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Thu May 25 03:25:27 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Thu, 25 May 2000 12:25:27 +1000
Subject: [Rd] diag() (PR#555)
In-Reply-To: Your message of "Thu, 25 May 2000 03:39:37 +0200."
 <200005250139.DAA21529@pubhealth.ku.dk>
Message-ID: <200005250225.MAA15350@snowy.nsw.cmis.CSIRO.AU>

> Full_Name: David Duffy
> Version: 1.0.1
> OS: Linux
> Submission from: (NULL) (152.98.96.21)
> 
> 
> Documentation for diag() states that "If x is a vector (or a
> 1-d array) then diag(x) returns a diagonal matrix whose diagonal
> is x."
> > m <- matrix(1:4,ncol=1)
> > diag(m)
> [1] 1
> diag(as.vector(m)) gives the advertised performance.
> 
> Fix: Change documentation.

On the contrary I consider this to be the advertized performance.

The array m as defined above is a 2-d array, not a 1-d array, it just
so happens that one of the dimensions has extent 1, but so what?

I would favour retaining the definition

	dimension of array A  =  length(dim(A))

in all cases so that you can rely on it in programming and do not have
to consider even more exception handling.  It's bad enough already
with the drop convention.

If anything I think it requires a little more emphasis on what
constitutes an n-dimensional array and precisely what drop(m) does,
for example.  The above equality is *before* drop, not after, in other
words.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu May 25 10:52:08 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 25 May 2000 11:52:08 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <Pine.OSF.4.21.0005251145100.13610-100000@alnair.uio.no>

On Wed, 24 May 2000, Brad McNeney wrote:

>I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
>V5.0).

OK. I had a similar crash yesterday on a different machine but I think
with rather identical hardware, it was a batch job that was running
so I don't know exactly what caused the crash (after about 48 CPU hours,
arrgh), but I have a (small) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core3>

Anyway, Uwe suggested it might be a RAM hardware problem, which is not
impossible. I think these machines were bought while still in beta-test,
and hopefully, Compaq will drop by tomorrow to have a look. 

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 25 18:23:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 May 2000 13:23:26 -0400
Subject: [Rd] Bus Error crash (PR#551)
References: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <392D618E.DF1DD05F@bank-banque-canada.ca>

> These simulations also write about 190MB's to file

I had a similar problem with R crashing (I think it was a system error rather
than a bus error). In the end it was a hardware problem due to a standard IDE
cable on a new udma ATA 66 drive. R seemed to be the main thing that drove the
system hard enough to cause a problem. It wasn't severe enough to crash the
system, just R.

The problem stopped if I slowed the system to 400MHz. The place that sold me the
system said I only needed the special cable on systems with a blue IDE
connector, but the disk drive manufacture's tech support said the cable would
probably fix the problem, so I got one and tried it, and it did fix the problem.
The special cables have finer wires and possibly a twisted pair. They have blue
connectors to match the (sometimes) blue connectors on the motherboard.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:12 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:12 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
Message-ID: <200005300939.LAA08854@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:18 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:18 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#558)
Message-ID: <200005300939.LAA08876@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 30 11:31:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 May 2000 11:31:39 +0100 (BST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005301126380.5585-100000@auk.stats>

On Tue, 30 May 2000 stephen@anc.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

It is already `protects' in the current sources (R-devel): I didn't check
1.0.1.  Not sure why you submitted this twice (PR#557 and PR#558)?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 30 11:40:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2000 12:40:17 +0200
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: stephen@anc.ed.ac.uk's message of "Tue, 30 May 2000 11:39:12 +0200 (MET DST)"
References: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <x2ya4sl3se.fsf@blueberry.kubism.ku.dk>

stephen@anc.ed.ac.uk writes:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

Yup. Already fixed in the development version.

Actually "SEXP pointer" is a bit like "ATM machine". SEXPs are
pointers to SEXPREC, so is a SEXP pointer a (SEXPREC **) ? Besides,
one is not protecting the pointer but the object it points to (by
putting a pointer to it on the protection stack). This is
a common misconception:

 PROTECT(p);
 ...
 p = AllocSexp(....);

will not protect the new value of p. You need

 PROTECT(p);
 ...
 UNPROTECT(1);
 PROTECT(p = AllocSexp(....));

Hmm. Looks like the whole section needs going over. The stuff about
"ensuring that the pointer is updated" is bogus too (it is VECRECs
that move, not SEXPRECs). And the description of UNPROTECT_PTR is
vacuous at best.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:11:38 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:11:38 +0200
Subject: [Rd] read.table and strip.white
Message-ID: <3934BB2A.77864FC@statistik.uni-dortmund.de>

Hi!

I want to read data (using read.table(.)) from a file like:

  "col1", "col2", "col3"
  1, 1, 1
  2, 2, 2


But the white spaces are interpreted:

  x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
  colnames(x)
[1] "col1"  " col2" " col3"
             ^       ^ 

So I would like to pass an argument like strip.white=TRUE (as in
scan(.)) to read.table(.) .
If this is nonsense, please let me know.


At my first look only three lines (and documentation) must be changed:

l. 1-3 add: function(..., strip.white=FALSE, ...)
                          ^^^^^^^^^^^^^^^^^
l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
                                  ^^^^^^^^^^^^^^^^^^^^^^^



There is also a little bug in the "windows help" to read.table(.):

Usage
read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
                                                              ^^^ must
be: "\"'"
and both of
read.csv(file, header = TRUE, sep = ",", quote="", 

read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 

                                                ^^ must be: "\""

Looks like a general problem with a backslashes in "winhelp" (?).

If requested, I will create a bug report...

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:35:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:35:13 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310735.IAA11142@toucan.stats.ox.ac.uk>

>Date: Wed, 31 May 2000 09:11:38 +0200
>From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
>
>There is also a little bug in the "windows help" to read.table(.):
>
>Usage
>read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
>                                                              ^^^ must
>be: "\"'"
>and both of
>read.csv(file, header = TRUE, sep = ",", quote="", 
>
>read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 
>
>                                                ^^ must be: "\""
>
>Looks like a general problem with a backslashes in "winhelp" (?).

Which system of help, and if text help which pager?  (I'm not
on Windows here to check, but the text file looks fine on Unix. My
guess is that this a pager bug.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:49:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:49:52 +0200
Subject: [Rd] read.table and strip.white
References: <200005310735.IAA11142@toucan.stats.ox.ac.uk>
Message-ID: <3934C420.5C8CECC1@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:
> [...]
> >Looks like a general problem with a backslashes in "winhelp" (?).
> 
> Which system of help, and if text help which pager?  (I'm not
> on Windows here to check, but the text file looks fine on Unix. My
> guess is that this a pager bug.)

The Windows Help system (R-1.0.1, NT4.0):
  help(read.table, winhelp=TRUE)

Text and HTML Help are OK.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:57:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:57:00 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310757.IAA22525@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:49:52 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] read.table and strip.white
> 
> Prof Brian Ripley wrote:
> > [...]
> > >Looks like a general problem with a backslashes in "winhelp" (?).
> > 
> > Which system of help, and if text help which pager?  (I'm not
> > on Windows here to check, but the text file looks fine on Unix. My
> > guess is that this a pager bug.)
> 
> The Windows Help system (R-1.0.1, NT4.0):
>   help(read.table, winhelp=TRUE)
> 
> Text and HTML Help are OK.

Thanks, will take a look.  winhelp comes with a health warning, and we
were thinking of withdrawing now most people have Compiled HTML.
Looks like at least one person uses it!

It is done by automatic translation from HTML written by someone else,
and there are a lot of known problems with it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 17:43:11 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 17:43:11 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005311643.RAA09975@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:11:38 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: R-devel <r-devel@stat.math.ethz.ch>
> CC: busse@statistik.uni-dortmund.de, Joerg Guettner <guettner@gmx.de>
> Subject: [Rd] read.table and strip.white 
> 
> Hi!
> 
> I want to read data (using read.table(.)) from a file like:
> 
>   "col1", "col2", "col3"
>   1, 1, 1
>   2, 2, 2
> 
> 
> But the white spaces are interpreted:
> 
>   x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
>   colnames(x)
> [1] "col1"  " col2" " col3"
>              ^       ^ 
> 
> So I would like to pass an argument like strip.white=TRUE (as in
> scan(.)) to read.table(.) .
> If this is nonsense, please let me know.
> 
> 
> At my first look only three lines (and documentation) must be changed:
> 
> l. 1-3 add: function(..., strip.white=FALSE, ...)
>                           ^^^^^^^^^^^^^^^^^
> l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
>                                   ^^^^^^^^^^^^^^^^^^^^^^^
> 

I was rather surprised here, and this is not what the prototype does:

  .col1. .col2. .col3. 
1      1      1      1
2      2      2      2

Should not strip.white be true for the header line?
That's what the prototype does:

toucan% cat fff
  col1, col2, col3
  a, 1, 1
  b, 2, 2

Splus
> x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> x
  col1 col2 col3 
1    a    1    1
2    b    2    2
> as.matrix(x)
   col1 col2 col3 
1 "  a" "1"  "1" 
2 "  b" "2"  "2" 

You can always quote on the header line if you really want names
with leading spaces.

I think we could add strip.white for use in the body, quite easily.

Any comments?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed May 31 18:11:55 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 31 May 2000 19:11:55 +0200 (CEST)
Subject: [Rd] no $method from as.hclust (PR#538)
In-Reply-To: <200005102200.AAA05996@pubhealth.ku.dk>
References: <200005102200.AAA05996@pubhealth.ku.dk>
Message-ID: <14645.18395.237724.736215@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 11 May 2000 00:00:23 +0200 (MET DST),
>>>>> denis  (d) wrote:

d> as.hclust returns objects with only 6 of the standard 7 
d> components of class hclust, leaving out "method", therefore
d> being incompatible with applications looking for all
d> 7 components.

Fixed in the development version. But I had to set the method to NA as
I see no way of extracting it from twins objects (as created by the
cluster package) short of parsing the call stored there ... but that
is too unreliable IMO as it interdepends with the default arguments
used etc.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 19:34:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 20:34:57 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk>
Message-ID: <39355B51.6A7D9361@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> > [...]

> I was rather surprised here, and this is not what the prototype does:
> 
>   .col1. .col2. .col3.
> 1      1      1      1
> 2      2      2      2
> 
> Should not strip.white be true for the header line?

If there are no compatibility problems, setting it to TRUE would be
useful ...
But compatibility is an important point, especially in read.table(.), I
think. Many R users have got their own functions using read.table(.), I
suppose. Maybe changing the defaults could break anything?


> That's what the prototype does:
> 
> toucan% cat fff
>   col1, col2, col3
>   a, 1, 1
>   b, 2, 2
> 
> Splus
> > x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> > x
>   col1 col2 col3
> 1    a    1    1
> 2    b    2    2
> > as.matrix(x)
>    col1 col2 col3
> 1 "  a" "1"  "1"
> 2 "  b" "2"  "2"
> 
> You can always quote on the header line if you really want names
> with leading spaces.
> 
> I think we could add strip.white for use in the body, quite easily.
>
> Any comments?


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed May 31 22:42:04 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 31 May 2000 23:42:04 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk> <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <3935872C.EC932AE1@univie.ac.at>

dear all,
well, all of you 
a) living in windowsland
b) being a little bit adventurous

i need your help to check out something.

finally, we have managed to get remote dcom running with r.
what does that mean?
it means that we can use client software
(for example excel) and this client software call r on a server
on another machine.

i managed to get it running in the following configuration:

client on windows 95 (osr2)
server on windows 2000 professional

if possible, i would like reports for other configurations.

prerequesites
current version of r (1.001) installed on both machines.
dcom server from cran, nonstandard extensions
for test purposes:
r-excel interface from nonstandard extensions

dcom + dcomcnfg installed on the win95 machine
it is available from
http://www.microsoft.com/com/dcom/dcom95/download.asp
you also need the tools on winnt or win2k,
but there there are automatically installed by the os.

now, dcomcnfg has to be used on both client and server

win2k pro as server (no nt domain)
start dcomcnfg
select StatConnctorSrv

security tab
custom access permissions
everyone allow access
custom launch permissions
everyone allow launch

identity tab
the interactive user

on win95 client
start dcomcnfg
location tab
run application on the following computer
enter the network name

the user loggrd in on the win95 machine
has to be known on the win2k machine.

if the installation works
(it worked in my case)
you can use xcel on the client and all the r function calls from within
excel
will be executed on the server machine.

voila:
statistical client server computing with a remote server

configuration can get tedious.
to me, it is unclear if reboot is needed after
changing access rights.
if you want to help,
try often enough.
and PLEASE report running configurations.

erich
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon May  1 01:48:53 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 1 May 2000 12:48:53 +1200
Subject: [Rd] graphics: par(mfg=c(i,j,r,c)) (PR#529)
References: <200004281536.RAA21899@pubhealth.ku.dk> <x28zxyw72y.fsf@blueberry.kubism.ku.dk>
Message-ID: <00f701bfb307$06dc3120$175dd882@stat.auckland.ac.nz>

hi


> > x_1:20
> > y_1:20
> > #these 5 commands produce a 2x2 panel plot
> > par(mfrow=c(2,2))
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> >
> > #the following 2 commands successfully added the text 'panel[2,1]' to
> > panel[2,1]
> > par(mfg=c(2,1,2,2))
> > text(10,10,'panel[2,1]')
> >
> > #None of the following 3 command-pairs produced their intended results
for the
> > other
> > # 3 panels
> > par(mfg=c(1,2,2,2))
> > text(10,10,'panel[1,2]')
> >
> > par(mfg=c(1,1,2,2))
> > text(10,10,'panel[1,1]')
> >
> > par(mfg=c(2,2,2,2))
> > text(10,10,'panel[2,2]')
> >
> > #However, the following command-pair did as intended on the first panel
> > specified
> > # by mfg=c(2,1,2,2) above
> > par(mfg=c(2,1,2,2))
> > text(15,15,'panel[2,2]')
>
> Same thing happens on Linux. Might be something with restoring the
> coordinate transformations. Using
>
> par(mfg=c(1,1,2,2))
> plot(x,y)
> text(10,10,'panel[1,1]')
>
> *does* seem to work.


This was a clipping bug, to do with the fact that GClip only reset the
device's clipping region if the value of dd->gp.xpd changed.

I have committed a fix, which *forces* a reset of the clipping region when
par(xpd) is set.

For the record:  this just fixes the par(xpd) situation.  The problem may
resurface elsewhere, in which case it may be worth considering changing
GClip to *always* force a reset of the clipping region.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May  2 11:12:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 2 May 2000 12:12:24 +0200 (MET DST)
Subject: [Rd] rpois hangs (PR#530)
Message-ID: <200005021012.MAA10832@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> kjetikj@astro.uio.no writes:
    >> I have come across another really strange bug in rpois.  If I do >
    >> rpois(1, 1000000 * rpois(1, 10000)) sometimes it hangs, and hangs...
    >> On my XP1000 alphaev6 workstation, it seems to happen more
    >> frequently than on other machines. I started a session on an older
    PD> ........
    >> > rpois(1, 1000000 * rpois(1, 10000)) [hanging]
    >> 
    >> I think this is strange, because I've been doing this stuff a lot
    >> lately, but usually with a rather small parameter to the second
    >> rpois.

    PD> On Intel, that consistently gives

    >> rpois(1, 1000000 * rpois(1, 10000))
    PD> [1] -2147483648

    PD> I.e. signs of integer overflow. Apparently you partly get away with
    PD> it on a 64 bit machine, but I'm not surprised you get into regimes
    PD> that are not well tested by the poor developers working on hardware
    PD> from the bygone millennium....

I'm fixing this.  It's clear in the source code (rpois.c) 
that `int's are used in places where they must overflow as soon as  
lambda > ~= .Machine$integer.max

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Wed May  3 00:46:33 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Wed, 3 May 2000 01:46:33 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005022346.BAA17701@pubhealth.ku.dk>

The expressions

> x<-factor(x)

and

> class(x)<-"factor"

behave differently when x is already an ordered factor.  It may not be a
bug but it caught me out when I was trying to remove the "orderedness"
from a factor variable. The following R code illustrates the difference.
Is this difference between the 2 commands desirable?

> x<-1:3
> class(x)
NULL
> x<-ordered(x)
> class(x)
[1] "ordered" "factor"
> x<-factor(x)
> class(x)
[1] "ordered" "factor"
> class(x)<-"factor"
> class(x)
[1] "factor"

Murray Smith

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 01:05:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 2 May 2000 17:05:51 -0700 (PDT)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <200005022346.BAA17701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000 mh.smith@auckland.ac.nz wrote:

> The expressions
> 
> > x<-factor(x)
> 
> and
> 
> > class(x)<-"factor"
> 
> behave differently when x is already an ordered factor.  It may not be a
> bug but it caught me out when I was trying to remove the "orderedness"
> from a factor variable. The following R code illustrates the difference.
> Is this difference between the 2 commands desirable?

Yes.  factor, like as.factor, turns its argument into a factor. As it
already is a factor this doesn't do anything. 

class(x)<-"factor" says that x is a factor and has no other class.  In
general it is a bad idea to explicitly set the class of a variable
like this (except when you're constructing the object).  This is for two
reasons. One, you usually don't want to remove other classes. Two, x may
not be a factor, and just setting its class to "factor" may leave it in an
inconsistent state. 
Eg
> x<-1:10
> class(x)<-"factor"
> x
NULL
Levels:

In this particular case you know that x has class c("ordered","factor")
and that you want it to have class "factor", so it is harmless. It still
may be unnecessary -- eg if you just want it to have treatment contrasts
rather than polynomial contrasts you can use C() or constrasts()<-.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  3 06:49:26 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2000 07:49:26 +0200
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: Thomas Lumley's message of "Tue, 2 May 2000 17:05:51 -0700 (PDT)"
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
Message-ID: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> In this particular case you know that x has class c("ordered","factor")
> and that you want it to have class "factor", so it is harmless. It still
> may be unnecessary -- eg if you just want it to have treatment contrasts
> rather than polynomial contrasts you can use C() or constrasts()<-.

We do have a problem in the documentation:

The default for factor is ordered=FALSE according to the help page but

> factor(ordered(4:1),ordered=F)
[1] 4 3 2 1
Levels:  1 2 3 4 
> factor(ordered(4:1))
[1] 4 3 2 1
Levels:  1 < 2 < 3 < 4 

and the actual function definition says

function (x, levels = sort(unique(x), na.last = TRUE),
                    labels=levels, exclude = NA, ordered =
                    is.ordered(x))



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 08:38:45 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 09:38:45 +0200 (CEST)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
Message-ID: <14607.55173.968286.549995@lynne.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May  3 08:39:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 3 May 2000 09:39:06 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005030739.JAA19698@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 11:24:23 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 12:24:23 +0200 (CEST)
Subject: [Rd] print() "bug" for arrays with 0 columns
Message-ID: <14607.65111.375233.678442@lynne.ethz.ch>

The "bug" is that it doesn't print anything;
one might argue that this is not a bug, since such an array *is* empty, 
but I don't buy that argument.

It *does* print if #{columns} (= last dimension) > 0 :

 > array(NA,dim=c(2,0))
 > array(NA,dim=c(2,1,0))

 > array(NA,dim=c(0,2))
      [,1] [,2]
 > array(NA,dim=c(0,2,1))
 , , 1

      [,1] [,2]

 > array(NA,dim=c(0,0,1))
 , , 1


S-plus 5.1 does better for matrices 
           but worse (at least in some cases) for higher-rank arrays :

    > array(NA,dim=c(0,2))
    logical matrix: 0 rows, 2 columns. 
    > array(NA,dim=c(0,0,1))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(0,1,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,0,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,2,0))

    , , 
	 [,1] [,2] 
    [1,]   NA   NA

    , , 
	 [,1] [,2] 
    [1,]   NA   NA
    > 

---------

What should we be doing instead of the current behavior?
Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
I would want to do this in *all* cases where one of the dimensions is 0.

Other suggestions?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed May  3 11:53:41 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 3 May 2000 11:53:41 +0100 (BST)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.20.0005031147150.3072-100000@laplace>

On Wed, 3 May 2000, Martin Maechler wrote:

> What should we be doing instead of the current behavior?
> Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
> I would want to do this in *all* cases where one of the dimensions is 0.

I think this would be a good idea: I feel the current behaviour is
inconsistent.  Trying to standardise to anything else is likely to lead to
trouble.  In particular, attempting to duplicate the current behaviour for
0 rows in matrices will definitely not scale well to arrays.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 16:19:19 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 3 May 2000 08:19:19 -0700 (PDT)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005030816530.3813-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000, Martin Maechler wrote:

> The "bug" is that it doesn't print anything;
> one might argue that this is not a bug, since such an array *is* empty, 
> but I don't buy that argument.
> 

I think printing a message makes sense. The current behaviour of
zero-extent arrays and matrices is based on making the fewest possible
changes rather than on any particular user-level optimality criterion.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Wed May  3 18:15:11 2000
From: russell-lenth@uiowa.edu (russell-lenth@uiowa.edu)
Date: Wed, 3 May 2000 19:15:11 +0200 (MET DST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
Message-ID: <200005031715.TAA27669@pubhealth.ku.dk>

Dear R folks,

Additional problem... bug.report() failed, so am sending it from another
mailer.  The file it generated is appended.

Thanks

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science
The University of Iowa -- Iowa City, IA 52242  USA
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/


===== R.bug.report =============================================
Hello,

We're experiencing problems with R 1.0.1 on the HP-UX system.
The most serious one is that the random-number generators don't work:

        R> runif(100)
        Error in runif(100) : .Random.seed[0] is not a valid Normal type

        R> .Random.seed
        [1] 18851  3338  2439

Is this a subscripting error?  Strange because building it on linux
works just fine.

Smaller errors I've noticed...  The command-line history doesn't work.
It was built by our computer-support people, and I think they had
trouble with the libraries for that.  (Contact is Ben Sherman,
bsherman@divms.uiowa.edu).  Also help.start() generates a bunch of
error messages:

R> help.start()
If netscape  is already running,        it is *not* restarted,
 and you must switch to its window.
Otherwise, be patient..
/usr/pkg/R/1.0.1/lib/R/bin/help.links[29]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[30]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[49]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[50]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[53]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.



Any idea what the problems are?

Thanks

Russ Lenth

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  3 19:27:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 May 2000 19:27:57 +0100 (BST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
In-Reply-To: <200005031715.TAA27669@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005031926360.24579-100000@auk.stats>

On Wed, 3 May 2000 russell-lenth@uiowa.edu wrote:

> Dear R folks,
> 
> Additional problem... bug.report() failed, so am sending it from another
> mailer.  The file it generated is appended.
> 
> Thanks
> 
> Russ
> -- 
> Russell V. Lenth -- Department of Statistics & Actuarial Science
> The University of Iowa -- Iowa City, IA 52242  USA
> Tel (319)335-0814 -- FAX (319)335-3017
> mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/
> 
> 
> ===== R.bug.report =============================================
> Hello,
> 
> We're experiencing problems with R 1.0.1 on the HP-UX system.
> The most serious one is that the random-number generators don't work:
> 
>         R> runif(100)
>         Error in runif(100) : .Random.seed[0] is not a valid Normal type
> 
>         R> .Random.seed
>         [1] 18851  3338  2439
> 
> Is this a subscripting error?  Strange because building it on linux
> works just fine.

I think you've got a (very) old workspace being loaded there. Try starting
with R --vanilla to cross-check.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:27:32 2000
From: mh.smith@auckland.ac.nz (Murray Smith)
Date: Thu, 04 May 2000 15:27:32 +1200
Subject: [Rd] Possible bug in factor (PR#531)
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk> <14607.55173.968286.549995@lynne.ethz.ch>
Message-ID: <3910EE24.E64A79DA@auckland.ac.nz>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:25:36 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Thu, 4 May 2000 05:25:36 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005040325.FAA29602@pubhealth.ku.dk>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:19:01 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:19:01 +0200 (MET DST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
Message-ID: <200005041719.TAA11051@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat
Submission from: (NULL) (149.149.32.46)


Hello,

	Thought you might be interested.  I tried to load the package tripack
needed by the sgeostat package.  After some careful searching,  three packages
were 
found which had the same error.  Here is the output.

Mike
  
> library(acepack) Error in dyn.load(x, as.logical(local),
as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/acepack/libs/acepack.so":
  /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
>library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
:
        unable to load shared library
"/usr/lib/R/library/tripack/libs/tripack.so":
  /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
>library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/akima/libs/akima.so":
  /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:20:36 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:20:36 +0200 (MET DST)
Subject: [Rd] wsfe bug report just made (PR#534)
Message-ID: <200005041720.TAA11084@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat 6.2
Submission from: (NULL) (149.149.32.46)


Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
loaded the latest version of R as well.

Mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  4 18:40:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 May 2000 18:40:42 +0100 (BST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005041827230.26380-100000@auk.stats>

On Thu, 4 May 2000 mallen@tntech.edu wrote:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Hello,
> 
> 	Thought you might be interested.  I tried to load the package tripack
> needed by the sgeostat package.  After some careful searching,  three packages
> were 
> found which had the same error.  Here is the output.

> Mike
>   
> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
> >library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
> :
>         unable to load shared library
> "/usr/lib/R/library/tripack/libs/tripack.so":
>   /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
> >library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/akima/libs/akima.so":
>   /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

That's a symbol from the Fortran I/O code.  There is no problem on RH6.0
on R 1.0.1, where the symbol is resolved from libg2c.a.

(1) Does FLIBS in etc/Makeconf include -lg2c?

(2) If so, do those packages have Makefiles in src? If so delete them
and reinstall.  (The latest version of akima does not, but earlier versions
did.)

(3) Does lg2c include e_wsfe?  (nm -g on it).  Is it finding the right
libg2c.a?

(4) I get nm -g ..../akima.so  giving

00013c5c T e_wsfe

and so I think it should be resolved in the *.so.

Which version of RedHat?  I suspect a RedHat inconsistency here, and other
people have reported that upgrading to the gcc-2.95.2 compiler set
solved the problem.  But it might just be old package versions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  4 18:46:04 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 May 2000 12:46:04 -0500
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:19:01 +0200 (MET DST)"
References: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <6rog6m2opv.fsf@franz.stat.wisc.edu>

mallen@tntech.edu writes:

> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 

That name e_wsfe probably comes from Fortran input/output routines.
Check if some Fortran code is trying to use a WRITE statement.  I
think there was another message this morning about this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  4 21:10:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2000 22:10:21 +0200
Subject: [Rd] wsfe bug report just made (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:20:36 +0200 (MET DST)"
References: <200005041720.TAA11084@pubhealth.ku.dk>
Message-ID: <x2bt2m13gy.fsf@blueberry.kubism.ku.dk>

mallen@tntech.edu writes:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat 6.2
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
> loaded the latest version of R as well.
> 
> Mike
> 

But did you build the packages yourself and if so, how? (using which
compilers).

BTW: when you follow up on an earlier report via the web interface,
please do it as a follow-up. If you do it by mail, say for PR#533,
please include (PR#533) in the Subject line. That way things get filed
together. (I've fixed the number on this mail)



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May  5 13:59:25 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 5 May 2000 13:59:25 +0100 (BST)
Subject: [Rd] Windows version of R-devel
Message-ID: <200005051259.NAA13829@toucan.stats.ox.ac.uk>

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: 2xw8BXDeWRkQhskDXsXyCw==

I have put up a cross-compiled version of the development version of R
for Windows at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

It is cross-compiled and will be automatically updated whenever I
build a development version.

So, no guarantees, not even that it will run[1], but if you would like
a preview of the new features in the pipeline for R 1.1.0 / rw1010
please take a look.  One new feature is that the R.dll has version
information, so you can check the version you have from the Version tab
in Properties.  (Look at the R Version field for the date).

I would be particularly interested in comments on the new data entry
editor (used by fix/edit on data frames).  This is still work in progress
(in parallel with changes on X11).

I've attached the current CHANGES file.

Brian Ripley

[1] The current version does run.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; name=CHANGES; charset=us-ascii; x-unix-mode=0644
Content-Description: CHANGES
Content-MD5: 1aFidsl41SI2UU27ac9gFw==

		Windows-specific changes to R
		=============================

See the file NEWS for changes that affect all versions of R.


rw1010
======

There is now a GUI preferences editor on the Edit menu in Rgui.

A data entry editor is now implemented.  This is similar to the Unix
one (see ?dataentry) with the additional feature that right-clicking
in a cell turns it into an editable field (entered as a new value
by navigating away from the cell).

Rterm will now load and save the commands history (as Rgui does).
There is a new item on the File menu in Rgui to save the commands
history at that point in a session, and a new function savehistory()
(only applicable in Rgui and Rterm).

Colours in Rconsole can be specified as "Windows" and will be taken 
from the current Windows colour scheme. (The preferences editor will
save the actual colour, though.)

The placement of multiple pagers is now `random' (so they will not
always appear in the centre of the screen) and under the MDI interface
the pager rows and columns settings are respected.

The postscript() device can now spool plots to a printer. You will
need a suitable program to send a file to the spooler (or even to send
it to ghostscript to interpret PostScript for the printer): the RedMon
suite available from http://www.cs.wisc.edu/~ghost/rjl.html should
provide suitable tools.  See ?postscript for further details.

The new xfig() device can be used, and a port of xfig to Windows (with
an X server and the Cygwin B20.1 environment and X11R6.4 installed) is at
ftp.franken.de:/pub/win32/develop/gnuwin32/cygwin/porters/Humblet_Pierre_A/B20
as  xfig-3.2.2-cygwin-b20.1-bin.tar.gz

The R DLL and executables now have standard Windows version
information, which will appear on a Version tab of the Properties
dialog box in Explorer.

The internal unzip and the installer now use unzip5.41, not unzip5.40, and
the DLL interface is incompatible.

There are changes in the tools needed to build R (see the file INSTALL)
and those recommended for building packages from source (see the file
README.packages).

New makefile target zipdata-% to zip up data directories in packages.


rw1001
======

The installer, rwinst.exe, now checks for ZIP files as well as zip files,
as some browsers manage to map filenames to uppercase.

There are batch files  Rd2txt.bat Rdconv.bat Rdindex.bat Sd2Rd.bat
which are the equivalent of the Unix `R CMD foo' utilities mentioned in
`Writing R Extensions'.  To use these you must have R_HOME set as an
environment variable (using the form P:/R/rw1001).  There is also a
shell script Rd2dvi.sh which you can use if you have sh.exe (as
used to compile packages) and latex etc. The environment variable
XDVI sets the previewer, defaulting to xdvi.bat.

A file `Makevars' in the `src' directory of a package can be used to
add to/override the MakeDll makefile used to make foo.dll, as on Unix.
(See `Creating shared libraries', section 3.4 of `Writing R Extensions'.)

Under rare conditions (lots of very short input lines) the history buffer
could overrun and so cause crashes. This has been possible since rw0623,
but first caused reported problems in rw1000 and has now been fixed.

Certain HP printer drivers (e.g. the 6/6MP-Postscript driver) reset the
FPU and so were causing crashes.  This has been circumvented in this
version by restoring the settings before and after each page.

Building on a non-default drive should be more reliable, as Perl is
used to find the current drive.


    -------------------------------------------------------------------

	For changes prior to the release of R 1.0.0 on 29 Feb 2000
	see the file CHANGES0 in the source distribution.

--Colony_of_Beavers_524_000--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:50:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:50:40 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <39131800.C0C90A64@statistik.uni-dortmund.de>

At first:
Thank you (and the core team) again for great improvements.


> I have put up a cross-compiled version of the development version of R
> for Windows at
> 
> http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> 
> It is cross-compiled and will be automatically updated whenever I
> build a development version.

UNimportant:

The ASCII files in cross-compiled rw1010 have got "UNIX-style"
linebreaks.
E.g. README or CHANGES are not easy to read with notepad.exe .
I don't know anything about cross-compiling, but maybe it is easy to run
UNIX2DOS on ASCII-files.


> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).

Comments to this in a later mail.


> [....] 
>   ------------------------------------------------------------------------
>                 Windows-specific changes to R
>                 =============================
> 
> See the file NEWS for changes that affect all versions of R.
> 
> rw1010
> ======
> 
> There is now a GUI preferences editor on the Edit menu in Rgui.

The default path to "Save" Rconsole is neither /rw1010/etc nor the
working directory.
I think, setting the default to the working directory would be useful.


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:52:12 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:52:12 +0200
Subject: [Rd] Data Entry Editor
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <3913185C.AE3B059A@statistik.uni-dortmund.de>

Prof Brian Ripley, "[Rd] Windows version of R-devel":

> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).
> [...]
> A data entry editor is now implemented.  This is similar to the Unix
> one (see ?dataentry) with the additional feature that right-clicking
> in a cell turns it into an editable field (entered as a new value
> by navigating away from the cell).


You know most (or all) of the following points, I suppose:
(WinNT4.0)


- in help(dataentry): "... Tab moves left. ...", but moves right.

- Shift+Tab also moves right. I expected, it would move left (as in
other spreadsheets).

- If the "Data Entry Editor" is opened and you are moving the window of
another application around its window, it is "flickering" a long time.

- Using data.entry() on a existing matrix, list or data.frame, unnamed
columns after that are named "var1", "var2", etc.

- data.entry() does not work with all data.frames, e.g.:

   x <- data.frame(1:2, c("A", "B"))
   data.entry(x)
 Error in de.ncols(sdata) : wrong argument to dataentry

- data.entry() with some irregular names as "Modes" argument crashes,
e.g.:

   x <- 1
   data.entry(x, Modes = plot)
 Dr. Watson ...

- Expand existing vectors or matrices.
  It's to difficult to describe for me. Look into the examples:

   x <- 1
   data.entry(x)
   ## Klick into [2, 1]  (should be NA ?):
   0
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA


   x <- matrix(1:2, nrow=1)
   data.entry(x)
   ## Klick into [2, 1]: 
   1.#INF00e-316 
   ## and ENTER:
   1
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA




Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 20:09:07 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 21:09:07 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <39131C53.ABBDA0AE@statistik.uni-dortmund.de>

Uwe Ligges wrote:

> >
> > There is now a GUI preferences editor on the Edit menu in Rgui.
> 
> The default path to "Save" Rconsole is neither /rw1010/etc nor the
> working directory.
> I think, setting the default to the working directory would be useful.
> 

Ups! Just checked this again.
Default is set as described in ?Rconsole.  And this is absolutely
correct.
SORRY!

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  5 20:38:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 May 2000 20:38:11 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913185C.AE3B059A@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>

On Fri, 5 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley, "[Rd] Windows version of R-devel":
> 
> > I would be particularly interested in comments on the new data entry
> > editor (used by fix/edit on data frames).  This is still work in progress
> > (in parallel with changes on X11).
> > [...]
> > A data entry editor is now implemented.  This is similar to the Unix
> > one (see ?dataentry) with the additional feature that right-clicking
> > in a cell turns it into an editable field (entered as a new value
> > by navigating away from the cell).

data.entry on Unix has lots of quirks.  Thanks for the comments: as I
said, this is work in progress, and based on some already flaky code.

> You know most (or all) of the following points, I suppose:
> (WinNT4.0)
> 
> 
> - in help(dataentry): "... Tab moves left. ...", but moves right.

Thanks.

> - Shift+Tab also moves right. I expected, it would move left (as in
> other spreadsheets).

Not there, will add.

> - If the "Data Entry Editor" is opened and you are moving the window of
> another application around its window, it is "flickering" a long time.
> 
> - Using data.entry() on a existing matrix, list or data.frame, unnamed
> columns after that are named "var1", "var2", etc.

I don't see that here.

> - data.entry() does not work with all data.frames, e.g.:
> 
>    x <- data.frame(1:2, c("A", "B"))
>    data.entry(x)
>  Error in de.ncols(sdata) : wrong argument to dataentry

You should use edit and not data.entry with data frames.  That one is wrong
on Unix too.

> - data.entry() with some irregular names as "Modes" argument crashes,
> e.g.:
> 
>    x <- 1
>    data.entry(x, Modes = plot)
>  Dr. Watson ...

Crashes Unix too.

> - Expand existing vectors or matrices.
>   It's to difficult to describe for me. Look into the examples:
> 
>    x <- 1
>    data.entry(x)
>    ## Klick into [2, 1]  (should be NA ?):
>    0
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA
> 
> 
>    x <- matrix(1:2, nrow=1)
>    data.entry(x)
>    ## Klick into [2, 1]: 
>    1.#INF00e-316 
>    ## and ENTER:
>    1
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA

There's some bug there: will take a look. Also single-clicking seems
suspect at present, acting as double clicking, so this is related I think.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May  6 00:40:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2000 01:40:37 +0200
Subject: [Rd] Windows version of R-devel
In-Reply-To: Uwe Ligges's message of "Fri, 05 May 2000 20:50:40 +0200"
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <x2pur036ru.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> UNimportant:
> 
> The ASCII files in cross-compiled rw1010 have got "UNIX-style"
> linebreaks.
> E.g. README or CHANGES are not easy to read with notepad.exe .
> I don't know anything about cross-compiling, but maybe it is easy to run
> UNIX2DOS on ASCII-files.

...or switch to wordpad, which reads such files just fine.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sat May  6 05:01:51 2000
From: William.Venables@cmis.CSIRO.AU (William.Venables@cmis.CSIRO.AU)
Date: Sat, 6 May 2000 06:01:51 +0200 (MET DST)
Subject: [Rd] axis() deficiency (PR#535)
Message-ID: <200005060401.GAA26239@pubhealth.ku.dk>

This is more a deficiency than a bug.  The axis() function does
not seem to allow an axis to be placed internally on the plot (as
allowed by the argument pos to the corresponding S function).

The help information nevertheless has some reference to
"position" of the axis, (as well as side) as if there were some
choice about position other than side.

Bill Venables.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat May  6 10:18:10 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat, 06 May 2000 11:18:10 +0200
Subject: [Rd] Data Entry Editor
References: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>
Message-ID: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

> > > I would be particularly interested in comments on the new data entry
> > > editor (used by fix/edit on data frames).  This is still work in progress
> > > (in parallel with changes on X11).
> > > [...]
> > > A data entry editor is now implemented.  This is similar to the Unix
> > > one (see ?dataentry) with the additional feature that right-clicking
> > > in a cell turns it into an editable field (entered as a new value
> > > by navigating away from the cell).
> 
> data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> said, this is work in progress, and based on some already flaky code.

I know. My intention was to point out some of these "quirks".
The Editor will be very useful and already is a _great_ tool for simple
data editing.

Looks like I should tell something like this more gracefully, but my
english too bad...


> > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > columns after that are named "var1", "var2", etc.
> 
> I don't see that here.

Example:

 x <- matrix(1:6, nrow=2)
 x

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

 data.edit(x)
 ## Closing the editor without modifications:
 x

     var1 var2 var3
[1,]    1    3    5
[2,]    2    4    6

 
> > - data.entry() does not work with all data.frames, e.g.:
> >
> >    x <- data.frame(1:2, c("A", "B"))
> >    data.entry(x)
> >  Error in de.ncols(sdata) : wrong argument to dataentry
> 
> You should use edit and not data.entry with data frames.  That one is wrong
> on Unix too.

So have a look at this:
 
 x <- data.frame(1:2, c("A", "B"))
 edit(x) ## same as:  edit.data.frame(x)
 ## Click into [3, 1]

R crashes...


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May  6 11:11:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 May 2000 11:11:58 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005061105020.24002-100000@auk.stats>

On Sat, 6 May 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> 
> > > > I would be particularly interested in comments on the new data entry
> > > > editor (used by fix/edit on data frames).  This is still work in progress
> > > > (in parallel with changes on X11).
> > > > [...]
> > > > A data entry editor is now implemented.  This is similar to the Unix
> > > > one (see ?dataentry) with the additional feature that right-clicking
> > > > in a cell turns it into an editable field (entered as a new value
> > > > by navigating away from the cell).
> > 
> > data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> > said, this is work in progress, and based on some already flaky code.
> 
> I know. My intention was to point out some of these "quirks".
> The Editor will be very useful and already is a _great_ tool for simple
> data editing.
> 
> Looks like I should tell something like this more gracefully, but my
> english too bad...
> 
> 
> > > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > > columns after that are named "var1", "var2", etc.
> > 
> > I don't see that here.
> 
> Example:
> 
>  x <- matrix(1:6, nrow=2)
>  x
> 
>      [,1] [,2] [,3]
> [1,]    1    3    5
> [2,]    2    4    6
> 
>  data.edit(x)
>  ## Closing the editor without modifications:
>  x
> 
>      var1 var2 var3
> [1,]    1    3    5
> [2,]    2    4    6

Oh, I see, the names in the returned object. That's intentional.
As dara frames cannot have unnamed columns in R objects, I thought
you meant unnamed in the data editor.

> > > - data.entry() does not work with all data.frames, e.g.:
> > >
> > >    x <- data.frame(1:2, c("A", "B"))
> > >    data.entry(x)
> > >  Error in de.ncols(sdata) : wrong argument to dataentry
> > 
> > You should use edit and not data.entry with data frames.  That one is wrong
> > on Unix too.
> 
> So have a look at this:
>  
>  x <- data.frame(1:2, c("A", "B"))
>  edit(x) ## same as:  edit.data.frame(x)
>  ## Click into [3, 1]
> 
> R crashes...

I have already said there is a problem with that pre-version that the
double-click interval is set wrongly, so it normally thinks you have
double-clicked before selecting the cell. The problem is the clicking, not
being a data frame.

I'll put up a new version in a day or two.  Already there are lots of
extra features, for example variable-width (and re-sizeable) columns.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May  7 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005070515.HAA27653@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 495 *
Subject: barplot
From: skala@incoma.cz
Date: Tue, 21 Mar 2000 09:20:33 +0100 (MET)
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 528 *
Subject: Wrong SEs in predict.lm(..., type="terms")
Subject: Wrong SEs in predict.lm(..., type="terms")
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 26 Apr 2000 12:42:00 +1000 (EST)
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 530 *
Subject: rpois hangs
From: kjetikj@astro.uio.no
Date: Sun, 30 Apr 2000 21:01:02 +0200 (MET DST)
* PR# 529 *
Subject: graphics: par(mfg=c(i,j,r,c))
From: Craig.Mckinstry@pnl.gov
Date: Fri, 28 Apr 2000 17:36:35 +0200 (MET DST)
* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun May  7 12:58:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 7 May 2000 13:58:23 +0200 (MET DST)
Subject: [Rd] Problem with match.arg() (PR#536)
Message-ID: <200005071158.NAA29351@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: Version 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello again!

This is a follow-up to my message on R-help about a problem with match.arg()
I have a little more on the topic, but not much really. 

First, it was not entirely true what I wrote in r-help that I call match.arg()
in my ramp(), because ramp() just calls qamp() with runif() as argument, but 
I have found that it happens both in ramp() and qamp().

Last night, just before I went home, R crashed with a segmentation fault. 
Unfortunately, I had limit coredumpsize 0, because I seldom want core-files,
so I haven't got it. I have removed that limit now. I have not been able to 
reproduce the crash, however.

Now, for a
> last.dump
$"apply(cbind(rep(1e+05, 25000)), 1, lineprofile, 10, 100, 1, "point")"
<environment: 140e187f0>

$"FUN(newX[, i], ...)"
<environment: 1404b6608>

$"apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)), "
<environment: 1404b5460>

$"FUN(newX[, i], ...)"
<environment: 1400f6798>

$"photonsdetectedbin(ncb, intensityfromcloud(ncb, intensityfromcloud, "
<environment: 1400f55c8>

$"sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))"
<environment: 1400f53e8>

$"rpois(ncloudsbin, sensitivity * intensityfromcloud)"
<environment: 1400f5168>

$"intensityfromcloud(ncb, intensityfromcloud, exptime, amptype)"
<environment: 1400f4c68>

$"ramp(ncloudsbin, amptype)"
<environment: 1400f4920>

$"qamp(runif(n), type)"
<environment: 1400ebdc0>

$"match.arg(type)"
<environment: 1400e97f0>

$"all(arg == choices)"
<environment: 140e2d740>

attr(,"error.message")
[1] "Error in arg == choices : comparison (1) is possible only for vector
types\n"
attr(,"class")
[1] "dump.frames"

I have also inserted some print statements at some places in the code. First:
qamp <- function(p,  type=c("point", "nolens"))
{
  print(c(2,type))
  type <- match.arg(type)
  if(type == "point")
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  print(c(1,type))
  type <- match.arg(type)
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}
(I'll rewrite these to use switch eventually).

And, also in match.arg():
match.arg <- function (arg, choices) {
    if (missing(choices)) {
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
    }
    print(c(2, arg, choices))
    if (all(arg == choices)) return(choices[1])
[...]
Upon running, I get
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[thousands of these... :-) ]
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"
Error in arg == choices : comparison (1) is possible only for vector types
So, suddenly, "choices" doesn't have a value, and consequently, the error.
FWIW, I have also printed formals(qamp)$type inside qamp, and it has the 
right value. 

Now, it seems hard to reproduce, I just did 100000 runs of ramp(10000, "point")

directly with no problems. In my code, ramp is called by a function that is
called
by a function, that is... :-) 

However, the code isn't very involved, really, so if you want to try, here it
is:
ncloudsbin <- function(binno, ntotalclouds, numberofbins = 100,
                       linewidth = numberofbins / 6)
  return(ntotalclouds * dnorm(binno, sd = linewidth))

intensityfromcloud <- function(ncloudsbin, cloudintensity, exptime, amptype)
  return(cloudintensity * exptime * ramp(ncloudsbin, amptype))

photonsdetectedbin <- function(ncloudsbin, intensityfromcloud,
                               continuumintensity, exptime, amptype,
                               sensitivity)
  return(sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))
         + rgeom(1, 1 /(1 + (sensitivity * exptime * continuumintensity))))



lineprofile <- function(ntotalclouds, intensityfromcloud, continuumintensity,
                        exptime, amptype, sensitivity = 0.1, numberofbins =
100,
                        linewidth = numberofbins / 6)
{
  tf <- function(binno, ntotalclouds, intensityfromcloud, continuumintensity,
                 exptime, amptype, sensitivity, numberofbins, linewidth)
  {
    ncb <- ncloudsbin(binno, ntotalclouds, numberofbins, linewidth)
    return(photonsdetectedbin(ncb,
                   intensityfromcloud(
                            ncb, intensityfromcloud, exptime, amptype),
                   continuumintensity, exptime, amptype, sensitivity))
  }
  return(apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)),
               1, tf,
               ntotalclouds, intensityfromcloud, continuumintensity,
               exptime, amptype, sensitivity, numberofbins, linewidth)) 
}

Note that "amptype" is here the "type" of the ?amp-functions. 
I call this by e.g. 
ll25000 <- apply(cbind(rep(100000, 25000)), 1, lineprofile, 10, 100, 1,
"point")


Just an idea: I have some problems in an entirely unrelated and more involved 
piece of code where it seems like sometimes, arguments are not returned from a 
function, that is, one variable of an object suddenly has no value. I haven't
really figured out if that is a bug of mine or in R, but could it be possible 
that something in
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
doesn't get a value because there is an error in how objects are returned 
from a function?

BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
following:
Save workspace image? [y/n/c]: y
Error: NewWriteItem: unknown type 17

Well, I guess this isn't much go on, but I know you are really good at this!
By running the above code, the error happens on every run here, it is just a
matter
of letting it run for long enough. I hope it is something to start on. I have a
few
more last.dumps on file too, if they are of use.

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May  7 23:41:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 00:41:09 +0200
Subject: [Rd] Problem with match.arg() (PR#536)
In-Reply-To: kjetikj@astro.uio.no's message of "Sun, 7 May 2000 13:58:23 +0200 (MET DST)"
References: <200005071158.NAA29351@pubhealth.ku.dk>
Message-ID: <x2u2gac7ay.fsf@blueberry.kubism.ku.dk>

kjetikj@astro.uio.no writes:

> Full_Name: Kjetil Kjernsmo
> Version: Version 1.0.0
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
...
> BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
> following:
> Save workspace image? [y/n/c]: y
> Error: NewWriteItem: unknown type 17

That one was fixed in 1.0.1, I believe. (Perhaps you should upgrade
and see if the other problem goes away too... I don't see anything
obviously relevant in the NEWS file though)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May  8 15:24:20 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 May 2000 09:24:20 -0500
Subject: [Rd] P_sychics.com partnership
In-Reply-To: community@psychics.com's message of "Mon, 8 May 2000 03:53:52 -0400"
References: <200005080753.DAA21602@newlego.convoke.com>
Message-ID: <6rem7dw25n.fsf@franz.stat.wisc.edu>

	  [MM, list maintainer: The following was already bounced,
		    since I had updated my spam filters; that's why the
		    subject and the body have some "_" instead of "."   ]

community@psychics_com writes:

> Hello:
>
> We noticed you run a psychic related web site.

Hmm.  I'm not sure if we should interpret that statement regarding
r-devel as a compliment or an insult.  It could mean we answer
questions before people get around to asking them or it could mean
that our advice is about as useful and meaningful as that from other
members of the "psychic community".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Mon May  8 17:00:52 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Mon, 8 May 2000 18:00:52 +0200 (MET DST)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
Message-ID: <200005081600.SAA10511@pubhealth.ku.dk>


Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Here are the results:

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> m
     [,1] [,2]
[1,]  6.8  2.4
[2,]  2.4  8.2
R> eigen(m)
$values
[1] 19.281403  6.337993

$vectors
          [,1]       [,2]
[1,] 0.1918866  0.9967987
[2,] 0.9967987 -0.1918866


And for comparison, here is what I get on a Sun (with r-stable):

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> eigen (m)
$values
[1] 10  5

$vectors
     [,1] [,2]
[1,]  0.6  0.8
[2,]  0.8 -0.6


I found this by running "make check" which also stumbles over svd.
Please let me know how I can help to investigate this.

  -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = Under development (unstable)
 major = 1
 minor = 1.0
 year = 2000
 month = May
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  8 19:47:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 20:47:12 +0200
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <x2hfc86frj.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Hmm. We had a similar report a while back and it turned out to be
system specific. I believe the report was from Chong Gu.

> Version:
>  platform = powerpc-ibm-aix4.3.2.0
>  arch = powerpc
>  os = aix4.3.2.0
>  system = powerpc, aix4.3.2.0
>  status = Under development (unstable)
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = May
>  day = 3
>  language = R

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pflugshaupt@geobot.umnw.ethz.ch  Tue May  9 11:44:07 2000
From: pflugshaupt@geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 09 May 2000 11:44:07 +0100
Subject: [Rd] Type III Sums of Squares?
Message-ID: <B53DAA87.216D%pflugshaupt@geobot.umnw.ethz.ch>

Hello,

I'd like to propose an extension to the function summary.aov.

In Splus (2000, I don't know about other versions), summary.aov allows a
parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
Sums of Squares. 

I know I can get Type III SS in R with drop1(model), but including the
functionality into summary.aov would, in my opinion,

- yield a more usable table (for example, the residual Df are missing in the
  drop1 table)
- put it into the obvious place to look for it
- increase S-Plus compatibility (by a minor degree, I'll admit)
- not break anything else (I might be wrong here)

Not knowing how to add it to the summary.aov function, I wrote a function to
extract the SS from drop1 output and paste them into a summary.aov table
(see below), but that's of course an ugly solution. I feel that there has to
be a simpler and more efficient way, such as reusing just the required parts
of drop1 inside summary.aov. But since I cannot give the matter enough time
to do it correctly, someone with more insight into the source code would
have to do it.

If including the functionality via an additional parameter doesn't require a
whole rebuild of summary.aov, I'd like to put it as a minor item on the
wish-list for some next version of R.

Cheers (and thanks for a great piece of software)

Kaspar Pflugshaupt



"summmary.aov.t3" <-
function (aov.obj) 
{
    # ugly hack, relies on names in output
    # tables of drop1 and summary.aov
 
    s <- summary(aov.obj)
    d <- drop1(aov.obj, test = "F")
    n <- nrow(d)
    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
    s
}

-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt@geobot.umnw.ethz.ch
privat:pflugshaupt@mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue May  9 12:00:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 May 2000 13:00:52 +0200
Subject: [Rd] R-WinEdt news
Message-ID: <3917EFE4.3C3EE78@statistik.uni-dortmund.de>

Dear Windows / WinEdt users!

A new version of the "R-WinEdt package" is available now.
(I know, Prof Brian D Ripley is not "... [enthusiastic] using it
[WinEdt] with an Open Source project.")

There are a few important improvements (and some bugfixes).

If you are interested, have a look at:
  http://www.statistik.uni-dortmund.de/leute/ligges.htm
(or in a few days on CRAN, I suppose).


Requirements: 
- Windows 32bit
- R-1.0.0 or later (one feature depends on R-1.1.0, in development)
- WinEdt 5 (build 20000415 or later)


Feel free to send bug reports, comments and feature requests.


Important part of the ReadMe:
=============================================================

Features:
---------

  - Syntax-Highlighting  (and highlighted printing)
    (function index of all packages available at CRAN 
     /bin/windows/windows-NT/contrib/ ,
     last update: 05.03.2000, R-1.0.0).

  - Many R functions at the same time in the same editor.

  - Buttons / Shortcuts for simple access (one click) to:

	- Save document and source(.) into R.

	- Paste selected code from WinEdt directly to R 
          (e.g. from history)

	- Open (and update) .Rhistory (so you can reuse your last commands).
          (Only works with rw1010 (R-1.1.0, in development) or later!)

  - Templates, e.g.: for(_ in _){_}

  - Faster starting than with standard configuration (of WinEdt).

  - Features of WinEdt 
    (e.g. Delimiter Check, advanced searching, bookmarks, macros, ...).

  - Independent of another WinEdt running with "LaTeX-configuration".

===================================================================


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Tue May  9 12:29:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Tue, 09 May 2000 21:29:24 +1000
Subject: [Rd] Type III Sums of Squares?
Message-ID: <3.0.32.20000509212921.01269370@pophost.nsw.cmis.csiro.au>

I'm tempted to say "Type III Sums of Squares? Just say 'no'."  Or any other
type, for that matter.

Personally I would be strongly against this suggestion, as I was when
S-PLUS first proposed it (sadly, to no avail).  It would encourage people
to use the damn things!  More precisely it would give some unwarranted
credibility to the whole SAS malarkey of "Type X" Sums of Squares, "Types"
of estimable functions, &c &c and further obscure the essential simplicity
of linear models.

If people are silly (and cold blooded) enough to use Type III Sums of
Squares the technology is there to do it, provided they understand how to
do it and are prepared to go to a little trouble.  I see no reason to make
it easy for them.

This may sound more than a little uncompromising to Kaspar, but this is an
old issue and we have been here lots of times before.

Bill Venables.




At 11:44 AM 5/9/00 +0100, Kaspar Pflugshaupt wrote:
>Hello,
>
>I'd like to propose an extension to the function summary.aov.
>
>In Splus (2000, I don't know about other versions), summary.aov allows a
>parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
>Sums of Squares. 
>
>I know I can get Type III SS in R with drop1(model), but including the
>functionality into summary.aov would, in my opinion,
>
>- yield a more usable table (for example, the residual Df are missing in the
>  drop1 table)
>- put it into the obvious place to look for it
>- increase S-Plus compatibility (by a minor degree, I'll admit)
>- not break anything else (I might be wrong here)
>
>Not knowing how to add it to the summary.aov function, I wrote a function to
>extract the SS from drop1 output and paste them into a summary.aov table
>(see below), but that's of course an ugly solution. I feel that there has to
>be a simpler and more efficient way, such as reusing just the required parts
>of drop1 inside summary.aov. But since I cannot give the matter enough time
>to do it correctly, someone with more insight into the source code would
>have to do it.
>
>If including the functionality via an additional parameter doesn't require a
>whole rebuild of summary.aov, I'd like to put it as a minor item on the
>wish-list for some next version of R.
>
>Cheers (and thanks for a great piece of software)
>
>Kaspar Pflugshaupt
>
>
>
>"summmary.aov.t3" <-
>function (aov.obj) 
>{
>    # ugly hack, relies on names in output
>    # tables of drop1 and summary.aov
> 
>    s <- summary(aov.obj)
>    d <- drop1(aov.obj, test = "F")
>    n <- nrow(d)
>    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
>    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
>    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
>    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
>    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
>    s
>}
>
>-- 
>
>Kaspar Pflugshaupt
>Geobotanisches Institut
>Zuerichbergstr. 38
>CH-8044 Zuerich
>
>Tel. ++41 1 632 43 19
>Fax  ++41 1 632 12 15
>
>mailto:pflugshaupt@geobot.umnw.ethz.ch
>privat:pflugshaupt@mails.ch
>http://www.geobot.umnw.ethz.ch
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May  9 16:39:05 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 9 May 2000 08:39:05 -0700 (PDT)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005090837420.4639-100000@mail.biostat.washington.edu>

On Mon, 8 May 2000 tov@ece.cmu.edu wrote:

> 
> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 

When we last saw this bug it was compiler-specific.  gcc/g77 worked but
cc/f77 didn't (and I think gcc/f77 wouldn't even configure). 

I don't think we understand the bug, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alert35@us.sina.com  Wed May 10 03:58:39 2000
From: alert35@us.sina.com (alert35@us.sina.com)
Date: Tue, 09 May 2000 22:58:39 -0400
Subject: [Rd] The Contrarian - BUY ALERT                        .                ~*
Message-ID: <B0000031817@servidor2.opendat.cl>


THE CONTRARIAN           

                                                        

BUY ALERT: 



RecycleNet Corp.

Symbol - GARM (OTCBB-pink sheets)      

Recent Price - $.35

52 Week Range - $.12 - .75

Estimated Float - 4 Million

Shares Outstanding - 78 Million

   

Now that Microsoft and other Internet stocks have fallen, it's time to 

sift through the wreckage and look for treasure. As Contrarian investors, 

we've been waiting for this dynamic group to fall out of favor temporarily, 

so we can buy at discounted prices.



The following stock should be purchased for long-term capital gains:

RecycleNet Corporation is hardly a new player in the dot.com game - 

they went electronic in May 1995, after many years in a print format.  

Their founder and current Chairman, Paul Roszel, has been in the 

recycling business for over 20 years, and has vast experience with 

every type of scrap commodity. 



Recyclenet is part of the booming "B2B" business to business portion 

of the Internet. It is estimated that B2B electronic commerce will soar 

from $17 Billion in sales in 1998 to $327 Billion by 2002. Electronic 

commerce gives GARM the ability to trade with other companies all over 

the world, at very low cost. They earn money from subscribers who pay 

a monthly fee to join their Recycler's Exchange.   



What is the reason to buy now? RecycleNet should be reporting excellent 

revenues and earnings in the next quarter, the floating supply of shares is 

small, and the financial community is just starting to discover GARM. They 

have filed their Form 10 to become a reporting company with the SEC, and 

they should be emerging from their pink sheet listing soon.

   

Meanwhile, traffic at their web site is hitting record numbers (almost 2 Million 

page views per month), and is growing at over 20% monthly. With the stock 

trading at half of its February peak, The Contrarian believes that GARM can 

reach the $1.50 level near-term, with even higher prices further out. Take a 

position now while RecycleNet is on the bargain shelf. 



Disclaimer: The Contrarian has no affiliation with the issuer, and has received 

no fee from RecycleNet for this report. The Contrarian and/or its affiliates currently 

own shares of RecycleNet, and may buy or sell shares at any time after the 

dissemination of this report.  Because the publisher owns this stock, there may 

be a conflict of interest in the Contrarian's statements and opinions. The Contrarian 

is not a registered investment advisor, broker or dealer. Purchase of this stock 

may be considered speculative, and may result in the loss of some or all of any 

investment made. 



To SUBSCRIBE to future announcements or request ADDTIONAL INFORMATION 

regarding the RecycleNet opportunity, please click on the appropriate link below 

and hit send.



mailto:zone15@us.sina.com?subject=Subscribe



mailto:zone15@us.sina.com?subject=Additional-Information





******************************************

If you wish to be deleted from inclusion 

any future mailing, please click on the 

link below and hit send.

******************************************



mailto:zone15@us.sina.com?subject=delete 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 10 07:18:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 May 2000 08:18:33 +0200 (CEST)
Subject: [Rd] R and Java ? [forwarded]
Message-ID: <14616.65337.215048.847011@lynne.ethz.ch>

This is of broader interest,
and I'm not the expert.. 

------- start of forwarded message -------
From: Cheryl J Fernandes <cferna3@uic.edu>
To: maechler@stat.math.ethz.ch
Subject: Re R and Java
Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)


Hi Martin,
    I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
at the university of Illinois, at Chicago.

I have tried and tried but just cannot manage to find teh solutuon to teh
following problem.

My question is: Can R be interfaced with Java. ??

My dilemma: I'm trying to run  the RGui program in WintNT from a Java
application. i;m using runtime.exec()
It opens teh program but after that nothing happens. After opening teh
program i'm passing some commands to R via java's process
OutputStreamWriter. But it does NOT respond to any of teh commands not
even by giving an exception. 

Coudl u please let me know if i can pass commandline commands to RGui from
within Java or are there special API's that are available. I know for a
fact taht Java does NOT have API's for R. It does have special interface
API for major programs
like C. Excel, MS-Word 

Any help would be greatly appreciated.

The code for the above is:


Runtime  rt = Runtime.getRuntime();
String strCmdTmp =""; 
strCmdTmp =  "Z:\\R\\rw1000\\bin\\Rgui ";
   
Process jproc= 	rt.exec(strCmdTmp);    	    
OutputStreamWriter o = new OutputStreamWriter(jproc.getOutputStream()); 

o.write("a<-c(4,5)\n");
o.write("mean(a)\n");
o.write("quit(\"no\")\n"); 
o.flush();
        	
String line=null;

BufferedReader reader = new BufferedReader(new
InputStreamReader(jproc.getInputStream()));
while((line = reader.readLine())!=null)
System.out.println(" The line is:  " +line);


Thanks in advance,

Cheryl Fernandes                 (Home): (312) 432 4396, (630) 834 3796 
1926 W Harrison Street,          (Office): (312) 996 4605        
Medical Center Apartments,
Apt# 1202,
Chicago, IL 60612

email: cferna3@uic.edu
       cfernand@eecs.uic.edu

------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May 10 16:27:39 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 10 May 2000 08:27:39 -0700 (PDT)
Subject: [Rd] R and Java ? [forwarded]
In-Reply-To: <14616.65337.215048.847011@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005100825290.1359-100000@mail.biostat.washington.edu>

On Wed, 10 May 2000, Martin Maechler wrote:

> This is of broader interest,
> and I'm not the expert.. 
> 
> ------- start of forwarded message -------
> From: Cheryl J Fernandes <cferna3@uic.edu>
> To: maechler@stat.math.ethz.ch
> Subject: Re R and Java
> Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)
> 
> 
> Hi Martin,
>     I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
> at the university of Illinois, at Chicago.
> 
> I have tried and tried but just cannot manage to find teh solutuon to teh
> following problem.
> 
> My question is: Can R be interfaced with Java. ??
> 
> My dilemma: I'm trying to run  the RGui program in WintNT from a Java
> application. i;m using runtime.exec()
> It opens teh program but after that nothing happens. After opening teh
> program i'm passing some commands to R via java's process
> OutputStreamWriter. But it does NOT respond to any of teh commands not
> even by giving an exception. 
> 
> Coudl u please let me know if i can pass commandline commands to RGui from
> within Java or are there special API's that are available. I know for a
> fact taht Java does NOT have API's for R. It does have special interface
> API for major programs
> like C. Excel, MS-Word 
> 

You could probably use the COM interface to R, which is available from
CRAN under 'non-standard extensions'.  It's still under development but it
does some things.  I believe there is a set of classes for calling COM
from Java under Windows.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From denis@mercury.cor.epa.gov  Wed May 10 23:00:23 2000
From: denis@mercury.cor.epa.gov (denis@mercury.cor.epa.gov)
Date: Thu, 11 May 2000 00:00:23 +0200 (MET DST)
Subject: [Rd] no $method from as.hclust (PR#538)
Message-ID: <200005102200.AAA05996@pubhealth.ku.dk>

as.hclust returns objects with only 6 of the standard 7 
components of class hclust, leaving out "method", therefore
being incompatible with applications looking for all
7 components.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 11 13:53:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 May 2000 13:53:21 +0100 (BST)
Subject: [Rd] scale factors/overdispersion in GLM: possible bug?
Message-ID: <200005111253.NAA03787@toucan.stats.ox.ac.uk>

> Date: Wed, 19 Apr 2000 10:46:45 -0400 (EDT)
> From: Ben Bolker <ben@zoo.ufl.edu>

A belated reply: I have been away and then busy (including on this).

>   I've been poking around with GLMs (on which I am *not* an expert) on
> behalf of a student, particularly binomial (standard logit link) nested
> models with overdispersion.
> 
>   I have one possible bug to report (but I'm not confident enough to be
> *sure* it's a bug); one comment on the general inconsistency that seems to
> afflict the various functions for dealing with overdispersion in GLMs
> (anova.glm, drop1.glm, summary.glm); and one statistical query that maybe
> someone would answer if they're feeling generous.
> 
>   1.  possible bug:
>   in drop1.glm() with scale != 0, R seems to divide by the dispersion
> parameter twice:
> 
>  first (if family != "gaussian") it sets
> 
>  loglik <- dev/dispersion
> 
>  then (if test == "Chisq") it calculates
> 
>      dev <- loglik - loglik[1]
>      dev[nas] <- 1 - pchisq(dev[nas]/dispersion, aod$Df[nas])
> 
> (in addition, I suppose this could now be just 
> pchisq(...,lower.tail=FALSE) for greater precision)
> 
>   Is this a bug or am I missing something?

A bug.  Using the appropriate tail for accuracy is irrelevant, though.

>   2.  There seems to be a fair amount of variability in how drop1.glm,
> anova.glm, stat.anova, summary.glm deal with dispersion parameters:
>   summary.glm() has an optional parameter called "dispersion"
>   stat.anova() has a parameter called "scale", which it doesn't even use
> if test=="Chisq"
>   anova.glm calls stat.anova() with an automatically calculated scale
> parameter (sum(object$weights*object$residuals^2)/object$df.residual), not
> allowing a user-defined scale
>   drop1.glm() has an optional parameter called "scale"
> 
>   I would mess around and try to fix these myself, but (1) there seem to
> be some design decisions to make here, (2) I'm not sufficiently sure of
> myself to want to break things.

I've worked over all these for 1.1.0.  Be careful in how much sameness
to expect, though. drop1 has an argument called 'scale', and is
generic.  So drop1.glm must have the same name even though `dispersion'
might be more appropriate.

>   3. There seems to be a certain variety of advice around in how to deal
> with overdispersion in GLMs.  One could (1) calculate the scale parameter
> from the residuals (either residual deviance/residual df or Pearson
> chi-sq/residual df) and feed that back into the analysis; (2) use
> quasi-likelihood with logit link and variance mu(1-mu); (3) use a form of
> F-test, as suggested by Crawley (which I guess has something to do with
> the fact that the scale parameter is estimated, not really known).  Are
> these equivalent, or approximately equivalent?  Does anyone have a
> favorite reference on the subject?  (I've been looking at V&R3, Crawley's
> "GLIM for Ecologists", and Lindsey's GLM book -- I haven't acquired Dobson
> or McCullagh and Nelder yet).

Over-dispersion is discussed at length in

Collett, D. (1991) Modelling Binary Data

and somewhat less discursively in

Cox & Snell (1989) Analysing Binary Data
McCullagh & Nelder (1989, section 4.5)
Aitkin, Anderson, Francis, Hinde (1983) Statistical Modelling in GLIM

amongst others.  Almost all of this is binomial models, but Aitkin et al
do consider Poisson.

Basically, all find some justification for a model with variance phi >=
1 times that given by a binomial or poisson family. For X_i ~
binomial(n, p_i), n > 1 not depending on i, this is known as the
Williams model in some circles.  So people since Williams (and I seem
to remember before) have been fitting such models and estimating phi by
residual deviance/residual df.  That is a quasi-likelihood procedure,
as even where real models exist, the glm is not giving the MLE.

To make sense of this I have introduced two new families, quasibinomial
and quasipoisson, that use the Williams model, and now 
binomial and Poisson never allow phi to be estimated.  And for the Williams
model there is an "F" test option to add1 and drop1 (and if you
use "F" with a binomial or poisson it tells you it is really using
the quasi-version).   This applies to summary.glm, predict.glm, anova.glm,
add1.glm, drop1.glm.  (As quasi models have no likelihood, they
have no AIC either, and so step will not work for them.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:03:30 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:03:30 +0200 (MET DST)
Subject: [Rd] Documentation of par(ann) (PR#539)
Message-ID: <200005121403.QAA23841@pubhealth.ku.dk>

The on-line documentation for the 'ann' argument under 
par(), states "If set to 'FALSE'...".  However, this 
parameter shows up as a numeric on my machine, not as a 
logical.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:04:26 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:04:26 +0200 (MET DST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
Message-ID: <200005121404.QAA23856@pubhealth.ku.dk>

The on-line documentation for par() refers to a 'gamma'
argument.
However, if 'par()' is invoked, there is no gamma argument.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:05:56 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:05:56 +0200 (MET DST)
Subject: [Rd] Typo in documentation for order() (PR#541)
Message-ID: <200005121405.QAA23903@pubhealth.ku.dk>

The documentation for 'order()' has the following sentence:

`sort.list' is the same, using only one argument put
allowing
     partial sorting.

Should "put" be "but" or possibly "'partial'"?

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:07:57 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:07:57 +0200 (MET DST)
Subject: [Rd] Inconsistent behavior of par() agruments on lines() (PR#542)
Message-ID: <200005121407.QAA23953@pubhealth.ku.dk>

Setting argument 'lty' via par() to dased lines does not
affect 
how lines are drawn with 'lines()' -- they remain solid. 
Two
possible fixes:
1) Have 'lty' affect the behavior of 'lines()'
2) Leave behavior as is, indicating in the documentation
that
the default is '1' and not 'par("lty")'.

Note:  Option 1 is more consistent with how the 'col'
argument to
par() is handled.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 15:57:23 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 15:57:23 +0100 (BST)
Subject: [Rd] Documentation of par(ann) (PR#539)
In-Reply-To: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121553480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for the 'ann' argument under 
> par(), states "If set to 'FALSE'...".  However, this 
> parameter shows up as a numeric on my machine, not as a 
> logical.

So? Try it

par(ann=FALSE)
plot(1:10)

works as documented.  It happens to use an integer internally.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29

You could upgrade to 1.0.1 before bug-reporting.


>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:04:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:04:02 +0100 (BST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
Unix it also appears. It is the second-last parameter.

Are you absolutely sure about this?  In any case, please upgrade to 1.0.1,
the current version.

The devga device on Windows is one of the few places where this parameter
actually does anything.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:05:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:05:21 +0100 (BST)
Subject: [Rd] Typo in documentation for order() (PR#541)
In-Reply-To: <200005121405.QAA23903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121604480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The documentation for 'order()' has the following sentence:
> 
> `sort.list' is the same, using only one argument put
> allowing
>      partial sorting.
> 
> Should "put" be "but" or possibly "'partial'"?

The first. Squashed now, thank you.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 12 16:27:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 2000 17:27:33 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: Prof Brian D Ripley's message of "Fri, 12 May 2000 16:04:02 +0100 (BST)"
References: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>
Message-ID: <x2em77ss9m.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Fri, 12 May 2000 salwin@mitretek.org wrote:
> 
> > The on-line documentation for par() refers to a 'gamma'
> > argument.
> > However, if 'par()' is invoked, there is no gamma argument.
> 
> There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
> Unix it also appears. It is the second-last parameter.

..curiously out of alphabetical sequence with the others (tlc is out
of sequence too). We might want to fix, even though we never promised
to display lists in alphabetical order: options() is completely
jumbled in that respect, for instance.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vilhuber@yorku.ca  Fri May 12 16:55:20 2000
From: vilhuber@yorku.ca (vilhuber@yorku.ca)
Date: Fri, 12 May 2000 17:55:20 +0200 (MET DST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
Message-ID: <200005121555.RAA24885@pubhealth.ku.dk>

Full_Name: Lars Vilhuber
Version: 1.0.1
OS: Linux (SuSE 6.3)
Submission from: (NULL) (148.129.143.2)


Problem arises when X11 headers not present.

- When running "./configure", X11 is not found, and "no" appears on the log
messages.
However, at compile time, the X11 headers are still referenced, and the
compilation 
bombs. I presume that either configuration should end with an error message, or

compilation ( makefiles or src files ) should respect the absence of X11
headers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 17:50:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 17:50:37 +0100 (BST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
In-Reply-To: <200005121555.RAA24885@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121748530.22244-100000@auk.stats>

On Fri, 12 May 2000 vilhuber@yorku.ca wrote:

> Full_Name: Lars Vilhuber
> Version: 1.0.1
> OS: Linux (SuSE 6.3)
> Submission from: (NULL) (148.129.143.2)
> 
> 
> Problem arises when X11 headers not present.
> 
> - When running "./configure", X11 is not found, and "no" appears on the log
> messages.
> However, at compile time, the X11 headers are still referenced, and the
> compilation 
> bombs. I presume that either configuration should end with an error message, or
> 
> compilation ( makefiles or src files ) should respect the absence of X11
> headers.

This is already fixed for 1.1.0: please try the R-devel snapshot.
(It certainly works with --without-x, and we would certainly be interested
to know if that is actually needed.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:35:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:35:57 +0200
Subject: [Rd] Documentation of par(ann) (PR#539)
References: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <391C16CD.A8D4D71@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for the 'ann' argument under
> par(), states "If set to 'FALSE'...".  However, this
> parameter shows up as a numeric on my machine, not as a
> logical.

par("ann"=FALSE) works as expected (and described) on NT4.0, R-1.0.1.
With par("ann") you get the value "translated" to numeric.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:37:42 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:37:42 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
References: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <391C1736.972181D@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

Hm. Here OK (R-1.0.1, NT4.0):

> par("gamma")
[1] 1

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jean.Thioulouse@biomserv.univ-lyon1.fr  Mon May 15 09:50:52 2000
From: Jean.Thioulouse@biomserv.univ-lyon1.fr (Jean Thioulouse)
Date: Mon, 15 May 2000 10:50:52 +0200
Subject: [Rd] Macintosh version of R
Message-ID: <p04310106b5456acbc26d@[134.214.92.69]>

Hello

I would like to have some information about the current status
of the Macintosh version of R. Is someone working on it ? Is it
possible to obtain the source of the Macintosh interface (0.64
version) ?

Thank you
Jean

-- 
Jean Thioulouse - Laboratoire de Biometrie et Biologie Evolutive
Universite Lyon 1 - Bat  711 - 69622 Villeurbanne Cedex - France
Fax: (33) 4 78 89 27 19              Tel/Fax: (33) 4 72 43 27 56
          http://pbil.univ-lyon1.fr/ADE-4/JTHome.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon May 15 15:26:11 2000
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151426.QAA13624@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.0.1
OS: Linux RH 6.1
Submission from: (NULL) (158.37.102.52)


I am trying to use pythag() from src/appl in a .Call() function.

pythag seems to be missing from the ROUTINES list in appl - putting
it in solved the problem:

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> dyn.load("pythagtry.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/rsb/tmp/pythagtry.so":
  /home/rsb/tmp/pythagtry.so: undefined symbol: pythag
> is.loaded("pythag")
[1] FALSE
-----------------------------------------
/* pythagtry.c */
#include <R.h>
#include <Rdefines.h>
#include <R_ext/Applic.h>

SEXP pytry(SEXP x, SEXP y)
{
	SEXP ans;
	double xa, xb;
	xa = NUMERIC_POINTER(x)[0];
	xb = NUMERIC_POINTER(y)[0];
	PROTECT(ans = NEW_NUMERIC(1));
	NUMERIC_POINTER(ans)[0] = pythag(xa, xb);
	UNPROTECT(1);
	return(ans);
}
-------------------------------------------------------------
$ R_HOME=/usr/local/lib/R gcc -I/usr/local/lib/R/include -c pythagtry.c
$ gcc -shared -o pythagtry.so pythagtry.o
-----------------------------------------------------------
added:

C_FUNCTION(pythag)

to /usr/local/src/R-1.0.1/src/appl/ROUTINES

make
make install

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> is.loaded("pythag")
[1] TRUE
> dyn.load("pythagtry.so")
> .Call("pytry", x, y)
[1] 1.414214




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 15 15:29:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 15 May 2000 16:29:30 +0200 (MET DST)
Subject: [Rd] Segmentation Fault of unknown cause (PR#545)
Message-ID: <200005151429.QAA13653@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm afraid I have another obscure bug. 
R has just crashed with a segmentation fault. 
This time, I have even failed to reproduce it, but fortunately, 
I have a core dump. It's at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/core>

The call I did was 
log10(quantile(chisqtests5M11001, c(0.05, 0.95)))
where chisqtests5M11001 is an array of length 1500 
(it's an array of p-values produced by the chisq.test, but I 
doubt that it is relevant). 

I did lots of strange things prior to the crash, some even 
involving for-loops, but I can't tell what is relevant. Anyway,
a transcript of the session is at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/crash.Rt>

That's all I've got.... 

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 15 17:25:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 May 2000 17:25:00 +0100 (BST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151625.RAA06867@toucan.stats.ox.ac.uk>


> From: Roger.Bivand@nhh.no
> Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Roger Bivand
> Version: 1.0.1
> OS: Linux RH 6.1
> Submission from: (NULL) (158.37.102.52)
> 
> 
> I am trying to use pythag() from src/appl in a .Call() function.
> 
> pythag seems to be missing from the ROUTINES list in appl - putting
> it in solved the problem:

But that is not the purpose of that file.  As it says, it is for
internal .C and .Fortran entry points, and its entries get put in the
search table for such entries.  And pythag is not a suitable entry
point (its arguments are not pointers, it returns a value ...).

The real problem seems to be that nothing internal to R calls pythag,
and so pythag.o does not get loaded when R.bin is built.  Thus I don't
know what it is doing in the R source.  The solution is to make one of
the modules in src/main call it via a dummy routine, or just to link it
with your own code.

If we want it in, we should merge pythag.c with something else in 
src/appl.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Thu May 18 09:57:08 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Thu, 18 May 2000 10:57:08 +0200
Subject: [Rd] attach (S-style)?
Message-ID: <3.0.5.32.20000518105708.00975a10@mail.wsl.ch>

Hi everyone,

Being new to the crowd of R users I am wondering what the equivalent of  

attach("/home/bla/hoffmann/R/.RData",2) 

 (S style) is in R.

What I want is a split of .RData repositories. One in a central place where I keep functions and interesting stuff important for all work I am doing, an several others which contain stuff of an dividual project only. When I start in a project directory I want to make available the central stuff. If I do it like in S+ I am getting and rightly so:

Error in attach("/home/woodstock/hoffmann/R/.RData", 2) : 
	attach only works for lists and data frames

What is the trick to use in R?  

To successfully read R-exts.texi which I hope contains steps to do it I need a way to make it readable to 
my latex command which refuses to rpoceed past line 1229 with
-----------
(R-exts.texi
LaTeX2e <1996/12/01> patch level 1
Babel <v3.6h> and hyphenation patterns for american, german, loaded.
(texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
! Undefined control sequence.
\resetmathfonts ...nt 2 = \tensy \textfont \itfam 
                                                  = \tenit \textfont \slfam ...
l.1229 \textfonts
--------------

Thanks for your help.
--Christian

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 18 10:19:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 18 May 2000 10:19:49 +0100 (BST)
Subject: [Rd] attach (S-style)?
Message-ID: <200005180919.KAA00833@toucan.stats.ox.ac.uk>

> Date: Thu, 18 May 2000 10:57:08 +0200
> From: Christian Hoffmann <christian.hoffmann@wsl.ch>
> 

[...]

> To successfully read R-exts.texi which I hope contains steps to do it I need a 
way to make it readable to 
> my latex command which refuses to rpoceed past line 1229 with
> -----------
> (R-exts.texi
> LaTeX2e <1996/12/01> patch level 1
> Babel <v3.6h> and hyphenation patterns for american, german, loaded.
> (texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
> ! Undefined control sequence.
> \resetmathfonts ...nt 2 = \tensy \textfont \itfam 
>                                                   = \tenit \textfont \slfam 
...
> l.1229 \textfonts

It's texinfo (.texi) not LaTeX, and is processed by tex not latex
via texi2dvi.   Just

make R-exts.dvi

or

make R-exts.pdf

should process it for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:42:04 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190842.KAA28916@pubhealth.ku.dk>

I was surprised to find that the variance of a scalar, using
var(), is NA.  Surely this should be zero?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:HistoryMatch, package:zmatrix, package:stepfun, package:Simulator, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 09:48:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 09:48:53 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190848.JAA22344@toucan.stats.ox.ac.uk>

> From: J.C.Rougier@durham.ac.uk
> Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?
> 

Do you mean a vector of length 1? (S has no scalars.)  No, it should be
NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
no idea at all of the variability from a single sample.

S gives NA too.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:57:10 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005190952290.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I was surprised to find that the variance of a scalar, using
> > var(), is NA.  Surely this should be zero?
> > 
> 
> Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> no idea at all of the variability from a single sample.

I thought that might be the reason.  There is no mention of using n-1
rather than n in the denominator on the help page.  Perhaps that might be
added?

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:06:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:06:32 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 19 May 2000 10:42:04 +0200 (MET DST)"
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <x2k8gqlxif.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

I don't think so. There's a divide by zero involved.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 19 10:01:29 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 19 May 2000 11:01:29 +0200
Subject: [Rd] variance of a scalar (PR#546)
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <392502E9.134C262B@statistik.uni-dortmund.de>


J.C.Rougier@durham.ac.uk wrote:
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

1. This is ok. var(.) is defined as:
   var(x)= (1 / (n - 1)) * sum(x - mean(x))^2
                 ^^^^^
If you has got a scalar: n - 1 = 0, so it is undefined!

> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0

You should upgrade to 1.0.1

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 10:04:09 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 10:04:09 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190904.KAA22592@toucan.stats.ox.ac.uk>


> Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] variance of a scalar (PR#546)
> 
> On Fri, 19 May 2000, Prof Brian Ripley wrote:
> 
> > > I was surprised to find that the variance of a scalar, using
> > > var(), is NA.  Surely this should be zero?
> > > 
> > 
> > Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> > NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> > no idea at all of the variability from a single sample.
> 
> I thought that might be the reason.  There is no mention of using n-1
> rather than n in the denominator on the help page.  Perhaps that might be
> added?

Um. What professional statistics package uses n, then?  Are you
suggesting that there is serious room for doubt?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 10:11:00 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 10:11:00 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005191006140.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

Well, I may not be the gold standard for statisticians but I just called
var(x) when x was the population, not a sample.  Unfortunately I did this
without thinking as it corresponds closely to my notes.  So although a
statistics package might use n-1 without question, I think a statistical
computing environment could be a little more flexible, at least in its
documentation.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:19:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:19:16 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: Prof Brian Ripley's message of "Fri, 19 May 2000 10:04:09 +0100 (BST)"
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <x2hfbulwx7.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

SAS does, actually. Option VARDEF can be N or DF in PROC MEANS (and/or
PROC UNIVARIATE). [And pardon the shouting, SAS just looks that way..]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri May 19 10:51:26 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 19 May 2000 19:51:26 +1000
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <3.0.32.20000519195123.0127d690@pophost.nsw.cmis.csiro.au>

At 10:04 AM 5/19/00 +0100, Prof Brian Ripley wrote:
>
>> On Fri, 19 May 2000, Prof Brian Ripley wrote:
>> 
>> 
>> I thought that might be the reason.  There is no mention of using n-1
>> rather than n in the denominator on the help page.  Perhaps that might be
>> added?
>
>Um. What professional statistics package uses n, then?  Are you
>suggesting that there is serious room for doubt?
>

S-PLUS, actually.  Not in this context, of course, but princomp() when
given a data matrix uses n as the divisor for the variance matrix.  Amazing
stuff.  This in turn is translated into the eigenvalues (principal
variances) of course.  I was really puzzled about this while I was trying
to explain to one of my colleagues what a simple generic calculation
principal components really was and I was getting the same coefficients as
princomp but slightly different variances.  In a flash of inspiration I
tried multiplying them by n/(n-1) and hey presto!

Of course the case for an n-1 divisor is much less convincing in this
context because even though it gives an unbiased (REML, maximum marginal
likelihood, ...) estimator of the variance, the eigenvalues are certainly
not unbiased estimators of the eigenvalues of the population variance
matrix (but it can't hurt, either!).

Bill.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri May 19 14:31:00 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 May 2000 15:31:00 +0200 (CEST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
References: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <14629.16916.782701.119727@lynne.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: J.C.Rougier@durham.ac.uk Date: Fri, 19 May 2000 10:42:04 +0200
    >> (MET DST)
    >> 
    >> I was surprised to find that the variance of a scalar, using var(),
    >> is NA.  Surely this should be zero?

    BDR> Do you mean a vector of length 1? (S has no scalars.)  No, it
    BDR> should be NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical
    BDR> terms, one has no idea at all of the variability from a single
    BDR> sample.

    BDR> S gives NA too.

Now I'm becoming really picky ....

There *is* a bug[let] but not the way you thought :
As we have seen,  when  length(x) == 1,
var(x) should be semantically equivalent to  
	      (x - x)^2 / (1 - 1) == 0 / 0 = NaN
as Brian says above.

Now the bug is:  R returns NA, and not NaN.
whereas e.g. S-plus 5.1 (and probably all the other
 ``non-R S language implementations'') return NaN, but it's not immediately
visible since only R prints NaN's as "NaN" whereas ``S'' prints NaNs as "NA".

I'm about to fix this bug (in src/main/cov.c) and also mention the
"1/(n-1)" denominator in the documentation, since it seems that (some)one could
think of other denominators.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 19 20:11:52 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 19 May 2000 21:11:52 +0200 (MET DST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
Message-ID: <200005191911.VAA02042@pubhealth.ku.dk>

(i.e. my version Solaris, see below...)

Note that system() is not only implemented quite system-dependently
(which you'd very much expect!) but also Unix and Windows have quite
different arguments apart from the first two.

Hence all the following is ``Unix-only'' :


A user stumbled across this when using read.table.url(.) on a platform
where no "wget" is installed: 

The data is read ok, but an ugly message appears *before* the command is
completed :
	  -------------------
	  sh: wget: not found
	  -------------------
which made the user believe that the data wasn't read properly.

The problem is easily tracked to the system(..) call in download.file()
{which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
and found that on our Solaris environment, 
the ignore.stderr argument does not seem to have any effect, i.e.

  > system("bla", ignore.stderr = TRUE)

gives the same as  system("bla"), namely
  
  sh: bla: not found
 
On my Linux environment,  ignore.stderr works as advertized.

Further note that  help(system)  should probably also say something about which
shell may or may not be used (I think we decided that we want it to be `sh'
on Unix).


--please do not edit the information below-- {did anyway ;=)}

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1

 --- either R-devel of today, or also 1.0.1 ---

 year = 2000
 month = May
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 19 22:46:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 19 May 2000 22:46:09 +0100 (BST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
In-Reply-To: <200005191911.VAA02042@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005192223470.4118-100000@auk.stats>

On Fri, 19 May 2000 maechler@stat.math.ethz.ch wrote:

> (i.e. my version Solaris, see below...)
> 
> Note that system() is not only implemented quite system-dependently
> (which you'd very much expect!) but also Unix and Windows have quite
> different arguments apart from the first two.
> 
> Hence all the following is ``Unix-only'' :
> 
> 
> A user stumbled across this when using read.table.url(.) on a platform
> where no "wget" is installed: 
> 
> The data is read ok, but an ugly message appears *before* the command is
> completed :
> 	  -------------------
> 	  sh: wget: not found
> 	  -------------------
> which made the user believe that the data wasn't read properly.
> 
> The problem is easily tracked to the system(..) call in download.file()
> {which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
> and found that on our Solaris environment, 
> the ignore.stderr argument does not seem to have any effect, i.e.
> 
>   > system("bla", ignore.stderr = TRUE)
> 
> gives the same as  system("bla"), namely
>   
>   sh: bla: not found

Under sh you cannot redirect the output from a command until the command
is running.  That is, you are not redirecting the error messages from sh,
only from the command.  Unless the command runs, ignore.stderr has no
effect.

> On my Linux environment,  ignore.stderr works as advertized.

Depends how you read the advertising.

> Further note that  help(system)  should probably also say something about which
> shell may or may not be used (I think we decided that we want it to be `sh'
> on Unix).

Yes, and you almost certainly got bash *not* sh on your Linux, and that
behaves differently.  I think you will find that a closer sh clone (such as
ash) does show the error message.  That some Linux systems claim to have sh
and do not is a major compatibility problem in writing shell scripts and
Makefiles, as we keep finding.

BTW, Solaris will use ksh not sh for the shell if it needs to be POSIX
compatible. And ksh behaves like bash in this respect.


I believe that to define this portably we are going to have to do something
a lot more complicated than accept what the system() call gives us. Are you
volunteering, Martin?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sat May 20 00:45:53 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Sat, 20 May 2000 01:45:53 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005192345.BAA02795@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.01
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


The character "*" displays too high in comparison to the graph space and other
characters in the plot. Consider:

> a_-0.15
> plot(c(0,100),c(0,1))
> for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> abline(1,0)

This may be a well understood effect of using display characters, but the "o" in
the
original plot call falls in the right place.

Thanks again for R-it's getting me a doctorate,
adrian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat May 20 03:24:29 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 20 May 2000 14:24:29 +1200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: <200005192345.BAA02795@pubhealth.ku.dk>; from acuster@nature.berkeley.edu on Sat, May 20, 2000 at 01:45:53AM +0200
References: <200005192345.BAA02795@pubhealth.ku.dk>
Message-ID: <20000520142429.A20866@stat1.stat.auckland.ac.nz>

On Sat, May 20, 2000 at 01:45:53AM +0200, acuster@nature.berkeley.edu wrote:
> 
> Thanks again for R-it's getting me a doctorate,
> adrian

Jeepers, which function does that?  [ We've got few students here
who be keen to know :-) ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005210515.HAA02760@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 548 *
Subject: graphics character misplaced
From: acuster@nature.berkeley.edu
Date: Sat, 20 May 2000 01:45:51 +0200 (MET DST)
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 538 *
Subject: no $method from as.hclust
From: Denis White <denis@mercury.cor.epa.gov>
Date: Wed, 10 May 2000 15:00:05 -0700 (PDT)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 542 *
Subject: Inconsistent behavior of par() agruments on lines()
From: Art Salwin <salwin@mitretek.org>
Date: Fri, 12 May 2000 10:08:22 -0400
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
* PR# 546 *
Subject:  variance of a scalar 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 19 May 2000 09:42:20 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 21 08:07:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 21 May 2000 09:07:13 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005210707.JAA09508@pubhealth.ku.dk>

Adrian Custer wrote:

> The character "*" displays too high in comparison to the graph space and
> other characters in the plot. Consider:
> 
> > a_-0.15
> > plot(c(0,100),c(0,1))
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > abline(1,0)

Can anyone reproduce this?  On my Solaris system the placing looks spot on
on X11 and postscript, so it looks to me to be a system-specific
font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
7.1beta)), and I am presumming that the X11 device was meant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May 21 11:09:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2000 12:09:38 +0200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 21 May 2000 09:07:13 +0200 (MET DST)"
References: <200005210707.JAA09508@pubhealth.ku.dk>
Message-ID: <x2ya549pul.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Adrian Custer wrote:
> 
> > The character "*" displays too high in comparison to the graph space and
> > other characters in the plot. Consider:
> > 
> > > a_-0.15
> > > plot(c(0,100),c(0,1))
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > > abline(1,0)
> 
> Can anyone reproduce this?  On my Solaris system the placing looks spot on
> on X11 and postscript, so it looks to me to be a system-specific
> font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
> 7.1beta)), and I am presumming that the X11 device was meant.

I don't see it either with current development sources. We used to get
that effect because "*" is a superscript asterisk (not a centered
operator) in the relevant X11 font, but Paul/Ross fixed that at some
point. Does example(points) look right on this system?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sun May 21 23:13:41 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005212213.AAA13185@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.0.1
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


This is an update to bug report 548.

The bug had two parts on my system:
1) the gnome-interface puts the "*" mark in the wrong place. It could be
superscript 
or something else. From the Docs the gnome-interface claimed just to re-display
the 
base R but it is obviously doing something more and breaking the display.

1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
was 
off everytime by a pixel today it is fine. 

I have contacted the person in charge of the gnome-Interface port so this should
be 
considered a bug of that unless I can start reproducing the X11() offset.

Thanks,
adrian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Mon May 22 02:22:04 2000
From: mcneney@cs.sfu.ca (mcneney@cs.sfu.ca)
Date: Mon, 22 May 2000 03:22:04 +0200 (MET DST)
Subject: [Rd] memory problem with DEC C (was: problem with glm (PR#452))
Message-ID: <200005220122.DAA14150@pubhealth.ku.dk>

Just to update: What I originally thought was a glm problem appears to be
a memory problem that occurs only when R is compiled with the DEC C
compiler. Some variables that are still in use get clobbered during
garbage collection. No problems if I compile with gcc though. I've made
some attempts to see if I can identify a specific compiler optimization
that is responsible, but so far no luck.

Brad

On 5 Mar 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I don't know if the following is relevant, but for some reason I've found 
> > I can avoid this particular problem if I make a small change in lapply in 
> > its main loop.  Around line 50 of apply.c:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         VECTOR(ans)[i] = eval(R_fcall, rho);
> >     }
> > 
> > if I change it to make an assignment to a
> > temporary variable first everything seems to work fine:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         tem = eval(R_fcall, rho);
> >         VECTOR(ans)[i] = tem;
> >     }
> > 
> > hasn't given me any NULLs yet. 
> 
> Now that is pretty darn odd... Looks quite a bit like a compiler bug.
> Those two pieces of code should be equivalent as far as I can see.
> 
> One thing that you might do: objdump -dS apply.o allows you to see
> what code the compiler generates for the two cases. Also, of course,
> you can try reducing the level of optimization.
> 
> 
> Alternatively, the mere addition of "tem" changes the local memory use
> of that function so that something that got clobbered before doesn't
> get clobbered now.
> 
> The effect doesn't seem to be present on Intels:
> 
> > dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> > any(sapply(lapply(dfr,summary),is.null))
> [1] FALSE
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 03:39:33 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Mon, 22 May 2000 04:39:33 +0200 (MET DST)
Subject: [Rd] Inconsistencies (PR#550)
Message-ID: <200005220239.EAA14342@pubhealth.ku.dk>

Dear all,

I was playing around with some C-code that I dynamically linked to R
and noticed the following inconsistency:

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> is.integer(dat)
[1] FALSE
> dat <- matrix(1:9,3,3)
> is.double(dat)
[1] FALSE
> is.integer(dat)
[1] TRUE

How did I find out?  I passed `dat' to a double * in the C-code and
printed out the matrix from C.  But in the .C() call I just passed
down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
course the print out from the C routine was garbage, but since I used
        dat <- matrix(1,3,3)
first, I was confused.  Note that R says that `dat' is.double!  But it
seems to pass dat to C as an integer matrix nevertheless!  Using the
second matrix it became clear to me why I saw garbage being printed
out from the C-routine.  My question is now why does the first
`is.double(dat)' returns `TRUE'?

Cheers,

        Berwin


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon May 22 04:30:12 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 22 May 2000 13:30:12 +1000
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Fri, May 19, 2000 at 10:04:09AM +0100
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <20000522133012.C18391@ftoomsh.progsoc.uts.edu.au>

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

I remember that my Casio calculator (in statistics mode) had some way
of setting the denominator to be n-1 or n so obviously someone at Casio
decided to cover both options. I was always taught to use n-1 but
I've been too lazy to work through the derivations and figure out why
one is better than the other.

I agree that a single sample cannot tell you anything about the variance
which is a good enough reason to convince me to keep using n-1.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 07:22:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 22 May 2000 07:22:22 +0100 (BST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <200005220239.EAA14342@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>

On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:

> Dear all,
> 
> I was playing around with some C-code that I dynamically linked to R
> and noticed the following inconsistency:
> 
> > dat <- matrix(1,3,3)
> > is.double(dat)
> [1] TRUE
> > is.integer(dat)
> [1] FALSE
> > dat <- matrix(1:9,3,3)
> > is.double(dat)
> [1] FALSE
> > is.integer(dat)
> [1] TRUE
> 
> How did I find out?  I passed `dat' to a double * in the C-code and
> printed out the matrix from C.  But in the .C() call I just passed
> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
> course the print out from the C routine was garbage, but since I used
>         dat <- matrix(1,3,3)
> first, I was confused.  Note that R says that `dat' is.double!  But it
> seems to pass dat to C as an integer matrix nevertheless!  Using the
> second matrix it became clear to me why I saw garbage being printed
> out from the C-routine.  My question is now why does the first
> `is.double(dat)' returns `TRUE'?

Because it is double!   This refers to the storage mode, not the
mathematical properties of the object's content.

I can find no inconsistency.  1 is double, and 1:9 is integer (just as
in S-PLUS 3.x).  Why should this not be the case?  Currently the
only time in R you are likely to get an integer result is a : or seq
expression, but you are not supposed to rely on this.  (Since I know
you have a copy, this is exactly the problem of the wam example
on page 203 of `S Prograaming'.)

For example, if printit.c is

void printit(double *x, int *n)
{
    int i;
    
    for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
}

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> invisible(.C("printit", dat, as.integer(9)))
[0] 1.000000
[1] 1.000000
[2] 1.000000
[3] 1.000000
[4] 1.000000
[5] 1.000000
[6] 1.000000
[7] 1.000000
[8] 1.000000
>  dat <- matrix(1:9,3,3)
> invisible(.C("printit", dat, as.integer(9)))
[0] 0.000000
[1] 0.000000
[2] 0.000000
[3] 0.000000
[4] 0.000000
[5] 0.000000
[6] 0.000000
[7] 0.000000
[8] 0.000000

as I would expect.

I think the moral is that you cannot assume the storage mode of
expressions returned by R (or by S).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 09:45:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 09:45:35 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220845.JAA11255@toucan.stats.ox.ac.uk>


> From: acuster@nature.berkeley.edu
> Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> X-Keywords: 
> 
> Full_Name: Adrian Custer
> Version: 1.0.1
> OS: gnu-linux (mandrake 7.1beta)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> This is an update to bug report 548.

Please put PR#548 in the subject line for a follow-up. And *please*
mention critical facts like which graphics device you were using.

> The bug had two parts on my system:
> 1) the gnome-interface puts the "*" mark in the wrong place. It could be
> superscript 
> or something else. From the Docs the gnome-interface claimed just to 
re-display
> the 
> base R but it is obviously doing something more and breaking the display.

Can you tell us please where you read that in the docs, so we can
correct it?  It is a completely separate graphics device, to be called
gtk() from 1.1.0 (and the X11-based x11() will also be available).


> 1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
> was 
> off everytime by a pixel today it is fine. 

*one* pixel?  I don't think you can expect one-pixel accuracy, not
least as where the centre of `*' is in the font used on my screen is
unclear to less than about half pixel.  Accuracy to one pixel seems fine
on a screen device, provided it is consistent.  You can expect greatest
accuracy on the hardcopy devices, where it may matter.

> I have contacted the person in charge of the gnome-Interface port so this 
should
> be 
> considered a bug of that unless I can start reproducing the X11() offset.

If you mean Lyndon Drake, he has moved and as far as we know is no
longer working on R. 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 09:45:51 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Mon, 22 May 2000 16:45:51 +0800 (WST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
References: <200005220239.EAA14342@pubhealth.ku.dk>
 <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
Message-ID: <14632.62399.496963.693726@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
  >> Dear all,
  >> 
  >> I was playing around with some C-code that I dynamically linked to R
  >> and noticed the following inconsistency:

  BDR> I can find no inconsistency.  [...]
  BDR> For example, if printit.c is

  BDR> void printit(double *x, int *n)
  BDR> {
  BDR>     int i;
    
  BDR>     for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
  BDR> }

  >> dat <- matrix(1,3,3)
  >> is.double(dat)
  BDR> [1] TRUE
  >> invisible(.C("printit", dat, as.integer(9)))
  BDR> [0] 1.000000 [...]
Sorry, mea culpa.  My C-code was a bit more complicated and I know
realise that I had screwed up within the C-routine.  By the time the
C-code was fixed, I had an `as.double(dat)' in my call to .C but was
still under the impression that the problems where due to the fact
that R past a matrix that it claimed to be in storage mode double as
an integer matrix to the C-routine....  

  BDR> I think the moral is that you cannot assume the storage mode of
  BDR> expressions returned by R (or by S).
I guess the moral is rather that I should believe that I found a bug
in R when I am fooling around with some code around midnight ;-/  Or
that I should check better for the sources of my alleged bugs.....

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 10:48:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 22 May 2000 11:48:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220948.LAA19498@pubhealth.ku.dk>

A little more followup.  The gtk() device uses gdk_string_width to
find the character extents. That seems undocumented anywhere in the
gtk+ sources.  It is returning the maximal descent for the font for all
input strings on my system.  Looking at the current gtk+-1.2.7 sources it
appears to call XTextExtents, and that _should_ give the
string descent.

Since gdk fonts are private opaque structures I see no way around this.
Without any documentation I do not even know if it is a gdk bug (although
I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 22 11:22:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
Subject: integer functions {was [Rd] Inconsistencies (PR#550)}
Message-ID: <200005221022.MAA20192@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
    >> Dear all,
    >> 
    >> I was playing around with some C-code that I dynamically linked to R
    >> and noticed the following inconsistency:

    > > dat <- matrix(1,3,3)
    > > is.double(dat)
    > [1] TRUE
    > > is.integer(dat)
    > [1] FALSE
    > > dat <- matrix(1:9,3,3)
    > > is.double(dat)
    > [1] FALSE
    > > is.integer(dat)
    > [1] TRUE

    >> How did I find out?  I passed `dat' to a double * in the C-code and
    >> printed out the matrix from C.  But in the .C() call I just passed
    >> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
    >> course the print out from the C routine was garbage, but since I used
    >>         dat <- matrix(1,3,3)
    >> first, I was confused.  Note that R says
    >> that `dat' is.double!  But it seems to pass dat to C as an integer
    >> matrix nevertheless!  Using the second matrix it became clear to me
    >> why I saw garbage being printed out from the C-routine.  My question
    >> is now why does the first `is.double(dat)' returns `TRUE'?

    BDR> Because it is double!  This refers to the storage mode, not the
    BDR> mathematical properties of the object's content.

exactly!  
Please (everyone who needs, probably Berwin doesn't) *do*
study  ?storage.mode  and  ?mode with some care

    BDR> I can find no inconsistency.  1 is double, and 1:9 is integer
    BDR> (just as in S-PLUS 3.x).  Why should this not be the case?

    BDR> Currently the only time in R you are likely to get an integer
    BDR> result is a : or seq expression, but you are not supposed to rely
    BDR> on this.

Well, "Values:"  in ?seq  says

 >> Value:
 >>      The result is of `mode' `"integer"' if `from' is (numerically
 >>      equal to an) integer.

on which I do rely..
Also, there are other functions guaranteeing an integer (or NA / NULL)
result, at least

 o length()
 o dim()
 o ncol(), nrow()
---
 o  min() and max()  --- when all args are integers

 o  "+" and "-" if the args are integers
    -- however that might change: Currently, there's no overflow detection!


    BDR>   (Since I know you have a copy, this is exactly the
    BDR> problem of the wam example on page 203 of `S Prograaming'.)

    BDR> For example, if printit.c is

        <...  instructive example...>

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 22 12:06:50 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 22 May 2000 13:06:50 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
Message-ID: <200005221106.NAA20961@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Ouch, another obscure bug...
I just had a bus error crash, with a core dump, a small one this time.
Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
I had done a few simulations, and done a chisq.test() on them.
These simulations also write about 190MB's to file, but
I have no idea whether that is relevant, and those data are not
used. The calls I do look like this:
> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
"point")))
> ch1

	 Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 463.8359, df = 300, p-value = 3.726e-09 

> ch1$observed

Process R bus error (core dumped) at Mon May 22 12:38:49 2000


....so it doesn't crash when I print the whole object, but when I 
a vector of the object, it crashes... And, restarting R, it doesn't
happen.

I heard the sysadm who did the installation had some problems,
I don't know what it was about, but if I understood him correctly,
it only happened when he tuned for EV6, so it shouldn't be a problem now, 
I guess....

Kjetil


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 14:14:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 14:14:40 +0100 (BST)
Subject: integer functions {was [Rd] Inconsistencies }
Message-ID: <200005221314.OAA13936@toucan.stats.ox.ac.uk>


> Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

[...]

>     BDR> Currently the only time in R you are likely to get an integer
>     BDR> result is a : or seq expression, but you are not supposed to rely
>     BDR> on this.
> 
> Well, "Values:"  in ?seq  says
> 
>  >> Value:
>  >>      The result is of `mode' `"integer"' if `from' is (numerically
>  >>      equal to an) integer.
> 
> on which I do rely..

My point was the reverse, though. You are not supposed to rely on
everything else giving double.  That's what the wam example in S3 did.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May 22 15:13:34 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221413.QAA24813@pubhealth.ku.dk>

character arguments with call_R do not work except in the first
position. (In other positions, they just yield a single blank
character.)
 The error is at line 1858 of dotcode.c which should be changed from
STRING(CAR(pcall))[i]=s;
to
STRING(CAR(pcall))[0]=s;
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 15:28:53 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 16:28:53 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
Message-ID: <14633.17445.635566.303613@gargle.gargle.HOWL>

Some of you may have seen the  pythag() part in the R API definition in 
"Writing R Extensions" (source = doc/manual/R-exts.texinfo).

or followed the report and Prof. Brian Ripley's answer about pythag()'s
availability from R's binary.

As we say in above manual

  >>      `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
  >>      destructive underflow: for example it still works when both A and
  >>      B are between `1e200' and `1e300' (in IEEE double precision).

--
"Problem" is : 
The GNU C library (and other C libraries ??)
defines a function	 
	 double hypot(double x, double y)

with identical semantics to our pythag() from above
The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
(in the section "Exponentiation and Logarithms"):

=============================
>>  - Function: double hypot (double X, double Y)
>>  - Function: float hypotf (float X, float Y)
>>  - Function: long double hypotl (long double X, long double Y)
>>      These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>      the hypotenuse of a right triangle with sides of length X and Y,
>>      or the distance of the point (X, Y) from the origin.  Using this
>>      function instead of the direct formula is wise, since the error is
>>      much smaller.  See also the function `cabs' in *Note Absolute
>>      Value::.

Further "problem": In R, we are already partially relying on the
availability of the hypot() function :

At the toplevel of R-1.0.1's source
   grep -rwn hypot . 
   ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
gives

./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
./src/appl/fortran.c:111:    return hypot(z->r, z->i);
./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
./src/main/plot.c:2455:double hypot(double x, double y)
./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

---------

My "theses"
   
   o when hypot() is available, it should be used since it will be 
     efficient, precise, etc.
   o when it's not available, our "configure" should find out, and set
     corresponding "HAVE_HYPOT" to `false'.
   o in that case, we should provide a hypot()  {for the above code to
     work!}, and we probably should use (an improvement?) of the current
     pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
   o Hence, we should drop pythag() from the R API and rather say that we
     provide hypot() whenever the system's C library 
     (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
     provide it.

   o I think an R function  hypot() would also make sense.

We'll be glad to hear feedback about this!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 15:48:52 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 15:48:52 +0100 (BST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221448.PAA14128@toucan.stats.ox.ac.uk>


> From: jlindsey@alpha.luc.ac.be
> Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] character arguments with call_R (PR#552)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> character arguments with call_R do not work except in the first
> position. (In other positions, they just yield a single blank
> character.)
>  The error is at line 1858 of dotcode.c which should be changed from
> STRING(CAR(pcall))[i]=s;
> to
> STRING(CAR(pcall))[0]=s;
>   Jim

It's much worse than that, as this happens n times inside a loop.
It looks to me as if the code has fairly thoroughly confused character
strings and character vectors.  I suspect it should be more like

	    for (j = 0 ; j < n ; j++) {
		s = allocSExp(CHARSXP);
		CHAR(s) = ((char**)(arguments[i]))[j];
		LENGTH(s) = strlen(CHAR(s));
		STRING(CAR(pcall))[j] = s;
	    }

or, more consisely

	    for (j = 0 ; j < n ; j++) {
		cptr = (char**)arguments[i]
		STRING(CAR(pcall))[j] = mkChar(cptr[j])
	    }

Do you have a succinct example on which we could test out solutions?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 15:52:59 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
In-Reply-To: <200005220948.LAA19498@pubhealth.ku.dk>
Message-ID: <XFMail.000522165259.plummer@iarc.fr>

On 22-May-00 ripley@stats.ox.ac.uk wrote:
> A little more followup.  The gtk() device uses gdk_string_width to
> find the character extents. That seems undocumented anywhere in the
> gtk+ sources.  It is returning the maximal descent for the font for all
> input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> appears to call XTextExtents, and that _should_ give the
> string descent.
> 
> Since gdk fonts are private opaque structures I see no way around this.
> Without any documentation I do not even know if it is a gdk bug (although
> I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.


The best thing that can be said about the GNOME API documentation is
that it is getting better.  Documentation on glib, gdk and gtk+ is
available from here:

http://developer.gnome.org/doc/API/

but is still quite sparse.  

This is not, in fact, a gdk bug, but is due to a permutation in
the arguments of gdk_string_extents in GTK_MetricInfo 
(file src/gnome/devGTK.c). It currently reads

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iascent, &idescent, &iwidth);

but should be

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iwidth, &iascent, &idescent);

See
http://developer.gnome.org/doc/API/gdk/gdk-fonts.html#GDK-STRING-EXTENTS

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 16:03:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 17:03:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14633.19510.222102.346537@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Some of you may have seen the pythag() part in the R API definition
    MM> in "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    MM> or followed the report and Prof. Brian Ripley's answer about
    MM> pythag()'s availability from R's binary.

    MM> As we say in above manual

     >>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
     >>> destructive underflow: for example it still works when both A and B
     >>> are between `1e200' and `1e300' (in IEEE double precision).

    MM> -- "Problem" is : The GNU C library (and other C libraries ??)
    MM> defines a function double hypot(double x, double y)

    MM> with identical semantics to our pythag() from above The Info
    MM> (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains (in the
    MM> section "Exponentiation and Logarithms"):

    ....

I forgot to mention  that  src/appl/eigen.f  (stemming from EISPACK)
defines (and uses) a fortran DOUBLE PRECISION PYTHAG(A, B) function
equivalently to  src/appl/pythag.c  {currently (R-devel) in .../approx.c},
and hence R's eigen() function actually does rely on pythag().

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 16:24:21 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221524.RAA25471@pubhealth.ku.dk>

Trying to use text() with very large cex parameter crashes
R when using the X11() device

X11()
plot(1,1,type="n")
text(1,1,"foo", cex=10)

This also crashes R

points(1,1,pch="A", cex=10)

presumably because we are trying to load a font that doesn't
exist, but I haven't looked into it.

Martyn


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status =
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 22 16:40:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 22 May 2000 11:40:58 -0400 (EDT)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005221524.RAA25471@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>


  Works here with 1.0.0 (RH Linux 6.0)!

  R --vanilla with

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

On Mon, 22 May 2000 plummer@iarc.fr wrote:

> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.
> 
> Martyn
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status =
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 17:00:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 18:00:28 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
References: <200005221524.RAA25471@pubhealth.ku.dk>
 <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <14633.22940.230520.996840@gargle.gargle.HOWL>

>>>>> "Ben" == Ben Bolker <ben@zoo.ufl.edu> writes:

    Ben>   Works here with 1.0.0 (RH Linux 6.0)!

    Ben>   R --vanilla with

    Ben> Version: platform = i686-unknown-linux arch = i686 os = linux
    Ben> system = i686, linux status = major = 1 minor = 0.0 year = 2000
    Ben> month = February day = 29 language = R

Works also for me, RH 6.2 Linux; both with 1.0.1 and R-devel [of today];
also work for R running on Solaris (2.5.1, X11R6.3) with DISPLAY on Linux.

Martin

    Ben> On Mon, 22 May 2000 plummer@iarc.fr wrote:

    >> Trying to use text() with very large cex parameter crashes R when
    >> using the X11() device
    >> 
    >> X11()
    >> plot(1,1,type="n")
    >> text(1,1,"foo", cex=10)
    >> 
    >> This also crashes R
    >> 
    >> points(1,1,pch="A", cex=10)
    >> 
    >> presumably because we are trying to load a font that doesn't exist,
    >> but I haven't looked into it.
    >> 
    >> Martyn
    >> 
    >> --please do not edit the information below--
    >> 
    >> Version: platform = i686-unknown-linux arch = i686 os = linux system
    >> = i686, linux status = major = 1 minor = 0.1 year = 2000 month =
    >> April day = 14 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:36:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:36:04 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005221736.SAA14400@toucan.stats.ox.ac.uk>

> Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: ripley@stats.ox.ac.uk
> Subject: Re: [Rd] RE:bug 548 graphics '*' (PR#549)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> On 22-May-00 ripley@stats.ox.ac.uk wrote:
> > A little more followup.  The gtk() device uses gdk_string_width to
> > find the character extents. That seems undocumented anywhere in the
> > gtk+ sources.  It is returning the maximal descent for the font for all
> > input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> > appears to call XTextExtents, and that _should_ give the
> > string descent.
> > 
> > Since gdk fonts are private opaque structures I see no way around this.
> > Without any documentation I do not even know if it is a gdk bug (although
> > I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.
> 
> 
> The best thing that can be said about the GNOME API documentation is
> that it is getting better.  Documentation on glib, gdk and gtk+ is
> available from here:
> 
> http://developer.gnome.org/doc/API/
> 
> but is still quite sparse.  
> 
> This is not, in fact, a gdk bug, but is due to a permutation in
> the arguments of gdk_string_extents in GTK_MetricInfo 
> (file src/gnome/devGTK.c). It currently reads
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iascent, &idescent, &iwidth);
> 
> but should be
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iwidth, &iascent, &idescent);
> 

Great, thanks, that solves it.  Now I was looking for a man page
for gdk_string_extents to find out what the arguments were supposed to mean,
but never found one.

Bug fixed for 1.1.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:46:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:46:49 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221746.SAA14454@toucan.stats.ox.ac.uk>


> From: plummer@iarc.fr
> Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.

As a matter of interest, does it crash R-devel?  I added some X11 error
handlers a couple of weeks ago, so X11 errors should no longer crash R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 02:26:05 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 11:26:05 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>

I realise that there is an existing system for documenting datasets
but what I would like is to be able to whack a few lines of commentary
at the top of a file which contains data -- not full documentation but
just an outline for myself to remind me of what I was doing or what
settings I was using, etc.

I was thinking that the read.table() function might be extended to
support an option allowing it to throw away lines that begin with
the # character (same comment character as R source, shell script, perl, etc)
thus allowing data files with comments added to them. For example:

------------------------------------->8---
# Testing the force of my linear motor
# v = supply voltage (reading from built-in meter on bench supply)
# x = distance of movement (NA indicates that bar was dropped)
# m = mass of bar
"v" "x" "m"
 1   2   3
 4   5   6
 7   8   9
# I might have bumped the table for this one
10  NA  12

etc...
------------------------------------->8---

Then you can load it up with:

mytable <- read.table( "data", header=TRUE, comment=TRUE )

and then proceed as normal.

I'm sure it would be a very small change, if other people think
it might be useful then I'll try and make a patch to support it.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 07:05:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 07:05:37 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>

On Tue, 23 May 2000, Telford Tendys wrote:

> I realise that there is an existing system for documenting datasets
> but what I would like is to be able to whack a few lines of commentary
> at the top of a file which contains data -- not full documentation but
> just an outline for myself to remind me of what I was doing or what
> settings I was using, etc.
> 
> I was thinking that the read.table() function might be extended to
> support an option allowing it to throw away lines that begin with
> the # character (same comment character as R source, shell script, perl, etc)
> thus allowing data files with comments added to them. For example:
> 
> ------------------------------------->8---
> # Testing the force of my linear motor
> # v = supply voltage (reading from built-in meter on bench supply)
> # x = distance of movement (NA indicates that bar was dropped)
> # m = mass of bar
> "v" "x" "m"
>  1   2   3
>  4   5   6
>  7   8   9
> # I might have bumped the table for this one
> 10  NA  12
> 
> etc...
> ------------------------------------->8---
> 
> Then you can load it up with:
> 
> mytable <- read.table( "data", header=TRUE, comment=TRUE )
> 
> and then proceed as normal.
> 
> I'm sure it would be a very small change, if other people think
> it might be useful then I'll try and make a patch to support it.

I am sure it is not `a very small change', I'm afraid.  Basically, input is
not done in a line-oriented way. read.table uses scan and count.fields.  
Both are internal functions that work at a char-by-char level.  You will
need to add logic to skip lines, and for your rule that means adding logic
to know that # is first in a line.

My suggestion would be to allow # anywhere on the line to skip the
rest of the line, and to make sure that # inside quotes did nothing.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 08:47:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 17:47:06 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>; from ripley@stats.ox.ac.uk on Tue, May 23, 2000 at 07:05:37AM +0100
References: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <20000523174706.A14617@ftoomsh.progsoc.uts.edu.au>

> I am sure it is not `a very small change', I'm afraid.  Basically, input is
> not done in a line-oriented way. read.table uses scan and count.fields.  
> Both are internal functions that work at a char-by-char level.  You will
> need to add logic to skip lines, and for your rule that means adding logic
> to know that # is first in a line.

I just wanted to see if was a good idea in principle but thanks for
pointing out that read.table is not line oriented, I have not even started
to work through what would actually be required.

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Well it should be whatever is consistent with R source code unless there
is a good reason to make it otherwise, that minimises the learning required
for new users. Doing a quick test I see that allowing a comment to start
anywhere on the line is correct:

> x <- "# comment" # put the value "# comment" into x
> x
[1] "# comment"
> 

So I'm perfectly happy with that.

If the comment option defaulted to FALSE then it would be safe against
breaking existing code (I suppose everyone knew that already).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue May 23 09:40:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 23 May 2000 10:40:25 +0200
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <000901bfc492$8b53d6a0$a9021aac@joelschlaegel>


Prof Brian D Ripley wrote:

> I am sure it is not `a very small change', I'm afraid.
> Basically, input is
> not done in a line-oriented way. read.table uses scan and
> count.fields.
> Both are internal functions that work at a char-by-char
> level.  You will
> need to add logic to skip lines, and for your rule that means
> adding logic
> to know that # is first in a line.

I agree that the basic problem is that R hasn't a linewise data import
utility. I guess, the reason for this is that anything working linewise has
to be written entirely in C for performance reasons, which means loosing the
flexibility of the R language.

However, there might be a way to solve this: processing batches of lines
instead of single lines. If we import m of n (m << n) lines at a time as a
string vector, we could use R vector functions to preprocess these strings
and then scan those. Thus scan() needed an extension to allow taking it's
input from string vectors. Or, perhaps better, we need seperate access to
the two functionalities of scan, (1) physical reading and (2) parsing.

Then read.table could be rewritten to work on batches of lines, with a
parameter nbatch=1000, and an optional parameter preprocess.func=NULL
which - if used - would return a preprocessed vector of strings, e.g.

  ThroughAwayCommentLines <- function(s)s[-grep("^#", s)]

to realize Telfors Tendys suggestion, or

  RemoveTrailingComments <- function(s){
    s <- gsub("#.*", "", s)
    s[nchar(s) > 0]
  }

for Prof. Ripley's suggestion

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Final comment: any solution having # skip the rest of the line MUST be
optional, otherwise R looses it's ability to
import general ASCII-data. You never know whether some people use special
characters in their strings.

Any comments welcome


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 10:12:11 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <XFMail.000523111211.plummer@iarc.fr>

Well, I wasn't wrong. Here's R with DEBUG_X11 switched on

> plot(1,1,type="n")
loading:
-*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
success
> points(1,1,pch="A", cex=10)
loading:
-*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
failure
loading:
-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
failure

Program received signal SIGSEGV, Segmentation fault.
0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
940             XSetFont(display, xd->wgc, xd->font->fid);
(gdb) p xd->font
$1 = (XFontStruct *) 0x0

RLoadFont ignores the fact that it has failed to load a font
and returns a null pointer. 

If this works for you it is perhaps because you have the size 34 font
(the last resort) on your system.

R-devel gives the same result.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 11:56:43 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 11:56:43 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <200005231056.LAA15932@toucan.stats.ox.ac.uk>


> From: "Jens Oehlschlgel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Tue, 23 May 2000 10:40:25 +0200

[...]

> for Prof. Ripley's suggestion
> 
> > My suggestion would be to allow # anywhere on the line to skip the
> > rest of the line, and to make sure that # inside quotes did nothing.
> 
> Final comment: any solution having # skip the rest of the line MUST be
> optional, otherwise R looses it's ability to
> import general ASCII-data. You never know whether some people use special
> characters in their strings.

Yes, Telford Tendys had comment=FALSE as the default for that argument.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 12:21:15 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 12:21:15 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005231121.MAA15967@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Ben Bolker <ben@zoo.ufl.edu>, Uwe Ligges 
<ligges@statistik.uni-dortmund.de>, Martin Maechler 
<maechler@stat.math.ethz.ch>, Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Subject: Re: [Rd] text() with large cex parameter crashes X11() (PR#553)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> Well, I wasn't wrong. Here's R with DEBUG_X11 switched on
> 
> > plot(1,1,type="n")
> loading:
> -*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
> success
> > points(1,1,pch="A", cex=10)
> loading:
> -*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
> failure
> loading:
> -*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
> failure
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
> 940             XSetFont(display, xd->wgc, xd->font->fid);
> (gdb) p xd->font
> $1 = (XFontStruct *) 0x0
> 
> RLoadFont ignores the fact that it has failed to load a font
> and returns a null pointer. 

I think it is SetFont that ignores the null pointer.

> If this works for you it is perhaps because you have the size 34 font
> (the last resort) on your system.

I at least have Helvetica in type 1 and so do have 120pt Helevetica
(and have used such a system all the time I have been using X11).

> R-devel gives the same result.

What should we do in this circumstance?  Drop back to fixed?  Try a
smaller size?   What sizes do you have?   A quick look around on an R6.0
system suggests that it has 8,10,12,14,18,24, which is what Solaris
has as bitmaps too.  And at this point basefontsize must have succeeded.
So should we:

try 34 then 24 then basefontsize.

Should we issue a warning if the displayed fontsize differs by more than
10%, say, from that requested?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 14:30:21 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 15:30:21 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005231121.MAA15967@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.000523153021.plummer@iarc.fr>

On 23-May-00 Prof Brian Ripley wrote:
>> RLoadFont ignores the fact that it has failed to load a font
>> and returns a null pointer. 
> 
> I think it is SetFont that ignores the null pointer.

Yes.

>> If this works for you it is perhaps because you have the size 34 font
>> (the last resort) on your system.
> 
> I at least have Helvetica in type 1 and so do have 120pt Helevetica
> (and have used such a system all the time I have been using X11).
> 
>> R-devel gives the same result.

Apparently I had an error in the configuration file for the font server
(due to the fact that RPM kept the old configuration file when I upgraded)
As a result, all my 75dpi fonts were considered non-scaleable by the
font server. I have now fixed this and everything works.
 
> What should we do in this circumstance?  Drop back to fixed?  Try a
> smaller size?   What sizes do you have?   A quick look around on an R6.0
> system suggests that it has 8,10,12,14,18,24, which is what Solaris
> has as bitmaps too.  And at this point basefontsize must have succeeded.
> So should we:
> 
> try 34 then 24 then basefontsize.
> 
> Should we issue a warning if the displayed fontsize differs by more than
> 10%, say, from that requested?

This seems like a good plan.  If failure to load a large font is indicative
of a problem with the X setup then it would be a good idea to issue a warning.

Sorry to trouble everyone over what is basically a problem with my setup.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Tue May 23 19:33:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Tue, 23 May 2000 20:33:30 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
Message-ID: <200005231833.UAA06834@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm getting strange numbers from a random number generation 
function again. I was wondering if it could be the same problem 
as I reported in (PR#439). 

I'm using the functions (some comments deleted for brevity):

qamp <- function(p,  type=c("point", "nolens"))
{
  if(type == "point")  
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}

...to generate random numbers. I think there might be something wrong
with runif, possibly the same problem as rpois had. 

More details:
I'm calling this function a number of times through a function
intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
                               exptime, ...)
{
  amps <- ramp(ncloudsbin, amptype)
  write(c(max(amps), sum(amps), sum(amps - 1)),
        "lastamps.dat", ncolumns=3, append=T)
  return(cloudintensity * exptime * amps)
}
...that is called a lot. As you can see, I'm writing the maximum 
(among other things) of the generated numbers to file 
(this is a preliminary hack, for a (quite unrelated) sanity 
check I'm running). 
Now, it turns out that in 8080 maxima, the number 14654.29 appears
twice. Things like that happen, this _is_ statistics,
and my pdf doesn't fall that fast, but you know...
I thought I'd report this sooner the better... 
I made a histogram of the logarithm of the maxima for the 8080 points
and put it at <URL:http://www.astro.uio.no/~kjetikj/tmp/ampsmax.ps>

BTW, update on my other reports: 

The problem I had with match.arg() (PR#536) was in the same piece of code,
and unfortunately, it seems to happen with 1.0.1 as well.

About my crashes, PR#545 and PR#551, I had another crash today, and I 
have a 250MB (Warning! :-)) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core2>
I was doing a summary of a rather strange data.frame, I was just curious 
as to what summary would say to such a thing. I don't know if it would 
be of any use. Uwe suggested that it might be a hardware problem, and I 
have contacted my sysadm, and a check will hopefully be performed on Friday.
If it would be useful to see my actions prior to the crash, please let me 
know.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 20:03:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 20:03:30 +0100 (BST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <200005231833.UAA06834@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>

On Tue, 23 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Hello!
> 
> I'm getting strange numbers from a random number generation 
> function again. I was wondering if it could be the same problem 
> as I reported in (PR#439). 
> 
> I'm using the functions (some comments deleted for brevity):
> 
> qamp <- function(p,  type=c("point", "nolens"))
> {
>   if(type == "point")  
>     return(1 / (2 * sqrt(1 - p)))
>   else return(1)
> }
>   
> ramp <- function(n, type=c("point", "nolens"))
> {
>   if(type == "point")
>     return(qamp(runif(n), type))
>   else return(rep(1, n))
> }
> 
> ...to generate random numbers. I think there might be something wrong
> with runif, possibly the same problem as rpois had. 

Not at all, that problem is fixed.

> More details:
> I'm calling this function a number of times through a function
> intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
>                                exptime, ...)
> {
>   amps <- ramp(ncloudsbin, amptype)
>   write(c(max(amps), sum(amps), sum(amps - 1)),
>         "lastamps.dat", ncolumns=3, append=T)
>   return(cloudintensity * exptime * amps)
> }
> ...that is called a lot. As you can see, I'm writing the maximum 
> (among other things) of the generated numbers to file 
> (this is a preliminary hack, for a (quite unrelated) sanity 
> check I'm running). 
> Now, it turns out that in 8080 maxima, the number 14654.29 appears
> twice. Things like that happen, this _is_ statistics,
> and my pdf doesn't fall that fast, but you know...
> I thought I'd report this sooner the better... 

And which random number generator are you using?  And have you a proven
stable procedure based on its results?  (Doesn't look like it, I have to
say.)

Please do read the advice in the FAQ on reporting a bug. There is 
npthing here that I can see is a bug, or see how to investigate.
All PRNGs have deficiencies, and you have to program procedures to take
account of them.  R provides several alternatives for you to try out.
Do make use of them!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Tue May 23 20:17:56 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Tue, 23 May 2000 21:17:56 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0005232114360.553-100000@alnair.uio.no>

On Tue, 23 May 2000, Prof Brian D Ripley wrote:

>> ...to generate random numbers. I think there might be something wrong
>> with runif, possibly the same problem as rpois had. 
>
>Not at all, that problem is fixed.

OK, it was just something that didn't seem to unreasonable, since it was
roughly the same thing that was happening.

>And which random number generator are you using?  And have you a proven
>stable procedure based on its results?  (Doesn't look like it, I have to
>say.)

I must admit that I have not been experimenting with them... It seemed a
bit scary.... :-)

>Please do read the advice in the FAQ on reporting a bug. There is 
>npthing here that I can see is a bug, or see how to investigate.
>All PRNGs have deficiencies, and you have to program procedures to take
>account of them.  R provides several alternatives for you to try out.
>Do make use of them!

I will! Sorry for the disturbance!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May 24 08:16:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 May 2000 09:16:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> Some of you may have seen the  pythag() part in the R API definition in 
> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

> or followed the report and Prof. Brian Ripley's answer about pythag()'s
> availability from R's binary.

> As we say in above manual

>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
>>> destructive underflow: for example it still works when both A and
>>> B are between `1e200' and `1e300' (in IEEE double precision).

> --
> "Problem" is : 
> The GNU C library (and other C libraries ??)
> defines a function	 
> 	 double hypot(double x, double y)

> with identical semantics to our pythag() from above
> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
> (in the section "Exponentiation and Logarithms"):

> =============================
>>> - Function: double hypot (double X, double Y)
>>> - Function: float hypotf (float X, float Y)
>>> - Function: long double hypotl (long double X, long double Y)
>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>> the hypotenuse of a right triangle with sides of length X and Y,
>>> or the distance of the point (X, Y) from the origin.  Using this
>>> function instead of the direct formula is wise, since the error is
>>> much smaller.  See also the function `cabs' in *Note Absolute
>>> Value::.

> Further "problem": In R, we are already partially relying on the
> availability of the hypot() function :

> At the toplevel of R-1.0.1's source
>    grep -rwn hypot . 
>    ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
> gives

> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
> ./src/main/plot.c:2455:double hypot(double x, double y)
> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

> ---------

> My "theses"
   
>    o when hypot() is available, it should be used since it will be 
>      efficient, precise, etc.
>    o when it's not available, our "configure" should find out, and set
>      corresponding "HAVE_HYPOT" to `false'.
>    o in that case, we should provide a hypot()  {for the above code to
>      work!}, and we probably should use (an improvement?) of the current
>      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
>    o Hence, we should drop pythag() from the R API and rather say that we
>      provide hypot() whenever the system's C library 
>      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
>      provide it.

>    o I think an R function  hypot() would also make sense.

> We'll be glad to hear feedback about this!

I have no strong opinions about this, but the above seems to make
sense.

If I should make changes to configure, then pls let me know.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 09:57:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 09:57:47 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>

> >>>>> Martin Maechler writes:
> 
> > My "theses"
>    
> >    o when hypot() is available, it should be used since it will be 
> >      efficient, precise, etc.
> >    o when it's not available, our "configure" should find out, and set
> >      corresponding "HAVE_HYPOT" to `false'.

Are there any such systems?  After all 1.0.1 requires hypot, and we
have heard no complaints.  I suspect the cause of the confusion is
(plot.c)

#ifdef Macintosh
# define hypot pythag
#endif

so assume that the Mac port did not have hypot. However, a different
version appears in the 1.0.1 sources, and it appears _after_ hypot is first
used, so I am puzzled as to how the current version got there, or why it
would work. (If a system does not have hypot, presumably its headers do not
either!)

> >    o in that case, we should provide a hypot()  {for the above code to
> >      work!}, and we probably should use (an improvement?) of the current
> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
> >    o Hence, we should drop pythag() from the R API and rather say that we
> >      provide hypot() whenever the system's C library 
> >      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
> >      provide it.

I was puzzled as to why you put it in the API at all.

> >    o I think an R function  hypot() would also make sense.

Don't think so.  What you we is an n-term not 2-term version, and that's
what vecnorm would do (if we had it).

This does all seem to me to be trying to solve a non-existent problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:30:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:30:24 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
 <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <14635.52064.496585.983516@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
    >> Some of you may have seen the  pythag() part in the R API definition in 
    >> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    >> or followed the report and Prof. Brian Ripley's answer about pythag()'s
    >> availability from R's binary.

    >> As we say in above manual

    >>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
    >>>> destructive underflow: for example it still works when both A and
    >>>> B are between `1e200' and `1e300' (in IEEE double precision).

    >> --
    >> "Problem" is : 
    >> The GNU C library (and other C libraries ??)
    >> defines a function	 
    >> double hypot(double x, double y)

    >> with identical semantics to our pythag() from above
    >> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
    >> (in the section "Exponentiation and Logarithms"):

    >> =============================
    >>>> - Function: double hypot (double X, double Y)
    >>>> - Function: float hypotf (float X, float Y)
    >>>> - Function: long double hypotl (long double X, long double Y)
    >>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
    >>>> the hypotenuse of a right triangle with sides of length X and Y,
    >>>> or the distance of the point (X, Y) from the origin.  Using this
    >>>> function instead of the direct formula is wise, since the error is
    >>>> much smaller.  See also the function `cabs' in *Note Absolute
    >>>> Value::.

    >> Further "problem": In R, we are already partially relying on the
    >> availability of the hypot() function :

    >> At the toplevel of R-1.0.1's source
    >> grep -rwn hypot . 
    >> ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
    >> gives

    >> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
    >> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
    >> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
    >> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
    >> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
    >> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
    >> ./src/main/plot.c:2455:double hypot(double x, double y)
    >> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
    >> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

    >> ---------

    >> My "theses"
   
    >> o when hypot() is available, it should be used since it will be 
    >> efficient, precise, etc.
    >> o when it's not available, our "configure" should find out, and set
    >> corresponding "HAVE_HYPOT" to `false'.
    >> o in that case, we should provide a hypot()  {for the above code to
    >> work!}, and we probably should use (an improvement?) of the current
    >> pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
    >> o Hence, we should drop pythag() from the R API and rather say that we
    >> provide hypot() whenever the system's C library 
    >> (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
    >> provide it.

    >> o I think an R function  hypot() would also make sense.

    >> We'll be glad to hear feedback about this!

    KH> I have no strong opinions about this, but the above seems to make
    KH> sense.

    KH> If I should make changes to configure, then pls let me know.

Yes, please. 
We should check for it's presence with configure and
then use

#ifndef HAVE_HYPOT
double hypot(double x, double y) {

  ...
  ...

}
#endif


In the mean time I've seen that it exists in 
   - GNU lib"c" (libm infact)
   - Solaris
   - HP-UX
   - DEC Alpha Unix

and it is part of the X/Open "XPG4" standard,
but not POSIX (as of Don Lewine) nor ANSI C.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:55:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:55:54 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
References: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
Message-ID: <14635.53594.717309.718373@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> >>>>> Martin Maechler writes:
    >> 
    >> > My "theses"
    >> 
    >> >    o when hypot() is available, it should be used since it will be 
    >> >      efficient, precise, etc.
    >> >    o when it's not available, our "configure" should find out, and set
    >> >      corresponding "HAVE_HYPOT" to `false'.

    BDR> Are there any such systems?  After all 1.0.1 requires hypot, and we
    BDR> have heard no complaints.  I suspect the cause of the confusion is
    BDR> (plot.c)

    BDR> #ifdef Macintosh
    BDR> # define hypot pythag
    BDR> #endif

    BDR> so assume that the Mac port did not have hypot. However, a
    BDR> different version appears in the 1.0.1 sources, and it appears
    BDR> _after_ hypot is first used, so I am puzzled as to how the current
    BDR> version got there, or why it would work. (If a system does not
    BDR> have hypot, presumably its headers do not either!)

    >> >    o in that case, we should provide a hypot()  {for the above code to
    >> >      work!}, and we probably should use (an improvement?) of the current
    >> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].

    >> >    o Hence, we should drop pythag() from the R API and rather say
    >> >    that we provide hypot() whenever the system's C library (or its
    >> >    "math.h", aka libm.*, aka "-m" part, respectively) does *not*
    >> >    provide it.

    BDR> I was puzzled as to why you put it in the API at all.

{my ignorance about the widely available hypot() !}

    >> >    o I think an R function  hypot() would also make sense.

    BDR> Don't think so.  What you we is an n-term not 2-term version, and that's
    BDR> what vecnorm would do (if we had it).
agreed, good point!
  [does S-plus'  vecnorm()  avoid underflow and overflow reliably?]

    BDR> This does all seem to me to be trying to solve a non-existent problem.

Not according to our own (R core) standards,
which I thought to be roughly like 

 GOLD>> We require ANSI C 
 GOLD>> and everything else must be tested for by configure
 GOLD>>   (and worked around either be saying (warning) "is not available",
 GOLD>>    or by providing own code).
  
I think hypot() definitely falls in that class, 
particularly since it's not even POSIX [as of Lewine(1991)]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 14:07:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 14:07:12 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.53594.717309.718373@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10005241404200.8042-100000@auk.stats>

On Wed, 24 May 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> This does all seem to me to be trying to solve a non-existent problem.
> 
> Not according to our own (R core) standards,
> which I thought to be roughly like 
> 
>  GOLD>> We require ANSI C 
>  GOLD>> and everything else must be tested for by configure
>  GOLD>>   (and worked around either be saying (warning) "is not available",
>  GOLD>>    or by providing own code).
>   
> I think hypot() definitely falls in that class, 
> particularly since it's not even POSIX [as of Lewine(1991)]

Still, it is a problem that has not (AFAIK) been reported by anyone, and
there is quite a list of outstanding bugs at R-bugs ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Wed May 24 23:21:29 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Wed, 24 May 2000 15:21:29 -0700 (PDT)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <200005221106.NAA20961@pubhealth.ku.dk>
Message-ID: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>

On Mon, 22 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Ouch, another obscure bug...
> I just had a bus error crash, with a core dump, a small one this time.
> Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
> I had done a few simulations, and done a chisq.test() on them.
> These simulations also write about 190MB's to file, but
> I have no idea whether that is relevant, and those data are not
> used. The calls I do look like this:
> > ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
> "point")))
> > ch1
> 
> 	 Pearson's Chi-square test 
> 
> data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
> X-squared = 463.8359, df = 300, p-value = 3.726e-09 
> 
> > ch1$observed
> 
> Process R bus error (core dumped) at Mon May 22 12:38:49 2000
> 
> 
> ....so it doesn't crash when I print the whole object, but when I 
> a vector of the object, it crashes... And, restarting R, it doesn't
> happen.
> 
> I heard the sysadm who did the installation had some problems,
> I don't know what it was about, but if I understood him correctly,
> it only happened when he tuned for EV6, so it shouldn't be a problem now, 
> I guess....
> 
> Kjetil

I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
V5.0). Compiled with gcc/g77 using optimisation level -O2 (determined by
configure script).

> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1,
100,"point")))


> ch1

         Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 404.6772, df = 300, p-value = 5.125e-05 

> ch1$observed
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
[1,]  160  144  205  244  273  314  395  454  521   592   713   864   905 1043
[2,]  139  175  210  232  276  369  372  459  525   566   687   781   886  981

... etc ...


Brad

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From davidD@qimr.edu.au  Thu May 25 02:39:37 2000
From: davidD@qimr.edu.au (davidD@qimr.edu.au)
Date: Thu, 25 May 2000 03:39:37 +0200 (MET DST)
Subject: [Rd] diag() (PR#555)
Message-ID: <200005250139.DAA21529@pubhealth.ku.dk>

Full_Name: David Duffy
Version: 1.0.1
OS: Linux
Submission from: (NULL) (152.98.96.21)


Documentation for diag() states that "If x is a vector (or a
1-d array) then diag(x) returns a diagonal matrix whose diagonal
is x."
> m<-matrix(1:4,ncol=1)
> diag(m)
[1] 1
diag(as.vector(m)) gives the advertised performance.

Fix: Change documentation.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Thu May 25 03:25:27 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Thu, 25 May 2000 12:25:27 +1000
Subject: [Rd] diag() (PR#555)
In-Reply-To: Your message of "Thu, 25 May 2000 03:39:37 +0200."
 <200005250139.DAA21529@pubhealth.ku.dk>
Message-ID: <200005250225.MAA15350@snowy.nsw.cmis.CSIRO.AU>

> Full_Name: David Duffy
> Version: 1.0.1
> OS: Linux
> Submission from: (NULL) (152.98.96.21)
> 
> 
> Documentation for diag() states that "If x is a vector (or a
> 1-d array) then diag(x) returns a diagonal matrix whose diagonal
> is x."
> > m <- matrix(1:4,ncol=1)
> > diag(m)
> [1] 1
> diag(as.vector(m)) gives the advertised performance.
> 
> Fix: Change documentation.

On the contrary I consider this to be the advertized performance.

The array m as defined above is a 2-d array, not a 1-d array, it just
so happens that one of the dimensions has extent 1, but so what?

I would favour retaining the definition

	dimension of array A  =  length(dim(A))

in all cases so that you can rely on it in programming and do not have
to consider even more exception handling.  It's bad enough already
with the drop convention.

If anything I think it requires a little more emphasis on what
constitutes an n-dimensional array and precisely what drop(m) does,
for example.  The above equality is *before* drop, not after, in other
words.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu May 25 10:52:08 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 25 May 2000 11:52:08 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <Pine.OSF.4.21.0005251145100.13610-100000@alnair.uio.no>

On Wed, 24 May 2000, Brad McNeney wrote:

>I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
>V5.0).

OK. I had a similar crash yesterday on a different machine but I think
with rather identical hardware, it was a batch job that was running
so I don't know exactly what caused the crash (after about 48 CPU hours,
arrgh), but I have a (small) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core3>

Anyway, Uwe suggested it might be a RAM hardware problem, which is not
impossible. I think these machines were bought while still in beta-test,
and hopefully, Compaq will drop by tomorrow to have a look. 

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 25 18:23:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 May 2000 13:23:26 -0400
Subject: [Rd] Bus Error crash (PR#551)
References: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <392D618E.DF1DD05F@bank-banque-canada.ca>

> These simulations also write about 190MB's to file

I had a similar problem with R crashing (I think it was a system error rather
than a bus error). In the end it was a hardware problem due to a standard IDE
cable on a new udma ATA 66 drive. R seemed to be the main thing that drove the
system hard enough to cause a problem. It wasn't severe enough to crash the
system, just R.

The problem stopped if I slowed the system to 400MHz. The place that sold me the
system said I only needed the special cable on systems with a blue IDE
connector, but the disk drive manufacture's tech support said the cable would
probably fix the problem, so I got one and tried it, and it did fix the problem.
The special cables have finer wires and possibly a twisted pair. They have blue
connectors to match the (sometimes) blue connectors on the motherboard.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:12 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:12 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
Message-ID: <200005300939.LAA08854@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:18 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:18 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#558)
Message-ID: <200005300939.LAA08876@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 30 11:31:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 May 2000 11:31:39 +0100 (BST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005301126380.5585-100000@auk.stats>

On Tue, 30 May 2000 stephen@anc.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

It is already `protects' in the current sources (R-devel): I didn't check
1.0.1.  Not sure why you submitted this twice (PR#557 and PR#558)?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 30 11:40:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2000 12:40:17 +0200
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: stephen@anc.ed.ac.uk's message of "Tue, 30 May 2000 11:39:12 +0200 (MET DST)"
References: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <x2ya4sl3se.fsf@blueberry.kubism.ku.dk>

stephen@anc.ed.ac.uk writes:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

Yup. Already fixed in the development version.

Actually "SEXP pointer" is a bit like "ATM machine". SEXPs are
pointers to SEXPREC, so is a SEXP pointer a (SEXPREC **) ? Besides,
one is not protecting the pointer but the object it points to (by
putting a pointer to it on the protection stack). This is
a common misconception:

 PROTECT(p);
 ...
 p = AllocSexp(....);

will not protect the new value of p. You need

 PROTECT(p);
 ...
 UNPROTECT(1);
 PROTECT(p = AllocSexp(....));

Hmm. Looks like the whole section needs going over. The stuff about
"ensuring that the pointer is updated" is bogus too (it is VECRECs
that move, not SEXPRECs). And the description of UNPROTECT_PTR is
vacuous at best.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:11:38 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:11:38 +0200
Subject: [Rd] read.table and strip.white
Message-ID: <3934BB2A.77864FC@statistik.uni-dortmund.de>

Hi!

I want to read data (using read.table(.)) from a file like:

  "col1", "col2", "col3"
  1, 1, 1
  2, 2, 2


But the white spaces are interpreted:

  x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
  colnames(x)
[1] "col1"  " col2" " col3"
             ^       ^ 

So I would like to pass an argument like strip.white=TRUE (as in
scan(.)) to read.table(.) .
If this is nonsense, please let me know.


At my first look only three lines (and documentation) must be changed:

l. 1-3 add: function(..., strip.white=FALSE, ...)
                          ^^^^^^^^^^^^^^^^^
l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
                                  ^^^^^^^^^^^^^^^^^^^^^^^



There is also a little bug in the "windows help" to read.table(.):

Usage
read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
                                                              ^^^ must
be: "\"'"
and both of
read.csv(file, header = TRUE, sep = ",", quote="", 

read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 

                                                ^^ must be: "\""

Looks like a general problem with a backslashes in "winhelp" (?).

If requested, I will create a bug report...

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:35:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:35:13 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310735.IAA11142@toucan.stats.ox.ac.uk>

>Date: Wed, 31 May 2000 09:11:38 +0200
>From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
>
>There is also a little bug in the "windows help" to read.table(.):
>
>Usage
>read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
>                                                              ^^^ must
>be: "\"'"
>and both of
>read.csv(file, header = TRUE, sep = ",", quote="", 
>
>read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 
>
>                                                ^^ must be: "\""
>
>Looks like a general problem with a backslashes in "winhelp" (?).

Which system of help, and if text help which pager?  (I'm not
on Windows here to check, but the text file looks fine on Unix. My
guess is that this a pager bug.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:49:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:49:52 +0200
Subject: [Rd] read.table and strip.white
References: <200005310735.IAA11142@toucan.stats.ox.ac.uk>
Message-ID: <3934C420.5C8CECC1@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:
> [...]
> >Looks like a general problem with a backslashes in "winhelp" (?).
> 
> Which system of help, and if text help which pager?  (I'm not
> on Windows here to check, but the text file looks fine on Unix. My
> guess is that this a pager bug.)

The Windows Help system (R-1.0.1, NT4.0):
  help(read.table, winhelp=TRUE)

Text and HTML Help are OK.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:57:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:57:00 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310757.IAA22525@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:49:52 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] read.table and strip.white
> 
> Prof Brian Ripley wrote:
> > [...]
> > >Looks like a general problem with a backslashes in "winhelp" (?).
> > 
> > Which system of help, and if text help which pager?  (I'm not
> > on Windows here to check, but the text file looks fine on Unix. My
> > guess is that this a pager bug.)
> 
> The Windows Help system (R-1.0.1, NT4.0):
>   help(read.table, winhelp=TRUE)
> 
> Text and HTML Help are OK.

Thanks, will take a look.  winhelp comes with a health warning, and we
were thinking of withdrawing now most people have Compiled HTML.
Looks like at least one person uses it!

It is done by automatic translation from HTML written by someone else,
and there are a lot of known problems with it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 17:43:11 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 17:43:11 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005311643.RAA09975@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:11:38 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: R-devel <r-devel@stat.math.ethz.ch>
> CC: busse@statistik.uni-dortmund.de, Joerg Guettner <guettner@gmx.de>
> Subject: [Rd] read.table and strip.white 
> 
> Hi!
> 
> I want to read data (using read.table(.)) from a file like:
> 
>   "col1", "col2", "col3"
>   1, 1, 1
>   2, 2, 2
> 
> 
> But the white spaces are interpreted:
> 
>   x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
>   colnames(x)
> [1] "col1"  " col2" " col3"
>              ^       ^ 
> 
> So I would like to pass an argument like strip.white=TRUE (as in
> scan(.)) to read.table(.) .
> If this is nonsense, please let me know.
> 
> 
> At my first look only three lines (and documentation) must be changed:
> 
> l. 1-3 add: function(..., strip.white=FALSE, ...)
>                           ^^^^^^^^^^^^^^^^^
> l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
>                                   ^^^^^^^^^^^^^^^^^^^^^^^
> 

I was rather surprised here, and this is not what the prototype does:

  .col1. .col2. .col3. 
1      1      1      1
2      2      2      2

Should not strip.white be true for the header line?
That's what the prototype does:

toucan% cat fff
  col1, col2, col3
  a, 1, 1
  b, 2, 2

Splus
> x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> x
  col1 col2 col3 
1    a    1    1
2    b    2    2
> as.matrix(x)
   col1 col2 col3 
1 "  a" "1"  "1" 
2 "  b" "2"  "2" 

You can always quote on the header line if you really want names
with leading spaces.

I think we could add strip.white for use in the body, quite easily.

Any comments?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed May 31 18:11:55 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 31 May 2000 19:11:55 +0200 (CEST)
Subject: [Rd] no $method from as.hclust (PR#538)
In-Reply-To: <200005102200.AAA05996@pubhealth.ku.dk>
References: <200005102200.AAA05996@pubhealth.ku.dk>
Message-ID: <14645.18395.237724.736215@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 11 May 2000 00:00:23 +0200 (MET DST),
>>>>> denis  (d) wrote:

d> as.hclust returns objects with only 6 of the standard 7 
d> components of class hclust, leaving out "method", therefore
d> being incompatible with applications looking for all
d> 7 components.

Fixed in the development version. But I had to set the method to NA as
I see no way of extracting it from twins objects (as created by the
cluster package) short of parsing the call stored there ... but that
is too unreliable IMO as it interdepends with the default arguments
used etc.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 19:34:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 20:34:57 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk>
Message-ID: <39355B51.6A7D9361@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> > [...]

> I was rather surprised here, and this is not what the prototype does:
> 
>   .col1. .col2. .col3.
> 1      1      1      1
> 2      2      2      2
> 
> Should not strip.white be true for the header line?

If there are no compatibility problems, setting it to TRUE would be
useful ...
But compatibility is an important point, especially in read.table(.), I
think. Many R users have got their own functions using read.table(.), I
suppose. Maybe changing the defaults could break anything?


> That's what the prototype does:
> 
> toucan% cat fff
>   col1, col2, col3
>   a, 1, 1
>   b, 2, 2
> 
> Splus
> > x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> > x
>   col1 col2 col3
> 1    a    1    1
> 2    b    2    2
> > as.matrix(x)
>    col1 col2 col3
> 1 "  a" "1"  "1"
> 2 "  b" "2"  "2"
> 
> You can always quote on the header line if you really want names
> with leading spaces.
> 
> I think we could add strip.white for use in the body, quite easily.
>
> Any comments?


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed May 31 22:42:04 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 31 May 2000 23:42:04 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk> <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <3935872C.EC932AE1@univie.ac.at>

dear all,
well, all of you 
a) living in windowsland
b) being a little bit adventurous

i need your help to check out something.

finally, we have managed to get remote dcom running with r.
what does that mean?
it means that we can use client software
(for example excel) and this client software call r on a server
on another machine.

i managed to get it running in the following configuration:

client on windows 95 (osr2)
server on windows 2000 professional

if possible, i would like reports for other configurations.

prerequesites
current version of r (1.001) installed on both machines.
dcom server from cran, nonstandard extensions
for test purposes:
r-excel interface from nonstandard extensions

dcom + dcomcnfg installed on the win95 machine
it is available from
http://www.microsoft.com/com/dcom/dcom95/download.asp
you also need the tools on winnt or win2k,
but there there are automatically installed by the os.

now, dcomcnfg has to be used on both client and server

win2k pro as server (no nt domain)
start dcomcnfg
select StatConnctorSrv

security tab
custom access permissions
everyone allow access
custom launch permissions
everyone allow launch

identity tab
the interactive user

on win95 client
start dcomcnfg
location tab
run application on the following computer
enter the network name

the user loggrd in on the win95 machine
has to be known on the win2k machine.

if the installation works
(it worked in my case)
you can use xcel on the client and all the r function calls from within
excel
will be executed on the server machine.

voila:
statistical client server computing with a remote server

configuration can get tedious.
to me, it is unclear if reboot is needed after
changing access rights.
if you want to help,
try often enough.
and PLEASE report running configurations.

erich
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Mon May  1 01:48:53 2000
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Mon, 1 May 2000 12:48:53 +1200
Subject: [Rd] graphics: par(mfg=c(i,j,r,c)) (PR#529)
References: <200004281536.RAA21899@pubhealth.ku.dk> <x28zxyw72y.fsf@blueberry.kubism.ku.dk>
Message-ID: <00f701bfb307$06dc3120$175dd882@stat.auckland.ac.nz>

hi


> > x_1:20
> > y_1:20
> > #these 5 commands produce a 2x2 panel plot
> > par(mfrow=c(2,2))
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> > plot(x,y)
> >
> > #the following 2 commands successfully added the text 'panel[2,1]' to
> > panel[2,1]
> > par(mfg=c(2,1,2,2))
> > text(10,10,'panel[2,1]')
> >
> > #None of the following 3 command-pairs produced their intended results
for the
> > other
> > # 3 panels
> > par(mfg=c(1,2,2,2))
> > text(10,10,'panel[1,2]')
> >
> > par(mfg=c(1,1,2,2))
> > text(10,10,'panel[1,1]')
> >
> > par(mfg=c(2,2,2,2))
> > text(10,10,'panel[2,2]')
> >
> > #However, the following command-pair did as intended on the first panel
> > specified
> > # by mfg=c(2,1,2,2) above
> > par(mfg=c(2,1,2,2))
> > text(15,15,'panel[2,2]')
>
> Same thing happens on Linux. Might be something with restoring the
> coordinate transformations. Using
>
> par(mfg=c(1,1,2,2))
> plot(x,y)
> text(10,10,'panel[1,1]')
>
> *does* seem to work.


This was a clipping bug, to do with the fact that GClip only reset the
device's clipping region if the value of dd->gp.xpd changed.

I have committed a fix, which *forces* a reset of the clipping region when
par(xpd) is set.

For the record:  this just fixes the par(xpd) situation.  The problem may
resurface elsewhere, in which case it may be worth considering changing
GClip to *always* force a reset of the clipping region.

paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May  2 11:12:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 2 May 2000 12:12:24 +0200 (MET DST)
Subject: [Rd] rpois hangs (PR#530)
Message-ID: <200005021012.MAA10832@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> kjetikj@astro.uio.no writes:
    >> I have come across another really strange bug in rpois.  If I do >
    >> rpois(1, 1000000 * rpois(1, 10000)) sometimes it hangs, and hangs...
    >> On my XP1000 alphaev6 workstation, it seems to happen more
    >> frequently than on other machines. I started a session on an older
    PD> ........
    >> > rpois(1, 1000000 * rpois(1, 10000)) [hanging]
    >> 
    >> I think this is strange, because I've been doing this stuff a lot
    >> lately, but usually with a rather small parameter to the second
    >> rpois.

    PD> On Intel, that consistently gives

    >> rpois(1, 1000000 * rpois(1, 10000))
    PD> [1] -2147483648

    PD> I.e. signs of integer overflow. Apparently you partly get away with
    PD> it on a 64 bit machine, but I'm not surprised you get into regimes
    PD> that are not well tested by the poor developers working on hardware
    PD> from the bygone millennium....

I'm fixing this.  It's clear in the source code (rpois.c) 
that `int's are used in places where they must overflow as soon as  
lambda > ~= .Machine$integer.max

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Wed May  3 00:46:33 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Wed, 3 May 2000 01:46:33 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005022346.BAA17701@pubhealth.ku.dk>

The expressions

> x<-factor(x)

and

> class(x)<-"factor"

behave differently when x is already an ordered factor.  It may not be a
bug but it caught me out when I was trying to remove the "orderedness"
from a factor variable. The following R code illustrates the difference.
Is this difference between the 2 commands desirable?

> x<-1:3
> class(x)
NULL
> x<-ordered(x)
> class(x)
[1] "ordered" "factor"
> x<-factor(x)
> class(x)
[1] "ordered" "factor"
> class(x)<-"factor"
> class(x)
[1] "factor"

Murray Smith

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 01:05:51 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 2 May 2000 17:05:51 -0700 (PDT)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <200005022346.BAA17701@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000 mh.smith@auckland.ac.nz wrote:

> The expressions
> 
> > x<-factor(x)
> 
> and
> 
> > class(x)<-"factor"
> 
> behave differently when x is already an ordered factor.  It may not be a
> bug but it caught me out when I was trying to remove the "orderedness"
> from a factor variable. The following R code illustrates the difference.
> Is this difference between the 2 commands desirable?

Yes.  factor, like as.factor, turns its argument into a factor. As it
already is a factor this doesn't do anything. 

class(x)<-"factor" says that x is a factor and has no other class.  In
general it is a bad idea to explicitly set the class of a variable
like this (except when you're constructing the object).  This is for two
reasons. One, you usually don't want to remove other classes. Two, x may
not be a factor, and just setting its class to "factor" may leave it in an
inconsistent state. 
Eg
> x<-1:10
> class(x)<-"factor"
> x
NULL
Levels:

In this particular case you know that x has class c("ordered","factor")
and that you want it to have class "factor", so it is harmless. It still
may be unnecessary -- eg if you just want it to have treatment contrasts
rather than polynomial contrasts you can use C() or constrasts()<-.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May  3 06:49:26 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 03 May 2000 07:49:26 +0200
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: Thomas Lumley's message of "Tue, 2 May 2000 17:05:51 -0700 (PDT)"
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
Message-ID: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <thomas@biostat.washington.edu> writes:

> In this particular case you know that x has class c("ordered","factor")
> and that you want it to have class "factor", so it is harmless. It still
> may be unnecessary -- eg if you just want it to have treatment contrasts
> rather than polynomial contrasts you can use C() or constrasts()<-.

We do have a problem in the documentation:

The default for factor is ordered=FALSE according to the help page but

> factor(ordered(4:1),ordered=F)
[1] 4 3 2 1
Levels:  1 2 3 4 
> factor(ordered(4:1))
[1] 4 3 2 1
Levels:  1 < 2 < 3 < 4 

and the actual function definition says

function (x, levels = sort(unique(x), na.last = TRUE),
                    labels=levels, exclude = NA, ordered =
                    is.ordered(x))



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 08:38:45 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 09:38:45 +0200 (CEST)
Subject: [Rd] Possible bug in factor (PR#531)
In-Reply-To: <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk>
Message-ID: <14607.55173.968286.549995@lynne.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed May  3 08:39:06 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 3 May 2000 09:39:06 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005030739.JAA19698@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Thomas Lumley <thomas@biostat.washington.edu> writes:
    >> In this particular case you know that x has class
    >> c("ordered","factor") and that you want it to have class "factor",
    >> so it is harmless. It still may be unnecessary -- eg if you just
    >> want it to have treatment contrasts rather than polynomial contrasts
    >> you can use C() or constrasts()<-.

    PD> We do have a problem in the documentation:

    PD> The default for factor is ordered=FALSE according to the help page
    PD> but

    >> factor(ordered(4:1),ordered=F)
    PD> [1] 4 3 2 1 Levels: 1 2 3 4
    >> factor(ordered(4:1))
    PD> [1] 4 3 2 1 Levels: 1 < 2 < 3 < 4

    PD> and the actual function definition says

    PD> function (x, levels = sort(unique(x), na.last = TRUE),
    PD> labels=levels, exclude = NA, ordered = is.ordered(x))

I've fixed the docu for "r-release" [1.0.2 if ever].

BTW:  A branch merge would come handy...
      (should I try, using instructions on the R-developers' page?)

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May  3 11:24:23 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 3 May 2000 12:24:23 +0200 (CEST)
Subject: [Rd] print() "bug" for arrays with 0 columns
Message-ID: <14607.65111.375233.678442@lynne.ethz.ch>

The "bug" is that it doesn't print anything;
one might argue that this is not a bug, since such an array *is* empty, 
but I don't buy that argument.

It *does* print if #{columns} (= last dimension) > 0 :

 > array(NA,dim=c(2,0))
 > array(NA,dim=c(2,1,0))

 > array(NA,dim=c(0,2))
      [,1] [,2]
 > array(NA,dim=c(0,2,1))
 , , 1

      [,1] [,2]

 > array(NA,dim=c(0,0,1))
 , , 1


S-plus 5.1 does better for matrices 
           but worse (at least in some cases) for higher-rank arrays :

    > array(NA,dim=c(0,2))
    logical matrix: 0 rows, 2 columns. 
    > array(NA,dim=c(0,0,1))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(0,1,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,0,0))
    Problem in 1:(length(x)/nm): Missing value where number needed 
    Use traceback() to see the call stack
    > array(NA,dim=c(1,2,0))

    , , 
	 [,1] [,2] 
    [1,]   NA   NA

    , , 
	 [,1] [,2] 
    [1,]   NA   NA
    > 

---------

What should we be doing instead of the current behavior?
Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
I would want to do this in *all* cases where one of the dimensions is 0.

Other suggestions?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Wed May  3 11:53:41 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Wed, 3 May 2000 11:53:41 +0100 (BST)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.20.0005031147150.3072-100000@laplace>

On Wed, 3 May 2000, Martin Maechler wrote:

> What should we be doing instead of the current behavior?
> Typing a "sentence" ---as S+5 does for matrices--- seems quite reasonable;
> I would want to do this in *all* cases where one of the dimensions is 0.

I think this would be a good idea: I feel the current behaviour is
inconsistent.  Trying to standardise to anything else is likely to lead to
trouble.  In particular, attempting to duplicate the current behaviour for
0 rows in matrices will definitely not scale well to arrays.  Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May  3 16:19:19 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 3 May 2000 08:19:19 -0700 (PDT)
Subject: [Rd] print() "bug" for arrays with 0 columns
In-Reply-To: <14607.65111.375233.678442@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005030816530.3813-100000@mail.biostat.washington.edu>

On Wed, 3 May 2000, Martin Maechler wrote:

> The "bug" is that it doesn't print anything;
> one might argue that this is not a bug, since such an array *is* empty, 
> but I don't buy that argument.
> 

I think printing a message makes sense. The current behaviour of
zero-extent arrays and matrices is based on making the fewest possible
changes rather than on any particular user-level optimality criterion.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From russell-lenth@uiowa.edu  Wed May  3 18:15:11 2000
From: russell-lenth@uiowa.edu (russell-lenth@uiowa.edu)
Date: Wed, 3 May 2000 19:15:11 +0200 (MET DST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
Message-ID: <200005031715.TAA27669@pubhealth.ku.dk>

Dear R folks,

Additional problem... bug.report() failed, so am sending it from another
mailer.  The file it generated is appended.

Thanks

Russ
-- 
Russell V. Lenth -- Department of Statistics & Actuarial Science
The University of Iowa -- Iowa City, IA 52242  USA
Tel (319)335-0814 -- FAX (319)335-3017
mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/


===== R.bug.report =============================================
Hello,

We're experiencing problems with R 1.0.1 on the HP-UX system.
The most serious one is that the random-number generators don't work:

        R> runif(100)
        Error in runif(100) : .Random.seed[0] is not a valid Normal type

        R> .Random.seed
        [1] 18851  3338  2439

Is this a subscripting error?  Strange because building it on linux
works just fine.

Smaller errors I've noticed...  The command-line history doesn't work.
It was built by our computer-support people, and I think they had
trouble with the libraries for that.  (Contact is Ben Sherman,
bsherman@divms.uiowa.edu).  Also help.start() generates a bunch of
error messages:

R> help.start()
If netscape  is already running,        it is *not* restarted,
 and you must switch to its window.
Otherwise, be patient..
/usr/pkg/R/1.0.1/lib/R/bin/help.links[29]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[30]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[42]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[49]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[50]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.
/usr/pkg/R/1.0.1/lib/R/bin/help.links[53]:
/space/rlenth/.R/doc/html/packages.ht
ml: Cannot create the specified file.



Any idea what the problems are?

Thanks

Russ Lenth

--please do not edit the information below--

Version:
 platform = hppa1.1-hp-hpux10.20
 arch = hppa1.1
 os = hpux10.20
 system = hppa1.1, hpux10.20
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  3 19:27:57 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 3 May 2000 19:27:57 +0100 (BST)
Subject: [Rd] Bug report -- 1.0.1, HP-UX (PR#532)
In-Reply-To: <200005031715.TAA27669@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005031926360.24579-100000@auk.stats>

On Wed, 3 May 2000 russell-lenth@uiowa.edu wrote:

> Dear R folks,
> 
> Additional problem... bug.report() failed, so am sending it from another
> mailer.  The file it generated is appended.
> 
> Thanks
> 
> Russ
> -- 
> Russell V. Lenth -- Department of Statistics & Actuarial Science
> The University of Iowa -- Iowa City, IA 52242  USA
> Tel (319)335-0814 -- FAX (319)335-3017
> mailto:Russell-Lenth@uiowa.edu - http://www.stat.uiowa.edu/~rlenth/
> 
> 
> ===== R.bug.report =============================================
> Hello,
> 
> We're experiencing problems with R 1.0.1 on the HP-UX system.
> The most serious one is that the random-number generators don't work:
> 
>         R> runif(100)
>         Error in runif(100) : .Random.seed[0] is not a valid Normal type
> 
>         R> .Random.seed
>         [1] 18851  3338  2439
> 
> Is this a subscripting error?  Strange because building it on linux
> works just fine.

I think you've got a (very) old workspace being loaded there. Try starting
with R --vanilla to cross-check.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:27:32 2000
From: mh.smith@auckland.ac.nz (Murray Smith)
Date: Thu, 04 May 2000 15:27:32 +1200
Subject: [Rd] Possible bug in factor (PR#531)
References: <Pine.GSO.4.21.0005021656010.6086-100000@mail.biostat.washington.edu>
 <x2zoq889p5.fsf@blueberry.kubism.ku.dk> <14607.55173.968286.549995@lynne.ethz.ch>
Message-ID: <3910EE24.E64A79DA@auckland.ac.nz>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Thu May  4 04:25:36 2000
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Thu, 4 May 2000 05:25:36 +0200 (MET DST)
Subject: [Rd] Possible bug in factor (PR#531)
Message-ID: <200005040325.FAA29602@pubhealth.ku.dk>


--------------24483C2DB55E1A8493E7697F
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all,

The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have been
ordered).  For future analyses using the frame I wanted to correct the classes
of the those factors.  This was because I wished to use Helmert contrasts
rather than polynomial contrasts in the future analyses. I decided to correct
the class of these factors by using
> x<-factor(x)
Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter ordered in factor() was FALSE.  I reassembled
the data frame and still found that polynomial contrasts were being used for
all factors.

By the way as.factor() behaves in the same way as factor().

The issue comes down to that of whether the class "factor" and the class
c("factor","ordered") are nested or disjoint in relation to the functions
factor(), as.factor(), class().

In R we have 2 kinds of factor, unordered and ordered. A vector is made an
unordered factor by the function factor() and an ordered factor by the function
ordered(). That is unless the vector is already an ordered factor. Then
factor() does not create an unordered factor.  Why is it so much more difficult
to convert an ordered factor to an unordered factor than vice versa?  No good
reason. The semantics of representing the 2 types of factor by the class
"factor" and the class c("factor","ordered") have got in the way. We certainly
want both types to be of class "factor" so that is.factor() is TRUE for both,
but it is wrong to think of ordered factors as somehow nested in unordered
factors just because of the way the classes are represented in R.

I suggest that it is natural to have the default value of FALSE for the
parameter ordered in the functions factor() and as.factor()and I would make a
plea for that to be reimplemented (since the current manual entry for factor()
probably represents what the situation was once).

Murray

--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++


--------------24483C2DB55E1A8493E7697F
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
Hi all,
<p>The problem arose when I had a data frame in which all the factor variables
were declared to be ordered (although some of them clearly should not have
been ordered).&nbsp; For future analyses using the frame I wanted to correct
the classes of the those factors.&nbsp; This was because I wished to use
Helmert contrasts rather than polynomial contrasts in the future analyses.
I decided to correct the class of these factors by using
<br><tt>> x&lt;-factor(x)</tt>
<br>Although I didn't say so in my bug report, I got into trouble by assuming,
according to the documentation (as Peter Dalgaard pointed out), that the
default value of the parameter <tt>ordered</tt> in <tt>factor()</tt> was
<tt>FALSE.</tt>&nbsp; I reassembled the data frame and still found that
polynomial contrasts were being used for all factors.
<p>By the way <tt>as.factor()</tt> behaves in the same way as <tt>factor()</tt>.
<p>The issue comes down to that of whether the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> are nested or disjoint in
relation to the functions <tt>factor(), as.factor(), class()</tt>.
<p>In R we have 2 kinds of factor, unordered and ordered. A vector is made
an unordered factor by the function <tt>factor()</tt> and an ordered factor
by the function <tt>ordered()</tt>. That is unless the vector is already
an ordered factor. Then <tt>factor()</tt> does not create an unordered
factor.&nbsp; Why is it so much more difficult to convert an ordered factor
to an unordered factor than vice versa?&nbsp; No good reason. The semantics
of representing the 2 types of factor by the <tt>class</tt> <tt>"factor"</tt>
and the <tt>class c("factor","ordered")</tt> have got in the way. We certainly
want both types to be of <tt>class "factor"</tt> so that <tt>is.factor()</tt>
is <tt>TRUE</tt> for both, but it is wrong to think of ordered factors
as somehow nested in unordered factors just because of the way the classes
are represented in R.
<p>I suggest that it is natural to have the default value of <tt>FALSE</tt>
for the parameter <tt>ordered</tt> in the functions <tt>factor()</tt> and
<tt>as.factor()</tt>and I would make a plea for that to be reimplemented
(since the current manual entry for <tt>factor()</tt> probably represents
what the situation was once).
<p>Murray
<p>--
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>Murray H. Smith,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Senior Lecturer in Engineering
Statistics
<br>Engineering Science Department
<br>The University of Auckland
<br>Private Bag 92019
<br>Auckland
<br>New Zealand
<br>Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
<br>email: mh.smith@auckland.ac.nz
<br>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
<br>&nbsp;</html>

--------------24483C2DB55E1A8493E7697F--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:19:01 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:19:01 +0200 (MET DST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
Message-ID: <200005041719.TAA11051@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat
Submission from: (NULL) (149.149.32.46)


Hello,

	Thought you might be interested.  I tried to load the package tripack
needed by the sgeostat package.  After some careful searching,  three packages
were 
found which had the same error.  Here is the output.

Mike
  
> library(acepack) Error in dyn.load(x, as.logical(local),
as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/acepack/libs/acepack.so":
  /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
>library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
:
        unable to load shared library
"/usr/lib/R/library/tripack/libs/tripack.so":
  /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
>library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library
"/usr/lib/R/library/akima/libs/akima.so":
  /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mallen@tntech.edu  Thu May  4 18:20:36 2000
From: mallen@tntech.edu (mallen@tntech.edu)
Date: Thu, 4 May 2000 19:20:36 +0200 (MET DST)
Subject: [Rd] wsfe bug report just made (PR#534)
Message-ID: <200005041720.TAA11084@pubhealth.ku.dk>

Full_Name: Michael R. Allen
Version: 1.01
OS: linux redhat 6.2
Submission from: (NULL) (149.149.32.46)


Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
loaded the latest version of R as well.

Mike

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  4 18:40:42 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 4 May 2000 18:40:42 +0100 (BST)
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005041827230.26380-100000@auk.stats>

On Thu, 4 May 2000 mallen@tntech.edu wrote:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Hello,
> 
> 	Thought you might be interested.  I tried to load the package tripack
> needed by the sgeostat package.  After some careful searching,  three packages
> were 
> found which had the same error.  Here is the output.

> Mike
>   
> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 
> >library(tripack) Error in dyn.load(x, as.logical(local), as.logical(now))
> :
>         unable to load shared library
> "/usr/lib/R/library/tripack/libs/tripack.so":
>   /usr/lib/R/library/tripack/libs/tripack.so: undefined symbol: e_wsfe 
> >library(akima) Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/akima/libs/akima.so":
>   /usr/lib/R/library/akima/libs/akima.so: undefined symbol: e_wsfe      

That's a symbol from the Fortran I/O code.  There is no problem on RH6.0
on R 1.0.1, where the symbol is resolved from libg2c.a.

(1) Does FLIBS in etc/Makeconf include -lg2c?

(2) If so, do those packages have Makefiles in src? If so delete them
and reinstall.  (The latest version of akima does not, but earlier versions
did.)

(3) Does lg2c include e_wsfe?  (nm -g on it).  Is it finding the right
libg2c.a?

(4) I get nm -g ..../akima.so  giving

00013c5c T e_wsfe

and so I think it should be resolved in the *.so.

Which version of RedHat?  I suspect a RedHat inconsistency here, and other
people have reported that upgrading to the gcc-2.95.2 compiler set
solved the problem.  But it might just be old package versions.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu May  4 18:46:04 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 May 2000 12:46:04 -0500
Subject: [Rd] acepack, akima and tripack will not load (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:19:01 +0200 (MET DST)"
References: <200005041719.TAA11051@pubhealth.ku.dk>
Message-ID: <6rog6m2opv.fsf@franz.stat.wisc.edu>

mallen@tntech.edu writes:

> > library(acepack) Error in dyn.load(x, as.logical(local),
> as.logical(now)) :
>         unable to load shared library
> "/usr/lib/R/library/acepack/libs/acepack.so":
>   /usr/lib/R/library/acepack/libs/acepack.so: undefined symbol: e_wsfe 

That name e_wsfe probably comes from Fortran input/output routines.
Check if some Fortran code is trying to use a WRITE statement.  I
think there was another message this morning about this.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May  4 21:10:21 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2000 22:10:21 +0200
Subject: [Rd] wsfe bug report just made (PR#533)
In-Reply-To: mallen@tntech.edu's message of "Thu, 4 May 2000 19:20:36 +0200 (MET DST)"
References: <200005041720.TAA11084@pubhealth.ku.dk>
Message-ID: <x2bt2m13gy.fsf@blueberry.kubism.ku.dk>

mallen@tntech.edu writes:

> Full_Name: Michael R. Allen
> Version: 1.01
> OS: linux redhat 6.2
> Submission from: (NULL) (149.149.32.46)
> 
> 
> Sorry, I forgot to tell you.  I am running version 6.2 of redhat.  Also, I have
> loaded the latest version of R as well.
> 
> Mike
> 

But did you build the packages yourself and if so, how? (using which
compilers).

BTW: when you follow up on an earlier report via the web interface,
please do it as a follow-up. If you do it by mail, say for PR#533,
please include (PR#533) in the Subject line. That way things get filed
together. (I've fixed the number on this mail)



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May  5 13:59:25 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 5 May 2000 13:59:25 +0100 (BST)
Subject: [Rd] Windows version of R-devel
Message-ID: <200005051259.NAA13829@toucan.stats.ox.ac.uk>

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; charset=us-ascii
Content-MD5: 2xw8BXDeWRkQhskDXsXyCw==

I have put up a cross-compiled version of the development version of R
for Windows at

http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre

It is cross-compiled and will be automatically updated whenever I
build a development version.

So, no guarantees, not even that it will run[1], but if you would like
a preview of the new features in the pipeline for R 1.1.0 / rw1010
please take a look.  One new feature is that the R.dll has version
information, so you can check the version you have from the Version tab
in Properties.  (Look at the R Version field for the date).

I would be particularly interested in comments on the new data entry
editor (used by fix/edit on data frames).  This is still work in progress
(in parallel with changes on X11).

I've attached the current CHANGES file.

Brian Ripley

[1] The current version does run.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

--Colony_of_Beavers_524_000
Content-Type: TEXT/plain; name=CHANGES; charset=us-ascii; x-unix-mode=0644
Content-Description: CHANGES
Content-MD5: 1aFidsl41SI2UU27ac9gFw==

		Windows-specific changes to R
		=============================

See the file NEWS for changes that affect all versions of R.


rw1010
======

There is now a GUI preferences editor on the Edit menu in Rgui.

A data entry editor is now implemented.  This is similar to the Unix
one (see ?dataentry) with the additional feature that right-clicking
in a cell turns it into an editable field (entered as a new value
by navigating away from the cell).

Rterm will now load and save the commands history (as Rgui does).
There is a new item on the File menu in Rgui to save the commands
history at that point in a session, and a new function savehistory()
(only applicable in Rgui and Rterm).

Colours in Rconsole can be specified as "Windows" and will be taken 
from the current Windows colour scheme. (The preferences editor will
save the actual colour, though.)

The placement of multiple pagers is now `random' (so they will not
always appear in the centre of the screen) and under the MDI interface
the pager rows and columns settings are respected.

The postscript() device can now spool plots to a printer. You will
need a suitable program to send a file to the spooler (or even to send
it to ghostscript to interpret PostScript for the printer): the RedMon
suite available from http://www.cs.wisc.edu/~ghost/rjl.html should
provide suitable tools.  See ?postscript for further details.

The new xfig() device can be used, and a port of xfig to Windows (with
an X server and the Cygwin B20.1 environment and X11R6.4 installed) is at
ftp.franken.de:/pub/win32/develop/gnuwin32/cygwin/porters/Humblet_Pierre_A/B20
as  xfig-3.2.2-cygwin-b20.1-bin.tar.gz

The R DLL and executables now have standard Windows version
information, which will appear on a Version tab of the Properties
dialog box in Explorer.

The internal unzip and the installer now use unzip5.41, not unzip5.40, and
the DLL interface is incompatible.

There are changes in the tools needed to build R (see the file INSTALL)
and those recommended for building packages from source (see the file
README.packages).

New makefile target zipdata-% to zip up data directories in packages.


rw1001
======

The installer, rwinst.exe, now checks for ZIP files as well as zip files,
as some browsers manage to map filenames to uppercase.

There are batch files  Rd2txt.bat Rdconv.bat Rdindex.bat Sd2Rd.bat
which are the equivalent of the Unix `R CMD foo' utilities mentioned in
`Writing R Extensions'.  To use these you must have R_HOME set as an
environment variable (using the form P:/R/rw1001).  There is also a
shell script Rd2dvi.sh which you can use if you have sh.exe (as
used to compile packages) and latex etc. The environment variable
XDVI sets the previewer, defaulting to xdvi.bat.

A file `Makevars' in the `src' directory of a package can be used to
add to/override the MakeDll makefile used to make foo.dll, as on Unix.
(See `Creating shared libraries', section 3.4 of `Writing R Extensions'.)

Under rare conditions (lots of very short input lines) the history buffer
could overrun and so cause crashes. This has been possible since rw0623,
but first caused reported problems in rw1000 and has now been fixed.

Certain HP printer drivers (e.g. the 6/6MP-Postscript driver) reset the
FPU and so were causing crashes.  This has been circumvented in this
version by restoring the settings before and after each page.

Building on a non-default drive should be more reliable, as Perl is
used to find the current drive.


    -------------------------------------------------------------------

	For changes prior to the release of R 1.0.0 on 29 Feb 2000
	see the file CHANGES0 in the source distribution.

--Colony_of_Beavers_524_000--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:50:40 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:50:40 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <39131800.C0C90A64@statistik.uni-dortmund.de>

At first:
Thank you (and the core team) again for great improvements.


> I have put up a cross-compiled version of the development version of R
> for Windows at
> 
> http://www.stats.ox.ac.uk/pub/bdr/RWin/Rpre
> 
> It is cross-compiled and will be automatically updated whenever I
> build a development version.

UNimportant:

The ASCII files in cross-compiled rw1010 have got "UNIX-style"
linebreaks.
E.g. README or CHANGES are not easy to read with notepad.exe .
I don't know anything about cross-compiling, but maybe it is easy to run
UNIX2DOS on ASCII-files.


> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).

Comments to this in a later mail.


> [....] 
>   ------------------------------------------------------------------------
>                 Windows-specific changes to R
>                 =============================
> 
> See the file NEWS for changes that affect all versions of R.
> 
> rw1010
> ======
> 
> There is now a GUI preferences editor on the Edit menu in Rgui.

The default path to "Save" Rconsole is neither /rw1010/etc nor the
working directory.
I think, setting the default to the working directory would be useful.


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 19:52:12 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 20:52:12 +0200
Subject: [Rd] Data Entry Editor
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk>
Message-ID: <3913185C.AE3B059A@statistik.uni-dortmund.de>

Prof Brian Ripley, "[Rd] Windows version of R-devel":

> I would be particularly interested in comments on the new data entry
> editor (used by fix/edit on data frames).  This is still work in progress
> (in parallel with changes on X11).
> [...]
> A data entry editor is now implemented.  This is similar to the Unix
> one (see ?dataentry) with the additional feature that right-clicking
> in a cell turns it into an editable field (entered as a new value
> by navigating away from the cell).


You know most (or all) of the following points, I suppose:
(WinNT4.0)


- in help(dataentry): "... Tab moves left. ...", but moves right.

- Shift+Tab also moves right. I expected, it would move left (as in
other spreadsheets).

- If the "Data Entry Editor" is opened and you are moving the window of
another application around its window, it is "flickering" a long time.

- Using data.entry() on a existing matrix, list or data.frame, unnamed
columns after that are named "var1", "var2", etc.

- data.entry() does not work with all data.frames, e.g.:

   x <- data.frame(1:2, c("A", "B"))
   data.entry(x)
 Error in de.ncols(sdata) : wrong argument to dataentry

- data.entry() with some irregular names as "Modes" argument crashes,
e.g.:

   x <- 1
   data.entry(x, Modes = plot)
 Dr. Watson ...

- Expand existing vectors or matrices.
  It's to difficult to describe for me. Look into the examples:

   x <- 1
   data.entry(x)
   ## Klick into [2, 1]  (should be NA ?):
   0
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA


   x <- matrix(1:2, nrow=1)
   data.entry(x)
   ## Klick into [2, 1]: 
   1.#INF00e-316 
   ## and ENTER:
   1
   ## Klick into [3, 1]:
   0
   ## Klick into [4, 1]: 
   NA




Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May  5 20:09:07 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 05 May 2000 21:09:07 +0200
Subject: [Rd] Windows version of R-devel
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <39131C53.ABBDA0AE@statistik.uni-dortmund.de>

Uwe Ligges wrote:

> >
> > There is now a GUI preferences editor on the Edit menu in Rgui.
> 
> The default path to "Save" Rconsole is neither /rw1010/etc nor the
> working directory.
> I think, setting the default to the working directory would be useful.
> 

Ups! Just checked this again.
Default is set as described in ?Rconsole.  And this is absolutely
correct.
SORRY!

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May  5 20:38:11 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 5 May 2000 20:38:11 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913185C.AE3B059A@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>

On Fri, 5 May 2000, Uwe Ligges wrote:

> Prof Brian Ripley, "[Rd] Windows version of R-devel":
> 
> > I would be particularly interested in comments on the new data entry
> > editor (used by fix/edit on data frames).  This is still work in progress
> > (in parallel with changes on X11).
> > [...]
> > A data entry editor is now implemented.  This is similar to the Unix
> > one (see ?dataentry) with the additional feature that right-clicking
> > in a cell turns it into an editable field (entered as a new value
> > by navigating away from the cell).

data.entry on Unix has lots of quirks.  Thanks for the comments: as I
said, this is work in progress, and based on some already flaky code.

> You know most (or all) of the following points, I suppose:
> (WinNT4.0)
> 
> 
> - in help(dataentry): "... Tab moves left. ...", but moves right.

Thanks.

> - Shift+Tab also moves right. I expected, it would move left (as in
> other spreadsheets).

Not there, will add.

> - If the "Data Entry Editor" is opened and you are moving the window of
> another application around its window, it is "flickering" a long time.
> 
> - Using data.entry() on a existing matrix, list or data.frame, unnamed
> columns after that are named "var1", "var2", etc.

I don't see that here.

> - data.entry() does not work with all data.frames, e.g.:
> 
>    x <- data.frame(1:2, c("A", "B"))
>    data.entry(x)
>  Error in de.ncols(sdata) : wrong argument to dataentry

You should use edit and not data.entry with data frames.  That one is wrong
on Unix too.

> - data.entry() with some irregular names as "Modes" argument crashes,
> e.g.:
> 
>    x <- 1
>    data.entry(x, Modes = plot)
>  Dr. Watson ...

Crashes Unix too.

> - Expand existing vectors or matrices.
>   It's to difficult to describe for me. Look into the examples:
> 
>    x <- 1
>    data.entry(x)
>    ## Klick into [2, 1]  (should be NA ?):
>    0
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA
> 
> 
>    x <- matrix(1:2, nrow=1)
>    data.entry(x)
>    ## Klick into [2, 1]: 
>    1.#INF00e-316 
>    ## and ENTER:
>    1
>    ## Klick into [3, 1]:
>    0
>    ## Klick into [4, 1]: 
>    NA

There's some bug there: will take a look. Also single-clicking seems
suspect at present, acting as double clicking, so this is related I think.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May  6 00:40:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 May 2000 01:40:37 +0200
Subject: [Rd] Windows version of R-devel
In-Reply-To: Uwe Ligges's message of "Fri, 05 May 2000 20:50:40 +0200"
References: <200005051259.NAA13829@toucan.stats.ox.ac.uk> <39131800.C0C90A64@statistik.uni-dortmund.de>
Message-ID: <x2pur036ru.fsf@blueberry.kubism.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> UNimportant:
> 
> The ASCII files in cross-compiled rw1010 have got "UNIX-style"
> linebreaks.
> E.g. README or CHANGES are not easy to read with notepad.exe .
> I don't know anything about cross-compiling, but maybe it is easy to run
> UNIX2DOS on ASCII-files.

...or switch to wordpad, which reads such files just fine.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From William.Venables@cmis.CSIRO.AU  Sat May  6 05:01:51 2000
From: William.Venables@cmis.CSIRO.AU (William.Venables@cmis.CSIRO.AU)
Date: Sat, 6 May 2000 06:01:51 +0200 (MET DST)
Subject: [Rd] axis() deficiency (PR#535)
Message-ID: <200005060401.GAA26239@pubhealth.ku.dk>

This is more a deficiency than a bug.  The axis() function does
not seem to allow an axis to be placed internally on the plot (as
allowed by the argument pos to the corresponding S function).

The help information nevertheless has some reference to
"position" of the axis, (as well as side) as if there were some
choice about position other than side.

Bill Venables.


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat May  6 10:18:10 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat, 06 May 2000 11:18:10 +0200
Subject: [Rd] Data Entry Editor
References: <Pine.GSO.4.05.10005052027290.14194-100000@auk.stats>
Message-ID: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>

Prof Brian D Ripley wrote:

> > > I would be particularly interested in comments on the new data entry
> > > editor (used by fix/edit on data frames).  This is still work in progress
> > > (in parallel with changes on X11).
> > > [...]
> > > A data entry editor is now implemented.  This is similar to the Unix
> > > one (see ?dataentry) with the additional feature that right-clicking
> > > in a cell turns it into an editable field (entered as a new value
> > > by navigating away from the cell).
> 
> data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> said, this is work in progress, and based on some already flaky code.

I know. My intention was to point out some of these "quirks".
The Editor will be very useful and already is a _great_ tool for simple
data editing.

Looks like I should tell something like this more gracefully, but my
english too bad...


> > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > columns after that are named "var1", "var2", etc.
> 
> I don't see that here.

Example:

 x <- matrix(1:6, nrow=2)
 x

     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6

 data.edit(x)
 ## Closing the editor without modifications:
 x

     var1 var2 var3
[1,]    1    3    5
[2,]    2    4    6

 
> > - data.entry() does not work with all data.frames, e.g.:
> >
> >    x <- data.frame(1:2, c("A", "B"))
> >    data.entry(x)
> >  Error in de.ncols(sdata) : wrong argument to dataentry
> 
> You should use edit and not data.entry with data frames.  That one is wrong
> on Unix too.

So have a look at this:
 
 x <- data.frame(1:2, c("A", "B"))
 edit(x) ## same as:  edit.data.frame(x)
 ## Click into [3, 1]

R crashes...


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat May  6 11:11:58 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 6 May 2000 11:11:58 +0100 (BST)
Subject: [Rd] Data Entry Editor
In-Reply-To: <3913E352.A4CDE6D4@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.4.05.10005061105020.24002-100000@auk.stats>

On Sat, 6 May 2000, Uwe Ligges wrote:

> Prof Brian D Ripley wrote:
> 
> > > > I would be particularly interested in comments on the new data entry
> > > > editor (used by fix/edit on data frames).  This is still work in progress
> > > > (in parallel with changes on X11).
> > > > [...]
> > > > A data entry editor is now implemented.  This is similar to the Unix
> > > > one (see ?dataentry) with the additional feature that right-clicking
> > > > in a cell turns it into an editable field (entered as a new value
> > > > by navigating away from the cell).
> > 
> > data.entry on Unix has lots of quirks.  Thanks for the comments: as I
> > said, this is work in progress, and based on some already flaky code.
> 
> I know. My intention was to point out some of these "quirks".
> The Editor will be very useful and already is a _great_ tool for simple
> data editing.
> 
> Looks like I should tell something like this more gracefully, but my
> english too bad...
> 
> 
> > > - Using data.entry() on a existing matrix, list or data.frame, unnamed
> > > columns after that are named "var1", "var2", etc.
> > 
> > I don't see that here.
> 
> Example:
> 
>  x <- matrix(1:6, nrow=2)
>  x
> 
>      [,1] [,2] [,3]
> [1,]    1    3    5
> [2,]    2    4    6
> 
>  data.edit(x)
>  ## Closing the editor without modifications:
>  x
> 
>      var1 var2 var3
> [1,]    1    3    5
> [2,]    2    4    6

Oh, I see, the names in the returned object. That's intentional.
As dara frames cannot have unnamed columns in R objects, I thought
you meant unnamed in the data editor.

> > > - data.entry() does not work with all data.frames, e.g.:
> > >
> > >    x <- data.frame(1:2, c("A", "B"))
> > >    data.entry(x)
> > >  Error in de.ncols(sdata) : wrong argument to dataentry
> > 
> > You should use edit and not data.entry with data frames.  That one is wrong
> > on Unix too.
> 
> So have a look at this:
>  
>  x <- data.frame(1:2, c("A", "B"))
>  edit(x) ## same as:  edit.data.frame(x)
>  ## Click into [3, 1]
> 
> R crashes...

I have already said there is a problem with that pre-version that the
double-click interval is set wrongly, so it normally thinks you have
double-clicked before selecting the cell. The problem is the clicking, not
being a data frame.

I'll put up a new version in a day or two.  Already there are lots of
extra features, for example variable-width (and re-sizeable) columns.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May  7 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 7 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005070515.HAA27653@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 495 *
Subject: barplot
From: skala@incoma.cz
Date: Tue, 21 Mar 2000 09:20:33 +0100 (MET)
* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 400 *
Subject: X11 troubles
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 13 Jan 2000 14:31:42 +0100
--a) We don't handle multiple window closes well
--b) X11 errors should be caught by an error handler, not kill R
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 528 *
Subject: Wrong SEs in predict.lm(..., type="terms")
Subject: Wrong SEs in predict.lm(..., type="terms")
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Wed, 26 Apr 2000 12:42:00 +1000 (EST)
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 530 *
Subject: rpois hangs
From: kjetikj@astro.uio.no
Date: Sun, 30 Apr 2000 21:01:02 +0200 (MET DST)
* PR# 529 *
Subject: graphics: par(mfg=c(i,j,r,c))
From: Craig.Mckinstry@pnl.gov
Date: Fri, 28 Apr 2000 17:36:35 +0200 (MET DST)
* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Sun May  7 12:58:23 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Sun, 7 May 2000 13:58:23 +0200 (MET DST)
Subject: [Rd] Problem with match.arg() (PR#536)
Message-ID: <200005071158.NAA29351@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: Version 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello again!

This is a follow-up to my message on R-help about a problem with match.arg()
I have a little more on the topic, but not much really. 

First, it was not entirely true what I wrote in r-help that I call match.arg()
in my ramp(), because ramp() just calls qamp() with runif() as argument, but 
I have found that it happens both in ramp() and qamp().

Last night, just before I went home, R crashed with a segmentation fault. 
Unfortunately, I had limit coredumpsize 0, because I seldom want core-files,
so I haven't got it. I have removed that limit now. I have not been able to 
reproduce the crash, however.

Now, for a
> last.dump
$"apply(cbind(rep(1e+05, 25000)), 1, lineprofile, 10, 100, 1, "point")"
<environment: 140e187f0>

$"FUN(newX[, i], ...)"
<environment: 1404b6608>

$"apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)), "
<environment: 1404b5460>

$"FUN(newX[, i], ...)"
<environment: 1400f6798>

$"photonsdetectedbin(ncb, intensityfromcloud(ncb, intensityfromcloud, "
<environment: 1400f55c8>

$"sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))"
<environment: 1400f53e8>

$"rpois(ncloudsbin, sensitivity * intensityfromcloud)"
<environment: 1400f5168>

$"intensityfromcloud(ncb, intensityfromcloud, exptime, amptype)"
<environment: 1400f4c68>

$"ramp(ncloudsbin, amptype)"
<environment: 1400f4920>

$"qamp(runif(n), type)"
<environment: 1400ebdc0>

$"match.arg(type)"
<environment: 1400e97f0>

$"all(arg == choices)"
<environment: 140e2d740>

attr(,"error.message")
[1] "Error in arg == choices : comparison (1) is possible only for vector
types\n"
attr(,"class")
[1] "dump.frames"

I have also inserted some print statements at some places in the code. First:
qamp <- function(p,  type=c("point", "nolens"))
{
  print(c(2,type))
  type <- match.arg(type)
  if(type == "point")
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  print(c(1,type))
  type <- match.arg(type)
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}
(I'll rewrite these to use switch eventually).

And, also in match.arg():
match.arg <- function (arg, choices) {
    if (missing(choices)) {
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
    }
    print(c(2, arg, choices))
    if (all(arg == choices)) return(choices[1])
[...]
Upon running, I get
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[thousands of these... :-) ]
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"  "point"  "nolens"
[1] "1"     "point"
[1] "point"  "point"  "nolens"
[1] "2"     "point"
[1] "point"
Error in arg == choices : comparison (1) is possible only for vector types
So, suddenly, "choices" doesn't have a value, and consequently, the error.
FWIW, I have also printed formals(qamp)$type inside qamp, and it has the 
right value. 

Now, it seems hard to reproduce, I just did 100000 runs of ramp(10000, "point")

directly with no problems. In my code, ramp is called by a function that is
called
by a function, that is... :-) 

However, the code isn't very involved, really, so if you want to try, here it
is:
ncloudsbin <- function(binno, ntotalclouds, numberofbins = 100,
                       linewidth = numberofbins / 6)
  return(ntotalclouds * dnorm(binno, sd = linewidth))

intensityfromcloud <- function(ncloudsbin, cloudintensity, exptime, amptype)
  return(cloudintensity * exptime * ramp(ncloudsbin, amptype))

photonsdetectedbin <- function(ncloudsbin, intensityfromcloud,
                               continuumintensity, exptime, amptype,
                               sensitivity)
  return(sum(rpois(ncloudsbin, sensitivity * intensityfromcloud))
         + rgeom(1, 1 /(1 + (sensitivity * exptime * continuumintensity))))



lineprofile <- function(ntotalclouds, intensityfromcloud, continuumintensity,
                        exptime, amptype, sensitivity = 0.1, numberofbins =
100,
                        linewidth = numberofbins / 6)
{
  tf <- function(binno, ntotalclouds, intensityfromcloud, continuumintensity,
                 exptime, amptype, sensitivity, numberofbins, linewidth)
  {
    ncb <- ncloudsbin(binno, ntotalclouds, numberofbins, linewidth)
    return(photonsdetectedbin(ncb,
                   intensityfromcloud(
                            ncb, intensityfromcloud, exptime, amptype),
                   continuumintensity, exptime, amptype, sensitivity))
  }
  return(apply(cbind(-as.integer(numberofbins/2):as.integer(numberofbins/2)),
               1, tf,
               ntotalclouds, intensityfromcloud, continuumintensity,
               exptime, amptype, sensitivity, numberofbins, linewidth)) 
}

Note that "amptype" is here the "type" of the ?amp-functions. 
I call this by e.g. 
ll25000 <- apply(cbind(rep(100000, 25000)), 1, lineprofile, 10, 100, 1,
"point")


Just an idea: I have some problems in an entirely unrelated and more involved 
piece of code where it seems like sometimes, arguments are not returned from a 
function, that is, one variable of an object suddenly has no value. I haven't
really figured out if that is a bug of mine or in R, but could it be possible 
that something in
	formal.args <- formals(sys.function(sys.parent()))
	choices <- eval(formal.args[[deparse(substitute(arg))]])
doesn't get a value because there is an error in how objects are returned 
from a function?

BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
following:
Save workspace image? [y/n/c]: y
Error: NewWriteItem: unknown type 17

Well, I guess this isn't much go on, but I know you are really good at this!
By running the above code, the error happens on every run here, it is just a
matter
of letting it run for long enough. I hope it is something to start on. I have a
few
more last.dumps on file too, if they are of use.

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May  7 23:41:09 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 00:41:09 +0200
Subject: [Rd] Problem with match.arg() (PR#536)
In-Reply-To: kjetikj@astro.uio.no's message of "Sun, 7 May 2000 13:58:23 +0200 (MET DST)"
References: <200005071158.NAA29351@pubhealth.ku.dk>
Message-ID: <x2u2gac7ay.fsf@blueberry.kubism.ku.dk>

kjetikj@astro.uio.no writes:

> Full_Name: Kjetil Kjernsmo
> Version: Version 1.0.0
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
...
> BTW, I was exiting R (my ESS buffer was getting rather large), and I got the
> following:
> Save workspace image? [y/n/c]: y
> Error: NewWriteItem: unknown type 17

That one was fixed in 1.0.1, I believe. (Perhaps you should upgrade
and see if the other problem goes away too... I don't see anything
obviously relevant in the NEWS file though)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon May  8 15:24:20 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 08 May 2000 09:24:20 -0500
Subject: [Rd] P_sychics.com partnership
In-Reply-To: community@psychics.com's message of "Mon, 8 May 2000 03:53:52 -0400"
References: <200005080753.DAA21602@newlego.convoke.com>
Message-ID: <6rem7dw25n.fsf@franz.stat.wisc.edu>

	  [MM, list maintainer: The following was already bounced,
		    since I had updated my spam filters; that's why the
		    subject and the body have some "_" instead of "."   ]

community@psychics_com writes:

> Hello:
>
> We noticed you run a psychic related web site.

Hmm.  I'm not sure if we should interpret that statement regarding
r-devel as a compliment or an insult.  It could mean we answer
questions before people get around to asking them or it could mean
that our advice is about as useful and meaningful as that from other
members of the "psychic community".

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tov@ece.cmu.edu  Mon May  8 17:00:52 2000
From: tov@ece.cmu.edu (tov@ece.cmu.edu)
Date: Mon, 8 May 2000 18:00:52 +0200 (MET DST)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
Message-ID: <200005081600.SAA10511@pubhealth.ku.dk>


Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Here are the results:

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> m
     [,1] [,2]
[1,]  6.8  2.4
[2,]  2.4  8.2
R> eigen(m)
$values
[1] 19.281403  6.337993

$vectors
          [,1]       [,2]
[1,] 0.1918866  0.9967987
[2,] 0.9967987 -0.1918866


And for comparison, here is what I get on a Sun (with r-stable):

R> m <- matrix (c(6.8, 2.4, 2.4, 8.2), nrow=2)
R> eigen (m)
$values
[1] 10  5

$vectors
     [,1] [,2]
[1,]  0.6  0.8
[2,]  0.8 -0.6


I found this by running "make check" which also stumbles over svd.
Please let me know how I can help to investigate this.

  -tom


--please do not edit the information below--

Version:
 platform = powerpc-ibm-aix4.3.2.0
 arch = powerpc
 os = aix4.3.2.0
 system = powerpc, aix4.3.2.0
 status = Under development (unstable)
 major = 1
 minor = 1.0
 year = 2000
 month = May
 day = 3
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May  8 19:47:12 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 May 2000 20:47:12 +0200
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: tov@ece.cmu.edu's message of "Mon, 8 May 2000 18:00:52 +0200 (MET DST)"
References: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <x2hfc86frj.fsf@blueberry.kubism.ku.dk>

tov@ece.cmu.edu writes:

> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.

Hmm. We had a similar report a while back and it turned out to be
system specific. I believe the report was from Chong Gu.

> Version:
>  platform = powerpc-ibm-aix4.3.2.0
>  arch = powerpc
>  os = aix4.3.2.0
>  system = powerpc, aix4.3.2.0
>  status = Under development (unstable)
>  major = 1
>  minor = 1.0
>  year = 2000
>  month = May
>  day = 3
>  language = R

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pflugshaupt@geobot.umnw.ethz.ch  Tue May  9 11:44:07 2000
From: pflugshaupt@geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 09 May 2000 11:44:07 +0100
Subject: [Rd] Type III Sums of Squares?
Message-ID: <B53DAA87.216D%pflugshaupt@geobot.umnw.ethz.ch>

Hello,

I'd like to propose an extension to the function summary.aov.

In Splus (2000, I don't know about other versions), summary.aov allows a
parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
Sums of Squares. 

I know I can get Type III SS in R with drop1(model), but including the
functionality into summary.aov would, in my opinion,

- yield a more usable table (for example, the residual Df are missing in the
  drop1 table)
- put it into the obvious place to look for it
- increase S-Plus compatibility (by a minor degree, I'll admit)
- not break anything else (I might be wrong here)

Not knowing how to add it to the summary.aov function, I wrote a function to
extract the SS from drop1 output and paste them into a summary.aov table
(see below), but that's of course an ugly solution. I feel that there has to
be a simpler and more efficient way, such as reusing just the required parts
of drop1 inside summary.aov. But since I cannot give the matter enough time
to do it correctly, someone with more insight into the source code would
have to do it.

If including the functionality via an additional parameter doesn't require a
whole rebuild of summary.aov, I'd like to put it as a minor item on the
wish-list for some next version of R.

Cheers (and thanks for a great piece of software)

Kaspar Pflugshaupt



"summmary.aov.t3" <-
function (aov.obj) 
{
    # ugly hack, relies on names in output
    # tables of drop1 and summary.aov
 
    s <- summary(aov.obj)
    d <- drop1(aov.obj, test = "F")
    n <- nrow(d)
    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
    s
}

-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt@geobot.umnw.ethz.ch
privat:pflugshaupt@mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Tue May  9 12:00:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 09 May 2000 13:00:52 +0200
Subject: [Rd] R-WinEdt news
Message-ID: <3917EFE4.3C3EE78@statistik.uni-dortmund.de>

Dear Windows / WinEdt users!

A new version of the "R-WinEdt package" is available now.
(I know, Prof Brian D Ripley is not "... [enthusiastic] using it
[WinEdt] with an Open Source project.")

There are a few important improvements (and some bugfixes).

If you are interested, have a look at:
  http://www.statistik.uni-dortmund.de/leute/ligges.htm
(or in a few days on CRAN, I suppose).


Requirements: 
- Windows 32bit
- R-1.0.0 or later (one feature depends on R-1.1.0, in development)
- WinEdt 5 (build 20000415 or later)


Feel free to send bug reports, comments and feature requests.


Important part of the ReadMe:
=============================================================

Features:
---------

  - Syntax-Highlighting  (and highlighted printing)
    (function index of all packages available at CRAN 
     /bin/windows/windows-NT/contrib/ ,
     last update: 05.03.2000, R-1.0.0).

  - Many R functions at the same time in the same editor.

  - Buttons / Shortcuts for simple access (one click) to:

	- Save document and source(.) into R.

	- Paste selected code from WinEdt directly to R 
          (e.g. from history)

	- Open (and update) .Rhistory (so you can reuse your last commands).
          (Only works with rw1010 (R-1.1.0, in development) or later!)

  - Templates, e.g.: for(_ in _){_}

  - Faster starting than with standard configuration (of WinEdt).

  - Features of WinEdt 
    (e.g. Delimiter Check, advanced searching, bookmarks, macros, ...).

  - Independent of another WinEdt running with "LaTeX-configuration".

===================================================================


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Tue May  9 12:29:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Tue, 09 May 2000 21:29:24 +1000
Subject: [Rd] Type III Sums of Squares?
Message-ID: <3.0.32.20000509212921.01269370@pophost.nsw.cmis.csiro.au>

I'm tempted to say "Type III Sums of Squares? Just say 'no'."  Or any other
type, for that matter.

Personally I would be strongly against this suggestion, as I was when
S-PLUS first proposed it (sadly, to no avail).  It would encourage people
to use the damn things!  More precisely it would give some unwarranted
credibility to the whole SAS malarkey of "Type X" Sums of Squares, "Types"
of estimable functions, &c &c and further obscure the essential simplicity
of linear models.

If people are silly (and cold blooded) enough to use Type III Sums of
Squares the technology is there to do it, provided they understand how to
do it and are prepared to go to a little trouble.  I see no reason to make
it easy for them.

This may sound more than a little uncompromising to Kaspar, but this is an
old issue and we have been here lots of times before.

Bill Venables.




At 11:44 AM 5/9/00 +0100, Kaspar Pflugshaupt wrote:
>Hello,
>
>I'd like to propose an extension to the function summary.aov.
>
>In Splus (2000, I don't know about other versions), summary.aov allows a
>parameter ssType to be set to 1 or 3 (defaults to 1) to choose the type of
>Sums of Squares. 
>
>I know I can get Type III SS in R with drop1(model), but including the
>functionality into summary.aov would, in my opinion,
>
>- yield a more usable table (for example, the residual Df are missing in the
>  drop1 table)
>- put it into the obvious place to look for it
>- increase S-Plus compatibility (by a minor degree, I'll admit)
>- not break anything else (I might be wrong here)
>
>Not knowing how to add it to the summary.aov function, I wrote a function to
>extract the SS from drop1 output and paste them into a summary.aov table
>(see below), but that's of course an ugly solution. I feel that there has to
>be a simpler and more efficient way, such as reusing just the required parts
>of drop1 inside summary.aov. But since I cannot give the matter enough time
>to do it correctly, someone with more insight into the source code would
>have to do it.
>
>If including the functionality via an additional parameter doesn't require a
>whole rebuild of summary.aov, I'd like to put it as a minor item on the
>wish-list for some next version of R.
>
>Cheers (and thanks for a great piece of software)
>
>Kaspar Pflugshaupt
>
>
>
>"summmary.aov.t3" <-
>function (aov.obj) 
>{
>    # ugly hack, relies on names in output
>    # tables of drop1 and summary.aov
> 
>    s <- summary(aov.obj)
>    d <- drop1(aov.obj, test = "F")
>    n <- nrow(d)
>    s[[1]]$"Sum Sq"[1:(n - 1)] <- d$Sum[2:n]
>    s[[1]]$"Mean Sq" <- s[[1]]$"Sum Sq"/s[[1]]$Df
>    s[[1]]$"F value"[1:(n - 1)] <- d$F[2:n]
>    s[[1]]$"Pr(>F)"[1:(n - 1)] <- d$Pr[2:n]
>    names(s[[1]])[names(s[[1]]) == "Sum Sq"] <- "Sum Sq (Type III)"
>    s
>}
>
>-- 
>
>Kaspar Pflugshaupt
>Geobotanisches Institut
>Zuerichbergstr. 38
>CH-8044 Zuerich
>
>Tel. ++41 1 632 43 19
>Fax  ++41 1 632 12 15
>
>mailto:pflugshaupt@geobot.umnw.ethz.ch
>privat:pflugshaupt@mails.ch
>http://www.geobot.umnw.ethz.ch
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue May  9 16:39:05 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Tue, 9 May 2000 08:39:05 -0700 (PDT)
Subject: [Rd] eigen broken on AIX with R-devel? (PR#537)
In-Reply-To: <200005081600.SAA10511@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0005090837420.4639-100000@mail.biostat.washington.edu>

On Mon, 8 May 2000 tov@ece.cmu.edu wrote:

> 
> Hi,  I get the wrong eigen values on an AIX machine with R-devel of 5/3/00.
> 

When we last saw this bug it was compiler-specific.  gcc/g77 worked but
cc/f77 didn't (and I think gcc/f77 wouldn't even configure). 

I don't think we understand the bug, though.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From alert35@us.sina.com  Wed May 10 03:58:39 2000
From: alert35@us.sina.com (alert35@us.sina.com)
Date: Tue, 09 May 2000 22:58:39 -0400
Subject: [Rd] The Contrarian - BUY ALERT                        .                ~*
Message-ID: <B0000031817@servidor2.opendat.cl>


THE CONTRARIAN           

                                                        

BUY ALERT: 



RecycleNet Corp.

Symbol - GARM (OTCBB-pink sheets)      

Recent Price - $.35

52 Week Range - $.12 - .75

Estimated Float - 4 Million

Shares Outstanding - 78 Million

   

Now that Microsoft and other Internet stocks have fallen, it's time to 

sift through the wreckage and look for treasure. As Contrarian investors, 

we've been waiting for this dynamic group to fall out of favor temporarily, 

so we can buy at discounted prices.



The following stock should be purchased for long-term capital gains:

RecycleNet Corporation is hardly a new player in the dot.com game - 

they went electronic in May 1995, after many years in a print format.  

Their founder and current Chairman, Paul Roszel, has been in the 

recycling business for over 20 years, and has vast experience with 

every type of scrap commodity. 



Recyclenet is part of the booming "B2B" business to business portion 

of the Internet. It is estimated that B2B electronic commerce will soar 

from $17 Billion in sales in 1998 to $327 Billion by 2002. Electronic 

commerce gives GARM the ability to trade with other companies all over 

the world, at very low cost. They earn money from subscribers who pay 

a monthly fee to join their Recycler's Exchange.   



What is the reason to buy now? RecycleNet should be reporting excellent 

revenues and earnings in the next quarter, the floating supply of shares is 

small, and the financial community is just starting to discover GARM. They 

have filed their Form 10 to become a reporting company with the SEC, and 

they should be emerging from their pink sheet listing soon.

   

Meanwhile, traffic at their web site is hitting record numbers (almost 2 Million 

page views per month), and is growing at over 20% monthly. With the stock 

trading at half of its February peak, The Contrarian believes that GARM can 

reach the $1.50 level near-term, with even higher prices further out. Take a 

position now while RecycleNet is on the bargain shelf. 



Disclaimer: The Contrarian has no affiliation with the issuer, and has received 

no fee from RecycleNet for this report. The Contrarian and/or its affiliates currently 

own shares of RecycleNet, and may buy or sell shares at any time after the 

dissemination of this report.  Because the publisher owns this stock, there may 

be a conflict of interest in the Contrarian's statements and opinions. The Contrarian 

is not a registered investment advisor, broker or dealer. Purchase of this stock 

may be considered speculative, and may result in the loss of some or all of any 

investment made. 



To SUBSCRIBE to future announcements or request ADDTIONAL INFORMATION 

regarding the RecycleNet opportunity, please click on the appropriate link below 

and hit send.



mailto:zone15@us.sina.com?subject=Subscribe



mailto:zone15@us.sina.com?subject=Additional-Information





******************************************

If you wish to be deleted from inclusion 

any future mailing, please click on the 

link below and hit send.

******************************************



mailto:zone15@us.sina.com?subject=delete 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 10 07:18:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 10 May 2000 08:18:33 +0200 (CEST)
Subject: [Rd] R and Java ? [forwarded]
Message-ID: <14616.65337.215048.847011@lynne.ethz.ch>

This is of broader interest,
and I'm not the expert.. 

------- start of forwarded message -------
From: Cheryl J Fernandes <cferna3@uic.edu>
To: maechler@stat.math.ethz.ch
Subject: Re R and Java
Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)


Hi Martin,
    I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
at the university of Illinois, at Chicago.

I have tried and tried but just cannot manage to find teh solutuon to teh
following problem.

My question is: Can R be interfaced with Java. ??

My dilemma: I'm trying to run  the RGui program in WintNT from a Java
application. i;m using runtime.exec()
It opens teh program but after that nothing happens. After opening teh
program i'm passing some commands to R via java's process
OutputStreamWriter. But it does NOT respond to any of teh commands not
even by giving an exception. 

Coudl u please let me know if i can pass commandline commands to RGui from
within Java or are there special API's that are available. I know for a
fact taht Java does NOT have API's for R. It does have special interface
API for major programs
like C. Excel, MS-Word 

Any help would be greatly appreciated.

The code for the above is:


Runtime  rt = Runtime.getRuntime();
String strCmdTmp =""; 
strCmdTmp =  "Z:\\R\\rw1000\\bin\\Rgui ";
   
Process jproc= 	rt.exec(strCmdTmp);    	    
OutputStreamWriter o = new OutputStreamWriter(jproc.getOutputStream()); 

o.write("a<-c(4,5)\n");
o.write("mean(a)\n");
o.write("quit(\"no\")\n"); 
o.flush();
        	
String line=null;

BufferedReader reader = new BufferedReader(new
InputStreamReader(jproc.getInputStream()));
while((line = reader.readLine())!=null)
System.out.println(" The line is:  " +line);


Thanks in advance,

Cheryl Fernandes                 (Home): (312) 432 4396, (630) 834 3796 
1926 W Harrison Street,          (Office): (312) 996 4605        
Medical Center Apartments,
Apt# 1202,
Chicago, IL 60612

email: cferna3@uic.edu
       cfernand@eecs.uic.edu

------- end of forwarded message -------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Wed May 10 16:27:39 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Wed, 10 May 2000 08:27:39 -0700 (PDT)
Subject: [Rd] R and Java ? [forwarded]
In-Reply-To: <14616.65337.215048.847011@lynne.ethz.ch>
Message-ID: <Pine.GSO.4.21.0005100825290.1359-100000@mail.biostat.washington.edu>

On Wed, 10 May 2000, Martin Maechler wrote:

> This is of broader interest,
> and I'm not the expert.. 
> 
> ------- start of forwarded message -------
> From: Cheryl J Fernandes <cferna3@uic.edu>
> To: maechler@stat.math.ethz.ch
> Subject: Re R and Java
> Date: Tue, 9 May 2000 13:54:35 -0500 (CDT)
> 
> 
> Hi Martin,
>     I'm Cheryl Fernandes currently pursuing my Masters Of Computer Science
> at the university of Illinois, at Chicago.
> 
> I have tried and tried but just cannot manage to find teh solutuon to teh
> following problem.
> 
> My question is: Can R be interfaced with Java. ??
> 
> My dilemma: I'm trying to run  the RGui program in WintNT from a Java
> application. i;m using runtime.exec()
> It opens teh program but after that nothing happens. After opening teh
> program i'm passing some commands to R via java's process
> OutputStreamWriter. But it does NOT respond to any of teh commands not
> even by giving an exception. 
> 
> Coudl u please let me know if i can pass commandline commands to RGui from
> within Java or are there special API's that are available. I know for a
> fact taht Java does NOT have API's for R. It does have special interface
> API for major programs
> like C. Excel, MS-Word 
> 

You could probably use the COM interface to R, which is available from
CRAN under 'non-standard extensions'.  It's still under development but it
does some things.  I believe there is a set of classes for calling COM
from Java under Windows.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From denis@mercury.cor.epa.gov  Wed May 10 23:00:23 2000
From: denis@mercury.cor.epa.gov (denis@mercury.cor.epa.gov)
Date: Thu, 11 May 2000 00:00:23 +0200 (MET DST)
Subject: [Rd] no $method from as.hclust (PR#538)
Message-ID: <200005102200.AAA05996@pubhealth.ku.dk>

as.hclust returns objects with only 6 of the standard 7 
components of class hclust, leaving out "method", therefore
being incompatible with applications looking for all
7 components.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 11 13:53:21 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 May 2000 13:53:21 +0100 (BST)
Subject: [Rd] scale factors/overdispersion in GLM: possible bug?
Message-ID: <200005111253.NAA03787@toucan.stats.ox.ac.uk>

> Date: Wed, 19 Apr 2000 10:46:45 -0400 (EDT)
> From: Ben Bolker <ben@zoo.ufl.edu>

A belated reply: I have been away and then busy (including on this).

>   I've been poking around with GLMs (on which I am *not* an expert) on
> behalf of a student, particularly binomial (standard logit link) nested
> models with overdispersion.
> 
>   I have one possible bug to report (but I'm not confident enough to be
> *sure* it's a bug); one comment on the general inconsistency that seems to
> afflict the various functions for dealing with overdispersion in GLMs
> (anova.glm, drop1.glm, summary.glm); and one statistical query that maybe
> someone would answer if they're feeling generous.
> 
>   1.  possible bug:
>   in drop1.glm() with scale != 0, R seems to divide by the dispersion
> parameter twice:
> 
>  first (if family != "gaussian") it sets
> 
>  loglik <- dev/dispersion
> 
>  then (if test == "Chisq") it calculates
> 
>      dev <- loglik - loglik[1]
>      dev[nas] <- 1 - pchisq(dev[nas]/dispersion, aod$Df[nas])
> 
> (in addition, I suppose this could now be just 
> pchisq(...,lower.tail=FALSE) for greater precision)
> 
>   Is this a bug or am I missing something?

A bug.  Using the appropriate tail for accuracy is irrelevant, though.

>   2.  There seems to be a fair amount of variability in how drop1.glm,
> anova.glm, stat.anova, summary.glm deal with dispersion parameters:
>   summary.glm() has an optional parameter called "dispersion"
>   stat.anova() has a parameter called "scale", which it doesn't even use
> if test=="Chisq"
>   anova.glm calls stat.anova() with an automatically calculated scale
> parameter (sum(object$weights*object$residuals^2)/object$df.residual), not
> allowing a user-defined scale
>   drop1.glm() has an optional parameter called "scale"
> 
>   I would mess around and try to fix these myself, but (1) there seem to
> be some design decisions to make here, (2) I'm not sufficiently sure of
> myself to want to break things.

I've worked over all these for 1.1.0.  Be careful in how much sameness
to expect, though. drop1 has an argument called 'scale', and is
generic.  So drop1.glm must have the same name even though `dispersion'
might be more appropriate.

>   3. There seems to be a certain variety of advice around in how to deal
> with overdispersion in GLMs.  One could (1) calculate the scale parameter
> from the residuals (either residual deviance/residual df or Pearson
> chi-sq/residual df) and feed that back into the analysis; (2) use
> quasi-likelihood with logit link and variance mu(1-mu); (3) use a form of
> F-test, as suggested by Crawley (which I guess has something to do with
> the fact that the scale parameter is estimated, not really known).  Are
> these equivalent, or approximately equivalent?  Does anyone have a
> favorite reference on the subject?  (I've been looking at V&R3, Crawley's
> "GLIM for Ecologists", and Lindsey's GLM book -- I haven't acquired Dobson
> or McCullagh and Nelder yet).

Over-dispersion is discussed at length in

Collett, D. (1991) Modelling Binary Data

and somewhat less discursively in

Cox & Snell (1989) Analysing Binary Data
McCullagh & Nelder (1989, section 4.5)
Aitkin, Anderson, Francis, Hinde (1983) Statistical Modelling in GLIM

amongst others.  Almost all of this is binomial models, but Aitkin et al
do consider Poisson.

Basically, all find some justification for a model with variance phi >=
1 times that given by a binomial or poisson family. For X_i ~
binomial(n, p_i), n > 1 not depending on i, this is known as the
Williams model in some circles.  So people since Williams (and I seem
to remember before) have been fitting such models and estimating phi by
residual deviance/residual df.  That is a quasi-likelihood procedure,
as even where real models exist, the glm is not giving the MLE.

To make sense of this I have introduced two new families, quasibinomial
and quasipoisson, that use the Williams model, and now 
binomial and Poisson never allow phi to be estimated.  And for the Williams
model there is an "F" test option to add1 and drop1 (and if you
use "F" with a binomial or poisson it tells you it is really using
the quasi-version).   This applies to summary.glm, predict.glm, anova.glm,
add1.glm, drop1.glm.  (As quasi models have no likelihood, they
have no AIC either, and so step will not work for them.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:03:30 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:03:30 +0200 (MET DST)
Subject: [Rd] Documentation of par(ann) (PR#539)
Message-ID: <200005121403.QAA23841@pubhealth.ku.dk>

The on-line documentation for the 'ann' argument under 
par(), states "If set to 'FALSE'...".  However, this 
parameter shows up as a numeric on my machine, not as a 
logical.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:04:26 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:04:26 +0200 (MET DST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
Message-ID: <200005121404.QAA23856@pubhealth.ku.dk>

The on-line documentation for par() refers to a 'gamma'
argument.
However, if 'par()' is invoked, there is no gamma argument.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)

--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:05:56 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:05:56 +0200 (MET DST)
Subject: [Rd] Typo in documentation for order() (PR#541)
Message-ID: <200005121405.QAA23903@pubhealth.ku.dk>

The documentation for 'order()' has the following sentence:

`sort.list' is the same, using only one argument put
allowing
     partial sorting.

Should "put" be "but" or possibly "'partial'"?

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From salwin@mitretek.org  Fri May 12 15:07:57 2000
From: salwin@mitretek.org (salwin@mitretek.org)
Date: Fri, 12 May 2000 16:07:57 +0200 (MET DST)
Subject: [Rd] Inconsistent behavior of par() agruments on lines() (PR#542)
Message-ID: <200005121407.QAA23953@pubhealth.ku.dk>

Setting argument 'lty' via par() to dased lines does not
affect 
how lines are drawn with 'lines()' -- they remain solid. 
Two
possible fixes:
1) Have 'lty' affect the behavior of 'lines()'
2) Leave behavior as is, indicating in the documentation
that
the default is '1' and not 'par("lty")'.

Note:  Option 1 is more consistent with how the 'col'
argument to
par() is handled.

-- 
Art Salwin
salwin@mitretek.org
(202) 863-2985
(202) 863-2988 (fax)


--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Windows 9x 4.0 (build 1212)  B

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 15:57:23 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 15:57:23 +0100 (BST)
Subject: [Rd] Documentation of par(ann) (PR#539)
In-Reply-To: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121553480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for the 'ann' argument under 
> par(), states "If set to 'FALSE'...".  However, this 
> parameter shows up as a numeric on my machine, not as a 
> logical.

So? Try it

par(ann=FALSE)
plot(1:10)

works as documented.  It happens to use an integer internally.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29

You could upgrade to 1.0.1 before bug-reporting.


>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:04:02 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:04:02 +0100 (BST)
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
Unix it also appears. It is the second-last parameter.

Are you absolutely sure about this?  In any case, please upgrade to 1.0.1,
the current version.

The devga device on Windows is one of the few places where this parameter
actually does anything.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 16:05:21 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 16:05:21 +0100 (BST)
Subject: [Rd] Typo in documentation for order() (PR#541)
In-Reply-To: <200005121405.QAA23903@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121604480.13348-100000@auk.stats>

On Fri, 12 May 2000 salwin@mitretek.org wrote:

> The documentation for 'order()' has the following sentence:
> 
> `sort.list' is the same, using only one argument put
> allowing
>      partial sorting.
> 
> Should "put" be "but" or possibly "'partial'"?

The first. Squashed now, thank you.

> 
> -- 
> Art Salwin
> salwin@mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = Windows
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status = 
>  major = 1
>  minor = 0.0
>  year = 2000
>  month = February
>  day = 29
>  language = R
> 
> Windows 9x 4.0 (build 1212)  B
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 12 16:27:33 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 May 2000 17:27:33 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
In-Reply-To: Prof Brian D Ripley's message of "Fri, 12 May 2000 16:04:02 +0100 (BST)"
References: <Pine.GSO.4.05.10005121558220.13348-100000@auk.stats>
Message-ID: <x2em77ss9m.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Fri, 12 May 2000 salwin@mitretek.org wrote:
> 
> > The on-line documentation for par() refers to a 'gamma'
> > argument.
> > However, if 'par()' is invoked, there is no gamma argument.
> 
> There is on 1.0.1 on Windows, and I see no change since 1.0.0, for which on
> Unix it also appears. It is the second-last parameter.

..curiously out of alphabetical sequence with the others (tlc is out
of sequence too). We might want to fix, even though we never promised
to display lists in alphabetical order: options() is completely
jumbled in that respect, for instance.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vilhuber@yorku.ca  Fri May 12 16:55:20 2000
From: vilhuber@yorku.ca (vilhuber@yorku.ca)
Date: Fri, 12 May 2000 17:55:20 +0200 (MET DST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
Message-ID: <200005121555.RAA24885@pubhealth.ku.dk>

Full_Name: Lars Vilhuber
Version: 1.0.1
OS: Linux (SuSE 6.3)
Submission from: (NULL) (148.129.143.2)


Problem arises when X11 headers not present.

- When running "./configure", X11 is not found, and "no" appears on the log
messages.
However, at compile time, the X11 headers are still referenced, and the
compilation 
bombs. I presume that either configuration should end with an error message, or

compilation ( makefiles or src files ) should respect the absence of X11
headers.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 12 17:50:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 12 May 2000 17:50:37 +0100 (BST)
Subject: [Rd] X11 not present leads to compile error (PR#543)
In-Reply-To: <200005121555.RAA24885@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005121748530.22244-100000@auk.stats>

On Fri, 12 May 2000 vilhuber@yorku.ca wrote:

> Full_Name: Lars Vilhuber
> Version: 1.0.1
> OS: Linux (SuSE 6.3)
> Submission from: (NULL) (148.129.143.2)
> 
> 
> Problem arises when X11 headers not present.
> 
> - When running "./configure", X11 is not found, and "no" appears on the log
> messages.
> However, at compile time, the X11 headers are still referenced, and the
> compilation 
> bombs. I presume that either configuration should end with an error message, or
> 
> compilation ( makefiles or src files ) should respect the absence of X11
> headers.

This is already fixed for 1.1.0: please try the R-devel snapshot.
(It certainly works with --without-x, and we would certainly be interested
to know if that is actually needed.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:35:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:35:57 +0200
Subject: [Rd] Documentation of par(ann) (PR#539)
References: <200005121403.QAA23841@pubhealth.ku.dk>
Message-ID: <391C16CD.A8D4D71@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for the 'ann' argument under
> par(), states "If set to 'FALSE'...".  However, this
> parameter shows up as a numeric on my machine, not as a
> logical.

par("ann"=FALSE) works as expected (and described) on NT4.0, R-1.0.1.
With par("ann") you get the value "translated" to numeric.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 12 15:37:42 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 12 May 2000 16:37:42 +0200
Subject: [Rd] Documentation of par(gamma) (PR#540)
References: <200005121404.QAA23856@pubhealth.ku.dk>
Message-ID: <391C1736.972181D@statistik.uni-dortmund.de>

salwin@mitretek.org wrote:
> 
> The on-line documentation for par() refers to a 'gamma'
> argument.
> However, if 'par()' is invoked, there is no gamma argument.

Hm. Here OK (R-1.0.1, NT4.0):

> par("gamma")
[1] 1

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jean.Thioulouse@biomserv.univ-lyon1.fr  Mon May 15 09:50:52 2000
From: Jean.Thioulouse@biomserv.univ-lyon1.fr (Jean Thioulouse)
Date: Mon, 15 May 2000 10:50:52 +0200
Subject: [Rd] Macintosh version of R
Message-ID: <p04310106b5456acbc26d@[134.214.92.69]>

Hello

I would like to have some information about the current status
of the Macintosh version of R. Is someone working on it ? Is it
possible to obtain the source of the Macintosh interface (0.64
version) ?

Thank you
Jean

-- 
Jean Thioulouse - Laboratoire de Biometrie et Biologie Evolutive
Universite Lyon 1 - Bat  711 - 69622 Villeurbanne Cedex - France
Fax: (33) 4 78 89 27 19              Tel/Fax: (33) 4 72 43 27 56
          http://pbil.univ-lyon1.fr/ADE-4/JTHome.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Roger.Bivand@nhh.no  Mon May 15 15:26:11 2000
From: Roger.Bivand@nhh.no (Roger.Bivand@nhh.no)
Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151426.QAA13624@pubhealth.ku.dk>

Full_Name: Roger Bivand
Version: 1.0.1
OS: Linux RH 6.1
Submission from: (NULL) (158.37.102.52)


I am trying to use pythag() from src/appl in a .Call() function.

pythag seems to be missing from the ROUTINES list in appl - putting
it in solved the problem:

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> dyn.load("pythagtry.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
	unable to load shared library "/home/rsb/tmp/pythagtry.so":
  /home/rsb/tmp/pythagtry.so: undefined symbol: pythag
> is.loaded("pythag")
[1] FALSE
-----------------------------------------
/* pythagtry.c */
#include <R.h>
#include <Rdefines.h>
#include <R_ext/Applic.h>

SEXP pytry(SEXP x, SEXP y)
{
	SEXP ans;
	double xa, xb;
	xa = NUMERIC_POINTER(x)[0];
	xb = NUMERIC_POINTER(y)[0];
	PROTECT(ans = NEW_NUMERIC(1));
	NUMERIC_POINTER(ans)[0] = pythag(xa, xb);
	UNPROTECT(1);
	return(ans);
}
-------------------------------------------------------------
$ R_HOME=/usr/local/lib/R gcc -I/usr/local/lib/R/include -c pythagtry.c
$ gcc -shared -o pythagtry.so pythagtry.o
-----------------------------------------------------------
added:

C_FUNCTION(pythag)

to /usr/local/src/R-1.0.1/src/appl/ROUTINES

make
make install

> x <- 1
> y <- 1
> sqrt(x^2 + y^2)
[1] 1.414214
> is.loaded("pythag")
[1] TRUE
> dyn.load("pythagtry.so")
> .Call("pytry", x, y)
[1] 1.414214




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 15 15:29:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 15 May 2000 16:29:30 +0200 (MET DST)
Subject: [Rd] Segmentation Fault of unknown cause (PR#545)
Message-ID: <200005151429.QAA13653@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.0
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm afraid I have another obscure bug. 
R has just crashed with a segmentation fault. 
This time, I have even failed to reproduce it, but fortunately, 
I have a core dump. It's at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/core>

The call I did was 
log10(quantile(chisqtests5M11001, c(0.05, 0.95)))
where chisqtests5M11001 is an array of length 1500 
(it's an array of p-values produced by the chisq.test, but I 
doubt that it is relevant). 

I did lots of strange things prior to the crash, some even 
involving for-loops, but I can't tell what is relevant. Anyway,
a transcript of the session is at 
<URL:http://www.astro.uio.no/~kjetikj/tmp/crash.Rt>

That's all I've got.... 

Kjetil

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 15 17:25:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 15 May 2000 17:25:00 +0100 (BST)
Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
Message-ID: <200005151625.RAA06867@toucan.stats.ox.ac.uk>


> From: Roger.Bivand@nhh.no
> Date: Mon, 15 May 2000 16:26:11 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] pythag missing in src/appl/ROUTINES (PR#544)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Roger Bivand
> Version: 1.0.1
> OS: Linux RH 6.1
> Submission from: (NULL) (158.37.102.52)
> 
> 
> I am trying to use pythag() from src/appl in a .Call() function.
> 
> pythag seems to be missing from the ROUTINES list in appl - putting
> it in solved the problem:

But that is not the purpose of that file.  As it says, it is for
internal .C and .Fortran entry points, and its entries get put in the
search table for such entries.  And pythag is not a suitable entry
point (its arguments are not pointers, it returns a value ...).

The real problem seems to be that nothing internal to R calls pythag,
and so pythag.o does not get loaded when R.bin is built.  Thus I don't
know what it is doing in the R source.  The solution is to make one of
the modules in src/main call it via a dummy routine, or just to link it
with your own code.

If we want it in, we should merge pythag.c with something else in 
src/appl.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Thu May 18 09:57:08 2000
From: christian.hoffmann@wsl.ch (Christian Hoffmann)
Date: Thu, 18 May 2000 10:57:08 +0200
Subject: [Rd] attach (S-style)?
Message-ID: <3.0.5.32.20000518105708.00975a10@mail.wsl.ch>

Hi everyone,

Being new to the crowd of R users I am wondering what the equivalent of  

attach("/home/bla/hoffmann/R/.RData",2) 

 (S style) is in R.

What I want is a split of .RData repositories. One in a central place where I keep functions and interesting stuff important for all work I am doing, an several others which contain stuff of an dividual project only. When I start in a project directory I want to make available the central stuff. If I do it like in S+ I am getting and rightly so:

Error in attach("/home/woodstock/hoffmann/R/.RData", 2) : 
	attach only works for lists and data frames

What is the trick to use in R?  

To successfully read R-exts.texi which I hope contains steps to do it I need a way to make it readable to 
my latex command which refuses to rpoceed past line 1229 with
-----------
(R-exts.texi
LaTeX2e <1996/12/01> patch level 1
Babel <v3.6h> and hyphenation patterns for american, german, loaded.
(texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
! Undefined control sequence.
\resetmathfonts ...nt 2 = \tensy \textfont \itfam 
                                                  = \tenit \textfont \slfam ...
l.1229 \textfonts
--------------

Thanks for your help.
--Christian

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Institute for Forest, Snow and Landscape Research
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax  : ++41-1-737 40 80 or  ++41-1-739 2215  e-mail: Hoffmann@WSL.CH

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu May 18 10:19:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 18 May 2000 10:19:49 +0100 (BST)
Subject: [Rd] attach (S-style)?
Message-ID: <200005180919.KAA00833@toucan.stats.ox.ac.uk>

> Date: Thu, 18 May 2000 10:57:08 +0200
> From: Christian Hoffmann <christian.hoffmann@wsl.ch>
> 

[...]

> To successfully read R-exts.texi which I hope contains steps to do it I need a 
way to make it readable to 
> my latex command which refuses to rpoceed past line 1229 with
> -----------
> (R-exts.texi
> LaTeX2e <1996/12/01> patch level 1
> Babel <v3.6h> and hyphenation patterns for american, german, loaded.
> (texinfo.tex Loading texinfo [version 1999-12-22.11]: Basics, pdf, fonts,
> ! Undefined control sequence.
> \resetmathfonts ...nt 2 = \tensy \textfont \itfam 
>                                                   = \tenit \textfont \slfam 
...
> l.1229 \textfonts

It's texinfo (.texi) not LaTeX, and is processed by tex not latex
via texi2dvi.   Just

make R-exts.dvi

or

make R-exts.pdf

should process it for you.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:42:04 2000
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190842.KAA28916@pubhealth.ku.dk>

I was surprised to find that the variance of a scalar, using
var(), is NA.  Surely this should be zero?

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = Patched
 major = 0
 minor = 99.0
 year = 2000
 month = February
 day = 9
 language = R

Search Path:
 .GlobalEnv, package:HistoryMatch, package:zmatrix, package:stepfun, package:Simulator, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 09:48:53 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 09:48:53 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190848.JAA22344@toucan.stats.ox.ac.uk>

> From: J.C.Rougier@durham.ac.uk
> Date: Fri, 19 May 2000 10:42:04 +0200 (MET DST)
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?
> 

Do you mean a vector of length 1? (S has no scalars.)  No, it should be
NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
no idea at all of the variability from a single sample.

S gives NA too.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 09:57:10 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005190952290.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I was surprised to find that the variance of a scalar, using
> > var(), is NA.  Surely this should be zero?
> > 
> 
> Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> no idea at all of the variability from a single sample.

I thought that might be the reason.  There is no mention of using n-1
rather than n in the denominator on the help page.  Perhaps that might be
added?

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:06:32 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:06:32 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: J.C.Rougier@durham.ac.uk's message of "Fri, 19 May 2000 10:42:04 +0200 (MET DST)"
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <x2k8gqlxif.fsf@blueberry.kubism.ku.dk>

J.C.Rougier@durham.ac.uk writes:

> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

I don't think so. There's a divide by zero involved.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri May 19 10:01:29 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 19 May 2000 11:01:29 +0200
Subject: [Rd] variance of a scalar (PR#546)
References: <200005190842.KAA28916@pubhealth.ku.dk>
Message-ID: <392502E9.134C262B@statistik.uni-dortmund.de>


J.C.Rougier@durham.ac.uk wrote:
> 
> I was surprised to find that the variance of a scalar, using
> var(), is NA.  Surely this should be zero?

1. This is ok. var(.) is defined as:
   var(x)= (1 / (n - 1)) * sum(x - mean(x))^2
                 ^^^^^
If you has got a scalar: n - 1 = 0, so it is undefined!

> 
> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status = Patched
>  major = 0
>  minor = 99.0

You should upgrade to 1.0.1

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri May 19 10:04:09 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 19 May 2000 10:04:09 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <200005190904.KAA22592@toucan.stats.ox.ac.uk>


> Date: Fri, 19 May 2000 09:57:10 +0100 (BST)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Subject: Re: [Rd] variance of a scalar (PR#546)
> 
> On Fri, 19 May 2000, Prof Brian Ripley wrote:
> 
> > > I was surprised to find that the variance of a scalar, using
> > > var(), is NA.  Surely this should be zero?
> > > 
> > 
> > Do you mean a vector of length 1? (S has no scalars.)  No, it should be
> > NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical terms, one has
> > no idea at all of the variability from a single sample.
> 
> I thought that might be the reason.  There is no mention of using n-1
> rather than n in the denominator on the help page.  Perhaps that might be
> added?

Um. What professional statistics package uses n, then?  Are you
suggesting that there is serious room for doubt?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 19 10:11:00 2000
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 19 May 2000 10:11:00 +0100 (BST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <Pine.GSO.4.20.0005191006140.10176-100000@laplace>

On Fri, 19 May 2000, Prof Brian Ripley wrote:

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

Well, I may not be the gold standard for statisticians but I just called
var(x) when x was the population, not a sample.  Unfortunately I did this
without thinking as it corresponds closely to my notes.  So although a
statistics package might use n-1 without question, I think a statistical
computing environment could be a little more flexible, at least in its
documentation.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May 19 10:19:16 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 May 2000 11:19:16 +0200
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: Prof Brian Ripley's message of "Fri, 19 May 2000 10:04:09 +0100 (BST)"
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <x2hfbulwx7.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

SAS does, actually. Option VARDEF can be N or DF in PROC MEANS (and/or
PROC UNIVARIATE). [And pardon the shouting, SAS just looks that way..]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri May 19 10:51:26 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 19 May 2000 19:51:26 +1000
Subject: [Rd] variance of a scalar (PR#546)
Message-ID: <3.0.32.20000519195123.0127d690@pophost.nsw.cmis.csiro.au>

At 10:04 AM 5/19/00 +0100, Prof Brian Ripley wrote:
>
>> On Fri, 19 May 2000, Prof Brian Ripley wrote:
>> 
>> 
>> I thought that might be the reason.  There is no mention of using n-1
>> rather than n in the denominator on the help page.  Perhaps that might be
>> added?
>
>Um. What professional statistics package uses n, then?  Are you
>suggesting that there is serious room for doubt?
>

S-PLUS, actually.  Not in this context, of course, but princomp() when
given a data matrix uses n as the divisor for the variance matrix.  Amazing
stuff.  This in turn is translated into the eigenvalues (principal
variances) of course.  I was really puzzled about this while I was trying
to explain to one of my colleagues what a simple generic calculation
principal components really was and I was getting the same coefficients as
princomp but slightly different variances.  In a flash of inspiration I
tried multiplying them by n/(n-1) and hey presto!

Of course the case for an n-1 divisor is much less convincing in this
context because even though it gives an unbiased (REML, maximum marginal
likelihood, ...) estimator of the variance, the eigenvalues are certainly
not unbiased estimators of the eigenvalues of the population variance
matrix (but it can't hurt, either!).

Bill.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri May 19 14:31:00 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 19 May 2000 15:31:00 +0200 (CEST)
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
References: <200005190848.JAA22344@toucan.stats.ox.ac.uk>
Message-ID: <14629.16916.782701.119727@lynne.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

    >> From: J.C.Rougier@durham.ac.uk Date: Fri, 19 May 2000 10:42:04 +0200
    >> (MET DST)
    >> 
    >> I was surprised to find that the variance of a scalar, using var(),
    >> is NA.  Surely this should be zero?

    BDR> Do you mean a vector of length 1? (S has no scalars.)  No, it
    BDR> should be NA, as sum((x-xbar)^2)/(n-1) is NaN, or, in statistical
    BDR> terms, one has no idea at all of the variability from a single
    BDR> sample.

    BDR> S gives NA too.

Now I'm becoming really picky ....

There *is* a bug[let] but not the way you thought :
As we have seen,  when  length(x) == 1,
var(x) should be semantically equivalent to  
	      (x - x)^2 / (1 - 1) == 0 / 0 = NaN
as Brian says above.

Now the bug is:  R returns NA, and not NaN.
whereas e.g. S-plus 5.1 (and probably all the other
 ``non-R S language implementations'') return NaN, but it's not immediately
visible since only R prints NaN's as "NaN" whereas ``S'' prints NaNs as "NA".

I'm about to fix this bug (in src/main/cov.c) and also mention the
"1/(n-1)" denominator in the documentation, since it seems that (some)one could
think of other denominators.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri May 19 20:11:52 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 19 May 2000 21:11:52 +0200 (MET DST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
Message-ID: <200005191911.VAA02042@pubhealth.ku.dk>

(i.e. my version Solaris, see below...)

Note that system() is not only implemented quite system-dependently
(which you'd very much expect!) but also Unix and Windows have quite
different arguments apart from the first two.

Hence all the following is ``Unix-only'' :


A user stumbled across this when using read.table.url(.) on a platform
where no "wget" is installed: 

The data is read ok, but an ugly message appears *before* the command is
completed :
	  -------------------
	  sh: wget: not found
	  -------------------
which made the user believe that the data wasn't read properly.

The problem is easily tracked to the system(..) call in download.file()
{which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
and found that on our Solaris environment, 
the ignore.stderr argument does not seem to have any effect, i.e.

  > system("bla", ignore.stderr = TRUE)

gives the same as  system("bla"), namely
  
  sh: bla: not found
 
On my Linux environment,  ignore.stderr works as advertized.

Further note that  help(system)  should probably also say something about which
shell may or may not be used (I think we decided that we want it to be `sh'
on Unix).


--please do not edit the information below-- {did anyway ;=)}

Version:
 platform = sparc-sun-solaris2.5.1
 arch = sparc
 os = solaris2.5.1
 system = sparc, solaris2.5.1

 --- either R-devel of today, or also 1.0.1 ---

 year = 2000
 month = May
 day = 18
 language = R

Search Path:
 .GlobalEnv, package:SfS, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 19 22:46:09 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 19 May 2000 22:46:09 +0100 (BST)
Subject: [Rd] system(.., ignore.stderr = TRUE)  problem on Solaris (PR#547)
In-Reply-To: <200005191911.VAA02042@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005192223470.4118-100000@auk.stats>

On Fri, 19 May 2000 maechler@stat.math.ethz.ch wrote:

> (i.e. my version Solaris, see below...)
> 
> Note that system() is not only implemented quite system-dependently
> (which you'd very much expect!) but also Unix and Windows have quite
> different arguments apart from the first two.
> 
> Hence all the following is ``Unix-only'' :
> 
> 
> A user stumbled across this when using read.table.url(.) on a platform
> where no "wget" is installed: 
> 
> The data is read ok, but an ugly message appears *before* the command is
> completed :
> 	  -------------------
> 	  sh: wget: not found
> 	  -------------------
> which made the user believe that the data wasn't read properly.
> 
> The problem is easily tracked to the system(..) call in download.file()
> {which does not (yet) have the "ignore.stderr = TRUE" setting, btw}
> and found that on our Solaris environment, 
> the ignore.stderr argument does not seem to have any effect, i.e.
> 
>   > system("bla", ignore.stderr = TRUE)
> 
> gives the same as  system("bla"), namely
>   
>   sh: bla: not found

Under sh you cannot redirect the output from a command until the command
is running.  That is, you are not redirecting the error messages from sh,
only from the command.  Unless the command runs, ignore.stderr has no
effect.

> On my Linux environment,  ignore.stderr works as advertized.

Depends how you read the advertising.

> Further note that  help(system)  should probably also say something about which
> shell may or may not be used (I think we decided that we want it to be `sh'
> on Unix).

Yes, and you almost certainly got bash *not* sh on your Linux, and that
behaves differently.  I think you will find that a closer sh clone (such as
ash) does show the error message.  That some Linux systems claim to have sh
and do not is a major compatibility problem in writing shell scripts and
Makefiles, as we keep finding.

BTW, Solaris will use ksh not sh for the shell if it needs to be POSIX
compatible. And ksh behaves like bash in this respect.


I believe that to define this portably we are going to have to do something
a lot more complicated than accept what the system() call gives us. Are you
volunteering, Martin?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sat May 20 00:45:53 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Sat, 20 May 2000 01:45:53 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005192345.BAA02795@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.01
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


The character "*" displays too high in comparison to the graph space and other
characters in the plot. Consider:

> a_-0.15
> plot(c(0,100),c(0,1))
> for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> abline(1,0)

This may be a well understood effect of using display characters, but the "o" in
the
original plot call falls in the right place.

Thanks again for R-it's getting me a doctorate,
adrian

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Sat May 20 03:24:29 2000
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 20 May 2000 14:24:29 +1200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: <200005192345.BAA02795@pubhealth.ku.dk>; from acuster@nature.berkeley.edu on Sat, May 20, 2000 at 01:45:53AM +0200
References: <200005192345.BAA02795@pubhealth.ku.dk>
Message-ID: <20000520142429.A20866@stat1.stat.auckland.ac.nz>

On Sat, May 20, 2000 at 01:45:53AM +0200, acuster@nature.berkeley.edu wrote:
> 
> Thanks again for R-it's getting me a doctorate,
> adrian

Jeepers, which function does that?  [ We've got few students here
who be keen to know :-) ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Sun May 21 06:15:04 2000
From: pd@blueberry.kubism.ku.dk (Peter Dalgaard BSA)
Date: Sun, 21 May 2000 07:15:04 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200005210515.HAA02760@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533
* PR# 488 *
Subject: Error in lme?
From: simon.frost@ed.ac.uk
Date: Tue, 14 Mar 2000 14:15:52 +0100 (MET)
--No example to reproduce this.
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific

Directory:  Analyses

none

Directory:  Documentation

* PR# 527 *
Subject: Comments on Win95 R Distribution
From: Art Salwin <salwin@mitretek.org>
Date: Mon, 24 Apr 2000 14:38:42 -0400

Directory:  Graphics

* PR# 414 *
Subject:  graphics bugs: steep slopes and large values beyond ylim 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 7 Feb 2000 18:28:04 -0500
--Followup on R-devel showed this was due to generating integer coordinates 
--outside +/- 2^15 in the X11 driver.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 485 *
Subject: Install R1.0.0
From: Lynn Zhang <lyzhang@umich.edu>
Date: Mon, 13 Mar 2000 16:10:52 -0500 (EST)
* PR# 478 *
Subject: Conditional for XDR code left out in saveload.c
From: hoffmann@ehmgs2.et.tu-dresden.de
Date: Thu, 9 Mar 2000 09:43:01 +0100 (MET)
--This seems to be a harmless warning, not an error.
* PR# 467 *
Subject: Re: [R] Re: R-1.0.0 is released
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 Mar 2000 20:26:40 +0100
--followup to PR#466
* PR# 466 *
Subject: Re: R-1.0.0 is released
From: bhoel@server.python.net (Berthold=?iso-8859-1?q?_H=F6llmann?=)
Date: 01 Mar 2000 16:00:54 +0100

Directory:  Language

* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

none

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 490 *
Subject: R-1.0.0 on alpha/osf1 memory glitch
From: Ray Brownrigg <Ray.Brownrigg@mcs.vuw.ac.nz>
Date: Fri, 17 Mar 2000 11:25:30 +1300 (NZDT)
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear

Directory:  TooMuchAtOnce

* PR# 532 *
Subject: Bug report -- 1.0.1, HP-UX
From: Russ Lenth <russell-lenth@uiowa.edu>
Date: Wed, 03 May 2000 12:15:26 -0500
--1) is a user error.
--2) command-line history has no information
--3) help.start looks like a permissions problem. 

Directory:  Windows

none

Directory:  incoming

* PR# 548 *
Subject: graphics character misplaced
From: acuster@nature.berkeley.edu
Date: Sat, 20 May 2000 01:45:51 +0200 (MET DST)
* PR# 531 *
Subject: Possible bug in factor
From: Murray Smith <mh.smith@auckland.ac.nz>
Date: Wed, 03 May 2000 11:48:35 +1200
* PR# 526 *
Subject: INSTALL_SCRIPT during installation
From: "Johnny C. Lam" <lamj@stat.cmu.edu>
Date: Wed, 19 Apr 2000 11:27:52 -0400
* PR# 522 *
Subject: na.omit fails for matrices
From: Sergei Zuyev <sergei@stams.strath.ac.uk>
Date: Mon, 17 Apr 2000 11:52:28 +0100
* PR# 538 *
Subject: no $method from as.hclust
From: Denis White <denis@mercury.cor.epa.gov>
Date: Wed, 10 May 2000 15:00:05 -0700 (PDT)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
* PR# 535 *
Subject:  axis() deficiency 
From: William.Venables@cmis.CSIRO.AU (Bill Venables)
Date: Sat, 6 May 2000 10:33:32 +1000 (EST)
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 542 *
Subject: Inconsistent behavior of par() agruments on lines()
From: Art Salwin <salwin@mitretek.org>
Date: Fri, 12 May 2000 10:08:22 -0400
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
* PR# 546 *
Subject:  variance of a scalar 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 19 May 2000 09:42:20 +0100 (BST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 21 08:07:13 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 21 May 2000 09:07:13 +0200 (MET DST)
Subject: [Rd] graphics character misplaced (PR#548)
Message-ID: <200005210707.JAA09508@pubhealth.ku.dk>

Adrian Custer wrote:

> The character "*" displays too high in comparison to the graph space and
> other characters in the plot. Consider:
> 
> > a_-0.15
> > plot(c(0,100),c(0,1))
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > abline(1,0)

Can anyone reproduce this?  On my Solaris system the placing looks spot on
on X11 and postscript, so it looks to me to be a system-specific
font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
7.1beta)), and I am presumming that the X11 device was meant.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun May 21 11:09:38 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 May 2000 12:09:38 +0200
Subject: [Rd] graphics character misplaced (PR#548)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Sun, 21 May 2000 09:07:13 +0200 (MET DST)"
References: <200005210707.JAA09508@pubhealth.ku.dk>
Message-ID: <x2ya549pul.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> Adrian Custer wrote:
> 
> > The character "*" displays too high in comparison to the graph space and
> > other characters in the plot. Consider:
> > 
> > > a_-0.15
> > > plot(c(0,100),c(0,1))
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch=".",col="blue")}
> > > for (i in 1:100){ points(i,(1-exp(a*i)),pch="*",col="red")}
> > > abline(1,0)
> 
> Can anyone reproduce this?  On my Solaris system the placing looks spot on
> on X11 and postscript, so it looks to me to be a system-specific
> font-metric problem.  I noticed it came from a beta OS (gnu-linux (mandrake
> 7.1beta)), and I am presumming that the X11 device was meant.

I don't see it either with current development sources. We used to get
that effect because "*" is a superscript asterisk (not a centered
operator) in the relevant X11 font, but Paul/Ross fixed that at some
point. Does example(points) look right on this system?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From acuster@nature.berkeley.edu  Sun May 21 23:13:41 2000
From: acuster@nature.berkeley.edu (acuster@nature.berkeley.edu)
Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005212213.AAA13185@pubhealth.ku.dk>

Full_Name: Adrian Custer
Version: 1.0.1
OS: gnu-linux (mandrake 7.1beta)
Submission from: (NULL) (128.32.251.234)


This is an update to bug report 548.

The bug had two parts on my system:
1) the gnome-interface puts the "*" mark in the wrong place. It could be
superscript 
or something else. From the Docs the gnome-interface claimed just to re-display
the 
base R but it is obviously doing something more and breaking the display.

1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
was 
off everytime by a pixel today it is fine. 

I have contacted the person in charge of the gnome-Interface port so this should
be 
considered a bug of that unless I can start reproducing the X11() offset.

Thanks,
adrian.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Mon May 22 02:22:04 2000
From: mcneney@cs.sfu.ca (mcneney@cs.sfu.ca)
Date: Mon, 22 May 2000 03:22:04 +0200 (MET DST)
Subject: [Rd] memory problem with DEC C (was: problem with glm (PR#452))
Message-ID: <200005220122.DAA14150@pubhealth.ku.dk>

Just to update: What I originally thought was a glm problem appears to be
a memory problem that occurs only when R is compiled with the DEC C
compiler. Some variables that are still in use get clobbered during
garbage collection. No problems if I compile with gcc though. I've made
some attempts to see if I can identify a specific compiler optimization
that is responsible, but so far no luck.

Brad

On 5 Mar 2000, Peter Dalgaard BSA wrote:

> Brad McNeney <mcneney@cs.sfu.ca> writes:
> 
> > I don't know if the following is relevant, but for some reason I've found 
> > I can avoid this particular problem if I make a small change in lapply in 
> > its main loop.  Around line 50 of apply.c:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         VECTOR(ans)[i] = eval(R_fcall, rho);
> >     }
> > 
> > if I change it to make an assignment to a
> > temporary variable first everything seems to work fine:
> > 
> >     PROTECT(ans = allocVector(VECSXP, n));
> >     for(i = 0; i < n; i++) {
> >         INTEGER(ind)[0] = i + 1;
> >         tem = eval(R_fcall, rho);
> >         VECTOR(ans)[i] = tem;
> >     }
> > 
> > hasn't given me any NULLs yet. 
> 
> Now that is pretty darn odd... Looks quite a bit like a compiler bug.
> Those two pieces of code should be equivalent as far as I can see.
> 
> One thing that you might do: objdump -dS apply.o allows you to see
> what code the compiler generates for the two cases. Also, of course,
> you can try reducing the level of optimization.
> 
> 
> Alternatively, the mere addition of "tem" changes the local memory use
> of that function so that something that got clobbered before doesn't
> get clobbered now.
> 
> The effect doesn't seem to be present on Intels:
> 
> > dfr<-do.call("data.frame",lapply(1:100,function(i)rnorm(100)))
> > any(sapply(lapply(dfr,summary),is.null))
> [1] FALSE
> 
> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 03:39:33 2000
From: berwin@maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Mon, 22 May 2000 04:39:33 +0200 (MET DST)
Subject: [Rd] Inconsistencies (PR#550)
Message-ID: <200005220239.EAA14342@pubhealth.ku.dk>

Dear all,

I was playing around with some C-code that I dynamically linked to R
and noticed the following inconsistency:

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> is.integer(dat)
[1] FALSE
> dat <- matrix(1:9,3,3)
> is.double(dat)
[1] FALSE
> is.integer(dat)
[1] TRUE

How did I find out?  I passed `dat' to a double * in the C-code and
printed out the matrix from C.  But in the .C() call I just passed
down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
course the print out from the C routine was garbage, but since I used
        dat <- matrix(1,3,3)
first, I was confused.  Note that R says that `dat' is.double!  But it
seems to pass dat to C as an integer matrix nevertheless!  Using the
second matrix it became clear to me why I saw garbage being printed
out from the C-routine.  My question is now why does the first
`is.double(dat)' returns `TRUE'?

Cheers,

        Berwin


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Mon May 22 04:30:12 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Mon, 22 May 2000 13:30:12 +1000
Subject: [Rd] variance of a scalar (PR#546)
In-Reply-To: <200005190904.KAA22592@toucan.stats.ox.ac.uk>; from ripley@stats.ox.ac.uk on Fri, May 19, 2000 at 10:04:09AM +0100
References: <200005190904.KAA22592@toucan.stats.ox.ac.uk>
Message-ID: <20000522133012.C18391@ftoomsh.progsoc.uts.edu.au>

> > I thought that might be the reason.  There is no mention of using n-1
> > rather than n in the denominator on the help page.  Perhaps that might be
> > added?
> 
> Um. What professional statistics package uses n, then?  Are you
> suggesting that there is serious room for doubt?

I remember that my Casio calculator (in statistics mode) had some way
of setting the denominator to be n-1 or n so obviously someone at Casio
decided to cover both options. I was always taught to use n-1 but
I've been too lazy to work through the derivations and figure out why
one is better than the other.

I agree that a single sample cannot tell you anything about the variance
which is a good enough reason to convince me to keep using n-1.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 07:22:22 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 22 May 2000 07:22:22 +0100 (BST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <200005220239.EAA14342@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>

On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:

> Dear all,
> 
> I was playing around with some C-code that I dynamically linked to R
> and noticed the following inconsistency:
> 
> > dat <- matrix(1,3,3)
> > is.double(dat)
> [1] TRUE
> > is.integer(dat)
> [1] FALSE
> > dat <- matrix(1:9,3,3)
> > is.double(dat)
> [1] FALSE
> > is.integer(dat)
> [1] TRUE
> 
> How did I find out?  I passed `dat' to a double * in the C-code and
> printed out the matrix from C.  But in the .C() call I just passed
> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
> course the print out from the C routine was garbage, but since I used
>         dat <- matrix(1,3,3)
> first, I was confused.  Note that R says that `dat' is.double!  But it
> seems to pass dat to C as an integer matrix nevertheless!  Using the
> second matrix it became clear to me why I saw garbage being printed
> out from the C-routine.  My question is now why does the first
> `is.double(dat)' returns `TRUE'?

Because it is double!   This refers to the storage mode, not the
mathematical properties of the object's content.

I can find no inconsistency.  1 is double, and 1:9 is integer (just as
in S-PLUS 3.x).  Why should this not be the case?  Currently the
only time in R you are likely to get an integer result is a : or seq
expression, but you are not supposed to rely on this.  (Since I know
you have a copy, this is exactly the problem of the wam example
on page 203 of `S Prograaming'.)

For example, if printit.c is

void printit(double *x, int *n)
{
    int i;
    
    for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
}

> dat <- matrix(1,3,3)
> is.double(dat)
[1] TRUE
> invisible(.C("printit", dat, as.integer(9)))
[0] 1.000000
[1] 1.000000
[2] 1.000000
[3] 1.000000
[4] 1.000000
[5] 1.000000
[6] 1.000000
[7] 1.000000
[8] 1.000000
>  dat <- matrix(1:9,3,3)
> invisible(.C("printit", dat, as.integer(9)))
[0] 0.000000
[1] 0.000000
[2] 0.000000
[3] 0.000000
[4] 0.000000
[5] 0.000000
[6] 0.000000
[7] 0.000000
[8] 0.000000

as I would expect.

I think the moral is that you cannot assume the storage mode of
expressions returned by R (or by S).


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 09:45:35 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 09:45:35 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220845.JAA11255@toucan.stats.ox.ac.uk>


> From: acuster@nature.berkeley.edu
> Date: Mon, 22 May 2000 00:13:41 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> X-Keywords: 
> 
> Full_Name: Adrian Custer
> Version: 1.0.1
> OS: gnu-linux (mandrake 7.1beta)
> Submission from: (NULL) (128.32.251.234)
> 
> 
> This is an update to bug report 548.

Please put PR#548 in the subject line for a follow-up. And *please*
mention critical facts like which graphics device you were using.

> The bug had two parts on my system:
> 1) the gnome-interface puts the "*" mark in the wrong place. It could be
> superscript 
> or something else. From the Docs the gnome-interface claimed just to 
re-display
> the 
> base R but it is obviously doing something more and breaking the display.

Can you tell us please where you read that in the docs, so we can
correct it?  It is a completely separate graphics device, to be called
gtk() from 1.1.0 (and the X11-based x11() will also be available).


> 1) the X11() interface. I can no longer reproduce the bug. Yesterday, the mark
> was 
> off everytime by a pixel today it is fine. 

*one* pixel?  I don't think you can expect one-pixel accuracy, not
least as where the centre of `*' is in the font used on my screen is
unclear to less than about half pixel.  Accuracy to one pixel seems fine
on a screen device, provided it is consistent.  You can expect greatest
accuracy on the hardcopy devices, where it may matter.

> I have contacted the person in charge of the gnome-Interface port so this 
should
> be 
> considered a bug of that unless I can start reproducing the X11() offset.

If you mean Lyndon Drake, he has moved and as far as we know is no
longer working on R. 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@maths.uwa.edu.au  Mon May 22 09:45:51 2000
From: berwin@maths.uwa.edu.au (Berwin Turlach)
Date: Mon, 22 May 2000 16:45:51 +0800 (WST)
Subject: [Rd] Inconsistencies (PR#550)
In-Reply-To: <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
References: <200005220239.EAA14342@pubhealth.ku.dk>
 <Pine.GSO.4.05.10005220714430.14583-100000@auk.stats>
Message-ID: <14632.62399.496963.693726@bossiaea.maths.uwa.edu.au>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

  BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
  >> Dear all,
  >> 
  >> I was playing around with some C-code that I dynamically linked to R
  >> and noticed the following inconsistency:

  BDR> I can find no inconsistency.  [...]
  BDR> For example, if printit.c is

  BDR> void printit(double *x, int *n)
  BDR> {
  BDR>     int i;
    
  BDR>     for(i = 0; i < *n; i++) printf("[%d] %f\n", i, x[i]);
  BDR> }

  >> dat <- matrix(1,3,3)
  >> is.double(dat)
  BDR> [1] TRUE
  >> invisible(.C("printit", dat, as.integer(9)))
  BDR> [0] 1.000000 [...]
Sorry, mea culpa.  My C-code was a bit more complicated and I know
realise that I had screwed up within the C-routine.  By the time the
C-code was fixed, I had an `as.double(dat)' in my call to .C but was
still under the impression that the problems where due to the fact
that R past a matrix that it claimed to be in storage mode double as
an integer matrix to the C-routine....  

  BDR> I think the moral is that you cannot assume the storage mode of
  BDR> expressions returned by R (or by S).
I guess the moral is rather that I should believe that I found a bug
in R when I am fooling around with some code around midnight ;-/  Or
that I should check better for the sources of my alleged bugs.....

Cheers,

        Berwin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 22 10:48:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 22 May 2000 11:48:41 +0200 (MET DST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005220948.LAA19498@pubhealth.ku.dk>

A little more followup.  The gtk() device uses gdk_string_width to
find the character extents. That seems undocumented anywhere in the
gtk+ sources.  It is returning the maximal descent for the font for all
input strings on my system.  Looking at the current gtk+-1.2.7 sources it
appears to call XTextExtents, and that _should_ give the
string descent.

Since gdk fonts are private opaque structures I see no way around this.
Without any documentation I do not even know if it is a gdk bug (although
I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 22 11:22:12 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
Subject: integer functions {was [Rd] Inconsistencies (PR#550)}
Message-ID: <200005221022.MAA20192@pubhealth.ku.dk>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Mon, 22 May 2000 berwin@maths.uwa.edu.au wrote:
    >> Dear all,
    >> 
    >> I was playing around with some C-code that I dynamically linked to R
    >> and noticed the following inconsistency:

    > > dat <- matrix(1,3,3)
    > > is.double(dat)
    > [1] TRUE
    > > is.integer(dat)
    > [1] FALSE
    > > dat <- matrix(1:9,3,3)
    > > is.double(dat)
    > [1] FALSE
    > > is.integer(dat)
    > [1] TRUE

    >> How did I find out?  I passed `dat' to a double * in the C-code and
    >> printed out the matrix from C.  But in the .C() call I just passed
    >> down `dat' and forgot to coerce to double via `as.double(dat)'.  Of
    >> course the print out from the C routine was garbage, but since I used
    >>         dat <- matrix(1,3,3)
    >> first, I was confused.  Note that R says
    >> that `dat' is.double!  But it seems to pass dat to C as an integer
    >> matrix nevertheless!  Using the second matrix it became clear to me
    >> why I saw garbage being printed out from the C-routine.  My question
    >> is now why does the first `is.double(dat)' returns `TRUE'?

    BDR> Because it is double!  This refers to the storage mode, not the
    BDR> mathematical properties of the object's content.

exactly!  
Please (everyone who needs, probably Berwin doesn't) *do*
study  ?storage.mode  and  ?mode with some care

    BDR> I can find no inconsistency.  1 is double, and 1:9 is integer
    BDR> (just as in S-PLUS 3.x).  Why should this not be the case?

    BDR> Currently the only time in R you are likely to get an integer
    BDR> result is a : or seq expression, but you are not supposed to rely
    BDR> on this.

Well, "Values:"  in ?seq  says

 >> Value:
 >>      The result is of `mode' `"integer"' if `from' is (numerically
 >>      equal to an) integer.

on which I do rely..
Also, there are other functions guaranteeing an integer (or NA / NULL)
result, at least

 o length()
 o dim()
 o ncol(), nrow()
---
 o  min() and max()  --- when all args are integers

 o  "+" and "-" if the args are integers
    -- however that might change: Currently, there's no overflow detection!


    BDR>   (Since I know you have a copy, this is exactly the
    BDR> problem of the wam example on page 203 of `S Prograaming'.)

    BDR> For example, if printit.c is

        <...  instructive example...>

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Mon May 22 12:06:50 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Mon, 22 May 2000 13:06:50 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
Message-ID: <200005221106.NAA20961@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Ouch, another obscure bug...
I just had a bus error crash, with a core dump, a small one this time.
Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
I had done a few simulations, and done a chisq.test() on them.
These simulations also write about 190MB's to file, but
I have no idea whether that is relevant, and those data are not
used. The calls I do look like this:
> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
"point")))
> ch1

	 Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 463.8359, df = 300, p-value = 3.726e-09 

> ch1$observed

Process R bus error (core dumped) at Mon May 22 12:38:49 2000


....so it doesn't crash when I print the whole object, but when I 
a vector of the object, it crashes... And, restarting R, it doesn't
happen.

I heard the sysadm who did the installation had some problems,
I don't know what it was about, but if I understood him correctly,
it only happened when he tuned for EV6, so it shouldn't be a problem now, 
I guess....

Kjetil


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 14:14:40 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 14:14:40 +0100 (BST)
Subject: integer functions {was [Rd] Inconsistencies }
Message-ID: <200005221314.OAA13936@toucan.stats.ox.ac.uk>


> Date: Mon, 22 May 2000 12:22:12 +0200 (MET DST)
> From: maechler@stat.math.ethz.ch
> 
> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

[...]

>     BDR> Currently the only time in R you are likely to get an integer
>     BDR> result is a : or seq expression, but you are not supposed to rely
>     BDR> on this.
> 
> Well, "Values:"  in ?seq  says
> 
>  >> Value:
>  >>      The result is of `mode' `"integer"' if `from' is (numerically
>  >>      equal to an) integer.
> 
> on which I do rely..

My point was the reverse, though. You are not supposed to rely on
everything else giving double.  That's what the wam example in S3 did.

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon May 22 15:13:34 2000
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221413.QAA24813@pubhealth.ku.dk>

character arguments with call_R do not work except in the first
position. (In other positions, they just yield a single blank
character.)
 The error is at line 1858 of dotcode.c which should be changed from
STRING(CAR(pcall))[i]=s;
to
STRING(CAR(pcall))[0]=s;
  Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 15:28:53 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 16:28:53 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
Message-ID: <14633.17445.635566.303613@gargle.gargle.HOWL>

Some of you may have seen the  pythag() part in the R API definition in 
"Writing R Extensions" (source = doc/manual/R-exts.texinfo).

or followed the report and Prof. Brian Ripley's answer about pythag()'s
availability from R's binary.

As we say in above manual

  >>      `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
  >>      destructive underflow: for example it still works when both A and
  >>      B are between `1e200' and `1e300' (in IEEE double precision).

--
"Problem" is : 
The GNU C library (and other C libraries ??)
defines a function	 
	 double hypot(double x, double y)

with identical semantics to our pythag() from above
The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
(in the section "Exponentiation and Logarithms"):

=============================
>>  - Function: double hypot (double X, double Y)
>>  - Function: float hypotf (float X, float Y)
>>  - Function: long double hypotl (long double X, long double Y)
>>      These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>      the hypotenuse of a right triangle with sides of length X and Y,
>>      or the distance of the point (X, Y) from the origin.  Using this
>>      function instead of the direct formula is wise, since the error is
>>      much smaller.  See also the function `cabs' in *Note Absolute
>>      Value::.

Further "problem": In R, we are already partially relying on the
availability of the hypot() function :

At the toplevel of R-1.0.1's source
   grep -rwn hypot . 
   ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
gives

./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
./src/appl/fortran.c:111:    return hypot(z->r, z->i);
./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
./src/main/plot.c:2455:double hypot(double x, double y)
./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

---------

My "theses"
   
   o when hypot() is available, it should be used since it will be 
     efficient, precise, etc.
   o when it's not available, our "configure" should find out, and set
     corresponding "HAVE_HYPOT" to `false'.
   o in that case, we should provide a hypot()  {for the above code to
     work!}, and we probably should use (an improvement?) of the current
     pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
   o Hence, we should drop pythag() from the R API and rather say that we
     provide hypot() whenever the system's C library 
     (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
     provide it.

   o I think an R function  hypot() would also make sense.

We'll be glad to hear feedback about this!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 15:48:52 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 15:48:52 +0100 (BST)
Subject: [Rd] character arguments with call_R (PR#552)
Message-ID: <200005221448.PAA14128@toucan.stats.ox.ac.uk>


> From: jlindsey@alpha.luc.ac.be
> Date: Mon, 22 May 2000 16:13:34 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] character arguments with call_R (PR#552)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> character arguments with call_R do not work except in the first
> position. (In other positions, they just yield a single blank
> character.)
>  The error is at line 1858 of dotcode.c which should be changed from
> STRING(CAR(pcall))[i]=s;
> to
> STRING(CAR(pcall))[0]=s;
>   Jim

It's much worse than that, as this happens n times inside a loop.
It looks to me as if the code has fairly thoroughly confused character
strings and character vectors.  I suspect it should be more like

	    for (j = 0 ; j < n ; j++) {
		s = allocSExp(CHARSXP);
		CHAR(s) = ((char**)(arguments[i]))[j];
		LENGTH(s) = strlen(CHAR(s));
		STRING(CAR(pcall))[j] = s;
	    }

or, more consisely

	    for (j = 0 ; j < n ; j++) {
		cptr = (char**)arguments[i]
		STRING(CAR(pcall))[j] = mkChar(cptr[j])
	    }

Do you have a succinct example on which we could test out solutions?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 15:52:59 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
In-Reply-To: <200005220948.LAA19498@pubhealth.ku.dk>
Message-ID: <XFMail.000522165259.plummer@iarc.fr>

On 22-May-00 ripley@stats.ox.ac.uk wrote:
> A little more followup.  The gtk() device uses gdk_string_width to
> find the character extents. That seems undocumented anywhere in the
> gtk+ sources.  It is returning the maximal descent for the font for all
> input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> appears to call XTextExtents, and that _should_ give the
> string descent.
> 
> Since gdk fonts are private opaque structures I see no way around this.
> Without any documentation I do not even know if it is a gdk bug (although
> I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.


The best thing that can be said about the GNOME API documentation is
that it is getting better.  Documentation on glib, gdk and gtk+ is
available from here:

http://developer.gnome.org/doc/API/

but is still quite sparse.  

This is not, in fact, a gdk bug, but is due to a permutation in
the arguments of gdk_string_extents in GTK_MetricInfo 
(file src/gnome/devGTK.c). It currently reads

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iascent, &idescent, &iwidth);

but should be

    gdk_string_extents(gtkd->font, tmp,
                       &lbearing, &rbearing,
                       &iwidth, &iascent, &idescent);

See
http://developer.gnome.org/doc/API/gdk/gdk-fonts.html#GDK-STRING-EXTENTS

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 16:03:18 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 17:03:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14633.19510.222102.346537@gargle.gargle.HOWL>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Some of you may have seen the pythag() part in the R API definition
    MM> in "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    MM> or followed the report and Prof. Brian Ripley's answer about
    MM> pythag()'s availability from R's binary.

    MM> As we say in above manual

     >>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
     >>> destructive underflow: for example it still works when both A and B
     >>> are between `1e200' and `1e300' (in IEEE double precision).

    MM> -- "Problem" is : The GNU C library (and other C libraries ??)
    MM> defines a function double hypot(double x, double y)

    MM> with identical semantics to our pythag() from above The Info
    MM> (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains (in the
    MM> section "Exponentiation and Logarithms"):

    ....

I forgot to mention  that  src/appl/eigen.f  (stemming from EISPACK)
defines (and uses) a fortran DOUBLE PRECISION PYTHAG(A, B) function
equivalently to  src/appl/pythag.c  {currently (R-devel) in .../approx.c},
and hence R's eigen() function actually does rely on pythag().

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon May 22 16:24:21 2000
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221524.RAA25471@pubhealth.ku.dk>

Trying to use text() with very large cex parameter crashes
R when using the X11() device

X11()
plot(1,1,type="n")
text(1,1,"foo", cex=10)

This also crashes R

points(1,1,pch="A", cex=10)

presumably because we are trying to load a font that doesn't
exist, but I haven't looked into it.

Martyn


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status =
 major = 1
 minor = 0.1
 year = 2000
 month = April
 day = 14
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 22 16:40:58 2000
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Mon, 22 May 2000 11:40:58 -0400 (EDT)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005221524.RAA25471@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>


  Works here with 1.0.0 (RH Linux 6.0)!

  R --vanilla with

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = 
 major = 1
 minor = 0.0
 year = 2000
 month = February
 day = 29
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

On Mon, 22 May 2000 plummer@iarc.fr wrote:

> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.
> 
> Martyn
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-unknown-linux
>  arch = i686
>  os = linux
>  system = i686, linux
>  status =
>  major = 1
>  minor = 0.1
>  year = 2000
>  month = April
>  day = 14
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker@zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 22 17:00:28 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 22 May 2000 18:00:28 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
References: <200005221524.RAA25471@pubhealth.ku.dk>
 <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <14633.22940.230520.996840@gargle.gargle.HOWL>

>>>>> "Ben" == Ben Bolker <ben@zoo.ufl.edu> writes:

    Ben>   Works here with 1.0.0 (RH Linux 6.0)!

    Ben>   R --vanilla with

    Ben> Version: platform = i686-unknown-linux arch = i686 os = linux
    Ben> system = i686, linux status = major = 1 minor = 0.0 year = 2000
    Ben> month = February day = 29 language = R

Works also for me, RH 6.2 Linux; both with 1.0.1 and R-devel [of today];
also work for R running on Solaris (2.5.1, X11R6.3) with DISPLAY on Linux.

Martin

    Ben> On Mon, 22 May 2000 plummer@iarc.fr wrote:

    >> Trying to use text() with very large cex parameter crashes R when
    >> using the X11() device
    >> 
    >> X11()
    >> plot(1,1,type="n")
    >> text(1,1,"foo", cex=10)
    >> 
    >> This also crashes R
    >> 
    >> points(1,1,pch="A", cex=10)
    >> 
    >> presumably because we are trying to load a font that doesn't exist,
    >> but I haven't looked into it.
    >> 
    >> Martyn
    >> 
    >> --please do not edit the information below--
    >> 
    >> Version: platform = i686-unknown-linux arch = i686 os = linux system
    >> = i686, linux status = major = 1 minor = 0.1 year = 2000 month =
    >> April day = 14 language = R


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:36:04 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:36:04 +0100 (BST)
Subject: [Rd] RE:bug 548 graphics '*' (PR#549)
Message-ID: <200005221736.SAA14400@toucan.stats.ox.ac.uk>

> Date: Mon, 22 May 2000 16:52:59 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: ripley@stats.ox.ac.uk
> Subject: Re: [Rd] RE:bug 548 graphics '*' (PR#549)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> On 22-May-00 ripley@stats.ox.ac.uk wrote:
> > A little more followup.  The gtk() device uses gdk_string_width to
> > find the character extents. That seems undocumented anywhere in the
> > gtk+ sources.  It is returning the maximal descent for the font for all
> > input strings on my system.  Looking at the current gtk+-1.2.7 sources it
> > appears to call XTextExtents, and that _should_ give the
> > string descent.
> > 
> > Since gdk fonts are private opaque structures I see no way around this.
> > Without any documentation I do not even know if it is a gdk bug (although
> > I suspect it is or was).  The gdk docs in gtk+ seem seriously incomplete.
> 
> 
> The best thing that can be said about the GNOME API documentation is
> that it is getting better.  Documentation on glib, gdk and gtk+ is
> available from here:
> 
> http://developer.gnome.org/doc/API/
> 
> but is still quite sparse.  
> 
> This is not, in fact, a gdk bug, but is due to a permutation in
> the arguments of gdk_string_extents in GTK_MetricInfo 
> (file src/gnome/devGTK.c). It currently reads
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iascent, &idescent, &iwidth);
> 
> but should be
> 
>     gdk_string_extents(gtkd->font, tmp,
>                        &lbearing, &rbearing,
>                        &iwidth, &iascent, &idescent);
> 

Great, thanks, that solves it.  Now I was looking for a man page
for gdk_string_extents to find out what the arguments were supposed to mean,
but never found one.

Bug fixed for 1.1.0.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon May 22 18:46:49 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 22 May 2000 18:46:49 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005221746.SAA14454@toucan.stats.ox.ac.uk>


> From: plummer@iarc.fr
> Date: Mon, 22 May 2000 17:24:21 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Trying to use text() with very large cex parameter crashes
> R when using the X11() device
> 
> X11()
> plot(1,1,type="n")
> text(1,1,"foo", cex=10)
> 
> This also crashes R
> 
> points(1,1,pch="A", cex=10)
> 
> presumably because we are trying to load a font that doesn't
> exist, but I haven't looked into it.

As a matter of interest, does it crash R-devel?  I added some X11 error
handlers a couple of weeks ago, so X11 errors should no longer crash R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 02:26:05 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 11:26:05 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>

I realise that there is an existing system for documenting datasets
but what I would like is to be able to whack a few lines of commentary
at the top of a file which contains data -- not full documentation but
just an outline for myself to remind me of what I was doing or what
settings I was using, etc.

I was thinking that the read.table() function might be extended to
support an option allowing it to throw away lines that begin with
the # character (same comment character as R source, shell script, perl, etc)
thus allowing data files with comments added to them. For example:

------------------------------------->8---
# Testing the force of my linear motor
# v = supply voltage (reading from built-in meter on bench supply)
# x = distance of movement (NA indicates that bar was dropped)
# m = mass of bar
"v" "x" "m"
 1   2   3
 4   5   6
 7   8   9
# I might have bumped the table for this one
10  NA  12

etc...
------------------------------------->8---

Then you can load it up with:

mytable <- read.table( "data", header=TRUE, comment=TRUE )

and then proceed as normal.

I'm sure it would be a very small change, if other people think
it might be useful then I'll try and make a patch to support it.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 07:05:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 07:05:37 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au>
Message-ID: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>

On Tue, 23 May 2000, Telford Tendys wrote:

> I realise that there is an existing system for documenting datasets
> but what I would like is to be able to whack a few lines of commentary
> at the top of a file which contains data -- not full documentation but
> just an outline for myself to remind me of what I was doing or what
> settings I was using, etc.
> 
> I was thinking that the read.table() function might be extended to
> support an option allowing it to throw away lines that begin with
> the # character (same comment character as R source, shell script, perl, etc)
> thus allowing data files with comments added to them. For example:
> 
> ------------------------------------->8---
> # Testing the force of my linear motor
> # v = supply voltage (reading from built-in meter on bench supply)
> # x = distance of movement (NA indicates that bar was dropped)
> # m = mass of bar
> "v" "x" "m"
>  1   2   3
>  4   5   6
>  7   8   9
> # I might have bumped the table for this one
> 10  NA  12
> 
> etc...
> ------------------------------------->8---
> 
> Then you can load it up with:
> 
> mytable <- read.table( "data", header=TRUE, comment=TRUE )
> 
> and then proceed as normal.
> 
> I'm sure it would be a very small change, if other people think
> it might be useful then I'll try and make a patch to support it.

I am sure it is not `a very small change', I'm afraid.  Basically, input is
not done in a line-oriented way. read.table uses scan and count.fields.  
Both are internal functions that work at a char-by-char level.  You will
need to add logic to skip lines, and for your rule that means adding logic
to know that # is first in a line.

My suggestion would be to allow # anywhere on the line to skip the
rest of the line, and to make sure that # inside quotes did nothing.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue May 23 08:47:06 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 23 May 2000 17:47:06 +1000
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>; from ripley@stats.ox.ac.uk on Tue, May 23, 2000 at 07:05:37AM +0100
References: <20000523112605.A29672@ftoomsh.progsoc.uts.edu.au> <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <20000523174706.A14617@ftoomsh.progsoc.uts.edu.au>

> I am sure it is not `a very small change', I'm afraid.  Basically, input is
> not done in a line-oriented way. read.table uses scan and count.fields.  
> Both are internal functions that work at a char-by-char level.  You will
> need to add logic to skip lines, and for your rule that means adding logic
> to know that # is first in a line.

I just wanted to see if was a good idea in principle but thanks for
pointing out that read.table is not line oriented, I have not even started
to work through what would actually be required.

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Well it should be whatever is consistent with R source code unless there
is a good reason to make it otherwise, that minimises the learning required
for new users. Doing a quick test I see that allowing a comment to start
anywhere on the line is correct:

> x <- "# comment" # put the value "# comment" into x
> x
[1] "# comment"
> 

So I'm perfectly happy with that.

If the comment option defaulted to FALSE then it would be safe against
breaking existing code (I suppose everyone knew that already).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jens.oehlschlaegel-akiyoshi@mdfactory.de  Tue May 23 09:40:25 2000
From: jens.oehlschlaegel-akiyoshi@mdfactory.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel-Akiyoshi?=)
Date: Tue, 23 May 2000 10:40:25 +0200
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
In-Reply-To: <Pine.GSO.4.05.10005230656200.21900-100000@auk.stats>
Message-ID: <000901bfc492$8b53d6a0$a9021aac@joelschlaegel>


Prof Brian D Ripley wrote:

> I am sure it is not `a very small change', I'm afraid.
> Basically, input is
> not done in a line-oriented way. read.table uses scan and
> count.fields.
> Both are internal functions that work at a char-by-char
> level.  You will
> need to add logic to skip lines, and for your rule that means
> adding logic
> to know that # is first in a line.

I agree that the basic problem is that R hasn't a linewise data import
utility. I guess, the reason for this is that anything working linewise has
to be written entirely in C for performance reasons, which means loosing the
flexibility of the R language.

However, there might be a way to solve this: processing batches of lines
instead of single lines. If we import m of n (m << n) lines at a time as a
string vector, we could use R vector functions to preprocess these strings
and then scan those. Thus scan() needed an extension to allow taking it's
input from string vectors. Or, perhaps better, we need seperate access to
the two functionalities of scan, (1) physical reading and (2) parsing.

Then read.table could be rewritten to work on batches of lines, with a
parameter nbatch=1000, and an optional parameter preprocess.func=NULL
which - if used - would return a preprocessed vector of strings, e.g.

  ThroughAwayCommentLines <- function(s)s[-grep("^#", s)]

to realize Telfors Tendys suggestion, or

  RemoveTrailingComments <- function(s){
    s <- gsub("#.*", "", s)
    s[nchar(s) > 0]
  }

for Prof. Ripley's suggestion

> My suggestion would be to allow # anywhere on the line to skip the
> rest of the line, and to make sure that # inside quotes did nothing.

Final comment: any solution having # skip the rest of the line MUST be
optional, otherwise R looses it's ability to
import general ASCII-data. You never know whether some people use special
characters in their strings.

Any comments welcome


Jens

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 10:12:11 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <Pine.LNX.4.10.10005221140200.15335-100000@bolker.zoo.ufl.edu>
Message-ID: <XFMail.000523111211.plummer@iarc.fr>

Well, I wasn't wrong. Here's R with DEBUG_X11 switched on

> plot(1,1,type="n")
loading:
-*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
success
> points(1,1,pch="A", cex=10)
loading:
-*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
failure
loading:
-*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
failure

Program received signal SIGSEGV, Segmentation fault.
0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
940             XSetFont(display, xd->wgc, xd->font->fid);
(gdb) p xd->font
$1 = (XFontStruct *) 0x0

RLoadFont ignores the fact that it has failed to load a font
and returns a null pointer. 

If this works for you it is perhaps because you have the size 34 font
(the last resort) on your system.

R-devel gives the same result.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 11:56:43 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 11:56:43 +0100 (BST)
Subject: [Rd] Suggestion for comments in data files (i.e. read.table)
Message-ID: <200005231056.LAA15932@toucan.stats.ox.ac.uk>


> From: "Jens Oehlschlgel-Akiyoshi" <jens.oehlschlaegel-akiyoshi@mdfactory.de>
> Date: Tue, 23 May 2000 10:40:25 +0200

[...]

> for Prof. Ripley's suggestion
> 
> > My suggestion would be to allow # anywhere on the line to skip the
> > rest of the line, and to make sure that # inside quotes did nothing.
> 
> Final comment: any solution having # skip the rest of the line MUST be
> optional, otherwise R looses it's ability to
> import general ASCII-data. You never know whether some people use special
> characters in their strings.

Yes, Telford Tendys had comment=FALSE as the default for that argument.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Tue May 23 12:21:15 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Tue, 23 May 2000 12:21:15 +0100 (BST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
Message-ID: <200005231121.MAA15967@toucan.stats.ox.ac.uk>


> X-Priority: 3 (Normal)
> Date: Tue, 23 May 2000 11:12:11 +0200 (CEST)
> From: Martyn Plummer <plummer@iarc.fr>
> To: Ben Bolker <ben@zoo.ufl.edu>, Uwe Ligges 
<ligges@statistik.uni-dortmund.de>, Martin Maechler 
<maechler@stat.math.ethz.ch>, Prof Brian Ripley <ripley@stats.ox.ac.uk>
> Subject: Re: [Rd] text() with large cex parameter crashes X11() (PR#553)
> Cc: R-bugs@biostat.ku.dk, r-devel@stat.math.ethz.ch
> 
> Well, I wasn't wrong. Here's R with DEBUG_X11 switched on
> 
> > plot(1,1,type="n")
> loading:
> -*-helvetica-medium-r-*-*-12-*-*-*-*-*-*-*
> success
> > points(1,1,pch="A", cex=10)
> loading:
> -*-helvetica-medium-r-*-*-120-*-*-*-*-*-*-*
> failure
> loading:
> -*-helvetica-medium-r-*-*-34-*-*-*-*-*-*-*
> failure
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x8126336 in SetFont (face=1, size=120, dd=0x8251168) at devX11.c:940
> 940             XSetFont(display, xd->wgc, xd->font->fid);
> (gdb) p xd->font
> $1 = (XFontStruct *) 0x0
> 
> RLoadFont ignores the fact that it has failed to load a font
> and returns a null pointer. 

I think it is SetFont that ignores the null pointer.

> If this works for you it is perhaps because you have the size 34 font
> (the last resort) on your system.

I at least have Helvetica in type 1 and so do have 120pt Helevetica
(and have used such a system all the time I have been using X11).

> R-devel gives the same result.

What should we do in this circumstance?  Drop back to fixed?  Try a
smaller size?   What sizes do you have?   A quick look around on an R6.0
system suggests that it has 8,10,12,14,18,24, which is what Solaris
has as bitmaps too.  And at this point basefontsize must have succeeded.
So should we:

try 34 then 24 then basefontsize.

Should we issue a warning if the displayed fontsize differs by more than
10%, say, from that requested?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Tue May 23 14:30:21 2000
From: plummer@iarc.fr (Martyn Plummer)
Date: Tue, 23 May 2000 15:30:21 +0200 (CEST)
Subject: [Rd] text() with large cex parameter crashes X11() (PR#553)
In-Reply-To: <200005231121.MAA15967@toucan.stats.ox.ac.uk>
Message-ID: <XFMail.000523153021.plummer@iarc.fr>

On 23-May-00 Prof Brian Ripley wrote:
>> RLoadFont ignores the fact that it has failed to load a font
>> and returns a null pointer. 
> 
> I think it is SetFont that ignores the null pointer.

Yes.

>> If this works for you it is perhaps because you have the size 34 font
>> (the last resort) on your system.
> 
> I at least have Helvetica in type 1 and so do have 120pt Helevetica
> (and have used such a system all the time I have been using X11).
> 
>> R-devel gives the same result.

Apparently I had an error in the configuration file for the font server
(due to the fact that RPM kept the old configuration file when I upgraded)
As a result, all my 75dpi fonts were considered non-scaleable by the
font server. I have now fixed this and everything works.
 
> What should we do in this circumstance?  Drop back to fixed?  Try a
> smaller size?   What sizes do you have?   A quick look around on an R6.0
> system suggests that it has 8,10,12,14,18,24, which is what Solaris
> has as bitmaps too.  And at this point basefontsize must have succeeded.
> So should we:
> 
> try 34 then 24 then basefontsize.
> 
> Should we issue a warning if the displayed fontsize differs by more than
> 10%, say, from that requested?

This seems like a good plan.  If failure to load a large font is indicative
of a problem with the X setup then it would be a good idea to issue a warning.

Sorry to trouble everyone over what is basically a problem with my setup.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetikj@astro.uio.no  Tue May 23 19:33:30 2000
From: kjetikj@astro.uio.no (kjetikj@astro.uio.no)
Date: Tue, 23 May 2000 20:33:30 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
Message-ID: <200005231833.UAA06834@pubhealth.ku.dk>

Full_Name: Kjetil Kjernsmo
Version: 1.0.1
OS: osf1
Submission from: (NULL) (129.240.28.227)


Hello!

I'm getting strange numbers from a random number generation 
function again. I was wondering if it could be the same problem 
as I reported in (PR#439). 

I'm using the functions (some comments deleted for brevity):

qamp <- function(p,  type=c("point", "nolens"))
{
  if(type == "point")  
    return(1 / (2 * sqrt(1 - p)))
  else return(1)
}
  
ramp <- function(n, type=c("point", "nolens"))
{
  if(type == "point")
    return(qamp(runif(n), type))
  else return(rep(1, n))
}

...to generate random numbers. I think there might be something wrong
with runif, possibly the same problem as rpois had. 

More details:
I'm calling this function a number of times through a function
intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
                               exptime, ...)
{
  amps <- ramp(ncloudsbin, amptype)
  write(c(max(amps), sum(amps), sum(amps - 1)),
        "lastamps.dat", ncolumns=3, append=T)
  return(cloudintensity * exptime * amps)
}
...that is called a lot. As you can see, I'm writing the maximum 
(among other things) of the generated numbers to file 
(this is a preliminary hack, for a (quite unrelated) sanity 
check I'm running). 
Now, it turns out that in 8080 maxima, the number 14654.29 appears
twice. Things like that happen, this _is_ statistics,
and my pdf doesn't fall that fast, but you know...
I thought I'd report this sooner the better... 
I made a histogram of the logarithm of the maxima for the 8080 points
and put it at <URL:http://www.astro.uio.no/~kjetikj/tmp/ampsmax.ps>

BTW, update on my other reports: 

The problem I had with match.arg() (PR#536) was in the same piece of code,
and unfortunately, it seems to happen with 1.0.1 as well.

About my crashes, PR#545 and PR#551, I had another crash today, and I 
have a 250MB (Warning! :-)) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core2>
I was doing a summary of a rather strange data.frame, I was just curious 
as to what summary would say to such a thing. I don't know if it would 
be of any use. Uwe suggested that it might be a hardware problem, and I 
have contacted my sysadm, and a check will hopefully be performed on Friday.
If it would be useful to see my actions prior to the crash, please let me 
know.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 23 20:03:30 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 23 May 2000 20:03:30 +0100 (BST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <200005231833.UAA06834@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>

On Tue, 23 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Hello!
> 
> I'm getting strange numbers from a random number generation 
> function again. I was wondering if it could be the same problem 
> as I reported in (PR#439). 
> 
> I'm using the functions (some comments deleted for brevity):
> 
> qamp <- function(p,  type=c("point", "nolens"))
> {
>   if(type == "point")  
>     return(1 / (2 * sqrt(1 - p)))
>   else return(1)
> }
>   
> ramp <- function(n, type=c("point", "nolens"))
> {
>   if(type == "point")
>     return(qamp(runif(n), type))
>   else return(rep(1, n))
> }
> 
> ...to generate random numbers. I think there might be something wrong
> with runif, possibly the same problem as rpois had. 

Not at all, that problem is fixed.

> More details:
> I'm calling this function a number of times through a function
> intensityfromcloud <- function(ncloudsbin, cloudintensity, amptype,
>                                exptime, ...)
> {
>   amps <- ramp(ncloudsbin, amptype)
>   write(c(max(amps), sum(amps), sum(amps - 1)),
>         "lastamps.dat", ncolumns=3, append=T)
>   return(cloudintensity * exptime * amps)
> }
> ...that is called a lot. As you can see, I'm writing the maximum 
> (among other things) of the generated numbers to file 
> (this is a preliminary hack, for a (quite unrelated) sanity 
> check I'm running). 
> Now, it turns out that in 8080 maxima, the number 14654.29 appears
> twice. Things like that happen, this _is_ statistics,
> and my pdf doesn't fall that fast, but you know...
> I thought I'd report this sooner the better... 

And which random number generator are you using?  And have you a proven
stable procedure based on its results?  (Doesn't look like it, I have to
say.)

Please do read the advice in the FAQ on reporting a bug. There is 
npthing here that I can see is a bug, or see how to investigate.
All PRNGs have deficiencies, and you have to program procedures to take
account of them.  R provides several alternatives for you to try out.
Do make use of them!

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Tue May 23 20:17:56 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Tue, 23 May 2000 21:17:56 +0200 (MET DST)
Subject: [Rd] Random number generation problem (PR#554)
In-Reply-To: <Pine.GSO.4.05.10005231955300.4225-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0005232114360.553-100000@alnair.uio.no>

On Tue, 23 May 2000, Prof Brian D Ripley wrote:

>> ...to generate random numbers. I think there might be something wrong
>> with runif, possibly the same problem as rpois had. 
>
>Not at all, that problem is fixed.

OK, it was just something that didn't seem to unreasonable, since it was
roughly the same thing that was happening.

>And which random number generator are you using?  And have you a proven
>stable procedure based on its results?  (Doesn't look like it, I have to
>say.)

I must admit that I have not been experimenting with them... It seemed a
bit scary.... :-)

>Please do read the advice in the FAQ on reporting a bug. There is 
>npthing here that I can see is a bug, or see how to investigate.
>All PRNGs have deficiencies, and you have to program procedures to take
>account of them.  R provides several alternatives for you to try out.
>Do make use of them!

I will! Sorry for the disturbance!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May 24 08:16:18 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 24 May 2000 09:16:18 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14633.17445.635566.303613@gargle.gargle.HOWL>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
Message-ID: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>

>>>>> Martin Maechler writes:

> Some of you may have seen the  pythag() part in the R API definition in 
> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

> or followed the report and Prof. Brian Ripley's answer about pythag()'s
> availability from R's binary.

> As we say in above manual

>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
>>> destructive underflow: for example it still works when both A and
>>> B are between `1e200' and `1e300' (in IEEE double precision).

> --
> "Problem" is : 
> The GNU C library (and other C libraries ??)
> defines a function	 
> 	 double hypot(double x, double y)

> with identical semantics to our pythag() from above
> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
> (in the section "Exponentiation and Logarithms"):

> =============================
>>> - Function: double hypot (double X, double Y)
>>> - Function: float hypotf (float X, float Y)
>>> - Function: long double hypotl (long double X, long double Y)
>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
>>> the hypotenuse of a right triangle with sides of length X and Y,
>>> or the distance of the point (X, Y) from the origin.  Using this
>>> function instead of the direct formula is wise, since the error is
>>> much smaller.  See also the function `cabs' in *Note Absolute
>>> Value::.

> Further "problem": In R, we are already partially relying on the
> availability of the hypot() function :

> At the toplevel of R-1.0.1's source
>    grep -rwn hypot . 
>    ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
> gives

> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
> ./src/main/plot.c:2455:double hypot(double x, double y)
> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

> ---------

> My "theses"
   
>    o when hypot() is available, it should be used since it will be 
>      efficient, precise, etc.
>    o when it's not available, our "configure" should find out, and set
>      corresponding "HAVE_HYPOT" to `false'.
>    o in that case, we should provide a hypot()  {for the above code to
>      work!}, and we probably should use (an improvement?) of the current
>      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
>    o Hence, we should drop pythag() from the R API and rather say that we
>      provide hypot() whenever the system's C library 
>      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
>      provide it.

>    o I think an R function  hypot() would also make sense.

> We'll be glad to hear feedback about this!

I have no strong opinions about this, but the above seems to make
sense.

If I should make changes to configure, then pls let me know.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 09:57:47 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 09:57:47 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>

> >>>>> Martin Maechler writes:
> 
> > My "theses"
>    
> >    o when hypot() is available, it should be used since it will be 
> >      efficient, precise, etc.
> >    o when it's not available, our "configure" should find out, and set
> >      corresponding "HAVE_HYPOT" to `false'.

Are there any such systems?  After all 1.0.1 requires hypot, and we
have heard no complaints.  I suspect the cause of the confusion is
(plot.c)

#ifdef Macintosh
# define hypot pythag
#endif

so assume that the Mac port did not have hypot. However, a different
version appears in the 1.0.1 sources, and it appears _after_ hypot is first
used, so I am puzzled as to how the current version got there, or why it
would work. (If a system does not have hypot, presumably its headers do not
either!)

> >    o in that case, we should provide a hypot()  {for the above code to
> >      work!}, and we probably should use (an improvement?) of the current
> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
> >    o Hence, we should drop pythag() from the R API and rather say that we
> >      provide hypot() whenever the system's C library 
> >      (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
> >      provide it.

I was puzzled as to why you put it in the API at all.

> >    o I think an R function  hypot() would also make sense.

Don't think so.  What you we is an n-term not 2-term version, and that's
what vecnorm would do (if we had it).

This does all seem to me to be trying to solve a non-existent problem.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:30:24 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:30:24 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
References: <14633.17445.635566.303613@gargle.gargle.HOWL>
 <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
Message-ID: <14635.52064.496585.983516@gargle.gargle.HOWL>

>>>>> "KH" == Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>>>>> Martin Maechler writes:
    >> Some of you may have seen the  pythag() part in the R API definition in 
    >> "Writing R Extensions" (source = doc/manual/R-exts.texinfo).

    >> or followed the report and Prof. Brian Ripley's answer about pythag()'s
    >> availability from R's binary.

    >> As we say in above manual

    >>>> `pythag(A, B)' computes `sqrt(A^2 + B^2)' without overflow or
    >>>> destructive underflow: for example it still works when both A and
    >>>> B are between `1e200' and `1e300' (in IEEE double precision).

    >> --
    >> "Problem" is : 
    >> The GNU C library (and other C libraries ??)
    >> defines a function	 
    >> double hypot(double x, double y)

    >> with identical semantics to our pythag() from above
    >> The Info (e.g. in Linux Emacs C-h i "m libc") about "Libc" contains
    >> (in the section "Exponentiation and Logarithms"):

    >> =============================
    >>>> - Function: double hypot (double X, double Y)
    >>>> - Function: float hypotf (float X, float Y)
    >>>> - Function: long double hypotl (long double X, long double Y)
    >>>> These functions return `sqrt (X*X + Y*Y)'.  This is the length of
    >>>> the hypotenuse of a right triangle with sides of length X and Y,
    >>>> or the distance of the point (X, Y) from the origin.  Using this
    >>>> function instead of the direct formula is wise, since the error is
    >>>> much smaller.  See also the function `cabs' in *Note Absolute
    >>>> Value::.

    >> Further "problem": In R, we are already partially relying on the
    >> availability of the hypot() function :

    >> At the toplevel of R-1.0.1's source
    >> grep -rwn hypot . 
    >> ~~~~~~~~~~~~~~~~~ (with a newer GNU grep that has "-r" for "recursive"):
    >> gives

    >> ./src/appl/cpoly.c:145:	shr[i] = hypot(pr[i], pi[i]);
    >> ./src/appl/fortran.c:111:    return hypot(z->r, z->i);
    >> ./src/main/complex.c:122:    logr = log(hypot(a->r, a->i) );
    >> ./src/main/complex.c:279:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:285:  REAL(y)[i] = hypot(COMPLEX(x)[i].r, COMPLEX(x)[i].i);
    >> ./src/main/complex.c:388:    r->r = log(hypot( z->r, z->i ));
    >> ./src/main/complex.c:411:    if( (mag = hypot(z->r, z->i)) == 0.0)
    >> ./src/main/plot.c:1201:		if ((f = d/hypot(xx-xold, yy-yold)) < 0.5) {
    >> ./src/main/plot.c:2455:double hypot(double x, double y)
    >> ./src/main/plot.c:2559:		d = hypot(xp-xi, yp-yi);
    >> ./src/gnuwin32/math/protos.h:43:extern double hypot ( double x, double y );

    >> ---------

    >> My "theses"
   
    >> o when hypot() is available, it should be used since it will be 
    >> efficient, precise, etc.
    >> o when it's not available, our "configure" should find out, and set
    >> corresponding "HAVE_HYPOT" to `false'.
    >> o in that case, we should provide a hypot()  {for the above code to
    >> work!}, and we probably should use (an improvement?) of the current
    >> pythag() function [src/appl/pythag.c in R versions <= 1.0.1].
   
    >> o Hence, we should drop pythag() from the R API and rather say that we
    >> provide hypot() whenever the system's C library 
    >> (or its "math.h", aka libm.*, aka "-m" part, respectively) does *not* 
    >> provide it.

    >> o I think an R function  hypot() would also make sense.

    >> We'll be glad to hear feedback about this!

    KH> I have no strong opinions about this, but the above seems to make
    KH> sense.

    KH> If I should make changes to configure, then pls let me know.

Yes, please. 
We should check for it's presence with configure and
then use

#ifndef HAVE_HYPOT
double hypot(double x, double y) {

  ...
  ...

}
#endif


In the mean time I've seen that it exists in 
   - GNU lib"c" (libm infact)
   - Solaris
   - HP-UX
   - DEC Alpha Unix

and it is part of the X/Open "XPG4" standard,
but not POSIX (as of Don Lewine) nor ANSI C.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed May 24 13:55:54 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 May 2000 14:55:54 +0200 (CEST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
References: <14635.33218.325606.890109@aragorn.ci.tuwien.ac.at>
 <Pine.GSO.4.05.10005240940410.4891-100000@auk.stats>
Message-ID: <14635.53594.717309.718373@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> >>>>> Martin Maechler writes:
    >> 
    >> > My "theses"
    >> 
    >> >    o when hypot() is available, it should be used since it will be 
    >> >      efficient, precise, etc.
    >> >    o when it's not available, our "configure" should find out, and set
    >> >      corresponding "HAVE_HYPOT" to `false'.

    BDR> Are there any such systems?  After all 1.0.1 requires hypot, and we
    BDR> have heard no complaints.  I suspect the cause of the confusion is
    BDR> (plot.c)

    BDR> #ifdef Macintosh
    BDR> # define hypot pythag
    BDR> #endif

    BDR> so assume that the Mac port did not have hypot. However, a
    BDR> different version appears in the 1.0.1 sources, and it appears
    BDR> _after_ hypot is first used, so I am puzzled as to how the current
    BDR> version got there, or why it would work. (If a system does not
    BDR> have hypot, presumably its headers do not either!)

    >> >    o in that case, we should provide a hypot()  {for the above code to
    >> >      work!}, and we probably should use (an improvement?) of the current
    >> >      pythag() function [src/appl/pythag.c in R versions <= 1.0.1].

    >> >    o Hence, we should drop pythag() from the R API and rather say
    >> >    that we provide hypot() whenever the system's C library (or its
    >> >    "math.h", aka libm.*, aka "-m" part, respectively) does *not*
    >> >    provide it.

    BDR> I was puzzled as to why you put it in the API at all.

{my ignorance about the widely available hypot() !}

    >> >    o I think an R function  hypot() would also make sense.

    BDR> Don't think so.  What you we is an n-term not 2-term version, and that's
    BDR> what vecnorm would do (if we had it).
agreed, good point!
  [does S-plus'  vecnorm()  avoid underflow and overflow reliably?]

    BDR> This does all seem to me to be trying to solve a non-existent problem.

Not according to our own (R core) standards,
which I thought to be roughly like 

 GOLD>> We require ANSI C 
 GOLD>> and everything else must be tested for by configure
 GOLD>>   (and worked around either be saying (warning) "is not available",
 GOLD>>    or by providing own code).
  
I think hypot() definitely falls in that class, 
particularly since it's not even POSIX [as of Lewine(1991)]

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 24 14:07:12 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 24 May 2000 14:07:12 +0100 (BST)
Subject: [Rd] hypot(x,y) instead of pythag(a,b) ?!
In-Reply-To: <14635.53594.717309.718373@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10005241404200.8042-100000@auk.stats>

On Wed, 24 May 2000, Martin Maechler wrote:

> >>>>> "BDR" == Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
> 
>     BDR> This does all seem to me to be trying to solve a non-existent problem.
> 
> Not according to our own (R core) standards,
> which I thought to be roughly like 
> 
>  GOLD>> We require ANSI C 
>  GOLD>> and everything else must be tested for by configure
>  GOLD>>   (and worked around either be saying (warning) "is not available",
>  GOLD>>    or by providing own code).
>   
> I think hypot() definitely falls in that class, 
> particularly since it's not even POSIX [as of Lewine(1991)]

Still, it is a problem that has not (AFAIK) been reported by anyone, and
there is quite a list of outstanding bugs at R-bugs ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mcneney@cs.sfu.ca  Wed May 24 23:21:29 2000
From: mcneney@cs.sfu.ca (Brad McNeney)
Date: Wed, 24 May 2000 15:21:29 -0700 (PDT)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <200005221106.NAA20961@pubhealth.ku.dk>
Message-ID: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>

On Mon, 22 May 2000 kjetikj@astro.uio.no wrote:

> Full_Name: Kjetil Kjernsmo
> Version: 1.0.1
> OS: osf1
> Submission from: (NULL) (129.240.28.227)
> 
> 
> Ouch, another obscure bug...
> I just had a bus error crash, with a core dump, a small one this time.
> Usual <URL:http://www.astro.uio.no/~kjetikj/tmp/core>.
> I had done a few simulations, and done a chisq.test() on them.
> These simulations also write about 190MB's to file, but
> I have no idea whether that is relevant, and those data are not
> used. The calls I do look like this:
> > ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1, 100,
> "point")))
> > ch1
> 
> 	 Pearson's Chi-square test 
> 
> data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
> X-squared = 463.8359, df = 300, p-value = 3.726e-09 
> 
> > ch1$observed
> 
> Process R bus error (core dumped) at Mon May 22 12:38:49 2000
> 
> 
> ....so it doesn't crash when I print the whole object, but when I 
> a vector of the object, it crashes... And, restarting R, it doesn't
> happen.
> 
> I heard the sysadm who did the installation had some problems,
> I don't know what it was about, but if I understood him correctly,
> it only happened when he tuned for EV6, so it shouldn't be a problem now, 
> I guess....
> 
> Kjetil

I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
V5.0). Compiled with gcc/g77 using optimisation level -O2 (determined by
configure script).

> ch1 <- chisq.test(t(apply(cbind(rep(5000000, 4)), 1, lineprofile, 1,
100,"point")))


> ch1

         Pearson's Chi-square test 

data:  t(apply(cbind(rep(5e+06, 4)), 1, lineprofile, 1, 100, "point")) 
X-squared = 404.6772, df = 300, p-value = 5.125e-05 

> ch1$observed
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
[1,]  160  144  205  244  273  314  395  454  521   592   713   864   905 1043
[2,]  139  175  210  232  276  369  372  459  525   566   687   781   886  981

... etc ...


Brad

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From davidD@qimr.edu.au  Thu May 25 02:39:37 2000
From: davidD@qimr.edu.au (davidD@qimr.edu.au)
Date: Thu, 25 May 2000 03:39:37 +0200 (MET DST)
Subject: [Rd] diag() (PR#555)
Message-ID: <200005250139.DAA21529@pubhealth.ku.dk>

Full_Name: David Duffy
Version: 1.0.1
OS: Linux
Submission from: (NULL) (152.98.96.21)


Documentation for diag() states that "If x is a vector (or a
1-d array) then diag(x) returns a diagonal matrix whose diagonal
is x."
> m<-matrix(1:4,ncol=1)
> diag(m)
[1] 1
diag(as.vector(m)) gives the advertised performance.

Fix: Change documentation.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From venables@acland.qld.cmis.csiro.au  Thu May 25 03:25:27 2000
From: venables@acland.qld.cmis.csiro.au (Bill Venables)
Date: Thu, 25 May 2000 12:25:27 +1000
Subject: [Rd] diag() (PR#555)
In-Reply-To: Your message of "Thu, 25 May 2000 03:39:37 +0200."
 <200005250139.DAA21529@pubhealth.ku.dk>
Message-ID: <200005250225.MAA15350@snowy.nsw.cmis.CSIRO.AU>

> Full_Name: David Duffy
> Version: 1.0.1
> OS: Linux
> Submission from: (NULL) (152.98.96.21)
> 
> 
> Documentation for diag() states that "If x is a vector (or a
> 1-d array) then diag(x) returns a diagonal matrix whose diagonal
> is x."
> > m <- matrix(1:4,ncol=1)
> > diag(m)
> [1] 1
> diag(as.vector(m)) gives the advertised performance.
> 
> Fix: Change documentation.

On the contrary I consider this to be the advertized performance.

The array m as defined above is a 2-d array, not a 1-d array, it just
so happens that one of the dimensions has extent 1, but so what?

I would favour retaining the definition

	dimension of array A  =  length(dim(A))

in all cases so that you can rely on it in programming and do not have
to consider even more exception handling.  It's bad enough already
with the drop convention.

If anything I think it requires a little more emphasis on what
constitutes an n-dimensional array and precisely what drop(m) does,
for example.  The above equality is *before* drop, not after, in other
words.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables@cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetil.kjernsmo@astro.uio.no  Thu May 25 10:52:08 2000
From: kjetil.kjernsmo@astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 25 May 2000 11:52:08 +0200 (MET DST)
Subject: [Rd] Bus Error crash (PR#551)
In-Reply-To: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <Pine.OSF.4.21.0005251145100.13610-100000@alnair.uio.no>

On Wed, 24 May 2000, Brad McNeney wrote:

>I can't reproduce the problem on my system (R Version: 1.0.0, OS: osf1
>V5.0).

OK. I had a similar crash yesterday on a different machine but I think
with rather identical hardware, it was a batch job that was running
so I don't know exactly what caused the crash (after about 48 CPU hours,
arrgh), but I have a (small) core dump at
<URL:http://www.astro.uio.no/~kjetikj/tmp/core3>

Anyway, Uwe suggested it might be a RAM hardware problem, which is not
impossible. I think these machines were bought while still in beta-test,
and hopefully, Compaq will drop by tomorrow to have a look. 

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj@astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster@skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 25 18:23:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 25 May 2000 13:23:26 -0400
Subject: [Rd] Bus Error crash (PR#551)
References: <Pine.OSF.4.21.0005241508010.116565-100000@smahlt.math.sfu.ca>
Message-ID: <392D618E.DF1DD05F@bank-banque-canada.ca>

> These simulations also write about 190MB's to file

I had a similar problem with R crashing (I think it was a system error rather
than a bus error). In the end it was a hardware problem due to a standard IDE
cable on a new udma ATA 66 drive. R seemed to be the main thing that drove the
system hard enough to cause a problem. It wasn't severe enough to crash the
system, just R.

The problem stopped if I slowed the system to 400MHz. The place that sold me the
system said I only needed the special cable on systems with a blue IDE
connector, but the disk drive manufacture's tech support said the cable would
probably fix the problem, so I got one and tried it, and it did fix the problem.
The special cables have finer wires and possibly a twisted pair. They have blue
connectors to match the (sometimes) blue connectors on the motherboard.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:12 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:12 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
Message-ID: <200005300939.LAA08854@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@anc.ed.ac.uk  Tue May 30 10:39:18 2000
From: stephen@anc.ed.ac.uk (stephen@anc.ed.ac.uk)
Date: Tue, 30 May 2000 11:39:18 +0200 (MET DST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#558)
Message-ID: <200005300939.LAA08876@pubhealth.ku.dk>

Full_Name: stephen eglen
Version: 1.0.0
OS: Unix (OSF/1)
Submission from: (NULL) (129.215.238.26)


Hi,
in the documentation `Writing R Extensions', the section 3.6.1  (handling the
effects of garbage collection) has the following typo:

 Protecting a SEXP pointer protexts ...

Should  that be `protects'?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 30 11:31:39 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 30 May 2000 11:31:39 +0100 (BST)
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10005301126380.5585-100000@auk.stats>

On Tue, 30 May 2000 stephen@anc.ed.ac.uk wrote:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

It is already `protects' in the current sources (R-devel): I didn't check
1.0.1.  Not sure why you submitted this twice (PR#557 and PR#558)?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 30 11:40:17 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2000 12:40:17 +0200
Subject: [Rd] Documentatio: typo in Writing R Extensions (PR#557)
In-Reply-To: stephen@anc.ed.ac.uk's message of "Tue, 30 May 2000 11:39:12 +0200 (MET DST)"
References: <200005300939.LAA08854@pubhealth.ku.dk>
Message-ID: <x2ya4sl3se.fsf@blueberry.kubism.ku.dk>

stephen@anc.ed.ac.uk writes:

> Full_Name: stephen eglen
> Version: 1.0.0
> OS: Unix (OSF/1)
> Submission from: (NULL) (129.215.238.26)
> 
> 
> Hi,
> in the documentation `Writing R Extensions', the section 3.6.1  (handling the
> effects of garbage collection) has the following typo:
> 
>  Protecting a SEXP pointer protexts ...
> 
> Should  that be `protects'?

Yup. Already fixed in the development version.

Actually "SEXP pointer" is a bit like "ATM machine". SEXPs are
pointers to SEXPREC, so is a SEXP pointer a (SEXPREC **) ? Besides,
one is not protecting the pointer but the object it points to (by
putting a pointer to it on the protection stack). This is
a common misconception:

 PROTECT(p);
 ...
 p = AllocSexp(....);

will not protect the new value of p. You need

 PROTECT(p);
 ...
 UNPROTECT(1);
 PROTECT(p = AllocSexp(....));

Hmm. Looks like the whole section needs going over. The stuff about
"ensuring that the pointer is updated" is bogus too (it is VECRECs
that move, not SEXPRECs). And the description of UNPROTECT_PTR is
vacuous at best.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:11:38 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:11:38 +0200
Subject: [Rd] read.table and strip.white
Message-ID: <3934BB2A.77864FC@statistik.uni-dortmund.de>

Hi!

I want to read data (using read.table(.)) from a file like:

  "col1", "col2", "col3"
  1, 1, 1
  2, 2, 2


But the white spaces are interpreted:

  x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
  colnames(x)
[1] "col1"  " col2" " col3"
             ^       ^ 

So I would like to pass an argument like strip.white=TRUE (as in
scan(.)) to read.table(.) .
If this is nonsense, please let me know.


At my first look only three lines (and documentation) must be changed:

l. 1-3 add: function(..., strip.white=FALSE, ...)
                          ^^^^^^^^^^^^^^^^^
l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
                                  ^^^^^^^^^^^^^^^^^^^^^^^



There is also a little bug in the "windows help" to read.table(.):

Usage
read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
                                                              ^^^ must
be: "\"'"
and both of
read.csv(file, header = TRUE, sep = ",", quote="", 

read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 

                                                ^^ must be: "\""

Looks like a general problem with a backslashes in "winhelp" (?).

If requested, I will create a bug report...

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:35:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:35:13 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310735.IAA11142@toucan.stats.ox.ac.uk>

>Date: Wed, 31 May 2000 09:11:38 +0200
>From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
>
>There is also a little bug in the "windows help" to read.table(.):
>
>Usage
>read.table(file, header = FALSE, sep = "", dec = ".", quote = "'",
>                                                              ^^^ must
>be: "\"'"
>and both of
>read.csv(file, header = TRUE, sep = ",", quote="", 
>
>read.csv2(file, header = TRUE, sep = ";", quote="", dec=",", 
>
>                                                ^^ must be: "\""
>
>Looks like a general problem with a backslashes in "winhelp" (?).

Which system of help, and if text help which pager?  (I'm not
on Windows here to check, but the text file looks fine on Unix. My
guess is that this a pager bug.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 08:49:52 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 09:49:52 +0200
Subject: [Rd] read.table and strip.white
References: <200005310735.IAA11142@toucan.stats.ox.ac.uk>
Message-ID: <3934C420.5C8CECC1@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:
> [...]
> >Looks like a general problem with a backslashes in "winhelp" (?).
> 
> Which system of help, and if text help which pager?  (I'm not
> on Windows here to check, but the text file looks fine on Unix. My
> guess is that this a pager bug.)

The Windows Help system (R-1.0.1, NT4.0):
  help(read.table, winhelp=TRUE)

Text and HTML Help are OK.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 08:57:00 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 08:57:00 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005310757.IAA22525@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:49:52 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: Prof Brian Ripley <ripley@stats.ox.ac.uk>
> CC: R-devel <r-devel@stat.math.ethz.ch>
> Subject: Re: [Rd] read.table and strip.white
> 
> Prof Brian Ripley wrote:
> > [...]
> > >Looks like a general problem with a backslashes in "winhelp" (?).
> > 
> > Which system of help, and if text help which pager?  (I'm not
> > on Windows here to check, but the text file looks fine on Unix. My
> > guess is that this a pager bug.)
> 
> The Windows Help system (R-1.0.1, NT4.0):
>   help(read.table, winhelp=TRUE)
> 
> Text and HTML Help are OK.

Thanks, will take a look.  winhelp comes with a health warning, and we
were thinking of withdrawing now most people have Compiled HTML.
Looks like at least one person uses it!

It is done by automatic translation from HTML written by someone else,
and there are a lot of known problems with it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Wed May 31 17:43:11 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Wed, 31 May 2000 17:43:11 +0100 (BST)
Subject: [Rd] read.table and strip.white
Message-ID: <200005311643.RAA09975@toucan.stats.ox.ac.uk>


> Date: Wed, 31 May 2000 09:11:38 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> X-Accept-Language: en
> To: R-devel <r-devel@stat.math.ethz.ch>
> CC: busse@statistik.uni-dortmund.de, Joerg Guettner <guettner@gmx.de>
> Subject: [Rd] read.table and strip.white 
> 
> Hi!
> 
> I want to read data (using read.table(.)) from a file like:
> 
>   "col1", "col2", "col3"
>   1, 1, 1
>   2, 2, 2
> 
> 
> But the white spaces are interpreted:
> 
>   x <- read.table("filename", header=TRUE, sep=",")  ## or read.csv(...)
>   colnames(x)
> [1] "col1"  " col2" " col3"
>              ^       ^ 
> 
> So I would like to pass an argument like strip.white=TRUE (as in
> scan(.)) to read.table(.) .
> If this is nonsense, please let me know.
> 
> 
> At my first look only three lines (and documentation) must be changed:
> 
> l. 1-3 add: function(..., strip.white=FALSE, ...)
>                           ^^^^^^^^^^^^^^^^^
> l. 16 + 35 add:  ... <- scan(..., strip.white=strip.white, ...)
>                                   ^^^^^^^^^^^^^^^^^^^^^^^
> 

I was rather surprised here, and this is not what the prototype does:

  .col1. .col2. .col3. 
1      1      1      1
2      2      2      2

Should not strip.white be true for the header line?
That's what the prototype does:

toucan% cat fff
  col1, col2, col3
  a, 1, 1
  b, 2, 2

Splus
> x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> x
  col1 col2 col3 
1    a    1    1
2    b    2    2
> as.matrix(x)
   col1 col2 col3 
1 "  a" "1"  "1" 
2 "  b" "2"  "2" 

You can always quote on the header line if you really want names
with leading spaces.

I think we could add strip.white for use in the body, quite easily.

Any comments?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed May 31 18:11:55 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 31 May 2000 19:11:55 +0200 (CEST)
Subject: [Rd] no $method from as.hclust (PR#538)
In-Reply-To: <200005102200.AAA05996@pubhealth.ku.dk>
References: <200005102200.AAA05996@pubhealth.ku.dk>
Message-ID: <14645.18395.237724.736215@galadriel.ci.tuwien.ac.at>

>>>>> On Thu, 11 May 2000 00:00:23 +0200 (MET DST),
>>>>> denis  (d) wrote:

d> as.hclust returns objects with only 6 of the standard 7 
d> components of class hclust, leaving out "method", therefore
d> being incompatible with applications looking for all
d> 7 components.

Fixed in the development version. But I had to set the method to NA as
I see no way of extracting it from twins objects (as created by the
cluster package) short of parsing the call stored there ... but that
is too unreliable IMO as it interdepends with the default arguments
used etc.

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Wed May 31 19:34:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Wed, 31 May 2000 20:34:57 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk>
Message-ID: <39355B51.6A7D9361@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> > [...]

> I was rather surprised here, and this is not what the prototype does:
> 
>   .col1. .col2. .col3.
> 1      1      1      1
> 2      2      2      2
> 
> Should not strip.white be true for the header line?

If there are no compatibility problems, setting it to TRUE would be
useful ...
But compatibility is an important point, especially in read.table(.), I
think. Many R users have got their own functions using read.table(.), I
suppose. Maybe changing the defaults could break anything?


> That's what the prototype does:
> 
> toucan% cat fff
>   col1, col2, col3
>   a, 1, 1
>   b, 2, 2
> 
> Splus
> > x <- read.table("fff", header=TRUE, sep=",", row.names=NULL)
> > x
>   col1 col2 col3
> 1    a    1    1
> 2    b    2    2
> > as.matrix(x)
>    col1 col2 col3
> 1 "  a" "1"  "1"
> 2 "  b" "2"  "2"
> 
> You can always quote on the header line if you really want names
> with leading spaces.
> 
> I think we could add strip.white for use in the body, quite easily.
>
> Any comments?


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Wed May 31 22:42:04 2000
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Wed, 31 May 2000 23:42:04 +0200
Subject: [Rd] read.table and strip.white
References: <200005311643.RAA09975@toucan.stats.ox.ac.uk> <39355B51.6A7D9361@statistik.uni-dortmund.de>
Message-ID: <3935872C.EC932AE1@univie.ac.at>

dear all,
well, all of you 
a) living in windowsland
b) being a little bit adventurous

i need your help to check out something.

finally, we have managed to get remote dcom running with r.
what does that mean?
it means that we can use client software
(for example excel) and this client software call r on a server
on another machine.

i managed to get it running in the following configuration:

client on windows 95 (osr2)
server on windows 2000 professional

if possible, i would like reports for other configurations.

prerequesites
current version of r (1.001) installed on both machines.
dcom server from cran, nonstandard extensions
for test purposes:
r-excel interface from nonstandard extensions

dcom + dcomcnfg installed on the win95 machine
it is available from
http://www.microsoft.com/com/dcom/dcom95/download.asp
you also need the tools on winnt or win2k,
but there there are automatically installed by the os.

now, dcomcnfg has to be used on both client and server

win2k pro as server (no nt domain)
start dcomcnfg
select StatConnctorSrv

security tab
custom access permissions
everyone allow access
custom launch permissions
everyone allow launch

identity tab
the interactive user

on win95 client
start dcomcnfg
location tab
run application on the following computer
enter the network name

the user loggrd in on the win95 machine
has to be known on the win2k machine.

if the installation works
(it worked in my case)
you can use xcel on the client and all the r function calls from within
excel
will be executed on the server machine.

voila:
statistical client server computing with a remote server

configuration can get tedious.
to me, it is unclear if reboot is needed after
changing access rights.
if you want to help,
try often enough.
and PLEASE report running configurations.

erich
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

