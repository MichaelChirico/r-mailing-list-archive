From d@v|d@@tuder @end|ng |rom |u@@uzh@ch  Wed Jul  2 14:02:26 2025
From: d@v|d@@tuder @end|ng |rom |u@@uzh@ch (David Studer)
Date: Wed, 2 Jul 2025 12:02:26 +0000
Subject: [R] Seeking Advice on Diff-in-Diff Model When Treatment Effect
 Disappears After Intervention
Message-ID: <GVAP278MB0614E356DEDDEDCA774CC1B2A840A@GVAP278MB0614.CHEP278.PROD.OUTLOOK.COM>

Hi everyone,
I?m working on a Difference-in-Differences (Diff-in-Diff) analysis at the school district level to study the impact of switching from a dual college admission algorithm system (Immediate Acceptance (IA) and Deferred Acceptance (DA)) to a uniform DA system implemented in England after 2007.
Usually, Diff-in-Diff models are used when an intervention creates a difference between treated and control groups after the policy change. However, in my case, the opposite is expected:

  *
Before 2007, districts using IA had different rates of successful appeals against college admissions compared to those using DA.
  *
After 2007, with DA applied everywhere, these differences should disappear or converge.

This means that the "treatment effect" I?m estimating is actually a reduction or elimination of pre-existing differences, rather than the emergence of new differences after the intervention.
Has anyone encountered this reversed Diff-in-Diff setting before? How did you model or interpret the interaction term when the expected effect is convergence rather than divergence? Are there any specific methods, robustness checks, or papers you could recommend for such a scenario?
Thanks in advance!


	[[alternative HTML version deleted]]


From @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r  Thu Jul  3 16:49:50 2025
From: @@mue|@gr@nje@ud @end|ng |rom |n@erm@|r (Samuel Granjeaud IR/Inserm)
Date: Thu, 3 Jul 2025 16:49:50 +0200
Subject: [R] Typo in documentation of stats::median?
Message-ID: <4a3df9cf-fd88-466d-9818-c6f479f2d2d0@inserm.fr>

Hi,

In the documentation of stats::median, in "The default method returns a 
length-one object of the same type as x, except when x is logical or 
integer of even length, when the result will be double.", I think a 
better version of "when the result will be double" might be "in which 
case the result will be double.".

Best,
Samuel


From t|mothy@e@r| @end|ng |rom ce|@@@gov@uk  Fri Jul  4 12:50:26 2025
From: t|mothy@e@r| @end|ng |rom ce|@@@gov@uk (Timothy Earl (Cefas))
Date: Fri, 4 Jul 2025 10:50:26 +0000
Subject: [R] approxfun asymmetry
Message-ID: <DB9PR08MB786757D60D1B3557A326EF11A642A@DB9PR08MB7867.eurprd08.prod.outlook.com>

Hi,

I'm seeing an asymmetry in how approxfun treats -Inf and Inf, which I don't understand from reading the help file.

e.g. a simple step function
tmp <- approxfun(x=c(-Inf, -0.2, 0.2,  Inf), y=c(-1, -1, 1, 1))
tmp(c(-1, 0, 1))
# [1] NaN   0   1
I expected: # [1] -1   0   1

Clearly I can work round this by using type=2, and not specifying the end points (or by replacing -Inf by a large negative number), but I was wondering what I was missing about the different behaviour between positive and negative infinity.

To simplify further:
approxfun(x=c(-1000,  Inf), y=c(1, 1))(0)
# [1] 1

approxfun(x=c(-Inf,  1000), y=c(1, 1))(0)
# [1] NaN

Sessioninfo:
R version 4.3.0 (2023-04-21 ucrt) -- "Already Tomorrow"
Copyright (C) 2023 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

Thanks,

Tim
________________________________
 This email and any attachments are intended for the named recipient only. Its unauthorised use, distribution, disclosure, storage or copying is not permitted. If you have received it in error, please destroy all copies and notify the sender. In messages of a non-business nature, the views and opinions expressed are the author's own and do not necessarily reflect those of Cefas. Communications on Cefas? computer systems may be monitored and/or recorded to secure the effective operation of the system and for other lawful purposes. All messages sent and received by the Centre for Environment, Fisheries and Aquaculture Science may be monitored in line with relevant UK legislation . <https://www.gov.uk/government/organisations/centre-for-environment-fisheries-and-aquaculture-science/about/personal-information-charter>

From j3||d|ck @end|ng |rom gm@||@com  Sat Jul  5 07:46:05 2025
From: j3||d|ck @end|ng |rom gm@||@com (Jeffrey Dick)
Date: Sat, 5 Jul 2025 13:46:05 +0800
Subject: [R] [External] Re: code for drawing the R logo
In-Reply-To: <CANVKczOM3eWvVm3LNrG4+NjRLrX+h3Op-cuQF+cBG1Ghn9LCeg@mail.gmail.com>
References: <aF7R4OT5wcoqV6As@iastate.edu>
 <30e4d6cf-2363-423d-8188-1a7a458f456b@atsu.edu>
 <130f88e9-66a4-420a-a5c4-cc16da234684@gmail.com>
 <238b24309160464ebe880f2aa7945fb3@LO0P265MB2603.GBRP265.PROD.OUTLOOK.COM>
 <CANVKczOM3eWvVm3LNrG4+NjRLrX+h3Op-cuQF+cBG1Ghn9LCeg@mail.gmail.com>
Message-ID: <CANBtttY93qS=gJ06EDEShyDMhqiO9PXQ79+OLm3UHkOjFusofA@mail.gmail.com>

The OP's question might be interpreted as "draw the R logo in R",
meaning base R graphics. This interpretation excludes packages like
rsvg that use a rendering engine such as
https://wiki.gnome.org/Projects/LibRsvg (the R here is for
"Resplendent SVG", not the R language).

Thanks to Barry for describing the approach. Using Barry's email as
context, I asked Cursor to write R code to parse Rlogo.svg and make a
plot with base R graphics. It took a few debugging iterations to get a
working script, and gradients currently aren't working. The only CRAN
package used in the script is xml2.

Chat history and code are here: https://github.com/jedick/R-svg-interpreter

Code to generate Rlogo.png, assuming Rlogo.svg is in the current directory:
source("svg_interpreter.R")
savePlot("Rlogo.png")

Jeff


On Mon, Jun 30, 2025 at 4:23?PM Barry Rowlingson
<b.rowlingson at lancaster.ac.uk> wrote:
>
> The SVG isn't that complex, it defines two colour gradients (one for the R
> and one for the ring) and then draws each one using a series of cubic
> bezier curves and lines
>
> These are in <path> tags in the SVG which look like this:
>
> M361.453,485.937 C162.329,485.937 0.906,377.828 0.906,244.469
> C0.906,111....etc
>
>  M is "move to" and then "C" defines a curve, "L" defines a straight line I
> don't think any other path items are used.
>
> There's two paths, each being two parts because both the R and the ring
> have holes in them.
>
>  If you want to draw this from scratch in R code, first write (or find)
> code to draw cubic bezier curves as per the SVG spec, then extract the
> coordinates from the path attributes in the SVG then make polygons and
> shade them using the colour gradients at the start of the SVG...
>
> Barry
>
>
>
> On Sun, Jun 29, 2025 at 9:34?PM Hasan Diwan <hasan.diwan at gmail.com> wrote:
>
> > This email originated outside the University. Check before clicking links
> > or attachments.
> >
> > Rajan,
> > https://hasan.d8u.us/Rlogo.svg Best I could do in a pinch. -- H
> >
> > > On 6/27/2025 12:16 PM, Ranjan Maitra via R-help wrote:
> > > >> Hi,
> > > >>
> > > >> Is there code for drawing the R logo? https://www.r-project.org/logo/
> > > has the logo in svg and png formats, and also
> > > >> the terms of the license, but I can not find code to draw this.
> >
> > --
> > OpenPGP: https://hasan.d8u.us/openpgp.asc
> > If you wish to request my time, please do so using
> > *https://bit.ly/hd1Appointment
> > <https://bit.ly/hd1Appointment>*.
> > Si vous voudriez faire connnaisance, allez a *
> > https://bit.ly/hd1Appointment
> > <https://bit.ly/hd1Appointment>*.
> >
> > <https://sks-keyservers.net/pks/lookup?op=get&search=0xFEBAD7FFD041BBA1
> > >Sent
> > from my mobile device
> > Envoye de mon portable
> >
> >         [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> > https://stat.ethz.ch/mailman/listinfo/r-help
> > PLEASE do read the posting guide
> > https://www.R-project.org/posting-guide.html
> > and provide commented, minimal, self-contained, reproducible code.
> >
>
>         [[alternative HTML version deleted]]
>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Rlogo.png
Type: image/png
Size: 10911 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-help/attachments/20250705/0d0dff47/attachment.png>

From murdoch@dunc@n @end|ng |rom gm@||@com  Fri Jul  4 22:33:36 2025
From: murdoch@dunc@n @end|ng |rom gm@||@com (Duncan Murdoch)
Date: Fri, 4 Jul 2025 16:33:36 -0400
Subject: [R] approxfun asymmetry
In-Reply-To: <DB9PR08MB786757D60D1B3557A326EF11A642A@DB9PR08MB7867.eurprd08.prod.outlook.com>
References: <DB9PR08MB786757D60D1B3557A326EF11A642A@DB9PR08MB7867.eurprd08.prod.outlook.com>
Message-ID: <43bf394b-952f-43a9-bfd9-3752a9d6b7b1@gmail.com>

I think you're just seeing undefined behaviour.  In most cases it 
doesn't make sense to interpolate linearly between the points (-Inf, y0) 
and (-1, y1).  In your example with y0 == y1 it's fine, but if you had

   approxfun(x=c(-Inf, 0), y = c(1, 2))

what would you expect the result to be when evaluated at x = -1?  It 
will depend on how you evaluate the linear interpolation formula:

  f(x) = y0 + (x - x0)*(y1 - y0)/(x1 - x0) = 1 + Inf*1/Inf
       = y1 - (x1 - x)*(y1 - y0)/(x1 - x0) = 2 - 1*1/Inf
       = [y0*(x1 - x) + y1*(x - x0)]/(x1 - x0) = [1*1 + 2*Inf]/Inf

The second formula gives 2 (which is a reasonable answer), but the first 
and third are undefined because of the Inf/Inf.

Duncan Murdoch


On 2025-07-04 6:50 a.m., Timothy Earl (Cefas) via R-help wrote:
> Hi,
> 
> I'm seeing an asymmetry in how approxfun treats -Inf and Inf, which I don't understand from reading the help file.
> 
> e.g. a simple step function
> tmp <- approxfun(x=c(-Inf, -0.2, 0.2,  Inf), y=c(-1, -1, 1, 1))
> tmp(c(-1, 0, 1))
> # [1] NaN   0   1
> I expected: # [1] -1   0   1
> 
> Clearly I can work round this by using type=2, and not specifying the end points (or by replacing -Inf by a large negative number), but I was wondering what I was missing about the different behaviour between positive and negative infinity.
> 
> To simplify further:
> approxfun(x=c(-1000,  Inf), y=c(1, 1))(0)
> # [1] 1
> 
> approxfun(x=c(-Inf,  1000), y=c(1, 1))(0)
> # [1] NaN
> 
> Sessioninfo:
> R version 4.3.0 (2023-04-21 ucrt) -- "Already Tomorrow"
> Copyright (C) 2023 The R Foundation for Statistical Computing
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> 
> Thanks,
> 
> Tim
> ________________________________
>   This email and any attachments are intended for the named recipient only. Its unauthorised use, distribution, disclosure, storage or copying is not permitted. If you have received it in error, please destroy all copies and notify the sender. In messages of a non-business nature, the views and opinions expressed are the author's own and do not necessarily reflect those of Cefas. Communications on Cefas? computer systems may be monitored and/or recorded to secure the effective operation of the system and for other lawful purposes. All messages sent and received by the Centre for Environment, Fisheries and Aquaculture Science may be monitored in line with relevant UK legislation . <https://www.gov.uk/government/organisations/centre-for-environment-fisheries-and-aquaculture-science/about/personal-information-charter>
> ______________________________________________
> R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
> and provide commented, minimal, self-contained, reproducible code.


From jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@  Fri Jul  4 23:22:12 2025
From: jdnewm|| @end|ng |rom dcn@d@v|@@c@@u@ (Jeff Newmiller)
Date: Fri, 04 Jul 2025 14:22:12 -0700
Subject: [R] approxfun asymmetry
In-Reply-To: <DB9PR08MB786757D60D1B3557A326EF11A642A@DB9PR08MB7867.eurprd08.prod.outlook.com>
References: <DB9PR08MB786757D60D1B3557A326EF11A642A@DB9PR08MB7867.eurprd08.prod.outlook.com>
Message-ID: <459F74B7-C0E3-4CD4-BFA4-59F1A71B62B2@dcn.davis.ca.us>

Approxfun uses the two-point formula [1] for a line:

y = y_1 + (y_2 - y_1) * (x - x_1) / (x_2 - x_1)

so in the first simplified case you get

y = 1 + (1 - 1) * (0 - (-1000)) / (Inf - (-1000))
  = 1 + 0 * 1000 / Inf
  = 1 + 0 / Inf
  = 1 + 0
  = 1

while in the second case you get

y = 1 + (1 - 1) * (0 - (-Inf)) / (1000 - (-Inf))
  = 1 + 0 * Inf / Inf
  = 1 + NA / Inf
  = 1 + NA
  = NA

Zero times infinity is undefined.

[1] <https://en.m.wikipedia.org/wiki/Linear_equation>

On July 4, 2025 3:50:26 AM PDT, "Timothy Earl (Cefas) via R-help" <r-help at r-project.org> wrote:
>Hi,
>
>I'm seeing an asymmetry in how approxfun treats -Inf and Inf, which I don't understand from reading the help file.
>
>e.g. a simple step function
>tmp <- approxfun(x=c(-Inf, -0.2, 0.2,  Inf), y=c(-1, -1, 1, 1))
>tmp(c(-1, 0, 1))
># [1] NaN   0   1
>I expected: # [1] -1   0   1
>
>Clearly I can work round this by using type=2, and not specifying the end points (or by replacing -Inf by a large negative number), but I was wondering what I was missing about the different behaviour between positive and negative infinity.
>
>To simplify further:
>approxfun(x=c(-1000,  Inf), y=c(1, 1))(0)
># [1] 1
>
>approxfun(x=c(-Inf,  1000), y=c(1, 1))(0)
># [1] NaN
>
>Sessioninfo:
>R version 4.3.0 (2023-04-21 ucrt) -- "Already Tomorrow"
>Copyright (C) 2023 The R Foundation for Statistical Computing
>Platform: x86_64-w64-mingw32/x64 (64-bit)
>
>Thanks,
>
>Tim
>________________________________
> This email and any attachments are intended for the named recipient only. Its unauthorised use, distribution, disclosure, storage or copying is not permitted. If you have received it in error, please destroy all copies and notify the sender. In messages of a non-business nature, the views and opinions expressed are the author's own and do not necessarily reflect those of Cefas. Communications on Cefas? computer systems may be monitored and/or recorded to secure the effective operation of the system and for other lawful purposes. All messages sent and received by the Centre for Environment, Fisheries and Aquaculture Science may be monitored in line with relevant UK legislation . <https://www.gov.uk/government/organisations/centre-for-environment-fisheries-and-aquaculture-science/about/personal-information-charter>
>______________________________________________
>R-help at r-project.org mailing list -- To UNSUBSCRIBE and more, see
>https://stat.ethz.ch/mailman/listinfo/r-help
>PLEASE do read the posting guide https://www.R-project.org/posting-guide.html
>and provide commented, minimal, self-contained, reproducible code.

-- 
Sent from my phone. Please excuse my brevity.


From bgunter@4567 @end|ng |rom gm@||@com  Sat Jul 12 00:42:01 2025
From: bgunter@4567 @end|ng |rom gm@||@com (Bert Gunter)
Date: Fri, 11 Jul 2025 15:42:01 -0700
Subject: [R] Off topic: Reference to "Box and whisker plots" make the
 weather report
Message-ID: <CAGxFJbRUfsjP3z-rHNCTT3Zo08kjz4TQxpKtYdEFJSVgBvYYOg@mail.gmail.com>

For statistical graphics enthusiasts and John Tukey admirers in particular,
for the first time in my lifetime, I have seen a reference to Tukey's
"box-and-whisker
plots" in a public non-technical forum -- a National Weather Service report
for the San Francisco Bay Area:

"Looking at box and whisker plots around the area, temps tomorrow
start to show a cooling trend with a fairly tight spread on the
box."

If you care, full report at:
https://forecast.weather.gov/product.php?site=MTR&issuedby=MTR&product=AFD&format=CI&version=1&glossary=1

Note: No plots are actually shown, just the reference to them, which I
thought was charming.

I realize that modern computer graphics may make this seem somewhat
antiquated; Tukey originally invented these for manual graphics displays,
and I first encountered them in his 1977 book, *Exploratory Data Analysis*,
which in many ways was a revolutionary departure from then current
statistical practice.

To be clear, I do not wish to engage in any discussion about the utility of
this display versus modern alternatives, nor comment on the NWS's use of
it. I only wanted to share the reference for the enjoyment of others on
this list.

Cheers to all,

Bert


"An educated person is one who can entertain new ideas, entertain others,
and entertain herself."

	[[alternative HTML version deleted]]


