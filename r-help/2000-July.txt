From xyzzy at speakeasy.org  Sat Jul  1 02:02:59 2000
From: xyzzy at speakeasy.org (Trent Piepho)
Date: Fri, 30 Jun 2000 17:02:59 -0700 (PDT)
Subject: [R] margins with postscript device
Message-ID: <Pine.LNX.4.04.10006301633150.20556-100000@xyzzy.dsl.speakeasy.net>

I've been having a problem when printing plots to a HP DeskJet 2500C printer. 
This printer, like most inkjet printers, has a large minimum bottom margin. 
For most HP inkjet printers, the bottom 1/2" (left 1/2" inch for landscape)
of the page can't be printed too.  The postscript device in R has a default of
1/4" margins between the paper edge and the plotting area.  This means that
bottom (or left in landscape) 1/4" inch of the plotting area is cut off. 
Typically, the Y-axis label in landscape plots will be cut off.

I couldn't find any good way to fix this using the postscript device options,
as there is no way to set the margins.  The closest thing would be to set the
paper width or height to 1" less than the paper size, giving a 1/2" margin on
both sides.  This means I have to figure out if I'm doing a landscape or
portrait plot, find the size of the paper I'm using, and subtract double the
size of the largest margin I want.  This also forces both the top and bottom
margins to be the same, when I would rather have a 1/2" bottom margin and only
a 1/8" top margin (the printer's minimum for the top), so I don't lose so much
of the paper's space.

I think it would be useful if the postscript options were extended to let
the top/bottom/left/right margins be set individually.  It would also be
convenient if there was an "inkjet" switch which changed the default margins
from 1/4" on all sides to 1/2" on the bottom (left if horizontal==T) and 1/8"
on the top (or right).

I've also made a quick hack for the postscript device that adjust the margins
appropriately.  Maybe other users of inkjet printers who use postscript will
find it useful.

--- devPS.c     Tue May  2 06:18:35 2000
+++ /eolian1/R-1.1.0/src/main/devPS.c   Thu Jun 29 16:08:13 2000
@@ -909,6 +909,13 @@
     } else {
        xoff = yoff = 0.0;
     }
+    /* HACK for DeskJet printers with 1/2" bottom margin and 1/8" top */
+    if(pd->landscape) {
+       pd->width -= 0.125; xoff += 0.25;
+    } else {
+       pd->height -= 0.125; yoff += 0.25;
+    }
+
     pd->maxpointsize = 72.0 * ((pd->pageheight > pd->pagewidth) ?
                               pd->pageheight : pd->pagewidth);
     pd->pageno = 0;

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From venables at acland.qld.cmis.csiro.au  Sat Jul  1 04:08:12 2000
From: venables at acland.qld.cmis.csiro.au (Bill Venables)
Date: Sat, 01 Jul 2000 12:08:12 +1000
Subject: [R] I have a dream of creating a program on statistical analyses. 
In-Reply-To: Your message of "Fri, 30 Jun 2000 11:55:09 GMT."
             <20000630115509.97133.qmail@hotmail.com> 
Message-ID: <200007010208.MAA10880@snowy.nsw.cmis.CSIRO.AU>

Nathapong Samlamjiag writes:

> My name is Nathapong Samlamjiag.  I am a student from Bangkok,
> Thailand. I am studying Political Science, of which a few
> courses concern statistics and research methodology. In
> Thailand, it is believed that SPSS is the most popular program
> used to conduct statistical analyses.  Although I admit that
> SPSS is an excellent program capable of performing ming
> numerous techniques, I personally believe that SPSS is not
> researcher-friendly.  

In a sense you are right: many statistical packages attempt to be
user-friendly by making it dead easy for people to conduct
standard stock analyses, like regression analyses, at the expense
of making it tedious, difficult or even impossible to adapt the
analysis to suit the realities of the situation under study.

> For example, before researchers conduct a regression analysis,
> they must first check certain assumptions of regression.  Some
> assumptions are very likely to be violated but can usually be
> corrected by data transformations.  Thus, a regression analysis
> should be carried out in particular steps: First, relevant
> assumptions are tested; then, data transformations are
> conducted; and finally the regression analysis is carried.

Actually, no, it's much more complicated than that.  The
important distributional properties are of the residuals after
the regression, not of the marginal distribution of the response
variable.  This is what makes checking the assumptions very
tricky: you cannot know beforehand whether an apparent
non-normality of the response variable, for example, is due to
ignored covariates (at that stage) or to a real violation of
assumptions.  It's a chicken-and-egg situation requiring
sometimes very subtle judgments by the analyst using as much
ancillary information about the situation as possible.

Transformation of the response (or predictors) is not a universal
panacea, either.  It might be more appropriate to shift to a
different kind of model, such as a generalized linear model, to
handle some kinds of distributional properties, particularly if
ultimately you need an analysis in the original scale.

> Because it is usually difficult and inconvenient to test and
> correct assumptions in SPSS, many (Thai) researchers tend to
> ignore assumptions of a statistical technique.  

In that they are certainly not alone!

> Ignoring assumptions that may be untrue lead to research
> conclusions that may be unsound.  As far as I know, at present
> there are no statistical programs that are easy to not only
> conduct statistical techniques but also check (and, if
> necessary, correct) the techniques' assumptions.  With this in
> mind, I have a dream of creating a statistical program capable
> of helping political-science researchers conduct statistical
> analysis that will yield valid conclusions.

Much as regret having to put a curb on such enthusiasm, I have to
suggest you think very carefully about this before sinking too
much energy into it.  This amounts to a statistical expert
system, something that has been tried several times before,
always with disappointing results.  The consensus seems to be
that the statistical contribution to a piece of research is a
genuine contribution requiring just as much judgment and
creativity as any other part of the work and not something that
can be automated (at least not yet).  What you are suggesting
sounds dangerously like just a different kind of SPSS where
instead of the preferences built into that package the researcher
gets your prejudices and preferences, which may be a little more
elaborate but are in the end just as inflexible.

The closest we have come to providing an optimal support system
for the data analyst seems in fact to be software environments
like R which provide coherent suites of tools that can be used as
they are as components or easily extended.  The researcher has a
number of choices: do a proper course in applied statistics (not
just a quickie on methods) and become familiar enough with the
real data analysis issues to handle it with the help of an
environment like R (or even SPSS for that matter), collaborate
with a statistician, employ a consultant or just wing it and hope
for the best when it comes to referees.

> Therefore, I have searched the Internet to find information
> about computer programming. I have found that Visual Studio 6
> can be used to easily create a desktop application and that R
> language is a programming language for statistical computation
> and graphics.  

As I point out above, it is that but much more as well.  It is a
complete software environment for data analysis and graphics that
offers about as much support for the analyst as can reasonably be
offered without inhibiting the creativity or detracting from the
responsibility of the analysis process.

> Accordingly, I have begun dreaming of using Visual Studio 6 and
> R language to develop the desired program for statistical
> analyses.  However, I feel doubtful about some issues.  Thus, I
> would like to ask you a few questions and request your
> invaluable suggestions:

> 1. I tend to develop my statistical stand-alone program by
> first using Visual Basic to create a user-friendly graphical
> user interface and Visual C++ to create a database abase
> component and then using R language to conduct statistical
> computation.  Thus, I would like to know whether R-language
> functions can be called by an application developed by the
> BASIC and C++ languages?

This is a matter of some interest quite apart from your project.
It is (tangentially) aligned with the work of the Omegahat
project.  You might like to look at http://www.omegahat.org/

> 2. I know that R language is available as Free Software under
> the terms of the Free Software Foundation's GNU General Public
> License in source code form. I have read GNU General Public
> License Version 2, June 1991, but I still do not understand it
> completely. Thus, I would like to ask you whether my
> statistical program which calls R-language functions must also
> be a freeware. Must my statistical program be distributed
> freely?  Can I sell my program? More specifically, I am not
> sure about what I can do and what I cannot do without
> infringing on the copyrights.  Would you please clarify this
> concern of mine?  Thank you very much for your  R language. I
> will look forward to your suggestions.  

Sorry, I'm no lawyer either...  One thing that is clear, though,
is if you do issue your code under the GPL as well and make it
freely available, you will not violate the conditions.

-- 
Bill Venables,      Statistician,     CMIS Environmetrics Project
CSIRO Marine Labs, PO Box 120, Cleveland, Qld,  AUSTRALIA.   4163
Tel: +61 7 3826 7251           Email: Bill.Venables at cmis.csiro.au    
Fax: +61 7 3826 7304      http://www.cmis.csiro.au/bill.venables/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tring at mail1.stofanet.dk  Sat Jul  1 10:10:43 2000
From: tring at mail1.stofanet.dk (Troels Ring)
Date: Sat, 01 Jul 2000 10:10:43 +0200
Subject: No subject
Message-ID: <4.3.2.7.0.20000701100706.00dc9100@127.0.0.1>

Dear friends. Library Date was updated recently. I do not remember having 
seen the error below until now ? The plot title is made appropriately but 
the error message may be annoying, right ? I use version 1.1 on windows 98.

library(date)
tt <- as.date(c("1jan1960", "2jan1960", "31mar1960", "30jul1960"))
plot(tt,c(1:4),main="How's that ?")
Warning message:
parameter "main" couldn't be set in high-level plot() function

Best wishes

Troels

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Sat Jul  1 11:06:50 2000
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat, 01 Jul 2000 11:06:50 +0200
Subject: [R] Re: no subject --> plot.date(.)
References: <4.3.2.7.0.20000701100706.00dc9100@127.0.0.1>
Message-ID: <395DB4AA.6F504D58@statistik.uni-dortmund.de>

Troels Ring wrote:
> 
> Dear friends. Library Date was updated recently. I do not remember having
> seen the error below until now ? The plot title is made appropriately but
> the error message may be annoying, right ? I use version 1.1 on windows 98.
> 
> library(date)
> tt <- as.date(c("1jan1960", "2jan1960", "31mar1960", "30jul1960"))
> plot(tt,c(1:4),main="How's that ?")
> Warning message:
> parameter "main" couldn't be set in high-level plot() function

Right. A few weeks ago I did some quick and ugly improvements to
plot.date(.).
The warning (not error) message is generated by axis(.) which is called
within plot.date(.). This warning message can be ignored.

If anyone is interested in fixing this ...

There is also no dacumentation to pot.date(.) in package "date".

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From voss at statistik.uni-dortmund.de  Sat Jul  1 17:42:53 2000
From: voss at statistik.uni-dortmund.de (Brigitta Voss)
Date: Sat, 01 Jul 2000 17:42:53 +0200
Subject: [R] convergence value in optim
Message-ID: <395E117D.C0934107@statistik.uni-dortmund.de>


Dear all,


I have a problem with the value of the function optim 

optim(startingvalues,fct,NULL,method="BFGS",
control=list(maxit=300,trace=TRUE,REPORT=1))

In the helpfile for it is said that

$convergence

is an integer code and 
0 indicates successful convergence
1 indicates that the iteration limit maxit had been reached

 
So while using it, I played with different values for maxit and even if
I'm setting 
maxit=2 ( so the algorithm can't be converged) the value of $convergence
is 0.

Can anyone give me a hint what's going wrong..
 and is there another parameter who is indicating the convergence oof
the algorithm?

I am confused. Thanks for any help. 


Brigitta Voss
-- 

Brigitta Voss                                        /////// 
Fachbereich Statistik                         U N I D O ///  
Universit?t Dortmund                         ______///////   
44221 Dortmund, Germany                      \_\_\_\/////    
                                              \_\_\_\///     
Tel.: +49 (0)231 755 5409                      \_\_\_\/      
E-Mail: voss at .statistik.uni-dortmund.de
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From djp at psychology.nottingham.ac.uk  Sun Jul  2 16:52:06 2000
From: djp at psychology.nottingham.ac.uk (David Peebles)
Date: Sun, 2 Jul 2000 14:52:06 +0000 (GMT)
Subject: [R] X11 font problem
Message-ID: <Pine.LNX.4.10.10007021426400.773-100000@localhost.localdomain>

Dear R users,

I've just upgraded from R 0.64.1 to 1.1.0 on a PC running Red Hat Linux
6.0.  When I ran demo(graphics), after the command:

title(main = "January Pie Sales", cex.main = 1.8, font.main = 1)

the plot did not materialise and I received this error message: 

Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1)
: X11 font at size 22 could not be loaded

similarly, when I enter the following commands

> testdata <- read.table("test.dat", header=T)
> pairs(testdata)

I get the following response:

Hit <Return> to see next plot: 
Error in text.default(x, y, txt, cex = cex, font = font) : 
	X11 font at size 16 could not be loaded
In addition: Warning message: 
freeing previous text buffer in GStrWidth 

These errors did not occur in my previous version of R.  Looking at the
files ONEWS and NEWS that came with the 1.0.0 and 1.1.0 releases
respectively, I notice that a great deal has changed with X11 font
handling in R since version 0.64.1.  I confess that I am still rather
inexperienced in the R system and so don't know whether these errors are
because of R, my Linux setup or some combination of the two.

Any comments and/or advice would be gratefully received.

Cheers,

David

===================================================================
 Dr David Peebles
 ESRC Centre for Research in Development, Instruction and Training
 School of Psychology, University of Nottingham,
 University Park, Nottingham, NG7 2RD, UK.

 email: djp at psychology.nottingham.ac.uk
 tel:             0 115 951 5292
 fax:             0 115 951 5324
 international: +44 115 951 ----
 url: http://www.psychology.nottingham.ac.uk/staff/David.Peebles/
===================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From curtis.p.miller at stl.monsanto.com  Sun Jul  2 20:47:13 2000
From: curtis.p.miller at stl.monsanto.com (MILLER, CURTIS P [PHR/1005])
Date: Sun, 2 Jul 2000 13:47:13 -0500 
Subject: No subject
Message-ID: <CDE6C712F111D311B01800A0C9EAF7EC0443CE3B@ems1000-04.monsanto.com>


I am having trouble installing R on a Unix system.  The system is 
mips-sgi-irix6.5, and the version is R-1.1.0.  The .tgz file is in
/usr/people/guest.  This is a guest account;  I do not have superuser
privileges.  The .tgz file was unpacked with 'gzip -dc R-1.1.0.tgz |
tar xvf -'.  This made a subdirectory, R-1.1.0.  I cd'ed to R-1.1.0
and changed the second uncommented line in the file "configure" from
"ac_default_prefix=/usr/local" to "ac_default_prefix=/usr/people/guest
/R-1.1.0".  The only subdirectory of /usr/local/ here is /lib.  I can't
install things that far up the tree.  Still in the subdirectory
R-1.1.0, I typed "./configure --prefix=/usr/people/guest/R-1.1.0".
The configure seemed to go well.  It found gcc with no problem. when
I typed "make",  the necessary functions and files seemed to be made.
When "R" is typed(in any directory), the message is always 
"Fatal error: Probably no X11 support: the shared library was not found"
I changed the variable "R_LD_LIBRARY_PATH" in the script file "R" to
"/usr/people/guest/R-1.1.0/src/include", since that is where the packages
are.  The same error message appeared.  The same happens if any options
are added, such as "R -g=none" or "R --help".  The X11 directory is in
"/bin".  I have tried to follow the instructions in the "INSTALL" file
under directory R-1.1.0. What am I doing wrong?  I did successfully
unpack and install R-1.0.1, but then could not install the contributed
packages.  Does some superuser need to install some utility or reset
permissions on some directories?  Does R need to be installed farther
up the tree?  These may seem like very basic problems to many to many out
there,
but the people who made the R package for UNIX may have assumed more expert
knowledge than I have.  There is a local UNIX support team here.  They
aren't
particularly familiar with statistical or mathematical software, as far as I
know.  Should
they be able to install R?  Any help would be much appreciated. 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ray.Brownrigg at mcs.vuw.ac.nz  Sun Jul  2 23:53:51 2000
From: Ray.Brownrigg at mcs.vuw.ac.nz (Ray Brownrigg)
Date: Mon, 3 Jul 2000 09:53:51 +1200 (NZST)
Subject: [R] "problem" with delay()
Message-ID: <200007022153.JAA25064@aqua.mcs.vuw.ac.nz>

I asked:
> > I have been using delay()  quite successfully to 'load on reference'
> > some large data files (earthquake catalogues).  One minor difficulty I
> > have not been able to overcome is that upon first reference, the data
> > set is loaded into memory as expected, but also remains as a permanent
> > object in the user's environment, instead of appearing to be only in
> > the library from which it was loaded. 
> 
Thomas Lumley <thomas at biostat.washington.edu> replied:
> Your problem is that data() does load the object into the global
> environment. To put data in another environment you need to use load(),
> source(), read.table() &c, explicitly.
> 
> :
> 
> Alternatively, if your data are in the R save() format and you are using
> 1.1.0 or newer you can delay an attach command
> 
> test.x<-delay({attach("data.rda")})
> 
> or if the file is in the data subdirectory of "mypackage"
> 
> test.x<-delay({attach(system.file("data","data.rda",pkg="mypackage"))})
> 
> This loads the file into a new environment in the search path, so it won't
> be saved on exit.
> 
[Almost] exactly what I wanted.  The above does not actually provide the
value on first reference, so the minor modification to:
test.x<-delay({attach(system.file("data","data.rda",pkg="mypackage")); test.x})
is what works for me.

Thank you.

Regards,
Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Mon Jul  3 09:58:40 2000
From: gb at stat.umu.se (gb)
Date: Mon, 3 Jul 2000 09:58:40 +0200 (CEST)
Subject: [R] Re: your mail
In-Reply-To: <CDE6C712F111D311B01800A0C9EAF7EC0443CE3B@ems1000-04.monsanto.com>
Message-ID: <Pine.LNX.4.21.0007030949270.10119-100000@pc16.stat.umu.se>

On Sun, 2 Jul 2000, MILLER, CURTIS P [PHR/1005] wrote:

> 
> I am having trouble installing R on a Unix system.  The system is 
> mips-sgi-irix6.5, and the version is R-1.1.0.  The .tgz file is in
> /usr/people/guest.  This is a guest account;  I do not have superuser
> privileges.  The .tgz file was unpacked with 'gzip -dc R-1.1.0.tgz |
> tar xvf -'.  This made a subdirectory, R-1.1.0.  I cd'ed to R-1.1.0
> and changed the second uncommented line in the file "configure" from
[...]

I don't think you should edit that file. Try doing the necessary editing
in the file 'config.site' instead. And/or use command line flags as
described in the file 'INSTALL', which should be read carefully. It is
in the top directory of the source tree.

I guess a good idea is to start all over, from unpacking...

Good luck!

G?ran


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From slim_skander at yahoo.fr  Mon Jul  3 10:58:30 2000
From: slim_skander at yahoo.fr (=?iso-8859-1?q?slim=20skandes?=)
Date: Mon, 3 Jul 2000 10:58:30 +0200 (CEST)
Subject: [R] modified R/S
Message-ID: <20000703085830.4284.qmail@web4705.mail.yahoo.com>

Hello 
I m a student in PARIS X university (France).I m
preparing a working paper dealing with the presence of
long memory in finantial markets.
I have programs computing the hurst exponent by the
rescaled range method and the GPH method (Geweke
Porter-Hudak). I want to apply the modified rescaled
range method proposed by A.Lo (1991).
AS i m beggining with RATS i couldn't do the progam .
can you send me the program (for RATS ) computing the
hurst exponent with the modified rescaled range method
or tell me where can i find them.
please help me i can't find it anywhere.

thank you






___________________________________________________________
Do You Yahoo!?
Achetez, vendez! ? votre prix! Sur http://encheres.yahoo.fr
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Mon Jul  3 11:15:24 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Mon, 03 Jul 2000 11:15:24 +0200 (CEST)
Subject: [R] X11 font problem
In-Reply-To: <Pine.LNX.4.10.10007021426400.773-100000@localhost.localdomain>
Message-ID: <XFMail.000703111524.plummer@iarc.fr>

David,

This is a problem with your X11 set up.  R 1.1.0 expects to load the
graphics font (Helvetica medium) in exactly the right size, but the
font server isn't delivering.

On Red Hat Linux, the Helvetica font comes with the XFree86-75dpi-fonts
package.  If you look in the configuration file for the font server,
(/etc/X11/fs/config) there should be two lines corresponding to 75dpi
in the catalogue list

        /usr/X11R6/lib/X11/fonts/75dpi:unscaled,
and
        /usr/X11R6/lib/X11/fonts/75dpi,

If the latter line is missing, then the font server will not be
able to scale up the font to the right size. Don't add it by hand
though, there is a special command for manipulating the catalogue
called "chkfntpath". Run the following two commands - as root
when you are not running X

/usr/sbin/chkfontpath -q -r /usr/X11R6/lib/X11/fonts/75dpi
/usr/sbin/chkfontpath -q -a /usr/X11R6/lib/X11/fonts/75dpi

The demo will now work, but the title will appear ugly and blocky
(because it is a bitmap font).  Certain web sites that insist on
using helvetica will look pretty ugly too.

Martyn

On 02-Jul-00 David Peebles wrote:
> Dear R users,
> 
> I've just upgraded from R 0.64.1 to 1.1.0 on a PC running Red Hat Linux
> 6.0.  When I ran demo(graphics), after the command:
> 
> title(main = "January Pie Sales", cex.main = 1.8, font.main = 1)
> 
> the plot did not materialise and I received this error message: 
> 
> Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1)
>: X11 font at size 22 could not be loaded
> 
> similarly, when I enter the following commands
> 
>> testdata <- read.table("test.dat", header=T)
>> pairs(testdata)
> 
> I get the following response:
> 
> Hit <Return> to see next plot: 
> Error in text.default(x, y, txt, cex = cex, font = font) : 
>       X11 font at size 16 could not be loaded
> In addition: Warning message: 
> freeing previous text buffer in GStrWidth 
> 
> These errors did not occur in my previous version of R.  Looking at the
> files ONEWS and NEWS that came with the 1.0.0 and 1.1.0 releases
> respectively, I notice that a great deal has changed with X11 font
> handling in R since version 0.64.1.  I confess that I am still rather
> inexperienced in the R system and so don't know whether these errors are
> because of R, my Linux setup or some combination of the two.
> 
> Any comments and/or advice would be gratefully received.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Mon Jul  3 13:15:22 2000
From: gb at stat.umu.se (gb)
Date: Mon, 3 Jul 2000 13:15:22 +0200 (CEST)
Subject: [R] Matching rows?
In-Reply-To: <Pine.LNX.4.21.0007030949270.10119-100000@pc16.stat.umu.se>
Message-ID: <Pine.LNX.4.21.0007031013360.10158-100000@pc16.stat.umu.se>


I have a matrix X with many rows and a vector y, which I want
to match against the rows of the matrix. I especially want
to know if there is a match or not. I can do this with 'all'
and a 'while' construct:

row.match <- function(y, X)
{
  found <- FALSE
  j <- 0
  while ( (!found) && (j < nrow(X)) )
    {
      j <- j + 1
      found <- all(y == X[j, ])
    }
  return ( found )
}

Two alternatives:

any( apply(X, 1, all.equal, y) == "TRUE")

any(apply(apply(X, 1, "==", y), 1, all))


When X is 53000x11 and y == X[53000, ]:

> unix.time(row.match(X, y))
[1] 5.18 0.07 5.34 0.00 0.00

> unix.time(any( apply(X, 1, all.equal, y) == "TRUE"))
[1] 122.08   2.34 126.28   0.00   0.00

> unix.time(any(apply(apply(X, 1, "==", y), 1, all)))
[1] 4.71 0.00 4.80 0.00 0.00

The last attempt is faster than row.match, but only in this 
"worst" case (and the double 'apply' looks ugly, but how can 
I avoid that?).

The problem with the apply approaches is apparently that all 
comparisons  must be made, while row.match quits as soon as
one match is found.

Question: What simple solution have I overlooked? 

A related problem: How do I find the unique rows of X?

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 Department of Statistics            fax: +46 90 786 6614
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Bill.Venables at cmis.csiro.au  Mon Jul  3 14:00:20 2000
From: Bill.Venables at cmis.csiro.au (Bill Venables)
Date: Mon, 03 Jul 2000 22:00:20 +1000
Subject: [R] Matching rows?
Message-ID: <3.0.32.20000703220018.0129ac00@pophost.nsw.cmis.csiro.au>

At 01:15 PM 03/07/00 +0200, gb wrote:
>
>I have a matrix X with many rows and a vector y, which I want
>to match against the rows of the matrix. I especially want
>to know if there is a match or not. I can do this with 'all'
>and a 'while' construct:
>
>row.match <- function(y, X)
>{
>  found <- FALSE
>  j <- 0
>  while ( (!found) && (j < nrow(X)) )
>    {
>      j <- j + 1
>      found <- all(y == X[j, ])
>    }
>  return ( found )
>}
>
>Two alternatives:
>
>any( apply(X, 1, all.equal, y) == "TRUE")
>
>any(apply(apply(X, 1, "==", y), 1, all))
>

Here is a third alternative.  It sets out to find which rows match the
vector rather than merely if there is a match.  It returns a vector of row
indices of the matching rows, which is empty if there are no matches, of
course:

> row.matches <- function(y, X) {
	i <- seq(nrow(X))
	j <- 0
	while(length(i) && (j <- j + 1) < ncol(X)) 
		i <- i[X[i, j] == y[j]]
	i
}

Here is a quick checkout

> X <- matrix(sample(0:1, 53000*11, rep=T), 53000, 11)
> y <- X[53000, ]
> dos.time(row.match(y, X))
[1] 1.48
> dos.time(row.matches(y, X))
[1] 0.16003

To check if a match exists:

> length(row.matches(y, X)) > 0

but you seem to be throwing away potentially useful information.


Bill Venables.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Mon Jul  3 14:37:34 2000
From: gb at stat.umu.se (gb)
Date: Mon, 3 Jul 2000 14:37:34 +0200 (CEST)
Subject: [R] Matching rows?
In-Reply-To: <3.0.32.20000703220018.0129ac00@pophost.nsw.cmis.csiro.au>
Message-ID: <Pine.LNX.4.21.0007031428580.10514-100000@pc16.stat.umu.se>

On Mon, 3 Jul 2000, Bill Venables wrote:

> At 01:15 PM 03/07/00 +0200, gb wrote:
> >
> >I have a matrix X with many rows and a vector y, which I want
> >to match against the rows of the matrix. I especially want
> >to know if there is a match or not. I can do this with 'all'
> >and a 'while' construct:
> >
> >row.match <- function(y, X)
> >{
> >  found <- FALSE
> >  j <- 0
> >  while ( (!found) && (j < nrow(X)) )
> >    {
> >      j <- j + 1
> >      found <- all(y == X[j, ])
> >    }
> >  return ( found )
> >}
> >
> >Two alternatives:
> >
> >any( apply(X, 1, all.equal, y) == "TRUE")
> >
> >any(apply(apply(X, 1, "==", y), 1, all))
> >
> 
> Here is a third alternative.  It sets out to find which rows match the
> vector rather than merely if there is a match.  It returns a vector of row
> indices of the matching rows, which is empty if there are no matches, of
> course:
> 
> > row.matches <- function(y, X) {
> 	i <- seq(nrow(X))
> 	j <- 0
> 	while(length(i) && (j <- j + 1) < ncol(X)) 
> 		i <- i[X[i, j] == y[j]]
> 	i
> }
> 
> Here is a quick checkout
> 
> > X <- matrix(sample(0:1, 53000*11, rep=T), 53000, 11)
> > y <- X[53000, ]
> > dos.time(row.match(y, X))
> [1] 1.48
> > dos.time(row.matches(y, X))
> [1] 0.16003
[...]
Amazing, and smart! "Looping" over a few columns istead of over 
many rows does the trick, I guess. I got even bigger differences 
on my machine.

One tiny error, though: The "while" statement should read

while(length(i) && (j <- j + 1) <= ncol(X))
                                 ^
I think. Thanks!                 |

G?ran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mriordan at nmrc.ucc.ie  Mon Jul  3 17:37:12 2000
From: mriordan at nmrc.ucc.ie (Margaret Riordan)
Date: Mon, 03 Jul 2000 16:37:12 +0100
Subject: [R] xlab not displayed when 'expression' is used
Message-ID: <3960B328.4E62EC54@nmrc.ucc.ie>

Hi all,
When using the function expression to label the axis of a plot. I found
that it labeled the
y-axis correctly but left no label on the x-axis.

The command I'm using is as follows
    plot(x,y,xlab=expression(v[junc]),ylab=expression(c[junc]))

Any help is much appreciated
Margaret Riordan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Mon Jul  3 17:59:13 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Mon, 3 Jul 2000 08:59:13 -0700 (PDT)
Subject: [R] xlab not displayed when 'expression' is used
In-Reply-To: <3960B328.4E62EC54@nmrc.ucc.ie>
Message-ID: <Pine.GSO.4.21.0007030852490.14214-100000@atlas.biostat.washington.edu>

On Mon, 3 Jul 2000, Margaret Riordan wrote:

> Hi all,
> When using the function expression to label the axis of a plot. I found
> that it labeled the
> y-axis correctly but left no label on the x-axis.
> 
> The command I'm using is as follows
>     plot(x,y,xlab=expression(v[junc]),ylab=expression(c[junc]))
> 


It's a bug in the C code. This is the third report of it. It's fixed in
R-patched, but on Windows you may prefer to wait for R1.1.1 rather than
compiling yourself.  

A possible work-around is to use mtext() to write the label.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From P.Connolly at hort.cri.nz  Mon Jul  3 23:47:09 2000
From: P.Connolly at hort.cri.nz (Patrick Connolly)
Date: Tue, 4 Jul 2000 09:47:09 +1200 (NZST)
Subject: [R] How to specify fonts
Message-ID: <200007032147.e63Ll9h11876@atlas.marc.cri.nz>

In Splus, if I wanted to use Bookman-Demi instead of the default
Helvetica, I would specify font = 18 as a graphical parameter for a
postscript printer.

In R it seems font can take only the values 1 to 4 which change only
the style but it's still Helvetica.  There's some great flexibility
using Hershey vector fonts, but it appears they are all mono-spaced.

I wish to use proportional spacing, with subscripts and Hershey vector
fonts.  Is that possible?  The help for text() or par() does not make
it clear to me.  Other ideas greatly appreciated.

Thanks


-- 
*************************************
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
*************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ihaka at stat.auckland.ac.nz  Tue Jul  4 00:26:18 2000
From: ihaka at stat.auckland.ac.nz (Ross Ihaka)
Date: Tue, 4 Jul 2000 10:26:18 +1200
Subject: [R] How to specify fonts
In-Reply-To: <200007032147.e63Ll9h11876@atlas.marc.cri.nz>; from Patrick Connolly on Tue, Jul 04, 2000 at 09:47:09AM +1200
References: <200007032147.e63Ll9h11876@atlas.marc.cri.nz>
Message-ID: <20000704102618.A25904@stat1.stat.auckland.ac.nz>

On Tue, Jul 04, 2000 at 09:47:09AM +1200, Patrick Connolly wrote:
> In Splus, if I wanted to use Bookman-Demi instead of the default
> Helvetica, I would specify font = 18 as a graphical parameter for a
> postscript printer.
> 
> In R it seems font can take only the values 1 to 4 which change only
> the style but it's still Helvetica.  There's some great flexibility
> using Hershey vector fonts, but it appears they are all mono-spaced.

There is a ``family'' argument to the postcript device driver.
You can choose "AvantGarde", "Bookman", "Courier", "Helvetica",
"Helvetica-Narrow", "NewCenturySchoolbook", "Palatino" or "Times".

Of course, sans-serif fonts are less distracting to the eye ...

> I wish to use proportional spacing, with subscripts and Hershey vector
> fonts.  Is that possible?  The help for text() or par() does not make
> it clear to me.  Other ideas greatly appreciated.

Ummm.   Could you be a bt more precise about what you are trying to do?

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From stranda at COFC.EDU  Tue Jul  4 19:10:40 2000
From: stranda at COFC.EDU (Allan Strand)
Date: 04 Jul 2000 13:10:40 -0400
Subject: [R] specifying a model formula on the fly
In-Reply-To: Douglas Bates's message of "Wed, 17 May 2000 08:19:05 -0500"
Message-ID: <86wvj1254f.fsf_-_@linum.cofc.edu>

Hi All,

I'm trying to specify the formula for a glm based upon the names in
the data.frame.  I always discard the first two variables in the frame
and the third will always be the only response variable.  The problem
appears because I would like to specify the rest of the variables of
the data.frame as independent variables in the formula.  I can't think
of a way to do this cleanly and maintain the names of the independent
variables in the glm object.  I know that I can use as.matrix to cast
the rest of the data.frame as a design matrix, but the glm object
returned has "as.matrix(x)" prepended to the variable names.  I
suspect that I could iterate across the results of name(x) and somehow
use quote() and eval() to solve this problem, but I cannot seem to
make it work.  Any suggestions would be greatly appreciated.

Cheers,
a.

-- 
Allan Strand,   Biology    http://linum.cofc.edu
College of Charleston      Ph. (843) 953-8085
Charleston, SC 29424       Fax (843) 953-5453

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Tue Jul  4 19:31:27 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Tue, 4 Jul 2000 10:31:27 -0700 (PDT)
Subject: [R] specifying a model formula on the fly
In-Reply-To: <86wvj1254f.fsf_-_@linum.cofc.edu>
Message-ID: <Pine.GSO.4.21.0007041024270.9745-100000@atlas.biostat.washington.edu>

On 4 Jul 2000, Allan Strand wrote:

> Hi All,
> 
> I'm trying to specify the formula for a glm based upon the names in
> the data.frame.  I always discard the first two variables in the frame
> and the third will always be the only response variable.  The problem
> appears because I would like to specify the rest of the variables of
> the data.frame as independent variables in the formula.  I can't think
> of a way to do this cleanly and maintain the names of the independent
> variables in the glm object.  I know that I can use as.matrix to cast
> the rest of the data.frame as a design matrix, but the glm object
> returned has "as.matrix(x)" prepended to the variable names.  I
> suspect that I could iterate across the results of name(x) and somehow
> use quote() and eval() to solve this problem, but I cannot seem to
> make it work.  Any suggestions would be greatly appreciated.


I'm not sure this is the right way to approach the problem, but this seems
to work (with the dataframe being called df)

nm<-names(df)

formula<-eval(parse(text=paste(nn[3],paste(nn[-(1:3)],collapse="+"),sep="~"))

glm(formula,df)


The drawback is that the call component of the glm object is
"glm(formula,df)" rather than giving the explicit formula.

An even more complicated way around this is to replace glm(formula,df) by

eval(substitute(glm(formula,data=data),list(formula=formula,data=quote(df))))

but at some point you start wondering if it is worth the effort.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tring at mail1.stofanet.dk  Tue Jul  4 23:06:56 2000
From: tring at mail1.stofanet.dk (Troels Ring)
Date: Tue, 04 Jul 2000 23:06:56 +0200
Subject: [R] nlme errors ?
Message-ID: <4.3.2.7.0.20000704230109.00e47c50@127.0.0.1>

Dear friends. Below is ouput directly from the help on qqnorm.lme.html
It do not seem to work as expected - on win98, R 1.1, although the 
regression is undertaken, so qqnorm
misunderstands, or what ?

library(nlme)
data(Orthodont)
fm1 <- lme(distance ~ age, Orthodont, random = ~ age | Subject)
# normal plot of standardized residuals by gender
qqnorm(fm1, ~ resid(., type = "p") | Sex, abline = c(0, 1))
Error in as.double.default(y) : (list) object cannot be coerced to vector 
type 14
# normal plots of random effects
qqnorm(fm1, ~ranef(.))
Error in as.double.default(y) : (list) object cannot be coerced to vector 
type 14


Best wishes

Troels
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000704/373fed26/attachment.html

From uli at biochem.dshs-koeln.de  Wed Jul  5 09:03:38 2000
From: uli at biochem.dshs-koeln.de (Uli Flenker; Raum 704)
Date: Wed, 5 Jul 2000 09:03:38 +0200 (CEST)
Subject: [R] nlme errors ?
In-Reply-To: <4.3.2.7.0.20000704230109.00e47c50@127.0.0.1>
Message-ID: <Pine.LNX.3.95.1000705085209.2378A-100000@pcinternet.biochem.dshs-koeln.de>

Troels,

I think the problem is just that most of the plotting functions of nlme
make heavy use of Trellis graphics (See paragraphs "Description", "Form"
and so on in help(qqnorm.lme)). Trellis devices are not supported by R. 


        Uli Flenker
        Institute of Biochemistry
        German Sports University Cologne
        Carl-Diem-Weg 6

        50933 Cologne / Germany

        Phone 0049/0221/4982-493


On Tue, 4 Jul 2000, Troels Ring wrote:

> Dear friends. Below is ouput directly from the help on qqnorm.lme.html
> It do not seem to work as expected - on win98, R 1.1, although the 
> regression is undertaken, so qqnorm
> misunderstands, or what ?
> 
> library(nlme)
> data(Orthodont)
> fm1 <- lme(distance ~ age, Orthodont, random = ~ age | Subject)
> # normal plot of standardized residuals by gender
> qqnorm(fm1, ~ resid(., type = "p") | Sex, abline = c(0, 1))
> Error in as.double.default(y) : (list) object cannot be coerced to vector 
> type 14
> # normal plots of random effects
> qqnorm(fm1, ~ranef(.))
> Error in as.double.default(y) : (list) object cannot be coerced to vector 
> type 14
> 
> 
> Best wishes
> 
> Troels

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel at bbdo-interone.de  Wed Jul  5 14:15:48 2000
From: jens.oehlschlaegel at bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Wed, 5 Jul 2000 14:15:48 +0200
Subject: [R] recommended linux environment for R
Message-ID: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>



Hello,

I'd like to ask whether there is a prefered linux distribution for use with
R (Suse, Redhat, Debian) and what fortran compiler is recommended (f77 or
f2c)?

Thank you



--
Dr. Jens Oehlschl?gel
Analyse
BBDO InterOne
Gr?nstr. 15
40212 D?sseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From didier at fmrib.ox.ac.uk  Wed Jul  5 14:20:28 2000
From: didier at fmrib.ox.ac.uk (Didier Leibovici)
Date: Wed, 05 Jul 2000 13:20:28 +0100
Subject: [R] function SAS dataset to R matrix (dataframe)
Message-ID: <3963280C.264B88FD@fmrib.ox.ac.uk>

Is there such a function (like sas.get for S ...)
to be able to convert a SAS dataset (PC one .sd2)
to a dataframe or matrix in R?
thanks
-- 
  Didier G. Leibovici    didier at fmrib.ox.ac.uk    +44 (0)1865 222 739
Image Analysis Group                          fax:+44 (0)1865 222 717
Oxford University, Centre For Functional Magnetic Resonance Imaging of
the Brain (FMRIB), John Radcliffe Hospital, Headington, Oxford OX3 9DU,
U.K
http://www.fmrib.ox.ac.uk/~didier/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mandevip at uaslp.mx  Wed Jul  5 08:29:58 2000
From: mandevip at uaslp.mx (Peter B. Mandeville)
Date: Wed, 05 Jul 2000 08:29:58
Subject: [R] Tukey.aov with split-plot designs
Message-ID: <3.0.5.16.20000705082958.2fdf5200@deimos.tc.uaslp.mx>

I am using R 1.1 with Redhat 6.2 and RW 1.001 with Win98 (the upkey doesn't
work on my IBM either as has been previously reported by others).

The function aov doesn't return either the residuals or the residual
degrees of freedom for split-plot designs. 

If you use the following code from Baron and Li's "Notes on the use of R
for psycology experiments and questionnaires"

data <- c(30,14,24,38,26,28,18,20,34,28,16,10,18,20,14,34,22,30,44,30)
Stv.df <-
data.frame(rt=data,subj=factor(rep(paste("subj",1:5,sep=""),4)),drug=factor(
rep(paste("drug",1:4,sep=""),c(5,5,5,5))))
res0 <- aov(rt~drug,data=Stv.df)
res1 <- aov(rt~drug+subj,data=Stv.df)
res2 <- aov(rt~drug+Error(subj/drug),data=Stv.df)

res0$resid works
resid(res0) works
res0$df.residual works

res1$resid works
resid(res1) works
res1$df.residual work

res2$resid doesn't work and reports NULL
resid(res2) doesn't work and reports NULL
res2$df.residual doesn't work and reports NULL

Is this an undocumented feature or an error?

It sure plays havoc with Dr. Bates' contribution of Tukey.aov which works
with res0 and res1 but doesn't work with res2 and reports 

Error in qtukey(p, nranges, nmeans, df, lower.tail, log.p) :
        Non-numeric argument to mathematical function

A simple but inelegant workaround is to input mse and df.residual as
function arguments in addition to the aov object. Does anyone have a better
solution?

Thank you,

Peter B.

--
Peter B. Mandeville                             mandevip at deimos.tc.uaslp.mx
Jefe del Depto. de Inform?tica y Bioestad?stica rpe1531 at pasteur.fmed.uaslp.mx 
Facultad de Medicine                            Tel: 48 26-23-45 ext. 232
Universidad Aut?noma de San Luis Potos?         Fax: 48 28-23-52
Av. V. Carranza 2405
Col. Los Filtros
Apartado Postal 145
San Luis Potos?, S.L.P.
78210 M?xico

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Wed Jul  5 15:34:23 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 05 Jul 2000 08:34:23 -0500
Subject: [R] nlme errors ?
In-Reply-To: "Uli Flenker; Raum 704"'s message of "Wed, 5 Jul 2000 09:03:38 +0200 (CEST)"
References: <Pine.LNX.3.95.1000705085209.2378A-100000@pcinternet.biochem.dshs-koeln.de>
Message-ID: <6rg0poem5c.fsf@franz.stat.wisc.edu>

"Uli Flenker; Raum 704" <uli at biochem.dshs-koeln.de> writes:

> I think the problem is just that most of the plotting functions of nlme
> make heavy use of Trellis graphics (See paragraphs "Description", "Form"
> and so on in help(qqnorm.lme)). Trellis devices are not supported by R. 

Yes, that is exactly the case.

To use the graphics from the original nlme library we would need to
have trellis-like functions available in R or to rewrite all the graphics
functions in nlme for R.  At one time there was talk of implementing
trellis-like functions in R but there does not seem to be much
progress on that.  It may be time to consider the "rewriting to use
existing R graphics facilities" approach.  Right now we are working on
the implementation of the numerical methods.  It is unlikely that
anything in the graphics area will be changed soon.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Wed Jul  5 15:38:11 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 05 Jul 2000 08:38:11 -0500
Subject: [R] function SAS dataset to R matrix (dataframe)
In-Reply-To: Didier Leibovici's message of "Wed, 05 Jul 2000 13:20:28 +0100"
References: <3963280C.264B88FD@fmrib.ox.ac.uk>
Message-ID: <6rbt0celz0.fsf@franz.stat.wisc.edu>

Didier Leibovici <didier at fmrib.ox.ac.uk> writes:

> Is there such a function (like sas.get for S ...)
> to be able to convert a SAS dataset (PC one .sd2)
> to a dataframe or matrix in R?

There is a package called "foreign" in the src/contrib/Devel section
of CRAN that can read data sets in the SAS XPORT format.  I don't know
of functions to read the SAS .sd2 format.

If you do convert the data set to the XPORT format and read it with
functions in the foreign package, be careful to check the last row.
Determining exactly what is the last row in a SAS data set is not
easy and those functions may get it wrong.  That is why the package is
in the Devel section.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Wed Jul  5 16:15:24 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 05 Jul 2000 16:15:24 +0200 (CEST)
Subject: [R] recommended linux environment for R
In-Reply-To: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>
Message-ID: <XFMail.000705161524.plummer@iarc.fr>

On 05-Jul-00 Jens Oehlschlgel wrote:
> Hello,
> 
> I'd like to ask whether there is a prefered linux distribution for use with
> R (Suse, Redhat, Debian) and what fortran compiler is recommended (f77 or
> f2c)?

R runs on a wide variety of platforms and there is no preferred one. Normally
differences between Linux distributions are very slight: at one point in time
they will have different versions of the same software. Packaged binaries of
R are provided for the three major Linux distributions that you mention.

There is currently a problem with dynamically loading Fortran on Red Hat 6.2,
so you should avoid this for the time being.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rdiazuri at students.wisc.edu  Wed Jul  5 09:08:10 2000
From: rdiazuri at students.wisc.edu (Ramon Diaz-Uriarte)
Date: Wed, 5 Jul 2000 09:08:10 +0200
Subject: [R] recommended linux environment for R
In-Reply-To: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>
References: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>
Message-ID: <0007050925370A.00361@ligarto>

I am no expert in this, so I'll just talk from my little experience. I think
you should find no problems with any of the three distributions you list.  I
started running R with Red Hat in my box without problems.  Next I switched to
SuSE (about 7 months ago) because of some development tools (e.g., ddd), and a
variety of other programs that I use, that come "pre-packaged" in SuSE. I've
been happily running R (and compiling from sources) using SuSE without any
trouble. And I am now thinking about switching to Debian (because it is a free
distribution).

I think that use of R per se will probably not allow you to decide between the
three distributions you list, and you'll need some other criteria.


Ramon





On Wed, 05 Jul 2000, Jens Oehlschlgel wrote:
> Hello,
> 
> I'd like to ask whether there is a prefered linux distribution for use with
> R (Suse, Redhat, Debian) and what fortran compiler is recommended (f77 or
> f2c)?
> 
> Thank you
> 
> 
> 
> --
> Dr. Jens Oehlschlgel
> Analyse
> BBDO InterOne
> Grnstr. 15
> 40212 Dsseldorf
> 
> Tel.: +49 (0)211 1379-187
> Fax.: +49 (0)211 1379-461
> http://www.bbdo-interone.de
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-- 
Ramn Daz-Uriarte
Dept. Zoology and Statistics
University of Wisconsin-Madison
Madison, WI 53706-1381

email: rdiazuri at students.wisc.edu
(NOTE: starting 15-July-2000 new email:
ramon-diaz at teleline.es)
phone: 608-238-8041
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at psy.uni-muenchen.de  Wed Jul  5 16:40:33 2000
From: garbade at psy.uni-muenchen.de (Sven Garbade)
Date: Wed, 05 Jul 2000 16:40:33 +0200
Subject: [R] recommended linux environment for R
References: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>
Message-ID: <396348E1.B57F4ADB@psy.uni-muenchen.de>

Jens Oehlschl?gel wrote:
> 
> Hello,
> 
> I'd like to ask whether there is a prefered linux distribution for use with
> R (Suse, Redhat, Debian) 

I think it?s up to you which Distribution you prefer. If you use Debian,
there are no R-contrib *.deb packages, you have to install the
source-packages with the R tool "INSTALL" (I think this is the
recommended way). For Suse there are available rpms, which also (should)
work with RedHat.

>and what fortran compiler is recommended (f77 or
> f2c)?

f2c is not a compiler. It converts fortran code to c code. You need one
of this if you want to compile R on your own. The configure script looks
for a fortran compiler and if it doesn?t find one, it searches for f2c.
Don?t know if you need this when installing one of the R-binary
distributions. But you also need f77 or f2c to install a source contrib
package. I?m using f2c and havn?t any trouble yet.

Bye, Sven
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Wed Jul  5 17:21:29 2000
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 5 Jul 2000 17:21:29 +0200 (CEST)
Subject: [R] recommended linux environment for R
In-Reply-To: <396348E1.B57F4ADB@psy.uni-muenchen.de>
References: <000701bfe67a$c1a5cb50$c10616ac@oehl.bbdo.de>
	<396348E1.B57F4ADB@psy.uni-muenchen.de>
Message-ID: <14691.21113.32828.69071@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 05 Jul 2000 16:40:33 +0200,
>>>>> Sven Garbade (SG) wrote:

SG> Jens Oehlschl?gel wrote:
>> 
>> Hello,
>> 
>> I'd like to ask whether there is a prefered linux distribution for use with
>> R (Suse, Redhat, Debian) 

SG> I think it?s up to you which Distribution you prefer. If you use Debian,
SG> there are no R-contrib *.deb packages, you have to install the
SG> source-packages with the R tool "INSTALL" (I think this is the
SG> recommended way).


Actually, the function install.packages() in R itself (which is a
wrapper to the R INSTALL mechanism) is probably even easier especially
if you are connected to the internet, as it downloads the packages
automatically from CRAN and installs them. This function (and friends
like update.packages()) made Doug Bates stop building contrib .deb's :-)

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amorgan at mitre.org  Wed Jul  5 17:45:18 2000
From: amorgan at mitre.org (amorgan)
Date: Wed, 05 Jul 2000 11:45:18 -0400
Subject: [R] filtering values
Message-ID: <3963580E.E779827E@mitre.org>

I was wondering if there is a simple way to filter out a bunch of
specific vales from a vector (eg zero).

Also, is there a way to create a null vector?  What I mean by this is
that if I declare a vector vector <- NA, it is a vector with [NA].  I
want an empty vector, so that I can append to it later.

Thanks

Alex

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Wed Jul  5 17:49:04 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 5 Jul 2000 08:49:04 -0700 (PDT)
Subject: [R] filtering values
In-Reply-To: <3963580E.E779827E@mitre.org>
Message-ID: <Pine.GSO.4.21.0007050847321.1271-100000@atlas.biostat.washington.edu>

On Wed, 5 Jul 2000, amorgan wrote:

> I was wondering if there is a simple way to filter out a bunch of
> specific vales from a vector (eg zero).

x[x!=42] removes all the 42s 
x[!is.na(x)] removes all the NAs

 
> Also, is there a way to create a null vector?  What I mean by this is
> that if I declare a vector vector <- NA, it is a vector with [NA].  I
> want an empty vector, so that I can append to it later.

numeric(0) is a vector of length 0. Remember that repeatedly appending is
slower than creating a vector and then putting things in it.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Wed Jul  5 23:41:23 2000
From: kjetilh at umsanet.edu.bo (halvorsen)
Date: Wed, 05 Jul 2000 17:41:23 -0400
Subject: [R] Scoping problem
Message-ID: <3963AB83.BE4DEBCE@umsanet.edu.bo>

Hola!

I have the following simple function:

> testcar
function(pow){
           ob <- glm(Pound~CG+Age+Vage,data=car,weights=No,
                     subset=No>0,family=quasi(link=power(pow),var=mu^2))

           deviance(ob)
}
But trying to run it gives:

> testcar(1/2)
Error in power(pow) : Object "pow" not found

I have tried to use debug on testcar, but what I can find out is only
that pow
is invisible from within glm. Is there a way to find in which
environment
pow belongs, so as to get at it with "get" inside power?

Kjetil Halvorsen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul  6 00:05:49 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 5 Jul 2000 15:05:49 -0700 (PDT)
Subject: [R] Scoping problem
In-Reply-To: <3963AB83.BE4DEBCE@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.21.0007051454290.1271-100000@atlas.biostat.washington.edu>

On Wed, 5 Jul 2000, halvorsen wrote:

> Hola!
> 
> I have the following simple function:
> 
> > testcar
> function(pow){
>            ob <- glm(Pound~CG+Age+Vage,data=car,weights=No,
>                      subset=No>0,family=quasi(link=power(pow),var=mu^2))
> 
>            deviance(ob)
> }
> But trying to run it gives:
> 
> > testcar(1/2)
> Error in power(pow) : Object "pow" not found

'pow' isn't found because quasi() is looking for it in a strange place.  
Normally you would expect this sort of syntax to work, but the family
functions do some tricky things to allow you to specify things with or
without quotes and without or without parentheses.

I suspect this might count as a bug.

In any case, you can fix it by doing
eval(substitute(glm(Pound~CG+Age+Vage,data=car,weights=No subset=No>0, 
family=quasi(link=power(pow),var=mu^2))))

You could also use power(get(pow,env=parent.frame(2))), but that is more
complicated and more likely to break if something changes.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul  6 00:19:59 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 5 Jul 2000 15:19:59 -0700 (PDT)
Subject: [R] Scoping problem
In-Reply-To: <Pine.GSO.4.21.0007051454290.1271-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.GSO.4.21.0007051518280.1271-100000@atlas.biostat.washington.edu>

On Wed, 5 Jul 2000, Thomas Lumley wrote:

> On Wed, 5 Jul 2000, halvorsen wrote:
> 
> > Hola!
> > 
> > I have the following simple function:
> > 
> > > testcar
> > function(pow){
> >            ob <- glm(Pound~CG+Age+Vage,data=car,weights=No,
> >                      subset=No>0,family=quasi(link=power(pow),var=mu^2))
> > 
> >            deviance(ob)
> > }
> > But trying to run it gives:
> > 
> > > testcar(1/2)
> > Error in power(pow) : Object "pow" not found
> 
> 'pow' isn't found because quasi() is looking for it in a strange place.  
> Normally you would expect this sort of syntax to work, but the family
> functions do some tricky things to allow you to specify things with or
> without quotes and without or without parentheses.
> 
> I suspect this might count as a bug.
> 
> In any case, you can fix it by doing
> eval(substitute(glm(Pound~CG+Age+Vage,data=car,weights=No subset=No>0, 
> family=quasi(link=power(pow),var=mu^2))))
> 

As an additional note. This probably won't work if the argument to testcar
is a variable.

A more reliable version is 
 eval(substitute(glm(Pound~CG+Age+Vage,data=car,weights=No subset=No>0, 
 family=quasi(link=power(pow),var=mu^2)),list(pow=pow)))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at crick.protogene.com  Thu Jul  6 00:38:30 2000
From: sarthur at crick.protogene.com (Steve Arthur)
Date: Wed, 5 Jul 2000 15:38:30 -0700 (PDT)
Subject: [R] couldn't find function "..."
In-Reply-To: <200006170201.EAA18271@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.21.0007051502290.4867-100000@crick.protogene.com>

Hi,

R 1.0.1, on Linux(mandrake/RedHat).

I am trying to write my first function using R and I need help figuring
out the error I have indicated in the Subject line above.  The purpose
of the function is not to "wow" anyone, but just to serve as a stepping
stone so that I might write more complicated functions in the future.

First I created my function named "CIfunc" and saved into the current
directory using the "save" command.

function(Mean, SD, N, Sig) {

   if (N > 30) { Zscore <- pnorm(Sig)} else {Zscore <- pt(Sig,N-1)}
   Zscore

   UpperCI <- Mean + Zscore * SD / sqrt(N)
   UpperCI

   LowerCI <- Mean - Zscore * SD / sqrt(N)
   LowerCI

}

...with no error.

Next I write the function call "testcall":

testcall <- call('CIfunc', prescan10$F532Mean, prescan10$F532SD,
prescan10$FPixels, 0.95)

...with no error.

testcall CIfunc(c(189, 238, 363, 869, 585, 350, 3624, 290, 436, 517),
c(63, 58, 66, 127, 78, 46, 1452, 72, 83, 55), c(120, 120, 120, 120, 120,
120, 120, 120, 120, 120), 0.95)

But when I try to evaluate the function "CIfunc":

eval(testcall)

I get the error:

"Error in eval(expr, envir, enclos) : couldn't find function "CIfunc""

As I understand it, I saved the "CIfunc" in the directory I opened R from.

Do I need to set an environment variable to use functions in R?

steve 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jul  6 01:08:20 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Jul 2000 01:08:20 +0200
Subject: [R] couldn't find function "..."
In-Reply-To: Steve Arthur's message of "Wed, 5 Jul 2000 15:38:30 -0700 (PDT)"
References: <Pine.LNX.4.21.0007051502290.4867-100000@crick.protogene.com>
Message-ID: <x2d7kstbtn.fsf@blueberry.kubism.ku.dk>

Steve Arthur <sarthur at crick.protogene.com> writes:

> First I created my function named "CIfunc" and saved into the current
> directory using the "save" command.
...
> As I understand it, I saved the "CIfunc" in the directory I opened R from.
> 
> Do I need to set an environment variable to use functions in R?

No, but you need to understand that R uses a workspace based model.
Generally you just define objects in the current workspace and use
them, and you can save them on closing and restore upon restart. You
can also save objects (potentially several) to a file, but it is not
reloaded automatically, you have to use load() to get the objects
back. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul  6 01:16:25 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 5 Jul 2000 16:16:25 -0700 (PDT)
Subject: [R] couldn't find function "..."
In-Reply-To: <Pine.LNX.4.21.0007051502290.4867-100000@crick.protogene.com>
Message-ID: <Pine.GSO.4.21.0007051609050.1271-100000@atlas.biostat.washington.edu>

On Wed, 5 Jul 2000, Steve Arthur wrote:

> Hi,
> 
> R 1.0.1, on Linux(mandrake/RedHat).
> 
> I am trying to write my first function using R and I need help figuring
> out the error I have indicated in the Subject line above.  The purpose
> of the function is not to "wow" anyone, but just to serve as a stepping
> stone so that I might write more complicated functions in the future.
> 
> First I created my function named "CIfunc" and saved into the current
> directory using the "save" command.
> 
> function(Mean, SD, N, Sig) {
> 
>    if (N > 30) { Zscore <- pnorm(Sig)} else {Zscore <- pt(Sig,N-1)}
>    Zscore
> 
>    UpperCI <- Mean + Zscore * SD / sqrt(N)
>    UpperCI
> 
>    LowerCI <- Mean - Zscore * SD / sqrt(N)
>    LowerCI
> 
> }
> 
> ...with no error.
> 
> Next I write the function call "testcall":
> 
> testcall <- call('CIfunc', prescan10$F532Mean, prescan10$F532SD,
> prescan10$FPixels, 0.95)
> 
> ...with no error.
> 
> testcall CIfunc(c(189, 238, 363, 869, 585, 350, 3624, 290, 436, 517),
> c(63, 58, 66, 127, 78, 46, 1452, 72, 83, 55), c(120, 120, 120, 120, 120,
> 120, 120, 120, 120, 120), 0.95)
> 
> But when I try to evaluate the function "CIfunc":
> 
> eval(testcall)
> 
> I get the error:
> 
> "Error in eval(expr, envir, enclos) : couldn't find function "CIfunc""
> 
> As I understand it, I saved the "CIfunc" in the directory I opened R from.
> 
> Do I need to set an environment variable to use functions in R?
> 

Unless you're trying to do something very complicated that I don't
understand this is a lot simpler than you're making it.

You don't have to write the function to a file. You don't need to use
call(), and you don't need eval().

You just want to type

CIfunc(prescan10$F532Mean, prescan10$F532SD, prescan10$FPixels, 0.95)


It's not clear why your function didn't work, but I suspect it's what
Peter Dalgaard suggested.  You need to have the function defined in the
workspace -- having it on disk doesn't help at all.

The point of call() and eval() is to allow functions to manipulate other
functions and expressions, which is an important part of the language,
but probably not an ideal subject for your first function. :)


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rdiazuri at students.wisc.edu  Wed Jul  5 18:09:52 2000
From: rdiazuri at students.wisc.edu (Ramon Diaz-Uriarte)
Date: Wed, 5 Jul 2000 18:09:52 +0200
Subject: [R] nlme errors ?
In-Reply-To: <6rg0poem5c.fsf@franz.stat.wisc.edu>
References: <Pine.LNX.3.95.1000705085209.2378A-100000@pcinternet.biochem.dshs-koeln.de> <6rg0poem5c.fsf@franz.stat.wisc.edu>
Message-ID: <0007051836450K.00330@ligarto>

Just in case these plotting functions are of help to anybody, here they go. I
wrote them a while ago, and use them routinely as diagnostics for linear mixed
effects models (most of them follow ideas in ch. 4 of Pinheiro & Bates's
"Mixed-effects models in S and S-Plus").  I know they are not very well
written and there is a lot of room for improvement (in fact, I never intended
for them to be seen by anybody but me, and thus being sloppy didn't
have to embarrass me...); for instance, the data set needs to be attached for
the plots to work, some of them don't work if you have missing values, and 
the par settings are changed; these are all easy to fix (but I am lazy...).

Ramn

***************

lme.plot1 <- function(fit, resid="p",...){
### resids by fitted, qqnorm of resids, observed by fitted
  xx <- attributes(terms.formula(fit$call[[2]]))$variables[[2]]
  par(ask = TRUE)
  plot( resid(fit,type = resid) ~ fitted(fit), xlab="Fitted values", las=1)
  qqnorm(resid(fit,type = resid), las=1)
  plot( eval(xx) ~ fitted(fit), ylab = deparse(xx), xlab = "Fitted values", las = 1)
  qqnorm( ranef(fit, level = length(attributes(ranef(fit))$grpNames)), main = "Random effects")
  par(ask = FALSE)

}


lme.plot2 <- function(fit, resid="p", jit.am = 0){
###to plot residuals vs. levels of predictors
  zz <- attributes(terms.formula(fit$call[[2]]))$variables
  ## print("there are a bunch of plots, keep pressing")
  ## print(c("to see all; total number of plots are ",(length(zz) - 2) ))
  par(ask = TRUE)
  par(las = 1)
  for (i in 1:(length(zz) - 2)) {
    plot( resid(fit,type = resid) ~ jitter(as.numeric(eval(zz[[i + 2]])), amount=jit.am), xlab = deparse(zz[[i + 2]]))
    abline(h = 0, lty = 2)
  }
  par(ask = FALSE)
}


lme.plot3 <- function(fit, resid = "p",...){
### to plot residuals vs. fitted for each level of the predictors with coplot
  zz <- attributes(terms.formula(fit$call[[2]]))$variables
  par(ask = TRUE)
  par(las = 1)
  for (i in 1:(length(zz) - 2)) coplot(resid(fit,type = resid) ~ fitted(fit)|eval(zz[[i+2]]), xlab=deparse(zz[[i + 2]]), ...)
  par(ask = FALSE)
}

*******************


-- 
Ramn Daz-Uriarte
Dept. Zoology and Statistics
University of Wisconsin-Madison
Madison, WI 53706-1381

email: rdiazuri at students.wisc.edu
(NOTE: starting 15-July-2000 new email:
ramon-diaz at teleline.es)
phone: 608-238-8041
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ray.Brownrigg at mcs.vuw.ac.nz  Thu Jul  6 05:16:41 2000
From: Ray.Brownrigg at mcs.vuw.ac.nz (Ray Brownrigg)
Date: Thu, 6 Jul 2000 15:16:41 +1200 (NZST)
Subject: [R] R-1.1.0 on Alpha?
Message-ID: <200007060316.PAA13977@circa.mcs.vuw.ac.nz>


Has anyone succeeded in compiling R-1.1.0 on a Digital (Compaq) Alpha
running OSF4.0F (or E)?  Everything seems to compile OK (except the
frequent "Warning:  Unresolved:" at link time - this threw me off the
scent for a while!), but then at run time I get:

Fatal error: The X11 shared library could not be loaded.
  The error was dlopen: cannot load /am/aqua/home/ray/S/R/osf1/R-1.1.0/bin/R_X11.so 

The file does exist, so I am at a loss as to what to try next:

circa>  ls -al /am/aqua/home/ray/S/R/osf1/R-1.1.0/bin/R_X11.so
-rw-r--r--   1 ray      staff     278528 Jul  6 11:48 /am/aqua/home/ray/S/R/osf1/R-1.1.0/bin/R_X11.so
circa>

I have compiled with both gcc/g77 and cc/f77 with no difference.

As far as I can tell, gdb does not help, since the program hasn't
started running yet.

Any ideas?

Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From markhall at gol.com  Thu Jul  6 08:07:52 2000
From: markhall at gol.com (markhall@gol.com)
Date: Thu, 6 Jul 2000 15:07:52 +0900
Subject: Fwd: Re: [R] couldn't find function ...
Message-ID: <20000706060752.3E877414F@smtp03.mail.gol.com>


Forwarded Message:

> To: Steve Arthur <sarthur at crick.protogene.com>

> From: Thomas Lumley <thomas at biostat.washington.edu>

> Subject: Re: [R] couldn't find function "..."

> Date: Wed, 5 Jul 2000 16:16:25 -0700 (PDT)

> -----

> On Wed, 5 Jul 2000, Steve Arthur wrote:
> 
> > Hi,
> > 
> > R 1.0.1, on Linux(mandrake/RedHat).
> > 
> > I am trying to write my first function using R and I need help figuring
> > out the error I have indicated in the Subject line above.  The purpose
> > of the function is not to "wow" anyone, but just to serve as a stepping
> > stone so that I might write more complicated functions in the future.
> > 
> > First I created my function named "CIfunc" and saved into the current
> > directory using the "save" command.
> > 
> > function(Mean, SD, N, Sig) {
> > 
> >    if (N > 30) { Zscore <- pnorm(Sig)} else {Zscore <- pt(Sig,N-1)}
> >    Zscore
> > 
> >    UpperCI <- Mean + Zscore * SD / sqrt(N)
> >    UpperCI
> > 
> >    LowerCI <- Mean - Zscore * SD / sqrt(N)
> >    LowerCI
> > 
> > }
> > 
> > ...with no error.
> > 
> > Next I write the function call "testcall":
> > 
> > testcall <- call('CIfunc', prescan10$F532Mean, prescan10$F532SD,
> > prescan10$FPixels, 0.95)
> > 
> > ...with no error.
> > 
> > testcall CIfunc(c(189, 238, 363, 869, 585, 350, 3624, 290, 436, 517),
> > c(63, 58, 66, 127, 78, 46, 1452, 72, 83, 55), c(120, 120, 120, 120, 120,
> > 120, 120, 120, 120, 120), 0.95)
> > 
> > But when I try to evaluate the function "CIfunc":
> > 
> > eval(testcall)
> > 
> > I get the error:
> > 
> > "Error in eval(expr, envir, enclos) : couldn't find function "CIfunc""
> > 
> > As I understand it, I saved the "CIfunc" in the directory I opened R from.
> > 
> > Do I need to set an environment variable to use functions in R?
> > 
> 
> Unless you're trying to do something very complicated that I don't
> understand this is a lot simpler than you're making it.
> 
> You don't have to write the function to a file. You don't need to use
> call(), and you don't need eval().
> 
> You just want to type
> 
> CIfunc(prescan10$F532Mean, prescan10$F532SD, prescan10$FPixels, 0.95)
> 
> 
> It's not clear why your function didn't work, but I suspect it's what
> Peter Dalgaard suggested.  You need to have the function defined in the
> workspace -- having it on disk doesn't help at all.
> 
> The point of call() and eval() is to allow functions to manipulate other
> functions and expressions, which is an important part of the language,
> but probably not an ideal subject for your first function. :)
> 
> 
> 	-thomas
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
-
> r-help mailing list -- Read <a href="http://www.ci.tuwien.ac.at/~hornik/R/R-
FAQ.html">http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html</a>
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> 
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fm3a004 at math.uni-hamburg.de  Thu Jul  6 14:29:24 2000
From: fm3a004 at math.uni-hamburg.de (Christian Hennig)
Date: Thu, 6 Jul 2000 14:29:24 +0200 (CEST)
Subject: [R] recommended linux environment for R
In-Reply-To: <396348E1.B57F4ADB@psy.uni-muenchen.de>
Message-ID: <Pine.LNX.3.96.1000706142014.20671G-100000@TILL.math.uni-hamburg.de>

Hello,

> Jens Oehlschlgel wrote:
> > 
> > Hello,
> > 
> > I'd like to ask whether there is a prefered linux distribution for use with
> > R (Suse, Redhat, Debian) 
> >and what fortran compiler is recommended (f77 or
> > f2c)?
> 
> f2c is not a compiler. It converts fortran code to c code. You need one
> of this if you want to compile R on your own. The configure script looks
> for a fortran compiler and if it doesnt find one, it searches for f2c.
> Dont know if you need this when installing one of the R-binary
> distributions. But you also need f77 or f2c to install a source contrib
> package. Im using f2c and havnt any trouble yet.

I needed f2c (or some associated libraries) to get the add-on package
mclust to start. (Compilation did work, but some functions did not.)
g77/f77 did not suffice, neither on Solaris, nor on SuSe Linux.

Perhaps this changed in the meantime, since this experience is almost a year
old. I would appreciate if all packages could be compiled by use of the same
standard compilers.

Christian

***

Christian Hennig
Fachbereich Mathematik - SPST
 (Schwerpunkt Mathematische Statistik und Stochastische Prozesse,
 Zentrum fuer Modellierung und Simulation)
Bundesstrasse 55
D-20146 Hamburg
Tel: x40/42838 4907, privat x40/631 62 79
hennig at math.uni-hamburg.de
http://www.math.uni-hamburg.de/home/hennig/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Thu Jul  6 14:51:19 2000
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Thu, 6 Jul 2000 14:51:19 +0200 (CEST)
Subject: [R] Scoping problem?
Message-ID: <Pine.LNX.4.21.0007061439090.27891-100000@swipc30.swi.psy.uva.nl>


I have to admit, I'm not too familiar with all the scoping issues in R.
Luckily, I managed to write scripts/functions that didn't touch the hairy
scoping details. However, in a couple of functions I'm writing now, I think
I stumbled upon a problem related to scoping.

To demonstrate, the following code results in a "Error in paste("png::",
filename, sep = "") : Object "fn" not found" error. 

plot.and.save <- function(s) {
  plot(1:s,main="Just a demo")
  fn <- paste("filename-with-variable",s,".png",sep="")
  dev.print(png,filename=fn,width=500,height=500)
}

If fn is defined in the "global scope", the function does not complain
about undefined variables. However, in the scripts I'm writing, I would
like to be able to construct the filename "online". Can anyone suggest a
solution to, or explain how I should approach this problem?

Thanks,
   Hedderik.

P.S. I'm using the following version of R:

> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R                


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From stephen at cogsci.ed.ac.uk  Thu Jul  6 17:01:30 2000
From: stephen at cogsci.ed.ac.uk (Stephen Eglen)
Date: Thu, 6 Jul 2000 16:01:30 +0100
Subject: [R] R 1.1.0 dev.print()
Message-ID: <25789.200007061501@miller.cogsci.ed.ac.uk>


Hi, I just upgraded to 1.1.0 from 1.0.1 this morning on my OSF/1
machine.  I now have problems with the following code:

%E /tmp 43% R --vanilla
Version 1.1.0  (June 15, 2000)
...

> test2 <- function ()
{
  plot(runif(30))
  ofile <- "/tmp/newfile.ps"
  dev.print(file = ofile)
}

+ + + + + > > test2()
Error in device(...) : Object "ofile" not found


However, if I just write the filename directly into the call to
dev.print() rather than using a variable name, it works okay:


> test1 <- function ()
{
  plot(runif(30))
  dev.print(file = "/tmp/newfile.ps")
}

+ + + + > > test1()
X11 
  2 

I just checked, and test1() works fine on R-1.0.1 - what am I doing wrong?

Thanks, Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Thu Jul  6 17:36:28 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 6 Jul 2000 17:36:28 +0200 (CEST)
Subject: [R] R 1.1.0 dev.print() & dev.copy2eps -- bug{let}
In-Reply-To: <25789.200007061501@miller.cogsci.ed.ac.uk>
References: <25789.200007061501@miller.cogsci.ed.ac.uk>
Message-ID: <14692.42876.883111.553842@gargle.gargle.HOWL>

>>>>> "StEgl" == Stephen Eglen <stephen at cogsci.ed.ac.uk> writes:

    StEgl> Hi, I just upgraded to 1.1.0 from 1.0.1 this morning on my OSF/1
    StEgl> machine.  I now have problems with the following code:

    StEgl> %E /tmp 43% R --vanilla
    StEgl> Version 1.1.0  (June 15, 2000)
    StEgl> ...

    >> test2 <- function ()
    {
    plot(runif(30))
    ofile <- "/tmp/newfile.ps"
    dev.print(file = ofile)
    }

    StEgl> + + + + + > > test2()
    StEgl> Error in device(...) : Object "ofile" not found


    StEgl> However, if I just write the filename directly into the call to
    StEgl> dev.print() rather than using a variable name, it works okay:


    >> test1 <- function ()
    {
     plot(runif(30))
     dev.print(file = "/tmp/newfile.ps")
    }

    StEgl> + + + + > > test1()
    StEgl> X11 
    StEgl> 2 

    StEgl> I just checked, and test1() works fine on R-1.0.1 
			       -------
you mean  test2();  test1() works on both, right?!

    StEgl> - what am I doing wrong?
nothing, "of course".
You found a bug, and hence I'm CC'ing to R-bugs.

Maybe, dev.print() is not what you should  have been using in the first place,
but rather dev.copy() directly which will probably solve your problem.

NOTE:  dev.print() has been extensively re-worked (for 1.1.0) in order to
       be "smart", e.g.,. to send the current plot to the printer by default
       depending on getOption("printer") and other things, and to allow
       other uses.  Hence, it works on the call and uses eval() ...

It seems is must become even smarter (or less tricky and more robust)...
       
BTW, the same applies to the new  dev.copy2eps() function which falls in
the same pit in its trickyness of using eval(...) :

  > tst3 <- function(outfile) { dev.copy2eps(file = outfile) }
  > tst3("/tmp/my2.eps")
  Error in device(...) : Object "outfile" not found

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From phurd at uts.cc.utexas.edu  Thu Jul  6 19:05:55 2000
From: phurd at uts.cc.utexas.edu (Pete Hurd)
Date: Thu, 6 Jul 2000 12:05:55 -0500 (CDT)
Subject: [R] factorial(), modulus()
Message-ID: <Pine.OSF.4.21.0007061203350.17991-100000@curly.cc.utexas.edu>

Dear R friends,

I was wondering if there were factorial and modulus functions out there
that I've somehow overlooked?

-P.

-- 
Peter L. Hurd, Ph.D.
phurd at uts.cc.utexas.edu
http://www.zo.utexas.edu/research/phurd                 fax 512.471-3878
Section of Integrative Biology, University of Texas, Austin TX 78712 USA


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul  6 19:19:33 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 6 Jul 2000 10:19:33 -0700 (PDT)
Subject: [R] factorial(), modulus()
In-Reply-To: <Pine.OSF.4.21.0007061203350.17991-100000@curly.cc.utexas.edu>
Message-ID: <Pine.GSO.4.21.0007061014290.969-100000@atlas.biostat.washington.edu>

On Thu, 6 Jul 2000, Pete Hurd wrote:

> Dear R friends,
> 
> I was wondering if there were factorial and modulus functions out there
> that I've somehow overlooked?

There's  gamma and lgamma for factorials

gamma(x+1) is x! and lgamma(x+1) is log(x!).  Also choose() and
lchoose() for the binomial coefficients.

x %% y does x mod y.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From venables at acland.qld.cmis.csiro.au  Fri Jul  7 02:44:08 2000
From: venables at acland.qld.cmis.csiro.au (Bill Venables)
Date: Fri, 07 Jul 2000 10:44:08 +1000
Subject: [R] factorial(), modulus() 
In-Reply-To: Your message of "Thu, 06 Jul 2000 10:19:33 MST."
             <Pine.GSO.4.21.0007061014290.969-100000@atlas.biostat.washington.edu> 
Message-ID: <200007070044.KAA07435@snowy.nsw.cmis.CSIRO.AU>

> On Thu, 6 Jul 2000, Pete Hurd wrote:
> 
> > Dear R friends,
> > 
> > I was wondering if there were factorial and modulus functions out there
> > that I've somehow overlooked?
> 
> There's  gamma and lgamma for factorials
> 
> gamma(x+1) is x! and lgamma(x+1) is log(x!).  Also choose() and
> lchoose() for the binomial coefficients.
> 
> x %% y does x mod y.
> 

Isn't that the "modulo" function?  The modulus function I have always
thought to be the extension of abs() that covers complex numbers, i.e.
Mod():

> Mod(3+4*1i)
[1] 5

Anyway, they are both there...

Bill.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From etptupaf at bs.ehu.es  Fri Jul  7 08:59:54 2000
From: etptupaf at bs.ehu.es (F.Tusell)
Date: Fri, 7 Jul 2000 08:59:54 +0200
Subject: [R] R-1.1.0 on Alpha?
Message-ID: <200007070659.IAA01615@agesi.bs.ehu.es>

> Has anyone succeeded in compiling R-1.1.0 on a Digital (Compaq) Alpha 
> running OSF4.0F (or E)? Everything seems to compile OK (except the 
> frequent "Warning: Unresolved:" at link time - this threw me off the 
> scent for a while!), but then at run time I get: 

  I had the same problem, but under Linux (not under OSF). In my case, 
  I would get missing symbols that were exported by R-X11.so, I seem to 
  recall. It seems that my machine (a DS-10, 21264 ev6 chip) was not
  being properly recognized. I got help from several individuals: below
  is a copy of one message I kept for future reference, which may
  or may not be of assistance in your situation. Prof. Brian Ripley
  told me that changes had been made by Kurt Hornik to fix the problem
  in the next release.

  Hope this helps.


  ft.
-- 
Fernando TUSELL                                 e-mail:
Departamento de Econometr?a y Estad?stica           etptupaf at bs.ehu.es 
Facultad de CC.EE. y Empresariales              Tel:  (+34)94.601.3733
Avenida Lendakari Aguirre, 83                   Fax:  (+34)94.601.3754
E-48015 BILBAO  (Spain)                         Secr: (+34)94.601.3740
PGP: finger etptupaf at bsdx01.bs.ehu.es           http://agesi.bs.ehu.es
----------------------------------------------------------------------



> Date: Wed, 21 Jun 2000 10:53:52 +0200
> From: "F.Tusell" <etptupaf at bs.ehu.es>
> To: ntakebay at bio.indiana.edu
> CC: p.dalgaard at biostat.ku.dk, ripley at stats.ox.ac.uk
> Subject: Re: [R] Compiling R on an Alpha
> User-Agent: EMIKO/1.13.9 (Euglena tripteris) FLIM/1.13.2 (Kasanui) APEL/10.2 
Emacs/20.6 (i386-debian-linux-gnu) (with unibyte mode)
> X-MIME-Autoconverted: from quoted-printable to 8bit by toucan.stats.ox.ac.uk 
id JAA18289
> 
> 
> >  Date: Tue, 20 Jun 2000 12:33:23 -0500 (EST)
> >  From: Naoki Takebayashi <ntakebay at bio.indiana.edu>
> >  Content-Type: TEXT/PLAIN; charset=US-ASCII
> >  
> >  >    Yes, it is 21264, ev6.
> >  
> >  I looked into the problem in more detail.
> >  As I suspected, the problem is that ./configure can't correctly guess
> >  your machine!!  Try "fgrep alpha tools/config*"
> >  
> >  You will see that tools/config.guess has the "alphaev6" entries. But,
> >  tools/config.sub does not have alphaev6. Also notice alphapca56 (mine)
> >  is missing from config.sub. You can add alphaev6 to the two places in
> >  config.sub, and recompile it.  Or ./configure --host=alpha does the same
> >  thing, and may be easier.
> 
>    Naoki,
> 
>            ./configure --host=alpha
> 
>    did no good, as I reported  to you earlier this morning. But adding
>    alphaev6 at two places in  tools/config.sub did the job! I now have
>    a working R-1.1.0.
> 
>    I am  still at a loss why  this happens. I would  have thought that
>    the  alphaev56  entry would  catch  my  machine,  even if  generating
>    slightly  less   efficient  code  (runable   in  both  ev5   and  ev6
>    processors).  But it seems that this is not the case.
> 
>    Thank you very much again. This  is probably not a bug but a quirk,
>    and I send copy of this to Peter Dalgaard and Brian Ripley, both of
>    whom  also took  time  to  offer suggestions.   They  will know  if
>    tweaking the tools/config.sub is adequate for general distribution.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gb at stat.umu.se  Fri Jul  7 10:44:02 2000
From: gb at stat.umu.se (gb)
Date: Fri, 7 Jul 2000 10:44:02 +0200 (CEST)
Subject: [R] .C, .Fortran and DUP
In-Reply-To: <Pine.LNX.3.95.1000705085209.2378A-100000@pcinternet.biochem.dshs-koeln.de>
Message-ID: <Pine.LNX.4.21.0007071006290.28732-100000@pc16.stat.umu.se>


In an  R  function, I have a huge matrix  x, which I update
several times. For some reasons I want to do the updating
with a call to  .Fortran  (simpler than  .C  with matrices,
it seems). This is my (simplified) code:

In the  R  function:
--------------------
   ...
   x <- matrix(0, nrow = n.row, ncol = n.col)
   storage.mode(x) <- "double"
   for (i in reps)
   {
      stuff <- ...
      .Fortran("updatex",
               as.double(stuff),
               as.integer(n.row),
               as.integer(n.col),
               x,
               DUP = FALSE)
   }
   x 
}       

The FORTRAN side:
-----------------
      subroutine updatex(stuff, nrow, ncol, x)
      implicit none
      integer nrow, ncol             
      double precision stuff(ncol), x(nrow, ncol)
      (...updating x...)
--------------------------------------------------

I use  DUP = FALSE  to avoid copying the huge matrix  x,
but if I read  ?.C  correctly, this is *dangerous* 
because of the repeated calls to  .Fortran.
However, it works fine for me (so far).

Question: *Is* this dangerous? I have the option of writing
the whole loop in Fortran, of course, but I want to avoid that
if possible.

G?ran
-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 Department of Statistics            fax: +46 90 786 6614
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From paass at gmd.de  Fri Jul  7 15:15:25 2000
From: paass at gmd.de (Gerhard Paass)
Date: Fri, 07 Jul 2000 15:15:25 +0200
Subject: [R] R and large RAM
Message-ID: <3965D7ED.1A1C7DED@gmd.de>

I am planing to buy several machines with 2 GB RAM.
Is R able to use this much memory?

Thanks

Gerhard

-- 
Dr. Gerhard Paass                http://ais.gmd.de/~paass
GMD.AiS - Inst. for Autonomous Intelligent Systems 
Schloss Birlinghoven, D-53754 St. Augustin, Germany    
mail: paass at gmd.de   fon: +49 2241 14-2698   fax: ..-2342
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From steuer at statistik.uni-dortmund.de  Fri Jul  7 15:53:53 2000
From: steuer at statistik.uni-dortmund.de (Dipl.-Stat. Detlef Steuer)
Date: Fri, 07 Jul 2000 15:53:53 +0200 (CEST)
Subject: [R] R and large RAM
In-Reply-To: <3965D7ED.1A1C7DED@gmd.de>
Message-ID: <XFMail.20000707155353.steuer@statistik.uni-dortmund.de>

Hi!

On 07-Jul-2000 Gerhard Paass wrote:
> I am planing to buy several machines with 2 GB RAM.
> Is R able to use this much memory?

Yes! We are happily running R on two Enterprise Servers with 2GB Ram.
R was behaving well if asked to comsume a lot of this RAM to work on large
datasets. 


> 
> Thanks
> 
> Gerhard

Detlef

-- 

Detlef Steuer Universitaet Dortmund                             ///////
LS Computergestuetzte Statistik                          U N I D O ///  
steuer at statistik.uni-dortmund.de                        ______///////  
Tel: ++49 +231 755 4353 Fax: ++49 +231 755 4387         \_\_\_\/////
                                                         \_\_\_\///
                                                          \_\_\_\/

*** The root causes of bad leadership are greed, ***
*** aggressiveness, pride and resentment.        ***
*** Analects, Konfuzius                          ***
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Joerg.Kindermann at gmd.de  Fri Jul  7 16:07:25 2000
From: Joerg.Kindermann at gmd.de (Joerg Kindermann)
Date: Fri, 7 Jul 2000 16:07:25 +0200 (MET DST)
Subject: [R] R and large RAM
In-Reply-To: <XFMail.20000707155353.steuer@statistik.uni-dortmund.de>
Message-ID: <200007071407.QAA22521@re.gmd.de>

>>>>> " " == Dipl -Stat Detlef Steuer <steuer at statistik.uni-dortmund.de> writes:

     > Hi!  On 07-Jul-2000 Gerhard Paass wrote:
    >> I am planing to buy several machines with 2 GB RAM.  Is R able to
    >> use this much memory?

     > Yes! We are happily running R on two Enterprise Servers with 2GB
     > Ram.  R was behaving well if asked to comsume a lot of this RAM to
     > work on large datasets.

This does not mean that R actually uses that much space. From exprimenting
with the nsize and vsize command line parameters we know that the current
(R-1.1.0) limits are somewhere at nsize=19.5M and vsize=990M. On a SUN
running Solaris2.7 this will require about 1400M of memory. 

You can't  request larger sizes of memory for R-internal reasons. Our
question is whether this is likely to be changed in the near future.

best regards

Joerg Kindermann

--  Dr. Joerg Kindermann                        Knowledge Discovery Team
    GMD   - German National Research Center for Information Technology -
    	       phone: +49 02241 142437 fax: +49 02241 142342
			   http://ais.gmd.de/KD/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Fri Jul  7 17:46:23 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Fri, 7 Jul 2000 08:46:23 -0700 (PDT)
Subject: [R] .C, .Fortran and DUP
In-Reply-To: <Pine.LNX.4.21.0007071006290.28732-100000@pc16.stat.umu.se>
Message-ID: <Pine.GSO.4.21.0007070834410.26438-100000@atlas.biostat.washington.edu>

On Fri, 7 Jul 2000, gb wrote:

> 
> In an  R  function, I have a huge matrix  x, which I update
> several times. For some reasons I want to do the updating
> with a call to  .Fortran  (simpler than  .C  with matrices,
> it seems). This is my (simplified) code:
> 
> In the  R  function:
> --------------------
>    ...
>    x <- matrix(0, nrow = n.row, ncol = n.col)
>    storage.mode(x) <- "double"
>    for (i in reps)
>    {
>       stuff <- ...
>       .Fortran("updatex",
>                as.double(stuff),
>                as.integer(n.row),
>                as.integer(n.col),
>                x,
>                DUP = FALSE)
>    }
>    x 
> }       
> 
> The FORTRAN side:
> -----------------
>       subroutine updatex(stuff, nrow, ncol, x)
>       implicit none
>       integer nrow, ncol             
>       double precision stuff(ncol), x(nrow, ncol)
>       (...updating x...)
> --------------------------------------------------
> 
> I use  DUP = FALSE  to avoid copying the huge matrix  x,
> but if I read  ?.C  correctly, this is *dangerous* 
> because of the repeated calls to  .Fortran.
> However, it works fine for me (so far).
> 
> Question: *Is* this dangerous? I have the option of writing
> the whole loop in Fortran, of course, but I want to avoid that
> if possible.

It looks as though this case is safe.  There are two ways in which
DUP=FALSE can be dangerous. 

One is when you trigger garbage collection, which moves x out from under
where Fortran thinks it is. In .Fortran you're probably not calling any R
routines (and if you were you would probably know). 

The second is when you change the value of a variable that is currently
aliased to another variable.  This is a hypothetical problem -- I don't
know that it can happen, but I don't know that it can't.  For example, a
function formal argument might still be stored as reference to the actual
argument, in which case you could change the actual argument as well. This
doesn't happen in your example since you don't change anything except x.

The reason for the warning is that either of these problems could cause
bugs that are very difficult to reproduce, and so to fix. DUP=FALSE is an
optimisation that doesn't preserve the same behaviour as unoptimised code,
so it should be used only when you know that a) the speed matters and
b) your particular code works.



	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Fri Jul  7 18:06:59 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Fri, 7 Jul 2000 09:06:59 -0700 (PDT)
Subject: [R] R and large RAM
In-Reply-To: <200007071407.QAA22521@re.gmd.de>
Message-ID: <Pine.GSO.4.21.0007070859210.26438-100000@atlas.biostat.washington.edu>

On Fri, 7 Jul 2000, Joerg Kindermann wrote:

> >>>>> " " == Dipl -Stat Detlef Steuer <steuer at statistik.uni-dortmund.de> writes:
> 
>      > Hi!  On 07-Jul-2000 Gerhard Paass wrote:
>     >> I am planing to buy several machines with 2 GB RAM.  Is R able to
>     >> use this much memory?
> 
>      > Yes! We are happily running R on two Enterprise Servers with 2GB
>      > Ram.  R was behaving well if asked to comsume a lot of this RAM to
>      > work on large datasets.
> 
> This does not mean that R actually uses that much space. From exprimenting
> with the nsize and vsize command line parameters we know that the current
> (R-1.1.0) limits are somewhere at nsize=19.5M and vsize=990M. On a SUN
> running Solaris2.7 this will require about 1400M of memory. 
> 
> You can't  request larger sizes of memory for R-internal reasons. Our
> question is whether this is likely to be changed in the near future.
> 

I can get vsize up to nearly 2Gb under Solaris 2.8
> gc()
            free     total (Mb)
Ncells  19777754  19922944  380
Vcells 248921011 249036800 1900

The limit of 2Gb for vsize is because 32bits is the size of the variables
involved.  

The nsize limit seems wrong to me.  It is coded in src/unix/sys-common.c
as 20000000 (ie 2x10^7), but this allows each node to take up 100 bytes
and still fit below the 2^32-1 limit. Surely a larger value is possible.

In principle it should be possible to extend both these sizes to 2^64-1
bytes on machines with 64-bit longs. I don't know how many places have
hard-coded 32bit assumptions.  However, I don't think that any of R-core
routinely use a 64bit compiler, which might be the biggest barrier.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From amorgan at mitre.org  Fri Jul  7 22:35:13 2000
From: amorgan at mitre.org (amorgan)
Date: Fri, 07 Jul 2000 16:35:13 -0400
Subject: [R] Perspective or Contour Plot of a Matrix
Message-ID: <39663F01.793EAA57@mitre.org>

I would like to plot a large (401 x 101) matrix of numbers as a
perspective plot (with the columns and row indices as the y and x
components and the values in the matrix at the z values).  I try to
convert it to a data frame, but it always errors out with "Figure
margins too large".  What does this mean?  How can I get the plot
generated?

Thanks

-- 
-Alex Morgan		Homepage:   http//pubpages.unh.edu/~amorgan
			AIM login:  HomeySage

"Politics is for the moment, and equation lasts eternity."   - A.
Einstein

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From quale at stat.berkeley.edu  Sat Jul  8 00:03:58 2000
From: quale at stat.berkeley.edu (Christopher Quale)
Date: Fri, 07 Jul 2000 15:03:58 -0700
Subject: [R] sparc64 vs i386 memory usage
Message-ID: <396653CE.2194E2E5@stat.berkeley.edu>


I have an R function that uses a shared library
written in C. The memory allocation is done using
calloc and free (I tried using R_alloc, but although
it would compile, R would crash... is there a FAQ with
more info on R_alloc? I couldn't find an answer in the
documentation...). There are no memory leaks in my C code 
(i have triple checked). The code also uses the coxph 
function from survival5.

The function gets called repeatedly as part of a 
simulation, and I noticed that on i386 linux, the 
memory aggregates, and thus I can only run 75 
iterations before I start to run out of memory. 
When I quit out of R, the memory gets freed. 

However, when I run the same code recompiled on
a sparc64, the memory aggregation is not nearly
as bad (if any) and I can run the simulation as
many iterations as I need without this memory
problem.

My questions:
1. Is this due to a difference in the different
ports of linux (or a 64 vs 32 bit issue)?
2. Is it due to R?
3. Would using R_alloc fix this situation?

Info:
R version 1.0.0 (IIRC) on both machines
RedHat Linux 6.1 on i386
RedHat Linux 6.2 on sparc64

Thanks for your help,
Chris
-------------- next part --------------
A non-text attachment was scrubbed...
Name: quale.vcf
Type: text/x-vcard
Size: 1641 bytes
Desc: Card for Christopher Quale
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20000707/99243ef1/quale.vcf

From s-luppescu at uchicago.edu  Sat Jul  8 00:56:10 2000
From: s-luppescu at uchicago.edu (s-luppescu@uchicago.edu)
Date: Fri, 07 Jul 2000 17:56:10 -0500 (CDT)
Subject: [R] Question of programming style
Message-ID: <XFMail.20000707175610.s-luppescu@uchicago.edu>

This is really a question of how to program this *BETTER*. It works as I have
done it, but is quite ugly. 

I want to do a 3d scatterplot of the upper triangle of a matrix, where the
z-values are the values in the matrix, and the row and column indices are the y-
and x-values. The complete (11 by 11) matrix is mmtop94.2. Here is my awkward
code:

mmtop94.2[lower.tri(mmtop94.2)] <- NA

# Here i is the row (y variable), j is the column (x var)
plotdata <- matrix(0, ncol=3, nrow=121)
for (i in 1:11)
  {
    for (j  in 1:11)
      {
        k <- (i-1) * 11 + j
        plotdata[k,] <- c(j, abs(i - 12), mmtop94.2[i, j])
      }
  }
plotdata2 <- na.omit(plotdata)

scatterplot3d(plotdata2, type='h')

It seems to me that I should not have to initialize the plotdata matrix. And
are all those for loops really necessary? 

Thanks in advance for the help.
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
$(B:MJ8$HCRF`H~$NIc(B        -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl/sl.html
PGP Public Key: www.consortium-chicago.org/people/sl/pubkey.asc
ICQ #21172047  AIM: psycho7070
Swipple's Rule of Order:
        He who shouts the loudest has the floor.
>> Sent on 07-Jul-2000 at 17:45:09 with xfmail
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdm at xnet.com  Sat Jul  8 00:17:56 2000
From: jdm at xnet.com (Jeff Miller)
Date: Fri, 7 Jul 2000 17:17:56 -0500
Subject: [R] reorganizing a data frame
Message-ID: <003901bfe861$3474ba00$cee7fea9@x2t9h6>


Hi, 

I have what I think is an easy question.

I have a data frame, called stockdata, of stock prices that looks like this:


         date       ticker       close 
 1 01/02/1998    GE       24.667
 2 01/05/1998    GE       25.104
 3 01/06/1998    GE       24.771
 4 01/07/1998    GE       24.979
 5 01/08/1998    GE       24.750
 6 01/02/1998    HIT       71.125
 7 01/05/1998    HIT       72.313
 8 01/06/1998    HIT       72.563
 9 01/02/1998    INTC     36.313
10 01/05/1998   INTC     37.250
11 01/06/1998   INTC     36.563
12 01/07/1998   INTC     36.375
13 01/08/1998   INTC     37.156

I would like to turn this data frame into a matrix, closedata, that looks like 
this 
                        GE         HIT          INTC 
01/02/1998     24.667     71.125     36.313
01/05/1998     25.104     72.313     37.250
01/06/1998     24.771     72.563     36.563
01/07/1998     24.979     NA          36.375
01/08/1998     24.750     NA          37.156

 
What is the best way to do this?

I can see how to do it using a loop, but that is a problem when 
I have lots of stocks on lots of dates.


Thanks much,

    Jeff Miller 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000707/cbd92722/attachment.html

From dmurdoch at pair.com  Sat Jul  8 04:04:17 2000
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sat, 08 Jul 2000 02:04:17 GMT
Subject: [R] reorganizing a data frame
In-Reply-To: <003901bfe861$3474ba00$cee7fea9@x2t9h6>
References: <003901bfe861$3474ba00$cee7fea9@x2t9h6>
Message-ID: <39688a72.1887538@julian.uwo.ca>

On Fri, 7 Jul 2000 17:17:56 -0500, "Jeff Miller" <jdm at xnet.com> wrote:

>
>Hi, 
>
>I have what I think is an easy question.
>
>I have a data frame, called stockdata, of stock prices that looks like this:
>
>
>         date       ticker       close 
> 1 01/02/1998    GE       24.667
> 2 01/05/1998    GE       25.104
> 3 01/06/1998    GE       24.771
> 4 01/07/1998    GE       24.979
> 5 01/08/1998    GE       24.750
> 6 01/02/1998    HIT       71.125
> 7 01/05/1998    HIT       72.313
> 8 01/06/1998    HIT       72.563
> 9 01/02/1998    INTC     36.313
>10 01/05/1998   INTC     37.250
>11 01/06/1998   INTC     36.563
>12 01/07/1998   INTC     36.375
>13 01/08/1998   INTC     37.156
>
>I would like to turn this data frame into a matrix, closedata, that looks like 
>this 
>                        GE         HIT          INTC 
>01/02/1998     24.667     71.125     36.313
>01/05/1998     25.104     72.313     37.250
>01/06/1998     24.771     72.563     36.563
>01/07/1998     24.979     NA          36.375
>01/08/1998     24.750     NA          37.156
>
> 
>What is the best way to do this?

The tapply() function is what you want.  I think the code would be 

tapply(INTC,list(date,ticker),INTC,mean)

This will give you the average entry in each spot in the table; if
there's more than one entry, that might not be what you want.  I don't
know how you'd tell it to list the date twice, for instance.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From chong at stat.purdue.edu  Sat Jul  8 06:16:38 2000
From: chong at stat.purdue.edu (Chong Gu)
Date: Fri, 7 Jul 2000 23:16:38 -0500
Subject: [R] Question of programming style
In-Reply-To: <XFMail.20000707175610.s-luppescu@uchicago.edu>
Message-ID: <200007080416.XAA41844@mean.stat.purdue.edu>



   I want to do a 3d scatterplot of the upper triangle of a matrix, where the
   z-values are the values in the matrix, and the row and column indices are the y-
   and x-values. The complete (11 by 11) matrix is mmtop94.2. Here is my awkward
   code:

   mmtop94.2[lower.tri(mmtop94.2)] <- NA

   # Here i is the row (y variable), j is the column (x var)
   plotdata <- matrix(0, ncol=3, nrow=121)
   for (i in 1:11)
     {
       for (j  in 1:11)
	 {
	   k <- (i-1) * 11 + j
	   plotdata[k,] <- c(j, abs(i - 12), mmtop94.2[i, j])
	 }
     }
   plotdata2 <- na.omit(plotdata)

   scatterplot3d(plotdata2, type='h')

   It seems to me that I should not have to initialize the plotdata matrix. And
   are all those for loops really necessary? 


I remember doing similar things sometime ago simply by filling the
unwanted triangle of z with NA's.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tring at mail1.stofanet.dk  Sat Jul  8 12:55:11 2000
From: tring at mail1.stofanet.dk (Troels Ring)
Date: Sat, 08 Jul 2000 12:55:11 +0200
Subject: [R] iteration scheme
Message-ID: <4.3.2.7.0.20000708124010.00e779d0@127.0.0.1>

Dear friends.
On p 95 in 3. ed. MASS a zero-truncated Poisson distribution is analyzed. I 
understand the probability distribution and expected mean. The Newton 
iteration scheme is
Lam(m+1)=Lam(m)-[Lam(m)-Ybar(1-exp(-Lam(m))]/[1-Ybar*exp(-Lam(m)], and I 
suppose the latter part should be f(Lam(m))/f ' (Lam(m)) and f(Lam(m)) is 
Lam(m)/(1-exp(-Lam(m)), right ? But then
f ' (Lam(m)) is (exp(Lam(m)*(exp(lam(m)-Lam(m)-1)/(exp(lam(m)-1)^2 and the 
iterations scheme is not right ? So I got this wrong. If possible without 
too much trouble, please tell me how this is done.
I did check that the formula works OK and leads to the right answer.

Best wishes

Troels

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Sat Jul  8 13:06:57 2000
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Sat, 08 Jul 2000 13:06:57 +0200
Subject: [R] Question of programming style
References: <XFMail.20000707175610.s-luppescu@uchicago.edu>
Message-ID: <39670B51.E4BE758E@statistik.uni-dortmund.de>

s-luppescu at uchicago.edu wrote:
> 
> This is really a question of how to program this *BETTER*. It works as I have
> done it, but is quite ugly.
> 
> I want to do a 3d scatterplot of the upper triangle of a matrix, where the
> z-values are the values in the matrix, and the row and column indices are the y-
> and x-values. The complete (11 by 11) matrix is mmtop94.2. Here is my awkward
> code:
> 
> mmtop94.2[lower.tri(mmtop94.2)] <- NA
> 
> # Here i is the row (y variable), j is the column (x var)
> plotdata <- matrix(0, ncol=3, nrow=121)
> for (i in 1:11)
>   {
>     for (j  in 1:11)
>       {
>         k <- (i-1) * 11 + j
>         plotdata[k,] <- c(j, abs(i - 12), mmtop94.2[i, j])
>       }
>   }
> plotdata2 <- na.omit(plotdata)
> 
> scatterplot3d(plotdata2, type='h')

You only need to specify the points to be plotted:


 ## upper triangle of the correct size:
 temp <- upper.tri(mmtop94.2, diag = TRUE) 
 z <- mmtop94.2[temp]  # values
 y <- nrow(mmtop94.2) + 1 - row(mmtop94.2)[temp]  # row indices
 x <- col(mmtop94.2)[temp]  # col indices
 scatterplot3d(x, y, z, type="h") 



> It seems to me that I should not have to initialize the plotdata matrix. And
> are all those for loops really necessary?

Right. You'll need a "plotdata matrix" only for surface plots (e.g.
persp(.)). 
scatterplot3d(.) is designed to plot 3D point clouds.


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Sat Jul  8 13:42:28 2000
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Sat, 08 Jul 2000 21:42:28 +1000
Subject: [R] reorganizing a data frame
Message-ID: <396713A3.FB203F89@ozemail.com.au>

Jeff Miller wrote:

>...I would like to turn this data frame into a matrix, closedata, that
looks like
this
                        GE         HIT          INTC
01/02/1998     24.667     71.125     36.313
01/05/1998     25.104     72.313     37.250
01/06/1998     24.771     72.563     36.563
01/07/1998     24.979     NA          36.375
01/08/1998     24.750     NA          37.156

I just realized that you wanted a matrix as output - you may have to
make a little change in the following:

reorg<-function(old.df,rowvar,colvar,reorgvar) {
 if(!missing(old.df) &&
  !missing(rowvar) &&
  !missing(colvar) &&
  !missing(reorgvar)) {
  row.var<-levels(old.df[,rowvar])
  col.names<-levels(old.df[,colvar])
  new.df<-

data.frame(row.var,matrix(0,nrow=length(row.var),ncol=length(col.names)))

  for(i in 1:length(col.names)) {
   new.index<-
    match(row.var,subset(old.df[,rowvar],old.df[,colvar] ==
col.names[i]),NA)
   new.df[,i+1]<-ifelse(is.na(new.index),NA,
   subset(old.df[,reorgvar],old.df[,colvar] == col.names[i])[new.index])

  }
  names(new.df)<-c(names(old.df)[rowvar],col.names)
  return(new.df)
 }
 cat("Usage: reorg(old.df, rowvar, colvar, reorgvar)\n")
}

'rowvar' corresponds to 'date' in your example, 'colvar' to 'ticker' and
'reorgvar' to 'close'.  I think this will do the trick, although it's
not very general.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Sat Jul  8 14:38:22 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat, 8 Jul 2000 14:38:22 +0200 (CEST)
Subject: [R] Perspective or Contour Plot of a Matrix
In-Reply-To: <39663F01.793EAA57@mitre.org>
References: <39663F01.793EAA57@mitre.org>
Message-ID: <14695.8382.621667.199419@gargle.gargle.HOWL>

>>>>> "amorgan" == amorgan  <amorgan at mitre.org> writes:

    amorgan> I would like to plot a large (401 x 101) matrix of numbers as
    amorgan> a perspective plot (with the columns and row indices as the y
    amorgan> and x components and the values in the matrix at the z
    amorgan> values).  I try to convert it to a data frame, but it always
    amorgan> errors out with "Figure margins too large".  What does this
    amorgan> mean?  How can I get the plot generated?

Why did you think you needed a data.frame
if your large matrix of numbers is called  Mat
just say
	persp(Mat)
which is equivalent to

	persp(z=Mat)

which is equivalent to

	persp(x = seq(0, 1, len = nrow(z)), 
	      y = seq(0, 1, len = ncol(z)), 
	      z = Mat)

Do you have suggestions for improving the online help for persp
which does contain this info ?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Sat Jul  8 16:35:03 2000
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sat, 08 Jul 2000 14:35:03 GMT
Subject: [R] reorganizing a data frame
In-Reply-To: <005801bfe8d3$d543d840$cee7fea9@x2t9h6>
References: <003901bfe861$3474ba00$cee7fea9@x2t9h6> <39688a72.1887538@julian.uwo.ca> <005801bfe8d3$d543d840$cee7fea9@x2t9h6>
Message-ID: <39703a81.3702591@julian.uwo.ca>

On Sat, 8 Jul 2000 06:58:29 -0500, you wrote:

>    Thanks for the response! I'm not sure that
>    I completely understand your suggestion.
>
>    I start with  a dataframe called "oldstock"
>    (three columns: date, ticker, close) and I want to
>    turn this into a matrix called "newstock" with
>length(unique(stockdata[,"date"]))
>    rows and length(unique(stockdata[,"ticker"])) columns.
>    The names of the rows will be the dates, and the names of
>    the columns will be the tickers, and the value of
>    will either be the close price for the ticker on the date
>    in question, or NA if we don't have a close price for the
>    ticker on that date.
>
>    I'm not that familiar with how tapply works so
>    I don't see exactly how to apply your idea to "oldstock"
>    in order to get out "newstock". What should
>    the arguments of tapply be?

>> The tapply() function is what you want.  I think the code would be
>>
>> tapply(INTC,list(date,ticker),INTC,mean)

Change this to 

  tapply(oldstock$close,list(oldstock$date,oldstock$ticker),mean)

I had a typo in what I wrote before:  INTC should only have appeared
once.  (It happened because I couldn't remember the order of the args,
and when it didn't work the first way, I moved INTC to the start, but
forgot to delete the second entry.)

The basic use of tapply for a 2 way table takes these arguments:

  tapply( x,    #  The variable to do the calculations on.  
            list(rowvar, colvar), # The variables to determine the row
and column
            func)  # The function that gives the table entry

This produces a table with row labels from rowvar, column labels from
colvar.  The table entry at row r column c is func(x[rowvar=r &
colvar=c]).

I hope this helps.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From brian_adams at jbadams.com  Sat Jul  8 15:22:08 2000
From: brian_adams at jbadams.com (brian_adams@jbadams.com)
Date: Sat, 08 Jul 2000 13:22:08 +0000
Subject: [R] Question about predict.glm
Message-ID: <39672B00.13CBF09C@local.com>

I am trying to use predict.glm to validate a logistic model.  Using

predictions <- predict.glm(logit.model, type="response",
dataframe="validate")

I get the predictions from the original dataframe, not the validation
data frame.  Am I missing an input to the method or is this what is
supposed to happen?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From clive.jenkins at clara.net  Sat Jul  8 15:45:04 2000
From: clive.jenkins at clara.net (Clive Jenkins)
Date: Sat, 08 Jul 2000 14:45:04 +0100
Subject: [R] iteration scheme
References: <4.3.2.7.0.20000708124010.00e779d0@127.0.0.1>
Message-ID: <39673060.836A6D68@clara.net>

To make your formulae more readable, I substituted
 x  for Lam(m)
 x' for Lam(m+1)
 k  for Ybar
The Newton-Raphson iteration formula is now
 x' = x - [x - k*(1 - exp(-x))]/[1 - k*exp(-x)]
If we differentiate the numerator (top) of the correction term, 
 x - k*(1 - exp(-x))
we get
 1 - k*exp(-x)
which is the denominator (bottom). Therefore the function f(x) must be
 x - k*(1 - exp(-x))
Putting this back into your notation, we get
 Lam(m) - Ybar*(1 - exp(-Lam(m)))
instead of what you suggested:
 Lam(m)/(1-exp(-Lam(m))

I hope this makes sense in terms of the Poisson distribution and MASS3
p.95

Best regards,
Clive Jenkins

Troels Ring wrote:
> 
> Dear friends.
> On p 95 in 3. ed. MASS a zero-truncated Poisson distribution is analyzed. I
> understand the probability distribution and expected mean. The Newton
> iteration scheme is
> Lam(m+1)=Lam(m)-[Lam(m)-Ybar(1-exp(-Lam(m))]/[1-Ybar*exp(-Lam(m)], and I
> suppose the latter part should be f(Lam(m))/f ' (Lam(m)) and f(Lam(m)) is
> Lam(m)/(1-exp(-Lam(m)), right ? But then
> f ' (Lam(m)) is (exp(Lam(m)*(exp(lam(m)-Lam(m)-1)/(exp(lam(m)-1)^2 and the
> iterations scheme is not right ? So I got this wrong. If possible without
> too much trouble, please tell me how this is done.
> I did check that the formula works OK and leads to the right answer.
> 
> Best wishes
> 
> Troels

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Jul  8 19:23:46 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Jul 2000 18:23:46 +0100 (BST)
Subject: [R] Tukey.aov with split-plot designs
In-Reply-To: <3.0.5.16.20000705082958.2fdf5200@deimos.tc.uaslp.mx>
Message-ID: <Pine.GSO.4.05.10007081817070.24503-100000@auk.stats>

On Wed, 5 Jul 2000, Peter B. Mandeville wrote:

> I am using R 1.1 with Redhat 6.2 and RW 1.001 with Win98 (the upkey doesn't
> work on my IBM either as has been previously reported by others).

Yes, and the fix was posted long ago (I've been on two trips since).

> 
> The function aov doesn't return either the residuals or the residual
> degrees of freedom for split-plot designs. 
> 
> If you use the following code from Baron and Li's "Notes on the use of R
> for psycology experiments and questionnaires"
> 
> data <- c(30,14,24,38,26,28,18,20,34,28,16,10,18,20,14,34,22,30,44,30)
> Stv.df <-
> data.frame(rt=data,subj=factor(rep(paste("subj",1:5,sep=""),4)),drug=factor(
> rep(paste("drug",1:4,sep=""),c(5,5,5,5))))
> res0 <- aov(rt~drug,data=Stv.df)
> res1 <- aov(rt~drug+subj,data=Stv.df)
> res2 <- aov(rt~drug+Error(subj/drug),data=Stv.df)
> 
> res0$resid works
> resid(res0) works
> res0$df.residual works
> 
> res1$resid works
> resid(res1) works
> res1$df.residual work
> 
> res2$resid doesn't work and reports NULL
> resid(res2) doesn't work and reports NULL
> res2$df.residual doesn't work and reports NULL
> 
> Is this an undocumented feature or an error?

By design.  What are the residuals for a multistratum design?  In your
example

> res2

Call:
aov(formula = rt ~ drug + Error(subj/drug), data = Stv.df)

Grand Mean: 24.9 

Stratum 1: subj

Terms:
                Residuals
Sum of Squares      680.8
Deg. of Freedom         4

Residual standard error: 13.04607 

Stratum 2: subj:drug

Terms:
                 drug Residuals
Sum of Squares  698.2     112.8
Deg. of Freedom     3        12

Residual standard error: 3.065942 
Estimated effects may be unbalanced

and which of the two sets of residuals did you expect to get?  You can get
either by applying resid to the appropriate stratum, by using the function
proj().  See V&R3 p.198 for an example.


> It sure plays havoc with Dr. Bates' contribution of Tukey.aov which works
> with res0 and res1 but doesn't work with res2 and reports 
> 
> Error in qtukey(p, nranges, nmeans, df, lower.tail, log.p) :
>         Non-numeric argument to mathematical function

Again, what do you actually want here?  Surely you want to treat each
stratum separately, and you can do that via proj().

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Jul  8 19:45:31 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Jul 2000 18:45:31 +0100 (BST)
Subject: [R] Using standard compilers (was recommended linux environment
 for R)
In-Reply-To: <Pine.LNX.3.96.1000706142014.20671G-100000@TILL.math.uni-hamburg.de>
Message-ID: <Pine.GSO.4.05.10007081839240.24503-100000@auk.stats>

On Thu, 6 Jul 2000, Christian Hennig wrote:

> Hello,
> 
> > Jens Oehlschlgel wrote:
> > > 
> > > Hello,
> > > 
> > > I'd like to ask whether there is a prefered linux distribution for use with
> > > R (Suse, Redhat, Debian) 
> > >and what fortran compiler is recommended (f77 or
> > > f2c)?
> > 
> > f2c is not a compiler. It converts fortran code to c code. You need one
> > of this if you want to compile R on your own. The configure script looks
> > for a fortran compiler and if it doesnt find one, it searches for f2c.
> > Dont know if you need this when installing one of the R-binary
> > distributions. But you also need f77 or f2c to install a source contrib
> > package. Im using f2c and havnt any trouble yet.
> 
> I needed f2c (or some associated libraries) to get the add-on package
> mclust to start. (Compilation did work, but some functions did not.)
> g77/f77 did not suffice, neither on Solaris, nor on SuSe Linux.
> 
> Perhaps this changed in the meantime, since this experience is almost a year
> old. I would appreciate if all packages could be compiled by use of the same
> standard compilers.

mclust 1.1-1 works for me with each of g77 and f77 on Solaris, and g77 on
RH6.0 Linux. I suspect you were using an older version, which did have
problems unless f2c was used.

I know of no other examples of packages on CRAN with such problems. (mclust
has problems under Windows of a different kind due to a lack of checks for
division by zero in the Fortran code).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Jul  8 20:08:58 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 8 Jul 2000 19:08:58 +0100 (BST)
Subject: [R] Question about predict.glm
In-Reply-To: <39672B00.13CBF09C@local.com>
Message-ID: <Pine.GSO.4.05.10007081906520.24503-100000@auk.stats>

On Sat, 8 Jul 2000 brian_adams at jbadams.com wrote:

> I am trying to use predict.glm to validate a logistic model.  Using
> 
> predictions <- predict.glm(logit.model, type="response",
> dataframe="validate")
> 
> I get the predictions from the original dataframe, not the validation
> data frame.  Am I missing an input to the method or is this what is
> supposed to happen?

The argument is `newdata'.  ?predict.glm seems clear enough to me
(but then I wrote it).


Usage:

     predict.glm(object, newdata = NULL, type = c("link", "response", 
"terms"),
                 se.fit = FALSE, dispersion = NULL, terms = NULL, ...)

Arguments:

  object: a fitted object of class inheriting from `"glm"'.

 newdata: optionally, a new data frame from which to make the
          predictions.  If omitted, the fitted linear predictors are
          used.

so I think it is working as documented ....

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Sat Jul  8 20:14:35 2000
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 8 Jul 2000 14:14:35 -0400 (EDT)
Subject: [R] Combining lines and barplot
Message-ID: <14695.28555.50863.751307@sonny.eddelbuettel.com>


With a data frame containing daily data, I would like to overlay a barplot of
daily outcomes with the daily high and low.  However, when use the
straightforward
	      
	      barplot(X$"day_end", col="gray", ylim=c(0,120))
	      lines(X$"day_high", col="blue")
	      lines(X$"day_low", col="blue")

the lines do not correspond to the same (daily) x-axis values.  How can I
make them do that?  

Thanks,  Dirk

-- 
According to the latest figures, 43% of all statistics are totally worthless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From edd at debian.org  Sat Jul  8 22:36:19 2000
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sat, 8 Jul 2000 16:36:19 -0400 (EDT)
Subject: [R] Combining lines and barplot
In-Reply-To: <14695.28555.50863.751307@sonny.eddelbuettel.com>
References: <14695.28555.50863.751307@sonny.eddelbuettel.com>
Message-ID: <14695.37059.291595.560971@sonny.eddelbuettel.com>


David James was kind enough to help me out and enlighten me to the fact that
the x-scales used by barplot are independent of those from my data. He also
sent me a function which I include below (with a minor modification).  This
does exactly what I was looking for.  Thanks!

xbarplot <- function(y, col=par("col"), border = par("fg"), gap=gap, ...)
{
  ny <- length(y)
  x <- seq(0,ny)+0.5
  n <- length(x)
  space <- gap * mean(diff(x))
  old <- par(xaxt = "n")
  on.exit(par(old))
  plot(range(x, na.rm=T), range(y, na.rm=T), bty="n",
      xlab="", ylab = "", type = "n", ...)
  rect(x[-n]+space/2, rep(0,length(y)), 
       x[-1]-space/2, y, col = col, border = border)
}

Regards, Dirk

-- 
According to the latest figures, 43% of all statistics are totally worthless.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ihaka at stat.auckland.ac.nz  Sun Jul  9 01:05:23 2000
From: ihaka at stat.auckland.ac.nz (Ross Ihaka)
Date: Sun, 9 Jul 2000 11:05:23 +1200
Subject: [R] Combining lines and barplot
In-Reply-To: <14695.28555.50863.751307@sonny.eddelbuettel.com>; from Dirk Eddelbuettel on Sat, Jul 08, 2000 at 02:14:35PM -0400
References: <14695.28555.50863.751307@sonny.eddelbuettel.com>
Message-ID: <20000709110523.B12289@stat1.stat.auckland.ac.nz>

On Sat, Jul 08, 2000 at 02:14:35PM -0400, Dirk Eddelbuettel wrote:
> 
> With a data frame containing daily data, I would like to overlay a barplot of
> daily outcomes with the daily high and low.  However, when use the
> straightforward
> 	      
> 	      barplot(X$"day_end", col="gray", ylim=c(0,120))
> 	      lines(X$"day_high", col="blue")
> 	      lines(X$"day_low", col="blue")
> 
> the lines do not correspond to the same (daily) x-axis values.  How can I
> make them do that?  

There are quite a few serious problems with the basic graphics displays
in R.  Some of these are inherited from S and some are of our own making.
(I am painfully away of these defficiencies as I am trying to teach a
course on graphics using R).

In the case of barplot, it doesn't do the intuitive thing (sorry).
Rather than centering the bars (or groups of bars) at x = 1, 2, 3,
..., it puts them at some interesting numbers of its own choosing.
The center points of bars are returned as the values of the function
and you could use these to add the lines you want to the graph.

Here is an example with fake data.

	y <- sin(1:10/5)
	err <- (1 + runif(10))/10 

We'll use the values in "y" for the barplot and put lines +/- "err"
above and below.

	x <- barplot(y, , col = "lightgray",
	             ylim = range(y + err, y - err, 0))

	lines(x, y + err)

	lines(x, y - err)

However, it's not clear that this is a truly suitable graph for this kind
of data. There are many other possibilities.  Here is an "error bar"
approach - using arrows with their head portions drawn at 90 degrees to
the shaft.

	# Some x ordinates

	x <- 1:10

	# Here pch = 20, cex = 2 gives a big black dot

	plot(x, y, pch = 20, cex = 2,
	     ylim = range(y + err, y - err, 0),
	     xlab = "Suitable X Label",
	     ylab = "Suitable Y Label")

	# Join up the dots ...

	lines(x, y)

	# Error-ish bars

	arrows(x, y - err, 1:10, y + err,
	       angle = 90, length = .1, code = 3)

(I make no claims that this is a good graph, it's just a meant to
show that other possibilities are easy).

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From axel.vischer at efot.com  Mon Jul 10 13:43:32 2000
From: axel.vischer at efot.com (Axel Vischer)
Date: Mon, 10 Jul 2000 13:43:32 +0200
Subject: [R] RMySQL
Message-ID: <3969B6E3.7CB9A1D3@efot.com>

Hi!

I'm trying to test the RMySQL package (in Devel). The following error
occured while trying to connet to our MySQL database:

> m <- MySQL()
> getDatabases(m)
Error in newConnection.MySQLManager(dbMgr, ...) :
        MySQL driver: (could not open MySQL)
>

Does anybody know what the problem is? How to proceed?

Thanks,

Axel Vischer


--


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000710/71ac0882/attachment.html

From dj at research.bell-labs.com  Mon Jul 10 14:44:08 2000
From: dj at research.bell-labs.com (David James)
Date: Mon, 10 Jul 2000 08:44:08 -0400 (EDT)
Subject: [R] RMySQL
Message-ID: <200007101244.IAA03920@jessie.research.bell-labs.com>

Hi,

Try using getDatabases() with a connection object.  Being able
to query MySQL about databases may require you to have 
an open connection.  Thus

> m <- MySQL()
> con <- dbConnect(m, user = user, password = passwd, ...)

> getDatabases(con)
$Database
[1] "Network"    "ggobi"      "mysql"     
[4] "test"       "vital_test"



> Date: Mon, 10 Jul 2000 13:43:32 +0200
> From: Axel Vischer <axel.vischer at efot.com>
> X-Accept-Language: en
> MIME-Version: 1.0
> To: r-help at stat.math.ethz.ch
> Subject: [R] RMySQL
> 
> Hi!
> 
> I'm trying to test the RMySQL package (in Devel). The following error
> occured while trying to connet to our MySQL database:
> 
> > m <- MySQL()
> > getDatabases(m)
> Error in newConnection.MySQLManager(dbMgr, ...) :
>         MySQL driver: (could not open MySQL)
> >
> 
> Does anybody know what the problem is? How to proceed?
> 
> Thanks,
> 
> Axel Vischer
> 
> 
> --
> 
> 
------------
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Mon Jul 10 17:41:56 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Mon, 10 Jul 2000 11:41:56 -0400
Subject: [R] Error Handling in R
Message-ID: <OF6481BE81.DBD99BB7-ON85256918.00559561@hgsi.com>

I am trying to design a function which calls nls - does estimates for a lot
of different models and then puts the estimates all in a file. My problem
is that if nls fails for whatever reason on one model, the rest of the
models do not get evaluated and the execution is halted (running in batch
mode). My question is what syntax should I use inside the function, which
will trap the error and continue evaluations of the other models?
for example
my.nls <- function(model= something, etc..){
    call nls and evaluate the model.
  if nls does fails (singular gradient - whatever reason) trap error and
continue.
 in the end - tell me which model failed and show me the error and the
estimates for the model parameters for which nls converged
}

I am looking at the documentation for the try() function, but I am unsure
of the exact syntax. Any help is greatly appreciated.
TIA.
Partha.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From David.Brahm at fmr.com  Mon Jul 10 18:44:01 2000
From: David.Brahm at fmr.com (Brahm, David)
Date: Mon, 10 Jul 2000 12:44:01 -0400
Subject: [R] reorganizing a data frame
Message-ID: <BDFB8C2A6273D211B73C0060B067443C019D1106@msgbos537nts.fmr.com>

Jeff Miller wants to turn a dataframe (stockdata) containing date, ticker,
and close into a matrix (closedata).  Here's how I'd do it in S-Plus (sorry,
I haven't tried this in R):
 
dates <- sort(unique(stockdata$date))
tickers <- sort(unique(stockdata$ticker))
closedata <- matrix(NA, length(dates), length(tickers),
dimnames=list(as.character(dates), tickers))
idx <- cbind(match(stockdata$date, dates), match(stockdata$ticker, tickers))
closedata[idx] <- stockdata$close
 
The key here is knowing that you can index into a matrix (closedata) with an
Nx2 matrix (idx), each row of which represents one element's coordinates.
This method is especially efficient if your matrix "closedata" is sparse.
 
P.S. The "as.character" is there because S-Plus 5.1 allows for non-character
dimnames, which seems foolish to me, and I use numbers for dates.

-- David Brahm 
    Fidelity Investments 
    (617)563-7438 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000710/e5eada30/attachment.html

From ewing at genome.stanford.edu  Mon Jul 10 19:26:41 2000
From: ewing at genome.stanford.edu (Rob Ewing)
Date: Mon, 10 Jul 2000 10:26:41 -0700 (PDT)
Subject: [R] read.table problem
Message-ID: <Pine.OSF.4.21.0007101020400.9423-100000@fasolt.Stanford.EDU>


Hi,

( As a total newbie to R ) I get this error when attempting to use
read.table to read a data frame:

"Error in type.convert(x, na.strings, as.is) : null string encountered"

(Is there help documentation for the type.convert function ( I could not
find it in the usual places)

This does not always happen, but seems to occur when I am attempting to
read data frames with more than a given number of rows. 

thanks 

Rob.

_____________________________________________________________________________
Rob Ewing, PhD
AFGC bioinformatics group		Tel: (650) 325 1521 ext.343 
Carnegie Institution of Washington	Fax: (650) 325 6857
260 Panama Street			ewing at genome.stanford.edu
Stanford, CA 94305.			http://genome-www.stanford.edu/~ewing
_____________________________________________________________________________


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Mon Jul 10 20:10:36 2000
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 10 Jul 2000 20:10:36 +0200
Subject: [R] read.table problem
References: <Pine.OSF.4.21.0007101020400.9423-100000@fasolt.Stanford.EDU>
Message-ID: <396A119C.DCB4C745@statistik.uni-dortmund.de>

Rob Ewing wrote:

> ( As a total newbie to R ) I get this error when attempting to use
> read.table to read a data frame:
> 
> "Error in type.convert(x, na.strings, as.is) : null string encountered"
> 
> (Is there help documentation for the type.convert function ( I could not
> find it in the usual places)

The function type.convert(.) is defined inside read.table(.), so there
is no documentation.
But that is not your problem, I suppose.

> This does not always happen, but seems to occur when I am attempting to
> read data frames with more than a given number of rows.

Suggestion: Did you provide the right decimal seperator and field
seperator (as in the file to read in) to read.table(.)? Have a look into
?read.table.

If read.table(.) doesn't work, you might want to try scan(.).

Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at hawaii.edu  Tue Jul 11 04:01:21 2000
From: gfeeney at hawaii.edu (Griffith Feeney)
Date: Mon, 10 Jul 2000 19:01:21 -0700
Subject: [R] parsing dir output for file sizes
Message-ID: <4.3.2.7.0.20000710185137.00ac1a30@pop-server.hawaii.edu>

I've got an R wrapper around an old DOS program. In the R program I need to 
test whether the DOS program failed to produce certain output. This is 
indicated by certain text files created by the DOS program being empty.

I can use system(command, intern=TRUE) to get the output of a DOS dir for a 
test file, but I'm having trouble parsing this to get the file size.

Is there an R function to find the first occurrence of a character in a 
character string (seems there must be, but I'm at a loss to find it)? Or 
can anyone suggest a better approach?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jdm at xnet.com  Tue Jul 11 00:58:32 2000
From: jdm at xnet.com (Jeff Miller)
Date: Mon, 10 Jul 2000 17:58:32 -0500
Subject: [R] reorganizing a data frame
References: <BDFB8C2A6273D211B73C0060B067443C019D1106@msgbos537nts.fmr.com>
Message-ID: <002501bfeac2$6f2f7780$cee7fea9@x2t9h6>

    David,

    Thanks for this info. David James was kind enough to send me the same solution in a private mail.
    I hadn't realized that you can index into an array with a matrix, but I see 
    now that this is a very useful tool in R and S.  

    Duncan Murdoch sent me a more concise solution:

       tapply(oldstock$close,list(oldstock$date,oldstock$ticker),mean)

    which works well if the matrix "oldstock" has fewer than say 10,000 rows,
    but which starts to bog down considerably for matrices with more rows.

    The solution that you and David James sent is still quite fast for matrices 
    with 300,000 rows. 

    Thanks again to everyone for their insights. 

        Jeff Miller


  ----- Original Message ----- 
  From: Brahm, David 
  To: 'Jeff Miller' ; r-help at stat.math.ethz.ch 
  Sent: Monday, July 10, 2000 11:44 AM
  Subject: RE: [R] reorganizing a data frame


  Jeff Miller wants to turn a dataframe (stockdata) containing date, ticker, and close into a matrix (closedata).  Here's how I'd do it in S-Plus (sorry, I haven't tried this in R):
   
  dates <- sort(unique(stockdata$date))
  tickers <- sort(unique(stockdata$ticker))
  closedata <- matrix(NA, length(dates), length(tickers), dimnames=list(as.character(dates), tickers))
  idx <- cbind(match(stockdata$date, dates), match(stockdata$ticker, tickers))
  closedata[idx] <- stockdata$close
   
  The key here is knowing that you can index into a matrix (closedata) with an Nx2 matrix (idx), each row of which represents one element's coordinates.  This method is especially efficient if your matrix "closedata" is sparse.
   
  P.S. The "as.character" is there because S-Plus 5.1 allows for non-character dimnames, which seems foolish to me, and I use numbers for dates.
  -- David Brahm 
      Fidelity Investments 
      (617)563-7438 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000710/3d7da968/attachment.html

From ligges at statistik.uni-dortmund.de  Tue Jul 11 08:39:06 2000
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 11 Jul 2000 08:39:06 +0200
Subject: [R] parsing dir output for file sizes
References: <4.3.2.7.0.20000710185137.00ac1a30@pop-server.hawaii.edu> <396AC061.802FAEE9@statistik.uni-dortmund.de>
Message-ID: <396AC10A.92A0FA8@statistik.uni-dortmund.de>

[Forgot to cc it to R-Help, so doing it now]

Griffith Feeney wrote:
> 
> I've got an R wrapper around an old DOS program. In the R program I need to
> test whether the DOS program failed to produce certain output. This is
> indicated by certain text files created by the DOS program being empty.
> 
> I can use system(command, intern=TRUE) to get the output of a DOS dir for a
> test file, but I'm having trouble parsing this to get the file size.
> 
> Is there an R function to find the first occurrence of a character in a
> character string (seems there must be, but I'm at a loss to find it)? Or
> can anyone suggest a better approach?

I would try to write the listing of the directory DIRNAME into a file
dirfile.txt.
After that you can scan(.) that file, search the FILENAME and the item
before the filename in your scanned dirfile.txt is the filesize:

 shell("dir DIRNAME > dirfile.txt")
 temp <- scan("dirfile.txt", what="character")
 as.integer(temp[which(temp=="FILENAME")-1])


Regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 11 09:00:27 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jul 2000 08:00:27 +0100 (BST)
Subject: [R] parsing dir output for file sizes
In-Reply-To: <4.3.2.7.0.20000710185137.00ac1a30@pop-server.hawaii.edu>
Message-ID: <Pine.GSO.4.05.10007110747320.17317-100000@auk.stats>

On Mon, 10 Jul 2000, Griffith Feeney wrote:

> I've got an R wrapper around an old DOS program. In the R program I need to 
> test whether the DOS program failed to produce certain output. This is 
> indicated by certain text files created by the DOS program being empty.
> 
> I can use system(command, intern=TRUE) to get the output of a DOS dir for a 
> test file, but I'm having trouble parsing this to get the file size.
> 
> Is there an R function to find the first occurrence of a character in a 
> character string (seems there must be, but I'm at a loss to find it)? Or 
> can anyone suggest a better approach?

regexpr() is one useful tool for this.  For example:

txt <- "regexpr is the tool for this."
regexpr("f", txt)
[1] 21
attr(,"match.length")
[1] 1


I'm not at all sure what this has to do with the problem, though.
Here is how I would do it.

1) res <- shell("dir", intern=TRUE).  At least on my NT machine, "dir" is
a DOS internal command, and is not found by system().

2) The file sizes and file names are at fixed columns, so something like
(not the right numbers)

fs <- substring(res, 41, 49)
fn <- substring(res, 51, 58)

will give you the file sizes (as character strings) and file names.

One day fairly soon we will add things like this as cross-platform
inbuilt functions in R.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at bureau.ucc.ie  Tue Jul 11 12:18:33 2000
From: iosu at bureau.ucc.ie (Jesus M. Frias)
Date: Tue, 11 Jul 2000 11:18:33 +0100
Subject: [R] Weights in nls function
Message-ID: <007501bfeb21$66b2b860$01b7ef8f@ucc.ie>

Hi!
    I am trying to perform a nonlinear regression using nls in a data.frame where I have a lot of missing values (na's) in the response. I would like to assign zero weight to those values. I have been looking to the nls help page and there is some mention to na.action, with na.omit and na.fail as options, which does not seem to suit me.

     I need the missing values once my model is doing a numerical integration over values of the independent values where I don't have the information of the response.

my best regards,

IOsu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000711/ecd29c90/attachment.html

From emmanuel.charpentier at sap.ap-hop-paris.fr  Tue Jul 11 14:03:58 2000
From: emmanuel.charpentier at sap.ap-hop-paris.fr (Emmanuel Charpentier)
Date: Tue, 11 Jul 2000 14:03:58 +0200
Subject: [R] A small error in mca ?
Message-ID: <396B0D2E.D2A3CCEE@sap.ap-hop-paris.fr>

Dear list,

Working the example in Stats complements to V&R 3rd ed., I found this :

> library(MASS)
> library(mva)
> data(farms)
> plot(mca(farms,abbrev=TRUE),cex=rep(0.7,2))
# ... Works OK
# Sheer curiosity ...
> plot(mca(farms,abbrev=TRUE,nf=4),cex=rep(0.7,2))
Error in rep(p * X.svd$d[sec], c(n, n)) : invalid number of copies in "rep"

A bit of exploration in the MASS source shows (12th line of the mca function
body) :

  fs <- X.svd$u[, sec]/rep(p*X.svd$d[sec], c(n,n))

Shouldn't that be 

  fs <- X.svd$u[, sec]/rep(p*X.svd$d[sec], rep(n,nf))

that gives the expected result ?

Oh, BTW : Is mca identical or analogous to Benzecri's "analyse des
correspondances" (analysis of a chi-squared distance table), or is this yet
another analysis ?

Sincerely yours,

						Emmanuel Charpentier
--
Emmanuel Charpentier			Tel :		+33-01 40 27 35 98
Secr?tariat scientifique du CEDIT	Fax :		+33-01 40 27 55 65
Direction de la Politique M?dicale // Assistance Publique - H?pitaux de Paris
3, Avenue Victoria // F-75004 Paris /// France
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 11 14:33:21 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Jul 2000 13:33:21 +0100 (BST)
Subject: [R] A small error in mca ?
Message-ID: <200007111233.NAA28712@toucan.stats.ox.ac.uk>


> Date: Tue, 11 Jul 2000 14:03:58 +0200
> From: Emmanuel Charpentier <emmanuel.charpentier at sap.ap-hop-paris.fr>
> 
> Dear list,
> 
> Working the example in Stats complements to V&R 3rd ed., I found this :

Please do not send such comments to the R list before consulting the authors,
who might well not even be readers of R-help.

> > library(MASS)
> > library(mva)
> > data(farms)
> > plot(mca(farms,abbrev=TRUE),cex=rep(0.7,2))
> # ... Works OK
> # Sheer curiosity ...
> > plot(mca(farms,abbrev=TRUE,nf=4),cex=rep(0.7,2))
> Error in rep(p * X.svd$d[sec], c(n, n)) : invalid number of copies in "rep"
> 
> A bit of exploration in the MASS source shows (12th line of the mca function
> body) :
> 
>   fs <- X.svd$u[, sec]/rep(p*X.svd$d[sec], c(n,n))
> 
> Shouldn't that be 
> 
>   fs <- X.svd$u[, sec]/rep(p*X.svd$d[sec], rep(n,nf))
> 
> that gives the expected result ?

Probably, depending on who is doing the expecting.  If you look at the
help file you will see that nf=4 is not expected to be useful.

> Oh, BTW : Is mca identical or analogous to Benzecri's "analyse des
> correspondances" (analysis of a chi-squared distance table), or is this yet
> another analysis ?

The document you are reading (skimming?) says in the very first paragraph of
that section:

   Multiple correspondence analysis (MCA) is (confusingly!) a method for
   visualizing the joint properties of $p \ge 2$ categorical variables
   that does \emph{not} reduce to correspondence analysis (CA) for $p =2$,
   although the methods are closely related \citep[see, for
   example,][{}\S10.2]{Gower.Hand.96}.

"l'analyse des correspondances" translates as correspondence analysis,
as described in the main text, and you could try looking in the reference,
too, for further elucidation.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at hawaii.edu  Tue Jul 11 18:54:58 2000
From: gfeeney at hawaii.edu (Griffith Feeney)
Date: Tue, 11 Jul 2000 09:54:58 -0700
Subject: [R] parsing dir output for file sizes
In-Reply-To: <Pine.GSO.4.05.10007110747320.17317-100000@auk.stats>
References: <4.3.2.7.0.20000710185137.00ac1a30@pop-server.hawaii.edu>
Message-ID: <4.3.2.7.0.20000711094712.00ac09d0@pop-server.hawaii.edu>

Thanks! I'd gotten as far as the string containing the file size but wasn't 
sure about this approach and, crucially if absurdly, couldn't get rid of 
the comma. regexpr() got me to sub(",", "", res), which does the trick.

BTW, I was using system("command.com /c ..."), which works on Win98.

At 09:03 PM 10/07/2000 -1000, you wrote:
>On Mon, 10 Jul 2000, Griffith Feeney wrote:
>
> > I've got an R wrapper around an old DOS program. In the R program I 
> need to
> > test whether the DOS program failed to produce certain output. This is
> > indicated by certain text files created by the DOS program being empty.
> >
> > I can use system(command, intern=TRUE) to get the output of a DOS dir 
> for a
> > test file, but I'm having trouble parsing this to get the file size.
> >
> > Is there an R function to find the first occurrence of a character in a
> > character string (seems there must be, but I'm at a loss to find it)? Or
> > can anyone suggest a better approach?
>
>regexpr() is one useful tool for this.  For example:
>
>txt <- "regexpr is the tool for this."
>regexpr("f", txt)
>[1] 21
>attr(,"match.length")
>[1] 1
>
>
>I'm not at all sure what this has to do with the problem, though.
>Here is how I would do it.
>
>1) res <- shell("dir", intern=TRUE).  At least on my NT machine, "dir" is
>a DOS internal command, and is not found by system().
>
>2) The file sizes and file names are at fixed columns, so something like
>(not the right numbers)
>
>fs <- substring(res, 41, 49)
>fn <- substring(res, 51, 58)
>
>will give you the file sizes (as character strings) and file names.
>
>One day fairly soon we will add things like this as cross-platform
>inbuilt functions in R.
>
>--
>Brian D. Ripley,                  ripley at stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272860 (secr)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mandevip at uaslp.mx  Tue Jul 11 10:22:43 2000
From: mandevip at uaslp.mx (Peter B. Mandeville)
Date: Tue, 11 Jul 2000 10:22:43
Subject: [R] postscript()
Message-ID: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx>

I am using RedHat 6.1, the R1.1.0 binary download, and an HP Deskjet 692C.
For some time I have been trying unsuccessfully to integrate R postscript
graphics in LaTex. I consulted the Bug Tracking System. 

In the preamble of the LaTex file (test.tex) I have placed the line

\usepackage{graphicx,color}

and I use

\begin{figure}[htbp]
\begin{center}
\includegraphics[height=4in]{graphic1.ps}
\caption{boxplot}
\end{center}
\end{figure}

to include the graphic in the document. Using the command

xdvi test

I can preview the document and the graph is shown. I use 

dvips test.dvi

to print the document. This arrangement works perfectly with poscript
graphics produced by gimp but the printer hangs at the beginning of the
graphic when I use graphics generated by the postscript command in R.

An example postscript graph is produced in R by

yield <-
c(96,37,58,69,73,81,93,81,79,101,96,102,60,54,78,56,61,69,76,89,88,84,75,68)
variety <- factor(c(rep("I",6),rep("II",6),rep("III",6),rep("IV",6)))
data <- data.frame(variety,yield)
postscript("graphic1.ps",horizontal=F)
boxplot(yield~variety,xlab="Variety",ylab="Yield (bushels per acre)")
dev.off()

It should be noted that I have tried many postscript graphics files
generated in R with the same results. I have also checked the help page and
section 12.6.1 PostScript Diagrams for typeset documents (page 77) in An
Introduction to R and Lipkin's LaTex for Linux. 

The Usage portion of the help page appears to be in error as it has an
unmatched comma in the first line?

I have also tried using the line

postscript("graphic1.ps",horizontal=F,onefile=F) 

with the same results.

However, I can read the graphic with gimp and if I save the file as an
encapsulated postscript file from gimp then the above procedure works. The
R document is 4,837 bytes in length and the gimp document is 5,289,399
bytes in length.

What am I doing wrong?

Peter B.

--
Peter B. Mandeville                             mandevip at deimos.tc.uaslp.mx
Jefe del Depto. de Inform?tica y Bioestad?stica rpe1531 at pasteur.fmed.uaslp.mx 
Facultad de Medicine                            Tel: 48 26-23-45 ext. 232
Universidad Aut?noma de San Luis Potos?         Fax: 48 28-23-52
Av. V. Carranza 2405
Col. Los Filtros
Apartado Postal 145
San Luis Potos?, S.L.P.
78210 M?xico

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From stranda at cofc.edu  Tue Jul 11 18:20:37 2000
From: stranda at cofc.edu (Allan Strand)
Date: 11 Jul 2000 12:20:37 -0400
Subject: [R] warnings associated with logistic regression
In-Reply-To: Prof Brian D Ripley's message of "Tue, 11 Jul 2000 08:00:27 +0100 (BST)"
Message-ID: <86r990ocyy.fsf@linum.cofc.edu>

Hi all,

This is as much as statistical/estimation question as an R-specific
one, but here goes.

I am trying to use logistic regression to predict suitability of
habitats for certain plant species.  The response variable is a binary 
one that indicates whether a particular species is found at a site on
the landscape.  The independent variables represent physical
characteristics of the landscape derived from a GIS.  A significant
proportion of the time I get the following warning messages from
glm():

> lr <- glm(known.v1~elevation+aspect+slope+energy15+energy166+aspect+accum+streams.buffered,family=binomial,data=siteframe)
Warning messages: 
1: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
2: fitted probabilities numerically 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  

Now I can get the algorithm to converge (or at least not produce the
warning) by increasing the number of iterations, but that does not
affect the second warning.  A read of Hosmer and Lemeshow (1989) does not
provide much insight, so I thought that I would post the question  to
the list.

Any comments? Also, I'd be happy to email a dataset that exhibits this
behavior if anyone is curious enough.

Cheers,
A.

-- 
Allan Strand,   Biology    http://linum.cofc.edu
College of Charleston      Ph. (843) 953-8085
Charleston, SC 29424       Fax (843) 953-5453

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 11 18:29:36 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jul 2000 17:29:36 +0100 (BST)
Subject: [R] postscript()
In-Reply-To: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx>
Message-ID: <Pine.GSO.4.05.10007111715150.17580-100000@auk.stats>

On Tue, 11 Jul 2000, Peter B. Mandeville wrote:

> I am using RedHat 6.1, the R1.1.0 binary download, and an HP Deskjet 692C.
> For some time I have been trying unsuccessfully to integrate R postscript
> graphics in LaTex. I consulted the Bug Tracking System. 

How do you get postscript files to an HP Deskjet 692C, which is not a
postscript printer AFAIK?  It looks to me as if that stage has a bug.

> In the preamble of the LaTex file (test.tex) I have placed the line
> 
> \usepackage{graphicx,color}
> 
> and I use
> 
> \begin{figure}[htbp]
> \begin{center}
> \includegraphics[height=4in]{graphic1.ps}
> \caption{boxplot}
> \end{center}
> \end{figure}
> 
> to include the graphic in the document. Using the command
> 
> xdvi test
> 
> I can preview the document and the graph is shown. I use 
> 
> dvips test.dvi

There are lots of dvips options that can be set in configuration files.
Try -K here, to pull comments from the included file.

> to print the document. This arrangement works perfectly with poscript
> graphics produced by gimp but the printer hangs at the beginning of the
> graphic when I use graphics generated by the postscript command in R.
> 
> An example postscript graph is produced in R by
> 
> yield <-
> c(96,37,58,69,73,81,93,81,79,101,96,102,60,54,78,56,61,69,76,89,88,84,75,68)
> variety <- factor(c(rep("I",6),rep("II",6),rep("III",6),rep("IV",6)))
> data <- data.frame(variety,yield)
> postscript("graphic1.ps",horizontal=F)
> boxplot(yield~variety,xlab="Variety",ylab="Yield (bushels per acre)")
> dev.off()

The help page suggests horizontal=FALSE, onefile=FALSE, paper="special".
to produce plots for inclusion in LaTeX.  You might find it easier to plot
on screen and use dev.copy2eps().

> It should be noted that I have tried many postscript graphics files
> generated in R with the same results. I have also checked the help page and
> section 12.6.1 PostScript Diagrams for typeset documents (page 77) in An
> Introduction to R and Lipkin's LaTex for Linux. 

Um, but you did not do what the help page suggested.

> The Usage portion of the help page appears to be in error as it has an
> unmatched comma in the first line?

An un-escaped `%' in fact. Thanks, now fixed.

> 
> I have also tried using the line
> 
> postscript("graphic1.ps",horizontal=F,onefile=F) 
> 
> with the same results.
> 
> However, I can read the graphic with gimp and if I save the file as an
> encapsulated postscript file from gimp then the above procedure works. The
> R document is 4,837 bytes in length and the gimp document is 5,289,399
> bytes in length.

That's made a bitmap.

> What am I doing wrong?

Perhaps nothing. Your example works on RH6.2 with an actual postscript
printer and the latest teTeX.  My guess is that whatever you are using for
converting the file to PCL to print on your printer has a problem.
This is not implausible, as we have found ghostscript (prior to 6.01,
especially prior to 5.50) unreliable when driving an HP Deskjet 895Cxi.

You may be able to help the process by including a file marked as EPSF
(as suggested on the help page) and by removing comments.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 11 18:36:37 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 11 Jul 2000 17:36:37 +0100 (BST)
Subject: [R] warnings associated with logistic regression
In-Reply-To: <86r990ocyy.fsf@linum.cofc.edu>
Message-ID: <Pine.GSO.4.05.10007111730540.17580-100000@auk.stats>

On 11 Jul 2000, Allan Strand wrote:

> Hi all,
> 
> This is as much as statistical/estimation question as an R-specific
> one, but here goes.
> 
> I am trying to use logistic regression to predict suitability of
> habitats for certain plant species.  The response variable is a binary 
> one that indicates whether a particular species is found at a site on
> the landscape.  The independent variables represent physical
> characteristics of the landscape derived from a GIS.  A significant
> proportion of the time I get the following warning messages from
> glm():
> 
> > lr <- glm(known.v1~elevation+aspect+slope+energy15+energy166+aspect+accum+streams.buffered,family=binomial,data=siteframe)
> Warning messages: 
> 1: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> 2: fitted probabilities numerically 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> 
> Now I can get the algorithm to converge (or at least not produce the
> warning) by increasing the number of iterations, but that does not
> affect the second warning.  A read of Hosmer and Lemeshow (1989) does not
> provide much insight, so I thought that I would post the question  to
> the list.
> 
> Any comments? Also, I'd be happy to email a dataset that exhibits this
> behavior if anyone is curious enough.

It usually means that your dataset exhibits complete separation, and so a
logistic regression can fit perfectly. All the diagnostics (p-values etc)
are then (very) unreliable. There are also concepts of partial separation,
where only some of the cases are fitted perfectly, but similar comments
apply.

This is shamefully missed in most statistics books, but is well known in
the AI community, which used to seek such fits (as `perceptrons') and
do again (as `support vector machines') Santer & Duffy is the only
contingency-tables book I know that covers this, as does my (1996) Pattern
Recognition and Neural Networks book.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Tue Jul 11 18:41:51 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Tue, 11 Jul 2000 09:41:51 -0700 (PDT)
Subject: [R] warnings associated with logistic regression
In-Reply-To: <86r990ocyy.fsf@linum.cofc.edu>
Message-ID: <Pine.GSO.4.21.0007110930290.128-100000@atlas.biostat.washington.edu>

On 11 Jul 2000, Allan Strand wrote:

> Hi all,
> 
> This is as much as statistical/estimation question as an R-specific
> one, but here goes.
> 
> I am trying to use logistic regression to predict suitability of
> habitats for certain plant species.  The response variable is a binary 
> one that indicates whether a particular species is found at a site on
> the landscape.  The independent variables represent physical
> characteristics of the landscape derived from a GIS.  A significant
> proportion of the time I get the following warning messages from
> glm():
> 
> > lr <- glm(known.v1~elevation+aspect+slope+energy15+energy166+aspect+accum+streams.buffered,family=binomial,data=siteframe)
> Warning messages: 
> 1: Algorithm did not converge in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> 2: fitted probabilities numerically 0 or 1 occurred in: (if (is.empty.model(mt)) glm.fit.null else glm.fit)(x = X, y = Y,  
> 
> Now I can get the algorithm to converge (or at least not produce the
> warning) by increasing the number of iterations, but that does not
> affect the second warning. 

Well, that's what you'd expect.  The warning says that for certain
combinations of predictors the fitted response is equal to 0 or 1.  This
also means that the maximum of the likelihood is at infinity for some
coefficients. 

This potentially causes numerical problems, at least in that R won't
report infinite coefficients.  It also causes statistical problems,
because the Wald p-values reported are not useful for very large
coefficients. 

Sometimes this happens when you try to fit too many parameters, in which
case you may be able to fix it.  It can also happen when the coefficient
in question really is large and happens by chance to give perfect
predictions. A third possibility is that the probability really is zero
(eg above the treeline you really don't have any trees), in which case you
don't want a logistic regression model.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From root at predict.telepac.pt  Tue Jul 11 19:14:32 2000
From: root at predict.telepac.pt (Jorge Magalhaes)
Date: Tue, 11 Jul 2000 18:14:32 +0100 (WET)
Subject: [R] MANOVA
Message-ID: <Pine.LNX.4.05.10007111811580.3535-100000@predict.telepac.pt>


Hi

I need to compare the performance of two sludge inertization methods. For that i want make a manova Wilks test. 

Description of the experiment:

After the calcination at different temperatures my calcinated sludge are submeted to the lixiviation test. In my tables i show the concentration of the some elements in the extract phase. 

The results:

Method A (calcination at 1100 C)

Chromium	Nickel	Aluminum	Zinc
2.0	3.0	2.7	2.3
2.1	3.1	2.8	2.2
1.9	3.2	2.6	2.3
2.2	3.1	2.8	2.2

Method B (calcination at 1500 C)
 
Chromium	Nickel	Aluminum	Zinc
2.1	3.1	2.6	2.2
2.3	2.9	3.0	2.5
1.9	3.0	2.6	2.2
2.2	3.0	2.9	2.1
2.4	3.1	2.7	2.2
2.3	3.0	2.6	2.1
1.8	2.8	2.7	2.0


Assumptions:

lambda = |W|/(|W + B|)

W is the pooled cross product matrix
|W| is the determinant of W
B  is a matrix of pooled and weighted between-sample mean deviations
T the cross product matrix = W + B

Main Problem:

How i can compute lambda in R environment?

Thanks in advance

Have a nice day

Jorge

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at protogene.com  Tue Jul 11 20:11:52 2000
From: sarthur at protogene.com (Steve Arthur)
Date: Tue, 11 Jul 2000 11:11:52 -0700 (PDT)
Subject: [R] q() problem and more.
Message-ID: <Pine.LNX.4.21.0007111036220.18507-100000@crick.protogene.com>

Hi Rers,

W/o trying to make a long story short (I hope you read that correctly), I
have been working on a nice little R function ...

Somewhere along the line I got an error that refers to a max function in
my function (I think this is a vector vs. scalar issue):

Error in max(..., na.rm = na.rm) : invalid "mode" of argument     

If that's not bad enough, even when I q() R and say I do not want to save
the current workspace and then re-enter R again I am greeting with the
same message in that workspace:

Error in max(..., na.rm = na.rm) : invalid "mode" of argument     

This message also appears in different instances when I try to use the
program, though not the object I think originally produced the error.

Also, from this workspace I can not remove an object from the workspace, I
am greeted with

Error in max(..., na.rm = na.rm) : invalid "mode" of argument     

again when I try rm(ccc).

So what do I want:

I would like to learn how I can salvage my workspace in this situation
(because I have a feeling, knowing R, that this will happen again and
again and is related to some larger problem in R/UNIX I do not yet have a
grasp on).

Under these circumstances, unfortunately, I can not do reliable work with
R from this workspace.

Thanks in advance,

steve
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Tue Jul 11 22:05:03 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Tue, 11 Jul 2000 22:05:03 +0200 (MET DST)
Subject: [R] q() problem and more.
In-Reply-To: <Pine.LNX.4.21.0007111036220.18507-100000@crick.protogene.com>
Message-ID: <Pine.OSF.4.05.10007112157460.5619-100000@mirfak.uio.no>

On Tue, 11 Jul 2000, Steve Arthur wrote:

>If that's not bad enough, even when I q() R and say I do not want to save
>the current workspace and then re-enter R again I am greeting with the
>same message in that workspace:
>
>Error in max(..., na.rm = na.rm) : invalid "mode" of argument     

A wild guess: Do you have a .RData or .Rprofile file in the working
directory or in the home directory?
I would try starting R with
R --no-init-file --no-restore
and see what happens. If that does the trick, it was probably the case,
and then you should go looking for them, renaming as necessary, and go on
from there.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at protogene.com  Tue Jul 11 22:22:03 2000
From: sarthur at protogene.com (Steve Arthur)
Date: Tue, 11 Jul 2000 13:22:03 -0700 (PDT)
Subject: [R] q() problem and more.
In-Reply-To: <Pine.OSF.4.05.10007112157460.5619-100000@mirfak.uio.no>
Message-ID: <Pine.LNX.4.21.0007111314470.18507-100000@crick.protogene.com>

Hi,

I started playing around with my workspace (see other e-mail for
background), by typing statements like, c <- c("hello world"), in other
words overwriting one of the objects I could not rm(), then I tried
rm()ing it and the object disappeared, then I was able the rm() other
objects I did not want, and the error message stopped appearing (I forget
what it was), and I was able to work on my function, and statistically it
works.  It is a very simple outlier detect test by Grubb.  Is there any
way to submit functions like these to the R development crew, I would
probably be a useful low-level test and much better than Dixon's test.  I
am going to work on the Grubb test for two outliers.  A good way to learn
R.

Thanks for the help, I am not sure what happened there,

steve


On Tue, 11 Jul 2000, Kjetil Kjernsmo wrote:

> On Tue, 11 Jul 2000, Steve Arthur wrote:
> 
> >If that's not bad enough, even when I q() R and say I do not want to save
> >the current workspace and then re-enter R again I am greeting with the
> >same message in that workspace:
> >
> >Error in max(..., na.rm = na.rm) : invalid "mode" of argument     
> 
> A wild guess: Do you have a .RData or .Rprofile file in the working
> directory or in the home directory?
> I would try starting R with
> R --no-init-file --no-restore
> and see what happens. If that does the trick, it was probably the case,
> and then you should go looking for them, renaming as necessary, and go on
> from there.
> 
> Best,
> 
> Kjetil
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ehrbar at econ.utah.edu  Tue Jul 11 22:56:31 2000
From: ehrbar at econ.utah.edu (Hans Ehrbar)
Date: Tue, 11 Jul 2000 14:56:31 -0600 (MDT)
Subject: [R] Molecule-like Notation for Arrays -- anyone interested?
Message-ID: <200007112056.OAA28824@marx.econ.utah.edu>



At the APL conference in Berlin on July 24 I am giving a
talk about about a molecule-like notation for arrays for
which some prototype code is available in R.  It is a
graphical notation for arrays of higher rank which makes the
structure of arrays and their various concatenations
intuitively apparent, and which, in my judgment, would make
an excellent interface for array programming languages.  I
originally developed it for teaching, but when I tried to
firm it up mathematically it became clear that there are a
number of fundamental issues involved which I do not have
the time to work through.  Therefore my talk contains the
invitations for others to take this line of research over.
I would like to extent this invitation to this community
here as well.  I think it would be a nice dissertation in
math, perhaps for someone who is interested in category
theory, and I also think an implementation of this would be
an interesting addition for R/S, but of course I am biased.
I apologize for offering up my unfinished business for
others to continue; I am doing it here in the hope that the
work I did put in will somehow benefit the free software
movement.  My talk is available at
http://www.econ.utah.edu/ehrbar/arca.pdf (2.3 Kbytes).

Here is the abstract as it appears at the conference web site
http://stat.cs.tu-berlin.de/APL-Berlin-2000/index.htm :
A graph-theoretical notation for array concatenation
represents arrays as bubbles with arms sticking out, each
arm with a specified number of ``fingers.'' Bubbles with one
arm are vectors, with two arms matrices, etc.  Arrays can
only hold hands, i.e., ``contract'' along a given pair of
arms, if the arms have the same number of fingers.  There are
three array concatenations: outer product, contraction, and
direct sum.  Special arrays are the unit vectors and the
diagonal array, which is the branching point of several
arms.  Outer products and contractions are independent of the
order in which they are performed and distributive with
respect to the direct sum.  Examples are given where this
notation clarifies mathematical proofs.

Hans Ehrbar

-- 
Hans G. Ehrbar   http://www.econ.utah.edu/ehrbar   ehrbar at econ.utah.edu
Economics Department, University of Utah     (801) 581 7797 (my office)
1645 Campus Center Dr., Rm 308               (801) 581 7481 (econ office)
Salt Lake City    UT 84112-9300              (801) 585 5649 (FAX)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ihaka at stat.auckland.ac.nz  Tue Jul 11 23:08:46 2000
From: ihaka at stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 12 Jul 2000 09:08:46 +1200
Subject: [R] postscript()
In-Reply-To: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx>; from Peter B. Mandeville on Tue, Jul 11, 2000 at 10:22:43AM +0000
References: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx>
Message-ID: <20000712090846.A25824@stat1.stat.auckland.ac.nz>

On Tue, Jul 11, 2000 at 10:22:43AM +0000, Peter B. Mandeville wrote:
> I am using RedHat 6.1, the R1.1.0 binary download, and an HP Deskjet 692C.
> For some time I have been trying unsuccessfully to integrate R postscript
> graphics in LaTex. I consulted the Bug Tracking System. 

I have to concur with Brian.  I have an HP 810C here on my desk beside
me, which I drive using apsfilter and teTeX 1.07 under FreeBSD, and I
have never seen a TeX/Postscript problem.

If you convert the entire document to PostScript, can you preview it
on screen?  If there are problems, you should see some diagnostics for it.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From partha_bagchi at hgsi.com  Tue Jul 11 23:29:07 2000
From: partha_bagchi at hgsi.com (partha_bagchi@hgsi.com)
Date: Tue, 11 Jul 2000 17:29:07 -0400
Subject: [R] q() problem and more.
Message-ID: <OF3ECB432D.67FC6C25-ON85256919.0075C5B8@hgsi.com>


I would add that if you have really named the object c as you do below,
then all kind of things can happen as "c" is an internal function.  I would
avoid using single letter names like c, f, t etc. for my object names.
Partha.



                                                                                                                  
                    Steve Arthur                                                                                  
                    <sarthur at protogene.c        To:     Kjetil Kjernsmo <kjetil.kjernsmo at astro.uio.no>            
                    om>                         cc:     r-help-digest at stat.math.ethz.ch                           
                    Sent by:                    Subject:     Re: [R] q() problem and more.                        
                    owner-r-help at stat.ma                                                                          
                    th.ethz.ch                                                                                    
                                                                                                                  
                                                                                                                  
                    07/11/00 04:22 PM                                                                             
                                                                                                                  
                                                                                                                  




Hi,

I started playing around with my workspace (see other e-mail for
background), by typing statements like, c <- c("hello world"), in other
words overwriting one of the objects I could not rm(), then I tried
rm()ing it and the object disappeared, then I was able the rm() other
objects I did not want, and the error message stopped appearing (I forget
what it was), and I was able to work on my function, and statistically it
works.  It is a very simple outlier detect test by Grubb.  Is there any
way to submit functions like these to the R development crew, I would
probably be a useful low-level test and much better than Dixon's test.  I
am going to work on the Grubb test for two outliers.  A good way to learn
R.

Thanks for the help, I am not sure what happened there,

steve


On Tue, 11 Jul 2000, Kjetil Kjernsmo wrote:

> On Tue, 11 Jul 2000, Steve Arthur wrote:
>
> >If that's not bad enough, even when I q() R and say I do not want to
save
> >the current workspace and then re-enter R again I am greeting with the
> >same message in that workspace:
> >
> >Error in max(..., na.rm = na.rm) : invalid "mode" of argument
>
> A wild guess: Do you have a .RData or .Rprofile file in the working
> directory or in the home directory?
> I would try starting R with
> R --no-init-file --no-restore
> and see what happens. If that does the trick, it was probably the case,
> and then you should go looking for them, renaming as necessary, and go on
> from there.
>
> Best,
>
> Kjetil
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sato at telomere.lanl.gov  Wed Jul 12 00:23:41 2000
From: sato at telomere.lanl.gov (Tomo Sato)
Date: Tue, 11 Jul 2000 16:23:41 -0600
Subject: No subject
Message-ID: <v04210101b5914e3e5f61@[128.165.28.155]>

Hello.

I'm still a beginner at R, and I was having difficulties assigning 
values to specific elements of an array from functions.  For example, 
if I were using the array x in the main function, I could not change 
x[1,2] from a helper function.  I used <<-, but that did not seem to 
work.  If you know what I am doing wrong, please help me.

Thank you.
Tomo Sato
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From hodgess at uhddx01.dt.uh.edu  Wed Jul 12 02:06:30 2000
From: hodgess at uhddx01.dt.uh.edu (Erin Hodgess)
Date: Tue, 11 Jul 2000 19:06:30 -0500
Subject: [R] function via source or fix
Message-ID: <200007120006.AA24748@uhddx01.dt.uh.edu>

Hello R People:

Suppose I create a function, x.e, via the fix command:

> x.e <- fix(x.e)

When I type in x.e, the function code appears, along
with the name/number of the environment.

However, if I create a function, y.e, and source it in, when
I type in y.e, the function code only displays(no
environment).

Why is this, please?  (It's not a bug....I just wondered).

I am using R-1.1.0 for Windows.

Thanks!

Sincerely,
Erin M. Hodgess, Ph.D.
Associate Professor
Department of Computer and Mathematical Sciences
University of Houston - Downtown
One Main Street 
Houston, TX 77002
e-mail: hodgess at uhddx01.dt.uh.edu




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bgrace at metz.une.edu.au  Wed Jul 12 05:37:07 2000
From: bgrace at metz.une.edu.au (Blair Grace)
Date: Wed, 12 Jul 2000 13:37:07 +1000
Subject: [R] zero-inflated poisson
Message-ID: <3.0.1.32.20000712133707.006a46f8@metz.une.edu.au>

Hi all,

Does a (free) script to do a ZIP lm exist?

I'm running R1001 on Windows 97. Hope this hasn't been asked before.

Cheers,

Blair


Blair Grace

Postgraduate
Agronomy & Soil Science
School of Rural Science & Natural Resources
University of New England
Armidale NSW 2351
CRC Weed Management Systems

Ph (+61)(02) 6773 3691
Fax(+61)(02) 6773 3238
 
Home page   http://www.une.edu.au/agronomy/weeds/saffron/saffron.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jmarca at translab.its.uci.edu  Wed Jul 12 05:57:29 2000
From: jmarca at translab.its.uci.edu (James Edward Marca)
Date: Tue, 11 Jul 2000 20:57:29 -0700
Subject: [R] postscript()
In-Reply-To: <Pine.GSO.4.05.10007111715150.17580-100000@auk.stats>; from ripley@stats.ox.ac.uk on Tue, Jul 11, 2000 at 05:29:36PM +0100
References: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx> <Pine.GSO.4.05.10007111715150.17580-100000@auk.stats>
Message-ID: <20000711205729.A263@papa.home>

On Tue, Jul 11, 2000 at 05:29:36PM +0100, Prof Brian D Ripley wrote:
> On Tue, 11 Jul 2000, Peter B. Mandeville wrote:
> 
> > For some time I have been trying unsuccessfully to integrate R postscript
> > graphics in LaTex. I consulted the Bug Tracking System. 
> ... 
> 
> You may be able to help the process by including a file marked as EPSF
> (as suggested on the help page) and by removing comments.
> 
I also had problems integrating R-generated files named *.ps, but when I 
dumped them as *.eps files (on reading help), they worked much 
better in LaTeX.

My setup is on Win98, running MikTeX/LaTeX (an older version, but quite 
stable), and using Ghostscript6.01/GSView 2.9 to drive a Lexmark 2050 color
jetprinter using the mswinpr2 printer option in GSView.

james marca
Institute of Transportation Studies
UC Irvine

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Wed Jul 12 08:33:36 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 12 Jul 2000 08:33:36 +0200 (CEST)
Subject: [R] buglet in fix() [was "function via source or fix"]
In-Reply-To: <200007120006.AA24748@uhddx01.dt.uh.edu>
References: <200007120006.AA24748@uhddx01.dt.uh.edu>
Message-ID: <14700.4416.162478.1823@gargle.gargle.HOWL>

>>>>> "Erin" == Erin Hodgess <hodgess at uhddx01.dt.uh.edu> writes:

    Erin> Suppose I create a function, x.e, via the fix command:

(ESS users ESS don't ever do this, but still ...)

    >> x.e <- fix(x.e)

    Erin> When I type in x.e, the function code appears, along
    Erin> with the name/number of the environment.

Ok, in the above it was important that there's no *existing* object x.e 
beforehand.

Note that the idea about  fix() is that you only have to write

     fix(x.e)

But your problem remains :

    > fix(newerf)
    Waiting for Emacs...Done	--- I have  options(editor = "emacsclient")
    > newerf
    function ()
    {
    ## newer
    }
    <environment: 0x40862004>
    > environment(newerf)
    <environment: 0x40862004>
    > ls(env=environment(newerf))
    [1] "subx" "x"   
    >

I.e. it got the environment of the function fix -- I think this is clearly
a bug  CC'ed to  R-bugs

    Erin> However, if I create a function, y.e, and source it in, when
    Erin> I type in y.e, the function code only displays(no
    Erin> environment).

    Erin> Why is this, please?  (It's not a bug....I just wondered).

it *is* a bug, I think

    Erin> I am using R-1.1.0 for Windows.
same for Unix

    Erin> Thanks!
thank you for the report!

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From peter.cameron at enscitech.com  Wed Jul 12 11:00:08 2000
From: peter.cameron at enscitech.com (Peter Cameron)
Date: Wed, 12 Jul 2000 10:00:08 +0100
Subject: [R] Compiling R on RS6000 AIX 4.3
Message-ID: <002101bfebdf$ab6dd700$12e1989e@baldrick>

Hi,

I've been searching through the R help archives and came across only one AIX
compilation question in March, which received no public responses. I'm
currently having the same problems with the "Illegal instruction" and core
dump of running R 1.0.1 on AIX 4.3.

Firstly, the R distribution was missing some FORTRAN routines, which I found
on the net and added, by modifying src/appl/Makefile.in and
src/appl/ROUTINES (otherwise ld complains about missing symbols). The ten
routines were: dasum, daxpy, dcopy, ddot, dnrm2, drot, drotg, dscal, dswap
and idamax. (I found this strange. I would have thought that all necessary
core files should have been included??)

It then compiled with gcc 2.95.2 and g77, but the 'make test' dumps core,
when running R.

I've just tried compiling R 1.1.0, and it's throwing out a lot of errors
about missing C routine symbols.

Has anyone compiled and succesfully run R on AIX 4.3.3?

Cheers,

Peter


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Wed Jul 12 11:14:34 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 12 Jul 2000 11:14:34 +0200 (CEST)
Subject: [R] Compiling R on RS6000 AIX 4.3
In-Reply-To: <002101bfebdf$ab6dd700$12e1989e@baldrick>
References: <002101bfebdf$ab6dd700$12e1989e@baldrick>
Message-ID: <14700.14074.532567.886857@gargle.gargle.HOWL>

>>>>> "Peter" == Peter Cameron <peter.cameron at enscitech.com> writes:

    Peter> I've been searching through the R help archives and came across
    Peter> only one AIX compilation question in March, which received no
    Peter> public responses. I'm currently having the same problems with
    Peter> the "Illegal instruction" and core dump of running R 1.0.1 on
    Peter> AIX 4.3.

    Peter> Firstly, the R distribution was missing some FORTRAN routines,
No!
You didn't search enough.

    Peter> which I found on the net and added, by modifying
    Peter> src/appl/Makefile.in and src/appl/ROUTINES (otherwise ld
    Peter> complains about missing symbols). The ten routines were: dasum,
    Peter> daxpy, dcopy, ddot, dnrm2, drot, drotg, dscal, dswap and
    Peter> idamax. (I found this strange. I would have thought that all
    Peter> necessary core files should have been included??)

Yes, they are all in src/appl/blas.f  
(since they are part of famous BLAS).


    Peter> It then compiled with gcc 2.95.2 and g77, but the 'make test'
    Peter> dumps core, when running R.

    Peter> I've just tried compiling R 1.1.0, and it's throwing out a lot
    Peter> of errors about missing C routine symbols.

Consider sending a proper bug report to R-bugs or R-devel

    Peter> Has anyone compiled and succesfully run R on AIX 4.3.3?
(wondering too)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richards at pci.upmc.edu  Wed Jul 12 11:22:16 2000
From: richards at pci.upmc.edu (Richards, Tom)
Date: Wed, 12 Jul 2000 05:22:16 -0400
Subject: [R] getAttrib() and setAttrib()
Message-ID: <5B9B19C8A522D411A8EC00A0C99D6A9A02E560@mail.nsabp.pitt.edu>

Hello:
 
I am looking at "Writing R Extensions", subsection 3.6.4, using R 1.1.0,
under NT4.0, with VC++ 6.0.  Under these conditions I can use the first
method given for coding the out() function, but not the second, which uses
getAttrib() and setAttrib().  I hope that someone will tell me how this
second method can also be made to work.  Details follow, for anyone kind
enough to help.  I include the actual code lifted from the manual, so that
you can compile, dyn.load() and tell me that it works fine for you!
 
The R function of interest is the outer product of two vectors:
 
out <- function(x, y) .Call("out", as.double(x), as.double(y))
 
Define out() as simply (straight from the text):
 
SEXP out(SEXP x, SEXP y)
{
 int i, j, nx, ny;
 double tmp;
 SEXP ans;
 nx = length(x); ny = length(y);
 PROTECT(ans = allocMatrix(REALSXP, nx, ny));
 for(i = 0; i < nx; i++) {
  tmp = REAL(x)[i];
  for(j = 0; j < ny; j++)
   REAL(ans)[i + nx*j] = tmp * REAL(y)[j];
 }
 UNPROTECT(1);
 return(ans);
}
 
Compiling, I get a correct answer,
 
> out(c(1,2),c(3,4))
 
     [,1] [,2]
[1,]    3    4
[2,]    6    8

All is well.  The following function (second method with lines commented)
also works:
 
SEXP out(SEXP x, SEXP y)
{
 int i, j, nx, ny;
 double tmp;
 SEXP ans, dim, dimnames;
 nx = length(x); ny = length(y);
 PROTECT(ans = allocVector(REALSXP, nx*ny));
 for(i = 0; i < nx; i++) {
  tmp = REAL(x)[i];
  for(j = 0; j < ny; j++)
   REAL(ans)[i + nx*j] = tmp * REAL(y)[j];
 }
 PROTECT(dim = allocVector(INTSXP, 2));
 INTEGER(dim)[0] = nx; INTEGER(dim)[1] = ny;
// setAttrib(ans, R_DimSymbol, dim);
 PROTECT(dimnames = allocVector(VECSXP, 2));
// VECTOR(dimnames)[0] = getAttrib(x, R_NamesSymbol);
// VECTOR(dimnames)[1] = getAttrib(y, R_NamesSymbol);
// setAttrib(ans, R_DimNamesSymbol, dimnames);
 UNPROTECT(3);
 return(ans);
}

Here is the output, a vector:
 
> out(c(1,2),c(3,4))

[1] 3 6 4 8
 
But when I uncomment any one of the 4 lines which use getAttrib() or
setAttrib(), R crashes for me, with a Windows message box.  Uncommenting the
first such line, for example, crashes R, with a message box:
 
The instruction at "0x<HEX address>" refernced memory at "0x<another
address>".  The memory could not be "read".
 
Is there anything I can do differently to make these attribute functions
work?  thanks in advance for your help.
 
                                                        Tom Richards
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000712/9cba9879/attachment.html

From ripley at stats.ox.ac.uk  Wed Jul 12 12:45:04 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Jul 2000 11:45:04 +0100 (BST)
Subject: [R] getAttrib() and setAttrib()
In-Reply-To: <5B9B19C8A522D411A8EC00A0C99D6A9A02E560@mail.nsabp.pitt.edu>
Message-ID: <Pine.GSO.4.05.10007121134430.6391-100000@auk.stats>

On Wed, 12 Jul 2000, Richards, Tom wrote:

> Hello:
>  
> I am looking at "Writing R Extensions", subsection 3.6.4, using R 1.1.0,
> under NT4.0, with VC++ 6.0.  Under these conditions I can use the first
> method given for coding the out() function, but not the second, which uses
> getAttrib() and setAttrib().  I hope that someone will tell me how this
> second method can also be made to work.  Details follow, for anyone kind
> enough to help.  I include the actual code lifted from the manual, so that
> you can compile, dyn.load() and tell me that it works fine for you!

Your problem is specific to the compiler/OS you are using.  The standard
R for Windows system using mingw32 gcc has a workaround that you need
to work out how to apply to your system.

[...]

R_DimSymbol and R_DimNamesSymbol are exported variables in R.dll. Using
gcc, we include globalvar.h to map them correctly to imported symbols. You
will have to do something similar using VC++6.0.  I've forgotten exactly
what, and I am sure you can read the manual as well as I can.  (Looking
at front-ends/rtest.c suggests that 

__declspec(dllimport) SEXP R_DimSymbol;
__declspec(dllimport) SEXP R_DimNamesSymbol; 

are needed, so you will probably need to include a modified Rinternals.h.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bitwrit at ozemail.com.au  Wed Jul 12 14:18:26 2000
From: bitwrit at ozemail.com.au (Jim Lemon)
Date: Wed, 12 Jul 2000 22:18:26 +1000
Subject: [R] postscript()
References: <3.0.5.16.20000711102243.21cf9076@deimos.tc.uaslp.mx>
Message-ID: <396C6211.ED5B781D@ozemail.com.au>

"Peter B. Mandeville" wrote:

> I am using RedHat 6.1, the R1.1.0 binary download, and an HP Deskjet 692C.
> For some time I have been trying unsuccessfully to integrate R postscript
> graphics in LaTex. I consulted the Bug Tracking System.
> ...
> What am I doing wrong?
>
> Peter B.

I use almost the same setup (excepting R is compiled from source and the printer
is an HP Deskjet 690C) and it works brilliantly (better, in fact, than my Deskjet
1600CM which has a Postscript interpreter).  Unless I am mistaken, you didn't
mention whether you could print the R Postscript output directly, e.g.

postscript(...)
plot(...)
dev.off()
system("lpr"...)

 If so, it's not R causing the trouble.  The GIMP, like most other image
manipulation programs, simply interprets the Postscript and outputs a raster
image. which tends to be less likely to be screwed up by downstream programs.

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From garbade at psy.uni-muenchen.de  Wed Jul 12 16:04:07 2000
From: garbade at psy.uni-muenchen.de (Sven Garbade)
Date: Wed, 12 Jul 2000 16:04:07 +0200
Subject: [R] Removing Objects from workspace
Message-ID: <396C7AD7.33B8CF8D@psy.uni-muenchen.de>

Hi all,

how can I remove objects from the workspace which starts with a certain
pattern, e.g. lm (lm1, lm2, lm3 etc). Wildcards won?t work.

Thanks, Sven
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Wed Jul 12 16:18:24 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Wed, 12 Jul 2000 10:18:24 -0400
Subject: [R] NNET ?
References: <Pine.GSO.4.05.10007121134430.6391-100000@auk.stats>
Message-ID: <022401bfec0c$0b40ebf0$0201a8c0@Workgroup>

Hi,

> version
platform Windows
arch     x86
os       Win32   ### (NT 4.0 sp 6)
system   x86, Win32
status
major    1
minor    0.1
year     2000
month    April
day      14
language R

I'm running examples of nnet library under the above setup. I can't get the
trace to work (I just get the weights count). I would expect some output
during training, is this a bug or I'm I doing something wrong?
Yes I set trace=T for the call to nnet.

Regards

YG

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From plummer at iarc.fr  Wed Jul 12 16:29:14 2000
From: plummer at iarc.fr (Martyn Plummer)
Date: Wed, 12 Jul 2000 16:29:14 +0200 (CEST)
Subject: [R] Removing Objects from workspace
In-Reply-To: <396C7AD7.33B8CF8D@psy.uni-muenchen.de>
Message-ID: <XFMail.000712162914.plummer@iarc.fr>

On 12-Jul-00 Sven Garbade wrote:
> Hi all,
> 
> how can I remove objects from the workspace which starts with a certain
> pattern, e.g. lm (lm1, lm2, lm3 etc). Wildcards wont work.

rm(list=objects(pattern="^lm"))

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Wed Jul 12 17:04:54 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 12 Jul 2000 08:04:54 -0700 (PDT)
Subject: [R] Compiling R on RS6000 AIX 4.3
In-Reply-To: <14700.14074.532567.886857@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0007120757050.10755-100000@atlas.biostat.washington.edu>

On Wed, 12 Jul 2000, Martin Maechler wrote:

> >>>>> "Peter" == Peter Cameron <peter.cameron at enscitech.com> writes:
> 
>     Peter> I've been searching through the R help archives and came across
>     Peter> only one AIX compilation question in March, which received no
>     Peter> public responses. I'm currently having the same problems with
>     Peter> the "Illegal instruction" and core dump of running R 1.0.1 on
>     Peter> AIX 4.3.
> 
>     Peter> Firstly, the R distribution was missing some FORTRAN routines,
> No!
> You didn't search enough.

I think it's more complicated than that.  The last time I tried compiling
R on AIX there was a configure problem with the BLAS functions.  The
library libblas existed but the functions had the wrong names (due to
differences in use of underscores by fortran compilers). This meant that R
didn't compile its own BLAS but couldn't link to the system one either. I
thought this had been fixed, though. 

I got it to work using gcc/g77 and compiling --without-blas.  I don't know
if the people at CMU who use AIX have more options that work.

There is a real problem with some C/Fortran combinations on AIX.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Wed Jul 12 17:03:36 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Wed, 12 Jul 2000 17:03:36 +0200 (MET DST)
Subject: [R] Removing Objects from workspace
In-Reply-To: <396C7AD7.33B8CF8D@psy.uni-muenchen.de>
Message-ID: <Pine.OSF.4.05.10007121701350.2170-100000@alnair.uio.no>

On Wed, 12 Jul 2000, Sven Garbade wrote:

>how can I remove objects from the workspace which starts with a certain
>pattern, e.g. lm (lm1, lm2, lm3 etc). Wildcards won?t work.

How about:

rm(list=objects(pattern="^lm.*"))

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From peter.cameron at enscitech.com  Wed Jul 12 17:21:54 2000
From: peter.cameron at enscitech.com (Peter Cameron)
Date: Wed, 12 Jul 2000 16:21:54 +0100
Subject: [R] Compiling R on RS6000 AIX 4.3
References: <Pine.GSO.4.21.0007120757050.10755-100000@atlas.biostat.washington.edu>
Message-ID: <000801bfec14$ea505ee0$12e1989e@baldrick>

> I think it's more complicated than that.  The last time I tried compiling
> R on AIX there was a configure problem with the BLAS functions.  The
> library libblas existed but the functions had the wrong names (due to
> differences in use of underscores by fortran compilers). This meant that R
> didn't compile its own BLAS but couldn't link to the system one either. I
> thought this had been fixed, though.

After being told that all these functions were in the blas.f file in
src/appl, I modified Makefile.in by adding:

<tab>blas.f<space>\

immediately after the SOURCES_F = \ line.

This solved that compilation problem.


> There is a real problem with some C/Fortran combinations on AIX.

I've now successfully compiled version 0.90.0, tested and installed it.
Unfortunately, I haven't the time at the moment to further investigate the
compilation and execution failures of the latest releases.

Cheers,
Peter


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 12 18:14:59 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 12 Jul 2000 17:14:59 +0100 (BST)
Subject: [R] NNET ?
In-Reply-To: <022401bfec0c$0b40ebf0$0201a8c0@Workgroup>
Message-ID: <Pine.GSO.4.05.10007121713090.12102-100000@auk.stats>

On Wed, 12 Jul 2000, Yves Gauvreau wrote:

> Hi,
> 
> > version
> platform Windows
> arch     x86
> os       Win32   ### (NT 4.0 sp 6)
> system   x86, Win32
> status
> major    1
> minor    0.1
> year     2000
> month    April
> day      14
> language R
> 
> I'm running examples of nnet library under the above setup. I can't get the
> trace to work (I just get the weights count). I would expect some output
> during training, is this a bug or I'm I doing something wrong?
> Yes I set trace=T for the call to nnet.

You will only see the trace if you use Rterm, not Rgui. It will get
changed some day soon.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at protogene.com  Thu Jul 13 02:13:53 2000
From: sarthur at protogene.com (Steve Arthur)
Date: Wed, 12 Jul 2000 17:13:53 -0700 (PDT)
Subject: [R] q() again and again and again
Message-ID: <Pine.LNX.4.21.0007121650240.22844-100000@crick.protogene.com>

Rer's,

Get ready for this intellectual fest!

Linux i686 2.2.14-1mdklinus
R-1.0.1

When I try to q() from my workspace, I get the following responses:

###############################
> q()
Save workspace image? [y/n/c]: y Error: can't save data -- unable to open
./.RData

then:

> save.image()
Error in save(list, file, ascii, oldstyle) :
        unable to open file

and finally:

> save(list = ls(all=TRUE), file = ".RData")
Error in save(list, file, ascii, oldstyle) :
        unable to open file  

##############################

What I get from this is that R is "unable to open file" .RData

When I did an ls -la on my directory I got the dates shown below which
indicate that the .RData and .Rhistory files had not been touched since
7:01 last night.

  -rw-r--r-- 1 sarthur users 452553 Jul 11 19:01 .RData
  -rw------- 1 sarthur users   9037 Jul 11 19:01 .Rhistory

What gives?

Thanks to Kjetil, I now know that I have .RData, and .Rhistory files.  The
.RData file looks like a mess when you open it though?

I hope someone can fill in some of the blanks on how all these R concepts
work together if you think you can add more than what is provided in the
current R documentation.

Oh, one further question, what is the best way to install R-1.1.0 on top
of R-1.0.1?

Thanks,

steve

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 13 04:33:25 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 13 Jul 2000 12:33:25 +1000
Subject: [R] chron printing and plotting
Message-ID: <61411576E951D211AF330008C7245DD905BB06A4@ntmsg0005.corpmail.telstra.com.au>

g'day R guru's.

Could someone help me out with 2 'chron' questions please (I've been using
the 'date' package but I need time handling)?  The doco doesn't cover
everything and I'm too green to understand all the code.

When my chron object is printed using 'print' the output is not in the
format requested by the default attributes.  What am I doing wrong?

> attributes(my.date)
$format
[1] "d/m/y" "h:m:s"

$origin
month   day  year 
    1     1  1970 

$class
[1] "chron" "dates" "times"

> print(times(my.date))
Time in days:
  [1] 11138.92 11138.92 11138.92 11138.92 11138.92 11138.92 11138.92
11138.92
  [9] 11138.92 11138.92 11138.92 11138.92 11138.92 11138.92 11138.92
11138.92

Also, I want my plot's x-axis to show the time only - without the date part.
If I plot the chron object then times aren't shown, but if I use plot on the
time object only, the x-axis is sorted incorrectly.

> times(c("22:00:00","23:00:00","0:00:00"))
[1] 22:00:00 23:00:00 00:00:00
> plot(times(c("22:00:00","23:00:00","0:00:00")))

thanks,
John Strumila


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ray.Brownrigg at mcs.vuw.ac.nz  Thu Jul 13 06:30:55 2000
From: Ray.Brownrigg at mcs.vuw.ac.nz (Ray Brownrigg)
Date: Thu, 13 Jul 2000 16:30:55 +1200 (NZST)
Subject: [R] Re: R-1.1.0 on Alpha?
Message-ID: <200007130430.QAA27598@aqua.mcs.vuw.ac.nz>

I asked:
> Has anyone succeeded in compiling R-1.1.0 on a Digital (Compaq) Alpha
> running OSF4.0F (or E)?  Everything seems to compile OK (except the
> frequent "Warning:  Unresolved:" at link time - this threw me off the
> scent for a while!), but then at run time I get:
> 
> Fatal error: The X11 shared library could not be loaded.
>   The error was dlopen: cannot load ....../R-1.1.0/bin/R_X11.so 
> 
Well I've finally solved it - it was an 'rpath' problem!

For completeness, here are the changes I had to make to config.site to
get R running on Digital Unix 4.0F, using f77 and gcc.  Systems with g77
may not have some of these problems.

1) Add:
CPPFLAGS="-I/usr/local/include -I/usr/X11R6/include"
otherwise there are problems compiling tcltk

2) Add:
LIBS="-L../../.. -L/usr/local/lib"
to include a 'private' copy of readline.a, otherwise I get the following
when linking R.bin:
ld:
Object file format error in:
/usr/local/lib/libreadline.a(tilde.o):local_is_complete:
 iaux(21) > iauxMax(14) for obj /usr/local/lib/libreadline.a(tilde.o)
fort: Severe: Failed while trying to link. 

As far as I can remember, my 'private' libreadline.a has the -g option
specified, whereas the system one does not.  [So this may not be a
problem in other systems.]

3) Add:
MAINLDFLAGS="-Wl,-rpath -Wl,/usr/X11R6/lib"
This is the key to setting appropriate shared library paths in the main
program.  Under R-1.0.0 this flag was known as LDFLAGS.

NOTE:
There is a minor 'feature' in the configure script, which results in the
message:
if: Expression syntax.
In line 6213 there is:
  if test "`which ${cc}`" = "`which ${CC}`"; then 
The "which ${cc}" within this is what issues the error, because $cc is
the string
"gcc -fpcc-struct-return" and the command:
which gcc -fpcc-struct-return
from a Bourne shell will return that message.  Interestingly,
$ which -a
does not issue the message, but
$ which -f
does!  This looks like a weird bug to me.  [On a Sun Solaris system we
get:
$ which -f
if: Missing file name
which is just as strange.]

Ray Brownrigg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 13 07:08:39 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 13 Jul 2000 15:08:39 +1000
Subject: [R] chron printing and plotting
Message-ID: <61411576E951D211AF330008C7245DD905BB06F4@ntmsg0005.corpmail.telstra.com.au>

whoops, I've just seen the previous posting by Jack Lewis and his wonderful
code.

thanks,
John Strumila

-----Original Message-----
From: Strumila, John [mailto:John.Strumila at team.telstra.com]
Sent: Thursday, 13 July 2000 12:33
To: r-help at stat.math.ethz.ch
Subject: [R] chron printing and plotting


g'day R guru's.

Could someone help me out with 2 'chron' questions please ...

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pedro.aphalo at joensuu.fi  Thu Jul 13 08:19:36 2000
From: pedro.aphalo at joensuu.fi (Pedro J. Aphalo)
Date: Thu, 13 Jul 2000 09:19:36 +0300
Subject: [R] Is this a bug?
Message-ID: <396D5F78.6D40CB3F@joensuu.fi>

I am new to R (and S) and I hope someone on the list can help me out. I
find the following behaviour surprising, is it a bug or a feature?
(looks like a bug to me)

R Version 1.1.0, Windows (x86, Win32) June 15, 2000
OS Windows 95

cat.test <- function(){
    summary(c(1:20))
        
    cat("test\n")
    }

summary produces no output, just "test" appears on RGUI's window. 

If the line cat("test\n") is commented out, summary produces its normal
output.

Same lack of  summary output on Rterm, but command prompt does not
reappear and Rterm freezes.
With the line cat("test\n") commented out everything works fine.

The behaviour for RGUI is the same whether the function is sourced from
a file or defined at the command prompt. With Rterm I have not yet found
how to type in brackets with a Finnish keyboard, so the test was done by
sourcing a file.

Pedro.

-- 

===============================================================
 Pedro J. Aphalo
 University of Joensuu
 Faculty of Forestry
 P.O. Box 111, FIN-80101 Joensuu, FINLAND
 mailto:pedro.aphalo at joensuu.fi
 http://cc.joensuu.fi/~aphalo/pedro.html
 fax: +358 13 251 4444
 tel: +358 13 251 4406                         ,,,^..^,,,
================================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 13 08:45:31 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Jul 2000 07:45:31 +0100 (BST)
Subject: [R] Is this a bug?
In-Reply-To: <396D5F78.6D40CB3F@joensuu.fi>
Message-ID: <Pine.GSO.4.05.10007130738010.470-100000@auk.stats>

On Thu, 13 Jul 2000, Pedro J. Aphalo wrote:

> I am new to R (and S) and I hope someone on the list can help me out. I
> find the following behaviour surprising, is it a bug or a feature?
> (looks like a bug to me)

No, it is a feature.  summary does not print anything. If you want results
from within a function you need to explicitly print them. However, a
function returns the result of evaluating the last expression, and objects
at the session level (only) are automatically printed.

> R Version 1.1.0, Windows (x86, Win32) June 15, 2000
> OS Windows 95
> 
> cat.test <- function(){
>     summary(c(1:20))
>         
>     cat("test\n")
>     }
> 
> summary produces no output, just "test" appears on RGUI's window. 

(c(1:20) is the same as 1:20.)

> If the line cat("test\n") is commented out, summary produces its normal
> output.
> 
> Same lack of  summary output on Rterm, but command prompt does not
> reappear and Rterm freezes.
> With the line cat("test\n") commented out everything works fine.
> 
> The behaviour for RGUI is the same whether the function is sourced from
> a file or defined at the command prompt. With Rterm I have not yet found
> how to type in brackets with a Finnish keyboard, so the test was done by
> sourcing a file.

Well, that's not the same thing. Typing your example at interactive rterm
session certainly works here.  If you have a reproducible example that
freezes Rterm, please send in a bug report, and we will try to reproduce
it (and if we can reproduce it, try to fix it).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 13 09:00:00 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 13 Jul 2000 08:00:00 +0100 (BST)
Subject: [R] Re: R-1.1.0 on Alpha?
In-Reply-To: <200007130430.QAA27598@aqua.mcs.vuw.ac.nz>
Message-ID: <Pine.GSO.4.05.10007130746090.470-100000@auk.stats>

On Thu, 13 Jul 2000, Ray Brownrigg wrote:

> I asked:
> > Has anyone succeeded in compiling R-1.1.0 on a Digital (Compaq) Alpha
> > running OSF4.0F (or E)?  Everything seems to compile OK (except the
> > frequent "Warning:  Unresolved:" at link time - this threw me off the
> > scent for a while!), but then at run time I get:
> > 
> > Fatal error: The X11 shared library could not be loaded.
> >   The error was dlopen: cannot load ....../R-1.1.0/bin/R_X11.so 
> > 
> Well I've finally solved it - it was an 'rpath' problem!
> 
> For completeness, here are the changes I had to make to config.site to
> get R running on Digital Unix 4.0F, using f77 and gcc.  Systems with g77
> may not have some of these problems.
> 
> 1) Add:
> CPPFLAGS="-I/usr/local/include -I/usr/X11R6/include"
> otherwise there are problems compiling tcltk

That is intended to be fixed already in R-patched: could you try that?
(It sets PKG_CPPFLAGS in src/library/tcltk/src/Makefile. Whether this is
needed seems to depend on the Tcl version.)

> 2) Add:
> LIBS="-L../../.. -L/usr/local/lib"
> to include a 'private' copy of readline.a, otherwise I get the following
> when linking R.bin:
> ld:
> Object file format error in:
> /usr/local/lib/libreadline.a(tilde.o):local_is_complete:
>  iaux(21) > iauxMax(14) for obj /usr/local/lib/libreadline.a(tilde.o)
> fort: Severe: Failed while trying to link. 
> 
> As far as I can remember, my 'private' libreadline.a has the -g option
> specified, whereas the system one does not.  [So this may not be a
> problem in other systems.]

Looks like a compiler-mix problem to me, as you hint.  Let us assume that
is specific to you.

> 3) Add:
> MAINLDFLAGS="-Wl,-rpath -Wl,/usr/X11R6/lib"
> This is the key to setting appropriate shared library paths in the main
> program.  Under R-1.0.0 this flag was known as LDFLAGS.

Um.  The X11 flags are found from xmkmf. My Solaris box has

X_LIBS =  -L/usr/openwin/lib -R/usr/openwin/lib -lX11

for example, and R_X11.so is built with $(X_LIBS).  So is the -rpath
missing in X_LIBS, or is there something else wrong?  Can you take a 
look at the command used to build R_X11.so (in src/unix/X11)?
My understanding is that setting the rpath on the dynamic library
(not the main executable) should suffice, but perhaps DU-4.0 is different
from everything else.

The simplest way out is to add /usr/X11R6/lib to R_LD_LIBRARY_PATH
in the R front-end script, I guess.  It might be desirable to do the
equivalent of that on all platforms.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rwehrens at sci.kun.nl  Thu Jul 13 15:37:24 2000
From: rwehrens at sci.kun.nl (Ron Wehrens)
Date: Thu, 13 Jul 2000 15:37:24 +0200 (MET DST)
Subject: [R] Programming puzzle...
Message-ID: <200007131337.PAA02622@ac8.sci.kun.nl>

Dear R guru's,

I'd like to sort the columns of a matrix according to the elements in the
first row, and in case of a tie according to the second row, etc.
In case of a 3xn matrix woppa, something like

colorder _ order(woppa[1,], woppa[2,], woppa[3,])

I just cannot seem to find a way to do this for a variable number of rows,
e.g. if woppa has 10 or 15 rows I now manually cut and paste to have 10 - 15
arguments in the order function. There has to be a clever way to do this...


Ron

-----------------------+--------------------------------------------------
 Ron Wehrens            | " In a purely metaphorical sense, I am a turnip "
  Dept. of Chemometrics  |                         (W.A. Quayle)
   University of Nijmegen |   Email: rwehrens at sci.kun.nl
    Toernooiveld 1         |   http://www-cac.sci.kun.nl/cac/rwehrens
     6525 ED Nijmegen       |   Tel: +31 24 365 2053
      The Netherlands        |   Fax: +31 24 365 2653
       -----------------------+------------------------------------------------
     
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From J.C.Rougier at durham.ac.uk  Thu Jul 13 16:12:21 2000
From: J.C.Rougier at durham.ac.uk (Jonathan Rougier)
Date: Thu, 13 Jul 2000 15:12:21 +0100 (BST)
Subject: [R] Programming puzzle...
In-Reply-To: <200007131337.PAA02622@ac8.sci.kun.nl>
Message-ID: <Pine.GSO.4.20.0007131510230.509-100000@laplace>

Hi Ron -- Too tempting!  I would try something like

woppa <- matrix(1:120, 30, 4)
colorder <- do.call("order", split(woppa, row(woppa)))

Cheers, Jonathan.

On Thu, 13 Jul 2000, Ron Wehrens wrote:

> I'd like to sort the columns of a matrix according to the elements in the
> first row, and in case of a tie according to the second row, etc.
> In case of a 3xn matrix woppa, something like
> 
> colorder _ order(woppa[1,], woppa[2,], woppa[3,])
> 
> I just cannot seem to find a way to do this for a variable number of rows,
> e.g. if woppa has 10 or 15 rows I now manually cut and paste to have 10 - 15
> arguments in the order function. There has to be a clever way to do this...

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rnassar at duke.edu  Thu Jul 13 16:57:50 2000
From: rnassar at duke.edu (Rashid Nassar)
Date: Thu, 13 Jul 2000 10:57:50 -0400 (EDT)
Subject: [R] Programming puzzle...
In-Reply-To: <200007131337.PAA02622@ac8.sci.kun.nl>
Message-ID: <Pine.SOL.3.91.1000713105501.24274A-100000@bio3.acpub.duke.edu>

Here is a small function that was posted here some time ago by Renaud 
Lancelot in response to a similar question and which I find very handy:

Sortmat.R <- 
function (Mat, Sort) 
#  by   Renaud Lancelot <lancelot at telecomplus.sn>
#  Sort matrix or dataframe 'Mat', by column(s) 'Sort'.
#  e.g. sortmat.R(datafr, c(2,4,1))     
{
    m <- do.call("order", as.data.frame(Mat[, Sort]))
    Mat[m, ]
}


On Thu, 13 Jul 2000, Ron Wehrens wrote:

> Date: Thu, 13 Jul 2000 15:37:24 +0200 (MET DST)
> From: Ron Wehrens <rwehrens at sci.kun.nl>
> To: Rhelp <r-help at hypatia.math.ethz.ch>
> Subject: [R] Programming puzzle...
> 
> Dear R guru's,
> 
> I'd like to sort the columns of a matrix according to the elements in the
> first row, and in case of a tie according to the second row, etc.
> In case of a 3xn matrix woppa, something like
> 
> colorder _ order(woppa[1,], woppa[2,], woppa[3,])
> 
> I just cannot seem to find a way to do this for a variable number of rows,
> e.g. if woppa has 10 or 15 rows I now manually cut and paste to have 10 - 15
> arguments in the order function. There has to be a clever way to do this...
> 
> 
> Ron
> 
> -----------------------+--------------------------------------------------
>  Ron Wehrens            | " In a purely metaphorical sense, I am a turnip "
>   Dept. of Chemometrics  |                         (W.A. Quayle)
>    University of Nijmegen |   Email: rwehrens at sci.kun.nl
>     Toernooiveld 1         |   http://www-cac.sci.kun.nl/cac/rwehrens
>      6525 ED Nijmegen       |   Tel: +31 24 365 2053
>       The Netherlands        |   Fax: +31 24 365 2653
>        -----------------------+------------------------------------------------
>      
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Steffy.Ruiz at wanadoo.fr  Thu Jul 13 18:14:00 2000
From: Steffy.Ruiz at wanadoo.fr (Steffy.Ruiz)
Date: Thu, 13 Jul 2000 12:14:00 -0400
Subject: [R] R_memory/Question
Message-ID: <000801bfece5$651c90a0$cd918aa4@wanadoo.fr>

Bonjour,

Je voudrais savoir comment on peut modifier les capacit?s de m?moire pour le logiciel R, car j'ai un probl?me pour lire un tableau contenant 200000 observations et 30 variables.
Je vous remercie d'avance pour toute aide ?ventuelle.

Cordialement,
Steffy.Ruiz at wanadoo.fr

-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000713/5dd269ec/attachment.html

From gb at stat.umu.se  Thu Jul 13 18:52:13 2000
From: gb at stat.umu.se (gb)
Date: Thu, 13 Jul 2000 18:52:13 +0200 (CEST)
Subject: [R] R_memory/Question
In-Reply-To: <000801bfece5$651c90a0$cd918aa4@wanadoo.fr>
Message-ID: <Pine.LNX.4.21.0007131849540.2378-100000@pc16.stat.umu.se>

On Thu, 13 Jul 2000, Steffy.Ruiz wrote:

> Bonjour,
> 
> Je voudrais savoir comment on peut modifier les capacit?s de m?moire pour le logiciel R, car j'ai un probl?me pour lire un tableau contenant 200000 observations et 30 variables.
> Je vous remercie d'avance pour toute aide ?ventuelle.
> 
> Cordialement,
> Steffy.Ruiz at wanadoo.fr
> 
> 

God afton,
 
f?rs?k n?got som
  
R --vsize=200M
  
och

> indata <- matrix(scan("file.dat"), ncol = 30, byrow = T)


(Need a lot of memory...)
 
H?lsningar,

G?ran


-- 
 G?ran Brostr?m                      tel: +46 90 786 5223
 Department of Statistics            fax: +46 90 786 6614
 Ume? University
 SE-90187 Ume?, Sweden             e-mail: gb at stat.umu.se

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Thu Jul 13 19:07:42 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Thu, 13 Jul 2000 13:07:42 -0400
Subject: [R] What is that?
Message-ID: <025501bfecec$dc2766f0$0201a8c0@Workgroup>

Hi,

I did a scatter plot involving to variables x and y where x is a 2 levels factor and y is a numeric "vector". I kind of expected to see a series of points for both levels of x, which I got. But in addition there is also an horizontal rectangle and a line for both levels. My question is what's the meaning of these?

Regards

YG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000713/19fcb850/attachment.html

From wviechtb at s.psych.uiuc.edu  Thu Jul 13 19:20:03 2000
From: wviechtb at s.psych.uiuc.edu (Wolfgang Viechtbauer)
Date: Thu, 13 Jul 2000 12:20:03 -0500 (CDT)
Subject: [R] R_memory/Question
In-Reply-To: <000801bfece5$651c90a0$cd918aa4@wanadoo.fr>
Message-ID: <Pine.SOL.4.21.0007131217160.19039-100000@s.psych.uiuc.edu>

> Je voudrais savoir comment on peut modifier les capacits de mmoire
> pour le logiciel R, car j'ai un problme pour lire un tableau
> contenant 200000 observations et 30 variables. Je vous remercie
> d'avance pour toute aide ventuelle.

See "7.1 Why does R run out of memory?" in the R-FAQ.html.

http://www.stat.cmu.edu/R/CRAN/doc/FAQ/R-FAQ.html#Why%20does%20R%20run%20out%20of%20memory%3f

---------------------------------------------------------------------
Wolfgang Viechtbauer                       wviechtb at s.psych.uiuc.edu
Department of Quantitative Psychology      viechtba at students.uiuc.edu

University of Illinois, Champaign-Urbana   "Your  mouse   has  moved.
Room 409, Psychology Building               Windows must be restarted
603 E. Daniel Street                        for  the  change  to take
Champaign, IL 61820                         effect. Reboot now? [OK]"


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul 13 19:29:40 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 13 Jul 2000 10:29:40 -0700 (PDT)
Subject: [R] What is that?
In-Reply-To: <025501bfecec$dc2766f0$0201a8c0@Workgroup>
Message-ID: <Pine.GSO.4.21.0007131026260.14006-100000@atlas.biostat.washington.edu>

On Thu, 13 Jul 2000, Yves Gauvreau wrote:

> Hi,
> 
> I did a scatter plot involving to variables x and y where x is a 2
> levels factor and y is a numeric "vector". I kind of expected to see a
> series of points for both levels of x, which I got. But in addition
> there is also an horizontal rectangle and a line for both levels. My
> question is what's the meaning of these?
> 

Sounds like a boxplot to me. If x is a factor then plot.factor will be
called, which gives a boxplot if y is numeric and a barplot if y is a
factor or is missing [help(plot.factor)].

>From your description it sounds as though y is very skewed, so the boxplot
looks strange.  

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Thu Jul 13 23:24:41 2000
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Thu, 13 Jul 2000 14:24:41 -0700
Subject: [R] scoping problems
In-Reply-To: <20000617193907.62739@hal.stat.unipd.it>
Message-ID: <200007131824.OAA17501@sirocco.cc.mcgill.ca>

Again the same type of problem with scoping.
I wrote the simple functions below, 'by' is from Trevor Hastie 
modified by F.Harrel and copied from the list.

epi.crosstab <- function(vec1, vec2, vec3=NULL, row.labels = 
NULL, col.labels = NULL)
{
   if(!is.null(vec3) ){
         data <- eval(epi.file,sys.frame(sys.parent()))
         by(vec3, xtab(vec1,vec2, row.labels = row.labels, col.labels = 
                col.labels),data=data)
     }
    if(is.null(vec3))
        xtab(vec1, vec2, row.labels = row.labels, col.labels=               
               col.labels)
}
 
by <- function(group, exp, data=data)
{
   G <- substitute(group)
   exp <- substitute(exp)
   G <- factor(eval(G))
   for(group in levels(G)) {
       eval(exp, envir=c(data[G == group, ]))
   }
   invisible()
}

xtab <- function(vector1, vector2,row.labels=NULL,col.labels=NULL)
{
   table(vector1, vector2)
}

now I have a data.frame that is always called 'epi.file' and is 
attached to frame 1, MILK, COFFEE and WATER are variables in 
the frame

> epi.crosstab(MILK,COFFEE)
       vector2
vector1  N  Y
      N 44 27
      Y  0  4
==Why it does print vector1, vector 2 and not MILK and COFFEE ?

> epi.crosstab(MILK,COFFEE,WATER)
Error in eval(expr, envir, enclos) : Object "vec3" not found
> 

Can somebody be so kind as to try to explain which scoping rule 
now I did violate and where should I put 'eval' 'substitute' etc so it 
works.
Thanks
.
R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jul 13 23:49:21 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 13 Jul 2000 23:49:21 +0200
Subject: [R] Is this a bug?
In-Reply-To: Prof Brian D Ripley's message of "Thu, 13 Jul 2000 07:45:31 +0100 (BST)"
References: <Pine.GSO.4.05.10007130738010.470-100000@auk.stats>
Message-ID: <x2em4xsntq.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

> > The behaviour for RGUI is the same whether the function is sourced from
> > a file or defined at the command prompt. With Rterm I have not yet found
> > how to type in brackets with a Finnish keyboard, so the test was done by
> > sourcing a file.
> 
> Well, that's not the same thing. Typing your example at interactive rterm
> session certainly works here.  If you have a reproducible example that
> freezes Rterm, please send in a bug report, and we will try to reproduce
> it (and if we can reproduce it, try to fix it).

Yes. A reminder of source("file.R", echo=TRUE) might also be useful.
Re. the Finnish keyboard, it must be something happening at the DOS
level, since Rterm is just a plain stdio program running in a DOS box.
Something like "keyb fi" in autoexec.bat perhaps?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jul 14 00:14:36 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Jul 2000 00:14:36 +0200
Subject: [R] scoping problems
In-Reply-To: "Heberto Ghezzo"'s message of "Thu, 13 Jul 2000 14:24:41 -0700"
References: <200007131824.OAA17501@sirocco.cc.mcgill.ca>
Message-ID: <x2bt01smnn.fsf@blueberry.kubism.ku.dk>

"Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:

> Again the same type of problem with scoping.
> I wrote the simple functions below, 'by' is from Trevor Hastie 
> modified by F.Harrel and copied from the list.
> 
> epi.crosstab <- function(vec1, vec2, vec3=NULL, row.labels = 
> NULL, col.labels = NULL)
> {
>    if(!is.null(vec3) ){
>          data <- eval(epi.file,sys.frame(sys.parent()))

Um, I don't think that line is significantly different from
data<-epi.file. If you really want to be sure that you get the
epi.file from the parent frame, try get("epi.file",parent.frame()), or
if you must, evalq(epi.file, parent.frame()).

>          by(vec3, xtab(vec1,vec2, row.labels = row.labels, col.labels = 
>                 col.labels),data=data)
>      }
>     if(is.null(vec3))
>         xtab(vec1, vec2, row.labels = row.labels, col.labels=               
>                col.labels)
> }
>  
> by <- function(group, exp, data=data)
> {
>    G <- substitute(group)
>    exp <- substitute(exp)
>    G <- factor(eval(G))
>    for(group in levels(G)) {
>        eval(exp, envir=c(data[G == group, ]))
>    }
>    invisible()
> }

Actually by() exists in R now... Not exactly that one, though.

> xtab <- function(vector1, vector2,row.labels=NULL,col.labels=NULL)
> {
>    table(vector1, vector2)
> }
> 
> now I have a data.frame that is always called 'epi.file' and is 
> attached to frame 1, MILK, COFFEE and WATER are variables in 
> the frame
> 
> > epi.crosstab(MILK,COFFEE)
>        vector2
> vector1  N  Y
>       N 44 27
>       Y  0  4
> ==Why it does print vector1, vector 2 and not MILK and COFFEE ?

Because you're calling table with arguments (vector1,vector2). R is
not a macro language, so without further magic there is no way for
table to know which names it has been called with higher up. 

> > epi.crosstab(MILK,COFFEE,WATER)
> Error in eval(expr, envir, enclos) : Object "vec3" not found
> > 
> 
> Can somebody be so kind as to try to explain which scoping rule 
> now I did violate and where should I put 'eval' 'substitute' etc so it 
> works.

Your by() function is performing substitute magic, and expects the
first argument to be a symbol that exists in the data frame, which
vec3 clearly does not. I think that what you want is

eval(substitute(by(vec3, xtab(vec1,vec2, row.labels = row.labels, col.labels = 
                 col.labels),data=data)))

and xtab() needs to contain a similar construction.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 14 10:24:52 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 14 Jul 2000 09:24:52 +0100 (BST)
Subject: [R] Is this a bug?
In-Reply-To: <x2em4xsntq.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10007140922080.26761-100000@auk.stats>

On 13 Jul 2000, Peter Dalgaard BSA wrote:

> Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:
> 
> > > The behaviour for RGUI is the same whether the function is sourced from
> > > a file or defined at the command prompt. With Rterm I have not yet found
> > > how to type in brackets with a Finnish keyboard, so the test was done by
> > > sourcing a file.
> > 
> > Well, that's not the same thing. Typing your example at interactive rterm
> > session certainly works here.  If you have a reproducible example that
> > freezes Rterm, please send in a bug report, and we will try to reproduce
> > it (and if we can reproduce it, try to fix it).
> 
> Yes. A reminder of source("file.R", echo=TRUE) might also be useful.

You can also source files by

...\Rterm < file.R

and it is very helpful to make clear which route you mean.  Some things
only work by the second route (e.g. scan from the input file).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mriordan at nmrc.ucc.ie  Fri Jul 14 12:27:48 2000
From: mriordan at nmrc.ucc.ie (Margaret Riordan)
Date: Fri, 14 Jul 2000 11:27:48 +0100
Subject: [R] Split.screen problem
Message-ID: <396EEB23.3CB80D3A@nmrc.ucc.ie>

Hi all

When I run the example as below
> if (interactive()) {
+ split.screen(c(2,1))             # split display into two screens
+ split.screen(c(1,3), screen = 2) # now split the bottom half into 3
+ screen(1) # prepare screen 1 for output
+ plot(10:1)
+ screen(4) # prepare screen 4 for output
+ plot(10:1)
+ close.screen(all = TRUE) # exit split-screen mode
+ }

It returns the following error
Error in plot.new() : Figure margins too large
>

If I run any of my functions that contain the split.screen function a
similiar error is returned.
These functions had been running fine previously

Any help is greatly appreciated

Regards
Margaret Riordan

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rwehrens at sci.kun.nl  Fri Jul 14 15:36:47 2000
From: rwehrens at sci.kun.nl (Ron Wehrens)
Date: Fri, 14 Jul 2000 15:36:47 +0200 (MET DST)
Subject: [R] image legend
Message-ID: <200007141336.PAA03835@ac8.sci.kun.nl>

Hi,

are there any plans to incorporate something like the Splus image.legend
function? Or an optional argument to image perhaps, so that the result is
comparable to filled.contour (i.e. a color key at the side)?

I could cut and paste from filled.contour, of course...

Ron

-----------------------+--------------------------------------------------
 Ron Wehrens            | " In a purely metaphorical sense, I am a turnip "
  Dept. of Chemometrics  |                         (W.A. Quayle)
   University of Nijmegen |   Email: rwehrens at sci.kun.nl
    Toernooiveld 1         |   http://www-cac.sci.kun.nl/cac/rwehrens
     6525 ED Nijmegen       |   Tel: +31 24 365 2053
      The Netherlands        |   Fax: +31 24 365 2653
       -----------------------+------------------------------------------------
     
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 14 16:45:19 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 14 Jul 2000 15:45:19 +0100 (BST)
Subject: [R] Split.screen problem
In-Reply-To: <396EEB23.3CB80D3A@nmrc.ucc.ie>
Message-ID: <Pine.GSO.4.05.10007141541120.7741-100000@auk.stats>

On Fri, 14 Jul 2000, Margaret Riordan wrote:

> Hi all
> 
> When I run the example as below
> > if (interactive()) {
> + split.screen(c(2,1))             # split display into two screens
> + split.screen(c(1,3), screen = 2) # now split the bottom half into 3
> + screen(1) # prepare screen 1 for output
> + plot(10:1)
> + screen(4) # prepare screen 4 for output
> + plot(10:1)
> + close.screen(all = TRUE) # exit split-screen mode
> + }
> 
> It returns the following error
> Error in plot.new() : Figure margins too large
> >
> 
> If I run any of my functions that contain the split.screen function a
> similiar error is returned.

It works here on R 1.1.0 on Solaris.  It probably means exactly what it
says: your pointsize is set so that the margins are too large, or perhaps
more accurately, what space is left after the margins are allocated is too
small.

Without knowing your OS, graphics device, device size and settings
there is not much more we can do to help, and possibly not much if we knew
all those.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Fri Jul 14 20:19:53 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 14 Jul 2000 20:19:53 +0200 (MET DST)
Subject: [R] Garbage Collecting
In-Reply-To: <Pine.OSF.4.05.10006241957090.24787-100000@alnair.uio.no>
Message-ID: <Pine.OSF.4.05.10007141941300.3963-100000@alnair.uio.no>

Hello again! I have some follow-up on the problem I had with the garbage
collector. I have finally come across a computer with > version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R                
(I believe it is running RH6.2, and it has 128MB RAM). It seems I am able
to reproduce the problem I had on this system as well, with exactly the
same objects that I had on the alpha. The objects (all that are needed
to reproduce the problem) are in
<URL:http://www.astro.uio.no/~kjetikj/tmp/kjetil.RData> (file is 87457
bytes), and the basic thing I am doing, is that I am passing a largish
object between functions a lot of times.

The function calls gc(v=T) for every time it is called (by an, I realize, 
ineffective apply-call), and the output looks like this  
> l4 <- t(apply(cbind(rep(1000000, 4)), 1, lineprofile, 1, 80, 
+                 smap01n$histogram))
Garbage collection [nr. 1]...
193062 cons cells free (55%)
25145 Kbytes of heap free (98%)
Garbage collection [nr. 4]...
191545 cons cells free (54%)
19217 Kbytes of heap free (75%)
Garbage collection [nr. 8]...
190029 cons cells free (54%)
13290 Kbytes of heap free (52%)
Garbage collection [nr. 14]...
188513 cons cells free (53%)
7362 Kbytes of heap free (29%)
> l4 <- t(apply(cbind(rep(1000000, 4)), 1, lineprofile, 1, 80, 
+                 smap01n$histogram))
Garbage collection [nr. 28]...
187005 cons cells free (53%)
1438 Kbytes of heap free (6%)
Error: heap memory (25600 Kb) exhausted [needed 45 Kb more]
       See "help(Memory)" on how to increase the heap size.
> gc()
         free   total (Mb)
Ncells 186764  350000  6.7
Vcells  11446 3276800 25.0

It seem something like 6 MB goes for each call. I started R with
vsize=25M, which is the least one needs to do the run once. 

I have also tried on a sparc-sun-solaris2.7 box with apparently the same
results.

Now, there is always a possibility that I have some really strange things
in my code, or that my understanding of the garbage collector is totally
flawed. I have tried to come up with a minimal piece of code needed to
reproduce the problem, but I have so far failed, I continue to try.
Meanwhile, I hope the code I have put on the web can shed some light... 
:-)

The other problem I had with disappearing values has been resolved, thanks
to Brad McNeney.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From salwin at mitretek.org  Fri Jul 14 20:38:06 2000
From: salwin at mitretek.org (Art Salwin)
Date: Fri, 14 Jul 2000 14:38:06 -0400
Subject: [R] R under Win95--question 1
References: <Pine.OSF.4.05.10007121701350.2170-100000@alnair.uio.no>
Message-ID: <396F5E0E.9AFD13B5@mitretek.org>

For moving around in the console, the documentation suggests
a control-R keyboard command in which you
can specify some text, so you can move back to a command
line with that text in it.  Doesn't
seem to work for me under Win 95?  Is there a way to do
this?  Currently, the only way I can
navigate the command history is to hit the up arrow once for
each previous command that is to be bypassed.  So recalling
a command that's 50 back in the list requires hitting
up=arrow fifty times.
-- 
Art Salwin
salwin at mitretek.org
(202) 863-2985
(202) 863-2988 (fax)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From salwin at mitretek.org  Fri Jul 14 20:42:45 2000
From: salwin at mitretek.org (Art Salwin)
Date: Fri, 14 Jul 2000 14:42:45 -0400
Subject: [R] R under Win 95-- question #2
References: <38E10AE6.75B533CE@mitretek.org>
Message-ID: <396F5F25.57C380C4@mitretek.org>

Plots under Win 95 show up in a window entitled RGraphics:
Device 2.  
Is there a way to create additional plots in additional
windows?  Functions like
plot.new or frame create a new plot in the same window,
wiping out what was previously there.

In effect, is there a way to have a Device 3, 4, 5, etc?
-- 
Art Salwin
salwin at mitretek.org
(202) 863-2985
(202) 863-2988 (fax)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Fri Jul 14 21:19:56 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 14 Jul 2000 21:19:56 +0200 (MET DST)
Subject: [R] R under Win 95-- question #2
In-Reply-To: <396F5F25.57C380C4@mitretek.org>
Message-ID: <Pine.OSF.4.05.10007142116200.3963-100000@alnair.uio.no>

On Fri, 14 Jul 2000, Art Salwin wrote:

>Plots under Win 95 show up in a window entitled RGraphics:
>Device 2.  
>Is there a way to create additional plots in additional
>windows? 

You might want to read the section on "Multiple graphics devices" in 
"An Introduction to R" (it's section 12.6.2 in my copy, but that's old)
<URL:http://www.r-project.org/doc/manuals/R-intro.pdf>.

The short story is (I believe, it's X11() for me): windows()

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Fri Jul 14 22:05:51 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Fri, 14 Jul 2000 22:05:51 +0200 (MET DST)
Subject: [R] Garbage Collecting (Never mind the previous message...)
In-Reply-To: <Pine.OSF.4.05.10007141941300.3963-100000@alnair.uio.no>
Message-ID: <Pine.OSF.4.05.10007142159320.3963-100000@alnair.uio.no>

Dear all,

I'm sorry to have bothered you with this. Of course, it wasn't
anything wrong with the garbage collector, it had nothing to do with
the garbage collector. Once again, it was my understanding that was
flawed... I discovered it while re-RTFM, that is, the help page for
attach(). 

In the function I called oh-so-many times, I did a call to attach(),
believing that the variables would be local to this function and discarded
afterwards. I _had_ read the help-page before, but a year ago, and had
forgotten how it works. How stupid. :-)

Again, sorry to have bothered you with this. It's dangerous to try to
program beyond ones ability.... :-) 

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From gfeeney at hawaii.edu  Sat Jul 15 01:49:15 2000
From: gfeeney at hawaii.edu (Griffith Feeney)
Date: Fri, 14 Jul 2000 16:49:15 -0700
Subject: [R] R under Win 95-- question #2
In-Reply-To: <396F5F25.57C380C4@mitretek.org>
References: <38E10AE6.75B533CE@mitretek.org>
Message-ID: <4.3.2.7.0.20000714164830.00aa9f00@pop-server.hawaii.edu>

win.graph()

and read

?win.graph

At 10:15 AM 14/07/2000 -1000, you wrote:
>Plots under Win 95 show up in a window entitled RGraphics:
>Device 2.
>Is there a way to create additional plots in additional
>windows?  Functions like
>plot.new or frame create a new plot in the same window,
>wiping out what was previously there.
>
>In effect, is there a way to have a Device 3, 4, 5, etc?
>--
>Art Salwin
>salwin at mitretek.org
>(202) 863-2985
>(202) 863-2988 (fax)
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From vkutsyy at yahoo.com  Fri Jul 14 22:23:03 2000
From: vkutsyy at yahoo.com (Vadim Kutsyy)
Date: Fri, 14 Jul 2000 16:23:03 -0400
Subject: [R] R under Win 95-- question #2
In-Reply-To: <396F5F25.57C380C4@mitretek.org>
Message-ID: <OFEGJMACADMFOKHCCFBJGEHCCKAA.vkutsyy@yahoo.com>

windows() will open new graphical windows.  it can take number of options
(see help).
--------------------------------------------------------
Vadim Kutsyy
http://www.kutsyy.com                   vadim at kutsyy.com
The University of Michigan - Ann Arbor     Ph.D. Student

> -----Original Message-----
> From: owner-r-help at stat.math.ethz.ch
> [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Art Salwin
> Sent: Friday, July 14, 2000 2:43 PM
> To: r-help at stat.math.ethz.ch
> Subject: [R] R under Win 95-- question #2
>
>
> Plots under Win 95 show up in a window entitled RGraphics:
> Device 2.
> Is there a way to create additional plots in additional
> windows?  Functions like
> plot.new or frame create a new plot in the same window,
> wiping out what was previously there.


__________________________________________________
Do You Yahoo!?
Talk to your friends online with Yahoo! Messenger.
http://im.yahoo.com
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Sat Jul 15 08:32:17 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 15 Jul 2000 07:32:17 +0100 (BST)
Subject: [R] R under Win95--question 1
In-Reply-To: <396F5E0E.9AFD13B5@mitretek.org>
Message-ID: <Pine.GSO.4.05.10007150725260.7975-100000@auk.stats>

On Fri, 14 Jul 2000, Art Salwin wrote:

> For moving around in the console, the documentation suggests
> a control-R keyboard command in which you

What documentation?  It's not in the console help screen nor in any R for
Windows documentation (nor any other R documentation that I could find). I
think you must be reading some documentation for readline-based systems
under Unix. The R for Windows README says:

GUI:
Command-line editing is available: see Help | Console for details.

TERMINAL/BATCH:
facilities needed for interactive use, including simple command-line
editing.

Differences from Unix versions of R
===================================

- Command-line editing is always available, but is much simpler than
  under readline-based input on Unix.

so this is clearly documented.

> can specify some text, so you can move back to a command
> line with that text in it.  Doesn't
> seem to work for me under Win 95?  Is there a way to do
> this?  Currently, the only way I can
> navigate the command history is to hit the up arrow once for
> each previous command that is to be bypassed.  So recalling
> a command that's 50 back in the list requires hitting
> up=arrow fifty times.

In R version 1.2 you will be able to list the history in a pager and
re-submit commands from there.  Now you can use savehistory() or the
menu item for this to save the history to a file and save it from there.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ReddinM at prose.dpi.qld.gov.au  Mon Jul 17 05:59:23 2000
From: ReddinM at prose.dpi.qld.gov.au (Redding, Matthew)
Date: Mon, 17 Jul 2000 13:59:23 +1000
Subject: [R] Fonts and Line widths
Message-ID: <FB599DB5ACE2D211887500A0C9D334E40B146C@TBACRMEXH001>

	Hi All R guru's, 

	A couple of simple questions which I cannot find answers to in "an
introduction to R" or in the reference manuals.

	I am running R on Win95, and have plotted up quite a nice box and
whisker plot:

	char<-read.table("n:/reddinm/grifpr~1/survey/char.txt")
	attach(char)
	boxplot(Al,Fe,OC,pH, range=0,xaxis=FALSE,
	  ylab="Proportion of Unirigated Soil
Characteristic",xlab="Characteristic")
	nom2<-c("Al","Fe","OC","pH")
	axis(1,1:4,nom2)
	abline(h=1,lty=2)

	The problems are these, how do I change the line width (lines are
all too light).  I have attempted putting lwd=2 or something higher inside
the boxplot statement....
	which it swallows without any complaints...it just doesn't seem to
change anything, either on the screen or when printed out.

	Second problem, I find that the text quality when I export to a PNG
file is pretty bad...not good enough for publication.
	I thought that I might be able to get HErshey fonts to improve
this...but can't get them to work.  

	Final question: I cannot get R to swallow the addition of
	a font.lab(xxx,xxx) statement in the boxplot function......how do I
get it to use Sans Serif, and produce high quality output?  How do I use the

	font.lab command and the related commands.

	Thanks for your help.  It looks like a nice package from what I have
seen so far, so I'm keen to learn to 
	use it.

Matt Redding
Soil Scientist
Intensive Livestock Environmental Management-Research
Department of Primary Industries, Queensland
Australia.  ph 61 7 46 881372
	fax 61 7 46 881192
	reddinm at dpi.qld.gov.au
            http://www.dpi.qld.gov.au/ilems



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ReddinM at prose.dpi.qld.gov.au  Mon Jul 17 07:23:19 2000
From: ReddinM at prose.dpi.qld.gov.au (Redding, Matthew)
Date: Mon, 17 Jul 2000 15:23:19 +1000
Subject: [R] Fonts and Line widths in boxplot
Message-ID: <FB599DB5ACE2D211887500A0C9D334E40B146D@TBACRMEXH001>

> Hi All R guru's, 
> 
> A couple of simple questions which I cannot find answers to in "an
> introduction to R" or in the reference manuals.
> 
> I am running R on Win95, and have plotted up quite a nice box and whisker
> plot:
> 
> char<-read.table("n:/reddinm/grifpr~1/survey/char.txt")
> attach(char)
> boxplot(Al,Fe,OC,pH, range=0,xaxis=FALSE,
>   ylab="Proportion of Unirigated Soil
> Characteristic",xlab="Characteristic")
> nom2<-c("Al","Fe","OC","pH")
> axis(1,1:4,nom2)
> abline(h=1,lty=2)
> 
> The problems are these, how do I change the line width (lines are all too
> light).  I have attempted putting lwd=2 or something higher inside the
> boxplot statement....
> which it swallows without any complaints...it just doesn't seem to change
> anything, either on the screen or when printed out.
> 
> Second problem, I find that the text quality when I export to a PNG file
> is pretty bad...not good enough for publication.
> I thought that I might be able to get HErshey fonts to improve this...but
> can't get them to work.  
> 
> Final question: I cannot get R to swallow the addition of
> a font.lab(xxx,xxx) statement in the boxplot function......how do I get it
> to use Sans Serif, and produce high quality output?  How do I use the 
> font.lab command and the related commands.
> 
> Thanks for your help.  It looks like a nice package from what I have seen
> so far, so I'm keen to learn to 
> use it.
> 
> Matt Redding
> Soil Scientist
> Intensive Livestock Environmental Management-Research
> Department of Primary Industries, Queensland
> Australia.  ph 61 7 46 881372
> 	fax 61 7 46 881192
> 	reddinm at dpi.qld.gov.au
>             http://www.dpi.qld.gov.au/ilems
> 
> 
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jul 17 08:38:04 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 17 Jul 2000 07:38:04 +0100 (BST)
Subject: [R] Fonts and Line widths
In-Reply-To: <FB599DB5ACE2D211887500A0C9D334E40B146C@TBACRMEXH001>
Message-ID: <Pine.GSO.4.05.10007170730350.3072-100000@auk.stats>

On Mon, 17 Jul 2000, Redding, Matthew wrote:

> 	Hi All R guru's, 
> 
> 	A couple of simple questions which I cannot find answers to in "an
> introduction to R" or in the reference manuals.

[..., using Win95]

> 	Second problem, I find that the text quality when I export to a PNG
> file is pretty bad...not good enough for publication.
> 	I thought that I might be able to get HErshey fonts to improve
> this...but can't get them to work.  

This is a standard problem with bitmapped graphics like PNG.  Hershey
fonts won't improve it and will probably make it worse, as at least the
standard TrueType fonts are designed to be rasterized, unlike vector
Hershey fonts.

Text quality will be particularly bad unless the PNG plot is printed at 
a small exact multiple of the design size (in pixels).

Don't think in terms of PNG for publication (except Web publication). Use
PostScript or (on Windows only) Windows MetaFiles as these are vector/font
description formats. You can create or export to Windows metafiles
directly, or via the clipboard.

[...]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From zivan.karaman at limagrain.com  Mon Jul 17 16:24:16 2000
From: zivan.karaman at limagrain.com (zivan.karaman@limagrain.com)
Date: Mon, 17 Jul 2000 16:24:16 +0200
Subject: =?iso-8859-1?Q?R=E9f._:_[R]_image_legend?=
Message-ID: <C125691F.004EBCD0.00@limagrain.ftgin.com>

I  would  also be very much interested in having the image.legend function in R.
The  Splus  image.legend  uses  the  subplot  function, which doesn't seem to be
available  in  R,  so one can't copy the Splus function to R (otherwise it would
probably have been done already).

I greatly appreciate the flexibility of the Splus image.legend function since it
allow you to put the legend where and how you want.

Just to add one vote for image.legend (or subplot, which would be even better).

Zivan





Ron Wehrens <rwehrens at sci.kun.nl> le 14/07/2000 15:36:47

Pour :    r-help at lists.R-project.org (Rhelp)
cc :   (ccc : Zivan KARAMAN/LMGC/Limagrain)
Objet :   [R] image legend




Hi,

are there any plans to incorporate something like the Splus image.legend
function? Or an optional argument to image perhaps, so that the result is
comparable to filled.contour (i.e. a color key at the side)?

I could cut and paste from filled.contour, of course...

Ron

-----------------------+--------------------------------------------------
 Ron Wehrens            | " In a purely metaphorical sense, I am a turnip "
  Dept. of Chemometrics  |                         (W.A. Quayle)
   University of Nijmegen |   Email: rwehrens at sci.kun.nl
    Toernooiveld 1         |   http://www-cac.sci.kun.nl/cac/rwehrens
     6525 ED Nijmegen       |   Tel: +31 24 365 2053
      The Netherlands        |   Fax: +31 24 365 2653
       -----------------------+------------------------------------------------




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fm3a004 at math.uni-hamburg.de  Mon Jul 17 20:08:30 2000
From: fm3a004 at math.uni-hamburg.de (Christian Hennig)
Date: Mon, 17 Jul 2000 20:08:30 +0200 (CEST)
Subject: [R] Check errors
Message-ID: <Pine.LNX.3.96.1000717200426.27471I-100000@TILL.math.uni-hamburg.de>

Dear list,

I tried to install R-1.1.0 under SuSe Linux 5.2.

./configure --prefix=/usr/applic/packages/R
make 
make install

worked without error.

make check 

led to

make[1]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/tests'
make[2]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/tests'
make[3]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exa
mples'
make[4]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exa
mples'
make[4]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exam
ples'
make[4]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exa
mples'
collecting examples for package `base' ...
make[5]: Entering directory `/export/old/usr/applic/packages/R/R-1.1.0/src/libra
ry'
 >>> Building/Updating help pages for package `base'
     Formats: text example 
make[5]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/src/librar
y'
running code in base-Ex.R ...
./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
make[4]: *** [base-Ex.Rout] Error 1
make[4]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exam
ples'
make[3]: *** [test-Examples] Error 2
make[3]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/tests/Exam
ples'
make[2]: *** [test-Examples] Error 2
make[2]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/tests'
make[1]: *** [test-All] Error 2
make[1]: Leaving directory `/export/old/usr/applic/packages/R/R-1.1.0/tests'
make: *** [test-All] Error 2

What happened?

Thanks in advance,
Christian

***

Christian Hennig
Fachbereich Mathematik - SPST
 (Schwerpunkt Mathematische Statistik und Stochastische Prozesse,
 Zentrum fuer Modellierung und Simulation)
Bundesstrasse 55
D-20146 Hamburg
Tel: x40/42838 4907, privat x40/631 62 79
hennig at math.uni-hamburg.de
http://www.math.uni-hamburg.de/home/hennig/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From MagillB at usa.redcross.org  Mon Jul 17 21:13:22 2000
From: MagillB at usa.redcross.org (Magill, Brett)
Date: Mon, 17 Jul 2000 15:13:22 -0400
Subject: [R] Code for Coefficent (Cronbach's) Alpha
Message-ID: <AC09DC4F4DFCD211A83C00805FE6138D3692FB@NHQJPK1EX2>

Hi all,

I am trying to teach myself to use and program R (How else do you do it?
lol)  Anyway, I wrote a piece of code to compute coefficent alpha for a
scale.  As I am neither a statistician nor a programmer, I wanted people's
feedback.  The code appears to work (Win 95 with R 1.0.1) and I have
verified my result with SPSS and it was correct (much to my astonishment!).

Nonetheless, I am sure there are better ways to do things than I did it as I
have limited documentation and was reading as I programmed.  Much of the
process was trial and error for me (oops, error!, how can I fix that?).  So,
as an opportunity to learn, I thought I would send the code to the list for
comments.  Would be interested in hearing if there are potential problems
with my code or easier ways of doing things.  Please be nice, I know much of
the "programming" here is probably naive.

Best,

Brett



reliability.alpha<-function(x){

	score.total<-0
	var.items<-0
	var.total<-0
	z.x<-0
	z.score.total<-0
	z.var.items<-0
	z.x<-scale(x, center = TRUE, scale = TRUE)
	n.items<-length(x)

	for (i in 1:n.items) score.total<-score.total + x[,i]
	for (i in 1:n.items) var.items<-var.items + var(x[,i])
	for (i in 1:n.items) z.score.total<-z.score.total + z.x[,i]
	for (i in 1:n.items) z.var.items<-z.var.items + var(z.x[,i])

	var.total<-var(score.total)
	z.var.total<-var(z.score.total)

	cronbachs.alpha<-(n.items/(n.items-1))*((var.total -
var.items)/var.total)
	z.cronbachs.alpha<-(n.items/(n.items-1))*((z.var.total -
z.var.items)/z.var.total)

	return(cronbachs.alpha, z.cronbachs.alpha)}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From buerkle at hawaii.edu  Mon Jul 17 16:48:09 2000
From: buerkle at hawaii.edu (buerkle@hawaii.edu)
Date: Mon, 17 Jul 2000 09:48:09 -0500 (EST)
Subject: [R] na.omit
Message-ID: <Pine.LNX.4.10.10007170942410.6039-100000@natsci174.uhh.hawaii.edu>


Why is it that when a vector contains no NAs, na.omit returns an empty
vector rather than the object/vector that was passed to it?  

>na.omit(c(1,2,3,4))          
numeric(0)

in contrast ...

>na.omit(c(1,2,3,NA))
[1] 1 2 3
attr(,"na.action")
[1] 4
attr(,"na.action")attr(,"class")
[1] "omit"

Thanks, Alex

---------------------------
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From bates at stat.wisc.edu  Mon Jul 17 22:13:28 2000
From: bates at stat.wisc.edu (Douglas Bates)
Date: 17 Jul 2000 15:13:28 -0500
Subject: [R] na.omit
In-Reply-To: buerkle@hawaii.edu's message of "Mon, 17 Jul 2000 09:48:09 -0500 (EST)"
References: <Pine.LNX.4.10.10007170942410.6039-100000@natsci174.uhh.hawaii.edu>
Message-ID: <6rya30h5w7.fsf@franz.stat.wisc.edu>

buerkle at hawaii.edu writes:

> Why is it that when a vector contains no NAs, na.omit returns an empty
> vector rather than the object/vector that was passed to it?  
> 
> >na.omit(c(1,2,3,4))          
> numeric(0)

Well, because there is a bug in na.omit.default.  The problem is in the
section of code

        omit <- seq(along = object)[is.na(object)]
        nm <- names(object)
        object <- object[-omit]

If there are no NA's in the object, then omit becomes a length 0
vector and -omit doesn't have the intended effect.

A temporary fix would be to insert
        if (length(omit) == 0) return(object)
after the first line shown above.

We'll incorporate a fix for the next release.  Thanks for reporting
the bug.

> ---------------------------
> platform i686-pc-linux-gnu
> arch     i686             
> os       linux-gnu        
> system   i686, linux-gnu  
> status                    
> major    1                
> minor    1.0              
> year     2000             
> month    June             
> day      15               
> language R
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Douglas Bates                            bates at stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From baron at cattell.psych.upenn.edu  Mon Jul 17 22:51:25 2000
From: baron at cattell.psych.upenn.edu (Jonathan Baron)
Date: Mon, 17 Jul 2000 16:51:25 -0400 (EDT)
Subject: [R] Code for Coefficent (Cronbach's) Alpha
Message-ID: <200007172051.QAA18305@cattell.psych.upenn.edu>

There is a simpler way to compute alpha (in fact two other
ways) in http://www.psych.upenn.edu/~baron/rpsych.htm
and also in ..../rpsych.pdf (for those who prefer pdf).

Jonathan Baron, Professor of Psychology, University of Pennsylvania
Home page: http://www.sas.upenn.edu/~jbaron
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Mon Jul 17 22:55:39 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Mon, 17 Jul 2000 22:55:39 +0200 (MET DST)
Subject: [R] Code for Coefficent (Cronbach's) Alpha
In-Reply-To: <AC09DC4F4DFCD211A83C00805FE6138D3692FB@NHQJPK1EX2>
Message-ID: <Pine.OSF.4.05.10007172234530.3963-100000@alnair.uio.no>

On Mon, 17 Jul 2000, Magill, Brett wrote:

>I am trying to teach myself to use and program R (How else do you do it?
>lol)  Anyway, I wrote a piece of code to compute coefficent alpha for a
>scale.  As I am neither a statistician nor a programmer, I wanted people's
>feedback.

Neither am I, and pretty much a newbie too, just trying to do my best to
help whenever I feel that I may have something. Which isn't often, but it
happens. :-)

>reliability.alpha<-function(x){
>
>	score.total<-0
>	var.items<-0
>	var.total<-0
>	z.x<-0
>	z.score.total<-0
>	z.var.items<-0
>	z.x<-scale(x, center = TRUE, scale = TRUE)
>	n.items<-length(x)

Well, I wouldn't define all those variables. Some you may need, some you
don't. If you use it just once, then, you might just drop it.

>	for (i in 1:n.items) score.total<-score.total + x[,i]

Let's see.... It's not clear to me what is happening, I can't get this to
work, except in the case where you have a 1 * i matrix, I guess it is
possible that you have that. Anyway, you seem to be summing _all_ the
elements in x, in that case
score.total<-sum(x) 
should do the job. If you would do a sum over just each of the indices,
something like
score.total<-apply(x, 1, sum)
could do.
 
>	for (i in 1:n.items) var.items<-var.items + var(x[,i])
>	for (i in 1:n.items) z.score.total<-z.score.total + z.x[,i]
>	for (i in 1:n.items) z.var.items<-z.var.items + var(z.x[,i])

Similar for them. Perhaps
var.items<-apply(x, 1, function(y) sum(var(y))


>	var.total<-var(score.total)
>	z.var.total<-var(z.score.total)

Eh, then, score.total wasn't a simple sum.... :-) But then it is perhaps
the second suggestion up there. 

>	cronbachs.alpha<-(n.items/(n.items-1))*((var.total -
>var.items)/var.total)
>	z.cronbachs.alpha<-(n.items/(n.items-1))*((z.var.total -
>z.var.items)/z.var.total)
>
>	return(cronbachs.alpha, z.cronbachs.alpha)}

This seems allright.

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Mon Jul 17 23:09:26 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Mon, 17 Jul 2000 23:09:26 +0200 (MET DST)
Subject: [R] na.omit
In-Reply-To: <6rya30h5w7.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.OSF.4.05.10007172256500.3963-100000@alnair.uio.no>

On 17 Jul 2000, Douglas Bates wrote:

>buerkle at hawaii.edu writes:
>
>> Why is it that when a vector contains no NAs, na.omit returns an empty
>> vector rather than the object/vector that was passed to it?  
>> 
>> >na.omit(c(1,2,3,4))          
>> numeric(0)

I have been wondering about something that could be related (perhaps not),
whether it is a design choice or a bug. If you do:
> 1:numeric(0)
Error in 1:numeric(0) : NA/NaN argument
In some cases, it has seemed to me that it would have been sooo much more
convenient if it returned
numeric(0)
But of course, I have no clue as to what that would break.... :-)

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jul 17 23:26:12 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 17 Jul 2000 22:26:12 +0100 (BST)
Subject: [R] na.omit
In-Reply-To: <Pine.OSF.4.05.10007172256500.3963-100000@alnair.uio.no>
Message-ID: <Pine.GSO.4.05.10007172219220.19991-100000@auk.stats>

On Mon, 17 Jul 2000, Kjetil Kjernsmo wrote:

> On 17 Jul 2000, Douglas Bates wrote:
> 
> >buerkle at hawaii.edu writes:
> >
> >> Why is it that when a vector contains no NAs, na.omit returns an empty
> >> vector rather than the object/vector that was passed to it?  
> >> 
> >> >na.omit(c(1,2,3,4))          
> >> numeric(0)
> 
> I have been wondering about something that could be related (perhaps not),
> whether it is a design choice or a bug. If you do:
> > 1:numeric(0)
> Error in 1:numeric(0) : NA/NaN argument
> In some cases, it has seemed to me that it would have been sooo much more
> convenient if it returned
> numeric(0)

Why is that a sensible answer?  1:x expects a length-one vector x,
preferably an integer one.  And 1:0, for example, is not a length-zero
vector.  If x is not specified, 1:x is also not specified.  In particular,
its length is not specified (and hence not specified as zero) and so
a vector of NAs will not do.

If you really, really wanted this it should be integer(0) for consistency.
(1:n has storage mode integer.)

> But of course, I have no clue as to what that would break.... :-)

Interpretability!

S does try to do sensible things in boundary cases (in the Unix tradition),
but only where (almost) everyone can agree on what is sensible.

BTW, ?seq does not specify the arguments, so I had better fix that.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Mon Jul 17 23:45:03 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Mon, 17 Jul 2000 17:45:03 -0400 (EDT)
Subject: [R] Code for Coefficent (Cronbach's) Alpha
In-Reply-To: <AC09DC4F4DFCD211A83C00805FE6138D3692FB@NHQJPK1EX2>
Message-ID: <Pine.LNX.4.10.10007171735240.2066-100000@bolker.zoo.ufl.edu>


  Caveat, I haven't spent a lot of time thinking about this and you should
check that this really does what you want!  But ...

  I think you can do this more compactly (and faster) using apply().

  score.total <- apply(x,1,sum)
  var.items <- sum(apply(x,2,var))
  z.score.total <- apply(z.score.total,1,sum)
  z.var.items <- sum(apply(z.x,1,sum)

  Doing it this way you can dispense with the most of the setting-to-zero
stuff.

  -- assuming that you want score.total and z.score.total to be vectors
containing the row sums and var.items and z.var.items to be the sum of the
variances of the columns.

 You can of course condense things even more, for example

  var.total <- var(apply(x,1,sum))
  z.var.total <- var(apply(z.score.total,1,sum))

 You have to decide on your own about the tradeoff between
compactness/efficiency and legibility.

On Mon, 17 Jul 2000, Magill, Brett wrote:

> reliability.alpha<-function(x){
> 
> 	score.total<-0
> 	var.items<-0
> 	var.total<-0
> 	z.x<-0
> 	z.score.total<-0
> 	z.var.items<-0
> 	z.x<-scale(x, center = TRUE, scale = TRUE)
> 	n.items<-length(x)
> 
> 	for (i in 1:n.items) score.total<-score.total + x[,i]
> 	for (i in 1:n.items) var.items<-var.items + var(x[,i])
> 	for (i in 1:n.items) z.score.total<-z.score.total + z.x[,i]
> 	for (i in 1:n.items) z.var.items<-z.var.items + var(z.x[,i])
> 
> 	var.total<-var(score.total)
> 	z.var.total<-var(z.score.total)
> 
> 	cronbachs.alpha<-(n.items/(n.items-1))*((var.total -
> var.items)/var.total)
> 	z.cronbachs.alpha<-(n.items/(n.items-1))*((z.var.total -
> z.var.items)/z.var.total)
> 
> 	return(cronbachs.alpha, z.cronbachs.alpha)}




> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-- 
Ben Bolker                                  bolker at zoo.ufl.edu
Zoology Department, University of Florida   http://www.zoo.ufl.edu/bolker
318 Carr Hall/Box 118525                    tel: (352) 392-5697
Gainesville, FL 32611-8525                  fax: (352) 392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ReddinM at prose.dpi.qld.gov.au  Tue Jul 18 00:06:24 2000
From: ReddinM at prose.dpi.qld.gov.au (Redding, Matthew)
Date: Tue, 18 Jul 2000 08:06:24 +1000
Subject: [R] Fonts and Line widths
Message-ID: <FB599DB5ACE2D211887500A0C9D334E40B146E@TBACRMEXH001>

Thanks for your replies Brian and Uwe, 

I won't be trying to use PNG's for my purposes then.
To change the line widths the make the diagram darker and more conducive to
publication, I have to go back to the source code for bxp(.), then?
There are no parameters from within R that can change this?

Thanks, 

Matt Redding
Soil Scientist
Intensive Livestock Environmental Management-Research
Department of Primary Industries, Queensland
Australia.  ph 61 7 46 881372
	fax 61 7 46 881192
	reddinm at dpi.qld.gov.au
            http://www.dpi.qld.gov.au/ilems


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ReddinM at prose.dpi.qld.gov.au  Tue Jul 18 02:15:18 2000
From: ReddinM at prose.dpi.qld.gov.au (Redding, Matthew)
Date: Tue, 18 Jul 2000 10:15:18 +1000
Subject: [R] Fonts and Line widths
Message-ID: <FB599DB5ACE2D211887500A0C9D334E40B146F@TBACRMEXH001>

I've worked out how to do this,

So no need to reply to the previous query.
I have used the Par(lwd=2) command, which increases line thickness.

......Now I simply have to find how to change to a sans serif font, and I
will be OK.

Thanks, 

Matt Redding
Soil Scientist
Intensive Livestock Environmental Management-Research
Department of Primary Industries, Queensland
Australia.  ph 61 7 46 881372
	fax 61 7 46 881192
	reddinm at dpi.qld.gov.au
            http://www.dpi.qld.gov.au/ilems



> -----Original Message-----
> From:	Redding, Matthew [SMTP:reddinm at dpi.qld.gov.au]
> Sent:	Tuesday, July 18, 2000 8:06 AM
> To:	R list
> Subject:	RE: [R] Fonts and Line widths
> 
> Thanks for your replies Brian and Uwe, 
> 
> I won't be trying to use PNG's for my purposes then.
> To change the line widths the make the diagram darker and more conducive
> to
> publication, I have to go back to the source code for bxp(.), then?
> There are no parameters from within R that can change this?
> 
> Thanks, 
> 
> Matt Redding
> Soil Scientist
> Intensive Livestock Environmental Management-Research
> Department of Primary Industries, Queensland
> Australia.  ph 61 7 46 881372
> 	fax 61 7 46 881192
> 	reddinm at dpi.qld.gov.au
>             http://www.dpi.qld.gov.au/ilems
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pconnolly at hort.cri.nz  Tue Jul 18 04:47:33 2000
From: pconnolly at hort.cri.nz (Patrick Connolly)
Date: Tue, 18 Jul 2000 14:47:33 +1200 (NZST)
Subject: [R] Use of adj in axis()
Message-ID: <200007180247.e6I2lXI01416@biomat1.marc.hort.cri.nz>

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R                


I'm trying to adjust the tick labels on a vertical axis. I wanted them
to be horizontal instead of vertical.  In the case of a vertical axis,
las = 1 is the same as las = 2.  

That's fine except that if the font size for the labels is reduced
below the default, they no longer align with the tick marks.  I can't
adjust using adj because it adjusts only the horizontal placement.
The vertical alignment that is available in text() is not available
with axis().

My question is this:

Is it possible without fudging with the at setting to get the labels
to align with the tick marks?

BTW: is there any documentation describing what text() does
differently with hershey fonts and "standard" fonts.  Seems to have
something to do with a different default value of the second value in
adj -- but that's not quite it either.


Thanks



-- 
*************************************************************
Patrick Connolly
HortResearch        
Mt Albert               It's better to do nothing than to waste time
Auckland                                      ..... Viktorus Kulvinskus
New Zealand                          
Ph: +64-9 815 4200 x 7188
*************************************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 18 08:15:57 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 18 Jul 2000 07:15:57 +0100 (BST)
Subject: [R] Fonts and Line widths
In-Reply-To: <FB599DB5ACE2D211887500A0C9D334E40B146F@TBACRMEXH001>
Message-ID: <Pine.GSO.4.05.10007180712230.20136-100000@auk.stats>

On Tue, 18 Jul 2000, Redding, Matthew wrote:

> I've worked out how to do this,
> 
> So no need to reply to the previous query.
> I have used the Par(lwd=2) command, which increases line thickness.
> 
> ......Now I simply have to find how to change to a sans serif font, and I
> will be OK.

On Windows...

That is in the README: edit RHOME\etc\Rdevga, or use font=6 (Arial).

Not sure why the dvga device has a different default from the Unix ones
....

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Tue Jul 18 15:29:06 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Tue, 18 Jul 2000 15:29:06 +0200 (MET DST)
Subject: [R] na.omit
In-Reply-To: <Pine.GSO.4.05.10007172219220.19991-100000@auk.stats>
Message-ID: <Pine.OSF.4.05.10007181513290.12156-100000@alnair.uio.no>

On Mon, 17 Jul 2000, Prof Brian D Ripley wrote:

>> Error in 1:numeric(0) : NA/NaN argument
>> In some cases, it has seemed to me that it would have been sooo much more
>> convenient if it returned
>> numeric(0)
>
>Why is that a sensible answer? 

Well, I didn't say sensible, I said convenient.... :-) I don't know if it
is sensible (yet), but the reason it I have found it could be convenient 
is if I had a vector x, and I wanted elements 1:n, and n in some special
case happened to be unspecified, x[1:n] would also not be specified.

> 1:x expects a length-one vector x,
>preferably an integer one.  And 1:0, for example, is not a length-zero
>vector.  If x is not specified, 1:x is also not specified.  In particular,
>its length is not specified (and hence not specified as zero) and so
>a vector of NAs will not do.

Indeed. In the above case, I would have to compute n, check if is
unspecified, if it is, return numeric(0), if not return the result. If
1:numeric(0) was, well, integer(0), I wouldn't have to worry about those
checks.

>If you really, really wanted this it should be integer(0) for consistency.
>(1:n has storage mode integer.)

Fine with me! 

>S does try to do sensible things in boundary cases (in the Unix tradition),
>but only where (almost) everyone can agree on what is sensible.

Yes, and it does a good job!

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From tord.snall at ebc.uu.se  Tue Jul 18 18:35:23 2000
From: tord.snall at ebc.uu.se (Tord Snall)
Date: Tue, 18 Jul 2000 18:35:23 +0200
Subject: [R] Standardised coeff. & model fit
Message-ID: <3.0.6.32.20000718183523.009f0b10@mail.anst.uu.se>

Dear all,

I have developed regression models using stepAIC() but since the aim of my
study is to show the relative importance of different parameters I want the
standardised partial regression coefficients, their standard deviations and
confidence intervals. The models are based on data from binomial or Poisson
distributions. Can I get those estimates from R or do I have to rerun the
analysis using normalised data? 

If the estimates are not available in R I plan to normalise by subtracting
each value from the mean of that variable, thereafter dividing with the
standard deviation of that variable. I assume there is no problem in
normalising binary independent variables.

I plan to present each model (the linear component) in a histogram where
the height and direction of the bars show the standardised coefficients and
their sign, respectively. Error bars will show the 95%-confidence interval.

I also would like to know what value is normally presented for summarising
fit when the modelling is based on AIC. Is it model AIC or is it mean
deviance? In ecological literature I have seen "% explained deviance"
assuming it is (Null Dev. - Resid. Dev.) / Null Dev. but I am not really
satisfied with this.

I am using R 1.1.0 on Windows NT.

Thanks in advance for any comments or help!


Sincerely,
Tord Sn?ll


-----------------------------------------------------------------------
******New e-mail address: Tord.Snall at ebc.uu.se*******

Tord Sn?ll, PhD student
Avd. f v?xtekologi, Evolutionsbiologiskt centrum, Uppsala universitet
Dept. of Plant Ecology, Evolutionary Biology Centre, Uppsala University
Villav?gen 14			
SE-752 36 Uppsala, Sweden
Tel: 018-471 28 82 (int +46 18 471 28 82) (work)
Tel: 018-25 71 33 (int +46 18 25 71 33) (home)
Fax: 018-55 34 19 (int +46 18 55 34 19) (work)
E-mail: Tord.Snall at ebc.uu.se
Homepage: http://www.vaxtbio.uu.se/resfold/tord_s.htm
------------------------------------------------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at protogene.com  Tue Jul 18 21:51:38 2000
From: sarthur at protogene.com (Steve Arthur)
Date: Tue, 18 Jul 2000 12:51:38 -0700 (PDT)
Subject: [R] X11 & dev2bitmap
Message-ID: <Pine.LNX.4.21.0007181231520.25892-100000@crick.protogene.com>

Hi,

I am trying to put some graphics I have generated from R on a
webpage using dev2bitmap to create a bitmap, .BMP, file. 

When I look at my notes from 2 or 3 months ago I was successfully able to
put the ACTIVE device plot result into a bitmap file using a command such
as:

dev2bitmap("InsectSpray.BMP")

Job done!

Now when I try the same command, I get the following:

> boxplot(InsectData)
> dev2bitmap("InsectSpray.BMP")
Error in device(...) : Object "width" not found      

I looked-up what R means by 'device' and constructed this command:

> X11(display = "", width = 7, height = 7, pointsize = 12, gamma = 1,
colortype = getOption("X11colortype"), maxcubesize = 256)  

with no resistance, but no change in the result.

I looked up files containing x11 or X11 on my systen and found:

/usr/local/R_HOME/R-1.1.0/src/unix/X11
/usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.c
/usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.d
/usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.o
/usr/local/R_HOME/R-1.1.0/bin/R_X11.so
/usr/local/R_HOME/R-1.1.0/src/library/base/R/unix/x11.R
/usr/local/R_HOME/R-1.1.0/src/library/base/R/windows/x11.R
/usr/local/R_HOME/R-1.1.0/src/library/base/man/unix/x11.Rd
/usr/local/R_HOME/R-1.1.0/library/base/help/x11
/usr/local/R_HOME/R-1.1.0/library/base/html/x11.html
/usr/local/R_HOME/R-1.1.0/library/base/latex/x11.tex 

any idea on what is happening to my device and Object?

steve

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From P.Connolly at hort.cri.nz  Tue Jul 18 22:51:48 2000
From: P.Connolly at hort.cri.nz (Patrick Connolly)
Date: Wed, 19 Jul 2000 08:51:48 +1200 (NZST)
Subject: [R] Use of adj in axis()
Message-ID: <200007182051.e6IKpmg12100@atlas.marc.cri.nz>

Yesterday, I asked:


|> My question is this:
|> 
|> Is it possible without fudging with the at setting to get the labels
|> to align with the tick marks?

It has changed to:

Is it possible even WITH fudging with the at setting .... ?

Ross Ihaka tells me there is a bug, so I set about adjusting the at
setting, but it had no effect.

Has anyone managed a work around?



-- 
Patrick Connolly
HortResearch
Mt Albert
Auckland
New Zealand 
Ph: +64-9 815 4200 x 7188
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
I have the world's largest collection of seashells. I keep it on all
the beaches of the world ... Perhaps you've seen it.  ---Steven Wright
~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~.~
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pconnolly at hort.cri.nz  Wed Jul 19 00:16:23 2000
From: pconnolly at hort.cri.nz (Patrick Connolly)
Date: Wed, 19 Jul 2000 10:16:23 +1200 (NZST)
Subject: [R] Fudging axis ticks
Message-ID: <200007182216.e6IMGOU01967@biomat1.marc.hort.cri.nz>

Earlier I asked how to fudge the tick labels with axis().

It's quite simple, though not elegant.  Use axis twice, once with tick
= T and labels = F: then again with the fudged factor added onto at
with tick = F and labels = T.


I should have noticed that before I asked.


-- 
*************************************************************
Patrick Connolly
HortResearch        
Mt Albert               It's better to do nothing than to waste time
Auckland                                      ..... Viktoras Kulvinskas
New Zealand                          
Ph: +64-9 815 4200 x 7188
*************************************************************
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From sarthur at protogene.com  Wed Jul 19 02:47:06 2000
From: sarthur at protogene.com (Steve Arthur)
Date: Tue, 18 Jul 2000 17:47:06 -0700 (PDT)
Subject: [R] X11 & dev2bitmap
In-Reply-To: <OFEGJMACADMFOKHCCFBJOEMHCKAA.vkutsyy@yahoo.com>
Message-ID: <Pine.LNX.4.21.0007181733390.1018-100000@crick.protogene.com>

Vadim,

According to:

http://www.ci.tuwien.ac.at/R/bin/windows/windows-9x/base/CHANGES0

it states ...

"For changes since the release of R 1.0.0 on 29 Feb 2000 see the file
CHANGES"

"Support for GIF format bitmaps has been removed, but support for PNG,JPEG
and BMP has been added. This can be done via the File menu on the graphics
window, savePlot() or dev.print to the new devices png(), bmp() and
jpeg(), which can also be used directly."

not on UNIX.

and 

http://www.azertech.com/ttm/bcb/faq-misc-graphic-formats.htm

states:

Portable Network Graphics Format (PNG)

"The PNG format is probably going to become the most widely used format of
the future. It incorporates all the latest image technologies and is free
of licensing restrictions."

This is the format I will try to get to work in R unless there are any
reasonable objections from the audience.

steve

On Tue, 18 Jul 2000, Vadim Kutsyy wrote:

> On a side note.

> If you are putting image on the web, I think gif, or gpeg would be much
> better alternative.

> They are much smaller.
> 
> --------------------------------------------------------
> Vadim Kutsyy
> http://www.kutsyy.com                   vadim at kutsyy.com
> The University of Michigan - Ann Arbor     Ph.D. Student
> 
> > -----Original Message-----
> > From: owner-r-help at stat.math.ethz.ch
> > [mailto:owner-r-help at stat.math.ethz.ch]On Behalf Of Steve Arthur
> > Sent: Tuesday, July 18, 2000 3:52 PM
> > To: r-help-digest at stat.math.ethz.ch
> > Subject: [R] X11 & dev2bitmap
> >
> >
> > Hi,
> >
> > I am trying to put some graphics I have generated from R on a
> > webpage using dev2bitmap to create a bitmap, .BMP, file.
> >
> > When I look at my notes from 2 or 3 months ago I was successfully able to
> > put the ACTIVE device plot result into a bitmap file using a command such
> > as:
> >
> > dev2bitmap("InsectSpray.BMP")
> >
> > Job done!
> >
> > Now when I try the same command, I get the following:
> >
> > > boxplot(InsectData)
> > > dev2bitmap("InsectSpray.BMP")
> > Error in device(...) : Object "width" not found
> >
> > I looked-up what R means by 'device' and constructed this command:
> >
> > > X11(display = "", width = 7, height = 7, pointsize = 12, gamma = 1,
> > colortype = getOption("X11colortype"), maxcubesize = 256)
> >
> > with no resistance, but no change in the result.
> >
> > I looked up files containing x11 or X11 on my systen and found:
> >
> > /usr/local/R_HOME/R-1.1.0/src/unix/X11
> > /usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.c
> > /usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.d
> > /usr/local/R_HOME/R-1.1.0/src/unix/X11/devX11.o
> > /usr/local/R_HOME/R-1.1.0/bin/R_X11.so
> > /usr/local/R_HOME/R-1.1.0/src/library/base/R/unix/x11.R
> > /usr/local/R_HOME/R-1.1.0/src/library/base/R/windows/x11.R
> > /usr/local/R_HOME/R-1.1.0/src/library/base/man/unix/x11.Rd
> > /usr/local/R_HOME/R-1.1.0/library/base/help/x11
> > /usr/local/R_HOME/R-1.1.0/library/base/html/x11.html
> > /usr/local/R_HOME/R-1.1.0/library/base/latex/x11.tex
> >
> > any idea on what is happening to my device and Object?
> >
> > steve
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Talk to your friends online with Yahoo! Messenger.
> http://im.yahoo.com
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 19 08:16:58 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jul 2000 07:16:58 +0100 (BST)
Subject: [R] X11 & dev2bitmap
In-Reply-To: <Pine.LNX.4.21.0007181231520.25892-100000@crick.protogene.com>
Message-ID: <Pine.GSO.4.05.10007190711540.10313-100000@auk.stats>

On Tue, 18 Jul 2000, Steve Arthur wrote:

> Hi,
> 
> I am trying to put some graphics I have generated from R on a
> webpage using dev2bitmap to create a bitmap, .BMP, file. 
> 
> When I look at my notes from 2 or 3 months ago I was successfully able to
> put the ACTIVE device plot result into a bitmap file using a command such
> as:
> 
> dev2bitmap("InsectSpray.BMP")
> 
> Job done!
> 
> Now when I try the same command, I get the following:
> 
> > boxplot(InsectData)
> > dev2bitmap("InsectSpray.BMP")
> Error in device(...) : Object "width" not found      

This is a side-effect of a change to dev.print, and has already been fixed
in the patched version.

However, you are now encouraged to use the bitmap device directly, in your
case

bitmap(file="InsectSpray.BMP")
boxplot(InsectData)
dev.off()


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 19 08:57:15 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jul 2000 07:57:15 +0100 (BST)
Subject: [R] X11 & dev2bitmap
In-Reply-To: <Pine.LNX.4.21.0007181733390.1018-100000@crick.protogene.com>
Message-ID: <Pine.GSO.4.05.10007190753130.10313-100000@auk.stats>

On Tue, 18 Jul 2000, Steve Arthur wrote:

> Vadim,
> 
> According to:
> 
> http://www.ci.tuwien.ac.at/R/bin/windows/windows-9x/base/CHANGES0
> 
> it states ...
> 
> "For changes since the release of R 1.0.0 on 29 Feb 2000 see the file
> CHANGES"
> 
> "Support for GIF format bitmaps has been removed, but support for PNG,JPEG
> and BMP has been added. This can be done via the File menu on the graphics
> window, savePlot() or dev.print to the new devices png(), bmp() and
> jpeg(), which can also be used directly."
> 
> not on UNIX.

But there are png() and jpeg() (and bitmap()) devices now on UNIX.
The reason there is not a bmp() device on UNIX is that we did not
anticipate any demand for a Windows format there.

There are lots of tools on Unix to convert these bitmap formats from one to
another, so we have no intention of providing a comprehensive set.
There are fewer such tools on Windows, and they have more restrictions,
so we tried a little harder there.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pwolf at wiwi.uni-bielefeld.de  Wed Jul 19 13:36:43 2000
From: pwolf at wiwi.uni-bielefeld.de (Peter Wolf)
Date: Wed, 19 Jul 2000 13:36:43 +0200 (METDST)
Subject: [R] How to use tcltk?
Message-ID: <200007191136.NAA09955@wiwi7.uni-bielefeld.de>


Hallo Tk experts,

the Tcl/Tk package allows to define very nice widgets for starting
R functions, for printing results and for interactive parameter input.
tkdensity.R and tkttest.R demonstrate this and both demos explain
how some of the tk functions can be used.
For constructing new widgets I would like to see further examples
showing Tcl/Tk package in action. Therefore my question:
Is there a pool of well designed applications of tk functions? /
Have you created a beautiful example?

Here is one of my problems: To print the position of the mouse cursor
the following lines of code will work:

  label .l2 -textvariable tvar
  pack  .l2
  bind  .    <Motion> { set tvar "position %x %y" }
  bind  .    <Leave>  { set tvar "mouse outside"  }

However, I have not been able to implement this by tk* functions of the R
package. Any idea?

Peter Wolf

 
(system: hppa2.0, hpux10.20, major: 1, minor: 1.0, language: R)
---------------------------------------------------------------------------
Hans Peter Wolf
Fak. f. Wirtschaftswissenschaften
Uni Bielefeld
Bielefeld, Germany
email: pwolf at wiwi.uni-bielefeld.de


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Wed Jul 19 17:39:25 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 19 Jul 2000 08:39:25 -0700 (PDT)
Subject: [R] How to use tcltk?
In-Reply-To: <200007191136.NAA09955@wiwi7.uni-bielefeld.de>
Message-ID: <Pine.GSO.4.21.0007190832210.24579-100000@atlas.biostat.washington.edu>

On Wed, 19 Jul 2000, Peter Wolf wrote:

> 
> Hallo Tk experts,

I'm not sure you'll find many of them here :)
 

> Is there a pool of well designed applications of tk functions? /
No

> Have you created a beautiful example?
No (well, yes, but you've seen it)

> Here is one of my problems: To print the position of the mouse cursor
> the following lines of code will work:
> 
>   label .l2 -textvariable tvar
>   pack  .l2
>   bind  .    <Motion> { set tvar "position %x %y" }
>   bind  .    <Leave>  { set tvar "mouse outside"  }
> 
> However, I have not been able to implement this by tk* functions of the R
> package. Any idea?

It seems to translate fairly easily (and I don't really know Tcl/Tk)

tt<-tktoplevel()
l2<-tklabel(tt,textvariable="tvar")
tkpack(l2)
tkbind(tt,"<Motion>","set tvar \"position %x %y\"")
tkbind(tt,"<Leave>","set tvar \"mouse outside\"")

and if you like you can also read or set tvar from R using tclvar$tvar

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Wed Jul 19 19:23:20 2000
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Wed, 19 Jul 2000 13:23:20 -0400
Subject: [R] pasing names
In-Reply-To: <20000617193907.62739@hal.stat.unipd.it>
Message-ID: <200007191723.NAA26406@sirocco.cc.mcgill.ca>

Hi, I wrote the simple program below, I want 'bartlett.test' to print the 
real name of the variables, not the dummys 'y' and 'g', Can 
somebody in the list tell me how to pass the names?
.
test <- function(y,g){
#  some other stuff
   bartlett.test(y,g)
#    some other stuff
}
Thanks.

R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 19 20:39:26 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 19 Jul 2000 19:39:26 +0100 (BST)
Subject: [R] pasing names
In-Reply-To: <200007191723.NAA26406@sirocco.cc.mcgill.ca>
Message-ID: <Pine.GSO.4.05.10007191935040.2499-100000@auk.stats>

On Wed, 19 Jul 2000, Heberto Ghezzo wrote:

> Hi, I wrote the simple program below, I want 'bartlett.test' to print the 
> real name of the variables, not the dummys 'y' and 'g', Can 
> somebody in the list tell me how to pass the names?
> .
> test <- function(y,g){
> #  some other stuff
>    bartlett.test(y,g)
> #    some other stuff
> }
> Thanks.

Use substitute, e.g.

testit <- function(y, g)
{
	eval.parent(substitute(bartlett.test(y,g)))
}
data(InsectSprays)
testit(InsectSprays$count, InsectSprays$spray)


         Bartlett test for homogeneity of variances 

data:  InsectSprays$count and InsectSprays$spray 
Bartlett's K-square = 25.9598, df = 5, p-value = 9.085e-05 

as required, I assume?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 20 08:40:16 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 20 Jul 2000 16:40:16 +1000
Subject: [R] printing hclust with k clusters
Message-ID: <61411576E951D211AF330008C7245DD905F688A7@ntmsg0005.corpmail.telstra.com.au>

howdy R friends,

I've searched CRAN but to no avail... I'm trying to use mva's hclust and
print out for say 10 clusters in batch.  How do I do this?  It's unclear if
I can use cutree.

thanks,
John Strumila
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Thu Jul 20 08:55:04 2000
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 20 Jul 2000 08:55:04 +0200 (CEST)
Subject: [R] printing hclust with k clusters
In-Reply-To: <61411576E951D211AF330008C7245DD905F688A7@ntmsg0005.corpmail.telstra.com.au>
References: <61411576E951D211AF330008C7245DD905F688A7@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <14710.41544.325358.579083@aragorn.ci.tuwien.ac.at>

>>>>> On Thu, 20 Jul 2000 16:40:16 +1000,
>>>>> Strumila, John (SJ) wrote:

SJ> howdy R friends,
SJ> I've searched CRAN but to no avail... I'm trying to use mva's hclust and
SJ> print out for say 10 clusters in batch.  How do I do this?  It's unclear if
SJ> I can use cutree.

Hmm, I'm not sure I understand your question. What exactly do you mean
by ``print out for say 10 clusters in batch''?

I suspect what you want to do is not as simple as

	hc <- hclust(dist(mydata))
	cutree(hc, k=10)

but I cannot infer more from your mail ...

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 20 09:09:46 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 20 Jul 2000 17:09:46 +1000
Subject: [R] printing hclust with k clusters
Message-ID: <61411576E951D211AF330008C7245DD905F688D9@ntmsg0005.corpmail.telstra.com.au>

sorry if I was unclear.

I want a plot method for say k=10.  Maybe something like:

	hc <- hclust(dist(mydata))
	plot(cutree(hc, k=10))

but the cutree object doesn't give the right class for the plot method that
I want.

thanks,
John Strumila

-----Original Message-----
From: Friedrich Leisch [mailto:Friedrich.Leisch at ci.tuwien.ac.at]
Sent: Thursday, 20 July 2000 16:55
To: Strumila, John
Cc: r-help at stat.math.ethz.ch
Subject: Re: [R] printing hclust with k clusters


>>>>> On Thu, 20 Jul 2000 16:40:16 +1000,
>>>>> Strumila, John (SJ) wrote:

SJ> howdy R friends,
SJ> I've searched CRAN but to no avail... I'm trying to use mva's hclust and
SJ> print out for say 10 clusters in batch.  How do I do this?  It's unclear
if
SJ> I can use cutree.

Hmm, I'm not sure I understand your question. What exactly do you mean
by ``print out for say 10 clusters in batch''?

I suspect what you want to do is not as simple as

	hc <- hclust(dist(mydata))
	cutree(hc, k=10)

but I cannot infer more from your mail ...

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Friedrich.Leisch at ci.tuwien.ac.at  Thu Jul 20 09:26:37 2000
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 20 Jul 2000 09:26:37 +0200 (CEST)
Subject: [R] printing hclust with k clusters
In-Reply-To: <61411576E951D211AF330008C7245DD905F688D9@ntmsg0005.corpmail.telstra.com.au>
References: <61411576E951D211AF330008C7245DD905F688D9@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <14710.43437.729860.748798@aragorn.ci.tuwien.ac.at>

>>>>> On Thu, 20 Jul 2000 17:09:46 +1000,
>>>>> Strumila, John (SJ) wrote:

SJ> sorry if I was unclear.
SJ> I want a plot method for say k=10.  Maybe something like:

SJ> 	hc <- hclust(dist(mydata))
SJ> 	plot(cutree(hc, k=10))

SJ> but the cutree object doesn't give the right class for the plot method that
SJ> I want.

Aah, you mean plotting the upper part of the dendrogram such that it
has only 10 leaves, i.e., cutting it there?

That's somewhere on my 2do list (but I want to implement general
functions for handling trees, not only cluster dendrograms, hence it is not
that trivial) ...

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 20 09:46:10 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 20 Jul 2000 17:46:10 +1000
Subject: [R] printing hclust with k clusters
Message-ID: <61411576E951D211AF330008C7245DD905F688DE@ntmsg0005.corpmail.telstra.com.au>

thanks for the effort Friedrich.

John Strumila

-----Original Message-----
From: Friedrich Leisch [mailto:Friedrich.Leisch at ci.tuwien.ac.at]
Sent: Thursday, 20 July 2000 17:27
To: Strumila, John
Cc: r-help at stat.math.ethz.ch
Subject: RE: [R] printing hclust with k clusters


>>>>> On Thu, 20 Jul 2000 17:09:46 +1000,
>>>>> Strumila, John (SJ) wrote:

SJ> sorry if I was unclear.
SJ> I want a plot method for say k=10.  Maybe something like:

SJ> 	hc <- hclust(dist(mydata))
SJ> 	plot(cutree(hc, k=10))

SJ> but the cutree object doesn't give the right class for the plot method
that
SJ> I want.

Aah, you mean plotting the upper part of the dendrogram such that it
has only 10 leaves, i.e., cutting it there?

That's somewhere on my 2do list (but I want to implement general
functions for handling trees, not only cluster dendrograms, hence it is not
that trivial) ...

.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Thu Jul 20 11:15:49 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 20 Jul 2000 11:15:49 +0200 (CEST)
Subject: [R] printing hclust with k clusters
In-Reply-To: <14710.43437.729860.748798@aragorn.ci.tuwien.ac.at>
References: <61411576E951D211AF330008C7245DD905F688D9@ntmsg0005.corpmail.telstra.com.au>
	<14710.43437.729860.748798@aragorn.ci.tuwien.ac.at>
Message-ID: <14710.49989.113063.142746@gargle.gargle.HOWL>

>>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch at ci.tuwien.ac.at> writes:

>>>>> On Thu, 20 Jul 2000 17:09:46 +1000,
>>>>> Strumila, John (SJ) wrote:

    SJ> sorry if I was unclear.  I want a plot method for say k=10.  Maybe
    SJ> something like:

    SJ> hc <- hclust(dist(mydata)) plot(cutree(hc, k=10))

    SJ> but the cutree object doesn't give the right class for the plot
    SJ> method that I want.

    FrL> Aah, you mean plotting the upper part of the dendrogram such that
    FrL> it has only 10 leaves, i.e., cutting it there?

    FrL> That's somewhere on my 2do list (but I want to implement general
    FrL> functions for handling trees, not only cluster dendrograms, hence
    FrL> it is not that trivial) ...

was mich dran erinnert, dass ich doch schon seit einigen Tagen fragen
wollte, wie's hiere weitergehen soll.

Ich koennte auch was machen, im Sinne der besprochenen "dendrogramm" Klasse
aber es waere gewiss sinnvoll, nicht dasselbe zweimal zu tun..

Hast du schon einen "core dump", den ich mal bearbeiten koennte?

Gruss	: Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From denis at mail.cor.epa.gov  Thu Jul 20 17:38:02 2000
From: denis at mail.cor.epa.gov (Denis White)
Date: Thu, 20 Jul 2000 08:38:02 -0700 (PDT)
Subject: [R] printing hclust with k clusters
In-Reply-To: <61411576E951D211AF330008C7245DD905F688D9@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.SUN.3.91.1000720083439.1185A-100000@okapi.cor.epa.gov>

Package maptree in contributed extensions has functions
prune.clust and draw.clust that may help you.

Denis White
   US EPA, 200 SW 35th St, Corvallis, Oregon, 97333 USA
   voice: 541.754.4476, email: white.denis at epa.gov
   web: www.epa.gov/wed/pages/staff/white/

On Thu, 20 Jul 2000, Strumila, John wrote:

> sorry if I was unclear.
> 
> I want a plot method for say k=10.  Maybe something like:
> 
> 	hc <- hclust(dist(mydata))
> 	plot(cutree(hc, k=10))
> 
> but the cutree object doesn't give the right class for the plot method that
> I want.
> 
> thanks,
> John Strumila
> 
> -----Original Message-----
> From: Friedrich Leisch [mailto:Friedrich.Leisch at ci.tuwien.ac.at]
> Sent: Thursday, 20 July 2000 16:55
> To: Strumila, John
> Cc: r-help at stat.math.ethz.ch
> Subject: Re: [R] printing hclust with k clusters
> 
> 
> >>>>> On Thu, 20 Jul 2000 16:40:16 +1000,
> >>>>> Strumila, John (SJ) wrote:
> 
> SJ> howdy R friends,
> SJ> I've searched CRAN but to no avail... I'm trying to use mva's hclust and
> SJ> print out for say 10 clusters in batch.  How do I do this?  It's unclear
> if
> SJ> I can use cutree.
> 
> Hmm, I'm not sure I understand your question. What exactly do you mean
> by ``print out for say 10 clusters in batch''?
> 
> I suspect what you want to do is not as simple as
> 
> 	hc <- hclust(dist(mydata))
> 	cutree(hc, k=10)
> 
> but I cannot infer more from your mail ...
> 
> .f
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From stormplot at hotmail.com  Thu Jul 20 18:32:11 2000
From: stormplot at hotmail.com (Jason Fisher)
Date: Thu, 20 Jul 2000 09:32:11 PDT
Subject: [R] tcltk_package
Message-ID: <20000720163211.9883.qmail@hotmail.com>

Hello...

I'm having problems getting the "tcltk" package to run
within a recently installed version of R  (R1.10 for Windows95).

>library(tcltk)
Error in firstlib(which.lib.loc, package) :
        TCL_LIBRARY is not set
Error in library(tcltk) : .First.lib failed
>

Having little experience with R, I apologize for the
simplicity of this question.

Jason Fisher
stormplot at hotmail.com
________________________________________________________________________
Get Your Private, Free E-mail from MSN Hotmail at http://www.hotmail.com

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Thu Jul 20 20:35:27 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Thu, 20 Jul 2000 14:35:27 -0400
Subject: [R] tcltk_package
References: <20000720163211.9883.qmail@hotmail.com>
Message-ID: <005301bff279$474fa5f0$0201a8c0@Workgroup>

I would bet that TCL_LIBRARY is not set as the error suggest. That is it's
not set in your environnement. Just set it to the proper value drive:\path
and you should be in bussness.

YG




----- Original Message -----
From: "Jason Fisher" <stormplot at hotmail.com>
To: <r-help at hypatia.math.ethz.ch>
Sent: Thursday, July 20, 2000 12:32 PM
Subject: [R] tcltk_package


> Hello...
>
> I'm having problems getting the "tcltk" package to run
> within a recently installed version of R  (R1.10 for Windows95).
>
> >library(tcltk)
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in library(tcltk) : .First.lib failed
> >
>
> Having little experience with R, I apologize for the
> simplicity of this question.
>
> Jason Fisher
> stormplot at hotmail.com
> ________________________________________________________________________
> Get Your Private, Free E-mail from MSN Hotmail at http://www.hotmail.com
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 20 20:45:03 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 20 Jul 2000 19:45:03 +0100 (BST)
Subject: [R] tcltk_package
In-Reply-To: <20000720163211.9883.qmail@hotmail.com>
Message-ID: <Pine.GSO.4.05.10007201942340.28668-100000@auk.stats>

On Thu, 20 Jul 2000, Jason Fisher wrote:

> Hello...
> 
> I'm having problems getting the "tcltk" package to run
> within a recently installed version of R  (R1.10 for Windows95).
> 
> >library(tcltk)
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in library(tcltk) : .First.lib failed

>From the CHANGES file:

   Optional support for the Tcl/Tk interface.  To use this you need to
   install tcl831.exe from dev.scriptics.com, and you will need the Tcl
   and Tk dlls in your path.  Also, you need to set the environment
   variable TCL_LIBRARY, to something like c:/Program Files/Tcl/lib/tcl8.3.
   The demos(tk*) will work on Windows.


How you set environment variables is Windows-system-specific, but you can
set this on the command line or in a .Renviron file on any Windows system.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From root at predict.telepac.pt  Thu Jul 20 22:58:28 2000
From: root at predict.telepac.pt (Jorge Magalhaes)
Date: Thu, 20 Jul 2000 21:58:28 +0100 (WET)
Subject: [R] MANOVA
Message-ID: <Pine.LNX.4.05.10007202157240.543-100000@predict.telepac.pt>


I tried to compute Wilks Lamdba with the following code.

cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc

> metA<-read.table('./methodA.txt', header=T)
> metB<-read.table('./methodB.txt', header=T)
> metAbar<-apply(metA,2,mean)
> metBbar<-apply(metB,2,mean)
> metAcentred<-t(t(metA)-metAbar) # column centred Xij-xibar
> metBcentred<-t(t(metB)-metBbar) # column centred 
> WA<-crossprod(metAcentred) # compute W matrix 
> WB<-crossprod(metBcentred) # compute W matrix 
> Wt <- WA + WB
> met <- rbind(metA, metB) # all data in the same matrix
> metbar<-apply(met, 2, mean) # global mean vector
> BA <- nrow(metA) * (metAbar - metbar) %*% (t(metAbar)-t(metbar)) # compute B matrix  
> BB <- nrow(metB) * (metBbar - metbar) %*% (t(metBbar)-t(metbar)) # compute B matrix 
> Bt <- BA + BB
> lamdba <- det(Wt) / det(Bt+Wt) # Wilks Lamdba
> lamdba
[1] 0.4541112
> Wt.Bt.prod <- t(Wt) %*% Bt
> pillar <- eigen(Wt.Bt.prod)  # eigen for the Pillai test

ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc

Somebody can comment this code?

Jorge


...........................................
The data:
 
"Method A (Sludge calcinated at 1100 C)"

methodA.txt
............................................
 Chromium	Nickel	Aluminum	Zinc
 2.0	3.0	2.7	2.3
 2.1	3.1	2.8	2.2
 1.9	3.2	2.6	2.3
 2.2	3.1	2.8	2.2
 ..........................................

"Method B (Sludge calcinated at 1500 C)"

methodB.txt
............................................  
 Chromium	Nickel	Aluminum	Zinc
 2.1	3.1	2.6	2.2
 2.3	2.9	3.0	2.5
 1.9	3.0	2.6	2.2
 2.2	3.0	2.9	2.1
 2.4	3.1	2.7	2.2
 2.3	3.0	2.6	2.1
 1.8	2.8	2.7	2.0
 ...........................................

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From love at psy.utexas.edu  Fri Jul 21 01:37:05 2000
From: love at psy.utexas.edu (Bradley C. Love)
Date: Thu, 20 Jul 2000 23:37:05 +0000
Subject: [R] bad R bug
Message-ID: <39778D21.BA343B2B@psy.utexas.edu>


Hi,

I am not on this mailing list, but here is a terrible bug that has
stopped me in my tracks.  I am unable to remove observations from a data
matrix.

temp is the original matrix.  Notice that there are 288 entries with a
104 in the first column.  I attempt to remove these entries, but R does
not do it.

brad


ACTUAL COMMANDS:

> dim(temp)
[1] 30528    11
> table(temp[,1])
  1   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19
21  22
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 23  24  25  26  27  28  29  30  31  32  33  34  35  37  38  39  40  41
42  43
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61
62  63
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81
82  83
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 84  85  86  87  89  90  91  92  93  94  95  96  97  99 100 102 103 104
105 106
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
107 108 109 110 111 112
288 288 288 288 288 288
> tamp_temp[temp[,1]!=104,]
>

NO EFFECT!

> table(temp[,1])
  1   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19
21  22
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 23  24  25  26  27  28  29  30  31  32  33  34  35  37  38  39  40  41
42  43
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61
62  63
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81
82  83
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
 84  85  86  87  89  90  91  92  93  94  95  96  97  99 100 102 103 104
105 106
288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288 288
288 288
107 108 109 110 111 112
288 288 288 288 288 288




START UP SCREEN:

/usr/local/bin/R --vsize 50 --nsize 2000000
~:  /usr/local/bin/R --vsize 100 --nsize 3000000
WARNING: vsize ridiculously low, Megabytes assumed

R : Copyright 1999, The R Development Core Team
Version 0.64.2  (July 3, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type "?contributors" for a list.

Type "demo()" for some demos, "help()" for on-line help, or
     "help.start()" for a HTML browser interface to help.
Type "q()" to quit R.

[Previously saved workspace restored]





--
Bradley C. Love
love at psy.utexas.edu
http://love.psy.utexas.edu/
phone: (512) 232-5732
fax: (512) 471-6175

Mezes Hall 330
The University of Texas at Austin
Austin, TX 78712


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000720/53fdadee/attachment.html

From thomas at biostat.washington.edu  Fri Jul 21 02:24:40 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 20 Jul 2000 17:24:40 -0700 (PDT)
Subject: [R] bad R bug
In-Reply-To: <39778D21.BA343B2B@psy.utexas.edu>
Message-ID: <Pine.GSO.4.21.0007201713300.11677-100000@atlas.biostat.washington.edu>

On Thu, 20 Jul 2000, Bradley C. Love wrote:

> 
> Hi,
> 
> I am not on this mailing list, but here is a terrible bug that has
> stopped me in my tracks.  I am unable to remove observations from a data
> matrix.
> 
> temp is the original matrix.  Notice that there are 288 entries with a
> 104 in the first column.  I attempt to remove these entries, but R does
> not do it.
> 
> brad
> 
> 
> ACTUAL COMMANDS:
> 
> > dim(temp)
> [1] 30528    11
> > table(temp[,1])
<snip>
> > tamp_temp[temp[,1]!=104,]
    ^^^^
  If this is what you typed it's not surprising (tamp vs temp)

> >
> 
> NO EFFECT!
> 
> > table(temp[,1])
<snip>

It works when I try it, on R1.0.0, the oldest version I have access to.

> 
> START UP SCREEN:
> 
> /usr/local/bin/R --vsize 50 --nsize 2000000
> ~:  /usr/local/bin/R --vsize 100 --nsize 3000000
> WARNING: vsize ridiculously low, Megabytes assumed
> 
> R : Copyright 1999, The R Development Core Team
> Version 0.64.2  (July 3, 1999)
          ^^^^^^
          This could also be the problem.

You are unlikely to get much useful help for bugs before 1.0.0 if they
aren't in current versions, since we won't be able to reproduce them.  
There were a lot of bugs in 0.64.2, even just counting the ones we fixed.

Since 1.0.0 things are more stable, and we expect quite a lot of people to
use the forthcoming 1.1.1 for the entire northern hemisphere academic
year.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From love at psy.utexas.edu  Fri Jul 21 02:32:09 2000
From: love at psy.utexas.edu (Bradley C. Love)
Date: Fri, 21 Jul 2000 00:32:09 +0000
Subject: [R] bad R bug: thanks - sorry - using old version - ignore email
Message-ID: <39779A09.D94B1881@psy.utexas.edu>

didn't realize my version was ancient.


my apologies,
brad


--
Bradley C. Love
love at psy.utexas.edu
http://love.psy.utexas.edu/
phone: (512) 232-5732
fax: (512) 471-6175

Mezes Hall 330
The University of Texas at Austin
Austin, TX 78712


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000721/260d945b/attachment.html

From tord.snall at ebc.uu.se  Fri Jul 21 14:30:51 2000
From: tord.snall at ebc.uu.se (Tord Snall)
Date: Fri, 21 Jul 2000 14:30:51 +0200
Subject: [R] confint() error
Message-ID: <3.0.6.32.20000721143051.009fbc30@mail.anst.uu.se>

Dear all,
I have run the confint() function according to below and I get the
following error message:

> confint(stepAIC.glm.spe.var.konn2.abund, level=0.95)
Waiting for profiling to be done...
Error: missing value where logical needed
In addition: Warning message: 
NaNs produced in: sqrt((fm$deviance - OriginalDeviance)/DispersionParameter)

or

> confint(stepAIC.glm.spe.var.konn2.abund, parm="DIA", level=0.95)
Waiting for profiling to be done...
Error in object[[pm]] : subscript out of bounds

if only one covariate is analysed.

Profiling seem to be the problem. I would too very much like to have know
what the warning and error messages mean. 

All clues are welcome.

Thanks in advance!

Tord Sn?ll

Copy of the analysis:

standardiserat.data <- read.table("Inom_buffert (standardiserat).txt",
header=TRUE)
library(mass)
glm.spe.var.konn2.abund<-
glm(OSPEINC~DIA+FICKAD+RINGB+TUNNB+UTANB+DYING+DEAD+QUAL+SPRUCEBR+SOILMOIST+
SHADE+BARKDEPTH+PPULABUN+SPEABART2+SPEABFER2, family=binomial,
data=standardiserat.data)
stepAIC.glm.spe.var.konn2.abund <- stepAIC(glm.spe.var.konn2.abund,
direction="both", trace=FALSE, test="Chisq")

> drop1(stepAIC.glm.spe.var.konn2.abund, test="Chisq")
Single term deletions

Model:
OSPEINC ~ DIA + RINGB + TUNNB + QUAL + SPRUCEBR + SHADE + SPEABFER2
          Df Deviance    AIC    LRT   Pr(Chi)    
<none>         454.28 470.28                     
DIA        1   480.20 494.20  25.91 3.571e-07 ***
RINGB      1   460.01 474.01   5.73 0.0166762 *  
TUNNB      1   458.47 472.47   4.19 0.0407075 *  
QUAL       1   462.13 476.13   7.85 0.0050844 ** 
SPRUCEBR   1   457.07 471.07   2.78 0.0952700 .  
SHADE      1   465.66 479.66  11.38 0.0007443 ***
SPEABFER2  1   460.00 474.00   5.72 0.0167640 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 


> summary(stepAIC.glm.spe.var.konn2.abund, test="Chisq")

Call:
glm(formula = OSPEINC ~ DIA + RINGB + TUNNB + QUAL + SPRUCEBR + 
    SHADE + SPEABFER2, family = binomial, data = standardiserat.data)

Deviance Residuals: 
     Min        1Q    Median        3Q       Max  
-1.60196  -0.75333  -0.56346  -0.03123   2.45180  

Coefficients:
            Estimate Std. Error z value Pr(>|z|)    
(Intercept)  -1.5160     0.2627  -5.770 7.93e-09 ***
DIA           0.6128     0.1221   5.018 5.23e-07 ***
RINGB        -0.8115     1.1471  -0.707  0.47930    
TUNNB        -0.9344     1.1959  -0.781  0.43460    
QUAL         -0.3696     0.1421  -2.601  0.00930 ** 
SPRUCEBR     -0.2059     0.1335  -1.543  0.12291    
SHADE         0.4601     0.1417   3.247  0.00117 ** 
SPEABFER2     0.2711     0.1126   2.408  0.01602 *  
---
Signif. codes:  0  `***'  0.001  `**'  0.01  `*'  0.05  `.'  0.1  ` '  1 

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 512.21  on 466  degrees of freedom
Residual deviance: 454.28  on 459  degrees of freedom
AIC: 470.28

Number of Fisher Scoring iterations: 6

> confint(stepAIC.glm.spe.var.konn2.abund, level=0.95)
Waiting for profiling to be done...
Error: missing value where logical needed
In addition: Warning message: 
NaNs produced in: sqrt((fm$deviance - OriginalDeviance)/DispersionParameter) 


> profile.stepAIC.glm.spe.var.konn2.abund <-
profile(stepAIC.glm.spe.var.konn2.abund)

Error: missing value where logical needed
In addition: Warning message: 
NaNs produced in: sqrt((fm$deviance - OriginalDeviance)/DispersionParameter) 


> confint(stepAIC.glm.spe.var.konn2.abund, parm="DIA", level=0.95)

Waiting for profiling to be done...
Error in object[[pm]] : subscript out of bounds


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Fri Jul 21 14:56:31 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 21 Jul 2000 14:56:31 +0200
Subject: [R] Check errors
In-Reply-To: Christian Hennig's message of "Mon, 17 Jul 2000 20:08:30 +0200 (CEST)"
References: <Pine.LNX.3.96.1000717200426.27471I-100000@TILL.math.uni-hamburg.de>
Message-ID: <x2snt3vdz4.fsf@blueberry.kubism.ku.dk>

Christian Hennig <fm3a004 at math.uni-hamburg.de> writes:

> running code in base-Ex.R ...
> ./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
> make[4]: *** [base-Ex.Rout] Error 1

> What happened?

Something went wrong... 

The end of base-Ex.Rout may contain a clue as to *what* went wrong.

If it was a crash of R, then the last few lines of output may be
missing due to buffering and then it is more useful to run

../../bin/R --vanilla < base-Ex.R

(you'll probably need to press Space several times to get past the
paged output).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 21 15:21:34 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 21 Jul 2000 14:21:34 +0100 (BST)
Subject: [R] confint() error
In-Reply-To: <3.0.6.32.20000721143051.009fbc30@mail.anst.uu.se>
Message-ID: <Pine.GSO.4.05.10007211412410.22581-100000@auk.stats>

On Fri, 21 Jul 2000, Tord Snall wrote:

> Dear all,
> I have run the confint() function according to below and I get the
> following error message:
> 
> > confint(stepAIC.glm.spe.var.konn2.abund, level=0.95)
> Waiting for profiling to be done...
> Error: missing value where logical needed
> In addition: Warning message: 
> NaNs produced in: sqrt((fm$deviance - OriginalDeviance)/DispersionParameter)
> 
> or
> 
> > confint(stepAIC.glm.spe.var.konn2.abund, parm="DIA", level=0.95)
> Waiting for profiling to be done...
> Error in object[[pm]] : subscript out of bounds
> 
> if only one covariate is analysed.
> 
> Profiling seem to be the problem. I would too very much like to have know
> what the warning and error messages mean. 

(Try reading the code which contains the messages.)

> All clues are welcome.

First clue: confint is in package MASS (not MASS) in the VR bundle, and you
will get better service if you give some credit.  If you do not have the
latest version, you will need to upgrade.  This was fixed some while ago,
then broken again, and AFAIK the second point at least is fixed in version
6.1-9.  The first point may well be a profiling failure due to an
inadequately fitting model.  You can u	se traceback() and debugger() to
find out what is wrong.

In any case, I can't check as you have not provided a reproducible example
so please read the section on bug reporting in the FAQ.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From joehl at web.de  Mon Jul 24 11:48:25 2000
From: joehl at web.de (=?iso-8859-1?Q? Jens=20Oehlschl=E4gel ?=)
Date: Mon, 24 Jul 2000 11:48:25 +0200
Subject: [R] software patents in European Community
Message-ID: <200007240948.LAA17953@mailgate3.cinetic.de>


I thought the following may be interesting for R people.

It looks like the EC is considering to allow software patenting,
and some people have organized a petition against that. 
More Information under:

  http://petition.eurolinux.org/

Best Regards


Jens Oehlschlaegel

_______________________________________________________________________
1.000.000 DM gewinnen - kostenlos tippen - http://millionenklick.web.de
IhrName at web.de, 8MB Speicher, Verschluesselung - http://freemail.web.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fm3a004 at math.uni-hamburg.de  Mon Jul 24 14:00:52 2000
From: fm3a004 at math.uni-hamburg.de (Christian Hennig)
Date: Mon, 24 Jul 2000 14:00:52 +0200 (CEST)
Subject: [R] Check errors
In-Reply-To: <x2snt3vdz4.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.3.96.1000724134330.19378D-100000@TILL.math.uni-hamburg.de>

Dear group,

On 21 Jul 2000, Peter Dalgaard BSA wrote:

> Christian Hennig <fm3a004 at math.uni-hamburg.de> writes:
> 

(I ran "make check" to get:)

> > running code in base-Ex.R ...
> > ./../bin/R --vanilla < base-Ex.R > base-Ex.Rout
> > make[4]: *** [base-Ex.Rout] Error 1
> 
> > What happened?
> 
> Something went wrong... 
> 
> The end of base-Ex.Rout may contain a clue as to *what* went wrong.
> 
> If it was a crash of R, then the last few lines of output may be
> missing due to buffering and then it is more useful to run
> 
> ../../bin/R --vanilla < base-Ex.R

There were several warnings in base-Ex.Rout, which I will add at the end
of the mail, but they do not seem to be too serios to me.

/usr/applic/packages/bin/R --vanilla < base-Ex.Rout

ended after a while in

> ## Keywords: 'regression'.
> 
> 
> rm(list = ls(all = TRUE)); .Random.seed <- c(0,rep(7654,3))
> ###--- >>> `load' <<<----- Reload Saved Datasets
> 
>       ## alias         help(load)
> 
> ##___ Examples ___:
> 
> # save all data
> save(list = ls(), file= "all.Rdata")
> 
> # restore the saved values to the current environment
> load("all.Rdata")
Error in load("all.Rdata") : restore file corrupted -- no data loaded
Execution halted

Can anybody help me further?
Comments on the "library(mclust)-error" reported below are appreciated as well.
Perhaps this is independent of the "check"-problem?

Christian

PS: Additional information:

> version
         _                     
platform i586-pc-linux-gnulibc1
arch     i586                  
os       linux-gnulibc1        
system   i586, linux-gnulibc1  
status                         
major    1                     
minor    1.0                   
year     2000                  
month    June                  
day      15                    
language R                     

(SuSe Linux 5.2)

* In my work with this R-1.1.0 up to now everything worked fine except

> library(mclust)
/usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__moddi3'
/usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__divdi3'
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library "/usr/applic/packages/R/lib/R/library/mclust/libs/mclust.so":
  Unable to resolve symbol
Error in library(mclust) : .First.lib failed

(This happened with R-0.64.0 on the same system as well, and also under 
Solaris. I assume that f2c has to be installed to prevent this, because
mclust works on the only machine in our institute where f2c is installed.)

* Warning messages in base-Ex-Rout:

>  summary(bY <- besselY(2,nu = nu <- seq(3,300,len=51)))
       Min.     1st Qu.      Median        Mean     3rd Qu.        Max. 
       -Inf        -Inf -2.248e+263        -Inf -3.777e+116  -1.128e+00 
There were 22 warnings (use warnings() to see them)

> dpois(c(0, 1, 0.17, 0.77), 1)
[1] 0.3678794 0.3678794 0.0000000 0.0000000
Warning messages: 
1: non-integer x = 0.170000 
2: non-integer x = 0.770000 

> curve(gamma(x),-3,4, n=1001, ylim=c(-10,100),
+       col="red", lwd=2, main="gamma(x)")
Warning message: 
NaNs produced in: gamma(x) 

> persp(tt,ncp,ptn, zlim=0:1, r=2, phi=20, theta=200, main=t.tit,
+       xlab = "t", ylab = "noncentrality parameter", zlab = "Pr(T <= t)")
Warning message: 
parameter "main" couldn't be set in high-level plot() function 

> hist(U <- rwilcox(N, m=4,n=6), breaks=0:25 - 1/2, border="red", col="pink",
+      sub = paste("N =",N))
Warning messages: 
1: parameter "sub" couldn't be set in high-level plot() function 
2: parameter "sub" couldn't be set in high-level plot() function 

> drop1(glm.D93, test="F")
Single term deletions

Model:
counts ~ outcome + treatment
          Df Deviance    AIC F value  Pr(F)
<none>          5.129 56.761               
outcome    2   10.581 58.214   2.126 0.2350
treatment  2    5.129 52.761   0.000 1.0000
Warning message: 
F test assumes quasipoisson family in: drop1.glm(glm.D93, test = "F") 

> has.VR <- require(MASS, quietly = TRUE)
Warning message: 
There is no package called `MASS' in: library(package, char = TRUE, logical = TRUE, warn.conflicts = warn.conflicts,  
(Comment: MASS has been installed in the meantime)

***

Christian Hennig
Fachbereich Mathematik - SPST
 (Schwerpunkt Mathematische Statistik und Stochastische Prozesse,
 Zentrum fuer Modellierung und Simulation)
Bundesstrasse 55
D-20146 Hamburg
Tel: x40/42838 4907, privat x40/631 62 79
hennig at math.uni-hamburg.de
http://www.math.uni-hamburg.de/home/hennig/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Mon Jul 24 14:36:44 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Jul 2000 14:36:44 +0200
Subject: [R] Check errors
In-Reply-To: Christian Hennig's message of "Mon, 24 Jul 2000 14:00:52 +0200 (CEST)"
References: <Pine.LNX.3.96.1000724134330.19378D-100000@TILL.math.uni-hamburg.de>
Message-ID: <x266pvemcj.fsf@blueberry.kubism.ku.dk>

Christian Hennig <fm3a004 at math.uni-hamburg.de> writes:

> There were several warnings in base-Ex.Rout, which I will add at the end
> of the mail, but they do not seem to be too serios to me.

They aren't.
> > # save all data
> > save(list = ls(), file= "all.Rdata")
> > 
> > # restore the saved values to the current environment
> > load("all.Rdata")
> Error in load("all.Rdata") : restore file corrupted -- no data loaded
> Execution halted

This would be the culprit. Does this also happen if you repeat those
lines inside R?

> Can anybody help me further?
> Comments on the "library(mclust)-error" reported below are appreciated as well.
> Perhaps this is independent of the "check"-problem?

Most likely.

> platform i586-pc-linux-gnulibc1
                         ^^^^^^^^

This could be a source of problems, SuSE 5.2 is getting pretty old (6.4
is current AFAIR).  Upgrading might be the fastest way out.

> * In my work with this R-1.1.0 up to now everything worked fine except
> 
> > library(mclust)
> /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__moddi3'
> /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__divdi3'
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library "/usr/applic/packages/R/lib/R/library/mclust/libs/mclust.so":
>   Unable to resolve symbol
> Error in library(mclust) : .First.lib failed
> 
> (This happened with R-0.64.0 on the same system as well, and also under 
> Solaris. I assume that f2c has to be installed to prevent this, because
> mclust works on the only machine in our institute where f2c is installed.)

Hmm. What about the built-in packages (e.g. ctest)? Did you use R
INSTALL correctly to install mclust (or install.packages('mclust'))?

In general, you need to link the shared library with the fortran libs,
either  -lg2c or -lf2c. Older compilers may not be getting this right.
  
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jul 24 15:00:21 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 24 Jul 2000 14:00:21 +0100 (BST)
Subject: [R] Check errors
In-Reply-To: <x266pvemcj.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.05.10007241357010.25410-100000@auk.stats>

On 24 Jul 2000, Peter Dalgaard BSA wrote:

> Christian Hennig <fm3a004 at math.uni-hamburg.de> writes:
> 
> > There were several warnings in base-Ex.Rout, which I will add at the end
> > of the mail, but they do not seem to be too serios to me.
> 
> They aren't.
> > > # save all data
> > > save(list = ls(), file= "all.Rdata")
> > > 
> > > # restore the saved values to the current environment
> > > load("all.Rdata")
> > Error in load("all.Rdata") : restore file corrupted -- no data loaded
> > Execution halted
> 
> This would be the culprit. Does this also happen if you repeat those
> lines inside R?
> 
> > Can anybody help me further?
> > Comments on the "library(mclust)-error" reported below are appreciated as well.
> > Perhaps this is independent of the "check"-problem?
> 
> Most likely.
> 
> > platform i586-pc-linux-gnulibc1
>                          ^^^^^^^^
> 
> This could be a source of problems, SuSE 5.2 is getting pretty old (6.4
> is current AFAIR).  Upgrading might be the fastest way out.
> 
> > * In my work with this R-1.1.0 up to now everything worked fine except
> > 
> > > library(mclust)
> > /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__moddi3'
> > /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__divdi3'
> > Error in dyn.load(x, as.logical(local), as.logical(now)) : 
> >         unable to load shared library "/usr/applic/packages/R/lib/R/library/mclust/libs/mclust.so":
> >   Unable to resolve symbol
> > Error in library(mclust) : .First.lib failed
> > 
> > (This happened with R-0.64.0 on the same system as well, and also under 
> > Solaris. I assume that f2c has to be installed to prevent this, because
> > mclust works on the only machine in our institute where f2c is installed.)
> 
> Hmm. What about the built-in packages (e.g. ctest)? Did you use R
> INSTALL correctly to install mclust (or install.packages('mclust'))?

I suspect this just means that you do not have the current mclust.
It happened often prior to mclust_1.1-1.tar.gz (around 0.64 time).

> In general, you need to link the shared library with the fortran libs,
> either  -lg2c or -lf2c. Older compilers may not be getting this right.

If that is the problem then make check on modreg should not work.
What is FLIBS in .../etc/Makeconf? Does it contain -lg2c?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fm3a004 at math.uni-hamburg.de  Mon Jul 24 16:06:41 2000
From: fm3a004 at math.uni-hamburg.de (Christian Hennig)
Date: Mon, 24 Jul 2000 16:06:41 +0200 (CEST)
Subject: [R] mclust, f2c, vanilla. Was: Check error
In-Reply-To: <Pine.GSO.4.05.10007241357010.25410-100000@auk.stats>
Message-ID: <Pine.LNX.3.96.1000724155243.19378F-100000@TILL.math.uni-hamburg.de>

Dear list,

On Mon, 24 Jul 2000, Prof Brian D Ripley wrote:

> On 24 Jul 2000, Peter Dalgaard BSA wrote:
> 
> > Christian Hennig <fm3a004 at math.uni-hamburg.de> writes:
> > 
> > > > # save all data
> > > > save(list = ls(), file= "all.Rdata")
> > > > 
> > > > # restore the saved values to the current environment
> > > > load("all.Rdata")
> > > Error in load("all.Rdata") : restore file corrupted -- no data loaded
> > > Execution halted
> > 
> > This would be the culprit. Does this also happen if you repeat those
> > lines inside R?

Yes, but it does not happen if I run 
.../bin/R --vanilla < .../R-1.1.0/tests/Examples/base-Ex.R
from a directory of my home area in the network.
Now it seems to me that I did not get all rights properly from our system 
administrator to perform "save" and "load". So it seems to be a problem of
our network, and not of R. 

Is there a way to perform the whole check from another directory?

make /usr/applic/packages/R/R-1.1.0/bin/check
yields
make: Nothing to be done for `/usr/applic/packages/R/R-1.1.0/bin/check'.

Or have I already performed everything by .../bin/R --vanilla on base-Ex.R?

> > > * In my work with this R-1.1.0 up to now everything worked fine except
> > > 
> > > > library(mclust)
> > > /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__moddi3'
> > > /usr/applic/packages/R/lib/R/bin/R.bin: can't resolve symbol '__divdi3'
> > > Error in dyn.load(x, as.logical(local), as.logical(now)) : 
> > >         unable to load shared library "/usr/applic/packages/R/lib/R/library/mclust/libs/mclust.so":
> > >   Unable to resolve symbol
> > > Error in library(mclust) : .First.lib failed
> > > 
> > > (This happened with R-0.64.0 on the same system as well, and also under 
> > > Solaris. I assume that f2c has to be installed to prevent this, because
> > > mclust works on the only machine in our institute where f2c is installed.)
> > 
> > Hmm. What about the built-in packages (e.g. ctest)? Did you use R
> > INSTALL correctly to install mclust (or install.packages('mclust'))?
> 
> I suspect this just means that you do not have the current mclust.
> It happened often prior to mclust_1.1-1.tar.gz (around 0.64 time).

install.packages("mclust") on July 15th. I should have the current mclust,
shouldn`t I?
Perhaps it is because SuSe 5.2 is too old for that?

> 
> > In general, you need to link the shared library with the fortran libs,
> > either  -lg2c or -lf2c. Older compilers may not be getting this right.
> 
> If that is the problem then make check on modreg should not work.
> What is FLIBS in .../etc/Makeconf? Does it contain -lg2c?

FLIBS =  -lf2c -lm -L /usr/X11R6/lib -L/usr/lib/gcc-lib/i486-linux/2.7.2.1 -L/usr/i486-linux/lib -lm

Thank you for help,
Christian

***

Christian Hennig
Fachbereich Mathematik - SPST
 (Schwerpunkt Mathematische Statistik und Stochastische Prozesse,
 Zentrum fuer Modellierung und Simulation)
Bundesstrasse 55
D-20146 Hamburg
Tel: x40/42838 4907, privat x40/631 62 79
hennig at math.uni-hamburg.de
http://www.math.uni-hamburg.de/home/hennig/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From fm3a004 at math.uni-hamburg.de  Mon Jul 24 16:09:14 2000
From: fm3a004 at math.uni-hamburg.de (Christian Hennig)
Date: Mon, 24 Jul 2000 16:09:14 +0200 (CEST)
Subject: [R] Additional information to mclust, f2c
Message-ID: <Pine.LNX.3.96.1000724160743.19378G-100000@TILL.math.uni-hamburg.de>

Addendum to:
Error with library(mclust):

library(ctest) works fine as well as library(MASS) and library(KernSmooth).

CH

***

Christian Hennig
Fachbereich Mathematik - SPST
 (Schwerpunkt Mathematische Statistik und Stochastische Prozesse,
 Zentrum fuer Modellierung und Simulation)
Bundesstrasse 55
D-20146 Hamburg
Tel: x40/42838 4907, privat x40/631 62 79
hennig at math.uni-hamburg.de
http://www.math.uni-hamburg.de/home/hennig/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John_Zhong at hgsi.com  Mon Jul 24 17:21:11 2000
From: John_Zhong at hgsi.com (John_Zhong@hgsi.com)
Date: Mon, 24 Jul 2000 11:21:11 -0400
Subject: [R] How to use groupedData() within a function?
Message-ID: <OFCCC43B54.F3413A7D-ON85256926.005369AD@hgsi.com>

Dear Group:

I have been trying to write an R function within which the function
groupedData() would be used.
The following is a sample program:

#######################

sid<-rep(1:6,times=2)
time<-c(1:12)
trt<-rep(letters[1:3],times=4)
tem<-data.frame(sid,time,trt)

test1.fun<- function(dat=dat)
{
  groupedData(time ~ trt|sid, data=dat)
}

test1.fun(dat=tem)
########################

However, when I ran this kind of program in R, I got the following error
message:

Error in as.character(table) : Object "dat" not found.

Could anyone please help me specify the parameters in the function
groupedData() so that it would
work within my self-created local function?

Thanks.

John

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From saikat at stat.wisc.edu  Mon Jul 24 18:04:56 2000
From: saikat at stat.wisc.edu (Saikat)
Date: 24 Jul 2000 11:04:56 -0500
Subject: [R] How to use groupedData() within a function?
In-Reply-To: John_Zhong@hgsi.com's message of "Mon, 24 Jul 2000 11:21:11 -0400"
Message-ID: <qxpem4jsedz.fsf@verdi.stat.wisc.edu>

>>>>> "John" == John Zhong <John_Zhong at hgsi.com> writes:

  > Dear Group:

  > I have been trying to write an R function within which the
  > function groupedData() would be used.  The following is a sample
  > program:

  >#######################

  > sid<-rep(1:6,times=2)
  > time<-c(1:12)
  > trt<-rep(letters[1:3],times=4)
  > tem<-data.frame(sid,time,trt)

  > test1.fun<- function(dat=dat)
  > {
  >   groupedData(time ~ trt|sid, data=dat)
  > }

  > test1.fun(dat=tem)
  > ########################

  > However, when I ran this kind of program in R, I got the following
  > error message:

  > Error in as.character(table) : Object "dat" not found.


  > Could anyone please help me specify the parameters in the function
  > groupedData() so that it would work within my self-created local
  > function?

This is a bug in the groupedData function - basically a leftover from
the original S version. We never caught it because we never tried to
use the groupedData function inside another function.

To Doug Bates:

It seems that we will have to upload a fix for this. The problem is in
the following lines -

  mCall <- as.list(match.call())[-1]
  if (length(grpForm) == 1) {	
    ## single grouping variable
    do.call("nfGroupedData", mCall)
  } else {				        # multiple nesting
    do.call("nmGroupedData", mCall)
  }

These should be changed to

  mCall <- match.call()
  if (length(grpForm) == 1) {
    mCall[[-1]] <- as.name("nfGroupedData")
    eval(mCall, envir = parent.frame)
  } else {
    mCall[[-1]] <- as.name("nmGroupedData")
    eval(mCall, envir = parent.frame)
  }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Jul 25 00:04:03 2000
From: kjetilh at umsanet.edu.bo (halvorsen)
Date: Mon, 24 Jul 2000 18:04:03 -0400
Subject: [R] power() function
Message-ID: <397CBD53.4F52CEA5@umsanet.edu.bo>

Hola!

To my surprise, the power() function cannot be used to make links with
nehgative
powers (it returns the log link if one tries).  I can see no good reason
for this, and have tried with simple changes to make it work usefully
for negative arguments.  Are there any good reasons I have overlooked
not to allow negative arguments?

The first part of make.link must be augmented as follows:
> make.link
function (link)
{
    if (is.character(link) && length(grep("^power", link) > 0))
        return(eval(parse(text = link)))
    else if(!is.character(link) && !is.na(lambda <- as.numeric(link))) {

        if (lambda >= 0){
          linkfun <- function(mu) mu^lambda
          linkinv <- function(eta)
            pmax(.Machine$double.eps, eta^(1/lambda))
          mu.eta <- function(eta)
            pmax(.Machine$double.eps, (1/lambda) * eta^(1/lambda - 1))
          valideta <- function(eta) all(eta>0)
         } else {
          linkfun <- function(mu) mu^lambda
          linkinv <- function(eta)
                        eta^(1/lambda)
          mu.eta <- function(eta)
                       (1/lambda) * eta^(1/lambda - 1)
          valideta <- function(eta) all(eta>0)
        }
    }
    else
        switch(link,
               "logit" = { ...


The simple change to power:
> power1
function(lambda = 1) {
    if(lambda == 0)
        make.link("log")
    else if(lambda == 1)
        make.link("identity")
    else
        make.link(lambda)
}

> testcar
function(pow){
           ob <-
eval(substitute(glm(Pound~CG+Age+Vage,data=car,weights=No,
                     subset=No>0,
                     family=quasi(link=power1(pow),
                     var=mu^2))),list(pow=pow))
           deviance(ob)
}


The history:

devs <- numeric(31)
for (i in seq(along=devs)) {devs[i] <- testcar(-2.1+i/10)}
plot(x=-2.1+(1:31)/10, y=devs,xlab="power",ylab="dev")


The data to remake the graphics:

car <- cbind(expand.grid(CG=c("A", "B","C","D"),
                         Age=c("17-20","21-24","25-29","30-34",
                               "35-39","40-49","50-59","60+"),
                         Vage=c("0-3","4-7","8-9","10+")),
            Pound=c(289,372,189,763,302,420,268,407,268,275,334,
                    383,236,259,340,400,207,208,251,233,254,218,
                    239,387,251,196,268,391,264,224,269,385,282,
                    249,288,850,194,243,343,320,285,243,274,305,
                    270,226,260,349,129,214,232,325,213,209,250,
                    299,227,229,250,228,198,193,258,324,133,288,179,
                     0, 135,196,293,205,181,179,208,116,160,161,
                    189,147,157,149,204,207,149,172,174,325,172,
                    164,175,346,167,178,227,192,160,11, 0  ,0  ,
                    166,135,104,0  ,110,264,150,636,110,107,104,65,
                    113,137,141,0  ,98 ,110,129,137,98 ,132,152,
                    167,114,101,119,123),
           No=c(8,10,9,3,18,59,44,24,56,125,163,72,43,179,197,
                104,43,191,210,119,90,380,401,199,69,366,310,
                105,64,228,183,62,8,28,13,2,31,96,39,18,55,172,
                129,50,53,211,125,55,73,219,131,43,98,434,253,

88,120,353,148,46,100,233,103,22,4,1,1,0,10,13,7,2,17,36,18,
                6,15,39,30,8,21,46,32,4,35,97,50,8,42,95,33,10,43,

73,20,6,1,1,0,0,4,3,2,0,12,10,8,1,12,19,9,2,14,23,8,0,22,59,15,9,35,45,
                13,1,53,44,6,6))

(This is the car insurance data from page 298 of McCullagh&Nelder).  I
have tried other examples also, and
it seems to work well.)



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Jul 25 00:29:42 2000
From: kjetilh at umsanet.edu.bo (halvorsen)
Date: Mon, 24 Jul 2000 18:29:42 -0400
Subject: [R] Questions about deviance
Message-ID: <397CC356.81C41C96@umsanet.edu.bo>

I have experimented with the cheese data example from McCullagh&Nelder,
page 175. With a proportional odds model they obtain a residual deviance
of
20.31.

Estimating the same model with polr(MASS) gives a residual deviance of
762.11 !,  while using ordglm(gnlm) gives a deviance of 523.94.  Can
anybody explain these differences?

The data frame with the data are:

> cheese
   Cheese  N Response nResponse
1       A  1      III         2
2       A  7       IV         3
3       A  8        V         4
4       A  8       VI         5
5       A 19      VII         6
6       A  8     VIII         7
7       A  1       IX         8
8       B  6        I         0
9       B  9       II         1
10      B 12      III         2
11      B 11       IV         3
12      B  7        V         4
13      B  6       VI         5
14      B  1      VII         6
15      B  0     VIII         7
16      B  0       IX         8
17      C  1        I         0
18      C  1       II         1
19      C  6      III         2
20      C  8       IV         3
21      C 23        V         4
22      C  7       VI         5
23      C  5      VII         6
24      C  1     VIII         7
25      C  0       IX         8
26      D  1       IV         3
27      D  3        V         4
28      D  7       VI         5
29      D 14      VII         6
30      D 16     VIII         7
31      D 11       IX         8
>

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Tue Jul 25 09:46:47 2000
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Tue, 25 Jul 2000 19:46:47 +1200
Subject: [R] Reading files form a server in windows
Message-ID: <200007250745.TAA04356@gosset.stats.waikato.ac.nz>

Hi,

I'm just wondering about file name syntax.

Instead of 

stuff <- read.table("e:/statcourses/stuff.dat")

I'd like to be able to do

stuff <- read.table("ptolemy/statcourses/stuff.dat")

or

stuff <- read.table("ptolemy.math.waikato.ac.nz/statcourses/stuff.dat")

that is, I'd like to be able to read a file from a server without
necessarily mounting the server as a drive letter on the PC.

Is that do-able?


Murray Jorgensen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ligges at statistik.uni-dortmund.de  Tue Jul 25 10:39:16 2000
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 25 Jul 2000 10:39:16 +0200
Subject: [R] Reading files form a server in windows
Message-ID: <397D5234.1584F77E@statistik.uni-dortmund.de>

Sorry, didn't CC it to R-help...


Murray Jorgensen wrote:
> 
> Hi,
> 
> I'm just wondering about file name syntax.
> 
> Instead of
> 
> stuff <- read.table("e:/statcourses/stuff.dat")
> 
> I'd like to be able to do
> 
> stuff <- read.table("ptolemy/statcourses/stuff.dat")

Try:
stuff <- read.table("//ptolemy/statcourses/stuff.dat")


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel at bbdo-interone.de  Tue Jul 25 11:20:15 2000
From: jens.oehlschlaegel at bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Tue, 25 Jul 2000 11:20:15 +0200
Subject: [R] compression
Message-ID: <000701bff619$8bd1c8e0$c10616ac@oehl.bbdo.de>



Dear all,
to avoid reinventing the wheel: has anyone included compression algorithms
into his library?

Best


NEW EMAIL
jens.oehlschlaegel at bbdo-interone.de

--
Dr. Jens Oehlschl?gel
Analyse
BBDO InterOne
Gr?nstr. 15
40212 D?sseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 25 11:37:15 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 10:37:15 +0100 (BST)
Subject: [R] compression
In-Reply-To: <000701bff619$8bd1c8e0$c10616ac@oehl.bbdo.de>
Message-ID: <Pine.GSO.4.05.10007251036370.1462-100000@auk.stats>

On Tue, 25 Jul 2000, [iso-8859-1] Jens Oehlschlgel wrote:

> to avoid reinventing the wheel: has anyone included compression algorithms
> into his library?

The zlib ones are in base R for use with the png() device.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jshwang at stat.inha.ac.kr  Tue Jul 25 13:46:45 2000
From: jshwang at stat.inha.ac.kr (Jinsoo Hwang)
Date: Tue, 25 Jul 2000 20:46:45 +0900
Subject: [R] Use of libmath.a
Message-ID: <397D7E24.723B14E2@stat.inha.ac.kr>

This is not directly related R related questions, but ... :-)

I compiled R-devel(1.20?) on solaris2.6 system.
Can I put the libmath.a library into my system library directory(say,
/usr/local/lib) like other C libraries and use the functions defined
there(libmath.a) from other programs by linking it?

For example,

> cc  -I/usr/local/lib/R/include -lmath test.c    ???

But I got undefined symbol error.
I did check libmath.a by
> nm -o libmath.a | more
and the functions exist.

Any help on this matter ?
Thanks in advance.

Jinsoo(jshwang at stat.inha.ac.kr)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From salwin at mitretek.org  Tue Jul 25 14:37:58 2000
From: salwin at mitretek.org (Art Salwin)
Date: Tue, 25 Jul 2000 08:37:58 -0400
Subject: [R] Is there a bug in kmeans in package mva?
References: <Pine.LNX.4.10.10004022249310.5261-100000@localhost.localdomain> <003f01bf9d48$50e84a30$2795eb82@patrikwpc> <38EBA4D7.C412A1EA@mitretek.org> <3921A4D2.200CA45A@mitretek.org>
Message-ID: <397D8A25.90D0C253@mitretek.org>

I created a numeric vector of 49 elements and call kmeans as
follows:
kmeans(x,3)
The second argument, number of centers, is allowed to be a
constant per
the documentation.  However, the call doesn't work and
generates the
following error message:
Error in ncol(x) != ncol(centers) : comparison (2) is
possible only for vector types

Is this a bug or am I doing something wrong?

Looking at the code within kmeans, it appears the statement 
if(ncol(x)!=ncol(centers))
is where it fails, since centers does not get coerced to be
a matrix
and ncol(centers) is NULL.
-- 
Art Salwin
salwin at mitretek.org
(202) 863-2985
(202) 863-2988 (fax)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 25 14:38:50 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 13:38:50 +0100 (BST)
Subject: [R] Use of libmath.a
In-Reply-To: <397D7E24.723B14E2@stat.inha.ac.kr>
Message-ID: <Pine.GSO.4.05.10007251337110.7201-100000@auk.stats>

On Tue, 25 Jul 2000, Jinsoo Hwang wrote:

> This is not directly related R related questions, but ... :-)
> 
> I compiled R-devel(1.20?) on solaris2.6 system.
> Can I put the libmath.a library into my system library directory(say,
> /usr/local/lib) like other C libraries and use the functions defined
> there(libmath.a) from other programs by linking it?

No, but you can cd .../src/nmath/standalone, read the README, build
libRmath.a/.so and use that.  There are examples in that directory.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dim.brumath at wanadoo.fr  Tue Jul 25 10:26:58 2000
From: dim.brumath at wanadoo.fr (dim.brumath)
Date: Tue, 25 Jul 2000 10:26:58 +0200
Subject: [R] glm and capture-recapture
Message-ID: <008301bff635$d2bd8ac0$8d281eac@b25b114saulerik>

Hello,

I am almost new in R, so perhaps my question will be silly.

I try to use R for analyzing capture-recapture data in epidemiology. A cancer registry has different sources of patients. We know in each list, patients already known in all other list. The aim is to use capture-recapture models for estimating the number of patients unknow of all the sources.

Because no order in sources, one cannot use classical models for closed animal populations (models M(bht) of Otis ) so I use hierarchical loglinear model, moreover for controlling interactions (dependence) between sources. For me it sound a little strange when I read in papers that authors use 'glm' and 'predict' for this problem even if I know that loglinear are in generalized linear model.

Why don't use 'loglin'? What is the code for this problem using 'glm' + 'predict'.

I thank you in advance for your help,

===================================
Dr SAULEAU Erik-A.
DIM
----------------------------------------------------------
Etablissement Public de Sant? Alsace Nord
141, Ave de Strasbourg
67170 Brumath
Tel : 03-88-64-61-81
E-Mail: dim.brumath at wanadoo.fr
----------------------------------------------------------
Centre Hospitalier d'Erstein
13, Route de Krafft
BP F
67151 Erstein Cedex
E-Mail: dim at ch-erstein.fr
===================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000725/1e89a309/attachment.html

From ripley at stats.ox.ac.uk  Tue Jul 25 14:55:10 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 13:55:10 +0100 (BST)
Subject: [R] Is there a bug in kmeans in package mva?
In-Reply-To: <397D8A25.90D0C253@mitretek.org>
Message-ID: <Pine.GSO.4.05.10007251353270.7201-100000@auk.stats>

On Tue, 25 Jul 2000, Art Salwin wrote:

> I created a numeric vector of 49 elements and call kmeans as
> follows:

The help page says

       x: A data frame or matrix of data. 

so that is your error.

> kmeans(x,3)
> The second argument, number of centers, is allowed to be a
> constant per
> the documentation.  However, the call doesn't work and
> generates the
> following error message:
> Error in ncol(x) != ncol(centers) : comparison (2) is
> possible only for vector types

right, ncol(x) is NULL.

> Is this a bug or am I doing something wrong?
> 
> Looking at the code within kmeans, it appears the statement 
> if(ncol(x)!=ncol(centers))
> is where it fails, since centers does not get coerced to be
> a matrix
> and ncol(centers) is NULL.
> -- 
> Art Salwin
> salwin at mitretek.org
> (202) 863-2985
> (202) 863-2988 (fax)
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 25 14:58:43 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 13:58:43 +0100 (BST)
Subject: [R] glm and capture-recapture
In-Reply-To: <008301bff635$d2bd8ac0$8d281eac@b25b114saulerik>
Message-ID: <Pine.GSO.4.05.10007251355550.7201-100000@auk.stats>

On Tue, 25 Jul 2000, dim.brumath wrote:

> Hello,
> 
> I am almost new in R, so perhaps my question will be silly.
> 
> I try to use R for analyzing capture-recapture data in epidemiology. A cancer registry has different sources of patients. We know in each list, patients already known in all other list. The aim is to use capture-recapture models for estimating the number of patients unknow of all the sources.
> 
> Because no order in sources, one cannot use classical models for closed animal populations (models M(bht) of Otis ) so I use hierarchical loglinear model, moreover for controlling interactions (dependence) between sources. For me it sound a little strange when I read in papers that authors use 'glm' and 'predict' for this problem even if I know that loglinear are in generalized linear model.
> 
> Why don't use 'loglin'? 

The user interface to loglin is nigh-impenetrable. `loglm' in package MASS
is a friendlier interface.  But glm is better known and usually
efficient enough.

> What is the code for this problem using 'glm' + 'predict'.

As far as I recall there are several variations on this problem, so 
cannot give you a single answer.

> 
> I thank you in advance for your help,
> 
> ===================================
> Dr SAULEAU Erik-A.
> DIM
> ----------------------------------------------------------
> Etablissement Public de Sant Alsace Nord
> 141, Ave de Strasbourg
> 67170 Brumath
> Tel : 03-88-64-61-81
> E-Mail: dim.brumath at wanadoo.fr
> ----------------------------------------------------------
> Centre Hospitalier d'Erstein
> 13, Route de Krafft
> BP F
> 67151 Erstein Cedex
> E-Mail: dim at ch-erstein.fr
> ===================================
> 

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Tue Jul 25 18:39:25 2000
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Tue, 25 Jul 2000 09:39:25 -0700
Subject: [R] Help with data.frames
In-Reply-To: <Pine.LNX.4.21.0005242012330.27454-100000@pc16.stat.umu.se>
References: <Pine.LNX.4.21.0005211207440.18010-100000@pc16.stat.umu.se>
Message-ID: <200007251339.JAA12345@sirocco.cc.mcgill.ca>

Hi  R experts, I have a problem. . .
I am using R 1.1 in Win98
if I do:

age <- c( 20,25,30,50,20,30)
sex <- c("M","F","F","M","M","F")
hgt <- c(1.80,1.65,1.70,1.75,1.85,1.68)
obs <-c("first","second","third","fourth","fifth","sixth")
base<-data.frame(rbind(age=age,sex=sex,hgt=hgt,obs=obs))
 base
  age sex  hgt    obs
1  20   M  1.8  first
2  25   F 1.65 second
3  30   F  1.7  third
4  50   M 1.75 fourth
5  20   M 1.85  fifth
6  30   F 1.68  sixth

i.e. I created a data.frame with I think, 2 real columns, 1 factor and 
1 character. . . I thought

lage<-log(age)
base2<-cbind(base,lage)
base2
  age sex  hgt    obs     lage
1  20   M  1.8  first 2.995732
2  25   F 1.65 second 3.218876
3  30   F  1.7  third 3.401197
4  50   M 1.75 fourth 3.912023
5  20   M 1.85  fifth 2.995732
6  30   F 1.68  sixth 3.401197

I can add a numeric column with no problems. . .I thought

Now I want to add a new observation. .

 log(40)
[1] 3.688879
 new.guy <- c(40,"M",1.82,"seventh",3.688879)
 base<-rbind(base,new.guy)
Warning messages: 
1: invalid factor level, NAs generated in: [<-.factor(*tmp*, ri, value = 
"40") 
2: invalid factor level, NAs generated in: [<-.factor(*tmp*, ri, value = 
"1.82") 
 
 base$age
[1] 20 25 30 50 20 30 NA
Levels:  20 25 30 50 
 base$sex
[1] M F F M M F M
Levels:  F M 
 base$age
[1] 20 25 30 50 20 30 NA
Levels:  20 25 30 50 
 base$lage
[1] 2.99573227355399 3.2188758248682  3.40119738166216 
3.91202300542815
[5] 2.99573227355399 3.40119738166216 3.688879 
Levels:  2.99573227355399 3.2188758248682 3.40119738166216 
3.688879 3.91202300542815 
>
i.e. I can not add a new value of age, All are factors!!! including 
log(age)! why?
	
so now I use the I construct as in the help

 base<-data.frame(cbind(age=I(age),sex=I(sex),hgt=I(hgt)))
> base
  age sex  hgt
1  20   M  1.8
2  25   F 1.65
3  30   F  1.7
4  50   M 1.75
5  20   M 1.85
6  30   F 1.68

> new.guy<-c(40,"B",1.82)
> base2<-rbind(base,new.guy)
Warning messages: 
1: invalid factor level, NAs generated in: [<-.factor(*tmp*, ri, value = 
"40") 
2: invalid factor level, NAs generated in: [<-.factor(*tmp*, ri, value = 
"B") 
3: invalid factor level, NAs generated in: [<-.factor(*tmp*, ri, value = 
"1.82") 
> is.factor(base$age)
[1] TRUE
>
Any help in how to turn all numeric factors into numeric, character 
vectors into character and
how to add new observations to a data.frame .
As always, many thanks to the members of the list.
.

R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Tue Jul 25 16:23:15 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Jul 2000 16:23:15 +0200
Subject: [R] Help with data.frames
In-Reply-To: "Heberto Ghezzo"'s message of "Tue, 25 Jul 2000 09:39:25 -0700"
References: <Pine.LNX.4.21.0005211207440.18010-100000@pc16.stat.umu.se> <200007251339.JAA12345@sirocco.cc.mcgill.ca>
Message-ID: <x2snsyl25o.fsf@blueberry.kubism.ku.dk>

"Heberto Ghezzo" <Heberto at meakins.lan.mcgill.ca> writes:

> Hi  R experts, I have a problem. . .
> I am using R 1.1 in Win98
> if I do:
> 
> age <- c( 20,25,30,50,20,30)
> sex <- c("M","F","F","M","M","F")
> hgt <- c(1.80,1.65,1.70,1.75,1.85,1.68)
> obs <-c("first","second","third","fourth","fifth","sixth")
> base<-data.frame(rbind(age=age,sex=sex,hgt=hgt,obs=obs))
                   ^^^^^
cbind, right?

>  base
>   age sex  hgt    obs
> 1  20   M  1.8  first
> 2  25   F 1.65 second
> 3  30   F  1.7  third
> 4  50   M 1.75 fourth
> 5  20   M 1.85  fifth
> 6  30   F 1.68  sixth
> 
> i.e. I created a data.frame with I think, 2 real columns, 1 factor and 
> 1 character. . . I thought

Nope. In binding variables together, they form a matrix and all
elements of a matrix must have the same type. So all columns become
character variables.

A better guess would have been

 base<-data.frame(age, sex, hgt, obs)

except that that turns "obs" into a factor, which you don't seem to
want. This works:

> base<-data.frame(age, sex, hgt, obs=I(obs))
> summary(base)
      age        sex        hgt            obs           
 Min.   :20.00   F:3   Min.   :1.650   Length:6          
 1st Qu.:21.25   M:3   1st Qu.:1.685   Class :AsIs       
 Median :27.50         Median :1.725   Mode  :character  
 Mean   :29.17         Mean   :1.738                     
 3rd Qu.:30.00         3rd Qu.:1.788                     
 Max.   :50.00         Max.   :1.850                     


> lage<-log(age)
> base2<-cbind(base,lage)
> base2
>   age sex  hgt    obs     lage
> 1  20   M  1.8  first 2.995732
> 2  25   F 1.65 second 3.218876
> 3  30   F  1.7  third 3.401197
> 4  50   M 1.75 fourth 3.912023
> 5  20   M 1.85  fifth 2.995732
> 6  30   F 1.68  sixth 3.401197
> 
> I can add a numeric column with no problems. . .I thought
> 
> Now I want to add a new observation. .
> 
>  log(40)
> [1] 3.688879
>  new.guy <- c(40,"M",1.82,"seventh",3.688879)
>  base<-rbind(base,new.guy)

again, you're c()'ing elements of different types, so they all come
out as character:

> c(40,"M",1.82,"seventh",3.688879)
[1] "40"       "M"        "1.82"     "seventh"  "3.688879"

and rbind()ing that onto base will coerce the columns of base first to
character and then to factor, even with base itself correctly defined.

You need something like

> new.guy <- list(40,"M",1.82,"seventh")
> rbind(base,new.guy)
  age sex  hgt     obs
1  20   M 1.80   first
2  25   F 1.65  second
3  30   F 1.70   third
4  50   M 1.75  fourth
5  20   M 1.85   fifth
6  30   F 1.68   sixth
7  40   M 1.82 seventh

(Notice that you don't want new.guy as a data frame because you would
have to say data.frame(age=40,sex="M",hgt=1.82,obs=I("seventh"))) in
order to (a) get the same names as in base and (b) avoid turning
"seventh" into a factor.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From spinazzi at databankgroup.it  Tue Jul 25 16:26:57 2000
From: spinazzi at databankgroup.it (Federico Spinazzi)
Date: Tue, 25 Jul 2000 15:26:57 +0100
Subject: R: [R] Use of libmath.a
Message-ID: <00ec01bff644$63aa7df0$0a00a8c0@bellview>

>For example,
>
>> cc  -I/usr/local/lib/R/include -lmath test.c    ???

I guess it should be
> cc  test.c -I/usr/local/lib/R/include -lmath

The order specified for object files (libraries are) on the compiler command
line is IMPORTANT to the linker as it searches for symbols from left to
right.
Hope that helps.

Regards,
federico



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Tue Jul 25 19:41:49 2000
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Tue, 25 Jul 2000 10:41:49 -0700
Subject: [R] library dll's dont load
Message-ID: <200007251441.KAA28330@sirocco.cc.mcgill.ca>

Hi R experts, Can somebody suggest what can be wrong?
PIII with 128 Mb RAM Using R 1.1 in Win98, the latest version 
downloaded yesterday. I run update.packages so 'survival', ' mass', 
and 'nlme' are the latest versions in CRAN

> library(survival)
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library 
"c:/Heberto/R_Cran/library/survival/libs/survival.dll":
  LoadLibrary failure:  A device attached to the system is not 
functioning.
Error in library(survival) : .First.lib failed
>
> library(mass)
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library 
"c:/Heberto/R_Cran/library/mass/libs/MASS.dll":
  LoadLibrary failure:  A device attached to the system is not 
functioning.
Error in library(mass) : .First.lib failed
> library(nlme)
Loading required package: nls 
>
R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 25 16:54:04 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 15:54:04 +0100 (BST)
Subject: R: [R] Use of libmath.a
In-Reply-To: <00ec01bff644$63aa7df0$0a00a8c0@bellview>
Message-ID: <Pine.GSO.4.05.10007251549550.7357-100000@auk.stats>

On Tue, 25 Jul 2000, Federico Spinazzi wrote:

> >For example,
> >
> >> cc  -I/usr/local/lib/R/include -lmath test.c    ???
> 
> I guess it should be
> > cc  test.c -I/usr/local/lib/R/include -lmath
> 
> The order specified for object files (libraries are) on the compiler command
> line is IMPORTANT to the linker as it searches for symbols from left to
> right.

Yes, but almost every compiler has the source files last and puts their
compiled objects first in the call to ld. As this was an enquiry about
Solaris, that is certainly what Solaris' cc does.

The problems are

(1) libmath.a is linked against routines in the R executable R.bin,
    so you do need libRmath.a
(2) You need -lm on those systems which use it (including cc on Solaris).

as in my previous answer.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From pflugshaupt at geobot.umnw.ethz.ch  Tue Jul 25 17:18:08 2000
From: pflugshaupt at geobot.umnw.ethz.ch (Kaspar Pflugshaupt)
Date: Tue, 25 Jul 2000 17:18:08 +0200
Subject: [R] library dll's dont load
In-Reply-To: <200007251441.KAA28330@sirocco.cc.mcgill.ca>
Message-ID: <B5A37C50.37C4%pflugshaupt@geobot.umnw.ethz.ch>

On 25.7.2000 19:41 Uhr, Heberto Ghezzo wrote:

> Hi R experts, Can somebody suggest what can be wrong?
> PIII with 128 Mb RAM Using R 1.1 in Win98, the latest version
> downloaded yesterday. I run update.packages so 'survival', ' mass',
> and 'nlme' are the latest versions in CRAN

Just a quick shot: Try MASS instead of mass and Survival instead of
survival. I think that may be all that's missing.

Cheers

Kaspar
-- 

Kaspar Pflugshaupt
Geobotanisches Institut
Zuerichbergstr. 38
CH-8044 Zuerich

Tel. ++41 1 632 43 19
Fax  ++41 1 632 12 15

mailto:pflugshaupt at geobot.umnw.ethz.ch
privat:pflugshaupt at mails.ch
http://www.geobot.umnw.ethz.ch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Tue Jul 25 17:21:14 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Tue, 25 Jul 2000 08:21:14 -0700 (PDT)
Subject: [R] Reading files form a server in windows
In-Reply-To: <200007250745.TAA04356@gosset.stats.waikato.ac.nz>
Message-ID: <Pine.GSO.4.21.0007250819470.5070-100000@atlas.biostat.washington.edu>

On Tue, 25 Jul 2000, Murray Jorgensen wrote:

> Hi,
> 
> I'm just wondering about file name syntax.
> 
> Instead of 
> 
> stuff <- read.table("e:/statcourses/stuff.dat")
> 
> I'd like to be able to do
> 
> stuff <- read.table("ptolemy/statcourses/stuff.dat")
> 
> or
> 
> stuff <- read.table("ptolemy.math.waikato.ac.nz/statcourses/stuff.dat")
> 
> that is, I'd like to be able to read a file from a server without
> necessarily mounting the server as a drive letter on the PC.
> 
> Is that do-able?

See help(read.table.url)

The help page should probably be linked from help(read.table)


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Tue Jul 25 18:08:01 2000
From: kjetilh at umsanet.edu.bo (halvorsen)
Date: Tue, 25 Jul 2000 12:08:01 -0400
Subject: [R] wishlist
Message-ID: <397DBB61.19B388C0@umsanet.edu.bo>

Hola!

I want to put gamma and lgamma functions for complex argument on the
wishlist.

Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Tue Jul 25 19:48:52 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 25 Jul 2000 18:48:52 +0100 (BST)
Subject: [R] Reading files form a server in windows
In-Reply-To: <Pine.GSO.4.21.0007250819470.5070-100000@atlas.biostat.washington.edu>
Message-ID: <Pine.GSO.4.05.10007251847320.7626-100000@auk.stats>

On Tue, 25 Jul 2000, Thomas Lumley wrote:

> On Tue, 25 Jul 2000, Murray Jorgensen wrote:
> 
> > Hi,
> > 
> > I'm just wondering about file name syntax.
> > 
> > Instead of 
> > 
> > stuff <- read.table("e:/statcourses/stuff.dat")
> > 
> > I'd like to be able to do
> > 
> > stuff <- read.table("ptolemy/statcourses/stuff.dat")
> > 
> > or
> > 
> > stuff <- read.table("ptolemy.math.waikato.ac.nz/statcourses/stuff.dat")
> > 
> > that is, I'd like to be able to read a file from a server without
> > necessarily mounting the server as a drive letter on the PC.
> > 
> > Is that do-able?
> 
> See help(read.table.url)
> 
> The help page should probably be linked from help(read.table)

Thomas's answer is for an http:// server.  The previous one (Uwe Ligges?)
was for a Windows neighbourhood network and seems correct: prepend //
or \\\\.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From xyzzy at speakeasy.org  Tue Jul 25 22:29:29 2000
From: xyzzy at speakeasy.org (Trent Piepho)
Date: Tue, 25 Jul 2000 13:29:29 -0700 (PDT)
Subject: [R] NetCDF data?
Message-ID: <Pine.LNX.4.04.10007251317170.3177-100000@xyzzy.dsl.speakeasy.net>

Does anyone know of a module for R to access NetCDF datasets?  I remember
reading about a module for Splus, but I can't seem to find anything on CRAN.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Tue Jul 25 22:50:27 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Tue, 25 Jul 2000 13:50:27 -0700 (PDT)
Subject: [R] NetCDF data?
In-Reply-To: <Pine.LNX.4.04.10007251317170.3177-100000@xyzzy.dsl.speakeasy.net>
Message-ID: <Pine.GSO.4.21.0007251346070.5070-100000@atlas.biostat.washington.edu>

On Tue, 25 Jul 2000, Trent Piepho wrote:

> Does anyone know of a module for R to access NetCDF datasets?  I remember
> reading about a module for Splus, but I can't seem to find anything on CRAN.

I have a module that will read netCDF datasets.  It doesn't write them
yet, and it doesn't use configure to find where libnetcdf is on your
installation, so it may need some hand-configuration.

I'll send to you and to the contrib/devel area on CRAN.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Wed Jul 26 09:35:56 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Wed, 26 Jul 2000 17:35:56 +1000
Subject: [R] merge aint merging
Message-ID: <61411576E951D211AF330008C7245DD905F68D93@ntmsg0005.corpmail.telstra.com.au>

g'day R friends,

can anyone please help me with a frustrating merge?

The number of rows of a resulting merge is the smaller of the 2 dataframes
used as input.  What am I doing wrong?  I'm using 1.1.0 on redhat 6.2

thanks,
John Strumila

> xx[1:10,]
           datetime c
948992940 948992940 0
948993000 948993000 0
948993060 948993060 0
948993120 948993120 0
948993180 948993180 0
948993240 948993240 0
948993300 948993300 0
948993360 948993360 0
948993420 948993420 0
948993480 948993480 0
> yy[1:10,]
           datetime     c
948992940 948992940 16560
949317120 949317120    84
949327800 949327800    23
949330440 949330440     0
949331580 949331580    27
949332000 949332000    22
949348800 949348800     6
949351440 949351440    81
949351500 949351500   213
949351560 949351560    52
> zz<-merge(xx,yy,by="datetime")
> zz[1:10,]
    datetime c.x   c.y
1  948992940   0 16560
2  949317120   0    84
3  949327800   0    23
4  949330440   0     0
5  949331580   0    27
6  949332000   0    22
7  949348800   0     6
8  949351440   0    81
9  949351500   0   213
10 949351560   0    52
> nrow(xx)
[1] 9683
> nrow(yy)
[1] 984
> nrow(zz)
[1] 984
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From y0004379 at tu-bs.de  Wed Jul 26 11:05:07 2000
From: y0004379 at tu-bs.de (Peter Malewski)
Date: Wed, 26 Jul 2000 11:05:07 +0200 (METDST)
Subject: [R] merge aint merging
In-Reply-To: <61411576E951D211AF330008C7245DD905F68D93@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.HPX.4.21.0007261059320.23773-100000@rzpool07.rz.tu-bs.de>

On Wed, 26 Jul 2000, Strumila, John wrote:

> > nrow(xx)
> [1] 9683
> > nrow(yy)
> [1] 984
> > nrow(zz)
> [1] 984

The Problem is that merge only keep cases, which are both in xx + yy
(intersection). A work arount might be to use match instead:

> x <- data.frame(id=1:10,21:30)
> y <- data.frame(id=1:11,21:31)
> dim(x)
[1] 10  2
> dim(y)
[1] 11  2
> dim(merge(x,y,by="id"))
[1] 10  3
> y$x <- x[match(y$id,x$id),2]


or is there a hidden all, all.x, all.y in merge?

Peter

** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From y0004379 at tu-bs.de  Wed Jul 26 11:13:03 2000
From: y0004379 at tu-bs.de (Peter Malewski)
Date: Wed, 26 Jul 2000 11:13:03 +0200 (METDST)
Subject: [R] merge aint merging
In-Reply-To: <Pine.HPX.4.21.0007261059320.23773-100000@rzpool07.rz.tu-bs.de>
Message-ID: <Pine.HPX.4.21.0007261111430.23773-100000@rzpool07.rz.tu-bs.de>

Oh sorry, there are there! I've overseen the line...

by, by.x, by.y: specifcations of the common columns. See Details.

than this might be the best way...

Sorry

On Wed, 26 Jul 2000, Peter Malewski wrote:

> or is there a hidden all, all.x, all.y in merge?

** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 26 11:14:55 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jul 2000 10:14:55 +0100 (BST)
Subject: [R] merge aint merging
In-Reply-To: <61411576E951D211AF330008C7245DD905F68D93@ntmsg0005.corpmail.telstra.com.au>
Message-ID: <Pine.GSO.4.05.10007261010040.26668-100000@auk.stats>

On Wed, 26 Jul 2000, Strumila, John wrote:

> g'day R friends,
> 
> can anyone please help me with a frustrating merge?
> 
> The number of rows of a resulting merge is the smaller of the 2 dataframes
> used as input.  What am I doing wrong?  I'm using 1.1.0 on redhat 6.2

What's the problem?  From the help page:

     The rows in the two data
     frames that match on the specified columns are extracted, and
     joined together. If there is more than one match, all possible
     matches contribute one row each.

You have no duplicates, so you get only matches, and hence no more rows
than the smaller of the two data frames.

merge does a database `join' operation, if that helps.  S=PLUS has
all.x and all.y to do things differently, but R does not (nor are they
planned).

> 
> thanks,
> John Strumila
> 
> > xx[1:10,]
>            datetime c
> 948992940 948992940 0
> 948993000 948993000 0
> 948993060 948993060 0
> 948993120 948993120 0
> 948993180 948993180 0
> 948993240 948993240 0
> 948993300 948993300 0
> 948993360 948993360 0
> 948993420 948993420 0
> 948993480 948993480 0
> > yy[1:10,]
>            datetime     c
> 948992940 948992940 16560
> 949317120 949317120    84
> 949327800 949327800    23
> 949330440 949330440     0
> 949331580 949331580    27
> 949332000 949332000    22
> 949348800 949348800     6
> 949351440 949351440    81
> 949351500 949351500   213
> 949351560 949351560    52
> > zz<-merge(xx,yy,by="datetime")
> > zz[1:10,]
>     datetime c.x   c.y
> 1  948992940   0 16560
> 2  949317120   0    84
> 3  949327800   0    23
> 4  949330440   0     0
> 5  949331580   0    27
> 6  949332000   0    22
> 7  949348800   0     6
> 8  949351440   0    81
> 9  949351500   0   213
> 10 949351560   0    52
> > nrow(xx)
> [1] 9683
> > nrow(yy)
> [1] 984
> > nrow(zz)
> [1] 984
> > 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Patrik.Waldmann at sysbot.lu.se  Wed Jul 26 14:56:36 2000
From: Patrik.Waldmann at sysbot.lu.se (Patrik Waldmann)
Date: Wed, 26 Jul 2000 14:56:36 +0200
Subject: [R] Correlation matrices
Message-ID: <002d01bff700$eef57e70$2795eb82@patrikwpc>

Hello,

are there any good methods in R that will test if two correlation matrices (obtained in different ways) are equal? Something better than the Mantel test would be preferable.

Regards,

Patrik Waldmann



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From D.A.Wooff at Durham.ac.uk  Wed Jul 26 15:33:49 2000
From: D.A.Wooff at Durham.ac.uk (David Wooff)
Date: Wed, 26 Jul 2000 14:33:49 +0100
Subject: [R] Correlation matrices
References: <002d01bff700$eef57e70$2795eb82@patrikwpc>
Message-ID: <397EE8BD.D4DF1194@Durham.ac.uk>

Patrik Waldmann wrote:
> 
> Hello,
> 
> are there any good methods in R that will test if two correlation matrices (obtained in different ways) are equal? Something better than the Mantel test would be preferable.
> 
> Regards,
> 
> Patrik Waldmann
> 

Not that I know of. I include a function I've written for my own use,
assuming multivariate Normality. I'm sure the experts could improve on
the function. (And please could they or you point out any embarrasing
errors!)

David.

-- 
  David Wooff, Director, Statistics and Mathematics Consultancy Unit,
  Department of Mathematical Sciences, University of Durham.
  Science Laboratories, South Road, Durham, DH1 3LE, UK.
  Tel. 0191 374 4531, Fax 0191 374 7388.


sphericity.daw<-function(n,s1,s2=NULL,estsigma=TRUE){
#### Performs a hypothesis test that a covariance matrix is of specified 
#### form. Test is of the form H0: S1=sigma^2*S2. n is the number of 
#### observations on which the sample covariance matrix is based.
#### If the input parameter estsigma is TRUE:
####   Perform test of the hypothesis that S1=sigma^2 S2, for unknown
sigma. 
####   If S2 not specified, assumed that S2=I. Reference is Basilevsky, 
####   Statistical Factor Analysis and Related Methods, page 191. 
#### If the input parameter estsigma is FALSE:
####  Perform test of the hypothesis that S1=S2. If S2 not specified,
####  assumed that S2=I. Reference is Seber, Multivariate Observations, 
####  sec 3.5.4
#### Only the lower triangle+diagonal is required at entry, and the
upper
#### triangle is ignored.
#### DAW July 2000

p<-nrow(s1)
for (i in 1:(p-1)){for (j in ((i+1):p)){
   s1[i,j]<-s1[j,i]
   s2[i,j]<-s2[j,i]
}}
if (!is.null(s2)){
b<-eigen(s2,symmetric=T,only.values=F)
r<-b$vectors %*% diag(1/sqrt(b$values))
s<-t(r) %*% s1 %*% r
}
else
{
s<-s1
}

d<-eigen(s,symmetric=T,only.values=T)$values
ldet<-sum(log(d))
tr<-sum(d)

if (estsigma==TRUE){
sighat<-tr/p
cc<--(n-(2*p^2+p+2)/(6*p))*(ldet-p*log(tr/p))
statistic <- cc
sighat<-sighat
names(statistic) <- "Sphericity test statistic"
parameter <- 0.5*(p+2)*(p-1)
names(parameter) <- "df"
rval<-list(data.name="",sighat=sighat,statistic=statistic,parameter=parameter,p
value=1-pchisq(statistic,parameter))
}
else
{
cc<--n*(p+ldet-tr)
statistic <- cc
names(statistic) <- "Covariance equality test statistic"
parameter <- 0.5*(p+1)*p
names(parameter) <- "df"
rval<-list(data.name="",statistic=statistic,parameter=parameter,p.value=1-pchis
q(statistic,parameter))
}
class(rval) <- "htest"
return(rval)
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mikem at salter-point.com  Wed Jul 26 16:03:16 2000
From: mikem at salter-point.com (Michael M. Meyer)
Date: Wed, 26 Jul 2000 07:03:16 -0700
Subject: [R] John Tukey
Message-ID: <200007261403.HAA02581@home.salter-point.com>


------- Forwarded Message

From: "Wainer, Howard" <hwainer at ets.org>
Subject: John Tukey

Dear Friends and colleagues,

John Wilder Tukey died last night of an accumulation of physical problems.

We shared a mince pie (his favorite) on Monday night in his hospital room, 
and he was in good spirits, but in the end his body failed him. 

He left us with his mind intact; despite the physical problems that plagued
him, 
in the end he was still John Tukey.

If you have any specific question please write and I will try to answer
them.
As other plans are made I will keep you informed.

Howard 
.


------- End of Forwarded Message

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Wed Jul 26 16:24:36 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Wed, 26 Jul 2000 10:24:36 -0400 (EDT)
Subject: [R] Correlation matrices
In-Reply-To: <002d01bff700$eef57e70$2795eb82@patrikwpc>
Message-ID: <Pine.LNX.4.10.10007261014150.14983-100000@bolker-nt.zoo.ufl.edu>


  Do you have any leads on statistical methods for solving this problem
(independent of implementation in a particular system)? This doesn't seem
like an R problem as much as a more general statistical problem.  Also,
what do you mean by "better"?  More powerful?  Incorporating more
information about your particular problem?  I'm not aware (although I'm
admittedly pretty ignorant) of any really good general alternatives to
Mantel's test, given the breadth of possible applications. You could try
asking in sci.stat.math or sci.stat.consult (?).

  I guess the only R-specific issue is that if you did have an alternative
in mind it would quite probably be a permutation test of some sort, which
would mean that either efficient R-coding or coding the test in C or
FORTRAN and interfacing to R would be a good idea.

On Wed, 26 Jul 2000, Patrik Waldmann wrote:

> Hello,
> 
> are there any good methods in R that will test if two correlation
> matrices (obtained in different ways) are equal? Something better than
> the Mantel test would be preferable.
> 
> Regards,
> 
> Patrik Waldmann
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Heberto at meakins.lan.mcgill.ca  Wed Jul 26 17:00:11 2000
From: Heberto at meakins.lan.mcgill.ca (Heberto Ghezzo)
Date: Wed, 26 Jul 2000 11:00:11 -0400
Subject: [R] differential equations
Message-ID: <200007261500.LAA18701@sirocco.cc.mcgill.ca>

Hi, Does somebody knows of the existence of a library of functions 
for solving differential equations, I need a solver for a system of non 
linear first order differential equations. I think there was something 
in IMSL but that was a long time ago and probably there are some 
new algorithms in the new now.
Thanks for any pointers.
.

R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Wed Jul 26 17:30:17 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Wed, 26 Jul 2000 08:30:17 -0700 (PDT)
Subject: [R] differential equations
In-Reply-To: <200007261500.LAA18701@sirocco.cc.mcgill.ca>
Message-ID: <Pine.GSO.4.21.0007260827500.7319-100000@atlas.biostat.washington.edu>

On Wed, 26 Jul 2000, Heberto Ghezzo wrote:

> Hi, Does somebody knows of the existence of a library of functions 
> for solving differential equations, I need a solver for a system of non 
> linear first order differential equations. I think there was something 
> in IMSL but that was a long time ago and probably there are some 
> new algorithms in the new now.
> Thanks for any pointers.

Netlib is the place to look.
   http://www.netlib.org/ode/index.html
has a whole bunch of functions.

There are also some in the TOMS directory
   http://www.netlib.org/toms/index.html

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From iosu at bureau.ucc.ie  Thu Jul 27 01:59:02 2000
From: iosu at bureau.ucc.ie (Jesus Maria Frias Celayeta)
Date: Wed, 26 Jul 2000 16:59:02 -0700
Subject: [R] differential equations
References: <200007261500.LAA18701@sirocco.cc.mcgill.ca>
Message-ID: <397F7B46.43524066@ucc.ie>

Hi Heberto!
    I think there is not a solver for differential equations still in R.However
don't give up that easy:

    -you can write your models using your favourite ode solver library (limited
C or Fortran) and then dyn.load() the model, so you can use it inside R. It is
not too difficult, and if you are used to a certain library where you have your
models, is probably the easiest way.

    -there is a preliminar porting to R of the nls2 library, which is a library
that makes nonlinear regression from differential equation models. It is a bit
difficult to install, and is also not easygoing, but the nonlinear regression
works well.  In that library there is a way to actually compile a differential
equation model and integrate it using the  lsode routine from ODEPACK.  So if
you want to see how to plug a ode solver with R in a more general way you can
start having a look at it in

   http://www-bia.inra.fr/J/AB/nls2/welcome.html


cheers,

IOsu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maechler at stat.math.ethz.ch  Wed Jul 26 18:10:37 2000
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 26 Jul 2000 18:10:37 +0200 (CEST)
Subject: [R] differential equations
In-Reply-To: <Pine.GSO.4.21.0007260827500.7319-100000@atlas.biostat.washington.edu>
References: <200007261500.LAA18701@sirocco.cc.mcgill.ca>
	<Pine.GSO.4.21.0007260827500.7319-100000@atlas.biostat.washington.edu>
Message-ID: <14719.3453.985363.129958@gargle.gargle.HOWL>

>>>>> "TL" == Thomas Lumley <thomas at biostat.washington.edu> writes:

    TL> On Wed, 26 Jul 2000, Heberto Ghezzo wrote:
    >> Hi, Does somebody knows of the existence of a library of functions
    >> for solving differential equations, I need a solver for a system of
    >> non linear first order differential equations. I think there was
    >> something in IMSL but that was a long time ago and probably there
    >> are some new algorithms in the new now.  Thanks for any pointers.

    TL> Netlib is the place to look.  http://www.netlib.org/ode/index.html
    TL> has a whole bunch of functions.

    TL> There are also some in the TOMS directory
    TL> http://www.netlib.org/toms/index.html

    TL> Thomas Lumley Assistant Professor, Biostatistics University of
    TL> Washington, Seattle

Actually, the GSL (GNU Scientific Library) http://sourceware.cygnus.com/gsl/
is the one I'd like to use for R, both for ODE and `simple quadrature'
(where it seems to be pretty good)
I have been having this on my todo list for a while
and always hoped that I would be able to do it properly, ie.
pass an R function f(), both for
     I = \int_a^b f(x) dx	{a special case of the latter}
and solving
     y' = f(x,y)  with  y(a) = y0;  y'(a) = y1

and all this for multivariate x and y and  f(*) which can itself be
sophisticated..

Anyone volunteering to share the work load?
(well, I'll be out-doors for the next few days!)

Martin Maechler <maechler at stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Patrik.Waldmann at sysbot.lu.se  Wed Jul 26 18:16:05 2000
From: Patrik.Waldmann at sysbot.lu.se (Patrik Waldmann)
Date: Wed, 26 Jul 2000 18:16:05 +0200
Subject: SV: [R] Correlation matrices
References: <Pine.LNX.4.10.10007261014150.14983-100000@bolker-nt.zoo.ufl.edu>
Message-ID: <001501bff71c$cd040180$2795eb82@patrikwpc>

Tests of covariance matrices are best performed with the hierarchical common principal component (CPC) approach (Flury 1988,1997), as the matrices can be equal, proportional, have CPC structure, partial CPC or be unrelated. This approach assumes multivariate normality, and that the covariance matrices are estimated in the same way. There are already programs written for this, for example http://www.uta.edu/biology/phillips/ . I'm sure this approach would be useful also for R users, but I don't have time writing it (one of the reasons for asking was to see if someone had implemented it in R). The problem with correlation matrices is that the assumption of multivariate normality doesn't hold. Some kind of resampling approach could be a solution. My problem is that I estimate two kinds of correlation matrices from the same sample, with two different methods. So in a way I'm testing if the methods give the same result (some kind of a Monte-Carlo test but with a given sample), and a permutation test would therefore not be meaningful (I think). The test of equal matrices is of most interest, and therefore the Mantel test is not appropriate (as it only tests for structure). The main problem seems to be how to relate a relevant test statistic of equality to a relevant resampling scheme (or whatever). Sorry for bothering you about this not-so-much-of-an-R-issue.

Patrik Waldmann
Patrik.Waldmann at sysbot.lu.se


> 
>   Do you have any leads on statistical methods for solving this problem
> (independent of implementation in a particular system)? This doesn't seem
> like an R problem as much as a more general statistical problem.  Also,
> what do you mean by "better"?  More powerful?  Incorporating more
> information about your particular problem?  I'm not aware (although I'm
> admittedly pretty ignorant) of any really good general alternatives to
> Mantel's test, given the breadth of possible applications. You could try
> asking in sci.stat.math or sci.stat.consult (?).
> 
>   I guess the only R-specific issue is that if you did have an alternative
> in mind it would quite probably be a permutation test of some sort, which
> would mean that either efficient R-coding or coding the test in C or
> FORTRAN and interfacing to R would be a good idea.
> 
> On Wed, 26 Jul 2000, Patrik Waldmann wrote:
> 
> > Hello,
> > 
> > are there any good methods in R that will test if two correlation
> > matrices (obtained in different ways) are equal? Something better than
> > the Mantel test would be preferable.
> > 
> > Regards,
> > 
> > Patrik Waldmann
> > 
> > 
> > 
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > 
> > 
> 
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From keitt at nceas.ucsb.edu  Wed Jul 26 19:07:45 2000
From: keitt at nceas.ucsb.edu (Timothy H. Keitt)
Date: Wed, 26 Jul 2000 10:07:45 -0700
Subject: [R] differential equations
References: <200007261500.LAA18701@sirocco.cc.mcgill.ca>
		<Pine.GSO.4.21.0007260827500.7319-100000@atlas.biostat.washington.edu> <14719.3453.985363.129958@gargle.gargle.HOWL>
Message-ID: <397F1AE1.7928C5CD@nceas.ucsb.edu>

A GSL package for R would be great; let me know if I can help.  Getting GSL to
evaluate R code though may be a bit of a problem; can you pass a pointer to the
eval function?

Tim

Martin Maechler wrote:

> >>>>> "TL" == Thomas Lumley <thomas at biostat.washington.edu> writes:
>
>     TL> On Wed, 26 Jul 2000, Heberto Ghezzo wrote:
>     >> Hi, Does somebody knows of the existence of a library of functions
>     >> for solving differential equations, I need a solver for a system of
>     >> non linear first order differential equations. I think there was
>     >> something in IMSL but that was a long time ago and probably there
>     >> are some new algorithms in the new now.  Thanks for any pointers.
>
>     TL> Netlib is the place to look.  http://www.netlib.org/ode/index.html
>     TL> has a whole bunch of functions.
>
>     TL> There are also some in the TOMS directory
>     TL> http://www.netlib.org/toms/index.html
>
>     TL> Thomas Lumley Assistant Professor, Biostatistics University of
>     TL> Washington, Seattle
>
> Actually, the GSL (GNU Scientific Library) http://sourceware.cygnus.com/gsl/
> is the one I'd like to use for R, both for ODE and `simple quadrature'
> (where it seems to be pretty good)
> I have been having this on my todo list for a while
> and always hoped that I would be able to do it properly, ie.
> pass an R function f(), both for
>      I = \int_a^b f(x) dx       {a special case of the latter}
> and solving
>      y' = f(x,y)  with  y(a) = y0;  y'(a) = y1
>
> and all this for multivariate x and y and  f(*) which can itself be
> sophisticated..
>
> Anyone volunteering to share the work load?
> (well, I'll be out-doors for the next few days!)
>
> Martin Maechler <maechler at stat.math.ethz.ch>    http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO D10    Leonhardstr. 27
> ETH (Federal Inst. Technology)  8092 Zurich     SWITZERLAND
> phone: x-41-1-632-3408          fax: ...-1228                   <><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

--
Timothy H. Keitt
National Center for Ecological Analysis and Synthesis
735 State Street, Suite 300, Santa Barbara, CA 93101
Phone: 805-892-2519, FAX: 805-892-2510
http://www.nceas.ucsb.edu/~keitt/



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Setzer.Woodrow at epamail.epa.gov  Wed Jul 26 18:48:48 2000
From: Setzer.Woodrow at epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 26 Jul 2000 12:48:48 -0400
Subject: [R] differential equations
Message-ID: <85256928.005C88C4.00@EPAHUB2.RTP.EPA.GOV>



I have a library that implements LSODA, from the netlib collection.  It allows
the ODE system to be written as an R function, and allows the parameters of the
system to be passed as a vector to the function.   I have tested it in Linux and
Windows, and seems to work OK.  This is still in the 'alpha' stage of
development, but I would be happy to share what I have.

LSODA is an algorithm that automatically switches between 'stiff' and
'non-stiff' solvers: see the documentation in the fortran code.

Let me know if you want the package (called 'odesolve'), and whether you want
source or a precompiled package for Windows (that will take longer).

R. Woodrow Setzer, Jr.                                                    Phone:
(919) 541-0128
Biostatistics and
Fax:  (919) 541-4002
Research Support Staff
NHEERL MD-55; US EPA; RTP, NC 27711


|--------+----------------------------->
|        |          Heberto at meakins.lan|
|        |          .mcgill.ca         |
|        |                             |
|        |          07/26/2000 11:00 AM|
|        |                             |
|--------+----------------------------->
  >----------------------------------------------------------------------------|
  |                                                                            |
  |       To:     r-help at stat.math.ethz.ch                                     |
  |       cc:                                                                  |
  |       Subject:     [R] differential equations                              |
  >----------------------------------------------------------------------------|






Hi, Does somebody knows of the existence of a library of functions
for solving differential equations, I need a solver for a system of non
linear first order differential equations. I think there was something
in IMSL but that was a long time ago and probably there are some
new algorithms in the new now.
Thanks for any pointers.
.

R. Heberto Ghezzo  Ph.D.
Meakins-Christie Labs
McGill University
Montreal - Canada
heberto at meakins.lan.mcgill.ca
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Wed Jul 26 19:31:04 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 26 Jul 2000 18:31:04 +0100 (BST)
Subject: [R] differential equations
In-Reply-To: <397F1AE1.7928C5CD@nceas.ucsb.edu>
Message-ID: <Pine.GSO.4.05.10007261826100.27282-100000@auk.stats>

On Wed, 26 Jul 2000, Timothy H. Keitt wrote:

> A GSL package for R would be great; let me know if I can help.  Getting GSL to
> evaluate R code though may be a bit of a problem; can you pass a pointer to the
> eval function?

That's what call_R achieves: indeed solving ODEs seems
the world's favourite example of call_S/R.

To achieve it that way is easy, but it can be pretty slow. As e.g. the 
optimization functions show, there are slicker ways to call Rf_eval
more directly from a C wrapper.  I can't imagine that ODE solver code
is different in principle.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Thu Jul 27 01:18:31 2000
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Thu, 27 Jul 2000 11:18:31 +1200
Subject: [R] Cumulative distribution estimation
In-Reply-To: <200007261500.LAA18701@sirocco.cc.mcgill.ca>
Message-ID: <200007262319.LAA10603@gosset.stats.waikato.ac.nz>

Apologies for bothering the list for something that I could probably have
worked out myself had I brought my V&R in to work!

I have been asked how to construct useable cdf's and quantile functions
from density() output. If I were using Minitab I'd begin by making partial
sums of the density values and normalizing to a maximum of 1, but I don't
know the R analogue to the Minitab PARSUMS command.

Any suggestions?

Murray


Murray Jorgensen,  Department of Statistics,  U of Waikato, Hamilton, NZ
-----[+64-7-838-4773]---------------------------[maj at waikato.ac.nz]-----
"Doubt everything or believe everything:these are two equally convenient
strategies. With either we dispense with the need to think."
http://www.stats.waikato.ac.nz/Staff/maj.html          - Henri Poincare'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From John.Strumila at team.telstra.com  Thu Jul 27 03:56:23 2000
From: John.Strumila at team.telstra.com (Strumila, John)
Date: Thu, 27 Jul 2000 11:56:23 +1000
Subject: [R] merge aint merging
Message-ID: <61411576E951D211AF330008C7245DD905F68E59@ntmsg0005.corpmail.telstra.com.au>

thank you Peter and Brian,

yep, I was a turkey and misunderstood the doco.  Peter's suggestion looks
good.  A pity about the lack of an 'all.x' though ...

thanks again,
John Strumila

-----Original Message-----
From: Peter Malewski [mailto:y0004379 at tu-bs.de]
Sent: Wednesday, 26 July 2000 19:13
To: Strumila, John
Cc: R-Help
Subject: Re: [R] merge aint merging


Oh sorry, there are there! I've overseen the line...

by, by.x, by.y: specifcations of the common columns. See Details.

than this might be the best way...

Sorry

On Wed, 26 Jul 2000, Peter Malewski wrote:

> or is there a hidden all, all.x, all.y in merge?

** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cberry at tajo.ucsd.edu  Thu Jul 27 07:04:11 2000
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 26 Jul 2000 22:04:11 -0700 (PDT)
Subject: [R] Correlation matrices
Message-ID: <200007270504.WAA01071@tajo.ucsd.edu>


"Patrik Waldmann" <Patrik.Waldmann at sysbot.lu.se> asked:

PW> are there any good methods in R that will test if two correlation
PW> matrices (obtained in different ways) are equal? Something better than
PW> the Mantel test would be preferable.

and from the reponses, it would appear that the answer is 'no'.

However, the methods outlined in:

Beran, R. and M Srivistava (1985) Bootstrap tests and confidence 
regions for functions of a covariance matrix, Annals of Statistics 
13:95-115, 1985.

would be easy enough to implement and do not require MVN
assumptions. 

All that is required is to estimate the covariance structure under the
desired null model, to compute a statistic that measures departures
from the null, and the computation of matrix square roots, if I
recall.

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 27 10:19:59 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 27 Jul 2000 09:19:59 +0100 (BST)
Subject: [R] Questions about deviance
In-Reply-To: <397CC356.81C41C96@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.05.10007270909520.10509-100000@auk.stats>

On Mon, 24 Jul 2000, halvorsen wrote:

> I have experimented with the cheese data example from McCullagh&Nelder,
> page 175. With a proportional odds model they obtain a residual deviance
> of
> 20.31.
> 
> Estimating the same model with polr(MASS) gives a residual deviance of
> 762.11 !,  while using ordglm(gnlm) gives a deviance of 523.94.  Can
> anybody explain these differences?

It depends on the choice of saturated model. See MASS3 pp 230-1, including
how to compare them.  It is a standard problem with discrete glms, and for
this problem (which is not a glm).  I maintain that our choice, which
amounts to minus twice sum of log predicted probabilities, is by far the
most interpretable.  (Peter McCullagh had a thing about their lack of
value, but he is not supported by the whole prediction assessment
industry.)

(I suspect ordglm is giving a minus twice log-likelihood as the
`deviance'.)


If you use a function (polr) from support software from a book, you 
need to be aware that most of the documentation is the book.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jul 27 10:53:10 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jul 2000 10:53:10 +0200
Subject: [R] Questions about deviance
In-Reply-To: Prof Brian D Ripley's message of "Thu, 27 Jul 2000 09:19:59 +0100 (BST)"
References: <Pine.GSO.4.05.10007270909520.10509-100000@auk.stats>
Message-ID: <x2wvi89cp5.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley at stats.ox.ac.uk> writes:

> On Mon, 24 Jul 2000, halvorsen wrote:
> 
> > I have experimented with the cheese data example from McCullagh&Nelder,
> > page 175. With a proportional odds model they obtain a residual deviance
> > of
> > 20.31.
> > 
> > Estimating the same model with polr(MASS) gives a residual deviance of
> > 762.11 !,  while using ordglm(gnlm) gives a deviance of 523.94.  Can
> > anybody explain these differences?
> 
> It depends on the choice of saturated model. See MASS3 pp 230-1, including
> how to compare them.  It is a standard problem with discrete glms, and for
> this problem (which is not a glm).  I maintain that our choice, which
> amounts to minus twice sum of log predicted probabilities, is by far the
> most interpretable.  (Peter McCullagh had a thing about their lack of
> value, but he is not supported by the whole prediction assessment
> industry.)

I think Peter McC's point was that they are useless as measures of
discrepancy between model and data, which is pretty obvious once you
realise that the deviance for the model with p=.5 for all observations
is a constant, so the deviance for any data is equivalent to the test
for "all p==.5".

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From c.farrow at compserv.gla.ac.uk  Thu Jul 27 13:35:59 2000
From: c.farrow at compserv.gla.ac.uk (Colin Farrow)
Date: Thu, 27 Jul 2000 12:35:59 +0100
Subject: [R] problem using ts after tapply
Message-ID: <39801E9F.2343132B@compserv.gla.ac.uk>

here is a distillation of a problem encountered in transfering some
working code from R-0.63 to R-1.1.0

a1 <- 1:10
b1 <- tapply(a1,a1, sum)
c1 <- ts(b1)
c1
Error in if (NCOL(x) == 1) { : missing value where logical needed

note that the error is returned as the value of calling ts() and is not
automatically displayed

problem seems to be that 
is.array(b1) returns TRUE
yet dim(b1) returns 10

bug or feature or am I missing something?

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R 

with grateful thanks to R-core for a wonderful tool.

-- 
Colin Farrow
Computing Service, University of Glasgow, Glasgow G12 8QQ
Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jul 27 13:24:28 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jul 2000 13:24:28 +0200
Subject: [R] problem using ts after tapply
In-Reply-To: Colin Farrow's message of "Thu, 27 Jul 2000 12:35:59 +0100"
References: <39801E9F.2343132B@compserv.gla.ac.uk>
Message-ID: <x2og3jak9f.fsf@blueberry.kubism.ku.dk>

Colin Farrow <c.farrow at compserv.gla.ac.uk> writes:

> here is a distillation of a problem encountered in transfering some
> working code from R-0.63 to R-1.1.0
> 
> a1 <- 1:10
> b1 <- tapply(a1,a1, sum)
> c1 <- ts(b1)
> c1
> Error in if (NCOL(x) == 1) { : missing value where logical needed
> 
> note that the error is returned as the value of calling ts() and is not
> automatically displayed
> 
> problem seems to be that 
> is.array(b1) returns TRUE
> yet dim(b1) returns 10
> 
> bug or feature or am I missing something?

It's a feature in tapply that it generates a 1-D array, but one might
consider it a bug in print.ts, ts, or NCOL that the dim() is carried
through and the 1-D case not handled. You can easily work around
it by setting dim(c1)<-NULL or dim(b1)<-NULL.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel at bbdo-interone.de  Thu Jul 27 15:09:15 2000
From: jens.oehlschlaegel at bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 27 Jul 2000 15:09:15 +0200
Subject: [R] Summary: recommended linux environment for R
In-Reply-To: <00070515104300.03518@john>
Message-ID: <000301bff7cb$de472710$c10616ac@oehl.bbdo.de>


Some days before I asked about a recommended linux environment for R.

Looks like, in principle it runs on all major linux distributions (debian
red hat, suse). There was a report of a problem with dynamically loading
Fortran on Red Hat 6.2.

Someone encountered trouble compiling library mclust with f77 and succeded
with f2c, but other people have succeeded compiling mclust with f77, so
there is no clear reason to prefer either f77 or f2c.

Thanks to Ramon Diaz-Uriarte, Dirk Eddelbuettel, Sven Garbade, Christian
Hennig, Friedrich Leisch,
Martyn Plummer, Brian Ripley, John Williams

Regards


Jens Oehlschlaegel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From jens.oehlschlaegel at bbdo-interone.de  Thu Jul 27 15:54:37 2000
From: jens.oehlschlaegel at bbdo-interone.de (=?iso-8859-1?Q?Jens_Oehlschl=E4gel?=)
Date: Thu, 27 Jul 2000 15:54:37 +0200
Subject: [R] R under Win2000?
Message-ID: <000501bff7d2$347f8b30$c10616ac@oehl.bbdo.de>


Dear all,
Will R run under Win2000 or is it safer to stay with NT4.0 for a while?

Regards


--
Dr. Jens Oehlschl?gel
Analyse
BBDO InterOne
Gr?nstr. 15
40212 D?sseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 27 16:32:26 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 27 Jul 2000 15:32:26 +0100 (GMT Daylight Time)
Subject: [R] R under Win2000?
In-Reply-To: <000501bff7d2$347f8b30$c10616ac@oehl.bbdo.de>
Message-ID: <Pine.WNT.4.05.10007271524050.281-100000@tern.stats>

On Thu, 27 Jul 2000, [iso-8859-1] Jens Oehlschlgel wrote:

> Will R run under Win2000 or is it safer to stay with NT4.0 for a while?

We have had mixed reports.  I think that on Intel chips with release
drivers (e.g. for graphics and printers) there have been no reports of
problems (and a few of success).  We have heard of problems on one Athlon
(AMD K7) and with one beta graphics card driver on PIII.

I am fairly sure Guido now tries binaries on W2K.  We don't normally have
it available as it will not work with our Unix-based authentication
(whereas NT4 and W98 via third-party addons will).  My computing officers
have decided to stay with NT4 for AY 2000-1.



-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rls at pincock.com  Thu Jul 27 16:49:05 2000
From: rls at pincock.com (Robert Sandefur)
Date: Thu, 27 Jul 2000 07:49:05 -0700
Subject: [R] R under Win2000?
Message-ID: <s97fe97c.024@hc4>

Hi-

 I have run various versions of R (1.1,0 now) since oct 1999 on various win2k betas and final release and have had  no win2k specific problems. (except those associated with many applications under win2k eg  under win2k running r try help about r; click on r icon in task bar and you're locked out of console until you alt tab to r info box and close it) 

regards

Bob Sandefur
Principal Geostatistician
Pincock, Allen and Holt, Inc.
International Mineral Consultants
274 Union Blvd Suite 200
Lakewood, CO
80224
USA
303 914-4467 v
rls at pincock.com




Original msg:
>>> "Jens Oehlschl?gel" <jens.oehlschlaegel at bbdo-interone.de> 07/27/00 07:54AM >>>

Dear all,
Will R run under Win2000 or is it safer to stay with NT4.0 for a while?

Regards


--
Dr. Jens Oehlschl?gel
Analyse
BBDO InterOne
Gr?nstr. 15
40212 D?sseldorf

Tel.: +49 (0)211 1379-187
Fax.: +49 (0)211 1379-461
http://www.bbdo-interone.de 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From thomas at biostat.washington.edu  Thu Jul 27 17:05:31 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 27 Jul 2000 08:05:31 -0700 (PDT)
Subject: [R] Cumulative distribution estimation
In-Reply-To: <200007262319.LAA10603@gosset.stats.waikato.ac.nz>
Message-ID: <Pine.GSO.4.21.0007270802020.14769-100000@atlas.biostat.washington.edu>

On Thu, 27 Jul 2000, Murray Jorgensen wrote:

> Apologies for bothering the list for something that I could probably have
> worked out myself had I brought my V&R in to work!
> 
> I have been asked how to construct useable cdf's and quantile functions
> from density() output. If I were using Minitab I'd begin by making partial
> sums of the density values and normalizing to a maximum of 1, but I don't
> know the R analogue to the Minitab PARSUMS command.

Cumulative sums are done with the cumsum() function (apropos("sum") might
have been one way to find out, or help.search("cumulative"))

If d is a density object then at least approximately what you want is
   cumsum(d$y*c(0,diff(d$x)))
(there may be an off-by-one error).

In reasonably large samples I don't think this improves on the empirical
CDF, though.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From feldesmanm at pdx.edu  Thu Jul 27 18:57:17 2000
From: feldesmanm at pdx.edu (Marc Feldesman)
Date: Thu, 27 Jul 2000 09:57:17 -0700
Subject: [R] R under Win2000?
In-Reply-To: <000501bff7d2$347f8b30$c10616ac@oehl.bbdo.de>
Message-ID: <4.3.2.7.2.20000727095559.00b86678@127.0.0.1>

I've been running R 1.1.0 under Windows 2000 (2 different machines) for 
about a month now.  So far, it is as stable as the version on my NT4 
system.  I've more quirky problems with R under Win98 (video problems it 
seems) than under any flavor of NT.


At 03:54 PM 7/27/2000 +0200, Jens Oehlschl?gel wrote:

>Dear all,
>Will R run under Win2000 or is it safer to stay with NT4.0 for a while?
>
>Regards
>
>
>--
>Dr. Jens Oehlschl?gel
>Analyse
>BBDO InterOne
>Gr?nstr. 15
>40212 D?sseldorf
>
>Tel.: +49 (0)211 1379-187
>Fax.: +49 (0)211 1379-461
>http://www.bbdo-interone.de
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetil.kjernsmo at astro.uio.no  Thu Jul 27 20:01:54 2000
From: kjetil.kjernsmo at astro.uio.no (Kjetil Kjernsmo)
Date: Thu, 27 Jul 2000 20:01:54 +0200 (MET DST)
Subject: [R] Interpolation using a piecewise linear function in higher dimensions
Message-ID: <Pine.OSF.4.05.10007271902150.247-100000@alnair.uio.no>

Dear all,

I am just wondering if anybody has implemented a function that can give a
piecewise linear interpolation in more than 2 dimensions? 
I have looked at the akima package, but I would rather like a piecewise
linear interpolation rather than a spline and while it did the job quite
satisfactory for 2 dimensions, I need to interpolate in at least three
dimensions. If anybody has implemented something like that, and would like
to share the code, I would be very happy. Or if someone knows a library
that can do it that wouldn't be too hard to port (I have searched in
netlib, found one function that was a bit hard to understand and seemed
like overkill, and looked in the GSL documentation without finding
anything appropriate).

Best,

Kjetil
-- 
Kjetil Kjernsmo
Graduate astronomy-student                    Problems worthy of attack
University of Oslo, Norway            Prove their worth by hitting back
E-mail: kjetikj at astro.uio.no                                - Piet Hein
Homepage <URL:http://www.astro.uio.no/~kjetikj/>
Webmaster at skepsis.no 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From burkett at uriacc.uri.edu  Thu Jul 27 21:53:26 2000
From: burkett at uriacc.uri.edu (John P. Burkett)
Date: Thu, 27 Jul 2000 15:53:26 -0400
Subject: [R] batch mode in linux
Message-ID: <39809336.218ABFF7@uriacc.uri.edu>

I'm trying to learn how to use R version 1.1.0 under Mandrake Linux
version 6.1.  Using R interactively, I get good results.  However, when
I attempt to execute commands from a file (following the directions in
section 1.10 of An Introduction to R, version 1.10) my output
disappears.  As a default or after a sink() command, I would expect to
see output on the console, but none appears.  After a sink("record.lis")
command, I would expect to find the output in the record.lis file, but
it is empty.  The commands in my input file (e.g., summary(fm)) produce
output in interactive mode, so I don't understand why no output appears
in batch mode.  Any error in the input file produces an error message on
the console.  But when I correct the error, there is still no visible
output.  Any help would be appreciated.

--
John P. Burkett
Department of Economics
University of Rhode Island
10 Chafee Road, Suite 3
Kingston, RI 02881-0808

phone:  (401) 874-4122
fax:    (401) 874-2858


-------------- next part --------------
An HTML attachment was scrubbed...
URL: https://stat.ethz.ch/pipermail/r-help/attachments/20000727/0fec9a0a/attachment.html

From thomas at biostat.washington.edu  Thu Jul 27 22:19:40 2000
From: thomas at biostat.washington.edu (Thomas Lumley)
Date: Thu, 27 Jul 2000 13:19:40 -0700 (PDT)
Subject: [R] batch mode in linux
In-Reply-To: <39809336.218ABFF7@uriacc.uri.edu>
Message-ID: <Pine.GSO.4.21.0007271258150.14769-100000@atlas.biostat.washington.edu>



On Thu, 27 Jul 2000, John P. Burkett wrote:
> I'm trying to learn how to use R version 1.1.0 under Mandrake Linux
> version 6.1.  Using R interactively, I get good results.  However, when
> I attempt to execute commands from a file (following the directions in
> section 1.10 of An Introduction to R, version 1.10) my output
> disappears.

This should probably be added to the FAQ.

Short answer: 
	source(infile.R,echo=T) 
or 
	R BATCH infile.R outfile
or
	R --no-save <infile.R >outfile &


Long answer:
When code is run with source() there is only one way for information to
appear on the screen: it gets explicitly printed with print() or cat() or
a similar function.  If your file contains the line
	1+2
R will compute the value 3 but nothing will be printed because there is no
print() function. If it contains
	print(1+2)
then 3 will be printed.

In interactive mode, when you type in an expression, the value of that
expression is computed and then printed by the user interface If you type
	1+2
R will compute and return the value 3, and the user interface will print
it. If you type 
	print(1+2)
then the expression is evaluated (causing "3" to be printed) and then the
user interface prints the returned value of "print(1+2)", which is also 3,
so the output would appear twice.

The fact that source() doesn't normally print everything on the output is
a feature, not a bug.  The main use of source() is to load code. When you
type eg, library(nlme), literally hundreds of functions are read in. You
really don't want them appearing on the screen.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.dalgaard at biostat.ku.dk  Thu Jul 27 22:30:20 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Jul 2000 22:30:20 +0200
Subject: [R] batch mode in linux
In-Reply-To: "John P. Burkett"'s message of "Thu, 27 Jul 2000 15:53:26 -0400"
References: <39809336.218ABFF7@uriacc.uri.edu>
Message-ID: <x2r98fmi3n.fsf@blueberry.kubism.ku.dk>

"John P. Burkett" <burkett at uriacc.uri.edu> writes:

> I'm trying to learn how to use R version 1.1.0 under Mandrake Linux
> version 6.1.  Using R interactively, I get good results.  However, when
> I attempt to execute commands from a file (following the directions in
> section 1.10 of An Introduction to R, version 1.10) my output
> disappears.  As a default or after a sink() command, I would expect to
> see output on the console, but none appears.  After a sink("record.lis")
> command, I would expect to find the output in the record.lis file, but
> it is empty.  The commands in my input file (e.g., summary(fm)) produce
> output in interactive mode, so I don't understand why no output appears
> in batch mode.  Any error in the input file produces an error message on
> the console.  But when I correct the error, there is still no visible
> output.  Any help would be appreciated.

I.e. you're using source(), which is not actually batch mode. (See
help(BATCH) for the real thing). The default for source() is not to
print commands and their output, try setting echo=T.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Thu Jul 27 22:29:21 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 27 Jul 2000 21:29:21 +0100 (BST)
Subject: [R] Interpolation using a piecewise linear function in higher
 dimensions
In-Reply-To: <Pine.OSF.4.05.10007271902150.247-100000@alnair.uio.no>
Message-ID: <Pine.GSO.4.05.10007272125190.15807-100000@auk.stats>

On Thu, 27 Jul 2000, Kjetil Kjernsmo wrote:

> Dear all,
> 
> I am just wondering if anybody has implemented a function that can give a
> piecewise linear interpolation in more than 2 dimensions? 
> I have looked at the akima package, but I would rather like a piecewise
> linear interpolation rather than a spline and while it did the job quite

piecewise linear interpolation is a spline of order one.

> satisfactory for 2 dimensions, I need to interpolate in at least three
> dimensions. If anybody has implemented something like that, and would like
> to share the code, I would be very happy. Or if someone knows a library
> that can do it that wouldn't be too hard to port (I have searched in
> netlib, found one function that was a bit hard to understand and seemed
> like overkill, and looked in the GSL documentation without finding
> anything appropriate).

For 3D this is widely used in mechanical CAD packages and `finite element'
code.  In kD, k > 1, one issue is what the pieces should be, and even a
regular grid poses problems of non-unique solutions.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From s-luppescu at uchicago.edu  Fri Jul 28 04:43:31 2000
From: s-luppescu at uchicago.edu (Stuart Luppescu)
Date: Thu, 27 Jul 2000 21:43:31 -0500 (CDT)
Subject: [R] Language element manipulation
Message-ID: <XFMail.20000727195547.s-luppescu@uchicago.edu>

I am very confused about this. I want to convert a string to a name so I can
use it to extract an element of a data frame using `$'. Here is my
(non-working) code:

do.graph <- function (meas)
  {
    fn <- paste("a", meas, ".dat", sep='')
    themeas <- read.table(fn, header=F)
    ameas <- as.name(paste("a", meas, sep=''))
    names(themeas) <- c("xpos", paste("a", meas, sep=''))
    meassum <- summary(themeas$ameas[themeas$xpos==1])
   ...
   }
So, when this function is called with the argument ``infl'' the second column
will be named ``ainfl''. In the last line I want to extract the column called
``ainfl'' from the data frame ``themeas''. But this is what happens:

> themeas$ameas
NULL

Just grabbing at straws here:

 themeas$eval(ameas)
Error: attempt to apply non-function

Can someone wise me up about this?
______________________________________________________________________
Stuart Luppescu         -=-=-  University of Chicago
 (EUC)  -=-=-  s-luppescu at uchicago.edu
http://www.consortium-chicago.org/people/sl/sl.html
PGP public key: www.consortium-chicago.org/people/sl/pubkey.asc
       ICQ #21172047  AIM: psycho7070
QOTD:
        "She's about as smart as bait."
>> Sent on 27-Jul-2000 at 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From dmurdoch at pair.com  Fri Jul 28 05:03:50 2000
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri, 28 Jul 2000 03:03:50 GMT
Subject: [R] Language element manipulation
In-Reply-To: <XFMail.20000727195547.s-luppescu@uchicago.edu>
References: <XFMail.20000727195547.s-luppescu@uchicago.edu>
Message-ID: <3983f737.30107715@julian.uwo.ca>


It's hard to do with $.  I think you need something like

get('$')(themeas,ameas)

It's easier to use subscripting if themeas is a dataframe:

themeas[,ameas]

Duncan Murdoch

On Thu, 27 Jul 2000 21:43:31 -0500 (CDT), you wrote:

>I am very confused about this. I want to convert a string to a name so I can
>use it to extract an element of a data frame using `$'. Here is my
>(non-working) code:
>
>do.graph <- function (meas)
>  {
>    fn <- paste("a", meas, ".dat", sep='')
>    themeas <- read.table(fn, header=F)
>    ameas <- as.name(paste("a", meas, sep=''))
>    names(themeas) <- c("xpos", paste("a", meas, sep=''))
>    meassum <- summary(themeas$ameas[themeas$xpos==1])
>   ...
>   }
>So, when this function is called with the argument ``infl'' the second column
>will be named ``ainfl''. In the last line I want to extract the column called
>``ainfl'' from the data frame ``themeas''. But this is what happens:
>
>> themeas$ameas
>NULL
>
>Just grabbing at straws here:
>
> themeas$eval(ameas)
>Error: attempt to apply non-function
>
>Can someone wise me up about this?
>______________________________________________________________________
>Stuart Luppescu         -=-=-  University of Chicago
>???? ????????????(EUC)  -=-=-  s-luppescu at uchicago.edu
>http://www.consortium-chicago.org/people/sl/sl.html
>PGP public key: www.consortium-chicago.org/people/sl/pubkey.asc
>       ICQ #21172047  AIM: psycho7070
>QOTD:
>        "She's about as smart as bait."
>>> Sent on 27-Jul-2000 at 
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 28 08:43:50 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jul 2000 07:43:50 +0100 (BST)
Subject: [R] Language element manipulation
In-Reply-To: <XFMail.20000727195547.s-luppescu@uchicago.edu>
Message-ID: <Pine.GSO.4.05.10007280738040.16625-100000@auk.stats>

On Thu, 27 Jul 2000, Stuart Luppescu wrote:

> I am very confused about this. I want to convert a string to a name so I can
> use it to extract an element of a data frame using `$'. Here is my
> (non-working) code:
> 
> do.graph <- function (meas)
>   {
>     fn <- paste("a", meas, ".dat", sep='')
>     themeas <- read.table(fn, header=F)
>     ameas <- as.name(paste("a", meas, sep=''))
>     names(themeas) <- c("xpos", paste("a", meas, sep=''))
>     meassum <- summary(themeas$ameas[themeas$xpos==1])
>    ...
>    }
> So, when this function is called with the argument ``infl'' the second column
> will be named ``ainfl''. In the last line I want to extract the column called
> ``ainfl'' from the data frame ``themeas''. But this is what happens:
> 
> > themeas$ameas
> NULL

Right. You need to use substitute to change ameas to its value.

Try an easier route. I think.

do.graph <- function (meas)
{
    fn <- paste("a", meas, ".dat", sep='')
    themeas <- read.table(fn, header=F)
    ameas <- paste("a", meas, sep='')
    names(themeas) <- c("xpos", ameas)
    meassum <- summary(themeas[themeas$xpos==1, ameas])
...

will do this for you via data-frame indexing.  But if it does not
(there are some subtle R/S differences about), themeas[ameas] works
where ameas is a character variable, in place of themeas$ameas.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 28 08:47:16 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jul 2000 07:47:16 +0100 (BST)
Subject: [R] Language element manipulation
In-Reply-To: <Pine.GSO.4.05.10007280738040.16625-100000@auk.stats>
Message-ID: <Pine.GSO.4.05.10007280746050.16625-100000@auk.stats>

On Fri, 28 Jul 2000, Prof Brian D Ripley wrote:

> will do this for you via data-frame indexing.  But if it does not
> (there are some subtle R/S differences about), themeas[ameas] works

I meant to type themeas[[ameas]], sorry.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Alvine.Bissery at imag.fr  Fri Jul 28 09:47:58 2000
From: Alvine.Bissery at imag.fr (Alvine Bissery)
Date: Fri, 28 Jul 2000 09:47:58 +0200
Subject: [R] log likelihood and deviance
Message-ID: <39813AAE.435FC927@imag.fr>

I'm fitting glm models and the summary gives the deviance of the model .

I would like to obtain the log likelihood
How can I do ?

Thanks

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From maj at waikato.ac.nz  Fri Jul 28 12:19:49 2000
From: maj at waikato.ac.nz (Murray Jorgensen)
Date: Fri, 28 Jul 2000 22:19:49 +1200
Subject: [R] Cumulative distribution estimation
In-Reply-To: <Pine.GSO.4.21.0007270802020.14769-100000@atlas.biostat.was
 hington.edu>
References: <200007262319.LAA10603@gosset.stats.waikato.ac.nz>
Message-ID: <200007281018.WAA18085@gosset.stats.waikato.ac.nz>

Thomas,

thanks for this. And to Ben Bolker and Brian Ripley for similar comments.

Murray

At 03:05 AM 28-07-00 , Thomas Lumley wrote:
>On Thu, 27 Jul 2000, Murray Jorgensen wrote:
>
>> Apologies for bothering the list for something that I could probably have
>> worked out myself had I brought my V&R in to work!
>> 
>> I have been asked how to construct useable cdf's and quantile functions
>> from density() output. If I were using Minitab I'd begin by making partial
>> sums of the density values and normalizing to a maximum of 1, but I don't
>> know the R analogue to the Minitab PARSUMS command.
>
>Cumulative sums are done with the cumsum() function (apropos("sum") might
>have been one way to find out, or help.search("cumulative"))
>
>If d is a density object then at least approximately what you want is
>   cumsum(d$y*c(0,diff(d$x)))
>(there may be an off-by-one error).
>
>In reasonably large samples I don't think this improves on the empirical
>CDF, though.
>
>	-thomas
>
>Thomas Lumley
>Assistant Professor, Biostatistics
>University of Washington, Seattle
> 
Dr Murray Jorgensen       http://www.stats.waikato.ac.nz/Staff/maj.html 
Department of Statistics, University of Waikato, Hamilton, New Zealand 
*Applications Editor, Australian and New Zealand Journal of Statistics* 
maj at waikato.ac.nz Phone +64-7 838 4773 home phone 856 6705 Fax 838 4155

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Jul 28 15:10:34 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 28 Jul 2000 09:10:34 -0400 (EDT)
Subject: [R] log likelihood and deviance
In-Reply-To: <39813AAE.435FC927@imag.fr>
Message-ID: <Pine.LNX.4.10.10007280908280.6576-100000@bolker-nt.zoo.ufl.edu>


  The deviance is typically defined as -2*(log likelihood).
However, glm output may not be giving you the absolute log-likelihood --
in these applications it's often easier to drop various multiplicative
constants that appear in the likelihood, which become additive constants
in the log-likelihood or deviance, which don't affect any of the
statistical conclusions of the analysis.

On Fri, 28 Jul 2000, Alvine Bissery wrote:

> I'm fitting glm models and the summary gives the deviance of the model .
> 
> I would like to obtain the log likelihood
> How can I do ?
> 
> Thanks
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From c.farrow at compserv.gla.ac.uk  Fri Jul 28 16:29:04 2000
From: c.farrow at compserv.gla.ac.uk (Colin Farrow)
Date: Fri, 28 Jul 2000 15:29:04 +0100
Subject: [R] gremlin in rep()
Message-ID: <398198B0.46CFF418@compserv.gla.ac.uk>

the following occurred inadvertently and brought R-1.1.0 down

rep(1:3, c(4,2,-6))
Segmentation Fault (core dumped)

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.0              
year     2000             
month    June             
day      15               
language R 
also on Solaris2.7 

-- 
Colin Farrow
Computing Service, University of Glasgow, Glasgow G12 8QQ
Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 28 15:39:13 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Jul 2000 14:39:13 +0100 (BST)
Subject: [R] log likelihood and deviance
Message-ID: <200007281339.OAA02095@toucan.stats.ox.ac.uk>

> Date: Fri, 28 Jul 2000 09:10:34 -0400 (EDT)
> From: Ben Bolker <ben at zoo.ufl.edu>

>   The deviance is typically defined as -2*(log likelihood).

Sorry, that is a common misconception and misuse.  For a GLM it has a
precise technical meaning, in the original papers and in McCullagh &
Nelder.  The *scaled* deviance (qualifier normally incorrectly omitted)
is the difference in 2*(log likelihood) between a saturated model and
the actual model.  So although log likelhoods are by definition 
defined only up to an additive constant (which depends on the base
measure for the densities but there is a standard choice),
deviances are as well-defined as `saturated model' is.

> However, glm output may not be giving you the absolute log-likelihood --
> in these applications it's often easier to drop various multiplicative
> constants that appear in the likelihood, which become additive constants
> in the log-likelihood or deviance, which don't affect any of the
> statistical conclusions of the analysis.

They do in so far as the residual (scaled) deviance is concerned!


> On Fri, 28 Jul 2000, Alvine Bissery wrote:
> 
> > I'm fitting glm models and the summary gives the deviance of the model .
> > 
> > I would like to obtain the log likelihood
> > How can I do ?

Via the AIC.  Since R's AIC is (assuming the scale is known) is

  -2 * (log-likelihood)  + 2 * #linear parameters,

you can work backwards.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Fri Jul 28 15:42:46 2000
From: ben at zoo.ufl.edu (Ben Bolker)
Date: Fri, 28 Jul 2000 09:42:46 -0400 (EDT)
Subject: [R] log likelihood and deviance
In-Reply-To: <200007281339.OAA02095@toucan.stats.ox.ac.uk>
Message-ID: <Pine.LNX.4.10.10007280942080.6972-100000@bolker-nt.zoo.ufl.edu>


   I just knew I was going to get in trouble ... thanks, Dr. Ripley, for
the corrections/clarifications.

  Ben Bolker

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From mathieu.sigma at free.fr  Fri Jul 28 16:26:42 2000
From: mathieu.sigma at free.fr (Mathieu Ros)
Date: Fri, 28 Jul 2000 16:26:42 +0200
Subject: [R] =?iso-8859-1?Q?une_introduction_=E0_R=2C_version_0.1?=
Message-ID: <000d01bff89f$daee44c0$07c809c0@pcjmw>

Hello all,
I've made available on my website a first version of "Une introduction ? R",
a french translation of the well known "An introduction to R". Only 4
chapters are translated by now but any help in continuing this (hard?) job
will be welcome, as well as your comments and reflexions.
You can download the pdf file (~260Ko) at
http://www.lecastor.net/stats/R/R-intro-fr.pdf
Sources in texinfo format will soon be available at
http://www.lecastor.net/stats/R/sources.tgz
More info about the work and the list of translated chapters (in french...)
at http://www.lecastor.net/stats/documentation.html

regards,

Mathieu Ros

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From wolbers at stat.math.ethz.ch  Fri Jul 28 17:44:12 2000
From: wolbers at stat.math.ethz.ch (Marcel Wolbers)
Date: Fri, 28 Jul 2000 17:44:12 +0200 (CEST)
Subject: [R] optim gets stuck
Message-ID: <14721.43596.553196.968224@gargle.gargle.HOWL>

Dear all

I'm having some trouble with a bound-constrained optimization using
optim(...,method="L-BFGS-B"). 
Usually, everything works fine, but for some simulations, the algorithm just 
gets stuck. 
When I let my function (+gradient) evaluation print out the
function value, I see that L-BFGS-B keeps calling the function with 
arguments giving the same function value (up to at least the accuracy 
required by factr, i.e. 1E-8). So, I don't really understand 
why it doesn't stop. 
Is this a well-known problem?

The main problem is that the optimization doesn't stop (at least not
in reasonable time) and so the whole simulation gets stuck. Is there a way 
to control the time used by "L-BFGS-B" better than with setting maxiter? 
(For example setting an upper limit to the number of function and gradient 
calls would be nice...)

Sorry, I can't give a reproducable example. The code that produces the
problem is not very handy to attach to the mail (it calls C code...).

Thanks a lot in advance
Marcel Wolbers
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Fri Jul 28 17:51:24 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Fri, 28 Jul 2000 11:51:24 -0400
Subject: [R] gremlin in rep()
References: <398198B0.46CFF418@compserv.gla.ac.uk>
Message-ID: <014901bff8ab$af90c620$0201a8c0@Workgroup>

I tried it on NT 4 SP 6 R-1.1.0 and it crashes too.

If you try rep(1:3, c(1,3)) you'll get:

Error in rep(1:3, c(1, 3)) : invalid number of copies in "rep"

It look's like R doesn't like the negative number in your case. It would be
nice if it would give the same error message in both case.

YG

----- Original Message -----
From: "Colin Farrow" <c.farrow at compserv.gla.ac.uk>
To: "r-help" <r-help at stat.math.ethz.ch>
Sent: Friday, July 28, 2000 10:29 AM
Subject: [R] gremlin in rep()


> the following occurred inadvertently and brought R-1.1.0 down
>
> rep(1:3, c(4,2,-6))
> Segmentation Fault (core dumped)
>
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    1.0
> year     2000
> month    June
> day      15
> language R
> also on Solaris2.7
>
> --
> Colin Farrow
> Computing Service, University of Glasgow, Glasgow G12 8QQ
> Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-help mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Fri Jul 28 18:07:52 2000
From: ripley at stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 28 Jul 2000 17:07:52 +0100 (BST)
Subject: [R] optim gets stuck
In-Reply-To: <14721.43596.553196.968224@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10007281704530.664-100000@auk.stats>

On Fri, 28 Jul 2000, Marcel Wolbers wrote:

> Dear all
> 
> I'm having some trouble with a bound-constrained optimization using
> optim(...,method="L-BFGS-B"). 
> Usually, everything works fine, but for some simulations, the algorithm just 
> gets stuck. 
> When I let my function (+gradient) evaluation print out the
> function value, I see that L-BFGS-B keeps calling the function with 
> arguments giving the same function value (up to at least the accuracy 
> required by factr, i.e. 1E-8). So, I don't really understand 
> why it doesn't stop. 
> Is this a well-known problem?

No. It is pretty well-tested PD code for the problem.  Have you scaled 
sensibly?  If you are not supplying derivatives, either do so or
lower the tolerances.

> The main problem is that the optimization doesn't stop (at least not
> in reasonable time) and so the whole simulation gets stuck. Is there a way 
> to control the time used by "L-BFGS-B" better than with setting maxiter? 
> (For example setting an upper limit to the number of function and gradient 
> calls would be nice...)

Yes, it would be nice.  The authors did not provide it though, so if you
have the patience a patch would be gratefully received.

> Sorry, I can't give a reproducable example. The code that produces the
> problem is not very handy to attach to the mail (it calls C code...).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From andy_liaw at merck.com  Fri Jul 28 19:13:22 2000
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri, 28 Jul 2000 13:13:22 -0400
Subject: [R] gremlin in rep()
Message-ID: <51F9C42DA15CD311BD220008C707D81901D0D4B4@usrymx10.merck.com>

This is what I got in Splus 2000:

> rep(1:3,c(4,5,-6))
Error in rep.int: Negative values in "times" meaningless: rep.int(x, times)

Seems like rep() is R is lacking some error traps.

Andy

> ----------
> From: 	Yves Gauvreau[SMTP:cyg at sympatico.ca]
> Sent: 	Friday, July 28, 2000 11:51 AM
> To: 	r-help
> Subject: 	Re: [R] gremlin in rep()
> 
> I tried it on NT 4 SP 6 R-1.1.0 and it crashes too.
> 
> If you try rep(1:3, c(1,3)) you'll get:
> 
> Error in rep(1:3, c(1, 3)) : invalid number of copies in "rep"
> 
> It look's like R doesn't like the negative number in your case. It would
> be
> nice if it would give the same error message in both case.
> 
> YG
> 
> ----- Original Message -----
> From: "Colin Farrow" <c.farrow at compserv.gla.ac.uk>
> To: "r-help" <r-help at stat.math.ethz.ch>
> Sent: Friday, July 28, 2000 10:29 AM
> Subject: [R] gremlin in rep()
> 
> 
> > the following occurred inadvertently and brought R-1.1.0 down
> >
> > rep(1:3, c(4,2,-6))
> > Segmentation Fault (core dumped)
> >
> > platform i686-pc-linux-gnu
> > arch     i686
> > os       linux-gnu
> > system   i686, linux-gnu
> > status
> > major    1
> > minor    1.0
> > year     2000
> > month    June
> > day      15
> > language R
> > also on Solaris2.7
> >
> > --
> > Colin Farrow
> > Computing Service, University of Glasgow, Glasgow G12 8QQ
> > Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
> >
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-
> > r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> >
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _.
> _._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-
> r-help mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Fri Jul 28 20:21:21 2000
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Fri, 28 Jul 2000 20:21:21 +0200 (CEST)
Subject: [R] Loop removal?
Message-ID: <Pine.LNX.4.21.0007282007580.9096-100000@swipc30.swi.psy.uva.nl>

Dear all,

I've got a quite large dataframe (stor) with rows subject and rt (reaction
time). I would like to split the reaction times per subject into 6 bins of
equal size. Right now, I'm using the following code:

bindata <- function(rt) {

  bindata <- rep(-1,length(rt))
  binwidth <- length(rt)/6

  bindata[order(rt)[(0*binwidth)+1:(1*binwidth)]] <- 1
  bindata[order(rt)[(1*binwidth)+1:(2*binwidth)]] <- 2
  bindata[order(rt)[(2*binwidth)+1:(3*binwidth)]] <- 3
  bindata[order(rt)[(3*binwidth)+1:(4*binwidth)]] <- 4
  bindata[order(rt)[(4*binwidth)+1:(5*binwidth)]] <- 5
  bindata[order(rt)[(5*binwidth)+1:(6*binwidth)]] <- 6

  bindata
}

for (i in unique(stor$subject)) {
  stor[stor$subject == i,]$bin <- bindata(stor[stor$subject == i,]$rt)
}

Although this code works fine, it does not "feel" very R'ish. Is there a
more elegant solution for this, especially one that removes the for-loop?

Thanks,
  Hedderik.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From kjetilh at umsanet.edu.bo  Fri Jul 28 20:38:04 2000
From: kjetilh at umsanet.edu.bo (kjetil halvorsen)
Date: Fri, 28 Jul 2000 14:38:04 -0400
Subject: [R] Loop removal?
References: <Pine.LNX.4.21.0007282007580.9096-100000@swipc30.swi.psy.uva.nl>
Message-ID: <3981D30C.4D31667@umsanet.edu.bo>

Look at the help for the cut() function, which does what you want, 
I think.

Kjetil Halvorsen

rijn at swi.psy.uva.nl wrote:
> 
> Dear all,
> 
> I've got a quite large dataframe (stor) with rows subject and rt (reaction
> time). I would like to split the reaction times per subject into 6 bins of
> equal size. Right now, I'm using the following code:
> 
> bindata <- function(rt) {
> 
>   bindata <- rep(-1,length(rt))
>   binwidth <- length(rt)/6
> 
>   bindata[order(rt)[(0*binwidth)+1:(1*binwidth)]] <- 1
>   bindata[order(rt)[(1*binwidth)+1:(2*binwidth)]] <- 2
>   bindata[order(rt)[(2*binwidth)+1:(3*binwidth)]] <- 3
>   bindata[order(rt)[(3*binwidth)+1:(4*binwidth)]] <- 4
>   bindata[order(rt)[(4*binwidth)+1:(5*binwidth)]] <- 5
>   bindata[order(rt)[(5*binwidth)+1:(6*binwidth)]] <- 6
> 
>   bindata
> }
> 
> for (i in unique(stor$subject)) {
>   stor[stor$subject == i,]$bin <- bindata(stor[stor$subject == i,]$rt)
> }
> 
> Although this code works fine, it does not "feel" very R'ish. Is there a
> more elegant solution for this, especially one that removes the for-loop?
> 
> Thanks,
>   Hedderik.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richards at pci.upmc.edu  Fri Jul 28 21:40:14 2000
From: richards at pci.upmc.edu (Richards, Tom)
Date: Fri, 28 Jul 2000 15:40:14 -0400
Subject: [R] gremlin in rep()
Message-ID: <5B9B19C8A522D411A8EC00A0C99D6A9A02E578@mail.nsabp.pitt.edu>



> -----Original Message-----
> From: Liaw, Andy [mailto:andy_liaw at merck.com]
> Sent: Friday, July 28, 2000 1:13 PM
> To: r-help; 'Yves Gauvreau'
> Subject: RE: [R] gremlin in rep()
> 
> 
> This is what I got in Splus 2000:
> 
> > rep(1:3,c(4,5,-6))
> Error in rep.int: Negative values in "times" meaningless: 
> rep.int(x, times)
> 
> Seems like rep() is R is lacking some error traps.
> 
> Andy

That's interesting, because, under Splus 2000 (R 1.1.0), I get:

> rep(1:3,c(4,5,-6))
[1] 1 1 1

> 
> > ----------
> > From: 	Yves Gauvreau[SMTP:cyg at sympatico.ca]
> > Sent: 	Friday, July 28, 2000 11:51 AM
> > To: 	r-help
> > Subject: 	Re: [R] gremlin in rep()
> > 
> > I tried it on NT 4 SP 6 R-1.1.0 and it crashes too.
> > 
> > If you try rep(1:3, c(1,3)) you'll get:
> > 
> > Error in rep(1:3, c(1, 3)) : invalid number of copies in "rep"
> > 
> > It look's like R doesn't like the negative number in your 
> case. It would
> > be
> > nice if it would give the same error message in both case.
> > 
> > YG
> > 
> > ----- Original Message -----
> > From: "Colin Farrow" <c.farrow at compserv.gla.ac.uk>
> > To: "r-help" <r-help at stat.math.ethz.ch>
> > Sent: Friday, July 28, 2000 10:29 AM
> > Subject: [R] gremlin in rep()
> > 
> > 
> > > the following occurred inadvertently and brought R-1.1.0 down
> > >
> > > rep(1:3, c(4,2,-6))
> > > Segmentation Fault (core dumped)
> > >
> > > platform i686-pc-linux-gnu
> > > arch     i686
> > > os       linux-gnu
> > > system   i686, linux-gnu
> > > status
> > > major    1
> > > minor    1.0
> > > year     2000
> > > month    June
> > > day      15
> > > language R
> > > also on Solaris2.7
> > >
> > > --
> > > Colin Farrow
> > > Computing Service, University of Glasgow, Glasgow G12 8QQ
> > > Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
> > >
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.
> > -.-.-
> > > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> > >
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._.
> > _.
> > _._
> > >
> > 
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.
> > -.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> > 
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._.
> > _._._
> > 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Fri Jul 28 22:02:48 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Fri, 28 Jul 2000 16:02:48 -0400
Subject: [R] gremlin in rep()
References: <5B9B19C8A522D411A8EC00A0C99D6A9A02E578@mail.nsabp.pitt.edu>
Message-ID: <016401bff8ce$cdd282e0$0201a8c0@Workgroup>


----- Original Message -----
From: "Richards, Tom" <richards at pci.upmc.edu>
To: "'Liaw, Andy'" <andy_liaw at merck.com>; "r-help"
<r-help at stat.math.ethz.ch>; "'Yves Gauvreau'" <cyg at sympatico.ca>
Sent: Friday, July 28, 2000 3:40 PM
Subject: RE: [R] gremlin in rep()


>
>
> > -----Original Message-----
> > From: Liaw, Andy [mailto:andy_liaw at merck.com]
> > Sent: Friday, July 28, 2000 1:13 PM
> > To: r-help; 'Yves Gauvreau'
> > Subject: RE: [R] gremlin in rep()
> >
> >
> > This is what I got in Splus 2000:
> >
> > > rep(1:3,c(4,5,-6))
> > Error in rep.int: Negative values in "times" meaningless:
> > rep.int(x, times)
> >
> > Seems like rep() is R is lacking some error traps.
> >
> > Andy
>
> That's interesting, because, under Splus 2000 (R 1.1.0), I get:
                                                      ^^^^^^^^^^^^
Did you mean Windows 2000?

YG

>
> > rep(1:3,c(4,5,-6))
> [1] 1 1 1
>
> >
> > > ----------
> > > From: Yves Gauvreau[SMTP:cyg at sympatico.ca]
> > > Sent: Friday, July 28, 2000 11:51 AM
> > > To: r-help
> > > Subject: Re: [R] gremlin in rep()
> > >
> > > I tried it on NT 4 SP 6 R-1.1.0 and it crashes too.
> > >
> > > If you try rep(1:3, c(1,3)) you'll get:
> > >
> > > Error in rep(1:3, c(1, 3)) : invalid number of copies in "rep"
> > >
> > > It look's like R doesn't like the negative number in your
> > case. It would
> > > be
> > > nice if it would give the same error message in both case.
> > >
> > > YG
> > >
> > > ----- Original Message -----
> > > From: "Colin Farrow" <c.farrow at compserv.gla.ac.uk>
> > > To: "r-help" <r-help at stat.math.ethz.ch>
> > > Sent: Friday, July 28, 2000 10:29 AM
> > > Subject: [R] gremlin in rep()
> > >
> > >
> > > > the following occurred inadvertently and brought R-1.1.0 down
> > > >
> > > > rep(1:3, c(4,2,-6))
> > > > Segmentation Fault (core dumped)
> > > >
> > > > platform i686-pc-linux-gnu
> > > > arch     i686
> > > > os       linux-gnu
> > > > system   i686, linux-gnu
> > > > status
> > > > major    1
> > > > minor    1.0
> > > > year     2000
> > > > month    June
> > > > day      15
> > > > language R
> > > > also on Solaris2.7
> > > >
> > > > --
> > > > Colin Farrow
> > > > Computing Service, University of Glasgow, Glasgow G12 8QQ
> > > > Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
> > > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.
> > > -.-.-
> > > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To:
> > r-help-request at stat.math.ethz.ch
> > > >
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._.
> > > _.
> > > _._
> > > >
> > >
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.
> > > -.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > r-help-request at stat.math.ethz.ch
> > >
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._.
> > > _._._
> > >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > -.-.-.-.-.-.-.-.-
> > r-help mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-help-request at stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > _._._._._._._._._
> >
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From richards at pci.upmc.edu  Fri Jul 28 23:06:13 2000
From: richards at pci.upmc.edu (Richards, Tom)
Date: Fri, 28 Jul 2000 17:06:13 -0400
Subject: [R] gremlin in rep()
Message-ID: <5B9B19C8A522D411A8EC00A0C99D6A9A02E57A@mail.nsabp.pitt.edu>

NO, sorry, I am using NT 4.0.  I guess I was confused by someone else's
writing Splus 2000.
Under NT 4.0, R 1.1.0, the following crashes R:

> rep(1:3, c(4,2,-6))

but I still do get this:

> rep(1:3,c(4,5,-6))
[1] 1 1 1

and the following:

>  rep(1:3,c(2,5,-6))
[1] 1

My apologies to the list.


> -----Original Message-----
> From: Yves Gauvreau [mailto:cyg at sympatico.ca]
> Sent: Friday, July 28, 2000 4:03 PM
> To: r-help
> Subject: Re: [R] gremlin in rep()
> 
> 
> 
> ----- Original Message -----
> From: "Richards, Tom" <richards at pci.upmc.edu>
> To: "'Liaw, Andy'" <andy_liaw at merck.com>; "r-help"
> <r-help at stat.math.ethz.ch>; "'Yves Gauvreau'" <cyg at sympatico.ca>
> Sent: Friday, July 28, 2000 3:40 PM
> Subject: RE: [R] gremlin in rep()
> 
> 
> >
> >
> > > -----Original Message-----
> > > From: Liaw, Andy [mailto:andy_liaw at merck.com]
> > > Sent: Friday, July 28, 2000 1:13 PM
> > > To: r-help; 'Yves Gauvreau'
> > > Subject: RE: [R] gremlin in rep()
> > >
> > >
> > > This is what I got in Splus 2000:
> > >
> > > > rep(1:3,c(4,5,-6))
> > > Error in rep.int: Negative values in "times" meaningless:
> > > rep.int(x, times)
> > >
> > > Seems like rep() is R is lacking some error traps.
> > >
> > > Andy
> >
> > That's interesting, because, under Splus 2000 (R 1.1.0), I get:
>                                                       ^^^^^^^^^^^^
> Did you mean Windows 2000?
> 
> YG
> 
> >
> > > rep(1:3,c(4,5,-6))
> > [1] 1 1 1
> >
> > >
> > > > ----------
> > > > From: Yves Gauvreau[SMTP:cyg at sympatico.ca]
> > > > Sent: Friday, July 28, 2000 11:51 AM
> > > > To: r-help
> > > > Subject: Re: [R] gremlin in rep()
> > > >
> > > > I tried it on NT 4 SP 6 R-1.1.0 and it crashes too.
> > > >
> > > > If you try rep(1:3, c(1,3)) you'll get:
> > > >
> > > > Error in rep(1:3, c(1, 3)) : invalid number of copies in "rep"
> > > >
> > > > It look's like R doesn't like the negative number in your
> > > case. It would
> > > > be
> > > > nice if it would give the same error message in both case.
> > > >
> > > > YG
> > > >
> > > > ----- Original Message -----
> > > > From: "Colin Farrow" <c.farrow at compserv.gla.ac.uk>
> > > > To: "r-help" <r-help at stat.math.ethz.ch>
> > > > Sent: Friday, July 28, 2000 10:29 AM
> > > > Subject: [R] gremlin in rep()
> > > >
> > > >
> > > > > the following occurred inadvertently and brought R-1.1.0 down
> > > > >
> > > > > rep(1:3, c(4,2,-6))
> > > > > Segmentation Fault (core dumped)
> > > > >
> > > > > platform i686-pc-linux-gnu
> > > > > arch     i686
> > > > > os       linux-gnu
> > > > > system   i686, linux-gnu
> > > > > status
> > > > > major    1
> > > > > minor    1.0
> > > > > year     2000
> > > > > month    June
> > > > > day      15
> > > > > language R
> > > > > also on Solaris2.7
> > > > >
> > > > > --
> > > > > Colin Farrow
> > > > > Computing Service, University of Glasgow, Glasgow G12 8QQ
> > > > > Tel: 0141 330 4862, c.farrow at compserv.gla.ac.uk
> > > > >
> > > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.
> > > > -.-.-
> > > > > r-help mailing list -- Read
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > > Send "info", "help", or "[un]subscribe"
> > > > > (in the "body", not the subject !)  To:
> > > r-help-request at stat.math.ethz.ch
> > > > >
> > > >
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._.
> > > > _.
> > > > _._
> > > > >
> > > >
> > > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.
> > > > -.-.-
> > > > r-help mailing list -- Read
> > > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To:
> > > r-help-request at stat.math.ethz.ch
> > > >
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._.
> > > > _._._
> > > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> > > -.-.-.-.-.-.-.-.-
> > > r-help mailing list -- Read
> > > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
> > > r-help-request at stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> > > _._._._._._._._._
> > >
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-.-.-.-.-.-
> r-help mailing list -- Read 
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: 
> r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._._._._._._
> 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Sun Jul 30 01:01:30 2000
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Sun, 30 Jul 2000 01:01:30 +0200 (CEST)
Subject: [R] Loop removal?
In-Reply-To: <3981D30C.4D31667@umsanet.edu.bo>
Message-ID: <Pine.LNX.4.21.0007292350300.14224-100000@swipc30.swi.psy.uva.nl>

Hi,

> Look at the help for the cut() function, which does what you want, 
> I think.

Thanks for the suggestion. I'm sure I can put it to good use in another
part of the analysis, but it does not exactly what I want for this problem
(as far as I understand). Given the following example:

x <- c(1,1,2,3,4,4,3,2,1,1)

And assuming I want to divide x into to equally long sets to which the
values get assigned in increasing order, cut doesn't do the job:

> cut(x,c(1,2,4),labels=F,include.lowest=T)
 [1] 1 1 1 2 2 2 2 1 1 1
> table(cut(x,c(1,2,4),labels=F,include.lowest=T))

1 2 
6 4 
> 

Whereas I'm looking for an output that results in:

> table(...(x,...))

1 2
5 5
>

So, the assignment of factors is not only based on the size of the numbers
in the vector, but also on the lengths of the resulting vectors.

And, it still leaves this "loop"-problem:

> > for (i in unique(stor$subject)) {
> >   stor[stor$subject == i,]$bin <- bindata(stor[stor$subject == i,]$rt)
> > }

I assume I should use a function like tapply, but:

> bindata2 <- function(rt) {
+   
+   bindata <- rep(-1,length(rt))
+   binwidth <- length(rt)/2
+   
+   bindata[order(rt)[(0*binwidth)+1:(1*binwidth)]] <- 1
+   bindata[order(rt)[(1*binwidth)+1:(2*binwidth)]] <- 2
+ 
+   bindata
+ }
> x <- data.frame(subject=c(1,1,1,2,2,2),rt=c(1,2,3,3,2,4))
> tapply(x$rt,x$subject,bindata2)
$"1"
[1] 1 2 2

$"2"
[1] 2 1 2

the problem is that I don't know how to combine/concatenate the output of
tapply into one vector again. So, it's probably all caused by a very
simple "lack of knowledge about R" on my side...

Right now, I use tapply, but use a for-loop again to concatenate the list
into a single vector again. But it feels like there should be a better
solution. I someone can hint me towards one, I would be very pleased.

   Hedderik.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.malewski at tu-bs.de  Sun Jul 30 12:39:22 2000
From: p.malewski at tu-bs.de (Peter Malewski)
Date: Sun, 30 Jul 2000 12:39:22 +0200 (CEST)
Subject: [R] Loop removal?
In-Reply-To: <Pine.LNX.4.21.0007292350300.14224-100000@swipc30.swi.psy.uva.nl>
Message-ID: <Pine.LNX.4.21.0007301229490.778-100000@Uranus.Levi>

I don't know if I understand you right, but..


> xx <- function(x,g=2)rep(1:g,rep(length(x) / g  , g ) )
> zz <- data.frame (data=rnorm(100), id=rep(1:10,10))
> cbind(zz,nn=unlist( tapply(zz$data,zz$id,function(x)xx(x[order(x)] ,
g=2) )))[1:13,]
          data id nn
1  -1.06975967  1  1
2   1.30402032  2  1
3  -0.08553785  3  1
4   0.11884050  4  1
5  -0.10690368  5  1
6   1.13232754  6  2
7   1.97065424  7  2
8  -0.19009641  8  2
9  -0.72320338  9  2
10 -0.53456589 10  2
11 -0.01734236  1  1
12  0.04074360  2  1
13  2.28373113  3  1
> 
 

BUT NOTE, that this only works if 

length(x) %% g == 0

...
Peter

On Sun, 30 Jul 2000 rijn at swi.psy.uva.nl wrote:

> Hi,
> 
> > Look at the help for the cut() function, which does what you want, 
> > I think.
> 
> Thanks for the suggestion. I'm sure I can put it to good use in another
> part of the analysis, but it does not exactly what I want for this problem
> (as far as I understand). Given the following example:
> 
> x <- c(1,1,2,3,4,4,3,2,1,1)
> 
> And assuming I want to divide x into to equally long sets to which the
> values get assigned in increasing order, cut doesn't do the job:
> 
> > cut(x,c(1,2,4),labels=F,include.lowest=T)
>  [1] 1 1 1 2 2 2 2 1 1 1
> > table(cut(x,c(1,2,4),labels=F,include.lowest=T))
> 
> 1 2 
> 6 4 
> > 
> 
> Whereas I'm looking for an output that results in:
> 
> > table(...(x,...))
> 
> 1 2
> 5 5
> >
> 
> So, the assignment of factors is not only based on the size of the numbers
> in the vector, but also on the lengths of the resulting vectors.
> 
> And, it still leaves this "loop"-problem:
> 
> > > for (i in unique(stor$subject)) {
> > >   stor[stor$subject == i,]$bin <- bindata(stor[stor$subject == i,]$rt)
> > > }
> 
> I assume I should use a function like tapply, but:
> 
> > bindata2 <- function(rt) {
> +   
> +   bindata <- rep(-1,length(rt))
> +   binwidth <- length(rt)/2
> +   
> +   bindata[order(rt)[(0*binwidth)+1:(1*binwidth)]] <- 1
> +   bindata[order(rt)[(1*binwidth)+1:(2*binwidth)]] <- 2
> + 
> +   bindata
> + }
> > x <- data.frame(subject=c(1,1,1,2,2,2),rt=c(1,2,3,3,2,4))
> > tapply(x$rt,x$subject,bindata2)
> $"1"
> [1] 1 2 2
> 
> $"2"
> [1] 2 1 2
> 
> the problem is that I don't know how to combine/concatenate the output of
> tapply into one vector again. So, it's probably all caused by a very
> simple "lack of knowledge about R" on my side...
> 
> Right now, I use tapply, but use a for-loop again to concatenate the list
> into a single vector again. But it feels like there should be a better
> solution. I someone can hint me towards one, I would be very pleased.
> 
>    Hedderik.
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

**************************************************************************
P.Malewski				Tel.: 0531 500965
Maschplatz 8				mailto: Peter.Malewski at gmx.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From p.malewski at tu-bs.de  Sun Jul 30 19:06:49 2000
From: p.malewski at tu-bs.de (Peter Malewski)
Date: Sun, 30 Jul 2000 19:06:49 +0200 (CEST)
Subject: [R] Loop removal?
In-Reply-To: <Pine.LNX.4.21.0007301229490.778-100000@Uranus.Levi>
Message-ID: <Pine.LNX.4.21.0007301904450.22277-100000@Uranus.Levi>

On Sun, 30 Jul 2000, Peter Malewski wrote:

> BUT NOTE, that this only works if 
> 
> length(x) %% g == 0

btw you can avoid this with 

xx <- function(x,g=2)rep(
                   rep(1:g,rep(length(x) / g  , g ) )
                   ,length.out=length(x)
                   )
(without warnings)
xx <- function(x,g=2)cbind(
                   rep(1:g,rep(length(x) / g  , g ) ) ,x )[,1]

(with warnings)



**************************************************************************
P.Malewski				Tel.: 0531 500965
Maschplatz 8				mailto: Peter.Malewski at gmx.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From a.lacey at man.ac.uk  Mon Jul 31 13:42:45 2000
From: a.lacey at man.ac.uk (Anthony Lacey)
Date: Mon, 31 Jul 2000 12:42:45 +0100
Subject: [R] NLME 3 (R version) again!
Message-ID: <20000731124244.B7770@tom.wiau.man.ac.uk>

Hi,

Well after trying to fix the assign commands in version 3.1.7 of your nlme package
I still cannot get the plot functions to work.  Basically I have no other packages installed (apart from those provided with R) so nlme is the first.

my R version info is;

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    1.0                 
year     2000                
month    June                
day      15                  
language R   

I have downloaded nlme version 3_1.7 from the CRAN site.

I have been trying the example code from the plot.gls command. However, the plotcommand fails because the assigns use where instead of envir.  So I changed these and still recieved and error telling me that envir was being misused. From what I could see the envir were being used in default mode so I simply removed them.  Now when I run the code I get the following;

library(nlme)
Loading required package: nls 
> data(Ovary)
> fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
+            correlation = corAR1(form = ~ 1 | Mare))
> plot(fm1, resid(., type = "p") ~ fitted(.) | Mare, abline = 0)
[[1]]
coplot

$show.given
[1] FALSE


(and a very blank graph screen).

Also if I run the following (plot.variogram example) I get the following;

> data(Ovary)
> 
> fm1 <- lme(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary)
> plot(Variogram(fm1, form = ~ Time | Mare, maxDist = 0.7))
Error in FUN(X[[1]], ...) : couldn't find function "dist"

Has anybody got this code to work.  I suspect looking at the code and the calls to bwplot and xyplot (all of which are S-plus) that not all this code has been converted.  I am new to R and thus am I being niave to expect all the code (particularly the plotting routines) to work with R?

Many thanks for any help.

-- 
Dr. Tony Lacey (PhD) - Imaging Science & Bio-medical Engineering, University 
of Manchester, Stopford Building, Oxford Rd., Manchester. UK. M13 9PT 
[+44 (0)161 275 7669]  a.lacey at man.ac.uk  http://www.niac.man.ac.uk/~ajl/
              `Linux. The choice of a GNU generation.'
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From Ko-Kang at xtra.co.nz  Mon Jul 31 13:56:34 2000
From: Ko-Kang at xtra.co.nz (Ko-Kang Wang)
Date: Mon, 31 Jul 2000 23:56:34 +1200
Subject: [R] Loop Delaying
Message-ID: <39856971.AFE7C34F@xtra.co.nz>

Hi there,

I know this question may sounds strange, but here it goes:

Is it possible to delay the speed of a for loop?  For example, if I
have:

for (i in 1:100) {
    blah blah blah
}

within the for loop I want to draw a series of plots, and combining the
plots together I'll have an animation.  Problem is the loop is too fast
and I only see the end result (which is not surprising actually).

What I want is to slow down the loop (if possible), and so I have time
to save each "part" of the loop (or each plot when it is produced) as a
gif file, and later on put these gif files together using some kind of
GIF Animators.

Anyway, just wonder if the for loop can be slowed down forcebly.

Cheers,

Ko-Kang (Kevin) Wang

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Ko-Kang.vcf
Type: text/x-vcard
Size: 306 bytes
Desc: Card for Ko-Kang Wang
Url : https://stat.ethz.ch/pipermail/r-help/attachments/20000731/d73ba8d7/Ko-Kang.vcf

From p.dalgaard at biostat.ku.dk  Mon Jul 31 14:23:21 2000
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Jul 2000 14:23:21 +0200
Subject: [R] NLME 3 (R version) again!
In-Reply-To: Anthony Lacey's message of "Mon, 31 Jul 2000 12:42:45 +0100"
References: <20000731124244.B7770@tom.wiau.man.ac.uk>
Message-ID: <x2em4aqyiu.fsf@blueberry.kubism.ku.dk>

Anthony Lacey <a.lacey at man.ac.uk> writes:

> Well after trying to fix the assign commands in version 3.1.7 of
> your nlme package I still cannot get the plot functions to work.
> Basically I have no other packages installed (apart from those
> provided with R) so nlme is the first.

Many of the plot functions in nlme require the Trellis displays which
are only in SPlus. There are some plans to develop a similar package
("lattice") for R, but they are not advancing very quickly. Re. the
dist function, the one in the mva library seems usable in some
circumstances, but even with that the variograms (just calculating
them) didn't seem to work for me.

If you have ideas for how to make useful plotting commands for nlme in
R, I'm sure the nlme developers would like to know about them. It's
likely to be a rather large undertaking, though, and the nlme
developers are for the same reason well excused for skipping these
issues in the R version.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jul 31 14:22:37 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 31 Jul 2000 13:22:37 +0100 (BST)
Subject: [R] NLME 3 (R version) again!
Message-ID: <200007311222.NAA20673@toucan.stats.ox.ac.uk>

> Date: Mon, 31 Jul 2000 12:42:45 +0100
> From: Anthony Lacey <a.lacey at man.ac.uk>
> To: jcp at research.bell-labs.com, r-help at stat.math.ethz.ch

(Jose' Pinheiro is not the primary maintainer of nlme for R: should
the DESCRIPTION file be clarified to send comment to Doug Bates?)

> Well after trying to fix the assign commands in version 3.1.7 of your nlme 
package
> I still cannot get the plot functions to work.  Basically I have no other 
packages installed (apart from those provided with R) so nlme is the first.
> 
> my R version info is;
> 
> platform sparc-sun-solaris2.7
> arch     sparc               
> os       solaris2.7          
> system   sparc, solaris2.7   
> status                       
> major    1                   
> minor    1.0                 
> year     2000                
> month    June                
> day      15                  
> language R   
> 
> I have downloaded nlme version 3_1.7 from the CRAN site.
> 
> I have been trying the example code from the plot.gls command. However, the 
plotcommand fails because the assigns use where instead of envir.  So I changed 
these and still recieved and error telling me that envir was being misused. From 
what I could see the envir were being used in default mode so I simply removed 
them.  Now when I run the code I get the following;
> 
> library(nlme)
> Loading required package: nls 
> > data(Ovary)
> > fm1 <- gls(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary,
> +            correlation = corAR1(form = ~ 1 | Mare))
> > plot(fm1, resid(., type = "p") ~ fitted(.) | Mare, abline = 0)
> [[1]]
> coplot
> 
> $show.given
> [1] FALSE
> 
> 
> (and a very blank graph screen).

example(plot.gls) does no plotting, which is a fair indication that this
is not supposed to work.

> Also if I run the following (plot.variogram example) I get the following;

Did you mean plot.Variogram?

> > data(Ovary)
> > 
> > fm1 <- lme(follicles ~ sin(2*pi*Time) + cos(2*pi*Time), Ovary)
> > plot(Variogram(fm1, form = ~ Time | Mare, maxDist = 0.7))
> Error in FUN(X[[1]], ...) : couldn't find function "dist"

dist is in library(mva), and again the code is omitted in 
example(plot.Variogram),

> Has anybody got this code to work.  I suspect looking at the code and the 
calls to bwplot and xyplot (all of which are S-plus) that not all this code has 
been converted.  I am new to R and thus am I being niave to expect all the code 
(particularly the plotting routines) to work with R?

Yes. I thought it said so in the package, but can't see it at a quick glance.
Should nlme have a STATUS or PORTING file as some other R packages do?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ripley at stats.ox.ac.uk  Mon Jul 31 14:26:20 2000
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 31 Jul 2000 13:26:20 +0100 (BST)
Subject: [R] Loop Delaying
Message-ID: <200007311226.NAA20677@toucan.stats.ox.ac.uk>


> Date: Mon, 31 Jul 2000 23:56:34 +1200
> From: Ko-Kang Wang <Ko-Kang at xtra.co.nz>
> X-Accept-Language: en,zh-TW,zh-CN,zh,en-GB,en-US
> To: R Help <r-help at stat.math.ethz.ch>
> Subject: [R] Loop Delaying
> 
> Hi there,
> 
> I know this question may sounds strange, but here it goes:
> 
> Is it possible to delay the speed of a for loop?  For example, if I
> have:
> 
> for (i in 1:100) {
>     blah blah blah
> }
> 
> within the for loop I want to draw a series of plots, and combining the
> plots together I'll have an animation.  Problem is the loop is too fast
> and I only see the end result (which is not surprising actually).
> 
> What I want is to slow down the loop (if possible), and so I have time
> to save each "part" of the loop (or each plot when it is produced) as a
> gif file, and later on put these gif files together using some kind of
> GIF Animators.

You can save the plot from R code within the loop, e.g. by savePlot on
Windows. I suspect that is what you really want.

I suggest you don't mention GIF in connection with a GNU project, as 
some people are very against them.

> Anyway, just wonder if the for loop can be slowed down forcebly.

Not easily yet, but 1.2.0 will have a Sys.sleep function to do so.
On Windows you can `borrow' this by using library(xgobi) and looking
at the .C call at the end of the xgobi function.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Mon Jul 31 15:52:37 2000
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Mon, 31 Jul 2000 15:52:37 +0200 (CEST)
Subject: [R] Loop removal?
In-Reply-To: <Pine.LNX.4.21.0007301904450.22277-100000@Uranus.Levi>
Message-ID: <Pine.LNX.4.21.0007311343310.21144-100000@swipc30.swi.psy.uva.nl>

Hi,

thanks to all who responded to my question. The various responses teached
me, again, a lot about R and the different philosophy of R compared to
programming languages. Especially the reply of Peter Malewski using the
tapply/unlist/rep functions was very insightful, and helped me to solve my
problems.

To explain why I needed this all: in a lexical decision (psychonomy)
experiment, the subjects had to respond at several predefined lags.
However, the response times show quite some variation, so besides an
analysis based on the 6 predefined lags, we also wanted to do an analysis
based on 6 groups each containing 1/6th of the fastest, slowest, etc RTs
per subject.

So, in the orginial dataframe, we had the columns subject, lag and rt, and
the code I posted in my last message was meant to add the column binlag.

subject  lag   rt     binlag
1        1     350    1
1        1     450    2
1        2     425    1 
1        2     475    2
2        1     425    1    
2        1     450    1
2        2     490    2
2        2     480    2
.
.

Sorry if I was unclear in my previous postings. Again, thanks for all the
help!
  
  Hedderik.

P.S. The code I use now, is:

  bin.index <- function(data,bins=2) {
    # Code from Peter Malewski, added the sort command.
    sort(rep(rep(1:bins,rep(length(data)/bins,bins)),length.out=length(data)))
  }
  
  cat("Binning...")
  stor <- stor[order(stor$subject,stor$rt),]
  stor$binlag <- unlist(tapply(stor$rt,stor$subject,bin.index,bins=6))
  print("done")

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From y0004379 at tu-bs.de  Mon Jul 31 15:04:00 2000
From: y0004379 at tu-bs.de (Peter Malewski)
Date: Mon, 31 Jul 2000 15:04:00 +0200 (METDST)
Subject: [R] Loop Delaying
In-Reply-To: <39856971.AFE7C34F@xtra.co.nz>
Message-ID: <Pine.HPX.4.21.0007311455400.20950-100000@rzpool07.rz.tu-bs.de>

On Mon, 31 Jul 2000, Ko-Kang Wang wrote:

> Hi there,
> 
> I know this question may sounds strange, but here it goes:
> 
> Is it possible to delay the speed of a for loop?  For example, if I
> have:
> 
> for (i in 1:100) {
>     blah blah blah
> }

Several days before was a similar question, I don't know the answers but i
would guess that slowing might be one possibility (done by a additional
inside loop that does nothing)
for( i in ...){
   ....
   for(j in 1:100000)rnorm(100)
   ...
}
but.: 

> within the for loop I want to draw a series of plots, and combining the
> plots together I'll have an animation.  Problem is the loop is too fast
> and I only see the end result (which is not surprising actually).

a better way might be -perhaps- to set
par(ask=T)

> What I want is to slow down the loop (if possible), and so I have time
> to save each "part" of the loop (or each plot when it is produced) as a
> gif file, and later on put these gif files together using some kind of
> GIF Animators.

...or you automatically save the plots 

dev.print(postscript,file=paste("foo",i,sep="") )

...look on them later...

or you use the possibilty to make several pages

> postscript(file="/tmp/temp.ps")
> plot(0,0)
> plot(0,0)
> plot(0,0)
> dev.off()
          1 


P.

** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From ben at zoo.ufl.edu  Mon Jul 31 15:08:49 2000
From: ben at zoo.ufl.edu (ben@zoo.ufl.edu)
Date: Mon, 31 Jul 2000 09:08:49 -0400 (EDT)
Subject: [R] Loop Delaying
In-Reply-To: <39856971.AFE7C34F@xtra.co.nz>
Message-ID: <Pine.LNX.4.10.10007310859170.13029-100000@bolker.zoo.ufl.edu>


  A few possibilities:

  1. if you're on a Unix system you can say something like 
system("sleep 5") to delay for 5 seconds.

  2. you can set par(ask=TRUE) to have R pause and ask you to hit ENTER
between each new plot.

  3. you can do a classic "delay loop" (for i in 1:10^6 {}) inside the for
loop.

  4. rather than pausing and (I guess) manually saving each plot to a
file, why not write them out to separate files using dev2bitmap() or png()
(or something) within the loop?  (e.g.  png(paste("outgraph.",i,sep="")) )
?

On Mon, 31 Jul 2000, Ko-Kang Wang wrote:

> Hi there,
> 
> I know this question may sounds strange, but here it goes:
> 
> Is it possible to delay the speed of a for loop?  For example, if I
> have:
> 
> for (i in 1:100) {
>     blah blah blah
> }
> 
> within the for loop I want to draw a series of plots, and combining the
> plots together I'll have an animation.  Problem is the loop is too fast
> and I only see the end result (which is not surprising actually).
> 
> What I want is to slow down the loop (if possible), and so I have time
> to save each "part" of the loop (or each plot when it is produced) as a
> gif file, and later on put these gif files together using some kind of
> GIF Animators.
> 
> Anyway, just wonder if the for loop can be slowed down forcebly.
> 
> Cheers,
> 
> Ko-Kang (Kevin) Wang
> 
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From y0004379 at tu-bs.de  Mon Jul 31 16:04:00 2000
From: y0004379 at tu-bs.de (Peter Malewski)
Date: Mon, 31 Jul 2000 16:04:00 +0200 (METDST)
Subject: [R] Loop removal?
In-Reply-To: <Pine.LNX.4.21.0007311343310.21144-100000@swipc30.swi.psy.uva.nl>
Message-ID: <Pine.HPX.4.21.0007311512530.20950-100000@rzpool07.rz.tu-bs.de>

On Mon, 31 Jul 2000 rijn at swi.psy.uva.nl wrote:

>   bin.index <- function(data,bins=2) {
>     # Code from Peter Malewski, added the sort command.
>     sort(rep(rep(1:bins,rep(length(data)/bins,bins)),length.out=length(data)))
>   }

with your outside-sort you have avoided a hidden bug in my example:

xx <- function(data,g=2)
      rep(rep(1:g,rep(length(data)/g,g)),length.out=length(data))
> x<- 1:7 ;cbind(x,xx(x ,2))
     x  
[1,] 1 1
[2,] 2 1
[3,] 3 1
[4,] 4 2
[5,] 5 2
[6,] 6 2
[7,] 7 1   ## !!!

is strange, but...

> xx <- function(data,g=2)sort(rep(rep(1:g,rep(length(data)/g,
g)),length.out=length(data)))
> x<- 1:7 ;cbind( sort(x) , xx(x ,2))
     x  
[1,] 1 1
[2,] 2 1
[3,] 3 1
[4,] 4 1     ##<
[5,] 5 2
[6,] 6 2
[7,] 7 2

this 1 is added to the first group. The best way, to decide to which group
the rest belongs should be (if the diffs between the elements are
unequal) the distance of the point to the next group should be considered?

example: to which groups belong the "2" ?

data  ....	1.9	2	3	...
g     1		1  	1 	2  	2


data	...	1	2	2.1	...
g    	1	1	2	2	2

P.
ps.: what happens when there is more than 1 resting element?
> 8 %% 3
[1] 2
> x<- 1:8 ;cbind(x,xx(x ,3))
     x  
[1,] 1 1
[2,] 2 1
[3,] 3 1
[4,] 4 1
[5,] 5 2
[6,] 6 2
[7,] 7 3
[8,] 8 3

???

** To YOU I'm an atheist; to God, I'm the Loyal Opposition. Woody Allen **
P.Malewski					Tel.: 0531 500965
Maschplatz 8					Email: P.Malewski at tu-bs.de
************************38114 Braunschweig********************************






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From cyg at sympatico.ca  Mon Jul 31 16:27:35 2000
From: cyg at sympatico.ca (Yves Gauvreau)
Date: Mon, 31 Jul 2000 10:27:35 -0400
Subject: [R] Loop Delaying
References: <39856971.AFE7C34F@xtra.co.nz>
Message-ID: <01a001bffafb$79a33e60$0201a8c0@Workgroup>

Hi,

How about inserting a while loop in your for loop that would do nothing
until a preset amount of time as past.

Something like:

wait <- function(wait.time = 5){
  now <- proc.time()[3]
  while(proc.time()[3] < (now + wait.time)) dum <- 0
}

Regards

YG



----- Original Message -----
From: "Ko-Kang Wang" <Ko-Kang at xtra.co.nz>
To: "R Help" <r-help at stat.math.ethz.ch>
Sent: Monday, July 31, 2000 7:56 AM
Subject: [R] Loop Delaying


> Hi there,
>
> I know this question may sounds strange, but here it goes:
>
> Is it possible to delay the speed of a for loop?  For example, if I
> have:
>
> for (i in 1:100) {
>     blah blah blah
> }
>
> within the for loop I want to draw a series of plots, and combining the
> plots together I'll have an animation.  Problem is the loop is too fast
> and I only see the end result (which is not surprising actually).
>
> What I want is to slow down the loop (if possible), and so I have time
> to save each "part" of the loop (or each plot when it is produced) as a
> gif file, and later on put these gif files together using some kind of
> GIF Animators.
>
> Anyway, just wonder if the for loop can be slowed down forcebly.
>
> Cheers,
>
> Ko-Kang (Kevin) Wang
>
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


From rijn at swi.psy.uva.nl  Mon Jul 31 16:30:53 2000
From: rijn at swi.psy.uva.nl (rijn@swi.psy.uva.nl)
Date: Mon, 31 Jul 2000 16:30:53 +0200 (CEST)
Subject: [R] Loop removal?
In-Reply-To: <Pine.HPX.4.21.0007311512530.20950-100000@rzpool07.rz.tu-bs.de>
Message-ID: <Pine.LNX.4.21.0007311614570.22334-100000@swipc30.swi.psy.uva.nl>

Peter,

> >   bin.index <- function(data,bins=2) {
> >     # Code from Peter Malewski, added the sort command.
> >     sort(rep(rep(1:bins,rep(length(data)/bins,bins)),length.out=length(data)))
> >   }
> 
> with your outside-sort you have avoided a hidden bug in my example:

Well, as R-beginner I didn't know whether it was a bug or a feature, but
adding the sort solved it for the bin=2 tests I did. I also discovered the
problem (about half an hour ago with the real data) you mentioned in your
ps:

> ps.: what happens when there is more than 1 resting element?
> > 8 %% 3
> [1] 2
> > x<- 1:8 ;cbind(x,xx(x ,3))
>      x  
> [1,] 1 1
> [2,] 2 1
> [3,] 3 1
> [4,] 4 1
> [5,] 5 2
> [6,] 6 2
> [7,] 7 3
> [8,] 8 3
> 
> ???

I solved it (hacked around it?) using the following code:

  bin.index <- function(data,bins=2) {
    bin.index <- rep(1:bins,rep(length(data)/bins,bins))
    if (length(data) %% bins) {
      bin.index <- c(bin.index,1:(length(data) %% bins))
    }
    sort(bin.index)
  }

> bin.index(1:9,bins=5)
[1] 1 1 2 2 3 3 4 4 5

(I've also considered using:

  sort(rep(
    c(rep(1:bins,rep(length(data)/bins,bins)),1:bins),
    length.out=length(data)))

but that statement is probably to complicated for me to understand easily in
a couple of days... But would this second method be the preferred way
in R?)

And regarding the issue of deciding to which group the remaining items
belongs, I've just decided to add them to the first groups. The number of
observations in each group is quite high as is the number of subjects, so I
don't expect any real problems. However, if the rebinned data should show
different results than the original data, I'll make sure to have an equal
number of cases in cell.

Thanks for all your kind help,
   Hedderik.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request at stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


